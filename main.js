/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/core/QuickFlashcardCreator.ts
var QuickFlashcardCreator_exports = {};
__export(QuickFlashcardCreator_exports, {
  QuickFlashcardCreator: () => QuickFlashcardCreator
});
var import_obsidian2, QuickFlashcardCreator;
var init_QuickFlashcardCreator = __esm({
  "src/core/QuickFlashcardCreator.ts"() {
    import_obsidian2 = require("obsidian");
    QuickFlashcardCreator = class {
      constructor(plugin) {
        this.plugin = plugin;
      }
      /**
       * 从提取内容一键创建问答卡
       * 如果有批注，使用批注作为答案
       */
      async createQuickQACard(contentUnit) {
        try {
          const annotation = this.plugin.annotationManager.getContentAnnotation(contentUnit.id);
          let question;
          let answer;
          if (annotation && annotation.content) {
            if (this.isQuestion(annotation.content)) {
              question = this.generateDefaultQuestion(contentUnit);
              answer = annotation.content;
            } else {
              question = this.generateDefaultQuestion(contentUnit);
              answer = annotation.content;
            }
          } else {
            question = this.generateDefaultQuestion(contentUnit);
            answer = contentUnit.content;
          }
          const card = await this.plugin.flashcardManager.createQACard(
            contentUnit.id,
            question,
            answer
          );
          new import_obsidian2.Notice(`\u2705 Flashcard created! (Q&A)`);
        } catch (error) {
          console.error("Error creating quick flashcard:", error);
          new import_obsidian2.Notice("\u274C Failed to create flashcard");
        }
      }
      /**
       * 从提取内容一键创建完形填空卡
       * 自动识别关键词
       */
      async createQuickClozeCard(contentUnit) {
        try {
          const keywords = this.extractKeywords(contentUnit.content);
          if (keywords.length === 0) {
            new import_obsidian2.Notice("\u26A0\uFE0F No keywords found for cloze deletion");
            return;
          }
          const deletions = keywords.map((keyword) => {
            const index = contentUnit.content.indexOf(keyword.word);
            return {
              index,
              answer: keyword.word
            };
          }).filter((d) => d.index !== -1);
          if (deletions.length === 0) {
            new import_obsidian2.Notice("\u26A0\uFE0F Could not create cloze deletions");
            return;
          }
          const card = await this.plugin.flashcardManager.createClozeCard(
            contentUnit.id,
            contentUnit.content,
            deletions
          );
          new import_obsidian2.Notice(`\u2705 Flashcard created! (Cloze with ${deletions.length} blanks)`);
        } catch (error) {
          console.error("Error creating quick cloze card:", error);
          new import_obsidian2.Notice("\u274C Failed to create flashcard");
        }
      }
      /**
       * 智能创建闪卡（自动判断类型）
       */
      async createSmartCard(contentUnit) {
        const annotation = this.plugin.annotationManager.getContentAnnotation(contentUnit.id);
        if (annotation && this.isQuestion(annotation.content)) {
          await this.createQuickQACard(contentUnit);
          return;
        }
        if (contentUnit.content.length < 200) {
          await this.createQuickQACard(contentUnit);
          return;
        }
        await this.createQuickClozeCard(contentUnit);
      }
      /**
       * 批量创建闪卡
       */
      async createBatchCards(contentUnits, type = "smart") {
        let success = 0;
        let failed = 0;
        for (const unit of contentUnits) {
          try {
            switch (type) {
              case "qa":
                await this.createQuickQACard(unit);
                break;
              case "cloze":
                await this.createQuickClozeCard(unit);
                break;
              case "smart":
                await this.createSmartCard(unit);
                break;
            }
            success++;
          } catch (error) {
            console.error("Error creating card:", error);
            failed++;
          }
        }
        return { success, failed };
      }
      /**
       * 判断文本是否是问题
       */
      isQuestion(text) {
        const questionWords = ["what", "why", "how", "when", "where", "who", "which"];
        const lowerText = text.toLowerCase().trim();
        if (lowerText.endsWith("?"))
          return true;
        for (const word of questionWords) {
          if (lowerText.startsWith(word + " "))
            return true;
        }
        if (text.includes("\u4EC0\u4E48") || text.includes("\u4E3A\u4EC0\u4E48") || text.includes("\u600E\u4E48") || text.includes("\u5982\u4F55") || text.includes("\u5417\uFF1F") || text.includes("\u5462\uFF1F")) {
          return true;
        }
        return false;
      }
      /**
       * 生成默认问题
       */
      generateDefaultQuestion(contentUnit) {
        if (contentUnit.source.heading) {
          const heading = contentUnit.source.heading.replace(/^#+\s*/, "");
          return `What is the key point about "${heading}"?`;
        }
        if (contentUnit.content.length < 50) {
          return `What does "${contentUnit.content}" mean?`;
        } else if (contentUnit.content.length < 150) {
          const firstWords = contentUnit.content.substring(0, 30) + "...";
          return `Explain: "${firstWords}"`;
        } else {
          return `What are the key points in this content?`;
        }
      }
      /**
       * 提取关键词（用于完形填空）
       */
      extractKeywords(text) {
        const words = text.match(/\b[A-Za-z]{3,}\b/g) || [];
        const stopWords = /* @__PURE__ */ new Set([
          "the",
          "is",
          "at",
          "which",
          "on",
          "a",
          "an",
          "and",
          "or",
          "but",
          "in",
          "with",
          "to",
          "for",
          "of",
          "as",
          "by",
          "this",
          "that",
          "from",
          "they",
          "we",
          "say",
          "her",
          "she",
          "he",
          "will",
          "my",
          "one",
          "all",
          "would",
          "there",
          "their",
          "what",
          "so",
          "up",
          "out",
          "if",
          "about",
          "who",
          "get",
          "which",
          "go",
          "me",
          "when",
          "make",
          "can",
          "like",
          "time",
          "no",
          "just",
          "him",
          "know",
          "take",
          "people",
          "into",
          "year",
          "your",
          "good",
          "some",
          "could",
          "them",
          "see",
          "other"
        ]);
        const wordFreq = /* @__PURE__ */ new Map();
        words.forEach((word) => {
          const lower = word.toLowerCase();
          if (!stopWords.has(lower) && word.length > 3) {
            wordFreq.set(word, (wordFreq.get(word) || 0) + 1);
          }
        });
        const scored = Array.from(wordFreq.entries()).map(([word, freq]) => {
          let score = freq;
          if (word.length > 8)
            score += 2;
          else if (word.length > 6)
            score += 1;
          if (word[0] === word[0].toUpperCase())
            score += 1;
          return { word, score };
        });
        return scored.sort((a, b) => b.score - a.score).slice(0, 3);
      }
    };
  }
});

// src/ui/FlashcardCreateModal.ts
var FlashcardCreateModal_exports = {};
__export(FlashcardCreateModal_exports, {
  FlashcardCreateModal: () => FlashcardCreateModal
});
var import_obsidian3, FlashcardCreateModal;
var init_FlashcardCreateModal = __esm({
  "src/ui/FlashcardCreateModal.ts"() {
    import_obsidian3 = require("obsidian");
    FlashcardCreateModal = class extends import_obsidian3.Modal {
      constructor(app, plugin, contentUnit, onSave) {
        super(app);
        this.plugin = plugin;
        this.cardType = "qa";
        // Q&A 字段
        this.question = "";
        this.answer = "";
        // Cloze 字段
        this.clozeText = "";
        this.selectedRanges = [];
        this.contentUnit = contentUnit;
        this.onSave = onSave;
        this.answer = contentUnit.content;
        this.clozeText = contentUnit.content;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.addClass("flashcard-create-modal");
        contentEl.createEl("h2", { text: "Create Flashcard" });
        const contentPreview = contentEl.createDiv({ cls: "content-preview" });
        contentPreview.createEl("h3", { text: "Source Content:" });
        contentPreview.createEl("blockquote", { text: this.contentUnit.content });
        new import_obsidian3.Setting(contentEl).setName("Card Type").setDesc("Choose the type of flashcard").addDropdown((dropdown) => {
          dropdown.addOption("qa", "\u{1F4DD} Question & Answer").addOption("cloze", "\u270F\uFE0F Cloze Deletion").setValue(this.cardType).onChange((value) => {
            this.cardType = value;
            this.refreshCardInputs();
          });
        });
        this.cardInputContainer = contentEl.createDiv({ cls: "card-input-container" });
        this.refreshCardInputs();
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => this.close());
        const saveBtn = buttonContainer.createEl("button", {
          text: "Create Flashcard",
          cls: "mod-cta"
        });
        saveBtn.addEventListener("click", () => this.saveFlashcard());
        this.addStyles();
      }
      refreshCardInputs() {
        this.cardInputContainer.empty();
        if (this.cardType === "qa") {
          this.renderQAInputs();
        } else {
          this.renderClozeInputs();
        }
      }
      renderQAInputs() {
        new import_obsidian3.Setting(this.cardInputContainer).setName("Question (Front)").setDesc("What question should this card ask?").addTextArea((text) => {
          text.setPlaceholder("Enter your question...").setValue(this.question).onChange((value) => {
            this.question = value;
          });
          text.inputEl.rows = 3;
          text.inputEl.style.width = "100%";
        });
        new import_obsidian3.Setting(this.cardInputContainer).setName("Answer (Back)").setDesc("What is the correct answer?").addTextArea((text) => {
          text.setPlaceholder("Enter the answer...").setValue(this.answer).onChange((value) => {
            this.answer = value;
          });
          text.inputEl.rows = 3;
          text.inputEl.style.width = "100%";
        });
        const hint = this.cardInputContainer.createDiv({ cls: "input-hint" });
        hint.createEl("small", {
          text: "\u{1F4A1} Tip: You can use the source content as the answer, or write your own."
        });
      }
      renderClozeInputs() {
        const container = this.cardInputContainer;
        container.createEl("h3", { text: "Cloze Deletion" });
        container.createEl("p", {
          text: "Select text to hide (cloze deletion). Click on words to toggle selection.",
          cls: "cloze-instruction"
        });
        const textContainer = container.createDiv({ cls: "cloze-text-container" });
        this.renderSelectableText(textContainer);
        if (this.selectedRanges.length > 0) {
          const selectedList = container.createDiv({ cls: "selected-deletions" });
          selectedList.createEl("h4", { text: "Selected Deletions:" });
          this.selectedRanges.forEach((range, index) => {
            const item = selectedList.createDiv({ cls: "deletion-item" });
            item.createSpan({ text: `${index + 1}. ` });
            item.createSpan({
              text: range.text,
              cls: "deletion-text"
            });
            const removeBtn = item.createEl("button", {
              text: "\xD7",
              cls: "remove-deletion-btn"
            });
            removeBtn.addEventListener("click", () => {
              this.selectedRanges.splice(index, 1);
              this.refreshCardInputs();
            });
          });
        }
        const preview = container.createDiv({ cls: "cloze-preview" });
        preview.createEl("h4", { text: "Preview:" });
        preview.createDiv({
          text: this.generateClozePreview(),
          cls: "preview-text"
        });
      }
      renderSelectableText(container) {
        const words = this.clozeText.split(/(\s+)/);
        let currentIndex = 0;
        words.forEach((word) => {
          const wordStart = currentIndex;
          const wordEnd = currentIndex + word.length;
          if (word.trim()) {
            const isSelected = this.selectedRanges.some(
              (range) => range.start === wordStart && range.end === wordEnd
            );
            const span = container.createEl("span", {
              text: word,
              cls: isSelected ? "cloze-word selected" : "cloze-word"
            });
            span.addEventListener("click", () => {
              this.toggleWordSelection(wordStart, wordEnd, word);
            });
          } else {
            container.createEl("span", { text: word });
          }
          currentIndex = wordEnd;
        });
      }
      toggleWordSelection(start, end, text) {
        const index = this.selectedRanges.findIndex(
          (range) => range.start === start && range.end === end
        );
        if (index > -1) {
          this.selectedRanges.splice(index, 1);
        } else {
          this.selectedRanges.push({ start, end, text });
          this.selectedRanges.sort((a, b) => a.start - b.start);
        }
        this.refreshCardInputs();
      }
      generateClozePreview() {
        let preview = this.clozeText;
        const sorted = [...this.selectedRanges].sort((a, b) => b.start - a.start);
        for (const range of sorted) {
          const before = preview.substring(0, range.start);
          const after = preview.substring(range.end);
          preview = `${before}[...]${after}`;
        }
        return preview;
      }
      async saveFlashcard() {
        try {
          if (this.cardType === "qa") {
            if (!this.question.trim()) {
              new import_obsidian3.Notice("Please enter a question");
              return;
            }
            if (!this.answer.trim()) {
              new import_obsidian3.Notice("Please enter an answer");
              return;
            }
            await this.plugin.flashcardManager.createQACard(
              this.contentUnit.id,
              this.question,
              this.answer
            );
            new import_obsidian3.Notice("Q&A flashcard created!");
          } else {
            if (this.selectedRanges.length === 0) {
              new import_obsidian3.Notice("Please select at least one word to hide");
              return;
            }
            const deletions = this.selectedRanges.map((range) => ({
              index: range.start,
              answer: range.text
            }));
            await this.plugin.flashcardManager.createClozeCard(
              this.contentUnit.id,
              this.clozeText,
              deletions
            );
            new import_obsidian3.Notice("Cloze flashcard created!");
          }
          this.close();
          this.onSave();
        } catch (error) {
          console.error("Error creating flashcard:", error);
          new import_obsidian3.Notice("Error creating flashcard");
        }
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      .flashcard-create-modal {
        padding: 20px;
        max-width: 600px;
      }

      .content-preview {
        margin: 20px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .content-preview h3 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .content-preview blockquote {
        margin: 0;
        padding: 10px;
        border-left: 3px solid var(--interactive-accent);
        background: var(--background-primary);
        border-radius: 4px;
      }

      .card-input-container {
        margin: 20px 0;
      }

      .input-hint {
        margin-top: 10px;
        padding: 10px;
        background: var(--background-secondary);
        border-radius: 4px;
        color: var(--text-muted);
      }

      /* Cloze \u6837\u5F0F */
      .cloze-instruction {
        color: var(--text-muted);
        font-size: 0.9em;
        margin-bottom: 15px;
      }

      .cloze-text-container {
        padding: 15px;
        background: var(--background-primary);
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        line-height: 1.8;
        margin-bottom: 15px;
        cursor: default;
      }

      .cloze-word {
        padding: 2px 4px;
        margin: 0 1px;
        border-radius: 3px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .cloze-word:hover {
        background: var(--background-modifier-hover);
      }

      .cloze-word.selected {
        background: var(--interactive-accent);
        color: white;
        font-weight: 500;
      }

      .selected-deletions {
        margin: 15px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .selected-deletions h4 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .deletion-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 6px 10px;
        background: var(--background-primary);
        border-radius: 4px;
        margin-bottom: 6px;
      }

      .deletion-text {
        flex: 1;
        font-weight: 500;
        color: var(--interactive-accent);
      }

      .remove-deletion-btn {
        padding: 2px 8px;
        background: var(--background-modifier-error);
        color: white;
        border: none;
        border-radius: 3px;
        cursor: pointer;
        font-size: 16px;
        line-height: 1;
      }

      .remove-deletion-btn:hover {
        background: var(--color-red);
      }

      .cloze-preview {
        margin: 15px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .cloze-preview h4 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .preview-text {
        padding: 10px;
        background: var(--background-primary);
        border-radius: 4px;
        line-height: 1.6;
      }

      .modal-button-container {
        display: flex;
        gap: 10px;
        justify-content: flex-end;
        margin-top: 20px;
      }

      .modal-button-container button {
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
      }
    `;
        document.head.appendChild(styleEl);
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
  }
});

// src/ui/OverviewView.ts
var OverviewView_exports = {};
__export(OverviewView_exports, {
  BatchCreateModal: () => BatchCreateModal,
  OverviewView: () => OverviewView,
  VIEW_TYPE_OVERVIEW: () => VIEW_TYPE_OVERVIEW
});
var import_obsidian4, VIEW_TYPE_OVERVIEW, OverviewView, BatchCreateModal, ConfirmModal;
var init_OverviewView = __esm({
  "src/ui/OverviewView.ts"() {
    import_obsidian4 = require("obsidian");
    init_QuickFlashcardCreator();
    VIEW_TYPE_OVERVIEW = "learning-system-overview";
    OverviewView = class extends import_obsidian4.ItemView {
      constructor(leaf, plugin) {
        super(leaf);
        //   private contentEl: HTMLElement;
        this.groupBy = "file";
        this.searchQuery = "";
        this.batchMode = false;
        this.selectedUnitIds = /* @__PURE__ */ new Set();
        this.plugin = plugin;
        this.quickCreator = new QuickFlashcardCreator(plugin);
      }
      getViewType() {
        return VIEW_TYPE_OVERVIEW;
      }
      getDisplayText() {
        return "Learning Overview";
      }
      getIcon() {
        return "layout-list";
      }
      async onOpen() {
        const container = this.containerEl.children[1];
        container.empty();
        this.createToolbar(container);
        this.contentEl = container.createDiv({ cls: "learning-system-content" });
        await this.refresh();
        this.addStyles();
      }
      async onClose() {
      }
      // 添加到 OverviewView 类中
      scrollToFile(filePath) {
        setTimeout(() => {
          const fileGroups = this.contentEl.querySelectorAll(".file-group");
          fileGroups.forEach((group) => {
            var _a, _b;
            const header = group.querySelector(".group-header");
            if ((_b = header == null ? void 0 : header.textContent) == null ? void 0 : _b.includes(((_a = filePath.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || "")) {
              group.scrollIntoView({ behavior: "smooth", block: "start" });
            }
          });
        }, 100);
      }
      createToolbar(container) {
        const toolbar = container.createDiv({ cls: "learning-system-toolbar" });
        const searchContainer = toolbar.createDiv({ cls: "search-container" });
        const searchInput = searchContainer.createEl("input", {
          type: "text",
          placeholder: "Search content...",
          cls: "search-input"
        });
        searchInput.addEventListener("input", (e) => {
          this.searchQuery = e.target.value;
          this.refresh();
        });
        const groupContainer = toolbar.createDiv({ cls: "group-container" });
        groupContainer.createSpan({ text: "Group by: ", cls: "group-label" });
        const groupSelect = groupContainer.createEl("select", { cls: "group-select" });
        const options = [
          { value: "file", label: "File" },
          { value: "tag", label: "Tag" },
          { value: "date", label: "Date" }
        ];
        options.forEach((opt) => {
          const option = groupSelect.createEl("option", {
            value: opt.value,
            text: opt.label
          });
          if (opt.value === this.groupBy) {
            option.selected = true;
          }
        });
        groupSelect.addEventListener("change", (e) => {
          this.groupBy = e.target.value;
          this.refresh();
        });
        const batchActions = toolbar.createDiv({ cls: "batch-actions-overview" });
        const batchModeBtn = batchActions.createEl("button", {
          text: this.batchMode ? "\u2713 Done" : "\u2610 Batch Mode",
          cls: "batch-mode-btn"
        });
        batchModeBtn.addEventListener("click", () => {
          this.batchMode = !this.batchMode;
          if (!this.batchMode) {
            this.selectedUnitIds.clear();
          }
          this.refresh();
        });
        if (this.batchMode) {
          const selectAllBtn = batchActions.createEl("button", {
            text: this.isAllSelected() ? "\u2611 Deselect All" : "\u2610 Select All",
            cls: "select-all-btn"
          });
          selectAllBtn.addEventListener("click", () => {
            this.toggleSelectAll();
          });
          const batchDeleteBtn = batchActions.createEl("button", {
            text: `\u{1F5D1}\uFE0F Delete (${this.selectedUnitIds.size})`,
            cls: "batch-delete-btn"
          });
          batchDeleteBtn.addEventListener("click", () => {
            this.batchDeleteNotes();
          });
          const batchCreateBtn = batchActions.createEl("button", {
            text: `\u26A1 Create Cards (${this.selectedUnitIds.size})`,
            cls: "batch-create-cards-btn"
          });
          batchCreateBtn.addEventListener("click", () => {
            this.batchCreateFlashcards();
          });
        } else {
          const batchCreateAllBtn = batchActions.createEl("button", {
            text: "\u26A1 Batch Create Cards",
            cls: "batch-create-btn"
          });
          batchCreateAllBtn.addEventListener("click", () => this.showBatchCreateModal());
        }
        const refreshBtn = toolbar.createEl("button", {
          text: "\u27F3",
          cls: "refresh-btn"
        });
        refreshBtn.addEventListener("click", () => this.refresh());
        const stats = toolbar.createDiv({ cls: "stats-container" });
        const totalCount = this.plugin.dataManager.getAllContentUnits().length;
        stats.createSpan({ text: `Total: ${totalCount}`, cls: "stats-text" });
      }
      async refresh() {
        this.contentEl.empty();
        let units = this.plugin.dataManager.getAllContentUnits();
        if (this.searchQuery) {
          const query = this.searchQuery.toLowerCase();
          units = units.filter(
            (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
          );
        }
        if (units.length === 0) {
          this.contentEl.createDiv({
            text: this.searchQuery ? "No results found" : "No content extracted yet",
            cls: "empty-state"
          });
          return;
        }
        switch (this.groupBy) {
          case "file":
            this.renderByFile(units);
            break;
          case "tag":
            this.renderByTag(units);
            break;
          case "date":
            this.renderByDate(units);
            break;
        }
      }
      renderByFile(units) {
        const grouped = /* @__PURE__ */ new Map();
        units.forEach((unit) => {
          if (!grouped.has(unit.source.file)) {
            grouped.set(unit.source.file, []);
          }
          grouped.get(unit.source.file).push(unit);
        });
        const sortedFiles = Array.from(grouped.keys()).sort();
        sortedFiles.forEach((filePath) => {
          const fileUnits = grouped.get(filePath);
          this.renderFileGroup(filePath, fileUnits);
        });
      }
      renderFileGroup(filePath, units) {
        var _a;
        const groupContainer = this.contentEl.createDiv({ cls: "file-group" });
        const header = groupContainer.createDiv({ cls: "group-header" });
        const fileName = ((_a = filePath.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || filePath;
        const titleEl = header.createDiv({ cls: "group-title" });
        titleEl.createSpan({ text: "\u{1F4C4} ", cls: "group-icon" });
        titleEl.createSpan({ text: fileName, cls: "group-name" });
        header.createSpan({ text: `${units.length}`, cls: "count-badge" });
        const collapseBtn = header.createSpan({ text: "\u25BC", cls: "collapse-btn" });
        const fileAnnotations = this.plugin.annotationManager.getFileAnnotations(filePath);
        if (fileAnnotations.length > 0) {
          const fileAnnotationDisplay = groupContainer.createDiv({
            cls: "file-annotation-display"
          });
          fileAnnotations.forEach((ann) => {
            const annEl = fileAnnotationDisplay.createDiv({ cls: "file-annotation-item" });
            annEl.createEl("strong", { text: "\u{1F4CC} " });
            annEl.createSpan({ text: ann.content });
          });
        }
        const contentContainer = groupContainer.createDiv({ cls: "group-content" });
        units.forEach((unit) => {
          this.renderContentUnit(contentContainer, unit);
        });
        let isCollapsed = false;
        collapseBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          isCollapsed = !isCollapsed;
          contentContainer.style.display = isCollapsed ? "none" : "block";
          collapseBtn.textContent = isCollapsed ? "\u25B6" : "\u25BC";
        });
        header.addEventListener("click", async () => {
          const file = this.app.vault.getAbstractFileByPath(filePath);
          if (file instanceof import_obsidian4.TFile) {
            await this.app.workspace.getLeaf(false).openFile(file);
          }
        });
      }
      renderContentUnit(container, unit) {
        const card = container.createDiv({ cls: "content-card" });
        if (this.batchMode) {
          const checkbox = card.createEl("input", {
            type: "checkbox",
            cls: "batch-checkbox"
          });
          checkbox.setAttribute("data-unit-id", unit.id);
          checkbox.checked = this.selectedUnitIds.has(unit.id);
          checkbox.addEventListener("change", (e) => {
            if (e.target.checked) {
              this.selectedUnitIds.add(unit.id);
            } else {
              this.selectedUnitIds.delete(unit.id);
            }
            this.updateBatchButtons();
          });
        }
        const contentArea = card.createDiv({ cls: "card-content" });
        const typeIcon = this.getTypeIcon(unit.type);
        contentArea.createSpan({ text: typeIcon + " ", cls: "type-icon" });
        const contentText = contentArea.createSpan({
          text: unit.content,
          cls: "content-text clickable-content"
        });
        contentText.addEventListener("click", (e) => {
          var _a;
          e.stopPropagation();
          this.showAnnotationInput(card, unit, (_a = this.plugin.annotationManager.getContentAnnotation(unit.id)) == null ? void 0 : _a.content);
        });
        if (unit.annotationId) {
          contentArea.createSpan({
            text: "\u{1F4DD}",
            cls: "annotation-badge has-annotation",
            attr: { title: "Has annotation" }
          });
        }
        if (unit.flashcardIds.length > 0) {
          contentArea.createSpan({
            text: "\u{1F0CF}",
            cls: "flashcard-badge",
            attr: { title: `${unit.flashcardIds.length} flashcard(s)` }
          });
        }
        const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
        if (annotation) {
          const annotationDisplay = card.createDiv({ cls: "annotation-display" });
          if (annotation.badge) {
            const badge = annotationDisplay.createSpan({
              text: annotation.badge.text,
              cls: "annotation-badge-display"
            });
            badge.style.backgroundColor = annotation.badge.color;
          }
          const annotationContent = annotationDisplay.createDiv({
            cls: "annotation-content-display"
          });
          annotationContent.createEl("strong", { text: "\u{1F4AC} " });
          annotationContent.createSpan({ text: annotation.content });
          const timestamp = annotationDisplay.createDiv({ cls: "annotation-timestamp" });
          const date = new Date(annotation.metadata.createdAt);
          timestamp.textContent = date.toLocaleString();
          annotationDisplay.addEventListener("click", (e) => {
            e.stopPropagation();
            this.showAnnotationInput(card, unit, annotation.content);
          });
        }
        const metaArea = card.createDiv({ cls: "card-meta" });
        if (unit.metadata.tags.length > 0) {
          const tagsContainer = metaArea.createSpan({ cls: "tags-container" });
          unit.metadata.tags.forEach((tag) => {
            tagsContainer.createSpan({ text: tag, cls: "tag" });
          });
        }
        if (unit.source.heading) {
          metaArea.createSpan({
            text: `\u{1F4CD} ${unit.source.heading}`,
            cls: "heading-info"
          });
        }
        const actionsArea = card.createDiv({ cls: "card-actions" });
        const jumpBtn = actionsArea.createEl("button", {
          text: "\u2197",
          cls: "action-btn jump-btn",
          attr: { title: "Jump to source" }
        });
        jumpBtn.addEventListener("click", async (e) => {
          e.stopPropagation();
          await this.jumpToSource(unit);
        });
        const flashcardGroup = actionsArea.createDiv({ cls: "flashcard-btn-group" });
        const quickCardBtn = flashcardGroup.createEl("button", {
          text: "\u26A1",
          cls: "action-btn quick-card-btn",
          attr: { title: "Quick create flashcard (smart)" }
        });
        quickCardBtn.addEventListener("click", async (e) => {
          e.stopPropagation();
          await this.quickCreator.createSmartCard(unit);
          await this.refresh();
        });
        const moreCardBtn = flashcardGroup.createEl("button", {
          text: "\u25BC",
          cls: "action-btn more-card-btn",
          attr: { title: "More flashcard options" }
        });
        moreCardBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          this.showFlashcardMenu(e, unit);
        });
        const deleteBtn = actionsArea.createEl("button", {
          text: "\u{1F5D1}",
          cls: "action-btn delete-btn",
          attr: { title: "Delete" }
        });
        deleteBtn.addEventListener("click", async (e) => {
          e.stopPropagation();
          await this.deleteContentUnit(unit);
        });
        card.addEventListener("contextmenu", (e) => {
          e.preventDefault();
          this.showContextMenu(e, unit);
        });
      }
      renderByTag(units) {
        const grouped = /* @__PURE__ */ new Map();
        units.forEach((unit) => {
          if (unit.metadata.tags.length === 0) {
            if (!grouped.has("Untagged")) {
              grouped.set("Untagged", []);
            }
            grouped.get("Untagged").push(unit);
          } else {
            unit.metadata.tags.forEach((tag) => {
              if (!grouped.has(tag)) {
                grouped.set(tag, []);
              }
              grouped.get(tag).push(unit);
            });
          }
        });
        const sortedTags = Array.from(grouped.keys()).sort();
        sortedTags.forEach((tag) => {
          const tagUnits = grouped.get(tag);
          this.renderTagGroup(tag, tagUnits);
        });
      }
      renderTagGroup(tag, units) {
        const groupContainer = this.contentEl.createDiv({ cls: "tag-group" });
        const header = groupContainer.createDiv({ cls: "group-header" });
        const titleEl = header.createDiv({ cls: "group-title" });
        titleEl.createSpan({ text: "\u{1F3F7}\uFE0F ", cls: "group-icon" });
        titleEl.createSpan({ text: tag, cls: "group-name" });
        header.createSpan({ text: `${units.length}`, cls: "count-badge" });
        const collapseBtn = header.createSpan({ text: "\u25BC", cls: "collapse-btn" });
        const contentContainer = groupContainer.createDiv({ cls: "group-content" });
        units.forEach((unit) => {
          this.renderContentUnit(contentContainer, unit);
        });
        let isCollapsed = false;
        collapseBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          isCollapsed = !isCollapsed;
          contentContainer.style.display = isCollapsed ? "none" : "block";
          collapseBtn.textContent = isCollapsed ? "\u25B6" : "\u25BC";
        });
      }
      renderByDate(units) {
        const grouped = /* @__PURE__ */ new Map();
        units.forEach((unit) => {
          const date = new Date(unit.metadata.createdAt);
          const dateKey = date.toLocaleDateString();
          if (!grouped.has(dateKey)) {
            grouped.set(dateKey, []);
          }
          grouped.get(dateKey).push(unit);
        });
        const sortedDates = Array.from(grouped.keys()).sort((a, b) => {
          return new Date(b).getTime() - new Date(a).getTime();
        });
        sortedDates.forEach((date) => {
          const dateUnits = grouped.get(date);
          this.renderDateGroup(date, dateUnits);
        });
      }
      renderDateGroup(date, units) {
        const groupContainer = this.contentEl.createDiv({ cls: "date-group" });
        const header = groupContainer.createDiv({ cls: "group-header" });
        const titleEl = header.createDiv({ cls: "group-title" });
        titleEl.createSpan({ text: "\u{1F4C5} ", cls: "group-icon" });
        titleEl.createSpan({ text: date, cls: "group-name" });
        header.createSpan({ text: `${units.length}`, cls: "count-badge" });
        const collapseBtn = header.createSpan({ text: "\u25BC", cls: "collapse-btn" });
        const contentContainer = groupContainer.createDiv({ cls: "group-content" });
        units.forEach((unit) => {
          this.renderContentUnit(contentContainer, unit);
        });
        let isCollapsed = false;
        collapseBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          isCollapsed = !isCollapsed;
          contentContainer.style.display = isCollapsed ? "none" : "block";
          collapseBtn.textContent = isCollapsed ? "\u25B6" : "\u25BC";
        });
      }
      showAnnotationInput(card, unit, existingText) {
        let inputContainer = card.querySelector(".annotation-input-container");
        if (inputContainer) {
          inputContainer.remove();
          return;
        }
        inputContainer = card.createDiv({ cls: "annotation-input-container" });
        const textarea = inputContainer.createEl("textarea", {
          cls: "annotation-textarea",
          placeholder: "Add comment..."
        });
        textarea.value = existingText || "";
        textarea.rows = 3;
        const buttonArea = inputContainer.createDiv({ cls: "annotation-buttons" });
        if (existingText) {
          const deleteBtn = buttonArea.createEl("button", {
            text: "Delete",
            cls: "annotation-delete-btn"
          });
          deleteBtn.addEventListener("click", async () => {
            const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
            if (annotation) {
              await this.plugin.annotationManager.deleteAnnotation(annotation.id);
              new import_obsidian4.Notice("Annotation deleted");
              await this.refresh();
            }
          });
        }
        const saveBtn = buttonArea.createEl("button", {
          text: "Save",
          cls: "annotation-save-btn"
        });
        const saveAnnotation = async () => {
          const text = textarea.value.trim();
          if (!text) {
            inputContainer.remove();
            return;
          }
          try {
            const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
            if (annotation) {
              await this.plugin.annotationManager.updateAnnotation(annotation.id, {
                content: text
              });
            } else {
              await this.plugin.annotationManager.addContentAnnotation(
                unit.id,
                text
              );
            }
            await this.refresh();
          } catch (error) {
            console.error("Error saving annotation:", error);
            new import_obsidian4.Notice("Error saving annotation");
          }
        };
        saveBtn.addEventListener("click", saveAnnotation);
        textarea.addEventListener("keydown", (e) => {
          if (e.key === "Enter" && (e.ctrlKey || e.metaKey)) {
            e.preventDefault();
            saveAnnotation();
          }
          if (e.key === "Escape") {
            e.preventDefault();
            inputContainer.remove();
          }
        });
        textarea.focus();
      }
      showFlashcardMenu(e, unit) {
        const menu = new import_obsidian4.Menu();
        menu.addItem(
          (item) => item.setTitle("\u26A1 Smart create").setIcon("zap").onClick(async () => {
            await this.quickCreator.createSmartCard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("\u{1F4DD} Create Q&A card").setIcon("message-square").onClick(async () => {
            await this.quickCreator.createQuickQACard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("\u270F\uFE0F Create Cloze card").setIcon("edit").onClick(async () => {
            await this.quickCreator.createQuickClozeCard(unit);
            await this.refresh();
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("\u{1F3A8} Custom card...").setIcon("settings").onClick(async () => {
            const { FlashcardCreateModal: FlashcardCreateModal2 } = await Promise.resolve().then(() => (init_FlashcardCreateModal(), FlashcardCreateModal_exports));
            const modal = new FlashcardCreateModal2(
              this.app,
              this.plugin,
              unit,
              async () => {
                await this.refresh();
              }
            );
            modal.open();
          })
        );
        menu.showAtMouseEvent(e);
      }
      async showBatchCreateModal() {
        const units = this.plugin.dataManager.getAllContentUnits();
        const unitsWithoutCards = units.filter((u) => u.flashcardIds.length === 0);
        if (unitsWithoutCards.length === 0) {
          new import_obsidian4.Notice("All content already has flashcards!");
          return;
        }
        const modal = new BatchCreateModal(
          this.app,
          this.plugin,
          this.quickCreator,
          unitsWithoutCards,
          () => this.refresh()
        );
        modal.open();
      }
      isAllSelected() {
        const units = this.plugin.dataManager.getAllContentUnits();
        let filteredUnits = units;
        if (this.searchQuery) {
          const query = this.searchQuery.toLowerCase();
          filteredUnits = units.filter(
            (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
          );
        }
        return filteredUnits.length > 0 && this.selectedUnitIds.size === filteredUnits.length;
      }
      toggleSelectAll() {
        const units = this.plugin.dataManager.getAllContentUnits();
        let filteredUnits = units;
        if (this.searchQuery) {
          const query = this.searchQuery.toLowerCase();
          filteredUnits = units.filter(
            (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
          );
        }
        if (this.isAllSelected()) {
          this.selectedUnitIds.clear();
        } else {
          filteredUnits.forEach((unit) => {
            this.selectedUnitIds.add(unit.id);
          });
        }
        this.updateBatchButtons();
        this.updateCheckboxes();
      }
      updateCheckboxes() {
        const container = this.containerEl.children[1];
        const checkboxes = container.querySelectorAll(".batch-checkbox");
        checkboxes.forEach((checkbox) => {
          const unitId = checkbox.getAttribute("data-unit-id");
          if (unitId) {
            checkbox.checked = this.selectedUnitIds.has(unitId);
          }
        });
      }
      updateBatchButtons() {
        const toolbar = this.containerEl.querySelector(".learning-system-toolbar");
        if (toolbar) {
          const batchActions = toolbar.querySelector(".batch-actions-overview");
          if (batchActions) {
            const selectAllBtn = batchActions.querySelector(".select-all-btn");
            const deleteBtn = batchActions.querySelector(".batch-delete-btn");
            const createBtn = batchActions.querySelector(".batch-create-cards-btn");
            if (selectAllBtn) {
              selectAllBtn.textContent = this.isAllSelected() ? "\u2611 Deselect All" : "\u2610 Select All";
            }
            if (deleteBtn) {
              deleteBtn.textContent = `\u{1F5D1}\uFE0F Delete (${this.selectedUnitIds.size})`;
            }
            if (createBtn) {
              createBtn.textContent = `\u26A1 Create Cards (${this.selectedUnitIds.size})`;
            }
          }
        }
      }
      async batchDeleteNotes() {
        if (this.selectedUnitIds.size === 0) {
          new import_obsidian4.Notice("\u26A0\uFE0F Please select notes to delete");
          return;
        }
        if (!confirm(`Are you sure you want to delete ${this.selectedUnitIds.size} selected notes?`)) {
          return;
        }
        let success = 0;
        let failed = 0;
        for (const unitId of this.selectedUnitIds) {
          try {
            await this.plugin.dataManager.deleteContentUnit(unitId);
            success++;
          } catch (error) {
            console.error("Error deleting note:", error);
            failed++;
          }
        }
        this.selectedUnitIds.clear();
        new import_obsidian4.Notice(`\u2705 Deleted ${success} notes${failed > 0 ? `, ${failed} failed` : ""}`);
        this.refresh();
      }
      async batchCreateFlashcards() {
        if (this.selectedUnitIds.size === 0) {
          new import_obsidian4.Notice("\u26A0\uFE0F Please select notes to create flashcards");
          return;
        }
        const units = Array.from(this.selectedUnitIds).map((id) => this.plugin.dataManager.getContentUnit(id)).filter((u) => u !== void 0 && u.flashcardIds.length === 0);
        if (units.length === 0) {
          new import_obsidian4.Notice("\u26A0\uFE0F Selected notes already have flashcards");
          return;
        }
        const modal = new BatchCreateModal(
          this.app,
          this.plugin,
          this.quickCreator,
          units,
          () => {
            this.selectedUnitIds.clear();
            this.refresh();
          }
        );
        modal.open();
      }
      async jumpToSource(unit) {
        const file = this.app.vault.getAbstractFileByPath(unit.source.file);
        if (!(file instanceof import_obsidian4.TFile))
          return;
        const leaf = this.app.workspace.getLeaf(false);
        await leaf.openFile(file);
        const view = this.app.workspace.getActiveViewOfType(import_obsidian4.ItemView);
        if (view) {
          const editor = view.editor;
          if (editor) {
            editor.setCursor({ line: unit.source.position.line, ch: 0 });
            editor.scrollIntoView({
              from: { line: unit.source.position.line, ch: 0 },
              to: { line: unit.source.position.line, ch: 0 }
            }, true);
            setTimeout(() => {
              editor.setSelection(
                { line: unit.source.position.line, ch: 0 },
                { line: unit.source.position.line, ch: 999 }
              );
            }, 100);
          }
        }
      }
      async deleteContentUnit(unit) {
        const confirmed = await this.confirmDelete(unit);
        if (!confirmed)
          return;
        await this.plugin.dataManager.deleteContentUnit(unit.id);
        await this.refresh();
      }
      async confirmDelete(unit) {
        return new Promise((resolve) => {
          const modal = new ConfirmModal(
            this.app,
            "Delete content",
            `Are you sure you want to delete this content?

"${unit.content.substring(0, 50)}..."`,
            () => resolve(true),
            () => resolve(false)
          );
          modal.open();
        });
      }
      showContextMenu(e, unit) {
        const menu = new import_obsidian4.Menu();
        menu.addItem(
          (item) => item.setTitle("Jump to source").setIcon("arrow-right").onClick(() => this.jumpToSource(unit))
        );
        const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
        menu.addItem(
          (item) => item.setTitle(annotation ? "Edit annotation" : "Add annotation").setIcon("pencil").onClick(() => {
            const card = e.target.closest(".content-card");
            if (card) {
              this.showAnnotationInput(card, unit, annotation == null ? void 0 : annotation.content);
            }
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("\u26A1 Quick create flashcard").setIcon("zap").onClick(async () => {
            await this.quickCreator.createSmartCard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("Create Q&A card").setIcon("message-square").onClick(async () => {
            await this.quickCreator.createQuickQACard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("Create Cloze card").setIcon("edit").onClick(async () => {
            await this.quickCreator.createQuickClozeCard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("Custom flashcard...").setIcon("settings").onClick(async () => {
            const { FlashcardCreateModal: FlashcardCreateModal2 } = await Promise.resolve().then(() => (init_FlashcardCreateModal(), FlashcardCreateModal_exports));
            const modal = new FlashcardCreateModal2(
              this.app,
              this.plugin,
              unit,
              async () => {
                await this.refresh();
              }
            );
            modal.open();
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("View Statistics").setIcon("bar-chart").onClick(() => {
            this.plugin.activateStats();
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("Delete").setIcon("trash").onClick(() => this.deleteContentUnit(unit))
        );
        menu.showAtMouseEvent(e);
      }
      getTypeIcon(type) {
        const icons = {
          "highlight": "\u2728",
          "bold": "**",
          "tag": "\u{1F3F7}",
          "custom": "\u2B50"
        };
        return icons[type] || "\u2022";
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      /* \u5DE5\u5177\u680F\u6837\u5F0F */
      .learning-system-toolbar {
        padding: 10px;
        border-bottom: 1px solid var(--background-modifier-border);
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .search-container { display: flex; }

      .search-input {
        flex: 1;
        padding: 6px 10px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
      }

      .group-container {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .group-label {
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .group-select {
        padding: 4px 8px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
      }

      .refresh-btn {
        padding: 4px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
        cursor: pointer;
        font-size: 16px;
      }

      .refresh-btn:hover { background: var(--background-modifier-hover); }

      .stats-container {
        color: var(--text-muted);
        font-size: 0.9em;
      }

      /* \u5185\u5BB9\u533A\u57DF\u6837\u5F0F */
      .learning-system-content {
        padding: 10px;
        overflow-y: auto;
      }

      .empty-state {
        text-align: center;
        color: var(--text-muted);
        padding: 40px 20px;
      }

      .file-group, .tag-group, .date-group { margin-bottom: 20px; }

      .group-header {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        background: var(--background-secondary);
        border-radius: 6px;
        cursor: pointer;
        margin-bottom: 8px;
      }

      .group-header:hover { background: var(--background-modifier-hover); }

      .group-title {
        flex: 1;
        display: flex;
        align-items: center;
        font-weight: 500;
      }

      .group-icon { margin-right: 4px; }

      .count-badge {
        background: var(--interactive-accent);
        color: white;
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 0.85em;
        font-weight: 500;
      }

      .collapse-btn {
        color: var(--text-muted);
        user-select: none;
        cursor: pointer;
      }

      /* \u6587\u4EF6\u6279\u6CE8\u663E\u793A */
      .file-annotation-display {
        margin: 8px 0 12px 0;
        padding: 8px 12px;
        background: var(--background-secondary-alt);
        border-radius: 4px;
        font-size: 0.9em;
      }

      .file-annotation-item {
        padding: 4px 0;
        color: var(--text-muted);
      }

      .file-annotation-item strong { color: var(--text-normal); }

      /* \u5185\u5BB9\u5361\u7247\u6837\u5F0F */
      .group-content {
        display: flex;
        flex-direction: column;
        gap: 8px;
        padding-left: 8px;
      }

      .content-card {
        padding: 12px;
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        transition: all 0.2s;
      }

      .content-card:hover {
        border-color: var(--interactive-accent);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .card-content {
        margin-bottom: 8px;
        display: flex;
        align-items: flex-start;
        gap: 4px;
        flex-wrap: wrap;
      }

      .type-icon { color: var(--text-muted); }

      .content-text {
        flex: 1;
        line-height: 1.5;
        word-wrap: break-word;
      }

      .clickable-content {
        cursor: pointer;
        transition: all 0.2s;
        padding: 4px;
        border-radius: 4px;
      }

      .clickable-content:hover {
        background: var(--background-modifier-hover);
        color: var(--interactive-accent);
      }

      .annotation-badge, .flashcard-badge {
        font-size: 14px;
        cursor: pointer;
        margin-left: 4px;
      }

      .annotation-badge.has-annotation {
        color: var(--interactive-accent);
      }

      /* \u6279\u6CE8\u663E\u793A\u6837\u5F0F */
      .annotation-display {
        margin: 10px 0;
        padding: 12px;
        background: var(--background-secondary-alt);
        border-left: 3px solid var(--interactive-accent);
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .annotation-display:hover {
        background: var(--background-modifier-hover);
        border-left-color: var(--interactive-accent-hover);
      }

      .annotation-content-display {
        line-height: 1.6;
        color: var(--text-normal);
        margin-bottom: 6px;
      }

      .annotation-content-display strong {
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .annotation-timestamp {
        font-size: 0.8em;
        color: var(--text-faint);
        text-align: right;
      }

      .annotation-badge-display {
        display: inline-block;
        padding: 3px 10px;
        border-radius: 12px;
        color: white;
        font-size: 0.85em;
        font-weight: 500;
        margin-right: 8px;
        margin-bottom: 6px;
      }

      /* \u5185\u8054\u6279\u6CE8\u8F93\u5165 */
      .annotation-input-container {
        margin: 12px 0;
        padding: 12px;
        background: var(--background-primary);
        border: 2px solid var(--interactive-accent);
        border-radius: 6px;
        animation: slideDown 0.2s ease;
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .annotation-textarea {
        width: 100%;
        padding: 10px;
        margin-bottom: 8px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-secondary);
        color: var(--text-normal);
        font-family: inherit;
        font-size: 1em;
        resize: vertical;
        min-height: 60px;
      }

      .annotation-textarea:focus {
        outline: none;
        border-color: var(--interactive-accent);
        background: var(--background-primary);
      }

      .annotation-textarea::placeholder {
        color: var(--text-faint);
      }

      .annotation-buttons {
        display: flex;
        gap: 8px;
        justify-content: flex-end;
      }

      .annotation-buttons button {
        padding: 6px 16px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.9em;
      }

      .annotation-delete-btn {
        background: transparent;
        color: var(--text-muted);
      }

      .annotation-delete-btn:hover {
        color: var(--color-red);
      }

      .annotation-save-btn {
        background: var(--interactive-accent);
        color: white;
      }

      .annotation-save-btn:hover {
        opacity: 0.8;
      }

      /* \u5143\u6570\u636E\u533A\u57DF */
      .card-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 8px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .tags-container {
        display: flex;
        flex-wrap: wrap;
        gap: 4px;
      }

      .tag {
        background: var(--background-secondary);
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.85em;
      }

      .heading-info {
        color: var(--text-muted);
        font-style: italic;
      }

      /* \u64CD\u4F5C\u6309\u94AE */
      .card-actions {
        display: flex;
        gap: 6px;
      }

      .action-btn {
        padding: 4px 10px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
        cursor: pointer;
        font-size: 14px;
        transition: all 0.2s;
      }

      .action-btn:hover {
        background: var(--interactive-accent);
        color: white;
        border-color: var(--interactive-accent);
      }

      .delete-btn:hover {
        background: var(--color-red);
        border-color: var(--color-red);
      }

      /* \u4E00\u952E\u521B\u5EFA\u95EA\u5361\u6309\u94AE\u7EC4 */
      .flashcard-btn-group {
        display: flex;
        gap: 0;
      }

      .quick-card-btn {
        border-radius: 4px 0 0 4px;
        border-right: none;
      }

      .more-card-btn {
        border-radius: 0 4px 4px 0;
        padding: 4px 6px;
        font-size: 10px;
      }

      .quick-card-btn:hover, .more-card-btn:hover {
        background: var(--interactive-accent);
        color: white;
      }

      .batch-create-btn {
        padding: 6px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--interactive-accent);
        color: white;
        cursor: pointer;
        font-weight: 500;
        transition: all 0.2s;
      }

      .batch-create-btn:hover {
        opacity: 0.8;
      }

      .batch-actions-overview {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .batch-mode-btn,
      .select-all-btn,
      .batch-delete-btn,
      .batch-create-cards-btn {
        padding: 6px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.9em;
        font-weight: 500;
      }

      .select-all-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .batch-mode-btn:hover {
        background: var(--background-modifier-hover);
      }

      .batch-delete-btn:hover {
        background: var(--color-red);
        border-color: var(--color-red);
        color: white;
      }

      .batch-create-cards-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .batch-checkbox {
        margin-right: 8px;
        cursor: pointer;
      }
    `;
        document.head.appendChild(styleEl);
      }
    };
    BatchCreateModal = class extends import_obsidian4.Modal {
      constructor(app, plugin, quickCreator, units, onComplete) {
        super(app);
        this.plugin = plugin;
        this.quickCreator = quickCreator;
        this.units = units;
        this.onComplete = onComplete;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h2", { text: "\u26A1 Batch Create Flashcards" });
        contentEl.createEl("p", {
          text: `Create flashcards for ${this.units.length} content items without cards.`
        });
        const typeContainer = contentEl.createDiv({ cls: "type-select-container" });
        typeContainer.createEl("h3", { text: "Card Type" });
        let selectedType = "smart";
        const types = [
          { value: "smart", label: "\u26A1 Smart (Auto-detect)", desc: "Automatically choose the best type" },
          { value: "qa", label: "\u{1F4DD} Q&A Cards", desc: "Question and answer format" },
          { value: "cloze", label: "\u270F\uFE0F Cloze Cards", desc: "Fill in the blanks" }
        ];
        types.forEach((type) => {
          const option = typeContainer.createDiv({ cls: "type-option" });
          const radio = option.createEl("input", {
            type: "radio",
            value: type.value,
            attr: { name: "card-type" }
          });
          if (type.value === "smart")
            radio.checked = true;
          const label = option.createDiv({ cls: "type-label" });
          label.createEl("strong", { text: type.label });
          label.createEl("div", { text: type.desc, cls: "type-desc" });
          option.addEventListener("click", () => {
            radio.checked = true;
            selectedType = type.value;
          });
        });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => this.close());
        const createBtn = buttonContainer.createEl("button", {
          text: `Create ${this.units.length} Cards`,
          cls: "mod-cta"
        });
        createBtn.addEventListener("click", async () => {
          await this.batchCreate(selectedType);
        });
        this.addStyles();
      }
      async batchCreate(type) {
        const { success, failed } = await this.quickCreator.createBatchCards(this.units, type);
        new import_obsidian4.Notice(`\u2705 Created ${success} flashcards! ${failed > 0 ? `(${failed} failed)` : ""}`);
        this.close();
        this.onComplete();
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      .type-select-container {
        margin: 20px 0;
      }

      .type-option {
        padding: 15px;
        margin: 10px 0;
        background: var(--background-secondary);
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .type-option:hover {
        border-color: var(--interactive-accent);
        background: var(--background-modifier-hover);
      }

      .type-option input[type="radio"] {
        margin-right: 10px;
      }

      .type-label {
        display: inline-block;
        vertical-align: top;
      }

      .type-desc {
        font-size: 0.9em;
        color: var(--text-muted);
        margin-top: 4px;
      }
    `;
        document.head.appendChild(styleEl);
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
    ConfirmModal = class extends import_obsidian4.Modal {
      constructor(app, title, message, onConfirm, onCancel) {
        super(app);
        this.title = title;
        this.message = message;
        this.onConfirm = onConfirm;
        this.onCancel = onCancel;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h2", { text: this.title });
        contentEl.createEl("p", { text: this.message });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => {
          this.close();
          this.onCancel();
        });
        const confirmBtn = buttonContainer.createEl("button", {
          text: "Delete",
          cls: "mod-warning"
        });
        confirmBtn.addEventListener("click", () => {
          this.close();
          this.onConfirm();
        });
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
  }
});

// src/ui/AnnotationModal.ts
var AnnotationModal_exports = {};
__export(AnnotationModal_exports, {
  AnnotationModal: () => AnnotationModal2,
  FileAnnotationModal: () => FileAnnotationModal
});
var import_obsidian9, AnnotationModal2, FileAnnotationModal;
var init_AnnotationModal = __esm({
  "src/ui/AnnotationModal.ts"() {
    import_obsidian9 = require("obsidian");
    AnnotationModal2 = class extends import_obsidian9.Modal {
      constructor(app, plugin, contentUnit, onSave) {
        super(app);
        this.plugin = plugin;
        this.annotationText = "";
        this.badgeText = "";
        this.badgeColor = "#5B9BD5";
        this.contentUnit = contentUnit;
        this.onSave = onSave;
        this.existingAnnotation = this.plugin.annotationManager.getContentAnnotation(
          contentUnit.id
        );
        if (this.existingAnnotation) {
          this.annotationText = this.existingAnnotation.content;
          if (this.existingAnnotation.badge) {
            this.badgeText = this.existingAnnotation.badge.text;
            this.badgeColor = this.existingAnnotation.badge.color;
          }
        }
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.addClass("annotation-modal");
        contentEl.createEl("h2", {
          text: this.existingAnnotation ? "Edit Annotation" : "Add Annotation"
        });
        const contentPreview = contentEl.createDiv({ cls: "annotation-content-preview" });
        contentPreview.createEl("h3", { text: "Content:" });
        contentPreview.createEl("blockquote", { text: this.contentUnit.content });
        new import_obsidian9.Setting(contentEl).setName("Annotation").setDesc("Add your notes or comments about this content").addTextArea((text) => {
          text.setPlaceholder("Enter your annotation here...").setValue(this.annotationText).onChange((value) => {
            this.annotationText = value;
          });
          text.inputEl.rows = 6;
          text.inputEl.style.width = "100%";
        });
        contentEl.createEl("h3", { text: "Badge (Optional)" });
        new import_obsidian9.Setting(contentEl).setName("Badge text").setDesc('Short text to display as a badge (e.g., "\u91CD\u8981", "\u5F85\u590D\u4E60")').addText(
          (text) => text.setPlaceholder("Badge text").setValue(this.badgeText).onChange((value) => {
            this.badgeText = value;
            this.updateBadgePreview();
          })
        );
        new import_obsidian9.Setting(contentEl).setName("Badge color").setDesc("Choose a color for the badge").addDropdown((dropdown) => {
          dropdown.addOption("#5B9BD5", "\u{1F535} Blue").addOption("#70AD47", "\u{1F7E2} Green").addOption("#FFC000", "\u{1F7E1} Yellow").addOption("#FF6B6B", "\u{1F534} Red").addOption("#C78BFF", "\u{1F7E3} Purple").addOption("#FF9F43", "\u{1F7E0} Orange").setValue(this.badgeColor).onChange((value) => {
            this.badgeColor = value;
            this.updateBadgePreview();
          });
        });
        const badgePreview = contentEl.createDiv({ cls: "badge-preview-container" });
        badgePreview.createEl("span", { text: "Preview: ", cls: "preview-label" });
        const badgeEl = badgePreview.createEl("span", { cls: "badge-preview" });
        this.badgePreviewEl = badgeEl;
        this.updateBadgePreview();
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        if (this.existingAnnotation) {
          const deleteBtn = buttonContainer.createEl("button", {
            text: "Delete",
            cls: "mod-warning"
          });
          deleteBtn.addEventListener("click", async () => {
            await this.deleteAnnotation();
          });
        }
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => {
          this.close();
        });
        const saveBtn = buttonContainer.createEl("button", {
          text: "Save",
          cls: "mod-cta"
        });
        saveBtn.addEventListener("click", async () => {
          await this.saveAnnotation();
        });
        this.addStyles();
      }
      updateBadgePreview() {
        if (!this.badgePreviewEl)
          return;
        if (this.badgeText) {
          this.badgePreviewEl.textContent = this.badgeText;
          this.badgePreviewEl.style.backgroundColor = this.badgeColor;
          this.badgePreviewEl.style.display = "inline-block";
        } else {
          this.badgePreviewEl.textContent = "No badge";
          this.badgePreviewEl.style.backgroundColor = "transparent";
          this.badgePreviewEl.style.color = "var(--text-muted)";
        }
      }
      async saveAnnotation() {
        if (!this.annotationText.trim()) {
          new import_obsidian9.Notice("Please enter annotation text");
          return;
        }
        try {
          let annotation;
          if (this.existingAnnotation) {
            await this.plugin.annotationManager.updateAnnotation(
              this.existingAnnotation.id,
              {
                content: this.annotationText,
                badge: this.badgeText ? {
                  text: this.badgeText,
                  color: this.badgeColor
                } : void 0
              }
            );
            annotation = this.plugin.annotationManager.getAnnotation(
              this.existingAnnotation.id
            );
            new import_obsidian9.Notice("Annotation updated");
          } else {
            annotation = await this.plugin.annotationManager.addContentAnnotation(
              this.contentUnit.id,
              this.annotationText,
              this.badgeText ? {
                text: this.badgeText,
                color: this.badgeColor
              } : void 0
            );
            new import_obsidian9.Notice("Annotation added");
          }
          this.onSave(annotation);
          this.close();
        } catch (error) {
          console.error("Error saving annotation:", error);
          new import_obsidian9.Notice("Error saving annotation");
        }
      }
      async deleteAnnotation() {
        if (!this.existingAnnotation)
          return;
        try {
          await this.plugin.annotationManager.deleteAnnotation(
            this.existingAnnotation.id
          );
          new import_obsidian9.Notice("Annotation deleted");
          this.close();
          this.onSave(null);
        } catch (error) {
          console.error("Error deleting annotation:", error);
          new import_obsidian9.Notice("Error deleting annotation");
        }
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      .annotation-modal {
        padding: 20px;
      }

      .annotation-content-preview {
        margin: 20px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .annotation-content-preview h3 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .annotation-content-preview blockquote {
        margin: 0;
        padding: 10px;
        border-left: 3px solid var(--interactive-accent);
        background: var(--background-primary);
        border-radius: 4px;
      }

      .badge-preview-container {
        margin: 10px 0;
        padding: 10px;
        background: var(--background-secondary);
        border-radius: 4px;
      }

      .preview-label {
        color: var(--text-muted);
        margin-right: 10px;
      }

      .badge-preview {
        padding: 4px 10px;
        border-radius: 12px;
        color: white;
        font-size: 0.85em;
        font-weight: 500;
      }

      .modal-button-container {
        display: flex;
        gap: 10px;
        justify-content: flex-end;
        margin-top: 20px;
      }

      .modal-button-container button {
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
      }
    `;
        document.head.appendChild(styleEl);
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
    FileAnnotationModal = class extends import_obsidian9.Modal {
      constructor(app, plugin, filePath, onSave) {
        super(app);
        this.plugin = plugin;
        this.existingAnnotations = [];
        this.annotationText = "";
        this.filePath = filePath;
        this.onSave = onSave;
        this.existingAnnotations = this.plugin.annotationManager.getFileAnnotations(filePath);
      }
      onOpen() {
        var _a;
        const { contentEl } = this;
        contentEl.createEl("h2", { text: "File Annotations" });
        const fileName = ((_a = this.filePath.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || this.filePath;
        contentEl.createEl("p", {
          text: `File: ${fileName}`,
          cls: "file-name"
        });
        if (this.existingAnnotations.length > 0) {
          const existingSection = contentEl.createDiv({ cls: "existing-annotations" });
          existingSection.createEl("h3", { text: "Existing Annotations" });
          this.existingAnnotations.forEach((annotation) => {
            const annotationCard = existingSection.createDiv({ cls: "annotation-card" });
            annotationCard.createEl("p", { text: annotation.content });
            const date = new Date(annotation.metadata.createdAt).toLocaleDateString();
            annotationCard.createEl("small", {
              text: `Created: ${date}`,
              cls: "annotation-date"
            });
            const deleteBtn = annotationCard.createEl("button", {
              text: "\u{1F5D1} Delete",
              cls: "delete-annotation-btn"
            });
            deleteBtn.addEventListener("click", async () => {
              await this.deleteAnnotation(annotation.id);
              this.close();
              this.onSave();
            });
          });
        }
        contentEl.createEl("h3", { text: "Add New Annotation" });
        new import_obsidian9.Setting(contentEl).setName("Annotation").setDesc("Add notes about this file").addTextArea((text) => {
          text.setPlaceholder("Enter file annotation...").setValue(this.annotationText).onChange((value) => {
            this.annotationText = value;
          });
          text.inputEl.rows = 4;
          text.inputEl.style.width = "100%";
        });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => {
          this.close();
        });
        const saveBtn = buttonContainer.createEl("button", {
          text: "Save",
          cls: "mod-cta"
        });
        saveBtn.addEventListener("click", async () => {
          await this.saveAnnotation();
        });
      }
      async saveAnnotation() {
        if (!this.annotationText.trim()) {
          new import_obsidian9.Notice("Please enter annotation text");
          return;
        }
        try {
          await this.plugin.annotationManager.addFileAnnotation(
            this.filePath,
            this.annotationText
          );
          new import_obsidian9.Notice("File annotation added");
          this.close();
          this.onSave();
        } catch (error) {
          console.error("Error saving file annotation:", error);
          new import_obsidian9.Notice("Error saving file annotation");
        }
      }
      async deleteAnnotation(id) {
        try {
          await this.plugin.annotationManager.deleteAnnotation(id);
          new import_obsidian9.Notice("Annotation deleted");
        } catch (error) {
          console.error("Error deleting annotation:", error);
          new import_obsidian9.Notice("Error deleting annotation");
        }
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => LearningSystemPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian10 = require("obsidian");

// src/ui/SettingsTab.ts
var import_obsidian = require("obsidian");
var SettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Learning System Settings" });
    new import_obsidian.Setting(containerEl).setName("Enable extraction").setDesc("Enable automatic content extraction").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.extractionEnabled).onChange(async (value) => {
        this.plugin.settings.extractionEnabled = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Auto scan").setDesc("Automatically scan files when they are opened").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.autoScan).onChange(async (value) => {
        this.plugin.settings.autoScan = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Default deck").setDesc("Default deck name for new flashcards").addText(
      (text) => text.setPlaceholder("Default").setValue(this.plugin.settings.defaultDeck).onChange(async (value) => {
        this.plugin.settings.defaultDeck = value;
        await this.plugin.saveSettings();
      })
    );
  }
};

// src/main.ts
init_OverviewView();

// src/ui/SidebarOverviewView.ts
var import_obsidian5 = require("obsidian");
init_QuickFlashcardCreator();
var VIEW_TYPE_SIDEBAR_OVERVIEW = "learning-system-sidebar-overview";
var VIEW_TYPE_MAIN_OVERVIEW = "learning-system-main-overview";
var SidebarOverviewView = class extends import_obsidian5.ItemView {
  constructor(leaf, plugin, forceMainMode = false) {
    super(leaf);
    // 状态管理
    this.forceMainMode = false;
    this.searchQuery = "";
    this.filterMode = "all";
    this.groupMode = "file";
    this.selectedFile = null;
    this.displayMode = "sidebar";
    this.viewType = "notes";
    this.activeMenuId = null;
    this.savedScrollPosition = 0;
    this.shouldRestoreScroll = false;
    this.batchMode = false;
    this.selectedUnitIds = /* @__PURE__ */ new Set();
    this.selectedCardIds = /* @__PURE__ */ new Set();
    // 性能优化
    this.searchDebounceTimer = null;
    this.isRendering = false;
    this.plugin = plugin;
    this.forceMainMode = forceMainMode;
    const activeFile = this.app.workspace.getActiveFile();
    if (activeFile) {
      this.selectedFile = activeFile.path;
    }
    let resizeTimer;
    window.addEventListener("resize", () => {
      clearTimeout(resizeTimer);
      resizeTimer = window.setTimeout(() => {
        this.detectDisplayMode();
        this.render();
      }, 150);
    });
    window.addEventListener("resize", () => {
      this.detectDisplayMode();
      this.render();
    });
  }
  getViewType() {
    const viewType = this.forceMainMode ? VIEW_TYPE_MAIN_OVERVIEW : VIEW_TYPE_SIDEBAR_OVERVIEW;
    return viewType;
  }
  getDisplayText() {
    return "Learning Overview";
  }
  getIcon() {
    return "book-marked";
  }
  async onOpen() {
    this.detectDisplayMode();
    if (!this.forceMainMode) {
      this.registerEvent(
        this.app.workspace.on("active-leaf-change", () => {
          const activeFile = this.app.workspace.getActiveFile();
          if (activeFile && this.displayMode === "sidebar") {
            this.selectedFile = activeFile.path;
            this.refresh();
          }
        })
      );
    }
    this.render();
    this.addStyles();
  }
  // ==================== 核心方法 ====================
  /**
   * 检测当前显示模式（侧边栏 vs 主界面）
   */
  detectDisplayMode() {
    if (this.forceMainMode) {
      this.displayMode = "main";
      return;
    }
    const parentSplit = this.leaf.parentSplit;
    const isLeftSidebar = (parentSplit == null ? void 0 : parentSplit.type) === "split" && this.app.workspace.leftSplit === parentSplit;
    const isRightSidebar = (parentSplit == null ? void 0 : parentSplit.type) === "split" && this.app.workspace.rightSplit === parentSplit;
    const containerEl = this.containerEl;
    const width = containerEl.clientWidth;
    const isNarrow = width < 500;
    const isSidebar = isLeftSidebar || isRightSidebar || isNarrow;
    this.displayMode = isSidebar ? "sidebar" : "main";
  }
  /**
   * 刷新视图
   */
  refresh() {
    if (this.isRendering) {
      requestAnimationFrame(() => {
        this.refresh();
      });
      return;
    }
    if (this.searchDebounceTimer !== null) {
      window.clearTimeout(this.searchDebounceTimer);
      this.searchDebounceTimer = null;
    }
    this.shouldRestoreScroll = true;
    this.render();
  }
  //render拆分函数
  resetInteractionState(container) {
    container.style.pointerEvents = "auto";
    const toolbar = container.querySelector(".sidebar-toolbar");
    if (toolbar) {
      toolbar.style.pointerEvents = "auto";
      toolbar.style.position = "relative";
      toolbar.style.zIndex = "100";
    }
  }
  saveScrollPosition(container) {
    if (this.displayMode === "sidebar") {
      const contentList = container.querySelector(".sidebar-content-list");
      if (contentList) {
        this.savedScrollPosition = contentList.scrollTop;
      }
    }
  }
  /**
   * 主渲染方法
   */
  render() {
    const allUnits = this.plugin.dataManager.getAllContentUnits();
    const unitsWithCards = allUnits.filter((u) => u.flashcardIds.length > 0);
    if (this.isRendering) {
      return;
    }
    if (this.searchDebounceTimer !== null) {
      window.clearTimeout(this.searchDebounceTimer);
      this.searchDebounceTimer = null;
    }
    this.isRendering = true;
    const container = this.containerEl.children[1];
    this.saveScrollPosition(container);
    this.resetInteractionState(container);
    if (this.displayMode === "main" && !this.selectedFile && this.viewType === "notes") {
      const units = this.getFilteredUnits();
      const grouped = this.groupUnits(units);
      if (grouped.length > 0) {
        this.selectedFile = grouped[0].groupKey;
      }
    }
    container.empty();
    container.addClass("learning-overview-container");
    container.setAttribute("data-mode", this.displayMode);
    if (this.displayMode === "sidebar") {
      this.renderSidebarMode(container);
    } else {
      this.renderMainMode(container);
    }
    if (this.displayMode === "sidebar" && this.shouldRestoreScroll) {
      const contentList = container.querySelector(".sidebar-content-list");
      if (contentList) {
        requestAnimationFrame(() => {
          contentList.scrollTop = this.savedScrollPosition;
        });
      }
    }
    this.isRendering = false;
  }
  /**
   * 仅刷新内容区域（不重新渲染整个视图）
   */
  refreshContent() {
    const container = this.containerEl.children[1];
    if (this.displayMode === "sidebar") {
      const contentList = container.querySelector(".sidebar-content-list");
      if (contentList) {
        this.savedScrollPosition = contentList.scrollTop;
        contentList.empty();
        this.renderCompactContentList(contentList);
        requestAnimationFrame(() => {
          contentList.scrollTop = this.savedScrollPosition;
        });
      }
    } else {
      const rightPanel = container.querySelector(".right-panel");
      if (rightPanel) {
        rightPanel.empty();
        this.renderRightPanel(rightPanel);
      }
    }
  }
  // ==================== 侧边栏模式渲染 ====================
  renderSidebarMode(container) {
    this.renderSidebarToolbar(container);
    const contentList = container.createDiv({ cls: "sidebar-content-list" });
    this.renderCompactContentList(contentList);
  }
  renderSidebarToolbar(container) {
    const toolbar = container.createDiv({ cls: "sidebar-toolbar" });
    const searchContainer = toolbar.createDiv({ cls: "search-container" });
    const searchInput = searchContainer.createEl("input", {
      type: "text",
      placeholder: "\u{1F50D} \u641C\u7D22\u7B14\u8BB0...",
      cls: "search-input"
    });
    searchInput.value = this.searchQuery;
    searchInput.addEventListener("input", (e) => {
      const value = e.target.value;
      this.searchQuery = value;
      if (this.searchDebounceTimer !== null) {
        window.clearTimeout(this.searchDebounceTimer);
      }
      this.searchDebounceTimer = window.setTimeout(() => {
        this.selectedUnitIds.clear();
        this.selectedCardIds.clear();
        this.refreshContent();
      }, 300);
    });
    const filters = toolbar.createDiv({ cls: "filter-chips" });
    const filterOptions = [
      { mode: "all", icon: "\u{1F4DD}", label: "\u5168\u90E8" },
      { mode: "annotated", icon: "\u{1F4AC}", label: "\u6279\u6CE8" },
      { mode: "flashcards", icon: "\u{1F0CF}", label: "\u95EA\u5361" }
    ];
    filterOptions.forEach(({ mode, icon, label }) => {
      const chip = filters.createDiv({
        cls: `filter-chip ${this.filterMode === mode ? "active" : ""}`,
        text: `${icon} ${label}`
      });
      chip.addEventListener("click", () => {
        if (this.filterMode !== mode) {
          this.filterMode = mode;
          this.selectedUnitIds.clear();
          this.selectedCardIds.clear();
          this.batchMode = false;
          this.shouldRestoreScroll = false;
          this.render();
        }
      });
    });
    const groupSwitcher = toolbar.createDiv({ cls: "group-switcher" });
    const groupOptions = [
      { mode: "file", icon: "\u{1F4C1}", tooltip: "\u6309\u6587\u4EF6" },
      // { mode: 'annotation' as GroupMode, icon: '💬', tooltip: '批注' },
      { mode: "tag", icon: "\u{1F3F7}\uFE0F", tooltip: "\u6309\u6807\u7B7E" },
      { mode: "date", icon: "\u{1F4C5}", tooltip: "\u6309\u65E5\u671F" }
    ];
    groupOptions.forEach(({ mode, icon, tooltip }) => {
      const btn = groupSwitcher.createDiv({
        cls: `group-btn ${this.groupMode === mode ? "active" : ""}`,
        text: icon
      });
      btn.addEventListener("click", () => {
        if (this.groupMode !== mode) {
          this.groupMode = mode;
          if (this.displayMode === "sidebar") {
            const activeFile = this.app.workspace.getActiveFile();
            this.selectedFile = activeFile ? activeFile.path : null;
          } else {
            this.selectedFile = null;
          }
          this.selectedUnitIds.clear();
          this.selectedCardIds.clear();
          this.batchMode = false;
          this.render();
        }
      });
    });
    const statsRow = toolbar.createDiv({ cls: "stats-row" });
    this.createSelectAllButton(statsRow, "sidebar");
    this.createBatchActionButtons(statsRow, "sidebar");
    if (this.batchMode) {
      const cancelBtn = statsRow.createEl("button", {
        text: "\u2715",
        cls: "cancel-selection-btn-sidebar",
        title: "\u5173\u95ED"
      });
      cancelBtn.addEventListener("click", () => {
        this.clearSelection();
      });
    }
  }
  /**
   * 渲染紧凑内容列表（侧边栏模式）
   */
  renderCompactContentList(container) {
    let units = this.getFilteredUnits();
    if (this.displayMode === "sidebar" && this.selectedFile) {
      units = units.filter((unit) => unit.source.file === this.selectedFile);
    }
    if (units.length === 0) {
      const emptyDiv = container.createDiv({ cls: "empty-state" });
      if (this.selectedFile) {
        emptyDiv.innerHTML = `
        <div style="padding: 20px; text-align: center;">
          <div style="font-size: 32px; margin-bottom: 10px;">\u{1F4ED}</div>
          <div style="color: var(--text-muted);">\u5F53\u524D\u6587\u6863\u6682\u65E0\u7B14\u8BB0</div>
          <div style="font-size: 12px; color: var(--text-faint); margin-top: 8px;">
            ${this.filterMode !== "all" ? "\u5C1D\u8BD5\u5207\u6362\u5176\u4ED6\u8FC7\u6EE4\u5668\u67E5\u770B" : "\u5F00\u59CB\u9AD8\u4EAE\u6587\u672C\u6765\u521B\u5EFA\u7B14\u8BB0"}
          </div>
        </div>
      `;
      } else {
        emptyDiv.textContent = "\u6682\u65E0\u5185\u5BB9";
      }
      return;
    }
    const grouped = this.groupUnits(units);
    grouped.forEach(({ groupKey, units: groupUnits }) => {
      const groupEl = container.createDiv({ cls: "content-group" });
      const header = groupEl.createDiv({ cls: "group-header" });
      header.createSpan({ text: this.getGroupIcon(this.groupMode), cls: "group-icon" });
      header.createSpan({ text: groupKey, cls: "group-title" });
      header.createSpan({ text: `${groupUnits.length}`, cls: "group-count" });
      groupUnits.forEach((unit) => {
        this.renderCompactCard(groupEl, unit);
      });
    });
  }
  /**
   * 渲染紧凑卡片（侧边栏模式）
   */
  renderCompactCard(container, unit) {
    const card = container.createDiv({ cls: "compact-card" });
    if (this.batchMode) {
      const checkbox = card.createEl("input", {
        type: "checkbox",
        cls: "batch-checkbox"
      });
      checkbox.setAttribute("data-unit-id", unit.id);
      checkbox.checked = this.selectedUnitIds.has(unit.id);
      checkbox.addEventListener("change", (e) => {
        if (e.target.checked) {
          this.selectedUnitIds.add(unit.id);
        } else {
          this.selectedUnitIds.delete(unit.id);
        }
        this.render();
      });
    }
    const indicator = card.createDiv({ cls: "card-indicator" });
    if (unit.type === "QA") {
      indicator.addClass("type-qa");
    } else if (unit.type === "cloze") {
      indicator.addClass("type-cloze");
    } else if (unit.type === "text") {
      indicator.addClass("type-text");
    }
    if (unit.annotationId)
      indicator.addClass("has-annotation");
    if (unit.flashcardIds.length > 0)
      indicator.addClass("has-flashcard");
    const content = card.createDiv({ cls: "card-content" });
    const header = content.createDiv({ cls: "card-header" });
    header.addEventListener("click", () => {
      this.toggleInlineAnnotation(card, unit);
    });
    const annotationBtn = header.createDiv({ cls: "annotation-btn" });
    annotationBtn.innerHTML = "\u{1F4AC}";
    const tools = header.createDiv({ cls: "card-tools" });
    tools.addEventListener("click", (e) => {
      e.stopPropagation();
    });
    if (!this.batchMode) {
      const flashcardBtn = tools.createDiv({ cls: "tool-btn flashcard-btn" });
      flashcardBtn.innerHTML = "\u26A1";
      flashcardBtn.setAttribute("aria-label", "\u751F\u6210\u95EA\u5361");
      flashcardBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        this.quickGenerateFlashcard(unit);
      });
    }
    const moreBtn = tools.createDiv({ cls: "tool-btn more-btn" });
    moreBtn.innerHTML = "\u22EE";
    moreBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      this.showContextMenu(e, unit);
    });
    const noteText = content.createDiv({ cls: "note-text" });
    let displayHTML = "";
    if (unit.type === "QA" && unit.answer) {
      displayHTML = `<span class="qa-question">${unit.content}</span> <span class="qa-separator">::</span> <span class="qa-answer">${unit.answer}</span>`;
    } else if (unit.type === "cloze" && unit.fullContext) {
      let context = unit.fullContext.replace(/==/g, "");
      const answer = unit.content;
      displayHTML = context.replace(
        answer,
        `<span class="cloze-highlight">${answer}</span>`
      );
    } else {
      displayHTML = unit.content;
    }
    noteText.innerHTML = displayHTML;
    noteText.addEventListener("click", () => {
      this.jumpToSource(unit);
    });
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    if (annotation) {
      const annEl = content.createDiv({ cls: "annotation-preview" });
      const annText = annotation.content.length > 60 ? annotation.content.substring(0, 60) + "..." : annotation.content;
      annEl.textContent = `\u{1F4AC} ${annText}`;
      annEl.addEventListener("click", (e) => {
        e.stopPropagation();
        this.toggleInlineAnnotation(card, unit);
      });
    }
    const meta = content.createDiv({ cls: "card-meta" });
    if (unit.metadata.tags.length > 0) {
      unit.metadata.tags.slice(0, 2).forEach((tag) => {
        meta.createSpan({ text: `#${tag}`, cls: "tag" });
      });
      if (unit.metadata.tags.length > 2) {
        meta.createSpan({ text: `+${unit.metadata.tags.length - 2}`, cls: "tag-more" });
      }
    }
    if (unit.flashcardIds.length > 0) {
      meta.createSpan({ text: `\u{1F0CF} ${unit.flashcardIds.length}`, cls: "badge" });
    }
  }
  // ==================== 主界面模式渲染 ====================
  renderMainMode(container) {
    const layout = container.createDiv({ cls: "main-layout" });
    const leftPanel = layout.createDiv({ cls: "left-panel" });
    if (!this.selectedFile && this.viewType === "notes") {
      const units = this.getFilteredUnits();
      const grouped = this.groupUnits(units);
      if (grouped.length > 0) {
        this.selectedFile = grouped[0].groupKey;
      }
    }
    this.renderLeftPanel(leftPanel);
    const rightPanel = layout.createDiv({ cls: "right-panel" });
    this.renderRightPanel(rightPanel);
  }
  renderLeftPanel(container) {
    this.renderMainToolbar(container);
    this.renderFixedEntries(container);
    this.renderFileList(container);
  }
  renderMainToolbar(container) {
    const toolbar = container.createDiv({ cls: "main-toolbar" });
    const searchInput = toolbar.createEl("input", {
      type: "text",
      placeholder: "\u{1F50D} \u641C\u7D22...",
      cls: "search-input-main"
    });
    searchInput.value = this.searchQuery;
    searchInput.addEventListener("input", (e) => {
      const value = e.target.value;
      this.searchQuery = value;
      if (this.searchDebounceTimer !== null) {
        window.clearTimeout(this.searchDebounceTimer);
      }
      this.searchDebounceTimer = window.setTimeout(() => {
        this.selectedFile = null;
        const container2 = this.containerEl.children[1];
        const rightPanel = container2.querySelector(".right-panel");
        if (rightPanel) {
          rightPanel.empty();
          this.renderRightPanel(rightPanel);
        }
        const fileListContainer = container2.querySelector(".file-list");
        if (fileListContainer) {
          fileListContainer.empty();
          this.renderFileListContent(fileListContainer);
        }
        this.selectedUnitIds.clear();
        this.selectedCardIds.clear();
      }, 300);
    });
    const groupSwitcher = toolbar.createDiv({ cls: "group-switcher-main" });
    const groupOptions = [
      { mode: "file", icon: "\u{1F4C1}", label: "\u6587\u4EF6" },
      { mode: "annotation", icon: "\u{1F4AC}", label: "\u6279\u6CE8" },
      { mode: "tag", icon: "\u{1F3F7}\uFE0F", label: "\u6807\u7B7E" },
      { mode: "date", icon: "\u{1F4C5}", label: "\u65E5\u671F" }
    ];
    groupOptions.forEach(({ mode, icon, label }) => {
      const btn = groupSwitcher.createDiv({
        cls: `group-btn-main ${this.groupMode === mode ? "active" : ""}`
      });
      btn.innerHTML = `${icon} `;
      btn.addEventListener("click", () => {
        if (this.groupMode !== mode) {
          this.groupMode = mode;
          this.selectedFile = null;
          this.selectedUnitIds.clear();
          this.selectedCardIds.clear();
          this.batchMode = false;
          this.render();
          const container2 = this.containerEl.children[1];
          const fileListContainer = container2.querySelector(".file-list");
          if (fileListContainer) {
            fileListContainer.empty();
            this.renderFileListContent(fileListContainer);
          }
          const rightPanel = container2.querySelector(".right-panel");
          if (rightPanel) {
            rightPanel.empty();
            this.renderRightPanel(rightPanel);
          }
        }
      });
    });
  }
  renderFixedEntries(container) {
    const entries = container.createDiv({ cls: "fixed-entries" });
    const allNotesBtn = entries.createDiv({
      cls: `entry-btn ${this.viewType === "notes" ? "active" : ""}`
    });
    allNotesBtn.innerHTML = "\u{1F4DD} <span>\u5168\u90E8\u7B14\u8BB0</span>";
    allNotesBtn.addEventListener("click", () => {
      this.viewType = "notes";
      this.selectedFile = null;
      this.selectedUnitIds.clear();
      this.selectedCardIds.clear();
      this.batchMode = false;
      this.render();
    });
    const cardListBtn = entries.createDiv({
      cls: `entry-btn ${this.viewType === "cards" ? "active" : ""}`
    });
    cardListBtn.innerHTML = "\u{1F0CF} <span>Card List</span>";
    cardListBtn.addEventListener("click", () => {
      this.viewType = "cards";
      this.selectedFile = null;
      this.selectedUnitIds.clear();
      this.selectedCardIds.clear();
      this.batchMode = false;
      this.render();
    });
  }
  renderFileList(container) {
    const titleText = this.viewType === "cards" ? "\u95EA\u5361\u5206\u7EC4" : "\u6587\u6863\u5217\u8868";
    container.createEl("h3", { text: "\u{1F4C1} \u6587\u6863\u5217\u8868", cls: "panel-title" });
    const fileListContainer = container.createDiv({ cls: "file-list" });
    this.renderFileListContent(fileListContainer);
  }
  renderFileListContent(container) {
    container.empty();
    let grouped;
    if (this.viewType === "cards") {
      const flashcards = this.plugin.flashcardManager.getAllFlashcards();
      const cardGroups = this.groupFlashcards(flashcards);
      grouped = cardGroups.map((g) => ({ groupKey: g.groupKey, cards: g.cards, count: g.cards.length }));
    } else {
      const units = this.getFilteredUnits();
      const unitGroups = this.groupUnits(units);
      grouped = unitGroups.map((g) => ({ groupKey: g.groupKey, units: g.units, count: g.units.length }));
    }
    if (grouped.length === 0) {
      container.createDiv({
        text: "\u6682\u65E0\u6587\u6863",
        cls: "empty-hint"
      });
      return;
    }
    if (!this.selectedFile && grouped.length > 0) {
      this.selectedFile = grouped[0].groupKey;
    }
    grouped.forEach(({ groupKey, count }) => {
      const fileItem = container.createDiv({
        cls: `file-item ${this.selectedFile === groupKey ? "selected" : ""}`
      });
      fileItem.innerHTML = `
        <span class="file-icon">${this.getGroupIcon(this.groupMode)}</span>
        <span class="file-name">${groupKey}</span>
        <span class="file-count">${count}</span>
      `;
      fileItem.addEventListener("click", () => {
        try {
          if (this.selectedFile !== groupKey) {
            this.selectedFile = groupKey;
            const allItems = container.querySelectorAll(".file-item");
            allItems.forEach((item) => item.removeClass("selected"));
            fileItem.addClass("selected");
            const mainContainer = this.containerEl.children[1];
            const rightPanel = mainContainer.querySelector(".right-panel");
            if (rightPanel) {
              rightPanel.empty();
              this.renderRightPanel(rightPanel);
            }
          }
        } catch (error) {
          console.error("[fileItem click] Error:", error);
          new import_obsidian5.Notice("\u26A0\uFE0F \u5207\u6362\u5206\u7EC4\u65F6\u51FA\u9519\uFF0C\u8BF7\u91CD\u8BD5");
        }
      });
    });
  }
  renderRightPanel(container) {
    if (this.viewType === "cards") {
      if (!this.selectedFile) {
        const flashcards = this.plugin.flashcardManager.getAllFlashcards();
        const grouped = this.groupFlashcards(flashcards);
        if (grouped.length > 0) {
          this.selectedFile = grouped[0].groupKey;
        } else {
          const empty = container.createDiv({ cls: "empty-right-panel" });
          empty.innerHTML = `
            <div class="empty-icon">\u{1F4ED}</div>
            <div class="empty-text">\u6682\u65E0\u95EA\u5361</div>
          `;
          return;
        }
      }
      this.renderFlashcardsGrid(container);
      return;
    }
    if (!this.selectedFile) {
      const units = this.getFilteredUnits();
      const grouped = this.groupUnits(units);
      if (grouped.length > 0) {
        this.selectedFile = grouped[0].groupKey;
        const container2 = this.containerEl.children[1];
        const fileListContainer = container2.querySelector(".file-list");
        if (fileListContainer) {
          const firstItem = fileListContainer.querySelector(".file-item");
          firstItem == null ? void 0 : firstItem.addClass("selected");
        }
      } else {
        const empty = container.createDiv({ cls: "empty-right-panel" });
        empty.innerHTML = `
          <div class="empty-icon">\u{1F4ED}</div>
          <div class="empty-text">\u6682\u65E0\u5185\u5BB9</div>
        `;
        return;
      }
    }
    this.renderContentGrid(container);
  }
  /**
   * 渲染内容网格（主界面模式）
   */
  renderContentGrid(container) {
    const header = container.createDiv({ cls: "grid-header" });
    const title = header.createEl("h2", { text: this.selectedFile || "\u5185\u5BB9" });
    const headerActions = header.createDiv({ cls: "header-actions" });
    this.createBatchActionButtons(headerActions, "header");
    this.createSelectAllButton(headerActions, "header");
    const gridContainer = container.createDiv({ cls: "content-grid" });
    const units = this.getFilteredUnits().filter((unit) => {
      if (this.groupMode === "file") {
        return unit.source.file === this.selectedFile;
      } else if (this.groupMode === "annotation") {
        const hasAnnotation = this.selectedFile === "\u6709\u6279\u6CE8";
        return hasAnnotation ? !!unit.annotationId : !unit.annotationId;
      } else if (this.groupMode === "tag") {
        return unit.metadata.tags.includes(this.selectedFile);
      } else if (this.groupMode === "date") {
        return this.formatDate(new Date(unit.metadata.createdAt)) === this.selectedFile;
      }
      return false;
    });
    if (units.length === 0) {
      gridContainer.createDiv({
        text: "\u{1F4ED} \u6682\u65E0\u5185\u5BB9",
        cls: "empty-state"
      });
      return;
    }
    units.forEach((unit) => {
      this.renderGridCard(gridContainer, unit);
    });
  }
  /**
  * 渲染闪卡网格（类似 renderContentGrid）
  */
  renderFlashcardsGrid(container) {
    const header = container.createDiv({ cls: "grid-header" });
    header.createEl("h2", { text: this.selectedFile || "\u95EA\u5361" });
    const headerActions = header.createDiv({ cls: "header-actions" });
    this.createBatchActionButtons(headerActions, "header");
    this.createSelectAllButton(headerActions, "header");
    const gridContainer = container.createDiv({ cls: "content-grid" });
    const flashcards = this.plugin.flashcardManager.getAllFlashcards();
    const filteredCards = flashcards.filter((card) => {
      if (!this.selectedFile)
        return false;
      if (this.groupMode === "file") {
        return card.sourceFile === this.selectedFile;
      }
      if (this.groupMode === "annotation") {
        const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
        const hasAnnotation = this.selectedFile === "\u6709\u6279\u6CE8";
        if (hasAnnotation) {
          return unit && !!unit.annotationId;
        } else {
          return !unit || !unit.annotationId;
        }
      }
      if (this.groupMode === "tag") {
        const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
        if (unit && unit.metadata.tags && unit.metadata.tags.includes(this.selectedFile)) {
          return true;
        }
        if (card.tags && card.tags.includes(this.selectedFile)) {
          return true;
        }
        if (card.deck === this.selectedFile) {
          return true;
        }
        if (this.selectedFile === "\u672A\u5206\u7C7B" && (!card.tags || card.tags.length === 0) && !card.deck && (!unit || !unit.metadata.tags || unit.metadata.tags.length === 0)) {
          return true;
        }
        return false;
      }
      if (this.groupMode === "date") {
        const cardDate = this.formatDate(new Date(card.metadata.createdAt));
        return cardDate === this.selectedFile;
      }
      return false;
    });
    if (filteredCards.length === 0) {
      gridContainer.createDiv({ text: "\u{1F4ED} \u8BE5\u5206\u7EC4\u4E0B\u6682\u65E0\u95EA\u5361", cls: "empty-state" });
      return;
    }
    filteredCards.forEach((card) => {
      this.renderFlashcardGridCard(gridContainer, card);
    });
  }
  /**
   * 渲染网格卡片（主界面模式）
   */
  renderGridCard(container, unit) {
    var _a;
    const card = container.createDiv({ cls: "grid-card" });
    if (this.batchMode) {
      const checkbox = card.createEl("input", {
        type: "checkbox",
        cls: "batch-checkbox"
      });
      checkbox.setAttribute("data-unit-id", unit.id);
      checkbox.checked = this.selectedUnitIds.has(unit.id);
      checkbox.addEventListener("change", (e) => {
        if (e.target.checked) {
          this.selectedUnitIds.add(unit.id);
        } else {
          this.selectedUnitIds.delete(unit.id);
        }
        this.render();
      });
    }
    const header = card.createDiv({ cls: "grid-card-header" });
    header.addEventListener("click", () => {
      this.jumpToSource(unit);
    });
    const typeIndicator = header.createDiv({ cls: "type-indicator" });
    if (unit.type === "QA") {
      typeIndicator.addClass("type-qa");
      typeIndicator.textContent = "Q&A";
    } else if (unit.type === "cloze") {
      typeIndicator.addClass("type-cloze");
      typeIndicator.textContent = "Cloze";
    } else {
      typeIndicator.addClass("type-text");
      typeIndicator.textContent = "Text";
    }
    const fileName = ((_a = unit.source.file.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || "";
    header.createSpan({ text: fileName, cls: "doc-name" });
    const tools = header.createDiv({ cls: "grid-card-tools" });
    if (!this.batchMode) {
      const flashcardBtn = tools.createDiv({ cls: "tool-btn-grid" });
      flashcardBtn.innerHTML = "\u26A1";
      flashcardBtn.setAttribute("aria-label", "\u751F\u6210\u95EA\u5361");
      flashcardBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        this.quickGenerateFlashcard(unit);
      });
    }
    const moreBtn = tools.createDiv({ cls: "tool-btn-grid" });
    moreBtn.innerHTML = "\u22EE";
    moreBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      this.showContextMenu(e, unit);
    });
    const content = card.createDiv({ cls: "grid-card-content" });
    const noteText = content.createDiv({ cls: "grid-note-text" });
    let displayHTML = "";
    if (unit.type === "QA" && unit.answer) {
      displayHTML = `<span>${unit.content}</span> <span >::</span> <span >${unit.answer}</span>`;
    } else if (unit.type === "cloze" && unit.fullContext) {
      const context = unit.fullContext;
      const answer = unit.content;
      displayHTML = context.replace(
        answer,
        `<span >${answer}</span>`
      );
    } else {
      displayHTML = unit.content;
    }
    noteText.innerHTML = displayHTML;
    noteText.addEventListener("click", () => {
      this.toggleInlineAnnotation(card, unit);
    });
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    if (annotation) {
      const annEl = content.createDiv({ cls: "grid-annotation" });
      annEl.innerHTML = `<strong>\u6279\u6CE8\uFF1A</strong>${annotation.content}`;
      annEl.addEventListener("click", (e) => {
        e.stopPropagation();
        this.toggleInlineAnnotation(card, unit);
      });
    }
    if (unit.metadata.tags.length > 0) {
      const tags = content.createDiv({ cls: "grid-tags" });
      unit.metadata.tags.forEach((tag) => {
        tags.createSpan({ text: `#${tag}`, cls: "tag-grid" });
      });
    }
    const meta = card.createDiv({ cls: "grid-card-meta" });
    meta.createSpan({ text: `L${unit.source.position.line}`, cls: "line-info" });
    if (unit.flashcardIds.length > 0) {
      meta.createSpan({ text: `\u{1F0CF} ${unit.flashcardIds.length}`, cls: "badge-grid" });
    }
  }
  /**
   * 渲染闪卡网格卡片（带下拉菜单）
   */
  renderFlashcardGridCard(container, card) {
    const cardEl = container.createDiv({ cls: "grid-card flashcard-grid-card" });
    if (this.batchMode) {
      const checkbox = cardEl.createEl("input", {
        type: "checkbox",
        cls: "batch-checkbox"
      });
      checkbox.setAttribute("data-card-id", card.id);
      checkbox.checked = this.selectedCardIds.has(card.id);
      checkbox.addEventListener("change", (e) => {
        if (e.target.checked) {
          this.selectedCardIds.add(card.id);
        } else {
          this.selectedCardIds.delete(card.id);
        }
        this.render();
      });
    }
    const header = cardEl.createDiv({ cls: "grid-card-header" });
    header.addEventListener("click", async () => {
      const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
      if (unit) {
        await this.jumpToSource(unit);
      } else {
        const file = this.app.vault.getAbstractFileByPath(card.sourceFile);
        if (file instanceof import_obsidian5.TFile) {
          await this.app.workspace.getLeaf(false).openFile(file);
          new import_obsidian5.Notice("\u2705 \u5DF2\u6253\u5F00\u6E90\u6587\u4EF6");
        } else {
          new import_obsidian5.Notice("\u26A0\uFE0F \u627E\u4E0D\u5230\u539F\u59CB\u7B14\u8BB0");
        }
      }
    });
    const typeLabel = header.createDiv({
      cls: `flashcard-type ${card.type}`,
      text: card.type === "qa" ? "Q&A" : "\u586B\u7A7A"
    });
    const tools = header.createDiv({ cls: "grid-card-tools" });
    const moreBtn = tools.createDiv({ cls: "tool-btn-grid" });
    moreBtn.innerHTML = "\u22EE";
    moreBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      this.showFlashcardContextMenu(e, card);
    });
    const content = cardEl.createDiv({ cls: "grid-card-content" });
    const question = content.createDiv({ cls: "flashcard-question" });
    question.innerHTML = `<strong>\u95EE\u9898\uFF1A</strong>${card.front}`;
    const answer = content.createDiv({ cls: "flashcard-answer" });
    const answerText = Array.isArray(card.back) ? card.back.join(", ") : card.back;
    answer.innerHTML = `<strong>\u7B54\u6848\uFF1A</strong>${answerText}`;
    const meta = cardEl.createDiv({ cls: "grid-card-meta" });
    meta.createSpan({
      text: this.formatDate(new Date(card.metadata.createdAt)),
      cls: "flashcard-date"
    });
  }
  /**
   * 渲染闪卡列表
   */
  renderCardsList(container) {
    const header = container.createDiv({ cls: "cards-header" });
    header.createEl("h2", { text: "\u{1F0CF} \u6240\u6709\u95EA\u5361" });
    const cardsContainer = container.createDiv({ cls: "cards-grid" });
    const flashcards = this.plugin.flashcardManager.getAllFlashcards();
    if (flashcards.length === 0) {
      cardsContainer.createDiv({
        text: "\u{1F4ED} \u6682\u65E0\u95EA\u5361",
        cls: "empty-state"
      });
      return;
    }
    flashcards.forEach((card) => {
      const cardEl = cardsContainer.createDiv({ cls: "flashcard-item" });
      if (this.batchMode) {
        const checkbox = cardEl.createEl("input", {
          type: "checkbox",
          cls: "batch-checkbox"
        });
        checkbox.setAttribute("data-card-id", card.id);
        checkbox.checked = this.selectedCardIds.has(card.id);
        checkbox.addEventListener("change", (e) => {
          if (e.target.checked) {
            this.selectedCardIds.add(card.id);
          } else {
            this.selectedCardIds.delete(card.id);
          }
          this.render();
        });
      }
      const cardHeader = cardEl.createDiv({ cls: "flashcard-header" });
      const typeLabel = cardHeader.createDiv({
        cls: `flashcard-type ${card.type}`,
        text: card.type === "qa" ? "Q&A" : "\u586B\u7A7A"
      });
      cardHeader.createSpan({
        text: this.formatDate(new Date(card.metadata.createdAt)),
        cls: "flashcard-date"
      });
      const deleteBtn = cardHeader.createEl("button", {
        text: "\u{1F5D1}\uFE0F",
        cls: "flashcard-delete-btn"
      });
      deleteBtn.setAttribute("aria-label", "\u5220\u9664\u95EA\u5361");
      deleteBtn.addEventListener("click", async (e) => {
        e.stopPropagation();
        if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u5F20\u95EA\u5361\u5417\uFF1F")) {
          await this.deleteFlashcard(card.id);
        }
      });
      const cardBody = cardEl.createDiv({ cls: "flashcard-body" });
      const question = cardBody.createDiv({ cls: "flashcard-question" });
      question.innerHTML = `<strong>\u95EE\u9898\uFF1A</strong>${card.front}`;
      const answer = cardBody.createDiv({ cls: "flashcard-answer" });
      const answerText = Array.isArray(card.back) ? card.back.join(", ") : card.back;
      answer.innerHTML = `<strong>\u7B54\u6848\uFF1A</strong>${answerText}`;
    });
  }
  // ==================== 交互方法 ====================
  /**
   * 切换内联批注编辑器
   */
  toggleInlineAnnotation(cardEl, unit) {
    let existingEditor = cardEl.querySelector(".inline-annotation-editor");
    if (existingEditor) {
      existingEditor.remove();
      const annotation2 = this.plugin.annotationManager.getContentAnnotation(unit.id);
      if (annotation2) {
        const content2 = cardEl.querySelector(".card-content, .grid-card-content");
        const existingPreview = content2.querySelector(".annotation-preview, .grid-annotation");
        if (!existingPreview) {
          this.recreateAnnotationPreview(content2, cardEl, unit, annotation2.content);
        }
      }
      return;
    }
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    const content = cardEl.querySelector(".card-content, .grid-card-content");
    const annotationPreview = content.querySelector(".annotation-preview, .grid-annotation");
    const isGridCard = cardEl.classList.contains("grid-card");
    const editor = document.createElement("div");
    editor.className = "inline-annotation-editor";
    const textarea = document.createElement("textarea");
    textarea.className = "inline-annotation-textarea";
    textarea.placeholder = "Add comment...";
    textarea.value = (annotation == null ? void 0 : annotation.content) || "";
    textarea.setAttribute("data-unit-id", unit.id);
    const hint = document.createElement("div");
    hint.className = "inline-annotation-hint";
    hint.textContent = "Shift + Enter \u6362\u884C";
    editor.appendChild(textarea);
    editor.appendChild(hint);
    if (annotationPreview) {
      annotationPreview.replaceWith(editor);
    } else {
      const noteText = content.querySelector(".note-text, .grid-note-text");
      if (noteText) {
        noteText.after(editor);
      } else {
        content.appendChild(editor);
      }
    }
    textarea.focus();
    textarea.setSelectionRange(textarea.value.length, textarea.value.length);
    textarea.addEventListener("blur", async (e) => {
      const relatedTarget = e.relatedTarget;
      if (!relatedTarget || !editor.contains(relatedTarget)) {
        setTimeout(async () => {
          if (editor.parentElement) {
            await this.saveInlineAnnotation(editor, unit, textarea.value);
          }
        }, 100);
      }
    });
    textarea.addEventListener("keydown", async (e) => {
      if (e.key === "Tab") {
        e.preventDefault();
        await this.saveInlineAnnotation(editor, unit, textarea.value);
      }
    });
  }
  /**
   * 保存内联批注
   */
  async saveInlineAnnotation(editorEl, unit, text) {
    const trimmedText = text.trim();
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    if (trimmedText) {
      if (annotation) {
        await this.plugin.annotationManager.updateAnnotation(annotation.id, {
          content: trimmedText
        });
      } else {
        await this.plugin.annotationManager.addContentAnnotation(unit.id, trimmedText);
      }
    } else if (annotation) {
      await this.plugin.annotationManager.deleteAnnotation(annotation.id);
      new import_obsidian5.Notice("\u{1F5D1}\uFE0F \u6279\u6CE8\u5DF2\u5220\u9664");
    }
    const card = editorEl.closest(".compact-card, .grid-card");
    editorEl.remove();
    if (trimmedText && card) {
      const content = card.querySelector(".card-content, .grid-card-content");
      if (content) {
        this.recreateAnnotationPreview(content, card, unit, trimmedText);
        const indicator = card.querySelector(".card-indicator");
        if (indicator && !indicator.classList.contains("has-annotation")) {
          indicator.classList.add("has-annotation");
        }
      }
    } else if (!trimmedText && card) {
      const indicator = card.querySelector(".card-indicator");
      if (indicator && indicator.classList.contains("has-annotation")) {
        indicator.classList.remove("has-annotation");
      }
    }
  }
  /**
   * 取消内联批注编辑
   */
  cancelInlineAnnotation(editorEl, cardEl, unit) {
    editorEl.remove();
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    if (annotation) {
      const content = cardEl.querySelector(".card-content, .grid-card-content");
      this.recreateAnnotationPreview(content, cardEl, unit, annotation.content);
    }
  }
  /**
   * 重新创建批注预览
   */
  recreateAnnotationPreview(contentEl, cardEl, unit, annotationText) {
    const existingPreview = contentEl.querySelector(".annotation-preview, .grid-annotation");
    if (existingPreview) {
      existingPreview.remove();
    }
    const isGridCard = cardEl.classList.contains("grid-card");
    const annEl = document.createElement("div");
    annEl.className = isGridCard ? "grid-annotation" : "annotation-preview";
    if (isGridCard) {
      annEl.innerHTML = `<strong>\u6279\u6CE8\uFF1A</strong>${annotationText}`;
    } else {
      const displayText = annotationText.length > 60 ? annotationText.substring(0, 60) + "..." : annotationText;
      annEl.textContent = `\u{1F4AC} ${displayText}`;
    }
    annEl.addEventListener("click", (e) => {
      e.stopPropagation();
      this.toggleInlineAnnotation(cardEl, unit);
    });
    annEl.addEventListener("keydown", (e) => {
      if (e.key === "Tab") {
        e.preventDefault();
        e.stopPropagation();
        this.toggleInlineAnnotation(cardEl, unit);
      }
    });
    const noteText = contentEl.querySelector(".note-text, .grid-note-text");
    if (noteText) {
      noteText.insertAdjacentElement("afterend", annEl);
      const inserted = contentEl.querySelector(".annotation-preview, .grid-annotation");
    } else {
      contentEl.appendChild(annEl);
    }
    annEl.setAttribute("tabindex", "0");
    annEl.focus();
  }
  /**
   * 打开批注编辑器（模态框方式，保留用于右键菜单）
   */
  async openAnnotationEditor(unit) {
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    const existingText = (annotation == null ? void 0 : annotation.content) || "";
    const modal = new AnnotationModal(
      this.app,
      existingText,
      async (newText) => {
        if (newText.trim()) {
          if (annotation) {
            await this.plugin.annotationManager.updateAnnotation(annotation.id, {
              content: newText
            });
          } else {
            await this.plugin.annotationManager.addContentAnnotation(unit.id, newText);
          }
          new import_obsidian5.Notice("\u2705 \u6279\u6CE8\u5DF2\u4FDD\u5B58");
        } else if (annotation) {
          await this.plugin.annotationManager.deleteAnnotation(annotation.id);
          new import_obsidian5.Notice("\u{1F5D1}\uFE0F \u6279\u6CE8\u5DF2\u5220\u9664");
        }
        this.refresh();
      }
    );
    modal.open();
  }
  /**
   * 跳转到原文
   */
  async jumpToSource(unit) {
    const file = this.app.vault.getAbstractFileByPath(unit.source.file);
    if (!(file instanceof import_obsidian5.TFile)) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u6587\u4EF6\u4E0D\u5B58\u5728");
      return;
    }
    this.shouldRestoreScroll = true;
    const leaf = this.app.workspace.getLeaf(false);
    await leaf.openFile(file);
    setTimeout(() => {
      const view = this.app.workspace.getActiveViewOfType(import_obsidian5.ItemView);
      if (view) {
        const editor = view.editor;
        if (editor) {
          const line = unit.source.position.line;
          const lineCount = editor.lineCount();
          const validLine = Math.min(line, lineCount - 1);
          editor.setCursor({ line: validLine, ch: 0 });
          editor.scrollIntoView(
            { from: { line: validLine, ch: 0 }, to: { line: validLine, ch: 0 } },
            true
          );
          setTimeout(() => {
            var _a;
            try {
              const lineLength = ((_a = editor.getLine(validLine)) == null ? void 0 : _a.length) || 0;
              editor.setSelection(
                { line: validLine, ch: 0 },
                { line: validLine, ch: lineLength }
              );
            } catch (e) {
              console.error("Selection error:", e);
            }
          }, 100);
        }
      }
    }, 200);
  }
  /**
   * 快速生成闪卡
   */
  async quickGenerateFlashcard(unit) {
    try {
      const { QuickFlashcardCreator: QuickFlashcardCreator2 } = await Promise.resolve().then(() => (init_QuickFlashcardCreator(), QuickFlashcardCreator_exports));
      const creator = new QuickFlashcardCreator2(this.plugin);
      await creator.createSmartCard(unit);
      new import_obsidian5.Notice("\u26A1 \u95EA\u5361\u5DF2\u751F\u6210");
      this.refresh();
    } catch (error) {
      new import_obsidian5.Notice("\u274C \u751F\u6210\u95EA\u5361\u5931\u8D25");
      console.error(error);
    }
  }
  /**
  * 显示批量操作菜单
  */
  showBatchMenu(event, unit) {
    const menu = new import_obsidian5.Menu();
    menu.addItem(
      (item) => item.setTitle(this.isAllSelected() ? "\u2611 \u9009\u62E9" : "\u2610 \u5168\u9009").setIcon("check-square").onClick(() => {
        this.toggleSelectAll();
      })
    );
    menu.addSeparator();
    if (this.viewType === "notes") {
      menu.addItem(
        (item) => item.setTitle(`\u26A1 \u6279\u91CF\u5236\u5361 (${this.selectedUnitIds.size})`).setIcon("zap").onClick(() => {
          this.batchCreateFlashcards();
        })
      );
    }
    menu.addItem(
      (item) => item.setTitle(`\u{1F5D1}\uFE0F \u5220\u9664\u9009\u4E2D (${this.viewType === "cards" ? this.selectedCardIds.size : this.selectedUnitIds.size})`).setIcon("trash").onClick(() => {
        if (this.viewType === "cards") {
          this.batchDeleteFlashcards();
        } else {
          this.batchDeleteNotes();
        }
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u2713 \u9000\u51FA\u6279\u91CF\u6A21\u5F0F").setIcon("x").onClick(() => {
        this.batchMode = false;
        this.selectedUnitIds.clear();
        this.selectedCardIds.clear();
        this.render();
      })
    );
    menu.showAtMouseEvent(event);
  }
  /**
   * 显示上下文菜单
   */
  showContextMenu(event, unit) {
    const menu = new import_obsidian5.Menu();
    menu.addItem(
      (item) => item.setTitle("\u{1F4D6} \u8DF3\u8F6C\u5230\u539F\u6587").setIcon("arrow-up-right").onClick(() => this.jumpToSource(unit))
    );
    menu.addItem(
      (item) => item.setTitle("\u{1F4AC} \u7F16\u8F91\u6279\u6CE8").setIcon("message-square").onClick(() => this.openAnnotationEditor(unit))
    );
    menu.addSeparator();
    if (unit.flashcardIds.length > 0) {
      menu.addItem(
        (item) => item.setTitle("\u270F\uFE0F \u7F16\u8F91\u95EA\u5361").setIcon("edit").onClick(() => this.editFlashcardsForUnit(unit, event))
      );
      menu.addSeparator();
    }
    menu.addItem(
      (item) => item.setTitle("\u26A1 \u751F\u6210\u95EA\u5361").setIcon("zap").onClick(() => this.quickGenerateFlashcard(unit))
    );
    menu.addItem(
      (item) => item.setTitle("\u2795 \u521B\u5EFA QA \u95EA\u5361").setIcon("plus").onClick(async () => {
        await this.createFlashcard(unit, "qa");
      })
    );
    menu.addItem(
      (item) => item.setTitle("\u2795 \u521B\u5EFA\u586B\u7A7A\u95EA\u5361").setIcon("plus").onClick(async () => {
        await this.createFlashcard(unit, "cloze");
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u67E5\u770B\u7EDF\u8BA1").setIcon("bar-chart").onClick(() => {
        this.plugin.activateStats();
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u{1F5D1}\uFE0F \u5220\u9664\u7B14\u8BB0").setIcon("trash").onClick(async () => {
        if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u6761\u7B14\u8BB0\u5417\uFF1F")) {
          if (unit.flashcardIds.length > 0) {
            for (const cardId of unit.flashcardIds) {
              await this.plugin.flashcardManager.deleteCard(cardId);
            }
          }
          await this.plugin.dataManager.deleteContentUnit(unit.id);
          new import_obsidian5.Notice("\u{1F5D1}\uFE0F \u7B14\u8BB0\u5DF2\u5220\u9664");
          this.refresh();
        }
      })
    );
    menu.showAtMouseEvent(event);
  }
  /**
   * 编辑笔记单元关联的闪卡
   */
  editFlashcardsForUnit(unit, event) {
    if (unit.flashcardIds.length === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u8BE5\u7B14\u8BB0\u6CA1\u6709\u5173\u8054\u7684\u95EA\u5361");
      return;
    }
    if (unit.flashcardIds.length === 1) {
      const allCards2 = this.plugin.flashcardManager.getAllFlashcards();
      const card = allCards2.find((c) => c.id === unit.flashcardIds[0]);
      if (card) {
        this.editFlashcard(card);
      } else {
        new import_obsidian5.Notice("\u26A0\uFE0F \u627E\u4E0D\u5230\u8BE5\u95EA\u5361");
      }
      return;
    }
    const menu = new import_obsidian5.Menu();
    const allCards = this.plugin.flashcardManager.getAllFlashcards();
    unit.flashcardIds.forEach((cardId, index) => {
      const card = allCards.find((c) => c.id === cardId);
      if (card) {
        const typeLabel = card.type === "qa" ? "Q&A" : "\u586B\u7A7A";
        const preview = card.front.length > 30 ? card.front.substring(0, 30) + "..." : card.front;
        menu.addItem(
          (item) => item.setTitle(`${index + 1}. ${typeLabel}: ${preview}`).onClick(() => this.editFlashcard(card))
        );
      }
    });
    if (event) {
      menu.showAtMouseEvent(event);
    } else {
      menu.showAtPosition({ x: 100, y: 100 });
    }
  }
  /**
   * 显示闪卡上下文菜单
   */
  showFlashcardContextMenu(event, card) {
    const menu = new import_obsidian5.Menu();
    menu.addItem(
      (item) => item.setTitle("\u{1F4D6} \u8DF3\u8F6C\u5230\u539F\u6587").setIcon("arrow-up-right").onClick(async () => {
        const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
        if (unit) {
          await this.jumpToSource(unit);
        } else {
          const file = this.app.vault.getAbstractFileByPath(card.sourceFile);
          if (file instanceof import_obsidian5.TFile) {
            await this.app.workspace.getLeaf(false).openFile(file);
            new import_obsidian5.Notice("\u2705 \u5DF2\u6253\u5F00\u6E90\u6587\u4EF6");
          } else {
            new import_obsidian5.Notice("\u26A0\uFE0F \u627E\u4E0D\u5230\u539F\u59CB\u7B14\u8BB0");
          }
        }
      })
    );
    menu.addItem(
      (item) => item.setTitle("\u270F\uFE0F \u7F16\u8F91\u5361\u7247").setIcon("edit").onClick(() => {
        this.editFlashcard(card);
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u{1F4CA} \u67E5\u770B\u7EDF\u8BA1").setIcon("bar-chart").onClick(() => {
        this.plugin.activateStats();
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u{1F5D1}\uFE0F \u5220\u9664\u5361\u7247").setIcon("trash").onClick(async () => {
        if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u5F20\u95EA\u5361\u5417\uFF1F")) {
          await this.deleteFlashcard(card.id);
        }
      })
    );
    menu.showAtMouseEvent(event);
  }
  /**
   * 创建特定类型的闪卡
   */
  async createFlashcard(unit, type) {
    const modal = new FlashcardCreationModal(
      this.app,
      unit,
      type,
      async (question, answer) => {
        try {
          if (type === "qa") {
            await this.plugin.flashcardManager.createQACard(
              unit.id,
              question,
              answer
            );
          } else {
            const deletions = [{
              index: 0,
              answer
            }];
            await this.plugin.flashcardManager.createClozeCard(
              unit.id,
              question,
              deletions
            );
          }
          new import_obsidian5.Notice(`\u2705 ${type === "qa" ? "QA" : "\u586B\u7A7A"}\u95EA\u5361\u5DF2\u521B\u5EFA`);
          this.refresh();
        } catch (error) {
          console.error("Error creating flashcard:", error);
          new import_obsidian5.Notice("\u274C \u521B\u5EFA\u95EA\u5361\u5931\u8D25");
        }
      }
    );
    modal.open();
  }
  /**
   * 在编辑器中打开文件
   */
  async openFileInEditor(filePath) {
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian5.TFile) {
      await this.app.workspace.getLeaf(false).openFile(file);
    } else {
      new import_obsidian5.Notice("\u26A0\uFE0F \u65E0\u6CD5\u6253\u5F00\u6587\u4EF6");
    }
  }
  /**
   * 删除闪卡
   */
  async deleteFlashcard(cardId) {
    try {
      await this.plugin.flashcardManager.deleteCard(cardId);
      new import_obsidian5.Notice("\u{1F5D1}\uFE0F \u95EA\u5361\u5DF2\u5220\u9664");
      this.refresh();
    } catch (error) {
      console.error("Error deleting flashcard:", error);
      new import_obsidian5.Notice("\u274C \u5220\u9664\u95EA\u5361\u5931\u8D25");
    }
  }
  /**
   * 编辑闪卡
   */
  editFlashcard(card) {
    const modal = new FlashcardEditModal(
      this.app,
      card,
      async (question, answer) => {
        try {
          const updatedCard = {
            ...card,
            front: question,
            back: card.type === "cloze" ? [answer] : answer,
            metadata: {
              ...card.metadata,
              updatedAt: Date.now()
            }
          };
          await this.plugin.flashcardManager.updateCard(updatedCard);
          new import_obsidian5.Notice("\u2705 \u95EA\u5361\u5DF2\u66F4\u65B0");
          this.refresh();
        } catch (error) {
          console.error("Error updating flashcard:", error);
          new import_obsidian5.Notice("\u274C \u66F4\u65B0\u95EA\u5361\u5931\u8D25");
        }
      }
    );
    modal.open();
  }
  /**
   * 更新批量操作按钮
   */
  updateBatchButtons() {
    const container = this.containerEl.children[1];
    const batchActions = container.querySelector(".batch-actions");
    if (batchActions) {
      const selectAllBtn = batchActions.querySelector(".select-all-btn");
      const deleteBtn = batchActions.querySelector(".batch-delete-btn");
      const createBtn = batchActions.querySelector(".batch-create-cards-btn");
      if (selectAllBtn) {
        selectAllBtn.textContent = this.isAllSelected() ? "\u2611 \u9009\u62E9" : "\u2610 \u5168\u9009";
      }
      if (deleteBtn) {
        const count = this.viewType === "cards" ? this.selectedCardIds.size : this.selectedUnitIds.size;
        deleteBtn.textContent = `\u{1F5D1}\uFE0F \u5220\u9664\u9009\u4E2D (${count})`;
      }
      if (createBtn) {
        createBtn.textContent = `\u26A1 \u6279\u91CF\u5236\u5361 (${this.selectedUnitIds.size})`;
      }
    }
    const headerSelectBtn = container.querySelector(".select-all-btn-header");
    if (headerSelectBtn) {
      headerSelectBtn.textContent = this.isAllSelected() ? "\u2611 \u9009\u62E9" : "\u2610 \u5168\u9009";
    }
    const sidebarSelectBtn = container.querySelector(".select-all-btn-sidebar");
    if (sidebarSelectBtn) {
      sidebarSelectBtn.textContent = this.isAllSelected() ? "\u2611 \u9009\u62E9" : "\u2610 \u5168\u9009";
    }
  }
  /**
   * 批量删除闪卡
   */
  async batchDeleteFlashcards() {
    if (this.selectedCardIds.size === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u95EA\u5361");
      return;
    }
    if (!confirm(`\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u7684 ${this.selectedCardIds.size} \u5F20\u95EA\u5361\u5417\uFF1F`)) {
      return;
    }
    let success = 0;
    let failed = 0;
    for (const cardId of this.selectedCardIds) {
      try {
        await this.plugin.flashcardManager.deleteCard(cardId);
        success++;
      } catch (error) {
        console.error("Error deleting flashcard:", error);
        failed++;
      }
    }
    this.selectedCardIds.clear();
    new import_obsidian5.Notice(`\u2705 \u5DF2\u5220\u9664 ${success} \u5F20\u95EA\u5361${failed > 0 ? `\uFF0C${failed} \u5F20\u5931\u8D25` : ""}`);
    this.refresh();
  }
  /**
   * 批量删除笔记
   */
  async batchDeleteNotes() {
    if (this.selectedUnitIds.size === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u7B14\u8BB0");
      return;
    }
    if (!confirm(`\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u7684 ${this.selectedUnitIds.size} \u6761\u7B14\u8BB0\u5417\uFF1F`)) {
      return;
    }
    let success = 0;
    let failed = 0;
    for (const unitId of this.selectedUnitIds) {
      try {
        const unit = this.plugin.dataManager.getContentUnit(unitId);
        if (unit) {
          if (unit.flashcardIds.length > 0) {
            for (const cardId of unit.flashcardIds) {
              await this.plugin.flashcardManager.deleteCard(cardId);
            }
          }
        }
        await this.plugin.dataManager.deleteContentUnit(unitId);
        success++;
      } catch (error) {
        console.error("Error deleting note:", error);
        failed++;
      }
    }
    this.selectedUnitIds.clear();
    this.batchMode = false;
    new import_obsidian5.Notice(`\u2705 \u5DF2\u5220\u9664 ${success} \u6761\u7B14\u8BB0${failed > 0 ? `\uFF0C${failed} \u6761\u5931\u8D25` : ""}`);
    this.refresh();
  }
  /**
   * 检查是否全选
   */
  isAllSelected() {
    const visible = this.getVisibleItems();
    if (this.viewType === "cards") {
      const cards = visible.cards || [];
      return cards.length > 0 && this.selectedCardIds.size === cards.length;
    } else {
      const units = visible.units || [];
      return units.length > 0 && this.selectedUnitIds.size === units.length;
    }
  }
  /**
   * 切换全选/取消
   */
  /**
  * 切换全选/取消
  */
  toggleSelectAll() {
    const visible = this.getVisibleItems();
    if (this.viewType === "cards") {
      const cards = visible.cards || [];
      if (cards.length === 0) {
        new import_obsidian5.Notice("\u26A0\uFE0F \u6CA1\u6709\u53EF\u9009\u62E9\u7684\u95EA\u5361");
        return;
      }
      if (this.selectedCardIds.size === cards.length) {
        this.selectedCardIds.clear();
      } else {
        cards.forEach((card) => this.selectedCardIds.add(card.id));
      }
    } else {
      const units = visible.units || [];
      if (units.length === 0) {
        if (this.displayMode === "sidebar" && (this.groupMode === "tag" || this.groupMode === "date")) {
          new import_obsidian5.Notice("\u26A0\uFE0F \u6CA1\u6709\u53EF\u9009\u62E9\u7684\u7B14\u8BB0");
        } else if (this.groupMode === "annotation" && !this.selectedFile) {
          new import_obsidian5.Notice('\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9"\u6709\u6279\u6CE8"\u6216"\u65E0\u6279\u6CE8"\u5206\u7EC4');
        } else if (this.displayMode === "main" && !this.selectedFile) {
          new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u5206\u7EC4");
        } else {
          new import_obsidian5.Notice("\u26A0\uFE0F \u6CA1\u6709\u53EF\u9009\u62E9\u7684\u7B14\u8BB0");
        }
        return;
      }
      if (this.selectedUnitIds.size === units.length) {
        this.selectedUnitIds.clear();
      } else {
        units.forEach((unit) => this.selectedUnitIds.add(unit.id));
      }
    }
    this.batchMode = this.selectedUnitIds.size > 0 || this.selectedCardIds.size > 0;
    this.render();
  }
  /**
  * 自动全选当前可见项目
  */
  autoSelectAll() {
    this.selectedUnitIds.clear();
    this.selectedCardIds.clear();
    const visible = this.getVisibleItems();
    if (this.viewType === "cards") {
      const cards = visible.cards || [];
      cards.forEach((card) => this.selectedCardIds.add(card.id));
    } else {
      const units = visible.units || [];
      units.forEach((unit) => this.selectedUnitIds.add(unit.id));
    }
    if (this.selectedUnitIds.size > 0 || this.selectedCardIds.size > 0) {
      this.batchMode = true;
    }
  }
  /**
   * 清除所有选择
   */
  clearSelection() {
    this.selectedUnitIds.clear();
    this.selectedCardIds.clear();
    this.batchMode = false;
    this.render();
  }
  /**
   * 更新所有checkbox状态
   */
  updateCheckboxes() {
    const container = this.containerEl.children[1];
    const checkboxes = container.querySelectorAll(".batch-checkbox");
    checkboxes.forEach((checkbox) => {
      if (this.viewType === "cards") {
        const cardId = checkbox.getAttribute("data-card-id");
        if (cardId) {
          checkbox.checked = this.selectedCardIds.has(cardId);
        }
      } else {
        const unitId = checkbox.getAttribute("data-unit-id");
        if (unitId) {
          checkbox.checked = this.selectedUnitIds.has(unitId);
        }
      }
    });
  }
  /**
   * 批量创建闪卡
   */
  async batchCreateFlashcards() {
    if (this.selectedUnitIds.size === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u521B\u5EFA\u95EA\u5361\u7684\u7B14\u8BB0");
      return;
    }
    const units = Array.from(this.selectedUnitIds).map((id) => this.plugin.dataManager.getContentUnit(id)).filter((u) => u !== void 0 && u.flashcardIds.length === 0);
    if (units.length === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u9009\u4E2D\u7684\u7B14\u8BB0\u90FD\u5DF2\u521B\u5EFA\u8FC7\u95EA\u5361");
      return;
    }
    const { BatchCreateModal: BatchCreateModal2 } = await Promise.resolve().then(() => (init_OverviewView(), OverviewView_exports));
    const quickCreator = new QuickFlashcardCreator(this.plugin);
    const modal = new BatchCreateModal2(
      this.app,
      this.plugin,
      quickCreator,
      units,
      () => {
        this.selectedUnitIds.clear();
        this.refresh();
      }
    );
    modal.open();
  }
  // ==================== 工具方法 ====================
  /**
   * 获取过滤后的内容单元
   */
  getFilteredUnits() {
    let units = this.plugin.dataManager.getAllContentUnits();
    if (this.searchQuery) {
      const query = this.searchQuery.toLowerCase();
      units = units.filter(
        (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
      );
    }
    if (this.filterMode === "annotated") {
      units = units.filter((u) => u.annotationId);
    } else if (this.filterMode === "flashcards") {
      units = units.filter((u) => u.flashcardIds.length > 0);
    }
    return units;
  }
  /**
   * 分组内容单元
   */
  groupUnits(units) {
    const grouped = /* @__PURE__ */ new Map();
    units.forEach((unit) => {
      let key;
      switch (this.groupMode) {
        case "file":
          key = unit.source.file;
          break;
        case "annotation":
          const hasAnnotation = unit.annotationId ? "\u6709\u6279\u6CE8" : "\u65E0\u6279\u6CE8";
          if (!grouped.has(hasAnnotation))
            grouped.set(hasAnnotation, []);
          grouped.get(hasAnnotation).push(unit);
          return;
        case "tag":
          unit.metadata.tags.forEach((tag) => {
            if (!grouped.has(tag))
              grouped.set(tag, []);
            grouped.get(tag).push(unit);
          });
          return;
        case "date":
          key = this.formatDate(new Date(unit.metadata.createdAt));
          break;
        default:
          key = "\u672A\u5206\u7EC4";
      }
      if (!grouped.has(key))
        grouped.set(key, []);
      grouped.get(key).push(unit);
    });
    return Array.from(grouped.entries()).map(([groupKey, units2]) => ({ groupKey, units: units2 })).sort((a, b) => {
      if (this.groupMode === "annotation") {
        if (a.groupKey === "\u6709\u6279\u6CE8")
          return -1;
        if (b.groupKey === "\u6709\u6279\u6CE8")
          return 1;
        return 0;
      }
      if (this.groupMode === "date") {
        return b.groupKey.localeCompare(a.groupKey);
      }
      return b.units.length - a.units.length;
    });
  }
  /**
   * 分组闪卡（类似 groupUnits）
   */
  groupFlashcards(flashcards) {
    const grouped = /* @__PURE__ */ new Map();
    flashcards.forEach((card) => {
      let keys = [];
      const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
      switch (this.groupMode) {
        case "file":
          keys = [card.sourceFile];
          break;
        case "annotation":
          if (unit && unit.annotationId) {
            keys = ["\u6709\u6279\u6CE8"];
          } else {
            keys = ["\u65E0\u6279\u6CE8"];
          }
          break;
        case "tag":
          if (unit && unit.metadata.tags.length > 0) {
            keys = unit.metadata.tags;
          } else if (card.tags && card.tags.length > 0) {
            keys = card.tags;
          } else if (card.deck) {
            keys = [card.deck];
          } else {
            keys = ["\u672A\u5206\u7C7B"];
          }
          break;
        case "date":
          keys = [this.formatDate(new Date(card.metadata.createdAt))];
          break;
        default:
          keys = ["\u672A\u5206\u7EC4"];
      }
      keys.forEach((key) => {
        if (!grouped.has(key)) {
          grouped.set(key, []);
        }
        grouped.get(key).push(card);
      });
    });
    const result = Array.from(grouped.entries()).map(([groupKey, cards]) => ({ groupKey, cards })).sort((a, b) => {
      if (this.groupMode === "annotation") {
        if (a.groupKey === "\u6709\u6279\u6CE8")
          return -1;
        if (b.groupKey === "\u6709\u6279\u6CE8")
          return 1;
        return 0;
      }
      if (this.groupMode === "date") {
        return b.groupKey.localeCompare(a.groupKey);
      }
      return b.cards.length - a.cards.length;
    });
    return result;
  }
  /**
   * 获取统计信息
   */
  getFilteredStats() {
    const units = this.getFilteredUnits();
    return {
      count: units.length,
      withAnnotations: units.filter((u) => u.annotationId).length,
      withFlashcards: units.filter((u) => u.flashcardIds.length > 0).length
    };
  }
  /**
   * 格式化日期
   */
  formatDate(date) {
    return date.toLocaleDateString("zh-CN", {
      year: "numeric",
      month: "2-digit",
      day: "2-digit"
    });
  }
  /**
   * 获取分组图标
   */
  getGroupIcon(mode) {
    switch (mode) {
      case "file":
        return "\u{1F4C4}";
      case "annotation":
        return "\u{1F4AC}";
      case "tag":
        return "\u{1F3F7}\uFE0F";
      case "date":
        return "\u{1F4C5}";
      default:
        return "\u{1F4C1}";
    }
  }
  /**
  * 创建全选按钮（统一样式和行为）
  */
  createSelectAllButton(container, styleClass) {
    var _a, _b;
    console.log("\u{1F50D} [createSelectAllButton] ========== \u5F00\u59CB\u521B\u5EFA\u6309\u94AE ==========");
    console.log("\u{1F50D} [createSelectAllButton] styleClass:", styleClass);
    console.log("\u{1F50D} [createSelectAllButton] this.displayMode:", this.displayMode);
    console.log("\u{1F50D} [createSelectAllButton] this.groupMode:", this.groupMode);
    console.log("\u{1F50D} [createSelectAllButton] this.selectedFile:", this.selectedFile);
    console.log("\u{1F50D} [createSelectAllButton] this.viewType:", this.viewType);
    const btnClass = styleClass === "sidebar" ? "select-all-btn-sidebar" : "select-all-btn-header";
    const isAllChecked = this.isAllSelected();
    const visible = this.getVisibleItems();
    console.log("\u{1F50D} [createSelectAllButton] visible:", visible);
    const itemCount = this.viewType === "cards" ? ((_a = visible.cards) == null ? void 0 : _a.length) || 0 : ((_b = visible.units) == null ? void 0 : _b.length) || 0;
    console.log("\u{1F50D} [createSelectAllButton] itemCount:", itemCount);
    console.log("\u{1F50D} [createSelectAllButton] isAllChecked:", isAllChecked);
    const selectAllBtn = container.createEl("button", {
      text: isAllChecked ? "\u2713 \u5B8C\u6210" : "\u2610 \u5168\u9009",
      cls: `${btnClass} ${isAllChecked ? "completed" : ""}`,
      title: isAllChecked ? "\u53D6\u6D88\u5168\u9009" : `\u5168\u9009\u5F53\u524D ${itemCount} \u9879`
    });
    const shouldDisable = itemCount === 0 || this.groupMode === "annotation" && this.displayMode === "main" && !this.selectedFile;
    console.log("\u{1F50D} [createSelectAllButton] shouldDisable \u8BA1\u7B97\u8FC7\u7A0B:");
    console.log("  - itemCount === 0:", itemCount === 0);
    console.log("  - groupMode === annotation:", this.groupMode === "annotation");
    console.log("  - displayMode === main:", this.displayMode === "main");
    console.log("  - !selectedFile:", !this.selectedFile);
    console.log("  - \u6700\u7EC8 shouldDisable:", shouldDisable);
    if (shouldDisable) {
      selectAllBtn.disabled = true;
      selectAllBtn.style.opacity = "0.5";
      selectAllBtn.style.cursor = "not-allowed";
      selectAllBtn.title = itemCount === 0 ? "\u6CA1\u6709\u53EF\u9009\u9879" : '\u8BF7\u5148\u9009\u62E9"\u6709\u6279\u6CE8"\u6216"\u65E0\u6279\u6CE8"';
      console.log("\u{1F50D} [createSelectAllButton] \u274C \u6309\u94AE\u5DF2\u7981\u7528");
    } else {
      console.log("\u{1F50D} [createSelectAllButton] \u2705 \u6309\u94AE\u53EF\u7528");
    }
    selectAllBtn.addEventListener("click", () => {
      console.log("\u{1F50D} [\u5168\u9009\u6309\u94AE] \u70B9\u51FB\u4E8B\u4EF6\u89E6\u53D1\uFF01");
      this.toggleSelectAll();
    });
    console.log("\u{1F50D} [createSelectAllButton] ========== \u6309\u94AE\u521B\u5EFA\u5B8C\u6210 ==========\n");
    return selectAllBtn;
  }
  /**
   * 创建批量操作按钮组（制卡、删除、取消）
   */
  createBatchActionButtons(container, styleClass) {
    if (!this.batchMode)
      return;
    const btnPrefix = styleClass === "sidebar" ? "sidebar" : "header";
    if (this.viewType === "notes") {
      const createBtn = container.createEl("button", {
        text: styleClass === "sidebar" ? `\u26A1(${this.selectedUnitIds.size})` : `\u26A1 \u6279\u91CF\u5236\u5361 (${this.selectedUnitIds.size})`,
        cls: `batch-create-cards-btn-${btnPrefix}`,
        title: "\u6279\u91CF\u5236\u5361"
      });
      createBtn.addEventListener("click", () => {
        if (this.selectedUnitIds.size === 0) {
          new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u521B\u5EFA\u95EA\u5361\u7684\u7B14\u8BB0");
          return;
        }
        this.batchCreateFlashcards();
      });
    }
    const count = this.viewType === "cards" ? this.selectedCardIds.size : this.selectedUnitIds.size;
    const deleteBtn = container.createEl("button", {
      text: styleClass === "sidebar" ? `\u{1F5D1}\uFE0F(${count})` : `\u{1F5D1}\uFE0F \u5220\u9664 (${count})`,
      cls: `batch-delete-btn-${btnPrefix}`,
      title: "\u6279\u91CF\u5220\u9664"
    });
    deleteBtn.addEventListener("click", () => {
      if (count === 0) {
        new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u9879\u76EE");
        return;
      }
      if (this.viewType === "cards") {
        this.batchDeleteFlashcards();
      } else {
        this.batchDeleteNotes();
      }
    });
    const cancelBtn = container.createEl("button", {
      text: styleClass === "sidebar" ? "\u2715" : "\u2715 \u53D6\u6D88",
      cls: `cancel-selection-btn-${btnPrefix}`,
      title: "\u5173\u95ED\u6279\u91CF\u6A21\u5F0F"
    });
    cancelBtn.addEventListener("click", () => {
      this.clearSelection();
    });
  }
  // 提取全选功能
  /**
   * 获取当前可见的所有项（笔记或闪卡）
   */
  getVisibleItems() {
    console.log("\u{1F50D} [getVisibleItems] ========== \u5F00\u59CB\u6267\u884C ==========");
    console.log("\u{1F50D} [getVisibleItems] viewType:", this.viewType);
    console.log("\u{1F50D} [getVisibleItems] displayMode:", this.displayMode);
    console.log("\u{1F50D} [getVisibleItems] groupMode:", this.groupMode);
    console.log("\u{1F50D} [getVisibleItems] selectedFile:", this.selectedFile);
    if (this.viewType === "cards") {
      const allFlashcards = this.plugin.flashcardManager.getAllFlashcards();
      if (this.displayMode === "sidebar") {
        if (!this.selectedFile) {
          return { cards: allFlashcards };
        }
        const filteredCards = allFlashcards.filter((card) => {
          if (this.groupMode === "file") {
            return card.sourceFile === this.selectedFile;
          } else if (this.groupMode === "annotation") {
            const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
            const hasAnnotation = this.selectedFile === "\u6709\u6279\u6CE8";
            return hasAnnotation ? unit && !!unit.annotationId : !unit || !unit.annotationId;
          } else if (this.groupMode === "tag") {
            const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
            return unit && unit.metadata.tags.includes(this.selectedFile) || card.tags && card.tags.includes(this.selectedFile) || card.deck === this.selectedFile;
          } else if (this.groupMode === "date") {
            return this.formatDate(new Date(card.metadata.createdAt)) === this.selectedFile;
          }
          return false;
        });
        return { cards: filteredCards };
      } else {
        if (!this.selectedFile) {
          return { cards: [] };
        }
        const filteredCards = allFlashcards.filter((card) => {
          if (this.groupMode === "file") {
            return card.sourceFile === this.selectedFile;
          } else if (this.groupMode === "annotation") {
            const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
            const hasAnnotation = this.selectedFile === "\u6709\u6279\u6CE8";
            return hasAnnotation ? unit && !!unit.annotationId : !unit || !unit.annotationId;
          } else if (this.groupMode === "tag") {
            const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
            return unit && unit.metadata.tags.includes(this.selectedFile) || card.tags && card.tags.includes(this.selectedFile) || card.deck === this.selectedFile || this.selectedFile === "\u672A\u5206\u7C7B" && (!card.tags || card.tags.length === 0) && !card.deck && (!unit || !unit.metadata.tags || unit.metadata.tags.length === 0);
          } else if (this.groupMode === "date") {
            return this.formatDate(new Date(card.metadata.createdAt)) === this.selectedFile;
          }
          return false;
        });
        return { cards: filteredCards };
      }
    } else {
      let units = this.getFilteredUnits();
      console.log("\u{1F50D} [getVisibleItems] \u521D\u59CB getFilteredUnits() \u8FD4\u56DE\u6570\u91CF:", units.length);
      if (this.displayMode === "sidebar") {
        console.log("\u{1F50D} [getVisibleItems] \u8FDB\u5165\u4FA7\u8FB9\u680F\u6A21\u5F0F\u5904\u7406");
        if (!this.selectedFile) {
          console.log("\u{1F50D} [getVisibleItems] selectedFile \u4E0D\u5B58\u5728\uFF0C\u8FD4\u56DE\u7A7A\u6570\u7EC4");
          return { units: [] };
        }
        console.log("\u{1F50D} [getVisibleItems] selectedFile \u5B58\u5728:", this.selectedFile);
        units = units.filter((unit) => unit.source.file === this.selectedFile);
        console.log("\u{1F50D} [getVisibleItems] \u6309\u5F53\u524D\u6587\u4EF6\u8FC7\u6EE4\u540E\u6570\u91CF:", units.length);
        if (this.groupMode === "annotation") {
          const hasAnnotation = units.some((u) => !!u.annotationId);
          console.log("\u{1F50D} [getVisibleItems] annotation \u6A21\u5F0F\uFF0C\u4FDD\u6301\u5F53\u524D\u6587\u4EF6\u6240\u6709\u7B14\u8BB0");
        }
        console.log("\u{1F50D} [getVisibleItems] \u4FA7\u8FB9\u680F\u6700\u7EC8\u8FD4\u56DE units \u6570\u91CF:", units.length);
        return { units };
      } else {
        console.log("\u{1F50D} [getVisibleItems] \u8FDB\u5165\u4E3B\u754C\u9762\u6A21\u5F0F\u5904\u7406");
        if (!this.selectedFile) {
          console.log("\u{1F50D} [getVisibleItems] selectedFile \u4E0D\u5B58\u5728\uFF0C\u8FD4\u56DE\u7A7A\u6570\u7EC4");
          return { units: [] };
        }
        if (this.groupMode === "file") {
          units = units.filter((unit) => unit.source.file === this.selectedFile);
        } else if (this.groupMode === "annotation") {
          const hasAnnotation = this.selectedFile === "\u6709\u6279\u6CE8";
          units = units.filter((unit) => hasAnnotation ? !!unit.annotationId : !unit.annotationId);
        } else if (this.groupMode === "tag") {
          units = units.filter((unit) => unit.metadata.tags.includes(this.selectedFile));
        } else if (this.groupMode === "date") {
          units = units.filter(
            (unit) => this.formatDate(new Date(unit.metadata.createdAt)) === this.selectedFile
          );
        }
        console.log("\u{1F50D} [getVisibleItems] \u4E3B\u754C\u9762\u6700\u7EC8\u8FD4\u56DE units \u6570\u91CF:", units.length);
        return { units };
      }
    }
  }
  /**
   * 添加样式
   */
  addStyles() {
    if (document.getElementById("learning-overview-styles")) {
      return;
    }
    const styleEl = document.createElement("style");
    styleEl.id = "learning-overview-styles";
    if (document.getElementById("learning-overview-styles")) {
      return;
    }
    styleEl.textContent = `
      /* ==================== \u5168\u5C40\u5BB9\u5668 ==================== */
      .learning-overview-container {
        height: 100%;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        background: var(--background-primary);
      }

      /* ==================== \u4FA7\u8FB9\u680F\u6A21\u5F0F\u6837\u5F0F ==================== */
      .learning-overview-container[data-mode="sidebar"] {
        padding: 0;
      }

      .sidebar-toolbar {
        padding: 12px;
        border-bottom: 1px solid var(--background-modifier-border);
        background: var(--background-primary);
        flex-shrink: 0;
          position: relative; /* \u{1F527} \u6DFB\u52A0 */
  z-index: 10;
      }

      .search-container {
        margin-bottom: 10px;
      }

      .search-input {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        font-size: 13px;
        background: var(--background-primary);
        color: var(--text-normal);
      }

      .search-input:focus {
        outline: none;
        border-color: var(--interactive-accent);
      }

      .filter-chips {
        display: flex;
        gap: 6px;
        margin-bottom: 10px;
      }

      .filter-chip {
        flex: 1;
        text-align: center;
        padding: 6px 8px;
        font-size: 11px;
        border-radius: 12px;
        background: var(--background-secondary);
        cursor: pointer;
        transition: all 0.2s;
        border: 1px solid transparent;
      }

      .filter-chip:hover {
        background: var(--background-modifier-hover);
      }

      .filter-chip.active {
        background: var(--interactive-accent);
        color: var(--text-on-accent);
        font-weight: 600;
        border-color: var(--interactive-accent);
      }

      .group-switcher {
        display: flex;
        gap: 6px;
        margin-bottom: 10px;
      }

      .group-btn {
        flex: 1;
        text-align: center;
        padding: 6px;
        font-size: 16px;
        border-radius: 6px;
        background: var(--background-secondary);
        cursor: pointer;
        transition: all 0.2s;
        border: 1px solid transparent;
      }

      .group-btn:hover {
        background: var(--background-modifier-hover);
      }

      .group-btn.active {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        transform: scale(1.05);
      }
/* \u5728 .stats-badge \u6837\u5F0F\u4E4B\u524D\u6DFB\u52A0 */
.stats-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 3px;
}
/* \u5934\u90E8\u64CD\u4F5C\u6309\u94AE\u5BB9\u5668 */
.header-actions {
  display: flex;
  gap: 8px;
  align-items: center;
}

/* \u6279\u91CF\u64CD\u4F5C\u6309\u94AE\u6837\u5F0F - \u4FA7\u8FB9\u680F */
.batch-create-cards-btn-sidebar,
.batch-delete-btn-sidebar {
  padding: 6px 6px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 11px;
  font-weight: 500;
  white-space: nowrap;
}

.batch-create-cards-btn-sidebar:hover {
  background: var(--interactive-accent);
  color: white;
  border-color: var(--interactive-accent);
}

.batch-delete-btn-sidebar:hover {
  background: var(--color-red);
  color: white;
  border-color: var(--color-red);
}

/* \u6279\u91CF\u64CD\u4F5C\u6309\u94AE\u6837\u5F0F - \u4E3B\u754C\u9762 */
.batch-create-cards-btn-header,
.batch-delete-btn-header {
  padding: 8px 16px;
  font-size: 13px;
  border-radius: 6px;
  border: 1px solid var(--background-modifier-border);
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-weight: 500;
  white-space: nowrap;
}

.batch-create-cards-btn-header:hover {
  background: var(--interactive-accent);
  color: white;
  border-color: var(--interactive-accent);
}

.batch-delete-btn-header:hover {
  background: var(--color-red);
  color: white;
  border-color: var(--color-red);
}
.select-all-btn-sidebar {
  padding: 6px 12px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 11px;
  font-weight: 500;
  flex-shrink: 0; /* \u9632\u6B62\u6309\u94AE\u88AB\u538B\u7F29 */
}

.select-all-btn-sidebar:hover {
  background: var(--interactive-accent);
  border-color: var(--interactive-accent);
  color: white;
}

.stats-badge {
  text-align: center;
  font-size: 11px;
  color: var(--text-muted);
  padding: 4px;
  flex: 1; /* \u5360\u636E\u5269\u4F59\u7A7A\u95F4 */
}
      .stats-badge {
        text-align: center;
        font-size: 11px;
        color: var(--text-muted);
        padding: 4px;
      }
.select-all-btn-header {
  padding: 8px 16px;
  font-size: 13px;
  border-radius: 6px;
  background: var(--background-secondary);
  color: var(--text-normal);
  border: 1px solid var(--background-modifier-border);
  cursor: pointer;
  transition: all 0.2s;
  font-weight: 500;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.select-all-btn-header:hover {
  background: var(--interactive-accent);
  color: var(--text-on-accent);
  border-color: var(--interactive-accent);
  transform: translateY(-1px);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

/* \u5B8C\u6210\u72B6\u6001\u7684\u9AD8\u4EAE\u6837\u5F0F */
.select-all-btn-header.completed {
  background: var(--interactive-accent);
  border-color: var(--interactive-accent);
  color: var(--text-on-accent);
}

.select-all-btn-header.completed:hover {
  opacity: 0.9;
}

.select-all-btn-sidebar {
  padding: 6px 12px;

  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 11px;
  font-weight: 500;
  margin-right: auto; /* \u9760\u5DE6\u5BF9\u9F50 */
}

.select-all-btn-sidebar:hover {
  background: var(--interactive-accent);
  border-color: var(--interactive-accent);
  color: white;
}
  /* \u53D6\u6D88\u9009\u62E9\u6309\u94AE - \u4FA7\u8FB9\u680F */
.cancel-selection-btn-sidebar {
  padding: 6px 12px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 11px;
  font-weight: 500;
  white-space: nowrap;
  color: var(--text-muted);
}

.cancel-selection-btn-sidebar:hover {
  background: var(--background-modifier-hover);
  color: var(--text-normal);
  border-color: var(--text-muted);
}

/* \u53D6\u6D88\u9009\u62E9\u6309\u94AE - \u4E3B\u754C\u9762 */
.cancel-selection-btn-header {
  padding: 8px 16px;
  font-size: 13px;
  border-radius: 6px;
  border: 1px solid var(--background-modifier-border);
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-weight: 500;
  white-space: nowrap;
  color: var(--text-muted);
}

.cancel-selection-btn-header:hover {
  background: var(--background-modifier-hover);
  color: var(--text-normal);
  border-color: var(--text-muted);
}

/* \u5B8C\u6210\u72B6\u6001\u7684\u5168\u9009\u6309\u94AE\u9AD8\u4EAE */
.select-all-btn-sidebar.completed,
.select-all-btn-header.completed {
  background: var(--interactive-accent);
  color: var(--text-on-accent);
  border-color: var(--interactive-accent);
}
      .batch-actions {
        display: flex;
        gap: 6px;
        margin-top: 10px;
        flex-wrap: wrap;
      }

      .batch-mode-btn,
      .select-all-btn,
      .batch-delete-btn,
      .batch-create-cards-btn {
        padding: 6px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-secondary);
        cursor: pointer;
        transition: all 0.2s;
        font-size: 11px;
        font-weight: 500;
      }

      .select-all-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .batch-mode-btn:hover {
        background: var(--background-modifier-hover);
      }

      .batch-delete-btn:hover {
        background: var(--color-red);
        border-color: var(--color-red);
        color: white;
      }

      .batch-create-cards-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .batch-checkbox {
        margin-right: 8px;
        cursor: pointer;
      }

      .sidebar-content-list {
        flex: 1;
        overflow-y: auto;
        padding: 8px;
          position: relative; /* \u{1F527} \u6DFB\u52A0 */
  z-index: 1; /* \u{1F527} \u6DFB\u52A0 */
      }

      .content-group {
        margin-bottom: 16px;
      }

      .group-header {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 6px 8px;
        background: var(--background-secondary);
        border-radius: 6px;
        margin-bottom: 6px;
        font-size: 12px;
        font-weight: 600;
        position: sticky;
        top: 0;
        z-index: 10;
      }

      .group-icon {
        font-size: 14px;
      }

      .group-title {
        flex: 1;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .group-count {
        padding: 2px 6px;
        background: var(--background-modifier-border);
        border-radius: 10px;
        font-size: 10px;
      }

      .compact-card {
        display: flex;
        gap: 8px;
        padding: 10px;
        margin: 4px 0;
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        transition: all 0.2s;
      }

      .compact-card:hover {
        border-color: var(--interactive-accent);
        background: var(--background-primary-alt);
        transform: translateX(2px);
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      }

/* \u57FA\u7840\u6307\u793A\u5668\u6837\u5F0F */
.card-indicator {
  width: 4px;
  border-radius: 2px;
  background: var(--background-modifier-border);
  flex-shrink: 0;
  transition: all 0.2s;
}


/* \u{1F527} \u6CA1\u6709\u6279\u6CE8\u65F6\uFF1A\u4E0A\u534A\u900F\u660E\uFF0C\u4E0B\u534A\u663E\u793A\u7C7B\u578B\u989C\u8272 */
.card-indicator.type-qa {
  background: linear-gradient(
    to bottom,
    transparent 0%,
    transparent 50%,
    #10b981 50%,
    #10b981 100%
  );
}

.card-indicator.type-cloze {
  background: linear-gradient(
    to bottom,
    transparent 0%,
    transparent 50%,
        #9333ea 50%,
    #9333ea 100%

  );
}

.card-indicator.type-text {
  background: linear-gradient(
    to bottom,
    transparent 0%,
    transparent 50%,
    #6b7280 50%,
    #6b7280 100%
  );
}

/* \u{1F527} \u6709\u6279\u6CE8\u65F6\uFF1A\u4E0A\u534A\u84DD\u8272\uFF0C\u4E0B\u534A\u7C7B\u578B\u989C\u8272 */
.card-indicator.type-qa.has-annotation {
  background: linear-gradient(
    to bottom, 
    #3b82f6 0%, 
    #3b82f6 50%, 
    #10b981 50%,
    #10b981 100%
  );
}

.card-indicator.type-cloze.has-annotation {
  background: linear-gradient(
    to bottom, 
    #3b82f6 0%, 
    #3b82f6 50%, 
        #9333ea 50%,
    #9333ea 100%

  );
}

.card-indicator.type-text.has-annotation {
  background: linear-gradient(
    to bottom, 
    #3b82f6 0%, 
    #3b82f6 50%, 
    #6b7280 50%,
    #6b7280 100%
  );
}

/* \u{1F527} \u9ED8\u8BA4\u6837\u5F0F\uFF08\u6CA1\u6709\u7C7B\u578B\u65F6\u7684\u515C\u5E95\uFF09 */
.card-indicator:not(.type-qa):not(.type-cloze):not(.type-text) {
  background: linear-gradient(
    to bottom,
    transparent 0%,
    transparent 50%,
    var(--background-modifier-border) 50%,
    var(--background-modifier-border) 100%
  );
}

.card-indicator.has-annotation:not(.type-qa):not(.type-cloze):not(.type-text) {
  background: linear-gradient(
    to bottom,
    #3b82f6 0%,
    #3b82f6 50%,
    var(--background-modifier-border) 50%,
    var(--background-modifier-border) 100%
  );
}



.type-indicator {
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
}

.type-indicator.type-qa {
  background: rgba(16, 185, 129, 0.2);

  color: #10b981;
}

.type-indicator.type-cloze {
  background: rgba(147, 51, 234, 0.2);
    color: #9333ea;

}

.type-indicator.type-text {
  background: rgba(107, 114, 128, 0.2);
  color: #6b7280;
}

      .card-content {
        flex: 1;
        min-width: 0;
      }

      .card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 6px;
      }

      .annotation-btn {
        cursor: pointer;
        font-size: 14px;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.2s;
      }

      .annotation-btn:hover {
        background: var(--background-modifier-hover);
        transform: scale(1.1);
      }

      .card-tools {
        display: flex;
        gap: 4px;
      }

      .tool-btn {
        cursor: pointer;
        font-size: 14px;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.2s;
      }

      .tool-btn:hover {
        background: var(--background-modifier-hover);
      }

      .flashcard-btn:hover {
        background: rgba(251, 191, 36, 0.2);
      }

      .more-btn:hover {
        background: var(--background-modifier-hover);
      }

.note-text {
  font-size: 12px;
  line-height: 1.6;
  color: var(--text-normal);
  cursor: pointer;
  word-wrap: break-word;
  word-break: break-word;
  white-space: normal;
  overflow-wrap: break-word;
  margin-bottom: 6px;
}

.note-text:hover {
  color: var(--interactive-accent);
}

/* \u{1F527} QA \u6837\u5F0F */
.qa-question {
  font-weight: 500;
  color: var(--text-normal);
}

.qa-separator {
  color: var(--text-muted);
  margin: 0 4px;
}

.qa-answer {
  color: var(--text-accent);
  font-style: italic;
}

/* \u{1F527} Cloze \u9AD8\u4EAE\u6837\u5F0F */
.cloze-highlight {

  color: #f59e0b;
  font-weight: 500;
  padding: 1px 3px;
  border-radius: 3px;
}

      .annotation-preview {
        font-size: 11px;
        line-height: 1.4;
        color: var(--text-muted);
        padding: 6px 8px;
        background: var(--background-secondary);
        border-radius: 4px;
        margin-top: 6px;
        border-left: 3px solid var(--interactive-accent);
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .annotation-preview:hover {
        background: var(--background-modifier-hover);
      }

      .card-meta {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        gap: 6px;
        margin-top: 8px;
      }
      
      /* ==================== \u5185\u8054\u6279\u6CE8\u7F16\u8F91\u5668 ==================== */
      .inline-annotation-editor {
        margin-top: 8px;
        padding: 0;
        background: transparent;
        animation: slideDown 0.15s ease-out;
      }
      
      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-5px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      .inline-annotation-textarea {
        width: 100%;
        min-height: 80px;
        padding: 12px 14px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-primary-alt);
        color: var(--text-normal);
        font-family: var(--font-text);
        font-size: 13px;
        line-height: 1.5;
        resize: vertical;
        transition: all 0.2s;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }
      
      .inline-annotation-textarea:focus {
        outline: none;
        border-color: var(--interactive-accent);
        background: var(--background-primary);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      }
      
      .inline-annotation-textarea::placeholder {
        color: var(--text-faint);
        font-style: italic;
      }
      
      .inline-annotation-hint {
        margin-top: 6px;
        font-size: 11px;
        color: var(--text-faint);
        font-style: italic;
        text-align: left;
      }
      
      /* \u7F51\u683C\u5361\u7247\u7684\u5185\u8054\u7F16\u8F91\u5668\u6837\u5F0F */
      .grid-card .inline-annotation-editor {
        margin-top: 8px;
      }
      
      .grid-card .inline-annotation-textarea {
        min-height: 100px;
        font-size: 14px;
        padding: 8px 14px;
      }
      
      .grid-card .inline-annotation-hint {
        font-size: 12px;
        margin-top: 8px;
      }

      .tag {
        padding: 2px 6px;
        background: var(--tag-background);
        color: var(--tag-color);
        border-radius: 4px;
        font-size: 10px;
        font-weight: 500;
      }

      .tag-more {
        padding: 2px 6px;
        background: var(--background-modifier-border);
        color: var(--text-muted);
        border-radius: 4px;
        font-size: 10px;
      }

      .badge {
        padding: 2px 6px;
        background: var(--background-modifier-border);
        border-radius: 4px;
        font-size: 10px;
      }

      /* ==================== \u4E3B\u754C\u9762\u6A21\u5F0F\u6837\u5F0F ==================== */
      .main-layout {
        display: grid;
        grid-template-columns: 250px 1fr;
        gap: 1px;
        height: 100%;
        background: var(--background-modifier-border);
      }

      .left-panel {
        background: var(--background-primary);
        overflow-y: auto;
        display: flex;
        flex-direction: column;
      }

      .right-panel {
        background: var(--background-primary);
        overflow-y: auto;
        padding: 8px;
      }

      .fixed-entries {
        padding: 12px;
        border-bottom: 1px solid var(--background-modifier-border);
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .entry-btn {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 12px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 13px;
        font-weight: 500;
        background: var(--background-secondary);
      }

      .entry-btn:hover {
        background: var(--background-modifier-hover);
        transform: translateX(2px);
      }

      .entry-btn.active {
        background: var(--interactive-accent);
        color: var(--text-on-accent);
      }

      .main-toolbar {
        padding: 12px;
        border-bottom: 1px solid var(--background-modifier-border);
      }

      .batch-actions-main {
        display: flex;
        gap: 8px;
        margin-top: 10px;
        flex-wrap: wrap;
      }

      .batch-actions-main .batch-mode-btn,
      .batch-actions-main .select-all-btn,
      .batch-actions-main .batch-delete-btn,
      .batch-actions-main .batch-create-cards-btn {
        padding: 8px 16px;
        font-size: 12px;
      }

      .batch-actions-main .select-all-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .search-input-main {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        font-size: 13px;
        background: var(--background-primary);
        color: var(--text-normal);
        margin-bottom: 10px;
      }

      .search-input-main:focus {
        outline: none;
        border-color: var(--interactive-accent);
      }

      .group-switcher-main {
        display: flex;
        gap: 6px;
      }

      .group-btn-main {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 4px;
        padding: 8px 10px;
        font-size: 12px;
        border-radius: 6px;
        background: var(--background-secondary);
        cursor: pointer;
        transition: all 0.2s;
        font-weight: 500;
      }

      .group-btn-main:hover {
        background: var(--background-modifier-hover);
        transform: translateY(-1px);
      }

      .group-btn-main.active {
        background: var(--interactive-accent);
        color: var(--text-on-accent);
      }

      .panel-title {
        font-size: 13px;
        font-weight: 600;
        padding: 12px;
        margin:0;
        color: var(--text-muted);
      }

      .file-list {
        padding: 0 8px 8px 8px;
        flex: 1;
        overflow-y: auto;
      }

      .file-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 10px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
        margin-bottom: 4px;
      }

      .file-item:hover {
        background: var(--background-modifier-hover);
      }

      .file-item.selected {
        background: var(--interactive-accent);
        color: var(--text-on-accent);
      }

      .file-icon {
        font-size: 14px;
      }

      .file-name {
        flex: 1;
        font-size: 13px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .file-count {
        font-size: 11px;
        padding: 2px 6px;
        background: rgba(255,255,255,0.1);
        border-radius: 10px;
      }

      .file-item.selected .file-count {
        background: rgba(255,255,255,0.2);
      }

      .empty-right-panel {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100%;
        color: var(--text-muted);
      }

      .empty-icon {
        font-size: 48px;
        margin-bottom: 16px;
      }

      .empty-text {
        font-size: 14px;
      }

      .grid-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 12px;
        border-bottom: 2px solid var(--background-modifier-border);
      }

      .grid-header h2 {
        font-size: 18px;
        font-weight: 600;
        margin: 0;
      }

      .open-file-btn {
        padding: 8px 16px;
        font-size: 13px;
        border-radius: 6px;
        background: var(--interactive-accent);
        color: var(--text-on-accent);
        border: none;
        cursor: pointer;
        transition: all 0.2s;
        font-weight: 500;
      }

      .open-file-btn:hover {
        opacity: 0.9;
        transform: translateY(-1px);
      }

      .content-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
        gap: 8px;
      }

      .grid-card {
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 8px;
        padding: 8px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      }

      .grid-card:hover {
        border-color: var(--interactive-accent);
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        transform: translateY(-2px);
      }

      .grid-card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 12px;
        padding-bottom: 8px;
        border-bottom: 1px solid var(--background-modifier-border);
      }

      .doc-name {
        font-size: 11px;
        color: var(--text-muted);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .grid-card-tools {
        display: flex;
        gap: 4px;
      }

      .tool-btn-grid {
        cursor: pointer;
        font-size: 16px;
        padding: 4px 6px;
        border-radius: 4px;
        transition: all 0.2s;
      }

      .tool-btn-grid:hover {
        background: var(--background-modifier-hover);
        transform: scale(1.1);
      }

      .grid-card-content {
        margin-bottom: 12px;
      }

.grid-note-text {
  font-size: 13px;  /* \u{1F527} \u4ECE 14px \u6539\u4E3A 13px */
  line-height: 1.6;
  color: var(--text-normal);
  cursor: pointer;
  margin-bottom: 10px;
  word-wrap: break-word;  /* \u{1F527} \u5141\u8BB8\u6362\u884C */
  word-break: break-word;
  white-space: normal;
  overflow-wrap: break-word;
}

.grid-note-text:hover {
  color: var(--interactive-accent);
}


      .grid-annotation {
        font-size: 12px;
        line-height: 1.5;
        color: var(--text-muted);
        padding: 10px;
        background: var(--background-secondary);
        border-radius: 4px;
        border-left: 3px solid var(--interactive-accent);
        margin-top: 10px;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .grid-annotation:hover {
        background: var(--background-modifier-hover);
      }

      .grid-annotation strong {
        color: var(--text-normal);
      }

      .grid-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin-top: 10px;
      }

      .tag-grid {
        padding: 4px 8px;
        background: var(--tag-background);
        color: var(--tag-color);
        border-radius: 4px;
        font-size: 11px;
        font-weight: 500;
      }

      .grid-card-meta {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding-top: 10px;
        border-top: 1px solid var(--background-modifier-border);
        font-size: 11px;
      }

      .line-info {
        color: var(--text-muted);
      }

      .badge-grid {
        padding: 3px 8px;
        background: var(--background-secondary);
        border-radius: 4px;
      }

      .cards-header {
        margin-bottom: 20px;
      }

      .cards-header h2 {
        font-size: 18px;
        font-weight: 600;
      }

      .cards-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 8px;
      }

      .flashcard-item {
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 8px;
        padding: 16px;
        transition: all 0.2s;
      }

      .flashcard-item:hover {
        border-color: var(--interactive-accent);
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      }

      .flashcard-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }

      .flashcard-delete-btn {
        padding: 4px 8px;
        border: none;
        background: transparent;
        cursor: pointer;
        font-size: 14px;
        border-radius: 4px;
        transition: all 0.2s;
        opacity: 0.6;
      }

      .flashcard-delete-btn:hover {
        opacity: 1;
        background: var(--background-modifier-hover);
        color: var(--color-red);
      }

      .flashcard-type {
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
      }

      .flashcard-type.qa {
              background: rgba(16, 185, 129, 0.2);

        color: #10b981;
      }

      .flashcard-type.cloze {

               background: rgba(147, 51, 234, 0.2);
         color: #9333ea;
      }

      .flashcard-date {
        font-size: 11px;
        color: var(--text-muted);
      }

      .flashcard-body {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .flashcard-question,
      .flashcard-answer {
        font-size: 13px;
        line-height: 1.5;
      }

      .flashcard-question strong,
      .flashcard-answer strong {
        color: var(--text-muted);
        font-size: 11px;
        display: block;
        margin-bottom: 4px;
      }

.empty-state {
  text-align: center;
  padding: 40px 20px;
  color: var(--text-muted);
  font-size: 14px;
  pointer-events: none; /* \u{1F527} \u5173\u952E\uFF01\u7A7A\u72B6\u6001\u4E0D\u62E6\u622A\u70B9\u51FB */
  position: relative;
  z-index: 1; /* \u{1F527} \u786E\u4FDD\u5728\u5DE5\u5177\u680F\u4E0B\u65B9 */
}

      .empty-hint {
        text-align: center;
        padding: 20px;
        color: var(--text-muted);
        font-size: 13px;
      }

      /* ==================== \u54CD\u5E94\u5F0F ==================== */
      @media (max-width: 768px) {
        .main-layout {
          grid-template-columns: 1fr;
        }

        .left-panel {
          display: none;
        }

        .content-grid,
        .cards-grid {
          grid-template-columns: 1fr;
        }
          .batch-btn {
          font-size: 14px;
          position: relative;
        }

      .batch-btn:hover {
        background: rgba(59, 130, 246, 0.2);
        transform: scale(1.05);
      }

      /* \u6279\u91CF\u6A21\u5F0F\u6FC0\u6D3B\u72B6\u6001 */
      .compact-card.batch-mode .batch-btn,
      .grid-card.batch-mode .batch-btn {
        background: rgba(59, 130, 246, 0.3);
        color: var(--interactive-accent);
      }

      .batch-actions {
  display: flex;
  gap: 6px;
  margin-top: 10px;
  flex-wrap: wrap;
  padding: 8px;
  background: var(--background-secondary-alt);
  border-radius: 6px;
  animation: slideDown 0.2s ease;
}
/* \u6279\u91CF\u64CD\u4F5C\u6309\u94AE\u7981\u7528\u72B6\u6001\uFF08\u6570\u91CF\u4E3A0\u65F6\u7684\u89C6\u89C9\u53CD\u9988\uFF09 */
.batch-create-cards-btn-sidebar:has-text("(0)"),
.batch-delete-btn-sidebar:has-text("(0)"),
.batch-create-cards-btn-header:has-text("(0)"),
.batch-delete-btn-header:has-text("(0)") {
  opacity: 0.5;
  cursor: not-allowed;
}
@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
    
  }
}
      }
    `;
    document.head.appendChild(styleEl);
  }
  async onClose() {
    if (this.searchDebounceTimer !== null) {
      window.clearTimeout(this.searchDebounceTimer);
    }
  }
};
var AnnotationModal = class extends import_obsidian5.Modal {
  constructor(app, defaultValue, onSubmit) {
    super(app);
    this.result = null;
    this.defaultValue = defaultValue;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h3", { text: "\u270F\uFE0F \u7F16\u8F91\u6279\u6CE8" });
    const textarea = contentEl.createEl("textarea", {
      cls: "annotation-textarea",
      placeholder: "\u8F93\u5165\u4F60\u7684\u6279\u6CE8..."
    });
    textarea.value = this.defaultValue;
    textarea.style.width = "100%";
    textarea.style.minHeight = "120px";
    textarea.style.padding = "10px";
    textarea.style.border = "1px solid var(--background-modifier-border)";
    textarea.style.borderRadius = "6px";
    textarea.style.fontFamily = "var(--font-interface)";
    textarea.style.fontSize = "14px";
    textarea.style.resize = "vertical";
    textarea.style.marginTop = "12px";
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    buttonContainer.style.display = "flex";
    buttonContainer.style.gap = "8px";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.marginTop = "16px";
    const cancelBtn = buttonContainer.createEl("button", { text: "\u53D6\u6D88" });
    cancelBtn.style.padding = "8px 16px";
    cancelBtn.style.borderRadius = "6px";
    cancelBtn.addEventListener("click", () => {
      this.close();
    });
    const saveBtn = buttonContainer.createEl("button", {
      text: "\u4FDD\u5B58",
      cls: "mod-cta"
    });
    saveBtn.style.padding = "8px 16px";
    saveBtn.style.borderRadius = "6px";
    saveBtn.addEventListener("click", () => {
      this.result = textarea.value;
      this.close();
    });
    textarea.focus();
    textarea.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && (e.ctrlKey || e.metaKey)) {
        this.result = textarea.value;
        this.close();
      }
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    if (this.result !== null) {
      this.onSubmit(this.result);
    }
  }
};
var FlashcardCreationModal = class extends import_obsidian5.Modal {
  constructor(app, unit, type, onSubmit) {
    super(app);
    this.unit = unit;
    this.type = type;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h3", {
      text: `\u{1F0CF} \u521B\u5EFA${this.type === "qa" ? "Q&A" : "\u586B\u7A7A"}\u95EA\u5361`
    });
    const sourceDiv = contentEl.createDiv({ cls: "flashcard-source" });
    sourceDiv.style.padding = "10px";
    sourceDiv.style.background = "var(--background-secondary)";
    sourceDiv.style.borderRadius = "6px";
    sourceDiv.style.marginTop = "12px";
    sourceDiv.style.marginBottom = "12px";
    sourceDiv.style.fontSize = "13px";
    sourceDiv.style.color = "var(--text-muted)";
    sourceDiv.innerHTML = `<strong>\u539F\u6587\uFF1A</strong>${this.unit.content}`;
    contentEl.createEl("label", {
      text: this.type === "qa" ? "\u95EE\u9898" : "\u586B\u7A7A\u9898\u5E72",
      cls: "flashcard-label"
    }).style.display = "block";
    const questionInput = contentEl.createEl("textarea", {
      cls: "flashcard-input",
      placeholder: this.type === "qa" ? "\u8F93\u5165\u95EE\u9898..." : "\u7528 {{c1::...}} \u6807\u8BB0\u9700\u8981\u586B\u7A7A\u7684\u5185\u5BB9"
    });
    questionInput.style.width = "100%";
    questionInput.style.minHeight = "80px";
    questionInput.style.padding = "10px";
    questionInput.style.border = "1px solid var(--background-modifier-border)";
    questionInput.style.borderRadius = "6px";
    questionInput.style.marginTop = "8px";
    questionInput.style.marginBottom = "12px";
    questionInput.style.fontSize = "14px";
    questionInput.style.resize = "vertical";
    contentEl.createEl("label", {
      text: "\u7B54\u6848",
      cls: "flashcard-label"
    }).style.display = "block";
    const answerInput = contentEl.createEl("textarea", {
      cls: "flashcard-input",
      placeholder: "\u8F93\u5165\u7B54\u6848..."
    });
    answerInput.value = this.unit.content;
    answerInput.style.width = "100%";
    answerInput.style.minHeight = "80px";
    answerInput.style.padding = "10px";
    answerInput.style.border = "1px solid var(--background-modifier-border)";
    answerInput.style.borderRadius = "6px";
    answerInput.style.marginTop = "8px";
    answerInput.style.fontSize = "14px";
    answerInput.style.resize = "vertical";
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    buttonContainer.style.display = "flex";
    buttonContainer.style.gap = "8px";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.marginTop = "16px";
    const cancelBtn = buttonContainer.createEl("button", { text: "\u53D6\u6D88" });
    cancelBtn.style.padding = "8px 16px";
    cancelBtn.style.borderRadius = "6px";
    cancelBtn.addEventListener("click", () => {
      this.close();
    });
    const createBtn = buttonContainer.createEl("button", {
      text: "\u521B\u5EFA",
      cls: "mod-cta"
    });
    createBtn.style.padding = "8px 16px";
    createBtn.style.borderRadius = "6px";
    createBtn.addEventListener("click", () => {
      const question = questionInput.value.trim();
      const answer = answerInput.value.trim();
      if (!question || !answer) {
        new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u586B\u5199\u5B8C\u6574\u4FE1\u606F");
        return;
      }
      this.onSubmit(question, answer);
      this.close();
    });
    questionInput.focus();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var FlashcardEditModal = class extends import_obsidian5.Modal {
  constructor(app, card, onSubmit) {
    super(app);
    this.card = card;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h3", { text: "\u270F\uFE0F \u7F16\u8F91\u95EA\u5361" });
    contentEl.createEl("label", { text: "\u95EE\u9898" }).style.display = "block";
    const questionInput = contentEl.createEl("textarea", {
      cls: "flashcard-input"
    });
    questionInput.value = this.card.front;
    questionInput.style.width = "100%";
    questionInput.style.minHeight = "80px";
    questionInput.style.padding = "10px";
    questionInput.style.marginTop = "8px";
    questionInput.style.marginBottom = "12px";
    contentEl.createEl("label", { text: "\u7B54\u6848" }).style.display = "block";
    const answerInput = contentEl.createEl("textarea", {
      cls: "flashcard-input"
    });
    answerInput.value = Array.isArray(this.card.back) ? this.card.back.join(", ") : this.card.back;
    answerInput.style.width = "100%";
    answerInput.style.minHeight = "80px";
    answerInput.style.padding = "10px";
    answerInput.style.marginTop = "8px";
    const buttonContainer = contentEl.createDiv();
    buttonContainer.style.display = "flex";
    buttonContainer.style.gap = "8px";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.marginTop = "16px";
    const cancelBtn = buttonContainer.createEl("button", { text: "\u53D6\u6D88" });
    cancelBtn.addEventListener("click", () => this.close());
    const saveBtn = buttonContainer.createEl("button", {
      text: "\u4FDD\u5B58",
      cls: "mod-cta"
    });
    saveBtn.addEventListener("click", () => {
      const question = questionInput.value.trim();
      const answer = answerInput.value.trim();
      if (!question || !answer) {
        new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u586B\u5199\u5B8C\u6574\u4FE1\u606F");
        return;
      }
      this.onSubmit(question, answer);
      this.close();
    });
    questionInput.focus();
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/ui/ReviewView.ts
var import_obsidian6 = require("obsidian");

// src/core/CardScheduler.ts
var CardScheduler = class {
  /**
   * 计算下次复习时间（基于 SM-2 算法）
   */
  schedule(card, ease, timeSpent, userAnswer) {
    const oldScheduling = { ...card.scheduling };
    const newScheduling = { ...card.scheduling };
    const now = Date.now();
    card.stats.totalReviews++;
    card.stats.lastReview = now;
    const totalTime = card.stats.averageTime * (card.stats.totalReviews - 1) + timeSpent;
    card.stats.averageTime = totalTime / card.stats.totalReviews;
    switch (ease) {
      case "again":
        this.scheduleAgain(newScheduling, card.stats);
        break;
      case "hard":
        this.scheduleHard(newScheduling, card.stats);
        break;
      case "good":
        this.scheduleGood(newScheduling, card.stats);
        break;
      case "easy":
        this.scheduleEasy(newScheduling, card.stats);
        break;
    }
    card.scheduling = newScheduling;
    card.metadata.updatedAt = now;
    const reviewLog = {
      flashcardId: card.id,
      timestamp: now,
      response: {
        userAnswer,
        timeSpent,
        ease
      },
      schedulingChange: {
        oldInterval: oldScheduling.interval,
        newInterval: newScheduling.interval,
        oldEase: oldScheduling.ease,
        newEase: newScheduling.ease
      }
    };
    return { updatedCard: card, reviewLog };
  }
  /**
   * Again - 完全忘记
   */
  scheduleAgain(scheduling, stats) {
    scheduling.interval = 1;
    scheduling.ease = Math.max(1.3, scheduling.ease - 0.2);
    scheduling.due = Date.now() + scheduling.interval * 60 * 1e3;
    scheduling.lapses++;
    scheduling.reps++;
    if (scheduling.state === "new") {
      scheduling.state = "learning";
    } else {
      scheduling.state = "relearning";
    }
    stats.difficulty = Math.min(1, stats.difficulty + 0.1);
  }
  /**
   * Hard - 困难
   */
  scheduleHard(scheduling, stats) {
    scheduling.reps++;
    if (scheduling.state === "new" || scheduling.state === "learning") {
      scheduling.interval = 10;
      scheduling.due = Date.now() + 10 * 60 * 1e3;
      scheduling.state = "learning";
    } else {
      scheduling.interval = Math.max(1, scheduling.interval * 1.2);
      scheduling.ease = Math.max(1.3, scheduling.ease - 0.15);
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    }
    stats.difficulty = Math.min(1, stats.difficulty + 0.05);
    stats.correctCount += 0.5;
  }
  /**
   * Good - 正确
   */
  scheduleGood(scheduling, stats) {
    scheduling.reps++;
    stats.correctCount++;
    if (scheduling.state === "new") {
      scheduling.interval = 1;
      scheduling.due = Date.now() + 1 * 24 * 60 * 60 * 1e3;
      scheduling.state = "learning";
    } else if (scheduling.state === "learning") {
      if (scheduling.interval < 1) {
        scheduling.interval = 1;
      } else {
        scheduling.interval = 3;
      }
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    } else {
      scheduling.interval = scheduling.interval * scheduling.ease;
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.ease = scheduling.ease + 0.1;
      scheduling.state = "review";
    }
    stats.difficulty = Math.max(0, stats.difficulty - 0.05);
  }
  /**
   * Easy - 非常简单
   */
  scheduleEasy(scheduling, stats) {
    scheduling.reps++;
    stats.correctCount++;
    if (scheduling.state === "new") {
      scheduling.interval = 4;
      scheduling.due = Date.now() + 4 * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    } else if (scheduling.state === "learning") {
      scheduling.interval = 7;
      scheduling.due = Date.now() + 7 * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    } else {
      scheduling.interval = scheduling.interval * (scheduling.ease + 0.3);
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.ease = scheduling.ease + 0.15;
      scheduling.state = "review";
    }
    stats.difficulty = Math.max(0, stats.difficulty - 0.1);
  }
  /**
   * 评估用户答案（用于输入答案模式）
   */
  evaluateAnswer(correctAnswer, userAnswer) {
    if (Array.isArray(correctAnswer) && Array.isArray(userAnswer)) {
      let correctCount = 0;
      const total = correctAnswer.length;
      for (let i = 0; i < total; i++) {
        const similarity2 = this.calculateSimilarity(
          this.normalize(correctAnswer[i]),
          this.normalize(userAnswer[i] || "")
        );
        if (similarity2 >= 0.9)
          correctCount++;
        else if (similarity2 >= 0.6)
          correctCount += 0.5;
      }
      const overallSimilarity = correctCount / total;
      if (overallSimilarity >= 0.9) {
        return { correctness: "correct", similarity: overallSimilarity };
      } else if (overallSimilarity >= 0.6) {
        return { correctness: "partial", similarity: overallSimilarity };
      } else {
        return { correctness: "wrong", similarity: overallSimilarity };
      }
    }
    const correct = this.normalize(correctAnswer);
    const user = this.normalize(userAnswer);
    if (user.length === 0) {
      return { correctness: "wrong", similarity: 0 };
    }
    const lengthRatio = Math.min(user.length, correct.length) / Math.max(user.length, correct.length);
    if (lengthRatio < 0.3) {
      return { correctness: "wrong", similarity: 0 };
    }
    const similarity = this.calculateSimilarity(correct, user);
    if (similarity >= 0.9) {
      return { correctness: "correct", similarity };
    } else if (similarity >= 0.7) {
      return { correctness: "partial", similarity };
    } else {
      return { correctness: "wrong", similarity };
    }
  }
  /**
   * 标准化文本
   */
  normalize(text) {
    return text.toLowerCase().trim().replace(/\s+/g, " ").replace(/\n+/g, " ").replace(/[，。！？、；：""''（）《》【】\.,!?;:"'()\[\]{}]/g, "");
  }
  /**
   * 计算相似度（Levenshtein 距离）
   */
  calculateSimilarity(str1, str2) {
    if (str1 === str2)
      return 1;
    if (str1.length === 0 || str2.length === 0)
      return 0;
    const matrix = [];
    for (let i = 0; i <= str2.length; i++) {
      matrix[i] = [i];
    }
    for (let j = 0; j <= str1.length; j++) {
      matrix[0][j] = j;
    }
    for (let i = 1; i <= str2.length; i++) {
      for (let j = 1; j <= str1.length; j++) {
        if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
          matrix[i][j] = matrix[i - 1][j - 1];
        } else {
          matrix[i][j] = Math.min(
            matrix[i - 1][j - 1] + 1,
            // 替换
            matrix[i][j - 1] + 1,
            // 插入
            matrix[i - 1][j] + 1
            // 删除
          );
        }
      }
    }
    const distance = matrix[str2.length][str1.length];
    const maxLength = Math.max(str1.length, str2.length);
    return 1 - distance / maxLength;
  }
  /**
   * 根据相似度建议难度
   */
  suggestEase(similarity) {
    if (similarity >= 0.9)
      return "easy";
    if (similarity >= 0.8)
      return "good";
    if (similarity >= 0.5)
      return "hard";
    return "again";
  }
};

// src/ui/ReviewView.ts
var VIEW_TYPE_REVIEW = "learning-system-review";
var ReviewView = class extends import_obsidian6.ItemView {
  // QA 卡片的用户答案
  constructor(leaf, plugin) {
    super(leaf);
    this.dueCards = [];
    this.currentCardIndex = 0;
    this.currentCard = null;
    this.showAnswer = false;
    this.startTime = 0;
    this.userAnswers = [];
    this.userAnswer = "";
    // 快捷键
    this.keyboardHandler = (e) => {
      const target = e.target;
      const isInInput = target.tagName === "INPUT" || target.tagName === "TEXTAREA";
      if (e.key === "Tab") {
        e.preventDefault();
        if (e.shiftKey) {
          if (this.showAnswer) {
            this.showAnswer = false;
            this.render();
          }
        } else {
          if (!this.showAnswer) {
            this.showAnswer = true;
            this.render();
          } else {
            this.submitReview("good");
          }
        }
        return;
      }
      if (this.showAnswer) {
        const ratingMap = {
          "1": "again",
          "2": "hard",
          "3": "good",
          "4": "easy"
        };
        if (ratingMap[e.key]) {
          e.preventDefault();
          this.submitReview(ratingMap[e.key]);
        }
      }
    };
    this.plugin = plugin;
    this.scheduler = new CardScheduler();
  }
  getViewType() {
    return VIEW_TYPE_REVIEW;
  }
  getDisplayText() {
    return "Flashcard Review";
  }
  getIcon() {
    return "layers";
  }
  async onOpen() {
    await this.loadDueCards();
    this.render();
    this.addStyles();
    this.registerKeyboardHandlers();
  }
  async onClose() {
  }
  async loadDueCards() {
    this.dueCards = this.plugin.flashcardManager.getDueCards();
    this.currentCardIndex = 0;
    this.showAnswer = false;
    document.removeEventListener("keydown", this.keyboardHandler);
  }
  render() {
    var _a;
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("review-container");
    if (this.dueCards.length === 0) {
      this.renderNoDueCards(container);
      return;
    }
    const newCard = this.dueCards[this.currentCardIndex];
    if (((_a = this.currentCard) == null ? void 0 : _a.id) !== (newCard == null ? void 0 : newCard.id)) {
      this.userAnswers = [];
      this.userAnswer = "";
      this.showAnswer = false;
      this.startTime = Date.now();
    }
    this.currentCard = newCard;
    if (!this.showAnswer && this.startTime === 0) {
      this.startTime = Date.now();
    }
    this.renderProgress(container);
    const cardArea = container.createDiv({ cls: "card-area" });
    this.renderTopActions(cardArea);
    if (this.showAnswer) {
      this.renderAnswer(cardArea);
    } else {
      this.renderQuestion(cardArea);
    }
  }
  renderTopActions(container) {
    const actionsBar = container.createDiv({ cls: "top-actions-bar" });
    const jumpBtn = actionsBar.createEl("button", {
      cls: "top-action-btn jump-icon-btn",
      attr: { "aria-label": "Jump to Source" }
    });
    jumpBtn.innerHTML = "\u2197";
    jumpBtn.addEventListener("click", () => this.jumpToSource());
    const moreBtn = actionsBar.createEl("button", {
      cls: "top-action-btn more-btn",
      attr: { "aria-label": "More actions" }
    });
    moreBtn.innerHTML = "\u22EF";
    const dropdown = actionsBar.createDiv({ cls: "more-dropdown" });
    dropdown.style.display = "none";
    const editOption = dropdown.createEl("div", {
      cls: "dropdown-item"
    });
    editOption.innerHTML = "\u270F\uFE0F Edit Card";
    editOption.addEventListener("click", () => {
      if (!this.currentCard)
        return;
      this.editCurrentFlashcard();
      dropdown.style.display = "none";
    });
    const deleteOption = dropdown.createEl("div", {
      cls: "dropdown-item delete-item"
    });
    deleteOption.innerHTML = "\u{1F5D1}\uFE0F Delete Card";
    deleteOption.addEventListener("click", async () => {
      if (!this.currentCard)
        return;
      if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u5F20\u95EA\u5361\u5417\uFF1F\u5220\u9664\u540E\u5C06\u4ECE\u590D\u4E60\u961F\u5217\u4E2D\u79FB\u9664\u3002")) {
        await this.deleteFlashcard(this.currentCard.id);
      }
      dropdown.style.display = "none";
    });
    moreBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      dropdown.style.display = dropdown.style.display === "none" ? "block" : "none";
    });
    document.addEventListener("click", () => {
      dropdown.style.display = "none";
    });
    dropdown.addEventListener("click", (e) => {
      e.stopPropagation();
    });
  }
  renderNoDueCards(container) {
    const emptyState = container.createDiv({ cls: "empty-state" });
    emptyState.createEl("h2", { text: "\u{1F389} All Done!" });
    emptyState.createEl("p", { text: "No cards due for review right now." });
    const stats = this.plugin.flashcardManager.getStats();
    const statsDiv = emptyState.createDiv({ cls: "stats-summary" });
    statsDiv.createEl("p", { text: `Total cards: ${stats.total}` });
    statsDiv.createEl("p", { text: `New cards: ${stats.new}` });
    statsDiv.createEl("p", { text: `Reviewed today: ${stats.reviewedToday}` });
    const closeBtn = emptyState.createEl("button", {
      text: "Close Review",
      cls: "mod-cta"
    });
    closeBtn.addEventListener("click", () => {
      this.leaf.detach();
    });
  }
  renderProgress(container) {
    const progressBar = container.createDiv({ cls: "progress-bar" });
    const stats = progressBar.createDiv({ cls: "progress-stats" });
    stats.createSpan({
      text: `${this.currentCardIndex + 1} / ${this.dueCards.length}`,
      cls: "progress-text"
    });
    const barContainer = progressBar.createDiv({ cls: "bar-container" });
    const bar = barContainer.createDiv({ cls: "bar" });
    const progress = (this.currentCardIndex + 1) / this.dueCards.length * 100;
    bar.style.width = `${progress}%`;
  }
  renderQuestion(container) {
    if (!this.currentCard)
      return;
    const cardInfo = container.createDiv({ cls: "card-info" });
    cardInfo.createSpan({
      text: this.currentCard.type === "qa" ? "\u{1F4DD} Q&A" : "\u270F\uFE0F Cloze",
      cls: "card-type"
    });
    cardInfo.createSpan({
      text: `Deck: ${this.currentCard.deck}`,
      cls: "card-deck"
    });
    const questionArea = container.createDiv({ cls: "question-area" });
    questionArea.createEl("h3", { text: "Question" });
    const questionText = questionArea.createDiv({ cls: "question-text" });
    questionText.textContent = this.currentCard.front;
    if (this.currentCard.type === "cloze" && this.currentCard.cloze) {
      const inputArea = container.createDiv({ cls: "cloze-input-area" });
      inputArea.createEl("h4", { text: "Fill in the blanks:" });
      if (this.userAnswers.length < this.currentCard.cloze.deletions.length) {
        this.userAnswers = new Array(this.currentCard.cloze.deletions.length).fill("");
      }
      this.currentCard.cloze.deletions.forEach((deletion, index) => {
        const inputGroup = inputArea.createDiv({ cls: "input-group" });
        inputGroup.createSpan({ text: `${index + 1}. ` });
        const input = inputGroup.createEl("input", {
          type: "text",
          placeholder: "Your answer...",
          cls: "cloze-input",
          value: this.userAnswers[index] || ""
        });
        input.addEventListener("input", (e) => {
          this.userAnswers[index] = e.target.value;
        });
        if (index === 0) {
          setTimeout(() => input.focus(), 50);
        }
      });
    }
    if (this.currentCard.type === "qa") {
      const inputArea = container.createDiv({ cls: "qa-input-area" });
      inputArea.createEl("h4", { text: "Your Answer:" });
      const textarea = inputArea.createEl("textarea", {
        placeholder: "Type your answer here...",
        cls: "qa-input",
        value: this.userAnswer
      });
      textarea.addEventListener("input", (e) => {
        this.userAnswer = e.target.value;
      });
      setTimeout(() => textarea.focus(), 50);
    }
    const buttonArea = container.createDiv({ cls: "button-area" });
    const showAnswerBtn = buttonArea.createEl("button", {
      text: "Show Answer",
      cls: "mod-cta show-answer-btn",
      attr: { title: "Press Enter or Tab" }
    });
    showAnswerBtn.addEventListener("click", () => {
      this.showAnswer = true;
      this.render();
    });
  }
  renderAnswer(container) {
    if (!this.currentCard)
      return;
    const cardInfo = container.createDiv({ cls: "card-info" });
    cardInfo.createSpan({
      text: this.currentCard.type === "qa" ? "\u{1F4DD} Q&A" : "\u270F\uFE0F Cloze",
      cls: "card-type"
    });
    cardInfo.createSpan({
      text: `Deck: ${this.currentCard.deck}`,
      cls: "card-deck"
    });
    const questionReview = container.createDiv({ cls: "question-review" });
    questionReview.createEl("h4", { text: "Question:" });
    questionReview.createDiv({
      text: this.currentCard.front,
      cls: "review-text"
    });
    const answerArea = container.createDiv({ cls: "answer-area" });
    if (this.currentCard.type === "cloze" && this.currentCard.cloze) {
      const fullText = answerArea.createDiv({ cls: "full-text" });
      fullText.textContent = this.currentCard.cloze.original;
      if (this.userAnswers.length > 0) {
        const comparison = answerArea.createDiv({ cls: "answer-comparison" });
        comparison.createEl("h4", { text: "Your Answers:" });
        this.currentCard.cloze.deletions.forEach((deletion, index) => {
          const item = comparison.createDiv({ cls: "comparison-item" });
          item.createSpan({ text: `${index + 1}. ` });
          const userAnswer = this.userAnswers[index] || "";
          const evaluation = this.scheduler.evaluateAnswer(
            deletion.answer,
            userAnswer
          );
          const userSpan = item.createEl("span", {
            text: userAnswer || "(empty)",
            cls: `user-answer ${evaluation.correctness}`
          });
          userSpan.classList.add("user-answer", evaluation.correctness);
          item.createSpan({ text: " \u2192 " });
          item.createEl("span", {
            text: deletion.answer,
            cls: "correct-answer"
          });
          if (evaluation.correctness === "partial") {
            item.createEl("small", {
              text: ` (${Math.round(evaluation.similarity * 100)}% match)`,
              cls: "similarity-info"
            });
          }
        });
      }
    } else {
      const correctAnswer = this.currentCard.back;
      const comparison = answerArea.createDiv({ cls: "answer-comparison qa-comparison" });
      const evaluation = this.userAnswer.trim() ? this.scheduler.evaluateAnswer(correctAnswer, this.userAnswer) : null;
      const columnsContainer = comparison.createDiv({ cls: "qa-columns-container" });
      const correctColumn = columnsContainer.createDiv({ cls: "qa-column" });
      correctColumn.createEl("h4", { text: "Correct Answer:", cls: "column-label" });
      const correctAnswerDiv = correctColumn.createDiv({ cls: "comparison-item" });
      correctAnswerDiv.createEl("div", {
        text: correctAnswer,
        cls: "correct-answer qa-correct-answer"
      });
      const userColumn = columnsContainer.createDiv({ cls: "qa-column" });
      userColumn.createEl("h4", { text: "Your Answer:", cls: "column-label" });
      const userAnswerDiv = userColumn.createDiv({ cls: "comparison-item" });
      const userAnswerElement = userAnswerDiv.createEl("div", {
        text: this.userAnswer.trim() || "(no answer provided)",
        cls: "qa-user-answer"
      });
      if (evaluation) {
        userAnswerElement.classList.add("user-answer", evaluation.correctness);
        if (evaluation.correctness === "partial") {
          const similarityInfo = comparison.createEl("div", {
            cls: "similarity-info qa-similarity"
          });
          similarityInfo.textContent = `Similarity: ${Math.round(evaluation.similarity * 100)}%`;
        }
      } else {
        userAnswerElement.classList.add("no-answer");
      }
    }
    const ratingArea = container.createDiv({ cls: "rating-area" });
    const buttonGroup = ratingArea.createDiv({ cls: "rating-buttons" });
    const ratings = [
      { ease: "again", label: "Again\n < 1 min", color: "red", key: "1" },
      { ease: "hard", label: "Hard\n < 10 min", color: "orange", key: "2" },
      { ease: "good", label: "Good\n 1 day", color: "blue", key: "3" },
      { ease: "easy", label: "Easy\n 4 days", color: "green", key: "4" }
    ];
    ratings.forEach(({ ease, label, color, key }) => {
      const btn = buttonGroup.createEl("button", {
        cls: `rating-btn rating-${color}`,
        attr: { title: `Press ${key}` }
      });
      const lines = label.split("\n");
      btn.createEl("div", { text: lines[0], cls: "rating-label" });
      btn.createEl("div", { text: lines[1], cls: "rating-interval" });
      btn.createEl("div", { text: `(${key})`, cls: "rating-hotkey" });
      btn.addEventListener("click", () => this.submitReview(ease));
    });
  }
  async submitReview(ease) {
    if (!this.currentCard)
      return;
    const timeSpent = (Date.now() - this.startTime) / 1e3;
    const userAnswer = this.currentCard.type === "cloze" ? this.userAnswers : this.currentCard.type === "qa" ? this.userAnswer : void 0;
    const { updatedCard, reviewLog } = this.scheduler.schedule(
      this.currentCard,
      ease,
      timeSpent,
      userAnswer
    );
    await this.plugin.flashcardManager.updateCard(updatedCard);
    await this.plugin.flashcardManager.logReview({
      id: `log-${Date.now()}`,
      ...reviewLog
    });
    this.currentCardIndex++;
    this.showAnswer = false;
    this.userAnswers = [];
    this.userAnswer = "";
    if (this.currentCardIndex >= this.dueCards.length) {
      new import_obsidian6.Notice(`\u2705 Review session complete! Reviewed ${this.dueCards.length} cards.`);
      await this.loadDueCards();
    }
    this.render();
  }
  async jumpToSource() {
    if (!this.currentCard)
      return;
    const file = this.app.vault.getAbstractFileByPath(this.currentCard.sourceFile);
    if (!(file instanceof import_obsidian6.TFile)) {
      new import_obsidian6.Notice("Source file not found");
      return;
    }
    const contentUnit = this.plugin.dataManager.getContentUnit(
      this.currentCard.sourceContentId
    );
    if (!contentUnit) {
      new import_obsidian6.Notice("Source content not found");
      return;
    }
    const leaf = this.app.workspace.getLeaf(false);
    await leaf.openFile(file);
    setTimeout(() => {
      const view = this.app.workspace.getActiveViewOfType(import_obsidian6.ItemView);
      if (view) {
        const editor = view.editor;
        if (editor) {
          editor.setCursor({ line: contentUnit.source.position.line, ch: 0 });
          editor.scrollIntoView({
            from: { line: contentUnit.source.position.line, ch: 0 },
            to: { line: contentUnit.source.position.line, ch: 0 }
          }, true);
        }
      }
    }, 100);
  }
  async deleteFlashcard(cardId) {
    var _a;
    try {
      await this.plugin.flashcardManager.deleteCard(cardId);
      new import_obsidian6.Notice("\u{1F5D1}\uFE0F \u95EA\u5361\u5DF2\u5220\u9664");
      this.dueCards = this.dueCards.filter((card) => card.id !== cardId);
      if (((_a = this.currentCard) == null ? void 0 : _a.id) === cardId) {
        if (this.currentCardIndex >= this.dueCards.length) {
          this.currentCardIndex = Math.max(0, this.dueCards.length - 1);
        }
        this.currentCard = null;
      }
      await this.loadDueCards();
      this.render();
    } catch (error) {
      console.error("Error deleting flashcard:", error);
      new import_obsidian6.Notice("\u274C \u5220\u9664\u95EA\u5361\u5931\u8D25");
    }
  }
  editCurrentFlashcard() {
    if (!this.currentCard)
      return;
    const modal = new FlashcardEditModal(
      this.app,
      this.currentCard,
      async (question, answer) => {
        try {
          const updatedCard = {
            ...this.currentCard,
            front: question,
            back: this.currentCard.type === "cloze" ? [answer] : answer,
            metadata: {
              ...this.currentCard.metadata,
              updatedAt: Date.now()
            }
          };
          await this.plugin.flashcardManager.updateCard(updatedCard);
          new import_obsidian6.Notice("\u2705 \u95EA\u5361\u5DF2\u66F4\u65B0");
          this.currentCard = updatedCard;
          this.render();
        } catch (error) {
          console.error("Error updating flashcard:", error);
          new import_obsidian6.Notice("\u274C \u66F4\u65B0\u95EA\u5361\u5931\u8D25");
        }
      }
    );
    modal.open();
  }
  registerKeyboardHandlers() {
    document.addEventListener("keydown", this.keyboardHandler);
  }
  addStyles() {
    const styleEl = document.createElement("style");
    styleEl.textContent = `
    .review-container {
        padding: 16px;
        max-width: 800px;
        margin: 0 auto;
      }

      /* \u7A7A\u72B6\u6001 */
      .empty-state {
        text-align: center;
        padding: 40px 20px;
      }

      .empty-state h2 {
        font-size: 1.8em;
        margin-bottom: 8px;
      }

      .stats-summary {
        margin: 20px 0;
        padding: 16px;
        background: var(--background-secondary);
        border-radius: 8px;
        text-align: left;
        max-width: 300px;
        margin-left: auto;
        margin-right: auto;
      }

      /* \u8FDB\u5EA6\u6761 */
      .progress-bar {
        margin-bottom: 20px;
      }

      .progress-stats {
        display: flex;
        justify-content: space-between;
        margin-bottom: 8px;
      }

      .progress-text {
        font-weight: 600;
        font-size: 1em;
      }

      .remaining-text {
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .bar-container {
        height: 6px;
        background: var(--background-secondary);
        border-radius: 3px;
        overflow: hidden;
      }

      .bar {
        height: 100%;
        background: var(--interactive-accent);
        transition: width 0.3s ease;
      }

      /* \u5361\u7247\u533A\u57DF */
      .card-area {
        background: var(--background-primary);
        border: 2px solid var(--background-modifier-border);
        border-radius: 10px;
        padding: 20px;
        min-height: 350px;
        position: relative;
      }

      /* \u53F3\u4E0A\u89D2\u64CD\u4F5C\u680F */
      .top-actions-bar {
        position: absolute;
        top: 16px;
        right: 16px;
        display: flex;
        gap: 6px;
        z-index: 10;
      }

      .top-action-btn {
        width: 32px;
        height: 32px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-primary);
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        color: var(--text-normal);
        padding: 0;
      }

      .top-action-btn:hover {
        background: var(--background-modifier-hover);
        border-color: var(--interactive-accent);
      }

      .jump-icon-btn {
        font-weight: bold;
      }

      .more-btn {
        font-weight: bold;
        letter-spacing: 1px;
      }

      /* \u4E0B\u62C9\u83DC\u5355 */
      .more-dropdown {
        position: absolute;
        top: 38px;
        right: 0;
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        min-width: 150px;
        z-index: 100;
      }

      .dropdown-item {
        padding: 8px 14px;
        cursor: pointer;
        transition: background 0.2s;
        white-space: nowrap;
        font-size: 0.9em;
      }

      .dropdown-item:hover {
        background: var(--background-modifier-hover);
      }

      .dropdown-item:first-child {
        border-radius: 6px 6px 0 0;
      }

      .dropdown-item:last-child {
        border-radius: 0 0 6px 6px;
      }

      .delete-item:hover {
        background: var(--background-modifier-error-hover);
        color: var(--color-red);
      }

      .card-info {
        display: flex;
        gap: 10px;
        margin-bottom: 16px;
        padding-bottom: 12px;
        border-bottom: 1px solid var(--background-modifier-border);
        padding-right: 80px;
      }

      .card-type, .card-deck {
        padding: 3px 10px;
        background: var(--background-secondary);
        border-radius: 10px;
        font-size: 0.85em;
      }

      /* \u95EE\u9898\u533A\u57DF */
      .question-area, .answer-area {
        margin: 16px 0;
      }

      .question-area h3, .answer-area h3 {
        margin-bottom: 10px;
        color: var(--text-muted);
        font-size: 1em;
      }

      .question-text, .answer-text {
        font-size: 1.2em;
        line-height: 1.5;
        padding: 14px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      /* \u5B8C\u5F62\u586B\u7A7A\u8F93\u5165 */
      .cloze-input-area {
        margin: 16px 0;
      }

      .cloze-input-area h4 {
        margin-bottom: 10px;
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .input-group {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 8px;
      }

      .cloze-input {
        flex: 1;
        padding: 8px 12px;
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-primary);
        font-size: 0.95em;
      }

      .cloze-input:focus {
        border-color: var(--interactive-accent);
        outline: none;
      }

      /* QA \u5361\u7247\u8F93\u5165 */
      .qa-input-area {
        margin: 16px 0;
      }

      .qa-input-area h4 {
        margin-bottom: 10px;
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .qa-input {
        width: 100%;
        min-height: 100px;
        padding: 10px 12px;
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-primary);
        font-size: 0.95em;
        font-family: inherit;
        resize: vertical;
        line-height: 1.5;
      }

      .qa-input:focus {
        border-color: var(--interactive-accent);
        outline: none;
      }

      /* \u7B54\u6848\u5BF9\u6BD4 */
      .question-review {
        margin-bottom: 12px;
        padding: 10px;
        background: var(--background-secondary-alt);
        border-radius: 6px;
      }

      .question-review h4 {
        margin: 0 0 6px 0;
        color: var(--text-muted);
        font-size: 0.85em;
      }

      .review-text {
        color: var(--text-muted);
        font-size: 0.95em;
      }

      .full-text {
        font-size: 1.1em;
        line-height: 1.5;
        padding: 12px;
        background: var(--background-secondary);
        border-radius: 6px;
        margin-bottom: 12px;
      }

      .answer-comparison {
        padding: 10px;
        background: var(--background-secondary-alt);
        border-radius: 6px;
        margin-top: 12px;
      }

      .answer-comparison h4 {
        margin: 0 0 8px 0;
        color: var(--text-muted);
        font-size: 0.85em;
      }

      .comparison-item {
        padding: 8px;
        margin-bottom: 6px;
        background: var(--background-primary);
        border-radius: 4px;
      }

      .user-answer {
        font-weight: 500;
        padding: 2px 6px;
        border-radius: 3px;
      }

      .user-answer.correct {
        background: var(--background-modifier-success, #4caf50) !important;
        color: var(--text-on-accent, white) !important;
      }

      .user-answer.partial {
        background: #FFC000 !important;
        color: white !important;
      }

      .user-answer.wrong {
        background: var(--background-modifier-error, #f44336) !important;
        color: white !important;
      }

      .correct-answer {
        color: var(--text-accent);
        font-weight: 500;
      }

      .similarity-info {
        color: var(--text-muted);
        font-style: italic;
        font-size: 0.85em;
      }

      /* QA \u5361\u7247\u5BF9\u6BD4\u6837\u5F0F */
      .qa-comparison {
        margin-top: 12px;
      }


.qa-columns-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-bottom: 12px;
}

.qa-column {
  display: flex;
  flex-direction: column;
}

.column-label {
  margin: 0 0 8px 0 !important;
  color: var(--text-muted);
  font-size: 0.85em;
}

.qa-user-answer,
.qa-correct-answer {
  padding: 12px;
  border-radius: 6px;
  white-space: pre-wrap;
  word-break: break-word;
  font-size: 0.95em;
  line-height: 1.5;
  min-height: 60px;
}

.qa-correct-answer {
  background: var(--background-secondary);
}

/* \u76F8\u4F3C\u5EA6\u4FE1\u606F\u653E\u5728\u4E24\u5217\u4E0B\u65B9 */
.qa-similarity {
  margin-top: 8px;
  padding: 6px;
  background: var(--background-secondary);
  border-radius: 4px;
  text-align: center;
  font-size: 0.85em;
  grid-column: 1 / -1;
}




      .qa-user-answer.correct,
      .user-answer.correct.qa-user-answer,
      div.qa-user-answer.correct,
      div.user-answer.correct.qa-user-answer,
      .comparison-item .qa-user-answer.correct,
      .comparison-item .user-answer.correct.qa-user-answer {
        background: var(--background-modifier-success, #4caf50) !important;
        background-color: #4caf50 !important;
        color: var(--text-on-accent, white) !important;
        color: white !important;
      }

      .qa-user-answer.partial,
      .user-answer.partial.qa-user-answer,
      div.qa-user-answer.partial,
      div.user-answer.partial.qa-user-answer,
      .comparison-item .qa-user-answer.partial,
      .comparison-item .user-answer.partial.qa-user-answer {
        background: #FFC000 !important;
        background-color: #FFC000 !important;
        color: white !important;
      }

      .qa-user-answer.wrong,
      .user-answer.wrong.qa-user-answer,
      div.qa-user-answer.wrong,
      div.user-answer.wrong.qa-user-answer,
      .comparison-item .qa-user-answer.wrong,
      .comparison-item .user-answer.wrong.qa-user-answer {
        background: var(--background-modifier-error, #f44336) !important;
        background-color: #f44336 !important;
        color: white !important;
      }


      .correct-answer-label {
        margin-top: 12px !important;
        margin-bottom: 6px !important;
      }

      .qa-similarity {
        margin-top: 8px;
        padding: 6px;
        background: var(--background-secondary);
        border-radius: 4px;
        text-align: center;
        font-size: 0.85em;
      }

      /* \u6309\u94AE\u533A\u57DF */
      .button-area {
        display: flex;
        gap: 12px;
        justify-content: center;
        margin-top: 20px;
      }

      .show-answer-btn {
        padding: 10px 32px;
        font-size: 1em;
      }

      /* \u8BC4\u7EA7\u533A\u57DF */
      .rating-area {
        margin: 15px 0 10px 0;
        text-align: center;
      }

      .rating-area h4 {
        margin-bottom: 12px;
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .rating-buttons {
        display: flex;
        gap: 20px;
        justify-content: center;
        margin-bottom: 0;
      }

      .rating-btn {
        flex: 1;
        max-width: 120px;
        hight:100px;
        padding: 14px 8px;
        border: 2px solid var(--background-modifier-border);
        border-radius: 8px;
        background: var(--background-primary);
        cursor: pointer;
        transition: all 0.2s;
      }

      .rating-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      }

      .rating-red:hover { 
        border-color: var(--color-red);
        background: var(--background-modifier-error-hover);
      }

      .rating-orange:hover { 
        border-color: #FFC000;
        background: rgba(255, 192, 0, 0.1);
      }

      .rating-blue:hover { 
        border-color: var(--interactive-accent);
        background: var(--background-modifier-hover);
      }

      .rating-green:hover { 
        border-color: var(--color-green);
        background: var(--background-modifier-success-hover);
      }

      .rating-label {
        font-weight: 600;
        font-size: 1em;
        margin-bottom: 4px;
      }

      .rating-interval {
        font-size: 0.85em;
        color: var(--text-muted);
      }
        /* \u5FEB\u6377\u952E\u63D0\u793A */
.rating-hotkey {
  font-size: 0.75em;
  color: var(--text-muted);
  margin-top: 4px;
  opacity: 0.7;
}

.rating-btn:hover .rating-hotkey {
  opacity: 1;
  color: var(--text-normal);
}

/* Show Answer \u6309\u94AE tooltip */
.show-answer-btn {
  position: relative;
}
  .cloze-input:focus,
.qa-input:focus {
  border-color: var(--interactive-accent);
  outline: none;
  box-shadow: 0 0 0 2px var(--interactive-accent-hover);
}
  /* \u65E0\u7B54\u6848\u72B6\u6001 */
.qa-user-answer.no-answer {
  background: var(--background-secondary);
  color: var(--text-muted);
  font-style: italic;
  border: 2px dashed var(--background-modifier-border);
}
    `;
    document.head.appendChild(styleEl);
  }
};

// src/ui/StatsView.ts
var import_obsidian7 = require("obsidian");

// src/core/AnalyticsEngine.ts
var AnalyticsEngine = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * 获取每日统计
   */
  getDailyStats(days = 30) {
    const logs = this.plugin.flashcardManager["reviewLogs"] || [];
    const stats = /* @__PURE__ */ new Map();
    for (let i = 0; i < days; i++) {
      const date = new Date();
      date.setDate(date.getDate() - i);
      const dateKey = date.toISOString().split("T")[0];
      stats.set(dateKey, {
        date: dateKey,
        reviewed: 0,
        correctCount: 0,
        correctRate: 0,
        timeSpent: 0,
        newCards: 0
      });
    }
    logs.forEach((log) => {
      const date = new Date(log.timestamp).toISOString().split("T")[0];
      const stat = stats.get(date);
      if (!stat)
        return;
      stat.reviewed++;
      stat.timeSpent += log.response.timeSpent;
      if (log.response.ease === "good" || log.response.ease === "easy") {
        stat.correctCount++;
      } else if (log.response.ease === "hard") {
        stat.correctCount += 0.5;
      }
      const card = this.plugin.flashcardManager.getFlashcard(log.flashcardId);
      if (card && card.stats.totalReviews === 1) {
        stat.newCards++;
      }
    });
    stats.forEach((stat) => {
      if (stat.reviewed > 0) {
        stat.correctRate = stat.correctCount / stat.reviewed;
      }
    });
    return Array.from(stats.values()).sort(
      (a, b) => a.date.localeCompare(b.date)
    );
  }
  /**
   * 获取周统计
   */
  getWeeklyStats() {
    const now = new Date();
    const thisWeekStart = new Date(now);
    thisWeekStart.setDate(now.getDate() - now.getDay());
    thisWeekStart.setHours(0, 0, 0, 0);
    const lastWeekStart = new Date(thisWeekStart);
    lastWeekStart.setDate(lastWeekStart.getDate() - 7);
    const thisWeek = this.calculateWeekStats(thisWeekStart);
    const lastWeek = this.calculateWeekStats(lastWeekStart);
    return { thisWeek, lastWeek };
  }
  calculateWeekStats(startDate) {
    const endDate = new Date(startDate);
    endDate.setDate(endDate.getDate() + 7);
    const logs = (this.plugin.flashcardManager["reviewLogs"] || []).filter(
      (log) => log.timestamp >= startDate.getTime() && log.timestamp < endDate.getTime()
    );
    let totalCorrect = 0;
    let totalTimeSpent = 0;
    logs.forEach((log) => {
      totalTimeSpent += log.response.timeSpent;
      if (log.response.ease === "good" || log.response.ease === "easy") {
        totalCorrect++;
      } else if (log.response.ease === "hard") {
        totalCorrect += 0.5;
      }
    });
    const averageCorrectRate = logs.length > 0 ? totalCorrect / logs.length : 0;
    const streak = this.calculateStreak();
    return {
      startDate: startDate.toISOString().split("T")[0],
      endDate: endDate.toISOString().split("T")[0],
      totalReviews: logs.length,
      averageCorrectRate,
      totalTimeSpent,
      streak
    };
  }
  /**
   * 计算连续学习天数
   */
  calculateStreak() {
    const logs = this.plugin.flashcardManager["reviewLogs"] || [];
    if (logs.length === 0)
      return 0;
    const dates = /* @__PURE__ */ new Set();
    logs.forEach((log) => {
      const date = new Date(log.timestamp).toISOString().split("T")[0];
      dates.add(date);
    });
    const sortedDates = Array.from(dates).sort().reverse();
    let streak = 0;
    const today = new Date().toISOString().split("T")[0];
    for (let i = 0; i < sortedDates.length; i++) {
      const expectedDate = new Date();
      expectedDate.setDate(expectedDate.getDate() - i);
      const expected = expectedDate.toISOString().split("T")[0];
      if (sortedDates[i] === expected) {
        streak++;
      } else {
        break;
      }
    }
    return streak;
  }
  /**
   * 获取卡组统计
   */
  getDeckStats() {
    const cards = this.plugin.flashcardManager.getAllFlashcards();
    const deckMap = /* @__PURE__ */ new Map();
    cards.forEach((card) => {
      if (!deckMap.has(card.deck)) {
        deckMap.set(card.deck, []);
      }
      deckMap.get(card.deck).push(card);
    });
    const stats = [];
    const now = Date.now();
    deckMap.forEach((deckCards, deckName) => {
      const dueCards = deckCards.filter((c) => c.scheduling.due <= now).length;
      const newCards = deckCards.filter((c) => c.scheduling.state === "new").length;
      const totalCorrect = deckCards.reduce(
        (sum, c) => sum + c.stats.correctCount,
        0
      );
      const totalReviews = deckCards.reduce(
        (sum, c) => sum + c.stats.totalReviews,
        0
      );
      const correctRate = totalReviews > 0 ? totalCorrect / totalReviews : 0;
      const totalInterval = deckCards.reduce(
        (sum, c) => sum + c.scheduling.interval,
        0
      );
      const averageInterval = deckCards.length > 0 ? totalInterval / deckCards.length : 0;
      stats.push({
        deckName,
        totalCards: deckCards.length,
        dueCards,
        newCards,
        correctRate,
        averageInterval
      });
    });
    return stats.sort((a, b) => b.totalCards - a.totalCards);
  }
  /**
   * 获取难点卡片
   */
  getDifficultCards(limit = 10) {
    const cards = this.plugin.flashcardManager.getAllFlashcards();
    const logs = this.plugin.flashcardManager["reviewLogs"] || [];
    const difficultCards = [];
    cards.forEach((card) => {
      const cardLogs = logs.filter((log) => log.flashcardId === card.id);
      const errorCount = cardLogs.filter(
        (log) => log.response.ease === "again"
      ).length;
      if (errorCount === 0 && card.stats.difficulty < 0.7)
        return;
      const errorLogs = cardLogs.filter((log) => log.response.ease === "again");
      const lastError = errorLogs.length > 0 ? errorLogs[errorLogs.length - 1].timestamp : 0;
      const pattern = this.detectErrorPattern(card, cardLogs);
      difficultCards.push({
        card,
        errorCount,
        lastError,
        averageTime: card.stats.averageTime,
        pattern
      });
    });
    return difficultCards.sort((a, b) => {
      if (a.errorCount !== b.errorCount) {
        return b.errorCount - a.errorCount;
      }
      if (a.card.stats.difficulty !== b.card.stats.difficulty) {
        return b.card.stats.difficulty - a.card.stats.difficulty;
      }
      return b.lastError - a.lastError;
    }).slice(0, limit);
  }
  detectErrorPattern(card, logs) {
    if (logs.length < 3)
      return "unknown";
    if (card.stats.averageTime > 60) {
      return "calculation";
    }
    if (card.scheduling.interval < 3 && card.scheduling.lapses > 2) {
      return "memory";
    }
    const recentLogs = logs.slice(-5);
    const recentFailures = recentLogs.filter(
      (log) => log.response.ease === "again"
    ).length;
    if (recentFailures >= 3) {
      return "concept";
    }
    return "unknown";
  }
  /**
   * 获取标签统计
   */
  getTagStats() {
    const cards = this.plugin.flashcardManager.getAllFlashcards();
    const tagMap = /* @__PURE__ */ new Map();
    cards.forEach((card) => {
      card.tags.forEach((tag) => {
        if (!tagMap.has(tag)) {
          tagMap.set(tag, { total: 0, correct: 0, reviews: 0 });
        }
        const stat = tagMap.get(tag);
        stat.total++;
        stat.correct += card.stats.correctCount;
        stat.reviews += card.stats.totalReviews;
      });
    });
    const stats = Array.from(tagMap.entries()).map(([tag, data]) => ({
      tag,
      count: data.total,
      correctRate: data.reviews > 0 ? data.correct / data.reviews : 0
    }));
    return stats.sort((a, b) => b.count - a.count);
  }
  /**
   * 生成学习报告
   */
  generateReport(days = 7) {
    const dailyStats = this.getDailyStats(days);
    const { thisWeek, lastWeek } = this.getWeeklyStats();
    const difficultCards = this.getDifficultCards(5);
    const deckStats = this.getDeckStats();
    const totalReviewed = dailyStats.reduce((sum, s) => sum + s.reviewed, 0);
    const totalCorrect = dailyStats.reduce((sum, s) => sum + s.correctCount, 0);
    const averageCorrectRate = totalReviewed > 0 ? totalCorrect / totalReviewed : 0;
    const totalTime = dailyStats.reduce((sum, s) => sum + s.timeSpent, 0);
    const recentDays = dailyStats.slice(-7);
    const olderDays = dailyStats.slice(-14, -7);
    const recentRate = this.calculateAverageRate(recentDays);
    const olderRate = this.calculateAverageRate(olderDays);
    const trend = recentRate > olderRate ? "\u{1F4C8} improving" : recentRate < olderRate ? "\u{1F4C9} declining" : "\u27A1\uFE0F stable";
    let report = `# \u{1F4CA} Learning Report

`;
    report += `**Period:** Last ${days} days
`;
    report += `**Generated:** ${new Date().toLocaleString()}

`;
    report += `## \u{1F3AF} Overall Performance

`;
    report += `- **Cards Reviewed:** ${totalReviewed}
`;
    report += `- **Correct Rate:** ${(averageCorrectRate * 100).toFixed(1)}%
`;
    report += `- **Study Time:** ${this.formatTime(totalTime)}
`;
    report += `- **Current Streak:** ${thisWeek.streak} days \u{1F525}
`;
    report += `- **Trend:** ${trend}

`;
    report += `## \u{1F4C8} Week Comparison

`;
    report += `### This Week
`;
    report += `- Reviews: ${thisWeek.totalReviews}
`;
    report += `- Correct Rate: ${(thisWeek.averageCorrectRate * 100).toFixed(1)}%
`;
    report += `- Time: ${this.formatTime(thisWeek.totalTimeSpent)}

`;
    report += `### Last Week
`;
    report += `- Reviews: ${lastWeek.totalReviews}
`;
    report += `- Correct Rate: ${(lastWeek.averageCorrectRate * 100).toFixed(1)}%
`;
    report += `- Time: ${this.formatTime(lastWeek.totalTimeSpent)}

`;
    const reviewChange = thisWeek.totalReviews - lastWeek.totalReviews;
    const rateChange = (thisWeek.averageCorrectRate - lastWeek.averageCorrectRate) * 100;
    if (reviewChange > 0) {
      report += `\u{1F4AA} You reviewed **${reviewChange} more cards** this week!
`;
    }
    if (rateChange > 5) {
      report += `\u{1F389} Your accuracy improved by **${rateChange.toFixed(1)}%**!
`;
    }
    report += `
`;
    if (difficultCards.length > 0) {
      report += `## \u26A0\uFE0F Cards Needing Attention

`;
      difficultCards.forEach((dc, i) => {
        const patternEmoji = {
          "concept": "\u{1F9E0}",
          "memory": "\u{1F4AD}",
          "calculation": "\u{1F522}",
          "unknown": "\u2753"
        };
        report += `${i + 1}. **${dc.card.front.substring(0, 50)}${dc.card.front.length > 50 ? "..." : ""}**
`;
        report += `   - Errors: ${dc.errorCount} | Pattern: ${patternEmoji[dc.pattern]} ${dc.pattern}
`;
        report += `   - Avg Time: ${dc.averageTime.toFixed(1)}s | Difficulty: ${(dc.card.stats.difficulty * 100).toFixed(0)}%

`;
      });
    }
    report += `## \u{1F4DA} Deck Overview

`;
    deckStats.forEach((deck) => {
      report += `### ${deck.deckName}
`;
      report += `- Total: ${deck.totalCards} | Due: ${deck.dueCards} | New: ${deck.newCards}
`;
      report += `- Correct Rate: ${(deck.correctRate * 100).toFixed(1)}%
`;
      report += `- Avg Interval: ${deck.averageInterval.toFixed(1)} days

`;
    });
    report += `## \u{1F4A1} Recommendations

`;
    if (averageCorrectRate < 0.7) {
      report += `- \u26A1 Your correct rate is below 70%. Consider reviewing difficult cards more frequently.
`;
    }
    if (difficultCards.length > 5) {
      report += `- \u{1F4D6} You have many difficult cards. Try breaking complex concepts into smaller flashcards.
`;
    }
    if (thisWeek.streak > 7) {
      report += `- \u{1F389} Amazing streak! Keep up the consistency!
`;
    }
    if (totalTime / totalReviewed > 30) {
      report += `- \u23F1\uFE0F Average review time is high. Consider simplifying card content.
`;
    }
    if (deckStats.some((d) => d.dueCards > d.totalCards * 0.5)) {
      report += `- \u{1F4C5} Some decks have many overdue cards. Focus on catching up with these.
`;
    }
    return report;
  }
  calculateAverageRate(stats) {
    const total = stats.reduce((sum, s) => sum + s.reviewed, 0);
    const correct = stats.reduce((sum, s) => sum + s.correctCount, 0);
    return total > 0 ? correct / total : 0;
  }
  formatTime(seconds) {
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor(seconds % 3600 / 60);
    if (hours > 0) {
      return `${hours}h ${minutes}m`;
    }
    return `${minutes}m`;
  }
  /**
   * 获取热力图数据（用于日历视图）
   */
  getHeatmapData(days = 90) {
    const dailyStats = this.getDailyStats(days);
    const maxReviews = Math.max(...dailyStats.map((s) => s.reviewed));
    return dailyStats.map((stat) => ({
      date: stat.date,
      count: stat.reviewed,
      intensity: maxReviews > 0 ? stat.reviewed / maxReviews : 0
    }));
  }
};

// src/ui/StatsView.ts
var VIEW_TYPE_STATS = "learning-system-stats";
var StatsView = class extends import_obsidian7.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.currentTab = "overview";
    this.plugin = plugin;
    this.analytics = new AnalyticsEngine(plugin);
  }
  getViewType() {
    return VIEW_TYPE_STATS;
  }
  getDisplayText() {
    return "Learning Statistics";
  }
  getIcon() {
    return "bar-chart";
  }
  async onOpen() {
    this.render();
    this.addStyles();
  }
  async onClose() {
  }
  render() {
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("stats-container");
    const header = container.createDiv({ cls: "stats-header" });
    header.createEl("h2", { text: "\u{1F4CA} Learning Statistics" });
    const refreshBtn = header.createEl("button", {
      text: "\u27F3",
      cls: "refresh-btn"
    });
    refreshBtn.addEventListener("click", () => this.render());
    this.renderTabs(container);
    const content = container.createDiv({ cls: "stats-content" });
    switch (this.currentTab) {
      case "overview":
        this.renderOverview(content);
        break;
      case "trends":
        this.renderTrends(content);
        break;
      case "decks":
        this.renderDecks(content);
        break;
      case "difficult":
        this.renderDifficult(content);
        break;
    }
  }
  renderTabs(container) {
    const tabs = container.createDiv({ cls: "stats-tabs" });
    const tabConfigs = [
      { id: "overview", label: "\u{1F4CA} Overview" },
      { id: "trends", label: "\u{1F4C8} Trends" },
      { id: "decks", label: "\u{1F4DA} Decks" },
      { id: "difficult", label: "\u26A0\uFE0F Difficult" }
    ];
    tabConfigs.forEach((config) => {
      const tab = tabs.createDiv({
        cls: `tab ${this.currentTab === config.id ? "active" : ""}`
      });
      tab.textContent = config.label;
      tab.addEventListener("click", () => {
        this.currentTab = config.id;
        this.render();
      });
    });
  }
  renderOverview(container) {
    const stats = this.plugin.flashcardManager.getStats();
    const { thisWeek, lastWeek } = this.analytics.getWeeklyStats();
    const dailyStats = this.analytics.getDailyStats(7);
    const metricsGrid = container.createDiv({ cls: "metrics-grid" });
    this.createMetricCard(metricsGrid, {
      title: "Total Cards",
      value: stats.total.toString(),
      icon: "\u{1F0CF}"
    });
    this.createMetricCard(metricsGrid, {
      title: "Due Today",
      value: stats.due.toString(),
      icon: "\u{1F4C5}"
    });
    this.createMetricCard(metricsGrid, {
      title: "Reviewed Today",
      value: stats.reviewedToday.toString(),
      icon: "\u2705"
    });
    const streak = this.analytics.calculateStreak();
    this.createMetricCard(metricsGrid, {
      title: "Current Streak",
      value: `${streak} days`,
      icon: "\u{1F525}"
    });
    const weekComparison = container.createDiv({ cls: "week-comparison" });
    weekComparison.createEl("h3", { text: "This Week vs Last Week" });
    const comparisonGrid = weekComparison.createDiv({ cls: "comparison-grid" });
    const reviewChange = thisWeek.totalReviews - lastWeek.totalReviews;
    const reviewChangePercent = lastWeek.totalReviews > 0 ? (reviewChange / lastWeek.totalReviews * 100).toFixed(1) : "0";
    this.createComparisonItem(comparisonGrid, {
      label: "Reviews",
      thisWeek: thisWeek.totalReviews,
      lastWeek: lastWeek.totalReviews,
      change: reviewChange,
      changePercent: reviewChangePercent
    });
    const rateChange = (thisWeek.averageCorrectRate - lastWeek.averageCorrectRate) * 100;
    this.createComparisonItem(comparisonGrid, {
      label: "Correct Rate",
      thisWeek: `${(thisWeek.averageCorrectRate * 100).toFixed(1)}%`,
      lastWeek: `${(lastWeek.averageCorrectRate * 100).toFixed(1)}%`,
      change: rateChange,
      changePercent: rateChange.toFixed(1)
    });
    const recentActivity = container.createDiv({ cls: "recent-activity" });
    recentActivity.createEl("h3", { text: "Last 7 Days Activity" });
    const activityChart = recentActivity.createDiv({ cls: "activity-chart" });
    this.renderSimpleBarChart(activityChart, dailyStats);
    const reportSection = container.createDiv({ cls: "report-section" });
    const reportBtn = reportSection.createEl("button", {
      text: "\u{1F4C4} Generate Full Report",
      cls: "mod-cta"
    });
  }
  renderTrends(container) {
    container.createEl("h3", { text: "Performance Trends" });
    const dailyStats = this.analytics.getDailyStats(30);
    const correctRateSection = container.createDiv({ cls: "chart-section" });
    correctRateSection.createEl("h4", { text: "Correct Rate (Last 30 Days)" });
    const correctRateChart = correctRateSection.createDiv({ cls: "line-chart" });
    this.renderLineChart(correctRateChart, dailyStats, "correctRate");
    const reviewsSection = container.createDiv({ cls: "chart-section" });
    reviewsSection.createEl("h4", { text: "Daily Reviews" });
    const reviewsChart = reviewsSection.createDiv({ cls: "bar-chart" });
    this.renderBarChart(reviewsChart, dailyStats);
    const heatmapSection = container.createDiv({ cls: "chart-section" });
    heatmapSection.createEl("h4", { text: "Study Activity Calendar" });
    const heatmap = heatmapSection.createDiv({ cls: "heatmap" });
    this.renderHeatmap(heatmap);
  }
  renderDecks(container) {
    container.createEl("h3", { text: "Deck Statistics" });
    const deckStats = this.analytics.getDeckStats();
    if (deckStats.length === 0) {
      container.createDiv({
        text: "No decks yet. Create some flashcards to see deck statistics!",
        cls: "empty-message"
      });
      return;
    }
    const decksGrid = container.createDiv({ cls: "decks-grid" });
    deckStats.forEach((deck) => {
      const deckCard = decksGrid.createDiv({ cls: "deck-card" });
      const header = deckCard.createDiv({ cls: "deck-card-header" });
      header.createEl("h4", { text: deck.deckName });
      header.createSpan({
        text: `${deck.totalCards} cards`,
        cls: "deck-badge"
      });
      const stats = deckCard.createDiv({ cls: "deck-card-stats" });
      this.createStatRow(stats, "Due", deck.dueCards.toString(), "\u{1F4C5}");
      this.createStatRow(stats, "New", deck.newCards.toString(), "\u{1F195}");
      this.createStatRow(
        stats,
        "Correct Rate",
        `${(deck.correctRate * 100).toFixed(1)}%`,
        "\u2705"
      );
      this.createStatRow(
        stats,
        "Avg Interval",
        `${deck.averageInterval.toFixed(1)} days`,
        "\u{1F4CA}"
      );
      const progress = deckCard.createDiv({ cls: "deck-progress" });
      const masteredCount = deck.totalCards - deck.dueCards - deck.newCards;
      const masteredPercent = masteredCount / deck.totalCards * 100;
      const progressBar = progress.createDiv({ cls: "progress-bar-container" });
      const bar = progressBar.createDiv({ cls: "progress-bar-fill" });
      bar.style.width = `${masteredPercent}%`;
      progress.createDiv({
        text: `${masteredPercent.toFixed(0)}% mastered`,
        cls: "progress-label"
      });
    });
  }
  renderDifficult(container) {
    container.createEl("h3", { text: "Cards Needing Attention" });
    const difficultCards = this.analytics.getDifficultCards(10);
    if (difficultCards.length === 0) {
      container.createDiv({
        text: "\u{1F389} No difficult cards! Great job!",
        cls: "empty-message"
      });
      return;
    }
    const cardsList = container.createDiv({ cls: "difficult-cards-list" });
    difficultCards.forEach((dc, index) => {
      const cardItem = cardsList.createDiv({ cls: "difficult-card-item" });
      const rank = cardItem.createDiv({ cls: "card-rank" });
      rank.textContent = `${index + 1}`;
      const content = cardItem.createDiv({ cls: "card-content" });
      const question = content.createDiv({ cls: "card-question" });
      question.textContent = dc.card.front.substring(0, 80) + (dc.card.front.length > 80 ? "..." : "");
      const meta = content.createDiv({ cls: "card-meta" });
      const patternEmoji = {
        "concept": "\u{1F9E0}",
        "memory": "\u{1F4AD}",
        "calculation": "\u{1F522}",
        "unknown": "\u2753"
      };
      meta.createSpan({
        text: `${patternEmoji[dc.pattern]} ${dc.pattern}`,
        cls: "pattern-badge"
      });
      meta.createSpan({
        text: `${dc.errorCount} errors`,
        cls: "error-count"
      });
      meta.createSpan({
        text: `${dc.averageTime.toFixed(1)}s avg`,
        cls: "avg-time"
      });
      const difficultyBar = content.createDiv({ cls: "difficulty-bar-container" });
      const diffBar = difficultyBar.createDiv({ cls: "difficulty-bar" });
      diffBar.style.width = `${dc.card.stats.difficulty * 100}%`;
      const actions = cardItem.createDiv({ cls: "card-actions" });
      const jumpBtn = actions.createEl("button", {
        text: "\u2197",
        cls: "action-btn-small"
      });
      jumpBtn.addEventListener("click", () => this.jumpToCard(dc.card));
      const reviewBtn = actions.createEl("button", {
        text: "\u{1F504}",
        cls: "action-btn-small"
      });
      reviewBtn.addEventListener("click", () => {
        this.plugin.activateReview();
      });
      const deleteBtn = actions.createEl("button", {
        text: "\u{1F5D1}\uFE0F",
        cls: "action-btn-small delete-btn"
      });
      deleteBtn.addEventListener("click", async () => {
        if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u5F20\u95EA\u5361\u5417\uFF1F")) {
          await this.deleteFlashcard(dc.card.id);
        }
      });
    });
  }
  createMetricCard(container, config) {
    const card = container.createDiv({ cls: "metric-card" });
    card.createDiv({ text: config.icon, cls: "metric-icon" });
    const content = card.createDiv({ cls: "metric-content" });
    content.createDiv({ text: config.title, cls: "metric-title" });
    content.createDiv({ text: config.value, cls: "metric-value" });
  }
  createComparisonItem(container, config) {
    const item = container.createDiv({ cls: "comparison-item" });
    item.createDiv({ text: config.label, cls: "comparison-label" });
    const values = item.createDiv({ cls: "comparison-values" });
    values.createSpan({
      text: `${config.thisWeek}`,
      cls: "this-week"
    });
    values.createSpan({ text: " vs ", cls: "vs" });
    values.createSpan({
      text: `${config.lastWeek}`,
      cls: "last-week"
    });
    const changeClass = config.change > 0 ? "positive" : config.change < 0 ? "negative" : "neutral";
    const changeIcon = config.change > 0 ? "\u2197" : config.change < 0 ? "\u2198" : "\u2192";
    item.createDiv({
      text: `${changeIcon} ${config.changePercent}%`,
      cls: `change ${changeClass}`
    });
  }
  createStatRow(container, label, value, icon) {
    const row = container.createDiv({ cls: "stat-row" });
    row.createSpan({ text: icon, cls: "stat-icon" });
    row.createSpan({ text: label, cls: "stat-label" });
    row.createSpan({ text: value, cls: "stat-value" });
  }
  renderSimpleBarChart(container, data) {
    const maxValue = Math.max(...data.map((d) => d.reviewed));
    data.forEach((stat) => {
      const bar = container.createDiv({ cls: "simple-bar" });
      const date = new Date(stat.date);
      const dayName = date.toLocaleDateString("en-US", { weekday: "short" });
      bar.createDiv({ text: dayName, cls: "bar-label" });
      const barContainer = bar.createDiv({ cls: "bar-container" });
      const barFill = barContainer.createDiv({ cls: "bar-fill" });
      const height = maxValue > 0 ? stat.reviewed / maxValue * 100 : 0;
      barFill.style.height = `${height}%`;
      bar.createDiv({ text: stat.reviewed.toString(), cls: "bar-value" });
    });
  }
  renderBarChart(container, data) {
    const chart = container.createDiv({ cls: "chart-canvas" });
    const maxValue = Math.max(...data.map((d) => d.reviewed));
    data.forEach((stat) => {
      const barGroup = chart.createDiv({ cls: "bar-group" });
      const barContainer = barGroup.createDiv({ cls: "bar" });
      const height = maxValue > 0 ? stat.reviewed / maxValue * 100 : 0;
      barContainer.style.height = `${height}%`;
      barContainer.title = `${stat.reviewed} reviews`;
      const barLabel = barGroup.createDiv({ cls: "bar-label" });
      const date = new Date(stat.date);
      barLabel.textContent = date.getDate().toString();
    });
  }
  renderLineChart(container, data, key) {
    const chart = container.createDiv({ cls: "line-chart-canvas" });
    const points = data.map((stat, i) => {
      const x = i / (data.length - 1) * 100;
      const y = 100 - stat[key] * 100;
      return { x, y, value: stat[key] };
    });
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("viewBox", "0 0 100 100");
    svg.setAttribute("preserveAspectRatio", "none");
    svg.style.width = "100%";
    svg.style.height = "200px";
    const pathData = points.map(
      (p, i) => `${i === 0 ? "M" : "L"} ${p.x} ${p.y}`
    ).join(" ");
    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
    path.setAttribute("d", pathData);
    path.setAttribute("fill", "none");
    path.setAttribute("stroke", "var(--interactive-accent)");
    path.setAttribute("stroke-width", "2");
    svg.appendChild(path);
    chart.appendChild(svg);
    const labelsContainer = container.createDiv({ cls: "chart-labels" });
    data.forEach((stat, i) => {
      if (i % Math.ceil(data.length / 7) === 0) {
        const chartLabel = labelsContainer.createDiv({ cls: "chart-label" });
        const date = new Date(stat.date);
        chartLabel.textContent = `${date.getMonth() + 1}/${date.getDate()}`;
      }
    });
  }
  renderHeatmap(container) {
    const heatmapData = this.analytics.getHeatmapData(90);
    const weeks = [];
    let currentWeek = [];
    heatmapData.forEach((day, i) => {
      currentWeek.push(day);
      if (currentWeek.length === 7 || i === heatmapData.length - 1) {
        weeks.push(currentWeek);
        currentWeek = [];
      }
    });
    weeks.forEach((week) => {
      const weekRow = container.createDiv({ cls: "heatmap-week" });
      week.forEach((day) => {
        const cell = weekRow.createDiv({ cls: "heatmap-cell" });
        const level = Math.ceil(day.intensity * 4);
        cell.addClass(`level-${level}`);
        cell.title = `${day.date}: ${day.count} reviews`;
      });
    });
  }
  async jumpToCard(card) {
    const file = this.app.vault.getAbstractFileByPath(card.sourceFile);
    if (!(file instanceof import_obsidian7.TFile))
      return;
    const contentUnit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
    if (!contentUnit)
      return;
    const leaf = this.app.workspace.getLeaf(false);
    await leaf.openFile(file);
    setTimeout(() => {
      const view = this.app.workspace.getActiveViewOfType(import_obsidian7.ItemView);
      if (view) {
        const editor = view.editor;
        if (editor) {
          editor.setCursor({ line: contentUnit.source.position.line, ch: 0 });
          editor.scrollIntoView({
            from: { line: contentUnit.source.position.line, ch: 0 },
            to: { line: contentUnit.source.position.line, ch: 0 }
          }, true);
        }
      }
    }, 100);
  }
  async deleteFlashcard(cardId) {
    try {
      await this.plugin.flashcardManager.deleteCard(cardId);
      new import_obsidian7.Notice("\u{1F5D1}\uFE0F \u95EA\u5361\u5DF2\u5220\u9664");
      this.render();
    } catch (error) {
      console.error("Error deleting flashcard:", error);
      new import_obsidian7.Notice("\u274C \u5220\u9664\u95EA\u5361\u5931\u8D25");
    }
  }
  addStyles() {
    const styleEl = document.createElement("style");
    styleEl.textContent = `
      .stats-container {
        padding: 20px;
        overflow-y: auto;
      }

      .stats-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .stats-header h2 {
        margin: 0;
      }

      .stats-tabs {
        display: flex;
        gap: 8px;
        margin-bottom: 20px;
        border-bottom: 2px solid var(--background-modifier-border);
      }

      .tab {
        padding: 10px 20px;
        cursor: pointer;
        border-bottom: 3px solid transparent;
        transition: all 0.2s;
        user-select: none;
      }

      .tab:hover {
        background: var(--background-modifier-hover);
      }

      .tab.active {
        border-bottom-color: var(--interactive-accent);
        color: var(--interactive-accent);
        font-weight: 600;
      }

      .metrics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 30px;
      }

      .metric-card {
        padding: 20px;
        background: var(--background-secondary);
        border-radius: 8px;
        display: flex;
        gap: 15px;
        align-items: center;
      }

      .metric-icon {
        font-size: 32px;
      }

      .metric-content {
        flex: 1;
      }

      .metric-title {
        font-size: 0.9em;
        color: var(--text-muted);
        margin-bottom: 5px;
      }

      .metric-value {
        font-size: 1.8em;
        font-weight: 600;
      }

      .week-comparison {
        margin-bottom: 30px;
      }

      .comparison-grid {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-top: 15px;
      }

      .comparison-item {
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .comparison-label {
        font-weight: 500;
      }

      .comparison-values {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .this-week {
        font-weight: 600;
        font-size: 1.1em;
      }

      .last-week {
        color: var(--text-muted);
      }

      .change {
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 0.9em;
        font-weight: 500;
      }

      .change.positive {
        background: var(--background-modifier-success);
        color: var(--text-on-accent);
      }

      .change.negative {
        background: var(--background-modifier-error);
        color: white;
      }

      .chart-section {
        margin-bottom: 30px;
      }

      .recent-activity .activity-chart {
        display: flex;
        justify-content: space-around;
        align-items: flex-end;
        height: 150px;
        padding: 20px;
        background: var(--background-secondary);
        border-radius: 8px;
      }

      .simple-bar {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        flex: 1;
      }

      .simple-bar .bar-container {
        width: 100%;
        height: 100px;
        display: flex;
        align-items: flex-end;
        justify-content: center;
      }

      .simple-bar .bar-fill {
        width: 60%;
        background: var(--interactive-accent);
        border-radius: 4px 4px 0 0;
        transition: height 0.3s;
      }

      .bar-label, .bar-value {
        font-size: 0.85em;
        color: var(--text-muted);
      }

      .heatmap {
        display: flex;
        flex-direction: column;
        gap: 4px;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 8px;
      }

      .heatmap-week {
        display: flex;
        gap: 4px;
      }

      .heatmap-cell {
        width: 12px;
        height: 12px;
        background: var(--background-primary);
        border-radius: 2px;
        cursor: pointer;
      }

      .heatmap-cell.level-1 { background: rgba(94, 156, 235, 0.3); }
      .heatmap-cell.level-2 { background: rgba(94, 156, 235, 0.5); }
      .heatmap-cell.level-3 { background: rgba(94, 156, 235, 0.7); }
      .heatmap-cell.level-4 { background: rgba(94, 156, 235, 1); }

      .decks-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 15px;
      }

      .deck-card {
        padding: 20px;
        background: var(--background-secondary);
        border-radius: 8px;
        border: 1px solid var(--background-modifier-border);
      }

      .deck-card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--background-modifier-border);
      }

      .deck-card-header h4 {
        margin: 0;
      }

      .deck-badge {
        padding: 4px 10px;
        background: var(--interactive-accent);
        color: white;
        border-radius: 12px;
        font-size: 0.85em;
      }

      .deck-card-stats {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-bottom: 15px;
      }

      .stat-row {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .stat-icon {
        width: 20px;
      }

      .stat-label {
        flex: 1;
        color: var(--text-muted);
      }

      .stat-value {
        font-weight: 500;
      }

      .deck-progress {
        margin-top: 15px;
      }

      .progress-bar-container {
        height: 8px;
        background: var(--background-primary);
        border-radius: 4px;
        overflow: hidden;
        margin-bottom: 5px;
      }

      .progress-bar-fill {
        height: 100%;
        background: var(--interactive-accent);
        transition: width 0.3s;
      }

      .progress-label {
        font-size: 0.85em;
        color: var(--text-muted);
      }

      .difficult-cards-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .difficult-card-item {
        display: flex;
        gap: 15px;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 8px;
        border: 1px solid var(--background-modifier-border);
      }

      .card-rank {
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--interactive-accent);
        color: white;
        border-radius: 50%;
        font-weight: 600;
        flex-shrink: 0;
      }

      .card-content {
        flex: 1;
      }

      .card-question {
        font-weight: 500;
        margin-bottom: 8px;
      }

      .card-meta {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-bottom:8px;
      } 

.pattern-badge, .error-count, .avg-time {
    padding: 3px 10px;
    background: var(--background-primary);
    border-radius: 12px;
    font-size: 0.85em;
  }

  .difficulty-bar-container {
    height: 6px;
    background: var(--background-primary);
    border-radius: 3px;
    overflow: hidden;
  }

  .difficulty-bar {
    height: 100%;
    background: linear-gradient(to right, var(--color-green), var(--color-yellow), var(--color-red));
    transition: width 0.3s;
  }

  .card-actions {
    display: flex;
    gap: 8px;
  }

  .action-btn-small {
    padding: 6px 12px;
    border: 1px solid var(--background-modifier-border);
    border-radius: 4px;
    background: var(--background-primary);
    cursor: pointer;
    transition: all 0.2s;
  }

  .action-btn-small:hover {
    background: var(--interactive-accent);
    color: white;
    border-color: var(--interactive-accent);
  }

  .action-btn-small.delete-btn:hover {
    background: var(--color-red);
    border-color: var(--color-red);
    color: white;
  }

  .empty-message {
    text-align: center;
    padding: 40px;
    color: var(--text-muted);
    font-size: 1.1em;
  }

  .report-section {
    text-align: center;
    margin-top: 30px;
    padding: 20px;
  }

  .chart-canvas {
    display: flex;
    align-items: flex-end;
    justify-content: space-around;
    height: 200px;
    padding: 20px;
    background: var(--background-secondary);
    border-radius: 8px;
    margin-bottom: 10px;
  }

  .bar-group {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
    height: 100%;
  }

  .bar-group .bar {
    width: 80%;
    background: var(--interactive-accent);
    border-radius: 4px 4px 0 0;
    transition: height 0.3s;
    margin-top: auto;
  }

  .line-chart-canvas {
    background: var(--background-secondary);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 10px;
  }

  .chart-labels {
    display: flex;
    justify-content: space-around;
    padding: 10px 20px;
    background: var(--background-secondary);
    border-radius: 8px;
  }

  .chart-label {
    font-size: 0.85em;
    color: var(--text-muted);
  }
`;
    document.head.appendChild(styleEl);
  }
};

// src/core/DataManager.ts
var DataManager = class {
  constructor(app, plugin) {
    this.app = app;
    this.plugin = plugin;
    this.contentUnits = /* @__PURE__ */ new Map();
    this.fileIndex = /* @__PURE__ */ new Map();
    this.dataFolder = `${this.app.vault.configDir}/plugins/learning-system/data`;
  }
  async initialize() {
    await this.ensureDataFolder();
    await this.loadData();
  }
  async ensureDataFolder() {
    const adapter = this.app.vault.adapter;
    if (!await adapter.exists(this.dataFolder)) {
      await adapter.mkdir(this.dataFolder);
    }
    const subfolders = ["indexes", "config", "cache"];
    for (const folder of subfolders) {
      const path = `${this.dataFolder}/${folder}`;
      if (!await adapter.exists(path)) {
        await adapter.mkdir(path);
      }
    }
  }
  async loadData() {
    try {
      const contentPath = `${this.dataFolder}/content-units.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(contentPath)) {
        const data = await adapter.read(contentPath);
        const units = JSON.parse(data);
        for (const unit of units) {
          this.contentUnits.set(unit.id, unit);
          if (!this.fileIndex.has(unit.source.file)) {
            this.fileIndex.set(unit.source.file, []);
          }
          this.fileIndex.get(unit.source.file).push(unit.id);
        }
      }
    } catch (error) {
      console.error("Error loading data:", error);
    }
  }
  async saveContentUnit(unit) {
    this.contentUnits.set(unit.id, unit);
    if (!this.fileIndex.has(unit.source.file)) {
      this.fileIndex.set(unit.source.file, []);
    }
    if (!this.fileIndex.get(unit.source.file).includes(unit.id)) {
      this.fileIndex.get(unit.source.file).push(unit.id);
    }
    await this.persist();
  }
  async saveContentUnits(units) {
    for (const unit of units) {
      this.contentUnits.set(unit.id, unit);
      if (!this.fileIndex.has(unit.source.file)) {
        this.fileIndex.set(unit.source.file, []);
      }
      if (!this.fileIndex.get(unit.source.file).includes(unit.id)) {
        this.fileIndex.get(unit.source.file).push(unit.id);
      }
    }
    await this.persist();
  }
  getContentUnit(id) {
    return this.contentUnits.get(id);
  }
  getContentUnitsByFile(filePath) {
    const ids = this.fileIndex.get(filePath) || [];
    return ids.map((id) => this.contentUnits.get(id)).filter(Boolean);
  }
  getContentUnitsByType(type) {
    return Array.from(this.contentUnits.values()).filter((unit) => unit.type === type);
  }
  getAllContentUnits() {
    return Array.from(this.contentUnits.values());
  }
  async deleteContentUnit(id) {
    const unit = this.contentUnits.get(id);
    if (unit) {
      this.contentUnits.delete(id);
      const fileUnits = this.fileIndex.get(unit.source.file);
      if (fileUnits) {
        const index = fileUnits.indexOf(id);
        if (index > -1) {
          fileUnits.splice(index, 1);
        }
      }
      await this.persist();
    }
  }
  async persist() {
    try {
      const contentPath = `${this.dataFolder}/content-units.json`;
      const units = Array.from(this.contentUnits.values());
      const data = JSON.stringify(units, null, 2);
      await this.app.vault.adapter.write(contentPath, data);
      const indexPath = `${this.dataFolder}/indexes/file-index.json`;
      const indexData = JSON.stringify(
        Object.fromEntries(this.fileIndex),
        null,
        2
      );
      await this.app.vault.adapter.write(indexPath, indexData);
    } catch (error) {
      console.error("Error persisting data:", error);
    }
  }
};

// src/core/ExtractionEngine.ts
var import_obsidian8 = require("obsidian");
var ExtractionEngine = class {
  constructor(app, dataManager, flashcardManager) {
    this.app = app;
    this.dataManager = dataManager;
    this.flashcardManager = flashcardManager;
  }
  /**
   * 注册右键菜单
   */
  registerContextMenu(menu, editor, file) {
    const selection = editor.getSelection();
    if (!selection)
      return;
    menu.addItem((item) => {
      item.setTitle("\u{1F4DD} Extract as text only").setIcon("file-text").onClick(async () => {
        await this.extractSelectedText(editor, file, "text");
      });
    });
    menu.addItem((item) => {
      item.setTitle("\u2753 Extract as QA card").setIcon("help-circle").onClick(async () => {
        await this.extractSelectedText(editor, file, "QA");
      });
    });
    menu.addItem((item) => {
      item.setTitle("\u270F\uFE0F Extract as Cloze card").setIcon("highlighter").onClick(async () => {
        await this.extractSelectedText(editor, file, "cloze");
      });
    });
  }
  /**
   * 提取选中的文本
   */
  async extractSelectedText(editor, file, extractType) {
    const selection = editor.getSelection();
    if (!selection) {
      new import_obsidian8.Notice("No text selected");
      return;
    }
    const cursor = editor.getCursor("from");
    const content = await this.app.vault.read(file);
    const offset = this.getOffsetFromCursor(content, cursor.line, cursor.ch);
    try {
      let unit;
      switch (extractType) {
        case "text":
          unit = this.createTextUnit(file, selection, offset, content);
          break;
        case "QA":
          unit = this.createQAUnit(file, selection, offset, content);
          break;
        case "cloze":
          unit = this.createClozeUnit(file, selection, offset, content);
          break;
      }
      await this.dataManager.saveContentUnits([unit]);
      if (extractType === "QA" || extractType === "cloze") {
        try {
          const cardType = extractType === "QA" ? "qa" : "cloze";
          const flashcard = await this.flashcardManager.createFlashcardFromUnit(unit, {
            cardType
          });
          await this.dataManager.saveContentUnits([unit]);
        } catch (error) {
          console.error("[extractSelectedText] \u521B\u5EFA\u95EA\u5361\u5931\u8D25:", error);
        }
      }
      const typeNames = {
        text: "text",
        QA: "QA card",
        cloze: "cloze card"
      };
      new import_obsidian8.Notice(`\u2705 Extracted as ${typeNames[extractType]}`);
      this.refreshAllViews();
    } catch (error) {
      console.error("Error extracting selection:", error);
      new import_obsidian8.Notice(`\u274C Error: ${error.message}`);
    }
  }
  /**
   * 创建纯文本单元
   */
  createTextUnit(file, selection, offset, fileContent) {
    const position = this.calculatePosition(fileContent, offset);
    return {
      id: this.generateId(),
      type: "text",
      content: selection.trim(),
      fullContext: selection.trim(),
      source: {
        file: file.path,
        position: {
          start: offset,
          end: offset + selection.length,
          line: position.line
        },
        heading: this.findHeading(fileContent, offset),
        anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
      },
      extractRule: {
        ruleId: "text-manual",
        ruleName: "Manual Text Extract",
        extractedBy: "manual"
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now(),
        tags: this.extractTags(fileContent, offset)
      },
      flashcardIds: []
    };
  }
  /**
   * 创建 QA 卡片单元
   */
  createQAUnit(file, selection, offset, fileContent) {
    const position = this.calculatePosition(fileContent, offset);
    let question, answer;
    if (selection.includes("::")) {
      const parts = selection.split("::");
      question = parts[0].trim();
      answer = parts.slice(1).join("::").trim();
    } else {
      question = selection.trim();
      answer = "[Answer needed]";
    }
    return {
      id: this.generateId(),
      type: "QA",
      content: question,
      answer,
      fullContext: selection.trim(),
      source: {
        file: file.path,
        position: {
          start: offset,
          end: offset + selection.length,
          line: position.line
        },
        heading: this.findHeading(fileContent, offset),
        anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
      },
      extractRule: {
        ruleId: "QA-manual",
        ruleName: "Manual QA Card",
        extractedBy: "manual"
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now(),
        tags: this.extractTags(fileContent, offset)
      },
      flashcardIds: []
    };
  }
  /**
   * 创建完形填空卡片单元
   */
  createClozeUnit(file, selection, offset, fileContent) {
    const position = this.calculatePosition(fileContent, offset);
    const fullSentence = this.extractFullSentence(fileContent, offset, selection.length);
    return {
      id: this.generateId(),
      type: "cloze",
      content: selection.trim(),
      fullContext: fullSentence,
      source: {
        file: file.path,
        position: {
          start: offset,
          end: offset + selection.length,
          line: position.line
        },
        heading: this.findHeading(fileContent, offset),
        anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
      },
      extractRule: {
        ruleId: "cloze-manual",
        ruleName: "Manual Cloze Card",
        extractedBy: "manual"
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now(),
        tags: this.extractTags(fileContent, offset)
      },
      flashcardIds: []
    };
  }
  /**
   * 从光标位置计算文件偏移量
   */
  getOffsetFromCursor(content, line, ch) {
    const lines = content.split("\n");
    let offset = 0;
    for (let i = 0; i < line; i++) {
      offset += lines[i].length + 1;
    }
    offset += ch;
    return offset;
  }
  /**
   * 扫描单个文件
   */
  async scanFile(file) {
    try {
      const content = await this.app.vault.read(file);
      const units = await this.extractContent(file, content);
      if (units.length > 0) {
        await this.dataManager.saveContentUnits(units);
        const qaCount = units.filter((u) => u.type === "QA").length;
        const clozeCount = units.filter((u) => u.type === "cloze").length;
        new import_obsidian8.Notice(`Extracted ${qaCount} QA cards and ${clozeCount} cloze cards from ${file.name}`);
        setTimeout(() => {
          this.refreshAllViews();
        }, 100);
      }
      return units.length;
    } catch (error) {
      console.error("[scanFile] \u9519\u8BEF:", error);
      new import_obsidian8.Notice(`Error scanning file: ${error.message}`);
      return 0;
    }
  }
  /**
   * 刷新所有相关视图
   */
  refreshAllViews() {
    this.app.workspace.iterateAllLeaves((leaf) => {
      const viewType = leaf.view.getViewType();
      if (viewType === "learning-system-sidebar-overview" || viewType === "learning-system-main-overview") {
        leaf.view.refresh();
      }
    });
  }
  /**
   * 扫描整个 Vault
   */
  async scanVault() {
    const files = this.app.vault.getMarkdownFiles();
    let scanned = 0;
    let extracted = 0;
    new import_obsidian8.Notice(`Scanning ${files.length} files...`);
    for (const file of files) {
      const count = await this.scanFile(file);
      scanned++;
      extracted += count;
    }
    new import_obsidian8.Notice(`Scan complete! Extracted ${extracted} items from ${scanned} files.`);
    return { scanned, extracted };
  }
  /**
   * 🔧 修改: 先保存 units，再创建闪卡
   */
  async extractContent(file, content) {
    const units = [];
    const qaUnits = this.extractQACards(file, content);
    units.push(...qaUnits);
    const clozeUnits = this.extractClozeCards(file, content);
    units.push(...clozeUnits);
    if (units.length > 0) {
      await this.dataManager.saveContentUnits(units);
    }
    for (const unit of units) {
      try {
        const cardType = unit.type === "QA" ? "qa" : "cloze";
        const flashcard = await this.flashcardManager.createFlashcardFromUnit(unit, {
          cardType
        });
      } catch (error) {
        console.error("[extractContent] \u521B\u5EFA\u95EA\u5361\u5931\u8D25:", error);
      }
    }
    return units;
  }
  /**
   * ✅ 检查是否为任务完成标记
   * 排除: [completion:: date], [due:: date] 等任务相关的 :: 格式
   */
  isTaskCompletion(line) {
    const taskPattern = /^[\s]*-\s*\[[x\s]\].*::/i;
    return taskPattern.test(line);
  }
  /**
   * ✅ 检查是否为日期/时间字段
   * 排除: date1:: 2021-02-26T15:15, date2:: 2021-04-17 18:00 等格式
   */
  isDateTimeField(question, answer) {
    const dateFieldPattern = /\b(date\d*|time\d*|created|updated|modified|scheduled|due|completion)\b/i;
    const dateTimePattern = /^\s*\d{4}-\d{2}-\d{2}(T|\s)\d{2}:\d{2}|\d{4}-\d{2}-\d{2}\s+\d{2}:\d{2}/;
    const dateOnlyPattern = /^\s*\d{4}-\d{2}-\d{2}\s*$/;
    return dateFieldPattern.test(question) && (dateTimePattern.test(answer) || dateOnlyPattern.test(answer));
  }
  /**
   * ✅ 检查是否为 Excalidraw 高亮
   * 排除: ==switch to excalidraw view...== 这类特定高亮
   */
  isExcalidrawHighlight(matchText, line) {
    const excalidrawKeywords = /excalidraw|drawing|sketch/i;
    return excalidrawKeywords.test(matchText) || excalidrawKeywords.test(line);
  }
  /**
   * ✅ 提取 QA 卡片 (格式: Question :: Answer)
   * 新增: 过滤任务完成标记和日期时间字段
   */
  extractQACards(file, content) {
    const units = [];
    const qaRegex = /^(.+?)\s*::\s*(.+?)$/gm;
    let match;
    while ((match = qaRegex.exec(content)) !== null) {
      const fullMatch = match[0];
      const question = match[1].trim();
      const answer = match[2].trim();
      if (this.isTaskCompletion(fullMatch)) {
        console.log("[extractQACards] \u8DF3\u8FC7\u4EFB\u52A1\u6807\u8BB0:", fullMatch);
        continue;
      }
      if (this.isDateTimeField(question, answer)) {
        console.log("[extractQACards] \u8DF3\u8FC7\u65E5\u671F\u65F6\u95F4\u5B57\u6BB5:", fullMatch);
        continue;
      }
      const position = this.calculatePosition(content, match.index);
      const unit = {
        id: this.generateId(),
        type: "QA",
        content: question,
        answer,
        fullContext: fullMatch,
        source: {
          file: file.path,
          position: {
            start: match.index,
            end: match.index + fullMatch.length,
            line: position.line
          },
          heading: this.findHeading(content, match.index),
          anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
        },
        extractRule: {
          ruleId: "QA",
          ruleName: "QA Card",
          extractedBy: "auto"
        },
        metadata: {
          createdAt: Date.now(),
          updatedAt: Date.now(),
          tags: this.extractTags(content, match.index)
        },
        flashcardIds: []
      };
      units.push(unit);
    }
    return units;
  }
  /**
   * ✅ 提取完形填空卡 (格式: ==highlight==)
   * 新增: 过滤 Excalidraw 高亮
   */
  extractClozeCards(file, content) {
    const units = [];
    const highlightRegex = /==(.+?)==/g;
    let match;
    while ((match = highlightRegex.exec(content)) !== null) {
      const extractedText = match[1];
      const fullMatch = match[0];
      const position = this.calculatePosition(content, match.index);
      const lineStart = content.lastIndexOf("\n", match.index) + 1;
      const lineEnd = content.indexOf("\n", match.index);
      const currentLine = content.substring(lineStart, lineEnd === -1 ? content.length : lineEnd);
      if (this.isExcalidrawHighlight(extractedText, currentLine)) {
        console.log("[extractClozeCards] \u8DF3\u8FC7 Excalidraw \u9AD8\u4EAE:", extractedText);
        continue;
      }
      const fullSentence = this.extractFullSentence(content, match.index, fullMatch.length);
      const unit = {
        id: this.generateId(),
        type: "cloze",
        content: extractedText.trim(),
        fullContext: fullSentence,
        source: {
          file: file.path,
          position: {
            start: match.index,
            end: match.index + fullMatch.length,
            line: position.line
          },
          heading: this.findHeading(content, match.index),
          anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
        },
        extractRule: {
          ruleId: "cloze",
          ruleName: "Cloze Deletion",
          extractedBy: "auto"
        },
        metadata: {
          createdAt: Date.now(),
          updatedAt: Date.now(),
          tags: this.extractTags(content, match.index)
        },
        flashcardIds: []
      };
      units.push(unit);
    }
    return units;
  }
  /**
   * 提取包含高亮的完整句子
   */
  extractFullSentence(content, highlightStart, highlightLength) {
    const sentenceEnds = /[.!?。！?\n]/;
    let start = highlightStart;
    while (start > 0) {
      const char = content[start - 1];
      if (sentenceEnds.test(char)) {
        break;
      }
      start--;
    }
    let end = highlightStart + highlightLength;
    while (end < content.length) {
      const char = content[end];
      if (sentenceEnds.test(char)) {
        end++;
        break;
      }
      end++;
    }
    return content.substring(start, end).trim();
  }
  /**
   * 计算文本位置
   */
  calculatePosition(content, offset) {
    const lines = content.substring(0, offset).split("\n");
    return {
      line: lines.length - 1,
      column: lines[lines.length - 1].length
    };
  }
  /**
   * 查找所在标题
   */
  findHeading(content, position) {
    const beforeContent = content.substring(0, position);
    const headings = beforeContent.match(/^#{1,6} .+$/gm);
    return headings ? headings[headings.length - 1] : void 0;
  }
  /**
   * 提取附近的标签
   */
  extractTags(content, position) {
    const tags = /* @__PURE__ */ new Set();
    const yamlMatch = content.match(/^---\n([\s\S]*?)\n---/);
    if (yamlMatch) {
      const yamlContent = yamlMatch[1];
      const tagsMatch = yamlContent.match(/^tags:\s*(.+)$/m);
      if (tagsMatch) {
        const tagContent = tagsMatch[1].trim();
        if (tagContent.startsWith("[")) {
          const arrayTags = tagContent.match(/[\w/-]+/g);
          arrayTags == null ? void 0 : arrayTags.forEach((tag) => tags.add(`#${tag}`));
        } else {
          tagContent.split(",").forEach((tag) => {
            const cleaned = tag.trim();
            if (cleaned)
              tags.add(`#${cleaned}`);
          });
        }
      }
    }
    const lines = content.substring(0, position).split("\n");
    const currentLine = lines.length - 1;
    const lineContent = content.split("\n")[currentLine] || "";
    const inlineTagRegex = /#[\w/-]+/g;
    const inlineTags = lineContent.match(inlineTagRegex);
    inlineTags == null ? void 0 : inlineTags.forEach((tag) => tags.add(tag));
    return Array.from(tags);
  }
  /**
   * 生成唯一 ID
   */
  generateId() {
    return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
  }
  /**
   * 生成 Block ID
   */
  generateBlockId() {
    return `extract-${Date.now()}-${Math.random().toString(36).substr(2, 6)}`;
  }
};

// src/core/AnnotationManager.ts
var AnnotationManager = class {
  constructor(app, plugin) {
    this.app = app;
    this.plugin = plugin;
    this.annotations = /* @__PURE__ */ new Map();
    this.dataFolder = `${this.app.vault.configDir}/plugins/learning-system/data`;
  }
  async initialize() {
    await this.loadAnnotations();
  }
  /**
   * 加载所有批注
   */
  async loadAnnotations() {
    try {
      const path = `${this.dataFolder}/annotations.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(path)) {
        const data = await adapter.read(path);
        const annotations = JSON.parse(data);
        for (const annotation of annotations) {
          this.annotations.set(annotation.id, annotation);
        }
      }
    } catch (error) {
      console.error("Error loading annotations:", error);
    }
  }
  /**
   * 添加内容批注
   */
  async addContentAnnotation(contentUnitId, content, badge) {
    const annotation = {
      id: this.generateId(),
      targetType: "content",
      targetId: contentUnitId,
      content,
      badge,
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.annotations.set(annotation.id, annotation);
    await this.persist();
    const contentUnit = this.plugin.dataManager.getContentUnit(contentUnitId);
    if (contentUnit) {
      contentUnit.annotationId = annotation.id;
      contentUnit.metadata.updatedAt = Date.now();
      await this.plugin.dataManager.saveContentUnit(contentUnit);
    }
    return annotation;
  }
  /**
   * 添加文件批注
   */
  async addFileAnnotation(filePath, content) {
    const annotation = {
      id: this.generateId(),
      targetType: "file",
      targetId: filePath,
      content,
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.annotations.set(annotation.id, annotation);
    await this.persist();
    return annotation;
  }
  /**
   * 获取批注
   */
  getAnnotation(id) {
    return this.annotations.get(id);
  }
  /**
   * 获取内容的批注
   */
  getContentAnnotation(contentUnitId) {
    const contentUnit = this.plugin.dataManager.getContentUnit(contentUnitId);
    if (!(contentUnit == null ? void 0 : contentUnit.annotationId))
      return void 0;
    return this.annotations.get(contentUnit.annotationId);
  }
  /**
   * 获取文件的所有批注
   */
  getFileAnnotations(filePath) {
    return Array.from(this.annotations.values()).filter(
      (ann) => ann.targetType === "file" && ann.targetId === filePath
    );
  }
  /**
   * 更新批注
   */
  async updateAnnotation(id, updates) {
    const annotation = this.annotations.get(id);
    if (!annotation)
      return;
    Object.assign(annotation, updates, {
      metadata: {
        ...annotation.metadata,
        updatedAt: Date.now()
      }
    });
    await this.persist();
  }
  /**
   * 删除批注
   */
  async deleteAnnotation(id) {
    const annotation = this.annotations.get(id);
    if (!annotation)
      return;
    if (annotation.targetType === "content") {
      const contentUnit = this.plugin.dataManager.getContentUnit(annotation.targetId);
      if (contentUnit) {
        contentUnit.annotationId = void 0;
        await this.plugin.dataManager.saveContentUnit(contentUnit);
      }
    }
    this.annotations.delete(id);
    await this.persist();
  }
  /**
   * 获取所有批注
   */
  getAllAnnotations() {
    return Array.from(this.annotations.values());
  }
  /**
   * 持久化
   */
  async persist() {
    try {
      const path = `${this.dataFolder}/annotations.json`;
      const annotations = Array.from(this.annotations.values());
      const data = JSON.stringify(annotations, null, 2);
      await this.app.vault.adapter.write(path, data);
    } catch (error) {
      console.error("Error persisting annotations:", error);
    }
  }
  /**
   * 生成唯一 ID
   */
  generateId() {
    return `ann-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
  }
};

// src/core/FlashcardManager.ts
var FlashcardManager = class {
  constructor(app, dataManager, plugin) {
    this.app = app;
    this.dataManager = dataManager;
    this.plugin = plugin;
    this.flashcards = /* @__PURE__ */ new Map();
    this.reviewLogs = [];
    this.dataFolder = `${this.app.vault.configDir}/plugins/learning-system/data`;
  }
  async initialize() {
    await this.loadFlashcards();
    await this.loadReviewLogs();
  }
  // ==================== 统一创建入口 ====================
  /**
   * 🆕 统一入口: 从 ContentUnit 创建闪卡
   * 适配所有场景: 右键提取、Scan、批量创建、快速生成
   */
  async createFlashcardFromUnit(unit, options) {
    const cardType = (options == null ? void 0 : options.cardType) || (unit.type === "QA" ? "qa" : "cloze");
    let flashcard;
    if (cardType === "qa" || unit.type === "QA") {
      const question = (options == null ? void 0 : options.customQuestion) || unit.content;
      const answer = (options == null ? void 0 : options.customAnswer) || unit.answer || unit.content;
      flashcard = await this.createQACard(unit.id, question, answer);
    } else {
      const text = unit.fullContext || unit.content;
      const answer = (options == null ? void 0 : options.customAnswer) || unit.content;
      const deletions = [{
        index: text.indexOf(answer),
        answer
      }];
      flashcard = await this.createClozeCard(unit.id, text, deletions);
    }
    return flashcard;
  }
  // ==================== 核心创建方法 ====================
  /**
   * 创建问答卡（唯一版本，合并了所有功能）
   */
  async createQACard(contentUnitId, question, answer, deck) {
    const contentUnit = this.dataManager.getContentUnit(contentUnitId);
    if (!contentUnit)
      throw new Error("Content unit not found");
    const card = {
      id: this.generateId(),
      type: "qa",
      sourceContentId: contentUnitId,
      sourceFile: contentUnit.source.file,
      anchorLink: contentUnit.source.anchorLink,
      front: question,
      back: answer,
      deck: deck || this.inferDeck(contentUnit.source.file),
      tags: contentUnit.metadata.tags,
      scheduling: this.initializeScheduling(),
      stats: {
        totalReviews: 0,
        correctCount: 0,
        averageTime: 0,
        difficulty: 0.5
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.flashcards.set(card.id, card);
    contentUnit.flashcardIds.push(card.id);
    await this.dataManager.saveContentUnits([contentUnit]);
    await this.persistFlashcards();
    return card;
  }
  /**
   * 创建完形填空卡（唯一版本，合并了所有功能）
   */
  async createClozeCard(contentUnitId, original, deletions) {
    const contentUnit = this.dataManager.getContentUnit(contentUnitId);
    if (!contentUnit)
      throw new Error("Content unit not found");
    const front = this.generateClozeText(original, deletions);
    const back = deletions.map((d) => d.answer);
    const card = {
      id: this.generateId(),
      type: "cloze",
      sourceContentId: contentUnitId,
      sourceFile: contentUnit.source.file,
      anchorLink: contentUnit.source.anchorLink,
      front,
      back,
      cloze: {
        original,
        deletions
      },
      deck: this.inferDeck(contentUnit.source.file),
      tags: contentUnit.metadata.tags,
      scheduling: this.initializeScheduling(),
      stats: {
        totalReviews: 0,
        correctCount: 0,
        averageTime: 0,
        difficulty: 0.5
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.flashcards.set(card.id, card);
    contentUnit.flashcardIds.push(card.id);
    await this.dataManager.saveContentUnits([contentUnit]);
    await this.persistFlashcards();
    return card;
  }
  // ==================== 查询方法 ====================
  /**
   * 获取闪卡
   */
  getFlashcard(id) {
    return this.flashcards.get(id);
  }
  /**
   * 获取所有闪卡
   */
  getAllFlashcards() {
    return Array.from(this.flashcards.values());
  }
  /**
   * 获取今日待复习的卡片
   */
  getDueCards() {
    const now = Date.now();
    return Array.from(this.flashcards.values()).filter((card) => card.scheduling.due <= now).sort((a, b) => {
      const aPriority = this.getCardPriority(a);
      const bPriority = this.getCardPriority(b);
      return bPriority - aPriority;
    });
  }
  /**
   * 获取新卡片
   */
  getNewCards() {
    return Array.from(this.flashcards.values()).filter((card) => card.scheduling.state === "new");
  }
  // ==================== 更新和删除 ====================
  /**
   * 更新卡片（复习后）
   */
  async updateCard(card) {
    this.flashcards.set(card.id, card);
    await this.persistFlashcards();
  }
  /**
   * 删除卡片
   */
  async deleteCard(id) {
    const card = this.flashcards.get(id);
    if (!card)
      return;
    const contentUnit = this.dataManager.getContentUnit(card.sourceContentId);
    if (contentUnit) {
      const index = contentUnit.flashcardIds.indexOf(id);
      if (index > -1) {
        contentUnit.flashcardIds.splice(index, 1);
        await this.dataManager.saveContentUnits([contentUnit]);
      }
    }
    this.flashcards.delete(id);
    await this.persistFlashcards();
  }
  // ==================== 复习日志 ====================
  /**
   * 记录复习日志
   */
  async logReview(log) {
    this.reviewLogs.push(log);
    if (this.reviewLogs.length > 1e3) {
      this.reviewLogs = this.reviewLogs.slice(-1e3);
    }
    await this.persistReviewLogs();
  }
  /**
   * 获取卡片的复习历史
   */
  getCardReviewHistory(cardId) {
    return this.reviewLogs.filter((log) => log.flashcardId === cardId);
  }
  // ==================== 统计 ====================
  /**
   * 获取统计数据
   */
  getStats() {
    const all = this.getAllFlashcards();
    const due = this.getDueCards();
    const newCards = this.getNewCards();
    const today = new Date().setHours(0, 0, 0, 0);
    const reviewedToday = this.reviewLogs.filter(
      (log) => log.timestamp >= today
    ).length;
    return {
      total: all.length,
      new: newCards.length,
      due: due.length,
      reviewedToday,
      totalReviews: this.reviewLogs.length
    };
  }
  // ==================== 私有工具方法 ====================
  /**
   * 加载闪卡
   */
  async loadFlashcards() {
    try {
      const path = `${this.dataFolder}/flashcards.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(path)) {
        const data = await adapter.read(path);
        const flashcards = JSON.parse(data);
        for (const card of flashcards) {
          this.flashcards.set(card.id, card);
        }
      }
    } catch (error) {
      console.error("Error loading flashcards:", error);
    }
  }
  /**
   * 加载复习日志
   */
  async loadReviewLogs() {
    try {
      const path = `${this.dataFolder}/review-logs.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(path)) {
        const data = await adapter.read(path);
        this.reviewLogs = JSON.parse(data);
      }
    } catch (error) {
      console.error("Error loading review logs:", error);
    }
  }
  /**
   * 初始化调度参数
   */
  initializeScheduling() {
    return {
      interval: 0,
      ease: 2.5,
      due: Date.now(),
      lapses: 0,
      reps: 0,
      state: "new"
    };
  }
  /**
   * 生成完形填空文本
   */
  generateClozeText(original, deletions) {
    let result = original;
    const sorted = [...deletions].sort((a, b) => b.index - a.index);
    for (const deletion of sorted) {
      const before = result.substring(0, deletion.index);
      const after = result.substring(deletion.index + deletion.answer.length);
      result = `${before}[...]${after}`;
    }
    return result;
  }
  /**
   * 推断卡组名称
   */
  inferDeck(filePath) {
    const parts = filePath.split("/");
    return parts.length > 1 ? parts[parts.length - 2] : "Default";
  }
  /**
   * 获取卡片优先级
   */
  getCardPriority(card) {
    const now = Date.now();
    const overdue = Math.max(0, now - card.scheduling.due);
    const daysOverdue = overdue / (24 * 60 * 60 * 1e3);
    if (card.scheduling.state === "new")
      return 100 + daysOverdue;
    if (card.scheduling.state === "relearning")
      return 200 + daysOverdue;
    return daysOverdue;
  }
  /**
   * 持久化闪卡
   */
  async persistFlashcards() {
    try {
      const path = `${this.dataFolder}/flashcards.json`;
      const flashcards = Array.from(this.flashcards.values());
      const data = JSON.stringify(flashcards, null, 2);
      await this.app.vault.adapter.write(path, data);
    } catch (error) {
      console.error("Error persisting flashcards:", error);
    }
  }
  /**
   * 持久化复习日志
   */
  async persistReviewLogs() {
    try {
      const path = `${this.dataFolder}/review-logs.json`;
      const data = JSON.stringify(this.reviewLogs, null, 2);
      await this.app.vault.adapter.write(path, data);
    } catch (error) {
      console.error("Error persisting review logs:", error);
    }
  }
  /**
   * 生成唯一 ID
   */
  generateId() {
    return `card-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  extractionEnabled: true,
  autoScan: false,
  defaultDeck: "Default"
};
var LearningSystemPlugin = class extends import_obsidian10.Plugin {
  async onload() {
    console.log("Loading Learning System Plugin");
    await this.loadSettings();
    this.dataManager = new DataManager(this.app, this);
    await this.dataManager.initialize();
    this.annotationManager = new AnnotationManager(this.app, this);
    await this.annotationManager.initialize();
    this.flashcardManager = new FlashcardManager(
      this.app,
      this.dataManager,
      this
    );
    await this.flashcardManager.initialize();
    this.extractionEngine = new ExtractionEngine(
      this.app,
      this.dataManager,
      this.flashcardManager
    );
    this.registerView(
      VIEW_TYPE_OVERVIEW,
      (leaf) => new OverviewView(leaf, this)
    );
    this.registerView(
      VIEW_TYPE_SIDEBAR_OVERVIEW,
      (leaf) => new SidebarOverviewView(leaf, this, false)
    );
    this.registerView(
      VIEW_TYPE_MAIN_OVERVIEW,
      (leaf) => new SidebarOverviewView(leaf, this, true)
    );
    this.registerView(
      VIEW_TYPE_REVIEW,
      (leaf) => new ReviewView(leaf, this)
    );
    this.registerView(
      VIEW_TYPE_STATS,
      (leaf) => new StatsView(leaf, this)
    );
    this.registerEvent(
      this.app.workspace.on("editor-menu", (menu, editor, view) => {
        if (view instanceof import_obsidian10.MarkdownView) {
          const file = view.file;
          if (file) {
            this.extractionEngine.registerContextMenu(menu, editor, file);
          }
        }
      })
    );
    this.addSettingTab(new SettingsTab(this.app, this));
    this.addCommands();
    this.addRibbonIcon("layout-list", "Open Learning Overview", () => {
      this.activateSidebarOverview();
    });
    this.addRibbonIcon("layers", "Start Review", () => {
      this.activateReview();
    });
    this.setupStatusBar();
    console.log("Learning System Plugin loaded");
  }
  onunload() {
    console.log("Unloading Learning System Plugin");
    const styleEl = document.getElementById("learning-overview-styles");
    if (styleEl) {
      styleEl.remove();
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  addCommands() {
    this.addCommand({
      id: "scan-current-file",
      name: "Scan current file for content",
      callback: async () => {
        const activeFile = this.app.workspace.getActiveFile();
        if (!activeFile)
          return;
        await this.extractionEngine.scanFile(activeFile);
        this.refreshOverview();
      }
    });
    this.addCommand({
      id: "scan-vault",
      name: "Scan entire vault",
      callback: async () => {
        await this.extractionEngine.scanVault();
        this.refreshOverview();
      }
    });
    this.addCommand({
      id: "open-overview",
      name: "Open Learning Overview",
      callback: () => {
        this.activateSidebarOverview();
      }
    });
    this.addCommand({
      id: "open-main-overview",
      name: "Open Learning Overview (Main View)",
      callback: async () => {
        await this.activateMainView();
      }
    });
    this.addCommand({
      id: "add-file-annotation",
      name: "Add file annotation",
      callback: async () => {
        const activeFile = this.app.workspace.getActiveFile();
        if (!activeFile)
          return;
        const { FileAnnotationModal: FileAnnotationModal2 } = await Promise.resolve().then(() => (init_AnnotationModal(), AnnotationModal_exports));
        const modal = new FileAnnotationModal2(
          this.app,
          this,
          activeFile.path,
          () => this.refreshOverview()
        );
        modal.open();
      }
    });
    this.addCommand({
      id: "start-review",
      name: "Start flashcard review",
      callback: () => {
        this.activateReview();
      }
    });
    this.addCommand({
      id: "show-stats",
      name: "Show flashcard statistics",
      callback: () => {
        this.activateStats();
      }
    });
  }
  async activateMainView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType(VIEW_TYPE_MAIN_OVERVIEW)[0];
    if (!leaf) {
      leaf = workspace.getLeaf("tab");
      await leaf.setViewState({
        type: VIEW_TYPE_MAIN_OVERVIEW,
        active: true
      });
    }
    workspace.revealLeaf(leaf);
  }
  async activateSidebarOverview() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_SIDEBAR_OVERVIEW);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getRightLeaf(false);
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_SIDEBAR_OVERVIEW,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async activateOverview() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_OVERVIEW);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getLeaf(`tab`);
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_OVERVIEW,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async activateReview() {
    const stats = this.flashcardManager.getStats();
    if (stats.due === 0) {
      new import_obsidian10.Notice("No cards due for review!");
      return;
    }
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_REVIEW);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getLeaf(true);
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_REVIEW,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async activateStats() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_STATS);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getLeaf("tab");
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_STATS,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  refreshOverview() {
    const overviewLeaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_OVERVIEW);
    overviewLeaves.forEach((leaf) => {
      const view = leaf.view;
      view.refresh();
    });
    const sidebarLeaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_SIDEBAR_OVERVIEW);
    sidebarLeaves.forEach((leaf) => {
      const view = leaf.view;
      view.refresh();
    });
    const mainLeaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_MAIN_OVERVIEW);
    mainLeaves.forEach((leaf) => {
      const view = leaf.view;
      view.refresh();
    });
  }
  setupStatusBar() {
    const statusBarItem = this.addStatusBarItem();
    statusBarItem.addClass("learning-system-status");
    const updateStatus = () => {
      const stats = this.flashcardManager.getStats();
      statusBarItem.setText(`\u{1F0CF} ${stats.due} due`);
      statusBarItem.title = `${stats.due} cards due for review
${stats.new} new cards`;
    };
    updateStatus();
    this.registerInterval(
      window.setInterval(updateStatus, 6e4)
    );
    statusBarItem.addEventListener("click", () => {
      this.activateReview();
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL2NvcmUvUXVpY2tGbGFzaGNhcmRDcmVhdG9yLnRzIiwgInNyYy91aS9GbGFzaGNhcmRDcmVhdGVNb2RhbC50cyIsICJzcmMvdWkvT3ZlcnZpZXdWaWV3LnRzIiwgInNyYy91aS9Bbm5vdGF0aW9uTW9kYWwudHMiLCAic3JjL21haW4udHMiLCAic3JjL3VpL1NldHRpbmdzVGFiLnRzIiwgInNyYy91aS9TaWRlYmFyT3ZlcnZpZXdWaWV3LnRzIiwgInNyYy91aS9SZXZpZXdWaWV3LnRzIiwgInNyYy9jb3JlL0NhcmRTY2hlZHVsZXIudHMiLCAic3JjL3VpL1N0YXRzVmlldy50cyIsICJzcmMvY29yZS9BbmFseXRpY3NFbmdpbmUudHMiLCAic3JjL2NvcmUvRGF0YU1hbmFnZXIudHMiLCAic3JjL2NvcmUvRXh0cmFjdGlvbkVuZ2luZS50cyIsICJzcmMvY29yZS9Bbm5vdGF0aW9uTWFuYWdlci50cyIsICJzcmMvY29yZS9GbGFzaGNhcmRNYW5hZ2VyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IENvbnRlbnRVbml0IH0gZnJvbSAnLi4vY29yZS9EYXRhTWFuYWdlcic7XG5pbXBvcnQgeyBBbm5vdGF0aW9uIH0gZnJvbSAnLi4vY29yZS9Bbm5vdGF0aW9uTWFuYWdlcic7XG5cbi8qKlxuICogXHU0RTAwXHU5NTJFXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXHU1REU1XHU1MTc3XHU3QzdCXG4gKi9cbmV4cG9ydCBjbGFzcyBRdWlja0ZsYXNoY2FyZENyZWF0b3Ige1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4pIHt9XG5cbiAgLyoqXG4gICAqIFx1NEVDRVx1NjNEMFx1NTNENlx1NTE4NVx1NUJCOVx1NEUwMFx1OTUyRVx1NTIxQlx1NUVGQVx1OTVFRVx1N0I1NFx1NTM2MVxuICAgKiBcdTU5ODJcdTY3OUNcdTY3MDlcdTYyNzlcdTZDRThcdUZGMENcdTRGN0ZcdTc1MjhcdTYyNzlcdTZDRThcdTRGNUNcdTRFM0FcdTdCNTRcdTY4NDhcbiAgICovXG4gIGFzeW5jIGNyZWF0ZVF1aWNrUUFDYXJkKGNvbnRlbnRVbml0OiBDb250ZW50VW5pdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24oY29udGVudFVuaXQuaWQpO1xuICAgICAgXG4gICAgICBsZXQgcXVlc3Rpb246IHN0cmluZztcbiAgICAgIGxldCBhbnN3ZXI6IHN0cmluZztcblxuICAgICAgaWYgKGFubm90YXRpb24gJiYgYW5ub3RhdGlvbi5jb250ZW50KSB7XG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1NjI3OVx1NkNFOFx1RkYwQ1x1NEY3Rlx1NzUyOFx1NjI3OVx1NkNFOFx1NTE4NVx1NUJCOVx1NEY1Q1x1NEUzQVx1N0I1NFx1Njg0OFxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTYyNzlcdTZDRThcdTY2MkZcdTU0MjZcdTY2MkZcdTk1RUVcdTk4OThcdTVGNjJcdTVGMEZcbiAgICAgICAgaWYgKHRoaXMuaXNRdWVzdGlvbihhbm5vdGF0aW9uLmNvbnRlbnQpKSB7XG4gICAgICAgICAgLy8gXHU2Mjc5XHU2Q0U4XHU2NjJGXHU5NUVFXHU5ODk4XHVGRjBDXHU3NTFGXHU2MjEwXHU5RUQ4XHU4QkE0XHU5NUVFXHU5ODk4XHVGRjBDXHU2Mjc5XHU2Q0U4XHU1MTg1XHU1QkI5XHU0RjVDXHU0RTNBXHU3QjU0XHU2ODQ4XG4gICAgICAgICAgcXVlc3Rpb24gPSB0aGlzLmdlbmVyYXRlRGVmYXVsdFF1ZXN0aW9uKGNvbnRlbnRVbml0KTtcbiAgICAgICAgICBhbnN3ZXIgPSBhbm5vdGF0aW9uLmNvbnRlbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gXHU2Mjc5XHU2Q0U4XHU0RTBEXHU2NjJGXHU5NUVFXHU5ODk4XHU1RjYyXHU1RjBGXHVGRjBDXHU3NTFGXHU2MjEwXHU5RUQ4XHU4QkE0XHU5NUVFXHU5ODk4XHVGRjBDXHU2Mjc5XHU2Q0U4XHU1MTg1XHU1QkI5XHU0RjVDXHU0RTNBXHU3QjU0XHU2ODQ4XG4gICAgICAgICAgcXVlc3Rpb24gPSB0aGlzLmdlbmVyYXRlRGVmYXVsdFF1ZXN0aW9uKGNvbnRlbnRVbml0KTtcbiAgICAgICAgICBhbnN3ZXIgPSBhbm5vdGF0aW9uLmNvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1NkNBMVx1NjcwOVx1NjI3OVx1NkNFOFx1RkYwQ1x1NEY3Rlx1NzUyOFx1OUVEOFx1OEJBNFx1NkEyMVx1NUYwRlxuICAgICAgICBxdWVzdGlvbiA9IHRoaXMuZ2VuZXJhdGVEZWZhdWx0UXVlc3Rpb24oY29udGVudFVuaXQpO1xuICAgICAgICBhbnN3ZXIgPSBjb250ZW50VW5pdC5jb250ZW50O1xuICAgICAgfVxuXG4gICAgICAvLyBcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcbiAgICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmNyZWF0ZVFBQ2FyZChcbiAgICAgICAgY29udGVudFVuaXQuaWQsXG4gICAgICAgIHF1ZXN0aW9uLFxuICAgICAgICBhbnN3ZXJcbiAgICAgICk7XG5cbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBGbGFzaGNhcmQgY3JlYXRlZCEgKFEmQSlgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgcXVpY2sgZmxhc2hjYXJkOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBGYWlsZWQgdG8gY3JlYXRlIGZsYXNoY2FyZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTRFQ0VcdTYzRDBcdTUzRDZcdTUxODVcdTVCQjlcdTRFMDBcdTk1MkVcdTUyMUJcdTVFRkFcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdTUzNjFcbiAgICogXHU4MUVBXHU1MkE4XHU4QkM2XHU1MjJCXHU1MTczXHU5NTJFXHU4QkNEXG4gICAqL1xuICBhc3luYyBjcmVhdGVRdWlja0Nsb3plQ2FyZChjb250ZW50VW5pdDogQ29udGVudFVuaXQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qga2V5d29yZHMgPSB0aGlzLmV4dHJhY3RLZXl3b3Jkcyhjb250ZW50VW5pdC5jb250ZW50KTtcbiAgICAgIFxuICAgICAgaWYgKGtleXdvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgTm8ga2V5d29yZHMgZm91bmQgZm9yIGNsb3plIGRlbGV0aW9uJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gXHU2MjdFXHU1MjMwXHU1MTczXHU5NTJFXHU4QkNEXHU1NzI4XHU2NTg3XHU2NzJDXHU0RTJEXHU3Njg0XHU0RjREXHU3RjZFXG4gICAgICBjb25zdCBkZWxldGlvbnMgPSBrZXl3b3Jkcy5tYXAoa2V5d29yZCA9PiB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gY29udGVudFVuaXQuY29udGVudC5pbmRleE9mKGtleXdvcmQud29yZCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgYW5zd2VyOiBrZXl3b3JkLndvcmRcbiAgICAgICAgfTtcbiAgICAgIH0pLmZpbHRlcihkID0+IGQuaW5kZXggIT09IC0xKTtcblxuICAgICAgaWYgKGRlbGV0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIENvdWxkIG5vdCBjcmVhdGUgY2xvemUgZGVsZXRpb25zJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gXHU1MjFCXHU1RUZBXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU1MzYxXG4gICAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5jcmVhdGVDbG96ZUNhcmQoXG4gICAgICAgIGNvbnRlbnRVbml0LmlkLFxuICAgICAgICBjb250ZW50VW5pdC5jb250ZW50LFxuICAgICAgICBkZWxldGlvbnNcbiAgICAgICk7XG5cbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBGbGFzaGNhcmQgY3JlYXRlZCEgKENsb3plIHdpdGggJHtkZWxldGlvbnMubGVuZ3RofSBibGFua3MpYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHF1aWNrIGNsb3plIGNhcmQ6JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIEZhaWxlZCB0byBjcmVhdGUgZmxhc2hjYXJkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NjY3QVx1ODBGRFx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1RkYwOFx1ODFFQVx1NTJBOFx1NTIyNFx1NjVBRFx1N0M3Qlx1NTc4Qlx1RkYwOVxuICAgKi9cbiAgYXN5bmMgY3JlYXRlU21hcnRDYXJkKGNvbnRlbnRVbml0OiBDb250ZW50VW5pdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbihjb250ZW50VW5pdC5pZCk7XG5cbiAgICAvLyBcdTU5ODJcdTY3OUNcdTY3MDlcdTk1RUVcdTk4OThcdTVGNjJcdTVGMEZcdTc2ODRcdTYyNzlcdTZDRThcdUZGMENcdTUyMUJcdTVFRkFcdTk1RUVcdTdCNTRcdTUzNjFcbiAgICBpZiAoYW5ub3RhdGlvbiAmJiB0aGlzLmlzUXVlc3Rpb24oYW5ub3RhdGlvbi5jb250ZW50KSkge1xuICAgICAgYXdhaXQgdGhpcy5jcmVhdGVRdWlja1FBQ2FyZChjb250ZW50VW5pdCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU1MTg1XHU1QkI5XHU4RjgzXHU3N0VEXHU0RTE0XHU1MzA1XHU1NDJCXHU1MTczXHU5NTJFXHU0RkUxXHU2MDZGXHVGRjBDXHU1MjFCXHU1RUZBXHU5NUVFXHU3QjU0XHU1MzYxXG4gICAgaWYgKGNvbnRlbnRVbml0LmNvbnRlbnQubGVuZ3RoIDwgMjAwKSB7XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZVF1aWNrUUFDYXJkKGNvbnRlbnRVbml0KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBcdTU5ODJcdTY3OUNcdTUxODVcdTVCQjlcdThGODNcdTk1N0ZcdUZGMENcdTUyMUJcdTVFRkFcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdTUzNjFcbiAgICBhd2FpdCB0aGlzLmNyZWF0ZVF1aWNrQ2xvemVDYXJkKGNvbnRlbnRVbml0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYyNzlcdTkxQ0ZcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcbiAgICovXG4gIGFzeW5jIGNyZWF0ZUJhdGNoQ2FyZHMoXG4gICAgY29udGVudFVuaXRzOiBDb250ZW50VW5pdFtdLFxuICAgIHR5cGU6ICdxYScgfCAnY2xvemUnIHwgJ3NtYXJ0JyA9ICdzbWFydCdcbiAgKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IG51bWJlcjsgZmFpbGVkOiBudW1iZXIgfT4ge1xuICAgIGxldCBzdWNjZXNzID0gMDtcbiAgICBsZXQgZmFpbGVkID0gMDtcblxuICAgIGZvciAoY29uc3QgdW5pdCBvZiBjb250ZW50VW5pdHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgIGNhc2UgJ3FhJzpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlUXVpY2tRQUNhcmQodW5pdCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdjbG96ZSc6XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZVF1aWNrQ2xvemVDYXJkKHVuaXQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnc21hcnQnOlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVTbWFydENhcmQodW5pdCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBzdWNjZXNzKys7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjYXJkOicsIGVycm9yKTtcbiAgICAgICAgZmFpbGVkKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzcywgZmFpbGVkIH07XG4gIH1cblxuICAvKipcbiAgICogXHU1MjI0XHU2NUFEXHU2NTg3XHU2NzJDXHU2NjJGXHU1NDI2XHU2NjJGXHU5NUVFXHU5ODk4XG4gICAqL1xuICBwcml2YXRlIGlzUXVlc3Rpb24odGV4dDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcXVlc3Rpb25Xb3JkcyA9IFsnd2hhdCcsICd3aHknLCAnaG93JywgJ3doZW4nLCAnd2hlcmUnLCAnd2hvJywgJ3doaWNoJ107XG4gICAgY29uc3QgbG93ZXJUZXh0ID0gdGV4dC50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICBcbiAgICAvLyBcdTRFRTVcdTk1RUVcdTUzRjdcdTdFRDNcdTVDM0VcbiAgICBpZiAobG93ZXJUZXh0LmVuZHNXaXRoKCc/JykpIHJldHVybiB0cnVlO1xuICAgIFxuICAgIC8vIFx1NEVFNVx1NzU5MVx1OTVFRVx1OEJDRFx1NUYwMFx1NTkzNFxuICAgIGZvciAoY29uc3Qgd29yZCBvZiBxdWVzdGlvbldvcmRzKSB7XG4gICAgICBpZiAobG93ZXJUZXh0LnN0YXJ0c1dpdGgod29yZCArICcgJykpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdTRFMkRcdTY1ODdcdTk1RUVcdTUzRTVcdTcyNzlcdTVGODFcbiAgICBpZiAodGV4dC5pbmNsdWRlcygnXHU0RUMwXHU0RTQ4JykgfHwgdGV4dC5pbmNsdWRlcygnXHU0RTNBXHU0RUMwXHU0RTQ4JykgfHwgXG4gICAgICAgIHRleHQuaW5jbHVkZXMoJ1x1NjAwRVx1NEU0OCcpIHx8IHRleHQuaW5jbHVkZXMoJ1x1NTk4Mlx1NEY1NScpIHx8XG4gICAgICAgIHRleHQuaW5jbHVkZXMoJ1x1NTQxN1x1RkYxRicpIHx8IHRleHQuaW5jbHVkZXMoJ1x1NTQ2Mlx1RkYxRicpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NzUxRlx1NjIxMFx1OUVEOFx1OEJBNFx1OTVFRVx1OTg5OFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZURlZmF1bHRRdWVzdGlvbihjb250ZW50VW5pdDogQ29udGVudFVuaXQpOiBzdHJpbmcge1xuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1NjgwN1x1OTg5OFx1RkYwQ1x1NEY3Rlx1NzUyOFx1NjgwN1x1OTg5OFx1NzUxRlx1NjIxMFx1OTVFRVx1OTg5OFxuICAgIGlmIChjb250ZW50VW5pdC5zb3VyY2UuaGVhZGluZykge1xuICAgICAgY29uc3QgaGVhZGluZyA9IGNvbnRlbnRVbml0LnNvdXJjZS5oZWFkaW5nLnJlcGxhY2UoL14jK1xccyovLCAnJyk7XG4gICAgICByZXR1cm4gYFdoYXQgaXMgdGhlIGtleSBwb2ludCBhYm91dCBcIiR7aGVhZGluZ31cIj9gO1xuICAgIH1cblxuICAgIC8vIFx1NjgzOVx1NjM2RVx1NTE4NVx1NUJCOVx1OTU3Rlx1NUVBNlx1NzUxRlx1NjIxMFx1NEUwRFx1NTQwQ1x1NzY4NFx1OTVFRVx1OTg5OFxuICAgIGlmIChjb250ZW50VW5pdC5jb250ZW50Lmxlbmd0aCA8IDUwKSB7XG4gICAgICByZXR1cm4gYFdoYXQgZG9lcyBcIiR7Y29udGVudFVuaXQuY29udGVudH1cIiBtZWFuP2A7XG4gICAgfSBlbHNlIGlmIChjb250ZW50VW5pdC5jb250ZW50Lmxlbmd0aCA8IDE1MCkge1xuICAgICAgY29uc3QgZmlyc3RXb3JkcyA9IGNvbnRlbnRVbml0LmNvbnRlbnQuc3Vic3RyaW5nKDAsIDMwKSArICcuLi4nO1xuICAgICAgcmV0dXJuIGBFeHBsYWluOiBcIiR7Zmlyc3RXb3Jkc31cImA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBgV2hhdCBhcmUgdGhlIGtleSBwb2ludHMgaW4gdGhpcyBjb250ZW50P2A7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NjNEMFx1NTNENlx1NTE3M1x1OTUyRVx1OEJDRFx1RkYwOFx1NzUyOFx1NEU4RVx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1RkYwOVxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0S2V5d29yZHModGV4dDogc3RyaW5nKTogQXJyYXk8eyB3b3JkOiBzdHJpbmc7IHNjb3JlOiBudW1iZXIgfT4ge1xuICAgIC8vIFx1NTIwNlx1OEJDRFxuICAgIGNvbnN0IHdvcmRzID0gdGV4dC5tYXRjaCgvXFxiW0EtWmEtel17Myx9XFxiL2cpIHx8IFtdO1xuICAgIFxuICAgIC8vIFx1NUUzOFx1ODlDMVx1NTA1Q1x1NzUyOFx1OEJDRFxuICAgIGNvbnN0IHN0b3BXb3JkcyA9IG5ldyBTZXQoW1xuICAgICAgJ3RoZScsICdpcycsICdhdCcsICd3aGljaCcsICdvbicsICdhJywgJ2FuJywgJ2FuZCcsICdvcicsICdidXQnLFxuICAgICAgJ2luJywgJ3dpdGgnLCAndG8nLCAnZm9yJywgJ29mJywgJ2FzJywgJ2J5JywgJ3RoaXMnLCAndGhhdCcsXG4gICAgICAnZnJvbScsICd0aGV5JywgJ3dlJywgJ3NheScsICdoZXInLCAnc2hlJywgJ2hlJywgJ3dpbGwnLCAnbXknLFxuICAgICAgJ29uZScsICdhbGwnLCAnd291bGQnLCAndGhlcmUnLCAndGhlaXInLCAnd2hhdCcsICdzbycsICd1cCcsICdvdXQnLFxuICAgICAgJ2lmJywgJ2Fib3V0JywgJ3dobycsICdnZXQnLCAnd2hpY2gnLCAnZ28nLCAnbWUnLCAnd2hlbicsICdtYWtlJyxcbiAgICAgICdjYW4nLCAnbGlrZScsICd0aW1lJywgJ25vJywgJ2p1c3QnLCAnaGltJywgJ2tub3cnLCAndGFrZScsICdwZW9wbGUnLFxuICAgICAgJ2ludG8nLCAneWVhcicsICd5b3VyJywgJ2dvb2QnLCAnc29tZScsICdjb3VsZCcsICd0aGVtJywgJ3NlZScsICdvdGhlcidcbiAgICBdKTtcblxuICAgIC8vIFx1OEJDRFx1OTg5MVx1N0VERlx1OEJBMVxuICAgIGNvbnN0IHdvcmRGcmVxID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcbiAgICB3b3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xuICAgICAgY29uc3QgbG93ZXIgPSB3b3JkLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoIXN0b3BXb3Jkcy5oYXMobG93ZXIpICYmIHdvcmQubGVuZ3RoID4gMykge1xuICAgICAgICB3b3JkRnJlcS5zZXQod29yZCwgKHdvcmRGcmVxLmdldCh3b3JkKSB8fCAwKSArIDEpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gXHU4QkExXHU3Qjk3XHU1MjA2XHU2NTcwXHVGRjA4XHU4MDAzXHU4NjUxXHU5ODkxXHU3Mzg3XHUzMDAxXHU5NTdGXHU1RUE2XHUzMDAxXHU1OTI3XHU1MTk5XHVGRjA5XG4gICAgY29uc3Qgc2NvcmVkID0gQXJyYXkuZnJvbSh3b3JkRnJlcS5lbnRyaWVzKCkpLm1hcCgoW3dvcmQsIGZyZXFdKSA9PiB7XG4gICAgICBsZXQgc2NvcmUgPSBmcmVxO1xuICAgICAgXG4gICAgICAvLyBcdTk1N0ZcdThCQ0RcdTUyQTBcdTUyMDZcbiAgICAgIGlmICh3b3JkLmxlbmd0aCA+IDgpIHNjb3JlICs9IDI7XG4gICAgICBlbHNlIGlmICh3b3JkLmxlbmd0aCA+IDYpIHNjb3JlICs9IDE7XG4gICAgICBcbiAgICAgIC8vIFx1OTk5Nlx1NUI1N1x1NkJDRFx1NTkyN1x1NTE5OVx1NTJBMFx1NTIwNlx1RkYwOFx1NTNFRlx1ODBGRFx1NjYyRlx1NEUxM1x1NjcwOVx1NTQwRFx1OEJDRFx1RkYwOVxuICAgICAgaWYgKHdvcmRbMF0gPT09IHdvcmRbMF0udG9VcHBlckNhc2UoKSkgc2NvcmUgKz0gMTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHsgd29yZCwgc2NvcmUgfTtcbiAgICB9KTtcblxuICAgIC8vIFx1NjM5Mlx1NUU4Rlx1NUU3Nlx1OEZENFx1NTZERVx1NTI0RDNcdTRFMkFcdTUxNzNcdTk1MkVcdThCQ0RcbiAgICByZXR1cm4gc2NvcmVkXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi5zY29yZSAtIGEuc2NvcmUpXG4gICAgICAuc2xpY2UoMCwgMyk7XG4gIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBDb250ZW50VW5pdCB9IGZyb20gJy4uL2NvcmUvRGF0YU1hbmFnZXInO1xuXG5leHBvcnQgY2xhc3MgRmxhc2hjYXJkQ3JlYXRlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgY29udGVudFVuaXQ6IENvbnRlbnRVbml0O1xuICBwcml2YXRlIGNhcmRUeXBlOiAncWEnIHwgJ2Nsb3plJyA9ICdxYSc7XG4gIFxuICAvLyBRJkEgXHU1QjU3XHU2QkI1XG4gIHByaXZhdGUgcXVlc3Rpb246IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIGFuc3dlcjogc3RyaW5nID0gJyc7XG4gIFxuICAvLyBDbG96ZSBcdTVCNTdcdTZCQjVcbiAgcHJpdmF0ZSBjbG96ZVRleHQ6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIHNlbGVjdGVkUmFuZ2VzOiB7IHN0YXJ0OiBudW1iZXI7IGVuZDogbnVtYmVyOyB0ZXh0OiBzdHJpbmcgfVtdID0gW107XG4gIFxuICBwcml2YXRlIG9uU2F2ZTogKCkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4sXG4gICAgY29udGVudFVuaXQ6IENvbnRlbnRVbml0LFxuICAgIG9uU2F2ZTogKCkgPT4gdm9pZFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMuY29udGVudFVuaXQgPSBjb250ZW50VW5pdDtcbiAgICB0aGlzLm9uU2F2ZSA9IG9uU2F2ZTtcbiAgICBcbiAgICAvLyBcdTlFRDhcdThCQTRcdTRGN0ZcdTc1MjhcdTUxODVcdTVCQjlcdTRGNUNcdTRFM0FcdTdCNTRcdTY4NDgvXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU2NTg3XHU2NzJDXG4gICAgdGhpcy5hbnN3ZXIgPSBjb250ZW50VW5pdC5jb250ZW50O1xuICAgIHRoaXMuY2xvemVUZXh0ID0gY29udGVudFVuaXQuY29udGVudDtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2ZsYXNoY2FyZC1jcmVhdGUtbW9kYWwnKTtcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQ3JlYXRlIEZsYXNoY2FyZCcgfSk7XG5cbiAgICAvLyBcdTY2M0VcdTc5M0FcdTZFOTBcdTUxODVcdTVCQjlcbiAgICBjb25zdCBjb250ZW50UHJldmlldyA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdjb250ZW50LXByZXZpZXcnIH0pO1xuICAgIGNvbnRlbnRQcmV2aWV3LmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1NvdXJjZSBDb250ZW50OicgfSk7XG4gICAgY29udGVudFByZXZpZXcuY3JlYXRlRWwoJ2Jsb2NrcXVvdGUnLCB7IHRleHQ6IHRoaXMuY29udGVudFVuaXQuY29udGVudCB9KTtcblxuICAgIC8vIFx1NTM2MVx1NzI0N1x1N0M3Qlx1NTc4Qlx1OTAwOVx1NjJFOVxuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5zZXROYW1lKCdDYXJkIFR5cGUnKVxuICAgICAgLnNldERlc2MoJ0Nob29zZSB0aGUgdHlwZSBvZiBmbGFzaGNhcmQnKVxuICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAuYWRkT3B0aW9uKCdxYScsICdcdUQ4M0RcdURDREQgUXVlc3Rpb24gJiBBbnN3ZXInKVxuICAgICAgICAgIC5hZGRPcHRpb24oJ2Nsb3plJywgJ1x1MjcwRlx1RkUwRiBDbG96ZSBEZWxldGlvbicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuY2FyZFR5cGUpXG4gICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2FyZFR5cGUgPSB2YWx1ZSBhcyAncWEnIHwgJ2Nsb3plJztcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaENhcmRJbnB1dHMoKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgLy8gXHU1MzYxXHU3MjQ3XHU4RjkzXHU1MTY1XHU1MzNBXHU1N0RGXHU1QkI5XHU1NjY4XG4gICAgdGhpcy5jYXJkSW5wdXRDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1pbnB1dC1jb250YWluZXInIH0pO1xuICAgIHRoaXMucmVmcmVzaENhcmRJbnB1dHMoKTtcblxuICAgIC8vIFx1NjMwOVx1OTRBRVxuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdtb2RhbC1idXR0b24tY29udGFpbmVyJyB9KTtcblxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KTtcbiAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuXG4gICAgY29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdDcmVhdGUgRmxhc2hjYXJkJyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgc2F2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc2F2ZUZsYXNoY2FyZCgpKTtcblxuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIGNhcmRJbnB1dENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSByZWZyZXNoQ2FyZElucHV0cygpIHtcbiAgICB0aGlzLmNhcmRJbnB1dENvbnRhaW5lci5lbXB0eSgpO1xuXG4gICAgaWYgKHRoaXMuY2FyZFR5cGUgPT09ICdxYScpIHtcbiAgICAgIHRoaXMucmVuZGVyUUFJbnB1dHMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW5kZXJDbG96ZUlucHV0cygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyUUFJbnB1dHMoKSB7XG4gICAgLy8gXHU5NUVFXHU5ODk4XHU4RjkzXHU1MTY1XG4gICAgbmV3IFNldHRpbmcodGhpcy5jYXJkSW5wdXRDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnUXVlc3Rpb24gKEZyb250KScpXG4gICAgICAuc2V0RGVzYygnV2hhdCBxdWVzdGlvbiBzaG91bGQgdGhpcyBjYXJkIGFzaz8nKVxuICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4ge1xuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciB5b3VyIHF1ZXN0aW9uLi4uJylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5xdWVzdGlvbilcbiAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5xdWVzdGlvbiA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB0ZXh0LmlucHV0RWwucm93cyA9IDM7XG4gICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgIH0pO1xuXG4gICAgLy8gXHU3QjU0XHU2ODQ4XHU4RjkzXHU1MTY1XG4gICAgbmV3IFNldHRpbmcodGhpcy5jYXJkSW5wdXRDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnQW5zd2VyIChCYWNrKScpXG4gICAgICAuc2V0RGVzYygnV2hhdCBpcyB0aGUgY29ycmVjdCBhbnN3ZXI/JylcbiAgICAgIC5hZGRUZXh0QXJlYSh0ZXh0ID0+IHtcbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgdGhlIGFuc3dlci4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuYW5zd2VyKVxuICAgICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFuc3dlciA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB0ZXh0LmlucHV0RWwucm93cyA9IDM7XG4gICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgIH0pO1xuXG4gICAgLy8gXHU2M0QwXHU3OTNBXHVGRjFBXHU1M0VGXHU0RUU1XHU0RjdGXHU3NTI4XHU1MzlGXHU1MTg1XHU1QkI5XG4gICAgY29uc3QgaGludCA9IHRoaXMuY2FyZElucHV0Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2lucHV0LWhpbnQnIH0pO1xuICAgIGhpbnQuY3JlYXRlRWwoJ3NtYWxsJywgeyBcbiAgICAgIHRleHQ6ICdcdUQ4M0RcdURDQTEgVGlwOiBZb3UgY2FuIHVzZSB0aGUgc291cmNlIGNvbnRlbnQgYXMgdGhlIGFuc3dlciwgb3Igd3JpdGUgeW91ciBvd24uJ1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJDbG96ZUlucHV0cygpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNhcmRJbnB1dENvbnRhaW5lcjtcblxuICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDbG96ZSBEZWxldGlvbicgfSk7XG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdTZWxlY3QgdGV4dCB0byBoaWRlIChjbG96ZSBkZWxldGlvbikuIENsaWNrIG9uIHdvcmRzIHRvIHRvZ2dsZSBzZWxlY3Rpb24uJyxcbiAgICAgIGNsczogJ2Nsb3plLWluc3RydWN0aW9uJ1xuICAgIH0pO1xuXG4gICAgLy8gXHU1M0VGXHU5MDA5XHU2MkU5XHU3Njg0XHU2NTg3XHU2NzJDXHU1MzNBXHU1N0RGXG4gICAgY29uc3QgdGV4dENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjbG96ZS10ZXh0LWNvbnRhaW5lcicgfSk7XG4gICAgdGhpcy5yZW5kZXJTZWxlY3RhYmxlVGV4dCh0ZXh0Q29udGFpbmVyKTtcblxuICAgIC8vIFx1OTAwOVx1NEUyRFx1NzY4NFx1NTIyMFx1OTY2NFx1OTg3OVx1NTIxN1x1ODg2OFxuICAgIGlmICh0aGlzLnNlbGVjdGVkUmFuZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkTGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzZWxlY3RlZC1kZWxldGlvbnMnIH0pO1xuICAgICAgc2VsZWN0ZWRMaXN0LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1NlbGVjdGVkIERlbGV0aW9uczonIH0pO1xuICAgICAgXG4gICAgICB0aGlzLnNlbGVjdGVkUmFuZ2VzLmZvckVhY2goKHJhbmdlLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBpdGVtID0gc2VsZWN0ZWRMaXN0LmNyZWF0ZURpdih7IGNsczogJ2RlbGV0aW9uLWl0ZW0nIH0pO1xuICAgICAgICBpdGVtLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHtpbmRleCArIDF9LiBgIH0pO1xuICAgICAgICBpdGVtLmNyZWF0ZVNwYW4oeyBcbiAgICAgICAgICB0ZXh0OiByYW5nZS50ZXh0LFxuICAgICAgICAgIGNsczogJ2RlbGV0aW9uLXRleHQnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVtb3ZlQnRuID0gaXRlbS5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgIHRleHQ6ICdcdTAwRDcnLFxuICAgICAgICAgIGNsczogJ3JlbW92ZS1kZWxldGlvbi1idG4nXG4gICAgICAgIH0pO1xuICAgICAgICByZW1vdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFJhbmdlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgIHRoaXMucmVmcmVzaENhcmRJbnB1dHMoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTk4ODRcdTg5QzhcbiAgICBjb25zdCBwcmV2aWV3ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2Nsb3plLXByZXZpZXcnIH0pO1xuICAgIHByZXZpZXcuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnUHJldmlldzonIH0pO1xuICAgIHByZXZpZXcuY3JlYXRlRGl2KHsgXG4gICAgICB0ZXh0OiB0aGlzLmdlbmVyYXRlQ2xvemVQcmV2aWV3KCksXG4gICAgICBjbHM6ICdwcmV2aWV3LXRleHQnXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclNlbGVjdGFibGVUZXh0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCB3b3JkcyA9IHRoaXMuY2xvemVUZXh0LnNwbGl0KC8oXFxzKykvKTsgLy8gXHU0RkREXHU3NTU5XHU3QTdBXHU2ODNDXG4gICAgbGV0IGN1cnJlbnRJbmRleCA9IDA7XG5cbiAgICB3b3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xuICAgICAgY29uc3Qgd29yZFN0YXJ0ID0gY3VycmVudEluZGV4O1xuICAgICAgY29uc3Qgd29yZEVuZCA9IGN1cnJlbnRJbmRleCArIHdvcmQubGVuZ3RoO1xuXG4gICAgICBpZiAod29yZC50cmltKCkpIHtcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU5MDA5XHU0RTJEXG4gICAgICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkUmFuZ2VzLnNvbWUoXG4gICAgICAgICAgcmFuZ2UgPT4gcmFuZ2Uuc3RhcnQgPT09IHdvcmRTdGFydCAmJiByYW5nZS5lbmQgPT09IHdvcmRFbmRcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBzcGFuID0gY29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgIHRleHQ6IHdvcmQsXG4gICAgICAgICAgY2xzOiBpc1NlbGVjdGVkID8gJ2Nsb3plLXdvcmQgc2VsZWN0ZWQnIDogJ2Nsb3plLXdvcmQnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNwYW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy50b2dnbGVXb3JkU2VsZWN0aW9uKHdvcmRTdGFydCwgd29yZEVuZCwgd29yZCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiB3b3JkIH0pO1xuICAgICAgfVxuXG4gICAgICBjdXJyZW50SW5kZXggPSB3b3JkRW5kO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB0b2dnbGVXb3JkU2VsZWN0aW9uKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCB0ZXh0OiBzdHJpbmcpIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuc2VsZWN0ZWRSYW5nZXMuZmluZEluZGV4KFxuICAgICAgcmFuZ2UgPT4gcmFuZ2Uuc3RhcnQgPT09IHN0YXJ0ICYmIHJhbmdlLmVuZCA9PT0gZW5kXG4gICAgKTtcblxuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAvLyBcdTUzRDZcdTZEODhcdTkwMDlcdTYyRTlcbiAgICAgIHRoaXMuc2VsZWN0ZWRSYW5nZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU2REZCXHU1MkEwXHU5MDA5XHU2MkU5XG4gICAgICB0aGlzLnNlbGVjdGVkUmFuZ2VzLnB1c2goeyBzdGFydCwgZW5kLCB0ZXh0IH0pO1xuICAgICAgLy8gXHU2MzA5XHU0RjREXHU3RjZFXHU2MzkyXHU1RThGXG4gICAgICB0aGlzLnNlbGVjdGVkUmFuZ2VzLnNvcnQoKGEsIGIpID0+IGEuc3RhcnQgLSBiLnN0YXJ0KTtcbiAgICB9XG5cbiAgICB0aGlzLnJlZnJlc2hDYXJkSW5wdXRzKCk7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlQ2xvemVQcmV2aWV3KCk6IHN0cmluZyB7XG4gICAgbGV0IHByZXZpZXcgPSB0aGlzLmNsb3plVGV4dDtcbiAgICBjb25zdCBzb3J0ZWQgPSBbLi4udGhpcy5zZWxlY3RlZFJhbmdlc10uc29ydCgoYSwgYikgPT4gYi5zdGFydCAtIGEuc3RhcnQpO1xuXG4gICAgZm9yIChjb25zdCByYW5nZSBvZiBzb3J0ZWQpIHtcbiAgICAgIGNvbnN0IGJlZm9yZSA9IHByZXZpZXcuc3Vic3RyaW5nKDAsIHJhbmdlLnN0YXJ0KTtcbiAgICAgIGNvbnN0IGFmdGVyID0gcHJldmlldy5zdWJzdHJpbmcocmFuZ2UuZW5kKTtcbiAgICAgIHByZXZpZXcgPSBgJHtiZWZvcmV9Wy4uLl0ke2FmdGVyfWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByZXZpZXc7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNhdmVGbGFzaGNhcmQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0aGlzLmNhcmRUeXBlID09PSAncWEnKSB7XG4gICAgICAgIC8vIFx1OUE4Q1x1OEJDMVx1OEY5M1x1NTE2NVxuICAgICAgICBpZiAoIXRoaXMucXVlc3Rpb24udHJpbSgpKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGVudGVyIGEgcXVlc3Rpb24nKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmFuc3dlci50cmltKCkpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2UgZW50ZXIgYW4gYW5zd2VyJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU5NUVFXHU3QjU0XHU1MzYxXG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuY3JlYXRlUUFDYXJkKFxuICAgICAgICAgIHRoaXMuY29udGVudFVuaXQuaWQsXG4gICAgICAgICAgdGhpcy5xdWVzdGlvbixcbiAgICAgICAgICB0aGlzLmFuc3dlclxuICAgICAgICApO1xuXG4gICAgICAgIG5ldyBOb3RpY2UoJ1EmQSBmbGFzaGNhcmQgY3JlYXRlZCEnKTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gXHU5QThDXHU4QkMxXHU4RjkzXHU1MTY1XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUmFuZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBzZWxlY3QgYXQgbGVhc3Qgb25lIHdvcmQgdG8gaGlkZScpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1NTM2MVxuICAgICAgICBjb25zdCBkZWxldGlvbnMgPSB0aGlzLnNlbGVjdGVkUmFuZ2VzLm1hcChyYW5nZSA9PiAoe1xuICAgICAgICAgIGluZGV4OiByYW5nZS5zdGFydCxcbiAgICAgICAgICBhbnN3ZXI6IHJhbmdlLnRleHRcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuY3JlYXRlQ2xvemVDYXJkKFxuICAgICAgICAgIHRoaXMuY29udGVudFVuaXQuaWQsXG4gICAgICAgICAgdGhpcy5jbG96ZVRleHQsXG4gICAgICAgICAgZGVsZXRpb25zXG4gICAgICAgICk7XG5cbiAgICAgICAgbmV3IE5vdGljZSgnQ2xvemUgZmxhc2hjYXJkIGNyZWF0ZWQhJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMub25TYXZlKCk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZmxhc2hjYXJkOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ0Vycm9yIGNyZWF0aW5nIGZsYXNoY2FyZCcpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAuZmxhc2hjYXJkLWNyZWF0ZS1tb2RhbCB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIG1heC13aWR0aDogNjAwcHg7XG4gICAgICB9XG5cbiAgICAgIC5jb250ZW50LXByZXZpZXcge1xuICAgICAgICBtYXJnaW46IDIwcHggMDtcbiAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC5jb250ZW50LXByZXZpZXcgaDMge1xuICAgICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5jb250ZW50LXByZXZpZXcgYmxvY2txdW90ZSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkLWlucHV0LWNvbnRhaW5lciB7XG4gICAgICAgIG1hcmdpbjogMjBweCAwO1xuICAgICAgfVxuXG4gICAgICAuaW5wdXQtaGludCB7XG4gICAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC8qIENsb3plIFx1NjgzN1x1NUYwRiAqL1xuICAgICAgLmNsb3plLWluc3RydWN0aW9uIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtdGV4dC1jb250YWluZXIge1xuICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuODtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgY3Vyc29yOiBkZWZhdWx0O1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtd29yZCB7XG4gICAgICAgIHBhZGRpbmc6IDJweCA0cHg7XG4gICAgICAgIG1hcmdpbjogMCAxcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLmNsb3plLXdvcmQ6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLmNsb3plLXdvcmQuc2VsZWN0ZWQge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3RlZC1kZWxldGlvbnMge1xuICAgICAgICBtYXJnaW46IDE1cHggMDtcbiAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3RlZC1kZWxldGlvbnMgaDQge1xuICAgICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5kZWxldGlvbi1pdGVtIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDZweCAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICAgIH1cblxuICAgICAgLmRlbGV0aW9uLXRleHQge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLnJlbW92ZS1kZWxldGlvbi1idG4ge1xuICAgICAgICBwYWRkaW5nOiAycHggOHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yKTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxO1xuICAgICAgfVxuXG4gICAgICAucmVtb3ZlLWRlbGV0aW9uLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICB9XG5cbiAgICAgIC5jbG96ZS1wcmV2aWV3IHtcbiAgICAgICAgbWFyZ2luOiAxNXB4IDA7XG4gICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtcHJldmlldyBoNCB7XG4gICAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLnByZXZpZXctdGV4dCB7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjtcbiAgICAgIH1cblxuICAgICAgLm1vZGFsLWJ1dHRvbi1jb250YWluZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5tb2RhbC1idXR0b24tY29udGFpbmVyIGJ1dHRvbiB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn0iLCAiLy8gb3ZlcnZpZXcgVmlldy50c1xuaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlLCBNZW51LCBNb2RhbCwgQXBwLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IENvbnRlbnRVbml0IH0gZnJvbSAnLi4vY29yZS9EYXRhTWFuYWdlcic7XG5pbXBvcnQgeyBRdWlja0ZsYXNoY2FyZENyZWF0b3IgfSBmcm9tICcuLi9jb3JlL1F1aWNrRmxhc2hjYXJkQ3JlYXRvcic7XG5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfT1ZFUlZJRVcgPSAnbGVhcm5pbmctc3lzdGVtLW92ZXJ2aWV3JztcblxuZXhwb3J0IGNsYXNzIE92ZXJ2aWV3VmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbjtcbi8vICAgcHJpdmF0ZSBjb250ZW50RWw6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGdyb3VwQnk6ICdmaWxlJyB8ICd0YWcnIHwgJ2RhdGUnID0gJ2ZpbGUnO1xuICBwcml2YXRlIHNlYXJjaFF1ZXJ5OiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBxdWlja0NyZWF0b3I6IFF1aWNrRmxhc2hjYXJkQ3JlYXRvcjtcbiAgcHJpdmF0ZSBiYXRjaE1vZGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBzZWxlY3RlZFVuaXRJZHM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4pIHtcbiAgICBzdXBlcihsZWFmKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLnF1aWNrQ3JlYXRvciA9IG5ldyBRdWlja0ZsYXNoY2FyZENyZWF0b3IocGx1Z2luKTtcbiAgfVxuXG4gIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFZJRVdfVFlQRV9PVkVSVklFVztcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdMZWFybmluZyBPdmVydmlldyc7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdsYXlvdXQtbGlzdCc7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgXG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcblxuICAgIHRoaXMuY3JlYXRlVG9vbGJhcihjb250YWluZXIpO1xuICAgIHRoaXMuY29udGVudEVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2xlYXJuaW5nLXN5c3RlbS1jb250ZW50JyB9KTtcbiAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgYXN5bmMgb25DbG9zZSgpIHt9XG5cbiAgLy8gXHU2REZCXHU1MkEwXHU1MjMwIE92ZXJ2aWV3VmlldyBcdTdDN0JcdTRFMkRcbnNjcm9sbFRvRmlsZShmaWxlUGF0aDogc3RyaW5nKSB7XG4gICAgLy8gdGhpcy5zZWxlY3RlZEZpbGUgPSBmaWxlUGF0aDsgLy8gXHU1OTgyXHU2NzlDXHU0RjYwXHU2NzA5XHU4RkQ5XHU0RTJBXHU1QzVFXHU2MDI3XG4gICAgXG4gICAgLy8gXHU2RURBXHU1MkE4XHU1MjMwXHU1QkY5XHU1RTk0XHU3Njg0XHU2NTg3XHU0RUY2XHU3RUM0XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBmaWxlR3JvdXBzID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvckFsbCgnLmZpbGUtZ3JvdXAnKTtcbiAgICAgIGZpbGVHcm91cHMuZm9yRWFjaCgoZ3JvdXApID0+IHtcbiAgICAgICAgY29uc3QgaGVhZGVyID0gZ3JvdXAucXVlcnlTZWxlY3RvcignLmdyb3VwLWhlYWRlcicpO1xuICAgICAgICBpZiAoaGVhZGVyPy50ZXh0Q29udGVudD8uaW5jbHVkZXMoZmlsZVBhdGguc3BsaXQoJy8nKS5wb3AoKT8ucmVwbGFjZSgnLm1kJywgJycpIHx8ICcnKSkge1xuICAgICAgICAgIGdyb3VwLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSwgMTAwKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlVG9vbGJhcihjb250YWluZXI6IEVsZW1lbnQpIHtcbiAgICBjb25zdCB0b29sYmFyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2xlYXJuaW5nLXN5c3RlbS10b29sYmFyJyB9KTtcblxuICAgIGNvbnN0IHNlYXJjaENvbnRhaW5lciA9IHRvb2xiYXIuY3JlYXRlRGl2KHsgY2xzOiAnc2VhcmNoLWNvbnRhaW5lcicgfSk7XG4gICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzZWFyY2hDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgcGxhY2Vob2xkZXI6ICdTZWFyY2ggY29udGVudC4uLicsXG4gICAgICBjbHM6ICdzZWFyY2gtaW5wdXQnXG4gICAgfSk7XG5cbiAgICBzZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICB0aGlzLnNlYXJjaFF1ZXJ5ID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBncm91cENvbnRhaW5lciA9IHRvb2xiYXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtY29udGFpbmVyJyB9KTtcbiAgICBncm91cENvbnRhaW5lci5jcmVhdGVTcGFuKHsgdGV4dDogJ0dyb3VwIGJ5OiAnLCBjbHM6ICdncm91cC1sYWJlbCcgfSk7XG5cbiAgICBjb25zdCBncm91cFNlbGVjdCA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZUVsKCdzZWxlY3QnLCB7IGNsczogJ2dyb3VwLXNlbGVjdCcgfSk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IFtcbiAgICAgIHsgdmFsdWU6ICdmaWxlJywgbGFiZWw6ICdGaWxlJyB9LFxuICAgICAgeyB2YWx1ZTogJ3RhZycsIGxhYmVsOiAnVGFnJyB9LFxuICAgICAgeyB2YWx1ZTogJ2RhdGUnLCBsYWJlbDogJ0RhdGUnIH1cbiAgICBdO1xuXG4gICAgb3B0aW9ucy5mb3JFYWNoKG9wdCA9PiB7XG4gICAgICBjb25zdCBvcHRpb24gPSBncm91cFNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywge1xuICAgICAgICB2YWx1ZTogb3B0LnZhbHVlLFxuICAgICAgICB0ZXh0OiBvcHQubGFiZWxcbiAgICAgIH0pO1xuICAgICAgaWYgKG9wdC52YWx1ZSA9PT0gdGhpcy5ncm91cEJ5KSB7XG4gICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBncm91cFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgdGhpcy5ncm91cEJ5ID0gKGUudGFyZ2V0IGFzIEhUTUxTZWxlY3RFbGVtZW50KS52YWx1ZSBhcyBhbnk7XG4gICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9KTtcblxuICAgIC8vIFx1NjI3OVx1OTFDRlx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVx1RkYwOFx1NzlGQlx1NTIzMFx1NTI0RFx1OTc2Mlx1RkYwOVxuICAgIGNvbnN0IGJhdGNoQWN0aW9ucyA9IHRvb2xiYXIuY3JlYXRlRGl2KHsgY2xzOiAnYmF0Y2gtYWN0aW9ucy1vdmVydmlldycgfSk7XG4gICAgXG4gICAgY29uc3QgYmF0Y2hNb2RlQnRuID0gYmF0Y2hBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiB0aGlzLmJhdGNoTW9kZSA/ICdcdTI3MTMgRG9uZScgOiAnXHUyNjEwIEJhdGNoIE1vZGUnLFxuICAgICAgY2xzOiAnYmF0Y2gtbW9kZS1idG4nXG4gICAgfSk7XG4gICAgYmF0Y2hNb2RlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5iYXRjaE1vZGUgPSAhdGhpcy5iYXRjaE1vZGU7XG4gICAgICBpZiAoIXRoaXMuYmF0Y2hNb2RlKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLmJhdGNoTW9kZSkge1xuICAgICAgLy8gXHU1MTY4XHU5MDA5L1x1NTNENlx1NkQ4OFx1NTE2OFx1OTAwOVx1NjMwOVx1OTRBRVxuICAgICAgY29uc3Qgc2VsZWN0QWxsQnRuID0gYmF0Y2hBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIHRleHQ6IHRoaXMuaXNBbGxTZWxlY3RlZCgpID8gJ1x1MjYxMSBEZXNlbGVjdCBBbGwnIDogJ1x1MjYxMCBTZWxlY3QgQWxsJyxcbiAgICAgICAgY2xzOiAnc2VsZWN0LWFsbC1idG4nXG4gICAgICB9KTtcbiAgICAgIHNlbGVjdEFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy50b2dnbGVTZWxlY3RBbGwoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBiYXRjaERlbGV0ZUJ0biA9IGJhdGNoQWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICB0ZXh0OiBgXHVEODNEXHVEREQxXHVGRTBGIERlbGV0ZSAoJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSlgLFxuICAgICAgICBjbHM6ICdiYXRjaC1kZWxldGUtYnRuJ1xuICAgICAgfSk7XG4gICAgICBiYXRjaERlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5iYXRjaERlbGV0ZU5vdGVzKCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgYmF0Y2hDcmVhdGVCdG4gPSBiYXRjaEFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogYFx1MjZBMSBDcmVhdGUgQ2FyZHMgKCR7dGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZX0pYCxcbiAgICAgICAgY2xzOiAnYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bidcbiAgICAgIH0pO1xuICAgICAgYmF0Y2hDcmVhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuYmF0Y2hDcmVhdGVGbGFzaGNhcmRzKCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYmF0Y2hDcmVhdGVBbGxCdG4gPSBiYXRjaEFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogJ1x1MjZBMSBCYXRjaCBDcmVhdGUgQ2FyZHMnLFxuICAgICAgICBjbHM6ICdiYXRjaC1jcmVhdGUtYnRuJ1xuICAgICAgfSk7XG4gICAgICBiYXRjaENyZWF0ZUFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc2hvd0JhdGNoQ3JlYXRlTW9kYWwoKSk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVmcmVzaEJ0biA9IHRvb2xiYXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdcdTI3RjMnLFxuICAgICAgY2xzOiAncmVmcmVzaC1idG4nXG4gICAgfSk7XG4gICAgcmVmcmVzaEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMucmVmcmVzaCgpKTtcblxuICAgIGNvbnN0IHN0YXRzID0gdG9vbGJhci5jcmVhdGVEaXYoeyBjbHM6ICdzdGF0cy1jb250YWluZXInIH0pO1xuICAgIGNvbnN0IHRvdGFsQ291bnQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRBbGxDb250ZW50VW5pdHMoKS5sZW5ndGg7XG4gICAgc3RhdHMuY3JlYXRlU3Bhbih7IHRleHQ6IGBUb3RhbDogJHt0b3RhbENvdW50fWAsIGNsczogJ3N0YXRzLXRleHQnIH0pO1xuICB9XG5cbiAgYXN5bmMgcmVmcmVzaCgpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgbGV0IHVuaXRzID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0QWxsQ29udGVudFVuaXRzKCk7XG5cbiAgICBpZiAodGhpcy5zZWFyY2hRdWVyeSkge1xuICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLnNlYXJjaFF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+XG4gICAgICAgIHVuaXQuY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSB8fFxuICAgICAgICB1bml0LnNvdXJjZS5maWxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5zb21lKHRhZyA9PiB0YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkpXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh1bml0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7XG4gICAgICAgIHRleHQ6IHRoaXMuc2VhcmNoUXVlcnkgPyAnTm8gcmVzdWx0cyBmb3VuZCcgOiAnTm8gY29udGVudCBleHRyYWN0ZWQgeWV0JyxcbiAgICAgICAgY2xzOiAnZW1wdHktc3RhdGUnXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRoaXMuZ3JvdXBCeSkge1xuICAgICAgY2FzZSAnZmlsZSc6XG4gICAgICAgIHRoaXMucmVuZGVyQnlGaWxlKHVuaXRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0YWcnOlxuICAgICAgICB0aGlzLnJlbmRlckJ5VGFnKHVuaXRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgdGhpcy5yZW5kZXJCeURhdGUodW5pdHMpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckJ5RmlsZSh1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIGNvbnN0IGdyb3VwZWQgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudFVuaXRbXT4oKTtcblxuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICBpZiAoIWdyb3VwZWQuaGFzKHVuaXQuc291cmNlLmZpbGUpKSB7XG4gICAgICAgIGdyb3VwZWQuc2V0KHVuaXQuc291cmNlLmZpbGUsIFtdKTtcbiAgICAgIH1cbiAgICAgIGdyb3VwZWQuZ2V0KHVuaXQuc291cmNlLmZpbGUpIS5wdXNoKHVuaXQpO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc29ydGVkRmlsZXMgPSBBcnJheS5mcm9tKGdyb3VwZWQua2V5cygpKS5zb3J0KCk7XG4gICAgc29ydGVkRmlsZXMuZm9yRWFjaChmaWxlUGF0aCA9PiB7XG4gICAgICBjb25zdCBmaWxlVW5pdHMgPSBncm91cGVkLmdldChmaWxlUGF0aCkhO1xuICAgICAgdGhpcy5yZW5kZXJGaWxlR3JvdXAoZmlsZVBhdGgsIGZpbGVVbml0cyk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckZpbGVHcm91cChmaWxlUGF0aDogc3RyaW5nLCB1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIGNvbnN0IGdyb3VwQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnZmlsZS1ncm91cCcgfSk7XG5cbiAgICBjb25zdCBoZWFkZXIgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdncm91cC1oZWFkZXInIH0pO1xuICAgIGNvbnN0IGZpbGVOYW1lID0gZmlsZVBhdGguc3BsaXQoJy8nKS5wb3AoKT8ucmVwbGFjZSgnLm1kJywgJycpIHx8IGZpbGVQYXRoO1xuICAgIGNvbnN0IHRpdGxlRWwgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtdGl0bGUnIH0pO1xuICAgIHRpdGxlRWwuY3JlYXRlU3Bhbih7IHRleHQ6ICdcdUQ4M0RcdURDQzQgJywgY2xzOiAnZ3JvdXAtaWNvbicgfSk7XG4gICAgdGl0bGVFbC5jcmVhdGVTcGFuKHsgdGV4dDogZmlsZU5hbWUsIGNsczogJ2dyb3VwLW5hbWUnIH0pO1xuXG4gICAgaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHt1bml0cy5sZW5ndGh9YCwgY2xzOiAnY291bnQtYmFkZ2UnIH0pO1xuXG4gICAgY29uc3QgY29sbGFwc2VCdG4gPSBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6ICdcdTI1QkMnLCBjbHM6ICdjb2xsYXBzZS1idG4nIH0pO1xuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU2NTg3XHU0RUY2XHU2Mjc5XHU2Q0U4XG4gICAgY29uc3QgZmlsZUFubm90YXRpb25zID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0RmlsZUFubm90YXRpb25zKGZpbGVQYXRoKTtcbiAgICBpZiAoZmlsZUFubm90YXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGZpbGVBbm5vdGF0aW9uRGlzcGxheSA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IFxuICAgICAgICBjbHM6ICdmaWxlLWFubm90YXRpb24tZGlzcGxheScgXG4gICAgICB9KTtcbiAgICAgIGZpbGVBbm5vdGF0aW9ucy5mb3JFYWNoKGFubiA9PiB7XG4gICAgICAgIGNvbnN0IGFubkVsID0gZmlsZUFubm90YXRpb25EaXNwbGF5LmNyZWF0ZURpdih7IGNsczogJ2ZpbGUtYW5ub3RhdGlvbi1pdGVtJyB9KTtcbiAgICAgICAgYW5uRWwuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogJ1x1RDgzRFx1RENDQyAnIH0pO1xuICAgICAgICBhbm5FbC5jcmVhdGVTcGFuKHsgdGV4dDogYW5uLmNvbnRlbnQgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50Q29udGFpbmVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtY29udGVudCcgfSk7XG4gICAgdW5pdHMuZm9yRWFjaCh1bml0ID0+IHtcbiAgICAgIHRoaXMucmVuZGVyQ29udGVudFVuaXQoY29udGVudENvbnRhaW5lciwgdW5pdCk7XG4gICAgfSk7XG5cbiAgICBsZXQgaXNDb2xsYXBzZWQgPSBmYWxzZTtcbiAgICBjb2xsYXBzZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgaXNDb2xsYXBzZWQgPSAhaXNDb2xsYXBzZWQ7XG4gICAgICBjb250ZW50Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBpc0NvbGxhcHNlZCA/ICdub25lJyA6ICdibG9jayc7XG4gICAgICBjb2xsYXBzZUJ0bi50ZXh0Q29udGVudCA9IGlzQ29sbGFwc2VkID8gJ1x1MjVCNicgOiAnXHUyNUJDJztcbiAgICB9KTtcblxuICAgIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSkub3BlbkZpbGUoZmlsZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckNvbnRlbnRVbml0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0KSB7XG4gICAgY29uc3QgY2FyZCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjb250ZW50LWNhcmQnIH0pO1xuXG4gICAgLy8gXHU2Mjc5XHU5MUNGXHU5MDA5XHU2MkU5XHU2QTIxXHU1RjBGXHVGRjFBXHU2REZCXHU1MkEwY2hlY2tib3hcbiAgICBpZiAodGhpcy5iYXRjaE1vZGUpIHtcbiAgICAgIGNvbnN0IGNoZWNrYm94ID0gY2FyZC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgIGNsczogJ2JhdGNoLWNoZWNrYm94J1xuICAgICAgfSk7XG4gICAgICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdW5pdC1pZCcsIHVuaXQuaWQpO1xuICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRoaXMuc2VsZWN0ZWRVbml0SWRzLmhhcyh1bml0LmlkKTtcbiAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCkge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmFkZCh1bml0LmlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5kZWxldGUodW5pdC5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVCYXRjaEJ1dHRvbnMoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRlbnRBcmVhID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLWNvbnRlbnQnIH0pO1xuICAgIGNvbnN0IHR5cGVJY29uID0gdGhpcy5nZXRUeXBlSWNvbih1bml0LnR5cGUpO1xuICAgIGNvbnRlbnRBcmVhLmNyZWF0ZVNwYW4oeyB0ZXh0OiB0eXBlSWNvbiArICcgJywgY2xzOiAndHlwZS1pY29uJyB9KTtcbiAgICBcbiAgICBjb25zdCBjb250ZW50VGV4dCA9IGNvbnRlbnRBcmVhLmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IHVuaXQuY29udGVudCwgXG4gICAgICBjbHM6ICdjb250ZW50LXRleHQgY2xpY2thYmxlLWNvbnRlbnQnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHU3MEI5XHU1MUZCXHU1MTg1XHU1QkI5XHU1QzU1XHU1RjAwXHU2Mjc5XHU2Q0U4XHU4RjkzXHU1MTY1XG4gICAgY29udGVudFRleHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMuc2hvd0Fubm90YXRpb25JbnB1dChjYXJkLCB1bml0LCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKT8uY29udGVudCk7XG4gICAgfSk7XG5cbiAgICBpZiAodW5pdC5hbm5vdGF0aW9uSWQpIHtcbiAgICAgIGNvbnRlbnRBcmVhLmNyZWF0ZVNwYW4oe1xuICAgICAgICB0ZXh0OiAnXHVEODNEXHVEQ0REJyxcbiAgICAgICAgY2xzOiAnYW5ub3RhdGlvbi1iYWRnZSBoYXMtYW5ub3RhdGlvbicsXG4gICAgICAgIGF0dHI6IHsgdGl0bGU6ICdIYXMgYW5ub3RhdGlvbicgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHVuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnRlbnRBcmVhLmNyZWF0ZVNwYW4oe1xuICAgICAgICB0ZXh0OiAnXHVEODNDXHVEQ0NGJyxcbiAgICAgICAgY2xzOiAnZmxhc2hjYXJkLWJhZGdlJyxcbiAgICAgICAgYXR0cjogeyB0aXRsZTogYCR7dW5pdC5mbGFzaGNhcmRJZHMubGVuZ3RofSBmbGFzaGNhcmQocylgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1NjYzRVx1NzkzQVx1NjI3OVx1NkNFOFx1NTE4NVx1NUJCOVxuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKTtcbiAgICBpZiAoYW5ub3RhdGlvbikge1xuICAgICAgY29uc3QgYW5ub3RhdGlvbkRpc3BsYXkgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ2Fubm90YXRpb24tZGlzcGxheScgfSk7XG4gICAgICBcbiAgICAgIGlmIChhbm5vdGF0aW9uLmJhZGdlKSB7XG4gICAgICAgIGNvbnN0IGJhZGdlID0gYW5ub3RhdGlvbkRpc3BsYXkuY3JlYXRlU3Bhbih7XG4gICAgICAgICAgdGV4dDogYW5ub3RhdGlvbi5iYWRnZS50ZXh0LFxuICAgICAgICAgIGNsczogJ2Fubm90YXRpb24tYmFkZ2UtZGlzcGxheSdcbiAgICAgICAgfSk7XG4gICAgICAgIGJhZGdlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGFubm90YXRpb24uYmFkZ2UuY29sb3I7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGFubm90YXRpb25Db250ZW50ID0gYW5ub3RhdGlvbkRpc3BsYXkuY3JlYXRlRGl2KHsgXG4gICAgICAgIGNsczogJ2Fubm90YXRpb24tY29udGVudC1kaXNwbGF5J1xuICAgICAgfSk7XG4gICAgICBhbm5vdGF0aW9uQ29udGVudC5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0FDICcgfSk7XG4gICAgICBhbm5vdGF0aW9uQ29udGVudC5jcmVhdGVTcGFuKHsgdGV4dDogYW5ub3RhdGlvbi5jb250ZW50IH0pO1xuICAgICAgXG4gICAgICAvLyBcdTY1RjZcdTk1RjRcdTYyMzNcbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IGFubm90YXRpb25EaXNwbGF5LmNyZWF0ZURpdih7IGNsczogJ2Fubm90YXRpb24tdGltZXN0YW1wJyB9KTtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShhbm5vdGF0aW9uLm1ldGFkYXRhLmNyZWF0ZWRBdCk7XG4gICAgICB0aW1lc3RhbXAudGV4dENvbnRlbnQgPSBkYXRlLnRvTG9jYWxlU3RyaW5nKCk7XG4gICAgICBcbiAgICAgIC8vIFx1NzBCOVx1NTFGQlx1NjI3OVx1NkNFOFx1NEU1Rlx1NTNFRlx1NEVFNVx1N0YxNlx1OEY5MVxuICAgICAgYW5ub3RhdGlvbkRpc3BsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLnNob3dBbm5vdGF0aW9uSW5wdXQoY2FyZCwgdW5pdCwgYW5ub3RhdGlvbi5jb250ZW50KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IG1ldGFBcmVhID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLW1ldGEnIH0pO1xuXG4gICAgaWYgKHVuaXQubWV0YWRhdGEudGFncy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCB0YWdzQ29udGFpbmVyID0gbWV0YUFyZWEuY3JlYXRlU3Bhbih7IGNsczogJ3RhZ3MtY29udGFpbmVyJyB9KTtcbiAgICAgIHVuaXQubWV0YWRhdGEudGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgIHRhZ3NDb250YWluZXIuY3JlYXRlU3Bhbih7IHRleHQ6IHRhZywgY2xzOiAndGFnJyB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh1bml0LnNvdXJjZS5oZWFkaW5nKSB7XG4gICAgICBtZXRhQXJlYS5jcmVhdGVTcGFuKHtcbiAgICAgICAgdGV4dDogYFx1RDgzRFx1RENDRCAke3VuaXQuc291cmNlLmhlYWRpbmd9YCxcbiAgICAgICAgY2xzOiAnaGVhZGluZy1pbmZvJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgYWN0aW9uc0FyZWEgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ2NhcmQtYWN0aW9ucycgfSk7XG5cbiAgICBjb25zdCBqdW1wQnRuID0gYWN0aW9uc0FyZWEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdcdTIxOTcnLFxuICAgICAgY2xzOiAnYWN0aW9uLWJ0biBqdW1wLWJ0bicsXG4gICAgICBhdHRyOiB7IHRpdGxlOiAnSnVtcCB0byBzb3VyY2UnIH1cbiAgICB9KTtcbiAgICBqdW1wQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBhd2FpdCB0aGlzLmp1bXBUb1NvdXJjZSh1bml0KTtcbiAgICB9KTtcblxuICAgIC8vIFx1NEUwMFx1OTUyRVx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1NjMwOVx1OTRBRVx1N0VDNFxuICAgIGNvbnN0IGZsYXNoY2FyZEdyb3VwID0gYWN0aW9uc0FyZWEuY3JlYXRlRGl2KHsgY2xzOiAnZmxhc2hjYXJkLWJ0bi1ncm91cCcgfSk7XG5cbiAgICAvLyBcdTY2N0FcdTgwRkRcdTUyMUJcdTVFRkFcdUZGMDhcdTRFM0JcdTYzMDlcdTk0QUVcdUZGMDlcbiAgICBjb25zdCBxdWlja0NhcmRCdG4gPSBmbGFzaGNhcmRHcm91cC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1x1MjZBMScsXG4gICAgICBjbHM6ICdhY3Rpb24tYnRuIHF1aWNrLWNhcmQtYnRuJyxcbiAgICAgIGF0dHI6IHsgdGl0bGU6ICdRdWljayBjcmVhdGUgZmxhc2hjYXJkIChzbWFydCknIH1cbiAgICB9KTtcbiAgICBxdWlja0NhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGF3YWl0IHRoaXMucXVpY2tDcmVhdG9yLmNyZWF0ZVNtYXJ0Q2FyZCh1bml0KTtcbiAgICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICAgIH0pO1xuXG4gICAgLy8gXHU0RTBCXHU2MkM5XHU4M0RDXHU1MzU1XHU2MzA5XHU5NEFFXG4gICAgY29uc3QgbW9yZUNhcmRCdG4gPSBmbGFzaGNhcmRHcm91cC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1x1MjVCQycsXG4gICAgICBjbHM6ICdhY3Rpb24tYnRuIG1vcmUtY2FyZC1idG4nLFxuICAgICAgYXR0cjogeyB0aXRsZTogJ01vcmUgZmxhc2hjYXJkIG9wdGlvbnMnIH1cbiAgICB9KTtcbiAgICBtb3JlQ2FyZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5zaG93Rmxhc2hjYXJkTWVudShlLCB1bml0KTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGFjdGlvbnNBcmVhLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnXHVEODNEXHVEREQxJyxcbiAgICAgIGNsczogJ2FjdGlvbi1idG4gZGVsZXRlLWJ0bicsXG4gICAgICBhdHRyOiB7IHRpdGxlOiAnRGVsZXRlJyB9XG4gICAgfSk7XG4gICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBhd2FpdCB0aGlzLmRlbGV0ZUNvbnRlbnRVbml0KHVuaXQpO1xuICAgIH0pO1xuXG4gICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnNob3dDb250ZXh0TWVudShlLCB1bml0KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyQnlUYWcodW5pdHM6IENvbnRlbnRVbml0W10pIHtcbiAgICBjb25zdCBncm91cGVkID0gbmV3IE1hcDxzdHJpbmcsIENvbnRlbnRVbml0W10+KCk7XG5cbiAgICB1bml0cy5mb3JFYWNoKHVuaXQgPT4ge1xuICAgICAgaWYgKHVuaXQubWV0YWRhdGEudGFncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKCFncm91cGVkLmhhcygnVW50YWdnZWQnKSkge1xuICAgICAgICAgIGdyb3VwZWQuc2V0KCdVbnRhZ2dlZCcsIFtdKTtcbiAgICAgICAgfVxuICAgICAgICBncm91cGVkLmdldCgnVW50YWdnZWQnKSEucHVzaCh1bml0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgICAgaWYgKCFncm91cGVkLmhhcyh0YWcpKSB7XG4gICAgICAgICAgICBncm91cGVkLnNldCh0YWcsIFtdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZ3JvdXBlZC5nZXQodGFnKSEucHVzaCh1bml0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBzb3J0ZWRUYWdzID0gQXJyYXkuZnJvbShncm91cGVkLmtleXMoKSkuc29ydCgpO1xuICAgIHNvcnRlZFRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgY29uc3QgdGFnVW5pdHMgPSBncm91cGVkLmdldCh0YWcpITtcbiAgICAgIHRoaXMucmVuZGVyVGFnR3JvdXAodGFnLCB0YWdVbml0cyk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclRhZ0dyb3VwKHRhZzogc3RyaW5nLCB1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIGNvbnN0IGdyb3VwQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAndGFnLWdyb3VwJyB9KTtcblxuICAgIGNvbnN0IGhlYWRlciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLWhlYWRlcicgfSk7XG4gICAgY29uc3QgdGl0bGVFbCA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdncm91cC10aXRsZScgfSk7XG4gICAgdGl0bGVFbC5jcmVhdGVTcGFuKHsgdGV4dDogJ1x1RDgzQ1x1REZGN1x1RkUwRiAnLCBjbHM6ICdncm91cC1pY29uJyB9KTtcbiAgICB0aXRsZUVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiB0YWcsIGNsczogJ2dyb3VwLW5hbWUnIH0pO1xuXG4gICAgaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHt1bml0cy5sZW5ndGh9YCwgY2xzOiAnY291bnQtYmFkZ2UnIH0pO1xuXG4gICAgY29uc3QgY29sbGFwc2VCdG4gPSBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6ICdcdTI1QkMnLCBjbHM6ICdjb2xsYXBzZS1idG4nIH0pO1xuXG4gICAgY29uc3QgY29udGVudENvbnRhaW5lciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLWNvbnRlbnQnIH0pO1xuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICB0aGlzLnJlbmRlckNvbnRlbnRVbml0KGNvbnRlbnRDb250YWluZXIsIHVuaXQpO1xuICAgIH0pO1xuXG4gICAgbGV0IGlzQ29sbGFwc2VkID0gZmFsc2U7XG4gICAgY29sbGFwc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGlzQ29sbGFwc2VkID0gIWlzQ29sbGFwc2VkO1xuICAgICAgY29udGVudENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gaXNDb2xsYXBzZWQgPyAnbm9uZScgOiAnYmxvY2snO1xuICAgICAgY29sbGFwc2VCdG4udGV4dENvbnRlbnQgPSBpc0NvbGxhcHNlZCA/ICdcdTI1QjYnIDogJ1x1MjVCQyc7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckJ5RGF0ZSh1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIGNvbnN0IGdyb3VwZWQgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudFVuaXRbXT4oKTtcblxuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodW5pdC5tZXRhZGF0YS5jcmVhdGVkQXQpO1xuICAgICAgY29uc3QgZGF0ZUtleSA9IGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XG4gICAgICBcbiAgICAgIGlmICghZ3JvdXBlZC5oYXMoZGF0ZUtleSkpIHtcbiAgICAgICAgZ3JvdXBlZC5zZXQoZGF0ZUtleSwgW10pO1xuICAgICAgfVxuICAgICAgZ3JvdXBlZC5nZXQoZGF0ZUtleSkhLnB1c2godW5pdCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBzb3J0ZWREYXRlcyA9IEFycmF5LmZyb20oZ3JvdXBlZC5rZXlzKCkpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShiKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhKS5nZXRUaW1lKCk7XG4gICAgfSk7XG5cbiAgICBzb3J0ZWREYXRlcy5mb3JFYWNoKGRhdGUgPT4ge1xuICAgICAgY29uc3QgZGF0ZVVuaXRzID0gZ3JvdXBlZC5nZXQoZGF0ZSkhO1xuICAgICAgdGhpcy5yZW5kZXJEYXRlR3JvdXAoZGF0ZSwgZGF0ZVVuaXRzKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyRGF0ZUdyb3VwKGRhdGU6IHN0cmluZywgdW5pdHM6IENvbnRlbnRVbml0W10pIHtcbiAgICBjb25zdCBncm91cENvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2RhdGUtZ3JvdXAnIH0pO1xuXG4gICAgY29uc3QgaGVhZGVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtaGVhZGVyJyB9KTtcbiAgICBjb25zdCB0aXRsZUVsID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLXRpdGxlJyB9KTtcbiAgICB0aXRsZUVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnXHVEODNEXHVEQ0M1ICcsIGNsczogJ2dyb3VwLWljb24nIH0pO1xuICAgIHRpdGxlRWwuY3JlYXRlU3Bhbih7IHRleHQ6IGRhdGUsIGNsczogJ2dyb3VwLW5hbWUnIH0pO1xuXG4gICAgaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHt1bml0cy5sZW5ndGh9YCwgY2xzOiAnY291bnQtYmFkZ2UnIH0pO1xuXG4gICAgY29uc3QgY29sbGFwc2VCdG4gPSBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6ICdcdTI1QkMnLCBjbHM6ICdjb2xsYXBzZS1idG4nIH0pO1xuXG4gICAgY29uc3QgY29udGVudENvbnRhaW5lciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLWNvbnRlbnQnIH0pO1xuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICB0aGlzLnJlbmRlckNvbnRlbnRVbml0KGNvbnRlbnRDb250YWluZXIsIHVuaXQpO1xuICAgIH0pO1xuXG4gICAgbGV0IGlzQ29sbGFwc2VkID0gZmFsc2U7XG4gICAgY29sbGFwc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGlzQ29sbGFwc2VkID0gIWlzQ29sbGFwc2VkO1xuICAgICAgY29udGVudENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gaXNDb2xsYXBzZWQgPyAnbm9uZScgOiAnYmxvY2snO1xuICAgICAgY29sbGFwc2VCdG4udGV4dENvbnRlbnQgPSBpc0NvbGxhcHNlZCA/ICdcdTI1QjYnIDogJ1x1MjVCQyc7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHNob3dBbm5vdGF0aW9uSW5wdXQoY2FyZDogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0LCBleGlzdGluZ1RleHQ/OiBzdHJpbmcpIHtcbiAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTVERjJcdTdFQ0ZcdTY3MDlcdThGOTNcdTUxNjVcdTY4NDZcdTVDNTVcdTVGMDBcbiAgICBsZXQgaW5wdXRDb250YWluZXIgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5hbm5vdGF0aW9uLWlucHV0LWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xuICAgIFxuICAgIGlmIChpbnB1dENvbnRhaW5lcikge1xuICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1REYyXHU1QzU1XHU1RjAwXHVGRjBDXHU1MjE5XHU2Mjk4XHU1M0UwXG4gICAgICBpbnB1dENvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBcdTUyMUJcdTVFRkFcdThGOTNcdTUxNjVcdTUzM0FcdTU3REZcbiAgICBpbnB1dENvbnRhaW5lciA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnYW5ub3RhdGlvbi1pbnB1dC1jb250YWluZXInIH0pO1xuXG4gICAgY29uc3QgdGV4dGFyZWEgPSBpbnB1dENvbnRhaW5lci5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICBjbHM6ICdhbm5vdGF0aW9uLXRleHRhcmVhJyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnQWRkIGNvbW1lbnQuLi4nXG4gICAgfSk7XG4gICAgdGV4dGFyZWEudmFsdWUgPSBleGlzdGluZ1RleHQgfHwgJyc7XG4gICAgdGV4dGFyZWEucm93cyA9IDM7XG5cbiAgICAvLyBcdTYzMDlcdTk0QUVcdTUzM0FcdTU3REZcdUZGMDhcdTdCODBcdTUzMTZcdTcyNDhcdUZGMDlcbiAgICBjb25zdCBidXR0b25BcmVhID0gaW5wdXRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnYW5ub3RhdGlvbi1idXR0b25zJyB9KTtcblxuICAgIGlmIChleGlzdGluZ1RleHQpIHtcbiAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGJ1dHRvbkFyZWEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogJ0RlbGV0ZScsXG4gICAgICAgIGNsczogJ2Fubm90YXRpb24tZGVsZXRlLWJ0bidcbiAgICAgIH0pO1xuICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk7XG4gICAgICAgIGlmIChhbm5vdGF0aW9uKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZGVsZXRlQW5ub3RhdGlvbihhbm5vdGF0aW9uLmlkKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIGRlbGV0ZWQnKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkFyZWEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdTYXZlJyxcbiAgICAgIGNsczogJ2Fubm90YXRpb24tc2F2ZS1idG4nXG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHU0RkREXHU1QjU4XHU1MUZEXHU2NTcwXG4gICAgY29uc3Qgc2F2ZUFubm90YXRpb24gPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXh0ID0gdGV4dGFyZWEudmFsdWUudHJpbSgpO1xuICAgICAgaWYgKCF0ZXh0KSB7XG4gICAgICAgIGlucHV0Q29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChhbm5vdGF0aW9uKSB7XG4gICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU3M0IwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIudXBkYXRlQW5ub3RhdGlvbihhbm5vdGF0aW9uLmlkLCB7XG4gICAgICAgICAgICBjb250ZW50OiB0ZXh0XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NUIwXHU2Mjc5XHU2Q0U4XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuYWRkQ29udGVudEFubm90YXRpb24oXG4gICAgICAgICAgICB1bml0LmlkLFxuICAgICAgICAgICAgdGV4dFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBhbm5vdGF0aW9uOicsIGVycm9yKTtcbiAgICAgICAgbmV3IE5vdGljZSgnRXJyb3Igc2F2aW5nIGFubm90YXRpb24nKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgc2F2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNhdmVBbm5vdGF0aW9uKTtcblxuICAgIC8vIFx1NjUyRlx1NjMwMSBDdHJsK0VudGVyIFx1NUZFQlx1NjM3N1x1OTUyRVx1NEZERFx1NUI1OFxuICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmIChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHNhdmVBbm5vdGF0aW9uKCk7XG4gICAgICB9XG4gICAgICAvLyBFc2MgXHU5NTJFXHU1MTczXHU5NUVEXG4gICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaW5wdXRDb250YWluZXIucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBcdTgxRUFcdTUyQThcdTgwNUFcdTcxMjZcbiAgICB0ZXh0YXJlYS5mb2N1cygpO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG93Rmxhc2hjYXJkTWVudShlOiBNb3VzZUV2ZW50LCB1bml0OiBDb250ZW50VW5pdCkge1xuICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1MjZBMSBTbWFydCBjcmVhdGUnKVxuICAgICAgICAuc2V0SWNvbignemFwJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMucXVpY2tDcmVhdG9yLmNyZWF0ZVNtYXJ0Q2FyZCh1bml0KTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1RDgzRFx1RENERCBDcmVhdGUgUSZBIGNhcmQnKVxuICAgICAgICAuc2V0SWNvbignbWVzc2FnZS1zcXVhcmUnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5xdWlja0NyZWF0b3IuY3JlYXRlUXVpY2tRQUNhcmQodW5pdCk7XG4gICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdTI3MEZcdUZFMEYgQ3JlYXRlIENsb3plIGNhcmQnKVxuICAgICAgICAuc2V0SWNvbignZWRpdCcpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnF1aWNrQ3JlYXRvci5jcmVhdGVRdWlja0Nsb3plQ2FyZCh1bml0KTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdUQ4M0NcdURGQTggQ3VzdG9tIGNhcmQuLi4nKVxuICAgICAgICAuc2V0SWNvbignc2V0dGluZ3MnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBGbGFzaGNhcmRDcmVhdGVNb2RhbCB9ID0gYXdhaXQgaW1wb3J0KCcuL0ZsYXNoY2FyZENyZWF0ZU1vZGFsJyk7XG4gICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgRmxhc2hjYXJkQ3JlYXRlTW9kYWwoXG4gICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLFxuICAgICAgICAgICAgdW5pdCxcbiAgICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChlKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2hvd0JhdGNoQ3JlYXRlTW9kYWwoKSB7XG4gICAgY29uc3QgdW5pdHMgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRBbGxDb250ZW50VW5pdHMoKTtcbiAgICBcbiAgICAvLyBcdThGQzdcdTZFRTRcdTYzODlcdTVERjJcdTdFQ0ZcdTY3MDlcdTk1RUFcdTUzNjFcdTc2ODRcdTUxODVcdTVCQjlcbiAgICBjb25zdCB1bml0c1dpdGhvdXRDYXJkcyA9IHVuaXRzLmZpbHRlcih1ID0+IHUuZmxhc2hjYXJkSWRzLmxlbmd0aCA9PT0gMCk7XG4gICAgXG4gICAgaWYgKHVuaXRzV2l0aG91dENhcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnQWxsIGNvbnRlbnQgYWxyZWFkeSBoYXMgZmxhc2hjYXJkcyEnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtb2RhbCA9IG5ldyBCYXRjaENyZWF0ZU1vZGFsKFxuICAgICAgdGhpcy5hcHAsXG4gICAgICB0aGlzLnBsdWdpbixcbiAgICAgIHRoaXMucXVpY2tDcmVhdG9yLFxuICAgICAgdW5pdHNXaXRob3V0Q2FyZHMsXG4gICAgICAoKSA9PiB0aGlzLnJlZnJlc2goKVxuICAgICk7XG4gICAgbW9kYWwub3BlbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBpc0FsbFNlbGVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHVuaXRzID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0QWxsQ29udGVudFVuaXRzKCk7XG4gICAgLy8gXHU1RTk0XHU3NTI4XHU2NDFDXHU3RDIyXHU4RkM3XHU2RUU0XG4gICAgbGV0IGZpbHRlcmVkVW5pdHMgPSB1bml0cztcbiAgICBpZiAodGhpcy5zZWFyY2hRdWVyeSkge1xuICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLnNlYXJjaFF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgICBmaWx0ZXJlZFVuaXRzID0gdW5pdHMuZmlsdGVyKHVuaXQgPT5cbiAgICAgICAgdW5pdC5jb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgIHVuaXQuc291cmNlLmZpbGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkgfHxcbiAgICAgICAgdW5pdC5tZXRhZGF0YS50YWdzLnNvbWUodGFnID0+IHRhZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSlcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBmaWx0ZXJlZFVuaXRzLmxlbmd0aCA+IDAgJiYgdGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZSA9PT0gZmlsdGVyZWRVbml0cy5sZW5ndGg7XG4gIH1cblxuICBwcml2YXRlIHRvZ2dsZVNlbGVjdEFsbCgpIHtcbiAgICBjb25zdCB1bml0cyA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldEFsbENvbnRlbnRVbml0cygpO1xuICAgIC8vIFx1NUU5NFx1NzUyOFx1NjQxQ1x1N0QyMlx1OEZDN1x1NkVFNFxuICAgIGxldCBmaWx0ZXJlZFVuaXRzID0gdW5pdHM7XG4gICAgaWYgKHRoaXMuc2VhcmNoUXVlcnkpIHtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5zZWFyY2hRdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgICAgZmlsdGVyZWRVbml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+XG4gICAgICAgIHVuaXQuY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSB8fFxuICAgICAgICB1bml0LnNvdXJjZS5maWxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5zb21lKHRhZyA9PiB0YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkpXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzQWxsU2VsZWN0ZWQoKSkge1xuICAgICAgLy8gXHU1M0Q2XHU2RDg4XHU1MTY4XHU5MDA5XG4gICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5jbGVhcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTUxNjhcdTkwMDlcbiAgICAgIGZpbHRlcmVkVW5pdHMuZm9yRWFjaCh1bml0ID0+IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuYWRkKHVuaXQuaWQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlQmF0Y2hCdXR0b25zKCk7XG4gICAgdGhpcy51cGRhdGVDaGVja2JveGVzKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUNoZWNrYm94ZXMoKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICBjb25zdCBjaGVja2JveGVzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXRjaC1jaGVja2JveCcpIGFzIE5vZGVMaXN0T2Y8SFRNTElucHV0RWxlbWVudD47XG4gICAgXG4gICAgY2hlY2tib3hlcy5mb3JFYWNoKGNoZWNrYm94ID0+IHtcbiAgICAgIGNvbnN0IHVuaXRJZCA9IGNoZWNrYm94LmdldEF0dHJpYnV0ZSgnZGF0YS11bml0LWlkJyk7XG4gICAgICBpZiAodW5pdElkKSB7XG4gICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0aGlzLnNlbGVjdGVkVW5pdElkcy5oYXModW5pdElkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQmF0Y2hCdXR0b25zKCkge1xuICAgIGNvbnN0IHRvb2xiYXIgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy5sZWFybmluZy1zeXN0ZW0tdG9vbGJhcicpIGFzIEhUTUxFbGVtZW50O1xuICAgIGlmICh0b29sYmFyKSB7XG4gICAgICBjb25zdCBiYXRjaEFjdGlvbnMgPSB0b29sYmFyLnF1ZXJ5U2VsZWN0b3IoJy5iYXRjaC1hY3Rpb25zLW92ZXJ2aWV3JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAoYmF0Y2hBY3Rpb25zKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdEFsbEJ0biA9IGJhdGNoQWN0aW9ucy5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0LWFsbC1idG4nKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gYmF0Y2hBY3Rpb25zLnF1ZXJ5U2VsZWN0b3IoJy5iYXRjaC1kZWxldGUtYnRuJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGNyZWF0ZUJ0biA9IGJhdGNoQWN0aW9ucy5xdWVyeVNlbGVjdG9yKCcuYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBcbiAgICAgICAgaWYgKHNlbGVjdEFsbEJ0bikge1xuICAgICAgICAgIHNlbGVjdEFsbEJ0bi50ZXh0Q29udGVudCA9IHRoaXMuaXNBbGxTZWxlY3RlZCgpID8gJ1x1MjYxMSBEZXNlbGVjdCBBbGwnIDogJ1x1MjYxMCBTZWxlY3QgQWxsJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGRlbGV0ZUJ0bikge1xuICAgICAgICAgIGRlbGV0ZUJ0bi50ZXh0Q29udGVudCA9IGBcdUQ4M0RcdURERDFcdUZFMEYgRGVsZXRlICgke3RoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemV9KWA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChjcmVhdGVCdG4pIHtcbiAgICAgICAgICBjcmVhdGVCdG4udGV4dENvbnRlbnQgPSBgXHUyNkExIENyZWF0ZSBDYXJkcyAoJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSlgO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBiYXRjaERlbGV0ZU5vdGVzKCkge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgUGxlYXNlIHNlbGVjdCBub3RlcyB0byBkZWxldGUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWNvbmZpcm0oYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSBzZWxlY3RlZCBub3Rlcz9gKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBzdWNjZXNzID0gMDtcbiAgICBsZXQgZmFpbGVkID0gMDtcblxuICAgIGZvciAoY29uc3QgdW5pdElkIG9mIHRoaXMuc2VsZWN0ZWRVbml0SWRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5kZWxldGVDb250ZW50VW5pdCh1bml0SWQpO1xuICAgICAgICBzdWNjZXNzKys7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBub3RlOicsIGVycm9yKTtcbiAgICAgICAgZmFpbGVkKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICBuZXcgTm90aWNlKGBcdTI3MDUgRGVsZXRlZCAke3N1Y2Nlc3N9IG5vdGVzJHtmYWlsZWQgPiAwID8gYCwgJHtmYWlsZWR9IGZhaWxlZGAgOiAnJ31gKTtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYmF0Y2hDcmVhdGVGbGFzaGNhcmRzKCkge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgUGxlYXNlIHNlbGVjdCBub3RlcyB0byBjcmVhdGUgZmxhc2hjYXJkcycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHVuaXRzID0gQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkVW5pdElkcylcbiAgICAgIC5tYXAoaWQgPT4gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoaWQpKVxuICAgICAgLmZpbHRlcih1ID0+IHUgIT09IHVuZGVmaW5lZCAmJiB1LmZsYXNoY2FyZElkcy5sZW5ndGggPT09IDApIGFzIENvbnRlbnRVbml0W107XG5cbiAgICBpZiAodW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgU2VsZWN0ZWQgbm90ZXMgYWxyZWFkeSBoYXZlIGZsYXNoY2FyZHMnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtb2RhbCA9IG5ldyBCYXRjaENyZWF0ZU1vZGFsKFxuICAgICAgdGhpcy5hcHAsXG4gICAgICB0aGlzLnBsdWdpbixcbiAgICAgIHRoaXMucXVpY2tDcmVhdG9yLFxuICAgICAgdW5pdHMsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgfVxuICAgICk7XG4gICAgbW9kYWwub3BlbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBqdW1wVG9Tb3VyY2UodW5pdDogQ29udGVudFVuaXQpIHtcbiAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHVuaXQuc291cmNlLmZpbGUpO1xuICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcblxuICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XG4gICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcblxuICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShJdGVtVmlldyk7XG4gICAgaWYgKHZpZXcpIHtcbiAgICAgIGNvbnN0IGVkaXRvciA9ICh2aWV3IGFzIGFueSkuZWRpdG9yO1xuICAgICAgaWYgKGVkaXRvcikge1xuICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHsgbGluZTogdW5pdC5zb3VyY2UucG9zaXRpb24ubGluZSwgY2g6IDAgfSk7XG4gICAgICAgIGVkaXRvci5zY3JvbGxJbnRvVmlldyh7XG4gICAgICAgICAgZnJvbTogeyBsaW5lOiB1bml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogMCB9LFxuICAgICAgICAgIHRvOiB7IGxpbmU6IHVuaXQuc291cmNlLnBvc2l0aW9uLmxpbmUsIGNoOiAwIH1cbiAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBlZGl0b3Iuc2V0U2VsZWN0aW9uKFxuICAgICAgICAgICAgeyBsaW5lOiB1bml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogMCB9LFxuICAgICAgICAgICAgeyBsaW5lOiB1bml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogOTk5IH1cbiAgICAgICAgICApO1xuICAgICAgICB9LCAxMDApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGVsZXRlQ29udGVudFVuaXQodW5pdDogQ29udGVudFVuaXQpIHtcbiAgICBjb25zdCBjb25maXJtZWQgPSBhd2FpdCB0aGlzLmNvbmZpcm1EZWxldGUodW5pdCk7XG4gICAgaWYgKCFjb25maXJtZWQpIHJldHVybjtcblxuICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmRlbGV0ZUNvbnRlbnRVbml0KHVuaXQuaWQpO1xuICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBjb25maXJtRGVsZXRlKHVuaXQ6IENvbnRlbnRVbml0KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBjb25zdCBtb2RhbCA9IG5ldyBDb25maXJtTW9kYWwoXG4gICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAnRGVsZXRlIGNvbnRlbnQnLFxuICAgICAgICBgQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIGNvbnRlbnQ/XFxuXFxuXCIke3VuaXQuY29udGVudC5zdWJzdHJpbmcoMCwgNTApfS4uLlwiYCxcbiAgICAgICAgKCkgPT4gcmVzb2x2ZSh0cnVlKSxcbiAgICAgICAgKCkgPT4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICk7XG4gICAgICBtb2RhbC5vcGVuKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHNob3dDb250ZXh0TWVudShlOiBNb3VzZUV2ZW50LCB1bml0OiBDb250ZW50VW5pdCkge1xuICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ0p1bXAgdG8gc291cmNlJylcbiAgICAgICAgLnNldEljb24oJ2Fycm93LXJpZ2h0JylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5qdW1wVG9Tb3VyY2UodW5pdCkpXG4gICAgKTtcblxuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKTtcbiAgICBcbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZShhbm5vdGF0aW9uID8gJ0VkaXQgYW5ub3RhdGlvbicgOiAnQWRkIGFubm90YXRpb24nKVxuICAgICAgICAuc2V0SWNvbigncGVuY2lsJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNhcmQgPSAoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJy5jb250ZW50LWNhcmQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICBpZiAoY2FyZCkge1xuICAgICAgICAgICAgdGhpcy5zaG93QW5ub3RhdGlvbklucHV0KGNhcmQsIHVuaXQsIGFubm90YXRpb24/LmNvbnRlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdTI2QTEgUXVpY2sgY3JlYXRlIGZsYXNoY2FyZCcpXG4gICAgICAgIC5zZXRJY29uKCd6YXAnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5xdWlja0NyZWF0b3IuY3JlYXRlU21hcnRDYXJkKHVuaXQpO1xuICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnQ3JlYXRlIFEmQSBjYXJkJylcbiAgICAgICAgLnNldEljb24oJ21lc3NhZ2Utc3F1YXJlJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMucXVpY2tDcmVhdG9yLmNyZWF0ZVF1aWNrUUFDYXJkKHVuaXQpO1xuICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnQ3JlYXRlIENsb3plIGNhcmQnKVxuICAgICAgICAuc2V0SWNvbignZWRpdCcpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnF1aWNrQ3JlYXRvci5jcmVhdGVRdWlja0Nsb3plQ2FyZCh1bml0KTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ0N1c3RvbSBmbGFzaGNhcmQuLi4nKVxuICAgICAgICAuc2V0SWNvbignc2V0dGluZ3MnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBGbGFzaGNhcmRDcmVhdGVNb2RhbCB9ID0gYXdhaXQgaW1wb3J0KCcuL0ZsYXNoY2FyZENyZWF0ZU1vZGFsJyk7XG4gICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgRmxhc2hjYXJkQ3JlYXRlTW9kYWwoXG4gICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLFxuICAgICAgICAgICAgdW5pdCxcbiAgICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnVmlldyBTdGF0aXN0aWNzJylcbiAgICAgICAgLnNldEljb24oJ2Jhci1jaGFydCcpXG4gICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5hY3RpdmF0ZVN0YXRzKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnRGVsZXRlJylcbiAgICAgICAgLnNldEljb24oJ3RyYXNoJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5kZWxldGVDb250ZW50VW5pdCh1bml0KSlcbiAgICApO1xuXG4gICAgbWVudS5zaG93QXRNb3VzZUV2ZW50KGUpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRUeXBlSWNvbih0eXBlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGljb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ2hpZ2hsaWdodCc6ICdcdTI3MjgnLFxuICAgICAgJ2JvbGQnOiAnKionLFxuICAgICAgJ3RhZyc6ICdcdUQ4M0NcdURGRjcnLFxuICAgICAgJ2N1c3RvbSc6ICdcdTJCNTAnXG4gICAgfTtcbiAgICByZXR1cm4gaWNvbnNbdHlwZV0gfHwgJ1x1MjAyMic7XG4gIH1cblxuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgLyogXHU1REU1XHU1MTc3XHU2ODBGXHU2ODM3XHU1RjBGICovXG4gICAgICAubGVhcm5pbmctc3lzdGVtLXRvb2xiYXIge1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zZWFyY2gtY29udGFpbmVyIHsgZGlzcGxheTogZmxleDsgfVxuXG4gICAgICAuc2VhcmNoLWlucHV0IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgcGFkZGluZzogNnB4IDEwcHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtY29udGFpbmVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC1sYWJlbCB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLXNlbGVjdCB7XG4gICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgfVxuXG4gICAgICAucmVmcmVzaC1idG4ge1xuICAgICAgICBwYWRkaW5nOiA0cHggMTJweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgfVxuXG4gICAgICAucmVmcmVzaC1idG46aG92ZXIgeyBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTsgfVxuXG4gICAgICAuc3RhdHMtY29udGFpbmVyIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTUxODVcdTVCQjlcdTUzM0FcdTU3REZcdTY4MzdcdTVGMEYgKi9cbiAgICAgIC5sZWFybmluZy1zeXN0ZW0tY29udGVudCB7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICB9XG5cbiAgICAgIC5lbXB0eS1zdGF0ZSB7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBwYWRkaW5nOiA0MHB4IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5maWxlLWdyb3VwLCAudGFnLWdyb3VwLCAuZGF0ZS1ncm91cCB7IG1hcmdpbi1ib3R0b206IDIwcHg7IH1cblxuICAgICAgLmdyb3VwLWhlYWRlciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtaGVhZGVyOmhvdmVyIHsgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7IH1cblxuICAgICAgLmdyb3VwLXRpdGxlIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWljb24geyBtYXJnaW4tcmlnaHQ6IDRweDsgfVxuXG4gICAgICAuY291bnQtYmFkZ2Uge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIHBhZGRpbmc6IDJweCA4cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuY29sbGFwc2UtYnRuIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTY1ODdcdTRFRjZcdTYyNzlcdTZDRThcdTY2M0VcdTc5M0EgKi9cbiAgICAgIC5maWxlLWFubm90YXRpb24tZGlzcGxheSB7XG4gICAgICAgIG1hcmdpbjogOHB4IDAgMTJweCAwO1xuICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnktYWx0KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1hbm5vdGF0aW9uLWl0ZW0ge1xuICAgICAgICBwYWRkaW5nOiA0cHggMDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1hbm5vdGF0aW9uLWl0ZW0gc3Ryb25nIHsgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTsgfVxuXG4gICAgICAvKiBcdTUxODVcdTVCQjlcdTUzNjFcdTcyNDdcdTY4MzdcdTVGMEYgKi9cbiAgICAgIC5ncm91cC1jb250ZW50IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIHBhZGRpbmctbGVmdDogOHB4O1xuICAgICAgfVxuXG4gICAgICAuY29udGVudC1jYXJkIHtcbiAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuXG4gICAgICAuY29udGVudC1jYXJkOmhvdmVyIHtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1jb250ZW50IHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgIH1cblxuICAgICAgLnR5cGUtaWNvbiB7IGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsgfVxuXG4gICAgICAuY29udGVudC10ZXh0IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgICAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICAgICAgfVxuXG4gICAgICAuY2xpY2thYmxlLWNvbnRlbnQge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICBwYWRkaW5nOiA0cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIH1cblxuICAgICAgLmNsaWNrYWJsZS1jb250ZW50OmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1iYWRnZSwgLmZsYXNoY2FyZC1iYWRnZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBtYXJnaW4tbGVmdDogNHB4O1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1iYWRnZS5oYXMtYW5ub3RhdGlvbiB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTYyNzlcdTZDRThcdTY2M0VcdTc5M0FcdTY4MzdcdTVGMEYgKi9cbiAgICAgIC5hbm5vdGF0aW9uLWRpc3BsYXkge1xuICAgICAgICBtYXJnaW46IDEwcHggMDtcbiAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnktYWx0KTtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWRpc3BsYXk6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgICAgYm9yZGVyLWxlZnQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWNvbnRlbnQtZGlzcGxheSB7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tY29udGVudC1kaXNwbGF5IHN0cm9uZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tdGltZXN0YW1wIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjhlbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZmFpbnQpO1xuICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tYmFkZ2UtZGlzcGxheSB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgcGFkZGluZzogM3B4IDEwcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC8qIFx1NTE4NVx1ODA1NFx1NjI3OVx1NkNFOFx1OEY5M1x1NTE2NSAqL1xuICAgICAgLmFubm90YXRpb24taW5wdXQtY29udGFpbmVyIHtcbiAgICAgICAgbWFyZ2luOiAxMnB4IDA7XG4gICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYW5pbWF0aW9uOiBzbGlkZURvd24gMC4ycyBlYXNlO1xuICAgICAgfVxuXG4gICAgICBAa2V5ZnJhbWVzIHNsaWRlRG93biB7XG4gICAgICAgIGZyb20ge1xuICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMHB4KTtcbiAgICAgICAgfVxuICAgICAgICB0byB7XG4gICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tdGV4dGFyZWEge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgICAgIHJlc2l6ZTogdmVydGljYWw7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDYwcHg7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLXRleHRhcmVhOmZvY3VzIHtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi10ZXh0YXJlYTo6cGxhY2Vob2xkZXIge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1mYWludCk7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWJ1dHRvbnMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tYnV0dG9ucyBidXR0b24ge1xuICAgICAgICBwYWRkaW5nOiA2cHggMTZweDtcbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWRlbGV0ZS1idG4ge1xuICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1kZWxldGUtYnRuOmhvdmVyIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLXNhdmUtYnRuIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1zYXZlLWJ0bjpob3ZlciB7XG4gICAgICAgIG9wYWNpdHk6IDAuODtcbiAgICAgIH1cblxuICAgICAgLyogXHU1MTQzXHU2NTcwXHU2MzZFXHU1MzNBXHU1N0RGICovXG4gICAgICAuY2FyZC1tZXRhIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC50YWdzLWNvbnRhaW5lciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgZ2FwOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC50YWcge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIHBhZGRpbmc6IDJweCA4cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICB9XG5cbiAgICAgIC5oZWFkaW5nLWluZm8ge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgIH1cblxuICAgICAgLyogXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFICovXG4gICAgICAuY2FyZC1hY3Rpb25zIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC5hY3Rpb24tYnRuIHtcbiAgICAgICAgcGFkZGluZzogNHB4IDEwcHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG5cbiAgICAgIC5hY3Rpb24tYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICB9XG5cbiAgICAgIC5kZWxldGUtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTRFMDBcdTk1MkVcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcdTYzMDlcdTk0QUVcdTdFQzQgKi9cbiAgICAgIC5mbGFzaGNhcmQtYnRuLWdyb3VwIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiAwO1xuICAgICAgfVxuXG4gICAgICAucXVpY2stY2FyZC1idG4ge1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHggMCAwIDRweDtcbiAgICAgICAgYm9yZGVyLXJpZ2h0OiBub25lO1xuICAgICAgfVxuXG4gICAgICAubW9yZS1jYXJkLWJ0biB7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDAgNHB4IDRweCAwO1xuICAgICAgICBwYWRkaW5nOiA0cHggNnB4O1xuICAgICAgICBmb250LXNpemU6IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5xdWljay1jYXJkLWJ0bjpob3ZlciwgLm1vcmUtY2FyZC1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1jcmVhdGUtYnRuIHtcbiAgICAgICAgcGFkZGluZzogNnB4IDEycHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1jcmVhdGUtYnRuOmhvdmVyIHtcbiAgICAgICAgb3BhY2l0eTogMC44O1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtYWN0aW9ucy1vdmVydmlldyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1tb2RlLWJ0bixcbiAgICAgIC5zZWxlY3QtYWxsLWJ0bixcbiAgICAgIC5iYXRjaC1kZWxldGUtYnRuLFxuICAgICAgLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG4ge1xuICAgICAgICBwYWRkaW5nOiA2cHggMTJweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3QtYWxsLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtbW9kZS1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLWRlbGV0ZS1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLWNoZWNrYm94IHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxufVxuXG4vLyBcdTYyNzlcdTkxQ0ZcdTUyMUJcdTVFRkFcdTZBMjFcdTYwMDFcdTY4NDZcbmV4cG9ydCBjbGFzcyBCYXRjaENyZWF0ZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4sXG4gICAgcHJpdmF0ZSBxdWlja0NyZWF0b3I6IFF1aWNrRmxhc2hjYXJkQ3JlYXRvcixcbiAgICBwcml2YXRlIHVuaXRzOiBDb250ZW50VW5pdFtdLFxuICAgIHByaXZhdGUgb25Db21wbGV0ZTogKCkgPT4gdm9pZFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIFxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdTI2QTEgQmF0Y2ggQ3JlYXRlIEZsYXNoY2FyZHMnIH0pO1xuICAgIFxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiBgQ3JlYXRlIGZsYXNoY2FyZHMgZm9yICR7dGhpcy51bml0cy5sZW5ndGh9IGNvbnRlbnQgaXRlbXMgd2l0aG91dCBjYXJkcy5gXG4gICAgfSk7XG5cbiAgICAvLyBcdTkwMDlcdTYyRTlcdTdDN0JcdTU3OEJcbiAgICBjb25zdCB0eXBlQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ3R5cGUtc2VsZWN0LWNvbnRhaW5lcicgfSk7XG4gICAgdHlwZUNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDYXJkIFR5cGUnIH0pO1xuXG4gICAgbGV0IHNlbGVjdGVkVHlwZTogJ3NtYXJ0JyB8ICdxYScgfCAnY2xvemUnID0gJ3NtYXJ0JztcblxuICAgIGNvbnN0IHR5cGVzID0gW1xuICAgICAgeyB2YWx1ZTogJ3NtYXJ0JywgbGFiZWw6ICdcdTI2QTEgU21hcnQgKEF1dG8tZGV0ZWN0KScsIGRlc2M6ICdBdXRvbWF0aWNhbGx5IGNob29zZSB0aGUgYmVzdCB0eXBlJyB9LFxuICAgICAgeyB2YWx1ZTogJ3FhJywgbGFiZWw6ICdcdUQ4M0RcdURDREQgUSZBIENhcmRzJywgZGVzYzogJ1F1ZXN0aW9uIGFuZCBhbnN3ZXIgZm9ybWF0JyB9LFxuICAgICAgeyB2YWx1ZTogJ2Nsb3plJywgbGFiZWw6ICdcdTI3MEZcdUZFMEYgQ2xvemUgQ2FyZHMnLCBkZXNjOiAnRmlsbCBpbiB0aGUgYmxhbmtzJyB9XG4gICAgXTtcblxuICAgIHR5cGVzLmZvckVhY2godHlwZSA9PiB7XG4gICAgICBjb25zdCBvcHRpb24gPSB0eXBlQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3R5cGUtb3B0aW9uJyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmFkaW8gPSBvcHRpb24uY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICB0eXBlOiAncmFkaW8nLFxuICAgICAgICB2YWx1ZTogdHlwZS52YWx1ZSxcbiAgICAgICAgYXR0cjogeyBuYW1lOiAnY2FyZC10eXBlJyB9XG4gICAgICB9KTtcbiAgICAgIGlmICh0eXBlLnZhbHVlID09PSAnc21hcnQnKSByYWRpby5jaGVja2VkID0gdHJ1ZTtcblxuICAgICAgY29uc3QgbGFiZWwgPSBvcHRpb24uY3JlYXRlRGl2KHsgY2xzOiAndHlwZS1sYWJlbCcgfSk7XG4gICAgICBsYWJlbC5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiB0eXBlLmxhYmVsIH0pO1xuICAgICAgbGFiZWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogdHlwZS5kZXNjLCBjbHM6ICd0eXBlLWRlc2MnIH0pO1xuXG4gICAgICBvcHRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHJhZGlvLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICBzZWxlY3RlZFR5cGUgPSB0eXBlLnZhbHVlIGFzIGFueTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gXHU2MzA5XHU5NEFFXG4gICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ21vZGFsLWJ1dHRvbi1jb250YWluZXInIH0pO1xuXG4gICAgY29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG5cbiAgICBjb25zdCBjcmVhdGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiBgQ3JlYXRlICR7dGhpcy51bml0cy5sZW5ndGh9IENhcmRzYCxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgY3JlYXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5iYXRjaENyZWF0ZShzZWxlY3RlZFR5cGUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRTdHlsZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYmF0Y2hDcmVhdGUodHlwZTogJ3NtYXJ0JyB8ICdxYScgfCAnY2xvemUnKSB7XG4gICAgY29uc3QgeyBzdWNjZXNzLCBmYWlsZWQgfSA9IGF3YWl0IHRoaXMucXVpY2tDcmVhdG9yLmNyZWF0ZUJhdGNoQ2FyZHModGhpcy51bml0cywgdHlwZSk7XG4gICAgXG4gICAgbmV3IE5vdGljZShgXHUyNzA1IENyZWF0ZWQgJHtzdWNjZXNzfSBmbGFzaGNhcmRzISAke2ZhaWxlZCA+IDAgPyBgKCR7ZmFpbGVkfSBmYWlsZWQpYCA6ICcnfWApO1xuICAgIFxuICAgIHRoaXMuY2xvc2UoKTtcbiAgICB0aGlzLm9uQ29tcGxldGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAudHlwZS1zZWxlY3QtY29udGFpbmVyIHtcbiAgICAgICAgbWFyZ2luOiAyMHB4IDA7XG4gICAgICB9XG5cbiAgICAgIC50eXBlLW9wdGlvbiB7XG4gICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuXG4gICAgICAudHlwZS1vcHRpb246aG92ZXIge1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAudHlwZS1vcHRpb24gaW5wdXRbdHlwZT1cInJhZGlvXCJdIHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAudHlwZS1sYWJlbCB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgdmVydGljYWwtYWxpZ246IHRvcDtcbiAgICAgIH1cblxuICAgICAgLnR5cGUtZGVzYyB7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgbWFyZ2luLXRvcDogNHB4O1xuICAgICAgfVxuICAgIGA7XG5cbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuXG5jbGFzcyBDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwcDogQXBwLFxuICAgIHByaXZhdGUgdGl0bGU6IHN0cmluZyxcbiAgICBwcml2YXRlIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBwcml2YXRlIG9uQ29uZmlybTogKCkgPT4gdm9pZCxcbiAgICBwcml2YXRlIG9uQ2FuY2VsOiAoKSA9PiB2b2lkXG4gICkge1xuICAgIHN1cGVyKGFwcCk7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdGhpcy50aXRsZSB9KTtcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHRoaXMubWVzc2FnZSB9KTtcblxuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdtb2RhbC1idXR0b24tY29udGFpbmVyJyB9KTtcbiAgICBcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgdGhpcy5vbkNhbmNlbCgpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgY29uZmlybUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdEZWxldGUnLFxuICAgICAgY2xzOiAnbW9kLXdhcm5pbmcnXG4gICAgfSk7XG4gICAgY29uZmlybUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMub25Db25maXJtKCk7XG4gICAgfSk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIExlYXJuaW5nU3lzdGVtUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgQW5ub3RhdGlvbiB9IGZyb20gJy4uL2NvcmUvQW5ub3RhdGlvbk1hbmFnZXInO1xuaW1wb3J0IHsgQ29udGVudFVuaXQgfSBmcm9tICcuLi9jb3JlL0RhdGFNYW5hZ2VyJztcblxuZXhwb3J0IGNsYXNzIEFubm90YXRpb25Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBjb250ZW50VW5pdDogQ29udGVudFVuaXQ7XG4gIHByaXZhdGUgZXhpc3RpbmdBbm5vdGF0aW9uPzogQW5ub3RhdGlvbjtcbiAgcHJpdmF0ZSBhbm5vdGF0aW9uVGV4dDogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgYmFkZ2VUZXh0OiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBiYWRnZUNvbG9yOiBzdHJpbmcgPSAnIzVCOUJENSc7XG4gIHByaXZhdGUgb25TYXZlOiAoYW5ub3RhdGlvbjogQW5ub3RhdGlvbikgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4sXG4gICAgY29udGVudFVuaXQ6IENvbnRlbnRVbml0LFxuICAgIG9uU2F2ZTogKGFubm90YXRpb246IEFubm90YXRpb24pID0+IHZvaWRcbiAgKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLmNvbnRlbnRVbml0ID0gY29udGVudFVuaXQ7XG4gICAgdGhpcy5vblNhdmUgPSBvblNhdmU7XG5cbiAgICAvLyBcdTUyQTBcdThGN0RcdTczQjBcdTY3MDlcdTYyNzlcdTZDRThcbiAgICB0aGlzLmV4aXN0aW5nQW5ub3RhdGlvbiA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldENvbnRlbnRBbm5vdGF0aW9uKFxuICAgICAgY29udGVudFVuaXQuaWRcbiAgICApO1xuXG4gICAgaWYgKHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uKSB7XG4gICAgICB0aGlzLmFubm90YXRpb25UZXh0ID0gdGhpcy5leGlzdGluZ0Fubm90YXRpb24uY29udGVudDtcbiAgICAgIGlmICh0aGlzLmV4aXN0aW5nQW5ub3RhdGlvbi5iYWRnZSkge1xuICAgICAgICB0aGlzLmJhZGdlVGV4dCA9IHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uLmJhZGdlLnRleHQ7XG4gICAgICAgIHRoaXMuYmFkZ2VDb2xvciA9IHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uLmJhZGdlLmNvbG9yO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2Fubm90YXRpb24tbW9kYWwnKTtcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyBcbiAgICAgIHRleHQ6IHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uID8gJ0VkaXQgQW5ub3RhdGlvbicgOiAnQWRkIEFubm90YXRpb24nIFxuICAgIH0pO1xuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU1MzlGXHU2NTg3XHU1MTg1XHU1QkI5XG4gICAgY29uc3QgY29udGVudFByZXZpZXcgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnYW5ub3RhdGlvbi1jb250ZW50LXByZXZpZXcnIH0pO1xuICAgIGNvbnRlbnRQcmV2aWV3LmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0NvbnRlbnQ6JyB9KTtcbiAgICBjb250ZW50UHJldmlldy5jcmVhdGVFbCgnYmxvY2txdW90ZScsIHsgdGV4dDogdGhpcy5jb250ZW50VW5pdC5jb250ZW50IH0pO1xuXG4gICAgLy8gXHU2Mjc5XHU2Q0U4XHU2NTg3XHU2NzJDXHU1MzNBXHU1N0RGXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLnNldE5hbWUoJ0Fubm90YXRpb24nKVxuICAgICAgLnNldERlc2MoJ0FkZCB5b3VyIG5vdGVzIG9yIGNvbW1lbnRzIGFib3V0IHRoaXMgY29udGVudCcpXG4gICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB7XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHlvdXIgYW5ub3RhdGlvbiBoZXJlLi4uJylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5hbm5vdGF0aW9uVGV4dClcbiAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5hbm5vdGF0aW9uVGV4dCA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgdGV4dC5pbnB1dEVsLnJvd3MgPSA2O1xuICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICB9KTtcblxuICAgIC8vIFx1ODlEMlx1NjgwN1x1OEJCRVx1N0Y2RVxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdCYWRnZSAoT3B0aW9uYWwpJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5zZXROYW1lKCdCYWRnZSB0ZXh0JylcbiAgICAgIC5zZXREZXNjKCdTaG9ydCB0ZXh0IHRvIGRpc3BsYXkgYXMgYSBiYWRnZSAoZS5nLiwgXCJcdTkxQ0RcdTg5ODFcIiwgXCJcdTVGODVcdTU5MERcdTRFNjBcIiknKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdCYWRnZSB0ZXh0JylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5iYWRnZVRleHQpXG4gICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuYmFkZ2VUZXh0ID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJhZGdlUHJldmlldygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLnNldE5hbWUoJ0JhZGdlIGNvbG9yJylcbiAgICAgIC5zZXREZXNjKCdDaG9vc2UgYSBjb2xvciBmb3IgdGhlIGJhZGdlJylcbiAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgLmFkZE9wdGlvbignIzVCOUJENScsICdcdUQ4M0RcdUREMzUgQmx1ZScpXG4gICAgICAgICAgLmFkZE9wdGlvbignIzcwQUQ0NycsICdcdUQ4M0RcdURGRTIgR3JlZW4nKVxuICAgICAgICAgIC5hZGRPcHRpb24oJyNGRkMwMDAnLCAnXHVEODNEXHVERkUxIFllbGxvdycpXG4gICAgICAgICAgLmFkZE9wdGlvbignI0ZGNkI2QicsICdcdUQ4M0RcdUREMzQgUmVkJylcbiAgICAgICAgICAuYWRkT3B0aW9uKCcjQzc4QkZGJywgJ1x1RDgzRFx1REZFMyBQdXJwbGUnKVxuICAgICAgICAgIC5hZGRPcHRpb24oJyNGRjlGNDMnLCAnXHVEODNEXHVERkUwIE9yYW5nZScpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuYmFkZ2VDb2xvcilcbiAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5iYWRnZUNvbG9yID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJhZGdlUHJldmlldygpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAvLyBcdTg5RDJcdTY4MDdcdTk4ODRcdTg5QzhcbiAgICBjb25zdCBiYWRnZVByZXZpZXcgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnYmFkZ2UtcHJldmlldy1jb250YWluZXInIH0pO1xuICAgIGJhZGdlUHJldmlldy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ByZXZpZXc6ICcsIGNsczogJ3ByZXZpZXctbGFiZWwnIH0pO1xuICAgIGNvbnN0IGJhZGdlRWwgPSBiYWRnZVByZXZpZXcuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ2JhZGdlLXByZXZpZXcnIH0pO1xuICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwgPSBiYWRnZUVsO1xuICAgIHRoaXMudXBkYXRlQmFkZ2VQcmV2aWV3KCk7XG5cbiAgICAvLyBcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBcdTUyMjBcdTk2NjRcdTYzMDlcdTk0QUVcdUZGMDhcdTU5ODJcdTY3OUNcdTY2MkZcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdUZGMDlcbiAgICBpZiAodGhpcy5leGlzdGluZ0Fubm90YXRpb24pIHtcbiAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgdGV4dDogJ0RlbGV0ZScsXG4gICAgICAgIGNsczogJ21vZC13YXJuaW5nJ1xuICAgICAgfSk7XG4gICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlQW5ub3RhdGlvbigpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAnU2F2ZScsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIHNhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVBbm5vdGF0aW9uKCk7XG4gICAgfSk7XG5cbiAgICAvLyBcdTZERkJcdTUyQTBcdTY4MzdcdTVGMEZcbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBiYWRnZVByZXZpZXdFbDogSFRNTEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSB1cGRhdGVCYWRnZVByZXZpZXcoKSB7XG4gICAgaWYgKCF0aGlzLmJhZGdlUHJldmlld0VsKSByZXR1cm47XG5cbiAgICBpZiAodGhpcy5iYWRnZVRleHQpIHtcbiAgICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwudGV4dENvbnRlbnQgPSB0aGlzLmJhZGdlVGV4dDtcbiAgICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5iYWRnZUNvbG9yO1xuICAgICAgdGhpcy5iYWRnZVByZXZpZXdFbC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwudGV4dENvbnRlbnQgPSAnTm8gYmFkZ2UnO1xuICAgICAgdGhpcy5iYWRnZVByZXZpZXdFbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xuICAgICAgdGhpcy5iYWRnZVByZXZpZXdFbC5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzYXZlQW5ub3RhdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuYW5ub3RhdGlvblRleHQudHJpbSgpKSB7XG4gICAgICBuZXcgTm90aWNlKCdQbGVhc2UgZW50ZXIgYW5ub3RhdGlvbiB0ZXh0Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGxldCBhbm5vdGF0aW9uOiBBbm5vdGF0aW9uO1xuXG4gICAgICBpZiAodGhpcy5leGlzdGluZ0Fubm90YXRpb24pIHtcbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU3M0IwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLnVwZGF0ZUFubm90YXRpb24oXG4gICAgICAgICAgdGhpcy5leGlzdGluZ0Fubm90YXRpb24uaWQsXG4gICAgICAgICAge1xuICAgICAgICAgICAgY29udGVudDogdGhpcy5hbm5vdGF0aW9uVGV4dCxcbiAgICAgICAgICAgIGJhZGdlOiB0aGlzLmJhZGdlVGV4dCA/IHtcbiAgICAgICAgICAgICAgdGV4dDogdGhpcy5iYWRnZVRleHQsXG4gICAgICAgICAgICAgIGNvbG9yOiB0aGlzLmJhZGdlQ29sb3JcbiAgICAgICAgICAgIH0gOiB1bmRlZmluZWRcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRBbm5vdGF0aW9uKFxuICAgICAgICAgIHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uLmlkXG4gICAgICAgICkhO1xuICAgICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIHVwZGF0ZWQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjVCMFx1NjI3OVx1NkNFOFxuICAgICAgICBhbm5vdGF0aW9uID0gYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuYWRkQ29udGVudEFubm90YXRpb24oXG4gICAgICAgICAgdGhpcy5jb250ZW50VW5pdC5pZCxcbiAgICAgICAgICB0aGlzLmFubm90YXRpb25UZXh0LFxuICAgICAgICAgIHRoaXMuYmFkZ2VUZXh0ID8ge1xuICAgICAgICAgICAgdGV4dDogdGhpcy5iYWRnZVRleHQsXG4gICAgICAgICAgICBjb2xvcjogdGhpcy5iYWRnZUNvbG9yXG4gICAgICAgICAgfSA6IHVuZGVmaW5lZFxuICAgICAgICApO1xuICAgICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIGFkZGVkJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMub25TYXZlKGFubm90YXRpb24pO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgYW5ub3RhdGlvbjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdFcnJvciBzYXZpbmcgYW5ub3RhdGlvbicpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGVsZXRlQW5ub3RhdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZGVsZXRlQW5ub3RhdGlvbihcbiAgICAgICAgdGhpcy5leGlzdGluZ0Fubm90YXRpb24uaWRcbiAgICAgICk7XG4gICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIGRlbGV0ZWQnKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMub25TYXZlKG51bGwgYXMgYW55KTsgLy8gXHU5MDFBXHU3N0U1XHU1MjIwXHU5NjY0XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGFubm90YXRpb246JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgnRXJyb3IgZGVsZXRpbmcgYW5ub3RhdGlvbicpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAuYW5ub3RhdGlvbi1tb2RhbCB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWNvbnRlbnQtcHJldmlldyB7XG4gICAgICAgIG1hcmdpbjogMjBweCAwO1xuICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tY29udGVudC1wcmV2aWV3IGgzIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1jb250ZW50LXByZXZpZXcgYmxvY2txdW90ZSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC5iYWRnZS1wcmV2aWV3LWNvbnRhaW5lciB7XG4gICAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIH1cblxuICAgICAgLnByZXZpZXctbGFiZWwge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMTBweDtcbiAgICAgIH1cblxuICAgICAgLmJhZGdlLXByZXZpZXcge1xuICAgICAgICBwYWRkaW5nOiA0cHggMTBweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLm1vZGFsLWJ1dHRvbi1jb250YWluZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5tb2RhbC1idXR0b24tY29udGFpbmVyIGJ1dHRvbiB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cblxuLyoqXG4gKiBcdTY1ODdcdTRFRjZcdTYyNzlcdTZDRThcdTZBMjFcdTYwMDFcdTY4NDZcbiAqL1xuZXhwb3J0IGNsYXNzIEZpbGVBbm5vdGF0aW9uTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgZmlsZVBhdGg6IHN0cmluZztcbiAgcHJpdmF0ZSBleGlzdGluZ0Fubm90YXRpb25zOiBBbm5vdGF0aW9uW10gPSBbXTtcbiAgcHJpdmF0ZSBhbm5vdGF0aW9uVGV4dDogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgb25TYXZlOiAoKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwcDogQXBwLFxuICAgIHByaXZhdGUgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbixcbiAgICBmaWxlUGF0aDogc3RyaW5nLFxuICAgIG9uU2F2ZTogKCkgPT4gdm9pZFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMuZmlsZVBhdGggPSBmaWxlUGF0aDtcbiAgICB0aGlzLm9uU2F2ZSA9IG9uU2F2ZTtcblxuICAgIC8vIFx1NTJBMFx1OEY3RFx1NzNCMFx1NjcwOVx1NjI3OVx1NkNFOFxuICAgIHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9ucyA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldEZpbGVBbm5vdGF0aW9ucyhmaWxlUGF0aCk7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0ZpbGUgQW5ub3RhdGlvbnMnIH0pO1xuXG4gICAgY29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVQYXRoLnNwbGl0KCcvJykucG9wKCk/LnJlcGxhY2UoJy5tZCcsICcnKSB8fCB0aGlzLmZpbGVQYXRoO1xuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiBgRmlsZTogJHtmaWxlTmFtZX1gLFxuICAgICAgY2xzOiAnZmlsZS1uYW1lJ1xuICAgIH0pO1xuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU3M0IwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAgaWYgKHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBleGlzdGluZ1NlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnZXhpc3RpbmctYW5ub3RhdGlvbnMnIH0pO1xuICAgICAgZXhpc3RpbmdTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0V4aXN0aW5nIEFubm90YXRpb25zJyB9KTtcblxuICAgICAgdGhpcy5leGlzdGluZ0Fubm90YXRpb25zLmZvckVhY2goYW5ub3RhdGlvbiA9PiB7XG4gICAgICAgIGNvbnN0IGFubm90YXRpb25DYXJkID0gZXhpc3RpbmdTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ2Fubm90YXRpb24tY2FyZCcgfSk7XG4gICAgICAgIGFubm90YXRpb25DYXJkLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBhbm5vdGF0aW9uLmNvbnRlbnQgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoYW5ub3RhdGlvbi5tZXRhZGF0YS5jcmVhdGVkQXQpLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuICAgICAgICBhbm5vdGF0aW9uQ2FyZC5jcmVhdGVFbCgnc21hbGwnLCB7IFxuICAgICAgICAgIHRleHQ6IGBDcmVhdGVkOiAke2RhdGV9YCxcbiAgICAgICAgICBjbHM6ICdhbm5vdGF0aW9uLWRhdGUnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGFubm90YXRpb25DYXJkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgdGV4dDogJ1x1RDgzRFx1REREMSBEZWxldGUnLFxuICAgICAgICAgIGNsczogJ2RlbGV0ZS1hbm5vdGF0aW9uLWJ0bidcbiAgICAgICAgfSk7XG4gICAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZUFubm90YXRpb24oYW5ub3RhdGlvbi5pZCk7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgIHRoaXMub25TYXZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU2NUIwXHU2Mjc5XHU2Q0U4XHU4RjkzXHU1MTY1XG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FkZCBOZXcgQW5ub3RhdGlvbicgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAuc2V0TmFtZSgnQW5ub3RhdGlvbicpXG4gICAgICAuc2V0RGVzYygnQWRkIG5vdGVzIGFib3V0IHRoaXMgZmlsZScpXG4gICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB7XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIGZpbGUgYW5ub3RhdGlvbi4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuYW5ub3RhdGlvblRleHQpXG4gICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuYW5ub3RhdGlvblRleHQgPSB2YWx1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHRleHQuaW5wdXRFbC5yb3dzID0gNDtcbiAgICAgICAgdGV4dC5pbnB1dEVsLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgfSk7XG5cbiAgICAvLyBcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG5cbiAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdTYXZlJyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgc2F2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZUFubm90YXRpb24oKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2F2ZUFubm90YXRpb24oKSB7XG4gICAgaWYgKCF0aGlzLmFubm90YXRpb25UZXh0LnRyaW0oKSkge1xuICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGVudGVyIGFubm90YXRpb24gdGV4dCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5hZGRGaWxlQW5ub3RhdGlvbihcbiAgICAgICAgdGhpcy5maWxlUGF0aCxcbiAgICAgICAgdGhpcy5hbm5vdGF0aW9uVGV4dFxuICAgICAgKTtcbiAgICAgIG5ldyBOb3RpY2UoJ0ZpbGUgYW5ub3RhdGlvbiBhZGRlZCcpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgdGhpcy5vblNhdmUoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIGZpbGUgYW5ub3RhdGlvbjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdFcnJvciBzYXZpbmcgZmlsZSBhbm5vdGF0aW9uJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkZWxldGVBbm5vdGF0aW9uKGlkOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZGVsZXRlQW5ub3RhdGlvbihpZCk7XG4gICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIGRlbGV0ZWQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgYW5ub3RhdGlvbjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdFcnJvciBkZWxldGluZyBhbm5vdGF0aW9uJyk7XG4gICAgfVxuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufSIsICJpbXBvcnQgeyBQbHVnaW4sIFRGaWxlLCBXb3Jrc3BhY2VMZWFmLCBOb3RpY2UsIE1hcmtkb3duVmlldyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFNldHRpbmdzVGFiIH0gZnJvbSAnLi91aS9TZXR0aW5nc1RhYic7XG5pbXBvcnQgeyBPdmVydmlld1ZpZXcsIFZJRVdfVFlQRV9PVkVSVklFVyB9IGZyb20gJy4vdWkvT3ZlcnZpZXdWaWV3JztcbmltcG9ydCB7IFNpZGViYXJPdmVydmlld1ZpZXcsIFZJRVdfVFlQRV9TSURFQkFSX09WRVJWSUVXLCBWSUVXX1RZUEVfTUFJTl9PVkVSVklFVyAgfSBmcm9tICcuL3VpL1NpZGViYXJPdmVydmlld1ZpZXcnO1xuaW1wb3J0IHsgUmV2aWV3VmlldywgVklFV19UWVBFX1JFVklFVyB9IGZyb20gJy4vdWkvUmV2aWV3Vmlldyc7XG5pbXBvcnQgeyBTdGF0c1ZpZXcsIFZJRVdfVFlQRV9TVEFUUyB9IGZyb20gJy4vdWkvU3RhdHNWaWV3JztcbmltcG9ydCB7IERhdGFNYW5hZ2VyIH0gZnJvbSAnLi9jb3JlL0RhdGFNYW5hZ2VyJztcbmltcG9ydCB7IEV4dHJhY3Rpb25FbmdpbmUgfSBmcm9tICcuL2NvcmUvRXh0cmFjdGlvbkVuZ2luZSc7XG5pbXBvcnQgeyBBbm5vdGF0aW9uTWFuYWdlciB9IGZyb20gJy4vY29yZS9Bbm5vdGF0aW9uTWFuYWdlcic7XG5pbXBvcnQgeyBGbGFzaGNhcmRNYW5hZ2VyIH0gZnJvbSAnLi9jb3JlL0ZsYXNoY2FyZE1hbmFnZXInO1xuXG5pbnRlcmZhY2UgTGVhcm5pbmdTeXN0ZW1TZXR0aW5ncyB7XG4gIGV4dHJhY3Rpb25FbmFibGVkOiBib29sZWFuO1xuICBhdXRvU2NhbjogYm9vbGVhbjtcbiAgZGVmYXVsdERlY2s6IHN0cmluZztcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTGVhcm5pbmdTeXN0ZW1TZXR0aW5ncyA9IHtcbiAgZXh0cmFjdGlvbkVuYWJsZWQ6IHRydWUsXG4gIGF1dG9TY2FuOiBmYWxzZSxcbiAgZGVmYXVsdERlY2s6ICdEZWZhdWx0J1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5nczogTGVhcm5pbmdTeXN0ZW1TZXR0aW5ncztcbiAgZGF0YU1hbmFnZXI6IERhdGFNYW5hZ2VyO1xuICBleHRyYWN0aW9uRW5naW5lOiBFeHRyYWN0aW9uRW5naW5lO1xuICBhbm5vdGF0aW9uTWFuYWdlcjogQW5ub3RhdGlvbk1hbmFnZXI7XG4gIGZsYXNoY2FyZE1hbmFnZXI6IEZsYXNoY2FyZE1hbmFnZXI7XG5cblxuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgY29uc29sZS5sb2coJ0xvYWRpbmcgTGVhcm5pbmcgU3lzdGVtIFBsdWdpbicpO1xuXG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1NjgzOFx1NUZDM1x1NkEyMVx1NTc1N1xuICAgIHRoaXMuZGF0YU1hbmFnZXIgPSBuZXcgRGF0YU1hbmFnZXIodGhpcy5hcHAsIHRoaXMpO1xuICAgIGF3YWl0IHRoaXMuZGF0YU1hbmFnZXIuaW5pdGlhbGl6ZSgpO1xuXG4gICAgdGhpcy5hbm5vdGF0aW9uTWFuYWdlciA9IG5ldyBBbm5vdGF0aW9uTWFuYWdlcih0aGlzLmFwcCwgdGhpcyk7XG4gICAgYXdhaXQgdGhpcy5hbm5vdGF0aW9uTWFuYWdlci5pbml0aWFsaXplKCk7XG5cbiAgICB0aGlzLmZsYXNoY2FyZE1hbmFnZXIgPSBuZXcgRmxhc2hjYXJkTWFuYWdlcihcbiAgICAgIHRoaXMuYXBwLFxuICAgICAgdGhpcy5kYXRhTWFuYWdlcixcbiAgICAgIHRoaXNcbiAgICApO1xuICAgIGF3YWl0IHRoaXMuZmxhc2hjYXJkTWFuYWdlci5pbml0aWFsaXplKCk7XG4gICAgXG5cbiAgICB0aGlzLmV4dHJhY3Rpb25FbmdpbmUgPSBuZXcgRXh0cmFjdGlvbkVuZ2luZShcbiAgICAgIHRoaXMuYXBwLFxuICAgICAgdGhpcy5kYXRhTWFuYWdlcixcbiAgICAgIHRoaXMuZmxhc2hjYXJkTWFuYWdlclxuICAgICk7XG5cbiAgICAvLyBcdTZDRThcdTUxOENcdTg5QzZcdTU2RkVcbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFZJRVdfVFlQRV9PVkVSVklFVyxcbiAgICAgIChsZWFmKSA9PiBuZXcgT3ZlcnZpZXdWaWV3KGxlYWYsIHRoaXMpXG4gICAgKTtcblxuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX1NJREVCQVJfT1ZFUlZJRVcsXG4gICAgICAobGVhZikgPT4gbmV3IFNpZGViYXJPdmVydmlld1ZpZXcobGVhZiwgdGhpcywgZmFsc2UpXG4gICAgKTtcbiAgICBcbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFZJRVdfVFlQRV9NQUlOX09WRVJWSUVXLFxuICAgICAgKGxlYWYpID0+IG5ldyBTaWRlYmFyT3ZlcnZpZXdWaWV3KGxlYWYsIHRoaXMsIHRydWUpXG4gICAgKTtcblxuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX1JFVklFVyxcbiAgICAgIChsZWFmKSA9PiBuZXcgUmV2aWV3VmlldyhsZWFmLCB0aGlzKVxuICAgICk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFZJRVdfVFlQRV9TVEFUUyxcbiAgICAgIChsZWFmKSA9PiBuZXcgU3RhdHNWaWV3KGxlYWYsIHRoaXMpXG4gICAgKTtcblxuICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZWRpdG9yLW1lbnUnLCAobWVudSwgZWRpdG9yLCB2aWV3KSA9PiB7XG4gICAgICAgIGlmICh2aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSB7XG4gICAgICAgICAgY29uc3QgZmlsZSA9IHZpZXcuZmlsZTtcbiAgICAgICAgICBpZiAoZmlsZSkge1xuICAgICAgICAgICAgdGhpcy5leHRyYWN0aW9uRW5naW5lLnJlZ2lzdGVyQ29udGV4dE1lbnUobWVudSwgZWRpdG9yLCBmaWxlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgKTtcbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNldHRpbmdzVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG4gICAgdGhpcy5hZGRDb21tYW5kcygpO1xuXG4gICAgLy8gUmliYm9uIFx1NTZGRVx1NjgwN1xuICAgIHRoaXMuYWRkUmliYm9uSWNvbignbGF5b3V0LWxpc3QnLCAnT3BlbiBMZWFybmluZyBPdmVydmlldycsICgpID0+IHtcbiAgICAgIHRoaXMuYWN0aXZhdGVTaWRlYmFyT3ZlcnZpZXcoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkUmliYm9uSWNvbignbGF5ZXJzJywgJ1N0YXJ0IFJldmlldycsICgpID0+IHtcbiAgICAgIHRoaXMuYWN0aXZhdGVSZXZpZXcoKTtcbiAgICB9KTtcblxuICAgIC8vIFx1NzJCNlx1NjAwMVx1NjgwRiAtIFx1NjYzRVx1NzkzQVx1NUY4NVx1NTkwRFx1NEU2MFx1NjU3MFx1OTFDRlxuICAgIHRoaXMuc2V0dXBTdGF0dXNCYXIoKTtcblxuICAgIGNvbnNvbGUubG9nKCdMZWFybmluZyBTeXN0ZW0gUGx1Z2luIGxvYWRlZCcpO1xuICB9XG5cbiAgb251bmxvYWQoKSB7XG4gICAgY29uc29sZS5sb2coJ1VubG9hZGluZyBMZWFybmluZyBTeXN0ZW0gUGx1Z2luJyk7XG4gICAgXG4gICAgLy8gXHU1M0VBXHU1NzI4XHU2M0QyXHU0RUY2XHU1QjhDXHU1MTY4XHU1Mzc4XHU4RjdEXHU2NUY2XHU2MjREXHU2RTA1XHU3NDA2XHU2MjQwXHU2NzA5XHU4OUM2XHU1NkZFXG4gICAgLy8gXHU2Q0U4XHU2MTBGXHVGRjFBXHU4RkQ5XHU5MUNDXHU0RTBEXHU4OTgxXHU1MjIwXHU5NjY0XHU3Mjc5XHU1QjlBXHU4OUM2XHU1NkZFXHU3QzdCXHU1NzhCXHVGRjBDXHU4QkE5IE9ic2lkaWFuIFx1ODFFQVx1NURGMVx1N0JBMVx1NzQwNlxuICAgIC8vIFx1NTNFQVx1NkUwNVx1NzQwNlx1NjNEMlx1NEVGNlx1N0VBN1x1NTIyQlx1NzY4NFx1OEQ0NFx1NkU5MFxuICAgIFxuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGVhcm5pbmctb3ZlcnZpZXctc3R5bGVzJyk7XG4gICAgaWYgKHN0eWxlRWwpIHtcbiAgICAgIHN0eWxlRWwucmVtb3ZlKCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICB9XG5cbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gIH1cblxuICBwcml2YXRlIGFkZENvbW1hbmRzKCkge1xuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3NjYW4tY3VycmVudC1maWxlJyxcbiAgICAgIG5hbWU6ICdTY2FuIGN1cnJlbnQgZmlsZSBmb3IgY29udGVudCcsXG4gICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKCFhY3RpdmVGaWxlKSByZXR1cm47XG4gICAgICAgIGF3YWl0IHRoaXMuZXh0cmFjdGlvbkVuZ2luZS5zY2FuRmlsZShhY3RpdmVGaWxlKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoT3ZlcnZpZXcoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3NjYW4tdmF1bHQnLFxuICAgICAgbmFtZTogJ1NjYW4gZW50aXJlIHZhdWx0JyxcbiAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZXh0cmFjdGlvbkVuZ2luZS5zY2FuVmF1bHQoKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoT3ZlcnZpZXcoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ29wZW4tb3ZlcnZpZXcnLFxuICAgICAgbmFtZTogJ09wZW4gTGVhcm5pbmcgT3ZlcnZpZXcnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgdGhpcy5hY3RpdmF0ZVNpZGViYXJPdmVydmlldygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnb3Blbi1tYWluLW92ZXJ2aWV3JyxcbiAgICAgIG5hbWU6ICdPcGVuIExlYXJuaW5nIE92ZXJ2aWV3IChNYWluIFZpZXcpJyxcbiAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVNYWluVmlldygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnYWRkLWZpbGUtYW5ub3RhdGlvbicsXG4gICAgICBuYW1lOiAnQWRkIGZpbGUgYW5ub3RhdGlvbicsXG4gICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKCFhY3RpdmVGaWxlKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgeyBGaWxlQW5ub3RhdGlvbk1vZGFsIH0gPSBhd2FpdCBpbXBvcnQoJy4vdWkvQW5ub3RhdGlvbk1vZGFsJyk7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IEZpbGVBbm5vdGF0aW9uTW9kYWwoXG4gICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgdGhpcyxcbiAgICAgICAgICBhY3RpdmVGaWxlLnBhdGgsXG4gICAgICAgICAgKCkgPT4gdGhpcy5yZWZyZXNoT3ZlcnZpZXcoKVxuICAgICAgICApO1xuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdzdGFydC1yZXZpZXcnLFxuICAgICAgbmFtZTogJ1N0YXJ0IGZsYXNoY2FyZCByZXZpZXcnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgdGhpcy5hY3RpdmF0ZVJldmlldygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnc2hvdy1zdGF0cycsXG4gICAgICBuYW1lOiAnU2hvdyBmbGFzaGNhcmQgc3RhdGlzdGljcycsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICB0aGlzLmFjdGl2YXRlU3RhdHMoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBcbiAgYXN5bmMgYWN0aXZhdGVNYWluVmlldygpIHtcbiAgICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG5cbiAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTVERjJcdTdFQ0ZcdTY3MDlcdTRFM0JcdTc1NENcdTk3NjJcdTg5QzZcdTU2RkVcdTYyNTNcdTVGMDBcbiAgICBsZXQgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX01BSU5fT1ZFUlZJRVcpWzBdO1xuICAgIFxuICAgIGlmICghbGVhZikge1xuICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NUIwXHU3Njg0XHU2ODA3XHU3QjdFXHU5ODc1XG4gICAgICBsZWFmID0gd29ya3NwYWNlLmdldExlYWYoJ3RhYicpO1xuICAgICAgYXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICB0eXBlOiBWSUVXX1RZUEVfTUFJTl9PVkVSVklFVyxcbiAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgd29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gIH1cbiAgXG4gIGFzeW5jIGFjdGl2YXRlU2lkZWJhck92ZXJ2aWV3KCkge1xuICAgIGNvbnN0IHsgd29ya3NwYWNlIH0gPSB0aGlzLmFwcDtcbiAgICBcbiAgICBsZXQgbGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xuICAgIGNvbnN0IGxlYXZlcyA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1NJREVCQVJfT1ZFUlZJRVcpO1xuXG4gICAgaWYgKGxlYXZlcy5sZW5ndGggPiAwKSB7XG4gICAgICBsZWFmID0gbGVhdmVzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTU3MjhcdTUzRjNcdTRGQTdcdThGQjlcdTY4MEZcdTUyMUJcdTVFRkFcdTY1QjBcdTc2ODRcdTg5QzZcdTU2RkVcbiAgICAgIGxlYWYgPSB3b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcbiAgICAgIGF3YWl0IGxlYWY/LnNldFZpZXdTdGF0ZSh7XG4gICAgICAgIHR5cGU6IFZJRVdfVFlQRV9TSURFQkFSX09WRVJWSUVXLFxuICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChsZWFmKSB7XG4gICAgICB3b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZU92ZXJ2aWV3KCkge1xuICAgIGNvbnN0IHsgd29ya3NwYWNlIH0gPSB0aGlzLmFwcDtcbiAgICBsZXQgbGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xuICAgIGNvbnN0IGxlYXZlcyA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX09WRVJWSUVXKTtcblxuICAgIGlmIChsZWF2ZXMubGVuZ3RoID4gMCkge1xuICAgICAgbGVhZiA9IGxlYXZlc1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWFmKGB0YWJgKTtcbiAgICAgIGF3YWl0IGxlYWY/LnNldFZpZXdTdGF0ZSh7XG4gICAgICAgIHR5cGU6IFZJRVdfVFlQRV9PVkVSVklFVyxcbiAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAobGVhZikge1xuICAgICAgd29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVSZXZpZXcoKSB7XG4gICAgY29uc3Qgc3RhdHMgPSB0aGlzLmZsYXNoY2FyZE1hbmFnZXIuZ2V0U3RhdHMoKTtcbiAgICBcbiAgICBpZiAoc3RhdHMuZHVlID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdObyBjYXJkcyBkdWUgZm9yIHJldmlldyEnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG4gICAgbGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcbiAgICBjb25zdCBsZWF2ZXMgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9SRVZJRVcpO1xuXG4gICAgaWYgKGxlYXZlcy5sZW5ndGggPiAwKSB7XG4gICAgICBsZWFmID0gbGVhdmVzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZWFmID0gd29ya3NwYWNlLmdldExlYWYodHJ1ZSk7XG4gICAgICBhd2FpdCBsZWFmPy5zZXRWaWV3U3RhdGUoe1xuICAgICAgICB0eXBlOiBWSUVXX1RZUEVfUkVWSUVXLFxuICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChsZWFmKSB7XG4gICAgICB3b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZVN0YXRzKCkge1xuICAgIGNvbnN0IHsgd29ya3NwYWNlIH0gPSB0aGlzLmFwcDtcbiAgICBsZXQgbGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xuICAgIGNvbnN0IGxlYXZlcyA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1NUQVRTKTtcblxuICAgIGlmIChsZWF2ZXMubGVuZ3RoID4gMCkge1xuICAgICAgbGVhZiA9IGxlYXZlc1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWFmKCd0YWInKTtcbiAgICAgIGF3YWl0IGxlYWY/LnNldFZpZXdTdGF0ZSh7XG4gICAgICAgIHR5cGU6IFZJRVdfVFlQRV9TVEFUUyxcbiAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAobGVhZikge1xuICAgICAgd29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gICAgfVxuICB9XG5cbiAgcmVmcmVzaE92ZXJ2aWV3KCkge1xuICAgIFxuICAgIC8vIFx1NTIzN1x1NjVCMFx1NjVFN1x1NzI0OCBPdmVydmlld1xuICAgIGNvbnN0IG92ZXJ2aWV3TGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfT1ZFUlZJRVcpO1xuICAgIG92ZXJ2aWV3TGVhdmVzLmZvckVhY2gobGVhZiA9PiB7XG4gICAgICBjb25zdCB2aWV3ID0gbGVhZi52aWV3IGFzIE92ZXJ2aWV3VmlldztcbiAgICAgIHZpZXcucmVmcmVzaCgpO1xuICAgIH0pO1xuXG4gICAgLy8gXHU1MjM3XHU2NUIwXHU0RkE3XHU4RkI5XHU2ODBGXHU4OUM2XHU1NkZFXG4gICAgY29uc3Qgc2lkZWJhckxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1NJREVCQVJfT1ZFUlZJRVcpO1xuICAgIHNpZGViYXJMZWF2ZXMuZm9yRWFjaChsZWFmID0+IHtcbiAgICAgIGNvbnN0IHZpZXcgPSBsZWFmLnZpZXcgYXMgU2lkZWJhck92ZXJ2aWV3VmlldztcbiAgICAgIHZpZXcucmVmcmVzaCgpO1xuICAgIH0pO1xuXG4gICAgLy8gXHU1MjM3XHU2NUIwXHU0RTNCXHU3NTRDXHU5NzYyXHU4OUM2XHU1NkZFXG4gICAgY29uc3QgbWFpbkxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX01BSU5fT1ZFUlZJRVcpO1xuICAgIG1haW5MZWF2ZXMuZm9yRWFjaChsZWFmID0+IHtcbiAgICAgIGNvbnN0IHZpZXcgPSBsZWFmLnZpZXcgYXMgU2lkZWJhck92ZXJ2aWV3VmlldztcbiAgICAgIHZpZXcucmVmcmVzaCgpO1xuICAgIH0pO1xuICAgIFxuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cFN0YXR1c0JhcigpIHtcbiAgICBjb25zdCBzdGF0dXNCYXJJdGVtID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKCk7XG4gICAgc3RhdHVzQmFySXRlbS5hZGRDbGFzcygnbGVhcm5pbmctc3lzdGVtLXN0YXR1cycpO1xuICAgIFxuICAgIGNvbnN0IHVwZGF0ZVN0YXR1cyA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXRzID0gdGhpcy5mbGFzaGNhcmRNYW5hZ2VyLmdldFN0YXRzKCk7XG4gICAgICBzdGF0dXNCYXJJdGVtLnNldFRleHQoYFx1RDgzQ1x1RENDRiAke3N0YXRzLmR1ZX0gZHVlYCk7XG4gICAgICBzdGF0dXNCYXJJdGVtLnRpdGxlID0gYCR7c3RhdHMuZHVlfSBjYXJkcyBkdWUgZm9yIHJldmlld1xcbiR7c3RhdHMubmV3fSBuZXcgY2FyZHNgO1xuICAgIH07XG5cbiAgICAvLyBcdTUyMURcdTU5Q0JcdTY2RjRcdTY1QjBcbiAgICB1cGRhdGVTdGF0dXMoKTtcblxuICAgIC8vIFx1NkJDRlx1NTIwNlx1OTQ5Rlx1NjZGNFx1NjVCMFx1NEUwMFx1NkIyMVxuICAgIHRoaXMucmVnaXN0ZXJJbnRlcnZhbChcbiAgICAgIHdpbmRvdy5zZXRJbnRlcnZhbCh1cGRhdGVTdGF0dXMsIDYwMDAwKVxuICAgICk7XG5cbiAgICAvLyBcdTcwQjlcdTUxRkJcdTYyNTNcdTVGMDBcdTU5MERcdTRFNjBcbiAgICBzdGF0dXNCYXJJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5hY3RpdmF0ZVJldmlldygpO1xuICAgIH0pO1xuICB9XG59IiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIExlYXJuaW5nU3lzdGVtUGx1Z2luIGZyb20gJy4uL21haW4nO1xuXG5leHBvcnQgY2xhc3MgU2V0dGluZ3NUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbjtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnTGVhcm5pbmcgU3lzdGVtIFNldHRpbmdzJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBleHRyYWN0aW9uJylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgYXV0b21hdGljIGNvbnRlbnQgZXh0cmFjdGlvbicpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZXh0cmFjdGlvbkVuYWJsZWQpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmV4dHJhY3Rpb25FbmFibGVkID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0F1dG8gc2NhbicpXG4gICAgICAuc2V0RGVzYygnQXV0b21hdGljYWxseSBzY2FuIGZpbGVzIHdoZW4gdGhleSBhcmUgb3BlbmVkJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvU2NhbilcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1NjYW4gPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRGVmYXVsdCBkZWNrJylcbiAgICAgIC5zZXREZXNjKCdEZWZhdWx0IGRlY2sgbmFtZSBmb3IgbmV3IGZsYXNoY2FyZHMnKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdEZWZhdWx0JylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdERlY2spXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHREZWNrID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcbiAgfVxufSIsICIvLyBTaWRlYmFyT3ZlcnZpZXdWaWV3LnRzIC0gXHU1QjhDXHU2NTc0XHU1QjlFXHU3M0IwXHU3MjQ4XHU2NzJDXG5pbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgVEZpbGUsIE1lbnUsIE5vdGljZSwgTW9kYWwsIEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIExlYXJuaW5nU3lzdGVtUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgQ29udGVudFVuaXQgfSBmcm9tICcuLi9jb3JlL0RhdGFNYW5hZ2VyJztcbmltcG9ydCB7IEZsYXNoY2FyZCB9IGZyb20gJy4uL2NvcmUvRmxhc2hjYXJkTWFuYWdlcic7XG5pbXBvcnQgeyBRdWlja0ZsYXNoY2FyZENyZWF0b3IgfSBmcm9tICcuLi9jb3JlL1F1aWNrRmxhc2hjYXJkQ3JlYXRvcic7XG5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfU0lERUJBUl9PVkVSVklFVyA9ICdsZWFybmluZy1zeXN0ZW0tc2lkZWJhci1vdmVydmlldyc7XG5leHBvcnQgY29uc3QgVklFV19UWVBFX01BSU5fT1ZFUlZJRVcgPSAnbGVhcm5pbmctc3lzdGVtLW1haW4tb3ZlcnZpZXcnO1xuXG50eXBlIEZpbHRlck1vZGUgPSAnYWxsJyB8ICdhbm5vdGF0ZWQnIHwgJ2ZsYXNoY2FyZHMnO1xudHlwZSBEaXNwbGF5TW9kZSA9ICdzaWRlYmFyJyB8ICdtYWluJztcbnR5cGUgR3JvdXBNb2RlID0gJ2ZpbGUnIHwgICdhbm5vdGF0aW9uJyB8ICd0YWcnIHwgJ2RhdGUnO1xudHlwZSBWaWV3VHlwZSA9ICdub3RlcycgfCAnY2FyZHMnO1xuXG5leHBvcnQgIGNsYXNzIFNpZGViYXJPdmVydmlld1ZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW47XG4gIFxuICAvLyBcdTcyQjZcdTYwMDFcdTdCQTFcdTc0MDZcbiAgcHJpdmF0ZSBmb3JjZU1haW5Nb2RlOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgc2VhcmNoUXVlcnk6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIGZpbHRlck1vZGU6IEZpbHRlck1vZGUgPSAnYWxsJztcbiAgcHJpdmF0ZSBncm91cE1vZGU6IEdyb3VwTW9kZSA9ICdmaWxlJztcbiAgcHJpdmF0ZSBzZWxlY3RlZEZpbGU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGRpc3BsYXlNb2RlOiBEaXNwbGF5TW9kZSA9ICdzaWRlYmFyJzsgXG4gIHByaXZhdGUgdmlld1R5cGU6IFZpZXdUeXBlID0gJ25vdGVzJztcbiAgcHJpdmF0ZSBhY3RpdmVNZW51SWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHNhdmVkU2Nyb2xsUG9zaXRpb246IG51bWJlciA9IDA7XG4gIHByaXZhdGUgc2hvdWxkUmVzdG9yZVNjcm9sbDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIGJhdGNoTW9kZTogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIHNlbGVjdGVkVW5pdElkczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG4gIHByaXZhdGUgc2VsZWN0ZWRDYXJkSWRzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcblxuICBcbiAgLy8gXHU2MDI3XHU4MEZEXHU0RjE4XHU1MzE2XG4gIHByaXZhdGUgc2VhcmNoRGVib3VuY2VUaW1lcjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgaXNSZW5kZXJpbmc6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luLCBmb3JjZU1haW5Nb2RlID0gZmFsc2UpIHtcbiAgICBzdXBlcihsZWFmKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLmZvcmNlTWFpbk1vZGUgPSBmb3JjZU1haW5Nb2RlOyAgXG5cblxuICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgaWYgKGFjdGl2ZUZpbGUpIHtcbiAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IGFjdGl2ZUZpbGUucGF0aDtcbiAgfVxuICAgIC8vICoqXHU0RkVFXHU2NTM5OiBcdTZERkJcdTUyQTBcdTk2MzJcdTYyOTZcdTc2ODQgcmVzaXplIFx1NzZEMVx1NTQyQyoqXG4gICAgbGV0IHJlc2l6ZVRpbWVyOiBudW1iZXI7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dChyZXNpemVUaW1lcik7XG4gICAgICByZXNpemVUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5kZXRlY3REaXNwbGF5TW9kZSgpO1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgfSwgMTUwKTtcbiAgICB9KTtcbiAgICAvLyBcdTc2RDFcdTU0MkNcdTdBOTdcdTUzRTNcdTU5MjdcdTVDMEZcdTUzRDhcdTUzMTZcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuICAgICAgdGhpcy5kZXRlY3REaXNwbGF5TW9kZSgpO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgLy8gcmV0dXJuIHRoaXMuZm9yY2VNYWluTW9kZSA/IFZJRVdfVFlQRV9NQUlOX09WRVJWSUVXIDogVklFV19UWVBFX1NJREVCQVJfT1ZFUlZJRVc7XG4gIC8vICBcdThDMDNcdThCRDVcbiAgICBjb25zdCB2aWV3VHlwZSA9IHRoaXMuZm9yY2VNYWluTW9kZSA/IFZJRVdfVFlQRV9NQUlOX09WRVJWSUVXIDogVklFV19UWVBFX1NJREVCQVJfT1ZFUlZJRVc7XG5cbiAgICByZXR1cm4gdmlld1R5cGU7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnTGVhcm5pbmcgT3ZlcnZpZXcnO1xuICB9XG5cbiAgZ2V0SWNvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiAnYm9vay1tYXJrZWQnO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuXG4gICAgXG4gICAgdGhpcy5kZXRlY3REaXNwbGF5TW9kZSgpO1xuICBcbiAgICBpZiAoIXRoaXMuZm9yY2VNYWluTW9kZSkge1xuICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2FjdGl2ZS1sZWFmLWNoYW5nZScsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgICBpZiAoYWN0aXZlRmlsZSAmJiB0aGlzLmRpc3BsYXlNb2RlID09PSAnc2lkZWJhcicpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gYWN0aXZlRmlsZS5wYXRoO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBcbiAgICB0aGlzLnJlbmRlcigpO1xuICAgIFxuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTY4MzhcdTVGQzNcdTY1QjlcdTZDRDUgPT09PT09PT09PT09PT09PT09PT1cbiAgXG4gIC8qKlxuICAgKiBcdTY4QzBcdTZENEJcdTVGNTNcdTUyNERcdTY2M0VcdTc5M0FcdTZBMjFcdTVGMEZcdUZGMDhcdTRGQTdcdThGQjlcdTY4MEYgdnMgXHU0RTNCXHU3NTRDXHU5NzYyXHVGRjA5XG4gICAqL1xuICBwcml2YXRlIGRldGVjdERpc3BsYXlNb2RlKCkge1xuICAgIGlmICh0aGlzLmZvcmNlTWFpbk1vZGUpIHtcbiAgICAgIHRoaXMuZGlzcGxheU1vZGUgPSAnbWFpbic7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBhcmVudFNwbGl0ID0gKHRoaXMubGVhZiBhcyBhbnkpLnBhcmVudFNwbGl0O1xuICAgIGNvbnN0IGlzTGVmdFNpZGViYXIgPSBwYXJlbnRTcGxpdD8udHlwZSA9PT0gJ3NwbGl0JyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmxlZnRTcGxpdCA9PT0gcGFyZW50U3BsaXQ7XG4gICAgY29uc3QgaXNSaWdodFNpZGViYXIgPSBwYXJlbnRTcGxpdD8udHlwZSA9PT0gJ3NwbGl0JyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yaWdodFNwbGl0ID09PSBwYXJlbnRTcGxpdDtcbiAgICBcbiAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGFpbmVyRWw7XG4gICAgY29uc3Qgd2lkdGggPSBjb250YWluZXJFbC5jbGllbnRXaWR0aDtcbiAgICBjb25zdCBpc05hcnJvdyA9IHdpZHRoIDwgNTAwO1xuICAgIFxuICAgIGNvbnN0IGlzU2lkZWJhciA9IGlzTGVmdFNpZGViYXIgfHwgaXNSaWdodFNpZGViYXIgfHwgaXNOYXJyb3c7XG5cbiAgICB0aGlzLmRpc3BsYXlNb2RlID0gaXNTaWRlYmFyID8gJ3NpZGViYXInIDogJ21haW4nO1xuICAgIFxuICB9XG5cbiAgLyoqXG4gICAqIFx1NTIzN1x1NjVCMFx1ODlDNlx1NTZGRVxuICAgKi9cbiAgcmVmcmVzaCgpIHtcbiAgICBcbiAgICAvLyBcdUQ4M0RcdUREMjcgXHU1OTgyXHU2NzlDXHU2QjYzXHU1NzI4XHU2RTMyXHU2N0QzXHVGRjBDXHU2ODA3XHU4QkIwXHU5NzAwXHU4OTgxXHU1MThEXHU2QjIxXHU1MjM3XHU2NUIwXG4gICAgaWYgKHRoaXMuaXNSZW5kZXJpbmcpIHtcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIFx1RDgzRFx1REQyNyBcdTZFMDVcdTk2NjRcdTY0MUNcdTdEMjJcdTk2MzJcdTYyOTZcdTVCOUFcdTY1RjZcdTU2NjhcbiAgICBpZiAodGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyICE9PSBudWxsKSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc2VhcmNoRGVib3VuY2VUaW1lcik7XG4gICAgICB0aGlzLnNlYXJjaERlYm91bmNlVGltZXIgPSBudWxsO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdUQ4M0RcdUREMjcgXHU2ODA3XHU4QkIwXHU5NzAwXHU4OTgxXHU2MDYyXHU1OTBEXHU2RURBXHU1MkE4XHU0RjREXHU3RjZFXG4gICAgdGhpcy5zaG91bGRSZXN0b3JlU2Nyb2xsID0gdHJ1ZTtcbiAgICBcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbi8vcmVuZGVyXHU2MkM2XHU1MjA2XHU1MUZEXHU2NTcwXG5wcml2YXRlIHJlc2V0SW50ZXJhY3Rpb25TdGF0ZShjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gIGNvbnRhaW5lci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2F1dG8nO1xuICBjb25zdCB0b29sYmFyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyLXRvb2xiYXInKSBhcyBIVE1MRWxlbWVudDtcbiAgaWYgKHRvb2xiYXIpIHtcbiAgICB0b29sYmFyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7XG4gICAgdG9vbGJhci5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgdG9vbGJhci5zdHlsZS56SW5kZXggPSAnMTAwJztcbiAgfVxufVxucHJpdmF0ZSBzYXZlU2Nyb2xsUG9zaXRpb24oY29udGFpbmVyOkhUTUxFbGVtZW50KXtcbiAgaWYgKHRoaXMuZGlzcGxheU1vZGUgPT09ICdzaWRlYmFyJykge1xuICAgIGNvbnN0IGNvbnRlbnRMaXN0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyLWNvbnRlbnQtbGlzdCcpIGFzIEhUTUxFbGVtZW50O1xuICAgIGlmIChjb250ZW50TGlzdCkge1xuICAgICAgdGhpcy5zYXZlZFNjcm9sbFBvc2l0aW9uID0gY29udGVudExpc3Quc2Nyb2xsVG9wO1xuICAgIH1cbiAgfVxuICBcbn1cblxuXG4gIC8qKlxuICAgKiBcdTRFM0JcdTZFMzJcdTY3RDNcdTY1QjlcdTZDRDVcbiAgICovXG4gIFxuICBwcml2YXRlIHJlbmRlcigpIHtcblxuICAgICAgLy8gXHVEODNEXHVERDI3IFx1OUE4Q1x1OEJDMVx1NjU3MFx1NjM2RVx1NjYyRlx1NTQyNlx1NURGMlx1NTJBMFx1OEY3RFxuICBjb25zdCBhbGxVbml0cyA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldEFsbENvbnRlbnRVbml0cygpO1xuICBjb25zdCB1bml0c1dpdGhDYXJkcyA9IGFsbFVuaXRzLmZpbHRlcih1ID0+IHUuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApO1xuXG4gICAgaWYgKHRoaXMuaXNSZW5kZXJpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2VhcmNoRGVib3VuY2VUaW1lciAhPT0gbnVsbCkge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnNlYXJjaERlYm91bmNlVGltZXIpO1xuICAgICAgdGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5pc1JlbmRlcmluZyA9IHRydWU7XG4gICAgXG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudDtcbiAgICBcbiAgIFxuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRlx1NEZBN1x1OEZCOVx1NjgwRlx1NkEyMVx1NUYwRlx1RkYwQ1x1NjAzQlx1NjYyRlx1NEZERFx1NUI1OFx1NUY1M1x1NTI0RFx1NkVEQVx1NTJBOFx1NEY0RFx1N0Y2RVxuICAgIHRoaXMuc2F2ZVNjcm9sbFBvc2l0aW9uKGNvbnRhaW5lcik7XG4gICAgLy8gXHVEODNEXHVERDI3IFx1NkUwNVx1OTY2NFx1NjI0MFx1NjcwOVx1NTNFRlx1ODBGRFx1OTYzQlx1NTg1RVx1NEVBNFx1NEU5Mlx1NzY4NFx1NjgzN1x1NUYwRlxuICAgIHRoaXMucmVzZXRJbnRlcmFjdGlvblN0YXRlKGNvbnRhaW5lcilcbiAgICAgIC8vIFx1MjcwNSBcdTU5ODJcdTY3OUNcdTY2MkZcdTRFM0JcdTc1NENcdTk3NjJcdTZBMjFcdTVGMEZcdTRFMTRcdTZDQTFcdTY3MDlcdTkwMDlcdTRFMkRcdUZGMENcdTUyMURcdTU5Q0JcdTUzMTZcdTlFRDhcdThCQTRcdTkwMDlcdTRFMkRcbiAgaWYgKHRoaXMuZGlzcGxheU1vZGUgPT09ICdtYWluJyAmJiAhdGhpcy5zZWxlY3RlZEZpbGUgJiYgdGhpcy52aWV3VHlwZSA9PT0gJ25vdGVzJykge1xuICAgIGNvbnN0IHVuaXRzID0gdGhpcy5nZXRGaWx0ZXJlZFVuaXRzKCk7XG4gICAgY29uc3QgZ3JvdXBlZCA9IHRoaXMuZ3JvdXBVbml0cyh1bml0cyk7XG4gICAgaWYgKGdyb3VwZWQubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5zZWxlY3RlZEZpbGUgPSBncm91cGVkWzBdLmdyb3VwS2V5O1xuICAgIH1cbiAgfVxuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIGNvbnRhaW5lci5hZGRDbGFzcygnbGVhcm5pbmctb3ZlcnZpZXctY29udGFpbmVyJyk7XG4gICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS1tb2RlJywgdGhpcy5kaXNwbGF5TW9kZSk7XG4gIFxuICAgIC8vIFx1NjgzOVx1NjM2RVx1NkEyMVx1NUYwRlx1NkUzMlx1NjdEM1x1NEUwRFx1NTQwQ1x1NUUwM1x1NUM0MFxuICAgIGlmICh0aGlzLmRpc3BsYXlNb2RlID09PSAnc2lkZWJhcicpIHtcbiAgICAgIHRoaXMucmVuZGVyU2lkZWJhck1vZGUoY29udGFpbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW5kZXJNYWluTW9kZShjb250YWluZXIpO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTk3MDBcdTg5ODFcdTYwNjJcdTU5MERcdTZFREFcdTUyQThcdTRGNERcdTdGNkVcbiAgICBpZiAodGhpcy5kaXNwbGF5TW9kZSA9PT0gJ3NpZGViYXInICYmIHRoaXMuc2hvdWxkUmVzdG9yZVNjcm9sbCkge1xuICAgICAgY29uc3QgY29udGVudExpc3QgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnNpZGViYXItY29udGVudC1saXN0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAoY29udGVudExpc3QpIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBjb250ZW50TGlzdC5zY3JvbGxUb3AgPSB0aGlzLnNhdmVkU2Nyb2xsUG9zaXRpb247XG5cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMuaXNSZW5kZXJpbmcgPSBmYWxzZTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIFx1NEVDNVx1NTIzN1x1NjVCMFx1NTE4NVx1NUJCOVx1NTMzQVx1NTdERlx1RkYwOFx1NEUwRFx1OTFDRFx1NjVCMFx1NkUzMlx1NjdEM1x1NjU3NFx1NEUyQVx1ODlDNlx1NTZGRVx1RkYwOVxuICAgKi9cbiAgcHJpdmF0ZSByZWZyZXNoQ29udGVudCgpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdIGFzIEhUTUxFbGVtZW50O1xuICAgIFxuICAgIGlmICh0aGlzLmRpc3BsYXlNb2RlID09PSAnc2lkZWJhcicpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnRMaXN0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyLWNvbnRlbnQtbGlzdCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgaWYgKGNvbnRlbnRMaXN0KSB7XG4gICAgICAgIC8vIFx1NEZERFx1NUI1OFx1NkVEQVx1NTJBOFx1NEY0RFx1N0Y2RVxuICAgICAgICB0aGlzLnNhdmVkU2Nyb2xsUG9zaXRpb24gPSBjb250ZW50TGlzdC5zY3JvbGxUb3A7XG4gICAgICAgIFxuICAgICAgICBjb250ZW50TGlzdC5lbXB0eSgpO1xuICAgICAgICB0aGlzLnJlbmRlckNvbXBhY3RDb250ZW50TGlzdChjb250ZW50TGlzdCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTYwNjJcdTU5MERcdTZFREFcdTUyQThcdTRGNERcdTdGNkVcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBjb250ZW50TGlzdC5zY3JvbGxUb3AgPSB0aGlzLnNhdmVkU2Nyb2xsUG9zaXRpb247XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByaWdodFBhbmVsID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5yaWdodC1wYW5lbCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgaWYgKHJpZ2h0UGFuZWwpIHtcbiAgICAgICAgcmlnaHRQYW5lbC5lbXB0eSgpO1xuICAgICAgICB0aGlzLnJlbmRlclJpZ2h0UGFuZWwocmlnaHRQYW5lbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0gXHU0RkE3XHU4RkI5XHU2ODBGXHU2QTIxXHU1RjBGXHU2RTMyXHU2N0QzID09PT09PT09PT09PT09PT09PT09XG4gIFxuICBwcml2YXRlIHJlbmRlclNpZGViYXJNb2RlKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBcdTk4NzZcdTkwRThcdTVERTVcdTUxNzdcdTY4MEZcbiAgICB0aGlzLnJlbmRlclNpZGViYXJUb29sYmFyKGNvbnRhaW5lcik7XG4gICAgXG4gICAgLy8gXHU1MTg1XHU1QkI5XHU1MjE3XHU4ODY4XHVGRjA4XHU3RDI3XHU1MUQxXHU2QTIxXHU1RjBGXHVGRjA5XG4gICAgY29uc3QgY29udGVudExpc3QgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc2lkZWJhci1jb250ZW50LWxpc3QnIH0pO1xuICAgIHRoaXMucmVuZGVyQ29tcGFjdENvbnRlbnRMaXN0KGNvbnRlbnRMaXN0KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyU2lkZWJhclRvb2xiYXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHRvb2xiYXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc2lkZWJhci10b29sYmFyJyB9KTtcbiAgICAvLyBcdTY0MUNcdTdEMjJcdTY4NDZcbiAgICBjb25zdCBzZWFyY2hDb250YWluZXIgPSB0b29sYmFyLmNyZWF0ZURpdih7IGNsczogJ3NlYXJjaC1jb250YWluZXInIH0pO1xuICAgIGNvbnN0IHNlYXJjaElucHV0ID0gc2VhcmNoQ29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnXHVEODNEXHVERDBEIFx1NjQxQ1x1N0QyMlx1N0IxNFx1OEJCMC4uLicsXG4gICAgICBjbHM6ICdzZWFyY2gtaW5wdXQnXG4gICAgfSk7XG4gICAgc2VhcmNoSW5wdXQudmFsdWUgPSB0aGlzLnNlYXJjaFF1ZXJ5O1xuICAgIFxuICAgIC8vIFx1NEY3Rlx1NzUyOFx1OTYzMlx1NjI5Nlx1NEYxOFx1NTMxNlx1NjQxQ1x1N0QyMlxuICAgIHNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgdGhpcy5zZWFyY2hRdWVyeSA9IHZhbHVlO1xuICAgICAgXG4gICAgICAvLyBcdTZFMDVcdTk2NjRcdTRFNEJcdTUyNERcdTc2ODRcdTVCOUFcdTY1RjZcdTU2NjhcbiAgICAgIGlmICh0aGlzLnNlYXJjaERlYm91bmNlVGltZXIgIT09IG51bGwpIHtcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnNlYXJjaERlYm91bmNlVGltZXIpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBcdThCQkVcdTdGNkVcdTY1QjBcdTc2ODRcdTVCOUFcdTY1RjZcdTU2NjhcbiAgICAgIHRoaXMuc2VhcmNoRGVib3VuY2VUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoQ29udGVudCgpO1xuICAgICAgfSwgMzAwKTsgLy8gMzAwbXMgXHU5NjMyXHU2Mjk2XG4gICAgfSk7XG5cbiAgICAvLyBcdThGQzdcdTZFRTRcdTU2NjhcbiAgICBjb25zdCBmaWx0ZXJzID0gdG9vbGJhci5jcmVhdGVEaXYoeyBjbHM6ICdmaWx0ZXItY2hpcHMnIH0pO1xuICAgIFxuICAgIGNvbnN0IGZpbHRlck9wdGlvbnMgPSBbXG4gICAgICB7IG1vZGU6ICdhbGwnIGFzIEZpbHRlck1vZGUsIGljb246ICdcdUQ4M0RcdURDREQnLCBsYWJlbDogJ1x1NTE2OFx1OTBFOCcgfSxcbiAgICAgIHsgbW9kZTogJ2Fubm90YXRlZCcgYXMgRmlsdGVyTW9kZSwgaWNvbjogJ1x1RDgzRFx1RENBQycsIGxhYmVsOiAnXHU2Mjc5XHU2Q0U4JyB9LFxuICAgICAgeyBtb2RlOiAnZmxhc2hjYXJkcycgYXMgRmlsdGVyTW9kZSwgaWNvbjogJ1x1RDgzQ1x1RENDRicsIGxhYmVsOiAnXHU5NUVBXHU1MzYxJyB9XG4gICAgXTtcblxuICAgIGZpbHRlck9wdGlvbnMuZm9yRWFjaCgoeyBtb2RlLCBpY29uLCBsYWJlbCB9KSA9PiB7XG4gICAgICBjb25zdCBjaGlwID0gZmlsdGVycy5jcmVhdGVEaXYoe1xuICAgICAgICBjbHM6IGBmaWx0ZXItY2hpcCAke3RoaXMuZmlsdGVyTW9kZSA9PT0gbW9kZSA/ICdhY3RpdmUnIDogJyd9YCxcbiAgICAgICAgdGV4dDogYCR7aWNvbn0gJHtsYWJlbH1gICBcbiAgICAgIH0pO1xuICAgICAgY2hpcC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZmlsdGVyTW9kZSAhPT0gbW9kZSkge1xuICAgICAgICAgIHRoaXMuZmlsdGVyTW9kZSA9IG1vZGU7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5jbGVhcigpO1xuICAgICAgICAgIHRoaXMuYmF0Y2hNb2RlID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5zaG91bGRSZXN0b3JlU2Nyb2xsID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBcdTUyMDZcdTdFQzRcdTZBMjFcdTVGMEZcdTUyMDdcdTYzNjJcbiAgICBjb25zdCBncm91cFN3aXRjaGVyID0gdG9vbGJhci5jcmVhdGVEaXYoeyBjbHM6ICdncm91cC1zd2l0Y2hlcicgfSk7XG4gICAgXG4gICAgY29uc3QgZ3JvdXBPcHRpb25zID0gW1xuICAgICAgeyBtb2RlOiAnZmlsZScgYXMgR3JvdXBNb2RlLCBpY29uOiAnXHVEODNEXHVEQ0MxJywgdG9vbHRpcDogJ1x1NjMwOVx1NjU4N1x1NEVGNicgfSxcbiAgICAgIC8vIHsgbW9kZTogJ2Fubm90YXRpb24nIGFzIEdyb3VwTW9kZSwgaWNvbjogJ1x1RDgzRFx1RENBQycsIHRvb2x0aXA6ICdcdTYyNzlcdTZDRTgnIH0sXG4gICAgICB7IG1vZGU6ICd0YWcnIGFzIEdyb3VwTW9kZSwgaWNvbjogJ1x1RDgzQ1x1REZGN1x1RkUwRicsIHRvb2x0aXA6ICdcdTYzMDlcdTY4MDdcdTdCN0UnIH0sXG4gICAgICB7IG1vZGU6ICdkYXRlJyBhcyBHcm91cE1vZGUsIGljb246ICdcdUQ4M0RcdURDQzUnLCB0b29sdGlwOiAnXHU2MzA5XHU2NUU1XHU2NzFGJyB9XG4gICAgXTtcblxuICAgIGdyb3VwT3B0aW9ucy5mb3JFYWNoKCh7IG1vZGUsIGljb24sIHRvb2x0aXAgfSkgPT4ge1xuICAgICAgY29uc3QgYnRuID0gZ3JvdXBTd2l0Y2hlci5jcmVhdGVEaXYoe1xuICAgICAgICBjbHM6IGBncm91cC1idG4gJHt0aGlzLmdyb3VwTW9kZSA9PT0gbW9kZSA/ICdhY3RpdmUnIDogJyd9YCxcbiAgICAgICAgdGV4dDogaWNvblxuICAgICAgfSk7XG4gICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSAhPT0gbW9kZSkge1xuICAgICAgICAgIHRoaXMuZ3JvdXBNb2RlID0gbW9kZTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBcdUQ4M0RcdUREMjcgXHU5MUNEXHU2NUIwXHU4QkJFXHU3RjZFIHNlbGVjdGVkRmlsZVxuICAgICAgICAgIGlmICh0aGlzLmRpc3BsYXlNb2RlID09PSAnc2lkZWJhcicpIHtcbiAgICAgICAgICAgIC8vIFx1NEZBN1x1OEZCOVx1NjgwRlx1NkEyMVx1NUYwRlx1RkYxQVx1NEZERFx1NjMwMVx1NUY1M1x1NTI0RFx1NjU4N1x1NEVGNlxuICAgICAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IGFjdGl2ZUZpbGUgPyBhY3RpdmVGaWxlLnBhdGggOiBudWxsO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBcdTRFM0JcdTc1NENcdTk3NjJcdTZBMjFcdTVGMEZcdUZGMUFcdTZFMDVcdTdBN0FcdTkwMDlcdTYyRTlcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5jbGVhcigpO1xuICAgICAgICAgIHRoaXMuYmF0Y2hNb2RlID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cblxuLy8gXHU3RURGXHU4QkExXHU0RkUxXHU2MDZGXHU1NDhDXHU2Mjc5XHU5MUNGXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFXG5jb25zdCBzdGF0c1JvdyA9IHRvb2xiYXIuY3JlYXRlRGl2KHsgY2xzOiAnc3RhdHMtcm93JyB9KTtcblxuLy8gXHU1MTY4XHU5MDA5XHU2MzA5XHU5NEFFXG50aGlzLmNyZWF0ZVNlbGVjdEFsbEJ1dHRvbihzdGF0c1JvdywgJ3NpZGViYXInKTtcblxuLy8gXHU2Mjc5XHU5MUNGXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFXG50aGlzLmNyZWF0ZUJhdGNoQWN0aW9uQnV0dG9ucyhzdGF0c1JvdywgJ3NpZGViYXInKTtcblxuXG5cbiAgLy8gXHU1M0Q2XHU2RDg4XHU2MzA5XHU5NEFFXHVGRjA4XHU2Mjc5XHU5MUNGXHU2QTIxXHU1RjBGXHU0RTBCXHU1OUNCXHU3RUM4XHU2NjNFXHU3OTNBXHVGRjA5XG5pZiAodGhpcy5iYXRjaE1vZGUpIHtcbiAgY29uc3QgY2FuY2VsQnRuID0gc3RhdHNSb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICB0ZXh0OiAnXHUyNzE1JyxcbiAgICBjbHM6ICdjYW5jZWwtc2VsZWN0aW9uLWJ0bi1zaWRlYmFyJyxcbiAgICB0aXRsZTogJ1x1NTE3M1x1OTVFRCdcbiAgfSk7XG4gIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gIH0pO1xufVxuXG5cblxuICB9XG5cbiAgLyoqXG4gICAqIFx1NkUzMlx1NjdEM1x1N0QyN1x1NTFEMVx1NTE4NVx1NUJCOVx1NTIxN1x1ODg2OFx1RkYwOFx1NEZBN1x1OEZCOVx1NjgwRlx1NkEyMVx1NUYwRlx1RkYwOVxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJDb21wYWN0Q29udGVudExpc3QoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGxldCB1bml0cyA9IHRoaXMuZ2V0RmlsdGVyZWRVbml0cygpO1xuXG4gIC8vIFx1NjVCMFx1NTg5RTpcdTU5ODJcdTY3OUNcdTY2MkZcdTRGQTdcdThGQjlcdTY4MEZcdTZBMjFcdTVGMEZcdTRFMTRcdTY3MDlcdTkwMDlcdTRFMkRcdTY1ODdcdTRFRjYsXHU1M0VBXHU2NjNFXHU3OTNBXHU4QkU1XHU2NTg3XHU0RUY2XHU3Njg0XHU3QjE0XHU4QkIwXG4gIGlmICh0aGlzLmRpc3BsYXlNb2RlID09PSAnc2lkZWJhcicgJiYgdGhpcy5zZWxlY3RlZEZpbGUpIHtcbiAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+IHVuaXQuc291cmNlLmZpbGUgPT09IHRoaXMuc2VsZWN0ZWRGaWxlKTtcbiAgfVxuXG4gIGlmICh1bml0cy5sZW5ndGggPT09IDApIHtcbiAgICAvLyBcdUQ4M0RcdUREMjcgXHU2REZCXHU1MkEwXHU4RkQ5XHU2QkI1Olx1NjYzRVx1NzkzQVx1NjNEMFx1NzkzQVx1NEZFMVx1NjA2RlxuICAgIGNvbnN0IGVtcHR5RGl2ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2VtcHR5LXN0YXRlJyB9KTtcbiAgICBcbiAgICBpZiAodGhpcy5zZWxlY3RlZEZpbGUpIHtcbiAgICAgIGVtcHR5RGl2LmlubmVySFRNTCA9IGBcbiAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjtcIj5cbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC1zaXplOiAzMnB4OyBtYXJnaW4tYm90dG9tOiAxMHB4O1wiPlx1RDgzRFx1RENFRDwvZGl2PlxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XCI+XHU1RjUzXHU1MjREXHU2NTg3XHU2ODYzXHU2NjgyXHU2NUUwXHU3QjE0XHU4QkIwPC9kaXY+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtc2l6ZTogMTJweDsgY29sb3I6IHZhcigtLXRleHQtZmFpbnQpOyBtYXJnaW4tdG9wOiA4cHg7XCI+XG4gICAgICAgICAgICAke3RoaXMuZmlsdGVyTW9kZSAhPT0gJ2FsbCcgPyAnXHU1QzFEXHU4QkQ1XHU1MjA3XHU2MzYyXHU1MTc2XHU0RUQ2XHU4RkM3XHU2RUU0XHU1NjY4XHU2N0U1XHU3NzBCJyA6ICdcdTVGMDBcdTU5Q0JcdTlBRDhcdTRFQUVcdTY1ODdcdTY3MkNcdTY3NjVcdTUyMUJcdTVFRkFcdTdCMTRcdThCQjAnfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVtcHR5RGl2LnRleHRDb250ZW50ID0gJ1x1NjY4Mlx1NjVFMFx1NTE4NVx1NUJCOSc7XG4gICAgfVxuICAgIFxuICAgIHJldHVybjtcbiAgfVxuXG4gICAgY29uc3QgZ3JvdXBlZCA9IHRoaXMuZ3JvdXBVbml0cyh1bml0cyk7XG5cbiAgICBncm91cGVkLmZvckVhY2goKHsgZ3JvdXBLZXksIHVuaXRzOiBncm91cFVuaXRzIH0pID0+IHtcbiAgICAgIGNvbnN0IGdyb3VwRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY29udGVudC1ncm91cCcgfSk7XG5cbiAgICAgIC8vIFx1NTIwNlx1N0VDNFx1NjgwN1x1OTg5OFxuICAgICAgY29uc3QgaGVhZGVyID0gZ3JvdXBFbC5jcmVhdGVEaXYoeyBjbHM6ICdncm91cC1oZWFkZXInIH0pO1xuICAgICAgaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiB0aGlzLmdldEdyb3VwSWNvbih0aGlzLmdyb3VwTW9kZSksIGNsczogJ2dyb3VwLWljb24nIH0pO1xuICAgICAgaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBncm91cEtleSwgY2xzOiAnZ3JvdXAtdGl0bGUnIH0pO1xuICAgICAgaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHtncm91cFVuaXRzLmxlbmd0aH1gLCBjbHM6ICdncm91cC1jb3VudCcgfSk7XG5cbiAgICAgIC8vIFx1NTE4NVx1NUJCOVx1NTM2MVx1NzI0N1x1NTIxN1x1ODg2OFxuICAgICAgZ3JvdXBVbml0cy5mb3JFYWNoKHVuaXQgPT4ge1xuICAgICAgICB0aGlzLnJlbmRlckNvbXBhY3RDYXJkKGdyb3VwRWwsIHVuaXQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogXHU2RTMyXHU2N0QzXHU3RDI3XHU1MUQxXHU1MzYxXHU3MjQ3XHVGRjA4XHU0RkE3XHU4RkI5XHU2ODBGXHU2QTIxXHU1RjBGXHVGRjA5XG4gICAqL1xuICBwcml2YXRlIHJlbmRlckNvbXBhY3RDYXJkKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0KSB7XG4gICAgY29uc3QgY2FyZCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjb21wYWN0LWNhcmQnIH0pO1xuXG4gICAgLy8gXHU2Mjc5XHU5MUNGXHU5MDA5XHU2MkU5XHU2QTIxXHU1RjBGXHVGRjFBXHU2REZCXHU1MkEwY2hlY2tib3hcbiAgICBpZiAodGhpcy5iYXRjaE1vZGUpIHtcbiAgICAgIGNvbnN0IGNoZWNrYm94ID0gY2FyZC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgIGNsczogJ2JhdGNoLWNoZWNrYm94J1xuICAgICAgfSk7XG4gICAgICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdW5pdC1pZCcsIHVuaXQuaWQpO1xuICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRoaXMuc2VsZWN0ZWRVbml0SWRzLmhhcyh1bml0LmlkKTtcbiAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCkge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmFkZCh1bml0LmlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5kZWxldGUodW5pdC5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuLy8gXHU1REU2XHU0RkE3XHU2MzA3XHU3OTNBXHU1NjY4XG5jb25zdCBpbmRpY2F0b3IgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ2NhcmQtaW5kaWNhdG9yJyB9KTtcblxuLy8gXHVEODNEXHVERDI3IFx1NjgzOVx1NjM2RSB1bml0LnR5cGUgXHU2REZCXHU1MkEwXHU0RTBEXHU1NDBDXHU3Njg0XHU3QzdCXG5pZiAodW5pdC50eXBlID09PSAnUUEnKSB7XG4gIGluZGljYXRvci5hZGRDbGFzcygndHlwZS1xYScpO1xufSBlbHNlIGlmICh1bml0LnR5cGUgPT09ICdjbG96ZScpIHtcbiAgaW5kaWNhdG9yLmFkZENsYXNzKCd0eXBlLWNsb3plJyk7XG59IGVsc2UgaWYgKHVuaXQudHlwZSA9PT0gJ3RleHQnKSB7XG4gIGluZGljYXRvci5hZGRDbGFzcygndHlwZS10ZXh0Jyk7XG59XG5cbi8vIFx1NEZERFx1NzU1OVx1NTM5Rlx1NjcwOVx1NzY4NFx1NjI3OVx1NkNFOFx1NTQ4Q1x1OTVFQVx1NTM2MVx1NzJCNlx1NjAwMVxuaWYgKHVuaXQuYW5ub3RhdGlvbklkKSBpbmRpY2F0b3IuYWRkQ2xhc3MoJ2hhcy1hbm5vdGF0aW9uJyk7XG5pZiAodW5pdC5mbGFzaGNhcmRJZHMubGVuZ3RoID4gMCkgaW5kaWNhdG9yLmFkZENsYXNzKCdoYXMtZmxhc2hjYXJkJyk7XG4gICAgXG5cbi8vIFx1NTE4NVx1NUJCOVx1NTMzQVx1NTdERlxuY29uc3QgY29udGVudCA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1jb250ZW50JyB9KTtcblxuLy8gXHU1REU2XHU0RTBBXHU4OUQyXHVGRjFBXHU2Mjc5XHU2Q0U4XHU1NkZFXHU2ODA3XG5jb25zdCBoZWFkZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ2NhcmQtaGVhZGVyJyB9KTtcblxuLy8gXHU2NTc0XHU4ODRDXHU2MjY3XHU4ODRDXHU1REU2XHU0RkE3XHU5MDNCXHU4RjkxXG5oZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHRoaXMudG9nZ2xlSW5saW5lQW5ub3RhdGlvbihjYXJkLCB1bml0KTtcbn0pO1xuXG4vLyBcdTYzMDlcdTk0QUVcdTRFMERcdTk3MDBcdTg5ODFcdTRFRkJcdTRGNTVcdTkwM0JcdThGOTFcdUZGMENcdTcwQjlcdTUxRkJcdTRGMUFcdTgxRUFcdTcxMzZcdTg5RTZcdTUzRDEgaGVhZGVyIFx1NzY4NFx1OTAzQlx1OEY5MVxuY29uc3QgYW5ub3RhdGlvbkJ0biA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdhbm5vdGF0aW9uLWJ0bicgfSk7XG5hbm5vdGF0aW9uQnRuLmlubmVySFRNTCA9ICdcdUQ4M0RcdURDQUMnO1xuXG5cbi8vIFx1NTNGM1x1NEUwQVx1ODlEMlx1NURFNVx1NTE3N1x1NjMwOVx1OTRBRVx1RkYwOFx1OTYzQlx1NkI2Mlx1NTE5Mlx1NkNFMVx1RkYwOVxuY29uc3QgdG9vbHMgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC10b29scycgfSk7XG50b29scy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gIGUuc3RvcFByb3BhZ2F0aW9uKCk7IC8vIFx1NTE3M1x1OTUyRVx1RkYwMVx1NEZERFx1OEJDMVx1NTNGM1x1NEZBN1x1NjMwOVx1OTRBRVx1NEUwRFx1ODlFNlx1NTNEMVx1NjU3NFx1ODg0Q1x1NzBCOVx1NTFGQlxufSk7XG4gIFxuXG5cbi8vIDIuIFx1OTc1RVx1NjI3OVx1OTFDRlx1NkEyMVx1NUYwRlx1NEUwQlx1NzY4NFx1OTVFQVx1NTM2MVx1NjMwOVx1OTRBRVxuaWYgKCF0aGlzLmJhdGNoTW9kZSkge1xuICBjb25zdCBmbGFzaGNhcmRCdG4gPSB0b29scy5jcmVhdGVEaXYoeyBjbHM6ICd0b29sLWJ0biBmbGFzaGNhcmQtYnRuJyB9KTtcbiAgZmxhc2hjYXJkQnRuLmlubmVySFRNTCA9ICdcdTI2QTEnO1xuICBmbGFzaGNhcmRCdG4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ1x1NzUxRlx1NjIxMFx1OTVFQVx1NTM2MScpO1xuICBmbGFzaGNhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy5xdWlja0dlbmVyYXRlRmxhc2hjYXJkKHVuaXQpO1xuICB9KTtcbn1cblxuICAgIC8vIFx1NjZGNFx1NTkxQVx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVxuICAgIGNvbnN0IG1vcmVCdG4gPSB0b29scy5jcmVhdGVEaXYoeyBjbHM6ICd0b29sLWJ0biBtb3JlLWJ0bicgfSk7XG4gICAgbW9yZUJ0bi5pbm5lckhUTUwgPSAnXHUyMkVFJztcbiAgICBtb3JlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLnNob3dDb250ZXh0TWVudShlLCB1bml0KTtcbiAgICB9KTtcblxuLy8gXHU3QjE0XHU4QkIwXHU1MTg1XHU1QkI5XHVGRjA4XHU3MEI5XHU1MUZCXHU4REYzXHU4RjZDXHU1MjMwXHU1MzlGXHU2NTg3XHVGRjA5XG5jb25zdCBub3RlVGV4dCA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS10ZXh0JyB9KTtcblxubGV0IGRpc3BsYXlIVE1MID0gJyc7XG5cbi8vIFx1NTk4Mlx1Njc5Q1x1NjYyRiBRQSBcdTdDN0JcdTU3OEJcdUZGMENcdTc1MjhcdTRFMERcdTU0MENcdTY4MzdcdTVGMEZcdTY2M0VcdTc5M0FcdTk1RUVcdTk4OThcdTU0OENcdTdCNTRcdTY4NDhcbmlmICh1bml0LnR5cGUgPT09ICdRQScgJiYgdW5pdC5hbnN3ZXIpIHtcbiAgZGlzcGxheUhUTUwgPSBgPHNwYW4gY2xhc3M9XCJxYS1xdWVzdGlvblwiPiR7dW5pdC5jb250ZW50fTwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJxYS1zZXBhcmF0b3JcIj46Ojwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJxYS1hbnN3ZXJcIj4ke3VuaXQuYW5zd2VyfTwvc3Bhbj5gO1xufVxuLy8gXHU1OTgyXHU2NzlDXHU2NjJGIGNsb3plIFx1N0M3Qlx1NTc4Qlx1RkYwQ1x1OUFEOFx1NEVBRVx1NjYzRVx1NzkzQVx1N0I1NFx1Njg0OFxuZWxzZSBpZiAodW5pdC50eXBlID09PSAnY2xvemUnICYmIHVuaXQuZnVsbENvbnRleHQpIHtcbiAgbGV0IGNvbnRleHQgPSB1bml0LmZ1bGxDb250ZXh0LnJlcGxhY2UoLz09L2csICcnKTtcbiAgY29uc3QgYW5zd2VyID0gdW5pdC5jb250ZW50O1xuICBkaXNwbGF5SFRNTCA9IGNvbnRleHQucmVwbGFjZShcbiAgICBhbnN3ZXIsIFxuICAgIGA8c3BhbiBjbGFzcz1cImNsb3plLWhpZ2hsaWdodFwiPiR7YW5zd2VyfTwvc3Bhbj5gXG4gICk7XG59XG4vLyBcdTdFQUZcdTY1ODdcdTY3MkNcbmVsc2Uge1xuICBkaXNwbGF5SFRNTCA9IHVuaXQuY29udGVudDtcbn1cblxubm90ZVRleHQuaW5uZXJIVE1MID0gZGlzcGxheUhUTUw7XG5cbm5vdGVUZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICB0aGlzLmp1bXBUb1NvdXJjZSh1bml0KTtcbn0pO1xuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU2Mjc5XHU2Q0U4XHVGRjA4XHU1OTgyXHU2NzlDXHU2NzA5XHVGRjA5XG4gICAgY29uc3QgYW5ub3RhdGlvbiA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldENvbnRlbnRBbm5vdGF0aW9uKHVuaXQuaWQpO1xuICAgIGlmIChhbm5vdGF0aW9uKSB7XG4gICAgICBjb25zdCBhbm5FbCA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnYW5ub3RhdGlvbi1wcmV2aWV3JyB9KTtcbiAgICAgIGNvbnN0IGFublRleHQgPSBhbm5vdGF0aW9uLmNvbnRlbnQubGVuZ3RoID4gNjBcbiAgICAgICAgPyBhbm5vdGF0aW9uLmNvbnRlbnQuc3Vic3RyaW5nKDAsIDYwKSArICcuLi4nXG4gICAgICAgIDogYW5ub3RhdGlvbi5jb250ZW50O1xuICAgICAgYW5uRWwudGV4dENvbnRlbnQgPSBgXHVEODNEXHVEQ0FDICR7YW5uVGV4dH1gO1xuICAgICAgXG4gICAgICAvLyBcdTcwQjlcdTUxRkJcdTYyNzlcdTZDRThcdTk4ODRcdTg5QzhcdTRFNUZcdTUzRUZcdTRFRTVcdTVDNTVcdTVGMDBcdTdGMTZcdThGOTFcbiAgICAgIGFubkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdGhpcy50b2dnbGVJbmxpbmVBbm5vdGF0aW9uKGNhcmQsIHVuaXQpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU2ODA3XHU3QjdFXHU1NDhDXHU1MTQzXHU0RkUxXHU2MDZGXG4gICAgY29uc3QgbWV0YSA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1tZXRhJyB9KTtcbiAgICBcbiAgICBpZiAodW5pdC5tZXRhZGF0YS50YWdzLmxlbmd0aCA+IDApIHtcbiAgICAgIHVuaXQubWV0YWRhdGEudGFncy5zbGljZSgwLCAyKS5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgIG1ldGEuY3JlYXRlU3Bhbih7IHRleHQ6IGAjJHt0YWd9YCwgY2xzOiAndGFnJyB9KTtcbiAgICAgIH0pO1xuICAgICAgaWYgKHVuaXQubWV0YWRhdGEudGFncy5sZW5ndGggPiAyKSB7XG4gICAgICAgIG1ldGEuY3JlYXRlU3Bhbih7IHRleHQ6IGArJHt1bml0Lm1ldGFkYXRhLnRhZ3MubGVuZ3RoIC0gMn1gLCBjbHM6ICd0YWctbW9yZScgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHVuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIG1ldGEuY3JlYXRlU3Bhbih7IHRleHQ6IGBcdUQ4M0NcdURDQ0YgJHt1bml0LmZsYXNoY2FyZElkcy5sZW5ndGh9YCwgY2xzOiAnYmFkZ2UnIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFx1NEUzQlx1NzU0Q1x1OTc2Mlx1NkEyMVx1NUYwRlx1NkUzMlx1NjdEMyA9PT09PT09PT09PT09PT09PT09PVxuICBcbiAgcHJpdmF0ZSByZW5kZXJNYWluTW9kZShjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgbGF5b3V0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ21haW4tbGF5b3V0JyB9KTtcblxuICAgIC8vIFx1NURFNlx1NEZBN1x1OTc2Mlx1Njc3RlxuICAgIGNvbnN0IGxlZnRQYW5lbCA9IGxheW91dC5jcmVhdGVEaXYoeyBjbHM6ICdsZWZ0LXBhbmVsJyB9KTtcbiAgICBpZiAoIXRoaXMuc2VsZWN0ZWRGaWxlICYmIHRoaXMudmlld1R5cGUgPT09ICdub3RlcycpIHtcbiAgICAgIGNvbnN0IHVuaXRzID0gdGhpcy5nZXRGaWx0ZXJlZFVuaXRzKCk7XG4gICAgICBjb25zdCBncm91cGVkID0gdGhpcy5ncm91cFVuaXRzKHVuaXRzKTtcbiAgICAgIGlmIChncm91cGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEZpbGUgPSBncm91cGVkWzBdLmdyb3VwS2V5OyAvLyBcdTgxRUFcdTUyQThcdTkwMDlcdTRFMkRcdTdCMkNcdTRFMDBcdTRFMkFcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yZW5kZXJMZWZ0UGFuZWwobGVmdFBhbmVsKTtcblxuICAgIC8vIFx1NTNGM1x1NEZBN1x1OTc2Mlx1Njc3RlxuICAgIGNvbnN0IHJpZ2h0UGFuZWwgPSBsYXlvdXQuY3JlYXRlRGl2KHsgY2xzOiAncmlnaHQtcGFuZWwnIH0pO1xuICAgIHRoaXMucmVuZGVyUmlnaHRQYW5lbChyaWdodFBhbmVsKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTGVmdFBhbmVsKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgLy8gXHU2NDFDXHU3RDIyXHU1NDhDXHU4RkM3XHU2RUU0XG4gICAgdGhpcy5yZW5kZXJNYWluVG9vbGJhcihjb250YWluZXIpO1xuICAgIC8vIFx1OTg3Nlx1OTBFOFx1NTZGQVx1NUI5QVx1NTE2NVx1NTNFM1xuICAgIHRoaXMucmVuZGVyRml4ZWRFbnRyaWVzKGNvbnRhaW5lcik7XG5cblxuXG4gICAgLy8gXHU2NTg3XHU0RUY2XHU1MjE3XHU4ODY4XG4gICAgdGhpcy5yZW5kZXJGaWxlTGlzdChjb250YWluZXIpO1xuICB9XG5cblxuXG4gIHByaXZhdGUgcmVuZGVyTWFpblRvb2xiYXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHRvb2xiYXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbWFpbi10b29sYmFyJyB9KTtcbiAgXG4gICAgLy8gXHU2NDFDXHU3RDIyXHU2ODQ2XG4gICAgY29uc3Qgc2VhcmNoSW5wdXQgPSB0b29sYmFyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnXHVEODNEXHVERDBEIFx1NjQxQ1x1N0QyMi4uLicsXG4gICAgICBjbHM6ICdzZWFyY2gtaW5wdXQtbWFpbidcbiAgICB9KTtcbiAgICBzZWFyY2hJbnB1dC52YWx1ZSA9IHRoaXMuc2VhcmNoUXVlcnk7XG4gICAgXG4gICAgLy8gXHU0RjdGXHU3NTI4XHU5NjMyXHU2Mjk2XHU0RjE4XHU1MzE2XHU2NDFDXHU3RDIyXG4gICAgc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG4gICAgICB0aGlzLnNlYXJjaFF1ZXJ5ID0gdmFsdWU7XG4gICAgICBcbiAgICAgIC8vIFx1NkUwNVx1OTY2NFx1NEU0Qlx1NTI0RFx1NzY4NFx1NUI5QVx1NjVGNlx1NTY2OFxuICAgICAgaWYgKHRoaXMuc2VhcmNoRGVib3VuY2VUaW1lciAhPT0gbnVsbCkge1xuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc2VhcmNoRGVib3VuY2VUaW1lcik7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NjVCMFx1NzY4NFx1NUI5QVx1NjVGNlx1NTY2OFxuICAgICAgdGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IG51bGw7XG4gICAgICAgIC8vIFx1NTNFQVx1NTIzN1x1NjVCMFx1NTNGM1x1NEZBN1x1OTc2Mlx1Njc3RlxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBjb25zdCByaWdodFBhbmVsID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5yaWdodC1wYW5lbCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBpZiAocmlnaHRQYW5lbCkge1xuICAgICAgICAgIHJpZ2h0UGFuZWwuZW1wdHkoKTtcbiAgICAgICAgICB0aGlzLnJlbmRlclJpZ2h0UGFuZWwocmlnaHRQYW5lbCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NjU4N1x1NEVGNlx1NTIxN1x1ODg2OFxuICAgICAgICBjb25zdCBmaWxlTGlzdENvbnRhaW5lciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmlsZS1saXN0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGlmIChmaWxlTGlzdENvbnRhaW5lcikge1xuICAgICAgICAgIGZpbGVMaXN0Q29udGFpbmVyLmVtcHR5KCk7XG4gICAgICAgICAgdGhpcy5yZW5kZXJGaWxlTGlzdENvbnRlbnQoZmlsZUxpc3RDb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmNsZWFyKCk7XG4gICAgICB9LCAzMDApOyAvLyAzMDBtcyBcdTk2MzJcdTYyOTZcbiAgICB9KTtcbiAgXG4gICAgLy8gXHU1MjA2XHU3RUM0XHU2QTIxXHU1RjBGXHU1MjA3XHU2MzYyXHVGRjA4XHU3QjE0XHU4QkIwXHU1NDhDXHU1MzYxXHU3MjQ3XHU4OUM2XHU1NkZFXHU5MEZEXHU2NjNFXHU3OTNBXHVGRjA5LSBcdTc5RkJcdTk2NjRcdTY3NjFcdTRFRjZcdTUyMjRcdTY1QURcbiAgICBjb25zdCBncm91cFN3aXRjaGVyID0gdG9vbGJhci5jcmVhdGVEaXYoeyBjbHM6ICdncm91cC1zd2l0Y2hlci1tYWluJyB9KTtcbiAgICBcbiAgICBjb25zdCBncm91cE9wdGlvbnMgPSBbXG4gICAgICB7IG1vZGU6ICdmaWxlJyBhcyBHcm91cE1vZGUsIGljb246ICdcdUQ4M0RcdURDQzEnLCBsYWJlbDogJ1x1NjU4N1x1NEVGNicgfSxcbiAgICAgIHsgbW9kZTogJ2Fubm90YXRpb24nIGFzIEdyb3VwTW9kZSwgaWNvbjogJ1x1RDgzRFx1RENBQycsIGxhYmVsOiAnXHU2Mjc5XHU2Q0U4JyB9LFxuICAgICAgeyBtb2RlOiAndGFnJyBhcyBHcm91cE1vZGUsIGljb246ICdcdUQ4M0NcdURGRjdcdUZFMEYnLCBsYWJlbDogJ1x1NjgwN1x1N0I3RScgfSxcbiAgICAgIHsgbW9kZTogJ2RhdGUnIGFzIEdyb3VwTW9kZSwgaWNvbjogJ1x1RDgzRFx1RENDNScsIGxhYmVsOiAnXHU2NUU1XHU2NzFGJyB9XG4gICAgXTtcbiAgXG4gICAgZ3JvdXBPcHRpb25zLmZvckVhY2goKHsgbW9kZSwgaWNvbiwgbGFiZWwgfSkgPT4ge1xuICAgICAgY29uc3QgYnRuID0gZ3JvdXBTd2l0Y2hlci5jcmVhdGVEaXYoe1xuICAgICAgICBjbHM6IGBncm91cC1idG4tbWFpbiAke3RoaXMuZ3JvdXBNb2RlID09PSBtb2RlID8gJ2FjdGl2ZScgOiAnJ31gLFxuICAgICAgfSk7XG4gICAgICBidG4uaW5uZXJIVE1MID0gYCR7aWNvbn0gYDtcbiAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZ3JvdXBNb2RlICE9PSBtb2RlKSB7XG4gICAgICAgICAgdGhpcy5ncm91cE1vZGUgPSBtb2RlO1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gbnVsbDsgLy8gXHVEODNEXHVERDI3IFx1NkUwNVx1N0E3QVx1OTAwOVx1NjJFOVxuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuY2xlYXIoKTtcbiAgICAgICAgICB0aGlzLmJhdGNoTW9kZSA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gXHU1MjM3XHU2NUIwXHU2NTg3XHU0RUY2XHU1MjE3XHU4ODY4XHU1NDhDXHU1M0YzXHU0RkE3XHU5NzYyXHU2NzdGXG4gICAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICBjb25zdCBmaWxlTGlzdENvbnRhaW5lciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmlsZS1saXN0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgaWYgKGZpbGVMaXN0Q29udGFpbmVyKSB7XG4gICAgICAgICAgICBmaWxlTGlzdENvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJGaWxlTGlzdENvbnRlbnQoZmlsZUxpc3RDb250YWluZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCByaWdodFBhbmVsID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5yaWdodC1wYW5lbCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgIGlmIChyaWdodFBhbmVsKSB7XG4gICAgICAgICAgICByaWdodFBhbmVsLmVtcHR5KCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclJpZ2h0UGFuZWwocmlnaHRQYW5lbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICB9XG4gIHByaXZhdGUgcmVuZGVyRml4ZWRFbnRyaWVzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBlbnRyaWVzID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2ZpeGVkLWVudHJpZXMnIH0pO1xuXG4gICAgLy8gXHU1MTY4XHU5MEU4XHU3QjE0XHU4QkIwXHU2MzA5XHU5NEFFXG4gICAgY29uc3QgYWxsTm90ZXNCdG4gPSBlbnRyaWVzLmNyZWF0ZURpdih7XG4gICAgICBjbHM6IGBlbnRyeS1idG4gJHt0aGlzLnZpZXdUeXBlID09PSAnbm90ZXMnID8gJ2FjdGl2ZScgOiAnJ31gLFxuICAgIH0pO1xuICAgIGFsbE5vdGVzQnRuLmlubmVySFRNTCA9ICdcdUQ4M0RcdURDREQgPHNwYW4+XHU1MTY4XHU5MEU4XHU3QjE0XHU4QkIwPC9zcGFuPic7XG4gICAgYWxsTm90ZXNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLnZpZXdUeXBlID0gJ25vdGVzJztcbiAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gbnVsbDtcbiAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5jbGVhcigpO1xuICAgICAgdGhpcy5iYXRjaE1vZGUgPSBmYWxzZTtcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICAvLyBDYXJkIExpc3QgXHU2MzA5XHU5NEFFXG4gICAgY29uc3QgY2FyZExpc3RCdG4gPSBlbnRyaWVzLmNyZWF0ZURpdih7XG4gICAgICBjbHM6IGBlbnRyeS1idG4gJHt0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnID8gJ2FjdGl2ZScgOiAnJ31gLFxuICAgIH0pO1xuICAgIGNhcmRMaXN0QnRuLmlubmVySFRNTCA9ICdcdUQ4M0NcdURDQ0YgPHNwYW4+Q2FyZCBMaXN0PC9zcGFuPic7XG4gICAgY2FyZExpc3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLnZpZXdUeXBlID0gJ2NhcmRzJztcbiAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gbnVsbDtcbiAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5jbGVhcigpO1xuICAgICAgdGhpcy5iYXRjaE1vZGUgPSBmYWxzZTtcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfSk7XG4gIH1cbiAgcHJpdmF0ZSByZW5kZXJGaWxlTGlzdChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgdGl0bGVUZXh0ID0gdGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJyA/ICdcdTk1RUFcdTUzNjFcdTUyMDZcdTdFQzQnIDogJ1x1NjU4N1x1Njg2M1x1NTIxN1x1ODg2OCc7XG4gICAgLy8gY29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogdGl0bGVUZXh0LCBjbHM6ICdwYW5lbC10aXRsZScgfSk7XG5cbiAgICBjb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0MxIFx1NjU4N1x1Njg2M1x1NTIxN1x1ODg2OCcsIGNsczogJ3BhbmVsLXRpdGxlJyB9KTtcblxuICAgIGNvbnN0IGZpbGVMaXN0Q29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2ZpbGUtbGlzdCcgfSk7XG4gICAgdGhpcy5yZW5kZXJGaWxlTGlzdENvbnRlbnQoZmlsZUxpc3RDb250YWluZXIpO1xuICB9XG4gIFxuICBwcml2YXRlIHJlbmRlckZpbGVMaXN0Q29udGVudChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgXG4gICAgLy8gXHU2NTJGXHU2MzAxXHU5NUVBXHU1MzYxXHU1NDhDXHU3QjE0XHU4QkIwXHU3Njg0XHU3RURGXHU0RTAwXHU1MjA2XHU3RUM0XHU1OTA0XHU3NDA2XG4gICAgbGV0IGdyb3VwZWQ6IEFycmF5PHsgZ3JvdXBLZXk6IHN0cmluZzsgdW5pdHM/OiBDb250ZW50VW5pdFtdOyBjYXJkcz86IEZsYXNoY2FyZFtdOyBjb3VudDogbnVtYmVyIH0+O1xuICAgIFxuICAgIGlmICh0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnKSB7XG4gICAgICBjb25zdCBmbGFzaGNhcmRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRBbGxGbGFzaGNhcmRzKCk7XG4gICAgICBjb25zdCBjYXJkR3JvdXBzID0gdGhpcy5ncm91cEZsYXNoY2FyZHMoZmxhc2hjYXJkcyk7XG4gICAgICBncm91cGVkID0gY2FyZEdyb3Vwcy5tYXAoZyA9PiAoeyBncm91cEtleTogZy5ncm91cEtleSwgY2FyZHM6IGcuY2FyZHMsIGNvdW50OiBnLmNhcmRzLmxlbmd0aCB9KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHVuaXRzID0gdGhpcy5nZXRGaWx0ZXJlZFVuaXRzKCk7XG4gICAgICBjb25zdCB1bml0R3JvdXBzID0gdGhpcy5ncm91cFVuaXRzKHVuaXRzKTtcbiAgICAgIGdyb3VwZWQgPSB1bml0R3JvdXBzLm1hcChnID0+ICh7IGdyb3VwS2V5OiBnLmdyb3VwS2V5LCB1bml0czogZy51bml0cywgY291bnQ6IGcudW5pdHMubGVuZ3RoIH0pKTtcbiAgICB9XG4gIFxuICAgIGlmIChncm91cGVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29udGFpbmVyLmNyZWF0ZURpdih7XG4gICAgICAgIHRleHQ6ICdcdTY2ODJcdTY1RTBcdTY1ODdcdTY4NjMnLFxuICAgICAgICBjbHM6ICdlbXB0eS1oaW50J1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGlmICghdGhpcy5zZWxlY3RlZEZpbGUgJiYgZ3JvdXBlZC5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IGdyb3VwZWRbMF0uZ3JvdXBLZXk7XG4gICAgfVxuICBcbiAgICBncm91cGVkLmZvckVhY2goKHsgZ3JvdXBLZXksIGNvdW50IH0pID0+IHtcbiAgICAgIGNvbnN0IGZpbGVJdGVtID0gY29udGFpbmVyLmNyZWF0ZURpdih7XG4gICAgICAgIGNsczogYGZpbGUtaXRlbSAke3RoaXMuc2VsZWN0ZWRGaWxlID09PSBncm91cEtleSA/ICdzZWxlY3RlZCcgOiAnJ31gXG4gICAgICB9KTtcbiAgXG4gICAgICBmaWxlSXRlbS5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1pY29uXCI+JHt0aGlzLmdldEdyb3VwSWNvbih0aGlzLmdyb3VwTW9kZSl9PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtbmFtZVwiPiR7Z3JvdXBLZXl9PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtY291bnRcIj4ke2NvdW50fTwvc3Bhbj5cbiAgICAgIGA7XG4gIFxuICAgICAgZmlsZUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEZpbGUgIT09IGdyb3VwS2V5KSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IGdyb3VwS2V5O1xuICAgICAgICAgICAgXG5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU5MDA5XHU0RTJEXHU3MkI2XHU2MDAxXG4gICAgICAgICAgICBjb25zdCBhbGxJdGVtcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuZmlsZS1pdGVtJyk7XG4gICAgICAgICAgICBhbGxJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gaXRlbS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKSk7XG4gICAgICAgICAgICBmaWxlSXRlbS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU1MjM3XHU2NUIwXHU1M0YzXHU0RkE3XHU5NzYyXHU2NzdGXG4gICAgICAgICAgICBjb25zdCBtYWluQ29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0UGFuZWwgPSBtYWluQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5yaWdodC1wYW5lbCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgaWYgKHJpZ2h0UGFuZWwpIHtcblxuICAgICAgICAgICAgICByaWdodFBhbmVsLmVtcHR5KCk7XG4gICAgICAgICAgICAgIHRoaXMucmVuZGVyUmlnaHRQYW5lbChyaWdodFBhbmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignW2ZpbGVJdGVtIGNsaWNrXSBFcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1NTIwN1x1NjM2Mlx1NTIwNlx1N0VDNFx1NjVGNlx1NTFGQVx1OTUxOVx1RkYwQ1x1OEJGN1x1OTFDRFx1OEJENScpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyUmlnaHRQYW5lbChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cbiAgICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgICBjb25zdCBmbGFzaGNhcmRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRBbGxGbGFzaGNhcmRzKCk7XG4gICAgICAgIGNvbnN0IGdyb3VwZWQgPSB0aGlzLmdyb3VwRmxhc2hjYXJkcyhmbGFzaGNhcmRzKTtcbiAgICAgICAgaWYgKGdyb3VwZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gZ3JvdXBlZFswXS5ncm91cEtleTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGVtcHR5ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2VtcHR5LXJpZ2h0LXBhbmVsJyB9KTtcbiAgICAgICAgICBlbXB0eS5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW1wdHktaWNvblwiPlx1RDgzRFx1RENFRDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImVtcHR5LXRleHRcIj5cdTY2ODJcdTY1RTBcdTk1RUFcdTUzNjE8L2Rpdj5cbiAgICAgICAgICBgO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBcdTZFMzJcdTY3RDNcdTk1RUFcdTUzNjFcdTdGNTFcdTY4M0NcdUZGMDhcdTRGMUFcdTY4MzlcdTYzNkUgc2VsZWN0ZWRGaWxlIFx1OEZDN1x1NkVFNFx1RkYwOVxuICAgICAgdGhpcy5yZW5kZXJGbGFzaGNhcmRzR3JpZChjb250YWluZXIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbi8vIFx1ODFFQVx1NTJBOFx1OTAwOVx1NEUyRFx1N0IyQ1x1NEUwMFx1NEUyQVxuICAgIGlmICghdGhpcy5zZWxlY3RlZEZpbGUpIHtcbiAgICAgIGNvbnN0IHVuaXRzID0gdGhpcy5nZXRGaWx0ZXJlZFVuaXRzKCk7XG4gICAgICBjb25zdCBncm91cGVkID0gdGhpcy5ncm91cFVuaXRzKHVuaXRzKTtcbiAgICAgIFxuICAgICAgaWYgKGdyb3VwZWQubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IGdyb3VwZWRbMF0uZ3JvdXBLZXk7XG4gICAgICAgIC8vIFx1ODlFNlx1NTNEMVx1NURFNlx1NEZBN1x1NjU4N1x1NEVGNlx1NTIxN1x1ODg2OFx1NjZGNFx1NjVCMFx1OTAwOVx1NEUyRFx1NzJCNlx1NjAwMVxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBjb25zdCBmaWxlTGlzdENvbnRhaW5lciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmlsZS1saXN0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGlmIChmaWxlTGlzdENvbnRhaW5lcikge1xuICAgICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IGZpbGVMaXN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5maWxlLWl0ZW0nKTtcbiAgICAgICAgICBmaXJzdEl0ZW0/LmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBcdTc3MUZcdTc2ODRcdTZDQTFcdTY3MDlcdTY1NzBcdTYzNkVcbiAgICAgICAgY29uc3QgZW1wdHkgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZW1wdHktcmlnaHQtcGFuZWwnIH0pO1xuICAgICAgICBlbXB0eS5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImVtcHR5LWljb25cIj5cdUQ4M0RcdURDRUQ8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW1wdHktdGV4dFwiPlx1NjY4Mlx1NjVFMFx1NTE4NVx1NUJCOTwvZGl2PlxuICAgICAgICBgO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHU2RTMyXHU2N0QzXHU1MTg1XHU1QkI5XHU3RjUxXHU2ODNDXG4gICAgdGhpcy5yZW5kZXJDb250ZW50R3JpZChjb250YWluZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NkUzMlx1NjdEM1x1NTE4NVx1NUJCOVx1N0Y1MVx1NjgzQ1x1RkYwOFx1NEUzQlx1NzU0Q1x1OTc2Mlx1NkEyMVx1NUYwRlx1RkYwOVxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJDb250ZW50R3JpZChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgaGVhZGVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyaWQtaGVhZGVyJyB9KTtcbiAgICBcbiAgICBjb25zdCB0aXRsZSA9IGhlYWRlci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHRoaXMuc2VsZWN0ZWRGaWxlIHx8ICdcdTUxODVcdTVCQjknIH0pO1xuICAgIFxuLy8gXHU2MzA5XHU5NEFFXHU1QkI5XHU1NjY4XG5jb25zdCBoZWFkZXJBY3Rpb25zID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ2hlYWRlci1hY3Rpb25zJyB9KTtcbi8vIFx1NjI3OVx1OTFDRlx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVxudGhpcy5jcmVhdGVCYXRjaEFjdGlvbkJ1dHRvbnMoaGVhZGVyQWN0aW9ucywgJ2hlYWRlcicpO1xuLy8gXHU1MTY4XHU5MDA5XHU2MzA5XHU5NEFFXG50aGlzLmNyZWF0ZVNlbGVjdEFsbEJ1dHRvbihoZWFkZXJBY3Rpb25zLCAnaGVhZGVyJyk7XG5cblxuXG4gICAgY29uc3QgZ3JpZENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjb250ZW50LWdyaWQnIH0pO1xuICAgIFxuICAgIGNvbnN0IHVuaXRzID0gdGhpcy5nZXRGaWx0ZXJlZFVuaXRzKCkuZmlsdGVyKHVuaXQgPT4ge1xuICAgICAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZmlsZScpIHtcbiAgICAgICAgcmV0dXJuIHVuaXQuc291cmNlLmZpbGUgPT09IHRoaXMuc2VsZWN0ZWRGaWxlO1xuICAgICAgfWVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnYW5ub3RhdGlvbicpe1xuICAgICAgICBjb25zdCBoYXNBbm5vdGF0aW9uID0gdGhpcy5zZWxlY3RlZEZpbGUgPT09ICdcdTY3MDlcdTYyNzlcdTZDRTgnO1xuICAgICAgICByZXR1cm4gaGFzQW5ub3RhdGlvbiA/ICEhdW5pdC5hbm5vdGF0aW9uSWQgOiAhdW5pdC5hbm5vdGF0aW9uSWQ7XG4gICAgICB9XG4gICAgICAgZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICd0YWcnKSB7XG4gICAgICAgIHJldHVybiB1bml0Lm1ldGFkYXRhLnRhZ3MuaW5jbHVkZXModGhpcy5zZWxlY3RlZEZpbGUhKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdkYXRlJykge1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKHVuaXQubWV0YWRhdGEuY3JlYXRlZEF0KSkgPT09IHRoaXMuc2VsZWN0ZWRGaWxlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgaWYgKHVuaXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZ3JpZENvbnRhaW5lci5jcmVhdGVEaXYoe1xuICAgICAgICB0ZXh0OiAnXHVEODNEXHVEQ0VEIFx1NjY4Mlx1NjVFMFx1NTE4NVx1NUJCOScsXG4gICAgICAgIGNsczogJ2VtcHR5LXN0YXRlJ1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdW5pdHMuZm9yRWFjaCh1bml0ID0+IHtcbiAgICAgIHRoaXMucmVuZGVyR3JpZENhcmQoZ3JpZENvbnRhaW5lciwgdW5pdCk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gKiBcdTZFMzJcdTY3RDNcdTk1RUFcdTUzNjFcdTdGNTFcdTY4M0NcdUZGMDhcdTdDN0JcdTRGM0MgcmVuZGVyQ29udGVudEdyaWRcdUZGMDlcbiAqL1xuICBwcml2YXRlIHJlbmRlckZsYXNoY2FyZHNHcmlkKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBoZWFkZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1oZWFkZXInIH0pO1xuICAgIFxuICAgIGhlYWRlci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHRoaXMuc2VsZWN0ZWRGaWxlIHx8ICdcdTk1RUFcdTUzNjEnIH0pO1xuXG4vLyBcdTYzMDlcdTk0QUVcdTVCQjlcdTU2NjhcbmNvbnN0IGhlYWRlckFjdGlvbnMgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnaGVhZGVyLWFjdGlvbnMnIH0pO1xuXG4vLyBcdTYyNzlcdTkxQ0ZcdTY0Q0RcdTRGNUNcdTYzMDlcdTk0QUVcbnRoaXMuY3JlYXRlQmF0Y2hBY3Rpb25CdXR0b25zKGhlYWRlckFjdGlvbnMsICdoZWFkZXInKTtcblxuLy8gXHU1MTY4XHU5MDA5XHU2MzA5XHU5NEFFXG50aGlzLmNyZWF0ZVNlbGVjdEFsbEJ1dHRvbihoZWFkZXJBY3Rpb25zLCAnaGVhZGVyJyk7XG5cblxuXG5cbiAgICBjb25zdCBncmlkQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NvbnRlbnQtZ3JpZCcgfSk7XG4gICAgXG4gICAgY29uc3QgZmxhc2hjYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgIFxuICAgIC8vIFx1NjUzOVx1OEZEQlx1OEZDN1x1NkVFNFx1OTAzQlx1OEY5MVxuICAgIGNvbnN0IGZpbHRlcmVkQ2FyZHMgPSBmbGFzaGNhcmRzLmZpbHRlcihjYXJkID0+IHtcbiAgICAgIGlmICghdGhpcy5zZWxlY3RlZEZpbGUpIHJldHVybiBmYWxzZTtcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZmlsZScpIHtcbiAgICAgICAgLy8gXHU2MzA5XHU2NTg3XHU0RUY2XHU4RkM3XHU2RUU0XG4gICAgICAgIHJldHVybiBjYXJkLnNvdXJjZUZpbGUgPT09IHRoaXMuc2VsZWN0ZWRGaWxlO1xuICAgICAgfSBcblxuICAgICAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnYW5ub3RhdGlvbicpIHtcbiAgICAgICAgLy8gXHVEODNEXHVERDI3IFx1NjMwOVx1NjI3OVx1NkNFOFx1OEZDN1x1NkVFNFxuICAgICAgICBjb25zdCB1bml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY2FyZC5zb3VyY2VDb250ZW50SWQpO1xuICAgICAgICBjb25zdCBoYXNBbm5vdGF0aW9uID0gdGhpcy5zZWxlY3RlZEZpbGUgPT09ICdcdTY3MDlcdTYyNzlcdTZDRTgnO1xuICAgICAgICBpZiAoaGFzQW5ub3RhdGlvbikge1xuICAgICAgICAgIHJldHVybiB1bml0ICYmICEhdW5pdC5hbm5vdGF0aW9uSWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuICF1bml0IHx8ICF1bml0LmFubm90YXRpb25JZDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5ncm91cE1vZGUgPT09ICd0YWcnKSB7XG4gICAgICAgIC8vIFx1NjMwOVx1NjgwN1x1N0I3RVx1OEZDN1x1NkVFNFxuICAgICAgICBjb25zdCB1bml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY2FyZC5zb3VyY2VDb250ZW50SWQpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU3QjE0XHU4QkIwXHU1MzU1XHU1MTQzXHU3Njg0XHU2ODA3XHU3QjdFXG4gICAgICAgIGlmICh1bml0ICYmIHVuaXQubWV0YWRhdGEudGFncyAmJiB1bml0Lm1ldGFkYXRhLnRhZ3MuaW5jbHVkZXModGhpcy5zZWxlY3RlZEZpbGUpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTM2MVx1NzI0N1x1ODFFQVx1NURGMVx1NzY4NFx1NjgwN1x1N0I3RVxuICAgICAgICBpZiAoY2FyZC50YWdzICYmIGNhcmQudGFncy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1IGRlY2tcbiAgICAgICAgaWYgKGNhcmQuZGVjayA9PT0gdGhpcy5zZWxlY3RlZEZpbGUpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XCJcdTY3MkFcdTUyMDZcdTdDN0JcIlxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEZpbGUgPT09ICdcdTY3MkFcdTUyMDZcdTdDN0InICYmIFxuICAgICAgICAgICAgKCFjYXJkLnRhZ3MgfHwgY2FyZC50YWdzLmxlbmd0aCA9PT0gMCkgJiYgXG4gICAgICAgICAgICAhY2FyZC5kZWNrICYmXG4gICAgICAgICAgICAoIXVuaXQgfHwgIXVuaXQubWV0YWRhdGEudGFncyB8fCB1bml0Lm1ldGFkYXRhLnRhZ3MubGVuZ3RoID09PSAwKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgIC8vIFx1NjMwOVx1NjVFNVx1NjcxRlx1OEZDN1x1NkVFNFxuICAgICAgICBjb25zdCBjYXJkRGF0ZSA9IHRoaXMuZm9ybWF0RGF0ZShuZXcgRGF0ZShjYXJkLm1ldGFkYXRhLmNyZWF0ZWRBdCkpO1xuICAgICAgICByZXR1cm4gY2FyZERhdGUgPT09IHRoaXMuc2VsZWN0ZWRGaWxlO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gIFxuXG4gIFxuICAgIGlmIChmaWx0ZXJlZENhcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZ3JpZENvbnRhaW5lci5jcmVhdGVEaXYoeyB0ZXh0OiAnXHVEODNEXHVEQ0VEIFx1OEJFNVx1NTIwNlx1N0VDNFx1NEUwQlx1NjY4Mlx1NjVFMFx1OTVFQVx1NTM2MScsIGNsczogJ2VtcHR5LXN0YXRlJyB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIFxuICAgIGZpbHRlcmVkQ2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgIHRoaXMucmVuZGVyRmxhc2hjYXJkR3JpZENhcmQoZ3JpZENvbnRhaW5lciwgY2FyZCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogXHU2RTMyXHU2N0QzXHU3RjUxXHU2ODNDXHU1MzYxXHU3MjQ3XHVGRjA4XHU0RTNCXHU3NTRDXHU5NzYyXHU2QTIxXHU1RjBGXHVGRjA5XG4gICAqL1xuICBwcml2YXRlIHJlbmRlckdyaWRDYXJkKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0KSB7XG4gICAgY29uc3QgY2FyZCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLWNhcmQnIH0pO1xuXG4gICAgLy8gXHU2Mjc5XHU5MUNGXHU5MDA5XHU2MkU5XHU2QTIxXHU1RjBGXHVGRjFBXHU2REZCXHU1MkEwY2hlY2tib3hcbiAgICBpZiAodGhpcy5iYXRjaE1vZGUpIHtcbiAgICAgIGNvbnN0IGNoZWNrYm94ID0gY2FyZC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgIGNsczogJ2JhdGNoLWNoZWNrYm94J1xuICAgICAgfSk7XG4gICAgICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdW5pdC1pZCcsIHVuaXQuaWQpO1xuICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRoaXMuc2VsZWN0ZWRVbml0SWRzLmhhcyh1bml0LmlkKTtcbiAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCkge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmFkZCh1bml0LmlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5kZWxldGUodW5pdC5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTk4NzZcdTkwRThcdUZGMUFcdTY1ODdcdTY4NjNcdTU0MERcdTc5RjBcbiAgICBjb25zdCBoZWFkZXIgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ2dyaWQtY2FyZC1oZWFkZXInIH0pO1xuXG5oZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHRoaXMuanVtcFRvU291cmNlKHVuaXQpO1xufSk7XG5cblxuICAgIC8vIFx1RDgzRFx1REQyNyBcdTZERkJcdTUyQTBcdTdDN0JcdTU3OEJcdTYzMDdcdTc5M0FcdTU2NjhcbmNvbnN0IHR5cGVJbmRpY2F0b3IgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAndHlwZS1pbmRpY2F0b3InIH0pO1xuaWYgKHVuaXQudHlwZSA9PT0gJ1FBJykge1xuICB0eXBlSW5kaWNhdG9yLmFkZENsYXNzKCd0eXBlLXFhJyk7XG4gIHR5cGVJbmRpY2F0b3IudGV4dENvbnRlbnQgPSAnUSZBJztcbn0gZWxzZSBpZiAodW5pdC50eXBlID09PSAnY2xvemUnKSB7XG4gIHR5cGVJbmRpY2F0b3IuYWRkQ2xhc3MoJ3R5cGUtY2xvemUnKTtcbiAgdHlwZUluZGljYXRvci50ZXh0Q29udGVudCA9ICdDbG96ZSc7XG59IGVsc2Uge1xuICB0eXBlSW5kaWNhdG9yLmFkZENsYXNzKCd0eXBlLXRleHQnKTtcbiAgdHlwZUluZGljYXRvci50ZXh0Q29udGVudCA9ICdUZXh0Jztcbn1cblxuICAgIGNvbnN0IGZpbGVOYW1lID0gdW5pdC5zb3VyY2UuZmlsZS5zcGxpdCgnLycpLnBvcCgpPy5yZXBsYWNlKCcubWQnLCAnJykgfHwgJyc7XG4gICAgaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBmaWxlTmFtZSwgY2xzOiAnZG9jLW5hbWUnIH0pO1xuXG4gICAgLy8gXHU1M0YzXHU0RTBBXHU4OUQyXHU1REU1XHU1MTc3XHU2MzA5XHU5NEFFXG4gICAgY29uc3QgdG9vbHMgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkLXRvb2xzJyB9KTtcbiAgICBcblxuXG4vLyBcdTk3NUVcdTYyNzlcdTkxQ0ZcdTZBMjFcdTVGMEZcdTRFMEJcdTc2ODRcdTk1RUFcdTUzNjFcdTYzMDlcdTk0QUVcbmlmICghdGhpcy5iYXRjaE1vZGUpIHtcbiAgY29uc3QgZmxhc2hjYXJkQnRuID0gdG9vbHMuY3JlYXRlRGl2KHsgY2xzOiAndG9vbC1idG4tZ3JpZCcgfSk7XG4gIGZsYXNoY2FyZEJ0bi5pbm5lckhUTUwgPSAnXHUyNkExJztcbiAgZmxhc2hjYXJkQnRuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdcdTc1MUZcdTYyMTBcdTk1RUFcdTUzNjEnKTtcbiAgZmxhc2hjYXJkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMucXVpY2tHZW5lcmF0ZUZsYXNoY2FyZCh1bml0KTtcbiAgfSk7XG59XG5cbiAgICBjb25zdCBtb3JlQnRuID0gdG9vbHMuY3JlYXRlRGl2KHsgY2xzOiAndG9vbC1idG4tZ3JpZCcgfSk7XG4gICAgbW9yZUJ0bi5pbm5lckhUTUwgPSAnXHUyMkVFJztcbiAgICBtb3JlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLnNob3dDb250ZXh0TWVudShlLCB1bml0KTtcbiAgICB9KTtcblxuICAgIC8vIFx1N0IxNFx1OEJCMFx1NTE4NVx1NUJCOVx1RkYwOFx1NzBCOVx1NTFGQlx1NUM1NVx1NUYwMFx1NjI3OVx1NkNFOFx1N0YxNlx1OEY5MVx1RkYwOVxuICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ2dyaWQtY2FyZC1jb250ZW50JyB9KTtcbiAgICBjb25zdCBub3RlVGV4dCA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1ub3RlLXRleHQnIH0pO1xuXG4vLyBcdUQ4M0RcdUREMjcgXHU2NjNFXHU3OTNBXHU1QjhDXHU2NTc0XHU1MTg1XHU1QkI5XHVGRjBDXHU0RTBEXHU2MjJBXHU2NUFEXG5sZXQgZGlzcGxheUhUTUwgPSAnJztcblxuLy8gXHU1OTgyXHU2NzlDXHU2NjJGIFFBIFx1N0M3Qlx1NTc4Qlx1RkYwQ1x1NzUyOFx1NEUwRFx1NTQwQ1x1NjgzN1x1NUYwRlx1NjYzRVx1NzkzQVx1OTVFRVx1OTg5OFx1NTQ4Q1x1N0I1NFx1Njg0OFxuaWYgKHVuaXQudHlwZSA9PT0gJ1FBJyAmJiB1bml0LmFuc3dlcikge1xuICBkaXNwbGF5SFRNTCA9IGA8c3Bhbj4ke3VuaXQuY29udGVudH08L3NwYW4+IDxzcGFuID46Ojwvc3Bhbj4gPHNwYW4gPiR7dW5pdC5hbnN3ZXJ9PC9zcGFuPmA7XG59XG4vLyBcdTU5ODJcdTY3OUNcdTY2MkYgY2xvemUgXHU3QzdCXHU1NzhCXHVGRjBDXHU5QUQ4XHU0RUFFXHU2NjNFXHU3OTNBXHU3QjU0XHU2ODQ4XG5lbHNlIGlmICh1bml0LnR5cGUgPT09ICdjbG96ZScgJiYgdW5pdC5mdWxsQ29udGV4dCkge1xuICAvLyBcdUQ4M0RcdUREMjcgXHU1MTQ4XHU1M0JCXHU5NjY0IGZ1bGxDb250ZXh0IFx1NEUyRFx1NzY4NCA9PSBcdTY4MDdcdThCQjBcbiAgY29uc3QgY29udGV4dCA9IHVuaXQuZnVsbENvbnRleHQ7XG4gIGNvbnN0IGFuc3dlciA9IHVuaXQuY29udGVudDtcbiAgXG4gIC8vIFx1NzEzNlx1NTQwRVx1NzUyOCBzcGFuIFx1OUFEOFx1NEVBRVx1N0I1NFx1Njg0OFxuICBkaXNwbGF5SFRNTCA9IGNvbnRleHQucmVwbGFjZShcbiAgICBhbnN3ZXIsIFxuICAgIGA8c3BhbiA+JHthbnN3ZXJ9PC9zcGFuPmBcbiAgKTtcbn1cbi8vIFx1N0VBRlx1NjU4N1x1NjcyQ1xuZWxzZSB7XG4gIGRpc3BsYXlIVE1MID0gdW5pdC5jb250ZW50O1xufVxuXG5ub3RlVGV4dC5pbm5lckhUTUwgPSBkaXNwbGF5SFRNTDtcblxuXG5ub3RlVGV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgdGhpcy50b2dnbGVJbmxpbmVBbm5vdGF0aW9uKGNhcmQsIHVuaXQpO1xufSk7XG5cbiAgICAvLyBcdTY2M0VcdTc5M0FcdTYyNzlcdTZDRThcbiAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk7XG4gICAgaWYgKGFubm90YXRpb24pIHtcbiAgICAgIGNvbnN0IGFubkVsID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLWFubm90YXRpb24nIH0pO1xuICAgICAgYW5uRWwuaW5uZXJIVE1MID0gYDxzdHJvbmc+XHU2Mjc5XHU2Q0U4XHVGRjFBPC9zdHJvbmc+JHthbm5vdGF0aW9uLmNvbnRlbnR9YDtcbiAgICAgIFxuICAgICAgLy8gXHU3MEI5XHU1MUZCXHU2Mjc5XHU2Q0U4XHU0RTVGXHU1M0VGXHU0RUU1XHU1QzU1XHU1RjAwXHU3RjE2XHU4RjkxXG4gICAgICBhbm5FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlSW5saW5lQW5ub3RhdGlvbihjYXJkLCB1bml0KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1NjgwN1x1N0I3RVxuICAgIGlmICh1bml0Lm1ldGFkYXRhLnRhZ3MubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgdGFncyA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC10YWdzJyB9KTtcbiAgICAgIHVuaXQubWV0YWRhdGEudGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgIHRhZ3MuY3JlYXRlU3Bhbih7IHRleHQ6IGAjJHt0YWd9YCwgY2xzOiAndGFnLWdyaWQnIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU1RTk1XHU5MEU4XHU1MTQzXHU0RkUxXHU2MDZGXG4gICAgY29uc3QgbWV0YSA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkLW1ldGEnIH0pO1xuICAgIG1ldGEuY3JlYXRlU3Bhbih7IHRleHQ6IGBMJHt1bml0LnNvdXJjZS5wb3NpdGlvbi5saW5lfWAsIGNsczogJ2xpbmUtaW5mbycgfSk7XG4gICAgXG4gICAgaWYgKHVuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIG1ldGEuY3JlYXRlU3Bhbih7IHRleHQ6IGBcdUQ4M0NcdURDQ0YgJHt1bml0LmZsYXNoY2FyZElkcy5sZW5ndGh9YCwgY2xzOiAnYmFkZ2UtZ3JpZCcgfSk7XG4gICAgfVxuICB9XG4vKipcbiAqIFx1NkUzMlx1NjdEM1x1OTVFQVx1NTM2MVx1N0Y1MVx1NjgzQ1x1NTM2MVx1NzI0N1x1RkYwOFx1NUUyNlx1NEUwQlx1NjJDOVx1ODNEQ1x1NTM1NVx1RkYwOVxuICovXG5wcml2YXRlIHJlbmRlckZsYXNoY2FyZEdyaWRDYXJkKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGNhcmQ6IEZsYXNoY2FyZCkge1xuICBjb25zdCBjYXJkRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkIGZsYXNoY2FyZC1ncmlkLWNhcmQnIH0pO1xuXG4gIC8vIFx1NjI3OVx1OTFDRlx1OTAwOVx1NjJFOVxuICBpZiAodGhpcy5iYXRjaE1vZGUpIHtcbiAgICBjb25zdCBjaGVja2JveCA9IGNhcmRFbC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgY2xzOiAnYmF0Y2gtY2hlY2tib3gnXG4gICAgfSk7XG4gICAgY2hlY2tib3guc2V0QXR0cmlidXRlKCdkYXRhLWNhcmQtaWQnLCBjYXJkLmlkKTtcbiAgICBjaGVja2JveC5jaGVja2VkID0gdGhpcy5zZWxlY3RlZENhcmRJZHMuaGFzKGNhcmQuaWQpO1xuICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICBpZiAoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuYWRkKGNhcmQuaWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuZGVsZXRlKGNhcmQuaWQpO1xuICAgICAgfVxuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFx1OTg3Nlx1OTBFOFxuICBjb25zdCBoZWFkZXIgPSBjYXJkRWwuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkLWhlYWRlcicgfSk7XG4gIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB1bml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY2FyZC5zb3VyY2VDb250ZW50SWQpO1xuICAgIGlmICh1bml0KSB7XG4gICAgICBhd2FpdCB0aGlzLmp1bXBUb1NvdXJjZSh1bml0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2MjdFXHU0RTBEXHU1MjMwXHU3QjE0XHU4QkIwXHU1MzU1XHU1MTQzXHVGRjBDXHU1QzFEXHU4QkQ1XHU3NkY0XHU2M0E1XHU2MjUzXHU1RjAwXHU2NTg3XHU0RUY2XG4gICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGNhcmQuc291cmNlRmlsZSk7XG4gICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKS5vcGVuRmlsZShmaWxlKTtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IFx1NURGMlx1NjI1M1x1NUYwMFx1NkU5MFx1NjU4N1x1NEVGNicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1NjI3RVx1NEUwRFx1NTIzMFx1NTM5Rlx1NTlDQlx1N0IxNFx1OEJCMCcpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgdHlwZUxhYmVsID0gaGVhZGVyLmNyZWF0ZURpdih7XG4gICAgY2xzOiBgZmxhc2hjYXJkLXR5cGUgJHtjYXJkLnR5cGV9YCxcbiAgICB0ZXh0OiBjYXJkLnR5cGUgPT09ICdxYScgPyAnUSZBJyA6ICdcdTU4NkJcdTdBN0EnXG4gIH0pO1xuXG4gIC8vIFx1NTNGM1x1NEUwQVx1ODlEMlx1NEUwQlx1NjJDOVx1ODNEQ1x1NTM1NVx1NjMwOVx1OTRBRVxuICBjb25zdCB0b29scyA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLWNhcmQtdG9vbHMnIH0pO1xuICBjb25zdCBtb3JlQnRuID0gdG9vbHMuY3JlYXRlRGl2KHsgY2xzOiAndG9vbC1idG4tZ3JpZCcgfSk7XG4gIG1vcmVCdG4uaW5uZXJIVE1MID0gJ1x1MjJFRSc7XG4gIG1vcmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy5zaG93Rmxhc2hjYXJkQ29udGV4dE1lbnUoZSwgY2FyZCk7XG4gIH0pO1xuXG4gIC8vIFx1NTM2MVx1NzI0N1x1NTE4NVx1NUJCOVxuICBjb25zdCBjb250ZW50ID0gY2FyZEVsLmNyZWF0ZURpdih7IGNsczogJ2dyaWQtY2FyZC1jb250ZW50JyB9KTtcbiAgXG4gIGNvbnN0IHF1ZXN0aW9uID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdmbGFzaGNhcmQtcXVlc3Rpb24nIH0pO1xuICBxdWVzdGlvbi5pbm5lckhUTUwgPSBgPHN0cm9uZz5cdTk1RUVcdTk4OThcdUZGMUE8L3N0cm9uZz4ke2NhcmQuZnJvbnR9YDtcbiAgXG4gIGNvbnN0IGFuc3dlciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnZmxhc2hjYXJkLWFuc3dlcicgfSk7XG4gIGNvbnN0IGFuc3dlclRleHQgPSBBcnJheS5pc0FycmF5KGNhcmQuYmFjaykgPyBjYXJkLmJhY2suam9pbignLCAnKSA6IGNhcmQuYmFjaztcbiAgYW5zd2VyLmlubmVySFRNTCA9IGA8c3Ryb25nPlx1N0I1NFx1Njg0OFx1RkYxQTwvc3Ryb25nPiR7YW5zd2VyVGV4dH1gO1xuXG4gIC8vIFx1NUU5NVx1OTBFOFx1NTE0M1x1NEZFMVx1NjA2RlxuICBjb25zdCBtZXRhID0gY2FyZEVsLmNyZWF0ZURpdih7IGNsczogJ2dyaWQtY2FyZC1tZXRhJyB9KTtcbiAgbWV0YS5jcmVhdGVTcGFuKHtcbiAgICB0ZXh0OiB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUoY2FyZC5tZXRhZGF0YS5jcmVhdGVkQXQpKSxcbiAgICBjbHM6ICdmbGFzaGNhcmQtZGF0ZSdcbiAgfSk7XG59XG4gIC8qKlxuICAgKiBcdTZFMzJcdTY3RDNcdTk1RUFcdTUzNjFcdTUyMTdcdTg4NjhcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyQ2FyZHNMaXN0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBoZWFkZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZHMtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXIuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVEODNDXHVEQ0NGIFx1NjI0MFx1NjcwOVx1OTVFQVx1NTM2MScgfSk7XG5cbiAgICBjb25zdCBjYXJkc0NvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkcy1ncmlkJyB9KTtcbiAgICBcbiAgICBjb25zdCBmbGFzaGNhcmRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRBbGxGbGFzaGNhcmRzKCk7XG5cbiAgICBcbiAgICBpZiAoZmxhc2hjYXJkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNhcmRzQ29udGFpbmVyLmNyZWF0ZURpdih7XG4gICAgICAgIHRleHQ6ICdcdUQ4M0RcdURDRUQgXHU2NjgyXHU2NUUwXHU5NUVBXHU1MzYxJyxcbiAgICAgICAgY2xzOiAnZW1wdHktc3RhdGUnXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmbGFzaGNhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICBjb25zdCBjYXJkRWwgPSBjYXJkc0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdmbGFzaGNhcmQtaXRlbScgfSk7XG5cbiAgICAgIC8vIFx1NjI3OVx1OTFDRlx1OTAwOVx1NjJFOVx1NkEyMVx1NUYwRlx1RkYxQVx1NkRGQlx1NTJBMGNoZWNrYm94XG4gICAgICBpZiAodGhpcy5iYXRjaE1vZGUpIHtcbiAgICAgICAgY29uc3QgY2hlY2tib3ggPSBjYXJkRWwuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgICAgY2xzOiAnYmF0Y2gtY2hlY2tib3gnXG4gICAgICAgIH0pO1xuICAgICAgICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY2FyZC1pZCcsIGNhcmQuaWQpO1xuICAgICAgICBjaGVja2JveC5jaGVja2VkID0gdGhpcy5zZWxlY3RlZENhcmRJZHMuaGFzKGNhcmQuaWQpO1xuICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuYWRkKGNhcmQuaWQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5kZWxldGUoY2FyZC5pZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjYXJkSGVhZGVyID0gY2FyZEVsLmNyZWF0ZURpdih7IGNsczogJ2ZsYXNoY2FyZC1oZWFkZXInIH0pO1xuICAgICAgY29uc3QgdHlwZUxhYmVsID0gY2FyZEhlYWRlci5jcmVhdGVEaXYoe1xuICAgICAgICBjbHM6IGBmbGFzaGNhcmQtdHlwZSAke2NhcmQudHlwZX1gLFxuICAgICAgICB0ZXh0OiBjYXJkLnR5cGUgPT09ICdxYScgPyAnUSZBJyA6ICdcdTU4NkJcdTdBN0EnXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY2FyZEhlYWRlci5jcmVhdGVTcGFuKHtcbiAgICAgICAgdGV4dDogdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKGNhcmQubWV0YWRhdGEuY3JlYXRlZEF0KSksXG4gICAgICAgIGNsczogJ2ZsYXNoY2FyZC1kYXRlJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTIyMFx1OTY2NFx1NjMwOVx1OTRBRVxuICAgICAgY29uc3QgZGVsZXRlQnRuID0gY2FyZEhlYWRlci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICB0ZXh0OiAnXHVEODNEXHVEREQxXHVGRTBGJyxcbiAgICAgICAgY2xzOiAnZmxhc2hjYXJkLWRlbGV0ZS1idG4nXG4gICAgICB9KTtcbiAgICAgIGRlbGV0ZUJ0bi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnXHU1MjIwXHU5NjY0XHU5NUVBXHU1MzYxJyk7XG4gICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBpZiAoY29uZmlybSgnXHU3ODZFXHU1QjlBXHU4OTgxXHU1MjIwXHU5NjY0XHU4RkQ5XHU1RjIwXHU5NUVBXHU1MzYxXHU1NDE3XHVGRjFGJykpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZUZsYXNoY2FyZChjYXJkLmlkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNhcmRCb2R5ID0gY2FyZEVsLmNyZWF0ZURpdih7IGNsczogJ2ZsYXNoY2FyZC1ib2R5JyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcXVlc3Rpb24gPSBjYXJkQm9keS5jcmVhdGVEaXYoeyBjbHM6ICdmbGFzaGNhcmQtcXVlc3Rpb24nIH0pO1xuICAgICAgcXVlc3Rpb24uaW5uZXJIVE1MID0gYDxzdHJvbmc+XHU5NUVFXHU5ODk4XHVGRjFBPC9zdHJvbmc+JHtjYXJkLmZyb250fWA7XG4gICAgICBcbiAgICAgIGNvbnN0IGFuc3dlciA9IGNhcmRCb2R5LmNyZWF0ZURpdih7IGNsczogJ2ZsYXNoY2FyZC1hbnN3ZXInIH0pO1xuICAgICAgY29uc3QgYW5zd2VyVGV4dCA9IEFycmF5LmlzQXJyYXkoY2FyZC5iYWNrKSA/IGNhcmQuYmFjay5qb2luKCcsICcpIDogY2FyZC5iYWNrO1xuICAgICAgYW5zd2VyLmlubmVySFRNTCA9IGA8c3Ryb25nPlx1N0I1NFx1Njg0OFx1RkYxQTwvc3Ryb25nPiR7YW5zd2VyVGV4dH1gO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0gXHU0RUE0XHU0RTkyXHU2NUI5XHU2Q0Q1ID09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIFx1NTIwN1x1NjM2Mlx1NTE4NVx1ODA1NFx1NjI3OVx1NkNFOFx1N0YxNlx1OEY5MVx1NTY2OFxuICAgKi9cbiAgcHJpdmF0ZSB0b2dnbGVJbmxpbmVBbm5vdGF0aW9uKGNhcmRFbDogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0KSB7XG4gICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU3RUNGXHU1QjU4XHU1NzI4XHU3RjE2XHU4RjkxXHU1NjY4XG4gICAgbGV0IGV4aXN0aW5nRWRpdG9yID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoJy5pbmxpbmUtYW5ub3RhdGlvbi1lZGl0b3InKSBhcyBIVE1MRWxlbWVudDtcbiAgICBcbiAgICBpZiAoZXhpc3RpbmdFZGl0b3IpIHtcbiAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NURGMlx1NUI1OFx1NTcyOFx1RkYwQ1x1NzlGQlx1OTY2NFx1N0YxNlx1OEY5MVx1NTY2OFx1NUU3Nlx1NjA2Mlx1NTkwRFx1NjI3OVx1NkNFOFx1OTg4NFx1ODlDOFxuICAgICAgZXhpc3RpbmdFZGl0b3IucmVtb3ZlKCk7XG4gICAgICBcbiAgICAgIC8vIFx1NjA2Mlx1NTkwRFx1NjI3OVx1NkNFOFx1OTg4NFx1ODlDOFx1NjYzRVx1NzkzQVxuICAgICAgY29uc3QgYW5ub3RhdGlvbiA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldENvbnRlbnRBbm5vdGF0aW9uKHVuaXQuaWQpO1xuICAgICAgaWYgKGFubm90YXRpb24pIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGNhcmRFbC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1jb250ZW50LCAuZ3JpZC1jYXJkLWNvbnRlbnQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdQcmV2aWV3ID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCcuYW5ub3RhdGlvbi1wcmV2aWV3LCAuZ3JpZC1hbm5vdGF0aW9uJyk7XG4gICAgICAgIGlmICghZXhpc3RpbmdQcmV2aWV3KSB7XG4gICAgICAgICAgdGhpcy5yZWNyZWF0ZUFubm90YXRpb25QcmV2aWV3KGNvbnRlbnQsIGNhcmRFbCwgdW5pdCwgYW5ub3RhdGlvbi5jb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFx1ODNCN1x1NTNENlx1NzNCMFx1NjcwOVx1NjI3OVx1NkNFOFxuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKTtcbiAgICBcbiAgICAvLyBcdTYyN0VcdTUyMzBcdTYyNzlcdTZDRThcdTk4ODRcdTg5QzhcdTUxNDNcdTdEMjBcdTYyMTZcdTYzRDJcdTUxNjVcdTRGNERcdTdGNkVcbiAgICBjb25zdCBjb250ZW50ID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvbnRlbnQsIC5ncmlkLWNhcmQtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbnN0IGFubm90YXRpb25QcmV2aWV3ID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCcuYW5ub3RhdGlvbi1wcmV2aWV3LCAuZ3JpZC1hbm5vdGF0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgaXNHcmlkQ2FyZCA9IGNhcmRFbC5jbGFzc0xpc3QuY29udGFpbnMoJ2dyaWQtY2FyZCcpO1xuICAgIFxuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1NjI3OVx1NkNFOFx1OTg4NFx1ODlDOFx1RkYwQ1x1NjZGRlx1NjM2Mlx1NUI4M1x1RkYxQlx1NTQyNlx1NTIxOVx1NTcyOFx1NTQwOFx1OTAwMlx1NEY0RFx1N0Y2RVx1NjNEMlx1NTE2NVxuICAgIGNvbnN0IGVkaXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGVkaXRvci5jbGFzc05hbWUgPSAnaW5saW5lLWFubm90YXRpb24tZWRpdG9yJztcbiAgICBcbiAgICBjb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG4gICAgdGV4dGFyZWEuY2xhc3NOYW1lID0gJ2lubGluZS1hbm5vdGF0aW9uLXRleHRhcmVhJztcbiAgICB0ZXh0YXJlYS5wbGFjZWhvbGRlciA9ICdBZGQgY29tbWVudC4uLic7XG4gICAgdGV4dGFyZWEudmFsdWUgPSBhbm5vdGF0aW9uPy5jb250ZW50IHx8ICcnO1xuICAgIHRleHRhcmVhLnNldEF0dHJpYnV0ZSgnZGF0YS11bml0LWlkJywgdW5pdC5pZCk7XG4gICAgXG4gICAgY29uc3QgaGludCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGhpbnQuY2xhc3NOYW1lID0gJ2lubGluZS1hbm5vdGF0aW9uLWhpbnQnO1xuICAgIGhpbnQudGV4dENvbnRlbnQgPSAnU2hpZnQgKyBFbnRlciBcdTYzNjJcdTg4NEMnO1xuICAgIFxuICAgIGVkaXRvci5hcHBlbmRDaGlsZCh0ZXh0YXJlYSk7XG4gICAgZWRpdG9yLmFwcGVuZENoaWxkKGhpbnQpO1xuICAgIFxuICAgIC8vIFx1NjZGRlx1NjM2Mlx1NjIxNlx1NjNEMlx1NTE2NVx1N0YxNlx1OEY5MVx1NTY2OFxuICAgIGlmIChhbm5vdGF0aW9uUHJldmlldykge1xuICAgICAgLy8gXHU2NkZGXHU2MzYyXHU2Mjc5XHU2Q0U4XHU5ODg0XHU4OUM4XG4gICAgICBhbm5vdGF0aW9uUHJldmlldy5yZXBsYWNlV2l0aChlZGl0b3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTU3MjhcdTdCMTRcdThCQjBcdTY1ODdcdTY3MkNcdTU0MEVcdTk3NjJcdTYzRDJcdTUxNjVcbiAgICAgIGNvbnN0IG5vdGVUZXh0ID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCcubm90ZS10ZXh0LCAuZ3JpZC1ub3RlLXRleHQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmIChub3RlVGV4dCkge1xuICAgICAgICBub3RlVGV4dC5hZnRlcihlZGl0b3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChlZGl0b3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1ODFFQVx1NTJBOFx1ODA1QVx1NzEyNlxuICAgIHRleHRhcmVhLmZvY3VzKCk7XG4gICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UodGV4dGFyZWEudmFsdWUubGVuZ3RoLCB0ZXh0YXJlYS52YWx1ZS5sZW5ndGgpO1xuICAgIFxuXG4gICAgXG4vLyBcdTU5MzFcdTcxMjZcdTY1RjZcdTgxRUFcdTUyQThcdTRGRERcdTVCNThcbnRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBhc3luYyAoZSkgPT4ge1xuICAvLyBcdTU5ODJcdTY3OUNcdTcwQjlcdTUxRkJcdTc2ODRcdTY2MkZcdTUxNzZcdTRFRDZcdTUxNDNcdTdEMjBcdUZGMENcdTgxRUFcdTUyQThcdTRGRERcdTVCNThcbiAgY29uc3QgcmVsYXRlZFRhcmdldCA9IGUucmVsYXRlZFRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgaWYgKCFyZWxhdGVkVGFyZ2V0IHx8ICFlZGl0b3IuY29udGFpbnMocmVsYXRlZFRhcmdldCkpIHtcbiAgICAvLyBcdTVFRjZcdThGREZcdTRGRERcdTVCNThcdUZGMENcdTc4NkVcdTRGRERcdTdGMTZcdThGOTFcdTU2NjhcdThGRDhcdTU3MjggRE9NIFx1NEUyRFxuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKGVkaXRvci5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZUlubGluZUFubm90YXRpb24oZWRpdG9yLCB1bml0LCB0ZXh0YXJlYS52YWx1ZSk7XG4gICAgICB9XG4gICAgfSwgMTAwKTtcbiAgfVxufSk7XG5cbi8vIFRhYiBcdTk1MkVcdTRGRERcdTVCNThcbnRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBhc3luYyAoZSkgPT4ge1xuICBpZiAoZS5rZXkgPT09ICdUYWInKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGF3YWl0IHRoaXMuc2F2ZUlubGluZUFubm90YXRpb24oZWRpdG9yLCB1bml0LCB0ZXh0YXJlYS52YWx1ZSk7XG4gIH1cbn0pO1xuICB9XG4gIFxuICAvKipcbiAgICogXHU0RkREXHU1QjU4XHU1MTg1XHU4MDU0XHU2Mjc5XHU2Q0U4XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHNhdmVJbmxpbmVBbm5vdGF0aW9uKGVkaXRvckVsOiBIVE1MRWxlbWVudCwgdW5pdDogQ29udGVudFVuaXQsIHRleHQ6IHN0cmluZykge1xuICAgIFxuICAgIGNvbnN0IHRyaW1tZWRUZXh0ID0gdGV4dC50cmltKCk7XG4gICAgY29uc3QgYW5ub3RhdGlvbiA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldENvbnRlbnRBbm5vdGF0aW9uKHVuaXQuaWQpO1xuICAgIFxuICAgIGlmICh0cmltbWVkVGV4dCkge1xuICAgICAgaWYgKGFubm90YXRpb24pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIudXBkYXRlQW5ub3RhdGlvbihhbm5vdGF0aW9uLmlkLCB7XG4gICAgICAgICAgY29udGVudDogdHJpbW1lZFRleHRcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5hZGRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkLCB0cmltbWVkVGV4dCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChhbm5vdGF0aW9uKSB7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5kZWxldGVBbm5vdGF0aW9uKGFubm90YXRpb24uaWQpO1xuICAgICAgbmV3IE5vdGljZSgnXHVEODNEXHVEREQxXHVGRTBGIFx1NjI3OVx1NkNFOFx1NURGMlx1NTIyMFx1OTY2NCcpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBjYXJkID0gZWRpdG9yRWwuY2xvc2VzdCgnLmNvbXBhY3QtY2FyZCwgLmdyaWQtY2FyZCcpIGFzIEhUTUxFbGVtZW50O1xuICAgIFxuICAgIGVkaXRvckVsLnJlbW92ZSgpO1xuICAgIFxuICAgIGlmICh0cmltbWVkVGV4dCAmJiBjYXJkKSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1jb250ZW50LCAuZ3JpZC1jYXJkLWNvbnRlbnQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIFxuICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy5yZWNyZWF0ZUFubm90YXRpb25QcmV2aWV3KGNvbnRlbnQsIGNhcmQsIHVuaXQsIHRyaW1tZWRUZXh0KTtcbiAgICAgICAgICAgICAgLy8gXHVEODNEXHVERDI3IFx1NjVCMFx1NTg5RVx1RkYxQVx1NjZGNFx1NjVCMCBpbmRpY2F0b3JcbiAgICAgIGNvbnN0IGluZGljYXRvciA9IGNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtaW5kaWNhdG9yJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAoaW5kaWNhdG9yICYmICFpbmRpY2F0b3IuY2xhc3NMaXN0LmNvbnRhaW5zKCdoYXMtYW5ub3RhdGlvbicpKSB7XG4gICAgICAgIGluZGljYXRvci5jbGFzc0xpc3QuYWRkKCdoYXMtYW5ub3RhdGlvbicpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmICghdHJpbW1lZFRleHQgJiYgY2FyZCkge1xuICAgIC8vIFx1RDgzRFx1REQyNyBcdTU5ODJcdTY3OUNcdTUyMjBcdTk2NjRcdTRFODZcdTYyNzlcdTZDRThcdUZGMENcdTc5RkJcdTk2NjQgaW5kaWNhdG9yIFx1NzY4NFx1NjI3OVx1NkNFOFx1NjgzN1x1NUYwRlxuICAgIGNvbnN0IGluZGljYXRvciA9IGNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtaW5kaWNhdG9yJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKGluZGljYXRvciAmJiBpbmRpY2F0b3IuY2xhc3NMaXN0LmNvbnRhaW5zKCdoYXMtYW5ub3RhdGlvbicpKSB7XG4gICAgICBpbmRpY2F0b3IuY2xhc3NMaXN0LnJlbW92ZSgnaGFzLWFubm90YXRpb24nKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBcdTUzRDZcdTZEODhcdTUxODVcdTgwNTRcdTYyNzlcdTZDRThcdTdGMTZcdThGOTFcbiAgICovXG4gIHByaXZhdGUgY2FuY2VsSW5saW5lQW5ub3RhdGlvbihlZGl0b3JFbDogSFRNTEVsZW1lbnQsIGNhcmRFbDogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0KSB7XG4gICAgLy8gXHU3OUZCXHU5NjY0XHU3RjE2XHU4RjkxXHU1NjY4XG4gICAgZWRpdG9yRWwucmVtb3ZlKCk7XG4gICAgXG4gICAgLy8gXHU2MDYyXHU1OTBEXHU2Mjc5XHU2Q0U4XHU5ODg0XHU4OUM4XHVGRjA4XHU1OTgyXHU2NzlDXHU2NzA5XHVGRjA5XG4gICAgY29uc3QgYW5ub3RhdGlvbiA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldENvbnRlbnRBbm5vdGF0aW9uKHVuaXQuaWQpO1xuICAgIGlmIChhbm5vdGF0aW9uKSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvbnRlbnQsIC5ncmlkLWNhcmQtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgdGhpcy5yZWNyZWF0ZUFubm90YXRpb25QcmV2aWV3KGNvbnRlbnQsIGNhcmRFbCwgdW5pdCwgYW5ub3RhdGlvbi5jb250ZW50KTtcbiAgICB9XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBcdTkxQ0RcdTY1QjBcdTUyMUJcdTVFRkFcdTYyNzlcdTZDRThcdTk4ODRcdTg5QzhcbiAgICovXG4gIHByaXZhdGUgcmVjcmVhdGVBbm5vdGF0aW9uUHJldmlldyhcbiAgICBjb250ZW50RWw6IEhUTUxFbGVtZW50LCBcbiAgICBjYXJkRWw6IEhUTUxFbGVtZW50LCBcbiAgICB1bml0OiBDb250ZW50VW5pdCwgXG4gICAgYW5ub3RhdGlvblRleHQ6IHN0cmluZ1xuICApIHtcbiAgICBcbiAgICBjb25zdCBleGlzdGluZ1ByZXZpZXcgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcignLmFubm90YXRpb24tcHJldmlldywgLmdyaWQtYW5ub3RhdGlvbicpO1xuICAgIGlmIChleGlzdGluZ1ByZXZpZXcpIHtcbiAgICAgIGV4aXN0aW5nUHJldmlldy5yZW1vdmUoKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgaXNHcmlkQ2FyZCA9IGNhcmRFbC5jbGFzc0xpc3QuY29udGFpbnMoJ2dyaWQtY2FyZCcpO1xuICAgIGNvbnN0IGFubkVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYW5uRWwuY2xhc3NOYW1lID0gaXNHcmlkQ2FyZCA/ICdncmlkLWFubm90YXRpb24nIDogJ2Fubm90YXRpb24tcHJldmlldyc7XG4gICAgXG4gICAgaWYgKGlzR3JpZENhcmQpIHtcbiAgICAgIGFubkVsLmlubmVySFRNTCA9IGA8c3Ryb25nPlx1NjI3OVx1NkNFOFx1RkYxQTwvc3Ryb25nPiR7YW5ub3RhdGlvblRleHR9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGlzcGxheVRleHQgPSBhbm5vdGF0aW9uVGV4dC5sZW5ndGggPiA2MFxuICAgICAgICA/IGFubm90YXRpb25UZXh0LnN1YnN0cmluZygwLCA2MCkgKyAnLi4uJ1xuICAgICAgICA6IGFubm90YXRpb25UZXh0O1xuICAgICAgYW5uRWwudGV4dENvbnRlbnQgPSBgXHVEODNEXHVEQ0FDICR7ZGlzcGxheVRleHR9YDtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gXHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XG4gICAgYW5uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMudG9nZ2xlSW5saW5lQW5ub3RhdGlvbihjYXJkRWwsIHVuaXQpO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFx1RDgzRFx1REQyNyBcdTY1QjBcdTU4OUVcdUZGMUFUYWIgXHU5NTJFXHU0RThCXHU0RUY2XG4gICAgYW5uRWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdUYWInKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdGhpcy50b2dnbGVJbmxpbmVBbm5vdGF0aW9uKGNhcmRFbCwgdW5pdCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgY29uc3Qgbm90ZVRleHQgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcignLm5vdGUtdGV4dCwgLmdyaWQtbm90ZS10ZXh0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKG5vdGVUZXh0KSB7XG4gICAgICBub3RlVGV4dC5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyZW5kJywgYW5uRWwpO1xuICAgICAgXG4gICAgICBjb25zdCBpbnNlcnRlZCA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcuYW5ub3RhdGlvbi1wcmV2aWV3LCAuZ3JpZC1hbm5vdGF0aW9uJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRlbnRFbC5hcHBlbmRDaGlsZChhbm5FbCk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIFx1RDgzRFx1REQyNyBcdThCQkVcdTdGNkUgdGFiaW5kZXggXHU0RjdGXHU1MTc2XHU1M0VGXHU0RUU1XHU2M0E1XHU2NTM2XHU3MTI2XHU3MEI5XG4gICAgYW5uRWwuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgYW5uRWwuZm9jdXMoKTtcbiAgICBcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYyNTNcdTVGMDBcdTYyNzlcdTZDRThcdTdGMTZcdThGOTFcdTU2NjhcdUZGMDhcdTZBMjFcdTYwMDFcdTY4NDZcdTY1QjlcdTVGMEZcdUZGMENcdTRGRERcdTc1NTlcdTc1MjhcdTRFOEVcdTUzRjNcdTk1MkVcdTgzRENcdTUzNTVcdUZGMDlcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgb3BlbkFubm90YXRpb25FZGl0b3IodW5pdDogQ29udGVudFVuaXQpIHtcbiAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk7XG4gICAgY29uc3QgZXhpc3RpbmdUZXh0ID0gYW5ub3RhdGlvbj8uY29udGVudCB8fCAnJztcblxuICAgIGNvbnN0IG1vZGFsID0gbmV3IEFubm90YXRpb25Nb2RhbChcbiAgICAgIHRoaXMuYXBwLFxuICAgICAgZXhpc3RpbmdUZXh0LFxuICAgICAgYXN5bmMgKG5ld1RleHQ6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAobmV3VGV4dC50cmltKCkpIHtcbiAgICAgICAgICBpZiAoYW5ub3RhdGlvbikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIudXBkYXRlQW5ub3RhdGlvbihhbm5vdGF0aW9uLmlkLCB7XG4gICAgICAgICAgICAgIGNvbnRlbnQ6IG5ld1RleHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5hZGRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkLCBuZXdUZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IFx1NjI3OVx1NkNFOFx1NURGMlx1NEZERFx1NUI1OCcpO1xuICAgICAgICB9IGVsc2UgaWYgKGFubm90YXRpb24pIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5kZWxldGVBbm5vdGF0aW9uKGFubm90YXRpb24uaWQpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1RDgzRFx1REREMVx1RkUwRiBcdTYyNzlcdTZDRThcdTVERjJcdTUyMjBcdTk2NjQnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgbW9kYWwub3BlbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1OERGM1x1OEY2Q1x1NTIzMFx1NTM5Rlx1NjU4N1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBqdW1wVG9Tb3VyY2UodW5pdDogQ29udGVudFVuaXQpIHtcblxuICAgIFxuICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodW5pdC5zb3VyY2UuZmlsZSk7XG4gICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1NjU4N1x1NEVGNlx1NEUwRFx1NUI1OFx1NTcyOCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgXG4gICAgLy8gXHU2ODA3XHU4QkIwXHU5NzAwXHU4OTgxXHU2MDYyXHU1OTBEXHU2RURBXHU1MkE4XG4gICAgdGhpcy5zaG91bGRSZXN0b3JlU2Nyb2xsID0gdHJ1ZTtcblxuICAgIFxuICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XG4gICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcbiAgXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoSXRlbVZpZXcpO1xuICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgY29uc3QgZWRpdG9yID0gKHZpZXcgYXMgYW55KS5lZGl0b3I7XG4gICAgICAgIGlmIChlZGl0b3IpIHtcbiAgICAgICAgICBjb25zdCBsaW5lID0gdW5pdC5zb3VyY2UucG9zaXRpb24ubGluZTtcbiAgICAgICAgICBjb25zdCBsaW5lQ291bnQgPSBlZGl0b3IubGluZUNvdW50KCk7XG4gICAgICAgICAgY29uc3QgdmFsaWRMaW5lID0gTWF0aC5taW4obGluZSwgbGluZUNvdW50IC0gMSk7XG4gICAgICAgICAgXG4gICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IHZhbGlkTGluZSwgY2g6IDAgfSk7XG4gICAgICAgICAgZWRpdG9yLnNjcm9sbEludG9WaWV3KFxuICAgICAgICAgICAgeyBmcm9tOiB7IGxpbmU6IHZhbGlkTGluZSwgY2g6IDAgfSwgdG86IHsgbGluZTogdmFsaWRMaW5lLCBjaDogMCB9IH0sXG4gICAgICAgICAgICB0cnVlXG4gICAgICAgICAgKTtcbiAgICAgICAgICBcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpbmVMZW5ndGggPSBlZGl0b3IuZ2V0TGluZSh2YWxpZExpbmUpPy5sZW5ndGggfHwgMDtcbiAgICAgICAgICAgICAgZWRpdG9yLnNldFNlbGVjdGlvbihcbiAgICAgICAgICAgICAgICB7IGxpbmU6IHZhbGlkTGluZSwgY2g6IDAgfSwgXG4gICAgICAgICAgICAgICAgeyBsaW5lOiB2YWxpZExpbmUsIGNoOiBsaW5lTGVuZ3RoIH1cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignU2VsZWN0aW9uIGVycm9yOicsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgIH0sIDIwMCk7XG4gIH1cblxuICAvKipcbiAgICogXHU1RkVCXHU5MDFGXHU3NTFGXHU2MjEwXHU5NUVBXHU1MzYxXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHF1aWNrR2VuZXJhdGVGbGFzaGNhcmQodW5pdDogQ29udGVudFVuaXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBRdWlja0ZsYXNoY2FyZENyZWF0b3IgfSA9IGF3YWl0IGltcG9ydCgnLi4vY29yZS9RdWlja0ZsYXNoY2FyZENyZWF0b3InKTtcbiAgICAgIGNvbnN0IGNyZWF0b3IgPSBuZXcgUXVpY2tGbGFzaGNhcmRDcmVhdG9yKHRoaXMucGx1Z2luKTtcbiAgICAgIGF3YWl0IGNyZWF0b3IuY3JlYXRlU21hcnRDYXJkKHVuaXQpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkExIFx1OTVFQVx1NTM2MVx1NURGMlx1NzUxRlx1NjIxMCcpO1xuICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBcdTc1MUZcdTYyMTBcdTk1RUFcdTUzNjFcdTU5MzFcdThEMjUnKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuICAvKipcbiAqIFx1NjYzRVx1NzkzQVx1NjI3OVx1OTFDRlx1NjRDRFx1NEY1Q1x1ODNEQ1x1NTM1NVxuICovXG5wcml2YXRlIHNob3dCYXRjaE1lbnUoZXZlbnQ6IE1vdXNlRXZlbnQsIHVuaXQ/OiBDb250ZW50VW5pdCkge1xuICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcblxuXG5cbiAgLy8gXHU1REYyXHU3RUNGXHU1NzI4XHU2Mjc5XHU5MUNGXHU2QTIxXHU1RjBGXHVGRjBDXHU2NjNFXHU3OTNBXHU2Mjc5XHU5MUNGXHU2NENEXHU0RjVDXHU5MDA5XHU5ODc5XG4gIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICBpdGVtXG4gICAgICAuc2V0VGl0bGUodGhpcy5pc0FsbFNlbGVjdGVkKCkgPyAnXHUyNjExIFx1OTAwOVx1NjJFOScgOiAnXHUyNjEwIFx1NTE2OFx1OTAwOScpXG4gICAgICAuc2V0SWNvbignY2hlY2stc3F1YXJlJylcbiAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgdGhpcy50b2dnbGVTZWxlY3RBbGwoKTtcbiAgICAgIH0pXG4gICk7XG5cbiAgbWVudS5hZGRTZXBhcmF0b3IoKTtcblxuICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ25vdGVzJykge1xuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKGBcdTI2QTEgXHU2Mjc5XHU5MUNGXHU1MjM2XHU1MzYxICgke3RoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemV9KWApXG4gICAgICAgIC5zZXRJY29uKCd6YXAnKVxuICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgdGhpcy5iYXRjaENyZWF0ZUZsYXNoY2FyZHMoKTtcbiAgICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgIGl0ZW1cbiAgICAgIC5zZXRUaXRsZShgXHVEODNEXHVEREQxXHVGRTBGIFx1NTIyMFx1OTY2NFx1OTAwOVx1NEUyRCAoJHt0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnID8gdGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZSA6IHRoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemV9KWApXG4gICAgICAuc2V0SWNvbigndHJhc2gnKVxuICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgICAgICAgIHRoaXMuYmF0Y2hEZWxldGVGbGFzaGNhcmRzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5iYXRjaERlbGV0ZU5vdGVzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICk7XG5cbiAgbWVudS5hZGRTZXBhcmF0b3IoKTtcblxuICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgaXRlbVxuICAgICAgLnNldFRpdGxlKCdcdTI3MTMgXHU5MDAwXHU1MUZBXHU2Mjc5XHU5MUNGXHU2QTIxXHU1RjBGJylcbiAgICAgIC5zZXRJY29uKCd4JylcbiAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgdGhpcy5iYXRjaE1vZGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIH0pXG4gICk7XG5cbiAgbWVudS5zaG93QXRNb3VzZUV2ZW50KGV2ZW50KTtcbn1cblxuICAvKipcbiAgICogXHU2NjNFXHU3OTNBXHU0RTBBXHU0RTBCXHU2NTg3XHU4M0RDXHU1MzU1XG4gICAqL1xuICBwcml2YXRlIHNob3dDb250ZXh0TWVudShldmVudDogTW91c2VFdmVudCwgdW5pdDogQ29udGVudFVuaXQpIHtcbiAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdUQ4M0RcdURDRDYgXHU4REYzXHU4RjZDXHU1MjMwXHU1MzlGXHU2NTg3JylcbiAgICAgICAgLnNldEljb24oJ2Fycm93LXVwLXJpZ2h0JylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5qdW1wVG9Tb3VyY2UodW5pdCkpXG4gICAgKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdUQ4M0RcdURDQUMgXHU3RjE2XHU4RjkxXHU2Mjc5XHU2Q0U4JylcbiAgICAgICAgLnNldEljb24oJ21lc3NhZ2Utc3F1YXJlJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5vcGVuQW5ub3RhdGlvbkVkaXRvcih1bml0KSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcbiAgICBpZiAodW5pdC5mbGFzaGNhcmRJZHMubGVuZ3RoID4gMCkge1xuICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICBpdGVtXG4gICAgICAgICAgLnNldFRpdGxlKCdcdTI3MEZcdUZFMEYgXHU3RjE2XHU4RjkxXHU5NUVBXHU1MzYxJylcbiAgICAgICAgICAuc2V0SWNvbignZWRpdCcpXG4gICAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5lZGl0Rmxhc2hjYXJkc0ZvclVuaXQodW5pdCxldmVudCkpXG4gICAgICApO1xuICAgICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcbiAgICB9XG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1MjZBMSBcdTc1MUZcdTYyMTBcdTk1RUFcdTUzNjEnKVxuICAgICAgICAuc2V0SWNvbignemFwJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5xdWlja0dlbmVyYXRlRmxhc2hjYXJkKHVuaXQpKVxuICAgICk7XG4gIFxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdTI3OTUgXHU1MjFCXHU1RUZBIFFBIFx1OTVFQVx1NTM2MScpXG4gICAgICAgIC5zZXRJY29uKCdwbHVzJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRmxhc2hjYXJkKHVuaXQsICdxYScpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHUyNzk1IFx1NTIxQlx1NUVGQVx1NTg2Qlx1N0E3QVx1OTVFQVx1NTM2MScpXG4gICAgICAgIC5zZXRJY29uKCdwbHVzJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRmxhc2hjYXJkKHVuaXQsICdjbG96ZScpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1NjdFNVx1NzcwQlx1N0VERlx1OEJBMScpXG4gICAgICAgIC5zZXRJY29uKCdiYXItY2hhcnQnKVxuICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgdGhpcy5wbHVnaW4uYWN0aXZhdGVTdGF0cygpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1RDgzRFx1REREMVx1RkUwRiBcdTUyMjBcdTk2NjRcdTdCMTRcdThCQjAnKVxuICAgICAgICAuc2V0SWNvbigndHJhc2gnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgaWYgKGNvbmZpcm0oJ1x1Nzg2RVx1NUI5QVx1ODk4MVx1NTIyMFx1OTY2NFx1OEZEOVx1Njc2MVx1N0IxNFx1OEJCMFx1NTQxN1x1RkYxRicpKSB7XG4gICAgICAgICAgICAvLyBcdUQ4M0RcdUREMjcgXHU1MTQ4XHU1MjIwXHU5NjY0XHU1MTczXHU4MDU0XHU3Njg0XHU5NUVBXHU1MzYxXG4gICAgICAgICAgICBpZiAodW5pdC5mbGFzaGNhcmRJZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhcmRJZCBvZiB1bml0LmZsYXNoY2FyZElkcykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZGVsZXRlQ2FyZChjYXJkSWQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NTE4RFx1NTIyMFx1OTY2NFx1N0IxNFx1OEJCMFxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZGVsZXRlQ29udGVudFVuaXQodW5pdC5pZCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdUQ4M0RcdURERDFcdUZFMEYgXHU3QjE0XHU4QkIwXHU1REYyXHU1MjIwXHU5NjY0Jyk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XG4gIH1cbi8qKlxuICogXHU3RjE2XHU4RjkxXHU3QjE0XHU4QkIwXHU1MzU1XHU1MTQzXHU1MTczXHU4MDU0XHU3Njg0XHU5NUVBXHU1MzYxXG4gKi9cbnByaXZhdGUgZWRpdEZsYXNoY2FyZHNGb3JVbml0KHVuaXQ6IENvbnRlbnRVbml0LCBldmVudD86IE1vdXNlRXZlbnQpIHtcbiAgaWYgKHVuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aCA9PT0gMCkge1xuICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdThCRTVcdTdCMTRcdThCQjBcdTZDQTFcdTY3MDlcdTUxNzNcdTgwNTRcdTc2ODRcdTk1RUFcdTUzNjEnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBcdTU5ODJcdTY3OUNcdTUzRUFcdTY3MDlcdTRFMDBcdTVGMjBcdTk1RUFcdTUzNjEsXHU3NkY0XHU2M0E1XHU3RjE2XHU4RjkxXG4gIGlmICh1bml0LmZsYXNoY2FyZElkcy5sZW5ndGggPT09IDEpIHtcbiAgICBjb25zdCBhbGxDYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgIGNvbnN0IGNhcmQgPSBhbGxDYXJkcy5maW5kKGMgPT4gYy5pZCA9PT0gdW5pdC5mbGFzaGNhcmRJZHNbMF0pO1xuICAgIGlmIChjYXJkKSB7XG4gICAgICB0aGlzLmVkaXRGbGFzaGNhcmQoY2FyZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdTYyN0VcdTRFMERcdTUyMzBcdThCRTVcdTk1RUFcdTUzNjEnKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gXHU1OTgyXHU2NzlDXHU2NzA5XHU1OTFBXHU1RjIwXHU5NUVBXHU1MzYxLFx1NjYzRVx1NzkzQVx1OTAwOVx1NjJFOVx1ODNEQ1x1NTM1NVxuICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcbiAgY29uc3QgYWxsQ2FyZHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldEFsbEZsYXNoY2FyZHMoKTtcbiAgXG4gIHVuaXQuZmxhc2hjYXJkSWRzLmZvckVhY2goKGNhcmRJZCwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBjYXJkID0gYWxsQ2FyZHMuZmluZChjID0+IGMuaWQgPT09IGNhcmRJZCk7XG4gICAgaWYgKGNhcmQpIHtcbiAgICAgIGNvbnN0IHR5cGVMYWJlbCA9IGNhcmQudHlwZSA9PT0gJ3FhJyA/ICdRJkEnIDogJ1x1NTg2Qlx1N0E3QSc7XG4gICAgICBjb25zdCBwcmV2aWV3ID0gY2FyZC5mcm9udC5sZW5ndGggPiAzMCBcbiAgICAgICAgPyBjYXJkLmZyb250LnN1YnN0cmluZygwLCAzMCkgKyAnLi4uJyBcbiAgICAgICAgOiBjYXJkLmZyb250O1xuICAgICAgXG4gICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgIGl0ZW1cbiAgICAgICAgICAuc2V0VGl0bGUoYCR7aW5kZXggKyAxfS4gJHt0eXBlTGFiZWx9OiAke3ByZXZpZXd9YClcbiAgICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLmVkaXRGbGFzaGNhcmQoY2FyZCkpXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gXHU1NzI4XHU5RjIwXHU2ODA3XHU0RjREXHU3RjZFXHU2NjNFXHU3OTNBXHU4M0RDXHU1MzU1XG4gIGlmIChldmVudCkge1xuICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XG4gIH0gZWxzZSB7XG4gICAgbWVudS5zaG93QXRQb3NpdGlvbih7IHg6IDEwMCwgeTogMTAwIH0pOyAvLyBcdTlFRDhcdThCQTRcdTRGNERcdTdGNkVcbiAgfVxufVxuLyoqXG4gKiBcdTY2M0VcdTc5M0FcdTk1RUFcdTUzNjFcdTRFMEFcdTRFMEJcdTY1ODdcdTgzRENcdTUzNTVcbiAqL1xucHJpdmF0ZSBzaG93Rmxhc2hjYXJkQ29udGV4dE1lbnUoZXZlbnQ6IE1vdXNlRXZlbnQsIGNhcmQ6IEZsYXNoY2FyZCkge1xuICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcblxuICAvLyBcdThERjNcdThGNkNcdTUyMzBcdTUzOUZcdTY1ODdcbiAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgIGl0ZW1cbiAgICAgIC5zZXRUaXRsZSgnXHVEODNEXHVEQ0Q2IFx1OERGM1x1OEY2Q1x1NTIzMFx1NTM5Rlx1NjU4NycpXG4gICAgICAuc2V0SWNvbignYXJyb3ctdXAtcmlnaHQnKVxuICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAvLyBcdTRGRUVcdTY1MzlcdUZGMUFcdTRGN0ZcdTc1Mjggc291cmNlQ29udGVudElkXG4gICAgICAgIGNvbnN0IHVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjYXJkLnNvdXJjZUNvbnRlbnRJZCk7XG4gICAgICAgIGlmICh1bml0KSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5qdW1wVG9Tb3VyY2UodW5pdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2MjdFXHU0RTBEXHU1MjMwXHU3QjE0XHU4QkIwXHU1MzU1XHU1MTQzXHVGRjBDXHU1QzFEXHU4QkQ1XHU3NkY0XHU2M0E1XHU2MjUzXHU1RjAwXHU2NTg3XHU0RUY2XG4gICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChjYXJkLnNvdXJjZUZpbGUpO1xuICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKS5vcGVuRmlsZShmaWxlKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBcdTVERjJcdTYyNTNcdTVGMDBcdTZFOTBcdTY1ODdcdTRFRjYnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1NjI3RVx1NEUwRFx1NTIzMFx1NTM5Rlx1NTlDQlx1N0IxNFx1OEJCMCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgKTtcbiAgLy8gXHU3RjE2XHU4RjkxXHU1MzYxXHU3MjQ3XG4gIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICBpdGVtXG4gICAgICAuc2V0VGl0bGUoJ1x1MjcwRlx1RkUwRiBcdTdGMTZcdThGOTFcdTUzNjFcdTcyNDcnKVxuICAgICAgLnNldEljb24oJ2VkaXQnKVxuICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICB0aGlzLmVkaXRGbGFzaGNhcmQoY2FyZCk7XG4gICAgICB9KVxuICApO1xuXG4gIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgLy8gXHU2N0U1XHU3NzBCXHU3RURGXHU4QkExXG4gIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICBpdGVtXG4gICAgICAuc2V0VGl0bGUoJ1x1RDgzRFx1RENDQSBcdTY3RTVcdTc3MEJcdTdFREZcdThCQTEnKVxuICAgICAgLnNldEljb24oJ2Jhci1jaGFydCcpXG4gICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFjdGl2YXRlU3RhdHMoKTtcbiAgICAgIH0pXG4gICk7XG5cbiAgbWVudS5hZGRTZXBhcmF0b3IoKTtcblxuICAvLyBcdTUyMjBcdTk2NjRcdTUzNjFcdTcyNDdcbiAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgIGl0ZW1cbiAgICAgIC5zZXRUaXRsZSgnXHVEODNEXHVEREQxXHVGRTBGIFx1NTIyMFx1OTY2NFx1NTM2MVx1NzI0NycpXG4gICAgICAuc2V0SWNvbigndHJhc2gnKVxuICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoY29uZmlybSgnXHU3ODZFXHU1QjlBXHU4OTgxXHU1MjIwXHU5NjY0XHU4RkQ5XHU1RjIwXHU5NUVBXHU1MzYxXHU1NDE3XHVGRjFGJykpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZUZsYXNoY2FyZChjYXJkLmlkKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgKTtcblxuICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xufVxuICAvKipcbiAgICogXHU1MjFCXHU1RUZBXHU3Mjc5XHU1QjlBXHU3QzdCXHU1NzhCXHU3Njg0XHU5NUVBXHU1MzYxXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNyZWF0ZUZsYXNoY2FyZCh1bml0OiBDb250ZW50VW5pdCwgdHlwZTogJ3FhJyB8ICdjbG96ZScpIHtcbiAgICBjb25zdCBtb2RhbCA9IG5ldyBGbGFzaGNhcmRDcmVhdGlvbk1vZGFsKFxuICAgICAgdGhpcy5hcHAsXG4gICAgICB1bml0LFxuICAgICAgdHlwZSxcbiAgICAgIGFzeW5jIChxdWVzdGlvbjogc3RyaW5nLCBhbnN3ZXI6IHN0cmluZykgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh0eXBlID09PSAncWEnKSB7XG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTk1RUVcdTdCNTRcdTUzNjFcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuY3JlYXRlUUFDYXJkKFxuICAgICAgICAgICAgICB1bml0LmlkLFxuICAgICAgICAgICAgICBxdWVzdGlvbixcbiAgICAgICAgICAgICAgYW5zd2VyXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdTUzNjEgLSBcdTdCODBcdTUzNTVcdTU5MDRcdTc0MDZcdUZGMENcdTVDMDZcdTY1NzRcdTRFMkFcdTdCNTRcdTY4NDhcdTRGNUNcdTRFM0FcdTRFMDBcdTRFMkFcdTdBN0FcbiAgICAgICAgICAgIGNvbnN0IGRlbGV0aW9ucyA9IFt7XG4gICAgICAgICAgICAgIGluZGV4OiAwLFxuICAgICAgICAgICAgICBhbnN3ZXI6IGFuc3dlclxuICAgICAgICAgICAgfV07XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmNyZWF0ZUNsb3plQ2FyZChcbiAgICAgICAgICAgICAgdW5pdC5pZCxcbiAgICAgICAgICAgICAgcXVlc3Rpb24sXG4gICAgICAgICAgICAgIGRlbGV0aW9uc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgbmV3IE5vdGljZShgXHUyNzA1ICR7dHlwZSA9PT0gJ3FhJyA/ICdRQScgOiAnXHU1ODZCXHU3QTdBJ31cdTk1RUFcdTUzNjFcdTVERjJcdTUyMUJcdTVFRkFgKTtcbiAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBmbGFzaGNhcmQ6JywgZXJyb3IpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcdTU5MzFcdThEMjUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG5cbiAgICBtb2RhbC5vcGVuKCk7XG4gIH1cblxuICAvKipcbiAgICogXHU1NzI4XHU3RjE2XHU4RjkxXHU1NjY4XHU0RTJEXHU2MjUzXHU1RjAwXHU2NTg3XHU0RUY2XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIG9wZW5GaWxlSW5FZGl0b3IoZmlsZVBhdGg6IHN0cmluZykge1xuICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKS5vcGVuRmlsZShmaWxlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1NjVFMFx1NkNENVx1NjI1M1x1NUYwMFx1NjU4N1x1NEVGNicpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTUyMjBcdTk2NjRcdTk1RUFcdTUzNjFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZGVsZXRlRmxhc2hjYXJkKGNhcmRJZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZGVsZXRlQ2FyZChjYXJkSWQpO1xuICAgICAgbmV3IE5vdGljZSgnXHVEODNEXHVEREQxXHVGRTBGIFx1OTVFQVx1NTM2MVx1NURGMlx1NTIyMFx1OTY2NCcpO1xuICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGZsYXNoY2FyZDonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdcdTI3NEMgXHU1MjIwXHU5NjY0XHU5NUVBXHU1MzYxXHU1OTMxXHU4RDI1Jyk7XG4gICAgfVxuICB9XG4vKipcbiAqIFx1N0YxNlx1OEY5MVx1OTVFQVx1NTM2MVxuICovXG5wcml2YXRlIGVkaXRGbGFzaGNhcmQoY2FyZDogRmxhc2hjYXJkKSB7XG4gIGNvbnN0IG1vZGFsID0gbmV3IEZsYXNoY2FyZEVkaXRNb2RhbChcbiAgICB0aGlzLmFwcCxcbiAgICBjYXJkLFxuICAgIGFzeW5jIChxdWVzdGlvbjogc3RyaW5nLCBhbnN3ZXI6IHN0cmluZykgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NkY0XHU2NUIwXHU1NDBFXHU3Njg0XHU1MzYxXHU3MjQ3XHU1QkY5XHU4QzYxXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRDYXJkOiBGbGFzaGNhcmQgPSB7XG4gICAgICAgICAgLi4uY2FyZCxcbiAgICAgICAgICBmcm9udDogcXVlc3Rpb24sXG4gICAgICAgICAgYmFjazogY2FyZC50eXBlID09PSAnY2xvemUnID8gW2Fuc3dlcl0gOiBhbnN3ZXIsXG4gICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgIC4uLmNhcmQubWV0YWRhdGEsXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KClcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBcdTU5ODJcdTY3OUMgdXBkYXRlQ2FyZCBcdTUzRUFcdTYzQTVcdTUzRDdcdTRFMDBcdTRFMkFcdTUzQzJcdTY1NzBcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci51cGRhdGVDYXJkKHVwZGF0ZWRDYXJkKTtcbiAgICAgICAgXG4gICAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBcdTk1RUFcdTUzNjFcdTVERjJcdTY2RjRcdTY1QjAnKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBmbGFzaGNhcmQ6JywgZXJyb3IpO1xuICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgXHU2NkY0XHU2NUIwXHU5NUVBXHU1MzYxXHU1OTMxXHU4RDI1Jyk7XG4gICAgICB9XG4gICAgfVxuICApO1xuICBtb2RhbC5vcGVuKCk7XG59XG4gIC8qKlxuICAgKiBcdTY2RjRcdTY1QjBcdTYyNzlcdTkxQ0ZcdTY0Q0RcdTRGNUNcdTYzMDlcdTk0QUVcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlQmF0Y2hCdXR0b25zKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgYmF0Y2hBY3Rpb25zID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5iYXRjaC1hY3Rpb25zJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKGJhdGNoQWN0aW9ucykge1xuICAgICAgY29uc3Qgc2VsZWN0QWxsQnRuID0gYmF0Y2hBY3Rpb25zLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3QtYWxsLWJ0bicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgY29uc3QgZGVsZXRlQnRuID0gYmF0Y2hBY3Rpb25zLnF1ZXJ5U2VsZWN0b3IoJy5iYXRjaC1kZWxldGUtYnRuJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBjb25zdCBjcmVhdGVCdG4gPSBiYXRjaEFjdGlvbnMucXVlcnlTZWxlY3RvcignLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG4nKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIFxuICAgICAgaWYgKHNlbGVjdEFsbEJ0bikge1xuICAgICAgICBzZWxlY3RBbGxCdG4udGV4dENvbnRlbnQgPSB0aGlzLmlzQWxsU2VsZWN0ZWQoKSA/ICdcdTI2MTEgXHU5MDA5XHU2MkU5JyA6ICdcdTI2MTAgXHU1MTY4XHU5MDA5JztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGRlbGV0ZUJ0bikge1xuICAgICAgICBjb25zdCBjb3VudCA9IHRoaXMudmlld1R5cGUgPT09ICdjYXJkcycgPyB0aGlzLnNlbGVjdGVkQ2FyZElkcy5zaXplIDogdGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZTtcbiAgICAgICAgZGVsZXRlQnRuLnRleHRDb250ZW50ID0gYFx1RDgzRFx1REREMVx1RkUwRiBcdTUyMjBcdTk2NjRcdTkwMDlcdTRFMkQgKCR7Y291bnR9KWA7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChjcmVhdGVCdG4pIHtcbiAgICAgICAgY3JlYXRlQnRuLnRleHRDb250ZW50ID0gYFx1MjZBMSBcdTYyNzlcdTkxQ0ZcdTUyMzZcdTUzNjEgKCR7dGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZX0pYDtcbiAgICAgIH1cbiAgICB9XG4gICAgICAvLyBcdTY2RjRcdTY1QjAgaGVhZGVyIFx1NEUyRFx1NzY4NFx1NTE2OFx1OTAwOVx1NjMwOVx1OTRBRVxuICBjb25zdCBoZWFkZXJTZWxlY3RCdG4gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnNlbGVjdC1hbGwtYnRuLWhlYWRlcicpIGFzIEhUTUxFbGVtZW50O1xuICBpZiAoaGVhZGVyU2VsZWN0QnRuKSB7XG4gICAgaGVhZGVyU2VsZWN0QnRuLnRleHRDb250ZW50ID0gdGhpcy5pc0FsbFNlbGVjdGVkKCkgPyAnXHUyNjExIFx1OTAwOVx1NjJFOScgOiAnXHUyNjEwIFx1NTE2OFx1OTAwOSc7XG4gIH1cbiAgXG4gIC8vIFx1NjZGNFx1NjVCMFx1NEZBN1x1OEZCOVx1NjgwRlx1NEUyRFx1NzY4NFx1NTE2OFx1OTAwOVx1NjMwOVx1OTRBRVxuICBjb25zdCBzaWRlYmFyU2VsZWN0QnRuID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3QtYWxsLWJ0bi1zaWRlYmFyJykgYXMgSFRNTEVsZW1lbnQ7XG4gIGlmIChzaWRlYmFyU2VsZWN0QnRuKSB7XG4gICAgc2lkZWJhclNlbGVjdEJ0bi50ZXh0Q29udGVudCA9IHRoaXMuaXNBbGxTZWxlY3RlZCgpID8gJ1x1MjYxMSBcdTkwMDlcdTYyRTknIDogJ1x1MjYxMCBcdTUxNjhcdTkwMDknO1xuICB9XG4gIH1cblxuICAvKipcbiAgICogXHU2Mjc5XHU5MUNGXHU1MjIwXHU5NjY0XHU5NUVBXHU1MzYxXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGJhdGNoRGVsZXRlRmxhc2hjYXJkcygpIHtcbiAgICBpZiAodGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZSA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1OEJGN1x1NTE0OFx1OTAwOVx1NjJFOVx1ODk4MVx1NTIyMFx1OTY2NFx1NzY4NFx1OTVFQVx1NTM2MScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghY29uZmlybShgXHU3ODZFXHU1QjlBXHU4OTgxXHU1MjIwXHU5NjY0XHU5MDA5XHU0RTJEXHU3Njg0ICR7dGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZX0gXHU1RjIwXHU5NUVBXHU1MzYxXHU1NDE3XHVGRjFGYCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgc3VjY2VzcyA9IDA7XG4gICAgbGV0IGZhaWxlZCA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IGNhcmRJZCBvZiB0aGlzLnNlbGVjdGVkQ2FyZElkcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5kZWxldGVDYXJkKGNhcmRJZCk7XG4gICAgICAgIHN1Y2Nlc3MrKztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGZsYXNoY2FyZDonLCBlcnJvcik7XG4gICAgICAgIGZhaWxlZCsrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmNsZWFyKCk7XG4gICAgbmV3IE5vdGljZShgXHUyNzA1IFx1NURGMlx1NTIyMFx1OTY2NCAke3N1Y2Nlc3N9IFx1NUYyMFx1OTVFQVx1NTM2MSR7ZmFpbGVkID4gMCA/IGBcdUZGMEMke2ZhaWxlZH0gXHU1RjIwXHU1OTMxXHU4RDI1YCA6ICcnfWApO1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICB9XG5cbi8qKlxuICogXHU2Mjc5XHU5MUNGXHU1MjIwXHU5NjY0XHU3QjE0XHU4QkIwXG4gKi9cbnByaXZhdGUgYXN5bmMgYmF0Y2hEZWxldGVOb3RlcygpIHtcbiAgaWYgKHRoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemUgPT09IDApIHtcbiAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU4OTgxXHU1MjIwXHU5NjY0XHU3Njg0XHU3QjE0XHU4QkIwJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCFjb25maXJtKGBcdTc4NkVcdTVCOUFcdTg5ODFcdTUyMjBcdTk2NjRcdTkwMDlcdTRFMkRcdTc2ODQgJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSBcdTY3NjFcdTdCMTRcdThCQjBcdTU0MTdcdUZGMUZgKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBzdWNjZXNzID0gMDtcbiAgbGV0IGZhaWxlZCA9IDA7XG5cbiAgZm9yIChjb25zdCB1bml0SWQgb2YgdGhpcy5zZWxlY3RlZFVuaXRJZHMpIHtcbiAgICB0cnkge1xuICAgICAgLy8gXHVEODNEXHVERDI3IFx1ODNCN1x1NTNENlx1N0IxNFx1OEJCMFxuICAgICAgY29uc3QgdW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KHVuaXRJZCk7XG4gICAgICBcbiAgICAgIGlmICh1bml0KSB7XG4gICAgICAgIC8vIFx1RDgzRFx1REQyNyBcdTUxNDhcdTUyMjBcdTk2NjRcdTUxNzNcdTgwNTRcdTc2ODRcdTk1RUFcdTUzNjFcbiAgICAgICAgaWYgKHVuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGNhcmRJZCBvZiB1bml0LmZsYXNoY2FyZElkcykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5kZWxldGVDYXJkKGNhcmRJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1NTE4RFx1NTIyMFx1OTY2NFx1N0IxNFx1OEJCMFxuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZGVsZXRlQ29udGVudFVuaXQodW5pdElkKTtcbiAgICAgIHN1Y2Nlc3MrKztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgbm90ZTonLCBlcnJvcik7XG4gICAgICBmYWlsZWQrKztcbiAgICB9XG4gIH1cblxuICB0aGlzLnNlbGVjdGVkVW5pdElkcy5jbGVhcigpO1xuICB0aGlzLmJhdGNoTW9kZSA9IGZhbHNlO1xuICBuZXcgTm90aWNlKGBcdTI3MDUgXHU1REYyXHU1MjIwXHU5NjY0ICR7c3VjY2Vzc30gXHU2NzYxXHU3QjE0XHU4QkIwJHtmYWlsZWQgPiAwID8gYFx1RkYwQyR7ZmFpbGVkfSBcdTY3NjFcdTU5MzFcdThEMjVgIDogJyd9YCk7XG4gIHRoaXMucmVmcmVzaCgpO1xufVxuXG4gIC8qKlxuICAgKiBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTUxNjhcdTkwMDlcbiAgICovXG4gIHByaXZhdGUgaXNBbGxTZWxlY3RlZCgpOiBib29sZWFuIHtcbiAgICBjb25zdCB2aXNpYmxlID0gdGhpcy5nZXRWaXNpYmxlSXRlbXMoKTtcbiAgICBcbiAgICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgICAgY29uc3QgY2FyZHMgPSB2aXNpYmxlLmNhcmRzIHx8IFtdO1xuICAgICAgcmV0dXJuIGNhcmRzLmxlbmd0aCA+IDAgJiYgdGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZSA9PT0gY2FyZHMubGVuZ3RoO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB1bml0cyA9IHZpc2libGUudW5pdHMgfHwgW107XG4gICAgICByZXR1cm4gdW5pdHMubGVuZ3RoID4gMCAmJiB0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplID09PSB1bml0cy5sZW5ndGg7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NTIwN1x1NjM2Mlx1NTE2OFx1OTAwOS9cdTUzRDZcdTZEODhcbiAgICovXG4gLyoqXG4gKiBcdTUyMDdcdTYzNjJcdTUxNjhcdTkwMDkvXHU1M0Q2XHU2RDg4XG4gKi9cbiBwcml2YXRlIHRvZ2dsZVNlbGVjdEFsbCgpIHtcbiAgXG4gIGNvbnN0IHZpc2libGUgPSB0aGlzLmdldFZpc2libGVJdGVtcygpO1xuICBcbiAgaWYgKHRoaXMudmlld1R5cGUgPT09ICdjYXJkcycpIHtcbiAgICBjb25zdCBjYXJkcyA9IHZpc2libGUuY2FyZHMgfHwgW107XG4gICAgXG4gICAgaWYgKGNhcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1NkNBMVx1NjcwOVx1NTNFRlx1OTAwOVx1NjJFOVx1NzY4NFx1OTVFQVx1NTM2MScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZSA9PT0gY2FyZHMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5jbGVhcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYXJkcy5mb3JFYWNoKGNhcmQgPT4gdGhpcy5zZWxlY3RlZENhcmRJZHMuYWRkKGNhcmQuaWQpKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgdW5pdHMgPSB2aXNpYmxlLnVuaXRzIHx8IFtdO1xuICAgIFxuICAgIFxuICAgIGlmICh1bml0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIFx1RDgzRFx1REQyNyBcdTY1MzlcdThGREJcdTYzRDBcdTc5M0FcdTRGRTFcdTYwNkZcbiAgICAgIGlmICh0aGlzLmRpc3BsYXlNb2RlID09PSAnc2lkZWJhcicgJiYgKHRoaXMuZ3JvdXBNb2RlID09PSAndGFnJyB8fCB0aGlzLmdyb3VwTW9kZSA9PT0gJ2RhdGUnKSkge1xuICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU2Q0ExXHU2NzA5XHU1M0VGXHU5MDA5XHU2MkU5XHU3Njg0XHU3QjE0XHU4QkIwJyk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnYW5ub3RhdGlvbicgJiYgIXRoaXMuc2VsZWN0ZWRGaWxlKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcIlx1NjcwOVx1NjI3OVx1NkNFOFwiXHU2MjE2XCJcdTY1RTBcdTYyNzlcdTZDRThcIlx1NTIwNlx1N0VDNCcpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmRpc3BsYXlNb2RlID09PSAnbWFpbicgJiYgIXRoaXMuc2VsZWN0ZWRGaWxlKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTRFMDBcdTRFMkFcdTUyMDZcdTdFQzQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdTZDQTFcdTY3MDlcdTUzRUZcdTkwMDlcdTYyRTlcdTc2ODRcdTdCMTRcdThCQjAnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemUgPT09IHVuaXRzLmxlbmd0aCkge1xuICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdW5pdHMuZm9yRWFjaCh1bml0ID0+IHRoaXMuc2VsZWN0ZWRVbml0SWRzLmFkZCh1bml0LmlkKSk7XG4gICAgfVxuICB9XG4gIFxuICB0aGlzLmJhdGNoTW9kZSA9ICh0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplID4gMCB8fCB0aGlzLnNlbGVjdGVkQ2FyZElkcy5zaXplID4gMCk7XG4gIHRoaXMucmVuZGVyKCk7XG59XG4gIC8qKlxuICogXHU4MUVBXHU1MkE4XHU1MTY4XHU5MDA5XHU1RjUzXHU1MjREXHU1M0VGXHU4OUMxXHU5ODc5XHU3NkVFXG4gKi9cbiAgcHJpdmF0ZSBhdXRvU2VsZWN0QWxsKCkge1xuICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuY2xlYXIoKTtcbiAgICBcbiAgICBjb25zdCB2aXNpYmxlID0gdGhpcy5nZXRWaXNpYmxlSXRlbXMoKTtcbiAgICBcbiAgICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgICAgY29uc3QgY2FyZHMgPSB2aXNpYmxlLmNhcmRzIHx8IFtdO1xuICAgICAgY2FyZHMuZm9yRWFjaChjYXJkID0+IHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmFkZChjYXJkLmlkKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHVuaXRzID0gdmlzaWJsZS51bml0cyB8fCBbXTtcbiAgICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB0aGlzLnNlbGVjdGVkVW5pdElkcy5hZGQodW5pdC5pZCkpO1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZSA+IDAgfHwgdGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZSA+IDApIHtcbiAgICAgIHRoaXMuYmF0Y2hNb2RlID0gdHJ1ZTtcbiAgICB9XG4gIH1cbi8qKlxuICogXHU2RTA1XHU5NjY0XHU2MjQwXHU2NzA5XHU5MDA5XHU2MkU5XG4gKi9cbnByaXZhdGUgY2xlYXJTZWxlY3Rpb24oKSB7XG4gIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gIHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmNsZWFyKCk7XG4gIHRoaXMuYmF0Y2hNb2RlID0gZmFsc2U7XG4gIHRoaXMucmVuZGVyKCk7XG59XG4gIC8qKlxuICAgKiBcdTY2RjRcdTY1QjBcdTYyNDBcdTY3MDljaGVja2JveFx1NzJCNlx1NjAwMVxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVDaGVja2JveGVzKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgY2hlY2tib3hlcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuYmF0Y2gtY2hlY2tib3gnKSBhcyBOb2RlTGlzdE9mPEhUTUxJbnB1dEVsZW1lbnQ+O1xuICAgIFxuICAgIGNoZWNrYm94ZXMuZm9yRWFjaChjaGVja2JveCA9PiB7XG4gICAgICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgICAgICBjb25zdCBjYXJkSWQgPSBjaGVja2JveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FyZC1pZCcpO1xuICAgICAgICBpZiAoY2FyZElkKSB7XG4gICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmhhcyhjYXJkSWQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB1bml0SWQgPSBjaGVja2JveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdW5pdC1pZCcpO1xuICAgICAgICBpZiAodW5pdElkKSB7XG4gICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRoaXMuc2VsZWN0ZWRVbml0SWRzLmhhcyh1bml0SWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogXHU2Mjc5XHU5MUNGXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGJhdGNoQ3JlYXRlRmxhc2hjYXJkcygpIHtcbiAgICBpZiAodGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZSA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1OEJGN1x1NTE0OFx1OTAwOVx1NjJFOVx1ODk4MVx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1NzY4NFx1N0IxNFx1OEJCMCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHVuaXRzID0gQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkVW5pdElkcylcbiAgICAgIC5tYXAoaWQgPT4gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoaWQpKVxuICAgICAgLmZpbHRlcih1ID0+IHUgIT09IHVuZGVmaW5lZCAmJiB1LmZsYXNoY2FyZElkcy5sZW5ndGggPT09IDApIGFzIENvbnRlbnRVbml0W107XG5cbiAgICBpZiAodW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU5MDA5XHU0RTJEXHU3Njg0XHU3QjE0XHU4QkIwXHU5MEZEXHU1REYyXHU1MjFCXHU1RUZBXHU4RkM3XHU5NUVBXHU1MzYxJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU5MDA5XHU2MkU5XHU3QzdCXHU1NzhCXHU3Njg0XHU2QTIxXHU2MDAxXHU2ODQ2XG4gICAgY29uc3QgeyBCYXRjaENyZWF0ZU1vZGFsIH0gPSBhd2FpdCBpbXBvcnQoJy4vT3ZlcnZpZXdWaWV3Jyk7XG4gICAgY29uc3QgcXVpY2tDcmVhdG9yID0gbmV3IFF1aWNrRmxhc2hjYXJkQ3JlYXRvcih0aGlzLnBsdWdpbik7XG4gICAgY29uc3QgbW9kYWwgPSBuZXcgQmF0Y2hDcmVhdGVNb2RhbChcbiAgICAgIHRoaXMuYXBwLFxuICAgICAgdGhpcy5wbHVnaW4sXG4gICAgICBxdWlja0NyZWF0b3IsXG4gICAgICB1bml0cyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICB9XG4gICAgKTtcbiAgICBtb2RhbC5vcGVuKCk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTVERTVcdTUxNzdcdTY1QjlcdTZDRDUgPT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU4RkM3XHU2RUU0XHU1NDBFXHU3Njg0XHU1MTg1XHU1QkI5XHU1MzU1XHU1MTQzXG4gICAqL1xuICBwcml2YXRlIGdldEZpbHRlcmVkVW5pdHMoKTogQ29udGVudFVuaXRbXSB7XG4gICAgbGV0IHVuaXRzID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0QWxsQ29udGVudFVuaXRzKCk7XG5cbiAgICAvLyBcdTY0MUNcdTdEMjJcdThGQzdcdTZFRTRcbiAgICBpZiAodGhpcy5zZWFyY2hRdWVyeSkge1xuICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLnNlYXJjaFF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+XG4gICAgICAgIHVuaXQuY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSB8fFxuICAgICAgICB1bml0LnNvdXJjZS5maWxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5zb21lKHRhZyA9PiB0YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkpXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFx1N0M3Qlx1NTc4Qlx1OEZDN1x1NkVFNFxuICAgIGlmICh0aGlzLmZpbHRlck1vZGUgPT09ICdhbm5vdGF0ZWQnKSB7XG4gICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1ID0+IHUuYW5ub3RhdGlvbklkKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZmlsdGVyTW9kZSA9PT0gJ2ZsYXNoY2FyZHMnKSB7XG4gICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1ID0+IHUuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApO1xuICAgIH1cblxuICAgIHJldHVybiB1bml0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTUyMDZcdTdFQzRcdTUxODVcdTVCQjlcdTUzNTVcdTUxNDNcbiAgICovXG4gIHByaXZhdGUgZ3JvdXBVbml0cyh1bml0czogQ29udGVudFVuaXRbXSk6IEFycmF5PHsgZ3JvdXBLZXk6IHN0cmluZzsgdW5pdHM6IENvbnRlbnRVbml0W10gfT4ge1xuICAgIGNvbnN0IGdyb3VwZWQgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudFVuaXRbXT4oKTtcblxuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICBsZXQga2V5OiBzdHJpbmc7XG5cbiAgICAgIHN3aXRjaCAodGhpcy5ncm91cE1vZGUpIHtcbiAgICAgICAgY2FzZSAnZmlsZSc6XG4gICAgICAgICAga2V5ID0gdW5pdC5zb3VyY2UuZmlsZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdhbm5vdGF0aW9uJzpcbiAgLy8gXHU2MzA5XHU2NjJGXHU1NDI2XHU2NzA5XHU2Mjc5XHU2Q0U4XHU1MjA2XHU3RUM0XG4gIGNvbnN0IGhhc0Fubm90YXRpb24gPSB1bml0LmFubm90YXRpb25JZCA/ICdcdTY3MDlcdTYyNzlcdTZDRTgnIDogJ1x1NjVFMFx1NjI3OVx1NkNFOCc7XG4gIGlmICghZ3JvdXBlZC5oYXMoaGFzQW5ub3RhdGlvbikpIGdyb3VwZWQuc2V0KGhhc0Fubm90YXRpb24sIFtdKTtcbiAgZ3JvdXBlZC5nZXQoaGFzQW5ub3RhdGlvbikhLnB1c2godW5pdCk7XG4gIHJldHVybjtcbiAgICAgICAgY2FzZSAndGFnJzpcbiAgICAgICAgICB1bml0Lm1ldGFkYXRhLnRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICAgICAgaWYgKCFncm91cGVkLmhhcyh0YWcpKSBncm91cGVkLnNldCh0YWcsIFtdKTtcbiAgICAgICAgICAgIGdyb3VwZWQuZ2V0KHRhZykhLnB1c2godW5pdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICBrZXkgPSB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUodW5pdC5tZXRhZGF0YS5jcmVhdGVkQXQpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBrZXkgPSAnXHU2NzJBXHU1MjA2XHU3RUM0JztcbiAgICAgIH1cblxuICAgICAgaWYgKCFncm91cGVkLmhhcyhrZXkpKSBncm91cGVkLnNldChrZXksIFtdKTtcbiAgICAgIGdyb3VwZWQuZ2V0KGtleSkhLnB1c2godW5pdCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gQXJyYXkuZnJvbShncm91cGVkLmVudHJpZXMoKSlcbiAgICAubWFwKChbZ3JvdXBLZXksIHVuaXRzXSkgPT4gKHsgZ3JvdXBLZXksIHVuaXRzIH0pKVxuICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRlx1NjI3OVx1NkNFOFx1NTIwNlx1N0VDNFx1RkYwQ1wiXHU2NzA5XHU2Mjc5XHU2Q0U4XCJcdTYzOTJcdTU3MjhcdTUyNERcdTk3NjJcbiAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnYW5ub3RhdGlvbicpIHtcbiAgICBpZiAoYS5ncm91cEtleSA9PT0gJ1x1NjcwOVx1NjI3OVx1NkNFOCcpIHJldHVybiAtMTtcbiAgICBpZiAoYi5ncm91cEtleSA9PT0gJ1x1NjcwOVx1NjI3OVx1NkNFOCcpIHJldHVybiAxO1xuICAgIHJldHVybiAwO1xuICB9XG4gICAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTY1RTVcdTY3MUZcdTUyMDZcdTdFQzRcdUZGMENcdTYzMDlcdTY1RTVcdTY3MUZcdTk2NERcdTVFOEZcdTYzOTJcdTUyMTdcbiAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgIHJldHVybiBiLmdyb3VwS2V5LmxvY2FsZUNvbXBhcmUoYS5ncm91cEtleSk7IC8vIFx1NjVFNVx1NjcxRlx1NUI1N1x1N0IyNlx1NEUzMlx1OTY0RFx1NUU4RlxuICAgICAgfVxuICAgICAgLy8gXHU1MTc2XHU0RUQ2XHU1MjA2XHU3RUM0XHU2MzA5XHU2NTcwXHU5MUNGXHU5NjREXHU1RThGXG4gICAgICByZXR1cm4gYi51bml0cy5sZW5ndGggLSBhLnVuaXRzLmxlbmd0aDtcbiAgICB9KTtcbiAgfVxuLyoqXG4gKiBcdTUyMDZcdTdFQzRcdTk1RUFcdTUzNjFcdUZGMDhcdTdDN0JcdTRGM0MgZ3JvdXBVbml0c1x1RkYwOVxuICovXG5wcml2YXRlIGdyb3VwRmxhc2hjYXJkcyhmbGFzaGNhcmRzOiBGbGFzaGNhcmRbXSk6IEFycmF5PHsgZ3JvdXBLZXk6IHN0cmluZzsgY2FyZHM6IEZsYXNoY2FyZFtdIH0+IHtcbiAgY29uc3QgZ3JvdXBlZCA9IG5ldyBNYXA8c3RyaW5nLCBGbGFzaGNhcmRbXT4oKTtcblxuICBmbGFzaGNhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgbGV0IGtleXM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgLy8gXHU4M0I3XHU1M0Q2XHU1MTczXHU4MDU0XHU3Njg0XHU3QjE0XHU4QkIwXHU1MzU1XHU1MTQzXG4gICAgY29uc3QgdW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNhcmQuc291cmNlQ29udGVudElkKTtcblxuICAgIHN3aXRjaCAodGhpcy5ncm91cE1vZGUpIHtcbiAgICAgIGNhc2UgJ2ZpbGUnOlxuICAgICAgICBrZXlzID0gW2NhcmQuc291cmNlRmlsZV07XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdhbm5vdGF0aW9uJzpcbiAgICAgICAgLy8gXHUyNzA1IFx1NTIyMFx1OTY2NFx1OEZEOVx1ODg0Q1x1OTFDRFx1NTkwRFx1NThGMFx1NjYwRVxuICAgICAgICAvLyBjb25zdCB1bml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY2FyZC5zb3VyY2VDb250ZW50SWQpO1xuICAgICAgICBpZiAodW5pdCAmJiB1bml0LmFubm90YXRpb25JZCkge1xuICAgICAgICAgIGtleXMgPSBbJ1x1NjcwOVx1NjI3OVx1NkNFOCddO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGtleXMgPSBbJ1x1NjVFMFx1NjI3OVx1NkNFOCddO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgXG4gICAgICBjYXNlICd0YWcnOlxuICAgICAgICAvLyBcdTRGMThcdTUxNDhcdTRGN0ZcdTc1MjhcdTdCMTRcdThCQjBcdTUzNTVcdTUxNDNcdTc2ODRcdTY4MDdcdTdCN0VcbiAgICAgICAgaWYgKHVuaXQgJiYgdW5pdC5tZXRhZGF0YS50YWdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBrZXlzID0gdW5pdC5tZXRhZGF0YS50YWdzO1xuICAgICAgICB9ICAgXG4gICAgICAgIC8vIFx1NTE3Nlx1NkIyMVx1NEY3Rlx1NzUyOFx1NTM2MVx1NzI0N1x1ODFFQVx1NURGMVx1NzY4NFx1NjgwN1x1N0I3RVxuICAgICAgICBlbHNlIGlmIChjYXJkLnRhZ3MgJiYgY2FyZC50YWdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBrZXlzID0gY2FyZC50YWdzO1xuICAgICAgICB9IFxuICAgICAgICAvLyBcdTY3MDBcdTU0MEVcdTRGN0ZcdTc1MjggZGVjayBcdTRGNUNcdTRFM0FcdTY4MDdcdTdCN0VcbiAgICAgICAgZWxzZSBpZiAoY2FyZC5kZWNrKSB7XG4gICAgICAgICAga2V5cyA9IFtjYXJkLmRlY2tdO1xuICAgICAgICB9XG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1OTBGRFx1NkNBMVx1NjcwOVx1RkYwQ1x1NjUzRVx1NTE2NVwiXHU2NzJBXHU1MjA2XHU3QzdCXCJcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAga2V5cyA9IFsnXHU2NzJBXHU1MjA2XHU3QzdCJ107XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgIGtleXMgPSBbdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKGNhcmQubWV0YWRhdGEuY3JlYXRlZEF0KSldO1xuICAgICAgICBicmVhaztcbiAgICAgICAgXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBrZXlzID0gWydcdTY3MkFcdTUyMDZcdTdFQzQnXTtcbiAgICB9XG5cbiAgICAvLyBcdTVDMDZcdTUzNjFcdTcyNDdcdTZERkJcdTUyQTBcdTUyMzBcdTYyNDBcdTY3MDlcdTUzMzlcdTkxNERcdTc2ODRcdTUyMDZcdTdFQzRcdTRFMkRcbiAgICBrZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGlmICghZ3JvdXBlZC5oYXMoa2V5KSkge1xuICAgICAgICBncm91cGVkLnNldChrZXksIFtdKTtcbiAgICAgIH1cbiAgICAgIGdyb3VwZWQuZ2V0KGtleSkhLnB1c2goY2FyZCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIFx1OEY2Q1x1NjM2Mlx1NEUzQVx1NjU3MFx1N0VDNFx1NUU3Nlx1NjM5Mlx1NUU4RlxuICBjb25zdCByZXN1bHQgPSBBcnJheS5mcm9tKGdyb3VwZWQuZW50cmllcygpKVxuICAgIC5tYXAoKFtncm91cEtleSwgY2FyZHNdKSA9PiAoeyBncm91cEtleSwgY2FyZHMgfSkpXG4gICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRlx1NjI3OVx1NkNFOFx1NTIwNlx1N0VDNFx1RkYwQ1wiXHU2NzA5XHU2Mjc5XHU2Q0U4XCJcdTYzOTJcdTU3MjhcdTUyNERcdTk3NjJcbiAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2Fubm90YXRpb24nKSB7XG4gICAgICAgIGlmIChhLmdyb3VwS2V5ID09PSAnXHU2NzA5XHU2Mjc5XHU2Q0U4JykgcmV0dXJuIC0xO1xuICAgICAgICBpZiAoYi5ncm91cEtleSA9PT0gJ1x1NjcwOVx1NjI3OVx1NkNFOCcpIHJldHVybiAxO1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cblxuICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2NjJGXHU2NUU1XHU2NzFGXHU1MjA2XHU3RUM0XHVGRjBDXHU2MzA5XHU2NUU1XHU2NzFGXHU5NjREXHU1RThGXHU2MzkyXHU1MjE3XG4gICAgICBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdkYXRlJykge1xuICAgICAgICByZXR1cm4gYi5ncm91cEtleS5sb2NhbGVDb21wYXJlKGEuZ3JvdXBLZXkpO1xuICAgICAgfVxuICAgICAgLy8gXHU1MTc2XHU0RUQ2XHU1MjA2XHU3RUM0XHU2MzA5XHU2NTcwXHU5MUNGXHU5NjREXHU1RThGXG4gICAgICByZXR1cm4gYi5jYXJkcy5sZW5ndGggLSBhLmNhcmRzLmxlbmd0aDtcbiAgICB9KTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU3RURGXHU4QkExXHU0RkUxXHU2MDZGXG4gICAqL1xuICBwcml2YXRlIGdldEZpbHRlcmVkU3RhdHMoKSB7XG4gICAgY29uc3QgdW5pdHMgPSB0aGlzLmdldEZpbHRlcmVkVW5pdHMoKTtcbiAgICByZXR1cm4ge1xuICAgICAgY291bnQ6IHVuaXRzLmxlbmd0aCxcbiAgICAgIHdpdGhBbm5vdGF0aW9uczogdW5pdHMuZmlsdGVyKHUgPT4gdS5hbm5vdGF0aW9uSWQpLmxlbmd0aCxcbiAgICAgIHdpdGhGbGFzaGNhcmRzOiB1bml0cy5maWx0ZXIodSA9PiB1LmZsYXNoY2FyZElkcy5sZW5ndGggPiAwKS5sZW5ndGhcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjgzQ1x1NUYwRlx1NTMxNlx1NjVFNVx1NjcxRlxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXREYXRlKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnemgtQ04nLCB7XG4gICAgICB5ZWFyOiAnbnVtZXJpYycsXG4gICAgICBtb250aDogJzItZGlnaXQnLFxuICAgICAgZGF5OiAnMi1kaWdpdCdcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTUyMDZcdTdFQzRcdTU2RkVcdTY4MDdcbiAgICovXG4gIHByaXZhdGUgZ2V0R3JvdXBJY29uKG1vZGU6IEdyb3VwTW9kZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICBjYXNlICdmaWxlJzogcmV0dXJuICdcdUQ4M0RcdURDQzQnO1xuICAgICAgY2FzZSAnYW5ub3RhdGlvbic6IHJldHVybiAnXHVEODNEXHVEQ0FDJztcbiAgICAgIGNhc2UgJ3RhZyc6IHJldHVybiAnXHVEODNDXHVERkY3XHVGRTBGJztcbiAgICAgIGNhc2UgJ2RhdGUnOiByZXR1cm4gJ1x1RDgzRFx1RENDNSc7XG4gICAgICBkZWZhdWx0OiByZXR1cm4gJ1x1RDgzRFx1RENDMSc7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gKiBcdTUyMUJcdTVFRkFcdTUxNjhcdTkwMDlcdTYzMDlcdTk0QUVcdUZGMDhcdTdFREZcdTRFMDBcdTY4MzdcdTVGMEZcdTU0OENcdTg4NENcdTRFM0FcdUZGMDlcbiAqL1xuICBwcml2YXRlIGNyZWF0ZVNlbGVjdEFsbEJ1dHRvbihjb250YWluZXI6IEhUTUxFbGVtZW50LCBzdHlsZUNsYXNzOiAnc2lkZWJhcicgfCAnaGVhZGVyJyk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDBEIFtjcmVhdGVTZWxlY3RBbGxCdXR0b25dID09PT09PT09PT0gXHU1RjAwXHU1OUNCXHU1MjFCXHU1RUZBXHU2MzA5XHU5NEFFID09PT09PT09PT0nKTtcbiAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDBEIFtjcmVhdGVTZWxlY3RBbGxCdXR0b25dIHN0eWxlQ2xhc3M6Jywgc3R5bGVDbGFzcyk7XG4gICAgY29uc29sZS5sb2coJ1x1RDgzRFx1REQwRCBbY3JlYXRlU2VsZWN0QWxsQnV0dG9uXSB0aGlzLmRpc3BsYXlNb2RlOicsIHRoaXMuZGlzcGxheU1vZGUpO1xuICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW2NyZWF0ZVNlbGVjdEFsbEJ1dHRvbl0gdGhpcy5ncm91cE1vZGU6JywgdGhpcy5ncm91cE1vZGUpO1xuICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW2NyZWF0ZVNlbGVjdEFsbEJ1dHRvbl0gdGhpcy5zZWxlY3RlZEZpbGU6JywgdGhpcy5zZWxlY3RlZEZpbGUpO1xuICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW2NyZWF0ZVNlbGVjdEFsbEJ1dHRvbl0gdGhpcy52aWV3VHlwZTonLCB0aGlzLnZpZXdUeXBlKTtcbiAgICBcbiAgICBjb25zdCBidG5DbGFzcyA9IHN0eWxlQ2xhc3MgPT09ICdzaWRlYmFyJyBcbiAgICAgID8gJ3NlbGVjdC1hbGwtYnRuLXNpZGViYXInIFxuICAgICAgOiAnc2VsZWN0LWFsbC1idG4taGVhZGVyJztcbiAgICBcbiAgICBjb25zdCBpc0FsbENoZWNrZWQgPSB0aGlzLmlzQWxsU2VsZWN0ZWQoKTtcbiAgICBjb25zdCB2aXNpYmxlID0gdGhpcy5nZXRWaXNpYmxlSXRlbXMoKTtcbiAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDBEIFtjcmVhdGVTZWxlY3RBbGxCdXR0b25dIHZpc2libGU6JywgdmlzaWJsZSk7XG4gICAgXG4gICAgY29uc3QgaXRlbUNvdW50ID0gdGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJyBcbiAgICAgID8gKHZpc2libGUuY2FyZHM/Lmxlbmd0aCB8fCAwKSBcbiAgICAgIDogKHZpc2libGUudW5pdHM/Lmxlbmd0aCB8fCAwKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDBEIFtjcmVhdGVTZWxlY3RBbGxCdXR0b25dIGl0ZW1Db3VudDonLCBpdGVtQ291bnQpO1xuICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW2NyZWF0ZVNlbGVjdEFsbEJ1dHRvbl0gaXNBbGxDaGVja2VkOicsIGlzQWxsQ2hlY2tlZCk7XG4gICAgXG4gICAgY29uc3Qgc2VsZWN0QWxsQnRuID0gY29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiBpc0FsbENoZWNrZWQgPyAnXHUyNzEzIFx1NUI4Q1x1NjIxMCcgOiAnXHUyNjEwIFx1NTE2OFx1OTAwOScsXG4gICAgICBjbHM6IGAke2J0bkNsYXNzfSAke2lzQWxsQ2hlY2tlZCA/ICdjb21wbGV0ZWQnIDogJyd9YCxcbiAgICAgIHRpdGxlOiBpc0FsbENoZWNrZWQgPyAnXHU1M0Q2XHU2RDg4XHU1MTY4XHU5MDA5JyA6IGBcdTUxNjhcdTkwMDlcdTVGNTNcdTUyNEQgJHtpdGVtQ291bnR9IFx1OTg3OWBcbiAgICB9KTtcbiAgICBcbiAgICAvLyBcdTc5ODFcdTc1MjhcdTY3NjFcdTRFRjZcbiAgICBjb25zdCBzaG91bGREaXNhYmxlID0gKFxuICAgICAgaXRlbUNvdW50ID09PSAwIHx8XG4gICAgICAodGhpcy5ncm91cE1vZGUgPT09ICdhbm5vdGF0aW9uJyAmJiB0aGlzLmRpc3BsYXlNb2RlID09PSAnbWFpbicgJiYgIXRoaXMuc2VsZWN0ZWRGaWxlKVxuICAgICk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1x1RDgzRFx1REQwRCBbY3JlYXRlU2VsZWN0QWxsQnV0dG9uXSBzaG91bGREaXNhYmxlIFx1OEJBMVx1N0I5N1x1OEZDN1x1N0EwQjonKTtcbiAgICBjb25zb2xlLmxvZygnICAtIGl0ZW1Db3VudCA9PT0gMDonLCBpdGVtQ291bnQgPT09IDApO1xuICAgIGNvbnNvbGUubG9nKCcgIC0gZ3JvdXBNb2RlID09PSBhbm5vdGF0aW9uOicsIHRoaXMuZ3JvdXBNb2RlID09PSAnYW5ub3RhdGlvbicpO1xuICAgIGNvbnNvbGUubG9nKCcgIC0gZGlzcGxheU1vZGUgPT09IG1haW46JywgdGhpcy5kaXNwbGF5TW9kZSA9PT0gJ21haW4nKTtcbiAgICBjb25zb2xlLmxvZygnICAtICFzZWxlY3RlZEZpbGU6JywgIXRoaXMuc2VsZWN0ZWRGaWxlKTtcbiAgICBjb25zb2xlLmxvZygnICAtIFx1NjcwMFx1N0VDOCBzaG91bGREaXNhYmxlOicsIHNob3VsZERpc2FibGUpO1xuICAgIFxuICAgIGlmIChzaG91bGREaXNhYmxlKSB7XG4gICAgICBzZWxlY3RBbGxCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgc2VsZWN0QWxsQnRuLnN0eWxlLm9wYWNpdHkgPSAnMC41JztcbiAgICAgIHNlbGVjdEFsbEJ0bi5zdHlsZS5jdXJzb3IgPSAnbm90LWFsbG93ZWQnO1xuICAgICAgc2VsZWN0QWxsQnRuLnRpdGxlID0gaXRlbUNvdW50ID09PSAwIFxuICAgICAgICA/ICdcdTZDQTFcdTY3MDlcdTUzRUZcdTkwMDlcdTk4NzknIFxuICAgICAgICA6ICdcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcIlx1NjcwOVx1NjI3OVx1NkNFOFwiXHU2MjE2XCJcdTY1RTBcdTYyNzlcdTZDRThcIic7XG4gICAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDBEIFtjcmVhdGVTZWxlY3RBbGxCdXR0b25dIFx1Mjc0QyBcdTYzMDlcdTk0QUVcdTVERjJcdTc5ODFcdTc1MjgnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ1x1RDgzRFx1REQwRCBbY3JlYXRlU2VsZWN0QWxsQnV0dG9uXSBcdTI3MDUgXHU2MzA5XHU5NEFFXHU1M0VGXHU3NTI4Jyk7XG4gICAgfVxuICAgIFxuICAgIHNlbGVjdEFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW1x1NTE2OFx1OTAwOVx1NjMwOVx1OTRBRV0gXHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XHU4OUU2XHU1M0QxXHVGRjAxJyk7XG4gICAgICB0aGlzLnRvZ2dsZVNlbGVjdEFsbCgpO1xuICAgIH0pO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW2NyZWF0ZVNlbGVjdEFsbEJ1dHRvbl0gPT09PT09PT09PSBcdTYzMDlcdTk0QUVcdTUyMUJcdTVFRkFcdTVCOENcdTYyMTAgPT09PT09PT09PVxcbicpO1xuICAgIFxuICAgIHJldHVybiBzZWxlY3RBbGxCdG47XG4gIH1cbi8qKlxuICogXHU1MjFCXHU1RUZBXHU2Mjc5XHU5MUNGXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFXHU3RUM0XHVGRjA4XHU1MjM2XHU1MzYxXHUzMDAxXHU1MjIwXHU5NjY0XHUzMDAxXHU1M0Q2XHU2RDg4XHVGRjA5XG4gKi9cbnByaXZhdGUgY3JlYXRlQmF0Y2hBY3Rpb25CdXR0b25zKFxuICBjb250YWluZXI6IEhUTUxFbGVtZW50LCBcbiAgc3R5bGVDbGFzczogJ3NpZGViYXInIHwgJ2hlYWRlcidcbik6IHZvaWQge1xuICBpZiAoIXRoaXMuYmF0Y2hNb2RlKSByZXR1cm47XG4gIFxuICBjb25zdCBidG5QcmVmaXggPSBzdHlsZUNsYXNzID09PSAnc2lkZWJhcicgPyAnc2lkZWJhcicgOiAnaGVhZGVyJztcbiAgXG4gIC8vIFx1NTIzNlx1NTM2MVx1NjMwOVx1OTRBRVx1RkYwOFx1NEVDNVx1N0IxNFx1OEJCMFx1ODlDNlx1NTZGRVx1RkYwOVxuICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ25vdGVzJykge1xuICAgIGNvbnN0IGNyZWF0ZUJ0biA9IGNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogc3R5bGVDbGFzcyA9PT0gJ3NpZGViYXInIFxuICAgICAgICA/IGBcdTI2QTEoJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSlgIFxuICAgICAgICA6IGBcdTI2QTEgXHU2Mjc5XHU5MUNGXHU1MjM2XHU1MzYxICgke3RoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemV9KWAsXG4gICAgICBjbHM6IGBiYXRjaC1jcmVhdGUtY2FyZHMtYnRuLSR7YnRuUHJlZml4fWAsXG4gICAgICB0aXRsZTogJ1x1NjI3OVx1OTFDRlx1NTIzNlx1NTM2MSdcbiAgICB9KTtcbiAgICBjcmVhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZSA9PT0gMCkge1xuICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU4OTgxXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXHU3Njg0XHU3QjE0XHU4QkIwJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuYmF0Y2hDcmVhdGVGbGFzaGNhcmRzKCk7XG4gICAgfSk7XG4gIH1cbiAgXG4gIC8vIFx1NTIyMFx1OTY2NFx1NjMwOVx1OTRBRVxuICBjb25zdCBjb3VudCA9IHRoaXMudmlld1R5cGUgPT09ICdjYXJkcycgXG4gICAgPyB0aGlzLnNlbGVjdGVkQ2FyZElkcy5zaXplIFxuICAgIDogdGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZTtcbiAgXG4gIGNvbnN0IGRlbGV0ZUJ0biA9IGNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgIHRleHQ6IHN0eWxlQ2xhc3MgPT09ICdzaWRlYmFyJyBcbiAgICAgID8gYFx1RDgzRFx1REREMVx1RkUwRigke2NvdW50fSlgIFxuICAgICAgOiBgXHVEODNEXHVEREQxXHVGRTBGIFx1NTIyMFx1OTY2NCAoJHtjb3VudH0pYCxcbiAgICBjbHM6IGBiYXRjaC1kZWxldGUtYnRuLSR7YnRuUHJlZml4fWAsXG4gICAgdGl0bGU6ICdcdTYyNzlcdTkxQ0ZcdTUyMjBcdTk2NjQnXG4gIH0pO1xuICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU4OTgxXHU1MjIwXHU5NjY0XHU3Njg0XHU5ODc5XHU3NkVFJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnKSB7XG4gICAgICB0aGlzLmJhdGNoRGVsZXRlRmxhc2hjYXJkcygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmJhdGNoRGVsZXRlTm90ZXMoKTtcbiAgICB9XG4gIH0pO1xuICBcbiAgLy8gXHU1M0Q2XHU2RDg4XHU2MzA5XHU5NEFFXG4gIGNvbnN0IGNhbmNlbEJ0biA9IGNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgIHRleHQ6IHN0eWxlQ2xhc3MgPT09ICdzaWRlYmFyJyA/ICdcdTI3MTUnIDogJ1x1MjcxNSBcdTUzRDZcdTZEODgnLFxuICAgIGNsczogYGNhbmNlbC1zZWxlY3Rpb24tYnRuLSR7YnRuUHJlZml4fWAsXG4gICAgdGl0bGU6ICdcdTUxNzNcdTk1RURcdTYyNzlcdTkxQ0ZcdTZBMjFcdTVGMEYnXG4gIH0pO1xuICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICB9KTtcbn1cblxuLy8gXHU2M0QwXHU1M0Q2XHU1MTY4XHU5MDA5XHU1MjlGXHU4MEZEXG4vKipcbiAqIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NTNFRlx1ODlDMVx1NzY4NFx1NjI0MFx1NjcwOVx1OTg3OVx1RkYwOFx1N0IxNFx1OEJCMFx1NjIxNlx1OTVFQVx1NTM2MVx1RkYwOVxuICovXG5wcml2YXRlIGdldFZpc2libGVJdGVtcygpOiB7IHVuaXRzPzogQ29udGVudFVuaXRbXTsgY2FyZHM/OiBGbGFzaGNhcmRbXSB9IHtcbiAgY29uc29sZS5sb2coJ1x1RDgzRFx1REQwRCBbZ2V0VmlzaWJsZUl0ZW1zXSA9PT09PT09PT09IFx1NUYwMFx1NTlDQlx1NjI2N1x1ODg0QyA9PT09PT09PT09Jyk7XG4gIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW2dldFZpc2libGVJdGVtc10gdmlld1R5cGU6JywgdGhpcy52aWV3VHlwZSk7XG4gIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW2dldFZpc2libGVJdGVtc10gZGlzcGxheU1vZGU6JywgdGhpcy5kaXNwbGF5TW9kZSk7XG4gIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW2dldFZpc2libGVJdGVtc10gZ3JvdXBNb2RlOicsIHRoaXMuZ3JvdXBNb2RlKTtcbiAgY29uc29sZS5sb2coJ1x1RDgzRFx1REQwRCBbZ2V0VmlzaWJsZUl0ZW1zXSBzZWxlY3RlZEZpbGU6JywgdGhpcy5zZWxlY3RlZEZpbGUpO1xuXG4gIGlmICh0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnKSB7XG4gICAgLy8gXHU5NUVBXHU1MzYxXHU4OUM2XHU1NkZFXHU5MDNCXHU4RjkxXG4gICAgY29uc3QgYWxsRmxhc2hjYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgIFxuICAgIGlmICh0aGlzLmRpc3BsYXlNb2RlID09PSAnc2lkZWJhcicpIHtcbiAgICAgIC8vIFx1NEZBN1x1OEZCOVx1NjgwRlx1NkEyMVx1NUYwRlx1RkYxQVx1OEZENFx1NTZERVx1NjI0MFx1NjcwOVx1OTVFQVx1NTM2MVx1NjIxNlx1NUY1M1x1NTI0RFx1NTIwNlx1N0VDNFx1NzY4NFx1OTVFQVx1NTM2MVxuICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgICByZXR1cm4geyBjYXJkczogYWxsRmxhc2hjYXJkcyB9O1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBmaWx0ZXJlZENhcmRzID0gYWxsRmxhc2hjYXJkcy5maWx0ZXIoY2FyZCA9PiB7XG4gICAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgICAgcmV0dXJuIGNhcmQuc291cmNlRmlsZSA9PT0gdGhpcy5zZWxlY3RlZEZpbGU7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdhbm5vdGF0aW9uJykge1xuICAgICAgICAgIGNvbnN0IHVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjYXJkLnNvdXJjZUNvbnRlbnRJZCk7XG4gICAgICAgICAgY29uc3QgaGFzQW5ub3RhdGlvbiA9IHRoaXMuc2VsZWN0ZWRGaWxlID09PSAnXHU2NzA5XHU2Mjc5XHU2Q0U4JztcbiAgICAgICAgICByZXR1cm4gaGFzQW5ub3RhdGlvbiA/ICh1bml0ICYmICEhdW5pdC5hbm5vdGF0aW9uSWQpIDogKCF1bml0IHx8ICF1bml0LmFubm90YXRpb25JZCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICd0YWcnKSB7XG4gICAgICAgICAgY29uc3QgdW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNhcmQuc291cmNlQ29udGVudElkKTtcbiAgICAgICAgICByZXR1cm4gKHVuaXQgJiYgdW5pdC5tZXRhZGF0YS50YWdzLmluY2x1ZGVzKHRoaXMuc2VsZWN0ZWRGaWxlISkpIHx8XG4gICAgICAgICAgICAgICAgIChjYXJkLnRhZ3MgJiYgY2FyZC50YWdzLmluY2x1ZGVzKHRoaXMuc2VsZWN0ZWRGaWxlISkpIHx8XG4gICAgICAgICAgICAgICAgIChjYXJkLmRlY2sgPT09IHRoaXMuc2VsZWN0ZWRGaWxlKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0RGF0ZShuZXcgRGF0ZShjYXJkLm1ldGFkYXRhLmNyZWF0ZWRBdCkpID09PSB0aGlzLnNlbGVjdGVkRmlsZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB7IGNhcmRzOiBmaWx0ZXJlZENhcmRzIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NEUzQlx1NzU0Q1x1OTc2Mlx1NkEyMVx1NUYwRlxuICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgICByZXR1cm4geyBjYXJkczogW10gfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgZmlsdGVyZWRDYXJkcyA9IGFsbEZsYXNoY2FyZHMuZmlsdGVyKGNhcmQgPT4ge1xuICAgICAgICBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdmaWxlJykge1xuICAgICAgICAgIHJldHVybiBjYXJkLnNvdXJjZUZpbGUgPT09IHRoaXMuc2VsZWN0ZWRGaWxlO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnYW5ub3RhdGlvbicpIHtcbiAgICAgICAgICBjb25zdCB1bml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY2FyZC5zb3VyY2VDb250ZW50SWQpO1xuICAgICAgICAgIGNvbnN0IGhhc0Fubm90YXRpb24gPSB0aGlzLnNlbGVjdGVkRmlsZSA9PT0gJ1x1NjcwOVx1NjI3OVx1NkNFOCc7XG4gICAgICAgICAgcmV0dXJuIGhhc0Fubm90YXRpb24gPyAodW5pdCAmJiAhIXVuaXQuYW5ub3RhdGlvbklkKSA6ICghdW5pdCB8fCAhdW5pdC5hbm5vdGF0aW9uSWQpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAndGFnJykge1xuICAgICAgICAgIGNvbnN0IHVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjYXJkLnNvdXJjZUNvbnRlbnRJZCk7XG4gICAgICAgICAgcmV0dXJuICh1bml0ICYmIHVuaXQubWV0YWRhdGEudGFncy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSEpKSB8fFxuICAgICAgICAgICAgICAgICAoY2FyZC50YWdzICYmIGNhcmQudGFncy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSEpKSB8fFxuICAgICAgICAgICAgICAgICAoY2FyZC5kZWNrID09PSB0aGlzLnNlbGVjdGVkRmlsZSkgfHxcbiAgICAgICAgICAgICAgICAgKHRoaXMuc2VsZWN0ZWRGaWxlID09PSAnXHU2NzJBXHU1MjA2XHU3QzdCJyAmJiBcbiAgICAgICAgICAgICAgICAgICghY2FyZC50YWdzIHx8IGNhcmQudGFncy5sZW5ndGggPT09IDApICYmIFxuICAgICAgICAgICAgICAgICAgIWNhcmQuZGVjayAmJlxuICAgICAgICAgICAgICAgICAgKCF1bml0IHx8ICF1bml0Lm1ldGFkYXRhLnRhZ3MgfHwgdW5pdC5tZXRhZGF0YS50YWdzLmxlbmd0aCA9PT0gMCkpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZGF0ZScpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKGNhcmQubWV0YWRhdGEuY3JlYXRlZEF0KSkgPT09IHRoaXMuc2VsZWN0ZWRGaWxlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHsgY2FyZHM6IGZpbHRlcmVkQ2FyZHMgfTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gXHU3QjE0XHU4QkIwXHU4OUM2XHU1NkZFXG4gICAgbGV0IHVuaXRzID0gdGhpcy5nZXRGaWx0ZXJlZFVuaXRzKCk7XG4gICAgY29uc29sZS5sb2coJ1x1RDgzRFx1REQwRCBbZ2V0VmlzaWJsZUl0ZW1zXSBcdTUyMURcdTU5Q0IgZ2V0RmlsdGVyZWRVbml0cygpIFx1OEZENFx1NTZERVx1NjU3MFx1OTFDRjonLCB1bml0cy5sZW5ndGgpO1xuICAgIFxuICAgIGlmICh0aGlzLmRpc3BsYXlNb2RlID09PSAnc2lkZWJhcicpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW2dldFZpc2libGVJdGVtc10gXHU4RkRCXHU1MTY1XHU0RkE3XHU4RkI5XHU2ODBGXHU2QTIxXHU1RjBGXHU1OTA0XHU3NDA2Jyk7XG4gICAgICBcbiAgICAgIGlmICghdGhpcy5zZWxlY3RlZEZpbGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1x1RDgzRFx1REQwRCBbZ2V0VmlzaWJsZUl0ZW1zXSBzZWxlY3RlZEZpbGUgXHU0RTBEXHU1QjU4XHU1NzI4XHVGRjBDXHU4RkQ0XHU1NkRFXHU3QTdBXHU2NTcwXHU3RUM0Jyk7XG4gICAgICAgIHJldHVybiB7IHVuaXRzOiBbXSB9O1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDBEIFtnZXRWaXNpYmxlSXRlbXNdIHNlbGVjdGVkRmlsZSBcdTVCNThcdTU3Mjg6JywgdGhpcy5zZWxlY3RlZEZpbGUpO1xuICAgICAgXG4gICAgICAvLyBcdUQ4M0RcdUREMjcgXHU2MjQwXHU2NzA5XHU2QTIxXHU1RjBGXHU5MEZEXHU1M0VBXHU2NjNFXHU3OTNBXHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XHU3Njg0XHU3QjE0XHU4QkIwXG4gICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+IHVuaXQuc291cmNlLmZpbGUgPT09IHRoaXMuc2VsZWN0ZWRGaWxlKTtcbiAgICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW2dldFZpc2libGVJdGVtc10gXHU2MzA5XHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XHU4RkM3XHU2RUU0XHU1NDBFXHU2NTcwXHU5MUNGOicsIHVuaXRzLmxlbmd0aCk7XG4gICAgICBcbiAgICAgIC8vIFx1RDgzRFx1REQyNyBcdTU5ODJcdTY3OUNcdTY2MkYgYW5ub3RhdGlvbiBcdTZBMjFcdTVGMEZcdUZGMENcdThGRDhcdTk3MDBcdTg5ODFcdTYzMDlcdTYyNzlcdTZDRThcdTcyQjZcdTYwMDFcdTUxOERcdThGQzdcdTZFRTRcdTRFMDBcdTZCMjFcbiAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2Fubm90YXRpb24nKSB7XG4gICAgICAgIGNvbnN0IGhhc0Fubm90YXRpb24gPSB1bml0cy5zb21lKHUgPT4gISF1LmFubm90YXRpb25JZCk7XG4gICAgICAgIC8vIGFubm90YXRpb24gXHU2QTIxXHU1RjBGXHU1NzI4XHU0RkE3XHU4RkI5XHU2ODBGXHU0RTBEXHU0RjdGXHU3NTI4ICdcdTY3MDlcdTYyNzlcdTZDRTgnLydcdTY1RTBcdTYyNzlcdTZDRTgnIFx1OEZEOVx1NjgzN1x1NzY4NCBzZWxlY3RlZEZpbGVcbiAgICAgICAgLy8gXHU4MDBDXHU2NjJGXHU2NjNFXHU3OTNBXHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XHU3Njg0XHU2MjQwXHU2NzA5XHU3QjE0XHU4QkIwXHVGRjBDXHU2MzA5XHU2NjJGXHU1NDI2XHU2NzA5XHU2Mjc5XHU2Q0U4XHU1MjA2XHU3RUM0XG4gICAgICAgIC8vIFx1NjI0MFx1NEVFNVx1OEZEOVx1OTFDQ1x1NEUwRFx1OTcwMFx1ODk4MVx1OTg5RFx1NTkxNlx1OEZDN1x1NkVFNFxuICAgICAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDBEIFtnZXRWaXNpYmxlSXRlbXNdIGFubm90YXRpb24gXHU2QTIxXHU1RjBGXHVGRjBDXHU0RkREXHU2MzAxXHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XHU2MjQwXHU2NzA5XHU3QjE0XHU4QkIwJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW2dldFZpc2libGVJdGVtc10gXHU0RkE3XHU4RkI5XHU2ODBGXHU2NzAwXHU3RUM4XHU4RkQ0XHU1NkRFIHVuaXRzIFx1NjU3MFx1OTFDRjonLCB1bml0cy5sZW5ndGgpO1xuICAgICAgcmV0dXJuIHsgdW5pdHMgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU0RTNCXHU3NTRDXHU5NzYyXHU2QTIxXHU1RjBGXG4gICAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDBEIFtnZXRWaXNpYmxlSXRlbXNdIFx1OEZEQlx1NTE2NVx1NEUzQlx1NzU0Q1x1OTc2Mlx1NkEyMVx1NUYwRlx1NTkwNFx1NzQwNicpO1xuICAgICAgXG4gICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRGaWxlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW2dldFZpc2libGVJdGVtc10gc2VsZWN0ZWRGaWxlIFx1NEUwRFx1NUI1OFx1NTcyOFx1RkYwQ1x1OEZENFx1NTZERVx1N0E3QVx1NjU3MFx1N0VDNCcpO1xuICAgICAgICByZXR1cm4geyB1bml0czogW10gfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZmlsZScpIHtcbiAgICAgICAgdW5pdHMgPSB1bml0cy5maWx0ZXIodW5pdCA9PiB1bml0LnNvdXJjZS5maWxlID09PSB0aGlzLnNlbGVjdGVkRmlsZSk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnYW5ub3RhdGlvbicpIHtcbiAgICAgICAgY29uc3QgaGFzQW5ub3RhdGlvbiA9IHRoaXMuc2VsZWN0ZWRGaWxlID09PSAnXHU2NzA5XHU2Mjc5XHU2Q0U4JztcbiAgICAgICAgdW5pdHMgPSB1bml0cy5maWx0ZXIodW5pdCA9PiBoYXNBbm5vdGF0aW9uID8gISF1bml0LmFubm90YXRpb25JZCA6ICF1bml0LmFubm90YXRpb25JZCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAndGFnJykge1xuICAgICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+IHVuaXQubWV0YWRhdGEudGFncy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSEpKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdkYXRlJykge1xuICAgICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+IFxuICAgICAgICAgIHRoaXMuZm9ybWF0RGF0ZShuZXcgRGF0ZSh1bml0Lm1ldGFkYXRhLmNyZWF0ZWRBdCkpID09PSB0aGlzLnNlbGVjdGVkRmlsZVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDBEIFtnZXRWaXNpYmxlSXRlbXNdIFx1NEUzQlx1NzU0Q1x1OTc2Mlx1NjcwMFx1N0VDOFx1OEZENFx1NTZERSB1bml0cyBcdTY1NzBcdTkxQ0Y6JywgdW5pdHMubGVuZ3RoKTtcbiAgICAgIHJldHVybiB7IHVuaXRzIH07XG4gICAgfVxuICB9XG59XG5cblxuXG5cbiAgLyoqXG4gICAqIFx1NkRGQlx1NTJBMFx1NjgzN1x1NUYwRlxuICAgKi9cbiAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWFybmluZy1vdmVydmlldy1zdHlsZXMnKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZUVsLmlkID0gJ2xlYXJuaW5nLW92ZXJ2aWV3LXN0eWxlcyc7XG4gICAgXG4gICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU3RUNGXHU2REZCXHU1MkEwXG4gICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWFybmluZy1vdmVydmlldy1zdHlsZXMnKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAvKiA9PT09PT09PT09PT09PT09PT09PSBcdTUxNjhcdTVDNDBcdTVCQjlcdTU2NjggPT09PT09PT09PT09PT09PT09PT0gKi9cbiAgICAgIC5sZWFybmluZy1vdmVydmlldy1jb250YWluZXIge1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICB9XG5cbiAgICAgIC8qID09PT09PT09PT09PT09PT09PT09IFx1NEZBN1x1OEZCOVx1NjgwRlx1NkEyMVx1NUYwRlx1NjgzN1x1NUYwRiA9PT09PT09PT09PT09PT09PT09PSAqL1xuICAgICAgLmxlYXJuaW5nLW92ZXJ2aWV3LWNvbnRhaW5lcltkYXRhLW1vZGU9XCJzaWRlYmFyXCJdIHtcbiAgICAgICAgcGFkZGluZzogMDtcbiAgICAgIH1cblxuICAgICAgLnNpZGViYXItdG9vbGJhciB7XG4gICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsgLyogXHVEODNEXHVERDI3IFx1NkRGQlx1NTJBMCAqL1xuICB6LWluZGV4OiAxMDtcbiAgICAgIH1cblxuICAgICAgLnNlYXJjaC1jb250YWluZXIge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAuc2VhcmNoLWlucHV0IHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgfVxuXG4gICAgICAuc2VhcmNoLWlucHV0OmZvY3VzIHtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAuZmlsdGVyLWNoaXBzIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5maWx0ZXItY2hpcCB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgcGFkZGluZzogNnB4IDhweDtcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgICAgfVxuXG4gICAgICAuZmlsdGVyLWNoaXA6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLmZpbHRlci1jaGlwLmFjdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLXN3aXRjaGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC1idG4ge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIHBhZGRpbmc6IDZweDtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWJ0bi5hY3RpdmUge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7XG4gICAgICB9XG4vKiBcdTU3MjggLnN0YXRzLWJhZGdlIFx1NjgzN1x1NUYwRlx1NEU0Qlx1NTI0RFx1NkRGQlx1NTJBMCAqL1xuLnN0YXRzLXJvdyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgZ2FwOiAzcHg7XG59XG4vKiBcdTU5MzRcdTkwRThcdTY0Q0RcdTRGNUNcdTYzMDlcdTk0QUVcdTVCQjlcdTU2NjggKi9cbi5oZWFkZXItYWN0aW9ucyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGdhcDogOHB4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG4vKiBcdTYyNzlcdTkxQ0ZcdTY0Q0RcdTRGNUNcdTYzMDlcdTk0QUVcdTY4MzdcdTVGMEYgLSBcdTRGQTdcdThGQjlcdTY4MEYgKi9cbi5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuLXNpZGViYXIsXG4uYmF0Y2gtZGVsZXRlLWJ0bi1zaWRlYmFyIHtcbiAgcGFkZGluZzogNnB4IDZweDtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgZm9udC1zaXplOiAxMXB4O1xuICBmb250LXdlaWdodDogNTAwO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xufVxuXG4uYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bi1zaWRlYmFyOmhvdmVyIHtcbiAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgY29sb3I6IHdoaXRlO1xuICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG59XG5cbi5iYXRjaC1kZWxldGUtYnRuLXNpZGViYXI6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1yZWQpO1xuICBjb2xvcjogd2hpdGU7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbn1cblxuLyogXHU2Mjc5XHU5MUNGXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFXHU2ODM3XHU1RjBGIC0gXHU0RTNCXHU3NTRDXHU5NzYyICovXG4uYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bi1oZWFkZXIsXG4uYmF0Y2gtZGVsZXRlLWJ0bi1oZWFkZXIge1xuICBwYWRkaW5nOiA4cHggMTZweDtcbiAgZm9udC1zaXplOiAxM3B4O1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICBmb250LXdlaWdodDogNTAwO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xufVxuXG4uYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bi1oZWFkZXI6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICBjb2xvcjogd2hpdGU7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbn1cblxuLmJhdGNoLWRlbGV0ZS1idG4taGVhZGVyOmhvdmVyIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItcmVkKTtcbiAgY29sb3I6IHdoaXRlO1xuICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG59XG4uc2VsZWN0LWFsbC1idG4tc2lkZWJhciB7XG4gIHBhZGRpbmc6IDZweCAxMnB4O1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICBmb250LXNpemU6IDExcHg7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIGZsZXgtc2hyaW5rOiAwOyAvKiBcdTk2MzJcdTZCNjJcdTYzMDlcdTk0QUVcdTg4QUJcdTUzOEJcdTdGMjkgKi9cbn1cblxuLnNlbGVjdC1hbGwtYnRuLXNpZGViYXI6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gIGNvbG9yOiB3aGl0ZTtcbn1cblxuLnN0YXRzLWJhZGdlIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBmb250LXNpemU6IDExcHg7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgcGFkZGluZzogNHB4O1xuICBmbGV4OiAxOyAvKiBcdTUzNjBcdTYzNkVcdTUyNjlcdTRGNTlcdTdBN0FcdTk1RjQgKi9cbn1cbiAgICAgIC5zdGF0cy1iYWRnZSB7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIHBhZGRpbmc6IDRweDtcbiAgICAgIH1cbi5zZWxlY3QtYWxsLWJ0bi1oZWFkZXIge1xuICBwYWRkaW5nOiA4cHggMTZweDtcbiAgZm9udC1zaXplOiAxM3B4O1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICBmb250LXdlaWdodDogNTAwO1xuICBib3gtc2hhZG93OiAwIDFweCAzcHggcmdiYSgwLCAwLCAwLCAwLjA4KTtcbn1cblxuLnNlbGVjdC1hbGwtYnRuLWhlYWRlcjpob3ZlciB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xcHgpO1xuICBib3gtc2hhZG93OiAwIDJweCA2cHggcmdiYSgwLCAwLCAwLCAwLjE1KTtcbn1cblxuLyogXHU1QjhDXHU2MjEwXHU3MkI2XHU2MDAxXHU3Njg0XHU5QUQ4XHU0RUFFXHU2ODM3XHU1RjBGICovXG4uc2VsZWN0LWFsbC1idG4taGVhZGVyLmNvbXBsZXRlZCB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbn1cblxuLnNlbGVjdC1hbGwtYnRuLWhlYWRlci5jb21wbGV0ZWQ6aG92ZXIge1xuICBvcGFjaXR5OiAwLjk7XG59XG5cbi5zZWxlY3QtYWxsLWJ0bi1zaWRlYmFyIHtcbiAgcGFkZGluZzogNnB4IDEycHg7XG5cbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICBmb250LXNpemU6IDExcHg7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIG1hcmdpbi1yaWdodDogYXV0bzsgLyogXHU5NzYwXHU1REU2XHU1QkY5XHU5RjUwICovXG59XG5cbi5zZWxlY3QtYWxsLWJ0bi1zaWRlYmFyOmhvdmVyIHtcbiAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICBjb2xvcjogd2hpdGU7XG59XG4gIC8qIFx1NTNENlx1NkQ4OFx1OTAwOVx1NjJFOVx1NjMwOVx1OTRBRSAtIFx1NEZBN1x1OEZCOVx1NjgwRiAqL1xuLmNhbmNlbC1zZWxlY3Rpb24tYnRuLXNpZGViYXIge1xuICBwYWRkaW5nOiA2cHggMTJweDtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgZm9udC1zaXplOiAxMXB4O1xuICBmb250LXdlaWdodDogNTAwO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG59XG5cbi5jYW5jZWwtc2VsZWN0aW9uLWJ0bi1zaWRlYmFyOmhvdmVyIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG59XG5cbi8qIFx1NTNENlx1NkQ4OFx1OTAwOVx1NjJFOVx1NjMwOVx1OTRBRSAtIFx1NEUzQlx1NzU0Q1x1OTc2MiAqL1xuLmNhbmNlbC1zZWxlY3Rpb24tYnRuLWhlYWRlciB7XG4gIHBhZGRpbmc6IDhweCAxNnB4O1xuICBmb250LXNpemU6IDEzcHg7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbn1cblxuLmNhbmNlbC1zZWxlY3Rpb24tYnRuLWhlYWRlcjpob3ZlciB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICBib3JkZXItY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xufVxuXG4vKiBcdTVCOENcdTYyMTBcdTcyQjZcdTYwMDFcdTc2ODRcdTUxNjhcdTkwMDlcdTYzMDlcdTk0QUVcdTlBRDhcdTRFQUUgKi9cbi5zZWxlY3QtYWxsLWJ0bi1zaWRlYmFyLmNvbXBsZXRlZCxcbi5zZWxlY3QtYWxsLWJ0bi1oZWFkZXIuY29tcGxldGVkIHtcbiAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xufVxuICAgICAgLmJhdGNoLWFjdGlvbnMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDZweDtcbiAgICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtbW9kZS1idG4sXG4gICAgICAuc2VsZWN0LWFsbC1idG4sXG4gICAgICAuYmF0Y2gtZGVsZXRlLWJ0bixcbiAgICAgIC5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuIHtcbiAgICAgICAgcGFkZGluZzogNnB4IDEycHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLnNlbGVjdC1hbGwtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1tb2RlLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtZGVsZXRlLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtY2hlY2tib3gge1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICAuc2lkZWJhci1jb250ZW50LWxpc3Qge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOyAvKiBcdUQ4M0RcdUREMjcgXHU2REZCXHU1MkEwICovXG4gIHotaW5kZXg6IDE7IC8qIFx1RDgzRFx1REQyNyBcdTZERkJcdTUyQTAgKi9cbiAgICAgIH1cblxuICAgICAgLmNvbnRlbnQtZ3JvdXAge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtaGVhZGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgIHBhZGRpbmc6IDZweCA4cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgcG9zaXRpb246IHN0aWNreTtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICB6LWluZGV4OiAxMDtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWljb24ge1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC10aXRsZSB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtY291bnQge1xuICAgICAgICBwYWRkaW5nOiAycHggNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICAgIH1cblxuICAgICAgLmNvbXBhY3QtY2FyZCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBtYXJnaW46IDRweCAwO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG5cbiAgICAgIC5jb21wYWN0LWNhcmQ6aG92ZXIge1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMnB4KTtcbiAgICAgICAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwwLDAsMC4xKTtcbiAgICAgIH1cblxuLyogXHU1N0ZBXHU3ODQwXHU2MzA3XHU3OTNBXHU1NjY4XHU2ODM3XHU1RjBGICovXG4uY2FyZC1pbmRpY2F0b3Ige1xuICB3aWR0aDogNHB4O1xuICBib3JkZXItcmFkaXVzOiAycHg7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgZmxleC1zaHJpbms6IDA7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzO1xufVxuXG5cbi8qIFx1RDgzRFx1REQyNyBcdTZDQTFcdTY3MDlcdTYyNzlcdTZDRThcdTY1RjZcdUZGMUFcdTRFMEFcdTUzNEFcdTkwMEZcdTY2MEVcdUZGMENcdTRFMEJcdTUzNEFcdTY2M0VcdTc5M0FcdTdDN0JcdTU3OEJcdTk4OUNcdTgyNzIgKi9cbi5jYXJkLWluZGljYXRvci50eXBlLXFhIHtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KFxuICAgIHRvIGJvdHRvbSxcbiAgICB0cmFuc3BhcmVudCAwJSxcbiAgICB0cmFuc3BhcmVudCA1MCUsXG4gICAgIzEwYjk4MSA1MCUsXG4gICAgIzEwYjk4MSAxMDAlXG4gICk7XG59XG5cbi5jYXJkLWluZGljYXRvci50eXBlLWNsb3plIHtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KFxuICAgIHRvIGJvdHRvbSxcbiAgICB0cmFuc3BhcmVudCAwJSxcbiAgICB0cmFuc3BhcmVudCA1MCUsXG4gICAgICAgICM5MzMzZWEgNTAlLFxuICAgICM5MzMzZWEgMTAwJVxuXG4gICk7XG59XG5cbi5jYXJkLWluZGljYXRvci50eXBlLXRleHQge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoXG4gICAgdG8gYm90dG9tLFxuICAgIHRyYW5zcGFyZW50IDAlLFxuICAgIHRyYW5zcGFyZW50IDUwJSxcbiAgICAjNmI3MjgwIDUwJSxcbiAgICAjNmI3MjgwIDEwMCVcbiAgKTtcbn1cblxuLyogXHVEODNEXHVERDI3IFx1NjcwOVx1NjI3OVx1NkNFOFx1NjVGNlx1RkYxQVx1NEUwQVx1NTM0QVx1ODRERFx1ODI3Mlx1RkYwQ1x1NEUwQlx1NTM0QVx1N0M3Qlx1NTc4Qlx1OTg5Q1x1ODI3MiAqL1xuLmNhcmQtaW5kaWNhdG9yLnR5cGUtcWEuaGFzLWFubm90YXRpb24ge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoXG4gICAgdG8gYm90dG9tLCBcbiAgICAjM2I4MmY2IDAlLCBcbiAgICAjM2I4MmY2IDUwJSwgXG4gICAgIzEwYjk4MSA1MCUsXG4gICAgIzEwYjk4MSAxMDAlXG4gICk7XG59XG5cbi5jYXJkLWluZGljYXRvci50eXBlLWNsb3plLmhhcy1hbm5vdGF0aW9uIHtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KFxuICAgIHRvIGJvdHRvbSwgXG4gICAgIzNiODJmNiAwJSwgXG4gICAgIzNiODJmNiA1MCUsIFxuICAgICAgICAjOTMzM2VhIDUwJSxcbiAgICAjOTMzM2VhIDEwMCVcblxuICApO1xufVxuXG4uY2FyZC1pbmRpY2F0b3IudHlwZS10ZXh0Lmhhcy1hbm5vdGF0aW9uIHtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KFxuICAgIHRvIGJvdHRvbSwgXG4gICAgIzNiODJmNiAwJSwgXG4gICAgIzNiODJmNiA1MCUsIFxuICAgICM2YjcyODAgNTAlLFxuICAgICM2YjcyODAgMTAwJVxuICApO1xufVxuXG4vKiBcdUQ4M0RcdUREMjcgXHU5RUQ4XHU4QkE0XHU2ODM3XHU1RjBGXHVGRjA4XHU2Q0ExXHU2NzA5XHU3QzdCXHU1NzhCXHU2NUY2XHU3Njg0XHU1MTVDXHU1RTk1XHVGRjA5ICovXG4uY2FyZC1pbmRpY2F0b3I6bm90KC50eXBlLXFhKTpub3QoLnR5cGUtY2xvemUpOm5vdCgudHlwZS10ZXh0KSB7XG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudChcbiAgICB0byBib3R0b20sXG4gICAgdHJhbnNwYXJlbnQgMCUsXG4gICAgdHJhbnNwYXJlbnQgNTAlLFxuICAgIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSA1MCUsXG4gICAgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpIDEwMCVcbiAgKTtcbn1cblxuLmNhcmQtaW5kaWNhdG9yLmhhcy1hbm5vdGF0aW9uOm5vdCgudHlwZS1xYSk6bm90KC50eXBlLWNsb3plKTpub3QoLnR5cGUtdGV4dCkge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoXG4gICAgdG8gYm90dG9tLFxuICAgICMzYjgyZjYgMCUsXG4gICAgIzNiODJmNiA1MCUsXG4gICAgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpIDUwJSxcbiAgICB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcikgMTAwJVxuICApO1xufVxuXG5cblxuLnR5cGUtaW5kaWNhdG9yIHtcbiAgcGFkZGluZzogMnB4IDhweDtcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgZm9udC1zaXplOiAxMHB4O1xuICBmb250LXdlaWdodDogNjAwO1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xufVxuXG4udHlwZS1pbmRpY2F0b3IudHlwZS1xYSB7XG4gIGJhY2tncm91bmQ6IHJnYmEoMTYsIDE4NSwgMTI5LCAwLjIpO1xuXG4gIGNvbG9yOiAjMTBiOTgxO1xufVxuXG4udHlwZS1pbmRpY2F0b3IudHlwZS1jbG96ZSB7XG4gIGJhY2tncm91bmQ6IHJnYmEoMTQ3LCA1MSwgMjM0LCAwLjIpO1xuICAgIGNvbG9yOiAjOTMzM2VhO1xuXG59XG5cbi50eXBlLWluZGljYXRvci50eXBlLXRleHQge1xuICBiYWNrZ3JvdW5kOiByZ2JhKDEwNywgMTE0LCAxMjgsIDAuMik7XG4gIGNvbG9yOiAjNmI3MjgwO1xufVxuXG4gICAgICAuY2FyZC1jb250ZW50IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgbWluLXdpZHRoOiAwO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1oZWFkZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tYnRuIHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIHBhZGRpbmc6IDRweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xKTtcbiAgICAgIH1cblxuICAgICAgLmNhcmQtdG9vbHMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDRweDtcbiAgICAgIH1cblxuICAgICAgLnRvb2wtYnRuIHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIHBhZGRpbmc6IDRweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLnRvb2wtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTEsIDE5MSwgMzYsIDAuMik7XG4gICAgICB9XG5cbiAgICAgIC5tb3JlLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4ubm90ZS10ZXh0IHtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBsaW5lLWhlaWdodDogMS42O1xuICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgd2hpdGUtc3BhY2U6IG5vcm1hbDtcbiAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDtcbiAgbWFyZ2luLWJvdHRvbTogNnB4O1xufVxuXG4ubm90ZS10ZXh0OmhvdmVyIHtcbiAgY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG59XG5cbi8qIFx1RDgzRFx1REQyNyBRQSBcdTY4MzdcdTVGMEYgKi9cbi5xYS1xdWVzdGlvbiB7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG59XG5cbi5xYS1zZXBhcmF0b3Ige1xuICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gIG1hcmdpbjogMCA0cHg7XG59XG5cbi5xYS1hbnN3ZXIge1xuICBjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xuICBmb250LXN0eWxlOiBpdGFsaWM7XG59XG5cbi8qIFx1RDgzRFx1REQyNyBDbG96ZSBcdTlBRDhcdTRFQUVcdTY4MzdcdTVGMEYgKi9cbi5jbG96ZS1oaWdobGlnaHQge1xuXG4gIGNvbG9yOiAjZjU5ZTBiO1xuICBmb250LXdlaWdodDogNTAwO1xuICBwYWRkaW5nOiAxcHggM3B4O1xuICBib3JkZXItcmFkaXVzOiAzcHg7XG59XG5cbiAgICAgIC5hbm5vdGF0aW9uLXByZXZpZXcge1xuICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgcGFkZGluZzogNnB4IDhweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIG1hcmdpbi10b3A6IDZweDtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuICAgICAgXG4gICAgICAuYW5ub3RhdGlvbi1wcmV2aWV3OmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkLW1ldGEge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgIGdhcDogNnB4O1xuICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8qID09PT09PT09PT09PT09PT09PT09IFx1NTE4NVx1ODA1NFx1NjI3OVx1NkNFOFx1N0YxNlx1OEY5MVx1NTY2OCA9PT09PT09PT09PT09PT09PT09PSAqL1xuICAgICAgLmlubGluZS1hbm5vdGF0aW9uLWVkaXRvciB7XG4gICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgIGFuaW1hdGlvbjogc2xpZGVEb3duIDAuMTVzIGVhc2Utb3V0O1xuICAgICAgfVxuICAgICAgXG4gICAgICBAa2V5ZnJhbWVzIHNsaWRlRG93biB7XG4gICAgICAgIGZyb20ge1xuICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01cHgpO1xuICAgICAgICB9XG4gICAgICAgIHRvIHtcbiAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAuaW5saW5lLWFubm90YXRpb24tdGV4dGFyZWEge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgbWluLWhlaWdodDogODBweDtcbiAgICAgICAgcGFkZGluZzogMTJweCAxNHB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LXRleHQpO1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgICAgIHJlc2l6ZTogdmVydGljYWw7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICBib3gtc2hhZG93OiAwIDFweCAzcHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAuaW5saW5lLWFubm90YXRpb24tdGV4dGFyZWE6Zm9jdXMge1xuICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMTUpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAuaW5saW5lLWFubm90YXRpb24tdGV4dGFyZWE6OnBsYWNlaG9sZGVyIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZmFpbnQpO1xuICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC5pbmxpbmUtYW5ub3RhdGlvbi1oaW50IHtcbiAgICAgICAgbWFyZ2luLXRvcDogNnB4O1xuICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWZhaW50KTtcbiAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgICAgfVxuICAgICAgXG4gICAgICAvKiBcdTdGNTFcdTY4M0NcdTUzNjFcdTcyNDdcdTc2ODRcdTUxODVcdTgwNTRcdTdGMTZcdThGOTFcdTU2NjhcdTY4MzdcdTVGMEYgKi9cbiAgICAgIC5ncmlkLWNhcmQgLmlubGluZS1hbm5vdGF0aW9uLWVkaXRvciB7XG4gICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLmdyaWQtY2FyZCAuaW5saW5lLWFubm90YXRpb24tdGV4dGFyZWEge1xuICAgICAgICBtaW4taGVpZ2h0OiAxMDBweDtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBwYWRkaW5nOiA4cHggMTRweDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLmdyaWQtY2FyZCAuaW5saW5lLWFubm90YXRpb24taGludCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgfVxuXG4gICAgICAudGFnIHtcbiAgICAgICAgcGFkZGluZzogMnB4IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tdGFnLWJhY2tncm91bmQpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGFnLWNvbG9yKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBmb250LXNpemU6IDEwcHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC50YWctbW9yZSB7XG4gICAgICAgIHBhZGRpbmc6IDJweCA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICAgIH1cblxuICAgICAgLmJhZGdlIHtcbiAgICAgICAgcGFkZGluZzogMnB4IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICAgIH1cblxuICAgICAgLyogPT09PT09PT09PT09PT09PT09PT0gXHU0RTNCXHU3NTRDXHU5NzYyXHU2QTIxXHU1RjBGXHU2ODM3XHU1RjBGID09PT09PT09PT09PT09PT09PT09ICovXG4gICAgICAubWFpbi1sYXlvdXQge1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDI1MHB4IDFmcjtcbiAgICAgICAgZ2FwOiAxcHg7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgfVxuXG4gICAgICAubGVmdC1wYW5lbCB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICB9XG5cbiAgICAgIC5yaWdodC1wYW5lbCB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgIH1cblxuICAgICAgLmZpeGVkLWVudHJpZXMge1xuICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDZweDtcbiAgICAgIH1cblxuICAgICAgLmVudHJ5LWJ0biB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBwYWRkaW5nOiAxMHB4IDEycHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICB9XG5cbiAgICAgIC5lbnRyeS1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDJweCk7XG4gICAgICB9XG5cbiAgICAgIC5lbnRyeS1idG4uYWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLm1haW4tdG9vbGJhciB7XG4gICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1hY3Rpb25zLW1haW4ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtYWN0aW9ucy1tYWluIC5iYXRjaC1tb2RlLWJ0bixcbiAgICAgIC5iYXRjaC1hY3Rpb25zLW1haW4gLnNlbGVjdC1hbGwtYnRuLFxuICAgICAgLmJhdGNoLWFjdGlvbnMtbWFpbiAuYmF0Y2gtZGVsZXRlLWJ0bixcbiAgICAgIC5iYXRjaC1hY3Rpb25zLW1haW4gLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG4ge1xuICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtYWN0aW9ucy1tYWluIC5zZWxlY3QtYWxsLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgfVxuXG4gICAgICAuc2VhcmNoLWlucHV0LW1haW4ge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zZWFyY2gtaW5wdXQtbWFpbjpmb2N1cyB7XG4gICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLXN3aXRjaGVyLW1haW4ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDZweDtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWJ0bi1tYWluIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGdhcDogNHB4O1xuICAgICAgICBwYWRkaW5nOiA4cHggMTBweDtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWJ0bi1tYWluOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWJ0bi1tYWluLmFjdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICB9XG5cbiAgICAgIC5wYW5lbC10aXRsZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgbWFyZ2luOjA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLmZpbGUtbGlzdCB7XG4gICAgICAgIHBhZGRpbmc6IDAgOHB4IDhweCA4cHg7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICB9XG5cbiAgICAgIC5maWxlLWl0ZW0ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgcGFkZGluZzogOHB4IDEwcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1pdGVtOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5maWxlLWl0ZW0uc2VsZWN0ZWQge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1pY29uIHtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1uYW1lIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgIH1cblxuICAgICAgLmZpbGUtY291bnQge1xuICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIHBhZGRpbmc6IDJweCA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4xKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgICAgIH1cblxuICAgICAgLmZpbGUtaXRlbS5zZWxlY3RlZCAuZmlsZS1jb3VudCB7XG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4yKTtcbiAgICAgIH1cblxuICAgICAgLmVtcHR5LXJpZ2h0LXBhbmVsIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuZW1wdHktaWNvbiB7XG4gICAgICAgIGZvbnQtc2l6ZTogNDhweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTZweDtcbiAgICAgIH1cblxuICAgICAgLmVtcHR5LXRleHQge1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICB9XG5cbiAgICAgIC5ncmlkLWhlYWRlciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDEycHg7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICB9XG5cbiAgICAgIC5ncmlkLWhlYWRlciBoMiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgfVxuXG4gICAgICAub3Blbi1maWxlLWJ0biB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAub3Blbi1maWxlLWJ0bjpob3ZlciB7XG4gICAgICAgIG9wYWNpdHk6IDAuOTtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xcHgpO1xuICAgICAgfVxuXG4gICAgICAuY29udGVudC1ncmlkIHtcbiAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoMjQwcHgsIDFmcikpO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgIH1cblxuICAgICAgLmdyaWQtY2FyZCB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgMXB4IDNweCByZ2JhKDAsMCwwLDAuMSk7XG4gICAgICB9XG5cbiAgICAgIC5ncmlkLWNhcmQ6aG92ZXIge1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDEycHggcmdiYSgwLDAsMCwwLjE1KTtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpO1xuICAgICAgfVxuXG4gICAgICAuZ3JpZC1jYXJkLWhlYWRlciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDhweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgIH1cblxuICAgICAgLmRvYy1uYW1lIHtcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjVweDtcbiAgICAgIH1cblxuICAgICAgLmdyaWQtY2FyZC10b29scyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogNHB4O1xuICAgICAgfVxuXG4gICAgICAudG9vbC1idG4tZ3JpZCB7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICBwYWRkaW5nOiA0cHggNnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuXG4gICAgICAudG9vbC1idG4tZ3JpZDpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7XG4gICAgICB9XG5cbiAgICAgIC5ncmlkLWNhcmQtY29udGVudCB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICB9XG5cbi5ncmlkLW5vdGUtdGV4dCB7XG4gIGZvbnQtc2l6ZTogMTNweDsgIC8qIFx1RDgzRFx1REQyNyBcdTRFQ0UgMTRweCBcdTY1MzlcdTRFM0EgMTNweCAqL1xuICBsaW5lLWhlaWdodDogMS42O1xuICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gIHdvcmQtd3JhcDogYnJlYWstd29yZDsgIC8qIFx1RDgzRFx1REQyNyBcdTUxNDFcdThCQjhcdTYzNjJcdTg4NEMgKi9cbiAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgd2hpdGUtc3BhY2U6IG5vcm1hbDtcbiAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDtcbn1cblxuLmdyaWQtbm90ZS10ZXh0OmhvdmVyIHtcbiAgY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG59XG5cblxuICAgICAgLmdyaWQtYW5ub3RhdGlvbiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuICAgICAgXG4gICAgICAuZ3JpZC1hbm5vdGF0aW9uOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5ncmlkLWFubm90YXRpb24gc3Ryb25nIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgIH1cblxuICAgICAgLmdyaWQtdGFncyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC50YWctZ3JpZCB7XG4gICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXRhZy1iYWNrZ3JvdW5kKTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRhZy1jb2xvcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuZ3JpZC1jYXJkLW1ldGEge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIHBhZGRpbmctdG9wOiAxMHB4O1xuICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICB9XG5cbiAgICAgIC5saW5lLWluZm8ge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5iYWRnZS1ncmlkIHtcbiAgICAgICAgcGFkZGluZzogM3B4IDhweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkcy1oZWFkZXIge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgfVxuXG4gICAgICAuY2FyZHMtaGVhZGVyIGgyIHtcbiAgICAgICAgZm9udC1zaXplOiAxOHB4O1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgfVxuXG4gICAgICAuY2FyZHMtZ3JpZCB7XG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDE2MHB4LCAxZnIpKTtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtaXRlbSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLmZsYXNoY2FyZC1pdGVtOmhvdmVyIHtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxMnB4IHJnYmEoMCwwLDAsMC4xKTtcbiAgICAgIH1cblxuICAgICAgLmZsYXNoY2FyZC1oZWFkZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtZGVsZXRlLWJ0biB7XG4gICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICBvcGFjaXR5OiAwLjY7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtZGVsZXRlLWJ0bjpob3ZlciB7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgIH1cblxuICAgICAgLmZsYXNoY2FyZC10eXBlIHtcbiAgICAgICAgcGFkZGluZzogNHB4IDEwcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgIH1cblxuICAgICAgLmZsYXNoY2FyZC10eXBlLnFhIHtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgxNiwgMTg1LCAxMjksIDAuMik7XG5cbiAgICAgICAgY29sb3I6ICMxMGI5ODE7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtdHlwZS5jbG96ZSB7XG5cbiAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMTQ3LCA1MSwgMjM0LCAwLjIpO1xuICAgICAgICAgY29sb3I6ICM5MzMzZWE7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtZGF0ZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuZmxhc2hjYXJkLWJvZHkge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtcXVlc3Rpb24sXG4gICAgICAuZmxhc2hjYXJkLWFuc3dlciB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgIH1cblxuICAgICAgLmZsYXNoY2FyZC1xdWVzdGlvbiBzdHJvbmcsXG4gICAgICAuZmxhc2hjYXJkLWFuc3dlciBzdHJvbmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgIH1cblxuLmVtcHR5LXN0YXRlIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBwYWRkaW5nOiA0MHB4IDIwcHg7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBwb2ludGVyLWV2ZW50czogbm9uZTsgLyogXHVEODNEXHVERDI3IFx1NTE3M1x1OTUyRVx1RkYwMVx1N0E3QVx1NzJCNlx1NjAwMVx1NEUwRFx1NjJFNlx1NjIyQVx1NzBCOVx1NTFGQiAqL1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHotaW5kZXg6IDE7IC8qIFx1RDgzRFx1REQyNyBcdTc4NkVcdTRGRERcdTU3MjhcdTVERTVcdTUxNzdcdTY4MEZcdTRFMEJcdTY1QjkgKi9cbn1cblxuICAgICAgLmVtcHR5LWhpbnQge1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgfVxuXG4gICAgICAvKiA9PT09PT09PT09PT09PT09PT09PSBcdTU0Q0RcdTVFOTRcdTVGMEYgPT09PT09PT09PT09PT09PT09PT0gKi9cbiAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkge1xuICAgICAgICAubWFpbi1sYXlvdXQge1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyO1xuICAgICAgICB9XG5cbiAgICAgICAgLmxlZnQtcGFuZWwge1xuICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIH1cblxuICAgICAgICAuY29udGVudC1ncmlkLFxuICAgICAgICAuY2FyZHMtZ3JpZCB7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7XG4gICAgICAgIH1cbiAgICAgICAgICAuYmF0Y2gtYnRuIHtcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICB9XG5cbiAgICAgIC5iYXRjaC1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDU5LCAxMzAsIDI0NiwgMC4yKTtcbiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTtcbiAgICAgIH1cblxuICAgICAgLyogXHU2Mjc5XHU5MUNGXHU2QTIxXHU1RjBGXHU2RkMwXHU2RDNCXHU3MkI2XHU2MDAxICovXG4gICAgICAuY29tcGFjdC1jYXJkLmJhdGNoLW1vZGUgLmJhdGNoLWJ0bixcbiAgICAgIC5ncmlkLWNhcmQuYmF0Y2gtbW9kZSAuYmF0Y2gtYnRuIHtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSg1OSwgMTMwLCAyNDYsIDAuMyk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtYWN0aW9ucyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGdhcDogNnB4O1xuICBtYXJnaW4tdG9wOiAxMHB4O1xuICBmbGV4LXdyYXA6IHdyYXA7XG4gIHBhZGRpbmc6IDhweDtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnktYWx0KTtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICBhbmltYXRpb246IHNsaWRlRG93biAwLjJzIGVhc2U7XG59XG4vKiBcdTYyNzlcdTkxQ0ZcdTY0Q0RcdTRGNUNcdTYzMDlcdTk0QUVcdTc5ODFcdTc1MjhcdTcyQjZcdTYwMDFcdUZGMDhcdTY1NzBcdTkxQ0ZcdTRFM0EwXHU2NUY2XHU3Njg0XHU4OUM2XHU4OUM5XHU1M0NEXHU5OTg4XHVGRjA5ICovXG4uYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bi1zaWRlYmFyOmhhcy10ZXh0KFwiKDApXCIpLFxuLmJhdGNoLWRlbGV0ZS1idG4tc2lkZWJhcjpoYXMtdGV4dChcIigwKVwiKSxcbi5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuLWhlYWRlcjpoYXMtdGV4dChcIigwKVwiKSxcbi5iYXRjaC1kZWxldGUtYnRuLWhlYWRlcjpoYXMtdGV4dChcIigwKVwiKSB7XG4gIG9wYWNpdHk6IDAuNTtcbiAgY3Vyc29yOiBub3QtYWxsb3dlZDtcbn1cbkBrZXlmcmFtZXMgc2xpZGVEb3duIHtcbiAgZnJvbSB7XG4gICAgb3BhY2l0eTogMDtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwcHgpO1xuICB9XG4gIHRvIHtcbiAgICBvcGFjaXR5OiAxO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTtcbiAgICBcbiAgfVxufVxuICAgICAgfVxuICAgIGA7XG5cbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICB9XG5cbiAgYXN5bmMgb25DbG9zZSgpIHtcbiAgICAvLyBcdTZFMDVcdTc0MDZcdTVCOUFcdTY1RjZcdTU2NjhcbiAgICBpZiAodGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyICE9PSBudWxsKSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc2VhcmNoRGVib3VuY2VUaW1lcik7XG4gICAgfVxuICAgIFxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09IFx1NjI3OVx1NkNFOFx1N0YxNlx1OEY5MVx1NkEyMVx1NjAwMVx1Njg0NiA9PT09PT09PT09PT09PT09PT09PVxuY2xhc3MgQW5ub3RhdGlvbk1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIHJlc3VsdDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgb25TdWJtaXQ6ICh0ZXh0OiBzdHJpbmcpID0+IHZvaWQ7XG4gIHByaXZhdGUgZGVmYXVsdFZhbHVlOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGRlZmF1bHRWYWx1ZTogc3RyaW5nLCBvblN1Ym1pdDogKHRleHQ6IHN0cmluZykgPT4gdm9pZCkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5kZWZhdWx0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIFxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdTI3MEZcdUZFMEYgXHU3RjE2XHU4RjkxXHU2Mjc5XHU2Q0U4JyB9KTtcblxuICAgIGNvbnN0IHRleHRhcmVhID0gY29udGVudEVsLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgIGNsczogJ2Fubm90YXRpb24tdGV4dGFyZWEnLFxuICAgICAgcGxhY2Vob2xkZXI6ICdcdThGOTNcdTUxNjVcdTRGNjBcdTc2ODRcdTYyNzlcdTZDRTguLi4nLFxuICAgICAgXG4gICAgICBcbiAgICB9KTtcbiAgICB0ZXh0YXJlYS52YWx1ZSA9IHRoaXMuZGVmYXVsdFZhbHVlO1xuICAgIHRleHRhcmVhLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRleHRhcmVhLnN0eWxlLm1pbkhlaWdodCA9ICcxMjBweCc7XG4gICAgdGV4dGFyZWEuc3R5bGUucGFkZGluZyA9ICcxMHB4JztcbiAgICB0ZXh0YXJlYS5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XG4gICAgdGV4dGFyZWEuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzZweCc7XG4gICAgdGV4dGFyZWEuc3R5bGUuZm9udEZhbWlseSA9ICd2YXIoLS1mb250LWludGVyZmFjZSknO1xuICAgIHRleHRhcmVhLnN0eWxlLmZvbnRTaXplID0gJzE0cHgnO1xuICAgIHRleHRhcmVhLnN0eWxlLnJlc2l6ZSA9ICd2ZXJ0aWNhbCc7XG4gICAgdGV4dGFyZWEuc3R5bGUubWFyZ2luVG9wID0gJzEycHgnO1xuXG4gICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ21vZGFsLWJ1dHRvbi1jb250YWluZXInIH0pO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5nYXAgPSAnOHB4JztcbiAgICBidXR0b25Db250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnZmxleC1lbmQnO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSAnMTZweCc7XG5cbiAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1NTNENlx1NkQ4OCcgfSk7XG4gICAgY2FuY2VsQnRuLnN0eWxlLnBhZGRpbmcgPSAnOHB4IDE2cHgnO1xuICAgIGNhbmNlbEJ0bi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNnB4JztcbiAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnXHU0RkREXHU1QjU4JyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgc2F2ZUJ0bi5zdHlsZS5wYWRkaW5nID0gJzhweCAxNnB4JztcbiAgICBzYXZlQnRuLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc2cHgnO1xuICAgIHNhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLnJlc3VsdCA9IHRleHRhcmVhLnZhbHVlO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgdGV4dGFyZWEuZm9jdXMoKTtcbiAgICBcbiAgICAvLyBcdTVGRUJcdTYzNzdcdTk1MkVcdTY1MkZcdTYzMDFcbiAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAoZS5jdHJsS2V5IHx8IGUubWV0YUtleSkpIHtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSB0ZXh0YXJlYS52YWx1ZTtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICBcbiAgICBpZiAodGhpcy5yZXN1bHQgIT09IG51bGwpIHtcbiAgICAgIHRoaXMub25TdWJtaXQodGhpcy5yZXN1bHQpO1xuICAgIH1cbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PSBcdTk1RUFcdTUzNjFcdTUyMUJcdTVFRkFcdTZBMjFcdTYwMDFcdTY4NDYgPT09PT09PT09PT09PT09PT09PT1cbmNsYXNzIEZsYXNoY2FyZENyZWF0aW9uTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgdW5pdDogQ29udGVudFVuaXQ7XG4gIHByaXZhdGUgdHlwZTogJ3FhJyB8ICdjbG96ZSc7XG4gIHByaXZhdGUgb25TdWJtaXQ6IChxdWVzdGlvbjogc3RyaW5nLCBhbnN3ZXI6IHN0cmluZykgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICB1bml0OiBDb250ZW50VW5pdCxcbiAgICB0eXBlOiAncWEnIHwgJ2Nsb3plJyxcbiAgICBvblN1Ym1pdDogKHF1ZXN0aW9uOiBzdHJpbmcsIGFuc3dlcjogc3RyaW5nKSA9PiB2b2lkXG4gICkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy51bml0ID0gdW5pdDtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gzJywge1xuICAgICAgdGV4dDogYFx1RDgzQ1x1RENDRiBcdTUyMUJcdTVFRkEke3RoaXMudHlwZSA9PT0gJ3FhJyA/ICdRJkEnIDogJ1x1NTg2Qlx1N0E3QSd9XHU5NUVBXHU1MzYxYFxuICAgIH0pO1xuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU1MzlGXHU2NTg3XG4gICAgY29uc3Qgc291cmNlRGl2ID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2ZsYXNoY2FyZC1zb3VyY2UnIH0pO1xuICAgIHNvdXJjZURpdi5zdHlsZS5wYWRkaW5nID0gJzEwcHgnO1xuICAgIHNvdXJjZURpdi5zdHlsZS5iYWNrZ3JvdW5kID0gJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KSc7XG4gICAgc291cmNlRGl2LnN0eWxlLmJvcmRlclJhZGl1cyA9ICc2cHgnO1xuICAgIHNvdXJjZURpdi5zdHlsZS5tYXJnaW5Ub3AgPSAnMTJweCc7XG4gICAgc291cmNlRGl2LnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxMnB4JztcbiAgICBzb3VyY2VEaXYuc3R5bGUuZm9udFNpemUgPSAnMTNweCc7XG4gICAgc291cmNlRGl2LnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcbiAgICBzb3VyY2VEaXYuaW5uZXJIVE1MID0gYDxzdHJvbmc+XHU1MzlGXHU2NTg3XHVGRjFBPC9zdHJvbmc+JHt0aGlzLnVuaXQuY29udGVudH1gO1xuXG4gICAgLy8gXHU5NUVFXHU5ODk4XHU4RjkzXHU1MTY1XG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdsYWJlbCcsIHtcbiAgICAgIHRleHQ6IHRoaXMudHlwZSA9PT0gJ3FhJyA/ICdcdTk1RUVcdTk4OTgnIDogJ1x1NTg2Qlx1N0E3QVx1OTg5OFx1NUU3MicsXG4gICAgICBjbHM6ICdmbGFzaGNhcmQtbGFiZWwnXG4gICAgfSkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgXG4gICAgY29uc3QgcXVlc3Rpb25JbnB1dCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICBjbHM6ICdmbGFzaGNhcmQtaW5wdXQnLFxuICAgICAgcGxhY2Vob2xkZXI6IHRoaXMudHlwZSA9PT0gJ3FhJyBcbiAgICAgICAgPyAnXHU4RjkzXHU1MTY1XHU5NUVFXHU5ODk4Li4uJyBcbiAgICAgICAgOiAnXHU3NTI4IHt7YzE6Oi4uLn19IFx1NjgwN1x1OEJCMFx1OTcwMFx1ODk4MVx1NTg2Qlx1N0E3QVx1NzY4NFx1NTE4NVx1NUJCOSdcbiAgICB9KTtcbiAgICBxdWVzdGlvbklucHV0LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUubWluSGVpZ2h0ID0gJzgwcHgnO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUucGFkZGluZyA9ICcxMHB4JztcbiAgICBxdWVzdGlvbklucHV0LnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpJztcbiAgICBxdWVzdGlvbklucHV0LnN0eWxlLmJvcmRlclJhZGl1cyA9ICc2cHgnO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUubWFyZ2luVG9wID0gJzhweCc7XG4gICAgcXVlc3Rpb25JbnB1dC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMTJweCc7XG4gICAgcXVlc3Rpb25JbnB1dC5zdHlsZS5mb250U2l6ZSA9ICcxNHB4JztcbiAgICBxdWVzdGlvbklucHV0LnN0eWxlLnJlc2l6ZSA9ICd2ZXJ0aWNhbCc7XG5cbiAgICAvLyBcdTdCNTRcdTY4NDhcdThGOTNcdTUxNjVcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2xhYmVsJywge1xuICAgICAgdGV4dDogJ1x1N0I1NFx1Njg0OCcsXG4gICAgICBjbHM6ICdmbGFzaGNhcmQtbGFiZWwnXG4gICAgfSkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgXG4gICAgY29uc3QgYW5zd2VySW5wdXQgPSBjb250ZW50RWwuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgY2xzOiAnZmxhc2hjYXJkLWlucHV0JyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnXHU4RjkzXHU1MTY1XHU3QjU0XHU2ODQ4Li4uJ1xuICAgIH0pO1xuICAgIGFuc3dlcklucHV0LnZhbHVlID0gdGhpcy51bml0LmNvbnRlbnQ7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUubWluSGVpZ2h0ID0gJzgwcHgnO1xuICAgIGFuc3dlcklucHV0LnN0eWxlLnBhZGRpbmcgPSAnMTBweCc7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xuICAgIGFuc3dlcklucHV0LnN0eWxlLmJvcmRlclJhZGl1cyA9ICc2cHgnO1xuICAgIGFuc3dlcklucHV0LnN0eWxlLm1hcmdpblRvcCA9ICc4cHgnO1xuICAgIGFuc3dlcklucHV0LnN0eWxlLmZvbnRTaXplID0gJzE0cHgnO1xuICAgIGFuc3dlcklucHV0LnN0eWxlLnJlc2l6ZSA9ICd2ZXJ0aWNhbCc7XG5cbiAgICAvLyBcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG4gICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmdhcCA9ICc4cHgnO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LWVuZCc7XG4gICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICcxNnB4JztcblxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHU1M0Q2XHU2RDg4JyB9KTtcbiAgICBjYW5jZWxCdG4uc3R5bGUucGFkZGluZyA9ICc4cHggMTZweCc7XG4gICAgY2FuY2VsQnRuLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc2cHgnO1xuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGNyZWF0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1x1NTIxQlx1NUVGQScsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIGNyZWF0ZUJ0bi5zdHlsZS5wYWRkaW5nID0gJzhweCAxNnB4JztcbiAgICBjcmVhdGVCdG4uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzZweCc7XG4gICAgY3JlYXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgcXVlc3Rpb24gPSBxdWVzdGlvbklucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgIGNvbnN0IGFuc3dlciA9IGFuc3dlcklucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgIFxuICAgICAgaWYgKCFxdWVzdGlvbiB8fCAhYW5zd2VyKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdThCRjdcdTU4NkJcdTUxOTlcdTVCOENcdTY1NzRcdTRGRTFcdTYwNkYnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0aGlzLm9uU3VibWl0KHF1ZXN0aW9uLCBhbnN3ZXIpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgcXVlc3Rpb25JbnB1dC5mb2N1cygpO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuLy8gPT09PT09PT09PT09PT09PT09PT0gXHU5NUVBXHU1MzYxXHU3RjE2XHU4RjkxXHU2QTIxXHU2MDAxXHU2ODQ2ID09PT09PT09PT09PT09PT09PT09XG5leHBvcnQgY2xhc3MgRmxhc2hjYXJkRWRpdE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIGNhcmQ6IEZsYXNoY2FyZDtcbiAgcHJpdmF0ZSBvblN1Ym1pdDogKHF1ZXN0aW9uOiBzdHJpbmcsIGFuc3dlcjogc3RyaW5nKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwcDogQXBwLFxuICAgIGNhcmQ6IEZsYXNoY2FyZCxcbiAgICBvblN1Ym1pdDogKHF1ZXN0aW9uOiBzdHJpbmcsIGFuc3dlcjogc3RyaW5nKSA9PiB2b2lkXG4gICkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5jYXJkID0gY2FyZDtcbiAgICB0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1MjcwRlx1RkUwRiBcdTdGMTZcdThGOTFcdTk1RUFcdTUzNjEnIH0pO1xuXG4gICAgLy8gXHU5NUVFXHU5ODk4XHU4RjkzXHU1MTY1XG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdsYWJlbCcsIHsgdGV4dDogJ1x1OTVFRVx1OTg5OCcgfSkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgY29uc3QgcXVlc3Rpb25JbnB1dCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICBjbHM6ICdmbGFzaGNhcmQtaW5wdXQnXG4gICAgfSk7XG4gICAgcXVlc3Rpb25JbnB1dC52YWx1ZSA9IHRoaXMuY2FyZC5mcm9udDtcbiAgICBxdWVzdGlvbklucHV0LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUubWluSGVpZ2h0ID0gJzgwcHgnO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUucGFkZGluZyA9ICcxMHB4JztcbiAgICBxdWVzdGlvbklucHV0LnN0eWxlLm1hcmdpblRvcCA9ICc4cHgnO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUubWFyZ2luQm90dG9tID0gJzEycHgnO1xuXG4gICAgLy8gXHU3QjU0XHU2ODQ4XHU4RjkzXHU1MTY1XG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdsYWJlbCcsIHsgdGV4dDogJ1x1N0I1NFx1Njg0OCcgfSkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgY29uc3QgYW5zd2VySW5wdXQgPSBjb250ZW50RWwuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgY2xzOiAnZmxhc2hjYXJkLWlucHV0J1xuICAgIH0pO1xuICAgIGFuc3dlcklucHV0LnZhbHVlID0gQXJyYXkuaXNBcnJheSh0aGlzLmNhcmQuYmFjaykgXG4gICAgICA/IHRoaXMuY2FyZC5iYWNrLmpvaW4oJywgJykgXG4gICAgICA6IHRoaXMuY2FyZC5iYWNrO1xuICAgIGFuc3dlcklucHV0LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIGFuc3dlcklucHV0LnN0eWxlLm1pbkhlaWdodCA9ICc4MHB4JztcbiAgICBhbnN3ZXJJbnB1dC5zdHlsZS5wYWRkaW5nID0gJzEwcHgnO1xuICAgIGFuc3dlcklucHV0LnN0eWxlLm1hcmdpblRvcCA9ICc4cHgnO1xuXG4gICAgLy8gXHU2MzA5XHU5NEFFXG4gICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5nYXAgPSAnOHB4JztcbiAgICBidXR0b25Db250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnZmxleC1lbmQnO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSAnMTZweCc7XG5cbiAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1NTNENlx1NkQ4OCcgfSk7XG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblxuICAgIGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdcdTRGRERcdTVCNTgnLFxuICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICB9KTtcbiAgICBzYXZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgcXVlc3Rpb24gPSBxdWVzdGlvbklucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgIGNvbnN0IGFuc3dlciA9IGFuc3dlcklucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgIGlmICghcXVlc3Rpb24gfHwgIWFuc3dlcikge1xuICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU4QkY3XHU1ODZCXHU1MTk5XHU1QjhDXHU2NTc0XHU0RkUxXHU2MDZGJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMub25TdWJtaXQocXVlc3Rpb24sIGFuc3dlcik7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICBxdWVzdGlvbklucHV0LmZvY3VzKCk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn0iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IEZsYXNoY2FyZCB9IGZyb20gJy4uL2NvcmUvRmxhc2hjYXJkTWFuYWdlcic7XG5pbXBvcnQgeyBDYXJkU2NoZWR1bGVyLCBSZXZpZXdFYXNlIH0gZnJvbSAnLi4vY29yZS9DYXJkU2NoZWR1bGVyJztcbmltcG9ydCB7IEZsYXNoY2FyZEVkaXRNb2RhbCB9IGZyb20gJy4vU2lkZWJhck92ZXJ2aWV3Vmlldyc7XG5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfUkVWSUVXID0gJ2xlYXJuaW5nLXN5c3RlbS1yZXZpZXcnO1xuXG5leHBvcnQgY2xhc3MgUmV2aWV3VmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbjtcbiAgcHJpdmF0ZSBzY2hlZHVsZXI6IENhcmRTY2hlZHVsZXI7XG4gIHByaXZhdGUgZHVlQ2FyZHM6IEZsYXNoY2FyZFtdID0gW107XG4gIHByaXZhdGUgY3VycmVudENhcmRJbmRleDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBjdXJyZW50Q2FyZDogRmxhc2hjYXJkIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc2hvd0Fuc3dlcjogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIHN0YXJ0VGltZTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSB1c2VyQW5zd2Vyczogc3RyaW5nW10gPSBbXTtcbiAgcHJpdmF0ZSB1c2VyQW5zd2VyOiBzdHJpbmcgPSAnJzsgLy8gUUEgXHU1MzYxXHU3MjQ3XHU3Njg0XHU3NTI4XHU2MjM3XHU3QjU0XHU2ODQ4XG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbikge1xuICAgIHN1cGVyKGxlYWYpO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMuc2NoZWR1bGVyID0gbmV3IENhcmRTY2hlZHVsZXIoKTtcbiAgfVxuXG4gIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFZJRVdfVFlQRV9SRVZJRVc7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnRmxhc2hjYXJkIFJldmlldyc7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdsYXllcnMnO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZER1ZUNhcmRzKCk7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICAgIHRoaXMucmVnaXN0ZXJLZXlib2FyZEhhbmRsZXJzKCk7XG4gIH1cblxuICBhc3luYyBvbkNsb3NlKCkge31cblxuICBwcml2YXRlIGFzeW5jIGxvYWREdWVDYXJkcygpIHtcbiAgICB0aGlzLmR1ZUNhcmRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXREdWVDYXJkcygpO1xuICAgIHRoaXMuY3VycmVudENhcmRJbmRleCA9IDA7XG4gICAgdGhpcy5zaG93QW5zd2VyID0gZmFsc2U7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMua2V5Ym9hcmRIYW5kbGVyKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgY29udGFpbmVyLmFkZENsYXNzKCdyZXZpZXctY29udGFpbmVyJyk7XG5cbiAgICBpZiAodGhpcy5kdWVDYXJkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMucmVuZGVyTm9EdWVDYXJkcyhjb250YWluZXIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5ld0NhcmQgPSB0aGlzLmR1ZUNhcmRzW3RoaXMuY3VycmVudENhcmRJbmRleF07XG4gICAgXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU1MjA3XHU2MzYyXHU1MjMwXHU2NUIwXHU1MzYxXHU3MjQ3XHVGRjBDXHU5MUNEXHU3RjZFXHU3MkI2XHU2MDAxXG4gICAgaWYgKHRoaXMuY3VycmVudENhcmQ/LmlkICE9PSBuZXdDYXJkPy5pZCkge1xuICAgICAgdGhpcy51c2VyQW5zd2VycyA9IFtdO1xuICAgICAgdGhpcy51c2VyQW5zd2VyID0gJyc7XG4gICAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcbiAgICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5jdXJyZW50Q2FyZCA9IG5ld0NhcmQ7XG4gICAgXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU2NjNFXHU3OTNBXHU5NUVFXHU5ODk4XHU0RTE0XHU1RjAwXHU1OUNCXHU2NUY2XHU5NUY0XHU0RTNBMFx1RkYwQ1x1OEJCRVx1N0Y2RVx1NUYwMFx1NTlDQlx1NjVGNlx1OTVGNFxuICAgIGlmICghdGhpcy5zaG93QW5zd2VyICYmIHRoaXMuc3RhcnRUaW1lID09PSAwKSB7XG4gICAgICB0aGlzLnN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgfVxuXG4gICAgLy8gXHU4RkRCXHU1RUE2XHU2NzYxXG4gICAgdGhpcy5yZW5kZXJQcm9ncmVzcyhjb250YWluZXIpO1xuXG4gICAgLy8gXHU1MzYxXHU3MjQ3XHU1MzNBXHU1N0RGXG4gICAgY29uc3QgY2FyZEFyZWEgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1hcmVhJyB9KTtcblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NTNGM1x1NEUwQVx1ODlEMlx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVxuICAgIHRoaXMucmVuZGVyVG9wQWN0aW9ucyhjYXJkQXJlYSk7XG5cbiAgICBpZiAodGhpcy5zaG93QW5zd2VyKSB7XG4gICAgICB0aGlzLnJlbmRlckFuc3dlcihjYXJkQXJlYSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVuZGVyUXVlc3Rpb24oY2FyZEFyZWEpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyVG9wQWN0aW9ucyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgYWN0aW9uc0JhciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd0b3AtYWN0aW9ucy1iYXInIH0pO1xuXG4gICAgLy8gSnVtcCB0byBzb3VyY2UgXHU2MzA5XHU5NEFFXHVGRjA4XHU1M0VBXHU2NjNFXHU3OTNBXHU1NkZFXHU2ODA3XHVGRjA5XG4gICAgY29uc3QganVtcEJ0biA9IGFjdGlvbnNCYXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIGNsczogJ3RvcC1hY3Rpb24tYnRuIGp1bXAtaWNvbi1idG4nLFxuICAgICAgYXR0cjogeyAnYXJpYS1sYWJlbCc6ICdKdW1wIHRvIFNvdXJjZScgfVxuICAgIH0pO1xuICAgIGp1bXBCdG4uaW5uZXJIVE1MID0gJ1x1MjE5Nyc7XG4gICAganVtcEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuanVtcFRvU291cmNlKCkpO1xuXG4gICAgLy8gTW9yZSBcdTgzRENcdTUzNTVcbiAgICBjb25zdCBtb3JlQnRuID0gYWN0aW9uc0Jhci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgY2xzOiAndG9wLWFjdGlvbi1idG4gbW9yZS1idG4nLFxuICAgICAgYXR0cjogeyAnYXJpYS1sYWJlbCc6ICdNb3JlIGFjdGlvbnMnIH1cbiAgICB9KTtcbiAgICBtb3JlQnRuLmlubmVySFRNTCA9ICdcdTIyRUYnO1xuICAgIFxuICAgIC8vIFx1NTIxQlx1NUVGQVx1NEUwQlx1NjJDOVx1ODNEQ1x1NTM1NVxuICAgIGNvbnN0IGRyb3Bkb3duID0gYWN0aW9uc0Jhci5jcmVhdGVEaXYoeyBjbHM6ICdtb3JlLWRyb3Bkb3duJyB9KTtcbiAgICBkcm9wZG93bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgLy8gXHU2REZCXHU1MkEwXHU3RjE2XHU4RjkxXHU5MDA5XHU5ODc5XG5jb25zdCBlZGl0T3B0aW9uID0gZHJvcGRvd24uY3JlYXRlRWwoJ2RpdicsIHtcbiAgY2xzOiAnZHJvcGRvd24taXRlbSdcbn0pO1xuZWRpdE9wdGlvbi5pbm5lckhUTUwgPSAnXHUyNzBGXHVGRTBGIEVkaXQgQ2FyZCc7XG5lZGl0T3B0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBpZiAoIXRoaXMuY3VycmVudENhcmQpIHJldHVybjtcbiAgdGhpcy5lZGl0Q3VycmVudEZsYXNoY2FyZCgpO1xuICBkcm9wZG93bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xufSk7XG5cbiAgICBjb25zdCBkZWxldGVPcHRpb24gPSBkcm9wZG93bi5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xzOiAnZHJvcGRvd24taXRlbSBkZWxldGUtaXRlbSdcbiAgICB9KTtcbiAgICBkZWxldGVPcHRpb24uaW5uZXJIVE1MID0gJ1x1RDgzRFx1REREMVx1RkUwRiBEZWxldGUgQ2FyZCc7XG4gICAgZGVsZXRlT3B0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLmN1cnJlbnRDYXJkKSByZXR1cm47XG4gICAgICBpZiAoY29uZmlybSgnXHU3ODZFXHU1QjlBXHU4OTgxXHU1MjIwXHU5NjY0XHU4RkQ5XHU1RjIwXHU5NUVBXHU1MzYxXHU1NDE3XHVGRjFGXHU1MjIwXHU5NjY0XHU1NDBFXHU1QzA2XHU0RUNFXHU1OTBEXHU0RTYwXHU5NjFGXHU1MjE3XHU0RTJEXHU3OUZCXHU5NjY0XHUzMDAyJykpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5kZWxldGVGbGFzaGNhcmQodGhpcy5jdXJyZW50Q2FyZC5pZCk7XG4gICAgICB9XG4gICAgICBkcm9wZG93bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH0pO1xuXG4gICAgLy8gXHU1MjA3XHU2MzYyXHU0RTBCXHU2MkM5XHU4M0RDXHU1MzU1XG4gICAgbW9yZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgZHJvcGRvd24uc3R5bGUuZGlzcGxheSA9IGRyb3Bkb3duLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJyA/ICdibG9jaycgOiAnbm9uZSc7XG4gICAgfSk7XG5cbiAgICAvLyBcdTcwQjlcdTUxRkJcdTU5MTZcdTkwRThcdTUxNzNcdTk1RURcdTgzRENcdTUzNTVcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGRyb3Bkb3duLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfSk7XG5cbiAgICBkcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJOb0R1ZUNhcmRzKGNvbnRhaW5lcjogRWxlbWVudCkge1xuICAgIGNvbnN0IGVtcHR5U3RhdGUgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZW1wdHktc3RhdGUnIH0pO1xuICAgIGVtcHR5U3RhdGUuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVEODNDXHVERjg5IEFsbCBEb25lIScgfSk7XG4gICAgZW1wdHlTdGF0ZS5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ05vIGNhcmRzIGR1ZSBmb3IgcmV2aWV3IHJpZ2h0IG5vdy4nIH0pO1xuXG4gICAgY29uc3Qgc3RhdHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldFN0YXRzKCk7XG4gICAgY29uc3Qgc3RhdHNEaXYgPSBlbXB0eVN0YXRlLmNyZWF0ZURpdih7IGNsczogJ3N0YXRzLXN1bW1hcnknIH0pO1xuICAgIHN0YXRzRGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgVG90YWwgY2FyZHM6ICR7c3RhdHMudG90YWx9YCB9KTtcbiAgICBzdGF0c0Rpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogYE5ldyBjYXJkczogJHtzdGF0cy5uZXd9YCB9KTtcbiAgICBzdGF0c0Rpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogYFJldmlld2VkIHRvZGF5OiAke3N0YXRzLnJldmlld2VkVG9kYXl9YCB9KTtcblxuICAgIGNvbnN0IGNsb3NlQnRuID0gZW1wdHlTdGF0ZS5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ0Nsb3NlIFJldmlldycsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5sZWFmLmRldGFjaCgpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJQcm9ncmVzcyhjb250YWluZXI6IEVsZW1lbnQpIHtcbiAgICBjb25zdCBwcm9ncmVzc0JhciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdwcm9ncmVzcy1iYXInIH0pO1xuICAgIFxuICAgIGNvbnN0IHN0YXRzID0gcHJvZ3Jlc3NCYXIuY3JlYXRlRGl2KHsgY2xzOiAncHJvZ3Jlc3Mtc3RhdHMnIH0pO1xuICAgIHN0YXRzLmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IGAke3RoaXMuY3VycmVudENhcmRJbmRleCArIDF9IC8gJHt0aGlzLmR1ZUNhcmRzLmxlbmd0aH1gLFxuICAgICAgY2xzOiAncHJvZ3Jlc3MtdGV4dCdcbiAgICB9KTtcblxuXG5cbiAgICBjb25zdCBiYXJDb250YWluZXIgPSBwcm9ncmVzc0Jhci5jcmVhdGVEaXYoeyBjbHM6ICdiYXItY29udGFpbmVyJyB9KTtcbiAgICBjb25zdCBiYXIgPSBiYXJDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnYmFyJyB9KTtcbiAgICBjb25zdCBwcm9ncmVzcyA9ICgodGhpcy5jdXJyZW50Q2FyZEluZGV4ICsgMSkgLyB0aGlzLmR1ZUNhcmRzLmxlbmd0aCkgKiAxMDA7XG4gICAgYmFyLnN0eWxlLndpZHRoID0gYCR7cHJvZ3Jlc3N9JWA7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclF1ZXN0aW9uKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAoIXRoaXMuY3VycmVudENhcmQpIHJldHVybjtcblxuICAgIC8vIFx1NTM2MVx1NzI0N1x1NEZFMVx1NjA2RlxuICAgIGNvbnN0IGNhcmRJbmZvID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NhcmQtaW5mbycgfSk7XG4gICAgY2FyZEluZm8uY3JlYXRlU3Bhbih7IFxuICAgICAgdGV4dDogdGhpcy5jdXJyZW50Q2FyZC50eXBlID09PSAncWEnID8gJ1x1RDgzRFx1RENERCBRJkEnIDogJ1x1MjcwRlx1RkUwRiBDbG96ZScsXG4gICAgICBjbHM6ICdjYXJkLXR5cGUnXG4gICAgfSk7XG4gICAgY2FyZEluZm8uY3JlYXRlU3Bhbih7IFxuICAgICAgdGV4dDogYERlY2s6ICR7dGhpcy5jdXJyZW50Q2FyZC5kZWNrfWAsXG4gICAgICBjbHM6ICdjYXJkLWRlY2snXG4gICAgfSk7XG5cbiAgICAvLyBcdTk1RUVcdTk4OThcdTUzM0FcdTU3REZcbiAgICBjb25zdCBxdWVzdGlvbkFyZWEgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncXVlc3Rpb24tYXJlYScgfSk7XG4gICAgcXVlc3Rpb25BcmVhLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1F1ZXN0aW9uJyB9KTtcbiAgICBcbiAgICBjb25zdCBxdWVzdGlvblRleHQgPSBxdWVzdGlvbkFyZWEuY3JlYXRlRGl2KHsgY2xzOiAncXVlc3Rpb24tdGV4dCcgfSk7XG4gICAgcXVlc3Rpb25UZXh0LnRleHRDb250ZW50ID0gdGhpcy5jdXJyZW50Q2FyZC5mcm9udDtcblxuICAgIC8vIFx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1OEY5M1x1NTE2NVx1Njg0NlxuICAgIGlmICh0aGlzLmN1cnJlbnRDYXJkLnR5cGUgPT09ICdjbG96ZScgJiYgdGhpcy5jdXJyZW50Q2FyZC5jbG96ZSkge1xuICAgICAgY29uc3QgaW5wdXRBcmVhID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2Nsb3plLWlucHV0LWFyZWEnIH0pO1xuICAgICAgaW5wdXRBcmVhLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0ZpbGwgaW4gdGhlIGJsYW5rczonIH0pO1xuXG4gICAgICAvLyBcdTc4NkVcdTRGREQgdXNlckFuc3dlcnMgXHU2NTcwXHU3RUM0XHU2NzA5XHU4REIzXHU1OTFGXHU3Njg0XHU5NTdGXHU1RUE2XG4gICAgICBpZiAodGhpcy51c2VyQW5zd2Vycy5sZW5ndGggPCB0aGlzLmN1cnJlbnRDYXJkLmNsb3plLmRlbGV0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy51c2VyQW5zd2VycyA9IG5ldyBBcnJheSh0aGlzLmN1cnJlbnRDYXJkLmNsb3plLmRlbGV0aW9ucy5sZW5ndGgpLmZpbGwoJycpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmN1cnJlbnRDYXJkLmNsb3plLmRlbGV0aW9ucy5mb3JFYWNoKChkZWxldGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXRHcm91cCA9IGlucHV0QXJlYS5jcmVhdGVEaXYoeyBjbHM6ICdpbnB1dC1ncm91cCcgfSk7XG4gICAgICAgIGlucHV0R3JvdXAuY3JlYXRlU3Bhbih7IHRleHQ6IGAke2luZGV4ICsgMX0uIGAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBpbnB1dCA9IGlucHV0R3JvdXAuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBwbGFjZWhvbGRlcjogJ1lvdXIgYW5zd2VyLi4uJyxcbiAgICAgICAgICBjbHM6ICdjbG96ZS1pbnB1dCcsXG4gICAgICAgICAgdmFsdWU6IHRoaXMudXNlckFuc3dlcnNbaW5kZXhdIHx8ICcnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgICAgIHRoaXMudXNlckFuc3dlcnNbaW5kZXhdID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBpbnB1dC5mb2N1cygpLCA1MCk7XG4gICAgICAgIH1cbiAgICAgIFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUUEgXHU1MzYxXHU3MjQ3XHU4RjkzXHU1MTY1XHU2ODQ2XG4gICAgaWYgKHRoaXMuY3VycmVudENhcmQudHlwZSA9PT0gJ3FhJykge1xuICAgICAgY29uc3QgaW5wdXRBcmVhID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3FhLWlucHV0LWFyZWEnIH0pO1xuICAgICAgaW5wdXRBcmVhLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1lvdXIgQW5zd2VyOicgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHRleHRhcmVhID0gaW5wdXRBcmVhLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgICAgcGxhY2Vob2xkZXI6ICdUeXBlIHlvdXIgYW5zd2VyIGhlcmUuLi4nLFxuICAgICAgICBjbHM6ICdxYS1pbnB1dCcsXG4gICAgICAgIHZhbHVlOiB0aGlzLnVzZXJBbnN3ZXJcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICAgIHRoaXMudXNlckFuc3dlciA9IChlLnRhcmdldCBhcyBIVE1MVGV4dEFyZWFFbGVtZW50KS52YWx1ZTtcbiAgICAgIH0pO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB0ZXh0YXJlYS5mb2N1cygpLCA1MCk7XG4gICAgfVxuXG4gICAgLy8gXHU2MzA5XHU5NEFFXHU1MzNBXHU1N0RGXG4gICAgY29uc3QgYnV0dG9uQXJlYSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdidXR0b24tYXJlYScgfSk7XG5cbiAgICAvLyBcdTY2M0VcdTc5M0FcdTdCNTRcdTY4NDhcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBzaG93QW5zd2VyQnRuID0gYnV0dG9uQXJlYS5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1Nob3cgQW5zd2VyJyxcbiAgICAgIGNsczogJ21vZC1jdGEgc2hvdy1hbnN3ZXItYnRuJyxcbiAgICAgIGF0dHI6IHsgdGl0bGU6ICdQcmVzcyBFbnRlciBvciBUYWInfSBcbiAgICB9KTtcbiAgICBzaG93QW5zd2VyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5zaG93QW5zd2VyID0gdHJ1ZTtcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckFuc3dlcihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRDYXJkKSByZXR1cm47XG5cbiAgICAvLyBcdTUzNjFcdTcyNDdcdTRGRTFcdTYwNkZcbiAgICBjb25zdCBjYXJkSW5mbyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLWluZm8nIH0pO1xuICAgIGNhcmRJbmZvLmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IHRoaXMuY3VycmVudENhcmQudHlwZSA9PT0gJ3FhJyA/ICdcdUQ4M0RcdURDREQgUSZBJyA6ICdcdTI3MEZcdUZFMEYgQ2xvemUnLFxuICAgICAgY2xzOiAnY2FyZC10eXBlJ1xuICAgIH0pO1xuICAgIGNhcmRJbmZvLmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IGBEZWNrOiAke3RoaXMuY3VycmVudENhcmQuZGVja31gLFxuICAgICAgY2xzOiAnY2FyZC1kZWNrJ1xuICAgIH0pO1xuXG4gICAgLy8gXHU5NUVFXHU5ODk4XHU1NkRFXHU5ODdFXG4gICAgY29uc3QgcXVlc3Rpb25SZXZpZXcgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncXVlc3Rpb24tcmV2aWV3JyB9KTtcbiAgICBxdWVzdGlvblJldmlldy5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdRdWVzdGlvbjonIH0pO1xuICAgIHF1ZXN0aW9uUmV2aWV3LmNyZWF0ZURpdih7IFxuICAgICAgdGV4dDogdGhpcy5jdXJyZW50Q2FyZC5mcm9udCxcbiAgICAgIGNsczogJ3Jldmlldy10ZXh0J1xuICAgIH0pO1xuXG4gICAgLy8gXHU3QjU0XHU2ODQ4XHU1MzNBXHU1N0RGXG4gICAgY29uc3QgYW5zd2VyQXJlYSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdhbnN3ZXItYXJlYScgfSk7XG5cbiAgICBpZiAodGhpcy5jdXJyZW50Q2FyZC50eXBlID09PSAnY2xvemUnICYmIHRoaXMuY3VycmVudENhcmQuY2xvemUpIHtcbiAgICAgIC8vIFx1NjYzRVx1NzkzQVx1NUI4Q1x1NjU3NFx1NjU4N1x1NjcyQ1xuICAgICAgY29uc3QgZnVsbFRleHQgPSBhbnN3ZXJBcmVhLmNyZWF0ZURpdih7IGNsczogJ2Z1bGwtdGV4dCcgfSk7XG4gICAgICBmdWxsVGV4dC50ZXh0Q29udGVudCA9IHRoaXMuY3VycmVudENhcmQuY2xvemUub3JpZ2luYWw7XG5cbiAgICAgIC8vIFx1NjYzRVx1NzkzQVx1NzUyOFx1NjIzN1x1N0I1NFx1Njg0OFx1NUJGOVx1NkJENFxuICAgICAgaWYgKHRoaXMudXNlckFuc3dlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBjb21wYXJpc29uID0gYW5zd2VyQXJlYS5jcmVhdGVEaXYoeyBjbHM6ICdhbnN3ZXItY29tcGFyaXNvbicgfSk7XG4gICAgICAgIGNvbXBhcmlzb24uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnWW91ciBBbnN3ZXJzOicgfSk7XG5cbiAgICAgICAgdGhpcy5jdXJyZW50Q2FyZC5jbG96ZS5kZWxldGlvbnMuZm9yRWFjaCgoZGVsZXRpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGNvbXBhcmlzb24uY3JlYXRlRGl2KHsgY2xzOiAnY29tcGFyaXNvbi1pdGVtJyB9KTtcbiAgICAgICAgICBpdGVtLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHtpbmRleCArIDF9LiBgIH0pO1xuXG4gICAgICAgICAgY29uc3QgdXNlckFuc3dlciA9IHRoaXMudXNlckFuc3dlcnNbaW5kZXhdIHx8ICcnO1xuICAgICAgICAgIGNvbnN0IGV2YWx1YXRpb24gPSB0aGlzLnNjaGVkdWxlci5ldmFsdWF0ZUFuc3dlcihcbiAgICAgICAgICAgIGRlbGV0aW9uLmFuc3dlcixcbiAgICAgICAgICAgIHVzZXJBbnN3ZXJcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgY29uc3QgdXNlclNwYW4gPSBpdGVtLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgICAgdGV4dDogdXNlckFuc3dlciB8fCAnKGVtcHR5KScsXG4gICAgICAgICAgICBjbHM6IGB1c2VyLWFuc3dlciAke2V2YWx1YXRpb24uY29ycmVjdG5lc3N9YFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFx1Nzg2RVx1NEZERFx1N0M3Qlx1NTQwRFx1NkI2M1x1Nzg2RVx1OEJCRVx1N0Y2RVxuICAgICAgICAgIHVzZXJTcGFuLmNsYXNzTGlzdC5hZGQoJ3VzZXItYW5zd2VyJywgZXZhbHVhdGlvbi5jb3JyZWN0bmVzcyk7XG5cbiAgICAgICAgICBpdGVtLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnIFx1MjE5MiAnIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGl0ZW0uY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgICB0ZXh0OiBkZWxldGlvbi5hbnN3ZXIsXG4gICAgICAgICAgICBjbHM6ICdjb3JyZWN0LWFuc3dlcidcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChldmFsdWF0aW9uLmNvcnJlY3RuZXNzID09PSAncGFydGlhbCcpIHtcbiAgICAgICAgICAgIGl0ZW0uY3JlYXRlRWwoJ3NtYWxsJywge1xuICAgICAgICAgICAgICB0ZXh0OiBgICgke01hdGgucm91bmQoZXZhbHVhdGlvbi5zaW1pbGFyaXR5ICogMTAwKX0lIG1hdGNoKWAsXG4gICAgICAgICAgICAgIGNsczogJ3NpbWlsYXJpdHktaW5mbydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFEmQSBcdTdCNTRcdTY4NDhcbiAgICAgIGNvbnN0IGNvcnJlY3RBbnN3ZXIgPSB0aGlzLmN1cnJlbnRDYXJkLmJhY2sgYXMgc3RyaW5nO1xuICAgICAgXG4gICAgICAvLyBcdTUyMUJcdTVFRkFcdTRFMjRcdTUyMTdcdTVCQjlcdTU2NjhcdUZGMDhcdTY1RTBcdThCQkFcdTY2MkZcdTU0MjZcdTY3MDlcdTc1MjhcdTYyMzdcdTdCNTRcdTY4NDhcdTkwRkRcdTY2M0VcdTc5M0FcdUZGMDlcbiAgICAgIGNvbnN0IGNvbXBhcmlzb24gPSBhbnN3ZXJBcmVhLmNyZWF0ZURpdih7IGNsczogJ2Fuc3dlci1jb21wYXJpc29uIHFhLWNvbXBhcmlzb24nIH0pO1xuICAgICAgXG4gICAgICAvLyBcdTU5ODJcdTY3OUNcdTY3MDlcdTc1MjhcdTYyMzdcdTdCNTRcdTY4NDhcdUZGMENcdThCQTFcdTdCOTdcdThCQzRcdTRGMzBcdTdFRDNcdTY3OUNcbiAgICAgIGNvbnN0IGV2YWx1YXRpb24gPSB0aGlzLnVzZXJBbnN3ZXIudHJpbSgpIFxuICAgICAgICA/IHRoaXMuc2NoZWR1bGVyLmV2YWx1YXRlQW5zd2VyKGNvcnJlY3RBbnN3ZXIsIHRoaXMudXNlckFuc3dlcilcbiAgICAgICAgOiBudWxsO1xuICAgIFxuICAgICAgY29uc3QgY29sdW1uc0NvbnRhaW5lciA9IGNvbXBhcmlzb24uY3JlYXRlRGl2KHsgY2xzOiAncWEtY29sdW1ucy1jb250YWluZXInIH0pO1xuICAgICAgXG4gICAgICAvLyBcdTVERTZcdTUyMTdcdUZGMUFDb3JyZWN0IEFuc3dlclx1RkYwOFx1NTlDQlx1N0VDOFx1NjYzRVx1NzkzQVx1RkYwOVxuICAgICAgY29uc3QgY29ycmVjdENvbHVtbiA9IGNvbHVtbnNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncWEtY29sdW1uJyB9KTtcbiAgICAgIGNvcnJlY3RDb2x1bW4uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnQ29ycmVjdCBBbnN3ZXI6JywgY2xzOiAnY29sdW1uLWxhYmVsJyB9KTtcbiAgICAgIGNvbnN0IGNvcnJlY3RBbnN3ZXJEaXYgPSBjb3JyZWN0Q29sdW1uLmNyZWF0ZURpdih7IGNsczogJ2NvbXBhcmlzb24taXRlbScgfSk7XG4gICAgICBjb3JyZWN0QW5zd2VyRGl2LmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgIHRleHQ6IGNvcnJlY3RBbnN3ZXIsXG4gICAgICAgIGNsczogJ2NvcnJlY3QtYW5zd2VyIHFhLWNvcnJlY3QtYW5zd2VyJ1xuICAgICAgfSk7XG4gICAgXG4gICAgICAvLyBcdTUzRjNcdTUyMTdcdUZGMUFZb3VyIEFuc3dlclx1RkYwOFx1NTlDQlx1N0VDOFx1NjYzRVx1NzkzQVx1RkYwQ1x1NEY0Nlx1NTNFRlx1ODBGRFx1NEUzQVx1N0E3QVx1RkYwOVxuICAgICAgY29uc3QgdXNlckNvbHVtbiA9IGNvbHVtbnNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncWEtY29sdW1uJyB9KTtcbiAgICAgIHVzZXJDb2x1bW4uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnWW91ciBBbnN3ZXI6JywgY2xzOiAnY29sdW1uLWxhYmVsJyB9KTtcbiAgICAgIGNvbnN0IHVzZXJBbnN3ZXJEaXYgPSB1c2VyQ29sdW1uLmNyZWF0ZURpdih7IGNsczogJ2NvbXBhcmlzb24taXRlbScgfSk7XG4gICAgICBjb25zdCB1c2VyQW5zd2VyRWxlbWVudCA9IHVzZXJBbnN3ZXJEaXYuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgdGV4dDogdGhpcy51c2VyQW5zd2VyLnRyaW0oKSB8fCAnKG5vIGFuc3dlciBwcm92aWRlZCknLFxuICAgICAgICBjbHM6ICdxYS11c2VyLWFuc3dlcidcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBcdTUzRUFcdTY3MDlcdTU3MjhcdTY3MDlcdTc1MjhcdTYyMzdcdTdCNTRcdTY4NDhcdTY1RjZcdTYyNERcdTZERkJcdTUyQTBcdThCQzRcdTRGMzBcdTY4MzdcdTVGMEZcbiAgICAgIGlmIChldmFsdWF0aW9uKSB7XG4gICAgICAgIHVzZXJBbnN3ZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3VzZXItYW5zd2VyJywgZXZhbHVhdGlvbi5jb3JyZWN0bmVzcyk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTc2RjhcdTRGM0NcdTVFQTZcdTRGRTFcdTYwNkZcdUZGMDhcdTUzRUFcdTU3MjggcGFydGlhbCBcdTY1RjZcdTY2M0VcdTc5M0FcdUZGMDlcbiAgICAgICAgaWYgKGV2YWx1YXRpb24uY29ycmVjdG5lc3MgPT09ICdwYXJ0aWFsJykge1xuICAgICAgICAgIGNvbnN0IHNpbWlsYXJpdHlJbmZvID0gY29tcGFyaXNvbi5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgY2xzOiAnc2ltaWxhcml0eS1pbmZvIHFhLXNpbWlsYXJpdHknXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2ltaWxhcml0eUluZm8udGV4dENvbnRlbnQgPSBgU2ltaWxhcml0eTogJHtNYXRoLnJvdW5kKGV2YWx1YXRpb24uc2ltaWxhcml0eSAqIDEwMCl9JWA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1NkNBMVx1NjcwOVx1N0I1NFx1Njg0OFx1NjVGNlx1NzY4NFx1NjgzN1x1NUYwRlxuICAgICAgICB1c2VyQW5zd2VyRWxlbWVudC5jbGFzc0xpc3QuYWRkKCduby1hbnN3ZXInKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdThCQzRcdTdFQTdcdTYzMDlcdTk0QUVcbiAgICBjb25zdCByYXRpbmdBcmVhID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3JhdGluZy1hcmVhJyB9KTtcblxuICAgIGNvbnN0IGJ1dHRvbkdyb3VwID0gcmF0aW5nQXJlYS5jcmVhdGVEaXYoeyBjbHM6ICdyYXRpbmctYnV0dG9ucycgfSk7XG5cbiAgICBjb25zdCByYXRpbmdzOiB7IGVhc2U6IFJldmlld0Vhc2U7IGxhYmVsOiBzdHJpbmc7IGNvbG9yOiBzdHJpbmc7IGtleTogc3RyaW5nfVtdID0gW1xuICAgICAgeyBlYXNlOiAnYWdhaW4nLCBsYWJlbDogJ0FnYWluXFxuIDwgMSBtaW4nLCBjb2xvcjogJ3JlZCcgLCBrZXk6ICcxJyB9LFxuICAgICAgeyBlYXNlOiAnaGFyZCcsIGxhYmVsOiAnSGFyZFxcbiA8IDEwIG1pbicsIGNvbG9yOiAnb3JhbmdlJyAsIGtleTogJzInIH0sXG4gICAgICB7IGVhc2U6ICdnb29kJywgbGFiZWw6ICdHb29kXFxuIDEgZGF5JywgY29sb3I6ICdibHVlJyAsIGtleTogJzMnIH0sXG4gICAgICB7IGVhc2U6ICdlYXN5JywgbGFiZWw6ICdFYXN5XFxuIDQgZGF5cycsIGNvbG9yOiAnZ3JlZW4nLCBrZXk6ICc0JyAgfVxuICAgIF07XG5cbiAgICByYXRpbmdzLmZvckVhY2goKHsgZWFzZSwgbGFiZWwsIGNvbG9yLGtleSB9KSA9PiB7XG4gICAgICBjb25zdCBidG4gPSBidXR0b25Hcm91cC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICBjbHM6IGByYXRpbmctYnRuIHJhdGluZy0ke2NvbG9yfWAsXG4gICAgICAgIGF0dHI6IHsgdGl0bGU6IGBQcmVzcyAke2tleX1gIH0gXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgbGluZXMgPSBsYWJlbC5zcGxpdCgnXFxuJyk7XG4gICAgICBidG4uY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogbGluZXNbMF0sIGNsczogJ3JhdGluZy1sYWJlbCcgfSk7XG4gICAgICBidG4uY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogbGluZXNbMV0sIGNsczogJ3JhdGluZy1pbnRlcnZhbCcgfSk7XG5cbiAgICAgIGJ0bi5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBgKCR7a2V5fSlgLCBjbHM6ICdyYXRpbmctaG90a2V5JyB9KTtcblxuICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5zdWJtaXRSZXZpZXcoZWFzZSkpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzdWJtaXRSZXZpZXcoZWFzZTogUmV2aWV3RWFzZSkge1xuICAgIGlmICghdGhpcy5jdXJyZW50Q2FyZCkgcmV0dXJuO1xuXG4gICAgY29uc3QgdGltZVNwZW50ID0gKERhdGUubm93KCkgLSB0aGlzLnN0YXJ0VGltZSkgLyAxMDAwOyAvLyBcdTc5RDJcblxuICAgIC8vIFx1NUJGOVx1NEU4RVx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1NTQ4QyBRQSBcdTUzNjFcdTcyNDdcdUZGMENcdTRGN0ZcdTc1MjhcdTc1MjhcdTYyMzdcdTdCNTRcdTY4NDhcbiAgICBjb25zdCB1c2VyQW5zd2VyID0gdGhpcy5jdXJyZW50Q2FyZC50eXBlID09PSAnY2xvemUnIFxuICAgICAgPyB0aGlzLnVzZXJBbnN3ZXJzIFxuICAgICAgOiB0aGlzLmN1cnJlbnRDYXJkLnR5cGUgPT09ICdxYSdcbiAgICAgID8gdGhpcy51c2VyQW5zd2VyXG4gICAgICA6IHVuZGVmaW5lZDtcblxuICAgIC8vIFx1OEJBMVx1N0I5N1x1NjVCMFx1NzY4NFx1OEMwM1x1NUVBNlxuICAgIGNvbnN0IHsgdXBkYXRlZENhcmQsIHJldmlld0xvZyB9ID0gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoXG4gICAgICB0aGlzLmN1cnJlbnRDYXJkLFxuICAgICAgZWFzZSxcbiAgICAgIHRpbWVTcGVudCxcbiAgICAgIHVzZXJBbnN3ZXJcbiAgICApO1xuXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU1MzYxXHU3MjQ3XG4gICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci51cGRhdGVDYXJkKHVwZGF0ZWRDYXJkKTtcblxuICAgIC8vIFx1OEJCMFx1NUY1NVx1NjVFNVx1NUZEN1xuICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIubG9nUmV2aWV3KHtcbiAgICAgIGlkOiBgbG9nLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgLi4ucmV2aWV3TG9nXG4gICAgfSk7XG5cbiAgICAvLyBcdTRFMEJcdTRFMDBcdTVGMjBcdTUzNjFcdTcyNDdcbiAgICB0aGlzLmN1cnJlbnRDYXJkSW5kZXgrKztcbiAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcbiAgICB0aGlzLnVzZXJBbnN3ZXJzID0gW107XG4gICAgdGhpcy51c2VyQW5zd2VyID0gJyc7XG5cbiAgICBpZiAodGhpcy5jdXJyZW50Q2FyZEluZGV4ID49IHRoaXMuZHVlQ2FyZHMubGVuZ3RoKSB7XG4gICAgICAvLyBcdTU5MERcdTRFNjBcdTVCOENcdTYyMTBcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBSZXZpZXcgc2Vzc2lvbiBjb21wbGV0ZSEgUmV2aWV3ZWQgJHt0aGlzLmR1ZUNhcmRzLmxlbmd0aH0gY2FyZHMuYCk7XG4gICAgICBhd2FpdCB0aGlzLmxvYWREdWVDYXJkcygpO1xuICAgIH1cblxuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGp1bXBUb1NvdXJjZSgpIHtcbiAgICBpZiAoIXRoaXMuY3VycmVudENhcmQpIHJldHVybjtcblxuICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5jdXJyZW50Q2FyZC5zb3VyY2VGaWxlKTtcbiAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG4gICAgICBuZXcgTm90aWNlKCdTb3VyY2UgZmlsZSBub3QgZm91bmQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50VW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KFxuICAgICAgdGhpcy5jdXJyZW50Q2FyZC5zb3VyY2VDb250ZW50SWRcbiAgICApO1xuXG4gICAgaWYgKCFjb250ZW50VW5pdCkge1xuICAgICAgbmV3IE5vdGljZSgnU291cmNlIGNvbnRlbnQgbm90IGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gXHU2MjUzXHU1RjAwXHU2NTg3XHU0RUY2XHU1RTc2XHU4REYzXHU4RjZDXG4gICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKTtcbiAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoSXRlbVZpZXcpO1xuICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgY29uc3QgZWRpdG9yID0gKHZpZXcgYXMgYW55KS5lZGl0b3I7XG4gICAgICAgIGlmIChlZGl0b3IpIHtcbiAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHsgbGluZTogY29udGVudFVuaXQuc291cmNlLnBvc2l0aW9uLmxpbmUsIGNoOiAwIH0pO1xuICAgICAgICAgIGVkaXRvci5zY3JvbGxJbnRvVmlldyh7XG4gICAgICAgICAgICBmcm9tOiB7IGxpbmU6IGNvbnRlbnRVbml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogMCB9LFxuICAgICAgICAgICAgdG86IHsgbGluZTogY29udGVudFVuaXQuc291cmNlLnBvc2l0aW9uLmxpbmUsIGNoOiAwIH1cbiAgICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIDEwMCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGRlbGV0ZUZsYXNoY2FyZChjYXJkSWQ6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmRlbGV0ZUNhcmQoY2FyZElkKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1RDgzRFx1REREMVx1RkUwRiBcdTk1RUFcdTUzNjFcdTVERjJcdTUyMjBcdTk2NjQnKTtcbiAgICAgIFxuICAgICAgLy8gXHU0RUNFXHU1RjUzXHU1MjREXHU1OTBEXHU0RTYwXHU5NjFGXHU1MjE3XHU0RTJEXHU3OUZCXHU5NjY0XG4gICAgICB0aGlzLmR1ZUNhcmRzID0gdGhpcy5kdWVDYXJkcy5maWx0ZXIoY2FyZCA9PiBjYXJkLmlkICE9PSBjYXJkSWQpO1xuICAgICAgXG4gICAgICAvLyBcdTU5ODJcdTY3OUNcdTUyMjBcdTk2NjRcdTc2ODRcdTY2MkZcdTVGNTNcdTUyNERcdTUzNjFcdTcyNDdcdUZGMENcdTc5RkJcdTUyQThcdTUyMzBcdTRFMEJcdTRFMDBcdTVGMjBcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRDYXJkPy5pZCA9PT0gY2FyZElkKSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRDYXJkSW5kZXggPj0gdGhpcy5kdWVDYXJkcy5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDYXJkSW5kZXggPSBNYXRoLm1heCgwLCB0aGlzLmR1ZUNhcmRzLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudENhcmQgPSBudWxsO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBcdTkxQ0RcdTY1QjBcdTZFMzJcdTY3RDNcbiAgICAgIGF3YWl0IHRoaXMubG9hZER1ZUNhcmRzKCk7XG4gICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBmbGFzaGNhcmQ6JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIFx1NTIyMFx1OTY2NFx1OTVFQVx1NTM2MVx1NTkzMVx1OEQyNScpO1xuICAgIH1cbiAgfVxuICBwcml2YXRlIGVkaXRDdXJyZW50Rmxhc2hjYXJkKCkge1xuICAgIGlmICghdGhpcy5jdXJyZW50Q2FyZCkgcmV0dXJuO1xuICBcbiAgICBjb25zdCBtb2RhbCA9IG5ldyBGbGFzaGNhcmRFZGl0TW9kYWwoXG4gICAgICB0aGlzLmFwcCxcbiAgICAgIHRoaXMuY3VycmVudENhcmQsXG4gICAgICBhc3luYyAocXVlc3Rpb246IHN0cmluZywgYW5zd2VyOiBzdHJpbmcpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB1cGRhdGVkQ2FyZDogRmxhc2hjYXJkID0ge1xuICAgICAgICAgICAgLi4udGhpcy5jdXJyZW50Q2FyZCEsXG4gICAgICAgICAgICBmcm9udDogcXVlc3Rpb24sXG4gICAgICAgICAgICBiYWNrOiB0aGlzLmN1cnJlbnRDYXJkIS50eXBlID09PSAnY2xvemUnID8gW2Fuc3dlcl0gOiBhbnN3ZXIsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAuLi50aGlzLmN1cnJlbnRDYXJkIS5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLnVwZGF0ZUNhcmQodXBkYXRlZENhcmQpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBcdTk1RUFcdTUzNjFcdTVERjJcdTY2RjRcdTY1QjAnKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBcdTUyMzdcdTY1QjBcdTVGNTNcdTUyNERcdTUzNjFcdTcyNDdcdTY2M0VcdTc5M0FcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDYXJkID0gdXBkYXRlZENhcmQ7XG4gICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBmbGFzaGNhcmQ6JywgZXJyb3IpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBcdTY2RjRcdTY1QjBcdTk1RUFcdTUzNjFcdTU5MzFcdThEMjUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gICAgbW9kYWwub3BlbigpO1xuICB9XG5cbiAgLy8gXHU1RkVCXHU2Mzc3XHU5NTJFXG4gIHByaXZhdGUga2V5Ym9hcmRIYW5kbGVyID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICBjb25zdCBpc0luSW5wdXQgPSB0YXJnZXQudGFnTmFtZSA9PT0gJ0lOUFVUJyB8fCB0YXJnZXQudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJztcbiAgICAgIC8vIFRhYiBcdTk1MkVcdTU5MDRcdTc0MDZcbiAgaWYgKGUua2V5ID09PSAnVGFiJykge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBcbiAgICBpZiAoZS5zaGlmdEtleSkge1xuICAgICAgLy8gU2hpZnQgKyBUYWI6IFx1NTZERVx1NTIzMFx1OTg5OFx1OTc2MlxuICAgICAgaWYgKHRoaXMuc2hvd0Fuc3dlcikge1xuICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGFiOiBcdTY2M0VcdTc5M0FcdTdCNTRcdTY4NDhcdTYyMTZcdTRFMEJcdTRFMDBcdTVGMjBcbiAgICAgIGlmICghdGhpcy5zaG93QW5zd2VyKSB7XG4gICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IHRydWU7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBcdTVERjJcdTY2M0VcdTc5M0FcdTdCNTRcdTY4NDgsXHU3NkY0XHU2M0E1XHU2MzA5IFwiR29vZFwiIFx1OEJDNFx1NTIwNlx1OEZEQlx1NTE2NVx1NEUwQlx1NEUwMFx1NUYyMFxuICAgICAgICB0aGlzLnN1Ym1pdFJldmlldygnZ29vZCcpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICAgIFxuICAgIC8vIFx1NjU3MFx1NUI1N1x1OTUyRVx1OEJDNFx1NTIwNlx1RkYwOFx1NTNFQVx1NTcyOFx1NjYzRVx1NzkzQVx1N0I1NFx1Njg0OFx1NEUxNFx1NEUwRFx1NTcyOFx1OEY5M1x1NTE2NVx1Njg0Nlx1NjVGNlx1NjcwOVx1NjU0OFx1RkYwOVxuICAgIGlmICh0aGlzLnNob3dBbnN3ZXIpIHtcbiAgICAgIGNvbnN0IHJhdGluZ01hcDogeyBba2V5OiBzdHJpbmddOiBSZXZpZXdFYXNlIH0gPSB7XG4gICAgICAgICcxJzogJ2FnYWluJyxcbiAgICAgICAgJzInOiAnaGFyZCcsXG4gICAgICAgICczJzogJ2dvb2QnLFxuICAgICAgICAnNCc6ICdlYXN5J1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgaWYgKHJhdGluZ01hcFtlLmtleV0pIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnN1Ym1pdFJldmlldyhyYXRpbmdNYXBbZS5rZXldKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIFxuICBwcml2YXRlIHJlZ2lzdGVyS2V5Ym9hcmRIYW5kbGVycygpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5rZXlib2FyZEhhbmRsZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAucmV2aWV3LWNvbnRhaW5lciB7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIG1heC13aWR0aDogODAwcHg7XG4gICAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTdBN0FcdTcyQjZcdTYwMDEgKi9cbiAgICAgIC5lbXB0eS1zdGF0ZSB7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgcGFkZGluZzogNDBweCAyMHB4O1xuICAgICAgfVxuXG4gICAgICAuZW1wdHktc3RhdGUgaDIge1xuICAgICAgICBmb250LXNpemU6IDEuOGVtO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5zdGF0cy1zdW1tYXJ5IHtcbiAgICAgICAgbWFyZ2luOiAyMHB4IDA7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgICAgICBtYXgtd2lkdGg6IDMwMHB4O1xuICAgICAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICAgICAgfVxuXG4gICAgICAvKiBcdThGREJcdTVFQTZcdTY3NjEgKi9cbiAgICAgIC5wcm9ncmVzcy1iYXIge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgfVxuXG4gICAgICAucHJvZ3Jlc3Mtc3RhdHMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgIH1cblxuICAgICAgLnByb2dyZXNzLXRleHQge1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgIH1cblxuICAgICAgLnJlbWFpbmluZy10ZXh0IHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAuYmFyLWNvbnRhaW5lciB7XG4gICAgICAgIGhlaWdodDogNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIH1cblxuICAgICAgLmJhciB7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgdHJhbnNpdGlvbjogd2lkdGggMC4zcyBlYXNlO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTUzNjFcdTcyNDdcdTUzM0FcdTU3REYgKi9cbiAgICAgIC5jYXJkLWFyZWEge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDM1MHB4O1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICB9XG5cbiAgICAgIC8qIFx1NTNGM1x1NEUwQVx1ODlEMlx1NjRDRFx1NEY1Q1x1NjgwRiAqL1xuICAgICAgLnRvcC1hY3Rpb25zLWJhciB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiAxNnB4O1xuICAgICAgICByaWdodDogMTZweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgIHotaW5kZXg6IDEwO1xuICAgICAgfVxuXG4gICAgICAudG9wLWFjdGlvbi1idG4ge1xuICAgICAgICB3aWR0aDogMzJweDtcbiAgICAgICAgaGVpZ2h0OiAzMnB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgcGFkZGluZzogMDtcbiAgICAgIH1cblxuICAgICAgLnRvcC1hY3Rpb24tYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLmp1bXAtaWNvbi1idG4ge1xuICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgIH1cblxuICAgICAgLm1vcmUtYnRuIHtcbiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgIGxldHRlci1zcGFjaW5nOiAxcHg7XG4gICAgICB9XG5cbiAgICAgIC8qIFx1NEUwQlx1NjJDOVx1ODNEQ1x1NTM1NSAqL1xuICAgICAgLm1vcmUtZHJvcGRvd24ge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogMzhweDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxMnB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG4gICAgICAgIG1pbi13aWR0aDogMTUwcHg7XG4gICAgICAgIHotaW5kZXg6IDEwMDtcbiAgICAgIH1cblxuICAgICAgLmRyb3Bkb3duLWl0ZW0ge1xuICAgICAgICBwYWRkaW5nOiA4cHggMTRweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuMnM7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICB9XG5cbiAgICAgIC5kcm9wZG93bi1pdGVtOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5kcm9wZG93bi1pdGVtOmZpcnN0LWNoaWxkIHtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4IDZweCAwIDA7XG4gICAgICB9XG5cbiAgICAgIC5kcm9wZG93bi1pdGVtOmxhc3QtY2hpbGQge1xuICAgICAgICBib3JkZXItcmFkaXVzOiAwIDAgNnB4IDZweDtcbiAgICAgIH1cblxuICAgICAgLmRlbGV0ZS1pdGVtOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvci1ob3Zlcik7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1pbmZvIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTJweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgcGFkZGluZy1yaWdodDogODBweDtcbiAgICAgIH1cblxuICAgICAgLmNhcmQtdHlwZSwgLmNhcmQtZGVjayB7XG4gICAgICAgIHBhZGRpbmc6IDNweCAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTk1RUVcdTk4OThcdTUzM0FcdTU3REYgKi9cbiAgICAgIC5xdWVzdGlvbi1hcmVhLCAuYW5zd2VyLWFyZWEge1xuICAgICAgICBtYXJnaW46IDE2cHggMDtcbiAgICAgIH1cblxuICAgICAgLnF1ZXN0aW9uLWFyZWEgaDMsIC5hbnN3ZXItYXJlYSBoMyB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgICB9XG5cbiAgICAgIC5xdWVzdGlvbi10ZXh0LCAuYW5zd2VyLXRleHQge1xuICAgICAgICBmb250LXNpemU6IDEuMmVtO1xuICAgICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgICBwYWRkaW5nOiAxNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgIH1cblxuICAgICAgLyogXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU4RjkzXHU1MTY1ICovXG4gICAgICAuY2xvemUtaW5wdXQtYXJlYSB7XG4gICAgICAgIG1hcmdpbjogMTZweCAwO1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtaW5wdXQtYXJlYSBoNCB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgIH1cblxuICAgICAgLmlucHV0LWdyb3VwIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgIH1cblxuICAgICAgLmNsb3plLWlucHV0IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBmb250LXNpemU6IDAuOTVlbTtcbiAgICAgIH1cblxuICAgICAgLmNsb3plLWlucHV0OmZvY3VzIHtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgfVxuXG4gICAgICAvKiBRQSBcdTUzNjFcdTcyNDdcdThGOTNcdTUxNjUgKi9cbiAgICAgIC5xYS1pbnB1dC1hcmVhIHtcbiAgICAgICAgbWFyZ2luOiAxNnB4IDA7XG4gICAgICB9XG5cbiAgICAgIC5xYS1pbnB1dC1hcmVhIGg0IHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAucWEtaW5wdXQge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgbWluLWhlaWdodDogMTAwcHg7XG4gICAgICAgIHBhZGRpbmc6IDEwcHggMTJweDtcbiAgICAgICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45NWVtO1xuICAgICAgICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgICAgICAgcmVzaXplOiB2ZXJ0aWNhbDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgIH1cblxuICAgICAgLnFhLWlucHV0OmZvY3VzIHtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTdCNTRcdTY4NDhcdTVCRjlcdTZCRDQgKi9cbiAgICAgIC5xdWVzdGlvbi1yZXZpZXcge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeS1hbHQpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC5xdWVzdGlvbi1yZXZpZXcgaDQge1xuICAgICAgICBtYXJnaW46IDAgMCA2cHggMDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgIH1cblxuICAgICAgLnJldmlldy10ZXh0IHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuOTVlbTtcbiAgICAgIH1cblxuICAgICAgLmZ1bGwtdGV4dCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xuICAgICAgfVxuXG4gICAgICAuYW5zd2VyLWNvbXBhcmlzb24ge1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeS1hbHQpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIG1hcmdpbi10b3A6IDEycHg7XG4gICAgICB9XG5cbiAgICAgIC5hbnN3ZXItY29tcGFyaXNvbiBoNCB7XG4gICAgICAgIG1hcmdpbjogMCAwIDhweCAwO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgfVxuXG4gICAgICAuY29tcGFyaXNvbi1pdGVtIHtcbiAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIH1cblxuICAgICAgLnVzZXItYW5zd2VyIHtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgcGFkZGluZzogMnB4IDZweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICAgICAgfVxuXG4gICAgICAudXNlci1hbnN3ZXIuY29ycmVjdCB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItc3VjY2VzcywgIzRjYWY1MCkgIWltcG9ydGFudDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50LCB3aGl0ZSkgIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgLnVzZXItYW5zd2VyLnBhcnRpYWwge1xuICAgICAgICBiYWNrZ3JvdW5kOiAjRkZDMDAwICFpbXBvcnRhbnQ7XG4gICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xuICAgICAgfVxuXG4gICAgICAudXNlci1hbnN3ZXIud3Jvbmcge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yLCAjZjQ0MzM2KSAhaW1wb3J0YW50O1xuICAgICAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgLmNvcnJlY3QtYW5zd2VyIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLnNpbWlsYXJpdHktaW5mbyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgIH1cblxuICAgICAgLyogUUEgXHU1MzYxXHU3MjQ3XHU1QkY5XHU2QkQ0XHU2ODM3XHU1RjBGICovXG4gICAgICAucWEtY29tcGFyaXNvbiB7XG4gICAgICAgIG1hcmdpbi10b3A6IDEycHg7XG4gICAgICB9XG5cblxuLnFhLWNvbHVtbnMtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZ3JpZDtcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyO1xuICBnYXA6IDE2cHg7XG4gIG1hcmdpbi1ib3R0b206IDEycHg7XG59XG5cbi5xYS1jb2x1bW4ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xufVxuXG4uY29sdW1uLWxhYmVsIHtcbiAgbWFyZ2luOiAwIDAgOHB4IDAgIWltcG9ydGFudDtcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICBmb250LXNpemU6IDAuODVlbTtcbn1cblxuLnFhLXVzZXItYW5zd2VyLFxuLnFhLWNvcnJlY3QtYW5zd2VyIHtcbiAgcGFkZGluZzogMTJweDtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XG4gIGZvbnQtc2l6ZTogMC45NWVtO1xuICBsaW5lLWhlaWdodDogMS41O1xuICBtaW4taGVpZ2h0OiA2MHB4O1xufVxuXG4ucWEtY29ycmVjdC1hbnN3ZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG59XG5cbi8qIFx1NzZGOFx1NEYzQ1x1NUVBNlx1NEZFMVx1NjA2Rlx1NjUzRVx1NTcyOFx1NEUyNFx1NTIxN1x1NEUwQlx1NjVCOSAqL1xuLnFhLXNpbWlsYXJpdHkge1xuICBtYXJnaW4tdG9wOiA4cHg7XG4gIHBhZGRpbmc6IDZweDtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgZm9udC1zaXplOiAwLjg1ZW07XG4gIGdyaWQtY29sdW1uOiAxIC8gLTE7XG59XG5cblxuXG5cbiAgICAgIC5xYS11c2VyLWFuc3dlci5jb3JyZWN0LFxuICAgICAgLnVzZXItYW5zd2VyLmNvcnJlY3QucWEtdXNlci1hbnN3ZXIsXG4gICAgICBkaXYucWEtdXNlci1hbnN3ZXIuY29ycmVjdCxcbiAgICAgIGRpdi51c2VyLWFuc3dlci5jb3JyZWN0LnFhLXVzZXItYW5zd2VyLFxuICAgICAgLmNvbXBhcmlzb24taXRlbSAucWEtdXNlci1hbnN3ZXIuY29ycmVjdCxcbiAgICAgIC5jb21wYXJpc29uLWl0ZW0gLnVzZXItYW5zd2VyLmNvcnJlY3QucWEtdXNlci1hbnN3ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLXN1Y2Nlc3MsICM0Y2FmNTApICFpbXBvcnRhbnQ7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM0Y2FmNTAgIWltcG9ydGFudDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50LCB3aGl0ZSkgIWltcG9ydGFudDtcbiAgICAgICAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cbiAgICAgIC5xYS11c2VyLWFuc3dlci5wYXJ0aWFsLFxuICAgICAgLnVzZXItYW5zd2VyLnBhcnRpYWwucWEtdXNlci1hbnN3ZXIsXG4gICAgICBkaXYucWEtdXNlci1hbnN3ZXIucGFydGlhbCxcbiAgICAgIGRpdi51c2VyLWFuc3dlci5wYXJ0aWFsLnFhLXVzZXItYW5zd2VyLFxuICAgICAgLmNvbXBhcmlzb24taXRlbSAucWEtdXNlci1hbnN3ZXIucGFydGlhbCxcbiAgICAgIC5jb21wYXJpc29uLWl0ZW0gLnVzZXItYW5zd2VyLnBhcnRpYWwucWEtdXNlci1hbnN3ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiAjRkZDMDAwICFpbXBvcnRhbnQ7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkMwMDAgIWltcG9ydGFudDtcbiAgICAgICAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cbiAgICAgIC5xYS11c2VyLWFuc3dlci53cm9uZyxcbiAgICAgIC51c2VyLWFuc3dlci53cm9uZy5xYS11c2VyLWFuc3dlcixcbiAgICAgIGRpdi5xYS11c2VyLWFuc3dlci53cm9uZyxcbiAgICAgIGRpdi51c2VyLWFuc3dlci53cm9uZy5xYS11c2VyLWFuc3dlcixcbiAgICAgIC5jb21wYXJpc29uLWl0ZW0gLnFhLXVzZXItYW5zd2VyLndyb25nLFxuICAgICAgLmNvbXBhcmlzb24taXRlbSAudXNlci1hbnN3ZXIud3JvbmcucWEtdXNlci1hbnN3ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yLCAjZjQ0MzM2KSAhaW1wb3J0YW50O1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjQ0MzM2ICFpbXBvcnRhbnQ7XG4gICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xuICAgICAgfVxuXG5cbiAgICAgIC5jb3JyZWN0LWFuc3dlci1sYWJlbCB7XG4gICAgICAgIG1hcmdpbi10b3A6IDEycHggIWltcG9ydGFudDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4ICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cbiAgICAgIC5xYS1zaW1pbGFyaXR5IHtcbiAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgICBwYWRkaW5nOiA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTYzMDlcdTk0QUVcdTUzM0FcdTU3REYgKi9cbiAgICAgIC5idXR0b24tYXJlYSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogMTJweDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zaG93LWFuc3dlci1idG4ge1xuICAgICAgICBwYWRkaW5nOiAxMHB4IDMycHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgICAgfVxuXG4gICAgICAvKiBcdThCQzRcdTdFQTdcdTUzM0FcdTU3REYgKi9cbiAgICAgIC5yYXRpbmctYXJlYSB7XG4gICAgICAgIG1hcmdpbjogMTVweCAwIDEwcHggMDtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLWFyZWEgaDQge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbmctYnV0dG9ucyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogMjBweDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDA7XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbmctYnRuIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgbWF4LXdpZHRoOiAxMjBweDtcbiAgICAgICAgaGlnaHQ6MTAwcHg7XG4gICAgICAgIHBhZGRpbmc6IDE0cHggOHB4O1xuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLnJhdGluZy1idG46aG92ZXIge1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgM3B4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLXJlZDpob3ZlciB7IFxuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItZXJyb3ItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLW9yYW5nZTpob3ZlciB7IFxuICAgICAgICBib3JkZXItY29sb3I6ICNGRkMwMDA7XG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAxOTIsIDAsIDAuMSk7XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbmctYmx1ZTpob3ZlciB7IFxuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLWdyZWVuOmhvdmVyIHsgXG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItZ3JlZW4pO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLXN1Y2Nlc3MtaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLWxhYmVsIHtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgIH1cblxuICAgICAgLnJhdGluZy1pbnRlcnZhbCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG4gICAgICAgIC8qIFx1NUZFQlx1NjM3N1x1OTUyRVx1NjNEMFx1NzkzQSAqL1xuLnJhdGluZy1ob3RrZXkge1xuICBmb250LXNpemU6IDAuNzVlbTtcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICBtYXJnaW4tdG9wOiA0cHg7XG4gIG9wYWNpdHk6IDAuNztcbn1cblxuLnJhdGluZy1idG46aG92ZXIgLnJhdGluZy1ob3RrZXkge1xuICBvcGFjaXR5OiAxO1xuICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xufVxuXG4vKiBTaG93IEFuc3dlciBcdTYzMDlcdTk0QUUgdG9vbHRpcCAqL1xuLnNob3ctYW5zd2VyLWJ0biB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cbiAgLmNsb3plLWlucHV0OmZvY3VzLFxuLnFhLWlucHV0OmZvY3VzIHtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICBvdXRsaW5lOiBub25lO1xuICBib3gtc2hhZG93OiAwIDAgMCAycHggdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50LWhvdmVyKTtcbn1cbiAgLyogXHU2NUUwXHU3QjU0XHU2ODQ4XHU3MkI2XHU2MDAxICovXG4ucWEtdXNlci1hbnN3ZXIubm8tYW5zd2VyIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgYm9yZGVyOiAycHggZGFzaGVkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbn1cbiAgICBgO1xuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxufSIsICJpbXBvcnQgeyBGbGFzaGNhcmQsIFJldmlld0xvZyB9IGZyb20gJy4vRmxhc2hjYXJkTWFuYWdlcic7XG5cbmV4cG9ydCB0eXBlIFJldmlld0Vhc2UgPSAnYWdhaW4nIHwgJ2hhcmQnIHwgJ2dvb2QnIHwgJ2Vhc3knO1xuXG5leHBvcnQgY2xhc3MgQ2FyZFNjaGVkdWxlciB7XG4gIC8qKlxuICAgKiBcdThCQTFcdTdCOTdcdTRFMEJcdTZCMjFcdTU5MERcdTRFNjBcdTY1RjZcdTk1RjRcdUZGMDhcdTU3RkFcdTRFOEUgU00tMiBcdTdCOTdcdTZDRDVcdUZGMDlcbiAgICovXG4gIHNjaGVkdWxlKFxuICAgIGNhcmQ6IEZsYXNoY2FyZCxcbiAgICBlYXNlOiBSZXZpZXdFYXNlLFxuICAgIHRpbWVTcGVudDogbnVtYmVyLFxuICAgIHVzZXJBbnN3ZXI/OiBzdHJpbmcgfCBzdHJpbmdbXVxuICApOiB7XG4gICAgdXBkYXRlZENhcmQ6IEZsYXNoY2FyZDtcbiAgICByZXZpZXdMb2c6IE9taXQ8UmV2aWV3TG9nLCAnaWQnPjtcbiAgfSB7XG4gICAgY29uc3Qgb2xkU2NoZWR1bGluZyA9IHsgLi4uY2FyZC5zY2hlZHVsaW5nIH07XG4gICAgY29uc3QgbmV3U2NoZWR1bGluZyA9IHsgLi4uY2FyZC5zY2hlZHVsaW5nIH07XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblxuICAgIC8vIFx1NjZGNFx1NjVCMFx1N0VERlx1OEJBMVxuICAgIGNhcmQuc3RhdHMudG90YWxSZXZpZXdzKys7XG4gICAgY2FyZC5zdGF0cy5sYXN0UmV2aWV3ID0gbm93O1xuXG4gICAgLy8gXHU4QkExXHU3Qjk3XHU1RTczXHU1NzQ3XHU2NUY2XHU5NUY0XG4gICAgY29uc3QgdG90YWxUaW1lID0gY2FyZC5zdGF0cy5hdmVyYWdlVGltZSAqIChjYXJkLnN0YXRzLnRvdGFsUmV2aWV3cyAtIDEpICsgdGltZVNwZW50O1xuICAgIGNhcmQuc3RhdHMuYXZlcmFnZVRpbWUgPSB0b3RhbFRpbWUgLyBjYXJkLnN0YXRzLnRvdGFsUmV2aWV3cztcblxuICAgIC8vIFx1NjgzOVx1NjM2RVx1OTZCRVx1NUVBNlx1OEJDNFx1N0VBN1x1NjZGNFx1NjVCMFx1OEMwM1x1NUVBNlxuICAgIHN3aXRjaCAoZWFzZSkge1xuICAgICAgY2FzZSAnYWdhaW4nOlxuICAgICAgICB0aGlzLnNjaGVkdWxlQWdhaW4obmV3U2NoZWR1bGluZywgY2FyZC5zdGF0cyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaGFyZCc6XG4gICAgICAgIHRoaXMuc2NoZWR1bGVIYXJkKG5ld1NjaGVkdWxpbmcsIGNhcmQuc3RhdHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2dvb2QnOlxuICAgICAgICB0aGlzLnNjaGVkdWxlR29vZChuZXdTY2hlZHVsaW5nLCBjYXJkLnN0YXRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdlYXN5JzpcbiAgICAgICAgdGhpcy5zY2hlZHVsZUVhc3kobmV3U2NoZWR1bGluZywgY2FyZC5zdGF0cyk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGNhcmQuc2NoZWR1bGluZyA9IG5ld1NjaGVkdWxpbmc7XG4gICAgY2FyZC5tZXRhZGF0YS51cGRhdGVkQXQgPSBub3c7XG5cbiAgICAvLyBcdTUyMUJcdTVFRkFcdTU5MERcdTRFNjBcdTY1RTVcdTVGRDdcbiAgICBjb25zdCByZXZpZXdMb2c6IE9taXQ8UmV2aWV3TG9nLCAnaWQnPiA9IHtcbiAgICAgIGZsYXNoY2FyZElkOiBjYXJkLmlkLFxuICAgICAgdGltZXN0YW1wOiBub3csXG4gICAgICByZXNwb25zZToge1xuICAgICAgICB1c2VyQW5zd2VyLFxuICAgICAgICB0aW1lU3BlbnQsXG4gICAgICAgIGVhc2VcbiAgICAgIH0sXG4gICAgICBzY2hlZHVsaW5nQ2hhbmdlOiB7XG4gICAgICAgIG9sZEludGVydmFsOiBvbGRTY2hlZHVsaW5nLmludGVydmFsLFxuICAgICAgICBuZXdJbnRlcnZhbDogbmV3U2NoZWR1bGluZy5pbnRlcnZhbCxcbiAgICAgICAgb2xkRWFzZTogb2xkU2NoZWR1bGluZy5lYXNlLFxuICAgICAgICBuZXdFYXNlOiBuZXdTY2hlZHVsaW5nLmVhc2VcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHsgdXBkYXRlZENhcmQ6IGNhcmQsIHJldmlld0xvZyB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEFnYWluIC0gXHU1QjhDXHU1MTY4XHU1RkQ4XHU4QkIwXG4gICAqL1xuICBwcml2YXRlIHNjaGVkdWxlQWdhaW4oXG4gICAgc2NoZWR1bGluZzogRmxhc2hjYXJkWydzY2hlZHVsaW5nJ10sXG4gICAgc3RhdHM6IEZsYXNoY2FyZFsnc3RhdHMnXVxuICApIHtcbiAgICAvLyBcdTkxQ0RcdTdGNkVcdTk1RjRcdTk2OTRcbiAgICBzY2hlZHVsaW5nLmludGVydmFsID0gMTsgLy8gMSBcdTUyMDZcdTk0OUZcbiAgICBzY2hlZHVsaW5nLmVhc2UgPSBNYXRoLm1heCgxLjMsIHNjaGVkdWxpbmcuZWFzZSAtIDAuMik7XG4gICAgc2NoZWR1bGluZy5kdWUgPSBEYXRlLm5vdygpICsgc2NoZWR1bGluZy5pbnRlcnZhbCAqIDYwICogMTAwMDtcbiAgICBzY2hlZHVsaW5nLmxhcHNlcysrO1xuICAgIHNjaGVkdWxpbmcucmVwcysrO1xuICAgIFxuICAgIC8vIFx1NzJCNlx1NjAwMVx1OEY2Q1x1NjM2MlxuICAgIGlmIChzY2hlZHVsaW5nLnN0YXRlID09PSAnbmV3Jykge1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdsZWFybmluZyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjaGVkdWxpbmcuc3RhdGUgPSAncmVsZWFybmluZyc7XG4gICAgfVxuXG4gICAgLy8gXHU1ODlFXHU1MkEwXHU5NkJFXHU1RUE2XG4gICAgc3RhdHMuZGlmZmljdWx0eSA9IE1hdGgubWluKDEuMCwgc3RhdHMuZGlmZmljdWx0eSArIDAuMSk7XG4gIH1cblxuICAvKipcbiAgICogSGFyZCAtIFx1NTZGMFx1OTZCRVxuICAgKi9cbiAgcHJpdmF0ZSBzY2hlZHVsZUhhcmQoXG4gICAgc2NoZWR1bGluZzogRmxhc2hjYXJkWydzY2hlZHVsaW5nJ10sXG4gICAgc3RhdHM6IEZsYXNoY2FyZFsnc3RhdHMnXVxuICApIHtcbiAgICBzY2hlZHVsaW5nLnJlcHMrKztcblxuICAgIGlmIChzY2hlZHVsaW5nLnN0YXRlID09PSAnbmV3JyB8fCBzY2hlZHVsaW5nLnN0YXRlID09PSAnbGVhcm5pbmcnKSB7XG4gICAgICAvLyBcdTVCNjZcdTRFNjBcdTk2MzZcdTZCQjVcdUZGMUExMCBcdTUyMDZcdTk0OUZcbiAgICAgIHNjaGVkdWxpbmcuaW50ZXJ2YWwgPSAxMDtcbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIDEwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdsZWFybmluZyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NTkwRFx1NEU2MFx1OTYzNlx1NkJCNVx1RkYxQVx1NUY1M1x1NTI0RFx1OTVGNFx1OTY5NCAqIDEuMlxuICAgICAgc2NoZWR1bGluZy5pbnRlcnZhbCA9IE1hdGgubWF4KDEsIHNjaGVkdWxpbmcuaW50ZXJ2YWwgKiAxLjIpO1xuICAgICAgc2NoZWR1bGluZy5lYXNlID0gTWF0aC5tYXgoMS4zLCBzY2hlZHVsaW5nLmVhc2UgLSAwLjE1KTtcbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIHNjaGVkdWxpbmcuaW50ZXJ2YWwgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdyZXZpZXcnO1xuICAgIH1cblxuICAgIHN0YXRzLmRpZmZpY3VsdHkgPSBNYXRoLm1pbigxLjAsIHN0YXRzLmRpZmZpY3VsdHkgKyAwLjA1KTtcbiAgICBzdGF0cy5jb3JyZWN0Q291bnQgKz0gMC41OyAvLyBcdTkwRThcdTUyMDZcdTZCNjNcdTc4NkVcbiAgfVxuXG4gIC8qKlxuICAgKiBHb29kIC0gXHU2QjYzXHU3ODZFXG4gICAqL1xuICBwcml2YXRlIHNjaGVkdWxlR29vZChcbiAgICBzY2hlZHVsaW5nOiBGbGFzaGNhcmRbJ3NjaGVkdWxpbmcnXSxcbiAgICBzdGF0czogRmxhc2hjYXJkWydzdGF0cyddXG4gICkge1xuICAgIHNjaGVkdWxpbmcucmVwcysrO1xuICAgIHN0YXRzLmNvcnJlY3RDb3VudCsrO1xuXG4gICAgaWYgKHNjaGVkdWxpbmcuc3RhdGUgPT09ICduZXcnKSB7XG4gICAgICAvLyBcdTY1QjBcdTUzNjFcdTcyNDdcdUZGMUExIFx1NTkyOVxuICAgICAgc2NoZWR1bGluZy5pbnRlcnZhbCA9IDE7XG4gICAgICBzY2hlZHVsaW5nLmR1ZSA9IERhdGUubm93KCkgKyAxICogMjQgKiA2MCAqIDYwICogMTAwMDtcbiAgICAgIHNjaGVkdWxpbmcuc3RhdGUgPSAnbGVhcm5pbmcnO1xuICAgIH0gZWxzZSBpZiAoc2NoZWR1bGluZy5zdGF0ZSA9PT0gJ2xlYXJuaW5nJykge1xuICAgICAgLy8gXHU1QjY2XHU0RTYwXHU0RTJEXHVGRjFBXHU4RkRCXHU1MTY1XHU1OTBEXHU0RTYwXHVGRjBDXHU5NUY0XHU5Njk0XHU2ODM5XHU2MzZFXHU4QkIwXHU1RkM2XHU1RjNBXHU1RUE2XG4gICAgICBpZiAoc2NoZWR1bGluZy5pbnRlcnZhbCA8IDEpIHtcbiAgICAgICAgc2NoZWR1bGluZy5pbnRlcnZhbCA9IDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzY2hlZHVsaW5nLmludGVydmFsID0gMztcbiAgICAgIH1cbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIHNjaGVkdWxpbmcuaW50ZXJ2YWwgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdyZXZpZXcnO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTU5MERcdTRFNjBcdTk2MzZcdTZCQjVcdUZGMUFcdTk1RjRcdTk2OTQgKiBlYXNlXG4gICAgICBzY2hlZHVsaW5nLmludGVydmFsID0gc2NoZWR1bGluZy5pbnRlcnZhbCAqIHNjaGVkdWxpbmcuZWFzZTtcbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIHNjaGVkdWxpbmcuaW50ZXJ2YWwgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5lYXNlID0gc2NoZWR1bGluZy5lYXNlICsgMC4xO1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdyZXZpZXcnO1xuICAgIH1cblxuICAgIC8vIFx1OTY0RFx1NEY0RVx1OTZCRVx1NUVBNlxuICAgIHN0YXRzLmRpZmZpY3VsdHkgPSBNYXRoLm1heCgwLCBzdGF0cy5kaWZmaWN1bHR5IC0gMC4wNSk7XG4gIH1cblxuICAvKipcbiAgICogRWFzeSAtIFx1OTc1RVx1NUUzOFx1N0I4MFx1NTM1NVxuICAgKi9cbiAgcHJpdmF0ZSBzY2hlZHVsZUVhc3koXG4gICAgc2NoZWR1bGluZzogRmxhc2hjYXJkWydzY2hlZHVsaW5nJ10sXG4gICAgc3RhdHM6IEZsYXNoY2FyZFsnc3RhdHMnXVxuICApIHtcbiAgICBzY2hlZHVsaW5nLnJlcHMrKztcbiAgICBzdGF0cy5jb3JyZWN0Q291bnQrKztcblxuICAgIGlmIChzY2hlZHVsaW5nLnN0YXRlID09PSAnbmV3Jykge1xuICAgICAgLy8gXHU2NUIwXHU1MzYxXHU3MjQ3XHVGRjFBXHU3NkY0XHU2M0E1IDQgXHU1OTI5XG4gICAgICBzY2hlZHVsaW5nLmludGVydmFsID0gNDtcbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIDQgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdyZXZpZXcnO1xuICAgIH0gZWxzZSBpZiAoc2NoZWR1bGluZy5zdGF0ZSA9PT0gJ2xlYXJuaW5nJykge1xuICAgICAgLy8gXHU1QjY2XHU0RTYwXHU0RTJEXHVGRjFBXHU3NkY0XHU2M0E1XHU4RkRCXHU1MTY1XHU1OTBEXHU0RTYwXHVGRjBDNyBcdTU5MjlcbiAgICAgIHNjaGVkdWxpbmcuaW50ZXJ2YWwgPSA3O1xuICAgICAgc2NoZWR1bGluZy5kdWUgPSBEYXRlLm5vdygpICsgNyAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gICAgICBzY2hlZHVsaW5nLnN0YXRlID0gJ3Jldmlldyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NTkwRFx1NEU2MFx1OTYzNlx1NkJCNVx1RkYxQVx1OTVGNFx1OTY5NCAqIChlYXNlICsgMC4zKVxuICAgICAgc2NoZWR1bGluZy5pbnRlcnZhbCA9IHNjaGVkdWxpbmcuaW50ZXJ2YWwgKiAoc2NoZWR1bGluZy5lYXNlICsgMC4zKTtcbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIHNjaGVkdWxpbmcuaW50ZXJ2YWwgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5lYXNlID0gc2NoZWR1bGluZy5lYXNlICsgMC4xNTtcbiAgICAgIHNjaGVkdWxpbmcuc3RhdGUgPSAncmV2aWV3JztcbiAgICB9XG5cbiAgICAvLyBcdTY2M0VcdTg0NTdcdTk2NERcdTRGNEVcdTk2QkVcdTVFQTZcbiAgICBzdGF0cy5kaWZmaWN1bHR5ID0gTWF0aC5tYXgoMCwgc3RhdHMuZGlmZmljdWx0eSAtIDAuMSk7XG4gIH1cblxuICAvKipcbiAgICogXHU4QkM0XHU0RjMwXHU3NTI4XHU2MjM3XHU3QjU0XHU2ODQ4XHVGRjA4XHU3NTI4XHU0RThFXHU4RjkzXHU1MTY1XHU3QjU0XHU2ODQ4XHU2QTIxXHU1RjBGXHVGRjA5XG4gICAqL1xuICBldmFsdWF0ZUFuc3dlcihcbiAgICBjb3JyZWN0QW5zd2VyOiBzdHJpbmcgfCBzdHJpbmdbXSxcbiAgICB1c2VyQW5zd2VyOiBzdHJpbmcgfCBzdHJpbmdbXVxuICApOiB7XG4gICAgY29ycmVjdG5lc3M6ICdjb3JyZWN0JyB8ICdwYXJ0aWFsJyB8ICd3cm9uZyc7XG4gICAgc2ltaWxhcml0eTogbnVtYmVyO1xuICB9IHtcbiAgICAvLyBcdTU5MDRcdTc0MDZcdTY1NzBcdTdFQzRcdUZGMDhcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdUZGMDlcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjb3JyZWN0QW5zd2VyKSAmJiBBcnJheS5pc0FycmF5KHVzZXJBbnN3ZXIpKSB7XG4gICAgICBsZXQgY29ycmVjdENvdW50ID0gMDtcbiAgICAgIGNvbnN0IHRvdGFsID0gY29ycmVjdEFuc3dlci5sZW5ndGg7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWw7IGkrKykge1xuICAgICAgICBjb25zdCBzaW1pbGFyaXR5ID0gdGhpcy5jYWxjdWxhdGVTaW1pbGFyaXR5KFxuICAgICAgICAgIHRoaXMubm9ybWFsaXplKGNvcnJlY3RBbnN3ZXJbaV0pLFxuICAgICAgICAgIHRoaXMubm9ybWFsaXplKHVzZXJBbnN3ZXJbaV0gfHwgJycpXG4gICAgICAgICk7XG4gICAgICAgIGlmIChzaW1pbGFyaXR5ID49IDAuOSkgY29ycmVjdENvdW50Kys7XG4gICAgICAgIGVsc2UgaWYgKHNpbWlsYXJpdHkgPj0gMC42KSBjb3JyZWN0Q291bnQgKz0gMC41O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBvdmVyYWxsU2ltaWxhcml0eSA9IGNvcnJlY3RDb3VudCAvIHRvdGFsO1xuXG4gICAgICBpZiAob3ZlcmFsbFNpbWlsYXJpdHkgPj0gMC45KSB7XG4gICAgICAgIHJldHVybiB7IGNvcnJlY3RuZXNzOiAnY29ycmVjdCcsIHNpbWlsYXJpdHk6IG92ZXJhbGxTaW1pbGFyaXR5IH07XG4gICAgICB9IGVsc2UgaWYgKG92ZXJhbGxTaW1pbGFyaXR5ID49IDAuNikge1xuICAgICAgICByZXR1cm4geyBjb3JyZWN0bmVzczogJ3BhcnRpYWwnLCBzaW1pbGFyaXR5OiBvdmVyYWxsU2ltaWxhcml0eSB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgY29ycmVjdG5lc3M6ICd3cm9uZycsIHNpbWlsYXJpdHk6IG92ZXJhbGxTaW1pbGFyaXR5IH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHU1OTA0XHU3NDA2XHU1QjU3XHU3QjI2XHU0RTMyXG4gICAgY29uc3QgY29ycmVjdCA9IHRoaXMubm9ybWFsaXplKGNvcnJlY3RBbnN3ZXIgYXMgc3RyaW5nKTtcbiAgICBjb25zdCB1c2VyID0gdGhpcy5ub3JtYWxpemUodXNlckFuc3dlciBhcyBzdHJpbmcpO1xuXG4gICAgLy8gXHU3QTdBXHU3QjU0XHU2ODQ4XG4gICAgaWYgKHVzZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4geyBjb3JyZWN0bmVzczogJ3dyb25nJywgc2ltaWxhcml0eTogMCB9O1xuICAgIH1cblxuICAgIC8vIFx1OTU3Rlx1NUVBNlx1NURFRVx1NUYwMlx1OEZDN1x1NTkyN1x1NzZGNFx1NjNBNVx1NTIyNFx1OTUxOVxuICAgIGNvbnN0IGxlbmd0aFJhdGlvID0gTWF0aC5taW4odXNlci5sZW5ndGgsIGNvcnJlY3QubGVuZ3RoKSAvIE1hdGgubWF4KHVzZXIubGVuZ3RoLCBjb3JyZWN0Lmxlbmd0aCk7XG4gICAgaWYgKGxlbmd0aFJhdGlvIDwgMC4zKSB7XG5cbiAgICAgIHJldHVybiB7IGNvcnJlY3RuZXNzOiAnd3JvbmcnLCBzaW1pbGFyaXR5OiAwIH07XG4gICAgfVxuXG4gICAgY29uc3Qgc2ltaWxhcml0eSA9IHRoaXMuY2FsY3VsYXRlU2ltaWxhcml0eShjb3JyZWN0LCB1c2VyKTtcblxuXG5cbiAgICBpZiAoc2ltaWxhcml0eSA+PSAwLjkpIHtcbiAgICAgIHJldHVybiB7IGNvcnJlY3RuZXNzOiAnY29ycmVjdCcsIHNpbWlsYXJpdHkgfTtcbiAgICB9IGVsc2UgaWYgKHNpbWlsYXJpdHkgPj0gMC43KSB7XG4gICAgICByZXR1cm4geyBjb3JyZWN0bmVzczogJ3BhcnRpYWwnLCBzaW1pbGFyaXR5IH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB7IGNvcnJlY3RuZXNzOiAnd3JvbmcnLCBzaW1pbGFyaXR5IH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NjgwN1x1NTFDNlx1NTMxNlx1NjU4N1x1NjcyQ1xuICAgKi9cbiAgcHJpdmF0ZSBub3JtYWxpemUodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGV4dFxuICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgIC50cmltKClcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csICcgJykgICAgLy8gXHU1NDA4XHU1RTc2XHU1OTFBXHU0RTJBXHU3QTdBXHU2ODNDXHU0RTNBXHU0RTAwXHU0RTJBXG4gICAgICAucmVwbGFjZSgvXFxuKy9nLCAnICcpICAgIC8vIFx1NjM2Mlx1ODg0Q1x1NjZGRlx1NjM2Mlx1NEUzQVx1N0E3QVx1NjgzQ1xuICAgICAgLnJlcGxhY2UoL1tcdUZGMENcdTMwMDJcdUZGMDFcdUZGMUZcdTMwMDFcdUZGMUJcdUZGMUFcIlwiJydcdUZGMDhcdUZGMDlcdTMwMEFcdTMwMEJcdTMwMTBcdTMwMTFcXC4sIT87OlwiJygpXFxbXFxde31dL2csICcnKTsgIC8vIFx1NzlGQlx1OTY2NFx1NjgwN1x1NzBCOVx1N0IyNlx1NTNGN1xuICB9XG5cbiAgLyoqXG4gICAqIFx1OEJBMVx1N0I5N1x1NzZGOFx1NEYzQ1x1NUVBNlx1RkYwOExldmVuc2h0ZWluIFx1OERERFx1NzlCQlx1RkYwOVxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVTaW1pbGFyaXR5KHN0cjE6IHN0cmluZywgc3RyMjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBpZiAoc3RyMSA9PT0gc3RyMikgcmV0dXJuIDE7XG4gICAgaWYgKHN0cjEubGVuZ3RoID09PSAwIHx8IHN0cjIubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IG1hdHJpeDogbnVtYmVyW11bXSA9IFtdO1xuXG4gICAgLy8gXHU1MjFEXHU1OUNCXHU1MzE2XHU3N0U5XHU5NjM1XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gc3RyMi5sZW5ndGg7IGkrKykge1xuICAgICAgbWF0cml4W2ldID0gW2ldO1xuICAgIH1cbiAgICBmb3IgKGxldCBqID0gMDsgaiA8PSBzdHIxLmxlbmd0aDsgaisrKSB7XG4gICAgICBtYXRyaXhbMF1bal0gPSBqO1xuICAgIH1cblxuICAgIC8vIFx1NTg2Qlx1NTE0NVx1NzdFOVx1OTYzNVxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHN0cjIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSAxOyBqIDw9IHN0cjEubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHN0cjIuY2hhckF0KGkgLSAxKSA9PT0gc3RyMS5jaGFyQXQoaiAtIDEpKSB7XG4gICAgICAgICAgbWF0cml4W2ldW2pdID0gbWF0cml4W2kgLSAxXVtqIC0gMV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWF0cml4W2ldW2pdID0gTWF0aC5taW4oXG4gICAgICAgICAgICBtYXRyaXhbaSAtIDFdW2ogLSAxXSArIDEsIC8vIFx1NjZGRlx1NjM2MlxuICAgICAgICAgICAgbWF0cml4W2ldW2ogLSAxXSArIDEsICAgICAvLyBcdTYzRDJcdTUxNjVcbiAgICAgICAgICAgIG1hdHJpeFtpIC0gMV1bal0gKyAxICAgICAgLy8gXHU1MjIwXHU5NjY0XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGRpc3RhbmNlID0gbWF0cml4W3N0cjIubGVuZ3RoXVtzdHIxLmxlbmd0aF07XG4gICAgY29uc3QgbWF4TGVuZ3RoID0gTWF0aC5tYXgoc3RyMS5sZW5ndGgsIHN0cjIubGVuZ3RoKTtcbiAgICBcbiAgICByZXR1cm4gMSAtIGRpc3RhbmNlIC8gbWF4TGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjgzOVx1NjM2RVx1NzZGOFx1NEYzQ1x1NUVBNlx1NUVGQVx1OEJBRVx1OTZCRVx1NUVBNlxuICAgKi9cbiAgc3VnZ2VzdEVhc2Uoc2ltaWxhcml0eTogbnVtYmVyKTogUmV2aWV3RWFzZSB7XG4gICAgaWYgKHNpbWlsYXJpdHkgPj0gMC45KSByZXR1cm4gJ2Vhc3knO1xuICAgIGlmIChzaW1pbGFyaXR5ID49IDAuOCkgcmV0dXJuICdnb29kJztcbiAgICBpZiAoc2ltaWxhcml0eSA+PSAwLjUpIHJldHVybiAnaGFyZCc7XG4gICAgcmV0dXJuICdhZ2Fpbic7XG4gIH1cbn0iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IEFuYWx5dGljc0VuZ2luZSB9IGZyb20gJy4uL2NvcmUvQW5hbHl0aWNzRW5naW5lJztcblxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9TVEFUUyA9ICdsZWFybmluZy1zeXN0ZW0tc3RhdHMnO1xuXG5leHBvcnQgY2xhc3MgU3RhdHNWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luO1xuICBwcml2YXRlIGFuYWx5dGljczogQW5hbHl0aWNzRW5naW5lO1xuICBwcml2YXRlIGN1cnJlbnRUYWI6ICdvdmVydmlldycgfCAndHJlbmRzJyB8ICdkZWNrcycgfCAnZGlmZmljdWx0JyA9ICdvdmVydmlldyc7XG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbikge1xuICAgIHN1cGVyKGxlYWYpO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMuYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljc0VuZ2luZShwbHVnaW4pO1xuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gVklFV19UWVBFX1NUQVRTO1xuICB9XG5cbiAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ0xlYXJuaW5nIFN0YXRpc3RpY3MnO1xuICB9XG5cbiAgZ2V0SWNvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiAnYmFyLWNoYXJ0JztcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICB0aGlzLnJlbmRlcigpO1xuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBhc3luYyBvbkNsb3NlKCkge31cblxuICBwcml2YXRlIHJlbmRlcigpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdO1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIGNvbnRhaW5lci5hZGRDbGFzcygnc3RhdHMtY29udGFpbmVyJyk7XG5cbiAgICAvLyBcdTY4MDdcdTk4OThcdTY4MEZcbiAgICBjb25zdCBoZWFkZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc3RhdHMtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXIuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0NBIExlYXJuaW5nIFN0YXRpc3RpY3MnIH0pO1xuXG4gICAgLy8gXHU1MjM3XHU2NUIwXHU2MzA5XHU5NEFFXG4gICAgY29uc3QgcmVmcmVzaEJ0biA9IGhlYWRlci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1x1MjdGMycsXG4gICAgICBjbHM6ICdyZWZyZXNoLWJ0bidcbiAgICB9KTtcbiAgICByZWZyZXNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5yZW5kZXIoKSk7XG5cbiAgICAvLyBcdTY4MDdcdTdCN0VcdTk4NzVcbiAgICB0aGlzLnJlbmRlclRhYnMoY29udGFpbmVyKTtcblxuICAgIC8vIFx1NTE4NVx1NUJCOVx1NTMzQVx1NTdERlxuICAgIGNvbnN0IGNvbnRlbnQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc3RhdHMtY29udGVudCcgfSk7XG5cbiAgICBzd2l0Y2ggKHRoaXMuY3VycmVudFRhYikge1xuICAgICAgY2FzZSAnb3ZlcnZpZXcnOlxuICAgICAgICB0aGlzLnJlbmRlck92ZXJ2aWV3KGNvbnRlbnQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RyZW5kcyc6XG4gICAgICAgIHRoaXMucmVuZGVyVHJlbmRzKGNvbnRlbnQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2RlY2tzJzpcbiAgICAgICAgdGhpcy5yZW5kZXJEZWNrcyhjb250ZW50KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkaWZmaWN1bHQnOlxuICAgICAgICB0aGlzLnJlbmRlckRpZmZpY3VsdChjb250ZW50KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJUYWJzKGNvbnRhaW5lcjogRWxlbWVudCkge1xuICAgIGNvbnN0IHRhYnMgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc3RhdHMtdGFicycgfSk7XG5cbiAgICBjb25zdCB0YWJDb25maWdzID0gW1xuICAgICAgeyBpZDogJ292ZXJ2aWV3JywgbGFiZWw6ICdcdUQ4M0RcdURDQ0EgT3ZlcnZpZXcnIH0sXG4gICAgICB7IGlkOiAndHJlbmRzJywgbGFiZWw6ICdcdUQ4M0RcdURDQzggVHJlbmRzJyB9LFxuICAgICAgeyBpZDogJ2RlY2tzJywgbGFiZWw6ICdcdUQ4M0RcdURDREEgRGVja3MnIH0sXG4gICAgICB7IGlkOiAnZGlmZmljdWx0JywgbGFiZWw6ICdcdTI2QTBcdUZFMEYgRGlmZmljdWx0JyB9XG4gICAgXTtcblxuICAgIHRhYkNvbmZpZ3MuZm9yRWFjaChjb25maWcgPT4ge1xuICAgICAgY29uc3QgdGFiID0gdGFicy5jcmVhdGVEaXYoe1xuICAgICAgICBjbHM6IGB0YWIgJHt0aGlzLmN1cnJlbnRUYWIgPT09IGNvbmZpZy5pZCA/ICdhY3RpdmUnIDogJyd9YFxuICAgICAgfSk7XG4gICAgICB0YWIudGV4dENvbnRlbnQgPSBjb25maWcubGFiZWw7XG4gICAgICB0YWIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY3VycmVudFRhYiA9IGNvbmZpZy5pZCBhcyBhbnk7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyT3ZlcnZpZXcoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHN0YXRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRTdGF0cygpO1xuICAgIGNvbnN0IHsgdGhpc1dlZWssIGxhc3RXZWVrIH0gPSB0aGlzLmFuYWx5dGljcy5nZXRXZWVrbHlTdGF0cygpO1xuICAgIGNvbnN0IGRhaWx5U3RhdHMgPSB0aGlzLmFuYWx5dGljcy5nZXREYWlseVN0YXRzKDcpO1xuXG4gICAgLy8gXHU1MTczXHU5NTJFXHU2MzA3XHU2ODA3XHU1MzYxXHU3MjQ3XG4gICAgY29uc3QgbWV0cmljc0dyaWQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbWV0cmljcy1ncmlkJyB9KTtcblxuICAgIHRoaXMuY3JlYXRlTWV0cmljQ2FyZChtZXRyaWNzR3JpZCwge1xuICAgICAgdGl0bGU6ICdUb3RhbCBDYXJkcycsXG4gICAgICB2YWx1ZTogc3RhdHMudG90YWwudG9TdHJpbmcoKSxcbiAgICAgIGljb246ICdcdUQ4M0NcdURDQ0YnXG4gICAgfSk7XG5cbiAgICB0aGlzLmNyZWF0ZU1ldHJpY0NhcmQobWV0cmljc0dyaWQsIHtcbiAgICAgIHRpdGxlOiAnRHVlIFRvZGF5JyxcbiAgICAgIHZhbHVlOiBzdGF0cy5kdWUudG9TdHJpbmcoKSxcbiAgICAgIGljb246ICdcdUQ4M0RcdURDQzUnXG4gICAgfSk7XG5cbiAgICB0aGlzLmNyZWF0ZU1ldHJpY0NhcmQobWV0cmljc0dyaWQsIHtcbiAgICAgIHRpdGxlOiAnUmV2aWV3ZWQgVG9kYXknLFxuICAgICAgdmFsdWU6IHN0YXRzLnJldmlld2VkVG9kYXkudG9TdHJpbmcoKSxcbiAgICAgIGljb246ICdcdTI3MDUnXG4gICAgfSk7XG5cbiAgICBjb25zdCBzdHJlYWsgPSB0aGlzLmFuYWx5dGljcy5jYWxjdWxhdGVTdHJlYWsoKTtcbiAgICB0aGlzLmNyZWF0ZU1ldHJpY0NhcmQobWV0cmljc0dyaWQsIHtcbiAgICAgIHRpdGxlOiAnQ3VycmVudCBTdHJlYWsnLFxuICAgICAgdmFsdWU6IGAke3N0cmVha30gZGF5c2AsXG4gICAgICBpY29uOiAnXHVEODNEXHVERDI1J1xuICAgIH0pO1xuXG4gICAgLy8gXHU2NzJDXHU1NDY4IHZzIFx1NEUwQVx1NTQ2OFxuICAgIGNvbnN0IHdlZWtDb21wYXJpc29uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3dlZWstY29tcGFyaXNvbicgfSk7XG4gICAgd2Vla0NvbXBhcmlzb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVGhpcyBXZWVrIHZzIExhc3QgV2VlaycgfSk7XG5cbiAgICBjb25zdCBjb21wYXJpc29uR3JpZCA9IHdlZWtDb21wYXJpc29uLmNyZWF0ZURpdih7IGNsczogJ2NvbXBhcmlzb24tZ3JpZCcgfSk7XG5cbiAgICBjb25zdCByZXZpZXdDaGFuZ2UgPSB0aGlzV2Vlay50b3RhbFJldmlld3MgLSBsYXN0V2Vlay50b3RhbFJldmlld3M7XG4gICAgY29uc3QgcmV2aWV3Q2hhbmdlUGVyY2VudCA9IGxhc3RXZWVrLnRvdGFsUmV2aWV3cyA+IDBcbiAgICAgID8gKChyZXZpZXdDaGFuZ2UgLyBsYXN0V2Vlay50b3RhbFJldmlld3MpICogMTAwKS50b0ZpeGVkKDEpXG4gICAgICA6ICcwJztcblxuICAgIHRoaXMuY3JlYXRlQ29tcGFyaXNvbkl0ZW0oY29tcGFyaXNvbkdyaWQsIHtcbiAgICAgIGxhYmVsOiAnUmV2aWV3cycsXG4gICAgICB0aGlzV2VlazogdGhpc1dlZWsudG90YWxSZXZpZXdzLFxuICAgICAgbGFzdFdlZWs6IGxhc3RXZWVrLnRvdGFsUmV2aWV3cyxcbiAgICAgIGNoYW5nZTogcmV2aWV3Q2hhbmdlLFxuICAgICAgY2hhbmdlUGVyY2VudDogcmV2aWV3Q2hhbmdlUGVyY2VudFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmF0ZUNoYW5nZSA9ICh0aGlzV2Vlay5hdmVyYWdlQ29ycmVjdFJhdGUgLSBsYXN0V2Vlay5hdmVyYWdlQ29ycmVjdFJhdGUpICogMTAwO1xuICAgIHRoaXMuY3JlYXRlQ29tcGFyaXNvbkl0ZW0oY29tcGFyaXNvbkdyaWQsIHtcbiAgICAgIGxhYmVsOiAnQ29ycmVjdCBSYXRlJyxcbiAgICAgIHRoaXNXZWVrOiBgJHsodGhpc1dlZWsuYXZlcmFnZUNvcnJlY3RSYXRlICogMTAwKS50b0ZpeGVkKDEpfSVgLFxuICAgICAgbGFzdFdlZWs6IGAkeyhsYXN0V2Vlay5hdmVyYWdlQ29ycmVjdFJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JWAsXG4gICAgICBjaGFuZ2U6IHJhdGVDaGFuZ2UsXG4gICAgICBjaGFuZ2VQZXJjZW50OiByYXRlQ2hhbmdlLnRvRml4ZWQoMSlcbiAgICB9KTtcblxuICAgIC8vIFx1NjcwMFx1OEZEMTdcdTU5MjlcdTZEM0JcdTUyQThcbiAgICBjb25zdCByZWNlbnRBY3Rpdml0eSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdyZWNlbnQtYWN0aXZpdHknIH0pO1xuICAgIHJlY2VudEFjdGl2aXR5LmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0xhc3QgNyBEYXlzIEFjdGl2aXR5JyB9KTtcblxuICAgIGNvbnN0IGFjdGl2aXR5Q2hhcnQgPSByZWNlbnRBY3Rpdml0eS5jcmVhdGVEaXYoeyBjbHM6ICdhY3Rpdml0eS1jaGFydCcgfSk7XG4gICAgdGhpcy5yZW5kZXJTaW1wbGVCYXJDaGFydChhY3Rpdml0eUNoYXJ0LCBkYWlseVN0YXRzKTtcblxuICAgIC8vIFx1NzUxRlx1NjIxMFx1NjJBNVx1NTQ0QVx1NjMwOVx1OTRBRVxuICAgIGNvbnN0IHJlcG9ydFNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncmVwb3J0LXNlY3Rpb24nIH0pO1xuICAgIGNvbnN0IHJlcG9ydEJ0biA9IHJlcG9ydFNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdcdUQ4M0RcdURDQzQgR2VuZXJhdGUgRnVsbCBSZXBvcnQnLFxuICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICB9KTtcbiAgICAvLyByZXBvcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmdlbmVyYXRlQW5kU2hvd1JlcG9ydCgpKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyVHJlbmRzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUGVyZm9ybWFuY2UgVHJlbmRzJyB9KTtcblxuICAgIGNvbnN0IGRhaWx5U3RhdHMgPSB0aGlzLmFuYWx5dGljcy5nZXREYWlseVN0YXRzKDMwKTtcblxuICAgIC8vIFx1NkI2M1x1Nzg2RVx1NzM4N1x1OEQ4Qlx1NTJCRlxuICAgIGNvbnN0IGNvcnJlY3RSYXRlU2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjaGFydC1zZWN0aW9uJyB9KTtcbiAgICBjb3JyZWN0UmF0ZVNlY3Rpb24uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnQ29ycmVjdCBSYXRlIChMYXN0IDMwIERheXMpJyB9KTtcbiAgICBjb25zdCBjb3JyZWN0UmF0ZUNoYXJ0ID0gY29ycmVjdFJhdGVTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ2xpbmUtY2hhcnQnIH0pO1xuICAgIHRoaXMucmVuZGVyTGluZUNoYXJ0KGNvcnJlY3RSYXRlQ2hhcnQsIGRhaWx5U3RhdHMsICdjb3JyZWN0UmF0ZScpO1xuXG4gICAgLy8gXHU2QkNGXHU2NUU1XHU1OTBEXHU0RTYwXHU5MUNGXG4gICAgY29uc3QgcmV2aWV3c1NlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2hhcnQtc2VjdGlvbicgfSk7XG4gICAgcmV2aWV3c1NlY3Rpb24uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnRGFpbHkgUmV2aWV3cycgfSk7XG4gICAgY29uc3QgcmV2aWV3c0NoYXJ0ID0gcmV2aWV3c1NlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAnYmFyLWNoYXJ0JyB9KTtcbiAgICB0aGlzLnJlbmRlckJhckNoYXJ0KHJldmlld3NDaGFydCwgZGFpbHlTdGF0cyk7XG5cbiAgICAvLyBcdTcwRURcdTUyOUJcdTU2RkVcbiAgICBjb25zdCBoZWF0bWFwU2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjaGFydC1zZWN0aW9uJyB9KTtcbiAgICBoZWF0bWFwU2VjdGlvbi5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdTdHVkeSBBY3Rpdml0eSBDYWxlbmRhcicgfSk7XG4gICAgY29uc3QgaGVhdG1hcCA9IGhlYXRtYXBTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ2hlYXRtYXAnIH0pO1xuICAgIHRoaXMucmVuZGVySGVhdG1hcChoZWF0bWFwKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyRGVja3MoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdEZWNrIFN0YXRpc3RpY3MnIH0pO1xuXG4gICAgY29uc3QgZGVja1N0YXRzID0gdGhpcy5hbmFseXRpY3MuZ2V0RGVja1N0YXRzKCk7XG5cbiAgICBpZiAoZGVja1N0YXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29udGFpbmVyLmNyZWF0ZURpdih7IFxuICAgICAgICB0ZXh0OiAnTm8gZGVja3MgeWV0LiBDcmVhdGUgc29tZSBmbGFzaGNhcmRzIHRvIHNlZSBkZWNrIHN0YXRpc3RpY3MhJyxcbiAgICAgICAgY2xzOiAnZW1wdHktbWVzc2FnZSdcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGRlY2tzR3JpZCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdkZWNrcy1ncmlkJyB9KTtcblxuICAgIGRlY2tTdGF0cy5mb3JFYWNoKGRlY2sgPT4ge1xuICAgICAgY29uc3QgZGVja0NhcmQgPSBkZWNrc0dyaWQuY3JlYXRlRGl2KHsgY2xzOiAnZGVjay1jYXJkJyB9KTtcblxuICAgICAgY29uc3QgaGVhZGVyID0gZGVja0NhcmQuY3JlYXRlRGl2KHsgY2xzOiAnZGVjay1jYXJkLWhlYWRlcicgfSk7XG4gICAgICBoZWFkZXIuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiBkZWNrLmRlY2tOYW1lIH0pO1xuICAgICAgXG4gICAgICBoZWFkZXIuY3JlYXRlU3Bhbih7XG4gICAgICAgIHRleHQ6IGAke2RlY2sudG90YWxDYXJkc30gY2FyZHNgLFxuICAgICAgICBjbHM6ICdkZWNrLWJhZGdlJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHN0YXRzID0gZGVja0NhcmQuY3JlYXRlRGl2KHsgY2xzOiAnZGVjay1jYXJkLXN0YXRzJyB9KTtcblxuICAgICAgdGhpcy5jcmVhdGVTdGF0Um93KHN0YXRzLCAnRHVlJywgZGVjay5kdWVDYXJkcy50b1N0cmluZygpLCAnXHVEODNEXHVEQ0M1Jyk7XG4gICAgICB0aGlzLmNyZWF0ZVN0YXRSb3coc3RhdHMsICdOZXcnLCBkZWNrLm5ld0NhcmRzLnRvU3RyaW5nKCksICdcdUQ4M0NcdUREOTUnKTtcbiAgICAgIHRoaXMuY3JlYXRlU3RhdFJvdyhcbiAgICAgICAgc3RhdHMsIFxuICAgICAgICAnQ29ycmVjdCBSYXRlJywgXG4gICAgICAgIGAkeyhkZWNrLmNvcnJlY3RSYXRlICogMTAwKS50b0ZpeGVkKDEpfSVgLFxuICAgICAgICAnXHUyNzA1J1xuICAgICAgKTtcbiAgICAgIHRoaXMuY3JlYXRlU3RhdFJvdyhcbiAgICAgICAgc3RhdHMsXG4gICAgICAgICdBdmcgSW50ZXJ2YWwnLFxuICAgICAgICBgJHtkZWNrLmF2ZXJhZ2VJbnRlcnZhbC50b0ZpeGVkKDEpfSBkYXlzYCxcbiAgICAgICAgJ1x1RDgzRFx1RENDQSdcbiAgICAgICk7XG5cbiAgICAgIC8vIFx1OEZEQlx1NUVBNlx1Njc2MVxuICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBkZWNrQ2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdkZWNrLXByb2dyZXNzJyB9KTtcbiAgICAgIGNvbnN0IG1hc3RlcmVkQ291bnQgPSBkZWNrLnRvdGFsQ2FyZHMgLSBkZWNrLmR1ZUNhcmRzIC0gZGVjay5uZXdDYXJkcztcbiAgICAgIGNvbnN0IG1hc3RlcmVkUGVyY2VudCA9IChtYXN0ZXJlZENvdW50IC8gZGVjay50b3RhbENhcmRzKSAqIDEwMDtcbiAgICAgIFxuICAgICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSBwcm9ncmVzcy5jcmVhdGVEaXYoeyBjbHM6ICdwcm9ncmVzcy1iYXItY29udGFpbmVyJyB9KTtcbiAgICAgIGNvbnN0IGJhciA9IHByb2dyZXNzQmFyLmNyZWF0ZURpdih7IGNsczogJ3Byb2dyZXNzLWJhci1maWxsJyB9KTtcbiAgICAgIGJhci5zdHlsZS53aWR0aCA9IGAke21hc3RlcmVkUGVyY2VudH0lYDtcbiAgICAgIFxuICAgICAgcHJvZ3Jlc3MuY3JlYXRlRGl2KHtcbiAgICAgICAgdGV4dDogYCR7bWFzdGVyZWRQZXJjZW50LnRvRml4ZWQoMCl9JSBtYXN0ZXJlZGAsXG4gICAgICAgIGNsczogJ3Byb2dyZXNzLWxhYmVsJ1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckRpZmZpY3VsdChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0NhcmRzIE5lZWRpbmcgQXR0ZW50aW9uJyB9KTtcblxuICAgIGNvbnN0IGRpZmZpY3VsdENhcmRzID0gdGhpcy5hbmFseXRpY3MuZ2V0RGlmZmljdWx0Q2FyZHMoMTApO1xuXG4gICAgaWYgKGRpZmZpY3VsdENhcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29udGFpbmVyLmNyZWF0ZURpdih7XG4gICAgICAgIHRleHQ6ICdcdUQ4M0NcdURGODkgTm8gZGlmZmljdWx0IGNhcmRzISBHcmVhdCBqb2IhJyxcbiAgICAgICAgY2xzOiAnZW1wdHktbWVzc2FnZSdcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNhcmRzTGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdkaWZmaWN1bHQtY2FyZHMtbGlzdCcgfSk7XG5cbiAgICBkaWZmaWN1bHRDYXJkcy5mb3JFYWNoKChkYywgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGNhcmRJdGVtID0gY2FyZHNMaXN0LmNyZWF0ZURpdih7IGNsczogJ2RpZmZpY3VsdC1jYXJkLWl0ZW0nIH0pO1xuXG4gICAgICBjb25zdCByYW5rID0gY2FyZEl0ZW0uY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1yYW5rJyB9KTtcbiAgICAgIHJhbmsudGV4dENvbnRlbnQgPSBgJHtpbmRleCArIDF9YDtcblxuICAgICAgY29uc3QgY29udGVudCA9IGNhcmRJdGVtLmNyZWF0ZURpdih7IGNsczogJ2NhcmQtY29udGVudCcgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHF1ZXN0aW9uID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLXF1ZXN0aW9uJyB9KTtcbiAgICAgIHF1ZXN0aW9uLnRleHRDb250ZW50ID0gZGMuY2FyZC5mcm9udC5zdWJzdHJpbmcoMCwgODApICsgXG4gICAgICAgIChkYy5jYXJkLmZyb250Lmxlbmd0aCA+IDgwID8gJy4uLicgOiAnJyk7XG5cbiAgICAgIGNvbnN0IG1ldGEgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ2NhcmQtbWV0YScgfSk7XG5cbiAgICAgIGNvbnN0IHBhdHRlcm5FbW9qaTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICAgJ2NvbmNlcHQnOiAnXHVEODNFXHVEREUwJyxcbiAgICAgICAgJ21lbW9yeSc6ICdcdUQ4M0RcdURDQUQnLFxuICAgICAgICAnY2FsY3VsYXRpb24nOiAnXHVEODNEXHVERDIyJyxcbiAgICAgICAgJ3Vua25vd24nOiAnXHUyNzUzJ1xuICAgICAgfTtcblxuICAgICAgbWV0YS5jcmVhdGVTcGFuKHtcbiAgICAgICAgdGV4dDogYCR7cGF0dGVybkVtb2ppW2RjLnBhdHRlcm5dfSAke2RjLnBhdHRlcm59YCxcbiAgICAgICAgY2xzOiAncGF0dGVybi1iYWRnZSdcbiAgICAgIH0pO1xuXG4gICAgICBtZXRhLmNyZWF0ZVNwYW4oe1xuICAgICAgICB0ZXh0OiBgJHtkYy5lcnJvckNvdW50fSBlcnJvcnNgLFxuICAgICAgICBjbHM6ICdlcnJvci1jb3VudCdcbiAgICAgIH0pO1xuXG4gICAgICBtZXRhLmNyZWF0ZVNwYW4oe1xuICAgICAgICB0ZXh0OiBgJHtkYy5hdmVyYWdlVGltZS50b0ZpeGVkKDEpfXMgYXZnYCxcbiAgICAgICAgY2xzOiAnYXZnLXRpbWUnXG4gICAgICB9KTtcblxuICAgICAgLy8gXHU5NkJFXHU1RUE2XHU2NzYxXG4gICAgICBjb25zdCBkaWZmaWN1bHR5QmFyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdkaWZmaWN1bHR5LWJhci1jb250YWluZXInIH0pO1xuICAgICAgY29uc3QgZGlmZkJhciA9IGRpZmZpY3VsdHlCYXIuY3JlYXRlRGl2KHsgY2xzOiAnZGlmZmljdWx0eS1iYXInIH0pO1xuICAgICAgZGlmZkJhci5zdHlsZS53aWR0aCA9IGAke2RjLmNhcmQuc3RhdHMuZGlmZmljdWx0eSAqIDEwMH0lYDtcblxuICAgICAgLy8gXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFXG4gICAgICBjb25zdCBhY3Rpb25zID0gY2FyZEl0ZW0uY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1hY3Rpb25zJyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QganVtcEJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogJ1x1MjE5NycsXG4gICAgICAgIGNsczogJ2FjdGlvbi1idG4tc21hbGwnXG4gICAgICB9KTtcbiAgICAgIGp1bXBCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmp1bXBUb0NhcmQoZGMuY2FyZCkpO1xuXG4gICAgICBjb25zdCByZXZpZXdCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIHRleHQ6ICdcdUQ4M0RcdUREMDQnLFxuICAgICAgICBjbHM6ICdhY3Rpb24tYnRuLXNtYWxsJ1xuICAgICAgfSk7XG4gICAgICByZXZpZXdCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFjdGl2YXRlUmV2aWV3KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZGVsZXRlQnRuID0gYWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICB0ZXh0OiAnXHVEODNEXHVEREQxXHVGRTBGJyxcbiAgICAgICAgY2xzOiAnYWN0aW9uLWJ0bi1zbWFsbCBkZWxldGUtYnRuJ1xuICAgICAgfSk7XG4gICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmIChjb25maXJtKCdcdTc4NkVcdTVCOUFcdTg5ODFcdTUyMjBcdTk2NjRcdThGRDlcdTVGMjBcdTk1RUFcdTUzNjFcdTU0MTdcdUZGMUYnKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlRmxhc2hjYXJkKGRjLmNhcmQuaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlTWV0cmljQ2FyZChcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIGNvbmZpZzogeyB0aXRsZTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nOyBpY29uOiBzdHJpbmcgfVxuICApIHtcbiAgICBjb25zdCBjYXJkID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ21ldHJpYy1jYXJkJyB9KTtcbiAgICBcbiAgICBjYXJkLmNyZWF0ZURpdih7IHRleHQ6IGNvbmZpZy5pY29uLCBjbHM6ICdtZXRyaWMtaWNvbicgfSk7XG4gICAgXG4gICAgY29uc3QgY29udGVudCA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnbWV0cmljLWNvbnRlbnQnIH0pO1xuICAgIGNvbnRlbnQuY3JlYXRlRGl2KHsgdGV4dDogY29uZmlnLnRpdGxlLCBjbHM6ICdtZXRyaWMtdGl0bGUnIH0pO1xuICAgIGNvbnRlbnQuY3JlYXRlRGl2KHsgdGV4dDogY29uZmlnLnZhbHVlLCBjbHM6ICdtZXRyaWMtdmFsdWUnIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVDb21wYXJpc29uSXRlbShcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIGNvbmZpZzoge1xuICAgICAgbGFiZWw6IHN0cmluZztcbiAgICAgIHRoaXNXZWVrOiBudW1iZXIgfCBzdHJpbmc7XG4gICAgICBsYXN0V2VlazogbnVtYmVyIHwgc3RyaW5nO1xuICAgICAgY2hhbmdlOiBudW1iZXI7XG4gICAgICBjaGFuZ2VQZXJjZW50OiBzdHJpbmc7XG4gICAgfVxuICApIHtcbiAgICBjb25zdCBpdGVtID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NvbXBhcmlzb24taXRlbScgfSk7XG4gICAgXG4gICAgaXRlbS5jcmVhdGVEaXYoeyB0ZXh0OiBjb25maWcubGFiZWwsIGNsczogJ2NvbXBhcmlzb24tbGFiZWwnIH0pO1xuICAgIFxuICAgIGNvbnN0IHZhbHVlcyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiAnY29tcGFyaXNvbi12YWx1ZXMnIH0pO1xuICAgIHZhbHVlcy5jcmVhdGVTcGFuKHsgXG4gICAgICB0ZXh0OiBgJHtjb25maWcudGhpc1dlZWt9YCxcbiAgICAgIGNsczogJ3RoaXMtd2VlaydcbiAgICB9KTtcbiAgICB2YWx1ZXMuY3JlYXRlU3Bhbih7IHRleHQ6ICcgdnMgJywgY2xzOiAndnMnIH0pO1xuICAgIHZhbHVlcy5jcmVhdGVTcGFuKHtcbiAgICAgIHRleHQ6IGAke2NvbmZpZy5sYXN0V2Vla31gLFxuICAgICAgY2xzOiAnbGFzdC13ZWVrJ1xuICAgIH0pO1xuXG4gICAgY29uc3QgY2hhbmdlQ2xhc3MgPSBjb25maWcuY2hhbmdlID4gMCA/ICdwb3NpdGl2ZScgOiBjb25maWcuY2hhbmdlIDwgMCA/ICduZWdhdGl2ZScgOiAnbmV1dHJhbCc7XG4gICAgY29uc3QgY2hhbmdlSWNvbiA9IGNvbmZpZy5jaGFuZ2UgPiAwID8gJ1x1MjE5NycgOiBjb25maWcuY2hhbmdlIDwgMCA/ICdcdTIxOTgnIDogJ1x1MjE5Mic7XG4gICAgXG4gICAgaXRlbS5jcmVhdGVEaXYoe1xuICAgICAgdGV4dDogYCR7Y2hhbmdlSWNvbn0gJHtjb25maWcuY2hhbmdlUGVyY2VudH0lYCxcbiAgICAgIGNsczogYGNoYW5nZSAke2NoYW5nZUNsYXNzfWBcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlU3RhdFJvdyhcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIGxhYmVsOiBzdHJpbmcsXG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBpY29uOiBzdHJpbmdcbiAgKSB7XG4gICAgY29uc3Qgcm93ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3N0YXQtcm93JyB9KTtcbiAgICByb3cuY3JlYXRlU3Bhbih7IHRleHQ6IGljb24sIGNsczogJ3N0YXQtaWNvbicgfSk7XG4gICAgcm93LmNyZWF0ZVNwYW4oeyB0ZXh0OiBsYWJlbCwgY2xzOiAnc3RhdC1sYWJlbCcgfSk7XG4gICAgcm93LmNyZWF0ZVNwYW4oeyB0ZXh0OiB2YWx1ZSwgY2xzOiAnc3RhdC12YWx1ZScgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclNpbXBsZUJhckNoYXJ0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGRhdGE6IGFueVtdKSB7XG4gICAgY29uc3QgbWF4VmFsdWUgPSBNYXRoLm1heCguLi5kYXRhLm1hcChkID0+IGQucmV2aWV3ZWQpKTtcblxuICAgIGRhdGEuZm9yRWFjaChzdGF0ID0+IHtcbiAgICAgIGNvbnN0IGJhciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzaW1wbGUtYmFyJyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHN0YXQuZGF0ZSk7XG4gICAgICBjb25zdCBkYXlOYW1lID0gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLVVTJywgeyB3ZWVrZGF5OiAnc2hvcnQnIH0pO1xuICAgICAgXG4gICAgICBiYXIuY3JlYXRlRGl2KHsgdGV4dDogZGF5TmFtZSwgY2xzOiAnYmFyLWxhYmVsJyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgYmFyQ29udGFpbmVyID0gYmFyLmNyZWF0ZURpdih7IGNsczogJ2Jhci1jb250YWluZXInIH0pO1xuICAgICAgY29uc3QgYmFyRmlsbCA9IGJhckNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdiYXItZmlsbCcgfSk7XG4gICAgICBjb25zdCBoZWlnaHQgPSBtYXhWYWx1ZSA+IDAgPyAoc3RhdC5yZXZpZXdlZCAvIG1heFZhbHVlKSAqIDEwMCA6IDA7XG4gICAgICBiYXJGaWxsLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH0lYDtcbiAgICAgIFxuICAgICAgYmFyLmNyZWF0ZURpdih7IHRleHQ6IHN0YXQucmV2aWV3ZWQudG9TdHJpbmcoKSwgY2xzOiAnYmFyLXZhbHVlJyB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyQmFyQ2hhcnQoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZGF0YTogYW55W10pIHtcbiAgICBjb25zdCBjaGFydCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjaGFydC1jYW52YXMnIH0pO1xuICAgIGNvbnN0IG1heFZhbHVlID0gTWF0aC5tYXgoLi4uZGF0YS5tYXAoZCA9PiBkLnJldmlld2VkKSk7XG5cbiAgICBkYXRhLmZvckVhY2goc3RhdCA9PiB7XG4gICAgICBjb25zdCBiYXJHcm91cCA9IGNoYXJ0LmNyZWF0ZURpdih7IGNsczogJ2Jhci1ncm91cCcgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGJhckNvbnRhaW5lciA9IGJhckdyb3VwLmNyZWF0ZURpdih7IGNsczogJ2JhcicgfSk7XG4gICAgICBjb25zdCBoZWlnaHQgPSBtYXhWYWx1ZSA+IDAgPyAoc3RhdC5yZXZpZXdlZCAvIG1heFZhbHVlKSAqIDEwMCA6IDA7XG4gICAgICBiYXJDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fSVgO1xuICAgICAgYmFyQ29udGFpbmVyLnRpdGxlID0gYCR7c3RhdC5yZXZpZXdlZH0gcmV2aWV3c2A7XG4gICAgICBcbiAgICAgIGNvbnN0IGJhckxhYmVsID0gYmFyR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiAnYmFyLWxhYmVsJyB9KTtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShzdGF0LmRhdGUpO1xuICAgICAgYmFyTGFiZWwudGV4dENvbnRlbnQgPSBkYXRlLmdldERhdGUoKS50b1N0cmluZygpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJMaW5lQ2hhcnQoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZGF0YTogYW55W10sIGtleTogc3RyaW5nKSB7XG4gICAgY29uc3QgY2hhcnQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbGluZS1jaGFydC1jYW52YXMnIH0pO1xuICAgIFxuICAgIGNvbnN0IHBvaW50cyA9IGRhdGEubWFwKChzdGF0LCBpKSA9PiB7XG4gICAgICBjb25zdCB4ID0gKGkgLyAoZGF0YS5sZW5ndGggLSAxKSkgKiAxMDA7XG4gICAgICBjb25zdCB5ID0gMTAwIC0gKHN0YXRba2V5XSAqIDEwMCk7XG4gICAgICByZXR1cm4geyB4LCB5LCB2YWx1ZTogc3RhdFtrZXldIH07XG4gICAgfSk7XG5cbiAgICAvLyBcdTUyMUJcdTVFRkFTVkdcbiAgICBjb25zdCBzdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3N2ZycpO1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCAnMCAwIDEwMCAxMDAnKTtcbiAgICBzdmcuc2V0QXR0cmlidXRlKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ25vbmUnKTtcbiAgICBzdmcuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgc3ZnLnN0eWxlLmhlaWdodCA9ICcyMDBweCc7XG5cbiAgICAvLyBcdTUyMUJcdTVFRkFcdTYyOThcdTdFQkZcdThERUZcdTVGODRcbiAgICBjb25zdCBwYXRoRGF0YSA9IHBvaW50cy5tYXAoKHAsIGkpID0+IFxuICAgICAgYCR7aSA9PT0gMCA/ICdNJyA6ICdMJ30gJHtwLnh9ICR7cC55fWBcbiAgICApLmpvaW4oJyAnKTtcblxuICAgIGNvbnN0IHBhdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdGgnKTtcbiAgICBwYXRoLnNldEF0dHJpYnV0ZSgnZCcsIHBhdGhEYXRhKTtcbiAgICBwYXRoLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdub25lJyk7XG4gICAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICd2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpJyk7XG4gICAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcyJyk7XG5cbiAgICBzdmcuYXBwZW5kQ2hpbGQocGF0aCk7XG4gICAgY2hhcnQuYXBwZW5kQ2hpbGQoc3ZnKTtcblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NTAzQ1x1NjgwN1x1N0I3RVxuICAgIGNvbnN0IGxhYmVsc0NvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjaGFydC1sYWJlbHMnIH0pO1xuICAgIGRhdGEuZm9yRWFjaCgoc3RhdCwgaSkgPT4ge1xuICAgICAgaWYgKGkgJSBNYXRoLmNlaWwoZGF0YS5sZW5ndGggLyA3KSA9PT0gMCkge1xuICAgICAgICBjb25zdCBjaGFydExhYmVsID0gbGFiZWxzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NoYXJ0LWxhYmVsJyB9KTtcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHN0YXQuZGF0ZSk7XG4gICAgICAgIGNoYXJ0TGFiZWwudGV4dENvbnRlbnQgPSBgJHtkYXRlLmdldE1vbnRoKCkgKyAxfS8ke2RhdGUuZ2V0RGF0ZSgpfWA7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckhlYXRtYXAoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IGhlYXRtYXBEYXRhID0gdGhpcy5hbmFseXRpY3MuZ2V0SGVhdG1hcERhdGEoOTApO1xuICAgIFxuICAgIC8vIFx1NjMwOVx1NTQ2OFx1NTIwNlx1N0VDNFxuICAgIGNvbnN0IHdlZWtzOiBhbnlbXVtdID0gW107XG4gICAgbGV0IGN1cnJlbnRXZWVrOiBhbnlbXSA9IFtdO1xuICAgIFxuICAgIGhlYXRtYXBEYXRhLmZvckVhY2goKGRheSwgaSkgPT4ge1xuICAgICAgY3VycmVudFdlZWsucHVzaChkYXkpO1xuICAgICAgaWYgKGN1cnJlbnRXZWVrLmxlbmd0aCA9PT0gNyB8fCBpID09PSBoZWF0bWFwRGF0YS5sZW5ndGggLSAxKSB7XG4gICAgICAgIHdlZWtzLnB1c2goY3VycmVudFdlZWspO1xuICAgICAgICBjdXJyZW50V2VlayA9IFtdO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgd2Vla3MuZm9yRWFjaCh3ZWVrID0+IHtcbiAgICAgIGNvbnN0IHdlZWtSb3cgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnaGVhdG1hcC13ZWVrJyB9KTtcbiAgICAgIFxuICAgICAgd2Vlay5mb3JFYWNoKGRheSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSB3ZWVrUm93LmNyZWF0ZURpdih7IGNsczogJ2hlYXRtYXAtY2VsbCcgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTVGM0FcdTVFQTZcdTdCNDlcdTdFQTcgMC00XG4gICAgICAgIGNvbnN0IGxldmVsID0gTWF0aC5jZWlsKGRheS5pbnRlbnNpdHkgKiA0KTtcbiAgICAgICAgY2VsbC5hZGRDbGFzcyhgbGV2ZWwtJHtsZXZlbH1gKTtcbiAgICAgICAgXG4gICAgICAgIGNlbGwudGl0bGUgPSBgJHtkYXkuZGF0ZX06ICR7ZGF5LmNvdW50fSByZXZpZXdzYDtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cblxuXG4gIHByaXZhdGUgYXN5bmMganVtcFRvQ2FyZChjYXJkOiBhbnkpIHtcbiAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGNhcmQuc291cmNlRmlsZSk7XG4gICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuO1xuXG4gICAgY29uc3QgY29udGVudFVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjYXJkLnNvdXJjZUNvbnRlbnRJZCk7XG4gICAgaWYgKCFjb250ZW50VW5pdCkgcmV0dXJuO1xuXG4gICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKTtcbiAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoSXRlbVZpZXcpO1xuICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgY29uc3QgZWRpdG9yID0gKHZpZXcgYXMgYW55KS5lZGl0b3I7XG4gICAgICAgIGlmIChlZGl0b3IpIHtcbiAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHsgbGluZTogY29udGVudFVuaXQuc291cmNlLnBvc2l0aW9uLmxpbmUsIGNoOiAwIH0pO1xuICAgICAgICAgIGVkaXRvci5zY3JvbGxJbnRvVmlldyh7XG4gICAgICAgICAgICBmcm9tOiB7IGxpbmU6IGNvbnRlbnRVbml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogMCB9LFxuICAgICAgICAgICAgdG86IHsgbGluZTogY29udGVudFVuaXQuc291cmNlLnBvc2l0aW9uLmxpbmUsIGNoOiAwIH1cbiAgICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIDEwMCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGRlbGV0ZUZsYXNoY2FyZChjYXJkSWQ6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmRlbGV0ZUNhcmQoY2FyZElkKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1RDgzRFx1REREMVx1RkUwRiBcdTk1RUFcdTUzNjFcdTVERjJcdTUyMjBcdTk2NjQnKTtcbiAgICAgIHRoaXMucmVuZGVyKCk7IC8vIFx1OTFDRFx1NjVCMFx1NkUzMlx1NjdEM1x1ODlDNlx1NTZGRVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBmbGFzaGNhcmQ6JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIFx1NTIyMFx1OTY2NFx1OTVFQVx1NTM2MVx1NTkzMVx1OEQyNScpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAuc3RhdHMtY29udGFpbmVyIHtcbiAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgIH1cblxuICAgICAgLnN0YXRzLWhlYWRlciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgIH1cblxuICAgICAgLnN0YXRzLWhlYWRlciBoMiB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgIH1cblxuICAgICAgLnN0YXRzLXRhYnMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgIH1cblxuICAgICAgLnRhYiB7XG4gICAgICAgIHBhZGRpbmc6IDEwcHggMjBweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgIH1cblxuICAgICAgLnRhYjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAudGFiLmFjdGl2ZSB7XG4gICAgICAgIGJvcmRlci1ib3R0b20tY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgfVxuXG4gICAgICAubWV0cmljcy1ncmlkIHtcbiAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsIG1pbm1heCgyMDBweCwgMWZyKSk7XG4gICAgICAgIGdhcDogMTVweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDtcbiAgICAgIH1cblxuICAgICAgLm1ldHJpYy1jYXJkIHtcbiAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogMTVweDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIH1cblxuICAgICAgLm1ldHJpYy1pY29uIHtcbiAgICAgICAgZm9udC1zaXplOiAzMnB4O1xuICAgICAgfVxuXG4gICAgICAubWV0cmljLWNvbnRlbnQge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgfVxuXG4gICAgICAubWV0cmljLXRpdGxlIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgICB9XG5cbiAgICAgIC5tZXRyaWMtdmFsdWUge1xuICAgICAgICBmb250LXNpemU6IDEuOGVtO1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgfVxuXG4gICAgICAud2Vlay1jb21wYXJpc29uIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDtcbiAgICAgIH1cblxuICAgICAgLmNvbXBhcmlzb24tZ3JpZCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGdhcDogMTVweDtcbiAgICAgICAgbWFyZ2luLXRvcDogMTVweDtcbiAgICAgIH1cblxuICAgICAgLmNvbXBhcmlzb24taXRlbSB7XG4gICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5jb21wYXJpc29uLWxhYmVsIHtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLmNvbXBhcmlzb24tdmFsdWVzIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC50aGlzLXdlZWsge1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICBmb250LXNpemU6IDEuMWVtO1xuICAgICAgfVxuXG4gICAgICAubGFzdC13ZWVrIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuY2hhbmdlIHtcbiAgICAgICAgcGFkZGluZzogNHB4IDEwcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC5jaGFuZ2UucG9zaXRpdmUge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLXN1Y2Nlc3MpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAuY2hhbmdlLm5lZ2F0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvcik7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLmNoYXJ0LXNlY3Rpb24ge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xuICAgICAgfVxuXG4gICAgICAucmVjZW50LWFjdGl2aXR5IC5hY3Rpdml0eS1jaGFydCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO1xuICAgICAgICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XG4gICAgICAgIGhlaWdodDogMTUwcHg7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgfVxuXG4gICAgICAuc2ltcGxlLWJhciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgfVxuXG4gICAgICAuc2ltcGxlLWJhciAuYmFyLWNvbnRhaW5lciB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMHB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgfVxuXG4gICAgICAuc2ltcGxlLWJhciAuYmFyLWZpbGwge1xuICAgICAgICB3aWR0aDogNjAlO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHggNHB4IDAgMDtcbiAgICAgICAgdHJhbnNpdGlvbjogaGVpZ2h0IDAuM3M7XG4gICAgICB9XG5cbiAgICAgIC5iYXItbGFiZWwsIC5iYXItdmFsdWUge1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuaGVhdG1hcCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGdhcDogNHB4O1xuICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgIH1cblxuICAgICAgLmhlYXRtYXAtd2VlayB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogNHB4O1xuICAgICAgfVxuXG4gICAgICAuaGVhdG1hcC1jZWxsIHtcbiAgICAgICAgd2lkdGg6IDEycHg7XG4gICAgICAgIGhlaWdodDogMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMnB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5oZWF0bWFwLWNlbGwubGV2ZWwtMSB7IGJhY2tncm91bmQ6IHJnYmEoOTQsIDE1NiwgMjM1LCAwLjMpOyB9XG4gICAgICAuaGVhdG1hcC1jZWxsLmxldmVsLTIgeyBiYWNrZ3JvdW5kOiByZ2JhKDk0LCAxNTYsIDIzNSwgMC41KTsgfVxuICAgICAgLmhlYXRtYXAtY2VsbC5sZXZlbC0zIHsgYmFja2dyb3VuZDogcmdiYSg5NCwgMTU2LCAyMzUsIDAuNyk7IH1cbiAgICAgIC5oZWF0bWFwLWNlbGwubGV2ZWwtNCB7IGJhY2tncm91bmQ6IHJnYmEoOTQsIDE1NiwgMjM1LCAxKTsgfVxuXG4gICAgICAuZGVja3MtZ3JpZCB7XG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDMwMHB4LCAxZnIpKTtcbiAgICAgICAgZ2FwOiAxNXB4O1xuICAgICAgfVxuXG4gICAgICAuZGVjay1jYXJkIHtcbiAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgIH1cblxuICAgICAgLmRlY2stY2FyZC1oZWFkZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgfVxuXG4gICAgICAuZGVjay1jYXJkLWhlYWRlciBoNCB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgIH1cblxuICAgICAgLmRlY2stYmFkZ2Uge1xuICAgICAgICBwYWRkaW5nOiA0cHggMTBweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgIH1cblxuICAgICAgLmRlY2stY2FyZC1zdGF0cyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgfVxuXG4gICAgICAuc3RhdC1yb3cge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIH1cblxuICAgICAgLnN0YXQtaWNvbiB7XG4gICAgICAgIHdpZHRoOiAyMHB4O1xuICAgICAgfVxuXG4gICAgICAuc3RhdC1sYWJlbCB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLnN0YXQtdmFsdWUge1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuZGVjay1wcm9ncmVzcyB7XG4gICAgICAgIG1hcmdpbi10b3A6IDE1cHg7XG4gICAgICB9XG5cbiAgICAgIC5wcm9ncmVzcy1iYXItY29udGFpbmVyIHtcbiAgICAgICAgaGVpZ2h0OiA4cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICAgICAgfVxuXG4gICAgICAucHJvZ3Jlc3MtYmFyLWZpbGwge1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIHRyYW5zaXRpb246IHdpZHRoIDAuM3M7XG4gICAgICB9XG5cbiAgICAgIC5wcm9ncmVzcy1sYWJlbCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5kaWZmaWN1bHQtY2FyZHMtbGlzdCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGdhcDogMTJweDtcbiAgICAgIH1cblxuICAgICAgLmRpZmZpY3VsdC1jYXJkLWl0ZW0ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDE1cHg7XG4gICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkLXJhbmsge1xuICAgICAgICB3aWR0aDogMzBweDtcbiAgICAgICAgaGVpZ2h0OiAzMHB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1jb250ZW50IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgIH1cblxuICAgICAgLmNhcmQtcXVlc3Rpb24ge1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkLW1ldGEge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTo4cHg7XG4gICAgICB9IFxuXG4ucGF0dGVybi1iYWRnZSwgLmVycm9yLWNvdW50LCAuYXZnLXRpbWUge1xuICAgIHBhZGRpbmc6IDNweCAxMHB4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICBmb250LXNpemU6IDAuODVlbTtcbiAgfVxuXG4gIC5kaWZmaWN1bHR5LWJhci1jb250YWluZXIge1xuICAgIGhlaWdodDogNnB4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gIH1cblxuICAuZGlmZmljdWx0eS1iYXIge1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsIHZhcigtLWNvbG9yLWdyZWVuKSwgdmFyKC0tY29sb3IteWVsbG93KSwgdmFyKC0tY29sb3ItcmVkKSk7XG4gICAgdHJhbnNpdGlvbjogd2lkdGggMC4zcztcbiAgfVxuXG4gIC5jYXJkLWFjdGlvbnMge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZ2FwOiA4cHg7XG4gIH1cblxuICAuYWN0aW9uLWJ0bi1zbWFsbCB7XG4gICAgcGFkZGluZzogNnB4IDEycHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgfVxuXG4gIC5hY3Rpb24tYnRuLXNtYWxsOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gIH1cblxuICAuYWN0aW9uLWJ0bi1zbWFsbC5kZWxldGUtYnRuOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbiAgICBjb2xvcjogd2hpdGU7XG4gIH1cblxuICAuZW1wdHktbWVzc2FnZSB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIHBhZGRpbmc6IDQwcHg7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gIH1cblxuICAucmVwb3J0LXNlY3Rpb24ge1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBtYXJnaW4tdG9wOiAzMHB4O1xuICAgIHBhZGRpbmc6IDIwcHg7XG4gIH1cblxuICAuY2hhcnQtY2FudmFzIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcbiAgICBoZWlnaHQ6IDIwMHB4O1xuICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICB9XG5cbiAgLmJhci1ncm91cCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgZmxleDogMTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gIH1cblxuICAuYmFyLWdyb3VwIC5iYXIge1xuICAgIHdpZHRoOiA4MCU7XG4gICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBib3JkZXItcmFkaXVzOiA0cHggNHB4IDAgMDtcbiAgICB0cmFuc2l0aW9uOiBoZWlnaHQgMC4zcztcbiAgICBtYXJnaW4tdG9wOiBhdXRvO1xuICB9XG5cbiAgLmxpbmUtY2hhcnQtY2FudmFzIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgfVxuXG4gIC5jaGFydC1sYWJlbHMge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XG4gICAgcGFkZGluZzogMTBweCAyMHB4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIH1cblxuICAuY2hhcnQtbGFiZWwge1xuICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgfVxuYDtcblxuZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfX0iLCAiaW1wb3J0IHR5cGUgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBGbGFzaGNhcmQsIFJldmlld0xvZyB9IGZyb20gJy4vRmxhc2hjYXJkTWFuYWdlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGFpbHlTdGF0cyB7XG4gIGRhdGU6IHN0cmluZztcbiAgcmV2aWV3ZWQ6IG51bWJlcjtcbiAgY29ycmVjdENvdW50OiBudW1iZXI7XG4gIGNvcnJlY3RSYXRlOiBudW1iZXI7XG4gIHRpbWVTcGVudDogbnVtYmVyO1xuICBuZXdDYXJkczogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdlZWtseVN0YXRzIHtcbiAgc3RhcnREYXRlOiBzdHJpbmc7XG4gIGVuZERhdGU6IHN0cmluZztcbiAgdG90YWxSZXZpZXdzOiBudW1iZXI7XG4gIGF2ZXJhZ2VDb3JyZWN0UmF0ZTogbnVtYmVyO1xuICB0b3RhbFRpbWVTcGVudDogbnVtYmVyO1xuICBzdHJlYWs6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZWNrU3RhdHMge1xuICBkZWNrTmFtZTogc3RyaW5nO1xuICB0b3RhbENhcmRzOiBudW1iZXI7XG4gIGR1ZUNhcmRzOiBudW1iZXI7XG4gIG5ld0NhcmRzOiBudW1iZXI7XG4gIGNvcnJlY3RSYXRlOiBudW1iZXI7XG4gIGF2ZXJhZ2VJbnRlcnZhbDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERpZmZpY3VsdENhcmQge1xuICBjYXJkOiBGbGFzaGNhcmQ7XG4gIGVycm9yQ291bnQ6IG51bWJlcjtcbiAgbGFzdEVycm9yOiBudW1iZXI7XG4gIGF2ZXJhZ2VUaW1lOiBudW1iZXI7XG4gIHBhdHRlcm46ICdjb25jZXB0JyB8ICdtZW1vcnknIHwgJ2NhbGN1bGF0aW9uJyB8ICd1bmtub3duJztcbn1cblxuZXhwb3J0IGNsYXNzIEFuYWx5dGljc0VuZ2luZSB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbikge31cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU2QkNGXHU2NUU1XHU3RURGXHU4QkExXG4gICAqL1xuICBnZXREYWlseVN0YXRzKGRheXM6IG51bWJlciA9IDMwKTogRGFpbHlTdGF0c1tdIHtcbiAgICBjb25zdCBsb2dzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlclsncmV2aWV3TG9ncyddIHx8IFtdO1xuICAgIGNvbnN0IHN0YXRzOiBNYXA8c3RyaW5nLCBEYWlseVN0YXRzPiA9IG5ldyBNYXAoKTtcblxuICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1NjcwMFx1OEZEMU5cdTU5MjlcdTc2ODRcdTY1NzBcdTYzNkVcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRheXM7IGkrKykge1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSBpKTtcbiAgICAgIGNvbnN0IGRhdGVLZXkgPSBkYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgIFxuICAgICAgc3RhdHMuc2V0KGRhdGVLZXksIHtcbiAgICAgICAgZGF0ZTogZGF0ZUtleSxcbiAgICAgICAgcmV2aWV3ZWQ6IDAsXG4gICAgICAgIGNvcnJlY3RDb3VudDogMCxcbiAgICAgICAgY29ycmVjdFJhdGU6IDAsXG4gICAgICAgIHRpbWVTcGVudDogMCxcbiAgICAgICAgbmV3Q2FyZHM6IDBcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1N0VERlx1OEJBMVx1NTkwRFx1NEU2MFx1OEJCMFx1NUY1NVxuICAgIGxvZ3MuZm9yRWFjaChsb2cgPT4ge1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGxvZy50aW1lc3RhbXApLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgIGNvbnN0IHN0YXQgPSBzdGF0cy5nZXQoZGF0ZSk7XG4gICAgICBpZiAoIXN0YXQpIHJldHVybjtcblxuICAgICAgc3RhdC5yZXZpZXdlZCsrO1xuICAgICAgc3RhdC50aW1lU3BlbnQgKz0gbG9nLnJlc3BvbnNlLnRpbWVTcGVudDtcblxuICAgICAgLy8gXHU1MjI0XHU2NUFEXHU2NjJGXHU1NDI2XHU2QjYzXHU3ODZFXG4gICAgICBpZiAobG9nLnJlc3BvbnNlLmVhc2UgPT09ICdnb29kJyB8fCBsb2cucmVzcG9uc2UuZWFzZSA9PT0gJ2Vhc3knKSB7XG4gICAgICAgIHN0YXQuY29ycmVjdENvdW50Kys7XG4gICAgICB9IGVsc2UgaWYgKGxvZy5yZXNwb25zZS5lYXNlID09PSAnaGFyZCcpIHtcbiAgICAgICAgc3RhdC5jb3JyZWN0Q291bnQgKz0gMC41O1xuICAgICAgfVxuXG4gICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY2MkZcdTY1QjBcdTUzNjFcdTcyNDdcdUZGMDhcdTdCMkNcdTRFMDBcdTZCMjFcdTU5MERcdTRFNjBcdUZGMDlcbiAgICAgIGNvbnN0IGNhcmQgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldEZsYXNoY2FyZChsb2cuZmxhc2hjYXJkSWQpO1xuICAgICAgaWYgKGNhcmQgJiYgY2FyZC5zdGF0cy50b3RhbFJldmlld3MgPT09IDEpIHtcbiAgICAgICAgc3RhdC5uZXdDYXJkcysrO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gXHU4QkExXHU3Qjk3XHU2QjYzXHU3ODZFXHU3Mzg3XG4gICAgc3RhdHMuZm9yRWFjaChzdGF0ID0+IHtcbiAgICAgIGlmIChzdGF0LnJldmlld2VkID4gMCkge1xuICAgICAgICBzdGF0LmNvcnJlY3RSYXRlID0gc3RhdC5jb3JyZWN0Q291bnQgLyBzdGF0LnJldmlld2VkO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIEFycmF5LmZyb20oc3RhdHMudmFsdWVzKCkpLnNvcnQoKGEsIGIpID0+IFxuICAgICAgYS5kYXRlLmxvY2FsZUNvbXBhcmUoYi5kYXRlKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU1NDY4XHU3RURGXHU4QkExXG4gICAqL1xuICBnZXRXZWVrbHlTdGF0cygpOiB7IHRoaXNXZWVrOiBXZWVrbHlTdGF0czsgbGFzdFdlZWs6IFdlZWtseVN0YXRzIH0ge1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgXG4gICAgLy8gXHU2NzJDXHU1NDY4XG4gICAgY29uc3QgdGhpc1dlZWtTdGFydCA9IG5ldyBEYXRlKG5vdyk7XG4gICAgdGhpc1dlZWtTdGFydC5zZXREYXRlKG5vdy5nZXREYXRlKCkgLSBub3cuZ2V0RGF5KCkpO1xuICAgIHRoaXNXZWVrU3RhcnQuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG5cbiAgICAvLyBcdTRFMEFcdTU0NjhcbiAgICBjb25zdCBsYXN0V2Vla1N0YXJ0ID0gbmV3IERhdGUodGhpc1dlZWtTdGFydCk7XG4gICAgbGFzdFdlZWtTdGFydC5zZXREYXRlKGxhc3RXZWVrU3RhcnQuZ2V0RGF0ZSgpIC0gNyk7XG5cbiAgICBjb25zdCB0aGlzV2VlayA9IHRoaXMuY2FsY3VsYXRlV2Vla1N0YXRzKHRoaXNXZWVrU3RhcnQpO1xuICAgIGNvbnN0IGxhc3RXZWVrID0gdGhpcy5jYWxjdWxhdGVXZWVrU3RhdHMobGFzdFdlZWtTdGFydCk7XG5cbiAgICByZXR1cm4geyB0aGlzV2VlaywgbGFzdFdlZWsgfTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlV2Vla1N0YXRzKHN0YXJ0RGF0ZTogRGF0ZSk6IFdlZWtseVN0YXRzIHtcbiAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUoc3RhcnREYXRlKTtcbiAgICBlbmREYXRlLnNldERhdGUoZW5kRGF0ZS5nZXREYXRlKCkgKyA3KTtcblxuICAgIGNvbnN0IGxvZ3MgPSAodGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlclsncmV2aWV3TG9ncyddIHx8IFtdKS5maWx0ZXIoXG4gICAgICBsb2cgPT4gbG9nLnRpbWVzdGFtcCA+PSBzdGFydERhdGUuZ2V0VGltZSgpICYmIGxvZy50aW1lc3RhbXAgPCBlbmREYXRlLmdldFRpbWUoKVxuICAgICk7XG5cbiAgICBsZXQgdG90YWxDb3JyZWN0ID0gMDtcbiAgICBsZXQgdG90YWxUaW1lU3BlbnQgPSAwO1xuXG4gICAgbG9ncy5mb3JFYWNoKGxvZyA9PiB7XG4gICAgICB0b3RhbFRpbWVTcGVudCArPSBsb2cucmVzcG9uc2UudGltZVNwZW50O1xuICAgICAgaWYgKGxvZy5yZXNwb25zZS5lYXNlID09PSAnZ29vZCcgfHwgbG9nLnJlc3BvbnNlLmVhc2UgPT09ICdlYXN5Jykge1xuICAgICAgICB0b3RhbENvcnJlY3QrKztcbiAgICAgIH0gZWxzZSBpZiAobG9nLnJlc3BvbnNlLmVhc2UgPT09ICdoYXJkJykge1xuICAgICAgICB0b3RhbENvcnJlY3QgKz0gMC41O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgYXZlcmFnZUNvcnJlY3RSYXRlID0gbG9ncy5sZW5ndGggPiAwID8gdG90YWxDb3JyZWN0IC8gbG9ncy5sZW5ndGggOiAwO1xuICAgIGNvbnN0IHN0cmVhayA9IHRoaXMuY2FsY3VsYXRlU3RyZWFrKCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnREYXRlOiBzdGFydERhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxuICAgICAgZW5kRGF0ZTogZW5kRGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXG4gICAgICB0b3RhbFJldmlld3M6IGxvZ3MubGVuZ3RoLFxuICAgICAgYXZlcmFnZUNvcnJlY3RSYXRlLFxuICAgICAgdG90YWxUaW1lU3BlbnQsXG4gICAgICBzdHJlYWtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1OEJBMVx1N0I5N1x1OEZERVx1N0VFRFx1NUI2Nlx1NEU2MFx1NTkyOVx1NjU3MFxuICAgKi9cbiAgY2FsY3VsYXRlU3RyZWFrKCk6IG51bWJlciB7XG4gICAgY29uc3QgbG9ncyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXJbJ3Jldmlld0xvZ3MnXSB8fCBbXTtcbiAgICBpZiAobG9ncy5sZW5ndGggPT09IDApIHJldHVybiAwO1xuXG4gICAgY29uc3QgZGF0ZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBsb2dzLmZvckVhY2gobG9nID0+IHtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShsb2cudGltZXN0YW1wKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICBkYXRlcy5hZGQoZGF0ZSk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBzb3J0ZWREYXRlcyA9IEFycmF5LmZyb20oZGF0ZXMpLnNvcnQoKS5yZXZlcnNlKCk7XG4gICAgbGV0IHN0cmVhayA9IDA7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc29ydGVkRGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGV4cGVjdGVkRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICBleHBlY3RlZERhdGUuc2V0RGF0ZShleHBlY3RlZERhdGUuZ2V0RGF0ZSgpIC0gaSk7XG4gICAgICBjb25zdCBleHBlY3RlZCA9IGV4cGVjdGVkRGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG5cbiAgICAgIGlmIChzb3J0ZWREYXRlc1tpXSA9PT0gZXhwZWN0ZWQpIHtcbiAgICAgICAgc3RyZWFrKys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3RyZWFrO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NTM2MVx1N0VDNFx1N0VERlx1OEJBMVxuICAgKi9cbiAgZ2V0RGVja1N0YXRzKCk6IERlY2tTdGF0c1tdIHtcbiAgICBjb25zdCBjYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgIGNvbnN0IGRlY2tNYXAgPSBuZXcgTWFwPHN0cmluZywgRmxhc2hjYXJkW10+KCk7XG5cbiAgICAvLyBcdTYzMDlcdTUzNjFcdTdFQzRcdTUyMDZcdTdFQzRcbiAgICBjYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xuICAgICAgaWYgKCFkZWNrTWFwLmhhcyhjYXJkLmRlY2spKSB7XG4gICAgICAgIGRlY2tNYXAuc2V0KGNhcmQuZGVjaywgW10pO1xuICAgICAgfVxuICAgICAgZGVja01hcC5nZXQoY2FyZC5kZWNrKSEucHVzaChjYXJkKTtcbiAgICB9KTtcblxuICAgIC8vIFx1OEJBMVx1N0I5N1x1NkJDRlx1NEUyQVx1NTM2MVx1N0VDNFx1NzY4NFx1N0VERlx1OEJBMVxuICAgIGNvbnN0IHN0YXRzOiBEZWNrU3RhdHNbXSA9IFtdO1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cbiAgICBkZWNrTWFwLmZvckVhY2goKGRlY2tDYXJkcywgZGVja05hbWUpID0+IHtcbiAgICAgIGNvbnN0IGR1ZUNhcmRzID0gZGVja0NhcmRzLmZpbHRlcihjID0+IGMuc2NoZWR1bGluZy5kdWUgPD0gbm93KS5sZW5ndGg7XG4gICAgICBjb25zdCBuZXdDYXJkcyA9IGRlY2tDYXJkcy5maWx0ZXIoYyA9PiBjLnNjaGVkdWxpbmcuc3RhdGUgPT09ICduZXcnKS5sZW5ndGg7XG4gICAgICBcbiAgICAgIGNvbnN0IHRvdGFsQ29ycmVjdCA9IGRlY2tDYXJkcy5yZWR1Y2UoXG4gICAgICAgIChzdW0sIGMpID0+IHN1bSArIGMuc3RhdHMuY29ycmVjdENvdW50LCAwXG4gICAgICApO1xuICAgICAgY29uc3QgdG90YWxSZXZpZXdzID0gZGVja0NhcmRzLnJlZHVjZShcbiAgICAgICAgKHN1bSwgYykgPT4gc3VtICsgYy5zdGF0cy50b3RhbFJldmlld3MsIDBcbiAgICAgICk7XG4gICAgICBjb25zdCBjb3JyZWN0UmF0ZSA9IHRvdGFsUmV2aWV3cyA+IDAgPyB0b3RhbENvcnJlY3QgLyB0b3RhbFJldmlld3MgOiAwO1xuXG4gICAgICBjb25zdCB0b3RhbEludGVydmFsID0gZGVja0NhcmRzLnJlZHVjZShcbiAgICAgICAgKHN1bSwgYykgPT4gc3VtICsgYy5zY2hlZHVsaW5nLmludGVydmFsLCAwXG4gICAgICApO1xuICAgICAgY29uc3QgYXZlcmFnZUludGVydmFsID0gZGVja0NhcmRzLmxlbmd0aCA+IDAgXG4gICAgICAgID8gdG90YWxJbnRlcnZhbCAvIGRlY2tDYXJkcy5sZW5ndGggXG4gICAgICAgIDogMDtcblxuICAgICAgc3RhdHMucHVzaCh7XG4gICAgICAgIGRlY2tOYW1lLFxuICAgICAgICB0b3RhbENhcmRzOiBkZWNrQ2FyZHMubGVuZ3RoLFxuICAgICAgICBkdWVDYXJkcyxcbiAgICAgICAgbmV3Q2FyZHMsXG4gICAgICAgIGNvcnJlY3RSYXRlLFxuICAgICAgICBhdmVyYWdlSW50ZXJ2YWxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHN0YXRzLnNvcnQoKGEsIGIpID0+IGIudG90YWxDYXJkcyAtIGEudG90YWxDYXJkcyk7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU5NkJFXHU3MEI5XHU1MzYxXHU3MjQ3XG4gICAqL1xuICBnZXREaWZmaWN1bHRDYXJkcyhsaW1pdDogbnVtYmVyID0gMTApOiBEaWZmaWN1bHRDYXJkW10ge1xuICAgIGNvbnN0IGNhcmRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRBbGxGbGFzaGNhcmRzKCk7XG4gICAgY29uc3QgbG9ncyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXJbJ3Jldmlld0xvZ3MnXSB8fCBbXTtcblxuICAgIGNvbnN0IGRpZmZpY3VsdENhcmRzOiBEaWZmaWN1bHRDYXJkW10gPSBbXTtcblxuICAgIGNhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICBjb25zdCBjYXJkTG9ncyA9IGxvZ3MuZmlsdGVyKGxvZyA9PiBsb2cuZmxhc2hjYXJkSWQgPT09IGNhcmQuaWQpO1xuICAgICAgXG4gICAgICAvLyBcdThCQTFcdTdCOTdcdTk1MTlcdThCRUZcdTZCMjFcdTY1NzBcbiAgICAgIGNvbnN0IGVycm9yQ291bnQgPSBjYXJkTG9ncy5maWx0ZXIoXG4gICAgICAgIGxvZyA9PiBsb2cucmVzcG9uc2UuZWFzZSA9PT0gJ2FnYWluJ1xuICAgICAgKS5sZW5ndGg7XG5cbiAgICAgIGlmIChlcnJvckNvdW50ID09PSAwICYmIGNhcmQuc3RhdHMuZGlmZmljdWx0eSA8IDAuNykgcmV0dXJuO1xuXG4gICAgICAvLyBcdTY3MDBcdTU0MEVcdTRFMDBcdTZCMjFcdTk1MTlcdThCRUZcbiAgICAgIGNvbnN0IGVycm9yTG9ncyA9IGNhcmRMb2dzLmZpbHRlcihsb2cgPT4gbG9nLnJlc3BvbnNlLmVhc2UgPT09ICdhZ2FpbicpO1xuICAgICAgY29uc3QgbGFzdEVycm9yID0gZXJyb3JMb2dzLmxlbmd0aCA+IDAgXG4gICAgICAgID8gZXJyb3JMb2dzW2Vycm9yTG9ncy5sZW5ndGggLSAxXS50aW1lc3RhbXAgXG4gICAgICAgIDogMDtcblxuICAgICAgLy8gXHU1MjI0XHU2NUFEXHU5NTE5XHU4QkVGXHU2QTIxXHU1RjBGXG4gICAgICBjb25zdCBwYXR0ZXJuID0gdGhpcy5kZXRlY3RFcnJvclBhdHRlcm4oY2FyZCwgY2FyZExvZ3MpO1xuXG4gICAgICBkaWZmaWN1bHRDYXJkcy5wdXNoKHtcbiAgICAgICAgY2FyZCxcbiAgICAgICAgZXJyb3JDb3VudCxcbiAgICAgICAgbGFzdEVycm9yLFxuICAgICAgICBhdmVyYWdlVGltZTogY2FyZC5zdGF0cy5hdmVyYWdlVGltZSxcbiAgICAgICAgcGF0dGVyblxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBcdTYzOTJcdTVFOEZcdUZGMUFcdTk1MTlcdThCRUZcdTZCMjFcdTY1NzAgPiBcdTk2QkVcdTVFQTYgPiBcdTY3MDBcdThGRDFcdTk1MTlcdThCRUZcbiAgICByZXR1cm4gZGlmZmljdWx0Q2FyZHNcbiAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGlmIChhLmVycm9yQ291bnQgIT09IGIuZXJyb3JDb3VudCkge1xuICAgICAgICAgIHJldHVybiBiLmVycm9yQ291bnQgLSBhLmVycm9yQ291bnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGEuY2FyZC5zdGF0cy5kaWZmaWN1bHR5ICE9PSBiLmNhcmQuc3RhdHMuZGlmZmljdWx0eSkge1xuICAgICAgICAgIHJldHVybiBiLmNhcmQuc3RhdHMuZGlmZmljdWx0eSAtIGEuY2FyZC5zdGF0cy5kaWZmaWN1bHR5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiLmxhc3RFcnJvciAtIGEubGFzdEVycm9yO1xuICAgICAgfSlcbiAgICAgIC5zbGljZSgwLCBsaW1pdCk7XG4gIH1cblxuICBwcml2YXRlIGRldGVjdEVycm9yUGF0dGVybihcbiAgICBjYXJkOiBGbGFzaGNhcmQsXG4gICAgbG9nczogUmV2aWV3TG9nW11cbiAgKTogRGlmZmljdWx0Q2FyZFsncGF0dGVybiddIHtcbiAgICBpZiAobG9ncy5sZW5ndGggPCAzKSByZXR1cm4gJ3Vua25vd24nO1xuXG4gICAgLy8gXHU2NUY2XHU5NUY0XHU4RkM3XHU5NTdGIC0+IFx1OEJBMVx1N0I5N1x1OTVFRVx1OTg5OFxuICAgIGlmIChjYXJkLnN0YXRzLmF2ZXJhZ2VUaW1lID4gNjApIHtcbiAgICAgIHJldHVybiAnY2FsY3VsYXRpb24nO1xuICAgIH1cblxuICAgIC8vIFx1OTVGNFx1OTY5NFx1NUY4OFx1NzdFRFx1NEVDRFx1NzEzNlx1OTUxOVx1OEJFRiAtPiBcdThCQjBcdTVGQzZcdTk1RUVcdTk4OThcbiAgICBpZiAoY2FyZC5zY2hlZHVsaW5nLmludGVydmFsIDwgMyAmJiBjYXJkLnNjaGVkdWxpbmcubGFwc2VzID4gMikge1xuICAgICAgcmV0dXJuICdtZW1vcnknO1xuICAgIH1cblxuICAgIC8vIFx1NjMwMVx1N0VFRFx1NTkzMVx1OEQyNSAtPiBcdTY5ODJcdTVGRjVcdTc0MDZcdTg5RTNcdTk1RUVcdTk4OThcbiAgICBjb25zdCByZWNlbnRMb2dzID0gbG9ncy5zbGljZSgtNSk7XG4gICAgY29uc3QgcmVjZW50RmFpbHVyZXMgPSByZWNlbnRMb2dzLmZpbHRlcihcbiAgICAgIGxvZyA9PiBsb2cucmVzcG9uc2UuZWFzZSA9PT0gJ2FnYWluJ1xuICAgICkubGVuZ3RoO1xuICAgIFxuICAgIGlmIChyZWNlbnRGYWlsdXJlcyA+PSAzKSB7XG4gICAgICByZXR1cm4gJ2NvbmNlcHQnO1xuICAgIH1cblxuICAgIHJldHVybiAndW5rbm93bic7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU2ODA3XHU3QjdFXHU3RURGXHU4QkExXG4gICAqL1xuICBnZXRUYWdTdGF0cygpOiB7IHRhZzogc3RyaW5nOyBjb3VudDogbnVtYmVyOyBjb3JyZWN0UmF0ZTogbnVtYmVyIH1bXSB7XG4gICAgY29uc3QgY2FyZHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldEFsbEZsYXNoY2FyZHMoKTtcbiAgICBjb25zdCB0YWdNYXAgPSBuZXcgTWFwPHN0cmluZywgeyB0b3RhbDogbnVtYmVyOyBjb3JyZWN0OiBudW1iZXI7IHJldmlld3M6IG51bWJlciB9PigpO1xuXG4gICAgY2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgIGNhcmQudGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgIGlmICghdGFnTWFwLmhhcyh0YWcpKSB7XG4gICAgICAgICAgdGFnTWFwLnNldCh0YWcsIHsgdG90YWw6IDAsIGNvcnJlY3Q6IDAsIHJldmlld3M6IDAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdCA9IHRhZ01hcC5nZXQodGFnKSE7XG4gICAgICAgIHN0YXQudG90YWwrKztcbiAgICAgICAgc3RhdC5jb3JyZWN0ICs9IGNhcmQuc3RhdHMuY29ycmVjdENvdW50O1xuICAgICAgICBzdGF0LnJldmlld3MgKz0gY2FyZC5zdGF0cy50b3RhbFJldmlld3M7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHN0YXRzID0gQXJyYXkuZnJvbSh0YWdNYXAuZW50cmllcygpKS5tYXAoKFt0YWcsIGRhdGFdKSA9PiAoe1xuICAgICAgdGFnLFxuICAgICAgY291bnQ6IGRhdGEudG90YWwsXG4gICAgICBjb3JyZWN0UmF0ZTogZGF0YS5yZXZpZXdzID4gMCA/IGRhdGEuY29ycmVjdCAvIGRhdGEucmV2aWV3cyA6IDBcbiAgICB9KSk7XG5cbiAgICByZXR1cm4gc3RhdHMuc29ydCgoYSwgYikgPT4gYi5jb3VudCAtIGEuY291bnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NzUxRlx1NjIxMFx1NUI2Nlx1NEU2MFx1NjJBNVx1NTQ0QVxuICAgKi9cbiAgZ2VuZXJhdGVSZXBvcnQoZGF5czogbnVtYmVyID0gNyk6IHN0cmluZyB7XG4gICAgY29uc3QgZGFpbHlTdGF0cyA9IHRoaXMuZ2V0RGFpbHlTdGF0cyhkYXlzKTtcbiAgICBjb25zdCB7IHRoaXNXZWVrLCBsYXN0V2VlayB9ID0gdGhpcy5nZXRXZWVrbHlTdGF0cygpO1xuICAgIGNvbnN0IGRpZmZpY3VsdENhcmRzID0gdGhpcy5nZXREaWZmaWN1bHRDYXJkcyg1KTtcbiAgICBjb25zdCBkZWNrU3RhdHMgPSB0aGlzLmdldERlY2tTdGF0cygpO1xuXG4gICAgLy8gXHU4QkExXHU3Qjk3XHU2MDNCXHU4OUM4XHU2NTcwXHU2MzZFXG4gICAgY29uc3QgdG90YWxSZXZpZXdlZCA9IGRhaWx5U3RhdHMucmVkdWNlKChzdW0sIHMpID0+IHN1bSArIHMucmV2aWV3ZWQsIDApO1xuICAgIGNvbnN0IHRvdGFsQ29ycmVjdCA9IGRhaWx5U3RhdHMucmVkdWNlKChzdW0sIHMpID0+IHN1bSArIHMuY29ycmVjdENvdW50LCAwKTtcbiAgICBjb25zdCBhdmVyYWdlQ29ycmVjdFJhdGUgPSB0b3RhbFJldmlld2VkID4gMCA/IHRvdGFsQ29ycmVjdCAvIHRvdGFsUmV2aWV3ZWQgOiAwO1xuICAgIGNvbnN0IHRvdGFsVGltZSA9IGRhaWx5U3RhdHMucmVkdWNlKChzdW0sIHMpID0+IHN1bSArIHMudGltZVNwZW50LCAwKTtcblxuICAgIC8vIFx1OEQ4Qlx1NTJCRlx1NTIwNlx1Njc5MFxuICAgIGNvbnN0IHJlY2VudERheXMgPSBkYWlseVN0YXRzLnNsaWNlKC03KTtcbiAgICBjb25zdCBvbGRlckRheXMgPSBkYWlseVN0YXRzLnNsaWNlKC0xNCwgLTcpO1xuICAgIGNvbnN0IHJlY2VudFJhdGUgPSB0aGlzLmNhbGN1bGF0ZUF2ZXJhZ2VSYXRlKHJlY2VudERheXMpO1xuICAgIGNvbnN0IG9sZGVyUmF0ZSA9IHRoaXMuY2FsY3VsYXRlQXZlcmFnZVJhdGUob2xkZXJEYXlzKTtcbiAgICBjb25zdCB0cmVuZCA9IHJlY2VudFJhdGUgPiBvbGRlclJhdGUgPyAnXHVEODNEXHVEQ0M4IGltcHJvdmluZycgOiBcbiAgICAgICAgICAgICAgICAgIHJlY2VudFJhdGUgPCBvbGRlclJhdGUgPyAnXHVEODNEXHVEQ0M5IGRlY2xpbmluZycgOiAnXHUyN0ExXHVGRTBGIHN0YWJsZSc7XG5cbiAgICBsZXQgcmVwb3J0ID0gYCMgXHVEODNEXHVEQ0NBIExlYXJuaW5nIFJlcG9ydFxcblxcbmA7XG4gICAgcmVwb3J0ICs9IGAqKlBlcmlvZDoqKiBMYXN0ICR7ZGF5c30gZGF5c1xcbmA7XG4gICAgcmVwb3J0ICs9IGAqKkdlbmVyYXRlZDoqKiAke25ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKX1cXG5cXG5gO1xuXG4gICAgcmVwb3J0ICs9IGAjIyBcdUQ4M0NcdURGQUYgT3ZlcmFsbCBQZXJmb3JtYW5jZVxcblxcbmA7XG4gICAgcmVwb3J0ICs9IGAtICoqQ2FyZHMgUmV2aWV3ZWQ6KiogJHt0b3RhbFJldmlld2VkfVxcbmA7XG4gICAgcmVwb3J0ICs9IGAtICoqQ29ycmVjdCBSYXRlOioqICR7KGF2ZXJhZ2VDb3JyZWN0UmF0ZSAqIDEwMCkudG9GaXhlZCgxKX0lXFxuYDtcbiAgICByZXBvcnQgKz0gYC0gKipTdHVkeSBUaW1lOioqICR7dGhpcy5mb3JtYXRUaW1lKHRvdGFsVGltZSl9XFxuYDtcbiAgICByZXBvcnQgKz0gYC0gKipDdXJyZW50IFN0cmVhazoqKiAke3RoaXNXZWVrLnN0cmVha30gZGF5cyBcdUQ4M0RcdUREMjVcXG5gO1xuICAgIHJlcG9ydCArPSBgLSAqKlRyZW5kOioqICR7dHJlbmR9XFxuXFxuYDtcblxuICAgIHJlcG9ydCArPSBgIyMgXHVEODNEXHVEQ0M4IFdlZWsgQ29tcGFyaXNvblxcblxcbmA7XG4gICAgcmVwb3J0ICs9IGAjIyMgVGhpcyBXZWVrXFxuYDtcbiAgICByZXBvcnQgKz0gYC0gUmV2aWV3czogJHt0aGlzV2Vlay50b3RhbFJldmlld3N9XFxuYDtcbiAgICByZXBvcnQgKz0gYC0gQ29ycmVjdCBSYXRlOiAkeyh0aGlzV2Vlay5hdmVyYWdlQ29ycmVjdFJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JVxcbmA7XG4gICAgcmVwb3J0ICs9IGAtIFRpbWU6ICR7dGhpcy5mb3JtYXRUaW1lKHRoaXNXZWVrLnRvdGFsVGltZVNwZW50KX1cXG5cXG5gO1xuXG4gICAgcmVwb3J0ICs9IGAjIyMgTGFzdCBXZWVrXFxuYDtcbiAgICByZXBvcnQgKz0gYC0gUmV2aWV3czogJHtsYXN0V2Vlay50b3RhbFJldmlld3N9XFxuYDtcbiAgICByZXBvcnQgKz0gYC0gQ29ycmVjdCBSYXRlOiAkeyhsYXN0V2Vlay5hdmVyYWdlQ29ycmVjdFJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JVxcbmA7XG4gICAgcmVwb3J0ICs9IGAtIFRpbWU6ICR7dGhpcy5mb3JtYXRUaW1lKGxhc3RXZWVrLnRvdGFsVGltZVNwZW50KX1cXG5cXG5gO1xuXG4gICAgY29uc3QgcmV2aWV3Q2hhbmdlID0gdGhpc1dlZWsudG90YWxSZXZpZXdzIC0gbGFzdFdlZWsudG90YWxSZXZpZXdzO1xuICAgIGNvbnN0IHJhdGVDaGFuZ2UgPSAodGhpc1dlZWsuYXZlcmFnZUNvcnJlY3RSYXRlIC0gbGFzdFdlZWsuYXZlcmFnZUNvcnJlY3RSYXRlKSAqIDEwMDtcbiAgICBcbiAgICBpZiAocmV2aWV3Q2hhbmdlID4gMCkge1xuICAgICAgcmVwb3J0ICs9IGBcdUQ4M0RcdURDQUEgWW91IHJldmlld2VkICoqJHtyZXZpZXdDaGFuZ2V9IG1vcmUgY2FyZHMqKiB0aGlzIHdlZWshXFxuYDtcbiAgICB9XG4gICAgaWYgKHJhdGVDaGFuZ2UgPiA1KSB7XG4gICAgICByZXBvcnQgKz0gYFx1RDgzQ1x1REY4OSBZb3VyIGFjY3VyYWN5IGltcHJvdmVkIGJ5ICoqJHtyYXRlQ2hhbmdlLnRvRml4ZWQoMSl9JSoqIVxcbmA7XG4gICAgfVxuICAgIHJlcG9ydCArPSBgXFxuYDtcblxuICAgIGlmIChkaWZmaWN1bHRDYXJkcy5sZW5ndGggPiAwKSB7XG4gICAgICByZXBvcnQgKz0gYCMjIFx1MjZBMFx1RkUwRiBDYXJkcyBOZWVkaW5nIEF0dGVudGlvblxcblxcbmA7XG4gICAgICBkaWZmaWN1bHRDYXJkcy5mb3JFYWNoKChkYywgaSkgPT4ge1xuICAgICAgICBjb25zdCBwYXR0ZXJuRW1vamkgPSB7XG4gICAgICAgICAgJ2NvbmNlcHQnOiAnXHVEODNFXHVEREUwJyxcbiAgICAgICAgICAnbWVtb3J5JzogJ1x1RDgzRFx1RENBRCcsXG4gICAgICAgICAgJ2NhbGN1bGF0aW9uJzogJ1x1RDgzRFx1REQyMicsXG4gICAgICAgICAgJ3Vua25vd24nOiAnXHUyNzUzJ1xuICAgICAgICB9O1xuICAgICAgICByZXBvcnQgKz0gYCR7aSArIDF9LiAqKiR7ZGMuY2FyZC5mcm9udC5zdWJzdHJpbmcoMCwgNTApfSR7ZGMuY2FyZC5mcm9udC5sZW5ndGggPiA1MCA/ICcuLi4nIDogJyd9KipcXG5gO1xuICAgICAgICByZXBvcnQgKz0gYCAgIC0gRXJyb3JzOiAke2RjLmVycm9yQ291bnR9IHwgUGF0dGVybjogJHtwYXR0ZXJuRW1vamlbZGMucGF0dGVybl19ICR7ZGMucGF0dGVybn1cXG5gO1xuICAgICAgICByZXBvcnQgKz0gYCAgIC0gQXZnIFRpbWU6ICR7ZGMuYXZlcmFnZVRpbWUudG9GaXhlZCgxKX1zIHwgRGlmZmljdWx0eTogJHsoZGMuY2FyZC5zdGF0cy5kaWZmaWN1bHR5ICogMTAwKS50b0ZpeGVkKDApfSVcXG5cXG5gO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVwb3J0ICs9IGAjIyBcdUQ4M0RcdURDREEgRGVjayBPdmVydmlld1xcblxcbmA7XG4gICAgZGVja1N0YXRzLmZvckVhY2goZGVjayA9PiB7XG4gICAgICByZXBvcnQgKz0gYCMjIyAke2RlY2suZGVja05hbWV9XFxuYDtcbiAgICAgIHJlcG9ydCArPSBgLSBUb3RhbDogJHtkZWNrLnRvdGFsQ2FyZHN9IHwgRHVlOiAke2RlY2suZHVlQ2FyZHN9IHwgTmV3OiAke2RlY2submV3Q2FyZHN9XFxuYDtcbiAgICAgIHJlcG9ydCArPSBgLSBDb3JyZWN0IFJhdGU6ICR7KGRlY2suY29ycmVjdFJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JVxcbmA7XG4gICAgICByZXBvcnQgKz0gYC0gQXZnIEludGVydmFsOiAke2RlY2suYXZlcmFnZUludGVydmFsLnRvRml4ZWQoMSl9IGRheXNcXG5cXG5gO1xuICAgIH0pO1xuXG4gICAgcmVwb3J0ICs9IGAjIyBcdUQ4M0RcdURDQTEgUmVjb21tZW5kYXRpb25zXFxuXFxuYDtcblxuICAgIC8vIFx1NzUxRlx1NjIxMFx1NUVGQVx1OEJBRVxuICAgIGlmIChhdmVyYWdlQ29ycmVjdFJhdGUgPCAwLjcpIHtcbiAgICAgIHJlcG9ydCArPSBgLSBcdTI2QTEgWW91ciBjb3JyZWN0IHJhdGUgaXMgYmVsb3cgNzAlLiBDb25zaWRlciByZXZpZXdpbmcgZGlmZmljdWx0IGNhcmRzIG1vcmUgZnJlcXVlbnRseS5cXG5gO1xuICAgIH1cbiAgICBpZiAoZGlmZmljdWx0Q2FyZHMubGVuZ3RoID4gNSkge1xuICAgICAgcmVwb3J0ICs9IGAtIFx1RDgzRFx1RENENiBZb3UgaGF2ZSBtYW55IGRpZmZpY3VsdCBjYXJkcy4gVHJ5IGJyZWFraW5nIGNvbXBsZXggY29uY2VwdHMgaW50byBzbWFsbGVyIGZsYXNoY2FyZHMuXFxuYDtcbiAgICB9XG4gICAgaWYgKHRoaXNXZWVrLnN0cmVhayA+IDcpIHtcbiAgICAgIHJlcG9ydCArPSBgLSBcdUQ4M0NcdURGODkgQW1hemluZyBzdHJlYWshIEtlZXAgdXAgdGhlIGNvbnNpc3RlbmN5IVxcbmA7XG4gICAgfVxuICAgIGlmICh0b3RhbFRpbWUgLyB0b3RhbFJldmlld2VkID4gMzApIHtcbiAgICAgIHJlcG9ydCArPSBgLSBcdTIzRjFcdUZFMEYgQXZlcmFnZSByZXZpZXcgdGltZSBpcyBoaWdoLiBDb25zaWRlciBzaW1wbGlmeWluZyBjYXJkIGNvbnRlbnQuXFxuYDtcbiAgICB9XG4gICAgaWYgKGRlY2tTdGF0cy5zb21lKGQgPT4gZC5kdWVDYXJkcyA+IGQudG90YWxDYXJkcyAqIDAuNSkpIHtcbiAgICAgIHJlcG9ydCArPSBgLSBcdUQ4M0RcdURDQzUgU29tZSBkZWNrcyBoYXZlIG1hbnkgb3ZlcmR1ZSBjYXJkcy4gRm9jdXMgb24gY2F0Y2hpbmcgdXAgd2l0aCB0aGVzZS5cXG5gO1xuICAgIH1cblxuICAgIHJldHVybiByZXBvcnQ7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZUF2ZXJhZ2VSYXRlKHN0YXRzOiBEYWlseVN0YXRzW10pOiBudW1iZXIge1xuICAgIGNvbnN0IHRvdGFsID0gc3RhdHMucmVkdWNlKChzdW0sIHMpID0+IHN1bSArIHMucmV2aWV3ZWQsIDApO1xuICAgIGNvbnN0IGNvcnJlY3QgPSBzdGF0cy5yZWR1Y2UoKHN1bSwgcykgPT4gc3VtICsgcy5jb3JyZWN0Q291bnQsIDApO1xuICAgIHJldHVybiB0b3RhbCA+IDAgPyBjb3JyZWN0IC8gdG90YWwgOiAwO1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRUaW1lKHNlY29uZHM6IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3QgaG91cnMgPSBNYXRoLmZsb29yKHNlY29uZHMgLyAzNjAwKTtcbiAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcigoc2Vjb25kcyAlIDM2MDApIC8gNjApO1xuICAgIFxuICAgIGlmIChob3VycyA+IDApIHtcbiAgICAgIHJldHVybiBgJHtob3Vyc31oICR7bWludXRlc31tYDtcbiAgICB9XG4gICAgcmV0dXJuIGAke21pbnV0ZXN9bWA7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU3MEVEXHU1MjlCXHU1NkZFXHU2NTcwXHU2MzZFXHVGRjA4XHU3NTI4XHU0RThFXHU2NUU1XHU1Mzg2XHU4OUM2XHU1NkZFXHVGRjA5XG4gICAqL1xuICBnZXRIZWF0bWFwRGF0YShkYXlzOiBudW1iZXIgPSA5MCk6IHsgZGF0ZTogc3RyaW5nOyBjb3VudDogbnVtYmVyOyBpbnRlbnNpdHk6IG51bWJlciB9W10ge1xuICAgIGNvbnN0IGRhaWx5U3RhdHMgPSB0aGlzLmdldERhaWx5U3RhdHMoZGF5cyk7XG4gICAgY29uc3QgbWF4UmV2aWV3cyA9IE1hdGgubWF4KC4uLmRhaWx5U3RhdHMubWFwKHMgPT4gcy5yZXZpZXdlZCkpO1xuXG4gICAgcmV0dXJuIGRhaWx5U3RhdHMubWFwKHN0YXQgPT4gKHtcbiAgICAgIGRhdGU6IHN0YXQuZGF0ZSxcbiAgICAgIGNvdW50OiBzdGF0LnJldmlld2VkLFxuICAgICAgaW50ZW5zaXR5OiBtYXhSZXZpZXdzID4gMCA/IHN0YXQucmV2aWV3ZWQgLyBtYXhSZXZpZXdzIDogMFxuICAgIH0pKTtcbiAgfVxufSIsICJpbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29udGVudFVuaXQge1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiAnaGlnaGxpZ2h0JyB8ICdib2xkJyB8ICd0YWcnIHwgJ2N1c3RvbScgfCAnUUEnIHwgJ2Nsb3plJ3wndGV4dCc7IC8vIFx1NkRGQlx1NTJBMCBxYSBcdTU0OEMgY2xvemUgXHU3QzdCXHU1NzhCXG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgYW5zd2VyPzogc3RyaW5nOyAvLyBcdTc1MjhcdTRFOEUgUUEgXHU1MzYxXHU3MjQ3XHU3Njg0XHU3QjU0XHU2ODQ4XG4gIGZ1bGxDb250ZXh0Pzogc3RyaW5nO1xuICBzb3VyY2U6IHtcbiAgICBmaWxlOiBzdHJpbmc7XG4gICAgcG9zaXRpb246IHtcbiAgICAgIHN0YXJ0OiBudW1iZXI7XG4gICAgICBlbmQ6IG51bWJlcjtcbiAgICAgIGxpbmU6IG51bWJlcjtcbiAgICB9O1xuICAgIGJsb2NrSWQ/OiBzdHJpbmc7XG4gICAgaGVhZGluZz86IHN0cmluZztcbiAgICBhbmNob3JMaW5rOiBzdHJpbmc7XG4gIH07XG4gIGV4dHJhY3RSdWxlOiB7XG4gICAgcnVsZUlkOiBzdHJpbmc7XG4gICAgcnVsZU5hbWU6IHN0cmluZztcbiAgICBleHRyYWN0ZWRCeTogJ2F1dG8nIHwgJ21hbnVhbCc7XG4gIH07XG4gIG1ldGFkYXRhOiB7XG4gICAgY3JlYXRlZEF0OiBudW1iZXI7XG4gICAgdXBkYXRlZEF0OiBudW1iZXI7XG4gICAgdGFnczogc3RyaW5nW107XG4gICAgY29sb3I/OiBzdHJpbmc7XG4gIH07XG4gIGFubm90YXRpb25JZD86IHN0cmluZztcbiAgZmxhc2hjYXJkSWRzOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGNsYXNzIERhdGFNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBkYXRhRm9sZGVyOiBzdHJpbmc7XG4gIHByaXZhdGUgY29udGVudFVuaXRzOiBNYXA8c3RyaW5nLCBDb250ZW50VW5pdD4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgZmlsZUluZGV4OiBNYXA8c3RyaW5nLCBzdHJpbmdbXT4gPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW5cbiAgKSB7XG4gICAgdGhpcy5kYXRhRm9sZGVyID0gYCR7dGhpcy5hcHAudmF1bHQuY29uZmlnRGlyfS9wbHVnaW5zL2xlYXJuaW5nLXN5c3RlbS9kYXRhYDtcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUoKSB7XG4gICAgLy8gXHU3ODZFXHU0RkREXHU2NTcwXHU2MzZFXHU2NTg3XHU0RUY2XHU1OTM5XHU1QjU4XHU1NzI4XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVEYXRhRm9sZGVyKCk7XG4gICAgXG4gICAgLy8gXHU1MkEwXHU4RjdEXHU3M0IwXHU2NzA5XHU2NTcwXHU2MzZFXG4gICAgYXdhaXQgdGhpcy5sb2FkRGF0YSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBlbnN1cmVEYXRhRm9sZGVyKCkge1xuICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzLmFwcC52YXVsdC5hZGFwdGVyO1xuICAgIFxuICAgIC8vIFx1NTIxQlx1NUVGQVx1NEUzQlx1NjU3MFx1NjM2RVx1NjU4N1x1NEVGNlx1NTkzOVxuICAgIGlmICghKGF3YWl0IGFkYXB0ZXIuZXhpc3RzKHRoaXMuZGF0YUZvbGRlcikpKSB7XG4gICAgICBhd2FpdCBhZGFwdGVyLm1rZGlyKHRoaXMuZGF0YUZvbGRlcik7XG4gICAgfVxuXG4gICAgLy8gXHU1MjFCXHU1RUZBXHU1QjUwXHU2NTg3XHU0RUY2XHU1OTM5XG4gICAgY29uc3Qgc3ViZm9sZGVycyA9IFsnaW5kZXhlcycsICdjb25maWcnLCAnY2FjaGUnXTtcbiAgICBmb3IgKGNvbnN0IGZvbGRlciBvZiBzdWJmb2xkZXJzKSB7XG4gICAgICBjb25zdCBwYXRoID0gYCR7dGhpcy5kYXRhRm9sZGVyfS8ke2ZvbGRlcn1gO1xuICAgICAgaWYgKCEoYXdhaXQgYWRhcHRlci5leGlzdHMocGF0aCkpKSB7XG4gICAgICAgIGF3YWl0IGFkYXB0ZXIubWtkaXIocGF0aCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkRGF0YSgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGVudFBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L2NvbnRlbnQtdW5pdHMuanNvbmA7XG4gICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5hcHAudmF1bHQuYWRhcHRlcjtcblxuICAgICAgaWYgKGF3YWl0IGFkYXB0ZXIuZXhpc3RzKGNvbnRlbnRQYXRoKSkge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgYWRhcHRlci5yZWFkKGNvbnRlbnRQYXRoKTtcbiAgICAgICAgY29uc3QgdW5pdHM6IENvbnRlbnRVbml0W10gPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCB1bml0IG9mIHVuaXRzKSB7XG4gICAgICAgICAgdGhpcy5jb250ZW50VW5pdHMuc2V0KHVuaXQuaWQsIHVuaXQpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFx1Njc4NFx1NUVGQVx1NjU4N1x1NEVGNlx1N0QyMlx1NUYxNVxuICAgICAgICAgIGlmICghdGhpcy5maWxlSW5kZXguaGFzKHVuaXQuc291cmNlLmZpbGUpKSB7XG4gICAgICAgICAgICB0aGlzLmZpbGVJbmRleC5zZXQodW5pdC5zb3VyY2UuZmlsZSwgW10pO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmZpbGVJbmRleC5nZXQodW5pdC5zb3VyY2UuZmlsZSkhLnB1c2godW5pdC5pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBkYXRhOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzYXZlQ29udGVudFVuaXQodW5pdDogQ29udGVudFVuaXQpIHtcbiAgICB0aGlzLmNvbnRlbnRVbml0cy5zZXQodW5pdC5pZCwgdW5pdCk7XG4gICAgXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU2NTg3XHU0RUY2XHU3RDIyXHU1RjE1XG4gICAgaWYgKCF0aGlzLmZpbGVJbmRleC5oYXModW5pdC5zb3VyY2UuZmlsZSkpIHtcbiAgICAgIHRoaXMuZmlsZUluZGV4LnNldCh1bml0LnNvdXJjZS5maWxlLCBbXSk7XG4gICAgfVxuICAgIGlmICghdGhpcy5maWxlSW5kZXguZ2V0KHVuaXQuc291cmNlLmZpbGUpIS5pbmNsdWRlcyh1bml0LmlkKSkge1xuICAgICAgdGhpcy5maWxlSW5kZXguZ2V0KHVuaXQuc291cmNlLmZpbGUpIS5wdXNoKHVuaXQuaWQpO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMucGVyc2lzdCgpO1xuICB9XG5cbiAgYXN5bmMgc2F2ZUNvbnRlbnRVbml0cyh1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIGZvciAoY29uc3QgdW5pdCBvZiB1bml0cykge1xuICAgICAgdGhpcy5jb250ZW50VW5pdHMuc2V0KHVuaXQuaWQsIHVuaXQpO1xuICAgICAgXG4gICAgICBpZiAoIXRoaXMuZmlsZUluZGV4Lmhhcyh1bml0LnNvdXJjZS5maWxlKSkge1xuICAgICAgICB0aGlzLmZpbGVJbmRleC5zZXQodW5pdC5zb3VyY2UuZmlsZSwgW10pO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmZpbGVJbmRleC5nZXQodW5pdC5zb3VyY2UuZmlsZSkhLmluY2x1ZGVzKHVuaXQuaWQpKSB7XG4gICAgICAgIHRoaXMuZmlsZUluZGV4LmdldCh1bml0LnNvdXJjZS5maWxlKSEucHVzaCh1bml0LmlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnBlcnNpc3QoKTtcbiAgfVxuXG4gIGdldENvbnRlbnRVbml0KGlkOiBzdHJpbmcpOiBDb250ZW50VW5pdCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuY29udGVudFVuaXRzLmdldChpZCk7XG4gIH1cblxuICBnZXRDb250ZW50VW5pdHNCeUZpbGUoZmlsZVBhdGg6IHN0cmluZyk6IENvbnRlbnRVbml0W10ge1xuICAgIGNvbnN0IGlkcyA9IHRoaXMuZmlsZUluZGV4LmdldChmaWxlUGF0aCkgfHwgW107XG4gICAgcmV0dXJuIGlkcy5tYXAoaWQgPT4gdGhpcy5jb250ZW50VW5pdHMuZ2V0KGlkKSkuZmlsdGVyKEJvb2xlYW4pIGFzIENvbnRlbnRVbml0W107XG4gIH1cblxuICBnZXRDb250ZW50VW5pdHNCeVR5cGUodHlwZTogQ29udGVudFVuaXRbJ3R5cGUnXSk6IENvbnRlbnRVbml0W10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuY29udGVudFVuaXRzLnZhbHVlcygpKS5maWx0ZXIodW5pdCA9PiB1bml0LnR5cGUgPT09IHR5cGUpO1xuICB9XG5cbiAgZ2V0QWxsQ29udGVudFVuaXRzKCk6IENvbnRlbnRVbml0W10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuY29udGVudFVuaXRzLnZhbHVlcygpKTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZUNvbnRlbnRVbml0KGlkOiBzdHJpbmcpIHtcbiAgICBjb25zdCB1bml0ID0gdGhpcy5jb250ZW50VW5pdHMuZ2V0KGlkKTtcbiAgICBpZiAodW5pdCkge1xuICAgICAgdGhpcy5jb250ZW50VW5pdHMuZGVsZXRlKGlkKTtcbiAgICAgIFxuICAgICAgLy8gXHU2NkY0XHU2NUIwXHU2NTg3XHU0RUY2XHU3RDIyXHU1RjE1XG4gICAgICBjb25zdCBmaWxlVW5pdHMgPSB0aGlzLmZpbGVJbmRleC5nZXQodW5pdC5zb3VyY2UuZmlsZSk7XG4gICAgICBpZiAoZmlsZVVuaXRzKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZmlsZVVuaXRzLmluZGV4T2YoaWQpO1xuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgIGZpbGVVbml0cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMucGVyc2lzdCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcGVyc2lzdCgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGVudFBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L2NvbnRlbnQtdW5pdHMuanNvbmA7XG4gICAgICBjb25zdCB1bml0cyA9IEFycmF5LmZyb20odGhpcy5jb250ZW50VW5pdHMudmFsdWVzKCkpO1xuICAgICAgY29uc3QgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHVuaXRzLCBudWxsLCAyKTtcbiAgICAgIFxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShjb250ZW50UGF0aCwgZGF0YSk7XG4gICAgICBcbiAgICAgIC8vIFx1NEZERFx1NUI1OFx1N0QyMlx1NUYxNVxuICAgICAgY29uc3QgaW5kZXhQYXRoID0gYCR7dGhpcy5kYXRhRm9sZGVyfS9pbmRleGVzL2ZpbGUtaW5kZXguanNvbmA7XG4gICAgICBjb25zdCBpbmRleERhdGEgPSBKU09OLnN0cmluZ2lmeShcbiAgICAgICAgT2JqZWN0LmZyb21FbnRyaWVzKHRoaXMuZmlsZUluZGV4KSxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgMlxuICAgICAgKTtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoaW5kZXhQYXRoLCBpbmRleERhdGEpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwZXJzaXN0aW5nIGRhdGE6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxufSIsICJpbXBvcnQgeyBBcHAsIFRGaWxlLCBOb3RpY2UsIEVkaXRvciwgTWVudSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERhdGFNYW5hZ2VyLCBDb250ZW50VW5pdCB9IGZyb20gJy4vRGF0YU1hbmFnZXInO1xuaW1wb3J0IHsgRmxhc2hjYXJkTWFuYWdlciB9IGZyb20gJy4vRmxhc2hjYXJkTWFuYWdlcic7XG5cbmV4cG9ydCBjbGFzcyBFeHRyYWN0aW9uRW5naW5lIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBhcHA6IEFwcCxcbiAgICBwcml2YXRlIGRhdGFNYW5hZ2VyOiBEYXRhTWFuYWdlcixcbiAgICBwcml2YXRlIGZsYXNoY2FyZE1hbmFnZXI6IEZsYXNoY2FyZE1hbmFnZXIgXG4gICkge31cblxuICAvKipcbiAgICogXHU2Q0U4XHU1MThDXHU1M0YzXHU5NTJFXHU4M0RDXHU1MzU1XG4gICAqL1xuICByZWdpc3RlckNvbnRleHRNZW51KG1lbnU6IE1lbnUsIGVkaXRvcjogRWRpdG9yLCBmaWxlOiBURmlsZSkge1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICBpZiAoIXNlbGVjdGlvbikgcmV0dXJuO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHVEODNEXHVEQ0REIEV4dHJhY3QgYXMgdGV4dCBvbmx5JylcbiAgICAgICAgLnNldEljb24oJ2ZpbGUtdGV4dCcpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmV4dHJhY3RTZWxlY3RlZFRleHQoZWRpdG9yLCBmaWxlLCAndGV4dCcpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1Mjc1MyBFeHRyYWN0IGFzIFFBIGNhcmQnKVxuICAgICAgICAuc2V0SWNvbignaGVscC1jaXJjbGUnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5leHRyYWN0U2VsZWN0ZWRUZXh0KGVkaXRvciwgZmlsZSwgJ1FBJyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHUyNzBGXHVGRTBGIEV4dHJhY3QgYXMgQ2xvemUgY2FyZCcpXG4gICAgICAgIC5zZXRJY29uKCdoaWdobGlnaHRlcicpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmV4dHJhY3RTZWxlY3RlZFRleHQoZWRpdG9yLCBmaWxlLCAnY2xvemUnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogXHU2M0QwXHU1M0Q2XHU5MDA5XHU0RTJEXHU3Njg0XHU2NTg3XHU2NzJDXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGV4dHJhY3RTZWxlY3RlZFRleHQoXG4gICAgZWRpdG9yOiBFZGl0b3IsIFxuICAgIGZpbGU6IFRGaWxlLCBcbiAgICBleHRyYWN0VHlwZTogJ3RleHQnIHwgJ1FBJyB8ICdjbG96ZSdcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgIGlmICghc2VsZWN0aW9uKSB7XG4gICAgICBuZXcgTm90aWNlKCdObyB0ZXh0IHNlbGVjdGVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcignZnJvbScpO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgIGNvbnN0IG9mZnNldCA9IHRoaXMuZ2V0T2Zmc2V0RnJvbUN1cnNvcihjb250ZW50LCBjdXJzb3IubGluZSwgY3Vyc29yLmNoKTtcblxuICAgIHRyeSB7XG4gICAgICBsZXQgdW5pdDogQ29udGVudFVuaXQ7XG5cbiAgICAgIHN3aXRjaCAoZXh0cmFjdFR5cGUpIHtcbiAgICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgICAgdW5pdCA9IHRoaXMuY3JlYXRlVGV4dFVuaXQoZmlsZSwgc2VsZWN0aW9uLCBvZmZzZXQsIGNvbnRlbnQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdRQSc6XG4gICAgICAgICAgdW5pdCA9IHRoaXMuY3JlYXRlUUFVbml0KGZpbGUsIHNlbGVjdGlvbiwgb2Zmc2V0LCBjb250ZW50KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnY2xvemUnOlxuICAgICAgICAgIHVuaXQgPSB0aGlzLmNyZWF0ZUNsb3plVW5pdChmaWxlLCBzZWxlY3Rpb24sIG9mZnNldCwgY29udGVudCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIC8vIDEuIFx1NTE0OFx1NEZERFx1NUI1OCBDb250ZW50VW5pdFxuICAgICAgYXdhaXQgdGhpcy5kYXRhTWFuYWdlci5zYXZlQ29udGVudFVuaXRzKFt1bml0XSk7XG4gICAgICBcbiAgICAgIC8vIDIuIFx1NTk4Mlx1Njc5Q1x1NjYyRiBRQSBcdTYyMTYgY2xvemVcdUZGMENcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcbiAgICAgIGlmIChleHRyYWN0VHlwZSA9PT0gJ1FBJyB8fCBleHRyYWN0VHlwZSA9PT0gJ2Nsb3plJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGNhcmRUeXBlID0gZXh0cmFjdFR5cGUgPT09ICdRQScgPyAncWEnIDogJ2Nsb3plJztcbiAgICAgICAgICBjb25zdCBmbGFzaGNhcmQgPSBhd2FpdCB0aGlzLmZsYXNoY2FyZE1hbmFnZXIuY3JlYXRlRmxhc2hjYXJkRnJvbVVuaXQodW5pdCwge1xuICAgICAgICAgICAgY2FyZFR5cGU6IGNhcmRUeXBlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gMy4gXHU1MThEXHU2QjIxXHU0RkREXHU1QjU4IHVuaXRcdUZGMDhcdTY2RjRcdTY1QjAgZmxhc2hjYXJkSWRzXHVGRjA5XG4gICAgICAgICAgYXdhaXQgdGhpcy5kYXRhTWFuYWdlci5zYXZlQ29udGVudFVuaXRzKFt1bml0XSk7XG4gICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignW2V4dHJhY3RTZWxlY3RlZFRleHRdIFx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1NTkzMVx1OEQyNTonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgdHlwZU5hbWVzID0ge1xuICAgICAgICB0ZXh0OiAndGV4dCcsXG4gICAgICAgIFFBOiAnUUEgY2FyZCcsXG4gICAgICAgIGNsb3plOiAnY2xvemUgY2FyZCdcbiAgICAgIH07XG4gICAgICBcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBFeHRyYWN0ZWQgYXMgJHt0eXBlTmFtZXNbZXh0cmFjdFR5cGVdfWApO1xuICAgICAgXG4gICAgICAvLyA0LiBcdTUyMzdcdTY1QjBcdTYyNDBcdTY3MDlcdTg5QzZcdTU2RkVcbiAgICAgIHRoaXMucmVmcmVzaEFsbFZpZXdzKCk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZXh0cmFjdGluZyBzZWxlY3Rpb246JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShgXHUyNzRDIEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NTIxQlx1NUVGQVx1N0VBRlx1NjU4N1x1NjcyQ1x1NTM1NVx1NTE0M1xuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVUZXh0VW5pdChcbiAgICBmaWxlOiBURmlsZSxcbiAgICBzZWxlY3Rpb246IHN0cmluZyxcbiAgICBvZmZzZXQ6IG51bWJlcixcbiAgICBmaWxlQ29udGVudDogc3RyaW5nXG4gICk6IENvbnRlbnRVbml0IHtcbiAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuY2FsY3VsYXRlUG9zaXRpb24oZmlsZUNvbnRlbnQsIG9mZnNldCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVJZCgpLFxuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgY29udGVudDogc2VsZWN0aW9uLnRyaW0oKSxcbiAgICAgIGZ1bGxDb250ZXh0OiBzZWxlY3Rpb24udHJpbSgpLFxuICAgICAgc291cmNlOiB7XG4gICAgICAgIGZpbGU6IGZpbGUucGF0aCxcbiAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICBzdGFydDogb2Zmc2V0LFxuICAgICAgICAgIGVuZDogb2Zmc2V0ICsgc2VsZWN0aW9uLmxlbmd0aCxcbiAgICAgICAgICBsaW5lOiBwb3NpdGlvbi5saW5lXG4gICAgICAgIH0sXG4gICAgICAgIGhlYWRpbmc6IHRoaXMuZmluZEhlYWRpbmcoZmlsZUNvbnRlbnQsIG9mZnNldCksXG4gICAgICAgIGFuY2hvckxpbms6IGBbWyR7ZmlsZS5iYXNlbmFtZX0jXiR7dGhpcy5nZW5lcmF0ZUJsb2NrSWQoKX1dXWBcbiAgICAgIH0sXG4gICAgICBleHRyYWN0UnVsZToge1xuICAgICAgICBydWxlSWQ6ICd0ZXh0LW1hbnVhbCcsXG4gICAgICAgIHJ1bGVOYW1lOiAnTWFudWFsIFRleHQgRXh0cmFjdCcsXG4gICAgICAgIGV4dHJhY3RlZEJ5OiAnbWFudWFsJ1xuICAgICAgfSxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICB0YWdzOiB0aGlzLmV4dHJhY3RUYWdzKGZpbGVDb250ZW50LCBvZmZzZXQpXG4gICAgICB9LFxuICAgICAgZmxhc2hjYXJkSWRzOiBbXVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogXHU1MjFCXHU1RUZBIFFBIFx1NTM2MVx1NzI0N1x1NTM1NVx1NTE0M1xuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVRQVVuaXQoXG4gICAgZmlsZTogVEZpbGUsXG4gICAgc2VsZWN0aW9uOiBzdHJpbmcsXG4gICAgb2Zmc2V0OiBudW1iZXIsXG4gICAgZmlsZUNvbnRlbnQ6IHN0cmluZ1xuICApOiBDb250ZW50VW5pdCB7XG4gICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLmNhbGN1bGF0ZVBvc2l0aW9uKGZpbGVDb250ZW50LCBvZmZzZXQpO1xuICAgIFxuICAgIC8vIFx1NUMxRFx1OEJENVx1NTIwNlx1NTI3Mlx1NjIxMFx1OTVFRVx1OTg5OFx1NTQ4Q1x1N0I1NFx1Njg0OFxuICAgIGxldCBxdWVzdGlvbjogc3RyaW5nLCBhbnN3ZXI6IHN0cmluZztcbiAgICBcbiAgICBpZiAoc2VsZWN0aW9uLmluY2x1ZGVzKCc6OicpKSB7XG4gICAgICAvLyBcdTU5ODJcdTY3OUNcdTUzMDVcdTU0MkIgOjogXHU1MjA2XHU5Njk0XHU3QjI2XG4gICAgICBjb25zdCBwYXJ0cyA9IHNlbGVjdGlvbi5zcGxpdCgnOjonKTtcbiAgICAgIHF1ZXN0aW9uID0gcGFydHNbMF0udHJpbSgpO1xuICAgICAgYW5zd2VyID0gcGFydHMuc2xpY2UoMSkuam9pbignOjonKS50cmltKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NTQyNlx1NTIxOVx1NjU3NFx1NEUyQVx1OTAwOVx1NEUyRFx1NjU4N1x1NjcyQ1x1NEY1Q1x1NEUzQVx1OTVFRVx1OTg5OFx1RkYwQ1x1N0I1NFx1Njg0OFx1NEUzQVx1N0E3QVx1RkYwOFx1OTcwMFx1ODk4MVx1NzUyOFx1NjIzN1x1ODg2NVx1NTE0NVx1RkYwOVxuICAgICAgcXVlc3Rpb24gPSBzZWxlY3Rpb24udHJpbSgpO1xuICAgICAgYW5zd2VyID0gJ1tBbnN3ZXIgbmVlZGVkXSc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgIHR5cGU6ICdRQScsXG4gICAgICBjb250ZW50OiBxdWVzdGlvbixcbiAgICAgIGFuc3dlcjogYW5zd2VyLFxuICAgICAgZnVsbENvbnRleHQ6IHNlbGVjdGlvbi50cmltKCksXG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgZmlsZTogZmlsZS5wYXRoLFxuICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgIHN0YXJ0OiBvZmZzZXQsXG4gICAgICAgICAgZW5kOiBvZmZzZXQgKyBzZWxlY3Rpb24ubGVuZ3RoLFxuICAgICAgICAgIGxpbmU6IHBvc2l0aW9uLmxpbmVcbiAgICAgICAgfSxcbiAgICAgICAgaGVhZGluZzogdGhpcy5maW5kSGVhZGluZyhmaWxlQ29udGVudCwgb2Zmc2V0KSxcbiAgICAgICAgYW5jaG9yTGluazogYFtbJHtmaWxlLmJhc2VuYW1lfSNeJHt0aGlzLmdlbmVyYXRlQmxvY2tJZCgpfV1dYFxuICAgICAgfSxcbiAgICAgIGV4dHJhY3RSdWxlOiB7XG4gICAgICAgIHJ1bGVJZDogJ1FBLW1hbnVhbCcsXG4gICAgICAgIHJ1bGVOYW1lOiAnTWFudWFsIFFBIENhcmQnLFxuICAgICAgICBleHRyYWN0ZWRCeTogJ21hbnVhbCdcbiAgICAgIH0sXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgdGFnczogdGhpcy5leHRyYWN0VGFncyhmaWxlQ29udGVudCwgb2Zmc2V0KVxuICAgICAgfSxcbiAgICAgIGZsYXNoY2FyZElkczogW11cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NTIxQlx1NUVGQVx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1NTM2MVx1NzI0N1x1NTM1NVx1NTE0M1xuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVDbG96ZVVuaXQoXG4gICAgZmlsZTogVEZpbGUsXG4gICAgc2VsZWN0aW9uOiBzdHJpbmcsXG4gICAgb2Zmc2V0OiBudW1iZXIsXG4gICAgZmlsZUNvbnRlbnQ6IHN0cmluZ1xuICApOiBDb250ZW50VW5pdCB7XG4gICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLmNhbGN1bGF0ZVBvc2l0aW9uKGZpbGVDb250ZW50LCBvZmZzZXQpO1xuICAgIGNvbnN0IGZ1bGxTZW50ZW5jZSA9IHRoaXMuZXh0cmFjdEZ1bGxTZW50ZW5jZShmaWxlQ29udGVudCwgb2Zmc2V0LCBzZWxlY3Rpb24ubGVuZ3RoKTtcblxuICAgIHJldHVybiB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICB0eXBlOiAnY2xvemUnLFxuICAgICAgY29udGVudDogc2VsZWN0aW9uLnRyaW0oKSxcbiAgICAgIGZ1bGxDb250ZXh0OiBmdWxsU2VudGVuY2UsXG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgZmlsZTogZmlsZS5wYXRoLFxuICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgIHN0YXJ0OiBvZmZzZXQsXG4gICAgICAgICAgZW5kOiBvZmZzZXQgKyBzZWxlY3Rpb24ubGVuZ3RoLFxuICAgICAgICAgIGxpbmU6IHBvc2l0aW9uLmxpbmVcbiAgICAgICAgfSxcbiAgICAgICAgaGVhZGluZzogdGhpcy5maW5kSGVhZGluZyhmaWxlQ29udGVudCwgb2Zmc2V0KSxcbiAgICAgICAgYW5jaG9yTGluazogYFtbJHtmaWxlLmJhc2VuYW1lfSNeJHt0aGlzLmdlbmVyYXRlQmxvY2tJZCgpfV1dYFxuICAgICAgfSxcbiAgICAgIGV4dHJhY3RSdWxlOiB7XG4gICAgICAgIHJ1bGVJZDogJ2Nsb3plLW1hbnVhbCcsXG4gICAgICAgIHJ1bGVOYW1lOiAnTWFudWFsIENsb3plIENhcmQnLFxuICAgICAgICBleHRyYWN0ZWRCeTogJ21hbnVhbCdcbiAgICAgIH0sXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgdGFnczogdGhpcy5leHRyYWN0VGFncyhmaWxlQ29udGVudCwgb2Zmc2V0KVxuICAgICAgfSxcbiAgICAgIGZsYXNoY2FyZElkczogW11cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NEVDRVx1NTE0OVx1NjgwN1x1NEY0RFx1N0Y2RVx1OEJBMVx1N0I5N1x1NjU4N1x1NEVGNlx1NTA0Rlx1NzlGQlx1OTFDRlxuICAgKi9cbiAgcHJpdmF0ZSBnZXRPZmZzZXRGcm9tQ3Vyc29yKGNvbnRlbnQ6IHN0cmluZywgbGluZTogbnVtYmVyLCBjaDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgIGxldCBvZmZzZXQgPSAwO1xuICAgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZTsgaSsrKSB7XG4gICAgICBvZmZzZXQgKz0gbGluZXNbaV0ubGVuZ3RoICsgMTtcbiAgICB9XG4gICAgXG4gICAgb2Zmc2V0ICs9IGNoO1xuICAgIHJldHVybiBvZmZzZXQ7XG4gIH1cblxuICAvKipcbiAgICogXHU2MjZCXHU2M0NGXHU1MzU1XHU0RTJBXHU2NTg3XHU0RUY2XG4gICAqL1xuICBhc3luYyBzY2FuRmlsZShmaWxlOiBURmlsZSk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgY29uc3QgdW5pdHMgPSBhd2FpdCB0aGlzLmV4dHJhY3RDb250ZW50KGZpbGUsIGNvbnRlbnQpO1xuICAgICAgXG4gICAgICBpZiAodW5pdHMubGVuZ3RoID4gMCkge1xuICAgICAgICBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLnNhdmVDb250ZW50VW5pdHModW5pdHMpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcWFDb3VudCA9IHVuaXRzLmZpbHRlcih1ID0+IHUudHlwZSA9PT0gJ1FBJykubGVuZ3RoO1xuICAgICAgICBjb25zdCBjbG96ZUNvdW50ID0gdW5pdHMuZmlsdGVyKHUgPT4gdS50eXBlID09PSAnY2xvemUnKS5sZW5ndGg7XG4gICAgICAgIG5ldyBOb3RpY2UoYEV4dHJhY3RlZCAke3FhQ291bnR9IFFBIGNhcmRzIGFuZCAke2Nsb3plQ291bnR9IGNsb3plIGNhcmRzIGZyb20gJHtmaWxlLm5hbWV9YCk7XG4gICAgICAgIFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnJlZnJlc2hBbGxWaWV3cygpO1xuICAgICAgICB9LCAxMDApO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gdW5pdHMubGVuZ3RoO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbc2NhbkZpbGVdIFx1OTUxOVx1OEJFRjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKGBFcnJvciBzY2FubmluZyBmaWxlOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBcdTUyMzdcdTY1QjBcdTYyNDBcdTY3MDlcdTc2RjhcdTUxNzNcdTg5QzZcdTU2RkVcbiAgICovXG4gIHByaXZhdGUgcmVmcmVzaEFsbFZpZXdzKCkge1xuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKGxlYWYgPT4ge1xuICAgICAgY29uc3Qgdmlld1R5cGUgPSBsZWFmLnZpZXcuZ2V0Vmlld1R5cGUoKTtcbiAgICAgIGlmICh2aWV3VHlwZSA9PT0gJ2xlYXJuaW5nLXN5c3RlbS1zaWRlYmFyLW92ZXJ2aWV3JyB8fCBcbiAgICAgICAgICB2aWV3VHlwZSA9PT0gJ2xlYXJuaW5nLXN5c3RlbS1tYWluLW92ZXJ2aWV3Jykge1xuICAgICAgICAobGVhZi52aWV3IGFzIGFueSkucmVmcmVzaCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjI2Qlx1NjNDRlx1NjU3NFx1NEUyQSBWYXVsdFxuICAgKi9cbiAgYXN5bmMgc2NhblZhdWx0KCk6IFByb21pc2U8eyBzY2FubmVkOiBudW1iZXI7IGV4dHJhY3RlZDogbnVtYmVyIH0+IHtcbiAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBsZXQgc2Nhbm5lZCA9IDA7XG4gICAgbGV0IGV4dHJhY3RlZCA9IDA7XG5cbiAgICBuZXcgTm90aWNlKGBTY2FubmluZyAke2ZpbGVzLmxlbmd0aH0gZmlsZXMuLi5gKTtcblxuICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgY29uc3QgY291bnQgPSBhd2FpdCB0aGlzLnNjYW5GaWxlKGZpbGUpO1xuICAgICAgc2Nhbm5lZCsrO1xuICAgICAgZXh0cmFjdGVkICs9IGNvdW50O1xuICAgIH1cblxuICAgIG5ldyBOb3RpY2UoYFNjYW4gY29tcGxldGUhIEV4dHJhY3RlZCAke2V4dHJhY3RlZH0gaXRlbXMgZnJvbSAke3NjYW5uZWR9IGZpbGVzLmApO1xuXG4gICAgcmV0dXJuIHsgc2Nhbm5lZCwgZXh0cmFjdGVkIH07XG4gIH1cblxuICAvKipcbiAgICogXHVEODNEXHVERDI3IFx1NEZFRVx1NjUzOTogXHU1MTQ4XHU0RkREXHU1QjU4IHVuaXRzXHVGRjBDXHU1MThEXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGV4dHJhY3RDb250ZW50KGZpbGU6IFRGaWxlLCBjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPENvbnRlbnRVbml0W10+IHtcbiAgICBjb25zdCB1bml0czogQ29udGVudFVuaXRbXSA9IFtdO1xuICAgIFxuICAgIC8vIDFcdUZFMEZcdTIwRTMgXHU1MTQ4XHU2M0QwXHU1M0Q2XHU2MjQwXHU2NzA5IHVuaXRzXHVGRjA4XHU0RTBEXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXHVGRjA5XG4gICAgY29uc3QgcWFVbml0cyA9IHRoaXMuZXh0cmFjdFFBQ2FyZHMoZmlsZSwgY29udGVudCk7XG4gICAgdW5pdHMucHVzaCguLi5xYVVuaXRzKTtcbiAgICBcbiAgICBjb25zdCBjbG96ZVVuaXRzID0gdGhpcy5leHRyYWN0Q2xvemVDYXJkcyhmaWxlLCBjb250ZW50KTtcbiAgICB1bml0cy5wdXNoKC4uLmNsb3plVW5pdHMpO1xuICAgIFxuICAgIC8vIDJcdUZFMEZcdTIwRTMgXHU1MTQ4XHU0RkREXHU1QjU4XHU2MjQwXHU2NzA5IHVuaXRzIFx1NTIzMCBEYXRhTWFuYWdlclxuICAgIGlmICh1bml0cy5sZW5ndGggPiAwKSB7XG4gICAgICBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLnNhdmVDb250ZW50VW5pdHModW5pdHMpO1xuICAgIH1cbiAgICBcbiAgICAvLyAzXHVGRTBGXHUyMEUzIFx1NTE4RFx1NEUzQVx1NkJDRlx1NEUyQSB1bml0IFx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVxuICAgIGZvciAoY29uc3QgdW5pdCBvZiB1bml0cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY2FyZFR5cGUgPSB1bml0LnR5cGUgPT09ICdRQScgPyAncWEnIDogJ2Nsb3plJztcbiAgICAgICAgY29uc3QgZmxhc2hjYXJkID0gYXdhaXQgdGhpcy5mbGFzaGNhcmRNYW5hZ2VyLmNyZWF0ZUZsYXNoY2FyZEZyb21Vbml0KHVuaXQsIHtcbiAgICAgICAgICBjYXJkVHlwZTogY2FyZFR5cGVcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbZXh0cmFjdENvbnRlbnRdIFx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1NTkzMVx1OEQyNTonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB1bml0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTI3MDUgXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU0RTNBXHU0RUZCXHU1MkExXHU1QjhDXHU2MjEwXHU2ODA3XHU4QkIwXG4gICAqIFx1NjM5Mlx1OTY2NDogW2NvbXBsZXRpb246OiBkYXRlXSwgW2R1ZTo6IGRhdGVdIFx1N0I0OVx1NEVGQlx1NTJBMVx1NzZGOFx1NTE3M1x1NzY4NCA6OiBcdTY4M0NcdTVGMEZcbiAgICovXG4gIHByaXZhdGUgaXNUYXNrQ29tcGxldGlvbihsaW5lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAvLyBcdTUzMzlcdTkxNERcdTRFRkJcdTUyQTFcdTY4MDdcdThCQjA6IC0gWyBdIFx1NjIxNiAtIFt4XSBcdTVGMDBcdTU5MzRcdTc2ODRcdTg4NEMsXHU0RTE0XHU1MzA1XHU1NDJCIDo6IFxuICAgIGNvbnN0IHRhc2tQYXR0ZXJuID0gL15bXFxzXSotXFxzKlxcW1t4XFxzXVxcXS4qOjovaTtcbiAgICByZXR1cm4gdGFza1BhdHRlcm4udGVzdChsaW5lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTI3MDUgXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU0RTNBXHU2NUU1XHU2NzFGL1x1NjVGNlx1OTVGNFx1NUI1N1x1NkJCNVxuICAgKiBcdTYzOTJcdTk2NjQ6IGRhdGUxOjogMjAyMS0wMi0yNlQxNToxNSwgZGF0ZTI6OiAyMDIxLTA0LTE3IDE4OjAwIFx1N0I0OVx1NjgzQ1x1NUYwRlxuICAgKi9cbiAgcHJpdmF0ZSBpc0RhdGVUaW1lRmllbGQocXVlc3Rpb246IHN0cmluZywgYW5zd2VyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAvLyBcdTY4QzBcdTY3RTVcdTk1RUVcdTk4OThcdTkwRThcdTUyMDZcdTY2MkZcdTU0MjZcdTUzMDVcdTU0MkJcdTVFMzhcdTg5QzFcdTc2ODRcdTY1RTVcdTY3MUYvXHU2NUY2XHU5NUY0XHU1QjU3XHU2QkI1XHU1NDBEXG4gICAgY29uc3QgZGF0ZUZpZWxkUGF0dGVybiA9IC9cXGIoZGF0ZVxcZCp8dGltZVxcZCp8Y3JlYXRlZHx1cGRhdGVkfG1vZGlmaWVkfHNjaGVkdWxlZHxkdWV8Y29tcGxldGlvbilcXGIvaTtcbiAgICBcbiAgICAvLyBcdTY4QzBcdTY3RTVcdTdCNTRcdTY4NDhcdTkwRThcdTUyMDZcdTY2MkZcdTU0MjZcdTRFM0FcdTY1RTVcdTY3MUYvXHU2NUY2XHU5NUY0XHU2ODNDXHU1RjBGXG4gICAgY29uc3QgZGF0ZVRpbWVQYXR0ZXJuID0gL15cXHMqXFxkezR9LVxcZHsyfS1cXGR7Mn0oVHxcXHMpXFxkezJ9OlxcZHsyfXxcXGR7NH0tXFxkezJ9LVxcZHsyfVxccytcXGR7Mn06XFxkezJ9LztcbiAgICBjb25zdCBkYXRlT25seVBhdHRlcm4gPSAvXlxccypcXGR7NH0tXFxkezJ9LVxcZHsyfVxccyokLztcbiAgICBcbiAgICByZXR1cm4gZGF0ZUZpZWxkUGF0dGVybi50ZXN0KHF1ZXN0aW9uKSAmJiBcbiAgICAgICAgICAgKGRhdGVUaW1lUGF0dGVybi50ZXN0KGFuc3dlcikgfHwgZGF0ZU9ubHlQYXR0ZXJuLnRlc3QoYW5zd2VyKSk7XG4gIH1cblxuICAvKipcbiAgICogXHUyNzA1IFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NEUzQSBFeGNhbGlkcmF3IFx1OUFEOFx1NEVBRVxuICAgKiBcdTYzOTJcdTk2NjQ6ID09c3dpdGNoIHRvIGV4Y2FsaWRyYXcgdmlldy4uLj09IFx1OEZEOVx1N0M3Qlx1NzI3OVx1NUI5QVx1OUFEOFx1NEVBRVxuICAgKi9cbiAgcHJpdmF0ZSBpc0V4Y2FsaWRyYXdIaWdobGlnaHQobWF0Y2hUZXh0OiBzdHJpbmcsIGxpbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1OUFEOFx1NEVBRVx1NTE4NVx1NUJCOVx1NTMwNVx1NTQyQiBleGNhbGlkcmF3IFx1NzZGOFx1NTE3M1x1NTE3M1x1OTUyRVx1OEJDRFxuICAgIGNvbnN0IGV4Y2FsaWRyYXdLZXl3b3JkcyA9IC9leGNhbGlkcmF3fGRyYXdpbmd8c2tldGNoL2k7XG4gICAgcmV0dXJuIGV4Y2FsaWRyYXdLZXl3b3Jkcy50ZXN0KG1hdGNoVGV4dCkgfHwgZXhjYWxpZHJhd0tleXdvcmRzLnRlc3QobGluZSk7XG4gIH1cblxuICAvKipcbiAgICogXHUyNzA1IFx1NjNEMFx1NTNENiBRQSBcdTUzNjFcdTcyNDcgKFx1NjgzQ1x1NUYwRjogUXVlc3Rpb24gOjogQW5zd2VyKVxuICAgKiBcdTY1QjBcdTU4OUU6IFx1OEZDN1x1NkVFNFx1NEVGQlx1NTJBMVx1NUI4Q1x1NjIxMFx1NjgwN1x1OEJCMFx1NTQ4Q1x1NjVFNVx1NjcxRlx1NjVGNlx1OTVGNFx1NUI1N1x1NkJCNVxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0UUFDYXJkcyhmaWxlOiBURmlsZSwgY29udGVudDogc3RyaW5nKTogQ29udGVudFVuaXRbXSB7XG4gICAgY29uc3QgdW5pdHM6IENvbnRlbnRVbml0W10gPSBbXTtcbiAgICBjb25zdCBxYVJlZ2V4ID0gL14oLis/KVxccyo6OlxccyooLis/KSQvZ207XG4gICAgbGV0IG1hdGNoO1xuXG4gICAgd2hpbGUgKChtYXRjaCA9IHFhUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IGZ1bGxNYXRjaCA9IG1hdGNoWzBdO1xuICAgICAgY29uc3QgcXVlc3Rpb24gPSBtYXRjaFsxXS50cmltKCk7XG4gICAgICBjb25zdCBhbnN3ZXIgPSBtYXRjaFsyXS50cmltKCk7XG4gICAgICBcbiAgICAgIC8vIFx1MjcwNSBcdThERjNcdThGQzdcdTRFRkJcdTUyQTFcdTVCOENcdTYyMTBcdTY4MDdcdThCQjBcbiAgICAgIGlmICh0aGlzLmlzVGFza0NvbXBsZXRpb24oZnVsbE1hdGNoKSkge1xuICAgICAgICBjb25zb2xlLmxvZygnW2V4dHJhY3RRQUNhcmRzXSBcdThERjNcdThGQzdcdTRFRkJcdTUyQTFcdTY4MDdcdThCQjA6JywgZnVsbE1hdGNoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1MjcwNSBcdThERjNcdThGQzdcdTY1RTVcdTY3MUZcdTY1RjZcdTk1RjRcdTVCNTdcdTZCQjVcbiAgICAgIGlmICh0aGlzLmlzRGF0ZVRpbWVGaWVsZChxdWVzdGlvbiwgYW5zd2VyKSkge1xuICAgICAgICBjb25zb2xlLmxvZygnW2V4dHJhY3RRQUNhcmRzXSBcdThERjNcdThGQzdcdTY1RTVcdTY3MUZcdTY1RjZcdTk1RjRcdTVCNTdcdTZCQjU6JywgZnVsbE1hdGNoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5jYWxjdWxhdGVQb3NpdGlvbihjb250ZW50LCBtYXRjaC5pbmRleCk7XG5cbiAgICAgIGNvbnN0IHVuaXQ6IENvbnRlbnRVbml0ID0ge1xuICAgICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICAgIHR5cGU6ICdRQScsXG4gICAgICAgIGNvbnRlbnQ6IHF1ZXN0aW9uLFxuICAgICAgICBhbnN3ZXI6IGFuc3dlcixcbiAgICAgICAgZnVsbENvbnRleHQ6IGZ1bGxNYXRjaCxcbiAgICAgICAgc291cmNlOiB7XG4gICAgICAgICAgZmlsZTogZmlsZS5wYXRoLFxuICAgICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgICBzdGFydDogbWF0Y2guaW5kZXgsXG4gICAgICAgICAgICBlbmQ6IG1hdGNoLmluZGV4ICsgZnVsbE1hdGNoLmxlbmd0aCxcbiAgICAgICAgICAgIGxpbmU6IHBvc2l0aW9uLmxpbmVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGhlYWRpbmc6IHRoaXMuZmluZEhlYWRpbmcoY29udGVudCwgbWF0Y2guaW5kZXgpLFxuICAgICAgICAgIGFuY2hvckxpbms6IGBbWyR7ZmlsZS5iYXNlbmFtZX0jXiR7dGhpcy5nZW5lcmF0ZUJsb2NrSWQoKX1dXWBcbiAgICAgICAgfSxcbiAgICAgICAgZXh0cmFjdFJ1bGU6IHtcbiAgICAgICAgICBydWxlSWQ6ICdRQScsXG4gICAgICAgICAgcnVsZU5hbWU6ICdRQSBDYXJkJyxcbiAgICAgICAgICBleHRyYWN0ZWRCeTogJ2F1dG8nXG4gICAgICAgIH0sXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgICB0YWdzOiB0aGlzLmV4dHJhY3RUYWdzKGNvbnRlbnQsIG1hdGNoLmluZGV4KVxuICAgICAgICB9LFxuICAgICAgICBmbGFzaGNhcmRJZHM6IFtdXG4gICAgICB9O1xuXG4gICAgICB1bml0cy5wdXNoKHVuaXQpO1xuICAgIH1cblxuICAgIHJldHVybiB1bml0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTI3MDUgXHU2M0QwXHU1M0Q2XHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU1MzYxIChcdTY4M0NcdTVGMEY6ID09aGlnaGxpZ2h0PT0pXG4gICAqIFx1NjVCMFx1NTg5RTogXHU4RkM3XHU2RUU0IEV4Y2FsaWRyYXcgXHU5QUQ4XHU0RUFFXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RDbG96ZUNhcmRzKGZpbGU6IFRGaWxlLCBjb250ZW50OiBzdHJpbmcpOiBDb250ZW50VW5pdFtdIHtcbiAgICBjb25zdCB1bml0czogQ29udGVudFVuaXRbXSA9IFtdO1xuICAgIGNvbnN0IGhpZ2hsaWdodFJlZ2V4ID0gLz09KC4rPyk9PS9nO1xuICAgIGxldCBtYXRjaDtcblxuICAgIHdoaWxlICgobWF0Y2ggPSBoaWdobGlnaHRSZWdleC5leGVjKGNvbnRlbnQpKSAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgZXh0cmFjdGVkVGV4dCA9IG1hdGNoWzFdO1xuICAgICAgY29uc3QgZnVsbE1hdGNoID0gbWF0Y2hbMF07XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuY2FsY3VsYXRlUG9zaXRpb24oY29udGVudCwgbWF0Y2guaW5kZXgpO1xuICAgICAgXG4gICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTg4NENcdTUxODVcdTVCQjlcbiAgICAgIGNvbnN0IGxpbmVTdGFydCA9IGNvbnRlbnQubGFzdEluZGV4T2YoJ1xcbicsIG1hdGNoLmluZGV4KSArIDE7XG4gICAgICBjb25zdCBsaW5lRW5kID0gY29udGVudC5pbmRleE9mKCdcXG4nLCBtYXRjaC5pbmRleCk7XG4gICAgICBjb25zdCBjdXJyZW50TGluZSA9IGNvbnRlbnQuc3Vic3RyaW5nKGxpbmVTdGFydCwgbGluZUVuZCA9PT0gLTEgPyBjb250ZW50Lmxlbmd0aCA6IGxpbmVFbmQpO1xuICAgICAgXG4gICAgICAvLyBcdTI3MDUgXHU4REYzXHU4RkM3IEV4Y2FsaWRyYXcgXHU5QUQ4XHU0RUFFXG4gICAgICBpZiAodGhpcy5pc0V4Y2FsaWRyYXdIaWdobGlnaHQoZXh0cmFjdGVkVGV4dCwgY3VycmVudExpbmUpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbZXh0cmFjdENsb3plQ2FyZHNdIFx1OERGM1x1OEZDNyBFeGNhbGlkcmF3IFx1OUFEOFx1NEVBRTonLCBleHRyYWN0ZWRUZXh0KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGZ1bGxTZW50ZW5jZSA9IHRoaXMuZXh0cmFjdEZ1bGxTZW50ZW5jZShjb250ZW50LCBtYXRjaC5pbmRleCwgZnVsbE1hdGNoLmxlbmd0aCk7XG5cbiAgICAgIGNvbnN0IHVuaXQ6IENvbnRlbnRVbml0ID0ge1xuICAgICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICAgIHR5cGU6ICdjbG96ZScsXG4gICAgICAgIGNvbnRlbnQ6IGV4dHJhY3RlZFRleHQudHJpbSgpLFxuICAgICAgICBmdWxsQ29udGV4dDogZnVsbFNlbnRlbmNlLFxuICAgICAgICBzb3VyY2U6IHtcbiAgICAgICAgICBmaWxlOiBmaWxlLnBhdGgsXG4gICAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICAgIHN0YXJ0OiBtYXRjaC5pbmRleCxcbiAgICAgICAgICAgIGVuZDogbWF0Y2guaW5kZXggKyBmdWxsTWF0Y2gubGVuZ3RoLFxuICAgICAgICAgICAgbGluZTogcG9zaXRpb24ubGluZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgaGVhZGluZzogdGhpcy5maW5kSGVhZGluZyhjb250ZW50LCBtYXRjaC5pbmRleCksXG4gICAgICAgICAgYW5jaG9yTGluazogYFtbJHtmaWxlLmJhc2VuYW1lfSNeJHt0aGlzLmdlbmVyYXRlQmxvY2tJZCgpfV1dYFxuICAgICAgICB9LFxuICAgICAgICBleHRyYWN0UnVsZToge1xuICAgICAgICAgIHJ1bGVJZDogJ2Nsb3plJyxcbiAgICAgICAgICBydWxlTmFtZTogJ0Nsb3plIERlbGV0aW9uJyxcbiAgICAgICAgICBleHRyYWN0ZWRCeTogJ2F1dG8nXG4gICAgICAgIH0sXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgICB0YWdzOiB0aGlzLmV4dHJhY3RUYWdzKGNvbnRlbnQsIG1hdGNoLmluZGV4KVxuICAgICAgICB9LFxuICAgICAgICBmbGFzaGNhcmRJZHM6IFtdXG4gICAgICB9O1xuXG4gICAgICB1bml0cy5wdXNoKHVuaXQpO1xuICAgIH1cblxuICAgIHJldHVybiB1bml0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYzRDBcdTUzRDZcdTUzMDVcdTU0MkJcdTlBRDhcdTRFQUVcdTc2ODRcdTVCOENcdTY1NzRcdTUzRTVcdTVCNTBcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdEZ1bGxTZW50ZW5jZShjb250ZW50OiBzdHJpbmcsIGhpZ2hsaWdodFN0YXJ0OiBudW1iZXIsIGhpZ2hsaWdodExlbmd0aDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCBzZW50ZW5jZUVuZHMgPSAvWy4hP1x1MzAwMlx1RkYwMT9cXG5dLztcbiAgICBcbiAgICBsZXQgc3RhcnQgPSBoaWdobGlnaHRTdGFydDtcbiAgICB3aGlsZSAoc3RhcnQgPiAwKSB7XG4gICAgICBjb25zdCBjaGFyID0gY29udGVudFtzdGFydCAtIDFdO1xuICAgICAgaWYgKHNlbnRlbmNlRW5kcy50ZXN0KGNoYXIpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhcnQtLTtcbiAgICB9XG4gICAgXG4gICAgbGV0IGVuZCA9IGhpZ2hsaWdodFN0YXJ0ICsgaGlnaGxpZ2h0TGVuZ3RoO1xuICAgIHdoaWxlIChlbmQgPCBjb250ZW50Lmxlbmd0aCkge1xuICAgICAgY29uc3QgY2hhciA9IGNvbnRlbnRbZW5kXTtcbiAgICAgIGlmIChzZW50ZW5jZUVuZHMudGVzdChjaGFyKSkge1xuICAgICAgICBlbmQrKztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBlbmQrKztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGNvbnRlbnQuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpLnRyaW0oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdThCQTFcdTdCOTdcdTY1ODdcdTY3MkNcdTRGNERcdTdGNkVcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlUG9zaXRpb24oY29udGVudDogc3RyaW5nLCBvZmZzZXQ6IG51bWJlcik6IHsgbGluZTogbnVtYmVyOyBjb2x1bW46IG51bWJlciB9IHtcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3Vic3RyaW5nKDAsIG9mZnNldCkuc3BsaXQoJ1xcbicpO1xuICAgIHJldHVybiB7XG4gICAgICBsaW5lOiBsaW5lcy5sZW5ndGggLSAxLFxuICAgICAgY29sdW1uOiBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXS5sZW5ndGhcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjdFNVx1NjI3RVx1NjI0MFx1NTcyOFx1NjgwN1x1OTg5OFxuICAgKi9cbiAgcHJpdmF0ZSBmaW5kSGVhZGluZyhjb250ZW50OiBzdHJpbmcsIHBvc2l0aW9uOiBudW1iZXIpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGJlZm9yZUNvbnRlbnQgPSBjb250ZW50LnN1YnN0cmluZygwLCBwb3NpdGlvbik7XG4gICAgY29uc3QgaGVhZGluZ3MgPSBiZWZvcmVDb250ZW50Lm1hdGNoKC9eI3sxLDZ9IC4rJC9nbSk7XG4gICAgcmV0dXJuIGhlYWRpbmdzID8gaGVhZGluZ3NbaGVhZGluZ3MubGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogXHU2M0QwXHU1M0Q2XHU5NjQ0XHU4RkQxXHU3Njg0XHU2ODA3XHU3QjdFXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RUYWdzKGNvbnRlbnQ6IHN0cmluZywgcG9zaXRpb246IG51bWJlcik6IHN0cmluZ1tdIHtcbiAgICBjb25zdCB0YWdzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgXG4gICAgLy8gMS4gXHU2M0QwXHU1M0Q2IFlBTUwgZnJvbnRtYXR0ZXIgXHU0RTJEXHU3Njg0IHRhZ3NcbiAgICBjb25zdCB5YW1sTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XG4gICAgaWYgKHlhbWxNYXRjaCkge1xuICAgICAgY29uc3QgeWFtbENvbnRlbnQgPSB5YW1sTWF0Y2hbMV07XG4gICAgICBjb25zdCB0YWdzTWF0Y2ggPSB5YW1sQ29udGVudC5tYXRjaCgvXnRhZ3M6XFxzKiguKykkL20pO1xuICAgICAgaWYgKHRhZ3NNYXRjaCkge1xuICAgICAgICBjb25zdCB0YWdDb250ZW50ID0gdGFnc01hdGNoWzFdLnRyaW0oKTtcbiAgICAgICAgaWYgKHRhZ0NvbnRlbnQuc3RhcnRzV2l0aCgnWycpKSB7XG4gICAgICAgICAgY29uc3QgYXJyYXlUYWdzID0gdGFnQ29udGVudC5tYXRjaCgvW1xcdy8tXSsvZyk7XG4gICAgICAgICAgYXJyYXlUYWdzPy5mb3JFYWNoKHRhZyA9PiB0YWdzLmFkZChgIyR7dGFnfWApKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0YWdDb250ZW50LnNwbGl0KCcsJykuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2xlYW5lZCA9IHRhZy50cmltKCk7XG4gICAgICAgICAgICBpZiAoY2xlYW5lZCkgdGFncy5hZGQoYCMke2NsZWFuZWR9YCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gMi4gXHU2M0QwXHU1M0Q2XHU1M0U1XHU1QjUwXHU2NzJCXHU1QzNFXHU3Njg0IGlubGluZSB0YWdzXG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnN1YnN0cmluZygwLCBwb3NpdGlvbikuc3BsaXQoJ1xcbicpO1xuICAgIGNvbnN0IGN1cnJlbnRMaW5lID0gbGluZXMubGVuZ3RoIC0gMTtcbiAgICBjb25zdCBsaW5lQ29udGVudCA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpW2N1cnJlbnRMaW5lXSB8fCAnJztcbiAgICBcbiAgICBjb25zdCBpbmxpbmVUYWdSZWdleCA9IC8jW1xcdy8tXSsvZztcbiAgICBjb25zdCBpbmxpbmVUYWdzID0gbGluZUNvbnRlbnQubWF0Y2goaW5saW5lVGFnUmVnZXgpO1xuICAgIGlubGluZVRhZ3M/LmZvckVhY2godGFnID0+IHRhZ3MuYWRkKHRhZykpO1xuICAgIFxuICAgIHJldHVybiBBcnJheS5mcm9tKHRhZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NzUxRlx1NjIxMFx1NTUyRlx1NEUwMCBJRFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gIH1cblxuICAvKipcbiAgICogXHU3NTFGXHU2MjEwIEJsb2NrIElEXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlQmxvY2tJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgZXh0cmFjdC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDYpfWA7XG4gIH1cbn0iLCAiaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW5ub3RhdGlvbiB7XG4gIGlkOiBzdHJpbmc7XG4gIHRhcmdldFR5cGU6ICdjb250ZW50JyB8ICdmaWxlJztcbiAgdGFyZ2V0SWQ6IHN0cmluZztcbiAgY29udGVudDogc3RyaW5nO1xuICBiYWRnZT86IHtcbiAgICB0ZXh0OiBzdHJpbmc7XG4gICAgY29sb3I6IHN0cmluZztcbiAgICBpY29uPzogc3RyaW5nO1xuICB9O1xuICBtZXRhZGF0YToge1xuICAgIGNyZWF0ZWRBdDogbnVtYmVyO1xuICAgIHVwZGF0ZWRBdDogbnVtYmVyO1xuICAgIGlzUGlubmVkPzogYm9vbGVhbjtcbiAgfTtcbn1cblxuZXhwb3J0IGNsYXNzIEFubm90YXRpb25NYW5hZ2VyIHtcbiAgcHJpdmF0ZSBhbm5vdGF0aW9uczogTWFwPHN0cmluZywgQW5ub3RhdGlvbj4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgZGF0YUZvbGRlcjogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgYXBwOiBBcHAsXG4gICAgcHJpdmF0ZSBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luXG4gICkge1xuICAgIHRoaXMuZGF0YUZvbGRlciA9IGAke3RoaXMuYXBwLnZhdWx0LmNvbmZpZ0Rpcn0vcGx1Z2lucy9sZWFybmluZy1zeXN0ZW0vZGF0YWA7XG4gIH1cblxuICBhc3luYyBpbml0aWFsaXplKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZEFubm90YXRpb25zKCk7XG4gIH1cblxuICAvKipcbiAgICogXHU1MkEwXHU4RjdEXHU2MjQwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGxvYWRBbm5vdGF0aW9ucygpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGF0aCA9IGAke3RoaXMuZGF0YUZvbGRlcn0vYW5ub3RhdGlvbnMuanNvbmA7XG4gICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5hcHAudmF1bHQuYWRhcHRlcjtcblxuICAgICAgaWYgKGF3YWl0IGFkYXB0ZXIuZXhpc3RzKHBhdGgpKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhZGFwdGVyLnJlYWQocGF0aCk7XG4gICAgICAgIGNvbnN0IGFubm90YXRpb25zOiBBbm5vdGF0aW9uW10gPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBhbm5vdGF0aW9uIG9mIGFubm90YXRpb25zKSB7XG4gICAgICAgICAgdGhpcy5hbm5vdGF0aW9ucy5zZXQoYW5ub3RhdGlvbi5pZCwgYW5ub3RhdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBhbm5vdGF0aW9uczonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NkRGQlx1NTJBMFx1NTE4NVx1NUJCOVx1NjI3OVx1NkNFOFxuICAgKi9cbiAgYXN5bmMgYWRkQ29udGVudEFubm90YXRpb24oXG4gICAgY29udGVudFVuaXRJZDogc3RyaW5nLFxuICAgIGNvbnRlbnQ6IHN0cmluZyxcbiAgICBiYWRnZT86IEFubm90YXRpb25bJ2JhZGdlJ11cbiAgKTogUHJvbWlzZTxBbm5vdGF0aW9uPiB7XG4gICAgY29uc3QgYW5ub3RhdGlvbjogQW5ub3RhdGlvbiA9IHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgIHRhcmdldFR5cGU6ICdjb250ZW50JyxcbiAgICAgIHRhcmdldElkOiBjb250ZW50VW5pdElkLFxuICAgICAgY29udGVudCxcbiAgICAgIGJhZGdlLFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KClcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5hbm5vdGF0aW9ucy5zZXQoYW5ub3RhdGlvbi5pZCwgYW5ub3RhdGlvbik7XG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0KCk7XG5cbiAgICAvLyBcdTY2RjRcdTY1QjAgQ29udGVudFVuaXQgXHU1MTczXHU4MDU0XG4gICAgY29uc3QgY29udGVudFVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjb250ZW50VW5pdElkKTtcbiAgICBpZiAoY29udGVudFVuaXQpIHtcbiAgICAgIGNvbnRlbnRVbml0LmFubm90YXRpb25JZCA9IGFubm90YXRpb24uaWQ7XG4gICAgICBjb250ZW50VW5pdC5tZXRhZGF0YS51cGRhdGVkQXQgPSBEYXRlLm5vdygpO1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuc2F2ZUNvbnRlbnRVbml0KGNvbnRlbnRVbml0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYW5ub3RhdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTZERkJcdTUyQTBcdTY1ODdcdTRFRjZcdTYyNzlcdTZDRThcbiAgICovXG4gIGFzeW5jIGFkZEZpbGVBbm5vdGF0aW9uKFxuICAgIGZpbGVQYXRoOiBzdHJpbmcsXG4gICAgY29udGVudDogc3RyaW5nXG4gICk6IFByb21pc2U8QW5ub3RhdGlvbj4ge1xuICAgIGNvbnN0IGFubm90YXRpb246IEFubm90YXRpb24gPSB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICB0YXJnZXRUeXBlOiAnZmlsZScsXG4gICAgICB0YXJnZXRJZDogZmlsZVBhdGgsXG4gICAgICBjb250ZW50LFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KClcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5hbm5vdGF0aW9ucy5zZXQoYW5ub3RhdGlvbi5pZCwgYW5ub3RhdGlvbik7XG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0KCk7XG5cbiAgICByZXR1cm4gYW5ub3RhdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTYyNzlcdTZDRThcbiAgICovXG4gIGdldEFubm90YXRpb24oaWQ6IHN0cmluZyk6IEFubm90YXRpb24gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmFubm90YXRpb25zLmdldChpZCk7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU1MTg1XHU1QkI5XHU3Njg0XHU2Mjc5XHU2Q0U4XG4gICAqL1xuICBnZXRDb250ZW50QW5ub3RhdGlvbihjb250ZW50VW5pdElkOiBzdHJpbmcpOiBBbm5vdGF0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBjb250ZW50VW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNvbnRlbnRVbml0SWQpO1xuICAgIGlmICghY29udGVudFVuaXQ/LmFubm90YXRpb25JZCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBcbiAgICByZXR1cm4gdGhpcy5hbm5vdGF0aW9ucy5nZXQoY29udGVudFVuaXQuYW5ub3RhdGlvbklkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTY1ODdcdTRFRjZcdTc2ODRcdTYyNDBcdTY3MDlcdTYyNzlcdTZDRThcbiAgICovXG4gIGdldEZpbGVBbm5vdGF0aW9ucyhmaWxlUGF0aDogc3RyaW5nKTogQW5ub3RhdGlvbltdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmFubm90YXRpb25zLnZhbHVlcygpKS5maWx0ZXIoXG4gICAgICBhbm4gPT4gYW5uLnRhcmdldFR5cGUgPT09ICdmaWxlJyAmJiBhbm4udGFyZ2V0SWQgPT09IGZpbGVQYXRoXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTY2RjRcdTY1QjBcdTYyNzlcdTZDRThcbiAgICovXG4gIGFzeW5jIHVwZGF0ZUFubm90YXRpb24oXG4gICAgaWQ6IHN0cmluZyxcbiAgICB1cGRhdGVzOiBQYXJ0aWFsPEFubm90YXRpb24+XG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLmFubm90YXRpb25zLmdldChpZCk7XG4gICAgaWYgKCFhbm5vdGF0aW9uKSByZXR1cm47XG5cbiAgICBPYmplY3QuYXNzaWduKGFubm90YXRpb24sIHVwZGF0ZXMsIHtcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIC4uLmFubm90YXRpb24ubWV0YWRhdGEsXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0KCk7XG4gIH1cblxuICAvKipcbiAgICogXHU1MjIwXHU5NjY0XHU2Mjc5XHU2Q0U4XG4gICAqL1xuICBhc3luYyBkZWxldGVBbm5vdGF0aW9uKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5hbm5vdGF0aW9ucy5nZXQoaWQpO1xuICAgIGlmICghYW5ub3RhdGlvbikgcmV0dXJuO1xuXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU2NjJGXHU1MTg1XHU1QkI5XHU2Mjc5XHU2Q0U4XHVGRjBDXHU4OUUzXHU5NjY0XHU1MTczXHU4MDU0XG4gICAgaWYgKGFubm90YXRpb24udGFyZ2V0VHlwZSA9PT0gJ2NvbnRlbnQnKSB7XG4gICAgICBjb25zdCBjb250ZW50VW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGFubm90YXRpb24udGFyZ2V0SWQpO1xuICAgICAgaWYgKGNvbnRlbnRVbml0KSB7XG4gICAgICAgIGNvbnRlbnRVbml0LmFubm90YXRpb25JZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuc2F2ZUNvbnRlbnRVbml0KGNvbnRlbnRVbml0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmFubm90YXRpb25zLmRlbGV0ZShpZCk7XG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0KCk7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU2MjQwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAqL1xuICBnZXRBbGxBbm5vdGF0aW9ucygpOiBBbm5vdGF0aW9uW10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYW5ub3RhdGlvbnMudmFsdWVzKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjMwMVx1NEU0NVx1NTMxNlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwZXJzaXN0KCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXRoID0gYCR7dGhpcy5kYXRhRm9sZGVyfS9hbm5vdGF0aW9ucy5qc29uYDtcbiAgICAgIGNvbnN0IGFubm90YXRpb25zID0gQXJyYXkuZnJvbSh0aGlzLmFubm90YXRpb25zLnZhbHVlcygpKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnN0cmluZ2lmeShhbm5vdGF0aW9ucywgbnVsbCwgMik7XG4gICAgICBcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUocGF0aCwgZGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBlcnNpc3RpbmcgYW5ub3RhdGlvbnM6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTc1MUZcdTYyMTBcdTU1MkZcdTRFMDAgSURcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgYW5uLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcbiAgfVxufSIsICJpbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBEYXRhTWFuYWdlciwgQ29udGVudFVuaXQgfSBmcm9tICcuL0RhdGFNYW5hZ2VyJzsgXG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcblxuZXhwb3J0IGludGVyZmFjZSBGbGFzaGNhcmQge1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiAncWEnIHwgJ2Nsb3plJztcbiAgc291cmNlQ29udGVudElkOiBzdHJpbmc7XG4gIHNvdXJjZUZpbGU6IHN0cmluZztcbiAgYW5jaG9yTGluazogc3RyaW5nO1xuICBcbiAgLy8gXHU1MzYxXHU3MjQ3XHU1MTg1XHU1QkI5XG4gIGZyb250OiBzdHJpbmc7XG4gIGJhY2s6IHN0cmluZyB8IHN0cmluZ1tdO1xuICBcbiAgLy8gXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU0RTEzXHU3NTI4XG4gIGNsb3plPzoge1xuICAgIG9yaWdpbmFsOiBzdHJpbmc7XG4gICAgZGVsZXRpb25zOiB7XG4gICAgICBpbmRleDogbnVtYmVyO1xuICAgICAgYW5zd2VyOiBzdHJpbmc7XG4gICAgICBhbHRlcm5hdGl2ZXM/OiBzdHJpbmdbXTtcbiAgICB9W107XG4gIH07XG4gIFxuICAvLyBcdTUyMDZcdTdFQzRcbiAgZGVjazogc3RyaW5nO1xuICB0YWdzOiBzdHJpbmdbXTtcbiAgXG4gIC8vIFx1NTkwRFx1NEU2MFx1NjU3MFx1NjM2RVxuICBzY2hlZHVsaW5nOiB7XG4gICAgaW50ZXJ2YWw6IG51bWJlcjtcbiAgICBlYXNlOiBudW1iZXI7XG4gICAgZHVlOiBudW1iZXI7XG4gICAgbGFwc2VzOiBudW1iZXI7XG4gICAgcmVwczogbnVtYmVyO1xuICAgIHN0YXRlOiAnbmV3JyB8ICdsZWFybmluZycgfCAncmV2aWV3JyB8ICdyZWxlYXJuaW5nJztcbiAgfTtcbiAgXG4gIC8vIFx1N0VERlx1OEJBMVxuICBzdGF0czoge1xuICAgIHRvdGFsUmV2aWV3czogbnVtYmVyO1xuICAgIGNvcnJlY3RDb3VudDogbnVtYmVyO1xuICAgIGF2ZXJhZ2VUaW1lOiBudW1iZXI7XG4gICAgbGFzdFJldmlldz86IG51bWJlcjtcbiAgICBkaWZmaWN1bHR5OiBudW1iZXI7XG4gIH07XG4gIFxuICBtZXRhZGF0YToge1xuICAgIGNyZWF0ZWRBdDogbnVtYmVyO1xuICAgIHVwZGF0ZWRBdDogbnVtYmVyO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJldmlld0xvZyB7XG4gIGlkOiBzdHJpbmc7XG4gIGZsYXNoY2FyZElkOiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xuICByZXNwb25zZToge1xuICAgIHVzZXJBbnN3ZXI/OiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgICB0aW1lU3BlbnQ6IG51bWJlcjtcbiAgICBlYXNlOiAnYWdhaW4nIHwgJ2hhcmQnIHwgJ2dvb2QnIHwgJ2Vhc3knO1xuICB9O1xuICBncmFkaW5nPzoge1xuICAgIGNvcnJlY3RuZXNzOiAnY29ycmVjdCcgfCAncGFydGlhbCcgfCAnd3JvbmcnO1xuICAgIHNpbWlsYXJpdHk/OiBudW1iZXI7XG4gIH07XG4gIHNjaGVkdWxpbmdDaGFuZ2U6IHtcbiAgICBvbGRJbnRlcnZhbDogbnVtYmVyO1xuICAgIG5ld0ludGVydmFsOiBudW1iZXI7XG4gICAgb2xkRWFzZTogbnVtYmVyO1xuICAgIG5ld0Vhc2U6IG51bWJlcjtcbiAgfTtcbn1cblxuZXhwb3J0IGNsYXNzIEZsYXNoY2FyZE1hbmFnZXIge1xuICBwcml2YXRlIGZsYXNoY2FyZHM6IE1hcDxzdHJpbmcsIEZsYXNoY2FyZD4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgcmV2aWV3TG9nczogUmV2aWV3TG9nW10gPSBbXTtcbiAgcHJpdmF0ZSBkYXRhRm9sZGVyOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBhcHA6IEFwcCxcbiAgICBwcml2YXRlIGRhdGFNYW5hZ2VyOiBEYXRhTWFuYWdlcixcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW5cbiAgKSB7XG4gICAgdGhpcy5kYXRhRm9sZGVyID0gYCR7dGhpcy5hcHAudmF1bHQuY29uZmlnRGlyfS9wbHVnaW5zL2xlYXJuaW5nLXN5c3RlbS9kYXRhYDtcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUoKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkRmxhc2hjYXJkcygpO1xuICAgIGF3YWl0IHRoaXMubG9hZFJldmlld0xvZ3MoKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFx1N0VERlx1NEUwMFx1NTIxQlx1NUVGQVx1NTE2NVx1NTNFMyA9PT09PT09PT09PT09PT09PT09PVxuICBcbiAgLyoqXG4gICAqIFx1RDgzQ1x1REQ5NSBcdTdFREZcdTRFMDBcdTUxNjVcdTUzRTM6IFx1NEVDRSBDb250ZW50VW5pdCBcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcbiAgICogXHU5MDAyXHU5MTREXHU2MjQwXHU2NzA5XHU1NzNBXHU2NjZGOiBcdTUzRjNcdTk1MkVcdTYzRDBcdTUzRDZcdTMwMDFTY2FuXHUzMDAxXHU2Mjc5XHU5MUNGXHU1MjFCXHU1RUZBXHUzMDAxXHU1RkVCXHU5MDFGXHU3NTFGXHU2MjEwXG4gICAqL1xuICBhc3luYyBjcmVhdGVGbGFzaGNhcmRGcm9tVW5pdChcbiAgICB1bml0OiBDb250ZW50VW5pdCxcbiAgICBvcHRpb25zPzoge1xuICAgICAgY3VzdG9tUXVlc3Rpb24/OiBzdHJpbmc7XG4gICAgICBjdXN0b21BbnN3ZXI/OiBzdHJpbmc7XG4gICAgICBjYXJkVHlwZT86ICdxYScgfCAnY2xvemUnO1xuICAgIH1cbiAgKTogUHJvbWlzZTxGbGFzaGNhcmQ+IHtcbiAgICBcbiAgICBjb25zdCBjYXJkVHlwZSA9IG9wdGlvbnM/LmNhcmRUeXBlIHx8ICh1bml0LnR5cGUgPT09ICdRQScgPyAncWEnIDogJ2Nsb3plJyk7XG4gIFxuICAgIGxldCBmbGFzaGNhcmQ6IEZsYXNoY2FyZDtcbiAgXG4gICAgaWYgKGNhcmRUeXBlID09PSAncWEnIHx8IHVuaXQudHlwZSA9PT0gJ1FBJykge1xuICAgICAgY29uc3QgcXVlc3Rpb24gPSBvcHRpb25zPy5jdXN0b21RdWVzdGlvbiB8fCB1bml0LmNvbnRlbnQ7XG4gICAgICBjb25zdCBhbnN3ZXIgPSBvcHRpb25zPy5jdXN0b21BbnN3ZXIgfHwgdW5pdC5hbnN3ZXIgfHwgdW5pdC5jb250ZW50O1xuICAgICAgXG4gICAgICBmbGFzaGNhcmQgPSBhd2FpdCB0aGlzLmNyZWF0ZVFBQ2FyZCh1bml0LmlkLCBxdWVzdGlvbiwgYW5zd2VyKTtcbiAgICAgIFxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0ZXh0ID0gdW5pdC5mdWxsQ29udGV4dCB8fCB1bml0LmNvbnRlbnQ7XG4gICAgICBjb25zdCBhbnN3ZXIgPSBvcHRpb25zPy5jdXN0b21BbnN3ZXIgfHwgdW5pdC5jb250ZW50O1xuICAgICAgXG4gICAgICBjb25zdCBkZWxldGlvbnMgPSBbe1xuICAgICAgICBpbmRleDogdGV4dC5pbmRleE9mKGFuc3dlciksXG4gICAgICAgIGFuc3dlcjogYW5zd2VyXG4gICAgICB9XTtcbiAgICAgIFxuXG4gICAgICBmbGFzaGNhcmQgPSBhd2FpdCB0aGlzLmNyZWF0ZUNsb3plQ2FyZCh1bml0LmlkLCB0ZXh0LCBkZWxldGlvbnMpO1xuICAgIH1cbiAgXG4gICAgXG4gIFxuICAgIHJldHVybiBmbGFzaGNhcmQ7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTY4MzhcdTVGQzNcdTUyMUJcdTVFRkFcdTY1QjlcdTZDRDUgPT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogXHU1MjFCXHU1RUZBXHU5NUVFXHU3QjU0XHU1MzYxXHVGRjA4XHU1NTJGXHU0RTAwXHU3MjQ4XHU2NzJDXHVGRjBDXHU1NDA4XHU1RTc2XHU0RTg2XHU2MjQwXHU2NzA5XHU1MjlGXHU4MEZEXHVGRjA5XG4gICAqL1xuICBhc3luYyBjcmVhdGVRQUNhcmQoXG4gICAgY29udGVudFVuaXRJZDogc3RyaW5nLFxuICAgIHF1ZXN0aW9uOiBzdHJpbmcsXG4gICAgYW5zd2VyOiBzdHJpbmcsXG4gICAgZGVjaz86IHN0cmluZ1xuICApOiBQcm9taXNlPEZsYXNoY2FyZD4ge1xuICAgIGNvbnN0IGNvbnRlbnRVbml0ID0gdGhpcy5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjb250ZW50VW5pdElkKTtcbiAgICBpZiAoIWNvbnRlbnRVbml0KSB0aHJvdyBuZXcgRXJyb3IoJ0NvbnRlbnQgdW5pdCBub3QgZm91bmQnKTtcblxuICAgIGNvbnN0IGNhcmQ6IEZsYXNoY2FyZCA9IHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgIHR5cGU6ICdxYScsXG4gICAgICBzb3VyY2VDb250ZW50SWQ6IGNvbnRlbnRVbml0SWQsXG4gICAgICBzb3VyY2VGaWxlOiBjb250ZW50VW5pdC5zb3VyY2UuZmlsZSxcbiAgICAgIGFuY2hvckxpbms6IGNvbnRlbnRVbml0LnNvdXJjZS5hbmNob3JMaW5rLFxuICAgICAgZnJvbnQ6IHF1ZXN0aW9uLFxuICAgICAgYmFjazogYW5zd2VyLFxuICAgICAgZGVjazogZGVjayB8fCB0aGlzLmluZmVyRGVjayhjb250ZW50VW5pdC5zb3VyY2UuZmlsZSksXG4gICAgICB0YWdzOiBjb250ZW50VW5pdC5tZXRhZGF0YS50YWdzLFxuICAgICAgc2NoZWR1bGluZzogdGhpcy5pbml0aWFsaXplU2NoZWR1bGluZygpLFxuICAgICAgc3RhdHM6IHtcbiAgICAgICAgdG90YWxSZXZpZXdzOiAwLFxuICAgICAgICBjb3JyZWN0Q291bnQ6IDAsXG4gICAgICAgIGF2ZXJhZ2VUaW1lOiAwLFxuICAgICAgICBkaWZmaWN1bHR5OiAwLjVcbiAgICAgIH0sXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmZsYXNoY2FyZHMuc2V0KGNhcmQuaWQsIGNhcmQpO1xuICAgIFxuICAgIC8vIFx1NjZGNFx1NjVCMCBDb250ZW50VW5pdCBcdTUxNzNcdTgwNTRcbiAgICBjb250ZW50VW5pdC5mbGFzaGNhcmRJZHMucHVzaChjYXJkLmlkKTtcbiAgICBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLnNhdmVDb250ZW50VW5pdHMoW2NvbnRlbnRVbml0XSk7XG4gICAgXG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0Rmxhc2hjYXJkcygpO1xuICAgIHJldHVybiBjYXJkO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NTIxQlx1NUVGQVx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1NTM2MVx1RkYwOFx1NTUyRlx1NEUwMFx1NzI0OFx1NjcyQ1x1RkYwQ1x1NTQwOFx1NUU3Nlx1NEU4Nlx1NjI0MFx1NjcwOVx1NTI5Rlx1ODBGRFx1RkYwOVxuICAgKi9cbiAgYXN5bmMgY3JlYXRlQ2xvemVDYXJkKFxuICAgIGNvbnRlbnRVbml0SWQ6IHN0cmluZyxcbiAgICBvcmlnaW5hbDogc3RyaW5nLFxuICAgIGRlbGV0aW9uczogeyBpbmRleDogbnVtYmVyOyBhbnN3ZXI6IHN0cmluZzsgYWx0ZXJuYXRpdmVzPzogc3RyaW5nW10gfVtdXG4gICk6IFByb21pc2U8Rmxhc2hjYXJkPiB7XG4gICAgY29uc3QgY29udGVudFVuaXQgPSB0aGlzLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNvbnRlbnRVbml0SWQpO1xuICAgIGlmICghY29udGVudFVuaXQpIHRocm93IG5ldyBFcnJvcignQ29udGVudCB1bml0IG5vdCBmb3VuZCcpO1xuXG4gICAgY29uc3QgZnJvbnQgPSB0aGlzLmdlbmVyYXRlQ2xvemVUZXh0KG9yaWdpbmFsLCBkZWxldGlvbnMpO1xuICAgIGNvbnN0IGJhY2sgPSBkZWxldGlvbnMubWFwKGQgPT4gZC5hbnN3ZXIpO1xuXG4gICAgY29uc3QgY2FyZDogRmxhc2hjYXJkID0ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVJZCgpLFxuICAgICAgdHlwZTogJ2Nsb3plJyxcbiAgICAgIHNvdXJjZUNvbnRlbnRJZDogY29udGVudFVuaXRJZCxcbiAgICAgIHNvdXJjZUZpbGU6IGNvbnRlbnRVbml0LnNvdXJjZS5maWxlLFxuICAgICAgYW5jaG9yTGluazogY29udGVudFVuaXQuc291cmNlLmFuY2hvckxpbmssXG4gICAgICBmcm9udCxcbiAgICAgIGJhY2ssXG4gICAgICBjbG96ZToge1xuICAgICAgICBvcmlnaW5hbCxcbiAgICAgICAgZGVsZXRpb25zXG4gICAgICB9LFxuICAgICAgZGVjazogdGhpcy5pbmZlckRlY2soY29udGVudFVuaXQuc291cmNlLmZpbGUpLFxuICAgICAgdGFnczogY29udGVudFVuaXQubWV0YWRhdGEudGFncyxcbiAgICAgIHNjaGVkdWxpbmc6IHRoaXMuaW5pdGlhbGl6ZVNjaGVkdWxpbmcoKSxcbiAgICAgIHN0YXRzOiB7XG4gICAgICAgIHRvdGFsUmV2aWV3czogMCxcbiAgICAgICAgY29ycmVjdENvdW50OiAwLFxuICAgICAgICBhdmVyYWdlVGltZTogMCxcbiAgICAgICAgZGlmZmljdWx0eTogMC41XG4gICAgICB9LFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KClcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5mbGFzaGNhcmRzLnNldChjYXJkLmlkLCBjYXJkKTtcbiAgICBcbiAgICBjb250ZW50VW5pdC5mbGFzaGNhcmRJZHMucHVzaChjYXJkLmlkKTtcbiAgICBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLnNhdmVDb250ZW50VW5pdHMoW2NvbnRlbnRVbml0XSk7XG4gICAgXG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0Rmxhc2hjYXJkcygpO1xuICAgIHJldHVybiBjYXJkO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0gXHU2N0U1XHU4QkUyXHU2NUI5XHU2Q0Q1ID09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1OTVFQVx1NTM2MVxuICAgKi9cbiAgZ2V0Rmxhc2hjYXJkKGlkOiBzdHJpbmcpOiBGbGFzaGNhcmQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmZsYXNoY2FyZHMuZ2V0KGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTYyNDBcdTY3MDlcdTk1RUFcdTUzNjFcbiAgICovXG4gIGdldEFsbEZsYXNoY2FyZHMoKTogRmxhc2hjYXJkW10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZmxhc2hjYXJkcy52YWx1ZXMoKSk7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU0RUNBXHU2NUU1XHU1Rjg1XHU1OTBEXHU0RTYwXHU3Njg0XHU1MzYxXHU3MjQ3XG4gICAqL1xuICBnZXREdWVDYXJkcygpOiBGbGFzaGNhcmRbXSB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmZsYXNoY2FyZHMudmFsdWVzKCkpXG4gICAgICAuZmlsdGVyKGNhcmQgPT4gY2FyZC5zY2hlZHVsaW5nLmR1ZSA8PSBub3cpXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBjb25zdCBhUHJpb3JpdHkgPSB0aGlzLmdldENhcmRQcmlvcml0eShhKTtcbiAgICAgICAgY29uc3QgYlByaW9yaXR5ID0gdGhpcy5nZXRDYXJkUHJpb3JpdHkoYik7XG4gICAgICAgIHJldHVybiBiUHJpb3JpdHkgLSBhUHJpb3JpdHk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTY1QjBcdTUzNjFcdTcyNDdcbiAgICovXG4gIGdldE5ld0NhcmRzKCk6IEZsYXNoY2FyZFtdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmZsYXNoY2FyZHMudmFsdWVzKCkpXG4gICAgICAuZmlsdGVyKGNhcmQgPT4gY2FyZC5zY2hlZHVsaW5nLnN0YXRlID09PSAnbmV3Jyk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTY2RjRcdTY1QjBcdTU0OENcdTUyMjBcdTk2NjQgPT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogXHU2NkY0XHU2NUIwXHU1MzYxXHU3MjQ3XHVGRjA4XHU1OTBEXHU0RTYwXHU1NDBFXHVGRjA5XG4gICAqL1xuICBhc3luYyB1cGRhdGVDYXJkKGNhcmQ6IEZsYXNoY2FyZCkge1xuICAgIHRoaXMuZmxhc2hjYXJkcy5zZXQoY2FyZC5pZCwgY2FyZCk7XG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0Rmxhc2hjYXJkcygpO1xuICB9XG5cbi8qKlxuICogXHU1MjIwXHU5NjY0XHU1MzYxXHU3MjQ3XG4gKi9cbmFzeW5jIGRlbGV0ZUNhcmQoaWQ6IHN0cmluZykge1xuICBjb25zdCBjYXJkID0gdGhpcy5mbGFzaGNhcmRzLmdldChpZCk7XG4gIGlmICghY2FyZCkgcmV0dXJuO1xuXG4gIC8vIFx1RDgzRFx1REQyNyBcdTg5RTNcdTk2NjQgQ29udGVudFVuaXQgXHU1MTczXHU4MDU0XG4gIGNvbnN0IGNvbnRlbnRVbml0ID0gdGhpcy5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjYXJkLnNvdXJjZUNvbnRlbnRJZCk7XG4gIGlmIChjb250ZW50VW5pdCkge1xuICAgIGNvbnN0IGluZGV4ID0gY29udGVudFVuaXQuZmxhc2hjYXJkSWRzLmluZGV4T2YoaWQpO1xuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICBjb250ZW50VW5pdC5mbGFzaGNhcmRJZHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIGF3YWl0IHRoaXMuZGF0YU1hbmFnZXIuc2F2ZUNvbnRlbnRVbml0cyhbY29udGVudFVuaXRdKTtcbiAgICB9XG4gIH1cblxuICAvLyBcdTUyMjBcdTk2NjRcdTk1RUFcdTUzNjFcbiAgdGhpcy5mbGFzaGNhcmRzLmRlbGV0ZShpZCk7XG4gIGF3YWl0IHRoaXMucGVyc2lzdEZsYXNoY2FyZHMoKTtcbn1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTU5MERcdTRFNjBcdTY1RTVcdTVGRDcgPT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogXHU4QkIwXHU1RjU1XHU1OTBEXHU0RTYwXHU2NUU1XHU1RkQ3XG4gICAqL1xuICBhc3luYyBsb2dSZXZpZXcobG9nOiBSZXZpZXdMb2cpIHtcbiAgICB0aGlzLnJldmlld0xvZ3MucHVzaChsb2cpO1xuICAgIFxuICAgIGlmICh0aGlzLnJldmlld0xvZ3MubGVuZ3RoID4gMTAwMCkge1xuICAgICAgdGhpcy5yZXZpZXdMb2dzID0gdGhpcy5yZXZpZXdMb2dzLnNsaWNlKC0xMDAwKTtcbiAgICB9XG4gICAgXG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0UmV2aWV3TG9ncygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NTM2MVx1NzI0N1x1NzY4NFx1NTkwRFx1NEU2MFx1NTM4Nlx1NTNGMlxuICAgKi9cbiAgZ2V0Q2FyZFJldmlld0hpc3RvcnkoY2FyZElkOiBzdHJpbmcpOiBSZXZpZXdMb2dbXSB7XG4gICAgcmV0dXJuIHRoaXMucmV2aWV3TG9ncy5maWx0ZXIobG9nID0+IGxvZy5mbGFzaGNhcmRJZCA9PT0gY2FyZElkKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFx1N0VERlx1OEJBMSA9PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTdFREZcdThCQTFcdTY1NzBcdTYzNkVcbiAgICovXG4gIGdldFN0YXRzKCkge1xuICAgIGNvbnN0IGFsbCA9IHRoaXMuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgIGNvbnN0IGR1ZSA9IHRoaXMuZ2V0RHVlQ2FyZHMoKTtcbiAgICBjb25zdCBuZXdDYXJkcyA9IHRoaXMuZ2V0TmV3Q2FyZHMoKTtcbiAgICBcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgY29uc3QgcmV2aWV3ZWRUb2RheSA9IHRoaXMucmV2aWV3TG9ncy5maWx0ZXIoXG4gICAgICBsb2cgPT4gbG9nLnRpbWVzdGFtcCA+PSB0b2RheVxuICAgICkubGVuZ3RoO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsOiBhbGwubGVuZ3RoLFxuICAgICAgbmV3OiBuZXdDYXJkcy5sZW5ndGgsXG4gICAgICBkdWU6IGR1ZS5sZW5ndGgsXG4gICAgICByZXZpZXdlZFRvZGF5LFxuICAgICAgdG90YWxSZXZpZXdzOiB0aGlzLnJldmlld0xvZ3MubGVuZ3RoXG4gICAgfTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFx1NzlDMVx1NjcwOVx1NURFNVx1NTE3N1x1NjVCOVx1NkNENSA9PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBcdTUyQTBcdThGN0RcdTk1RUFcdTUzNjFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbG9hZEZsYXNoY2FyZHMoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L2ZsYXNoY2FyZHMuanNvbmA7XG4gICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5hcHAudmF1bHQuYWRhcHRlcjtcblxuICAgICAgaWYgKGF3YWl0IGFkYXB0ZXIuZXhpc3RzKHBhdGgpKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhZGFwdGVyLnJlYWQocGF0aCk7XG4gICAgICAgIGNvbnN0IGZsYXNoY2FyZHM6IEZsYXNoY2FyZFtdID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgY2FyZCBvZiBmbGFzaGNhcmRzKSB7XG4gICAgICAgICAgdGhpcy5mbGFzaGNhcmRzLnNldChjYXJkLmlkLCBjYXJkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGZsYXNoY2FyZHM6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTUyQTBcdThGN0RcdTU5MERcdTRFNjBcdTY1RTVcdTVGRDdcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbG9hZFJldmlld0xvZ3MoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L3Jldmlldy1sb2dzLmpzb25gO1xuICAgICAgY29uc3QgYWRhcHRlciA9IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXI7XG5cbiAgICAgIGlmIChhd2FpdCBhZGFwdGVyLmV4aXN0cyhwYXRoKSkge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgYWRhcHRlci5yZWFkKHBhdGgpO1xuICAgICAgICB0aGlzLnJldmlld0xvZ3MgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIHJldmlldyBsb2dzOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU1MjFEXHU1OUNCXHU1MzE2XHU4QzAzXHU1RUE2XHU1M0MyXHU2NTcwXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVTY2hlZHVsaW5nKCk6IEZsYXNoY2FyZFsnc2NoZWR1bGluZyddIHtcbiAgICByZXR1cm4ge1xuICAgICAgaW50ZXJ2YWw6IDAsXG4gICAgICBlYXNlOiAyLjUsXG4gICAgICBkdWU6IERhdGUubm93KCksXG4gICAgICBsYXBzZXM6IDAsXG4gICAgICByZXBzOiAwLFxuICAgICAgc3RhdGU6ICduZXcnXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTc1MUZcdTYyMTBcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdTY1ODdcdTY3MkNcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVDbG96ZVRleHQoXG4gICAgb3JpZ2luYWw6IHN0cmluZyxcbiAgICBkZWxldGlvbnM6IHsgaW5kZXg6IG51bWJlcjsgYW5zd2VyOiBzdHJpbmcgfVtdXG4gICk6IHN0cmluZyB7XG4gICAgbGV0IHJlc3VsdCA9IG9yaWdpbmFsO1xuICAgIGNvbnN0IHNvcnRlZCA9IFsuLi5kZWxldGlvbnNdLnNvcnQoKGEsIGIpID0+IGIuaW5kZXggLSBhLmluZGV4KTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IGRlbGV0aW9uIG9mIHNvcnRlZCkge1xuICAgICAgY29uc3QgYmVmb3JlID0gcmVzdWx0LnN1YnN0cmluZygwLCBkZWxldGlvbi5pbmRleCk7XG4gICAgICBjb25zdCBhZnRlciA9IHJlc3VsdC5zdWJzdHJpbmcoZGVsZXRpb24uaW5kZXggKyBkZWxldGlvbi5hbnN3ZXIubGVuZ3RoKTtcbiAgICAgIHJlc3VsdCA9IGAke2JlZm9yZX1bLi4uXSR7YWZ0ZXJ9YDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYzQThcdTY1QURcdTUzNjFcdTdFQzRcdTU0MERcdTc5RjBcbiAgICovXG4gIHByaXZhdGUgaW5mZXJEZWNrKGZpbGVQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHBhcnRzID0gZmlsZVBhdGguc3BsaXQoJy8nKTtcbiAgICByZXR1cm4gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDJdIDogJ0RlZmF1bHQnO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NTM2MVx1NzI0N1x1NEYxOFx1NTE0OFx1N0VBN1xuICAgKi9cbiAgcHJpdmF0ZSBnZXRDYXJkUHJpb3JpdHkoY2FyZDogRmxhc2hjYXJkKTogbnVtYmVyIHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IG92ZXJkdWUgPSBNYXRoLm1heCgwLCBub3cgLSBjYXJkLnNjaGVkdWxpbmcuZHVlKTtcbiAgICBjb25zdCBkYXlzT3ZlcmR1ZSA9IG92ZXJkdWUgLyAoMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gICAgXG4gICAgaWYgKGNhcmQuc2NoZWR1bGluZy5zdGF0ZSA9PT0gJ25ldycpIHJldHVybiAxMDAgKyBkYXlzT3ZlcmR1ZTtcbiAgICBpZiAoY2FyZC5zY2hlZHVsaW5nLnN0YXRlID09PSAncmVsZWFybmluZycpIHJldHVybiAyMDAgKyBkYXlzT3ZlcmR1ZTtcbiAgICByZXR1cm4gZGF5c092ZXJkdWU7XG4gIH1cblxuICAvKipcbiAgICogXHU2MzAxXHU0RTQ1XHU1MzE2XHU5NUVBXHU1MzYxXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHBlcnNpc3RGbGFzaGNhcmRzKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXRoID0gYCR7dGhpcy5kYXRhRm9sZGVyfS9mbGFzaGNhcmRzLmpzb25gO1xuICAgICAgY29uc3QgZmxhc2hjYXJkcyA9IEFycmF5LmZyb20odGhpcy5mbGFzaGNhcmRzLnZhbHVlcygpKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnN0cmluZ2lmeShmbGFzaGNhcmRzLCBudWxsLCAyKTtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUocGF0aCwgZGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBlcnNpc3RpbmcgZmxhc2hjYXJkczonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NjMwMVx1NEU0NVx1NTMxNlx1NTkwRFx1NEU2MFx1NjVFNVx1NUZEN1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwZXJzaXN0UmV2aWV3TG9ncygpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGF0aCA9IGAke3RoaXMuZGF0YUZvbGRlcn0vcmV2aWV3LWxvZ3MuanNvbmA7XG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5zdHJpbmdpZnkodGhpcy5yZXZpZXdMb2dzLCBudWxsLCAyKTtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUocGF0aCwgZGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBlcnNpc3RpbmcgcmV2aWV3IGxvZ3M6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTc1MUZcdTYyMTBcdTU1MkZcdTRFMDAgSURcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgY2FyZC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gIH1cbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFB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QUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FB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QUFBQSxJQUNGO0FBQ0EsVUFBTSxVQUFVLFNBQVMsY0FBYyxPQUFPO0FBQzlDLFlBQVEsS0FBSztBQUdiLFFBQUksU0FBUyxlQUFlLDBCQUEwQixHQUFHO0FBQ3ZEO0FBQUEsSUFDRjtBQUVBLFlBQVEsY0FBYztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtB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QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7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LGNBQWMsT0FBTztBQUM5QyxZQUFRLGNBQWM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFB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T0FBTyxTQUFTLEdBQUc7QUFDckIsYUFBTyxPQUFPLENBQUM7QUFBQSxJQUNqQixPQUFPO0FBQ0wsYUFBTyxVQUFVLFFBQVEsS0FBSztBQUM5QixhQUFNLDZCQUFNLGFBQWE7QUFBQSxRQUN2QixNQUFNO0FBQUEsUUFDTixRQUFRO0FBQUEsTUFDVjtBQUFBLElBQ0Y7QUFFQSxRQUFJLE1BQU07QUFDUixnQkFBVSxXQUFXLElBQUk7QUFBQSxJQUMzQjtBQUFBLEVBQ0Y7QUFBQSxFQUVBLGtCQUFrQjtBQUdoQixVQUFNLGlCQUFpQixLQUFLLElBQUksVUFBVSxnQkFBZ0Isa0JBQWtCO0FBQzVFLG1CQUFlLFFBQVEsVUFBUTtBQUM3QixZQUFNLE9BQU8sS0FBSztBQUNsQixXQUFLLFFBQVE7QUFBQSxJQUNmLENBQUM7QUFHRCxVQUFNLGdCQUFnQixLQUFLLElBQUksVUFBVSxnQkFBZ0IsMEJBQTBCO0FBQ25GLGtCQUFjLFFBQVEsVUFBUTtBQUM1QixZQUFNLE9BQU8sS0FBSztBQUNsQixXQUFLLFFBQVE7QUFBQSxJQUNmLENBQUM7QUFHRCxVQUFNLGFBQWEsS0FBSyxJQUFJLFVBQVUsZ0JBQWdCLHVCQUF1QjtBQUM3RSxlQUFXLFFBQVEsVUFBUTtBQUN6QixZQUFNLE9BQU8sS0FBSztBQUNsQixXQUFLLFFBQVE7QUFBQSxJQUNmLENBQUM7QUFBQSxFQUVIO0FBQUEsRUFFUSxpQkFBaUI7QUFDdkIsVUFBTSxnQkFBZ0IsS0FBSyxpQkFBaUI7QUFDNUMsa0JBQWMsU0FBUyx3QkFBd0I7QUFFL0MsVUFBTSxlQUFlLE1BQU07QUFDekIsWUFBTSxRQUFRLEtBQUssaUJBQWlCLFNBQVM7QUFDN0Msb0JBQWMsUUFBUSxhQUFNLE1BQU0sU0FBUztBQUMzQyxvQkFBYyxRQUFRLEdBQUcsTUFBTTtBQUFBLEVBQTZCLE1BQU07QUFBQSxJQUNwRTtBQUdBLGlCQUFhO0FBR2IsU0FBSztBQUFBLE1BQ0gsT0FBTyxZQUFZLGNBQWMsR0FBSztBQUFBLElBQ3hDO0FBR0Esa0JBQWMsaUJBQWlCLFNBQVMsTUFBTTtBQUM1QyxXQUFLLGVBQWU7QUFBQSxJQUN0QixDQUFDO0FBQUEsRUFDSDtBQUNGOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJGbGFzaGNhcmRDcmVhdGVNb2RhbCIsICJBbm5vdGF0aW9uTW9kYWwiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiY29udGFpbmVyIiwgImFubm90YXRpb24iLCAiY29udGVudCIsICJRdWlja0ZsYXNoY2FyZENyZWF0b3IiLCAiYWxsQ2FyZHMiLCAiQmF0Y2hDcmVhdGVNb2RhbCIsICJ1bml0cyIsICJpbXBvcnRfb2JzaWRpYW4iLCAic2ltaWxhcml0eSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIkZpbGVBbm5vdGF0aW9uTW9kYWwiXQp9Cg==
