/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/core/QuickFlashcardCreator.ts
var QuickFlashcardCreator_exports = {};
__export(QuickFlashcardCreator_exports, {
  QuickFlashcardCreator: () => QuickFlashcardCreator
});
var import_obsidian2, QuickFlashcardCreator;
var init_QuickFlashcardCreator = __esm({
  "src/core/QuickFlashcardCreator.ts"() {
    import_obsidian2 = require("obsidian");
    QuickFlashcardCreator = class {
      constructor(plugin) {
        this.plugin = plugin;
      }
      /**
       * 从提取内容一键创建问答卡
       * 如果有批注，使用批注作为答案
       */
      async createQuickQACard(contentUnit) {
        try {
          const annotation = this.plugin.annotationManager.getContentAnnotation(contentUnit.id);
          let question;
          let answer;
          if (annotation && annotation.content) {
            if (this.isQuestion(annotation.content)) {
              question = this.generateDefaultQuestion(contentUnit);
              answer = annotation.content;
            } else {
              question = this.generateDefaultQuestion(contentUnit);
              answer = annotation.content;
            }
          } else {
            question = this.generateDefaultQuestion(contentUnit);
            answer = contentUnit.content;
          }
          const card = await this.plugin.flashcardManager.createQACard(
            contentUnit.id,
            question,
            answer
          );
          new import_obsidian2.Notice(`\u2705 Flashcard created! (Q&A)`);
        } catch (error) {
          console.error("Error creating quick flashcard:", error);
          new import_obsidian2.Notice("\u274C Failed to create flashcard");
        }
      }
      /**
       * 从提取内容一键创建完形填空卡
       * 自动识别关键词
       */
      async createQuickClozeCard(contentUnit) {
        try {
          const keywords = this.extractKeywords(contentUnit.content);
          if (keywords.length === 0) {
            new import_obsidian2.Notice("\u26A0\uFE0F No keywords found for cloze deletion");
            return;
          }
          const deletions = keywords.map((keyword) => {
            const index = contentUnit.content.indexOf(keyword.word);
            return {
              index,
              answer: keyword.word
            };
          }).filter((d) => d.index !== -1);
          if (deletions.length === 0) {
            new import_obsidian2.Notice("\u26A0\uFE0F Could not create cloze deletions");
            return;
          }
          const card = await this.plugin.flashcardManager.createClozeCard(
            contentUnit.id,
            contentUnit.content,
            deletions
          );
          new import_obsidian2.Notice(`\u2705 Flashcard created! (Cloze with ${deletions.length} blanks)`);
        } catch (error) {
          console.error("Error creating quick cloze card:", error);
          new import_obsidian2.Notice("\u274C Failed to create flashcard");
        }
      }
      /**
       * 智能创建闪卡（自动判断类型）
       */
      async createSmartCard(contentUnit) {
        const annotation = this.plugin.annotationManager.getContentAnnotation(contentUnit.id);
        if (annotation && this.isQuestion(annotation.content)) {
          await this.createQuickQACard(contentUnit);
          return;
        }
        if (contentUnit.content.length < 200) {
          await this.createQuickQACard(contentUnit);
          return;
        }
        await this.createQuickClozeCard(contentUnit);
      }
      /**
       * 批量创建闪卡
       */
      async createBatchCards(contentUnits, type = "smart") {
        let success = 0;
        let failed = 0;
        for (const unit of contentUnits) {
          try {
            switch (type) {
              case "qa":
                await this.createQuickQACard(unit);
                break;
              case "cloze":
                await this.createQuickClozeCard(unit);
                break;
              case "smart":
                await this.createSmartCard(unit);
                break;
            }
            success++;
          } catch (error) {
            console.error("Error creating card:", error);
            failed++;
          }
        }
        return { success, failed };
      }
      /**
       * 判断文本是否是问题
       */
      isQuestion(text) {
        const questionWords = ["what", "why", "how", "when", "where", "who", "which"];
        const lowerText = text.toLowerCase().trim();
        if (lowerText.endsWith("?"))
          return true;
        for (const word of questionWords) {
          if (lowerText.startsWith(word + " "))
            return true;
        }
        if (text.includes("\u4EC0\u4E48") || text.includes("\u4E3A\u4EC0\u4E48") || text.includes("\u600E\u4E48") || text.includes("\u5982\u4F55") || text.includes("\u5417\uFF1F") || text.includes("\u5462\uFF1F")) {
          return true;
        }
        return false;
      }
      /**
       * 生成默认问题
       */
      generateDefaultQuestion(contentUnit) {
        if (contentUnit.source.heading) {
          const heading = contentUnit.source.heading.replace(/^#+\s*/, "");
          return `What is the key point about "${heading}"?`;
        }
        if (contentUnit.content.length < 50) {
          return `What does "${contentUnit.content}" mean?`;
        } else if (contentUnit.content.length < 150) {
          const firstWords = contentUnit.content.substring(0, 30) + "...";
          return `Explain: "${firstWords}"`;
        } else {
          return `What are the key points in this content?`;
        }
      }
      /**
       * 提取关键词（用于完形填空）
       */
      extractKeywords(text) {
        const words = text.match(/\b[A-Za-z]{3,}\b/g) || [];
        const stopWords = /* @__PURE__ */ new Set([
          "the",
          "is",
          "at",
          "which",
          "on",
          "a",
          "an",
          "and",
          "or",
          "but",
          "in",
          "with",
          "to",
          "for",
          "of",
          "as",
          "by",
          "this",
          "that",
          "from",
          "they",
          "we",
          "say",
          "her",
          "she",
          "he",
          "will",
          "my",
          "one",
          "all",
          "would",
          "there",
          "their",
          "what",
          "so",
          "up",
          "out",
          "if",
          "about",
          "who",
          "get",
          "which",
          "go",
          "me",
          "when",
          "make",
          "can",
          "like",
          "time",
          "no",
          "just",
          "him",
          "know",
          "take",
          "people",
          "into",
          "year",
          "your",
          "good",
          "some",
          "could",
          "them",
          "see",
          "other"
        ]);
        const wordFreq = /* @__PURE__ */ new Map();
        words.forEach((word) => {
          const lower = word.toLowerCase();
          if (!stopWords.has(lower) && word.length > 3) {
            wordFreq.set(word, (wordFreq.get(word) || 0) + 1);
          }
        });
        const scored = Array.from(wordFreq.entries()).map(([word, freq]) => {
          let score = freq;
          if (word.length > 8)
            score += 2;
          else if (word.length > 6)
            score += 1;
          if (word[0] === word[0].toUpperCase())
            score += 1;
          return { word, score };
        });
        return scored.sort((a, b) => b.score - a.score).slice(0, 3);
      }
    };
  }
});

// src/ui/FlashcardCreateModal.ts
var FlashcardCreateModal_exports = {};
__export(FlashcardCreateModal_exports, {
  FlashcardCreateModal: () => FlashcardCreateModal
});
var import_obsidian3, FlashcardCreateModal;
var init_FlashcardCreateModal = __esm({
  "src/ui/FlashcardCreateModal.ts"() {
    import_obsidian3 = require("obsidian");
    FlashcardCreateModal = class extends import_obsidian3.Modal {
      constructor(app, plugin, contentUnit, onSave) {
        super(app);
        this.plugin = plugin;
        this.cardType = "qa";
        // Q&A 字段
        this.question = "";
        this.answer = "";
        // Cloze 字段
        this.clozeText = "";
        this.selectedRanges = [];
        this.contentUnit = contentUnit;
        this.onSave = onSave;
        this.answer = contentUnit.content;
        this.clozeText = contentUnit.content;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.addClass("flashcard-create-modal");
        contentEl.createEl("h2", { text: "Create Flashcard" });
        const contentPreview = contentEl.createDiv({ cls: "content-preview" });
        contentPreview.createEl("h3", { text: "Source Content:" });
        contentPreview.createEl("blockquote", { text: this.contentUnit.content });
        new import_obsidian3.Setting(contentEl).setName("Card Type").setDesc("Choose the type of flashcard").addDropdown((dropdown) => {
          dropdown.addOption("qa", "\u{1F4DD} Question & Answer").addOption("cloze", "\u270F\uFE0F Cloze Deletion").setValue(this.cardType).onChange((value) => {
            this.cardType = value;
            this.refreshCardInputs();
          });
        });
        this.cardInputContainer = contentEl.createDiv({ cls: "card-input-container" });
        this.refreshCardInputs();
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => this.close());
        const saveBtn = buttonContainer.createEl("button", {
          text: "Create Flashcard",
          cls: "mod-cta"
        });
        saveBtn.addEventListener("click", () => this.saveFlashcard());
        this.addStyles();
      }
      refreshCardInputs() {
        this.cardInputContainer.empty();
        if (this.cardType === "qa") {
          this.renderQAInputs();
        } else {
          this.renderClozeInputs();
        }
      }
      renderQAInputs() {
        new import_obsidian3.Setting(this.cardInputContainer).setName("Question (Front)").setDesc("What question should this card ask?").addTextArea((text) => {
          text.setPlaceholder("Enter your question...").setValue(this.question).onChange((value) => {
            this.question = value;
          });
          text.inputEl.rows = 3;
          text.inputEl.style.width = "100%";
        });
        new import_obsidian3.Setting(this.cardInputContainer).setName("Answer (Back)").setDesc("What is the correct answer?").addTextArea((text) => {
          text.setPlaceholder("Enter the answer...").setValue(this.answer).onChange((value) => {
            this.answer = value;
          });
          text.inputEl.rows = 3;
          text.inputEl.style.width = "100%";
        });
        const hint = this.cardInputContainer.createDiv({ cls: "input-hint" });
        hint.createEl("small", {
          text: "\u{1F4A1} Tip: You can use the source content as the answer, or write your own."
        });
      }
      renderClozeInputs() {
        const container = this.cardInputContainer;
        container.createEl("h3", { text: "Cloze Deletion" });
        container.createEl("p", {
          text: "Select text to hide (cloze deletion). Click on words to toggle selection.",
          cls: "cloze-instruction"
        });
        const textContainer = container.createDiv({ cls: "cloze-text-container" });
        this.renderSelectableText(textContainer);
        if (this.selectedRanges.length > 0) {
          const selectedList = container.createDiv({ cls: "selected-deletions" });
          selectedList.createEl("h4", { text: "Selected Deletions:" });
          this.selectedRanges.forEach((range, index) => {
            const item = selectedList.createDiv({ cls: "deletion-item" });
            item.createSpan({ text: `${index + 1}. ` });
            item.createSpan({
              text: range.text,
              cls: "deletion-text"
            });
            const removeBtn = item.createEl("button", {
              text: "\xD7",
              cls: "remove-deletion-btn"
            });
            removeBtn.addEventListener("click", () => {
              this.selectedRanges.splice(index, 1);
              this.refreshCardInputs();
            });
          });
        }
        const preview = container.createDiv({ cls: "cloze-preview" });
        preview.createEl("h4", { text: "Preview:" });
        preview.createDiv({
          text: this.generateClozePreview(),
          cls: "preview-text"
        });
      }
      renderSelectableText(container) {
        const words = this.clozeText.split(/(\s+)/);
        let currentIndex = 0;
        words.forEach((word) => {
          const wordStart = currentIndex;
          const wordEnd = currentIndex + word.length;
          if (word.trim()) {
            const isSelected = this.selectedRanges.some(
              (range) => range.start === wordStart && range.end === wordEnd
            );
            const span = container.createEl("span", {
              text: word,
              cls: isSelected ? "cloze-word selected" : "cloze-word"
            });
            span.addEventListener("click", () => {
              this.toggleWordSelection(wordStart, wordEnd, word);
            });
          } else {
            container.createEl("span", { text: word });
          }
          currentIndex = wordEnd;
        });
      }
      toggleWordSelection(start, end, text) {
        const index = this.selectedRanges.findIndex(
          (range) => range.start === start && range.end === end
        );
        if (index > -1) {
          this.selectedRanges.splice(index, 1);
        } else {
          this.selectedRanges.push({ start, end, text });
          this.selectedRanges.sort((a, b) => a.start - b.start);
        }
        this.refreshCardInputs();
      }
      generateClozePreview() {
        let preview = this.clozeText;
        const sorted = [...this.selectedRanges].sort((a, b) => b.start - a.start);
        for (const range of sorted) {
          const before = preview.substring(0, range.start);
          const after = preview.substring(range.end);
          preview = `${before}[...]${after}`;
        }
        return preview;
      }
      async saveFlashcard() {
        try {
          if (this.cardType === "qa") {
            if (!this.question.trim()) {
              new import_obsidian3.Notice("Please enter a question");
              return;
            }
            if (!this.answer.trim()) {
              new import_obsidian3.Notice("Please enter an answer");
              return;
            }
            await this.plugin.flashcardManager.createQACard(
              this.contentUnit.id,
              this.question,
              this.answer
            );
            new import_obsidian3.Notice("Q&A flashcard created!");
          } else {
            if (this.selectedRanges.length === 0) {
              new import_obsidian3.Notice("Please select at least one word to hide");
              return;
            }
            const deletions = this.selectedRanges.map((range) => ({
              index: range.start,
              answer: range.text
            }));
            await this.plugin.flashcardManager.createClozeCard(
              this.contentUnit.id,
              this.clozeText,
              deletions
            );
            new import_obsidian3.Notice("Cloze flashcard created!");
          }
          this.close();
          this.onSave();
        } catch (error) {
          console.error("Error creating flashcard:", error);
          new import_obsidian3.Notice("Error creating flashcard");
        }
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      .flashcard-create-modal {
        padding: 20px;
        max-width: 600px;
      }

      .content-preview {
        margin: 20px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .content-preview h3 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .content-preview blockquote {
        margin: 0;
        padding: 10px;
        border-left: 3px solid var(--interactive-accent);
        background: var(--background-primary);
        border-radius: 4px;
      }

      .card-input-container {
        margin: 20px 0;
      }

      .input-hint {
        margin-top: 10px;
        padding: 10px;
        background: var(--background-secondary);
        border-radius: 4px;
        color: var(--text-muted);
      }

      /* Cloze \u6837\u5F0F */
      .cloze-instruction {
        color: var(--text-muted);
        font-size: 0.9em;
        margin-bottom: 15px;
      }

      .cloze-text-container {
        padding: 15px;
        background: var(--background-primary);
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        line-height: 1.8;
        margin-bottom: 15px;
        cursor: default;
      }

      .cloze-word {
        padding: 2px 4px;
        margin: 0 1px;
        border-radius: 3px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .cloze-word:hover {
        background: var(--background-modifier-hover);
      }

      .cloze-word.selected {
        background: var(--interactive-accent);
        color: white;
        font-weight: 500;
      }

      .selected-deletions {
        margin: 15px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .selected-deletions h4 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .deletion-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 6px 10px;
        background: var(--background-primary);
        border-radius: 4px;
        margin-bottom: 6px;
      }

      .deletion-text {
        flex: 1;
        font-weight: 500;
        color: var(--interactive-accent);
      }

      .remove-deletion-btn {
        padding: 2px 8px;
        background: var(--background-modifier-error);
        color: white;
        border: none;
        border-radius: 3px;
        cursor: pointer;
        font-size: 16px;
        line-height: 1;
      }

      .remove-deletion-btn:hover {
        background: var(--color-red);
      }

      .cloze-preview {
        margin: 15px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .cloze-preview h4 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .preview-text {
        padding: 10px;
        background: var(--background-primary);
        border-radius: 4px;
        line-height: 1.6;
      }

      .modal-button-container {
        display: flex;
        gap: 10px;
        justify-content: flex-end;
        margin-top: 20px;
      }

      .modal-button-container button {
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
      }
    `;
        document.head.appendChild(styleEl);
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
  }
});

// src/ui/OverviewView.ts
var OverviewView_exports = {};
__export(OverviewView_exports, {
  BatchCreateModal: () => BatchCreateModal,
  OverviewView: () => OverviewView,
  VIEW_TYPE_OVERVIEW: () => VIEW_TYPE_OVERVIEW
});
var import_obsidian4, VIEW_TYPE_OVERVIEW, OverviewView, BatchCreateModal, ConfirmModal;
var init_OverviewView = __esm({
  "src/ui/OverviewView.ts"() {
    import_obsidian4 = require("obsidian");
    init_QuickFlashcardCreator();
    VIEW_TYPE_OVERVIEW = "learning-system-overview";
    OverviewView = class extends import_obsidian4.ItemView {
      constructor(leaf, plugin) {
        super(leaf);
        //   private contentEl: HTMLElement;
        this.groupBy = "file";
        this.searchQuery = "";
        this.batchMode = false;
        this.selectedUnitIds = /* @__PURE__ */ new Set();
        this.plugin = plugin;
        this.quickCreator = new QuickFlashcardCreator(plugin);
      }
      getViewType() {
        return VIEW_TYPE_OVERVIEW;
      }
      getDisplayText() {
        return "Learning Overview";
      }
      getIcon() {
        return "layout-list";
      }
      async onOpen() {
        const container = this.containerEl.children[1];
        container.empty();
        this.createToolbar(container);
        this.contentEl = container.createDiv({ cls: "learning-system-content" });
        await this.refresh();
        this.addStyles();
      }
      async onClose() {
      }
      // 添加到 OverviewView 类中
      scrollToFile(filePath) {
        setTimeout(() => {
          const fileGroups = this.contentEl.querySelectorAll(".file-group");
          fileGroups.forEach((group) => {
            var _a, _b;
            const header = group.querySelector(".group-header");
            if ((_b = header == null ? void 0 : header.textContent) == null ? void 0 : _b.includes(((_a = filePath.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || "")) {
              group.scrollIntoView({ behavior: "smooth", block: "start" });
            }
          });
        }, 100);
      }
      createToolbar(container) {
        const toolbar = container.createDiv({ cls: "learning-system-toolbar" });
        const searchContainer = toolbar.createDiv({ cls: "search-container" });
        const searchInput = searchContainer.createEl("input", {
          type: "text",
          placeholder: "Search content...",
          cls: "search-input"
        });
        searchInput.addEventListener("input", (e) => {
          this.searchQuery = e.target.value;
          this.refresh();
        });
        const groupContainer = toolbar.createDiv({ cls: "group-container" });
        groupContainer.createSpan({ text: "Group by: ", cls: "group-label" });
        const groupSelect = groupContainer.createEl("select", { cls: "group-select" });
        const options = [
          { value: "file", label: "File" },
          { value: "tag", label: "Tag" },
          { value: "date", label: "Date" }
        ];
        options.forEach((opt) => {
          const option = groupSelect.createEl("option", {
            value: opt.value,
            text: opt.label
          });
          if (opt.value === this.groupBy) {
            option.selected = true;
          }
        });
        groupSelect.addEventListener("change", (e) => {
          this.groupBy = e.target.value;
          this.refresh();
        });
        const batchActions = toolbar.createDiv({ cls: "batch-actions-overview" });
        const batchModeBtn = batchActions.createEl("button", {
          text: this.batchMode ? "\u2713 Done" : "\u2610 Batch Mode",
          cls: "batch-mode-btn"
        });
        batchModeBtn.addEventListener("click", () => {
          this.batchMode = !this.batchMode;
          if (!this.batchMode) {
            this.selectedUnitIds.clear();
          }
          this.refresh();
        });
        if (this.batchMode) {
          const selectAllBtn = batchActions.createEl("button", {
            text: this.isAllSelected() ? "\u2611 Deselect All" : "\u2610 Select All",
            cls: "select-all-btn"
          });
          selectAllBtn.addEventListener("click", () => {
            this.toggleSelectAll();
          });
          const batchDeleteBtn = batchActions.createEl("button", {
            text: `\u{1F5D1}\uFE0F Delete (${this.selectedUnitIds.size})`,
            cls: "batch-delete-btn"
          });
          batchDeleteBtn.addEventListener("click", () => {
            this.batchDeleteNotes();
          });
          const batchCreateBtn = batchActions.createEl("button", {
            text: `\u26A1 Create Cards (${this.selectedUnitIds.size})`,
            cls: "batch-create-cards-btn"
          });
          batchCreateBtn.addEventListener("click", () => {
            this.batchCreateFlashcards();
          });
        } else {
          const batchCreateAllBtn = batchActions.createEl("button", {
            text: "\u26A1 Batch Create Cards",
            cls: "batch-create-btn"
          });
          batchCreateAllBtn.addEventListener("click", () => this.showBatchCreateModal());
        }
        const refreshBtn = toolbar.createEl("button", {
          text: "\u27F3",
          cls: "refresh-btn"
        });
        refreshBtn.addEventListener("click", () => this.refresh());
        const stats = toolbar.createDiv({ cls: "stats-container" });
        const totalCount = this.plugin.dataManager.getAllContentUnits().length;
        stats.createSpan({ text: `Total: ${totalCount}`, cls: "stats-text" });
      }
      async refresh() {
        this.contentEl.empty();
        let units = this.plugin.dataManager.getAllContentUnits();
        if (this.searchQuery) {
          const query = this.searchQuery.toLowerCase();
          units = units.filter(
            (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
          );
        }
        if (units.length === 0) {
          this.contentEl.createDiv({
            text: this.searchQuery ? "No results found" : "No content extracted yet",
            cls: "empty-state"
          });
          return;
        }
        switch (this.groupBy) {
          case "file":
            this.renderByFile(units);
            break;
          case "tag":
            this.renderByTag(units);
            break;
          case "date":
            this.renderByDate(units);
            break;
        }
      }
      renderByFile(units) {
        const grouped = /* @__PURE__ */ new Map();
        units.forEach((unit) => {
          if (!grouped.has(unit.source.file)) {
            grouped.set(unit.source.file, []);
          }
          grouped.get(unit.source.file).push(unit);
        });
        const sortedFiles = Array.from(grouped.keys()).sort();
        sortedFiles.forEach((filePath) => {
          const fileUnits = grouped.get(filePath);
          this.renderFileGroup(filePath, fileUnits);
        });
      }
      renderFileGroup(filePath, units) {
        var _a;
        const groupContainer = this.contentEl.createDiv({ cls: "file-group" });
        const header = groupContainer.createDiv({ cls: "group-header" });
        const fileName = ((_a = filePath.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || filePath;
        const titleEl = header.createDiv({ cls: "group-title" });
        titleEl.createSpan({ text: "\u{1F4C4} ", cls: "group-icon" });
        titleEl.createSpan({ text: fileName, cls: "group-name" });
        header.createSpan({ text: `${units.length}`, cls: "count-badge" });
        const collapseBtn = header.createSpan({ text: "\u25BC", cls: "collapse-btn" });
        const fileAnnotations = this.plugin.annotationManager.getFileAnnotations(filePath);
        if (fileAnnotations.length > 0) {
          const fileAnnotationDisplay = groupContainer.createDiv({
            cls: "file-annotation-display"
          });
          fileAnnotations.forEach((ann) => {
            const annEl = fileAnnotationDisplay.createDiv({ cls: "file-annotation-item" });
            annEl.createEl("strong", { text: "\u{1F4CC} " });
            annEl.createSpan({ text: ann.content });
          });
        }
        const contentContainer = groupContainer.createDiv({ cls: "group-content" });
        units.forEach((unit) => {
          this.renderContentUnit(contentContainer, unit);
        });
        let isCollapsed = false;
        collapseBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          isCollapsed = !isCollapsed;
          contentContainer.style.display = isCollapsed ? "none" : "block";
          collapseBtn.textContent = isCollapsed ? "\u25B6" : "\u25BC";
        });
        header.addEventListener("click", async () => {
          const file = this.app.vault.getAbstractFileByPath(filePath);
          if (file instanceof import_obsidian4.TFile) {
            await this.app.workspace.getLeaf(false).openFile(file);
          }
        });
      }
      renderContentUnit(container, unit) {
        const card = container.createDiv({ cls: "content-card" });
        if (this.batchMode) {
          const checkbox = card.createEl("input", {
            type: "checkbox",
            cls: "batch-checkbox"
          });
          checkbox.setAttribute("data-unit-id", unit.id);
          checkbox.checked = this.selectedUnitIds.has(unit.id);
          checkbox.addEventListener("change", (e) => {
            if (e.target.checked) {
              this.selectedUnitIds.add(unit.id);
            } else {
              this.selectedUnitIds.delete(unit.id);
            }
            this.updateBatchButtons();
          });
        }
        const contentArea = card.createDiv({ cls: "card-content" });
        const typeIcon = this.getTypeIcon(unit.type);
        contentArea.createSpan({ text: typeIcon + " ", cls: "type-icon" });
        const contentText = contentArea.createSpan({
          text: unit.content,
          cls: "content-text clickable-content"
        });
        contentText.addEventListener("click", (e) => {
          var _a;
          e.stopPropagation();
          this.showAnnotationInput(card, unit, (_a = this.plugin.annotationManager.getContentAnnotation(unit.id)) == null ? void 0 : _a.content);
        });
        if (unit.annotationId) {
          contentArea.createSpan({
            text: "\u{1F4DD}",
            cls: "annotation-badge has-annotation",
            attr: { title: "Has annotation" }
          });
        }
        if (unit.flashcardIds.length > 0) {
          contentArea.createSpan({
            text: "\u{1F0CF}",
            cls: "flashcard-badge",
            attr: { title: `${unit.flashcardIds.length} flashcard(s)` }
          });
        }
        const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
        if (annotation) {
          const annotationDisplay = card.createDiv({ cls: "annotation-display" });
          if (annotation.badge) {
            const badge = annotationDisplay.createSpan({
              text: annotation.badge.text,
              cls: "annotation-badge-display"
            });
            badge.style.backgroundColor = annotation.badge.color;
          }
          const annotationContent = annotationDisplay.createDiv({
            cls: "annotation-content-display"
          });
          annotationContent.createEl("strong", { text: "\u{1F4AC} " });
          annotationContent.createSpan({ text: annotation.content });
          const timestamp = annotationDisplay.createDiv({ cls: "annotation-timestamp" });
          const date = new Date(annotation.metadata.createdAt);
          timestamp.textContent = date.toLocaleString();
          annotationDisplay.addEventListener("click", (e) => {
            e.stopPropagation();
            this.showAnnotationInput(card, unit, annotation.content);
          });
        }
        const metaArea = card.createDiv({ cls: "card-meta" });
        if (unit.metadata.tags.length > 0) {
          const tagsContainer = metaArea.createSpan({ cls: "tags-container" });
          unit.metadata.tags.forEach((tag) => {
            tagsContainer.createSpan({ text: tag, cls: "tag" });
          });
        }
        if (unit.source.heading) {
          metaArea.createSpan({
            text: `\u{1F4CD} ${unit.source.heading}`,
            cls: "heading-info"
          });
        }
        const actionsArea = card.createDiv({ cls: "card-actions" });
        const jumpBtn = actionsArea.createEl("button", {
          text: "\u2197",
          cls: "action-btn jump-btn",
          attr: { title: "Jump to source" }
        });
        jumpBtn.addEventListener("click", async (e) => {
          e.stopPropagation();
          await this.jumpToSource(unit);
        });
        const flashcardGroup = actionsArea.createDiv({ cls: "flashcard-btn-group" });
        const quickCardBtn = flashcardGroup.createEl("button", {
          text: "\u26A1",
          cls: "action-btn quick-card-btn",
          attr: { title: "Quick create flashcard (smart)" }
        });
        quickCardBtn.addEventListener("click", async (e) => {
          e.stopPropagation();
          await this.quickCreator.createSmartCard(unit);
          await this.refresh();
        });
        const moreCardBtn = flashcardGroup.createEl("button", {
          text: "\u25BC",
          cls: "action-btn more-card-btn",
          attr: { title: "More flashcard options" }
        });
        moreCardBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          this.showFlashcardMenu(e, unit);
        });
        const deleteBtn = actionsArea.createEl("button", {
          text: "\u{1F5D1}",
          cls: "action-btn delete-btn",
          attr: { title: "Delete" }
        });
        deleteBtn.addEventListener("click", async (e) => {
          e.stopPropagation();
          await this.deleteContentUnit(unit);
        });
        card.addEventListener("contextmenu", (e) => {
          e.preventDefault();
          this.showContextMenu(e, unit);
        });
      }
      renderByTag(units) {
        const grouped = /* @__PURE__ */ new Map();
        units.forEach((unit) => {
          if (unit.metadata.tags.length === 0) {
            if (!grouped.has("Untagged")) {
              grouped.set("Untagged", []);
            }
            grouped.get("Untagged").push(unit);
          } else {
            unit.metadata.tags.forEach((tag) => {
              if (!grouped.has(tag)) {
                grouped.set(tag, []);
              }
              grouped.get(tag).push(unit);
            });
          }
        });
        const sortedTags = Array.from(grouped.keys()).sort();
        sortedTags.forEach((tag) => {
          const tagUnits = grouped.get(tag);
          this.renderTagGroup(tag, tagUnits);
        });
      }
      renderTagGroup(tag, units) {
        const groupContainer = this.contentEl.createDiv({ cls: "tag-group" });
        const header = groupContainer.createDiv({ cls: "group-header" });
        const titleEl = header.createDiv({ cls: "group-title" });
        titleEl.createSpan({ text: "\u{1F3F7}\uFE0F ", cls: "group-icon" });
        titleEl.createSpan({ text: tag, cls: "group-name" });
        header.createSpan({ text: `${units.length}`, cls: "count-badge" });
        const collapseBtn = header.createSpan({ text: "\u25BC", cls: "collapse-btn" });
        const contentContainer = groupContainer.createDiv({ cls: "group-content" });
        units.forEach((unit) => {
          this.renderContentUnit(contentContainer, unit);
        });
        let isCollapsed = false;
        collapseBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          isCollapsed = !isCollapsed;
          contentContainer.style.display = isCollapsed ? "none" : "block";
          collapseBtn.textContent = isCollapsed ? "\u25B6" : "\u25BC";
        });
      }
      renderByDate(units) {
        const grouped = /* @__PURE__ */ new Map();
        units.forEach((unit) => {
          const date = new Date(unit.metadata.createdAt);
          const dateKey = date.toLocaleDateString();
          if (!grouped.has(dateKey)) {
            grouped.set(dateKey, []);
          }
          grouped.get(dateKey).push(unit);
        });
        const sortedDates = Array.from(grouped.keys()).sort((a, b) => {
          return new Date(b).getTime() - new Date(a).getTime();
        });
        sortedDates.forEach((date) => {
          const dateUnits = grouped.get(date);
          this.renderDateGroup(date, dateUnits);
        });
      }
      renderDateGroup(date, units) {
        const groupContainer = this.contentEl.createDiv({ cls: "date-group" });
        const header = groupContainer.createDiv({ cls: "group-header" });
        const titleEl = header.createDiv({ cls: "group-title" });
        titleEl.createSpan({ text: "\u{1F4C5} ", cls: "group-icon" });
        titleEl.createSpan({ text: date, cls: "group-name" });
        header.createSpan({ text: `${units.length}`, cls: "count-badge" });
        const collapseBtn = header.createSpan({ text: "\u25BC", cls: "collapse-btn" });
        const contentContainer = groupContainer.createDiv({ cls: "group-content" });
        units.forEach((unit) => {
          this.renderContentUnit(contentContainer, unit);
        });
        let isCollapsed = false;
        collapseBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          isCollapsed = !isCollapsed;
          contentContainer.style.display = isCollapsed ? "none" : "block";
          collapseBtn.textContent = isCollapsed ? "\u25B6" : "\u25BC";
        });
      }
      showAnnotationInput(card, unit, existingText) {
        let inputContainer = card.querySelector(".annotation-input-container");
        if (inputContainer) {
          inputContainer.remove();
          return;
        }
        inputContainer = card.createDiv({ cls: "annotation-input-container" });
        const textarea = inputContainer.createEl("textarea", {
          cls: "annotation-textarea",
          placeholder: "Add comment..."
        });
        textarea.value = existingText || "";
        textarea.rows = 3;
        const buttonArea = inputContainer.createDiv({ cls: "annotation-buttons" });
        if (existingText) {
          const deleteBtn = buttonArea.createEl("button", {
            text: "Delete",
            cls: "annotation-delete-btn"
          });
          deleteBtn.addEventListener("click", async () => {
            const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
            if (annotation) {
              await this.plugin.annotationManager.deleteAnnotation(annotation.id);
              new import_obsidian4.Notice("Annotation deleted");
              await this.refresh();
            }
          });
        }
        const saveBtn = buttonArea.createEl("button", {
          text: "Save",
          cls: "annotation-save-btn"
        });
        const saveAnnotation = async () => {
          const text = textarea.value.trim();
          if (!text) {
            inputContainer.remove();
            return;
          }
          try {
            const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
            if (annotation) {
              await this.plugin.annotationManager.updateAnnotation(annotation.id, {
                content: text
              });
            } else {
              await this.plugin.annotationManager.addContentAnnotation(
                unit.id,
                text
              );
            }
            await this.refresh();
          } catch (error) {
            console.error("Error saving annotation:", error);
            new import_obsidian4.Notice("Error saving annotation");
          }
        };
        saveBtn.addEventListener("click", saveAnnotation);
        textarea.addEventListener("keydown", (e) => {
          if (e.key === "Enter" && (e.ctrlKey || e.metaKey)) {
            e.preventDefault();
            saveAnnotation();
          }
          if (e.key === "Escape") {
            e.preventDefault();
            inputContainer.remove();
          }
        });
        textarea.focus();
      }
      showFlashcardMenu(e, unit) {
        const menu = new import_obsidian4.Menu();
        menu.addItem(
          (item) => item.setTitle("\u26A1 Smart create").setIcon("zap").onClick(async () => {
            await this.quickCreator.createSmartCard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("\u{1F4DD} Create Q&A card").setIcon("message-square").onClick(async () => {
            await this.quickCreator.createQuickQACard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("\u270F\uFE0F Create Cloze card").setIcon("edit").onClick(async () => {
            await this.quickCreator.createQuickClozeCard(unit);
            await this.refresh();
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("\u{1F3A8} Custom card...").setIcon("settings").onClick(async () => {
            const { FlashcardCreateModal: FlashcardCreateModal2 } = await Promise.resolve().then(() => (init_FlashcardCreateModal(), FlashcardCreateModal_exports));
            const modal = new FlashcardCreateModal2(
              this.app,
              this.plugin,
              unit,
              async () => {
                await this.refresh();
              }
            );
            modal.open();
          })
        );
        menu.showAtMouseEvent(e);
      }
      async showBatchCreateModal() {
        const units = this.plugin.dataManager.getAllContentUnits();
        const unitsWithoutCards = units.filter((u) => u.flashcardIds.length === 0);
        if (unitsWithoutCards.length === 0) {
          new import_obsidian4.Notice("All content already has flashcards!");
          return;
        }
        const modal = new BatchCreateModal(
          this.app,
          this.plugin,
          this.quickCreator,
          unitsWithoutCards,
          () => this.refresh()
        );
        modal.open();
      }
      isAllSelected() {
        const units = this.plugin.dataManager.getAllContentUnits();
        let filteredUnits = units;
        if (this.searchQuery) {
          const query = this.searchQuery.toLowerCase();
          filteredUnits = units.filter(
            (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
          );
        }
        return filteredUnits.length > 0 && this.selectedUnitIds.size === filteredUnits.length;
      }
      toggleSelectAll() {
        const units = this.plugin.dataManager.getAllContentUnits();
        let filteredUnits = units;
        if (this.searchQuery) {
          const query = this.searchQuery.toLowerCase();
          filteredUnits = units.filter(
            (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
          );
        }
        if (this.isAllSelected()) {
          this.selectedUnitIds.clear();
        } else {
          filteredUnits.forEach((unit) => {
            this.selectedUnitIds.add(unit.id);
          });
        }
        this.updateBatchButtons();
        this.updateCheckboxes();
      }
      updateCheckboxes() {
        const container = this.containerEl.children[1];
        const checkboxes = container.querySelectorAll(".batch-checkbox");
        checkboxes.forEach((checkbox) => {
          const unitId = checkbox.getAttribute("data-unit-id");
          if (unitId) {
            checkbox.checked = this.selectedUnitIds.has(unitId);
          }
        });
      }
      updateBatchButtons() {
        const toolbar = this.containerEl.querySelector(".learning-system-toolbar");
        if (toolbar) {
          const batchActions = toolbar.querySelector(".batch-actions-overview");
          if (batchActions) {
            const selectAllBtn = batchActions.querySelector(".select-all-btn");
            const deleteBtn = batchActions.querySelector(".batch-delete-btn");
            const createBtn = batchActions.querySelector(".batch-create-cards-btn");
            if (selectAllBtn) {
              selectAllBtn.textContent = this.isAllSelected() ? "\u2611 Deselect All" : "\u2610 Select All";
            }
            if (deleteBtn) {
              deleteBtn.textContent = `\u{1F5D1}\uFE0F Delete (${this.selectedUnitIds.size})`;
            }
            if (createBtn) {
              createBtn.textContent = `\u26A1 Create Cards (${this.selectedUnitIds.size})`;
            }
          }
        }
      }
      async batchDeleteNotes() {
        if (this.selectedUnitIds.size === 0) {
          new import_obsidian4.Notice("\u26A0\uFE0F Please select notes to delete");
          return;
        }
        if (!confirm(`Are you sure you want to delete ${this.selectedUnitIds.size} selected notes?`)) {
          return;
        }
        let success = 0;
        let failed = 0;
        for (const unitId of this.selectedUnitIds) {
          try {
            await this.plugin.dataManager.deleteContentUnit(unitId);
            success++;
          } catch (error) {
            console.error("Error deleting note:", error);
            failed++;
          }
        }
        this.selectedUnitIds.clear();
        new import_obsidian4.Notice(`\u2705 Deleted ${success} notes${failed > 0 ? `, ${failed} failed` : ""}`);
        this.refresh();
      }
      async batchCreateFlashcards() {
        if (this.selectedUnitIds.size === 0) {
          new import_obsidian4.Notice("\u26A0\uFE0F Please select notes to create flashcards");
          return;
        }
        const units = Array.from(this.selectedUnitIds).map((id) => this.plugin.dataManager.getContentUnit(id)).filter((u) => u !== void 0 && u.flashcardIds.length === 0);
        if (units.length === 0) {
          new import_obsidian4.Notice("\u26A0\uFE0F Selected notes already have flashcards");
          return;
        }
        const modal = new BatchCreateModal(
          this.app,
          this.plugin,
          this.quickCreator,
          units,
          () => {
            this.selectedUnitIds.clear();
            this.refresh();
          }
        );
        modal.open();
      }
      async jumpToSource(unit) {
        const file = this.app.vault.getAbstractFileByPath(unit.source.file);
        if (!(file instanceof import_obsidian4.TFile))
          return;
        const leaf = this.app.workspace.getLeaf(false);
        await leaf.openFile(file);
        const view = this.app.workspace.getActiveViewOfType(import_obsidian4.ItemView);
        if (view) {
          const editor = view.editor;
          if (editor) {
            editor.setCursor({ line: unit.source.position.line, ch: 0 });
            editor.scrollIntoView({
              from: { line: unit.source.position.line, ch: 0 },
              to: { line: unit.source.position.line, ch: 0 }
            }, true);
            setTimeout(() => {
              editor.setSelection(
                { line: unit.source.position.line, ch: 0 },
                { line: unit.source.position.line, ch: 999 }
              );
            }, 100);
          }
        }
      }
      async deleteContentUnit(unit) {
        const confirmed = await this.confirmDelete(unit);
        if (!confirmed)
          return;
        await this.plugin.dataManager.deleteContentUnit(unit.id);
        await this.refresh();
      }
      async confirmDelete(unit) {
        return new Promise((resolve) => {
          const modal = new ConfirmModal(
            this.app,
            "Delete content",
            `Are you sure you want to delete this content?

"${unit.content.substring(0, 50)}..."`,
            () => resolve(true),
            () => resolve(false)
          );
          modal.open();
        });
      }
      showContextMenu(e, unit) {
        const menu = new import_obsidian4.Menu();
        menu.addItem(
          (item) => item.setTitle("Jump to source").setIcon("arrow-right").onClick(() => this.jumpToSource(unit))
        );
        const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
        menu.addItem(
          (item) => item.setTitle(annotation ? "Edit annotation" : "Add annotation").setIcon("pencil").onClick(() => {
            const card = e.target.closest(".content-card");
            if (card) {
              this.showAnnotationInput(card, unit, annotation == null ? void 0 : annotation.content);
            }
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("\u26A1 Quick create flashcard").setIcon("zap").onClick(async () => {
            await this.quickCreator.createSmartCard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("Create Q&A card").setIcon("message-square").onClick(async () => {
            await this.quickCreator.createQuickQACard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("Create Cloze card").setIcon("edit").onClick(async () => {
            await this.quickCreator.createQuickClozeCard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("Custom flashcard...").setIcon("settings").onClick(async () => {
            const { FlashcardCreateModal: FlashcardCreateModal2 } = await Promise.resolve().then(() => (init_FlashcardCreateModal(), FlashcardCreateModal_exports));
            const modal = new FlashcardCreateModal2(
              this.app,
              this.plugin,
              unit,
              async () => {
                await this.refresh();
              }
            );
            modal.open();
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("View Statistics").setIcon("bar-chart").onClick(() => {
            this.plugin.activateStats();
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("Delete").setIcon("trash").onClick(() => this.deleteContentUnit(unit))
        );
        menu.showAtMouseEvent(e);
      }
      getTypeIcon(type) {
        const icons = {
          "highlight": "\u2728",
          "bold": "**",
          "tag": "\u{1F3F7}",
          "custom": "\u2B50"
        };
        return icons[type] || "\u2022";
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      /* \u5DE5\u5177\u680F\u6837\u5F0F */
      .learning-system-toolbar {
        padding: 10px;
        border-bottom: 1px solid var(--background-modifier-border);
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .search-container { display: flex; }

      .search-input {
        flex: 1;
        padding: 6px 10px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
      }

      .group-container {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .group-label {
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .group-select {
        padding: 4px 8px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
      }

      .refresh-btn {
        padding: 4px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
        cursor: pointer;
        font-size: 16px;
      }

      .refresh-btn:hover { background: var(--background-modifier-hover); }

      .stats-container {
        color: var(--text-muted);
        font-size: 0.9em;
      }

      /* \u5185\u5BB9\u533A\u57DF\u6837\u5F0F */
      .learning-system-content {
        padding: 10px;
        overflow-y: auto;
      }

      .empty-state {
        text-align: center;
        color: var(--text-muted);
        padding: 40px 20px;
      }

      .file-group, .tag-group, .date-group { margin-bottom: 20px; }

      .group-header {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        background: var(--background-secondary);
        border-radius: 6px;
        cursor: pointer;
        margin-bottom: 8px;
      }

      .group-header:hover { background: var(--background-modifier-hover); }

      .group-title {
        flex: 1;
        display: flex;
        align-items: center;
        font-weight: 500;
      }

      .group-icon { margin-right: 4px; }

      .count-badge {
        background: var(--interactive-accent);
        color: white;
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 0.85em;
        font-weight: 500;
      }

      .collapse-btn {
        color: var(--text-muted);
        user-select: none;
        cursor: pointer;
      }

      /* \u6587\u4EF6\u6279\u6CE8\u663E\u793A */
      .file-annotation-display {
        margin: 8px 0 12px 0;
        padding: 8px 12px;
        background: var(--background-secondary-alt);
        border-radius: 4px;
        font-size: 0.9em;
      }

      .file-annotation-item {
        padding: 4px 0;
        color: var(--text-muted);
      }

      .file-annotation-item strong { color: var(--text-normal); }

      /* \u5185\u5BB9\u5361\u7247\u6837\u5F0F */
      .group-content {
        display: flex;
        flex-direction: column;
        gap: 8px;
        padding-left: 8px;
      }

      .content-card {
        padding: 12px;
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        transition: all 0.2s;
      }

      .content-card:hover {
        border-color: var(--interactive-accent);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .card-content {
        margin-bottom: 8px;
        display: flex;
        align-items: flex-start;
        gap: 4px;
        flex-wrap: wrap;
      }

      .type-icon { color: var(--text-muted); }

      .content-text {
        flex: 1;
        line-height: 1.5;
        word-wrap: break-word;
      }

      .clickable-content {
        cursor: pointer;
        transition: all 0.2s;
        padding: 4px;
        border-radius: 4px;
      }

      .clickable-content:hover {
        background: var(--background-modifier-hover);
        color: var(--interactive-accent);
      }

      .annotation-badge, .flashcard-badge {
        font-size: 14px;
        cursor: pointer;
        margin-left: 4px;
      }

      .annotation-badge.has-annotation {
        color: var(--interactive-accent);
      }

      /* \u6279\u6CE8\u663E\u793A\u6837\u5F0F */
      .annotation-display {
        margin: 10px 0;
        padding: 12px;
        background: var(--background-secondary-alt);
        border-left: 3px solid var(--interactive-accent);
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .annotation-display:hover {
        background: var(--background-modifier-hover);
        border-left-color: var(--interactive-accent-hover);
      }

      .annotation-content-display {
        line-height: 1.6;
        color: var(--text-normal);
        margin-bottom: 6px;
      }

      .annotation-content-display strong {
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .annotation-timestamp {
        font-size: 0.8em;
        color: var(--text-faint);
        text-align: right;
      }

      .annotation-badge-display {
        display: inline-block;
        padding: 3px 10px;
        border-radius: 12px;
        color: white;
        font-size: 0.85em;
        font-weight: 500;
        margin-right: 8px;
        margin-bottom: 6px;
      }

      /* \u5185\u8054\u6279\u6CE8\u8F93\u5165 */
      .annotation-input-container {
        margin: 12px 0;
        padding: 12px;
        background: var(--background-primary);
        border: 2px solid var(--interactive-accent);
        border-radius: 6px;
        animation: slideDown 0.2s ease;
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .annotation-textarea {
        width: 100%;
        padding: 10px;
        margin-bottom: 8px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-secondary);
        color: var(--text-normal);
        font-family: inherit;
        font-size: 1em;
        resize: vertical;
        min-height: 60px;
      }

      .annotation-textarea:focus {
        outline: none;
        border-color: var(--interactive-accent);
        background: var(--background-primary);
      }

      .annotation-textarea::placeholder {
        color: var(--text-faint);
      }

      .annotation-buttons {
        display: flex;
        gap: 8px;
        justify-content: flex-end;
      }

      .annotation-buttons button {
        padding: 6px 16px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.9em;
      }

      .annotation-delete-btn {
        background: transparent;
        color: var(--text-muted);
      }

      .annotation-delete-btn:hover {
        color: var(--color-red);
      }

      .annotation-save-btn {
        background: var(--interactive-accent);
        color: white;
      }

      .annotation-save-btn:hover {
        opacity: 0.8;
      }

      /* \u5143\u6570\u636E\u533A\u57DF */
      .card-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 8px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .tags-container {
        display: flex;
        flex-wrap: wrap;
        gap: 4px;
      }

      .tag {
        background: var(--background-secondary);
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.85em;
      }

      .heading-info {
        color: var(--text-muted);
        font-style: italic;
      }

      /* \u64CD\u4F5C\u6309\u94AE */
      .card-actions {
        display: flex;
        gap: 6px;
      }

      .action-btn {
        padding: 4px 10px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
        cursor: pointer;
        font-size: 14px;
        transition: all 0.2s;
      }

      .action-btn:hover {
        background: var(--interactive-accent);
        color: white;
        border-color: var(--interactive-accent);
      }

      .delete-btn:hover {
        background: var(--color-red);
        border-color: var(--color-red);
      }

      /* \u4E00\u952E\u521B\u5EFA\u95EA\u5361\u6309\u94AE\u7EC4 */
      .flashcard-btn-group {
        display: flex;
        gap: 0;
      }

      .quick-card-btn {
        border-radius: 4px 0 0 4px;
        border-right: none;
      }

      .more-card-btn {
        border-radius: 0 4px 4px 0;
        padding: 4px 6px;
        font-size: 10px;
      }

      .quick-card-btn:hover, .more-card-btn:hover {
        background: var(--interactive-accent);
        color: white;
      }

      .batch-create-btn {
        padding: 6px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--interactive-accent);
        color: white;
        cursor: pointer;
        font-weight: 500;
        transition: all 0.2s;
      }

      .batch-create-btn:hover {
        opacity: 0.8;
      }

      .batch-actions-overview {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .batch-mode-btn,
      .select-all-btn,
      .batch-delete-btn,
      .batch-create-cards-btn {
        padding: 6px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.9em;
        font-weight: 500;
      }

      .select-all-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .batch-mode-btn:hover {
        background: var(--background-modifier-hover);
      }

      .batch-delete-btn:hover {
        background: var(--color-red);
        border-color: var(--color-red);
        color: white;
      }

      .batch-create-cards-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .batch-checkbox {
        margin-right: 8px;
        cursor: pointer;
      }
    `;
        document.head.appendChild(styleEl);
      }
    };
    BatchCreateModal = class extends import_obsidian4.Modal {
      constructor(app, plugin, quickCreator, units, onComplete) {
        super(app);
        this.plugin = plugin;
        this.quickCreator = quickCreator;
        this.units = units;
        this.onComplete = onComplete;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h2", { text: "\u26A1 Batch Create Flashcards" });
        contentEl.createEl("p", {
          text: `Create flashcards for ${this.units.length} content items without cards.`
        });
        const typeContainer = contentEl.createDiv({ cls: "type-select-container" });
        typeContainer.createEl("h3", { text: "Card Type" });
        let selectedType = "smart";
        const types = [
          { value: "smart", label: "\u26A1 Smart (Auto-detect)", desc: "Automatically choose the best type" },
          { value: "qa", label: "\u{1F4DD} Q&A Cards", desc: "Question and answer format" },
          { value: "cloze", label: "\u270F\uFE0F Cloze Cards", desc: "Fill in the blanks" }
        ];
        types.forEach((type) => {
          const option = typeContainer.createDiv({ cls: "type-option" });
          const radio = option.createEl("input", {
            type: "radio",
            value: type.value,
            attr: { name: "card-type" }
          });
          if (type.value === "smart")
            radio.checked = true;
          const label = option.createDiv({ cls: "type-label" });
          label.createEl("strong", { text: type.label });
          label.createEl("div", { text: type.desc, cls: "type-desc" });
          option.addEventListener("click", () => {
            radio.checked = true;
            selectedType = type.value;
          });
        });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => this.close());
        const createBtn = buttonContainer.createEl("button", {
          text: `Create ${this.units.length} Cards`,
          cls: "mod-cta"
        });
        createBtn.addEventListener("click", async () => {
          await this.batchCreate(selectedType);
        });
        this.addStyles();
      }
      async batchCreate(type) {
        const { success, failed } = await this.quickCreator.createBatchCards(this.units, type);
        new import_obsidian4.Notice(`\u2705 Created ${success} flashcards! ${failed > 0 ? `(${failed} failed)` : ""}`);
        this.close();
        this.onComplete();
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      .type-select-container {
        margin: 20px 0;
      }

      .type-option {
        padding: 15px;
        margin: 10px 0;
        background: var(--background-secondary);
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .type-option:hover {
        border-color: var(--interactive-accent);
        background: var(--background-modifier-hover);
      }

      .type-option input[type="radio"] {
        margin-right: 10px;
      }

      .type-label {
        display: inline-block;
        vertical-align: top;
      }

      .type-desc {
        font-size: 0.9em;
        color: var(--text-muted);
        margin-top: 4px;
      }
    `;
        document.head.appendChild(styleEl);
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
    ConfirmModal = class extends import_obsidian4.Modal {
      constructor(app, title, message, onConfirm, onCancel) {
        super(app);
        this.title = title;
        this.message = message;
        this.onConfirm = onConfirm;
        this.onCancel = onCancel;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h2", { text: this.title });
        contentEl.createEl("p", { text: this.message });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => {
          this.close();
          this.onCancel();
        });
        const confirmBtn = buttonContainer.createEl("button", {
          text: "Delete",
          cls: "mod-warning"
        });
        confirmBtn.addEventListener("click", () => {
          this.close();
          this.onConfirm();
        });
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
  }
});

// src/ui/AnnotationModal.ts
var AnnotationModal_exports = {};
__export(AnnotationModal_exports, {
  AnnotationModal: () => AnnotationModal2,
  FileAnnotationModal: () => FileAnnotationModal
});
var import_obsidian9, AnnotationModal2, FileAnnotationModal;
var init_AnnotationModal = __esm({
  "src/ui/AnnotationModal.ts"() {
    import_obsidian9 = require("obsidian");
    AnnotationModal2 = class extends import_obsidian9.Modal {
      constructor(app, plugin, contentUnit, onSave) {
        super(app);
        this.plugin = plugin;
        this.annotationText = "";
        this.badgeText = "";
        this.badgeColor = "#5B9BD5";
        this.contentUnit = contentUnit;
        this.onSave = onSave;
        this.existingAnnotation = this.plugin.annotationManager.getContentAnnotation(
          contentUnit.id
        );
        if (this.existingAnnotation) {
          this.annotationText = this.existingAnnotation.content;
          if (this.existingAnnotation.badge) {
            this.badgeText = this.existingAnnotation.badge.text;
            this.badgeColor = this.existingAnnotation.badge.color;
          }
        }
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.addClass("annotation-modal");
        contentEl.createEl("h2", {
          text: this.existingAnnotation ? "Edit Annotation" : "Add Annotation"
        });
        const contentPreview = contentEl.createDiv({ cls: "annotation-content-preview" });
        contentPreview.createEl("h3", { text: "Content:" });
        contentPreview.createEl("blockquote", { text: this.contentUnit.content });
        new import_obsidian9.Setting(contentEl).setName("Annotation").setDesc("Add your notes or comments about this content").addTextArea((text) => {
          text.setPlaceholder("Enter your annotation here...").setValue(this.annotationText).onChange((value) => {
            this.annotationText = value;
          });
          text.inputEl.rows = 6;
          text.inputEl.style.width = "100%";
        });
        contentEl.createEl("h3", { text: "Badge (Optional)" });
        new import_obsidian9.Setting(contentEl).setName("Badge text").setDesc('Short text to display as a badge (e.g., "\u91CD\u8981", "\u5F85\u590D\u4E60")').addText(
          (text) => text.setPlaceholder("Badge text").setValue(this.badgeText).onChange((value) => {
            this.badgeText = value;
            this.updateBadgePreview();
          })
        );
        new import_obsidian9.Setting(contentEl).setName("Badge color").setDesc("Choose a color for the badge").addDropdown((dropdown) => {
          dropdown.addOption("#5B9BD5", "\u{1F535} Blue").addOption("#70AD47", "\u{1F7E2} Green").addOption("#FFC000", "\u{1F7E1} Yellow").addOption("#FF6B6B", "\u{1F534} Red").addOption("#C78BFF", "\u{1F7E3} Purple").addOption("#FF9F43", "\u{1F7E0} Orange").setValue(this.badgeColor).onChange((value) => {
            this.badgeColor = value;
            this.updateBadgePreview();
          });
        });
        const badgePreview = contentEl.createDiv({ cls: "badge-preview-container" });
        badgePreview.createEl("span", { text: "Preview: ", cls: "preview-label" });
        const badgeEl = badgePreview.createEl("span", { cls: "badge-preview" });
        this.badgePreviewEl = badgeEl;
        this.updateBadgePreview();
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        if (this.existingAnnotation) {
          const deleteBtn = buttonContainer.createEl("button", {
            text: "Delete",
            cls: "mod-warning"
          });
          deleteBtn.addEventListener("click", async () => {
            await this.deleteAnnotation();
          });
        }
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => {
          this.close();
        });
        const saveBtn = buttonContainer.createEl("button", {
          text: "Save",
          cls: "mod-cta"
        });
        saveBtn.addEventListener("click", async () => {
          await this.saveAnnotation();
        });
        this.addStyles();
      }
      updateBadgePreview() {
        if (!this.badgePreviewEl)
          return;
        if (this.badgeText) {
          this.badgePreviewEl.textContent = this.badgeText;
          this.badgePreviewEl.style.backgroundColor = this.badgeColor;
          this.badgePreviewEl.style.display = "inline-block";
        } else {
          this.badgePreviewEl.textContent = "No badge";
          this.badgePreviewEl.style.backgroundColor = "transparent";
          this.badgePreviewEl.style.color = "var(--text-muted)";
        }
      }
      async saveAnnotation() {
        if (!this.annotationText.trim()) {
          new import_obsidian9.Notice("Please enter annotation text");
          return;
        }
        try {
          let annotation;
          if (this.existingAnnotation) {
            await this.plugin.annotationManager.updateAnnotation(
              this.existingAnnotation.id,
              {
                content: this.annotationText,
                badge: this.badgeText ? {
                  text: this.badgeText,
                  color: this.badgeColor
                } : void 0
              }
            );
            annotation = this.plugin.annotationManager.getAnnotation(
              this.existingAnnotation.id
            );
            new import_obsidian9.Notice("Annotation updated");
          } else {
            annotation = await this.plugin.annotationManager.addContentAnnotation(
              this.contentUnit.id,
              this.annotationText,
              this.badgeText ? {
                text: this.badgeText,
                color: this.badgeColor
              } : void 0
            );
            new import_obsidian9.Notice("Annotation added");
          }
          this.onSave(annotation);
          this.close();
        } catch (error) {
          console.error("Error saving annotation:", error);
          new import_obsidian9.Notice("Error saving annotation");
        }
      }
      async deleteAnnotation() {
        if (!this.existingAnnotation)
          return;
        try {
          await this.plugin.annotationManager.deleteAnnotation(
            this.existingAnnotation.id
          );
          new import_obsidian9.Notice("Annotation deleted");
          this.close();
          this.onSave(null);
        } catch (error) {
          console.error("Error deleting annotation:", error);
          new import_obsidian9.Notice("Error deleting annotation");
        }
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      .annotation-modal {
        padding: 20px;
      }

      .annotation-content-preview {
        margin: 20px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .annotation-content-preview h3 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .annotation-content-preview blockquote {
        margin: 0;
        padding: 10px;
        border-left: 3px solid var(--interactive-accent);
        background: var(--background-primary);
        border-radius: 4px;
      }

      .badge-preview-container {
        margin: 10px 0;
        padding: 10px;
        background: var(--background-secondary);
        border-radius: 4px;
      }

      .preview-label {
        color: var(--text-muted);
        margin-right: 10px;
      }

      .badge-preview {
        padding: 4px 10px;
        border-radius: 12px;
        color: white;
        font-size: 0.85em;
        font-weight: 500;
      }

      .modal-button-container {
        display: flex;
        gap: 10px;
        justify-content: flex-end;
        margin-top: 20px;
      }

      .modal-button-container button {
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
      }
    `;
        document.head.appendChild(styleEl);
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
    FileAnnotationModal = class extends import_obsidian9.Modal {
      constructor(app, plugin, filePath, onSave) {
        super(app);
        this.plugin = plugin;
        this.existingAnnotations = [];
        this.annotationText = "";
        this.filePath = filePath;
        this.onSave = onSave;
        this.existingAnnotations = this.plugin.annotationManager.getFileAnnotations(filePath);
      }
      onOpen() {
        var _a;
        const { contentEl } = this;
        contentEl.createEl("h2", { text: "File Annotations" });
        const fileName = ((_a = this.filePath.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || this.filePath;
        contentEl.createEl("p", {
          text: `File: ${fileName}`,
          cls: "file-name"
        });
        if (this.existingAnnotations.length > 0) {
          const existingSection = contentEl.createDiv({ cls: "existing-annotations" });
          existingSection.createEl("h3", { text: "Existing Annotations" });
          this.existingAnnotations.forEach((annotation) => {
            const annotationCard = existingSection.createDiv({ cls: "annotation-card" });
            annotationCard.createEl("p", { text: annotation.content });
            const date = new Date(annotation.metadata.createdAt).toLocaleDateString();
            annotationCard.createEl("small", {
              text: `Created: ${date}`,
              cls: "annotation-date"
            });
            const deleteBtn = annotationCard.createEl("button", {
              text: "\u{1F5D1} Delete",
              cls: "delete-annotation-btn"
            });
            deleteBtn.addEventListener("click", async () => {
              await this.deleteAnnotation(annotation.id);
              this.close();
              this.onSave();
            });
          });
        }
        contentEl.createEl("h3", { text: "Add New Annotation" });
        new import_obsidian9.Setting(contentEl).setName("Annotation").setDesc("Add notes about this file").addTextArea((text) => {
          text.setPlaceholder("Enter file annotation...").setValue(this.annotationText).onChange((value) => {
            this.annotationText = value;
          });
          text.inputEl.rows = 4;
          text.inputEl.style.width = "100%";
        });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => {
          this.close();
        });
        const saveBtn = buttonContainer.createEl("button", {
          text: "Save",
          cls: "mod-cta"
        });
        saveBtn.addEventListener("click", async () => {
          await this.saveAnnotation();
        });
      }
      async saveAnnotation() {
        if (!this.annotationText.trim()) {
          new import_obsidian9.Notice("Please enter annotation text");
          return;
        }
        try {
          await this.plugin.annotationManager.addFileAnnotation(
            this.filePath,
            this.annotationText
          );
          new import_obsidian9.Notice("File annotation added");
          this.close();
          this.onSave();
        } catch (error) {
          console.error("Error saving file annotation:", error);
          new import_obsidian9.Notice("Error saving file annotation");
        }
      }
      async deleteAnnotation(id) {
        try {
          await this.plugin.annotationManager.deleteAnnotation(id);
          new import_obsidian9.Notice("Annotation deleted");
        } catch (error) {
          console.error("Error deleting annotation:", error);
          new import_obsidian9.Notice("Error deleting annotation");
        }
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => LearningSystemPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian10 = require("obsidian");

// src/ui/SettingsTab.ts
var import_obsidian = require("obsidian");
var SettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Learning System Settings" });
    new import_obsidian.Setting(containerEl).setName("Enable extraction").setDesc("Enable automatic content extraction").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.extractionEnabled).onChange(async (value) => {
        this.plugin.settings.extractionEnabled = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Auto scan").setDesc("Automatically scan files when they are opened").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.autoScan).onChange(async (value) => {
        this.plugin.settings.autoScan = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Default deck").setDesc("Default deck name for new flashcards").addText(
      (text) => text.setPlaceholder("Default").setValue(this.plugin.settings.defaultDeck).onChange(async (value) => {
        this.plugin.settings.defaultDeck = value;
        await this.plugin.saveSettings();
      })
    );
  }
};

// src/main.ts
init_OverviewView();

// src/ui/SidebarOverviewView.ts
var import_obsidian5 = require("obsidian");
init_QuickFlashcardCreator();
var VIEW_TYPE_SIDEBAR_OVERVIEW = "learning-system-sidebar-overview";
var VIEW_TYPE_MAIN_OVERVIEW = "learning-system-main-overview";
var SidebarOverviewView = class extends import_obsidian5.ItemView {
  constructor(leaf, plugin, forceMainMode = false) {
    super(leaf);
    // 状态管理
    this.forceMainMode = false;
    this.searchQuery = "";
    this.filterMode = "all";
    this.groupMode = "file";
    this.selectedFile = null;
    this.displayMode = "sidebar";
    this.viewType = "notes";
    this.activeMenuId = null;
    this.savedScrollPosition = 0;
    this.shouldRestoreScroll = false;
    this.batchMode = false;
    this.selectedUnitIds = /* @__PURE__ */ new Set();
    this.selectedCardIds = /* @__PURE__ */ new Set();
    // 性能优化
    this.searchDebounceTimer = null;
    this.isRendering = false;
    this.plugin = plugin;
    this.forceMainMode = forceMainMode;
    const activeFile = this.app.workspace.getActiveFile();
    if (activeFile) {
      this.selectedFile = activeFile.path;
    }
    let resizeTimer;
    window.addEventListener("resize", () => {
      clearTimeout(resizeTimer);
      resizeTimer = window.setTimeout(() => {
        this.detectDisplayMode();
        this.render();
      }, 150);
    });
    window.addEventListener("resize", () => {
      this.detectDisplayMode();
      this.render();
    });
  }
  getViewType() {
    const viewType = this.forceMainMode ? VIEW_TYPE_MAIN_OVERVIEW : VIEW_TYPE_SIDEBAR_OVERVIEW;
    return viewType;
  }
  getDisplayText() {
    return "Learning Overview";
  }
  getIcon() {
    return "book-marked";
  }
  async onOpen() {
    console.log("[onOpen] Start", {
      forceMainMode: this.forceMainMode,
      viewType: this.getViewType()
    });
    this.detectDisplayMode();
    console.log("[onOpen] After detectDisplayMode:", this.displayMode);
    if (!this.forceMainMode) {
      console.log("[onOpen] Registering active-leaf-change");
      this.registerEvent(
        this.app.workspace.on("active-leaf-change", () => {
          console.log("[active-leaf-change] Triggered");
          const activeFile = this.app.workspace.getActiveFile();
          if (activeFile && this.displayMode === "sidebar") {
            this.selectedFile = activeFile.path;
            this.refresh();
          }
        })
      );
    }
    console.log("[onOpen] Before render");
    this.render();
    console.log("[onOpen] After render");
    this.addStyles();
    console.log("[onOpen] Completed");
  }
  // ==================== 核心方法 ====================
  /**
   * 检测当前显示模式（侧边栏 vs 主界面）
   */
  detectDisplayMode() {
    if (this.forceMainMode) {
      this.displayMode = "main";
      return;
    }
    const parentSplit = this.leaf.parentSplit;
    const isLeftSidebar = (parentSplit == null ? void 0 : parentSplit.type) === "split" && this.app.workspace.leftSplit === parentSplit;
    const isRightSidebar = (parentSplit == null ? void 0 : parentSplit.type) === "split" && this.app.workspace.rightSplit === parentSplit;
    const containerEl = this.containerEl;
    const width = containerEl.clientWidth;
    const isNarrow = width < 500;
    const isSidebar = isLeftSidebar || isRightSidebar || isNarrow;
    this.displayMode = isSidebar ? "sidebar" : "main";
  }
  /**
   * 刷新视图
   */
  refresh() {
    if (!this.isRendering) {
      this.render();
    }
  }
  /**
   * 主渲染方法
   */
  render() {
    console.log("[render] Called", {
      isRendering: this.isRendering,
      displayMode: this.displayMode,
      filterMode: this.filterMode,
      viewType: this.viewType
    });
    if (this.isRendering) {
      console.log("[render] Already rendering, return");
      return;
    }
    if (this.searchDebounceTimer !== null) {
      window.clearTimeout(this.searchDebounceTimer);
      this.searchDebounceTimer = null;
    }
    this.isRendering = true;
    console.log("[render] Set isRendering = true");
    const container = this.containerEl.children[1];
    console.log("[render] Got container:", !!container);
    if (this.displayMode === "sidebar") {
      const contentList = container.querySelector(".sidebar-content-list");
      if (contentList) {
        this.savedScrollPosition = contentList.scrollTop;
      }
    }
    container.style.pointerEvents = "auto";
    const toolbar = container.querySelector(".sidebar-toolbar");
    if (toolbar) {
      toolbar.style.pointerEvents = "auto";
      toolbar.style.position = "relative";
      toolbar.style.zIndex = "100";
    }
    if (this.displayMode === "main" && !this.selectedFile && this.viewType === "notes") {
      const units = this.getFilteredUnits();
      const grouped = this.groupUnits(units);
      if (grouped.length > 0) {
        this.selectedFile = grouped[0].groupKey;
      }
    }
    container.empty();
    container.addClass("learning-overview-container");
    container.setAttribute("data-mode", this.displayMode);
    if (this.displayMode === "sidebar") {
      this.renderSidebarMode(container);
    } else {
      this.renderMainMode(container);
    }
    if (this.displayMode === "sidebar" && this.shouldRestoreScroll) {
      const contentList = container.querySelector(".sidebar-content-list");
      if (contentList) {
        requestAnimationFrame(() => {
          contentList.scrollTop = this.savedScrollPosition;
        });
      }
    }
    this.isRendering = false;
  }
  /**
   * 仅刷新内容区域（不重新渲染整个视图）
   */
  refreshContent() {
    const container = this.containerEl.children[1];
    if (this.displayMode === "sidebar") {
      const contentList = container.querySelector(".sidebar-content-list");
      if (contentList) {
        this.savedScrollPosition = contentList.scrollTop;
        contentList.empty();
        this.renderCompactContentList(contentList);
        requestAnimationFrame(() => {
          contentList.scrollTop = this.savedScrollPosition;
        });
      }
    } else {
      const rightPanel = container.querySelector(".right-panel");
      if (rightPanel) {
        rightPanel.empty();
        this.renderRightPanel(rightPanel);
      }
    }
  }
  // ==================== 侧边栏模式渲染 ====================
  renderSidebarMode(container) {
    this.renderSidebarToolbar(container);
    const contentList = container.createDiv({ cls: "sidebar-content-list" });
    this.renderCompactContentList(contentList);
  }
  renderSidebarToolbar(container) {
    console.log("[renderSidebarToolbar] Start");
    const toolbar = container.createDiv({ cls: "sidebar-toolbar" });
    console.log("[renderSidebarToolbar] Created toolbar");
    const searchContainer = toolbar.createDiv({ cls: "search-container" });
    console.log("[renderSidebarToolbar] Created searchContainer");
    const searchInput = searchContainer.createEl("input", {
      type: "text",
      placeholder: "\u{1F50D} \u641C\u7D22\u7B14\u8BB0...",
      cls: "search-input"
    });
    searchInput.value = this.searchQuery;
    searchInput.addEventListener("input", (e) => {
      const value = e.target.value;
      this.searchQuery = value;
      if (this.searchDebounceTimer !== null) {
        window.clearTimeout(this.searchDebounceTimer);
      }
      this.searchDebounceTimer = window.setTimeout(() => {
        this.selectedUnitIds.clear();
        this.selectedCardIds.clear();
        this.refreshContent();
      }, 300);
    });
    const filters = toolbar.createDiv({ cls: "filter-chips" });
    const filterOptions = [
      { mode: "all", icon: "\u{1F4DD}", label: "\u5168\u90E8" },
      { mode: "annotated", icon: "\u{1F4AC}", label: "\u6279\u6CE8" },
      { mode: "flashcards", icon: "\u{1F0CF}", label: "\u95EA\u5361" }
    ];
    filterOptions.forEach(({ mode, icon, label }) => {
      const chip = filters.createDiv({
        cls: `filter-chip ${this.filterMode === mode ? "active" : ""}`,
        text: `${icon} ${label}`
      });
      chip.addEventListener("click", () => {
        if (this.filterMode !== mode) {
          this.filterMode = mode;
          this.autoSelectAll();
          this.shouldRestoreScroll = false;
          console.log("[Filter Click] Before render");
          this.render();
          console.log("[Filter Click] After render");
        }
      });
    });
    const groupSwitcher = toolbar.createDiv({ cls: "group-switcher" });
    const groupOptions = [
      { mode: "file", icon: "\u{1F4C1}", tooltip: "\u6309\u6587\u4EF6" },
      { mode: "tag", icon: "\u{1F3F7}\uFE0F", tooltip: "\u6309\u6807\u7B7E" },
      { mode: "date", icon: "\u{1F4C5}", tooltip: "\u6309\u65E5\u671F" }
    ];
    groupOptions.forEach(({ mode, icon, tooltip }) => {
      const btn = groupSwitcher.createDiv({
        cls: `group-btn ${this.groupMode === mode ? "active" : ""}`,
        text: icon
      });
      btn.setAttribute("aria-label", tooltip);
      btn.addEventListener("click", () => {
        if (this.groupMode !== mode) {
          this.groupMode = mode;
          this.autoSelectAll();
          this.render();
        }
      });
    });
    const statsRow = toolbar.createDiv({ cls: "stats-row" });
    const selectAllBtn = statsRow.createEl("button", {
      text: this.isAllSelected() ? "\u2713" : "\u2610",
      cls: `select-all-btn-sidebar ${this.isAllSelected() ? "completed" : ""}`,
      title: this.isAllSelected() ? "\u53D6\u6D88\u5168\u9009" : "\u5168\u9009"
    });
    const shouldDisable = !this.selectedFile && this.groupMode !== "file";
    if (shouldDisable) {
      selectAllBtn.disabled = true;
      selectAllBtn.style.opacity = "0.5";
      selectAllBtn.style.cursor = "not-allowed";
      selectAllBtn.title = "\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u5206\u7EC4";
    }
    selectAllBtn.addEventListener("click", () => {
      this.toggleSelectAll();
    });
    if (this.batchMode) {
      if (this.viewType === "notes") {
        const createBtn = statsRow.createEl("button", {
          text: `\u26A1(${this.selectedUnitIds.size})`,
          cls: "batch-create-cards-btn-sidebar",
          title: "\u6279\u91CF\u5236\u5361"
        });
        createBtn.addEventListener("click", () => {
          if (this.selectedUnitIds.size === 0) {
            new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u521B\u5EFA\u95EA\u5361\u7684\u7B14\u8BB0");
            return;
          }
          this.batchCreateFlashcards();
        });
      }
      const deleteBtn = statsRow.createEl("button", {
        text: `\u{1F5D1}\uFE0F(${this.viewType === "cards" ? this.selectedCardIds.size : this.selectedUnitIds.size})`,
        cls: "batch-delete-btn-sidebar",
        title: "\u6279\u91CF\u5220\u9664"
      });
      deleteBtn.addEventListener("click", () => {
        const count = this.viewType === "cards" ? this.selectedCardIds.size : this.selectedUnitIds.size;
        if (count === 0) {
          new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u9879\u76EE");
          return;
        }
        if (this.viewType === "cards") {
          this.batchDeleteFlashcards();
        } else {
          this.batchDeleteNotes();
        }
      });
      if (this.batchMode) {
        const cancelBtn = statsRow.createEl("button", {
          text: "\u2715",
          cls: "cancel-selection-btn-sidebar",
          title: "\u5173\u95ED"
        });
        cancelBtn.addEventListener("click", () => {
          this.clearSelection();
        });
      }
    }
  }
  /**
   * 渲染紧凑内容列表（侧边栏模式）
   */
  renderCompactContentList(container) {
    let units = this.getFilteredUnits();
    if (this.displayMode === "sidebar" && this.selectedFile) {
      units = units.filter((unit) => unit.source.file === this.selectedFile);
    }
    if (units.length === 0) {
      const emptyDiv = container.createDiv({ cls: "empty-state" });
      if (this.selectedFile) {
        emptyDiv.innerHTML = `
        <div style="padding: 20px; text-align: center;">
          <div style="font-size: 32px; margin-bottom: 10px;">\u{1F4ED}</div>
          <div style="color: var(--text-muted);">\u5F53\u524D\u6587\u6863\u6682\u65E0\u7B14\u8BB0</div>
          <div style="font-size: 12px; color: var(--text-faint); margin-top: 8px;">
            ${this.filterMode !== "all" ? "\u5C1D\u8BD5\u5207\u6362\u5176\u4ED6\u8FC7\u6EE4\u5668\u67E5\u770B" : "\u5F00\u59CB\u9AD8\u4EAE\u6587\u672C\u6765\u521B\u5EFA\u7B14\u8BB0"}
          </div>
        </div>
      `;
      } else {
        emptyDiv.textContent = "\u6682\u65E0\u5185\u5BB9";
      }
      return;
    }
    const grouped = this.groupUnits(units);
    grouped.forEach(({ groupKey, units: groupUnits }) => {
      const groupEl = container.createDiv({ cls: "content-group" });
      const header = groupEl.createDiv({ cls: "group-header" });
      header.createSpan({ text: this.getGroupIcon(this.groupMode), cls: "group-icon" });
      header.createSpan({ text: groupKey, cls: "group-title" });
      header.createSpan({ text: `${groupUnits.length}`, cls: "group-count" });
      groupUnits.forEach((unit) => {
        this.renderCompactCard(groupEl, unit);
      });
    });
  }
  /**
   * 渲染紧凑卡片（侧边栏模式）
   */
  renderCompactCard(container, unit) {
    const card = container.createDiv({ cls: "compact-card" });
    if (this.batchMode) {
      const checkbox = card.createEl("input", {
        type: "checkbox",
        cls: "batch-checkbox"
      });
      checkbox.setAttribute("data-unit-id", unit.id);
      checkbox.checked = this.selectedUnitIds.has(unit.id);
      checkbox.addEventListener("change", (e) => {
        if (e.target.checked) {
          this.selectedUnitIds.add(unit.id);
        } else {
          this.selectedUnitIds.delete(unit.id);
        }
        this.render();
      });
    }
    const indicator = card.createDiv({ cls: "card-indicator" });
    if (unit.annotationId)
      indicator.addClass("has-annotation");
    if (unit.flashcardIds.length > 0)
      indicator.addClass("has-flashcard");
    const content = card.createDiv({ cls: "card-content" });
    const header = content.createDiv({ cls: "card-header" });
    header.addEventListener("click", () => {
      this.toggleInlineAnnotation(card, unit);
    });
    const annotationBtn = header.createDiv({ cls: "annotation-btn" });
    annotationBtn.innerHTML = "\u{1F4AC}";
    const tools = header.createDiv({ cls: "card-tools" });
    tools.addEventListener("click", (e) => {
      e.stopPropagation();
    });
    if (!this.batchMode) {
      const flashcardBtn = tools.createDiv({ cls: "tool-btn flashcard-btn" });
      flashcardBtn.innerHTML = "\u26A1";
      flashcardBtn.setAttribute("aria-label", "\u751F\u6210\u95EA\u5361");
      flashcardBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        this.quickGenerateFlashcard(unit);
      });
    }
    const moreBtn = tools.createDiv({ cls: "tool-btn more-btn" });
    moreBtn.innerHTML = "\u22EE";
    moreBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      this.showContextMenu(e, unit);
    });
    const noteText = content.createDiv({ cls: "note-text" });
    const truncatedText = unit.content.length > 80 ? unit.content.substring(0, 80) + "..." : unit.content;
    noteText.textContent = truncatedText;
    noteText.addEventListener("click", () => {
      this.jumpToSource(unit);
    });
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    if (annotation) {
      const annEl = content.createDiv({ cls: "annotation-preview" });
      const annText = annotation.content.length > 60 ? annotation.content.substring(0, 60) + "..." : annotation.content;
      annEl.textContent = `\u{1F4AC} ${annText}`;
      annEl.addEventListener("click", (e) => {
        e.stopPropagation();
        this.toggleInlineAnnotation(card, unit);
      });
    }
    const meta = content.createDiv({ cls: "card-meta" });
    if (unit.metadata.tags.length > 0) {
      unit.metadata.tags.slice(0, 2).forEach((tag) => {
        meta.createSpan({ text: `#${tag}`, cls: "tag" });
      });
      if (unit.metadata.tags.length > 2) {
        meta.createSpan({ text: `+${unit.metadata.tags.length - 2}`, cls: "tag-more" });
      }
    }
    if (unit.flashcardIds.length > 0) {
      meta.createSpan({ text: `\u{1F0CF} ${unit.flashcardIds.length}`, cls: "badge" });
    }
  }
  // ==================== 主界面模式渲染 ====================
  renderMainMode(container) {
    const layout = container.createDiv({ cls: "main-layout" });
    const leftPanel = layout.createDiv({ cls: "left-panel" });
    if (!this.selectedFile && this.viewType === "notes") {
      const units = this.getFilteredUnits();
      const grouped = this.groupUnits(units);
      if (grouped.length > 0) {
        this.selectedFile = grouped[0].groupKey;
      }
    }
    this.renderLeftPanel(leftPanel);
    const rightPanel = layout.createDiv({ cls: "right-panel" });
    this.renderRightPanel(rightPanel);
  }
  renderLeftPanel(container) {
    this.renderMainToolbar(container);
    this.renderFixedEntries(container);
    this.renderFileList(container);
  }
  renderMainToolbar(container) {
    const toolbar = container.createDiv({ cls: "main-toolbar" });
    const searchInput = toolbar.createEl("input", {
      type: "text",
      placeholder: "\u{1F50D} \u641C\u7D22...",
      cls: "search-input-main"
    });
    searchInput.value = this.searchQuery;
    searchInput.addEventListener("input", (e) => {
      const value = e.target.value;
      this.searchQuery = value;
      if (this.searchDebounceTimer !== null) {
        window.clearTimeout(this.searchDebounceTimer);
      }
      this.searchDebounceTimer = window.setTimeout(() => {
        this.selectedFile = null;
        const container2 = this.containerEl.children[1];
        const rightPanel = container2.querySelector(".right-panel");
        if (rightPanel) {
          rightPanel.empty();
          this.renderRightPanel(rightPanel);
        }
        const fileListContainer = container2.querySelector(".file-list");
        if (fileListContainer) {
          fileListContainer.empty();
          this.renderFileListContent(fileListContainer);
        }
        this.selectedUnitIds.clear();
        this.selectedCardIds.clear();
      }, 300);
    });
    const groupSwitcher = toolbar.createDiv({ cls: "group-switcher-main" });
    const groupOptions = [
      { mode: "file", icon: "\u{1F4C1}", label: "\u6587\u4EF6" },
      { mode: "tag", icon: "\u{1F3F7}\uFE0F", label: "\u6807\u7B7E" },
      { mode: "date", icon: "\u{1F4C5}", label: "\u65E5\u671F" }
    ];
    groupOptions.forEach(({ mode, icon, label }) => {
      const btn = groupSwitcher.createDiv({
        cls: `group-btn-main ${this.groupMode === mode ? "active" : ""}`
      });
      btn.innerHTML = `${icon} <span>${label}</span>`;
      btn.addEventListener("click", () => {
        if (this.groupMode !== mode) {
          this.groupMode = mode;
          this.selectedFile = null;
          this.autoSelectAll();
          this.render();
          const container2 = this.containerEl.children[1];
          const fileListContainer = container2.querySelector(".file-list");
          if (fileListContainer) {
            fileListContainer.empty();
            this.renderFileListContent(fileListContainer);
          }
          const rightPanel = container2.querySelector(".right-panel");
          if (rightPanel) {
            rightPanel.empty();
            this.renderRightPanel(rightPanel);
          }
        }
      });
    });
  }
  renderFixedEntries(container) {
    const entries = container.createDiv({ cls: "fixed-entries" });
    const allNotesBtn = entries.createDiv({
      cls: `entry-btn ${this.viewType === "notes" ? "active" : ""}`
    });
    allNotesBtn.innerHTML = "\u{1F4DD} <span>\u5168\u90E8\u7B14\u8BB0</span>";
    allNotesBtn.addEventListener("click", () => {
      this.viewType = "notes";
      this.selectedFile = null;
      this.autoSelectAll();
      this.render();
    });
    const cardListBtn = entries.createDiv({
      cls: `entry-btn ${this.viewType === "cards" ? "active" : ""}`
    });
    cardListBtn.innerHTML = "\u{1F0CF} <span>Card List</span>";
    cardListBtn.addEventListener("click", () => {
      this.viewType = "cards";
      this.selectedFile = null;
      this.autoSelectAll();
      this.render();
    });
  }
  renderFileList(container) {
    const titleText = this.viewType === "cards" ? "\u95EA\u5361\u5206\u7EC4" : "\u6587\u6863\u5217\u8868";
    container.createEl("h3", { text: "\u{1F4C1} \u6587\u6863\u5217\u8868", cls: "panel-title" });
    const fileListContainer = container.createDiv({ cls: "file-list" });
    this.renderFileListContent(fileListContainer);
  }
  renderFileListContent(container) {
    container.empty();
    let grouped;
    if (this.viewType === "cards") {
      const flashcards = this.plugin.flashcardManager.getAllFlashcards();
      const cardGroups = this.groupFlashcards(flashcards);
      grouped = cardGroups.map((g) => ({ groupKey: g.groupKey, cards: g.cards, count: g.cards.length }));
    } else {
      const units = this.getFilteredUnits();
      const unitGroups = this.groupUnits(units);
      grouped = unitGroups.map((g) => ({ groupKey: g.groupKey, units: g.units, count: g.units.length }));
    }
    if (grouped.length === 0) {
      container.createDiv({
        text: "\u6682\u65E0\u6587\u6863",
        cls: "empty-hint"
      });
      return;
    }
    if (!this.selectedFile && grouped.length > 0) {
      this.selectedFile = grouped[0].groupKey;
    }
    grouped.forEach(({ groupKey, count }) => {
      const fileItem = container.createDiv({
        cls: `file-item ${this.selectedFile === groupKey ? "selected" : ""}`
      });
      fileItem.innerHTML = `
        <span class="file-icon">${this.getGroupIcon(this.groupMode)}</span>
        <span class="file-name">${groupKey}</span>
        <span class="file-count">${count}</span>
      `;
      fileItem.addEventListener("click", () => {
        try {
          if (this.selectedFile !== groupKey) {
            this.selectedFile = groupKey;
            const allItems = container.querySelectorAll(".file-item");
            allItems.forEach((item) => item.removeClass("selected"));
            fileItem.addClass("selected");
            const mainContainer = this.containerEl.children[1];
            const rightPanel = mainContainer.querySelector(".right-panel");
            if (rightPanel) {
              rightPanel.empty();
              this.renderRightPanel(rightPanel);
            }
          }
        } catch (error) {
          console.error("[fileItem click] Error:", error);
          new import_obsidian5.Notice("\u26A0\uFE0F \u5207\u6362\u5206\u7EC4\u65F6\u51FA\u9519\uFF0C\u8BF7\u91CD\u8BD5");
        }
      });
    });
  }
  renderRightPanel(container) {
    if (this.viewType === "cards") {
      if (!this.selectedFile) {
        const flashcards = this.plugin.flashcardManager.getAllFlashcards();
        const grouped = this.groupFlashcards(flashcards);
        if (grouped.length > 0) {
          this.selectedFile = grouped[0].groupKey;
        } else {
          const empty = container.createDiv({ cls: "empty-right-panel" });
          empty.innerHTML = `
            <div class="empty-icon">\u{1F4ED}</div>
            <div class="empty-text">\u6682\u65E0\u95EA\u5361</div>
          `;
          return;
        }
      }
      this.renderFlashcardsGrid(container);
      return;
    }
    if (!this.selectedFile) {
      const units = this.getFilteredUnits();
      const grouped = this.groupUnits(units);
      if (grouped.length > 0) {
        this.selectedFile = grouped[0].groupKey;
        const container2 = this.containerEl.children[1];
        const fileListContainer = container2.querySelector(".file-list");
        if (fileListContainer) {
          const firstItem = fileListContainer.querySelector(".file-item");
          firstItem == null ? void 0 : firstItem.addClass("selected");
        }
      } else {
        const empty = container.createDiv({ cls: "empty-right-panel" });
        empty.innerHTML = `
          <div class="empty-icon">\u{1F4ED}</div>
          <div class="empty-text">\u6682\u65E0\u5185\u5BB9</div>
        `;
        return;
      }
    }
    this.renderContentGrid(container);
  }
  /**
   * 渲染内容网格（主界面模式）
   */
  renderContentGrid(container) {
    const header = container.createDiv({ cls: "grid-header" });
    const title = header.createEl("h2", { text: this.selectedFile || "\u5185\u5BB9" });
    const headerActions = header.createDiv({ cls: "header-actions" });
    if (this.batchMode) {
      if (this.viewType === "notes") {
        const createBtn = headerActions.createEl("button", {
          text: `\u26A1 \u6279\u91CF\u5236\u5361 (${this.selectedUnitIds.size})`,
          cls: "batch-create-cards-btn-header"
        });
        createBtn.addEventListener("click", () => {
          if (this.selectedUnitIds.size === 0) {
            new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u521B\u5EFA\u95EA\u5361\u7684\u7B14\u8BB0");
            return;
          }
          this.batchCreateFlashcards();
        });
      }
      const deleteBtn = headerActions.createEl("button", {
        text: `\u{1F5D1}\uFE0F \u5220\u9664 (${this.viewType === "cards" ? this.selectedCardIds.size : this.selectedUnitIds.size})`,
        cls: "batch-delete-btn-header"
      });
      deleteBtn.addEventListener("click", () => {
        const count = this.viewType === "cards" ? this.selectedCardIds.size : this.selectedUnitIds.size;
        if (count === 0) {
          new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u9879\u76EE");
          return;
        }
        if (this.viewType === "cards") {
          this.batchDeleteFlashcards();
        } else {
          this.batchDeleteNotes();
        }
      });
    }
    if (this.batchMode) {
      const cancelBtn = headerActions.createEl("button", {
        text: "\u2715 \u53D6\u6D88",
        cls: "cancel-selection-btn-header"
      });
      cancelBtn.addEventListener("click", () => {
        this.clearSelection();
      });
    }
    const selectAllBtn = headerActions.createEl("button", {
      text: this.isAllSelected() ? "\u2713 \u9009\u62E9" : "\u2610 \u5168\u9009",
      cls: `select-all-btn-header ${this.isAllSelected() ? "completed" : ""}`
    });
    selectAllBtn.addEventListener("click", () => {
      this.toggleSelectAll();
    });
    const gridContainer = container.createDiv({ cls: "content-grid" });
    const units = this.getFilteredUnits().filter((unit) => {
      if (this.groupMode === "file") {
        return unit.source.file === this.selectedFile;
      } else if (this.groupMode === "tag") {
        return unit.metadata.tags.includes(this.selectedFile);
      } else if (this.groupMode === "date") {
        return this.formatDate(new Date(unit.metadata.createdAt)) === this.selectedFile;
      }
      return false;
    });
    if (units.length === 0) {
      gridContainer.createDiv({
        text: "\u{1F4ED} \u6682\u65E0\u5185\u5BB9",
        cls: "empty-state"
      });
      return;
    }
    units.forEach((unit) => {
      this.renderGridCard(gridContainer, unit);
    });
  }
  /**
  * 渲染闪卡网格（类似 renderContentGrid）
  */
  renderFlashcardsGrid(container) {
    const header = container.createDiv({ cls: "grid-header" });
    header.createEl("h2", { text: this.selectedFile || "\u95EA\u5361" });
    const headerActions = header.createDiv({ cls: "header-actions" });
    if (this.batchMode) {
      const deleteBtn = headerActions.createEl("button", {
        text: `\u{1F5D1}\uFE0F \u5220\u9664 (${this.selectedCardIds.size})`,
        cls: `batch-delete-btn-header ${this.selectedCardIds.size === 0 ? "disabled" : ""}`
      });
      deleteBtn.addEventListener("click", () => {
        if (this.selectedCardIds.size === 0) {
          new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u95EA\u5361");
          return;
        }
        this.batchDeleteFlashcards();
      });
    }
    if (this.batchMode) {
      const cancelBtn = headerActions.createEl("button", {
        text: "\u2715 \u53D6\u6D88",
        cls: "cancel-selection-btn-header"
      });
      cancelBtn.addEventListener("click", () => {
        this.clearSelection();
      });
    }
    const selectAllBtn = headerActions.createEl("button", {
      text: this.isAllSelected() ? "\u2713 \u5B8C\u6210" : "\u2610 \u5168\u9009",
      cls: `select-all-btn-header ${this.isAllSelected() ? "completed" : ""}`
    });
    selectAllBtn.addEventListener("click", () => {
      this.toggleSelectAll();
    });
    const gridContainer = container.createDiv({ cls: "content-grid" });
    const flashcards = this.plugin.flashcardManager.getAllFlashcards();
    const filteredCards = flashcards.filter((card) => {
      if (!this.selectedFile)
        return false;
      if (this.groupMode === "file") {
        return card.sourceFile === this.selectedFile;
      }
      if (this.groupMode === "tag") {
        const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
        if (unit && unit.metadata.tags && unit.metadata.tags.includes(this.selectedFile)) {
          return true;
        }
        if (card.tags && card.tags.includes(this.selectedFile)) {
          return true;
        }
        if (card.deck === this.selectedFile) {
          return true;
        }
        if (this.selectedFile === "\u672A\u5206\u7C7B" && (!card.tags || card.tags.length === 0) && !card.deck && (!unit || !unit.metadata.tags || unit.metadata.tags.length === 0)) {
          return true;
        }
        return false;
      }
      if (this.groupMode === "date") {
        const cardDate = this.formatDate(new Date(card.metadata.createdAt));
        return cardDate === this.selectedFile;
      }
      return false;
    });
    if (filteredCards.length === 0) {
      gridContainer.createDiv({ text: "\u{1F4ED} \u8BE5\u5206\u7EC4\u4E0B\u6682\u65E0\u95EA\u5361", cls: "empty-state" });
      return;
    }
    filteredCards.forEach((card) => {
      this.renderFlashcardGridCard(gridContainer, card);
    });
  }
  /**
   * 渲染网格卡片（主界面模式）
   */
  renderGridCard(container, unit) {
    var _a;
    const card = container.createDiv({ cls: "grid-card" });
    if (this.batchMode) {
      const checkbox = card.createEl("input", {
        type: "checkbox",
        cls: "batch-checkbox"
      });
      checkbox.setAttribute("data-unit-id", unit.id);
      checkbox.checked = this.selectedUnitIds.has(unit.id);
      checkbox.addEventListener("change", (e) => {
        if (e.target.checked) {
          this.selectedUnitIds.add(unit.id);
        } else {
          this.selectedUnitIds.delete(unit.id);
        }
        this.render();
      });
    }
    const header = card.createDiv({ cls: "grid-card-header" });
    const fileName = ((_a = unit.source.file.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || "";
    header.createSpan({ text: fileName, cls: "doc-name" });
    const tools = header.createDiv({ cls: "grid-card-tools" });
    if (!this.batchMode) {
      const flashcardBtn = tools.createDiv({ cls: "tool-btn-grid" });
      flashcardBtn.innerHTML = "\u26A1";
      flashcardBtn.setAttribute("aria-label", "\u751F\u6210\u95EA\u5361");
      flashcardBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        this.quickGenerateFlashcard(unit);
      });
    }
    const moreBtn = tools.createDiv({ cls: "tool-btn-grid" });
    moreBtn.innerHTML = "\u22EE";
    moreBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      this.showContextMenu(e, unit);
    });
    const content = card.createDiv({ cls: "grid-card-content" });
    const noteText = content.createDiv({ cls: "grid-note-text" });
    noteText.textContent = unit.content;
    noteText.addEventListener("click", () => {
      this.toggleInlineAnnotation(card, unit);
    });
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    if (annotation) {
      const annEl = content.createDiv({ cls: "grid-annotation" });
      annEl.innerHTML = `<strong>\u6279\u6CE8\uFF1A</strong>${annotation.content}`;
      annEl.addEventListener("click", (e) => {
        e.stopPropagation();
        this.toggleInlineAnnotation(card, unit);
      });
    }
    if (unit.metadata.tags.length > 0) {
      const tags = content.createDiv({ cls: "grid-tags" });
      unit.metadata.tags.forEach((tag) => {
        tags.createSpan({ text: `#${tag}`, cls: "tag-grid" });
      });
    }
    const meta = card.createDiv({ cls: "grid-card-meta" });
    meta.createSpan({ text: `L${unit.source.position.line}`, cls: "line-info" });
    if (unit.flashcardIds.length > 0) {
      meta.createSpan({ text: `\u{1F0CF} ${unit.flashcardIds.length}`, cls: "badge-grid" });
    }
  }
  /**
   * 渲染闪卡网格卡片（带下拉菜单）
   */
  renderFlashcardGridCard(container, card) {
    const cardEl = container.createDiv({ cls: "grid-card flashcard-grid-card" });
    if (this.batchMode) {
      const checkbox = cardEl.createEl("input", {
        type: "checkbox",
        cls: "batch-checkbox"
      });
      checkbox.setAttribute("data-card-id", card.id);
      checkbox.checked = this.selectedCardIds.has(card.id);
      checkbox.addEventListener("change", (e) => {
        if (e.target.checked) {
          this.selectedCardIds.add(card.id);
        } else {
          this.selectedCardIds.delete(card.id);
        }
        this.render();
      });
    }
    const header = cardEl.createDiv({ cls: "grid-card-header" });
    const typeLabel = header.createDiv({
      cls: `flashcard-type ${card.type}`,
      text: card.type === "qa" ? "Q&A" : "\u586B\u7A7A"
    });
    const tools = header.createDiv({ cls: "grid-card-tools" });
    const moreBtn = tools.createDiv({ cls: "tool-btn-grid" });
    moreBtn.innerHTML = "\u22EE";
    moreBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      this.showFlashcardContextMenu(e, card);
    });
    const content = cardEl.createDiv({ cls: "grid-card-content" });
    const question = content.createDiv({ cls: "flashcard-question" });
    question.innerHTML = `<strong>\u95EE\u9898\uFF1A</strong>${card.front}`;
    const answer = content.createDiv({ cls: "flashcard-answer" });
    const answerText = Array.isArray(card.back) ? card.back.join(", ") : card.back;
    answer.innerHTML = `<strong>\u7B54\u6848\uFF1A</strong>${answerText}`;
    const meta = cardEl.createDiv({ cls: "grid-card-meta" });
    meta.createSpan({
      text: this.formatDate(new Date(card.metadata.createdAt)),
      cls: "flashcard-date"
    });
  }
  /**
   * 渲染闪卡列表
   */
  renderCardsList(container) {
    const header = container.createDiv({ cls: "cards-header" });
    header.createEl("h2", { text: "\u{1F0CF} \u6240\u6709\u95EA\u5361" });
    const cardsContainer = container.createDiv({ cls: "cards-grid" });
    const flashcards = this.plugin.flashcardManager.getAllFlashcards();
    if (flashcards.length === 0) {
      cardsContainer.createDiv({
        text: "\u{1F4ED} \u6682\u65E0\u95EA\u5361",
        cls: "empty-state"
      });
      return;
    }
    flashcards.forEach((card) => {
      const cardEl = cardsContainer.createDiv({ cls: "flashcard-item" });
      if (this.batchMode) {
        const checkbox = cardEl.createEl("input", {
          type: "checkbox",
          cls: "batch-checkbox"
        });
        checkbox.setAttribute("data-card-id", card.id);
        checkbox.checked = this.selectedCardIds.has(card.id);
        checkbox.addEventListener("change", (e) => {
          if (e.target.checked) {
            this.selectedCardIds.add(card.id);
          } else {
            this.selectedCardIds.delete(card.id);
          }
          this.render();
        });
      }
      const cardHeader = cardEl.createDiv({ cls: "flashcard-header" });
      const typeLabel = cardHeader.createDiv({
        cls: `flashcard-type ${card.type}`,
        text: card.type === "qa" ? "Q&A" : "\u586B\u7A7A"
      });
      cardHeader.createSpan({
        text: this.formatDate(new Date(card.metadata.createdAt)),
        cls: "flashcard-date"
      });
      const deleteBtn = cardHeader.createEl("button", {
        text: "\u{1F5D1}\uFE0F",
        cls: "flashcard-delete-btn"
      });
      deleteBtn.setAttribute("aria-label", "\u5220\u9664\u95EA\u5361");
      deleteBtn.addEventListener("click", async (e) => {
        e.stopPropagation();
        if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u5F20\u95EA\u5361\u5417\uFF1F")) {
          await this.deleteFlashcard(card.id);
        }
      });
      const cardBody = cardEl.createDiv({ cls: "flashcard-body" });
      const question = cardBody.createDiv({ cls: "flashcard-question" });
      question.innerHTML = `<strong>\u95EE\u9898\uFF1A</strong>${card.front}`;
      const answer = cardBody.createDiv({ cls: "flashcard-answer" });
      const answerText = Array.isArray(card.back) ? card.back.join(", ") : card.back;
      answer.innerHTML = `<strong>\u7B54\u6848\uFF1A</strong>${answerText}`;
    });
  }
  // ==================== 交互方法 ====================
  /**
   * 切换内联批注编辑器
   */
  toggleInlineAnnotation(cardEl, unit) {
    let existingEditor = cardEl.querySelector(".inline-annotation-editor");
    if (existingEditor) {
      existingEditor.remove();
      const annotation2 = this.plugin.annotationManager.getContentAnnotation(unit.id);
      if (annotation2) {
        const content2 = cardEl.querySelector(".card-content, .grid-card-content");
        const existingPreview = content2.querySelector(".annotation-preview, .grid-annotation");
        if (!existingPreview) {
          this.recreateAnnotationPreview(content2, cardEl, unit, annotation2.content);
        }
      }
      return;
    }
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    const content = cardEl.querySelector(".card-content, .grid-card-content");
    const annotationPreview = content.querySelector(".annotation-preview, .grid-annotation");
    const isGridCard = cardEl.classList.contains("grid-card");
    const editor = document.createElement("div");
    editor.className = "inline-annotation-editor";
    const textarea = document.createElement("textarea");
    textarea.className = "inline-annotation-textarea";
    textarea.placeholder = "Add comment...";
    textarea.value = (annotation == null ? void 0 : annotation.content) || "";
    const hint = document.createElement("div");
    hint.className = "inline-annotation-hint";
    hint.textContent = "Shift + Enter \u6362\u884C, Enter \u4FDD\u5B58";
    editor.appendChild(textarea);
    editor.appendChild(hint);
    if (annotationPreview) {
      annotationPreview.replaceWith(editor);
    } else {
      const noteText = content.querySelector(".note-text, .grid-note-text");
      if (noteText) {
        noteText.after(editor);
      } else {
        content.appendChild(editor);
      }
    }
    textarea.focus();
    textarea.setSelectionRange(textarea.value.length, textarea.value.length);
    textarea.addEventListener("keydown", async (e) => {
      if (e.key === "Enter" && !e.shiftKey && !e.ctrlKey && !e.metaKey) {
        e.preventDefault();
        await this.saveInlineAnnotation(editor, unit, textarea.value);
      } else if (e.key === "Escape") {
        this.cancelInlineAnnotation(editor, cardEl, unit);
      }
    });
    textarea.addEventListener("blur", (e) => {
      const relatedTarget = e.relatedTarget;
      if (!relatedTarget || !editor.contains(relatedTarget)) {
        setTimeout(() => {
          if (editor.parentElement) {
            this.cancelInlineAnnotation(editor, cardEl, unit);
          }
        }, 200);
      }
    });
  }
  /**
   * 保存内联批注
   */
  async saveInlineAnnotation(editorEl, unit, text) {
    const trimmedText = text.trim();
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    if (trimmedText) {
      if (annotation) {
        await this.plugin.annotationManager.updateAnnotation(annotation.id, {
          content: trimmedText
        });
      } else {
        await this.plugin.annotationManager.addContentAnnotation(unit.id, trimmedText);
      }
      new import_obsidian5.Notice("\u2705 \u6279\u6CE8\u5DF2\u4FDD\u5B58");
    } else if (annotation) {
      await this.plugin.annotationManager.deleteAnnotation(annotation.id);
      new import_obsidian5.Notice("\u{1F5D1}\uFE0F \u6279\u6CE8\u5DF2\u5220\u9664");
    }
    editorEl.remove();
    this.refreshContent();
  }
  /**
   * 取消内联批注编辑
   */
  cancelInlineAnnotation(editorEl, cardEl, unit) {
    editorEl.remove();
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    if (annotation) {
      const content = cardEl.querySelector(".card-content, .grid-card-content");
      this.recreateAnnotationPreview(content, cardEl, unit, annotation.content);
    }
  }
  /**
   * 重新创建批注预览
   */
  recreateAnnotationPreview(contentEl, cardEl, unit, annotationText) {
    const isGridCard = cardEl.classList.contains("grid-card");
    const annEl = contentEl.createDiv({
      cls: isGridCard ? "grid-annotation" : "annotation-preview"
    });
    if (isGridCard) {
      annEl.innerHTML = `<strong>\u6279\u6CE8\uFF1A</strong>${annotationText}`;
    } else {
      const displayText = annotationText.length > 60 ? annotationText.substring(0, 60) + "..." : annotationText;
      annEl.textContent = `\u{1F4AC} ${displayText}`;
    }
    annEl.addEventListener("click", (e) => {
      e.stopPropagation();
      this.toggleInlineAnnotation(cardEl, unit);
    });
    const noteText = contentEl.querySelector(".note-text, .grid-note-text");
    if (noteText) {
      noteText.after(annEl);
    } else {
      contentEl.appendChild(annEl);
    }
  }
  /**
   * 打开批注编辑器（模态框方式，保留用于右键菜单）
   */
  async openAnnotationEditor(unit) {
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    const existingText = (annotation == null ? void 0 : annotation.content) || "";
    const modal = new AnnotationModal(
      this.app,
      existingText,
      async (newText) => {
        if (newText.trim()) {
          if (annotation) {
            await this.plugin.annotationManager.updateAnnotation(annotation.id, {
              content: newText
            });
          } else {
            await this.plugin.annotationManager.addContentAnnotation(unit.id, newText);
          }
          new import_obsidian5.Notice("\u2705 \u6279\u6CE8\u5DF2\u4FDD\u5B58");
        } else if (annotation) {
          await this.plugin.annotationManager.deleteAnnotation(annotation.id);
          new import_obsidian5.Notice("\u{1F5D1}\uFE0F \u6279\u6CE8\u5DF2\u5220\u9664");
        }
        this.refresh();
      }
    );
    modal.open();
  }
  /**
   * 跳转到原文
   */
  async jumpToSource(unit) {
    const file = this.app.vault.getAbstractFileByPath(unit.source.file);
    if (!(file instanceof import_obsidian5.TFile)) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u6587\u4EF6\u4E0D\u5B58\u5728");
      return;
    }
    this.shouldRestoreScroll = true;
    const leaf = this.app.workspace.getLeaf(false);
    await leaf.openFile(file);
    setTimeout(() => {
      const view = this.app.workspace.getActiveViewOfType(import_obsidian5.ItemView);
      if (view) {
        const editor = view.editor;
        if (editor) {
          const line = unit.source.position.line;
          const lineCount = editor.lineCount();
          const validLine = Math.min(line, lineCount - 1);
          editor.setCursor({ line: validLine, ch: 0 });
          editor.scrollIntoView(
            { from: { line: validLine, ch: 0 }, to: { line: validLine, ch: 0 } },
            true
          );
          setTimeout(() => {
            var _a;
            try {
              const lineLength = ((_a = editor.getLine(validLine)) == null ? void 0 : _a.length) || 0;
              editor.setSelection(
                { line: validLine, ch: 0 },
                { line: validLine, ch: lineLength }
              );
            } catch (e) {
              console.error("Selection error:", e);
            }
          }, 100);
        }
      }
    }, 200);
  }
  /**
   * 快速生成闪卡
   */
  async quickGenerateFlashcard(unit) {
    try {
      const { QuickFlashcardCreator: QuickFlashcardCreator2 } = await Promise.resolve().then(() => (init_QuickFlashcardCreator(), QuickFlashcardCreator_exports));
      const creator = new QuickFlashcardCreator2(this.plugin);
      await creator.createSmartCard(unit);
      new import_obsidian5.Notice("\u26A1 \u95EA\u5361\u5DF2\u751F\u6210");
      this.refresh();
    } catch (error) {
      new import_obsidian5.Notice("\u274C \u751F\u6210\u95EA\u5361\u5931\u8D25");
      console.error(error);
    }
  }
  /**
  * 显示批量操作菜单
  */
  showBatchMenu(event, unit) {
    const menu = new import_obsidian5.Menu();
    menu.addItem(
      (item) => item.setTitle(this.isAllSelected() ? "\u2611 \u9009\u62E9" : "\u2610 \u5168\u9009").setIcon("check-square").onClick(() => {
        this.toggleSelectAll();
      })
    );
    menu.addSeparator();
    if (this.viewType === "notes") {
      menu.addItem(
        (item) => item.setTitle(`\u26A1 \u6279\u91CF\u5236\u5361 (${this.selectedUnitIds.size})`).setIcon("zap").onClick(() => {
          this.batchCreateFlashcards();
        })
      );
    }
    menu.addItem(
      (item) => item.setTitle(`\u{1F5D1}\uFE0F \u5220\u9664\u9009\u4E2D (${this.viewType === "cards" ? this.selectedCardIds.size : this.selectedUnitIds.size})`).setIcon("trash").onClick(() => {
        if (this.viewType === "cards") {
          this.batchDeleteFlashcards();
        } else {
          this.batchDeleteNotes();
        }
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u2713 \u9000\u51FA\u6279\u91CF\u6A21\u5F0F").setIcon("x").onClick(() => {
        this.batchMode = false;
        this.selectedUnitIds.clear();
        this.selectedCardIds.clear();
        this.render();
      })
    );
    menu.showAtMouseEvent(event);
  }
  /**
   * 显示上下文菜单
   */
  showContextMenu(event, unit) {
    const menu = new import_obsidian5.Menu();
    menu.addItem(
      (item) => item.setTitle("\u{1F4D6} \u8DF3\u8F6C\u5230\u539F\u6587").setIcon("arrow-up-right").onClick(() => this.jumpToSource(unit))
    );
    menu.addItem(
      (item) => item.setTitle("\u{1F4AC} \u7F16\u8F91\u6279\u6CE8").setIcon("message-square").onClick(() => this.openAnnotationEditor(unit))
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u26A1 \u751F\u6210\u95EA\u5361").setIcon("zap").onClick(() => this.quickGenerateFlashcard(unit))
    );
    menu.addItem(
      (item) => item.setTitle("\u2795 \u521B\u5EFA QA \u95EA\u5361").setIcon("plus").onClick(async () => {
        await this.createFlashcard(unit, "qa");
      })
    );
    menu.addItem(
      (item) => item.setTitle("\u2795 \u521B\u5EFA\u586B\u7A7A\u95EA\u5361").setIcon("plus").onClick(async () => {
        await this.createFlashcard(unit, "cloze");
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u67E5\u770B\u7EDF\u8BA1").setIcon("bar-chart").onClick(() => {
        this.plugin.activateStats();
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u{1F5D1}\uFE0F \u5220\u9664\u7B14\u8BB0").setIcon("trash").onClick(async () => {
        if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u6761\u7B14\u8BB0\u5417\uFF1F")) {
          await this.plugin.dataManager.deleteContentUnit(unit.id);
          new import_obsidian5.Notice("\u{1F5D1}\uFE0F \u7B14\u8BB0\u5DF2\u5220\u9664");
          this.refresh();
        }
      })
    );
    menu.showAtMouseEvent(event);
  }
  /**
   * 显示闪卡上下文菜单
   */
  showFlashcardContextMenu(event, card) {
    const menu = new import_obsidian5.Menu();
    menu.addItem(
      (item) => item.setTitle("\u{1F4D6} \u8DF3\u8F6C\u5230\u539F\u6587").setIcon("arrow-up-right").onClick(async () => {
        const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
        if (unit) {
          await this.jumpToSource(unit);
        } else {
          const file = this.app.vault.getAbstractFileByPath(card.sourceFile);
          if (file instanceof import_obsidian5.TFile) {
            await this.app.workspace.getLeaf(false).openFile(file);
            new import_obsidian5.Notice("\u2705 \u5DF2\u6253\u5F00\u6E90\u6587\u4EF6");
          } else {
            new import_obsidian5.Notice("\u26A0\uFE0F \u627E\u4E0D\u5230\u539F\u59CB\u7B14\u8BB0");
          }
        }
      })
    );
    menu.addItem(
      (item) => item.setTitle("\u270F\uFE0F \u7F16\u8F91\u5361\u7247").setIcon("edit").onClick(() => {
        this.editFlashcard(card);
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u{1F4CA} \u67E5\u770B\u7EDF\u8BA1").setIcon("bar-chart").onClick(() => {
        this.plugin.activateStats();
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u{1F5D1}\uFE0F \u5220\u9664\u5361\u7247").setIcon("trash").onClick(async () => {
        if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u5F20\u95EA\u5361\u5417\uFF1F")) {
          await this.deleteFlashcard(card.id);
        }
      })
    );
    menu.showAtMouseEvent(event);
  }
  /**
   * 创建特定类型的闪卡
   */
  async createFlashcard(unit, type) {
    const modal = new FlashcardCreationModal(
      this.app,
      unit,
      type,
      async (question, answer) => {
        try {
          if (type === "qa") {
            await this.plugin.flashcardManager.createQACard(
              unit.id,
              question,
              answer
            );
          } else {
            const deletions = [{
              index: 0,
              answer
            }];
            await this.plugin.flashcardManager.createClozeCard(
              unit.id,
              question,
              deletions
            );
          }
          new import_obsidian5.Notice(`\u2705 ${type === "qa" ? "QA" : "\u586B\u7A7A"}\u95EA\u5361\u5DF2\u521B\u5EFA`);
          this.refresh();
        } catch (error) {
          console.error("Error creating flashcard:", error);
          new import_obsidian5.Notice("\u274C \u521B\u5EFA\u95EA\u5361\u5931\u8D25");
        }
      }
    );
    modal.open();
  }
  /**
   * 在编辑器中打开文件
   */
  async openFileInEditor(filePath) {
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian5.TFile) {
      await this.app.workspace.getLeaf(false).openFile(file);
    } else {
      new import_obsidian5.Notice("\u26A0\uFE0F \u65E0\u6CD5\u6253\u5F00\u6587\u4EF6");
    }
  }
  /**
   * 删除闪卡
   */
  async deleteFlashcard(cardId) {
    try {
      await this.plugin.flashcardManager.deleteCard(cardId);
      new import_obsidian5.Notice("\u{1F5D1}\uFE0F \u95EA\u5361\u5DF2\u5220\u9664");
      this.refresh();
    } catch (error) {
      console.error("Error deleting flashcard:", error);
      new import_obsidian5.Notice("\u274C \u5220\u9664\u95EA\u5361\u5931\u8D25");
    }
  }
  /**
   * 编辑闪卡
   */
  editFlashcard(card) {
    const modal = new FlashcardEditModal(
      this.app,
      card,
      async (question, answer) => {
        try {
          const updatedCard = {
            ...card,
            front: question,
            back: card.type === "cloze" ? [answer] : answer,
            metadata: {
              ...card.metadata,
              updatedAt: Date.now()
            }
          };
          await this.plugin.flashcardManager.updateCard(updatedCard);
          new import_obsidian5.Notice("\u2705 \u95EA\u5361\u5DF2\u66F4\u65B0");
          this.refresh();
        } catch (error) {
          console.error("Error updating flashcard:", error);
          new import_obsidian5.Notice("\u274C \u66F4\u65B0\u95EA\u5361\u5931\u8D25");
        }
      }
    );
    modal.open();
  }
  /**
   * 更新批量操作按钮
   */
  updateBatchButtons() {
    const container = this.containerEl.children[1];
    const batchActions = container.querySelector(".batch-actions");
    if (batchActions) {
      const selectAllBtn = batchActions.querySelector(".select-all-btn");
      const deleteBtn = batchActions.querySelector(".batch-delete-btn");
      const createBtn = batchActions.querySelector(".batch-create-cards-btn");
      if (selectAllBtn) {
        selectAllBtn.textContent = this.isAllSelected() ? "\u2611 \u9009\u62E9" : "\u2610 \u5168\u9009";
      }
      if (deleteBtn) {
        const count = this.viewType === "cards" ? this.selectedCardIds.size : this.selectedUnitIds.size;
        deleteBtn.textContent = `\u{1F5D1}\uFE0F \u5220\u9664\u9009\u4E2D (${count})`;
      }
      if (createBtn) {
        createBtn.textContent = `\u26A1 \u6279\u91CF\u5236\u5361 (${this.selectedUnitIds.size})`;
      }
    }
    const headerSelectBtn = container.querySelector(".select-all-btn-header");
    if (headerSelectBtn) {
      headerSelectBtn.textContent = this.isAllSelected() ? "\u2611 \u9009\u62E9" : "\u2610 \u5168\u9009";
    }
    const sidebarSelectBtn = container.querySelector(".select-all-btn-sidebar");
    if (sidebarSelectBtn) {
      sidebarSelectBtn.textContent = this.isAllSelected() ? "\u2611 \u9009\u62E9" : "\u2610 \u5168\u9009";
    }
  }
  /**
   * 批量删除闪卡
   */
  async batchDeleteFlashcards() {
    if (this.selectedCardIds.size === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u95EA\u5361");
      return;
    }
    if (!confirm(`\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u7684 ${this.selectedCardIds.size} \u5F20\u95EA\u5361\u5417\uFF1F`)) {
      return;
    }
    let success = 0;
    let failed = 0;
    for (const cardId of this.selectedCardIds) {
      try {
        await this.plugin.flashcardManager.deleteCard(cardId);
        success++;
      } catch (error) {
        console.error("Error deleting flashcard:", error);
        failed++;
      }
    }
    this.selectedCardIds.clear();
    new import_obsidian5.Notice(`\u2705 \u5DF2\u5220\u9664 ${success} \u5F20\u95EA\u5361${failed > 0 ? `\uFF0C${failed} \u5F20\u5931\u8D25` : ""}`);
    this.refresh();
  }
  /**
   * 批量删除笔记
   */
  async batchDeleteNotes() {
    if (this.selectedUnitIds.size === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u7B14\u8BB0");
      return;
    }
    if (!confirm(`\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u7684 ${this.selectedUnitIds.size} \u6761\u7B14\u8BB0\u5417\uFF1F`)) {
      return;
    }
    let success = 0;
    let failed = 0;
    for (const unitId of this.selectedUnitIds) {
      try {
        await this.plugin.dataManager.deleteContentUnit(unitId);
        success++;
      } catch (error) {
        console.error("Error deleting note:", error);
        failed++;
      }
    }
    this.selectedUnitIds.clear();
    new import_obsidian5.Notice(`\u2705 \u5DF2\u5220\u9664 ${success} \u6761\u7B14\u8BB0${failed > 0 ? `\uFF0C${failed} \u6761\u5931\u8D25` : ""}`);
    this.refresh();
  }
  /**
   * 检查是否全选
   */
  isAllSelected() {
    if (this.viewType === "cards") {
      const flashcards = this.plugin.flashcardManager.getAllFlashcards();
      if (this.displayMode === "main" && this.selectedFile) {
        const filteredCards = flashcards.filter((card) => {
          var _a;
          if (this.groupMode === "file") {
            return card.sourceFile === this.selectedFile;
          } else if (this.groupMode === "tag") {
            const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
            return (unit == null ? void 0 : unit.metadata.tags.includes(this.selectedFile)) || ((_a = card.tags) == null ? void 0 : _a.includes(this.selectedFile)) || card.deck === this.selectedFile;
          } else if (this.groupMode === "date") {
            return this.formatDate(new Date(card.metadata.createdAt)) === this.selectedFile;
          }
          return false;
        });
        return filteredCards.length > 0 && this.selectedCardIds.size === filteredCards.length;
      }
      return flashcards.length > 0 && this.selectedCardIds.size === flashcards.length;
    } else {
      let visibleUnits;
      if (this.displayMode === "sidebar") {
        let units = this.getFilteredUnits();
        if (this.selectedFile) {
          if (this.groupMode === "file") {
            visibleUnits = units.filter((unit) => unit.source.file === this.selectedFile);
          } else if (this.groupMode === "tag") {
            visibleUnits = units.filter((unit) => unit.metadata.tags.includes(this.selectedFile));
          } else if (this.groupMode === "date") {
            visibleUnits = units.filter(
              (unit) => this.formatDate(new Date(unit.metadata.createdAt)) === this.selectedFile
            );
          } else {
            visibleUnits = units;
          }
        } else {
          visibleUnits = units;
        }
      } else {
        if (!this.selectedFile) {
          return false;
        }
        const units = this.getFilteredUnits();
        if (this.groupMode === "file") {
          visibleUnits = units.filter((unit) => unit.source.file === this.selectedFile);
        } else if (this.groupMode === "tag") {
          visibleUnits = units.filter(
            (unit) => unit.metadata.tags.includes(this.selectedFile)
          );
        } else if (this.groupMode === "date") {
          visibleUnits = units.filter(
            (unit) => this.formatDate(new Date(unit.metadata.createdAt)) === this.selectedFile
          );
        } else {
          visibleUnits = units;
        }
      }
      return visibleUnits.length > 0 && this.selectedUnitIds.size === visibleUnits.length;
    }
  }
  /**
   * 切换全选/取消
   */
  toggleSelectAll() {
    if (this.viewType === "cards") {
      const flashcards = this.plugin.flashcardManager.getAllFlashcards();
      const filteredCards = this.selectedFile ? flashcards.filter((card) => {
        var _a;
        if (this.groupMode === "file") {
          return card.sourceFile === this.selectedFile;
        } else if (this.groupMode === "tag") {
          const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
          return (unit == null ? void 0 : unit.metadata.tags.includes(this.selectedFile)) || ((_a = card.tags) == null ? void 0 : _a.includes(this.selectedFile)) || card.deck === this.selectedFile;
        } else if (this.groupMode === "date") {
          return this.formatDate(new Date(card.metadata.createdAt)) === this.selectedFile;
        }
        return false;
      }) : flashcards;
      if (this.selectedCardIds.size === filteredCards.length && filteredCards.length > 0) {
        this.selectedCardIds.clear();
      } else {
        filteredCards.forEach((card) => {
          this.selectedCardIds.add(card.id);
        });
      }
    } else {
      let visibleUnits;
      if (this.displayMode === "sidebar") {
        let units = this.getFilteredUnits();
        if (this.selectedFile) {
          if (this.groupMode === "file") {
            visibleUnits = units.filter((unit) => unit.source.file === this.selectedFile);
          } else if (this.groupMode === "tag") {
            visibleUnits = units.filter(
              (unit) => unit.metadata.tags.includes(this.selectedFile)
            );
          } else if (this.groupMode === "date") {
            visibleUnits = units.filter(
              (unit) => this.formatDate(new Date(unit.metadata.createdAt)) === this.selectedFile
            );
          } else {
            visibleUnits = units;
          }
        } else {
          visibleUnits = units;
        }
      } else {
        if (!this.selectedFile) {
          new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u5206\u7EC4");
          return;
        }
        const units = this.getFilteredUnits();
        if (this.groupMode === "file") {
          visibleUnits = units.filter((unit) => unit.source.file === this.selectedFile);
        } else if (this.groupMode === "tag") {
          visibleUnits = units.filter(
            (unit) => unit.metadata.tags.includes(this.selectedFile)
          );
        } else if (this.groupMode === "date") {
          visibleUnits = units.filter(
            (unit) => this.formatDate(new Date(unit.metadata.createdAt)) === this.selectedFile
          );
        } else {
          visibleUnits = units;
        }
      }
      if (this.selectedUnitIds.size === visibleUnits.length && visibleUnits.length > 0) {
        this.selectedUnitIds.clear();
      } else {
        visibleUnits.forEach((unit) => {
          this.selectedUnitIds.add(unit.id);
        });
      }
    }
    if (this.selectedUnitIds.size > 0 || this.selectedCardIds.size > 0) {
      this.batchMode = true;
    }
    this.render();
  }
  /**
  * 自动全选当前可见项目
  */
  autoSelectAll() {
    this.selectedUnitIds.clear();
    this.selectedCardIds.clear();
    if (this.viewType === "cards") {
      const flashcards = this.plugin.flashcardManager.getAllFlashcards();
      const filteredCards = this.selectedFile ? flashcards.filter((card) => {
        var _a;
        if (this.groupMode === "file") {
          return card.sourceFile === this.selectedFile;
        } else if (this.groupMode === "tag") {
          const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
          return (unit == null ? void 0 : unit.metadata.tags.includes(this.selectedFile)) || ((_a = card.tags) == null ? void 0 : _a.includes(this.selectedFile)) || card.deck === this.selectedFile;
        } else if (this.groupMode === "date") {
          return this.formatDate(new Date(card.metadata.createdAt)) === this.selectedFile;
        }
        return false;
      }) : flashcards;
      filteredCards.forEach((card) => {
        this.selectedCardIds.add(card.id);
      });
    } else {
      let visibleUnits;
      if (this.displayMode === "sidebar") {
        let units = this.getFilteredUnits();
        if (this.selectedFile) {
          visibleUnits = units.filter((unit) => unit.source.file === this.selectedFile);
        } else {
          visibleUnits = units;
        }
      } else {
        if (this.selectedFile) {
          const units = this.getFilteredUnits();
          if (this.groupMode === "file") {
            visibleUnits = units.filter((unit) => unit.source.file === this.selectedFile);
          } else if (this.groupMode === "tag") {
            visibleUnits = units.filter(
              (unit) => unit.metadata.tags.includes(this.selectedFile)
            );
          } else if (this.groupMode === "date") {
            visibleUnits = units.filter(
              (unit) => this.formatDate(new Date(unit.metadata.createdAt)) === this.selectedFile
            );
          } else {
            visibleUnits = units;
          }
        } else {
          visibleUnits = this.getFilteredUnits();
        }
      }
      visibleUnits.forEach((unit) => {
        this.selectedUnitIds.add(unit.id);
      });
    }
    if (this.selectedUnitIds.size > 0 || this.selectedCardIds.size > 0) {
      this.batchMode = true;
    }
  }
  /**
   * 清除所有选择
   */
  clearSelection() {
    this.selectedUnitIds.clear();
    this.selectedCardIds.clear();
    this.batchMode = false;
    this.render();
  }
  /**
   * 更新所有checkbox状态
   */
  updateCheckboxes() {
    const container = this.containerEl.children[1];
    const checkboxes = container.querySelectorAll(".batch-checkbox");
    checkboxes.forEach((checkbox) => {
      if (this.viewType === "cards") {
        const cardId = checkbox.getAttribute("data-card-id");
        if (cardId) {
          checkbox.checked = this.selectedCardIds.has(cardId);
        }
      } else {
        const unitId = checkbox.getAttribute("data-unit-id");
        if (unitId) {
          checkbox.checked = this.selectedUnitIds.has(unitId);
        }
      }
    });
  }
  /**
   * 批量创建闪卡
   */
  async batchCreateFlashcards() {
    if (this.selectedUnitIds.size === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u521B\u5EFA\u95EA\u5361\u7684\u7B14\u8BB0");
      return;
    }
    const units = Array.from(this.selectedUnitIds).map((id) => this.plugin.dataManager.getContentUnit(id)).filter((u) => u !== void 0 && u.flashcardIds.length === 0);
    if (units.length === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u9009\u4E2D\u7684\u7B14\u8BB0\u90FD\u5DF2\u521B\u5EFA\u8FC7\u95EA\u5361");
      return;
    }
    const { BatchCreateModal: BatchCreateModal2 } = await Promise.resolve().then(() => (init_OverviewView(), OverviewView_exports));
    const quickCreator = new QuickFlashcardCreator(this.plugin);
    const modal = new BatchCreateModal2(
      this.app,
      this.plugin,
      quickCreator,
      units,
      () => {
        this.selectedUnitIds.clear();
        this.refresh();
      }
    );
    modal.open();
  }
  // ==================== 工具方法 ====================
  /**
   * 获取过滤后的内容单元
   */
  getFilteredUnits() {
    let units = this.plugin.dataManager.getAllContentUnits();
    if (this.searchQuery) {
      const query = this.searchQuery.toLowerCase();
      units = units.filter(
        (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
      );
    }
    if (this.filterMode === "annotated") {
      units = units.filter((u) => u.annotationId);
    } else if (this.filterMode === "flashcards") {
      units = units.filter((u) => u.flashcardIds.length > 0);
    }
    return units;
  }
  /**
   * 分组内容单元
   */
  groupUnits(units) {
    const grouped = /* @__PURE__ */ new Map();
    units.forEach((unit) => {
      let key;
      switch (this.groupMode) {
        case "file":
          key = unit.source.file;
          break;
        case "tag":
          unit.metadata.tags.forEach((tag) => {
            if (!grouped.has(tag))
              grouped.set(tag, []);
            grouped.get(tag).push(unit);
          });
          return;
        case "date":
          key = this.formatDate(new Date(unit.metadata.createdAt));
          break;
        default:
          key = "\u672A\u5206\u7EC4";
      }
      if (!grouped.has(key))
        grouped.set(key, []);
      grouped.get(key).push(unit);
    });
    return Array.from(grouped.entries()).map(([groupKey, units2]) => ({ groupKey, units: units2 })).sort((a, b) => {
      if (this.groupMode === "date") {
        return b.groupKey.localeCompare(a.groupKey);
      }
      return b.units.length - a.units.length;
    });
  }
  /**
   * 分组闪卡（类似 groupUnits）
   */
  groupFlashcards(flashcards) {
    const grouped = /* @__PURE__ */ new Map();
    flashcards.forEach((card) => {
      let keys = [];
      const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
      switch (this.groupMode) {
        case "file":
          keys = [card.sourceFile];
          break;
        case "tag":
          if (unit && unit.metadata.tags.length > 0) {
            keys = unit.metadata.tags;
          } else if (card.tags && card.tags.length > 0) {
            keys = card.tags;
          } else if (card.deck) {
            keys = [card.deck];
          } else {
            keys = ["\u672A\u5206\u7C7B"];
          }
          break;
        case "date":
          keys = [this.formatDate(new Date(card.metadata.createdAt))];
          break;
        default:
          keys = ["\u672A\u5206\u7EC4"];
      }
      keys.forEach((key) => {
        if (!grouped.has(key)) {
          grouped.set(key, []);
        }
        grouped.get(key).push(card);
      });
    });
    const result = Array.from(grouped.entries()).map(([groupKey, cards]) => ({ groupKey, cards })).sort((a, b) => {
      if (this.groupMode === "date") {
        return b.groupKey.localeCompare(a.groupKey);
      }
      return b.cards.length - a.cards.length;
    });
    return result;
  }
  /**
   * 获取统计信息
   */
  getFilteredStats() {
    const units = this.getFilteredUnits();
    return {
      count: units.length,
      withAnnotations: units.filter((u) => u.annotationId).length,
      withFlashcards: units.filter((u) => u.flashcardIds.length > 0).length
    };
  }
  /**
   * 格式化日期
   */
  formatDate(date) {
    return date.toLocaleDateString("zh-CN", {
      year: "numeric",
      month: "2-digit",
      day: "2-digit"
    });
  }
  /**
   * 获取分组图标
   */
  getGroupIcon(mode) {
    switch (mode) {
      case "file":
        return "\u{1F4C4}";
      case "tag":
        return "\u{1F3F7}\uFE0F";
      case "date":
        return "\u{1F4C5}";
      default:
        return "\u{1F4C1}";
    }
  }
  /**
   * 添加样式
   */
  addStyles() {
    if (document.getElementById("learning-overview-styles")) {
      return;
    }
    const styleEl = document.createElement("style");
    styleEl.id = "learning-overview-styles";
    if (document.getElementById("learning-overview-styles")) {
      return;
    }
    styleEl.textContent = `
      /* ==================== \u5168\u5C40\u5BB9\u5668 ==================== */
      .learning-overview-container {
        height: 100%;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        background: var(--background-primary);
      }

      /* ==================== \u4FA7\u8FB9\u680F\u6A21\u5F0F\u6837\u5F0F ==================== */
      .learning-overview-container[data-mode="sidebar"] {
        padding: 0;
      }

      .sidebar-toolbar {
        padding: 12px;
        border-bottom: 1px solid var(--background-modifier-border);
        background: var(--background-primary);
        flex-shrink: 0;
          position: relative; /* \u{1F527} \u6DFB\u52A0 */
  z-index: 10;
      }

      .search-container {
        margin-bottom: 10px;
      }

      .search-input {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        font-size: 13px;
        background: var(--background-primary);
        color: var(--text-normal);
      }

      .search-input:focus {
        outline: none;
        border-color: var(--interactive-accent);
      }

      .filter-chips {
        display: flex;
        gap: 6px;
        margin-bottom: 10px;
      }

      .filter-chip {
        flex: 1;
        text-align: center;
        padding: 6px 8px;
        font-size: 11px;
        border-radius: 12px;
        background: var(--background-secondary);
        cursor: pointer;
        transition: all 0.2s;
        border: 1px solid transparent;
      }

      .filter-chip:hover {
        background: var(--background-modifier-hover);
      }

      .filter-chip.active {
        background: var(--interactive-accent);
        color: var(--text-on-accent);
        font-weight: 600;
        border-color: var(--interactive-accent);
      }

      .group-switcher {
        display: flex;
        gap: 6px;
        margin-bottom: 10px;
      }

      .group-btn {
        flex: 1;
        text-align: center;
        padding: 6px;
        font-size: 16px;
        border-radius: 6px;
        background: var(--background-secondary);
        cursor: pointer;
        transition: all 0.2s;
        border: 1px solid transparent;
      }

      .group-btn:hover {
        background: var(--background-modifier-hover);
      }

      .group-btn.active {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        transform: scale(1.05);
      }
/* \u5728 .stats-badge \u6837\u5F0F\u4E4B\u524D\u6DFB\u52A0 */
.stats-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 3px;
}
/* \u5934\u90E8\u64CD\u4F5C\u6309\u94AE\u5BB9\u5668 */
.header-actions {
  display: flex;
  gap: 8px;
  align-items: center;
}

/* \u6279\u91CF\u64CD\u4F5C\u6309\u94AE\u6837\u5F0F - \u4FA7\u8FB9\u680F */
.batch-create-cards-btn-sidebar,
.batch-delete-btn-sidebar {
  padding: 6px 6px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 11px;
  font-weight: 500;
  white-space: nowrap;
}

.batch-create-cards-btn-sidebar:hover {
  background: var(--interactive-accent);
  color: white;
  border-color: var(--interactive-accent);
}

.batch-delete-btn-sidebar:hover {
  background: var(--color-red);
  color: white;
  border-color: var(--color-red);
}

/* \u6279\u91CF\u64CD\u4F5C\u6309\u94AE\u6837\u5F0F - \u4E3B\u754C\u9762 */
.batch-create-cards-btn-header,
.batch-delete-btn-header {
  padding: 8px 16px;
  font-size: 13px;
  border-radius: 6px;
  border: 1px solid var(--background-modifier-border);
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-weight: 500;
  white-space: nowrap;
}

.batch-create-cards-btn-header:hover {
  background: var(--interactive-accent);
  color: white;
  border-color: var(--interactive-accent);
}

.batch-delete-btn-header:hover {
  background: var(--color-red);
  color: white;
  border-color: var(--color-red);
}
.select-all-btn-sidebar {
  padding: 6px 12px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 11px;
  font-weight: 500;
  flex-shrink: 0; /* \u9632\u6B62\u6309\u94AE\u88AB\u538B\u7F29 */
}

.select-all-btn-sidebar:hover {
  background: var(--interactive-accent);
  border-color: var(--interactive-accent);
  color: white;
}

.stats-badge {
  text-align: center;
  font-size: 11px;
  color: var(--text-muted);
  padding: 4px;
  flex: 1; /* \u5360\u636E\u5269\u4F59\u7A7A\u95F4 */
}
      .stats-badge {
        text-align: center;
        font-size: 11px;
        color: var(--text-muted);
        padding: 4px;
      }
.select-all-btn-header {
  padding: 8px 16px;
  font-size: 13px;
  border-radius: 6px;
  background: var(--background-secondary);
  color: var(--text-normal);
  border: 1px solid var(--background-modifier-border);
  cursor: pointer;
  transition: all 0.2s;
  font-weight: 500;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.select-all-btn-header:hover {
  background: var(--interactive-accent);
  color: var(--text-on-accent);
  border-color: var(--interactive-accent);
  transform: translateY(-1px);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

/* \u5B8C\u6210\u72B6\u6001\u7684\u9AD8\u4EAE\u6837\u5F0F */
.select-all-btn-header.completed {
  background: var(--interactive-accent);
  border-color: var(--interactive-accent);
  color: var(--text-on-accent);
}

.select-all-btn-header.completed:hover {
  opacity: 0.9;
}

.select-all-btn-sidebar {
  padding: 6px 12px;

  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 11px;
  font-weight: 500;
  margin-right: auto; /* \u9760\u5DE6\u5BF9\u9F50 */
}

.select-all-btn-sidebar:hover {
  background: var(--interactive-accent);
  border-color: var(--interactive-accent);
  color: white;
}
  /* \u53D6\u6D88\u9009\u62E9\u6309\u94AE - \u4FA7\u8FB9\u680F */
.cancel-selection-btn-sidebar {
  padding: 6px 12px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 11px;
  font-weight: 500;
  white-space: nowrap;
  color: var(--text-muted);
}

.cancel-selection-btn-sidebar:hover {
  background: var(--background-modifier-hover);
  color: var(--text-normal);
  border-color: var(--text-muted);
}

/* \u53D6\u6D88\u9009\u62E9\u6309\u94AE - \u4E3B\u754C\u9762 */
.cancel-selection-btn-header {
  padding: 8px 16px;
  font-size: 13px;
  border-radius: 6px;
  border: 1px solid var(--background-modifier-border);
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-weight: 500;
  white-space: nowrap;
  color: var(--text-muted);
}

.cancel-selection-btn-header:hover {
  background: var(--background-modifier-hover);
  color: var(--text-normal);
  border-color: var(--text-muted);
}

/* \u5B8C\u6210\u72B6\u6001\u7684\u5168\u9009\u6309\u94AE\u9AD8\u4EAE */
.select-all-btn-sidebar.completed,
.select-all-btn-header.completed {
  background: var(--interactive-accent);
  color: var(--text-on-accent);
  border-color: var(--interactive-accent);
}
      .batch-actions {
        display: flex;
        gap: 6px;
        margin-top: 10px;
        flex-wrap: wrap;
      }

      .batch-mode-btn,
      .select-all-btn,
      .batch-delete-btn,
      .batch-create-cards-btn {
        padding: 6px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-secondary);
        cursor: pointer;
        transition: all 0.2s;
        font-size: 11px;
        font-weight: 500;
      }

      .select-all-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .batch-mode-btn:hover {
        background: var(--background-modifier-hover);
      }

      .batch-delete-btn:hover {
        background: var(--color-red);
        border-color: var(--color-red);
        color: white;
      }

      .batch-create-cards-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .batch-checkbox {
        margin-right: 8px;
        cursor: pointer;
      }

      .sidebar-content-list {
        flex: 1;
        overflow-y: auto;
        padding: 8px;
          position: relative; /* \u{1F527} \u6DFB\u52A0 */
  z-index: 1; /* \u{1F527} \u6DFB\u52A0 */
      }

      .content-group {
        margin-bottom: 16px;
      }

      .group-header {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 6px 8px;
        background: var(--background-secondary);
        border-radius: 6px;
        margin-bottom: 6px;
        font-size: 12px;
        font-weight: 600;
        position: sticky;
        top: 0;
        z-index: 10;
      }

      .group-icon {
        font-size: 14px;
      }

      .group-title {
        flex: 1;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .group-count {
        padding: 2px 6px;
        background: var(--background-modifier-border);
        border-radius: 10px;
        font-size: 10px;
      }

      .compact-card {
        display: flex;
        gap: 8px;
        padding: 10px;
        margin: 4px 0;
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        transition: all 0.2s;
      }

      .compact-card:hover {
        border-color: var(--interactive-accent);
        background: var(--background-primary-alt);
        transform: translateX(2px);
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      }

      .card-indicator {
        width: 4px;
        border-radius: 2px;
        background: var(--background-modifier-border);
        flex-shrink: 0;
      }

      .card-indicator.has-annotation {
        background: linear-gradient(to bottom, #3b82f6 0%, #3b82f6 50%, transparent 50%);
      }

      .card-indicator.has-flashcard {
        background: linear-gradient(to bottom, transparent 0%, transparent 50%, #10b981 50%);
      }

      .card-indicator.has-annotation.has-flashcard {
        background: linear-gradient(to bottom, #3b82f6 0%, #3b82f6 50%, #10b981 50%);
      }

      .card-content {
        flex: 1;
        min-width: 0;
      }

      .card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 6px;
      }

      .annotation-btn {
        cursor: pointer;
        font-size: 14px;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.2s;
      }

      .annotation-btn:hover {
        background: var(--background-modifier-hover);
        transform: scale(1.1);
      }

      .card-tools {
        display: flex;
        gap: 4px;
      }

      .tool-btn {
        cursor: pointer;
        font-size: 14px;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.2s;
      }

      .tool-btn:hover {
        background: var(--background-modifier-hover);
      }

      .flashcard-btn:hover {
        background: rgba(251, 191, 36, 0.2);
      }

      .more-btn:hover {
        background: var(--background-modifier-hover);
      }

      .note-text {
        font-size: 13px;
        line-height: 1.5;
        color: var(--text-normal);
        margin-bottom: 6px;
        cursor: pointer;
      }

      .note-text:hover {
        color: var(--interactive-accent);
      }

      .annotation-preview {
        font-size: 11px;
        line-height: 1.4;
        color: var(--text-muted);
        padding: 6px 8px;
        background: var(--background-secondary);
        border-radius: 4px;
        margin-top: 6px;
        border-left: 3px solid var(--interactive-accent);
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .annotation-preview:hover {
        background: var(--background-modifier-hover);
      }

      .card-meta {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        gap: 6px;
        margin-top: 8px;
      }
      
      /* ==================== \u5185\u8054\u6279\u6CE8\u7F16\u8F91\u5668 ==================== */
      .inline-annotation-editor {
        margin-top: 8px;
        padding: 0;
        background: transparent;
        animation: slideDown 0.15s ease-out;
      }
      
      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-5px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      .inline-annotation-textarea {
        width: 100%;
        min-height: 80px;
        padding: 12px 14px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-primary-alt);
        color: var(--text-normal);
        font-family: var(--font-text);
        font-size: 13px;
        line-height: 1.5;
        resize: vertical;
        transition: all 0.2s;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }
      
      .inline-annotation-textarea:focus {
        outline: none;
        border-color: var(--interactive-accent);
        background: var(--background-primary);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      }
      
      .inline-annotation-textarea::placeholder {
        color: var(--text-faint);
        font-style: italic;
      }
      
      .inline-annotation-hint {
        margin-top: 6px;
        font-size: 11px;
        color: var(--text-faint);
        font-style: italic;
        text-align: left;
      }
      
      /* \u7F51\u683C\u5361\u7247\u7684\u5185\u8054\u7F16\u8F91\u5668\u6837\u5F0F */
      .grid-card .inline-annotation-editor {
        margin-top: 8px;
      }
      
      .grid-card .inline-annotation-textarea {
        min-height: 100px;
        font-size: 14px;
        padding: 8px 14px;
      }
      
      .grid-card .inline-annotation-hint {
        font-size: 12px;
        margin-top: 8px;
      }

      .tag {
        padding: 2px 6px;
        background: var(--tag-background);
        color: var(--tag-color);
        border-radius: 4px;
        font-size: 10px;
        font-weight: 500;
      }

      .tag-more {
        padding: 2px 6px;
        background: var(--background-modifier-border);
        color: var(--text-muted);
        border-radius: 4px;
        font-size: 10px;
      }

      .badge {
        padding: 2px 6px;
        background: var(--background-modifier-border);
        border-radius: 4px;
        font-size: 10px;
      }

      /* ==================== \u4E3B\u754C\u9762\u6A21\u5F0F\u6837\u5F0F ==================== */
      .main-layout {
        display: grid;
        grid-template-columns: 250px 1fr;
        gap: 1px;
        height: 100%;
        background: var(--background-modifier-border);
      }

      .left-panel {
        background: var(--background-primary);
        overflow-y: auto;
        display: flex;
        flex-direction: column;
      }

      .right-panel {
        background: var(--background-primary);
        overflow-y: auto;
        padding: 8px;
      }

      .fixed-entries {
        padding: 12px;
        border-bottom: 1px solid var(--background-modifier-border);
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .entry-btn {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 12px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 13px;
        font-weight: 500;
        background: var(--background-secondary);
      }

      .entry-btn:hover {
        background: var(--background-modifier-hover);
        transform: translateX(2px);
      }

      .entry-btn.active {
        background: var(--interactive-accent);
        color: var(--text-on-accent);
      }

      .main-toolbar {
        padding: 12px;
        border-bottom: 1px solid var(--background-modifier-border);
      }

      .batch-actions-main {
        display: flex;
        gap: 8px;
        margin-top: 10px;
        flex-wrap: wrap;
      }

      .batch-actions-main .batch-mode-btn,
      .batch-actions-main .select-all-btn,
      .batch-actions-main .batch-delete-btn,
      .batch-actions-main .batch-create-cards-btn {
        padding: 8px 16px;
        font-size: 12px;
      }

      .batch-actions-main .select-all-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .search-input-main {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        font-size: 13px;
        background: var(--background-primary);
        color: var(--text-normal);
        margin-bottom: 10px;
      }

      .search-input-main:focus {
        outline: none;
        border-color: var(--interactive-accent);
      }

      .group-switcher-main {
        display: flex;
        gap: 6px;
      }

      .group-btn-main {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 4px;
        padding: 8px 10px;
        font-size: 12px;
        border-radius: 6px;
        background: var(--background-secondary);
        cursor: pointer;
        transition: all 0.2s;
        font-weight: 500;
      }

      .group-btn-main:hover {
        background: var(--background-modifier-hover);
        transform: translateY(-1px);
      }

      .group-btn-main.active {
        background: var(--interactive-accent);
        color: var(--text-on-accent);
      }

      .panel-title {
        font-size: 13px;
        font-weight: 600;
        padding: 12px;
        margin:0;
        color: var(--text-muted);
      }

      .file-list {
        padding: 0 8px 8px 8px;
        flex: 1;
        overflow-y: auto;
      }

      .file-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 10px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
        margin-bottom: 4px;
      }

      .file-item:hover {
        background: var(--background-modifier-hover);
      }

      .file-item.selected {
        background: var(--interactive-accent);
        color: var(--text-on-accent);
      }

      .file-icon {
        font-size: 14px;
      }

      .file-name {
        flex: 1;
        font-size: 13px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .file-count {
        font-size: 11px;
        padding: 2px 6px;
        background: rgba(255,255,255,0.1);
        border-radius: 10px;
      }

      .file-item.selected .file-count {
        background: rgba(255,255,255,0.2);
      }

      .empty-right-panel {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100%;
        color: var(--text-muted);
      }

      .empty-icon {
        font-size: 48px;
        margin-bottom: 16px;
      }

      .empty-text {
        font-size: 14px;
      }

      .grid-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 12px;
        border-bottom: 2px solid var(--background-modifier-border);
      }

      .grid-header h2 {
        font-size: 18px;
        font-weight: 600;
        margin: 0;
      }

      .open-file-btn {
        padding: 8px 16px;
        font-size: 13px;
        border-radius: 6px;
        background: var(--interactive-accent);
        color: var(--text-on-accent);
        border: none;
        cursor: pointer;
        transition: all 0.2s;
        font-weight: 500;
      }

      .open-file-btn:hover {
        opacity: 0.9;
        transform: translateY(-1px);
      }

      .content-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
        gap: 8px;
      }

      .grid-card {
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 8px;
        padding: 8px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      }

      .grid-card:hover {
        border-color: var(--interactive-accent);
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        transform: translateY(-2px);
      }

      .grid-card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 12px;
        padding-bottom: 8px;
        border-bottom: 1px solid var(--background-modifier-border);
      }

      .doc-name {
        font-size: 11px;
        color: var(--text-muted);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .grid-card-tools {
        display: flex;
        gap: 4px;
      }

      .tool-btn-grid {
        cursor: pointer;
        font-size: 16px;
        padding: 4px 6px;
        border-radius: 4px;
        transition: all 0.2s;
      }

      .tool-btn-grid:hover {
        background: var(--background-modifier-hover);
        transform: scale(1.1);
      }

      .grid-card-content {
        margin-bottom: 12px;
      }

      .grid-note-text {
        font-size: 14px;
        line-height: 1.6;
        color: var(--text-normal);
        cursor: pointer;
        margin-bottom: 10px;
      }

      .grid-note-text:hover {
        color: var(--interactive-accent);
      }

      .grid-annotation {
        font-size: 12px;
        line-height: 1.5;
        color: var(--text-muted);
        padding: 10px;
        background: var(--background-secondary);
        border-radius: 4px;
        border-left: 3px solid var(--interactive-accent);
        margin-top: 10px;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .grid-annotation:hover {
        background: var(--background-modifier-hover);
      }

      .grid-annotation strong {
        color: var(--text-normal);
      }

      .grid-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin-top: 10px;
      }

      .tag-grid {
        padding: 4px 8px;
        background: var(--tag-background);
        color: var(--tag-color);
        border-radius: 4px;
        font-size: 11px;
        font-weight: 500;
      }

      .grid-card-meta {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding-top: 10px;
        border-top: 1px solid var(--background-modifier-border);
        font-size: 11px;
      }

      .line-info {
        color: var(--text-muted);
      }

      .badge-grid {
        padding: 3px 8px;
        background: var(--background-secondary);
        border-radius: 4px;
      }

      .cards-header {
        margin-bottom: 20px;
      }

      .cards-header h2 {
        font-size: 18px;
        font-weight: 600;
      }

      .cards-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 8px;
      }

      .flashcard-item {
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 8px;
        padding: 16px;
        transition: all 0.2s;
      }

      .flashcard-item:hover {
        border-color: var(--interactive-accent);
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      }

      .flashcard-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }

      .flashcard-delete-btn {
        padding: 4px 8px;
        border: none;
        background: transparent;
        cursor: pointer;
        font-size: 14px;
        border-radius: 4px;
        transition: all 0.2s;
        opacity: 0.6;
      }

      .flashcard-delete-btn:hover {
        opacity: 1;
        background: var(--background-modifier-hover);
        color: var(--color-red);
      }

      .flashcard-type {
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
      }

      .flashcard-type.qa {
        background: rgba(147, 51, 234, 0.2);
        color: #9333ea;
      }

      .flashcard-type.cloze {
        background: rgba(16, 185, 129, 0.2);
        color: #10b981;
      }

      .flashcard-date {
        font-size: 11px;
        color: var(--text-muted);
      }

      .flashcard-body {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .flashcard-question,
      .flashcard-answer {
        font-size: 13px;
        line-height: 1.5;
      }

      .flashcard-question strong,
      .flashcard-answer strong {
        color: var(--text-muted);
        font-size: 11px;
        display: block;
        margin-bottom: 4px;
      }

.empty-state {
  text-align: center;
  padding: 40px 20px;
  color: var(--text-muted);
  font-size: 14px;
  pointer-events: none; /* \u{1F527} \u5173\u952E\uFF01\u7A7A\u72B6\u6001\u4E0D\u62E6\u622A\u70B9\u51FB */
  position: relative;
  z-index: 1; /* \u{1F527} \u786E\u4FDD\u5728\u5DE5\u5177\u680F\u4E0B\u65B9 */
}

      .empty-hint {
        text-align: center;
        padding: 20px;
        color: var(--text-muted);
        font-size: 13px;
      }

      /* ==================== \u54CD\u5E94\u5F0F ==================== */
      @media (max-width: 768px) {
        .main-layout {
          grid-template-columns: 1fr;
        }

        .left-panel {
          display: none;
        }

        .content-grid,
        .cards-grid {
          grid-template-columns: 1fr;
        }
          .batch-btn {
          font-size: 14px;
          position: relative;
        }

      .batch-btn:hover {
        background: rgba(59, 130, 246, 0.2);
        transform: scale(1.05);
      }

      /* \u6279\u91CF\u6A21\u5F0F\u6FC0\u6D3B\u72B6\u6001 */
      .compact-card.batch-mode .batch-btn,
      .grid-card.batch-mode .batch-btn {
        background: rgba(59, 130, 246, 0.3);
        color: var(--interactive-accent);
      }

      .batch-actions {
  display: flex;
  gap: 6px;
  margin-top: 10px;
  flex-wrap: wrap;
  padding: 8px;
  background: var(--background-secondary-alt);
  border-radius: 6px;
  animation: slideDown 0.2s ease;
}
/* \u6279\u91CF\u64CD\u4F5C\u6309\u94AE\u7981\u7528\u72B6\u6001\uFF08\u6570\u91CF\u4E3A0\u65F6\u7684\u89C6\u89C9\u53CD\u9988\uFF09 */
.batch-create-cards-btn-sidebar:has-text("(0)"),
.batch-delete-btn-sidebar:has-text("(0)"),
.batch-create-cards-btn-header:has-text("(0)"),
.batch-delete-btn-header:has-text("(0)") {
  opacity: 0.5;
  cursor: not-allowed;
}
@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
    
  }
}
      }
    `;
    document.head.appendChild(styleEl);
  }
  async onClose() {
    if (this.searchDebounceTimer !== null) {
      window.clearTimeout(this.searchDebounceTimer);
    }
  }
};
var AnnotationModal = class extends import_obsidian5.Modal {
  constructor(app, defaultValue, onSubmit) {
    super(app);
    this.result = null;
    this.defaultValue = defaultValue;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h3", { text: "\u270F\uFE0F \u7F16\u8F91\u6279\u6CE8" });
    const textarea = contentEl.createEl("textarea", {
      cls: "annotation-textarea",
      placeholder: "\u8F93\u5165\u4F60\u7684\u6279\u6CE8..."
    });
    textarea.value = this.defaultValue;
    textarea.style.width = "100%";
    textarea.style.minHeight = "120px";
    textarea.style.padding = "10px";
    textarea.style.border = "1px solid var(--background-modifier-border)";
    textarea.style.borderRadius = "6px";
    textarea.style.fontFamily = "var(--font-interface)";
    textarea.style.fontSize = "14px";
    textarea.style.resize = "vertical";
    textarea.style.marginTop = "12px";
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    buttonContainer.style.display = "flex";
    buttonContainer.style.gap = "8px";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.marginTop = "16px";
    const cancelBtn = buttonContainer.createEl("button", { text: "\u53D6\u6D88" });
    cancelBtn.style.padding = "8px 16px";
    cancelBtn.style.borderRadius = "6px";
    cancelBtn.addEventListener("click", () => {
      this.close();
    });
    const saveBtn = buttonContainer.createEl("button", {
      text: "\u4FDD\u5B58",
      cls: "mod-cta"
    });
    saveBtn.style.padding = "8px 16px";
    saveBtn.style.borderRadius = "6px";
    saveBtn.addEventListener("click", () => {
      this.result = textarea.value;
      this.close();
    });
    textarea.focus();
    textarea.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && (e.ctrlKey || e.metaKey)) {
        this.result = textarea.value;
        this.close();
      }
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    if (this.result !== null) {
      this.onSubmit(this.result);
    }
  }
};
var FlashcardCreationModal = class extends import_obsidian5.Modal {
  constructor(app, unit, type, onSubmit) {
    super(app);
    this.unit = unit;
    this.type = type;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h3", {
      text: `\u{1F0CF} \u521B\u5EFA${this.type === "qa" ? "Q&A" : "\u586B\u7A7A"}\u95EA\u5361`
    });
    const sourceDiv = contentEl.createDiv({ cls: "flashcard-source" });
    sourceDiv.style.padding = "10px";
    sourceDiv.style.background = "var(--background-secondary)";
    sourceDiv.style.borderRadius = "6px";
    sourceDiv.style.marginTop = "12px";
    sourceDiv.style.marginBottom = "12px";
    sourceDiv.style.fontSize = "13px";
    sourceDiv.style.color = "var(--text-muted)";
    sourceDiv.innerHTML = `<strong>\u539F\u6587\uFF1A</strong>${this.unit.content}`;
    contentEl.createEl("label", {
      text: this.type === "qa" ? "\u95EE\u9898" : "\u586B\u7A7A\u9898\u5E72",
      cls: "flashcard-label"
    }).style.display = "block";
    const questionInput = contentEl.createEl("textarea", {
      cls: "flashcard-input",
      placeholder: this.type === "qa" ? "\u8F93\u5165\u95EE\u9898..." : "\u7528 {{c1::...}} \u6807\u8BB0\u9700\u8981\u586B\u7A7A\u7684\u5185\u5BB9"
    });
    questionInput.style.width = "100%";
    questionInput.style.minHeight = "80px";
    questionInput.style.padding = "10px";
    questionInput.style.border = "1px solid var(--background-modifier-border)";
    questionInput.style.borderRadius = "6px";
    questionInput.style.marginTop = "8px";
    questionInput.style.marginBottom = "12px";
    questionInput.style.fontSize = "14px";
    questionInput.style.resize = "vertical";
    contentEl.createEl("label", {
      text: "\u7B54\u6848",
      cls: "flashcard-label"
    }).style.display = "block";
    const answerInput = contentEl.createEl("textarea", {
      cls: "flashcard-input",
      placeholder: "\u8F93\u5165\u7B54\u6848..."
    });
    answerInput.value = this.unit.content;
    answerInput.style.width = "100%";
    answerInput.style.minHeight = "80px";
    answerInput.style.padding = "10px";
    answerInput.style.border = "1px solid var(--background-modifier-border)";
    answerInput.style.borderRadius = "6px";
    answerInput.style.marginTop = "8px";
    answerInput.style.fontSize = "14px";
    answerInput.style.resize = "vertical";
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    buttonContainer.style.display = "flex";
    buttonContainer.style.gap = "8px";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.marginTop = "16px";
    const cancelBtn = buttonContainer.createEl("button", { text: "\u53D6\u6D88" });
    cancelBtn.style.padding = "8px 16px";
    cancelBtn.style.borderRadius = "6px";
    cancelBtn.addEventListener("click", () => {
      this.close();
    });
    const createBtn = buttonContainer.createEl("button", {
      text: "\u521B\u5EFA",
      cls: "mod-cta"
    });
    createBtn.style.padding = "8px 16px";
    createBtn.style.borderRadius = "6px";
    createBtn.addEventListener("click", () => {
      const question = questionInput.value.trim();
      const answer = answerInput.value.trim();
      if (!question || !answer) {
        new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u586B\u5199\u5B8C\u6574\u4FE1\u606F");
        return;
      }
      this.onSubmit(question, answer);
      this.close();
    });
    questionInput.focus();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var FlashcardEditModal = class extends import_obsidian5.Modal {
  constructor(app, card, onSubmit) {
    super(app);
    this.card = card;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h3", { text: "\u270F\uFE0F \u7F16\u8F91\u95EA\u5361" });
    contentEl.createEl("label", { text: "\u95EE\u9898" }).style.display = "block";
    const questionInput = contentEl.createEl("textarea", {
      cls: "flashcard-input"
    });
    questionInput.value = this.card.front;
    questionInput.style.width = "100%";
    questionInput.style.minHeight = "80px";
    questionInput.style.padding = "10px";
    questionInput.style.marginTop = "8px";
    questionInput.style.marginBottom = "12px";
    contentEl.createEl("label", { text: "\u7B54\u6848" }).style.display = "block";
    const answerInput = contentEl.createEl("textarea", {
      cls: "flashcard-input"
    });
    answerInput.value = Array.isArray(this.card.back) ? this.card.back.join(", ") : this.card.back;
    answerInput.style.width = "100%";
    answerInput.style.minHeight = "80px";
    answerInput.style.padding = "10px";
    answerInput.style.marginTop = "8px";
    const buttonContainer = contentEl.createDiv();
    buttonContainer.style.display = "flex";
    buttonContainer.style.gap = "8px";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.marginTop = "16px";
    const cancelBtn = buttonContainer.createEl("button", { text: "\u53D6\u6D88" });
    cancelBtn.addEventListener("click", () => this.close());
    const saveBtn = buttonContainer.createEl("button", {
      text: "\u4FDD\u5B58",
      cls: "mod-cta"
    });
    saveBtn.addEventListener("click", () => {
      const question = questionInput.value.trim();
      const answer = answerInput.value.trim();
      if (!question || !answer) {
        new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u586B\u5199\u5B8C\u6574\u4FE1\u606F");
        return;
      }
      this.onSubmit(question, answer);
      this.close();
    });
    questionInput.focus();
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/ui/ReviewView.ts
var import_obsidian6 = require("obsidian");

// src/core/CardScheduler.ts
var CardScheduler = class {
  /**
   * 计算下次复习时间（基于 SM-2 算法）
   */
  schedule(card, ease, timeSpent, userAnswer) {
    const oldScheduling = { ...card.scheduling };
    const newScheduling = { ...card.scheduling };
    const now = Date.now();
    card.stats.totalReviews++;
    card.stats.lastReview = now;
    const totalTime = card.stats.averageTime * (card.stats.totalReviews - 1) + timeSpent;
    card.stats.averageTime = totalTime / card.stats.totalReviews;
    switch (ease) {
      case "again":
        this.scheduleAgain(newScheduling, card.stats);
        break;
      case "hard":
        this.scheduleHard(newScheduling, card.stats);
        break;
      case "good":
        this.scheduleGood(newScheduling, card.stats);
        break;
      case "easy":
        this.scheduleEasy(newScheduling, card.stats);
        break;
    }
    card.scheduling = newScheduling;
    card.metadata.updatedAt = now;
    const reviewLog = {
      flashcardId: card.id,
      timestamp: now,
      response: {
        userAnswer,
        timeSpent,
        ease
      },
      schedulingChange: {
        oldInterval: oldScheduling.interval,
        newInterval: newScheduling.interval,
        oldEase: oldScheduling.ease,
        newEase: newScheduling.ease
      }
    };
    return { updatedCard: card, reviewLog };
  }
  /**
   * Again - 完全忘记
   */
  scheduleAgain(scheduling, stats) {
    scheduling.interval = 1;
    scheduling.ease = Math.max(1.3, scheduling.ease - 0.2);
    scheduling.due = Date.now() + scheduling.interval * 60 * 1e3;
    scheduling.lapses++;
    scheduling.reps++;
    if (scheduling.state === "new") {
      scheduling.state = "learning";
    } else {
      scheduling.state = "relearning";
    }
    stats.difficulty = Math.min(1, stats.difficulty + 0.1);
  }
  /**
   * Hard - 困难
   */
  scheduleHard(scheduling, stats) {
    scheduling.reps++;
    if (scheduling.state === "new" || scheduling.state === "learning") {
      scheduling.interval = 10;
      scheduling.due = Date.now() + 10 * 60 * 1e3;
      scheduling.state = "learning";
    } else {
      scheduling.interval = Math.max(1, scheduling.interval * 1.2);
      scheduling.ease = Math.max(1.3, scheduling.ease - 0.15);
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    }
    stats.difficulty = Math.min(1, stats.difficulty + 0.05);
    stats.correctCount += 0.5;
  }
  /**
   * Good - 正确
   */
  scheduleGood(scheduling, stats) {
    scheduling.reps++;
    stats.correctCount++;
    if (scheduling.state === "new") {
      scheduling.interval = 1;
      scheduling.due = Date.now() + 1 * 24 * 60 * 60 * 1e3;
      scheduling.state = "learning";
    } else if (scheduling.state === "learning") {
      if (scheduling.interval < 1) {
        scheduling.interval = 1;
      } else {
        scheduling.interval = 3;
      }
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    } else {
      scheduling.interval = scheduling.interval * scheduling.ease;
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.ease = scheduling.ease + 0.1;
      scheduling.state = "review";
    }
    stats.difficulty = Math.max(0, stats.difficulty - 0.05);
  }
  /**
   * Easy - 非常简单
   */
  scheduleEasy(scheduling, stats) {
    scheduling.reps++;
    stats.correctCount++;
    if (scheduling.state === "new") {
      scheduling.interval = 4;
      scheduling.due = Date.now() + 4 * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    } else if (scheduling.state === "learning") {
      scheduling.interval = 7;
      scheduling.due = Date.now() + 7 * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    } else {
      scheduling.interval = scheduling.interval * (scheduling.ease + 0.3);
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.ease = scheduling.ease + 0.15;
      scheduling.state = "review";
    }
    stats.difficulty = Math.max(0, stats.difficulty - 0.1);
  }
  /**
   * 评估用户答案（用于输入答案模式）
   */
  evaluateAnswer(correctAnswer, userAnswer) {
    if (Array.isArray(correctAnswer) && Array.isArray(userAnswer)) {
      let correctCount = 0;
      const total = correctAnswer.length;
      for (let i = 0; i < total; i++) {
        const similarity2 = this.calculateSimilarity(
          this.normalize(correctAnswer[i]),
          this.normalize(userAnswer[i] || "")
        );
        if (similarity2 >= 0.9)
          correctCount++;
        else if (similarity2 >= 0.6)
          correctCount += 0.5;
      }
      const overallSimilarity = correctCount / total;
      if (overallSimilarity >= 0.9) {
        return { correctness: "correct", similarity: overallSimilarity };
      } else if (overallSimilarity >= 0.6) {
        return { correctness: "partial", similarity: overallSimilarity };
      } else {
        return { correctness: "wrong", similarity: overallSimilarity };
      }
    }
    const correct = this.normalize(correctAnswer);
    const user = this.normalize(userAnswer);
    if (user.length === 0) {
      return { correctness: "wrong", similarity: 0 };
    }
    const lengthRatio = Math.min(user.length, correct.length) / Math.max(user.length, correct.length);
    if (lengthRatio < 0.3) {
      console.log("Answer evaluation: Length difference too large", {
        correctAnswer: correct,
        userAnswer: user,
        lengthRatio,
        result: "wrong"
      });
      return { correctness: "wrong", similarity: 0 };
    }
    const similarity = this.calculateSimilarity(correct, user);
    console.log("Answer evaluation:", {
      correctAnswer: correct,
      userAnswer: user,
      similarity,
      lengthRatio
    });
    if (similarity >= 0.9) {
      return { correctness: "correct", similarity };
    } else if (similarity >= 0.7) {
      return { correctness: "partial", similarity };
    } else {
      return { correctness: "wrong", similarity };
    }
  }
  /**
   * 标准化文本
   */
  normalize(text) {
    return text.toLowerCase().trim().replace(/\s+/g, " ").replace(/\n+/g, " ").replace(/[，。！？、；：""''（）《》【】\.,!?;:"'()\[\]{}]/g, "");
  }
  /**
   * 计算相似度（Levenshtein 距离）
   */
  calculateSimilarity(str1, str2) {
    if (str1 === str2)
      return 1;
    if (str1.length === 0 || str2.length === 0)
      return 0;
    const matrix = [];
    for (let i = 0; i <= str2.length; i++) {
      matrix[i] = [i];
    }
    for (let j = 0; j <= str1.length; j++) {
      matrix[0][j] = j;
    }
    for (let i = 1; i <= str2.length; i++) {
      for (let j = 1; j <= str1.length; j++) {
        if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
          matrix[i][j] = matrix[i - 1][j - 1];
        } else {
          matrix[i][j] = Math.min(
            matrix[i - 1][j - 1] + 1,
            // 替换
            matrix[i][j - 1] + 1,
            // 插入
            matrix[i - 1][j] + 1
            // 删除
          );
        }
      }
    }
    const distance = matrix[str2.length][str1.length];
    const maxLength = Math.max(str1.length, str2.length);
    return 1 - distance / maxLength;
  }
  /**
   * 根据相似度建议难度
   */
  suggestEase(similarity) {
    if (similarity >= 0.9)
      return "easy";
    if (similarity >= 0.8)
      return "good";
    if (similarity >= 0.5)
      return "hard";
    return "again";
  }
};

// src/ui/ReviewView.ts
var VIEW_TYPE_REVIEW = "learning-system-review";
var ReviewView = class extends import_obsidian6.ItemView {
  // QA 卡片的用户答案
  constructor(leaf, plugin) {
    super(leaf);
    this.dueCards = [];
    this.currentCardIndex = 0;
    this.currentCard = null;
    this.showAnswer = false;
    this.startTime = 0;
    this.userAnswers = [];
    this.userAnswer = "";
    this.plugin = plugin;
    this.scheduler = new CardScheduler();
  }
  getViewType() {
    return VIEW_TYPE_REVIEW;
  }
  getDisplayText() {
    return "Flashcard Review";
  }
  getIcon() {
    return "layers";
  }
  async onOpen() {
    await this.loadDueCards();
    this.render();
    this.addStyles();
  }
  async onClose() {
  }
  async loadDueCards() {
    this.dueCards = this.plugin.flashcardManager.getDueCards();
    this.currentCardIndex = 0;
    this.showAnswer = false;
  }
  render() {
    var _a;
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("review-container");
    if (this.dueCards.length === 0) {
      this.renderNoDueCards(container);
      return;
    }
    const newCard = this.dueCards[this.currentCardIndex];
    if (((_a = this.currentCard) == null ? void 0 : _a.id) !== (newCard == null ? void 0 : newCard.id)) {
      this.userAnswers = [];
      this.userAnswer = "";
      this.showAnswer = false;
      this.startTime = Date.now();
    }
    this.currentCard = newCard;
    if (!this.showAnswer && this.startTime === 0) {
      this.startTime = Date.now();
    }
    this.renderProgress(container);
    const cardArea = container.createDiv({ cls: "card-area" });
    if (this.showAnswer) {
      this.renderAnswer(cardArea);
    } else {
      this.renderQuestion(cardArea);
    }
  }
  renderNoDueCards(container) {
    const emptyState = container.createDiv({ cls: "empty-state" });
    emptyState.createEl("h2", { text: "\u{1F389} All Done!" });
    emptyState.createEl("p", { text: "No cards due for review right now." });
    const stats = this.plugin.flashcardManager.getStats();
    const statsDiv = emptyState.createDiv({ cls: "stats-summary" });
    statsDiv.createEl("p", { text: `Total cards: ${stats.total}` });
    statsDiv.createEl("p", { text: `New cards: ${stats.new}` });
    statsDiv.createEl("p", { text: `Reviewed today: ${stats.reviewedToday}` });
    const closeBtn = emptyState.createEl("button", {
      text: "Close Review",
      cls: "mod-cta"
    });
    closeBtn.addEventListener("click", () => {
      this.leaf.detach();
    });
  }
  renderProgress(container) {
    const progressBar = container.createDiv({ cls: "progress-bar" });
    const stats = progressBar.createDiv({ cls: "progress-stats" });
    stats.createSpan({
      text: `${this.currentCardIndex + 1} / ${this.dueCards.length}`,
      cls: "progress-text"
    });
    const remaining = this.dueCards.length - this.currentCardIndex - 1;
    stats.createSpan({
      text: `${remaining} remaining`,
      cls: "remaining-text"
    });
    const barContainer = progressBar.createDiv({ cls: "bar-container" });
    const bar = barContainer.createDiv({ cls: "bar" });
    const progress = (this.currentCardIndex + 1) / this.dueCards.length * 100;
    bar.style.width = `${progress}%`;
  }
  renderQuestion(container) {
    if (!this.currentCard)
      return;
    const cardInfo = container.createDiv({ cls: "card-info" });
    cardInfo.createSpan({
      text: this.currentCard.type === "qa" ? "\u{1F4DD} Q&A" : "\u270F\uFE0F Cloze",
      cls: "card-type"
    });
    cardInfo.createSpan({
      text: `Deck: ${this.currentCard.deck}`,
      cls: "card-deck"
    });
    const questionArea = container.createDiv({ cls: "question-area" });
    questionArea.createEl("h3", { text: "Question" });
    const questionText = questionArea.createDiv({ cls: "question-text" });
    questionText.textContent = this.currentCard.front;
    if (this.currentCard.type === "cloze" && this.currentCard.cloze) {
      const inputArea = container.createDiv({ cls: "cloze-input-area" });
      inputArea.createEl("h4", { text: "Fill in the blanks:" });
      if (this.userAnswers.length < this.currentCard.cloze.deletions.length) {
        this.userAnswers = new Array(this.currentCard.cloze.deletions.length).fill("");
      }
      this.currentCard.cloze.deletions.forEach((deletion, index) => {
        const inputGroup = inputArea.createDiv({ cls: "input-group" });
        inputGroup.createSpan({ text: `${index + 1}. ` });
        const input = inputGroup.createEl("input", {
          type: "text",
          placeholder: "Your answer...",
          cls: "cloze-input",
          value: this.userAnswers[index] || ""
        });
        input.addEventListener("input", (e) => {
          this.userAnswers[index] = e.target.value;
        });
      });
    }
    if (this.currentCard.type === "qa") {
      const inputArea = container.createDiv({ cls: "qa-input-area" });
      inputArea.createEl("h4", { text: "Your Answer:" });
      const textarea = inputArea.createEl("textarea", {
        placeholder: "Type your answer here...",
        cls: "qa-input",
        value: this.userAnswer
      });
      textarea.addEventListener("input", (e) => {
        this.userAnswer = e.target.value;
      });
    }
    const buttonArea = container.createDiv({ cls: "button-area" });
    const jumpBtn = buttonArea.createEl("button", {
      text: "\u2197 Jump to Source",
      cls: "jump-btn"
    });
    jumpBtn.addEventListener("click", () => this.jumpToSource());
    const showAnswerBtn = buttonArea.createEl("button", {
      text: "Show Answer",
      cls: "mod-cta show-answer-btn"
    });
    showAnswerBtn.addEventListener("click", () => {
      this.showAnswer = true;
      this.render();
    });
  }
  renderAnswer(container) {
    if (!this.currentCard)
      return;
    const cardInfo = container.createDiv({ cls: "card-info" });
    cardInfo.createSpan({
      text: this.currentCard.type === "qa" ? "\u{1F4DD} Q&A" : "\u270F\uFE0F Cloze",
      cls: "card-type"
    });
    cardInfo.createSpan({
      text: `Deck: ${this.currentCard.deck}`,
      cls: "card-deck"
    });
    const questionReview = container.createDiv({ cls: "question-review" });
    questionReview.createEl("h4", { text: "Question:" });
    questionReview.createDiv({
      text: this.currentCard.front,
      cls: "review-text"
    });
    const answerArea = container.createDiv({ cls: "answer-area" });
    answerArea.createEl("h3", { text: "Answer" });
    if (this.currentCard.type === "cloze" && this.currentCard.cloze) {
      const fullText = answerArea.createDiv({ cls: "full-text" });
      fullText.textContent = this.currentCard.cloze.original;
      if (this.userAnswers.length > 0) {
        const comparison = answerArea.createDiv({ cls: "answer-comparison" });
        comparison.createEl("h4", { text: "Your Answers:" });
        this.currentCard.cloze.deletions.forEach((deletion, index) => {
          const item = comparison.createDiv({ cls: "comparison-item" });
          item.createSpan({ text: `${index + 1}. ` });
          const userAnswer = this.userAnswers[index] || "";
          const evaluation = this.scheduler.evaluateAnswer(
            deletion.answer,
            userAnswer
          );
          const userSpan = item.createEl("span", {
            text: userAnswer || "(empty)",
            cls: `user-answer ${evaluation.correctness}`
          });
          userSpan.classList.add("user-answer", evaluation.correctness);
          item.createSpan({ text: " \u2192 " });
          item.createEl("span", {
            text: deletion.answer,
            cls: "correct-answer"
          });
          if (evaluation.correctness === "partial") {
            item.createEl("small", {
              text: ` (${Math.round(evaluation.similarity * 100)}% match)`,
              cls: "similarity-info"
            });
          }
        });
      }
    } else {
      const correctAnswer = this.currentCard.back;
      const answerText = answerArea.createDiv({ cls: "answer-text" });
      answerText.textContent = correctAnswer;
      if (this.userAnswer.trim()) {
        const comparison = answerArea.createDiv({ cls: "answer-comparison qa-comparison" });
        comparison.createEl("h4", { text: "Your Answer:" });
        const evaluation = this.scheduler.evaluateAnswer(
          correctAnswer,
          this.userAnswer
        );
        console.log("=== Answer Evaluation Debug ===");
        console.log("User Answer:", this.userAnswer);
        console.log("Correct Answer:", correctAnswer);
        console.log("Evaluation Result:", evaluation);
        console.log("Correctness:", evaluation.correctness);
        console.log("Similarity:", evaluation.similarity);
        const userAnswerDiv = comparison.createDiv({ cls: "comparison-item" });
        const userAnswerElement = userAnswerDiv.createEl("div", {
          text: this.userAnswer || "(empty)"
        });
        userAnswerElement.className = "";
        userAnswerElement.classList.add("qa-user-answer", "user-answer", evaluation.correctness);
        console.log("Applied classes:", userAnswerElement.className);
        console.log("Has correct class:", userAnswerElement.classList.contains("correct"));
        console.log("Has partial class:", userAnswerElement.classList.contains("partial"));
        console.log("Has wrong class:", userAnswerElement.classList.contains("wrong"));
        if (evaluation.correctness === "wrong") {
          userAnswerElement.style.backgroundColor = "#f44336";
          userAnswerElement.style.color = "white";
          console.log("Applied wrong answer styles directly");
        } else if (evaluation.correctness === "partial") {
          userAnswerElement.style.backgroundColor = "#FFC000";
          userAnswerElement.style.color = "white";
          console.log("Applied partial answer styles directly");
        } else if (evaluation.correctness === "correct") {
          userAnswerElement.style.backgroundColor = "#4caf50";
          userAnswerElement.style.color = "white";
          console.log("Applied correct answer styles directly");
        }
        comparison.createEl("h4", { text: "Correct Answer:", cls: "correct-answer-label" });
        const correctAnswerDiv = comparison.createDiv({ cls: "comparison-item" });
        correctAnswerDiv.createEl("div", {
          text: correctAnswer,
          cls: "correct-answer qa-correct-answer"
        });
        if (evaluation.correctness === "partial") {
          const similarityInfo = comparison.createEl("div", {
            cls: "similarity-info qa-similarity"
          });
          similarityInfo.textContent = `Similarity: ${Math.round(evaluation.similarity * 100)}%`;
        }
      }
    }
    const ratingArea = container.createDiv({ cls: "rating-area" });
    ratingArea.createEl("h4", { text: "How well did you know this?" });
    const buttonGroup = ratingArea.createDiv({ cls: "rating-buttons" });
    const ratings = [
      { ease: "again", label: "Again\n< 1 min", color: "red" },
      { ease: "hard", label: "Hard\n< 10 min", color: "orange" },
      { ease: "good", label: "Good\n1 day", color: "blue" },
      { ease: "easy", label: "Easy\n4 days", color: "green" }
    ];
    ratings.forEach(({ ease, label, color }) => {
      const btn = buttonGroup.createEl("button", {
        cls: `rating-btn rating-${color}`
      });
      const lines = label.split("\n");
      btn.createEl("div", { text: lines[0], cls: "rating-label" });
      btn.createEl("div", { text: lines[1], cls: "rating-interval" });
      btn.addEventListener("click", () => this.submitReview(ease));
    });
    const actionButtons = ratingArea.createDiv({ cls: "action-buttons" });
    const jumpBtn = actionButtons.createEl("button", {
      text: "\u2197 Jump to Source",
      cls: "jump-btn-small"
    });
    jumpBtn.addEventListener("click", () => this.jumpToSource());
    const deleteBtn = actionButtons.createEl("button", {
      text: "\u{1F5D1}\uFE0F Delete Card",
      cls: "delete-btn-small"
    });
    deleteBtn.addEventListener("click", async () => {
      if (!this.currentCard)
        return;
      if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u5F20\u95EA\u5361\u5417\uFF1F\u5220\u9664\u540E\u5C06\u4ECE\u590D\u4E60\u961F\u5217\u4E2D\u79FB\u9664\u3002")) {
        await this.deleteFlashcard(this.currentCard.id);
      }
    });
  }
  async submitReview(ease) {
    if (!this.currentCard)
      return;
    const timeSpent = (Date.now() - this.startTime) / 1e3;
    const userAnswer = this.currentCard.type === "cloze" ? this.userAnswers : this.currentCard.type === "qa" ? this.userAnswer : void 0;
    const { updatedCard, reviewLog } = this.scheduler.schedule(
      this.currentCard,
      ease,
      timeSpent,
      userAnswer
    );
    await this.plugin.flashcardManager.updateCard(updatedCard);
    await this.plugin.flashcardManager.logReview({
      id: `log-${Date.now()}`,
      ...reviewLog
    });
    this.currentCardIndex++;
    this.showAnswer = false;
    this.userAnswers = [];
    this.userAnswer = "";
    if (this.currentCardIndex >= this.dueCards.length) {
      new import_obsidian6.Notice(`\u2705 Review session complete! Reviewed ${this.dueCards.length} cards.`);
      await this.loadDueCards();
    }
    this.render();
  }
  async jumpToSource() {
    if (!this.currentCard)
      return;
    const file = this.app.vault.getAbstractFileByPath(this.currentCard.sourceFile);
    if (!(file instanceof import_obsidian6.TFile)) {
      new import_obsidian6.Notice("Source file not found");
      return;
    }
    const contentUnit = this.plugin.dataManager.getContentUnit(
      this.currentCard.sourceContentId
    );
    if (!contentUnit) {
      new import_obsidian6.Notice("Source content not found");
      return;
    }
    const leaf = this.app.workspace.getLeaf(false);
    await leaf.openFile(file);
    setTimeout(() => {
      const view = this.app.workspace.getActiveViewOfType(import_obsidian6.ItemView);
      if (view) {
        const editor = view.editor;
        if (editor) {
          editor.setCursor({ line: contentUnit.source.position.line, ch: 0 });
          editor.scrollIntoView({
            from: { line: contentUnit.source.position.line, ch: 0 },
            to: { line: contentUnit.source.position.line, ch: 0 }
          }, true);
        }
      }
    }, 100);
  }
  async deleteFlashcard(cardId) {
    var _a;
    try {
      await this.plugin.flashcardManager.deleteCard(cardId);
      new import_obsidian6.Notice("\u{1F5D1}\uFE0F \u95EA\u5361\u5DF2\u5220\u9664");
      this.dueCards = this.dueCards.filter((card) => card.id !== cardId);
      if (((_a = this.currentCard) == null ? void 0 : _a.id) === cardId) {
        if (this.currentCardIndex >= this.dueCards.length) {
          this.currentCardIndex = Math.max(0, this.dueCards.length - 1);
        }
        this.currentCard = null;
      }
      await this.loadDueCards();
      this.render();
    } catch (error) {
      console.error("Error deleting flashcard:", error);
      new import_obsidian6.Notice("\u274C \u5220\u9664\u95EA\u5361\u5931\u8D25");
    }
  }
  addStyles() {
    const styleEl = document.createElement("style");
    styleEl.textContent = `
      .review-container {
        padding: 20px;
        max-width: 800px;
        margin: 0 auto;
      }

      /* \u7A7A\u72B6\u6001 */
      .empty-state {
        text-align: center;
        padding: 60px 20px;
      }

      .empty-state h2 {
        font-size: 2em;
        margin-bottom: 10px;
      }

      .stats-summary {
        margin: 30px 0;
        padding: 20px;
        background: var(--background-secondary);
        border-radius: 8px;
        text-align: left;
        max-width: 300px;
        margin-left: auto;
        margin-right: auto;
      }

      /* \u8FDB\u5EA6\u6761 */
      .progress-bar {
        margin-bottom: 30px;
      }

      .progress-stats {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
      }

      .progress-text {
        font-weight: 600;
        font-size: 1.1em;
      }

      .remaining-text {
        color: var(--text-muted);
      }

      .bar-container {
        height: 8px;
        background: var(--background-secondary);
        border-radius: 4px;
        overflow: hidden;
      }

      .bar {
        height: 100%;
        background: var(--interactive-accent);
        transition: width 0.3s ease;
      }

      /* \u5361\u7247\u533A\u57DF */
      .card-area {
        background: var(--background-primary);
        border: 2px solid var(--background-modifier-border);
        border-radius: 12px;
        padding: 30px;
        min-height: 400px;
      }

      .card-info {
        display: flex;
        gap: 15px;
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 1px solid var(--background-modifier-border);
      }

      .card-type, .card-deck {
        padding: 4px 12px;
        background: var(--background-secondary);
        border-radius: 12px;
        font-size: 0.9em;
      }

      /* \u95EE\u9898\u533A\u57DF */
      .question-area, .answer-area {
        margin: 25px 0;
      }

      .question-area h3, .answer-area h3 {
        margin-bottom: 15px;
        color: var(--text-muted);
      }

      .question-text, .answer-text {
        font-size: 1.3em;
        line-height: 1.6;
        padding: 20px;
        background: var(--background-secondary);
        border-radius: 8px;
      }

      /* \u5B8C\u5F62\u586B\u7A7A\u8F93\u5165 */
      .cloze-input-area {
        margin: 25px 0;
      }

      .cloze-input-area h4 {
        margin-bottom: 15px;
        color: var(--text-muted);
      }

      .input-group {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 12px;
      }

      .cloze-input {
        flex: 1;
        padding: 10px 15px;
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-primary);
        font-size: 1em;
      }

      .cloze-input:focus {
        border-color: var(--interactive-accent);
        outline: none;
      }

      /* QA \u5361\u7247\u8F93\u5165 */
      .qa-input-area {
        margin: 25px 0;
      }

      .qa-input-area h4 {
        margin-bottom: 15px;
        color: var(--text-muted);
      }

      .qa-input {
        width: 100%;
        min-height: 120px;
        padding: 12px 15px;
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-primary);
        font-size: 1em;
        font-family: inherit;
        resize: vertical;
        line-height: 1.6;
      }

      .qa-input:focus {
        border-color: var(--interactive-accent);
        outline: none;
      }

      /* \u7B54\u6848\u5BF9\u6BD4 */
      .question-review {
        margin-bottom: 20px;
        padding: 15px;
        background: var(--background-secondary-alt);
        border-radius: 8px;
      }

      .question-review h4 {
        margin: 0 0 10px 0;
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .review-text {
        color: var(--text-muted);
      }

      .full-text {
        font-size: 1.2em;
        line-height: 1.6;
        padding: 20px;
        background: var(--background-secondary);
        border-radius: 8px;
        margin-bottom: 20px;
      }

      .answer-comparison {
        padding: 15px;
        background: var(--background-secondary-alt);
        border-radius: 8px;
      }

      .answer-comparison h4 {
        margin: 0 0 15px 0;
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .comparison-item {
        padding: 10px;
        margin-bottom: 8px;
        background: var(--background-primary);
        border-radius: 6px;
      }

      .user-answer {
        font-weight: 500;
        padding: 2px 6px;
        border-radius: 3px;
      }

      .user-answer.correct {
        background: var(--background-modifier-success, #4caf50) !important;
        color: var(--text-on-accent, white) !important;
      }

      .user-answer.partial {
        background: #FFC000 !important;
        color: white !important;
      }

      .user-answer.wrong {
        background: var(--background-modifier-error, #f44336) !important;
        color: white !important;
      }

      .correct-answer {
        color: var(--text-accent);
        font-weight: 500;
      }

      .similarity-info {
        color: var(--text-muted);
        font-style: italic;
      }

      /* QA \u5361\u7247\u5BF9\u6BD4\u6837\u5F0F */
      .qa-comparison {
        margin-top: 20px;
      }

      .qa-user-answer {
        padding: 15px;
        border-radius: 6px;
        margin-bottom: 15px;
        white-space: pre-wrap;
        word-break: break-word;
      }

      /* \u786E\u4FDDQA\u5361\u7247\u7684\u7528\u6237\u7B54\u6848\u4E5F\u80FD\u6B63\u786E\u663E\u793A\u989C\u8272 - \u4F7F\u7528\u6700\u9AD8\u4F18\u5148\u7EA7 */
      .qa-user-answer.correct,
      .user-answer.correct.qa-user-answer,
      div.qa-user-answer.correct,
      div.user-answer.correct.qa-user-answer,
      .comparison-item .qa-user-answer.correct,
      .comparison-item .user-answer.correct.qa-user-answer {
        background: var(--background-modifier-success, #4caf50) !important;
        background-color: #4caf50 !important;
        color: var(--text-on-accent, white) !important;
        color: white !important;
      }

      .qa-user-answer.partial,
      .user-answer.partial.qa-user-answer,
      div.qa-user-answer.partial,
      div.user-answer.partial.qa-user-answer,
      .comparison-item .qa-user-answer.partial,
      .comparison-item .user-answer.partial.qa-user-answer {
        background: #FFC000 !important;
        background-color: #FFC000 !important;
        color: white !important;
      }

      .qa-user-answer.wrong,
      .user-answer.wrong.qa-user-answer,
      div.qa-user-answer.wrong,
      div.user-answer.wrong.qa-user-answer,
      .comparison-item .qa-user-answer.wrong,
      .comparison-item .user-answer.wrong.qa-user-answer {
        background: var(--background-modifier-error, #f44336) !important;
        background-color: #f44336 !important;
        color: white !important;
      }

      .qa-correct-answer {
        padding: 15px;
        border-radius: 6px;
        white-space: pre-wrap;
        word-break: break-word;
      }

      .correct-answer-label {
        margin-top: 20px !important;
        margin-bottom: 10px !important;
      }

      .qa-similarity {
        margin-top: 10px;
        padding: 8px;
        background: var(--background-secondary);
        border-radius: 4px;
        text-align: center;
      }

      /* \u6309\u94AE\u533A\u57DF */
      .button-area {
        display: flex;
        gap: 15px;
        justify-content: center;
        margin-top: 30px;
      }

      .show-answer-btn {
        padding: 12px 40px;
        font-size: 1.1em;
      }

      .jump-btn, .jump-btn-small {
        padding: 10px 20px;
      }

      .action-buttons {
        display: flex;
        gap: 10px;
        margin-top: 15px;
        justify-content: center;
      }

      .delete-btn-small {
        padding: 8px 16px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-primary);
        cursor: pointer;
        transition: all 0.2s;
        color: var(--text-normal);
      }

      .delete-btn-small:hover {
        background: var(--color-red);
        border-color: var(--color-red);
        color: white;
      }

      /* \u8BC4\u7EA7\u533A\u57DF */
      .rating-area {
        margin-top: 30px;
        text-align: center;
      }

      .rating-area h4 {
        margin-bottom: 20px;
        color: var(--text-muted);
      }

      .rating-buttons {
        display: flex;
        gap: 12px;
        justify-content: center;
        margin-bottom: 20px;
      }

      .rating-btn {
        flex: 1;
        max-width: 150px;
        padding: 20px;
        border: 2px solid var(--background-modifier-border);
        border-radius: 8px;
        background: var(--background-primary);
        cursor: pointer;
        transition: all 0.2s;
      }

      .rating-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .rating-red:hover { 
        border-color: var(--color-red);
        background: var(--background-modifier-error-hover);
      }

      .rating-orange:hover { 
        border-color: #FFC000;
        background: rgba(255, 192, 0, 0.1);
      }

      .rating-blue:hover { 
        border-color: var(--interactive-accent);
        background: var(--background-modifier-hover);
      }

      .rating-green:hover { 
        border-color: var(--color-green);
        background: var(--background-modifier-success-hover);
      }

      .rating-label {
        font-weight: 600;
        font-size: 1.1em;
        margin-bottom: 5px;
      }

      .rating-interval {
        font-size: 0.9em;
        color: var(--text-muted);
      }
    `;
    document.head.appendChild(styleEl);
  }
};

// src/ui/StatsView.ts
var import_obsidian7 = require("obsidian");

// src/core/AnalyticsEngine.ts
var AnalyticsEngine = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * 获取每日统计
   */
  getDailyStats(days = 30) {
    const logs = this.plugin.flashcardManager["reviewLogs"] || [];
    const stats = /* @__PURE__ */ new Map();
    for (let i = 0; i < days; i++) {
      const date = new Date();
      date.setDate(date.getDate() - i);
      const dateKey = date.toISOString().split("T")[0];
      stats.set(dateKey, {
        date: dateKey,
        reviewed: 0,
        correctCount: 0,
        correctRate: 0,
        timeSpent: 0,
        newCards: 0
      });
    }
    logs.forEach((log) => {
      const date = new Date(log.timestamp).toISOString().split("T")[0];
      const stat = stats.get(date);
      if (!stat)
        return;
      stat.reviewed++;
      stat.timeSpent += log.response.timeSpent;
      if (log.response.ease === "good" || log.response.ease === "easy") {
        stat.correctCount++;
      } else if (log.response.ease === "hard") {
        stat.correctCount += 0.5;
      }
      const card = this.plugin.flashcardManager.getFlashcard(log.flashcardId);
      if (card && card.stats.totalReviews === 1) {
        stat.newCards++;
      }
    });
    stats.forEach((stat) => {
      if (stat.reviewed > 0) {
        stat.correctRate = stat.correctCount / stat.reviewed;
      }
    });
    return Array.from(stats.values()).sort(
      (a, b) => a.date.localeCompare(b.date)
    );
  }
  /**
   * 获取周统计
   */
  getWeeklyStats() {
    const now = new Date();
    const thisWeekStart = new Date(now);
    thisWeekStart.setDate(now.getDate() - now.getDay());
    thisWeekStart.setHours(0, 0, 0, 0);
    const lastWeekStart = new Date(thisWeekStart);
    lastWeekStart.setDate(lastWeekStart.getDate() - 7);
    const thisWeek = this.calculateWeekStats(thisWeekStart);
    const lastWeek = this.calculateWeekStats(lastWeekStart);
    return { thisWeek, lastWeek };
  }
  calculateWeekStats(startDate) {
    const endDate = new Date(startDate);
    endDate.setDate(endDate.getDate() + 7);
    const logs = (this.plugin.flashcardManager["reviewLogs"] || []).filter(
      (log) => log.timestamp >= startDate.getTime() && log.timestamp < endDate.getTime()
    );
    let totalCorrect = 0;
    let totalTimeSpent = 0;
    logs.forEach((log) => {
      totalTimeSpent += log.response.timeSpent;
      if (log.response.ease === "good" || log.response.ease === "easy") {
        totalCorrect++;
      } else if (log.response.ease === "hard") {
        totalCorrect += 0.5;
      }
    });
    const averageCorrectRate = logs.length > 0 ? totalCorrect / logs.length : 0;
    const streak = this.calculateStreak();
    return {
      startDate: startDate.toISOString().split("T")[0],
      endDate: endDate.toISOString().split("T")[0],
      totalReviews: logs.length,
      averageCorrectRate,
      totalTimeSpent,
      streak
    };
  }
  /**
   * 计算连续学习天数
   */
  calculateStreak() {
    const logs = this.plugin.flashcardManager["reviewLogs"] || [];
    if (logs.length === 0)
      return 0;
    const dates = /* @__PURE__ */ new Set();
    logs.forEach((log) => {
      const date = new Date(log.timestamp).toISOString().split("T")[0];
      dates.add(date);
    });
    const sortedDates = Array.from(dates).sort().reverse();
    let streak = 0;
    const today = new Date().toISOString().split("T")[0];
    for (let i = 0; i < sortedDates.length; i++) {
      const expectedDate = new Date();
      expectedDate.setDate(expectedDate.getDate() - i);
      const expected = expectedDate.toISOString().split("T")[0];
      if (sortedDates[i] === expected) {
        streak++;
      } else {
        break;
      }
    }
    return streak;
  }
  /**
   * 获取卡组统计
   */
  getDeckStats() {
    const cards = this.plugin.flashcardManager.getAllFlashcards();
    const deckMap = /* @__PURE__ */ new Map();
    cards.forEach((card) => {
      if (!deckMap.has(card.deck)) {
        deckMap.set(card.deck, []);
      }
      deckMap.get(card.deck).push(card);
    });
    const stats = [];
    const now = Date.now();
    deckMap.forEach((deckCards, deckName) => {
      const dueCards = deckCards.filter((c) => c.scheduling.due <= now).length;
      const newCards = deckCards.filter((c) => c.scheduling.state === "new").length;
      const totalCorrect = deckCards.reduce(
        (sum, c) => sum + c.stats.correctCount,
        0
      );
      const totalReviews = deckCards.reduce(
        (sum, c) => sum + c.stats.totalReviews,
        0
      );
      const correctRate = totalReviews > 0 ? totalCorrect / totalReviews : 0;
      const totalInterval = deckCards.reduce(
        (sum, c) => sum + c.scheduling.interval,
        0
      );
      const averageInterval = deckCards.length > 0 ? totalInterval / deckCards.length : 0;
      stats.push({
        deckName,
        totalCards: deckCards.length,
        dueCards,
        newCards,
        correctRate,
        averageInterval
      });
    });
    return stats.sort((a, b) => b.totalCards - a.totalCards);
  }
  /**
   * 获取难点卡片
   */
  getDifficultCards(limit = 10) {
    const cards = this.plugin.flashcardManager.getAllFlashcards();
    const logs = this.plugin.flashcardManager["reviewLogs"] || [];
    const difficultCards = [];
    cards.forEach((card) => {
      const cardLogs = logs.filter((log) => log.flashcardId === card.id);
      const errorCount = cardLogs.filter(
        (log) => log.response.ease === "again"
      ).length;
      if (errorCount === 0 && card.stats.difficulty < 0.7)
        return;
      const errorLogs = cardLogs.filter((log) => log.response.ease === "again");
      const lastError = errorLogs.length > 0 ? errorLogs[errorLogs.length - 1].timestamp : 0;
      const pattern = this.detectErrorPattern(card, cardLogs);
      difficultCards.push({
        card,
        errorCount,
        lastError,
        averageTime: card.stats.averageTime,
        pattern
      });
    });
    return difficultCards.sort((a, b) => {
      if (a.errorCount !== b.errorCount) {
        return b.errorCount - a.errorCount;
      }
      if (a.card.stats.difficulty !== b.card.stats.difficulty) {
        return b.card.stats.difficulty - a.card.stats.difficulty;
      }
      return b.lastError - a.lastError;
    }).slice(0, limit);
  }
  detectErrorPattern(card, logs) {
    if (logs.length < 3)
      return "unknown";
    if (card.stats.averageTime > 60) {
      return "calculation";
    }
    if (card.scheduling.interval < 3 && card.scheduling.lapses > 2) {
      return "memory";
    }
    const recentLogs = logs.slice(-5);
    const recentFailures = recentLogs.filter(
      (log) => log.response.ease === "again"
    ).length;
    if (recentFailures >= 3) {
      return "concept";
    }
    return "unknown";
  }
  /**
   * 获取标签统计
   */
  getTagStats() {
    const cards = this.plugin.flashcardManager.getAllFlashcards();
    const tagMap = /* @__PURE__ */ new Map();
    cards.forEach((card) => {
      card.tags.forEach((tag) => {
        if (!tagMap.has(tag)) {
          tagMap.set(tag, { total: 0, correct: 0, reviews: 0 });
        }
        const stat = tagMap.get(tag);
        stat.total++;
        stat.correct += card.stats.correctCount;
        stat.reviews += card.stats.totalReviews;
      });
    });
    const stats = Array.from(tagMap.entries()).map(([tag, data]) => ({
      tag,
      count: data.total,
      correctRate: data.reviews > 0 ? data.correct / data.reviews : 0
    }));
    return stats.sort((a, b) => b.count - a.count);
  }
  /**
   * 生成学习报告
   */
  generateReport(days = 7) {
    const dailyStats = this.getDailyStats(days);
    const { thisWeek, lastWeek } = this.getWeeklyStats();
    const difficultCards = this.getDifficultCards(5);
    const deckStats = this.getDeckStats();
    const totalReviewed = dailyStats.reduce((sum, s) => sum + s.reviewed, 0);
    const totalCorrect = dailyStats.reduce((sum, s) => sum + s.correctCount, 0);
    const averageCorrectRate = totalReviewed > 0 ? totalCorrect / totalReviewed : 0;
    const totalTime = dailyStats.reduce((sum, s) => sum + s.timeSpent, 0);
    const recentDays = dailyStats.slice(-7);
    const olderDays = dailyStats.slice(-14, -7);
    const recentRate = this.calculateAverageRate(recentDays);
    const olderRate = this.calculateAverageRate(olderDays);
    const trend = recentRate > olderRate ? "\u{1F4C8} improving" : recentRate < olderRate ? "\u{1F4C9} declining" : "\u27A1\uFE0F stable";
    let report = `# \u{1F4CA} Learning Report

`;
    report += `**Period:** Last ${days} days
`;
    report += `**Generated:** ${new Date().toLocaleString()}

`;
    report += `## \u{1F3AF} Overall Performance

`;
    report += `- **Cards Reviewed:** ${totalReviewed}
`;
    report += `- **Correct Rate:** ${(averageCorrectRate * 100).toFixed(1)}%
`;
    report += `- **Study Time:** ${this.formatTime(totalTime)}
`;
    report += `- **Current Streak:** ${thisWeek.streak} days \u{1F525}
`;
    report += `- **Trend:** ${trend}

`;
    report += `## \u{1F4C8} Week Comparison

`;
    report += `### This Week
`;
    report += `- Reviews: ${thisWeek.totalReviews}
`;
    report += `- Correct Rate: ${(thisWeek.averageCorrectRate * 100).toFixed(1)}%
`;
    report += `- Time: ${this.formatTime(thisWeek.totalTimeSpent)}

`;
    report += `### Last Week
`;
    report += `- Reviews: ${lastWeek.totalReviews}
`;
    report += `- Correct Rate: ${(lastWeek.averageCorrectRate * 100).toFixed(1)}%
`;
    report += `- Time: ${this.formatTime(lastWeek.totalTimeSpent)}

`;
    const reviewChange = thisWeek.totalReviews - lastWeek.totalReviews;
    const rateChange = (thisWeek.averageCorrectRate - lastWeek.averageCorrectRate) * 100;
    if (reviewChange > 0) {
      report += `\u{1F4AA} You reviewed **${reviewChange} more cards** this week!
`;
    }
    if (rateChange > 5) {
      report += `\u{1F389} Your accuracy improved by **${rateChange.toFixed(1)}%**!
`;
    }
    report += `
`;
    if (difficultCards.length > 0) {
      report += `## \u26A0\uFE0F Cards Needing Attention

`;
      difficultCards.forEach((dc, i) => {
        const patternEmoji = {
          "concept": "\u{1F9E0}",
          "memory": "\u{1F4AD}",
          "calculation": "\u{1F522}",
          "unknown": "\u2753"
        };
        report += `${i + 1}. **${dc.card.front.substring(0, 50)}${dc.card.front.length > 50 ? "..." : ""}**
`;
        report += `   - Errors: ${dc.errorCount} | Pattern: ${patternEmoji[dc.pattern]} ${dc.pattern}
`;
        report += `   - Avg Time: ${dc.averageTime.toFixed(1)}s | Difficulty: ${(dc.card.stats.difficulty * 100).toFixed(0)}%

`;
      });
    }
    report += `## \u{1F4DA} Deck Overview

`;
    deckStats.forEach((deck) => {
      report += `### ${deck.deckName}
`;
      report += `- Total: ${deck.totalCards} | Due: ${deck.dueCards} | New: ${deck.newCards}
`;
      report += `- Correct Rate: ${(deck.correctRate * 100).toFixed(1)}%
`;
      report += `- Avg Interval: ${deck.averageInterval.toFixed(1)} days

`;
    });
    report += `## \u{1F4A1} Recommendations

`;
    if (averageCorrectRate < 0.7) {
      report += `- \u26A1 Your correct rate is below 70%. Consider reviewing difficult cards more frequently.
`;
    }
    if (difficultCards.length > 5) {
      report += `- \u{1F4D6} You have many difficult cards. Try breaking complex concepts into smaller flashcards.
`;
    }
    if (thisWeek.streak > 7) {
      report += `- \u{1F389} Amazing streak! Keep up the consistency!
`;
    }
    if (totalTime / totalReviewed > 30) {
      report += `- \u23F1\uFE0F Average review time is high. Consider simplifying card content.
`;
    }
    if (deckStats.some((d) => d.dueCards > d.totalCards * 0.5)) {
      report += `- \u{1F4C5} Some decks have many overdue cards. Focus on catching up with these.
`;
    }
    return report;
  }
  calculateAverageRate(stats) {
    const total = stats.reduce((sum, s) => sum + s.reviewed, 0);
    const correct = stats.reduce((sum, s) => sum + s.correctCount, 0);
    return total > 0 ? correct / total : 0;
  }
  formatTime(seconds) {
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor(seconds % 3600 / 60);
    if (hours > 0) {
      return `${hours}h ${minutes}m`;
    }
    return `${minutes}m`;
  }
  /**
   * 获取热力图数据（用于日历视图）
   */
  getHeatmapData(days = 90) {
    const dailyStats = this.getDailyStats(days);
    const maxReviews = Math.max(...dailyStats.map((s) => s.reviewed));
    return dailyStats.map((stat) => ({
      date: stat.date,
      count: stat.reviewed,
      intensity: maxReviews > 0 ? stat.reviewed / maxReviews : 0
    }));
  }
};

// src/ui/StatsView.ts
var VIEW_TYPE_STATS = "learning-system-stats";
var StatsView = class extends import_obsidian7.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.currentTab = "overview";
    this.plugin = plugin;
    this.analytics = new AnalyticsEngine(plugin);
  }
  getViewType() {
    return VIEW_TYPE_STATS;
  }
  getDisplayText() {
    return "Learning Statistics";
  }
  getIcon() {
    return "bar-chart";
  }
  async onOpen() {
    this.render();
    this.addStyles();
  }
  async onClose() {
  }
  render() {
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("stats-container");
    const header = container.createDiv({ cls: "stats-header" });
    header.createEl("h2", { text: "\u{1F4CA} Learning Statistics" });
    const refreshBtn = header.createEl("button", {
      text: "\u27F3",
      cls: "refresh-btn"
    });
    refreshBtn.addEventListener("click", () => this.render());
    this.renderTabs(container);
    const content = container.createDiv({ cls: "stats-content" });
    switch (this.currentTab) {
      case "overview":
        this.renderOverview(content);
        break;
      case "trends":
        this.renderTrends(content);
        break;
      case "decks":
        this.renderDecks(content);
        break;
      case "difficult":
        this.renderDifficult(content);
        break;
    }
  }
  renderTabs(container) {
    const tabs = container.createDiv({ cls: "stats-tabs" });
    const tabConfigs = [
      { id: "overview", label: "\u{1F4CA} Overview" },
      { id: "trends", label: "\u{1F4C8} Trends" },
      { id: "decks", label: "\u{1F4DA} Decks" },
      { id: "difficult", label: "\u26A0\uFE0F Difficult" }
    ];
    tabConfigs.forEach((config) => {
      const tab = tabs.createDiv({
        cls: `tab ${this.currentTab === config.id ? "active" : ""}`
      });
      tab.textContent = config.label;
      tab.addEventListener("click", () => {
        this.currentTab = config.id;
        this.render();
      });
    });
  }
  renderOverview(container) {
    const stats = this.plugin.flashcardManager.getStats();
    const { thisWeek, lastWeek } = this.analytics.getWeeklyStats();
    const dailyStats = this.analytics.getDailyStats(7);
    const metricsGrid = container.createDiv({ cls: "metrics-grid" });
    this.createMetricCard(metricsGrid, {
      title: "Total Cards",
      value: stats.total.toString(),
      icon: "\u{1F0CF}"
    });
    this.createMetricCard(metricsGrid, {
      title: "Due Today",
      value: stats.due.toString(),
      icon: "\u{1F4C5}"
    });
    this.createMetricCard(metricsGrid, {
      title: "Reviewed Today",
      value: stats.reviewedToday.toString(),
      icon: "\u2705"
    });
    const streak = this.analytics.calculateStreak();
    this.createMetricCard(metricsGrid, {
      title: "Current Streak",
      value: `${streak} days`,
      icon: "\u{1F525}"
    });
    const weekComparison = container.createDiv({ cls: "week-comparison" });
    weekComparison.createEl("h3", { text: "This Week vs Last Week" });
    const comparisonGrid = weekComparison.createDiv({ cls: "comparison-grid" });
    const reviewChange = thisWeek.totalReviews - lastWeek.totalReviews;
    const reviewChangePercent = lastWeek.totalReviews > 0 ? (reviewChange / lastWeek.totalReviews * 100).toFixed(1) : "0";
    this.createComparisonItem(comparisonGrid, {
      label: "Reviews",
      thisWeek: thisWeek.totalReviews,
      lastWeek: lastWeek.totalReviews,
      change: reviewChange,
      changePercent: reviewChangePercent
    });
    const rateChange = (thisWeek.averageCorrectRate - lastWeek.averageCorrectRate) * 100;
    this.createComparisonItem(comparisonGrid, {
      label: "Correct Rate",
      thisWeek: `${(thisWeek.averageCorrectRate * 100).toFixed(1)}%`,
      lastWeek: `${(lastWeek.averageCorrectRate * 100).toFixed(1)}%`,
      change: rateChange,
      changePercent: rateChange.toFixed(1)
    });
    const recentActivity = container.createDiv({ cls: "recent-activity" });
    recentActivity.createEl("h3", { text: "Last 7 Days Activity" });
    const activityChart = recentActivity.createDiv({ cls: "activity-chart" });
    this.renderSimpleBarChart(activityChart, dailyStats);
    const reportSection = container.createDiv({ cls: "report-section" });
    const reportBtn = reportSection.createEl("button", {
      text: "\u{1F4C4} Generate Full Report",
      cls: "mod-cta"
    });
  }
  renderTrends(container) {
    container.createEl("h3", { text: "Performance Trends" });
    const dailyStats = this.analytics.getDailyStats(30);
    const correctRateSection = container.createDiv({ cls: "chart-section" });
    correctRateSection.createEl("h4", { text: "Correct Rate (Last 30 Days)" });
    const correctRateChart = correctRateSection.createDiv({ cls: "line-chart" });
    this.renderLineChart(correctRateChart, dailyStats, "correctRate");
    const reviewsSection = container.createDiv({ cls: "chart-section" });
    reviewsSection.createEl("h4", { text: "Daily Reviews" });
    const reviewsChart = reviewsSection.createDiv({ cls: "bar-chart" });
    this.renderBarChart(reviewsChart, dailyStats);
    const heatmapSection = container.createDiv({ cls: "chart-section" });
    heatmapSection.createEl("h4", { text: "Study Activity Calendar" });
    const heatmap = heatmapSection.createDiv({ cls: "heatmap" });
    this.renderHeatmap(heatmap);
  }
  renderDecks(container) {
    container.createEl("h3", { text: "Deck Statistics" });
    const deckStats = this.analytics.getDeckStats();
    if (deckStats.length === 0) {
      container.createDiv({
        text: "No decks yet. Create some flashcards to see deck statistics!",
        cls: "empty-message"
      });
      return;
    }
    const decksGrid = container.createDiv({ cls: "decks-grid" });
    deckStats.forEach((deck) => {
      const deckCard = decksGrid.createDiv({ cls: "deck-card" });
      const header = deckCard.createDiv({ cls: "deck-card-header" });
      header.createEl("h4", { text: deck.deckName });
      header.createSpan({
        text: `${deck.totalCards} cards`,
        cls: "deck-badge"
      });
      const stats = deckCard.createDiv({ cls: "deck-card-stats" });
      this.createStatRow(stats, "Due", deck.dueCards.toString(), "\u{1F4C5}");
      this.createStatRow(stats, "New", deck.newCards.toString(), "\u{1F195}");
      this.createStatRow(
        stats,
        "Correct Rate",
        `${(deck.correctRate * 100).toFixed(1)}%`,
        "\u2705"
      );
      this.createStatRow(
        stats,
        "Avg Interval",
        `${deck.averageInterval.toFixed(1)} days`,
        "\u{1F4CA}"
      );
      const progress = deckCard.createDiv({ cls: "deck-progress" });
      const masteredCount = deck.totalCards - deck.dueCards - deck.newCards;
      const masteredPercent = masteredCount / deck.totalCards * 100;
      const progressBar = progress.createDiv({ cls: "progress-bar-container" });
      const bar = progressBar.createDiv({ cls: "progress-bar-fill" });
      bar.style.width = `${masteredPercent}%`;
      progress.createDiv({
        text: `${masteredPercent.toFixed(0)}% mastered`,
        cls: "progress-label"
      });
    });
  }
  renderDifficult(container) {
    container.createEl("h3", { text: "Cards Needing Attention" });
    const difficultCards = this.analytics.getDifficultCards(10);
    if (difficultCards.length === 0) {
      container.createDiv({
        text: "\u{1F389} No difficult cards! Great job!",
        cls: "empty-message"
      });
      return;
    }
    const cardsList = container.createDiv({ cls: "difficult-cards-list" });
    difficultCards.forEach((dc, index) => {
      const cardItem = cardsList.createDiv({ cls: "difficult-card-item" });
      const rank = cardItem.createDiv({ cls: "card-rank" });
      rank.textContent = `${index + 1}`;
      const content = cardItem.createDiv({ cls: "card-content" });
      const question = content.createDiv({ cls: "card-question" });
      question.textContent = dc.card.front.substring(0, 80) + (dc.card.front.length > 80 ? "..." : "");
      const meta = content.createDiv({ cls: "card-meta" });
      const patternEmoji = {
        "concept": "\u{1F9E0}",
        "memory": "\u{1F4AD}",
        "calculation": "\u{1F522}",
        "unknown": "\u2753"
      };
      meta.createSpan({
        text: `${patternEmoji[dc.pattern]} ${dc.pattern}`,
        cls: "pattern-badge"
      });
      meta.createSpan({
        text: `${dc.errorCount} errors`,
        cls: "error-count"
      });
      meta.createSpan({
        text: `${dc.averageTime.toFixed(1)}s avg`,
        cls: "avg-time"
      });
      const difficultyBar = content.createDiv({ cls: "difficulty-bar-container" });
      const diffBar = difficultyBar.createDiv({ cls: "difficulty-bar" });
      diffBar.style.width = `${dc.card.stats.difficulty * 100}%`;
      const actions = cardItem.createDiv({ cls: "card-actions" });
      const jumpBtn = actions.createEl("button", {
        text: "\u2197",
        cls: "action-btn-small"
      });
      jumpBtn.addEventListener("click", () => this.jumpToCard(dc.card));
      const reviewBtn = actions.createEl("button", {
        text: "\u{1F504}",
        cls: "action-btn-small"
      });
      reviewBtn.addEventListener("click", () => {
        this.plugin.activateReview();
      });
      const deleteBtn = actions.createEl("button", {
        text: "\u{1F5D1}\uFE0F",
        cls: "action-btn-small delete-btn"
      });
      deleteBtn.addEventListener("click", async () => {
        if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u5F20\u95EA\u5361\u5417\uFF1F")) {
          await this.deleteFlashcard(dc.card.id);
        }
      });
    });
  }
  createMetricCard(container, config) {
    const card = container.createDiv({ cls: "metric-card" });
    card.createDiv({ text: config.icon, cls: "metric-icon" });
    const content = card.createDiv({ cls: "metric-content" });
    content.createDiv({ text: config.title, cls: "metric-title" });
    content.createDiv({ text: config.value, cls: "metric-value" });
  }
  createComparisonItem(container, config) {
    const item = container.createDiv({ cls: "comparison-item" });
    item.createDiv({ text: config.label, cls: "comparison-label" });
    const values = item.createDiv({ cls: "comparison-values" });
    values.createSpan({
      text: `${config.thisWeek}`,
      cls: "this-week"
    });
    values.createSpan({ text: " vs ", cls: "vs" });
    values.createSpan({
      text: `${config.lastWeek}`,
      cls: "last-week"
    });
    const changeClass = config.change > 0 ? "positive" : config.change < 0 ? "negative" : "neutral";
    const changeIcon = config.change > 0 ? "\u2197" : config.change < 0 ? "\u2198" : "\u2192";
    item.createDiv({
      text: `${changeIcon} ${config.changePercent}%`,
      cls: `change ${changeClass}`
    });
  }
  createStatRow(container, label, value, icon) {
    const row = container.createDiv({ cls: "stat-row" });
    row.createSpan({ text: icon, cls: "stat-icon" });
    row.createSpan({ text: label, cls: "stat-label" });
    row.createSpan({ text: value, cls: "stat-value" });
  }
  renderSimpleBarChart(container, data) {
    const maxValue = Math.max(...data.map((d) => d.reviewed));
    data.forEach((stat) => {
      const bar = container.createDiv({ cls: "simple-bar" });
      const date = new Date(stat.date);
      const dayName = date.toLocaleDateString("en-US", { weekday: "short" });
      bar.createDiv({ text: dayName, cls: "bar-label" });
      const barContainer = bar.createDiv({ cls: "bar-container" });
      const barFill = barContainer.createDiv({ cls: "bar-fill" });
      const height = maxValue > 0 ? stat.reviewed / maxValue * 100 : 0;
      barFill.style.height = `${height}%`;
      bar.createDiv({ text: stat.reviewed.toString(), cls: "bar-value" });
    });
  }
  renderBarChart(container, data) {
    const chart = container.createDiv({ cls: "chart-canvas" });
    const maxValue = Math.max(...data.map((d) => d.reviewed));
    data.forEach((stat) => {
      const barGroup = chart.createDiv({ cls: "bar-group" });
      const barContainer = barGroup.createDiv({ cls: "bar" });
      const height = maxValue > 0 ? stat.reviewed / maxValue * 100 : 0;
      barContainer.style.height = `${height}%`;
      barContainer.title = `${stat.reviewed} reviews`;
      const barLabel = barGroup.createDiv({ cls: "bar-label" });
      const date = new Date(stat.date);
      barLabel.textContent = date.getDate().toString();
    });
  }
  renderLineChart(container, data, key) {
    const chart = container.createDiv({ cls: "line-chart-canvas" });
    const points = data.map((stat, i) => {
      const x = i / (data.length - 1) * 100;
      const y = 100 - stat[key] * 100;
      return { x, y, value: stat[key] };
    });
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("viewBox", "0 0 100 100");
    svg.setAttribute("preserveAspectRatio", "none");
    svg.style.width = "100%";
    svg.style.height = "200px";
    const pathData = points.map(
      (p, i) => `${i === 0 ? "M" : "L"} ${p.x} ${p.y}`
    ).join(" ");
    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
    path.setAttribute("d", pathData);
    path.setAttribute("fill", "none");
    path.setAttribute("stroke", "var(--interactive-accent)");
    path.setAttribute("stroke-width", "2");
    svg.appendChild(path);
    chart.appendChild(svg);
    const labelsContainer = container.createDiv({ cls: "chart-labels" });
    data.forEach((stat, i) => {
      if (i % Math.ceil(data.length / 7) === 0) {
        const chartLabel = labelsContainer.createDiv({ cls: "chart-label" });
        const date = new Date(stat.date);
        chartLabel.textContent = `${date.getMonth() + 1}/${date.getDate()}`;
      }
    });
  }
  renderHeatmap(container) {
    const heatmapData = this.analytics.getHeatmapData(90);
    const weeks = [];
    let currentWeek = [];
    heatmapData.forEach((day, i) => {
      currentWeek.push(day);
      if (currentWeek.length === 7 || i === heatmapData.length - 1) {
        weeks.push(currentWeek);
        currentWeek = [];
      }
    });
    weeks.forEach((week) => {
      const weekRow = container.createDiv({ cls: "heatmap-week" });
      week.forEach((day) => {
        const cell = weekRow.createDiv({ cls: "heatmap-cell" });
        const level = Math.ceil(day.intensity * 4);
        cell.addClass(`level-${level}`);
        cell.title = `${day.date}: ${day.count} reviews`;
      });
    });
  }
  async jumpToCard(card) {
    const file = this.app.vault.getAbstractFileByPath(card.sourceFile);
    if (!(file instanceof import_obsidian7.TFile))
      return;
    const contentUnit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
    if (!contentUnit)
      return;
    const leaf = this.app.workspace.getLeaf(false);
    await leaf.openFile(file);
    setTimeout(() => {
      const view = this.app.workspace.getActiveViewOfType(import_obsidian7.ItemView);
      if (view) {
        const editor = view.editor;
        if (editor) {
          editor.setCursor({ line: contentUnit.source.position.line, ch: 0 });
          editor.scrollIntoView({
            from: { line: contentUnit.source.position.line, ch: 0 },
            to: { line: contentUnit.source.position.line, ch: 0 }
          }, true);
        }
      }
    }, 100);
  }
  async deleteFlashcard(cardId) {
    try {
      await this.plugin.flashcardManager.deleteCard(cardId);
      new import_obsidian7.Notice("\u{1F5D1}\uFE0F \u95EA\u5361\u5DF2\u5220\u9664");
      this.render();
    } catch (error) {
      console.error("Error deleting flashcard:", error);
      new import_obsidian7.Notice("\u274C \u5220\u9664\u95EA\u5361\u5931\u8D25");
    }
  }
  addStyles() {
    const styleEl = document.createElement("style");
    styleEl.textContent = `
      .stats-container {
        padding: 20px;
        overflow-y: auto;
      }

      .stats-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .stats-header h2 {
        margin: 0;
      }

      .stats-tabs {
        display: flex;
        gap: 8px;
        margin-bottom: 20px;
        border-bottom: 2px solid var(--background-modifier-border);
      }

      .tab {
        padding: 10px 20px;
        cursor: pointer;
        border-bottom: 3px solid transparent;
        transition: all 0.2s;
        user-select: none;
      }

      .tab:hover {
        background: var(--background-modifier-hover);
      }

      .tab.active {
        border-bottom-color: var(--interactive-accent);
        color: var(--interactive-accent);
        font-weight: 600;
      }

      .metrics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 30px;
      }

      .metric-card {
        padding: 20px;
        background: var(--background-secondary);
        border-radius: 8px;
        display: flex;
        gap: 15px;
        align-items: center;
      }

      .metric-icon {
        font-size: 32px;
      }

      .metric-content {
        flex: 1;
      }

      .metric-title {
        font-size: 0.9em;
        color: var(--text-muted);
        margin-bottom: 5px;
      }

      .metric-value {
        font-size: 1.8em;
        font-weight: 600;
      }

      .week-comparison {
        margin-bottom: 30px;
      }

      .comparison-grid {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-top: 15px;
      }

      .comparison-item {
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .comparison-label {
        font-weight: 500;
      }

      .comparison-values {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .this-week {
        font-weight: 600;
        font-size: 1.1em;
      }

      .last-week {
        color: var(--text-muted);
      }

      .change {
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 0.9em;
        font-weight: 500;
      }

      .change.positive {
        background: var(--background-modifier-success);
        color: var(--text-on-accent);
      }

      .change.negative {
        background: var(--background-modifier-error);
        color: white;
      }

      .chart-section {
        margin-bottom: 30px;
      }

      .recent-activity .activity-chart {
        display: flex;
        justify-content: space-around;
        align-items: flex-end;
        height: 150px;
        padding: 20px;
        background: var(--background-secondary);
        border-radius: 8px;
      }

      .simple-bar {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        flex: 1;
      }

      .simple-bar .bar-container {
        width: 100%;
        height: 100px;
        display: flex;
        align-items: flex-end;
        justify-content: center;
      }

      .simple-bar .bar-fill {
        width: 60%;
        background: var(--interactive-accent);
        border-radius: 4px 4px 0 0;
        transition: height 0.3s;
      }

      .bar-label, .bar-value {
        font-size: 0.85em;
        color: var(--text-muted);
      }

      .heatmap {
        display: flex;
        flex-direction: column;
        gap: 4px;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 8px;
      }

      .heatmap-week {
        display: flex;
        gap: 4px;
      }

      .heatmap-cell {
        width: 12px;
        height: 12px;
        background: var(--background-primary);
        border-radius: 2px;
        cursor: pointer;
      }

      .heatmap-cell.level-1 { background: rgba(94, 156, 235, 0.3); }
      .heatmap-cell.level-2 { background: rgba(94, 156, 235, 0.5); }
      .heatmap-cell.level-3 { background: rgba(94, 156, 235, 0.7); }
      .heatmap-cell.level-4 { background: rgba(94, 156, 235, 1); }

      .decks-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 15px;
      }

      .deck-card {
        padding: 20px;
        background: var(--background-secondary);
        border-radius: 8px;
        border: 1px solid var(--background-modifier-border);
      }

      .deck-card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--background-modifier-border);
      }

      .deck-card-header h4 {
        margin: 0;
      }

      .deck-badge {
        padding: 4px 10px;
        background: var(--interactive-accent);
        color: white;
        border-radius: 12px;
        font-size: 0.85em;
      }

      .deck-card-stats {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-bottom: 15px;
      }

      .stat-row {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .stat-icon {
        width: 20px;
      }

      .stat-label {
        flex: 1;
        color: var(--text-muted);
      }

      .stat-value {
        font-weight: 500;
      }

      .deck-progress {
        margin-top: 15px;
      }

      .progress-bar-container {
        height: 8px;
        background: var(--background-primary);
        border-radius: 4px;
        overflow: hidden;
        margin-bottom: 5px;
      }

      .progress-bar-fill {
        height: 100%;
        background: var(--interactive-accent);
        transition: width 0.3s;
      }

      .progress-label {
        font-size: 0.85em;
        color: var(--text-muted);
      }

      .difficult-cards-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .difficult-card-item {
        display: flex;
        gap: 15px;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 8px;
        border: 1px solid var(--background-modifier-border);
      }

      .card-rank {
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--interactive-accent);
        color: white;
        border-radius: 50%;
        font-weight: 600;
        flex-shrink: 0;
      }

      .card-content {
        flex: 1;
      }

      .card-question {
        font-weight: 500;
        margin-bottom: 8px;
      }

      .card-meta {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-bottom:8px;
      } 

.pattern-badge, .error-count, .avg-time {
    padding: 3px 10px;
    background: var(--background-primary);
    border-radius: 12px;
    font-size: 0.85em;
  }

  .difficulty-bar-container {
    height: 6px;
    background: var(--background-primary);
    border-radius: 3px;
    overflow: hidden;
  }

  .difficulty-bar {
    height: 100%;
    background: linear-gradient(to right, var(--color-green), var(--color-yellow), var(--color-red));
    transition: width 0.3s;
  }

  .card-actions {
    display: flex;
    gap: 8px;
  }

  .action-btn-small {
    padding: 6px 12px;
    border: 1px solid var(--background-modifier-border);
    border-radius: 4px;
    background: var(--background-primary);
    cursor: pointer;
    transition: all 0.2s;
  }

  .action-btn-small:hover {
    background: var(--interactive-accent);
    color: white;
    border-color: var(--interactive-accent);
  }

  .action-btn-small.delete-btn:hover {
    background: var(--color-red);
    border-color: var(--color-red);
    color: white;
  }

  .empty-message {
    text-align: center;
    padding: 40px;
    color: var(--text-muted);
    font-size: 1.1em;
  }

  .report-section {
    text-align: center;
    margin-top: 30px;
    padding: 20px;
  }

  .chart-canvas {
    display: flex;
    align-items: flex-end;
    justify-content: space-around;
    height: 200px;
    padding: 20px;
    background: var(--background-secondary);
    border-radius: 8px;
    margin-bottom: 10px;
  }

  .bar-group {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
    height: 100%;
  }

  .bar-group .bar {
    width: 80%;
    background: var(--interactive-accent);
    border-radius: 4px 4px 0 0;
    transition: height 0.3s;
    margin-top: auto;
  }

  .line-chart-canvas {
    background: var(--background-secondary);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 10px;
  }

  .chart-labels {
    display: flex;
    justify-content: space-around;
    padding: 10px 20px;
    background: var(--background-secondary);
    border-radius: 8px;
  }

  .chart-label {
    font-size: 0.85em;
    color: var(--text-muted);
  }
`;
    document.head.appendChild(styleEl);
  }
};

// src/core/DataManager.ts
var DataManager = class {
  constructor(app, plugin) {
    this.app = app;
    this.plugin = plugin;
    this.contentUnits = /* @__PURE__ */ new Map();
    this.fileIndex = /* @__PURE__ */ new Map();
    this.dataFolder = `${this.app.vault.configDir}/plugins/learning-system/data`;
  }
  async initialize() {
    await this.ensureDataFolder();
    await this.loadData();
  }
  async ensureDataFolder() {
    const adapter = this.app.vault.adapter;
    if (!await adapter.exists(this.dataFolder)) {
      await adapter.mkdir(this.dataFolder);
    }
    const subfolders = ["indexes", "config", "cache"];
    for (const folder of subfolders) {
      const path = `${this.dataFolder}/${folder}`;
      if (!await adapter.exists(path)) {
        await adapter.mkdir(path);
      }
    }
  }
  async loadData() {
    try {
      const contentPath = `${this.dataFolder}/content-units.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(contentPath)) {
        const data = await adapter.read(contentPath);
        const units = JSON.parse(data);
        for (const unit of units) {
          this.contentUnits.set(unit.id, unit);
          if (!this.fileIndex.has(unit.source.file)) {
            this.fileIndex.set(unit.source.file, []);
          }
          this.fileIndex.get(unit.source.file).push(unit.id);
        }
      }
    } catch (error) {
      console.error("Error loading data:", error);
    }
  }
  async saveContentUnit(unit) {
    this.contentUnits.set(unit.id, unit);
    if (!this.fileIndex.has(unit.source.file)) {
      this.fileIndex.set(unit.source.file, []);
    }
    if (!this.fileIndex.get(unit.source.file).includes(unit.id)) {
      this.fileIndex.get(unit.source.file).push(unit.id);
    }
    await this.persist();
  }
  async saveContentUnits(units) {
    for (const unit of units) {
      this.contentUnits.set(unit.id, unit);
      if (!this.fileIndex.has(unit.source.file)) {
        this.fileIndex.set(unit.source.file, []);
      }
      if (!this.fileIndex.get(unit.source.file).includes(unit.id)) {
        this.fileIndex.get(unit.source.file).push(unit.id);
      }
    }
    await this.persist();
  }
  getContentUnit(id) {
    return this.contentUnits.get(id);
  }
  getContentUnitsByFile(filePath) {
    const ids = this.fileIndex.get(filePath) || [];
    return ids.map((id) => this.contentUnits.get(id)).filter(Boolean);
  }
  getAllContentUnits() {
    return Array.from(this.contentUnits.values());
  }
  async deleteContentUnit(id) {
    const unit = this.contentUnits.get(id);
    if (unit) {
      this.contentUnits.delete(id);
      const fileUnits = this.fileIndex.get(unit.source.file);
      if (fileUnits) {
        const index = fileUnits.indexOf(id);
        if (index > -1) {
          fileUnits.splice(index, 1);
        }
      }
      await this.persist();
    }
  }
  async persist() {
    try {
      const contentPath = `${this.dataFolder}/content-units.json`;
      const units = Array.from(this.contentUnits.values());
      const data = JSON.stringify(units, null, 2);
      await this.app.vault.adapter.write(contentPath, data);
      const indexPath = `${this.dataFolder}/indexes/file-index.json`;
      const indexData = JSON.stringify(
        Object.fromEntries(this.fileIndex),
        null,
        2
      );
      await this.app.vault.adapter.write(indexPath, indexData);
    } catch (error) {
      console.error("Error persisting data:", error);
    }
  }
};

// src/core/ExtractionEngine.ts
var import_obsidian8 = require("obsidian");
var ExtractionEngine = class {
  constructor(app, dataManager) {
    this.app = app;
    this.dataManager = dataManager;
  }
  /**
   * 扫描单个文件
   */
  async scanFile(file) {
    try {
      const content = await this.app.vault.read(file);
      const units = this.extractHighlights(file, content);
      if (units.length > 0) {
        await this.dataManager.saveContentUnits(units);
        new import_obsidian8.Notice(`Extracted ${units.length} highlights from ${file.name}`);
      } else {
        new import_obsidian8.Notice(`No highlights found in ${file.name}`);
      }
      return units.length;
    } catch (error) {
      console.error("Error scanning file:", error);
      new import_obsidian8.Notice(`Error scanning file: ${error.message}`);
      return 0;
    }
  }
  /**
   * 扫描整个 Vault
   */
  async scanVault() {
    const files = this.app.vault.getMarkdownFiles();
    let scanned = 0;
    let extracted = 0;
    new import_obsidian8.Notice(`Scanning ${files.length} files...`);
    for (const file of files) {
      const count = await this.scanFile(file);
      scanned++;
      extracted += count;
    }
    new import_obsidian8.Notice(`Scan complete! Extracted ${extracted} items from ${scanned} files.`);
    return { scanned, extracted };
  }
  /**
   * 提取高亮内容
   */
  extractHighlights(file, content) {
    const units = [];
    const highlightRegex = /==(.+?)==/g;
    let match;
    while ((match = highlightRegex.exec(content)) !== null) {
      const extractedText = match[1];
      const position = this.calculatePosition(content, match.index);
      const fullSentence = this.extractFullSentence(content, match.index, match[0].length);
      const unit = {
        id: this.generateId(),
        type: "highlight",
        content: extractedText.trim(),
        fullContext: fullSentence,
        source: {
          file: file.path,
          position: {
            start: match.index,
            end: match.index + match[0].length,
            line: position.line
          },
          heading: this.findHeading(content, match.index),
          anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
        },
        extractRule: {
          ruleId: "highlight",
          ruleName: "Highlight",
          extractedBy: "auto"
        },
        metadata: {
          createdAt: Date.now(),
          updatedAt: Date.now(),
          tags: this.extractTags(content, match.index)
        },
        flashcardIds: []
      };
      units.push(unit);
    }
    return units;
  }
  /**
   * 提取包含高亮的完整句子
   */
  extractFullSentence(content, highlightStart, highlightLength) {
    const sentenceEnds = /[.!?。！？\n]/;
    let start = highlightStart;
    while (start > 0) {
      const char = content[start - 1];
      if (sentenceEnds.test(char)) {
        break;
      }
      start--;
    }
    let end = highlightStart + highlightLength;
    while (end < content.length) {
      const char = content[end];
      if (sentenceEnds.test(char)) {
        end++;
        break;
      }
      end++;
    }
    return content.substring(start, end).trim();
  }
  /**
   * 计算文本位置
   */
  calculatePosition(content, offset) {
    const lines = content.substring(0, offset).split("\n");
    return {
      line: lines.length - 1,
      column: lines[lines.length - 1].length
    };
  }
  /**
   * 查找所在标题
   */
  findHeading(content, position) {
    const beforeContent = content.substring(0, position);
    const headings = beforeContent.match(/^#{1,6} .+$/gm);
    return headings ? headings[headings.length - 1] : void 0;
  }
  /**
   * 提取附近的标签
   */
  extractTags(content, position) {
    const tags = /* @__PURE__ */ new Set();
    const yamlMatch = content.match(/^---\n([\s\S]*?)\n---/);
    if (yamlMatch) {
      const yamlContent = yamlMatch[1];
      const tagsMatch = yamlContent.match(/^tags:\s*(.+)$/m);
      if (tagsMatch) {
        const tagContent = tagsMatch[1].trim();
        if (tagContent.startsWith("[")) {
          const arrayTags = tagContent.match(/[\w/-]+/g);
          arrayTags == null ? void 0 : arrayTags.forEach((tag) => tags.add(`#${tag}`));
        } else {
          tagContent.split(",").forEach((tag) => {
            const cleaned = tag.trim();
            if (cleaned)
              tags.add(`#${cleaned}`);
          });
        }
      }
    }
    const lines = content.substring(0, position).split("\n");
    const currentLine = lines.length - 1;
    const lineContent = content.split("\n")[currentLine] || "";
    const inlineTagRegex = /#[\w/-]+/g;
    const inlineTags = lineContent.match(inlineTagRegex);
    inlineTags == null ? void 0 : inlineTags.forEach((tag) => tags.add(tag));
    return Array.from(tags);
  }
  /**
   * 生成唯一 ID
   */
  generateId() {
    return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
  }
  /**
   * 生成 Block ID
   */
  generateBlockId() {
    return `extract-${Date.now()}-${Math.random().toString(36).substr(2, 6)}`;
  }
};

// src/core/AnnotationManager.ts
var AnnotationManager = class {
  constructor(app, plugin) {
    this.app = app;
    this.plugin = plugin;
    this.annotations = /* @__PURE__ */ new Map();
    this.dataFolder = `${this.app.vault.configDir}/plugins/learning-system/data`;
  }
  async initialize() {
    await this.loadAnnotations();
  }
  /**
   * 加载所有批注
   */
  async loadAnnotations() {
    try {
      const path = `${this.dataFolder}/annotations.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(path)) {
        const data = await adapter.read(path);
        const annotations = JSON.parse(data);
        for (const annotation of annotations) {
          this.annotations.set(annotation.id, annotation);
        }
      }
    } catch (error) {
      console.error("Error loading annotations:", error);
    }
  }
  /**
   * 添加内容批注
   */
  async addContentAnnotation(contentUnitId, content, badge) {
    const annotation = {
      id: this.generateId(),
      targetType: "content",
      targetId: contentUnitId,
      content,
      badge,
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.annotations.set(annotation.id, annotation);
    await this.persist();
    const contentUnit = this.plugin.dataManager.getContentUnit(contentUnitId);
    if (contentUnit) {
      contentUnit.annotationId = annotation.id;
      contentUnit.metadata.updatedAt = Date.now();
      await this.plugin.dataManager.saveContentUnit(contentUnit);
    }
    return annotation;
  }
  /**
   * 添加文件批注
   */
  async addFileAnnotation(filePath, content) {
    const annotation = {
      id: this.generateId(),
      targetType: "file",
      targetId: filePath,
      content,
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.annotations.set(annotation.id, annotation);
    await this.persist();
    return annotation;
  }
  /**
   * 获取批注
   */
  getAnnotation(id) {
    return this.annotations.get(id);
  }
  /**
   * 获取内容的批注
   */
  getContentAnnotation(contentUnitId) {
    const contentUnit = this.plugin.dataManager.getContentUnit(contentUnitId);
    if (!(contentUnit == null ? void 0 : contentUnit.annotationId))
      return void 0;
    return this.annotations.get(contentUnit.annotationId);
  }
  /**
   * 获取文件的所有批注
   */
  getFileAnnotations(filePath) {
    return Array.from(this.annotations.values()).filter(
      (ann) => ann.targetType === "file" && ann.targetId === filePath
    );
  }
  /**
   * 更新批注
   */
  async updateAnnotation(id, updates) {
    const annotation = this.annotations.get(id);
    if (!annotation)
      return;
    Object.assign(annotation, updates, {
      metadata: {
        ...annotation.metadata,
        updatedAt: Date.now()
      }
    });
    await this.persist();
  }
  /**
   * 删除批注
   */
  async deleteAnnotation(id) {
    const annotation = this.annotations.get(id);
    if (!annotation)
      return;
    if (annotation.targetType === "content") {
      const contentUnit = this.plugin.dataManager.getContentUnit(annotation.targetId);
      if (contentUnit) {
        contentUnit.annotationId = void 0;
        await this.plugin.dataManager.saveContentUnit(contentUnit);
      }
    }
    this.annotations.delete(id);
    await this.persist();
  }
  /**
   * 获取所有批注
   */
  getAllAnnotations() {
    return Array.from(this.annotations.values());
  }
  /**
   * 持久化
   */
  async persist() {
    try {
      const path = `${this.dataFolder}/annotations.json`;
      const annotations = Array.from(this.annotations.values());
      const data = JSON.stringify(annotations, null, 2);
      await this.app.vault.adapter.write(path, data);
    } catch (error) {
      console.error("Error persisting annotations:", error);
    }
  }
  /**
   * 生成唯一 ID
   */
  generateId() {
    return `ann-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
  }
};

// src/core/FlashcardManager.ts
var FlashcardManager = class {
  constructor(app, plugin) {
    this.app = app;
    this.plugin = plugin;
    this.flashcards = /* @__PURE__ */ new Map();
    this.reviewLogs = [];
    this.dataFolder = `${this.app.vault.configDir}/plugins/learning-system/data`;
  }
  async initialize() {
    await this.loadFlashcards();
    await this.loadReviewLogs();
  }
  async loadFlashcards() {
    try {
      const path = `${this.dataFolder}/flashcards.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(path)) {
        const data = await adapter.read(path);
        const flashcards = JSON.parse(data);
        for (const card of flashcards) {
          this.flashcards.set(card.id, card);
        }
      }
    } catch (error) {
      console.error("Error loading flashcards:", error);
    }
  }
  async loadReviewLogs() {
    try {
      const path = `${this.dataFolder}/review-logs.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(path)) {
        const data = await adapter.read(path);
        this.reviewLogs = JSON.parse(data);
      }
    } catch (error) {
      console.error("Error loading review logs:", error);
    }
  }
  /**
   * 创建问答卡
   */
  async createQACard(contentUnitId, question, answer, deck) {
    const contentUnit = this.plugin.dataManager.getContentUnit(contentUnitId);
    if (!contentUnit)
      throw new Error("Content unit not found");
    const card = {
      id: this.generateId(),
      type: "qa",
      sourceContentId: contentUnitId,
      sourceFile: contentUnit.source.file,
      anchorLink: contentUnit.source.anchorLink,
      front: question,
      back: answer,
      deck: deck || this.inferDeck(contentUnit.source.file),
      tags: contentUnit.metadata.tags,
      scheduling: this.initializeScheduling(),
      stats: {
        totalReviews: 0,
        correctCount: 0,
        averageTime: 0,
        difficulty: 0.5
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.flashcards.set(card.id, card);
    contentUnit.flashcardIds.push(card.id);
    await this.plugin.dataManager.saveContentUnit(contentUnit);
    await this.persistFlashcards();
    return card;
  }
  /**
   * 创建完形填空卡
   */
  async createClozeCard(contentUnitId, original, deletions) {
    const contentUnit = this.plugin.dataManager.getContentUnit(contentUnitId);
    if (!contentUnit)
      throw new Error("Content unit not found");
    const front = this.generateClozeText(original, deletions);
    const back = deletions.map((d) => d.answer);
    const card = {
      id: this.generateId(),
      type: "cloze",
      sourceContentId: contentUnitId,
      sourceFile: contentUnit.source.file,
      anchorLink: contentUnit.source.anchorLink,
      front,
      back,
      cloze: {
        original,
        deletions
      },
      deck: this.inferDeck(contentUnit.source.file),
      tags: contentUnit.metadata.tags,
      scheduling: this.initializeScheduling(),
      stats: {
        totalReviews: 0,
        correctCount: 0,
        averageTime: 0,
        difficulty: 0.5
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.flashcards.set(card.id, card);
    contentUnit.flashcardIds.push(card.id);
    await this.plugin.dataManager.saveContentUnit(contentUnit);
    await this.persistFlashcards();
    return card;
  }
  /**
   * 获取闪卡
   */
  getFlashcard(id) {
    return this.flashcards.get(id);
  }
  /**
   * 获取所有闪卡
   */
  getAllFlashcards() {
    return Array.from(this.flashcards.values());
  }
  /**
   * 获取今日待复习的卡片
   */
  getDueCards() {
    const now = Date.now();
    return Array.from(this.flashcards.values()).filter((card) => card.scheduling.due <= now).sort((a, b) => {
      const aPriority = this.getCardPriority(a);
      const bPriority = this.getCardPriority(b);
      return bPriority - aPriority;
    });
  }
  /**
   * 获取新卡片
   */
  getNewCards() {
    return Array.from(this.flashcards.values()).filter((card) => card.scheduling.state === "new");
  }
  /**
   * 更新卡片（复习后）
   */
  async updateCard(card) {
    this.flashcards.set(card.id, card);
    await this.persistFlashcards();
  }
  /**
   * 删除卡片
   */
  async deleteCard(id) {
    const card = this.flashcards.get(id);
    if (!card)
      return;
    const contentUnit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
    if (contentUnit) {
      const index = contentUnit.flashcardIds.indexOf(id);
      if (index > -1) {
        contentUnit.flashcardIds.splice(index, 1);
        await this.plugin.dataManager.saveContentUnit(contentUnit);
      }
    }
    this.flashcards.delete(id);
    await this.persistFlashcards();
  }
  /**
   * 记录复习日志
   */
  async logReview(log) {
    this.reviewLogs.push(log);
    if (this.reviewLogs.length > 1e3) {
      this.reviewLogs = this.reviewLogs.slice(-1e3);
    }
    await this.persistReviewLogs();
  }
  /**
   * 获取卡片的复习历史
   */
  getCardReviewHistory(cardId) {
    return this.reviewLogs.filter((log) => log.flashcardId === cardId);
  }
  /**
   * 初始化调度参数
   */
  initializeScheduling() {
    return {
      interval: 0,
      ease: 2.5,
      due: Date.now(),
      lapses: 0,
      reps: 0,
      state: "new"
    };
  }
  /**
   * 生成完形填空文本
   */
  generateClozeText(original, deletions) {
    let result = original;
    const sorted = [...deletions].sort((a, b) => b.index - a.index);
    for (const deletion of sorted) {
      const before = result.substring(0, deletion.index);
      const after = result.substring(deletion.index + deletion.answer.length);
      result = `${before}[...]${after}`;
    }
    return result;
  }
  /**
   * 推断卡组名称
   */
  inferDeck(filePath) {
    const parts = filePath.split("/");
    return parts.length > 1 ? parts[parts.length - 2] : "Default";
  }
  /**
   * 获取卡片优先级
   */
  getCardPriority(card) {
    const now = Date.now();
    const overdue = Math.max(0, now - card.scheduling.due);
    const daysOverdue = overdue / (24 * 60 * 60 * 1e3);
    if (card.scheduling.state === "new")
      return 100 + daysOverdue;
    if (card.scheduling.state === "relearning")
      return 200 + daysOverdue;
    return daysOverdue;
  }
  /**
   * 持久化闪卡
   */
  async persistFlashcards() {
    try {
      const path = `${this.dataFolder}/flashcards.json`;
      const flashcards = Array.from(this.flashcards.values());
      const data = JSON.stringify(flashcards, null, 2);
      await this.app.vault.adapter.write(path, data);
    } catch (error) {
      console.error("Error persisting flashcards:", error);
    }
  }
  /**
   * 持久化复习日志
   */
  async persistReviewLogs() {
    try {
      const path = `${this.dataFolder}/review-logs.json`;
      const data = JSON.stringify(this.reviewLogs, null, 2);
      await this.app.vault.adapter.write(path, data);
    } catch (error) {
      console.error("Error persisting review logs:", error);
    }
  }
  /**
   * 生成唯一 ID
   */
  generateId() {
    return `card-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
  }
  /**
   * 获取统计数据
   */
  getStats() {
    const all = this.getAllFlashcards();
    const due = this.getDueCards();
    const newCards = this.getNewCards();
    const today = new Date().setHours(0, 0, 0, 0);
    const reviewedToday = this.reviewLogs.filter(
      (log) => log.timestamp >= today
    ).length;
    return {
      total: all.length,
      new: newCards.length,
      due: due.length,
      reviewedToday,
      totalReviews: this.reviewLogs.length
    };
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  extractionEnabled: true,
  autoScan: false,
  defaultDeck: "Default"
};
var LearningSystemPlugin = class extends import_obsidian10.Plugin {
  async onload() {
    console.log("Loading Learning System Plugin");
    await this.loadSettings();
    this.dataManager = new DataManager(this.app, this);
    await this.dataManager.initialize();
    this.annotationManager = new AnnotationManager(this.app, this);
    await this.annotationManager.initialize();
    this.flashcardManager = new FlashcardManager(this.app, this);
    await this.flashcardManager.initialize();
    this.extractionEngine = new ExtractionEngine(
      this.app,
      this.dataManager
    );
    this.registerView(
      VIEW_TYPE_OVERVIEW,
      (leaf) => new OverviewView(leaf, this)
    );
    this.registerView(
      VIEW_TYPE_SIDEBAR_OVERVIEW,
      (leaf) => new SidebarOverviewView(leaf, this, false)
    );
    this.registerView(
      VIEW_TYPE_MAIN_OVERVIEW,
      (leaf) => new SidebarOverviewView(leaf, this, true)
    );
    this.registerView(
      VIEW_TYPE_REVIEW,
      (leaf) => new ReviewView(leaf, this)
    );
    this.registerView(
      VIEW_TYPE_STATS,
      (leaf) => new StatsView(leaf, this)
    );
    this.addSettingTab(new SettingsTab(this.app, this));
    this.addCommands();
    this.addRibbonIcon("layout-list", "Open Learning Overview", () => {
      this.activateSidebarOverview();
    });
    this.addRibbonIcon("layers", "Start Review", () => {
      this.activateReview();
    });
    this.setupStatusBar();
    console.log("Learning System Plugin loaded");
  }
  onunload() {
    console.log("Unloading Learning System Plugin");
    const styleEl = document.getElementById("learning-overview-styles");
    if (styleEl) {
      styleEl.remove();
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  addCommands() {
    this.addCommand({
      id: "scan-current-file",
      name: "Scan current file for content",
      callback: async () => {
        const activeFile = this.app.workspace.getActiveFile();
        if (!activeFile)
          return;
        await this.extractionEngine.scanFile(activeFile);
        this.refreshOverview();
      }
    });
    this.addCommand({
      id: "scan-vault",
      name: "Scan entire vault",
      callback: async () => {
        await this.extractionEngine.scanVault();
        this.refreshOverview();
      }
    });
    this.addCommand({
      id: "open-overview",
      name: "Open Learning Overview",
      callback: () => {
        this.activateSidebarOverview();
      }
    });
    this.addCommand({
      id: "open-main-overview",
      name: "Open Learning Overview (Main View)",
      callback: async () => {
        await this.activateMainView();
      }
    });
    this.addCommand({
      id: "add-file-annotation",
      name: "Add file annotation",
      callback: async () => {
        const activeFile = this.app.workspace.getActiveFile();
        if (!activeFile)
          return;
        const { FileAnnotationModal: FileAnnotationModal2 } = await Promise.resolve().then(() => (init_AnnotationModal(), AnnotationModal_exports));
        const modal = new FileAnnotationModal2(
          this.app,
          this,
          activeFile.path,
          () => this.refreshOverview()
        );
        modal.open();
      }
    });
    this.addCommand({
      id: "start-review",
      name: "Start flashcard review",
      callback: () => {
        this.activateReview();
      }
    });
    this.addCommand({
      id: "show-stats",
      name: "Show flashcard statistics",
      callback: () => {
        this.activateStats();
      }
    });
  }
  async activateMainView() {
    console.log("[Plugin] activateMainView - START");
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType(VIEW_TYPE_MAIN_OVERVIEW)[0];
    console.log("[Plugin] activateMainView - existing leaf:", leaf ? leaf.id : "none");
    if (!leaf) {
      leaf = workspace.getLeaf("tab");
      console.log("[Plugin] activateMainView - creating new leaf:", leaf.id);
      await leaf.setViewState({
        type: VIEW_TYPE_MAIN_OVERVIEW,
        active: true
      });
    }
    workspace.revealLeaf(leaf);
    console.log("[Plugin] activateMainView - END");
  }
  async activateSidebarOverview() {
    console.log("[Plugin] activateSidebarOverview - START");
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_SIDEBAR_OVERVIEW);
    console.log("[Plugin] activateSidebarOverview - existing leaves count:", leaves.length);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getRightLeaf(false);
      console.log("[Plugin] activateSidebarOverview - creating new leaf:", leaf.id);
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_SIDEBAR_OVERVIEW,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
    console.log("[Plugin] activateSidebarOverview - END");
  }
  async activateOverview() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_OVERVIEW);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getLeaf(`tab`);
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_OVERVIEW,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async activateReview() {
    const stats = this.flashcardManager.getStats();
    if (stats.due === 0) {
      new import_obsidian10.Notice("No cards due for review!");
      return;
    }
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_REVIEW);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getLeaf(true);
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_REVIEW,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async activateStats() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_STATS);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getLeaf("tab");
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_STATS,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  refreshOverview() {
    console.log("[Plugin] refreshOverview - START");
    const overviewLeaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_OVERVIEW);
    console.log("[Plugin] refreshOverview - VIEW_TYPE_OVERVIEW leaves:", overviewLeaves.length);
    overviewLeaves.forEach((leaf) => {
      const view = leaf.view;
      view.refresh();
    });
    const sidebarLeaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_SIDEBAR_OVERVIEW);
    console.log("[Plugin] refreshOverview - VIEW_TYPE_SIDEBAR_OVERVIEW leaves:", sidebarLeaves.length);
    sidebarLeaves.forEach((leaf) => {
      const view = leaf.view;
      view.refresh();
    });
    const mainLeaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_MAIN_OVERVIEW);
    console.log("[Plugin] refreshOverview - VIEW_TYPE_MAIN_OVERVIEW leaves:", mainLeaves.length);
    mainLeaves.forEach((leaf) => {
      const view = leaf.view;
      view.refresh();
    });
    console.log("[Plugin] refreshOverview - END");
  }
  setupStatusBar() {
    const statusBarItem = this.addStatusBarItem();
    statusBarItem.addClass("learning-system-status");
    const updateStatus = () => {
      const stats = this.flashcardManager.getStats();
      statusBarItem.setText(`\u{1F0CF} ${stats.due} due`);
      statusBarItem.title = `${stats.due} cards due for review
${stats.new} new cards`;
    };
    updateStatus();
    this.registerInterval(
      window.setInterval(updateStatus, 6e4)
    );
    statusBarItem.addEventListener("click", () => {
      this.activateReview();
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL2NvcmUvUXVpY2tGbGFzaGNhcmRDcmVhdG9yLnRzIiwgInNyYy91aS9GbGFzaGNhcmRDcmVhdGVNb2RhbC50cyIsICJzcmMvdWkvT3ZlcnZpZXdWaWV3LnRzIiwgInNyYy91aS9Bbm5vdGF0aW9uTW9kYWwudHMiLCAic3JjL21haW4udHMiLCAic3JjL3VpL1NldHRpbmdzVGFiLnRzIiwgInNyYy91aS9TaWRlYmFyT3ZlcnZpZXdWaWV3LnRzIiwgInNyYy91aS9SZXZpZXdWaWV3LnRzIiwgInNyYy9jb3JlL0NhcmRTY2hlZHVsZXIudHMiLCAic3JjL3VpL1N0YXRzVmlldy50cyIsICJzcmMvY29yZS9BbmFseXRpY3NFbmdpbmUudHMiLCAic3JjL2NvcmUvRGF0YU1hbmFnZXIudHMiLCAic3JjL2NvcmUvRXh0cmFjdGlvbkVuZ2luZS50cyIsICJzcmMvY29yZS9Bbm5vdGF0aW9uTWFuYWdlci50cyIsICJzcmMvY29yZS9GbGFzaGNhcmRNYW5hZ2VyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IENvbnRlbnRVbml0IH0gZnJvbSAnLi4vY29yZS9EYXRhTWFuYWdlcic7XG5pbXBvcnQgeyBBbm5vdGF0aW9uIH0gZnJvbSAnLi4vY29yZS9Bbm5vdGF0aW9uTWFuYWdlcic7XG5cbi8qKlxuICogXHU0RTAwXHU5NTJFXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXHU1REU1XHU1MTc3XHU3QzdCXG4gKi9cbmV4cG9ydCBjbGFzcyBRdWlja0ZsYXNoY2FyZENyZWF0b3Ige1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4pIHt9XG5cbiAgLyoqXG4gICAqIFx1NEVDRVx1NjNEMFx1NTNENlx1NTE4NVx1NUJCOVx1NEUwMFx1OTUyRVx1NTIxQlx1NUVGQVx1OTVFRVx1N0I1NFx1NTM2MVxuICAgKiBcdTU5ODJcdTY3OUNcdTY3MDlcdTYyNzlcdTZDRThcdUZGMENcdTRGN0ZcdTc1MjhcdTYyNzlcdTZDRThcdTRGNUNcdTRFM0FcdTdCNTRcdTY4NDhcbiAgICovXG4gIGFzeW5jIGNyZWF0ZVF1aWNrUUFDYXJkKGNvbnRlbnRVbml0OiBDb250ZW50VW5pdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24oY29udGVudFVuaXQuaWQpO1xuICAgICAgXG4gICAgICBsZXQgcXVlc3Rpb246IHN0cmluZztcbiAgICAgIGxldCBhbnN3ZXI6IHN0cmluZztcblxuICAgICAgaWYgKGFubm90YXRpb24gJiYgYW5ub3RhdGlvbi5jb250ZW50KSB7XG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1NjI3OVx1NkNFOFx1RkYwQ1x1NEY3Rlx1NzUyOFx1NjI3OVx1NkNFOFx1NTE4NVx1NUJCOVx1NEY1Q1x1NEUzQVx1N0I1NFx1Njg0OFxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTYyNzlcdTZDRThcdTY2MkZcdTU0MjZcdTY2MkZcdTk1RUVcdTk4OThcdTVGNjJcdTVGMEZcbiAgICAgICAgaWYgKHRoaXMuaXNRdWVzdGlvbihhbm5vdGF0aW9uLmNvbnRlbnQpKSB7XG4gICAgICAgICAgLy8gXHU2Mjc5XHU2Q0U4XHU2NjJGXHU5NUVFXHU5ODk4XHVGRjBDXHU3NTFGXHU2MjEwXHU5RUQ4XHU4QkE0XHU5NUVFXHU5ODk4XHVGRjBDXHU2Mjc5XHU2Q0U4XHU1MTg1XHU1QkI5XHU0RjVDXHU0RTNBXHU3QjU0XHU2ODQ4XG4gICAgICAgICAgcXVlc3Rpb24gPSB0aGlzLmdlbmVyYXRlRGVmYXVsdFF1ZXN0aW9uKGNvbnRlbnRVbml0KTtcbiAgICAgICAgICBhbnN3ZXIgPSBhbm5vdGF0aW9uLmNvbnRlbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gXHU2Mjc5XHU2Q0U4XHU0RTBEXHU2NjJGXHU5NUVFXHU5ODk4XHU1RjYyXHU1RjBGXHVGRjBDXHU3NTFGXHU2MjEwXHU5RUQ4XHU4QkE0XHU5NUVFXHU5ODk4XHVGRjBDXHU2Mjc5XHU2Q0U4XHU1MTg1XHU1QkI5XHU0RjVDXHU0RTNBXHU3QjU0XHU2ODQ4XG4gICAgICAgICAgcXVlc3Rpb24gPSB0aGlzLmdlbmVyYXRlRGVmYXVsdFF1ZXN0aW9uKGNvbnRlbnRVbml0KTtcbiAgICAgICAgICBhbnN3ZXIgPSBhbm5vdGF0aW9uLmNvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1NkNBMVx1NjcwOVx1NjI3OVx1NkNFOFx1RkYwQ1x1NEY3Rlx1NzUyOFx1OUVEOFx1OEJBNFx1NkEyMVx1NUYwRlxuICAgICAgICBxdWVzdGlvbiA9IHRoaXMuZ2VuZXJhdGVEZWZhdWx0UXVlc3Rpb24oY29udGVudFVuaXQpO1xuICAgICAgICBhbnN3ZXIgPSBjb250ZW50VW5pdC5jb250ZW50O1xuICAgICAgfVxuXG4gICAgICAvLyBcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcbiAgICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmNyZWF0ZVFBQ2FyZChcbiAgICAgICAgY29udGVudFVuaXQuaWQsXG4gICAgICAgIHF1ZXN0aW9uLFxuICAgICAgICBhbnN3ZXJcbiAgICAgICk7XG5cbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBGbGFzaGNhcmQgY3JlYXRlZCEgKFEmQSlgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgcXVpY2sgZmxhc2hjYXJkOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBGYWlsZWQgdG8gY3JlYXRlIGZsYXNoY2FyZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTRFQ0VcdTYzRDBcdTUzRDZcdTUxODVcdTVCQjlcdTRFMDBcdTk1MkVcdTUyMUJcdTVFRkFcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdTUzNjFcbiAgICogXHU4MUVBXHU1MkE4XHU4QkM2XHU1MjJCXHU1MTczXHU5NTJFXHU4QkNEXG4gICAqL1xuICBhc3luYyBjcmVhdGVRdWlja0Nsb3plQ2FyZChjb250ZW50VW5pdDogQ29udGVudFVuaXQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qga2V5d29yZHMgPSB0aGlzLmV4dHJhY3RLZXl3b3Jkcyhjb250ZW50VW5pdC5jb250ZW50KTtcbiAgICAgIFxuICAgICAgaWYgKGtleXdvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgTm8ga2V5d29yZHMgZm91bmQgZm9yIGNsb3plIGRlbGV0aW9uJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gXHU2MjdFXHU1MjMwXHU1MTczXHU5NTJFXHU4QkNEXHU1NzI4XHU2NTg3XHU2NzJDXHU0RTJEXHU3Njg0XHU0RjREXHU3RjZFXG4gICAgICBjb25zdCBkZWxldGlvbnMgPSBrZXl3b3Jkcy5tYXAoa2V5d29yZCA9PiB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gY29udGVudFVuaXQuY29udGVudC5pbmRleE9mKGtleXdvcmQud29yZCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgYW5zd2VyOiBrZXl3b3JkLndvcmRcbiAgICAgICAgfTtcbiAgICAgIH0pLmZpbHRlcihkID0+IGQuaW5kZXggIT09IC0xKTtcblxuICAgICAgaWYgKGRlbGV0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIENvdWxkIG5vdCBjcmVhdGUgY2xvemUgZGVsZXRpb25zJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gXHU1MjFCXHU1RUZBXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU1MzYxXG4gICAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5jcmVhdGVDbG96ZUNhcmQoXG4gICAgICAgIGNvbnRlbnRVbml0LmlkLFxuICAgICAgICBjb250ZW50VW5pdC5jb250ZW50LFxuICAgICAgICBkZWxldGlvbnNcbiAgICAgICk7XG5cbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBGbGFzaGNhcmQgY3JlYXRlZCEgKENsb3plIHdpdGggJHtkZWxldGlvbnMubGVuZ3RofSBibGFua3MpYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHF1aWNrIGNsb3plIGNhcmQ6JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIEZhaWxlZCB0byBjcmVhdGUgZmxhc2hjYXJkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NjY3QVx1ODBGRFx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1RkYwOFx1ODFFQVx1NTJBOFx1NTIyNFx1NjVBRFx1N0M3Qlx1NTc4Qlx1RkYwOVxuICAgKi9cbiAgYXN5bmMgY3JlYXRlU21hcnRDYXJkKGNvbnRlbnRVbml0OiBDb250ZW50VW5pdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbihjb250ZW50VW5pdC5pZCk7XG5cbiAgICAvLyBcdTU5ODJcdTY3OUNcdTY3MDlcdTk1RUVcdTk4OThcdTVGNjJcdTVGMEZcdTc2ODRcdTYyNzlcdTZDRThcdUZGMENcdTUyMUJcdTVFRkFcdTk1RUVcdTdCNTRcdTUzNjFcbiAgICBpZiAoYW5ub3RhdGlvbiAmJiB0aGlzLmlzUXVlc3Rpb24oYW5ub3RhdGlvbi5jb250ZW50KSkge1xuICAgICAgYXdhaXQgdGhpcy5jcmVhdGVRdWlja1FBQ2FyZChjb250ZW50VW5pdCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU1MTg1XHU1QkI5XHU4RjgzXHU3N0VEXHU0RTE0XHU1MzA1XHU1NDJCXHU1MTczXHU5NTJFXHU0RkUxXHU2MDZGXHVGRjBDXHU1MjFCXHU1RUZBXHU5NUVFXHU3QjU0XHU1MzYxXG4gICAgaWYgKGNvbnRlbnRVbml0LmNvbnRlbnQubGVuZ3RoIDwgMjAwKSB7XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZVF1aWNrUUFDYXJkKGNvbnRlbnRVbml0KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBcdTU5ODJcdTY3OUNcdTUxODVcdTVCQjlcdThGODNcdTk1N0ZcdUZGMENcdTUyMUJcdTVFRkFcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdTUzNjFcbiAgICBhd2FpdCB0aGlzLmNyZWF0ZVF1aWNrQ2xvemVDYXJkKGNvbnRlbnRVbml0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYyNzlcdTkxQ0ZcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcbiAgICovXG4gIGFzeW5jIGNyZWF0ZUJhdGNoQ2FyZHMoXG4gICAgY29udGVudFVuaXRzOiBDb250ZW50VW5pdFtdLFxuICAgIHR5cGU6ICdxYScgfCAnY2xvemUnIHwgJ3NtYXJ0JyA9ICdzbWFydCdcbiAgKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IG51bWJlcjsgZmFpbGVkOiBudW1iZXIgfT4ge1xuICAgIGxldCBzdWNjZXNzID0gMDtcbiAgICBsZXQgZmFpbGVkID0gMDtcblxuICAgIGZvciAoY29uc3QgdW5pdCBvZiBjb250ZW50VW5pdHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgIGNhc2UgJ3FhJzpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlUXVpY2tRQUNhcmQodW5pdCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdjbG96ZSc6XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZVF1aWNrQ2xvemVDYXJkKHVuaXQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnc21hcnQnOlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVTbWFydENhcmQodW5pdCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBzdWNjZXNzKys7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjYXJkOicsIGVycm9yKTtcbiAgICAgICAgZmFpbGVkKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzcywgZmFpbGVkIH07XG4gIH1cblxuICAvKipcbiAgICogXHU1MjI0XHU2NUFEXHU2NTg3XHU2NzJDXHU2NjJGXHU1NDI2XHU2NjJGXHU5NUVFXHU5ODk4XG4gICAqL1xuICBwcml2YXRlIGlzUXVlc3Rpb24odGV4dDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcXVlc3Rpb25Xb3JkcyA9IFsnd2hhdCcsICd3aHknLCAnaG93JywgJ3doZW4nLCAnd2hlcmUnLCAnd2hvJywgJ3doaWNoJ107XG4gICAgY29uc3QgbG93ZXJUZXh0ID0gdGV4dC50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICBcbiAgICAvLyBcdTRFRTVcdTk1RUVcdTUzRjdcdTdFRDNcdTVDM0VcbiAgICBpZiAobG93ZXJUZXh0LmVuZHNXaXRoKCc/JykpIHJldHVybiB0cnVlO1xuICAgIFxuICAgIC8vIFx1NEVFNVx1NzU5MVx1OTVFRVx1OEJDRFx1NUYwMFx1NTkzNFxuICAgIGZvciAoY29uc3Qgd29yZCBvZiBxdWVzdGlvbldvcmRzKSB7XG4gICAgICBpZiAobG93ZXJUZXh0LnN0YXJ0c1dpdGgod29yZCArICcgJykpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdTRFMkRcdTY1ODdcdTk1RUVcdTUzRTVcdTcyNzlcdTVGODFcbiAgICBpZiAodGV4dC5pbmNsdWRlcygnXHU0RUMwXHU0RTQ4JykgfHwgdGV4dC5pbmNsdWRlcygnXHU0RTNBXHU0RUMwXHU0RTQ4JykgfHwgXG4gICAgICAgIHRleHQuaW5jbHVkZXMoJ1x1NjAwRVx1NEU0OCcpIHx8IHRleHQuaW5jbHVkZXMoJ1x1NTk4Mlx1NEY1NScpIHx8XG4gICAgICAgIHRleHQuaW5jbHVkZXMoJ1x1NTQxN1x1RkYxRicpIHx8IHRleHQuaW5jbHVkZXMoJ1x1NTQ2Mlx1RkYxRicpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NzUxRlx1NjIxMFx1OUVEOFx1OEJBNFx1OTVFRVx1OTg5OFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZURlZmF1bHRRdWVzdGlvbihjb250ZW50VW5pdDogQ29udGVudFVuaXQpOiBzdHJpbmcge1xuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1NjgwN1x1OTg5OFx1RkYwQ1x1NEY3Rlx1NzUyOFx1NjgwN1x1OTg5OFx1NzUxRlx1NjIxMFx1OTVFRVx1OTg5OFxuICAgIGlmIChjb250ZW50VW5pdC5zb3VyY2UuaGVhZGluZykge1xuICAgICAgY29uc3QgaGVhZGluZyA9IGNvbnRlbnRVbml0LnNvdXJjZS5oZWFkaW5nLnJlcGxhY2UoL14jK1xccyovLCAnJyk7XG4gICAgICByZXR1cm4gYFdoYXQgaXMgdGhlIGtleSBwb2ludCBhYm91dCBcIiR7aGVhZGluZ31cIj9gO1xuICAgIH1cblxuICAgIC8vIFx1NjgzOVx1NjM2RVx1NTE4NVx1NUJCOVx1OTU3Rlx1NUVBNlx1NzUxRlx1NjIxMFx1NEUwRFx1NTQwQ1x1NzY4NFx1OTVFRVx1OTg5OFxuICAgIGlmIChjb250ZW50VW5pdC5jb250ZW50Lmxlbmd0aCA8IDUwKSB7XG4gICAgICByZXR1cm4gYFdoYXQgZG9lcyBcIiR7Y29udGVudFVuaXQuY29udGVudH1cIiBtZWFuP2A7XG4gICAgfSBlbHNlIGlmIChjb250ZW50VW5pdC5jb250ZW50Lmxlbmd0aCA8IDE1MCkge1xuICAgICAgY29uc3QgZmlyc3RXb3JkcyA9IGNvbnRlbnRVbml0LmNvbnRlbnQuc3Vic3RyaW5nKDAsIDMwKSArICcuLi4nO1xuICAgICAgcmV0dXJuIGBFeHBsYWluOiBcIiR7Zmlyc3RXb3Jkc31cImA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBgV2hhdCBhcmUgdGhlIGtleSBwb2ludHMgaW4gdGhpcyBjb250ZW50P2A7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NjNEMFx1NTNENlx1NTE3M1x1OTUyRVx1OEJDRFx1RkYwOFx1NzUyOFx1NEU4RVx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1RkYwOVxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0S2V5d29yZHModGV4dDogc3RyaW5nKTogQXJyYXk8eyB3b3JkOiBzdHJpbmc7IHNjb3JlOiBudW1iZXIgfT4ge1xuICAgIC8vIFx1NTIwNlx1OEJDRFxuICAgIGNvbnN0IHdvcmRzID0gdGV4dC5tYXRjaCgvXFxiW0EtWmEtel17Myx9XFxiL2cpIHx8IFtdO1xuICAgIFxuICAgIC8vIFx1NUUzOFx1ODlDMVx1NTA1Q1x1NzUyOFx1OEJDRFxuICAgIGNvbnN0IHN0b3BXb3JkcyA9IG5ldyBTZXQoW1xuICAgICAgJ3RoZScsICdpcycsICdhdCcsICd3aGljaCcsICdvbicsICdhJywgJ2FuJywgJ2FuZCcsICdvcicsICdidXQnLFxuICAgICAgJ2luJywgJ3dpdGgnLCAndG8nLCAnZm9yJywgJ29mJywgJ2FzJywgJ2J5JywgJ3RoaXMnLCAndGhhdCcsXG4gICAgICAnZnJvbScsICd0aGV5JywgJ3dlJywgJ3NheScsICdoZXInLCAnc2hlJywgJ2hlJywgJ3dpbGwnLCAnbXknLFxuICAgICAgJ29uZScsICdhbGwnLCAnd291bGQnLCAndGhlcmUnLCAndGhlaXInLCAnd2hhdCcsICdzbycsICd1cCcsICdvdXQnLFxuICAgICAgJ2lmJywgJ2Fib3V0JywgJ3dobycsICdnZXQnLCAnd2hpY2gnLCAnZ28nLCAnbWUnLCAnd2hlbicsICdtYWtlJyxcbiAgICAgICdjYW4nLCAnbGlrZScsICd0aW1lJywgJ25vJywgJ2p1c3QnLCAnaGltJywgJ2tub3cnLCAndGFrZScsICdwZW9wbGUnLFxuICAgICAgJ2ludG8nLCAneWVhcicsICd5b3VyJywgJ2dvb2QnLCAnc29tZScsICdjb3VsZCcsICd0aGVtJywgJ3NlZScsICdvdGhlcidcbiAgICBdKTtcblxuICAgIC8vIFx1OEJDRFx1OTg5MVx1N0VERlx1OEJBMVxuICAgIGNvbnN0IHdvcmRGcmVxID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcbiAgICB3b3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xuICAgICAgY29uc3QgbG93ZXIgPSB3b3JkLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoIXN0b3BXb3Jkcy5oYXMobG93ZXIpICYmIHdvcmQubGVuZ3RoID4gMykge1xuICAgICAgICB3b3JkRnJlcS5zZXQod29yZCwgKHdvcmRGcmVxLmdldCh3b3JkKSB8fCAwKSArIDEpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gXHU4QkExXHU3Qjk3XHU1MjA2XHU2NTcwXHVGRjA4XHU4MDAzXHU4NjUxXHU5ODkxXHU3Mzg3XHUzMDAxXHU5NTdGXHU1RUE2XHUzMDAxXHU1OTI3XHU1MTk5XHVGRjA5XG4gICAgY29uc3Qgc2NvcmVkID0gQXJyYXkuZnJvbSh3b3JkRnJlcS5lbnRyaWVzKCkpLm1hcCgoW3dvcmQsIGZyZXFdKSA9PiB7XG4gICAgICBsZXQgc2NvcmUgPSBmcmVxO1xuICAgICAgXG4gICAgICAvLyBcdTk1N0ZcdThCQ0RcdTUyQTBcdTUyMDZcbiAgICAgIGlmICh3b3JkLmxlbmd0aCA+IDgpIHNjb3JlICs9IDI7XG4gICAgICBlbHNlIGlmICh3b3JkLmxlbmd0aCA+IDYpIHNjb3JlICs9IDE7XG4gICAgICBcbiAgICAgIC8vIFx1OTk5Nlx1NUI1N1x1NkJDRFx1NTkyN1x1NTE5OVx1NTJBMFx1NTIwNlx1RkYwOFx1NTNFRlx1ODBGRFx1NjYyRlx1NEUxM1x1NjcwOVx1NTQwRFx1OEJDRFx1RkYwOVxuICAgICAgaWYgKHdvcmRbMF0gPT09IHdvcmRbMF0udG9VcHBlckNhc2UoKSkgc2NvcmUgKz0gMTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHsgd29yZCwgc2NvcmUgfTtcbiAgICB9KTtcblxuICAgIC8vIFx1NjM5Mlx1NUU4Rlx1NUU3Nlx1OEZENFx1NTZERVx1NTI0RDNcdTRFMkFcdTUxNzNcdTk1MkVcdThCQ0RcbiAgICByZXR1cm4gc2NvcmVkXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi5zY29yZSAtIGEuc2NvcmUpXG4gICAgICAuc2xpY2UoMCwgMyk7XG4gIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBDb250ZW50VW5pdCB9IGZyb20gJy4uL2NvcmUvRGF0YU1hbmFnZXInO1xuXG5leHBvcnQgY2xhc3MgRmxhc2hjYXJkQ3JlYXRlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgY29udGVudFVuaXQ6IENvbnRlbnRVbml0O1xuICBwcml2YXRlIGNhcmRUeXBlOiAncWEnIHwgJ2Nsb3plJyA9ICdxYSc7XG4gIFxuICAvLyBRJkEgXHU1QjU3XHU2QkI1XG4gIHByaXZhdGUgcXVlc3Rpb246IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIGFuc3dlcjogc3RyaW5nID0gJyc7XG4gIFxuICAvLyBDbG96ZSBcdTVCNTdcdTZCQjVcbiAgcHJpdmF0ZSBjbG96ZVRleHQ6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIHNlbGVjdGVkUmFuZ2VzOiB7IHN0YXJ0OiBudW1iZXI7IGVuZDogbnVtYmVyOyB0ZXh0OiBzdHJpbmcgfVtdID0gW107XG4gIFxuICBwcml2YXRlIG9uU2F2ZTogKCkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4sXG4gICAgY29udGVudFVuaXQ6IENvbnRlbnRVbml0LFxuICAgIG9uU2F2ZTogKCkgPT4gdm9pZFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMuY29udGVudFVuaXQgPSBjb250ZW50VW5pdDtcbiAgICB0aGlzLm9uU2F2ZSA9IG9uU2F2ZTtcbiAgICBcbiAgICAvLyBcdTlFRDhcdThCQTRcdTRGN0ZcdTc1MjhcdTUxODVcdTVCQjlcdTRGNUNcdTRFM0FcdTdCNTRcdTY4NDgvXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU2NTg3XHU2NzJDXG4gICAgdGhpcy5hbnN3ZXIgPSBjb250ZW50VW5pdC5jb250ZW50O1xuICAgIHRoaXMuY2xvemVUZXh0ID0gY29udGVudFVuaXQuY29udGVudDtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2ZsYXNoY2FyZC1jcmVhdGUtbW9kYWwnKTtcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQ3JlYXRlIEZsYXNoY2FyZCcgfSk7XG5cbiAgICAvLyBcdTY2M0VcdTc5M0FcdTZFOTBcdTUxODVcdTVCQjlcbiAgICBjb25zdCBjb250ZW50UHJldmlldyA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdjb250ZW50LXByZXZpZXcnIH0pO1xuICAgIGNvbnRlbnRQcmV2aWV3LmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1NvdXJjZSBDb250ZW50OicgfSk7XG4gICAgY29udGVudFByZXZpZXcuY3JlYXRlRWwoJ2Jsb2NrcXVvdGUnLCB7IHRleHQ6IHRoaXMuY29udGVudFVuaXQuY29udGVudCB9KTtcblxuICAgIC8vIFx1NTM2MVx1NzI0N1x1N0M3Qlx1NTc4Qlx1OTAwOVx1NjJFOVxuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5zZXROYW1lKCdDYXJkIFR5cGUnKVxuICAgICAgLnNldERlc2MoJ0Nob29zZSB0aGUgdHlwZSBvZiBmbGFzaGNhcmQnKVxuICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAuYWRkT3B0aW9uKCdxYScsICdcdUQ4M0RcdURDREQgUXVlc3Rpb24gJiBBbnN3ZXInKVxuICAgICAgICAgIC5hZGRPcHRpb24oJ2Nsb3plJywgJ1x1MjcwRlx1RkUwRiBDbG96ZSBEZWxldGlvbicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuY2FyZFR5cGUpXG4gICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2FyZFR5cGUgPSB2YWx1ZSBhcyAncWEnIHwgJ2Nsb3plJztcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaENhcmRJbnB1dHMoKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgLy8gXHU1MzYxXHU3MjQ3XHU4RjkzXHU1MTY1XHU1MzNBXHU1N0RGXHU1QkI5XHU1NjY4XG4gICAgdGhpcy5jYXJkSW5wdXRDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1pbnB1dC1jb250YWluZXInIH0pO1xuICAgIHRoaXMucmVmcmVzaENhcmRJbnB1dHMoKTtcblxuICAgIC8vIFx1NjMwOVx1OTRBRVxuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdtb2RhbC1idXR0b24tY29udGFpbmVyJyB9KTtcblxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KTtcbiAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuXG4gICAgY29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdDcmVhdGUgRmxhc2hjYXJkJyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgc2F2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc2F2ZUZsYXNoY2FyZCgpKTtcblxuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIGNhcmRJbnB1dENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSByZWZyZXNoQ2FyZElucHV0cygpIHtcbiAgICB0aGlzLmNhcmRJbnB1dENvbnRhaW5lci5lbXB0eSgpO1xuXG4gICAgaWYgKHRoaXMuY2FyZFR5cGUgPT09ICdxYScpIHtcbiAgICAgIHRoaXMucmVuZGVyUUFJbnB1dHMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW5kZXJDbG96ZUlucHV0cygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyUUFJbnB1dHMoKSB7XG4gICAgLy8gXHU5NUVFXHU5ODk4XHU4RjkzXHU1MTY1XG4gICAgbmV3IFNldHRpbmcodGhpcy5jYXJkSW5wdXRDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnUXVlc3Rpb24gKEZyb250KScpXG4gICAgICAuc2V0RGVzYygnV2hhdCBxdWVzdGlvbiBzaG91bGQgdGhpcyBjYXJkIGFzaz8nKVxuICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4ge1xuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciB5b3VyIHF1ZXN0aW9uLi4uJylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5xdWVzdGlvbilcbiAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5xdWVzdGlvbiA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB0ZXh0LmlucHV0RWwucm93cyA9IDM7XG4gICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgIH0pO1xuXG4gICAgLy8gXHU3QjU0XHU2ODQ4XHU4RjkzXHU1MTY1XG4gICAgbmV3IFNldHRpbmcodGhpcy5jYXJkSW5wdXRDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnQW5zd2VyIChCYWNrKScpXG4gICAgICAuc2V0RGVzYygnV2hhdCBpcyB0aGUgY29ycmVjdCBhbnN3ZXI/JylcbiAgICAgIC5hZGRUZXh0QXJlYSh0ZXh0ID0+IHtcbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgdGhlIGFuc3dlci4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuYW5zd2VyKVxuICAgICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFuc3dlciA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB0ZXh0LmlucHV0RWwucm93cyA9IDM7XG4gICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgIH0pO1xuXG4gICAgLy8gXHU2M0QwXHU3OTNBXHVGRjFBXHU1M0VGXHU0RUU1XHU0RjdGXHU3NTI4XHU1MzlGXHU1MTg1XHU1QkI5XG4gICAgY29uc3QgaGludCA9IHRoaXMuY2FyZElucHV0Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2lucHV0LWhpbnQnIH0pO1xuICAgIGhpbnQuY3JlYXRlRWwoJ3NtYWxsJywgeyBcbiAgICAgIHRleHQ6ICdcdUQ4M0RcdURDQTEgVGlwOiBZb3UgY2FuIHVzZSB0aGUgc291cmNlIGNvbnRlbnQgYXMgdGhlIGFuc3dlciwgb3Igd3JpdGUgeW91ciBvd24uJ1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJDbG96ZUlucHV0cygpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNhcmRJbnB1dENvbnRhaW5lcjtcblxuICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDbG96ZSBEZWxldGlvbicgfSk7XG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdTZWxlY3QgdGV4dCB0byBoaWRlIChjbG96ZSBkZWxldGlvbikuIENsaWNrIG9uIHdvcmRzIHRvIHRvZ2dsZSBzZWxlY3Rpb24uJyxcbiAgICAgIGNsczogJ2Nsb3plLWluc3RydWN0aW9uJ1xuICAgIH0pO1xuXG4gICAgLy8gXHU1M0VGXHU5MDA5XHU2MkU5XHU3Njg0XHU2NTg3XHU2NzJDXHU1MzNBXHU1N0RGXG4gICAgY29uc3QgdGV4dENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjbG96ZS10ZXh0LWNvbnRhaW5lcicgfSk7XG4gICAgdGhpcy5yZW5kZXJTZWxlY3RhYmxlVGV4dCh0ZXh0Q29udGFpbmVyKTtcblxuICAgIC8vIFx1OTAwOVx1NEUyRFx1NzY4NFx1NTIyMFx1OTY2NFx1OTg3OVx1NTIxN1x1ODg2OFxuICAgIGlmICh0aGlzLnNlbGVjdGVkUmFuZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkTGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzZWxlY3RlZC1kZWxldGlvbnMnIH0pO1xuICAgICAgc2VsZWN0ZWRMaXN0LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1NlbGVjdGVkIERlbGV0aW9uczonIH0pO1xuICAgICAgXG4gICAgICB0aGlzLnNlbGVjdGVkUmFuZ2VzLmZvckVhY2goKHJhbmdlLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBpdGVtID0gc2VsZWN0ZWRMaXN0LmNyZWF0ZURpdih7IGNsczogJ2RlbGV0aW9uLWl0ZW0nIH0pO1xuICAgICAgICBpdGVtLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHtpbmRleCArIDF9LiBgIH0pO1xuICAgICAgICBpdGVtLmNyZWF0ZVNwYW4oeyBcbiAgICAgICAgICB0ZXh0OiByYW5nZS50ZXh0LFxuICAgICAgICAgIGNsczogJ2RlbGV0aW9uLXRleHQnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVtb3ZlQnRuID0gaXRlbS5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgIHRleHQ6ICdcdTAwRDcnLFxuICAgICAgICAgIGNsczogJ3JlbW92ZS1kZWxldGlvbi1idG4nXG4gICAgICAgIH0pO1xuICAgICAgICByZW1vdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFJhbmdlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgIHRoaXMucmVmcmVzaENhcmRJbnB1dHMoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTk4ODRcdTg5QzhcbiAgICBjb25zdCBwcmV2aWV3ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2Nsb3plLXByZXZpZXcnIH0pO1xuICAgIHByZXZpZXcuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnUHJldmlldzonIH0pO1xuICAgIHByZXZpZXcuY3JlYXRlRGl2KHsgXG4gICAgICB0ZXh0OiB0aGlzLmdlbmVyYXRlQ2xvemVQcmV2aWV3KCksXG4gICAgICBjbHM6ICdwcmV2aWV3LXRleHQnXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclNlbGVjdGFibGVUZXh0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCB3b3JkcyA9IHRoaXMuY2xvemVUZXh0LnNwbGl0KC8oXFxzKykvKTsgLy8gXHU0RkREXHU3NTU5XHU3QTdBXHU2ODNDXG4gICAgbGV0IGN1cnJlbnRJbmRleCA9IDA7XG5cbiAgICB3b3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xuICAgICAgY29uc3Qgd29yZFN0YXJ0ID0gY3VycmVudEluZGV4O1xuICAgICAgY29uc3Qgd29yZEVuZCA9IGN1cnJlbnRJbmRleCArIHdvcmQubGVuZ3RoO1xuXG4gICAgICBpZiAod29yZC50cmltKCkpIHtcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU5MDA5XHU0RTJEXG4gICAgICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkUmFuZ2VzLnNvbWUoXG4gICAgICAgICAgcmFuZ2UgPT4gcmFuZ2Uuc3RhcnQgPT09IHdvcmRTdGFydCAmJiByYW5nZS5lbmQgPT09IHdvcmRFbmRcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBzcGFuID0gY29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgIHRleHQ6IHdvcmQsXG4gICAgICAgICAgY2xzOiBpc1NlbGVjdGVkID8gJ2Nsb3plLXdvcmQgc2VsZWN0ZWQnIDogJ2Nsb3plLXdvcmQnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNwYW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy50b2dnbGVXb3JkU2VsZWN0aW9uKHdvcmRTdGFydCwgd29yZEVuZCwgd29yZCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiB3b3JkIH0pO1xuICAgICAgfVxuXG4gICAgICBjdXJyZW50SW5kZXggPSB3b3JkRW5kO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB0b2dnbGVXb3JkU2VsZWN0aW9uKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCB0ZXh0OiBzdHJpbmcpIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuc2VsZWN0ZWRSYW5nZXMuZmluZEluZGV4KFxuICAgICAgcmFuZ2UgPT4gcmFuZ2Uuc3RhcnQgPT09IHN0YXJ0ICYmIHJhbmdlLmVuZCA9PT0gZW5kXG4gICAgKTtcblxuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAvLyBcdTUzRDZcdTZEODhcdTkwMDlcdTYyRTlcbiAgICAgIHRoaXMuc2VsZWN0ZWRSYW5nZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU2REZCXHU1MkEwXHU5MDA5XHU2MkU5XG4gICAgICB0aGlzLnNlbGVjdGVkUmFuZ2VzLnB1c2goeyBzdGFydCwgZW5kLCB0ZXh0IH0pO1xuICAgICAgLy8gXHU2MzA5XHU0RjREXHU3RjZFXHU2MzkyXHU1RThGXG4gICAgICB0aGlzLnNlbGVjdGVkUmFuZ2VzLnNvcnQoKGEsIGIpID0+IGEuc3RhcnQgLSBiLnN0YXJ0KTtcbiAgICB9XG5cbiAgICB0aGlzLnJlZnJlc2hDYXJkSW5wdXRzKCk7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlQ2xvemVQcmV2aWV3KCk6IHN0cmluZyB7XG4gICAgbGV0IHByZXZpZXcgPSB0aGlzLmNsb3plVGV4dDtcbiAgICBjb25zdCBzb3J0ZWQgPSBbLi4udGhpcy5zZWxlY3RlZFJhbmdlc10uc29ydCgoYSwgYikgPT4gYi5zdGFydCAtIGEuc3RhcnQpO1xuXG4gICAgZm9yIChjb25zdCByYW5nZSBvZiBzb3J0ZWQpIHtcbiAgICAgIGNvbnN0IGJlZm9yZSA9IHByZXZpZXcuc3Vic3RyaW5nKDAsIHJhbmdlLnN0YXJ0KTtcbiAgICAgIGNvbnN0IGFmdGVyID0gcHJldmlldy5zdWJzdHJpbmcocmFuZ2UuZW5kKTtcbiAgICAgIHByZXZpZXcgPSBgJHtiZWZvcmV9Wy4uLl0ke2FmdGVyfWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByZXZpZXc7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNhdmVGbGFzaGNhcmQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0aGlzLmNhcmRUeXBlID09PSAncWEnKSB7XG4gICAgICAgIC8vIFx1OUE4Q1x1OEJDMVx1OEY5M1x1NTE2NVxuICAgICAgICBpZiAoIXRoaXMucXVlc3Rpb24udHJpbSgpKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGVudGVyIGEgcXVlc3Rpb24nKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmFuc3dlci50cmltKCkpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2UgZW50ZXIgYW4gYW5zd2VyJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU5NUVFXHU3QjU0XHU1MzYxXG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuY3JlYXRlUUFDYXJkKFxuICAgICAgICAgIHRoaXMuY29udGVudFVuaXQuaWQsXG4gICAgICAgICAgdGhpcy5xdWVzdGlvbixcbiAgICAgICAgICB0aGlzLmFuc3dlclxuICAgICAgICApO1xuXG4gICAgICAgIG5ldyBOb3RpY2UoJ1EmQSBmbGFzaGNhcmQgY3JlYXRlZCEnKTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gXHU5QThDXHU4QkMxXHU4RjkzXHU1MTY1XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUmFuZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBzZWxlY3QgYXQgbGVhc3Qgb25lIHdvcmQgdG8gaGlkZScpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1NTM2MVxuICAgICAgICBjb25zdCBkZWxldGlvbnMgPSB0aGlzLnNlbGVjdGVkUmFuZ2VzLm1hcChyYW5nZSA9PiAoe1xuICAgICAgICAgIGluZGV4OiByYW5nZS5zdGFydCxcbiAgICAgICAgICBhbnN3ZXI6IHJhbmdlLnRleHRcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuY3JlYXRlQ2xvemVDYXJkKFxuICAgICAgICAgIHRoaXMuY29udGVudFVuaXQuaWQsXG4gICAgICAgICAgdGhpcy5jbG96ZVRleHQsXG4gICAgICAgICAgZGVsZXRpb25zXG4gICAgICAgICk7XG5cbiAgICAgICAgbmV3IE5vdGljZSgnQ2xvemUgZmxhc2hjYXJkIGNyZWF0ZWQhJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMub25TYXZlKCk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZmxhc2hjYXJkOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ0Vycm9yIGNyZWF0aW5nIGZsYXNoY2FyZCcpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAuZmxhc2hjYXJkLWNyZWF0ZS1tb2RhbCB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIG1heC13aWR0aDogNjAwcHg7XG4gICAgICB9XG5cbiAgICAgIC5jb250ZW50LXByZXZpZXcge1xuICAgICAgICBtYXJnaW46IDIwcHggMDtcbiAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC5jb250ZW50LXByZXZpZXcgaDMge1xuICAgICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5jb250ZW50LXByZXZpZXcgYmxvY2txdW90ZSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkLWlucHV0LWNvbnRhaW5lciB7XG4gICAgICAgIG1hcmdpbjogMjBweCAwO1xuICAgICAgfVxuXG4gICAgICAuaW5wdXQtaGludCB7XG4gICAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC8qIENsb3plIFx1NjgzN1x1NUYwRiAqL1xuICAgICAgLmNsb3plLWluc3RydWN0aW9uIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtdGV4dC1jb250YWluZXIge1xuICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuODtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgY3Vyc29yOiBkZWZhdWx0O1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtd29yZCB7XG4gICAgICAgIHBhZGRpbmc6IDJweCA0cHg7XG4gICAgICAgIG1hcmdpbjogMCAxcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLmNsb3plLXdvcmQ6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLmNsb3plLXdvcmQuc2VsZWN0ZWQge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3RlZC1kZWxldGlvbnMge1xuICAgICAgICBtYXJnaW46IDE1cHggMDtcbiAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3RlZC1kZWxldGlvbnMgaDQge1xuICAgICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5kZWxldGlvbi1pdGVtIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDZweCAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICAgIH1cblxuICAgICAgLmRlbGV0aW9uLXRleHQge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLnJlbW92ZS1kZWxldGlvbi1idG4ge1xuICAgICAgICBwYWRkaW5nOiAycHggOHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yKTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxO1xuICAgICAgfVxuXG4gICAgICAucmVtb3ZlLWRlbGV0aW9uLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICB9XG5cbiAgICAgIC5jbG96ZS1wcmV2aWV3IHtcbiAgICAgICAgbWFyZ2luOiAxNXB4IDA7XG4gICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtcHJldmlldyBoNCB7XG4gICAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLnByZXZpZXctdGV4dCB7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjtcbiAgICAgIH1cblxuICAgICAgLm1vZGFsLWJ1dHRvbi1jb250YWluZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5tb2RhbC1idXR0b24tY29udGFpbmVyIGJ1dHRvbiB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn0iLCAiLy8gb3ZlcnZpZXcgVmlldy50c1xuaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlLCBNZW51LCBNb2RhbCwgQXBwLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IENvbnRlbnRVbml0IH0gZnJvbSAnLi4vY29yZS9EYXRhTWFuYWdlcic7XG5pbXBvcnQgeyBRdWlja0ZsYXNoY2FyZENyZWF0b3IgfSBmcm9tICcuLi9jb3JlL1F1aWNrRmxhc2hjYXJkQ3JlYXRvcic7XG5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfT1ZFUlZJRVcgPSAnbGVhcm5pbmctc3lzdGVtLW92ZXJ2aWV3JztcblxuZXhwb3J0IGNsYXNzIE92ZXJ2aWV3VmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbjtcbi8vICAgcHJpdmF0ZSBjb250ZW50RWw6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGdyb3VwQnk6ICdmaWxlJyB8ICd0YWcnIHwgJ2RhdGUnID0gJ2ZpbGUnO1xuICBwcml2YXRlIHNlYXJjaFF1ZXJ5OiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBxdWlja0NyZWF0b3I6IFF1aWNrRmxhc2hjYXJkQ3JlYXRvcjtcbiAgcHJpdmF0ZSBiYXRjaE1vZGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBzZWxlY3RlZFVuaXRJZHM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4pIHtcbiAgICBzdXBlcihsZWFmKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLnF1aWNrQ3JlYXRvciA9IG5ldyBRdWlja0ZsYXNoY2FyZENyZWF0b3IocGx1Z2luKTtcbiAgfVxuXG4gIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFZJRVdfVFlQRV9PVkVSVklFVztcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdMZWFybmluZyBPdmVydmlldyc7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdsYXlvdXQtbGlzdCc7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgXG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcblxuICAgIHRoaXMuY3JlYXRlVG9vbGJhcihjb250YWluZXIpO1xuICAgIHRoaXMuY29udGVudEVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2xlYXJuaW5nLXN5c3RlbS1jb250ZW50JyB9KTtcbiAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgYXN5bmMgb25DbG9zZSgpIHt9XG5cbiAgLy8gXHU2REZCXHU1MkEwXHU1MjMwIE92ZXJ2aWV3VmlldyBcdTdDN0JcdTRFMkRcbnNjcm9sbFRvRmlsZShmaWxlUGF0aDogc3RyaW5nKSB7XG4gICAgLy8gdGhpcy5zZWxlY3RlZEZpbGUgPSBmaWxlUGF0aDsgLy8gXHU1OTgyXHU2NzlDXHU0RjYwXHU2NzA5XHU4RkQ5XHU0RTJBXHU1QzVFXHU2MDI3XG4gICAgXG4gICAgLy8gXHU2RURBXHU1MkE4XHU1MjMwXHU1QkY5XHU1RTk0XHU3Njg0XHU2NTg3XHU0RUY2XHU3RUM0XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBmaWxlR3JvdXBzID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvckFsbCgnLmZpbGUtZ3JvdXAnKTtcbiAgICAgIGZpbGVHcm91cHMuZm9yRWFjaCgoZ3JvdXApID0+IHtcbiAgICAgICAgY29uc3QgaGVhZGVyID0gZ3JvdXAucXVlcnlTZWxlY3RvcignLmdyb3VwLWhlYWRlcicpO1xuICAgICAgICBpZiAoaGVhZGVyPy50ZXh0Q29udGVudD8uaW5jbHVkZXMoZmlsZVBhdGguc3BsaXQoJy8nKS5wb3AoKT8ucmVwbGFjZSgnLm1kJywgJycpIHx8ICcnKSkge1xuICAgICAgICAgIGdyb3VwLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSwgMTAwKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlVG9vbGJhcihjb250YWluZXI6IEVsZW1lbnQpIHtcbiAgICBjb25zdCB0b29sYmFyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2xlYXJuaW5nLXN5c3RlbS10b29sYmFyJyB9KTtcblxuICAgIGNvbnN0IHNlYXJjaENvbnRhaW5lciA9IHRvb2xiYXIuY3JlYXRlRGl2KHsgY2xzOiAnc2VhcmNoLWNvbnRhaW5lcicgfSk7XG4gICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzZWFyY2hDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgcGxhY2Vob2xkZXI6ICdTZWFyY2ggY29udGVudC4uLicsXG4gICAgICBjbHM6ICdzZWFyY2gtaW5wdXQnXG4gICAgfSk7XG5cbiAgICBzZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICB0aGlzLnNlYXJjaFF1ZXJ5ID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBncm91cENvbnRhaW5lciA9IHRvb2xiYXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtY29udGFpbmVyJyB9KTtcbiAgICBncm91cENvbnRhaW5lci5jcmVhdGVTcGFuKHsgdGV4dDogJ0dyb3VwIGJ5OiAnLCBjbHM6ICdncm91cC1sYWJlbCcgfSk7XG5cbiAgICBjb25zdCBncm91cFNlbGVjdCA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZUVsKCdzZWxlY3QnLCB7IGNsczogJ2dyb3VwLXNlbGVjdCcgfSk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IFtcbiAgICAgIHsgdmFsdWU6ICdmaWxlJywgbGFiZWw6ICdGaWxlJyB9LFxuICAgICAgeyB2YWx1ZTogJ3RhZycsIGxhYmVsOiAnVGFnJyB9LFxuICAgICAgeyB2YWx1ZTogJ2RhdGUnLCBsYWJlbDogJ0RhdGUnIH1cbiAgICBdO1xuXG4gICAgb3B0aW9ucy5mb3JFYWNoKG9wdCA9PiB7XG4gICAgICBjb25zdCBvcHRpb24gPSBncm91cFNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywge1xuICAgICAgICB2YWx1ZTogb3B0LnZhbHVlLFxuICAgICAgICB0ZXh0OiBvcHQubGFiZWxcbiAgICAgIH0pO1xuICAgICAgaWYgKG9wdC52YWx1ZSA9PT0gdGhpcy5ncm91cEJ5KSB7XG4gICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBncm91cFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgdGhpcy5ncm91cEJ5ID0gKGUudGFyZ2V0IGFzIEhUTUxTZWxlY3RFbGVtZW50KS52YWx1ZSBhcyBhbnk7XG4gICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9KTtcblxuICAgIC8vIFx1NjI3OVx1OTFDRlx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVx1RkYwOFx1NzlGQlx1NTIzMFx1NTI0RFx1OTc2Mlx1RkYwOVxuICAgIGNvbnN0IGJhdGNoQWN0aW9ucyA9IHRvb2xiYXIuY3JlYXRlRGl2KHsgY2xzOiAnYmF0Y2gtYWN0aW9ucy1vdmVydmlldycgfSk7XG4gICAgXG4gICAgY29uc3QgYmF0Y2hNb2RlQnRuID0gYmF0Y2hBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiB0aGlzLmJhdGNoTW9kZSA/ICdcdTI3MTMgRG9uZScgOiAnXHUyNjEwIEJhdGNoIE1vZGUnLFxuICAgICAgY2xzOiAnYmF0Y2gtbW9kZS1idG4nXG4gICAgfSk7XG4gICAgYmF0Y2hNb2RlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5iYXRjaE1vZGUgPSAhdGhpcy5iYXRjaE1vZGU7XG4gICAgICBpZiAoIXRoaXMuYmF0Y2hNb2RlKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLmJhdGNoTW9kZSkge1xuICAgICAgLy8gXHU1MTY4XHU5MDA5L1x1NTNENlx1NkQ4OFx1NTE2OFx1OTAwOVx1NjMwOVx1OTRBRVxuICAgICAgY29uc3Qgc2VsZWN0QWxsQnRuID0gYmF0Y2hBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIHRleHQ6IHRoaXMuaXNBbGxTZWxlY3RlZCgpID8gJ1x1MjYxMSBEZXNlbGVjdCBBbGwnIDogJ1x1MjYxMCBTZWxlY3QgQWxsJyxcbiAgICAgICAgY2xzOiAnc2VsZWN0LWFsbC1idG4nXG4gICAgICB9KTtcbiAgICAgIHNlbGVjdEFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy50b2dnbGVTZWxlY3RBbGwoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBiYXRjaERlbGV0ZUJ0biA9IGJhdGNoQWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICB0ZXh0OiBgXHVEODNEXHVEREQxXHVGRTBGIERlbGV0ZSAoJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSlgLFxuICAgICAgICBjbHM6ICdiYXRjaC1kZWxldGUtYnRuJ1xuICAgICAgfSk7XG4gICAgICBiYXRjaERlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5iYXRjaERlbGV0ZU5vdGVzKCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgYmF0Y2hDcmVhdGVCdG4gPSBiYXRjaEFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogYFx1MjZBMSBDcmVhdGUgQ2FyZHMgKCR7dGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZX0pYCxcbiAgICAgICAgY2xzOiAnYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bidcbiAgICAgIH0pO1xuICAgICAgYmF0Y2hDcmVhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuYmF0Y2hDcmVhdGVGbGFzaGNhcmRzKCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYmF0Y2hDcmVhdGVBbGxCdG4gPSBiYXRjaEFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogJ1x1MjZBMSBCYXRjaCBDcmVhdGUgQ2FyZHMnLFxuICAgICAgICBjbHM6ICdiYXRjaC1jcmVhdGUtYnRuJ1xuICAgICAgfSk7XG4gICAgICBiYXRjaENyZWF0ZUFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc2hvd0JhdGNoQ3JlYXRlTW9kYWwoKSk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVmcmVzaEJ0biA9IHRvb2xiYXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdcdTI3RjMnLFxuICAgICAgY2xzOiAncmVmcmVzaC1idG4nXG4gICAgfSk7XG4gICAgcmVmcmVzaEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMucmVmcmVzaCgpKTtcblxuICAgIGNvbnN0IHN0YXRzID0gdG9vbGJhci5jcmVhdGVEaXYoeyBjbHM6ICdzdGF0cy1jb250YWluZXInIH0pO1xuICAgIGNvbnN0IHRvdGFsQ291bnQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRBbGxDb250ZW50VW5pdHMoKS5sZW5ndGg7XG4gICAgc3RhdHMuY3JlYXRlU3Bhbih7IHRleHQ6IGBUb3RhbDogJHt0b3RhbENvdW50fWAsIGNsczogJ3N0YXRzLXRleHQnIH0pO1xuICB9XG5cbiAgYXN5bmMgcmVmcmVzaCgpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgbGV0IHVuaXRzID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0QWxsQ29udGVudFVuaXRzKCk7XG5cbiAgICBpZiAodGhpcy5zZWFyY2hRdWVyeSkge1xuICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLnNlYXJjaFF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+XG4gICAgICAgIHVuaXQuY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSB8fFxuICAgICAgICB1bml0LnNvdXJjZS5maWxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5zb21lKHRhZyA9PiB0YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkpXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh1bml0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7XG4gICAgICAgIHRleHQ6IHRoaXMuc2VhcmNoUXVlcnkgPyAnTm8gcmVzdWx0cyBmb3VuZCcgOiAnTm8gY29udGVudCBleHRyYWN0ZWQgeWV0JyxcbiAgICAgICAgY2xzOiAnZW1wdHktc3RhdGUnXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRoaXMuZ3JvdXBCeSkge1xuICAgICAgY2FzZSAnZmlsZSc6XG4gICAgICAgIHRoaXMucmVuZGVyQnlGaWxlKHVuaXRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0YWcnOlxuICAgICAgICB0aGlzLnJlbmRlckJ5VGFnKHVuaXRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgdGhpcy5yZW5kZXJCeURhdGUodW5pdHMpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckJ5RmlsZSh1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIGNvbnN0IGdyb3VwZWQgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudFVuaXRbXT4oKTtcblxuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICBpZiAoIWdyb3VwZWQuaGFzKHVuaXQuc291cmNlLmZpbGUpKSB7XG4gICAgICAgIGdyb3VwZWQuc2V0KHVuaXQuc291cmNlLmZpbGUsIFtdKTtcbiAgICAgIH1cbiAgICAgIGdyb3VwZWQuZ2V0KHVuaXQuc291cmNlLmZpbGUpIS5wdXNoKHVuaXQpO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc29ydGVkRmlsZXMgPSBBcnJheS5mcm9tKGdyb3VwZWQua2V5cygpKS5zb3J0KCk7XG4gICAgc29ydGVkRmlsZXMuZm9yRWFjaChmaWxlUGF0aCA9PiB7XG4gICAgICBjb25zdCBmaWxlVW5pdHMgPSBncm91cGVkLmdldChmaWxlUGF0aCkhO1xuICAgICAgdGhpcy5yZW5kZXJGaWxlR3JvdXAoZmlsZVBhdGgsIGZpbGVVbml0cyk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckZpbGVHcm91cChmaWxlUGF0aDogc3RyaW5nLCB1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIGNvbnN0IGdyb3VwQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnZmlsZS1ncm91cCcgfSk7XG5cbiAgICBjb25zdCBoZWFkZXIgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdncm91cC1oZWFkZXInIH0pO1xuICAgIGNvbnN0IGZpbGVOYW1lID0gZmlsZVBhdGguc3BsaXQoJy8nKS5wb3AoKT8ucmVwbGFjZSgnLm1kJywgJycpIHx8IGZpbGVQYXRoO1xuICAgIGNvbnN0IHRpdGxlRWwgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtdGl0bGUnIH0pO1xuICAgIHRpdGxlRWwuY3JlYXRlU3Bhbih7IHRleHQ6ICdcdUQ4M0RcdURDQzQgJywgY2xzOiAnZ3JvdXAtaWNvbicgfSk7XG4gICAgdGl0bGVFbC5jcmVhdGVTcGFuKHsgdGV4dDogZmlsZU5hbWUsIGNsczogJ2dyb3VwLW5hbWUnIH0pO1xuXG4gICAgaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHt1bml0cy5sZW5ndGh9YCwgY2xzOiAnY291bnQtYmFkZ2UnIH0pO1xuXG4gICAgY29uc3QgY29sbGFwc2VCdG4gPSBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6ICdcdTI1QkMnLCBjbHM6ICdjb2xsYXBzZS1idG4nIH0pO1xuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU2NTg3XHU0RUY2XHU2Mjc5XHU2Q0U4XG4gICAgY29uc3QgZmlsZUFubm90YXRpb25zID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0RmlsZUFubm90YXRpb25zKGZpbGVQYXRoKTtcbiAgICBpZiAoZmlsZUFubm90YXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGZpbGVBbm5vdGF0aW9uRGlzcGxheSA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IFxuICAgICAgICBjbHM6ICdmaWxlLWFubm90YXRpb24tZGlzcGxheScgXG4gICAgICB9KTtcbiAgICAgIGZpbGVBbm5vdGF0aW9ucy5mb3JFYWNoKGFubiA9PiB7XG4gICAgICAgIGNvbnN0IGFubkVsID0gZmlsZUFubm90YXRpb25EaXNwbGF5LmNyZWF0ZURpdih7IGNsczogJ2ZpbGUtYW5ub3RhdGlvbi1pdGVtJyB9KTtcbiAgICAgICAgYW5uRWwuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogJ1x1RDgzRFx1RENDQyAnIH0pO1xuICAgICAgICBhbm5FbC5jcmVhdGVTcGFuKHsgdGV4dDogYW5uLmNvbnRlbnQgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50Q29udGFpbmVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtY29udGVudCcgfSk7XG4gICAgdW5pdHMuZm9yRWFjaCh1bml0ID0+IHtcbiAgICAgIHRoaXMucmVuZGVyQ29udGVudFVuaXQoY29udGVudENvbnRhaW5lciwgdW5pdCk7XG4gICAgfSk7XG5cbiAgICBsZXQgaXNDb2xsYXBzZWQgPSBmYWxzZTtcbiAgICBjb2xsYXBzZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgaXNDb2xsYXBzZWQgPSAhaXNDb2xsYXBzZWQ7XG4gICAgICBjb250ZW50Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBpc0NvbGxhcHNlZCA/ICdub25lJyA6ICdibG9jayc7XG4gICAgICBjb2xsYXBzZUJ0bi50ZXh0Q29udGVudCA9IGlzQ29sbGFwc2VkID8gJ1x1MjVCNicgOiAnXHUyNUJDJztcbiAgICB9KTtcblxuICAgIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSkub3BlbkZpbGUoZmlsZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckNvbnRlbnRVbml0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0KSB7XG4gICAgY29uc3QgY2FyZCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjb250ZW50LWNhcmQnIH0pO1xuXG4gICAgLy8gXHU2Mjc5XHU5MUNGXHU5MDA5XHU2MkU5XHU2QTIxXHU1RjBGXHVGRjFBXHU2REZCXHU1MkEwY2hlY2tib3hcbiAgICBpZiAodGhpcy5iYXRjaE1vZGUpIHtcbiAgICAgIGNvbnN0IGNoZWNrYm94ID0gY2FyZC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgIGNsczogJ2JhdGNoLWNoZWNrYm94J1xuICAgICAgfSk7XG4gICAgICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdW5pdC1pZCcsIHVuaXQuaWQpO1xuICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRoaXMuc2VsZWN0ZWRVbml0SWRzLmhhcyh1bml0LmlkKTtcbiAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCkge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmFkZCh1bml0LmlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5kZWxldGUodW5pdC5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVCYXRjaEJ1dHRvbnMoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRlbnRBcmVhID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLWNvbnRlbnQnIH0pO1xuICAgIGNvbnN0IHR5cGVJY29uID0gdGhpcy5nZXRUeXBlSWNvbih1bml0LnR5cGUpO1xuICAgIGNvbnRlbnRBcmVhLmNyZWF0ZVNwYW4oeyB0ZXh0OiB0eXBlSWNvbiArICcgJywgY2xzOiAndHlwZS1pY29uJyB9KTtcbiAgICBcbiAgICBjb25zdCBjb250ZW50VGV4dCA9IGNvbnRlbnRBcmVhLmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IHVuaXQuY29udGVudCwgXG4gICAgICBjbHM6ICdjb250ZW50LXRleHQgY2xpY2thYmxlLWNvbnRlbnQnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHU3MEI5XHU1MUZCXHU1MTg1XHU1QkI5XHU1QzU1XHU1RjAwXHU2Mjc5XHU2Q0U4XHU4RjkzXHU1MTY1XG4gICAgY29udGVudFRleHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMuc2hvd0Fubm90YXRpb25JbnB1dChjYXJkLCB1bml0LCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKT8uY29udGVudCk7XG4gICAgfSk7XG5cbiAgICBpZiAodW5pdC5hbm5vdGF0aW9uSWQpIHtcbiAgICAgIGNvbnRlbnRBcmVhLmNyZWF0ZVNwYW4oe1xuICAgICAgICB0ZXh0OiAnXHVEODNEXHVEQ0REJyxcbiAgICAgICAgY2xzOiAnYW5ub3RhdGlvbi1iYWRnZSBoYXMtYW5ub3RhdGlvbicsXG4gICAgICAgIGF0dHI6IHsgdGl0bGU6ICdIYXMgYW5ub3RhdGlvbicgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHVuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnRlbnRBcmVhLmNyZWF0ZVNwYW4oe1xuICAgICAgICB0ZXh0OiAnXHVEODNDXHVEQ0NGJyxcbiAgICAgICAgY2xzOiAnZmxhc2hjYXJkLWJhZGdlJyxcbiAgICAgICAgYXR0cjogeyB0aXRsZTogYCR7dW5pdC5mbGFzaGNhcmRJZHMubGVuZ3RofSBmbGFzaGNhcmQocylgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1NjYzRVx1NzkzQVx1NjI3OVx1NkNFOFx1NTE4NVx1NUJCOVxuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKTtcbiAgICBpZiAoYW5ub3RhdGlvbikge1xuICAgICAgY29uc3QgYW5ub3RhdGlvbkRpc3BsYXkgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ2Fubm90YXRpb24tZGlzcGxheScgfSk7XG4gICAgICBcbiAgICAgIGlmIChhbm5vdGF0aW9uLmJhZGdlKSB7XG4gICAgICAgIGNvbnN0IGJhZGdlID0gYW5ub3RhdGlvbkRpc3BsYXkuY3JlYXRlU3Bhbih7XG4gICAgICAgICAgdGV4dDogYW5ub3RhdGlvbi5iYWRnZS50ZXh0LFxuICAgICAgICAgIGNsczogJ2Fubm90YXRpb24tYmFkZ2UtZGlzcGxheSdcbiAgICAgICAgfSk7XG4gICAgICAgIGJhZGdlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGFubm90YXRpb24uYmFkZ2UuY29sb3I7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGFubm90YXRpb25Db250ZW50ID0gYW5ub3RhdGlvbkRpc3BsYXkuY3JlYXRlRGl2KHsgXG4gICAgICAgIGNsczogJ2Fubm90YXRpb24tY29udGVudC1kaXNwbGF5J1xuICAgICAgfSk7XG4gICAgICBhbm5vdGF0aW9uQ29udGVudC5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0FDICcgfSk7XG4gICAgICBhbm5vdGF0aW9uQ29udGVudC5jcmVhdGVTcGFuKHsgdGV4dDogYW5ub3RhdGlvbi5jb250ZW50IH0pO1xuICAgICAgXG4gICAgICAvLyBcdTY1RjZcdTk1RjRcdTYyMzNcbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IGFubm90YXRpb25EaXNwbGF5LmNyZWF0ZURpdih7IGNsczogJ2Fubm90YXRpb24tdGltZXN0YW1wJyB9KTtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShhbm5vdGF0aW9uLm1ldGFkYXRhLmNyZWF0ZWRBdCk7XG4gICAgICB0aW1lc3RhbXAudGV4dENvbnRlbnQgPSBkYXRlLnRvTG9jYWxlU3RyaW5nKCk7XG4gICAgICBcbiAgICAgIC8vIFx1NzBCOVx1NTFGQlx1NjI3OVx1NkNFOFx1NEU1Rlx1NTNFRlx1NEVFNVx1N0YxNlx1OEY5MVxuICAgICAgYW5ub3RhdGlvbkRpc3BsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLnNob3dBbm5vdGF0aW9uSW5wdXQoY2FyZCwgdW5pdCwgYW5ub3RhdGlvbi5jb250ZW50KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IG1ldGFBcmVhID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLW1ldGEnIH0pO1xuXG4gICAgaWYgKHVuaXQubWV0YWRhdGEudGFncy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCB0YWdzQ29udGFpbmVyID0gbWV0YUFyZWEuY3JlYXRlU3Bhbih7IGNsczogJ3RhZ3MtY29udGFpbmVyJyB9KTtcbiAgICAgIHVuaXQubWV0YWRhdGEudGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgIHRhZ3NDb250YWluZXIuY3JlYXRlU3Bhbih7IHRleHQ6IHRhZywgY2xzOiAndGFnJyB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh1bml0LnNvdXJjZS5oZWFkaW5nKSB7XG4gICAgICBtZXRhQXJlYS5jcmVhdGVTcGFuKHtcbiAgICAgICAgdGV4dDogYFx1RDgzRFx1RENDRCAke3VuaXQuc291cmNlLmhlYWRpbmd9YCxcbiAgICAgICAgY2xzOiAnaGVhZGluZy1pbmZvJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgYWN0aW9uc0FyZWEgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ2NhcmQtYWN0aW9ucycgfSk7XG5cbiAgICBjb25zdCBqdW1wQnRuID0gYWN0aW9uc0FyZWEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdcdTIxOTcnLFxuICAgICAgY2xzOiAnYWN0aW9uLWJ0biBqdW1wLWJ0bicsXG4gICAgICBhdHRyOiB7IHRpdGxlOiAnSnVtcCB0byBzb3VyY2UnIH1cbiAgICB9KTtcbiAgICBqdW1wQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBhd2FpdCB0aGlzLmp1bXBUb1NvdXJjZSh1bml0KTtcbiAgICB9KTtcblxuICAgIC8vIFx1NEUwMFx1OTUyRVx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1NjMwOVx1OTRBRVx1N0VDNFxuICAgIGNvbnN0IGZsYXNoY2FyZEdyb3VwID0gYWN0aW9uc0FyZWEuY3JlYXRlRGl2KHsgY2xzOiAnZmxhc2hjYXJkLWJ0bi1ncm91cCcgfSk7XG5cbiAgICAvLyBcdTY2N0FcdTgwRkRcdTUyMUJcdTVFRkFcdUZGMDhcdTRFM0JcdTYzMDlcdTk0QUVcdUZGMDlcbiAgICBjb25zdCBxdWlja0NhcmRCdG4gPSBmbGFzaGNhcmRHcm91cC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1x1MjZBMScsXG4gICAgICBjbHM6ICdhY3Rpb24tYnRuIHF1aWNrLWNhcmQtYnRuJyxcbiAgICAgIGF0dHI6IHsgdGl0bGU6ICdRdWljayBjcmVhdGUgZmxhc2hjYXJkIChzbWFydCknIH1cbiAgICB9KTtcbiAgICBxdWlja0NhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGF3YWl0IHRoaXMucXVpY2tDcmVhdG9yLmNyZWF0ZVNtYXJ0Q2FyZCh1bml0KTtcbiAgICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICAgIH0pO1xuXG4gICAgLy8gXHU0RTBCXHU2MkM5XHU4M0RDXHU1MzU1XHU2MzA5XHU5NEFFXG4gICAgY29uc3QgbW9yZUNhcmRCdG4gPSBmbGFzaGNhcmRHcm91cC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1x1MjVCQycsXG4gICAgICBjbHM6ICdhY3Rpb24tYnRuIG1vcmUtY2FyZC1idG4nLFxuICAgICAgYXR0cjogeyB0aXRsZTogJ01vcmUgZmxhc2hjYXJkIG9wdGlvbnMnIH1cbiAgICB9KTtcbiAgICBtb3JlQ2FyZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5zaG93Rmxhc2hjYXJkTWVudShlLCB1bml0KTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGFjdGlvbnNBcmVhLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnXHVEODNEXHVEREQxJyxcbiAgICAgIGNsczogJ2FjdGlvbi1idG4gZGVsZXRlLWJ0bicsXG4gICAgICBhdHRyOiB7IHRpdGxlOiAnRGVsZXRlJyB9XG4gICAgfSk7XG4gICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBhd2FpdCB0aGlzLmRlbGV0ZUNvbnRlbnRVbml0KHVuaXQpO1xuICAgIH0pO1xuXG4gICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnNob3dDb250ZXh0TWVudShlLCB1bml0KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyQnlUYWcodW5pdHM6IENvbnRlbnRVbml0W10pIHtcbiAgICBjb25zdCBncm91cGVkID0gbmV3IE1hcDxzdHJpbmcsIENvbnRlbnRVbml0W10+KCk7XG5cbiAgICB1bml0cy5mb3JFYWNoKHVuaXQgPT4ge1xuICAgICAgaWYgKHVuaXQubWV0YWRhdGEudGFncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKCFncm91cGVkLmhhcygnVW50YWdnZWQnKSkge1xuICAgICAgICAgIGdyb3VwZWQuc2V0KCdVbnRhZ2dlZCcsIFtdKTtcbiAgICAgICAgfVxuICAgICAgICBncm91cGVkLmdldCgnVW50YWdnZWQnKSEucHVzaCh1bml0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgICAgaWYgKCFncm91cGVkLmhhcyh0YWcpKSB7XG4gICAgICAgICAgICBncm91cGVkLnNldCh0YWcsIFtdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZ3JvdXBlZC5nZXQodGFnKSEucHVzaCh1bml0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBzb3J0ZWRUYWdzID0gQXJyYXkuZnJvbShncm91cGVkLmtleXMoKSkuc29ydCgpO1xuICAgIHNvcnRlZFRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgY29uc3QgdGFnVW5pdHMgPSBncm91cGVkLmdldCh0YWcpITtcbiAgICAgIHRoaXMucmVuZGVyVGFnR3JvdXAodGFnLCB0YWdVbml0cyk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclRhZ0dyb3VwKHRhZzogc3RyaW5nLCB1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIGNvbnN0IGdyb3VwQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAndGFnLWdyb3VwJyB9KTtcblxuICAgIGNvbnN0IGhlYWRlciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLWhlYWRlcicgfSk7XG4gICAgY29uc3QgdGl0bGVFbCA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdncm91cC10aXRsZScgfSk7XG4gICAgdGl0bGVFbC5jcmVhdGVTcGFuKHsgdGV4dDogJ1x1RDgzQ1x1REZGN1x1RkUwRiAnLCBjbHM6ICdncm91cC1pY29uJyB9KTtcbiAgICB0aXRsZUVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiB0YWcsIGNsczogJ2dyb3VwLW5hbWUnIH0pO1xuXG4gICAgaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHt1bml0cy5sZW5ndGh9YCwgY2xzOiAnY291bnQtYmFkZ2UnIH0pO1xuXG4gICAgY29uc3QgY29sbGFwc2VCdG4gPSBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6ICdcdTI1QkMnLCBjbHM6ICdjb2xsYXBzZS1idG4nIH0pO1xuXG4gICAgY29uc3QgY29udGVudENvbnRhaW5lciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLWNvbnRlbnQnIH0pO1xuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICB0aGlzLnJlbmRlckNvbnRlbnRVbml0KGNvbnRlbnRDb250YWluZXIsIHVuaXQpO1xuICAgIH0pO1xuXG4gICAgbGV0IGlzQ29sbGFwc2VkID0gZmFsc2U7XG4gICAgY29sbGFwc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGlzQ29sbGFwc2VkID0gIWlzQ29sbGFwc2VkO1xuICAgICAgY29udGVudENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gaXNDb2xsYXBzZWQgPyAnbm9uZScgOiAnYmxvY2snO1xuICAgICAgY29sbGFwc2VCdG4udGV4dENvbnRlbnQgPSBpc0NvbGxhcHNlZCA/ICdcdTI1QjYnIDogJ1x1MjVCQyc7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckJ5RGF0ZSh1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIGNvbnN0IGdyb3VwZWQgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudFVuaXRbXT4oKTtcblxuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodW5pdC5tZXRhZGF0YS5jcmVhdGVkQXQpO1xuICAgICAgY29uc3QgZGF0ZUtleSA9IGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XG4gICAgICBcbiAgICAgIGlmICghZ3JvdXBlZC5oYXMoZGF0ZUtleSkpIHtcbiAgICAgICAgZ3JvdXBlZC5zZXQoZGF0ZUtleSwgW10pO1xuICAgICAgfVxuICAgICAgZ3JvdXBlZC5nZXQoZGF0ZUtleSkhLnB1c2godW5pdCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBzb3J0ZWREYXRlcyA9IEFycmF5LmZyb20oZ3JvdXBlZC5rZXlzKCkpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShiKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhKS5nZXRUaW1lKCk7XG4gICAgfSk7XG5cbiAgICBzb3J0ZWREYXRlcy5mb3JFYWNoKGRhdGUgPT4ge1xuICAgICAgY29uc3QgZGF0ZVVuaXRzID0gZ3JvdXBlZC5nZXQoZGF0ZSkhO1xuICAgICAgdGhpcy5yZW5kZXJEYXRlR3JvdXAoZGF0ZSwgZGF0ZVVuaXRzKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyRGF0ZUdyb3VwKGRhdGU6IHN0cmluZywgdW5pdHM6IENvbnRlbnRVbml0W10pIHtcbiAgICBjb25zdCBncm91cENvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2RhdGUtZ3JvdXAnIH0pO1xuXG4gICAgY29uc3QgaGVhZGVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtaGVhZGVyJyB9KTtcbiAgICBjb25zdCB0aXRsZUVsID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLXRpdGxlJyB9KTtcbiAgICB0aXRsZUVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnXHVEODNEXHVEQ0M1ICcsIGNsczogJ2dyb3VwLWljb24nIH0pO1xuICAgIHRpdGxlRWwuY3JlYXRlU3Bhbih7IHRleHQ6IGRhdGUsIGNsczogJ2dyb3VwLW5hbWUnIH0pO1xuXG4gICAgaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHt1bml0cy5sZW5ndGh9YCwgY2xzOiAnY291bnQtYmFkZ2UnIH0pO1xuXG4gICAgY29uc3QgY29sbGFwc2VCdG4gPSBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6ICdcdTI1QkMnLCBjbHM6ICdjb2xsYXBzZS1idG4nIH0pO1xuXG4gICAgY29uc3QgY29udGVudENvbnRhaW5lciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLWNvbnRlbnQnIH0pO1xuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICB0aGlzLnJlbmRlckNvbnRlbnRVbml0KGNvbnRlbnRDb250YWluZXIsIHVuaXQpO1xuICAgIH0pO1xuXG4gICAgbGV0IGlzQ29sbGFwc2VkID0gZmFsc2U7XG4gICAgY29sbGFwc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGlzQ29sbGFwc2VkID0gIWlzQ29sbGFwc2VkO1xuICAgICAgY29udGVudENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gaXNDb2xsYXBzZWQgPyAnbm9uZScgOiAnYmxvY2snO1xuICAgICAgY29sbGFwc2VCdG4udGV4dENvbnRlbnQgPSBpc0NvbGxhcHNlZCA/ICdcdTI1QjYnIDogJ1x1MjVCQyc7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHNob3dBbm5vdGF0aW9uSW5wdXQoY2FyZDogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0LCBleGlzdGluZ1RleHQ/OiBzdHJpbmcpIHtcbiAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTVERjJcdTdFQ0ZcdTY3MDlcdThGOTNcdTUxNjVcdTY4NDZcdTVDNTVcdTVGMDBcbiAgICBsZXQgaW5wdXRDb250YWluZXIgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5hbm5vdGF0aW9uLWlucHV0LWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xuICAgIFxuICAgIGlmIChpbnB1dENvbnRhaW5lcikge1xuICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1REYyXHU1QzU1XHU1RjAwXHVGRjBDXHU1MjE5XHU2Mjk4XHU1M0UwXG4gICAgICBpbnB1dENvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBcdTUyMUJcdTVFRkFcdThGOTNcdTUxNjVcdTUzM0FcdTU3REZcbiAgICBpbnB1dENvbnRhaW5lciA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnYW5ub3RhdGlvbi1pbnB1dC1jb250YWluZXInIH0pO1xuXG4gICAgY29uc3QgdGV4dGFyZWEgPSBpbnB1dENvbnRhaW5lci5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICBjbHM6ICdhbm5vdGF0aW9uLXRleHRhcmVhJyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnQWRkIGNvbW1lbnQuLi4nXG4gICAgfSk7XG4gICAgdGV4dGFyZWEudmFsdWUgPSBleGlzdGluZ1RleHQgfHwgJyc7XG4gICAgdGV4dGFyZWEucm93cyA9IDM7XG5cbiAgICAvLyBcdTYzMDlcdTk0QUVcdTUzM0FcdTU3REZcdUZGMDhcdTdCODBcdTUzMTZcdTcyNDhcdUZGMDlcbiAgICBjb25zdCBidXR0b25BcmVhID0gaW5wdXRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnYW5ub3RhdGlvbi1idXR0b25zJyB9KTtcblxuICAgIGlmIChleGlzdGluZ1RleHQpIHtcbiAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGJ1dHRvbkFyZWEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogJ0RlbGV0ZScsXG4gICAgICAgIGNsczogJ2Fubm90YXRpb24tZGVsZXRlLWJ0bidcbiAgICAgIH0pO1xuICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk7XG4gICAgICAgIGlmIChhbm5vdGF0aW9uKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZGVsZXRlQW5ub3RhdGlvbihhbm5vdGF0aW9uLmlkKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIGRlbGV0ZWQnKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkFyZWEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdTYXZlJyxcbiAgICAgIGNsczogJ2Fubm90YXRpb24tc2F2ZS1idG4nXG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHU0RkREXHU1QjU4XHU1MUZEXHU2NTcwXG4gICAgY29uc3Qgc2F2ZUFubm90YXRpb24gPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXh0ID0gdGV4dGFyZWEudmFsdWUudHJpbSgpO1xuICAgICAgaWYgKCF0ZXh0KSB7XG4gICAgICAgIGlucHV0Q29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChhbm5vdGF0aW9uKSB7XG4gICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU3M0IwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIudXBkYXRlQW5ub3RhdGlvbihhbm5vdGF0aW9uLmlkLCB7XG4gICAgICAgICAgICBjb250ZW50OiB0ZXh0XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NUIwXHU2Mjc5XHU2Q0U4XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuYWRkQ29udGVudEFubm90YXRpb24oXG4gICAgICAgICAgICB1bml0LmlkLFxuICAgICAgICAgICAgdGV4dFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBhbm5vdGF0aW9uOicsIGVycm9yKTtcbiAgICAgICAgbmV3IE5vdGljZSgnRXJyb3Igc2F2aW5nIGFubm90YXRpb24nKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgc2F2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNhdmVBbm5vdGF0aW9uKTtcblxuICAgIC8vIFx1NjUyRlx1NjMwMSBDdHJsK0VudGVyIFx1NUZFQlx1NjM3N1x1OTUyRVx1NEZERFx1NUI1OFxuICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmIChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHNhdmVBbm5vdGF0aW9uKCk7XG4gICAgICB9XG4gICAgICAvLyBFc2MgXHU5NTJFXHU1MTczXHU5NUVEXG4gICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaW5wdXRDb250YWluZXIucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBcdTgxRUFcdTUyQThcdTgwNUFcdTcxMjZcbiAgICB0ZXh0YXJlYS5mb2N1cygpO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG93Rmxhc2hjYXJkTWVudShlOiBNb3VzZUV2ZW50LCB1bml0OiBDb250ZW50VW5pdCkge1xuICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1MjZBMSBTbWFydCBjcmVhdGUnKVxuICAgICAgICAuc2V0SWNvbignemFwJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMucXVpY2tDcmVhdG9yLmNyZWF0ZVNtYXJ0Q2FyZCh1bml0KTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1RDgzRFx1RENERCBDcmVhdGUgUSZBIGNhcmQnKVxuICAgICAgICAuc2V0SWNvbignbWVzc2FnZS1zcXVhcmUnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5xdWlja0NyZWF0b3IuY3JlYXRlUXVpY2tRQUNhcmQodW5pdCk7XG4gICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdTI3MEZcdUZFMEYgQ3JlYXRlIENsb3plIGNhcmQnKVxuICAgICAgICAuc2V0SWNvbignZWRpdCcpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnF1aWNrQ3JlYXRvci5jcmVhdGVRdWlja0Nsb3plQ2FyZCh1bml0KTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdUQ4M0NcdURGQTggQ3VzdG9tIGNhcmQuLi4nKVxuICAgICAgICAuc2V0SWNvbignc2V0dGluZ3MnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBGbGFzaGNhcmRDcmVhdGVNb2RhbCB9ID0gYXdhaXQgaW1wb3J0KCcuL0ZsYXNoY2FyZENyZWF0ZU1vZGFsJyk7XG4gICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgRmxhc2hjYXJkQ3JlYXRlTW9kYWwoXG4gICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLFxuICAgICAgICAgICAgdW5pdCxcbiAgICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChlKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2hvd0JhdGNoQ3JlYXRlTW9kYWwoKSB7XG4gICAgY29uc3QgdW5pdHMgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRBbGxDb250ZW50VW5pdHMoKTtcbiAgICBcbiAgICAvLyBcdThGQzdcdTZFRTRcdTYzODlcdTVERjJcdTdFQ0ZcdTY3MDlcdTk1RUFcdTUzNjFcdTc2ODRcdTUxODVcdTVCQjlcbiAgICBjb25zdCB1bml0c1dpdGhvdXRDYXJkcyA9IHVuaXRzLmZpbHRlcih1ID0+IHUuZmxhc2hjYXJkSWRzLmxlbmd0aCA9PT0gMCk7XG4gICAgXG4gICAgaWYgKHVuaXRzV2l0aG91dENhcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnQWxsIGNvbnRlbnQgYWxyZWFkeSBoYXMgZmxhc2hjYXJkcyEnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtb2RhbCA9IG5ldyBCYXRjaENyZWF0ZU1vZGFsKFxuICAgICAgdGhpcy5hcHAsXG4gICAgICB0aGlzLnBsdWdpbixcbiAgICAgIHRoaXMucXVpY2tDcmVhdG9yLFxuICAgICAgdW5pdHNXaXRob3V0Q2FyZHMsXG4gICAgICAoKSA9PiB0aGlzLnJlZnJlc2goKVxuICAgICk7XG4gICAgbW9kYWwub3BlbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBpc0FsbFNlbGVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHVuaXRzID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0QWxsQ29udGVudFVuaXRzKCk7XG4gICAgLy8gXHU1RTk0XHU3NTI4XHU2NDFDXHU3RDIyXHU4RkM3XHU2RUU0XG4gICAgbGV0IGZpbHRlcmVkVW5pdHMgPSB1bml0cztcbiAgICBpZiAodGhpcy5zZWFyY2hRdWVyeSkge1xuICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLnNlYXJjaFF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgICBmaWx0ZXJlZFVuaXRzID0gdW5pdHMuZmlsdGVyKHVuaXQgPT5cbiAgICAgICAgdW5pdC5jb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgIHVuaXQuc291cmNlLmZpbGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkgfHxcbiAgICAgICAgdW5pdC5tZXRhZGF0YS50YWdzLnNvbWUodGFnID0+IHRhZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSlcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBmaWx0ZXJlZFVuaXRzLmxlbmd0aCA+IDAgJiYgdGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZSA9PT0gZmlsdGVyZWRVbml0cy5sZW5ndGg7XG4gIH1cblxuICBwcml2YXRlIHRvZ2dsZVNlbGVjdEFsbCgpIHtcbiAgICBjb25zdCB1bml0cyA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldEFsbENvbnRlbnRVbml0cygpO1xuICAgIC8vIFx1NUU5NFx1NzUyOFx1NjQxQ1x1N0QyMlx1OEZDN1x1NkVFNFxuICAgIGxldCBmaWx0ZXJlZFVuaXRzID0gdW5pdHM7XG4gICAgaWYgKHRoaXMuc2VhcmNoUXVlcnkpIHtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5zZWFyY2hRdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgICAgZmlsdGVyZWRVbml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+XG4gICAgICAgIHVuaXQuY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSB8fFxuICAgICAgICB1bml0LnNvdXJjZS5maWxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5zb21lKHRhZyA9PiB0YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkpXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzQWxsU2VsZWN0ZWQoKSkge1xuICAgICAgLy8gXHU1M0Q2XHU2RDg4XHU1MTY4XHU5MDA5XG4gICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5jbGVhcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTUxNjhcdTkwMDlcbiAgICAgIGZpbHRlcmVkVW5pdHMuZm9yRWFjaCh1bml0ID0+IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuYWRkKHVuaXQuaWQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlQmF0Y2hCdXR0b25zKCk7XG4gICAgdGhpcy51cGRhdGVDaGVja2JveGVzKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUNoZWNrYm94ZXMoKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICBjb25zdCBjaGVja2JveGVzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXRjaC1jaGVja2JveCcpIGFzIE5vZGVMaXN0T2Y8SFRNTElucHV0RWxlbWVudD47XG4gICAgXG4gICAgY2hlY2tib3hlcy5mb3JFYWNoKGNoZWNrYm94ID0+IHtcbiAgICAgIGNvbnN0IHVuaXRJZCA9IGNoZWNrYm94LmdldEF0dHJpYnV0ZSgnZGF0YS11bml0LWlkJyk7XG4gICAgICBpZiAodW5pdElkKSB7XG4gICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0aGlzLnNlbGVjdGVkVW5pdElkcy5oYXModW5pdElkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQmF0Y2hCdXR0b25zKCkge1xuICAgIGNvbnN0IHRvb2xiYXIgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy5sZWFybmluZy1zeXN0ZW0tdG9vbGJhcicpIGFzIEhUTUxFbGVtZW50O1xuICAgIGlmICh0b29sYmFyKSB7XG4gICAgICBjb25zdCBiYXRjaEFjdGlvbnMgPSB0b29sYmFyLnF1ZXJ5U2VsZWN0b3IoJy5iYXRjaC1hY3Rpb25zLW92ZXJ2aWV3JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAoYmF0Y2hBY3Rpb25zKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdEFsbEJ0biA9IGJhdGNoQWN0aW9ucy5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0LWFsbC1idG4nKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gYmF0Y2hBY3Rpb25zLnF1ZXJ5U2VsZWN0b3IoJy5iYXRjaC1kZWxldGUtYnRuJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGNyZWF0ZUJ0biA9IGJhdGNoQWN0aW9ucy5xdWVyeVNlbGVjdG9yKCcuYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBcbiAgICAgICAgaWYgKHNlbGVjdEFsbEJ0bikge1xuICAgICAgICAgIHNlbGVjdEFsbEJ0bi50ZXh0Q29udGVudCA9IHRoaXMuaXNBbGxTZWxlY3RlZCgpID8gJ1x1MjYxMSBEZXNlbGVjdCBBbGwnIDogJ1x1MjYxMCBTZWxlY3QgQWxsJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGRlbGV0ZUJ0bikge1xuICAgICAgICAgIGRlbGV0ZUJ0bi50ZXh0Q29udGVudCA9IGBcdUQ4M0RcdURERDFcdUZFMEYgRGVsZXRlICgke3RoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemV9KWA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChjcmVhdGVCdG4pIHtcbiAgICAgICAgICBjcmVhdGVCdG4udGV4dENvbnRlbnQgPSBgXHUyNkExIENyZWF0ZSBDYXJkcyAoJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSlgO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBiYXRjaERlbGV0ZU5vdGVzKCkge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgUGxlYXNlIHNlbGVjdCBub3RlcyB0byBkZWxldGUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWNvbmZpcm0oYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSBzZWxlY3RlZCBub3Rlcz9gKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBzdWNjZXNzID0gMDtcbiAgICBsZXQgZmFpbGVkID0gMDtcblxuICAgIGZvciAoY29uc3QgdW5pdElkIG9mIHRoaXMuc2VsZWN0ZWRVbml0SWRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5kZWxldGVDb250ZW50VW5pdCh1bml0SWQpO1xuICAgICAgICBzdWNjZXNzKys7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBub3RlOicsIGVycm9yKTtcbiAgICAgICAgZmFpbGVkKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICBuZXcgTm90aWNlKGBcdTI3MDUgRGVsZXRlZCAke3N1Y2Nlc3N9IG5vdGVzJHtmYWlsZWQgPiAwID8gYCwgJHtmYWlsZWR9IGZhaWxlZGAgOiAnJ31gKTtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYmF0Y2hDcmVhdGVGbGFzaGNhcmRzKCkge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgUGxlYXNlIHNlbGVjdCBub3RlcyB0byBjcmVhdGUgZmxhc2hjYXJkcycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHVuaXRzID0gQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkVW5pdElkcylcbiAgICAgIC5tYXAoaWQgPT4gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoaWQpKVxuICAgICAgLmZpbHRlcih1ID0+IHUgIT09IHVuZGVmaW5lZCAmJiB1LmZsYXNoY2FyZElkcy5sZW5ndGggPT09IDApIGFzIENvbnRlbnRVbml0W107XG5cbiAgICBpZiAodW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgU2VsZWN0ZWQgbm90ZXMgYWxyZWFkeSBoYXZlIGZsYXNoY2FyZHMnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtb2RhbCA9IG5ldyBCYXRjaENyZWF0ZU1vZGFsKFxuICAgICAgdGhpcy5hcHAsXG4gICAgICB0aGlzLnBsdWdpbixcbiAgICAgIHRoaXMucXVpY2tDcmVhdG9yLFxuICAgICAgdW5pdHMsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgfVxuICAgICk7XG4gICAgbW9kYWwub3BlbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBqdW1wVG9Tb3VyY2UodW5pdDogQ29udGVudFVuaXQpIHtcbiAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHVuaXQuc291cmNlLmZpbGUpO1xuICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcblxuICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XG4gICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcblxuICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShJdGVtVmlldyk7XG4gICAgaWYgKHZpZXcpIHtcbiAgICAgIGNvbnN0IGVkaXRvciA9ICh2aWV3IGFzIGFueSkuZWRpdG9yO1xuICAgICAgaWYgKGVkaXRvcikge1xuICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHsgbGluZTogdW5pdC5zb3VyY2UucG9zaXRpb24ubGluZSwgY2g6IDAgfSk7XG4gICAgICAgIGVkaXRvci5zY3JvbGxJbnRvVmlldyh7XG4gICAgICAgICAgZnJvbTogeyBsaW5lOiB1bml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogMCB9LFxuICAgICAgICAgIHRvOiB7IGxpbmU6IHVuaXQuc291cmNlLnBvc2l0aW9uLmxpbmUsIGNoOiAwIH1cbiAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBlZGl0b3Iuc2V0U2VsZWN0aW9uKFxuICAgICAgICAgICAgeyBsaW5lOiB1bml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogMCB9LFxuICAgICAgICAgICAgeyBsaW5lOiB1bml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogOTk5IH1cbiAgICAgICAgICApO1xuICAgICAgICB9LCAxMDApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGVsZXRlQ29udGVudFVuaXQodW5pdDogQ29udGVudFVuaXQpIHtcbiAgICBjb25zdCBjb25maXJtZWQgPSBhd2FpdCB0aGlzLmNvbmZpcm1EZWxldGUodW5pdCk7XG4gICAgaWYgKCFjb25maXJtZWQpIHJldHVybjtcblxuICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmRlbGV0ZUNvbnRlbnRVbml0KHVuaXQuaWQpO1xuICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBjb25maXJtRGVsZXRlKHVuaXQ6IENvbnRlbnRVbml0KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBjb25zdCBtb2RhbCA9IG5ldyBDb25maXJtTW9kYWwoXG4gICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAnRGVsZXRlIGNvbnRlbnQnLFxuICAgICAgICBgQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIGNvbnRlbnQ/XFxuXFxuXCIke3VuaXQuY29udGVudC5zdWJzdHJpbmcoMCwgNTApfS4uLlwiYCxcbiAgICAgICAgKCkgPT4gcmVzb2x2ZSh0cnVlKSxcbiAgICAgICAgKCkgPT4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICk7XG4gICAgICBtb2RhbC5vcGVuKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHNob3dDb250ZXh0TWVudShlOiBNb3VzZUV2ZW50LCB1bml0OiBDb250ZW50VW5pdCkge1xuICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ0p1bXAgdG8gc291cmNlJylcbiAgICAgICAgLnNldEljb24oJ2Fycm93LXJpZ2h0JylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5qdW1wVG9Tb3VyY2UodW5pdCkpXG4gICAgKTtcblxuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKTtcbiAgICBcbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZShhbm5vdGF0aW9uID8gJ0VkaXQgYW5ub3RhdGlvbicgOiAnQWRkIGFubm90YXRpb24nKVxuICAgICAgICAuc2V0SWNvbigncGVuY2lsJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNhcmQgPSAoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJy5jb250ZW50LWNhcmQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICBpZiAoY2FyZCkge1xuICAgICAgICAgICAgdGhpcy5zaG93QW5ub3RhdGlvbklucHV0KGNhcmQsIHVuaXQsIGFubm90YXRpb24/LmNvbnRlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdTI2QTEgUXVpY2sgY3JlYXRlIGZsYXNoY2FyZCcpXG4gICAgICAgIC5zZXRJY29uKCd6YXAnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5xdWlja0NyZWF0b3IuY3JlYXRlU21hcnRDYXJkKHVuaXQpO1xuICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnQ3JlYXRlIFEmQSBjYXJkJylcbiAgICAgICAgLnNldEljb24oJ21lc3NhZ2Utc3F1YXJlJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMucXVpY2tDcmVhdG9yLmNyZWF0ZVF1aWNrUUFDYXJkKHVuaXQpO1xuICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnQ3JlYXRlIENsb3plIGNhcmQnKVxuICAgICAgICAuc2V0SWNvbignZWRpdCcpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnF1aWNrQ3JlYXRvci5jcmVhdGVRdWlja0Nsb3plQ2FyZCh1bml0KTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ0N1c3RvbSBmbGFzaGNhcmQuLi4nKVxuICAgICAgICAuc2V0SWNvbignc2V0dGluZ3MnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBGbGFzaGNhcmRDcmVhdGVNb2RhbCB9ID0gYXdhaXQgaW1wb3J0KCcuL0ZsYXNoY2FyZENyZWF0ZU1vZGFsJyk7XG4gICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgRmxhc2hjYXJkQ3JlYXRlTW9kYWwoXG4gICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLFxuICAgICAgICAgICAgdW5pdCxcbiAgICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnVmlldyBTdGF0aXN0aWNzJylcbiAgICAgICAgLnNldEljb24oJ2Jhci1jaGFydCcpXG4gICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5hY3RpdmF0ZVN0YXRzKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnRGVsZXRlJylcbiAgICAgICAgLnNldEljb24oJ3RyYXNoJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5kZWxldGVDb250ZW50VW5pdCh1bml0KSlcbiAgICApO1xuXG4gICAgbWVudS5zaG93QXRNb3VzZUV2ZW50KGUpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRUeXBlSWNvbih0eXBlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGljb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ2hpZ2hsaWdodCc6ICdcdTI3MjgnLFxuICAgICAgJ2JvbGQnOiAnKionLFxuICAgICAgJ3RhZyc6ICdcdUQ4M0NcdURGRjcnLFxuICAgICAgJ2N1c3RvbSc6ICdcdTJCNTAnXG4gICAgfTtcbiAgICByZXR1cm4gaWNvbnNbdHlwZV0gfHwgJ1x1MjAyMic7XG4gIH1cblxuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgLyogXHU1REU1XHU1MTc3XHU2ODBGXHU2ODM3XHU1RjBGICovXG4gICAgICAubGVhcm5pbmctc3lzdGVtLXRvb2xiYXIge1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zZWFyY2gtY29udGFpbmVyIHsgZGlzcGxheTogZmxleDsgfVxuXG4gICAgICAuc2VhcmNoLWlucHV0IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgcGFkZGluZzogNnB4IDEwcHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtY29udGFpbmVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC1sYWJlbCB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLXNlbGVjdCB7XG4gICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgfVxuXG4gICAgICAucmVmcmVzaC1idG4ge1xuICAgICAgICBwYWRkaW5nOiA0cHggMTJweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgfVxuXG4gICAgICAucmVmcmVzaC1idG46aG92ZXIgeyBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTsgfVxuXG4gICAgICAuc3RhdHMtY29udGFpbmVyIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTUxODVcdTVCQjlcdTUzM0FcdTU3REZcdTY4MzdcdTVGMEYgKi9cbiAgICAgIC5sZWFybmluZy1zeXN0ZW0tY29udGVudCB7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICB9XG5cbiAgICAgIC5lbXB0eS1zdGF0ZSB7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBwYWRkaW5nOiA0MHB4IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5maWxlLWdyb3VwLCAudGFnLWdyb3VwLCAuZGF0ZS1ncm91cCB7IG1hcmdpbi1ib3R0b206IDIwcHg7IH1cblxuICAgICAgLmdyb3VwLWhlYWRlciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtaGVhZGVyOmhvdmVyIHsgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7IH1cblxuICAgICAgLmdyb3VwLXRpdGxlIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWljb24geyBtYXJnaW4tcmlnaHQ6IDRweDsgfVxuXG4gICAgICAuY291bnQtYmFkZ2Uge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIHBhZGRpbmc6IDJweCA4cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuY29sbGFwc2UtYnRuIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTY1ODdcdTRFRjZcdTYyNzlcdTZDRThcdTY2M0VcdTc5M0EgKi9cbiAgICAgIC5maWxlLWFubm90YXRpb24tZGlzcGxheSB7XG4gICAgICAgIG1hcmdpbjogOHB4IDAgMTJweCAwO1xuICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnktYWx0KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1hbm5vdGF0aW9uLWl0ZW0ge1xuICAgICAgICBwYWRkaW5nOiA0cHggMDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1hbm5vdGF0aW9uLWl0ZW0gc3Ryb25nIHsgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTsgfVxuXG4gICAgICAvKiBcdTUxODVcdTVCQjlcdTUzNjFcdTcyNDdcdTY4MzdcdTVGMEYgKi9cbiAgICAgIC5ncm91cC1jb250ZW50IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIHBhZGRpbmctbGVmdDogOHB4O1xuICAgICAgfVxuXG4gICAgICAuY29udGVudC1jYXJkIHtcbiAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuXG4gICAgICAuY29udGVudC1jYXJkOmhvdmVyIHtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1jb250ZW50IHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgIH1cblxuICAgICAgLnR5cGUtaWNvbiB7IGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsgfVxuXG4gICAgICAuY29udGVudC10ZXh0IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgICAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICAgICAgfVxuXG4gICAgICAuY2xpY2thYmxlLWNvbnRlbnQge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICBwYWRkaW5nOiA0cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIH1cblxuICAgICAgLmNsaWNrYWJsZS1jb250ZW50OmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1iYWRnZSwgLmZsYXNoY2FyZC1iYWRnZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBtYXJnaW4tbGVmdDogNHB4O1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1iYWRnZS5oYXMtYW5ub3RhdGlvbiB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTYyNzlcdTZDRThcdTY2M0VcdTc5M0FcdTY4MzdcdTVGMEYgKi9cbiAgICAgIC5hbm5vdGF0aW9uLWRpc3BsYXkge1xuICAgICAgICBtYXJnaW46IDEwcHggMDtcbiAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnktYWx0KTtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWRpc3BsYXk6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgICAgYm9yZGVyLWxlZnQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWNvbnRlbnQtZGlzcGxheSB7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tY29udGVudC1kaXNwbGF5IHN0cm9uZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tdGltZXN0YW1wIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjhlbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZmFpbnQpO1xuICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tYmFkZ2UtZGlzcGxheSB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgcGFkZGluZzogM3B4IDEwcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC8qIFx1NTE4NVx1ODA1NFx1NjI3OVx1NkNFOFx1OEY5M1x1NTE2NSAqL1xuICAgICAgLmFubm90YXRpb24taW5wdXQtY29udGFpbmVyIHtcbiAgICAgICAgbWFyZ2luOiAxMnB4IDA7XG4gICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYW5pbWF0aW9uOiBzbGlkZURvd24gMC4ycyBlYXNlO1xuICAgICAgfVxuXG4gICAgICBAa2V5ZnJhbWVzIHNsaWRlRG93biB7XG4gICAgICAgIGZyb20ge1xuICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMHB4KTtcbiAgICAgICAgfVxuICAgICAgICB0byB7XG4gICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tdGV4dGFyZWEge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgICAgIHJlc2l6ZTogdmVydGljYWw7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDYwcHg7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLXRleHRhcmVhOmZvY3VzIHtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi10ZXh0YXJlYTo6cGxhY2Vob2xkZXIge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1mYWludCk7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWJ1dHRvbnMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tYnV0dG9ucyBidXR0b24ge1xuICAgICAgICBwYWRkaW5nOiA2cHggMTZweDtcbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWRlbGV0ZS1idG4ge1xuICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1kZWxldGUtYnRuOmhvdmVyIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLXNhdmUtYnRuIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1zYXZlLWJ0bjpob3ZlciB7XG4gICAgICAgIG9wYWNpdHk6IDAuODtcbiAgICAgIH1cblxuICAgICAgLyogXHU1MTQzXHU2NTcwXHU2MzZFXHU1MzNBXHU1N0RGICovXG4gICAgICAuY2FyZC1tZXRhIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC50YWdzLWNvbnRhaW5lciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgZ2FwOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC50YWcge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIHBhZGRpbmc6IDJweCA4cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICB9XG5cbiAgICAgIC5oZWFkaW5nLWluZm8ge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgIH1cblxuICAgICAgLyogXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFICovXG4gICAgICAuY2FyZC1hY3Rpb25zIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC5hY3Rpb24tYnRuIHtcbiAgICAgICAgcGFkZGluZzogNHB4IDEwcHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG5cbiAgICAgIC5hY3Rpb24tYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICB9XG5cbiAgICAgIC5kZWxldGUtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTRFMDBcdTk1MkVcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcdTYzMDlcdTk0QUVcdTdFQzQgKi9cbiAgICAgIC5mbGFzaGNhcmQtYnRuLWdyb3VwIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiAwO1xuICAgICAgfVxuXG4gICAgICAucXVpY2stY2FyZC1idG4ge1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHggMCAwIDRweDtcbiAgICAgICAgYm9yZGVyLXJpZ2h0OiBub25lO1xuICAgICAgfVxuXG4gICAgICAubW9yZS1jYXJkLWJ0biB7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDAgNHB4IDRweCAwO1xuICAgICAgICBwYWRkaW5nOiA0cHggNnB4O1xuICAgICAgICBmb250LXNpemU6IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5xdWljay1jYXJkLWJ0bjpob3ZlciwgLm1vcmUtY2FyZC1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1jcmVhdGUtYnRuIHtcbiAgICAgICAgcGFkZGluZzogNnB4IDEycHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1jcmVhdGUtYnRuOmhvdmVyIHtcbiAgICAgICAgb3BhY2l0eTogMC44O1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtYWN0aW9ucy1vdmVydmlldyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1tb2RlLWJ0bixcbiAgICAgIC5zZWxlY3QtYWxsLWJ0bixcbiAgICAgIC5iYXRjaC1kZWxldGUtYnRuLFxuICAgICAgLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG4ge1xuICAgICAgICBwYWRkaW5nOiA2cHggMTJweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3QtYWxsLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtbW9kZS1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLWRlbGV0ZS1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLWNoZWNrYm94IHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxufVxuXG4vLyBcdTYyNzlcdTkxQ0ZcdTUyMUJcdTVFRkFcdTZBMjFcdTYwMDFcdTY4NDZcbmV4cG9ydCBjbGFzcyBCYXRjaENyZWF0ZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4sXG4gICAgcHJpdmF0ZSBxdWlja0NyZWF0b3I6IFF1aWNrRmxhc2hjYXJkQ3JlYXRvcixcbiAgICBwcml2YXRlIHVuaXRzOiBDb250ZW50VW5pdFtdLFxuICAgIHByaXZhdGUgb25Db21wbGV0ZTogKCkgPT4gdm9pZFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIFxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdTI2QTEgQmF0Y2ggQ3JlYXRlIEZsYXNoY2FyZHMnIH0pO1xuICAgIFxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiBgQ3JlYXRlIGZsYXNoY2FyZHMgZm9yICR7dGhpcy51bml0cy5sZW5ndGh9IGNvbnRlbnQgaXRlbXMgd2l0aG91dCBjYXJkcy5gXG4gICAgfSk7XG5cbiAgICAvLyBcdTkwMDlcdTYyRTlcdTdDN0JcdTU3OEJcbiAgICBjb25zdCB0eXBlQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ3R5cGUtc2VsZWN0LWNvbnRhaW5lcicgfSk7XG4gICAgdHlwZUNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDYXJkIFR5cGUnIH0pO1xuXG4gICAgbGV0IHNlbGVjdGVkVHlwZTogJ3NtYXJ0JyB8ICdxYScgfCAnY2xvemUnID0gJ3NtYXJ0JztcblxuICAgIGNvbnN0IHR5cGVzID0gW1xuICAgICAgeyB2YWx1ZTogJ3NtYXJ0JywgbGFiZWw6ICdcdTI2QTEgU21hcnQgKEF1dG8tZGV0ZWN0KScsIGRlc2M6ICdBdXRvbWF0aWNhbGx5IGNob29zZSB0aGUgYmVzdCB0eXBlJyB9LFxuICAgICAgeyB2YWx1ZTogJ3FhJywgbGFiZWw6ICdcdUQ4M0RcdURDREQgUSZBIENhcmRzJywgZGVzYzogJ1F1ZXN0aW9uIGFuZCBhbnN3ZXIgZm9ybWF0JyB9LFxuICAgICAgeyB2YWx1ZTogJ2Nsb3plJywgbGFiZWw6ICdcdTI3MEZcdUZFMEYgQ2xvemUgQ2FyZHMnLCBkZXNjOiAnRmlsbCBpbiB0aGUgYmxhbmtzJyB9XG4gICAgXTtcblxuICAgIHR5cGVzLmZvckVhY2godHlwZSA9PiB7XG4gICAgICBjb25zdCBvcHRpb24gPSB0eXBlQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3R5cGUtb3B0aW9uJyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmFkaW8gPSBvcHRpb24uY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICB0eXBlOiAncmFkaW8nLFxuICAgICAgICB2YWx1ZTogdHlwZS52YWx1ZSxcbiAgICAgICAgYXR0cjogeyBuYW1lOiAnY2FyZC10eXBlJyB9XG4gICAgICB9KTtcbiAgICAgIGlmICh0eXBlLnZhbHVlID09PSAnc21hcnQnKSByYWRpby5jaGVja2VkID0gdHJ1ZTtcblxuICAgICAgY29uc3QgbGFiZWwgPSBvcHRpb24uY3JlYXRlRGl2KHsgY2xzOiAndHlwZS1sYWJlbCcgfSk7XG4gICAgICBsYWJlbC5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiB0eXBlLmxhYmVsIH0pO1xuICAgICAgbGFiZWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogdHlwZS5kZXNjLCBjbHM6ICd0eXBlLWRlc2MnIH0pO1xuXG4gICAgICBvcHRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHJhZGlvLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICBzZWxlY3RlZFR5cGUgPSB0eXBlLnZhbHVlIGFzIGFueTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gXHU2MzA5XHU5NEFFXG4gICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ21vZGFsLWJ1dHRvbi1jb250YWluZXInIH0pO1xuXG4gICAgY29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG5cbiAgICBjb25zdCBjcmVhdGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiBgQ3JlYXRlICR7dGhpcy51bml0cy5sZW5ndGh9IENhcmRzYCxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgY3JlYXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5iYXRjaENyZWF0ZShzZWxlY3RlZFR5cGUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRTdHlsZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYmF0Y2hDcmVhdGUodHlwZTogJ3NtYXJ0JyB8ICdxYScgfCAnY2xvemUnKSB7XG4gICAgY29uc3QgeyBzdWNjZXNzLCBmYWlsZWQgfSA9IGF3YWl0IHRoaXMucXVpY2tDcmVhdG9yLmNyZWF0ZUJhdGNoQ2FyZHModGhpcy51bml0cywgdHlwZSk7XG4gICAgXG4gICAgbmV3IE5vdGljZShgXHUyNzA1IENyZWF0ZWQgJHtzdWNjZXNzfSBmbGFzaGNhcmRzISAke2ZhaWxlZCA+IDAgPyBgKCR7ZmFpbGVkfSBmYWlsZWQpYCA6ICcnfWApO1xuICAgIFxuICAgIHRoaXMuY2xvc2UoKTtcbiAgICB0aGlzLm9uQ29tcGxldGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAudHlwZS1zZWxlY3QtY29udGFpbmVyIHtcbiAgICAgICAgbWFyZ2luOiAyMHB4IDA7XG4gICAgICB9XG5cbiAgICAgIC50eXBlLW9wdGlvbiB7XG4gICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuXG4gICAgICAudHlwZS1vcHRpb246aG92ZXIge1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAudHlwZS1vcHRpb24gaW5wdXRbdHlwZT1cInJhZGlvXCJdIHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAudHlwZS1sYWJlbCB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgdmVydGljYWwtYWxpZ246IHRvcDtcbiAgICAgIH1cblxuICAgICAgLnR5cGUtZGVzYyB7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgbWFyZ2luLXRvcDogNHB4O1xuICAgICAgfVxuICAgIGA7XG5cbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuXG5jbGFzcyBDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwcDogQXBwLFxuICAgIHByaXZhdGUgdGl0bGU6IHN0cmluZyxcbiAgICBwcml2YXRlIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBwcml2YXRlIG9uQ29uZmlybTogKCkgPT4gdm9pZCxcbiAgICBwcml2YXRlIG9uQ2FuY2VsOiAoKSA9PiB2b2lkXG4gICkge1xuICAgIHN1cGVyKGFwcCk7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdGhpcy50aXRsZSB9KTtcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHRoaXMubWVzc2FnZSB9KTtcblxuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdtb2RhbC1idXR0b24tY29udGFpbmVyJyB9KTtcbiAgICBcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgdGhpcy5vbkNhbmNlbCgpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgY29uZmlybUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdEZWxldGUnLFxuICAgICAgY2xzOiAnbW9kLXdhcm5pbmcnXG4gICAgfSk7XG4gICAgY29uZmlybUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMub25Db25maXJtKCk7XG4gICAgfSk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIExlYXJuaW5nU3lzdGVtUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgQW5ub3RhdGlvbiB9IGZyb20gJy4uL2NvcmUvQW5ub3RhdGlvbk1hbmFnZXInO1xuaW1wb3J0IHsgQ29udGVudFVuaXQgfSBmcm9tICcuLi9jb3JlL0RhdGFNYW5hZ2VyJztcblxuZXhwb3J0IGNsYXNzIEFubm90YXRpb25Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBjb250ZW50VW5pdDogQ29udGVudFVuaXQ7XG4gIHByaXZhdGUgZXhpc3RpbmdBbm5vdGF0aW9uPzogQW5ub3RhdGlvbjtcbiAgcHJpdmF0ZSBhbm5vdGF0aW9uVGV4dDogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgYmFkZ2VUZXh0OiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBiYWRnZUNvbG9yOiBzdHJpbmcgPSAnIzVCOUJENSc7XG4gIHByaXZhdGUgb25TYXZlOiAoYW5ub3RhdGlvbjogQW5ub3RhdGlvbikgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4sXG4gICAgY29udGVudFVuaXQ6IENvbnRlbnRVbml0LFxuICAgIG9uU2F2ZTogKGFubm90YXRpb246IEFubm90YXRpb24pID0+IHZvaWRcbiAgKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLmNvbnRlbnRVbml0ID0gY29udGVudFVuaXQ7XG4gICAgdGhpcy5vblNhdmUgPSBvblNhdmU7XG5cbiAgICAvLyBcdTUyQTBcdThGN0RcdTczQjBcdTY3MDlcdTYyNzlcdTZDRThcbiAgICB0aGlzLmV4aXN0aW5nQW5ub3RhdGlvbiA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldENvbnRlbnRBbm5vdGF0aW9uKFxuICAgICAgY29udGVudFVuaXQuaWRcbiAgICApO1xuXG4gICAgaWYgKHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uKSB7XG4gICAgICB0aGlzLmFubm90YXRpb25UZXh0ID0gdGhpcy5leGlzdGluZ0Fubm90YXRpb24uY29udGVudDtcbiAgICAgIGlmICh0aGlzLmV4aXN0aW5nQW5ub3RhdGlvbi5iYWRnZSkge1xuICAgICAgICB0aGlzLmJhZGdlVGV4dCA9IHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uLmJhZGdlLnRleHQ7XG4gICAgICAgIHRoaXMuYmFkZ2VDb2xvciA9IHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uLmJhZGdlLmNvbG9yO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2Fubm90YXRpb24tbW9kYWwnKTtcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyBcbiAgICAgIHRleHQ6IHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uID8gJ0VkaXQgQW5ub3RhdGlvbicgOiAnQWRkIEFubm90YXRpb24nIFxuICAgIH0pO1xuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU1MzlGXHU2NTg3XHU1MTg1XHU1QkI5XG4gICAgY29uc3QgY29udGVudFByZXZpZXcgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnYW5ub3RhdGlvbi1jb250ZW50LXByZXZpZXcnIH0pO1xuICAgIGNvbnRlbnRQcmV2aWV3LmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0NvbnRlbnQ6JyB9KTtcbiAgICBjb250ZW50UHJldmlldy5jcmVhdGVFbCgnYmxvY2txdW90ZScsIHsgdGV4dDogdGhpcy5jb250ZW50VW5pdC5jb250ZW50IH0pO1xuXG4gICAgLy8gXHU2Mjc5XHU2Q0U4XHU2NTg3XHU2NzJDXHU1MzNBXHU1N0RGXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLnNldE5hbWUoJ0Fubm90YXRpb24nKVxuICAgICAgLnNldERlc2MoJ0FkZCB5b3VyIG5vdGVzIG9yIGNvbW1lbnRzIGFib3V0IHRoaXMgY29udGVudCcpXG4gICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB7XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHlvdXIgYW5ub3RhdGlvbiBoZXJlLi4uJylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5hbm5vdGF0aW9uVGV4dClcbiAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5hbm5vdGF0aW9uVGV4dCA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgdGV4dC5pbnB1dEVsLnJvd3MgPSA2O1xuICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICB9KTtcblxuICAgIC8vIFx1ODlEMlx1NjgwN1x1OEJCRVx1N0Y2RVxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdCYWRnZSAoT3B0aW9uYWwpJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5zZXROYW1lKCdCYWRnZSB0ZXh0JylcbiAgICAgIC5zZXREZXNjKCdTaG9ydCB0ZXh0IHRvIGRpc3BsYXkgYXMgYSBiYWRnZSAoZS5nLiwgXCJcdTkxQ0RcdTg5ODFcIiwgXCJcdTVGODVcdTU5MERcdTRFNjBcIiknKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdCYWRnZSB0ZXh0JylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5iYWRnZVRleHQpXG4gICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuYmFkZ2VUZXh0ID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJhZGdlUHJldmlldygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLnNldE5hbWUoJ0JhZGdlIGNvbG9yJylcbiAgICAgIC5zZXREZXNjKCdDaG9vc2UgYSBjb2xvciBmb3IgdGhlIGJhZGdlJylcbiAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgLmFkZE9wdGlvbignIzVCOUJENScsICdcdUQ4M0RcdUREMzUgQmx1ZScpXG4gICAgICAgICAgLmFkZE9wdGlvbignIzcwQUQ0NycsICdcdUQ4M0RcdURGRTIgR3JlZW4nKVxuICAgICAgICAgIC5hZGRPcHRpb24oJyNGRkMwMDAnLCAnXHVEODNEXHVERkUxIFllbGxvdycpXG4gICAgICAgICAgLmFkZE9wdGlvbignI0ZGNkI2QicsICdcdUQ4M0RcdUREMzQgUmVkJylcbiAgICAgICAgICAuYWRkT3B0aW9uKCcjQzc4QkZGJywgJ1x1RDgzRFx1REZFMyBQdXJwbGUnKVxuICAgICAgICAgIC5hZGRPcHRpb24oJyNGRjlGNDMnLCAnXHVEODNEXHVERkUwIE9yYW5nZScpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuYmFkZ2VDb2xvcilcbiAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5iYWRnZUNvbG9yID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJhZGdlUHJldmlldygpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAvLyBcdTg5RDJcdTY4MDdcdTk4ODRcdTg5QzhcbiAgICBjb25zdCBiYWRnZVByZXZpZXcgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnYmFkZ2UtcHJldmlldy1jb250YWluZXInIH0pO1xuICAgIGJhZGdlUHJldmlldy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ByZXZpZXc6ICcsIGNsczogJ3ByZXZpZXctbGFiZWwnIH0pO1xuICAgIGNvbnN0IGJhZGdlRWwgPSBiYWRnZVByZXZpZXcuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ2JhZGdlLXByZXZpZXcnIH0pO1xuICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwgPSBiYWRnZUVsO1xuICAgIHRoaXMudXBkYXRlQmFkZ2VQcmV2aWV3KCk7XG5cbiAgICAvLyBcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBcdTUyMjBcdTk2NjRcdTYzMDlcdTk0QUVcdUZGMDhcdTU5ODJcdTY3OUNcdTY2MkZcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdUZGMDlcbiAgICBpZiAodGhpcy5leGlzdGluZ0Fubm90YXRpb24pIHtcbiAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgdGV4dDogJ0RlbGV0ZScsXG4gICAgICAgIGNsczogJ21vZC13YXJuaW5nJ1xuICAgICAgfSk7XG4gICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlQW5ub3RhdGlvbigpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAnU2F2ZScsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIHNhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVBbm5vdGF0aW9uKCk7XG4gICAgfSk7XG5cbiAgICAvLyBcdTZERkJcdTUyQTBcdTY4MzdcdTVGMEZcbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBiYWRnZVByZXZpZXdFbDogSFRNTEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSB1cGRhdGVCYWRnZVByZXZpZXcoKSB7XG4gICAgaWYgKCF0aGlzLmJhZGdlUHJldmlld0VsKSByZXR1cm47XG5cbiAgICBpZiAodGhpcy5iYWRnZVRleHQpIHtcbiAgICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwudGV4dENvbnRlbnQgPSB0aGlzLmJhZGdlVGV4dDtcbiAgICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5iYWRnZUNvbG9yO1xuICAgICAgdGhpcy5iYWRnZVByZXZpZXdFbC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwudGV4dENvbnRlbnQgPSAnTm8gYmFkZ2UnO1xuICAgICAgdGhpcy5iYWRnZVByZXZpZXdFbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xuICAgICAgdGhpcy5iYWRnZVByZXZpZXdFbC5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzYXZlQW5ub3RhdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuYW5ub3RhdGlvblRleHQudHJpbSgpKSB7XG4gICAgICBuZXcgTm90aWNlKCdQbGVhc2UgZW50ZXIgYW5ub3RhdGlvbiB0ZXh0Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGxldCBhbm5vdGF0aW9uOiBBbm5vdGF0aW9uO1xuXG4gICAgICBpZiAodGhpcy5leGlzdGluZ0Fubm90YXRpb24pIHtcbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU3M0IwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLnVwZGF0ZUFubm90YXRpb24oXG4gICAgICAgICAgdGhpcy5leGlzdGluZ0Fubm90YXRpb24uaWQsXG4gICAgICAgICAge1xuICAgICAgICAgICAgY29udGVudDogdGhpcy5hbm5vdGF0aW9uVGV4dCxcbiAgICAgICAgICAgIGJhZGdlOiB0aGlzLmJhZGdlVGV4dCA/IHtcbiAgICAgICAgICAgICAgdGV4dDogdGhpcy5iYWRnZVRleHQsXG4gICAgICAgICAgICAgIGNvbG9yOiB0aGlzLmJhZGdlQ29sb3JcbiAgICAgICAgICAgIH0gOiB1bmRlZmluZWRcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRBbm5vdGF0aW9uKFxuICAgICAgICAgIHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uLmlkXG4gICAgICAgICkhO1xuICAgICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIHVwZGF0ZWQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjVCMFx1NjI3OVx1NkNFOFxuICAgICAgICBhbm5vdGF0aW9uID0gYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuYWRkQ29udGVudEFubm90YXRpb24oXG4gICAgICAgICAgdGhpcy5jb250ZW50VW5pdC5pZCxcbiAgICAgICAgICB0aGlzLmFubm90YXRpb25UZXh0LFxuICAgICAgICAgIHRoaXMuYmFkZ2VUZXh0ID8ge1xuICAgICAgICAgICAgdGV4dDogdGhpcy5iYWRnZVRleHQsXG4gICAgICAgICAgICBjb2xvcjogdGhpcy5iYWRnZUNvbG9yXG4gICAgICAgICAgfSA6IHVuZGVmaW5lZFxuICAgICAgICApO1xuICAgICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIGFkZGVkJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMub25TYXZlKGFubm90YXRpb24pO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgYW5ub3RhdGlvbjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdFcnJvciBzYXZpbmcgYW5ub3RhdGlvbicpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGVsZXRlQW5ub3RhdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZGVsZXRlQW5ub3RhdGlvbihcbiAgICAgICAgdGhpcy5leGlzdGluZ0Fubm90YXRpb24uaWRcbiAgICAgICk7XG4gICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIGRlbGV0ZWQnKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMub25TYXZlKG51bGwgYXMgYW55KTsgLy8gXHU5MDFBXHU3N0U1XHU1MjIwXHU5NjY0XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGFubm90YXRpb246JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgnRXJyb3IgZGVsZXRpbmcgYW5ub3RhdGlvbicpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAuYW5ub3RhdGlvbi1tb2RhbCB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWNvbnRlbnQtcHJldmlldyB7XG4gICAgICAgIG1hcmdpbjogMjBweCAwO1xuICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tY29udGVudC1wcmV2aWV3IGgzIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1jb250ZW50LXByZXZpZXcgYmxvY2txdW90ZSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC5iYWRnZS1wcmV2aWV3LWNvbnRhaW5lciB7XG4gICAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIH1cblxuICAgICAgLnByZXZpZXctbGFiZWwge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMTBweDtcbiAgICAgIH1cblxuICAgICAgLmJhZGdlLXByZXZpZXcge1xuICAgICAgICBwYWRkaW5nOiA0cHggMTBweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLm1vZGFsLWJ1dHRvbi1jb250YWluZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5tb2RhbC1idXR0b24tY29udGFpbmVyIGJ1dHRvbiB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cblxuLyoqXG4gKiBcdTY1ODdcdTRFRjZcdTYyNzlcdTZDRThcdTZBMjFcdTYwMDFcdTY4NDZcbiAqL1xuZXhwb3J0IGNsYXNzIEZpbGVBbm5vdGF0aW9uTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgZmlsZVBhdGg6IHN0cmluZztcbiAgcHJpdmF0ZSBleGlzdGluZ0Fubm90YXRpb25zOiBBbm5vdGF0aW9uW10gPSBbXTtcbiAgcHJpdmF0ZSBhbm5vdGF0aW9uVGV4dDogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgb25TYXZlOiAoKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwcDogQXBwLFxuICAgIHByaXZhdGUgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbixcbiAgICBmaWxlUGF0aDogc3RyaW5nLFxuICAgIG9uU2F2ZTogKCkgPT4gdm9pZFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMuZmlsZVBhdGggPSBmaWxlUGF0aDtcbiAgICB0aGlzLm9uU2F2ZSA9IG9uU2F2ZTtcblxuICAgIC8vIFx1NTJBMFx1OEY3RFx1NzNCMFx1NjcwOVx1NjI3OVx1NkNFOFxuICAgIHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9ucyA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldEZpbGVBbm5vdGF0aW9ucyhmaWxlUGF0aCk7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0ZpbGUgQW5ub3RhdGlvbnMnIH0pO1xuXG4gICAgY29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVQYXRoLnNwbGl0KCcvJykucG9wKCk/LnJlcGxhY2UoJy5tZCcsICcnKSB8fCB0aGlzLmZpbGVQYXRoO1xuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiBgRmlsZTogJHtmaWxlTmFtZX1gLFxuICAgICAgY2xzOiAnZmlsZS1uYW1lJ1xuICAgIH0pO1xuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU3M0IwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAgaWYgKHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBleGlzdGluZ1NlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnZXhpc3RpbmctYW5ub3RhdGlvbnMnIH0pO1xuICAgICAgZXhpc3RpbmdTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0V4aXN0aW5nIEFubm90YXRpb25zJyB9KTtcblxuICAgICAgdGhpcy5leGlzdGluZ0Fubm90YXRpb25zLmZvckVhY2goYW5ub3RhdGlvbiA9PiB7XG4gICAgICAgIGNvbnN0IGFubm90YXRpb25DYXJkID0gZXhpc3RpbmdTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ2Fubm90YXRpb24tY2FyZCcgfSk7XG4gICAgICAgIGFubm90YXRpb25DYXJkLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBhbm5vdGF0aW9uLmNvbnRlbnQgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoYW5ub3RhdGlvbi5tZXRhZGF0YS5jcmVhdGVkQXQpLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuICAgICAgICBhbm5vdGF0aW9uQ2FyZC5jcmVhdGVFbCgnc21hbGwnLCB7IFxuICAgICAgICAgIHRleHQ6IGBDcmVhdGVkOiAke2RhdGV9YCxcbiAgICAgICAgICBjbHM6ICdhbm5vdGF0aW9uLWRhdGUnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGFubm90YXRpb25DYXJkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgdGV4dDogJ1x1RDgzRFx1REREMSBEZWxldGUnLFxuICAgICAgICAgIGNsczogJ2RlbGV0ZS1hbm5vdGF0aW9uLWJ0bidcbiAgICAgICAgfSk7XG4gICAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZUFubm90YXRpb24oYW5ub3RhdGlvbi5pZCk7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgIHRoaXMub25TYXZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU2NUIwXHU2Mjc5XHU2Q0U4XHU4RjkzXHU1MTY1XG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FkZCBOZXcgQW5ub3RhdGlvbicgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAuc2V0TmFtZSgnQW5ub3RhdGlvbicpXG4gICAgICAuc2V0RGVzYygnQWRkIG5vdGVzIGFib3V0IHRoaXMgZmlsZScpXG4gICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB7XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIGZpbGUgYW5ub3RhdGlvbi4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuYW5ub3RhdGlvblRleHQpXG4gICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuYW5ub3RhdGlvblRleHQgPSB2YWx1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHRleHQuaW5wdXRFbC5yb3dzID0gNDtcbiAgICAgICAgdGV4dC5pbnB1dEVsLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgfSk7XG5cbiAgICAvLyBcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG5cbiAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdTYXZlJyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgc2F2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZUFubm90YXRpb24oKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2F2ZUFubm90YXRpb24oKSB7XG4gICAgaWYgKCF0aGlzLmFubm90YXRpb25UZXh0LnRyaW0oKSkge1xuICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGVudGVyIGFubm90YXRpb24gdGV4dCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5hZGRGaWxlQW5ub3RhdGlvbihcbiAgICAgICAgdGhpcy5maWxlUGF0aCxcbiAgICAgICAgdGhpcy5hbm5vdGF0aW9uVGV4dFxuICAgICAgKTtcbiAgICAgIG5ldyBOb3RpY2UoJ0ZpbGUgYW5ub3RhdGlvbiBhZGRlZCcpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgdGhpcy5vblNhdmUoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIGZpbGUgYW5ub3RhdGlvbjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdFcnJvciBzYXZpbmcgZmlsZSBhbm5vdGF0aW9uJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkZWxldGVBbm5vdGF0aW9uKGlkOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZGVsZXRlQW5ub3RhdGlvbihpZCk7XG4gICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIGRlbGV0ZWQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgYW5ub3RhdGlvbjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdFcnJvciBkZWxldGluZyBhbm5vdGF0aW9uJyk7XG4gICAgfVxuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufSIsICJpbXBvcnQgeyBQbHVnaW4sIFRGaWxlLCBXb3Jrc3BhY2VMZWFmLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBTZXR0aW5nc1RhYiB9IGZyb20gJy4vdWkvU2V0dGluZ3NUYWInO1xuaW1wb3J0IHsgT3ZlcnZpZXdWaWV3LCBWSUVXX1RZUEVfT1ZFUlZJRVcgfSBmcm9tICcuL3VpL092ZXJ2aWV3Vmlldyc7XG5pbXBvcnQgeyBTaWRlYmFyT3ZlcnZpZXdWaWV3LCBWSUVXX1RZUEVfU0lERUJBUl9PVkVSVklFVywgVklFV19UWVBFX01BSU5fT1ZFUlZJRVcgIH0gZnJvbSAnLi91aS9TaWRlYmFyT3ZlcnZpZXdWaWV3JztcbmltcG9ydCB7IFJldmlld1ZpZXcsIFZJRVdfVFlQRV9SRVZJRVcgfSBmcm9tICcuL3VpL1Jldmlld1ZpZXcnO1xuaW1wb3J0IHsgU3RhdHNWaWV3LCBWSUVXX1RZUEVfU1RBVFMgfSBmcm9tICcuL3VpL1N0YXRzVmlldyc7XG5pbXBvcnQgeyBEYXRhTWFuYWdlciB9IGZyb20gJy4vY29yZS9EYXRhTWFuYWdlcic7XG5pbXBvcnQgeyBFeHRyYWN0aW9uRW5naW5lIH0gZnJvbSAnLi9jb3JlL0V4dHJhY3Rpb25FbmdpbmUnO1xuaW1wb3J0IHsgQW5ub3RhdGlvbk1hbmFnZXIgfSBmcm9tICcuL2NvcmUvQW5ub3RhdGlvbk1hbmFnZXInO1xuaW1wb3J0IHsgRmxhc2hjYXJkTWFuYWdlciB9IGZyb20gJy4vY29yZS9GbGFzaGNhcmRNYW5hZ2VyJztcblxuaW50ZXJmYWNlIExlYXJuaW5nU3lzdGVtU2V0dGluZ3Mge1xuICBleHRyYWN0aW9uRW5hYmxlZDogYm9vbGVhbjtcbiAgYXV0b1NjYW46IGJvb2xlYW47XG4gIGRlZmF1bHREZWNrOiBzdHJpbmc7XG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IExlYXJuaW5nU3lzdGVtU2V0dGluZ3MgPSB7XG4gIGV4dHJhY3Rpb25FbmFibGVkOiB0cnVlLFxuICBhdXRvU2NhbjogZmFsc2UsXG4gIGRlZmF1bHREZWNrOiAnRGVmYXVsdCdcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExlYXJuaW5nU3lzdGVtUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgc2V0dGluZ3M6IExlYXJuaW5nU3lzdGVtU2V0dGluZ3M7XG4gIGRhdGFNYW5hZ2VyOiBEYXRhTWFuYWdlcjtcbiAgZXh0cmFjdGlvbkVuZ2luZTogRXh0cmFjdGlvbkVuZ2luZTtcbiAgYW5ub3RhdGlvbk1hbmFnZXI6IEFubm90YXRpb25NYW5hZ2VyO1xuICBmbGFzaGNhcmRNYW5hZ2VyOiBGbGFzaGNhcmRNYW5hZ2VyO1xuXG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGNvbnNvbGUubG9nKCdMb2FkaW5nIExlYXJuaW5nIFN5c3RlbSBQbHVnaW4nKTtcblxuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICAvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdTY4MzhcdTVGQzNcdTZBMjFcdTU3NTdcbiAgICB0aGlzLmRhdGFNYW5hZ2VyID0gbmV3IERhdGFNYW5hZ2VyKHRoaXMuYXBwLCB0aGlzKTtcbiAgICBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLmluaXRpYWxpemUoKTtcblxuICAgIHRoaXMuYW5ub3RhdGlvbk1hbmFnZXIgPSBuZXcgQW5ub3RhdGlvbk1hbmFnZXIodGhpcy5hcHAsIHRoaXMpO1xuICAgIGF3YWl0IHRoaXMuYW5ub3RhdGlvbk1hbmFnZXIuaW5pdGlhbGl6ZSgpO1xuXG4gICAgdGhpcy5mbGFzaGNhcmRNYW5hZ2VyID0gbmV3IEZsYXNoY2FyZE1hbmFnZXIodGhpcy5hcHAsIHRoaXMpO1xuICAgIGF3YWl0IHRoaXMuZmxhc2hjYXJkTWFuYWdlci5pbml0aWFsaXplKCk7XG5cbiAgICB0aGlzLmV4dHJhY3Rpb25FbmdpbmUgPSBuZXcgRXh0cmFjdGlvbkVuZ2luZShcbiAgICAgIHRoaXMuYXBwLFxuICAgICAgdGhpcy5kYXRhTWFuYWdlclxuICAgICk7XG5cbiAgICAvLyBcdTZDRThcdTUxOENcdTg5QzZcdTU2RkVcbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFZJRVdfVFlQRV9PVkVSVklFVyxcbiAgICAgIChsZWFmKSA9PiBuZXcgT3ZlcnZpZXdWaWV3KGxlYWYsIHRoaXMpXG4gICAgKTtcblxuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX1NJREVCQVJfT1ZFUlZJRVcsXG4gICAgICAobGVhZikgPT4gbmV3IFNpZGViYXJPdmVydmlld1ZpZXcobGVhZiwgdGhpcywgZmFsc2UpXG4gICAgKTtcbiAgICBcbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFZJRVdfVFlQRV9NQUlOX09WRVJWSUVXLFxuICAgICAgKGxlYWYpID0+IG5ldyBTaWRlYmFyT3ZlcnZpZXdWaWV3KGxlYWYsIHRoaXMsIHRydWUpXG4gICAgKTtcblxuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX1JFVklFVyxcbiAgICAgIChsZWFmKSA9PiBuZXcgUmV2aWV3VmlldyhsZWFmLCB0aGlzKVxuICAgICk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFZJRVdfVFlQRV9TVEFUUyxcbiAgICAgIChsZWFmKSA9PiBuZXcgU3RhdHNWaWV3KGxlYWYsIHRoaXMpXG4gICAgKTtcblxuICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2V0dGluZ3NUYWIodGhpcy5hcHAsIHRoaXMpKTtcbiAgICB0aGlzLmFkZENvbW1hbmRzKCk7XG5cbiAgICAvLyBSaWJib24gXHU1NkZFXHU2ODA3XG4gICAgdGhpcy5hZGRSaWJib25JY29uKCdsYXlvdXQtbGlzdCcsICdPcGVuIExlYXJuaW5nIE92ZXJ2aWV3JywgKCkgPT4ge1xuICAgICAgdGhpcy5hY3RpdmF0ZVNpZGViYXJPdmVydmlldygpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRSaWJib25JY29uKCdsYXllcnMnLCAnU3RhcnQgUmV2aWV3JywgKCkgPT4ge1xuICAgICAgdGhpcy5hY3RpdmF0ZVJldmlldygpO1xuICAgIH0pO1xuXG4gICAgLy8gXHU3MkI2XHU2MDAxXHU2ODBGIC0gXHU2NjNFXHU3OTNBXHU1Rjg1XHU1OTBEXHU0RTYwXHU2NTcwXHU5MUNGXG4gICAgdGhpcy5zZXR1cFN0YXR1c0JhcigpO1xuXG4gICAgY29uc29sZS5sb2coJ0xlYXJuaW5nIFN5c3RlbSBQbHVnaW4gbG9hZGVkJyk7XG4gIH1cblxuICBvbnVubG9hZCgpIHtcbiAgICBjb25zb2xlLmxvZygnVW5sb2FkaW5nIExlYXJuaW5nIFN5c3RlbSBQbHVnaW4nKTtcbiAgICBcbiAgICAvLyBcdTUzRUFcdTU3MjhcdTYzRDJcdTRFRjZcdTVCOENcdTUxNjhcdTUzNzhcdThGN0RcdTY1RjZcdTYyNERcdTZFMDVcdTc0MDZcdTYyNDBcdTY3MDlcdTg5QzZcdTU2RkVcbiAgICAvLyBcdTZDRThcdTYxMEZcdUZGMUFcdThGRDlcdTkxQ0NcdTRFMERcdTg5ODFcdTUyMjBcdTk2NjRcdTcyNzlcdTVCOUFcdTg5QzZcdTU2RkVcdTdDN0JcdTU3OEJcdUZGMENcdThCQTkgT2JzaWRpYW4gXHU4MUVBXHU1REYxXHU3QkExXHU3NDA2XG4gICAgLy8gXHU1M0VBXHU2RTA1XHU3NDA2XHU2M0QyXHU0RUY2XHU3RUE3XHU1MjJCXHU3Njg0XHU4RDQ0XHU2RTkwXG4gICAgXG4gICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWFybmluZy1vdmVydmlldy1zdHlsZXMnKTtcbiAgICBpZiAoc3R5bGVFbCkge1xuICAgICAgc3R5bGVFbC5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gIH1cblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkQ29tbWFuZHMoKSB7XG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnc2Nhbi1jdXJyZW50LWZpbGUnLFxuICAgICAgbmFtZTogJ1NjYW4gY3VycmVudCBmaWxlIGZvciBjb250ZW50JyxcbiAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoIWFjdGl2ZUZpbGUpIHJldHVybjtcbiAgICAgICAgYXdhaXQgdGhpcy5leHRyYWN0aW9uRW5naW5lLnNjYW5GaWxlKGFjdGl2ZUZpbGUpO1xuICAgICAgICB0aGlzLnJlZnJlc2hPdmVydmlldygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnc2Nhbi12YXVsdCcsXG4gICAgICBuYW1lOiAnU2NhbiBlbnRpcmUgdmF1bHQnLFxuICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5leHRyYWN0aW9uRW5naW5lLnNjYW5WYXVsdCgpO1xuICAgICAgICB0aGlzLnJlZnJlc2hPdmVydmlldygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnb3Blbi1vdmVydmlldycsXG4gICAgICBuYW1lOiAnT3BlbiBMZWFybmluZyBPdmVydmlldycsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICB0aGlzLmFjdGl2YXRlU2lkZWJhck92ZXJ2aWV3KCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdvcGVuLW1haW4tb3ZlcnZpZXcnLFxuICAgICAgbmFtZTogJ09wZW4gTGVhcm5pbmcgT3ZlcnZpZXcgKE1haW4gVmlldyknLFxuICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3RpdmF0ZU1haW5WaWV3KCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdhZGQtZmlsZS1hbm5vdGF0aW9uJyxcbiAgICAgIG5hbWU6ICdBZGQgZmlsZSBhbm5vdGF0aW9uJyxcbiAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoIWFjdGl2ZUZpbGUpIHJldHVybjtcblxuICAgICAgICBjb25zdCB7IEZpbGVBbm5vdGF0aW9uTW9kYWwgfSA9IGF3YWl0IGltcG9ydCgnLi91aS9Bbm5vdGF0aW9uTW9kYWwnKTtcbiAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgRmlsZUFubm90YXRpb25Nb2RhbChcbiAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICB0aGlzLFxuICAgICAgICAgIGFjdGl2ZUZpbGUucGF0aCxcbiAgICAgICAgICAoKSA9PiB0aGlzLnJlZnJlc2hPdmVydmlldygpXG4gICAgICAgICk7XG4gICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3N0YXJ0LXJldmlldycsXG4gICAgICBuYW1lOiAnU3RhcnQgZmxhc2hjYXJkIHJldmlldycsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICB0aGlzLmFjdGl2YXRlUmV2aWV3KCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdzaG93LXN0YXRzJyxcbiAgICAgIG5hbWU6ICdTaG93IGZsYXNoY2FyZCBzdGF0aXN0aWNzJyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuYWN0aXZhdGVTdGF0cygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIFxuICBhc3luYyBhY3RpdmF0ZU1haW5WaWV3KCkge1xuICAgIGNvbnNvbGUubG9nKCdbUGx1Z2luXSBhY3RpdmF0ZU1haW5WaWV3IC0gU1RBUlQnKTtcbiAgICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG5cbiAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTVERjJcdTdFQ0ZcdTY3MDlcdTRFM0JcdTc1NENcdTk3NjJcdTg5QzZcdTU2RkVcdTYyNTNcdTVGMDBcbiAgICBsZXQgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX01BSU5fT1ZFUlZJRVcpWzBdO1xuICAgIGNvbnNvbGUubG9nKCdbUGx1Z2luXSBhY3RpdmF0ZU1haW5WaWV3IC0gZXhpc3RpbmcgbGVhZjonLCBsZWFmID8gKGxlYWYgYXMgYW55KS5pZCA6ICdub25lJyk7XG4gICAgXG4gICAgaWYgKCFsZWFmKSB7XG4gICAgICAvLyBcdTUyMUJcdTVFRkFcdTY1QjBcdTc2ODRcdTY4MDdcdTdCN0VcdTk4NzVcbiAgICAgIGxlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhZigndGFiJyk7XG4gICAgICBjb25zb2xlLmxvZygnW1BsdWdpbl0gYWN0aXZhdGVNYWluVmlldyAtIGNyZWF0aW5nIG5ldyBsZWFmOicsIChsZWFmIGFzIGFueSkuaWQpO1xuICAgICAgYXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICB0eXBlOiBWSUVXX1RZUEVfTUFJTl9PVkVSVklFVyxcbiAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgd29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gICAgY29uc29sZS5sb2coJ1tQbHVnaW5dIGFjdGl2YXRlTWFpblZpZXcgLSBFTkQnKTtcbiAgfVxuICBcbiAgYXN5bmMgYWN0aXZhdGVTaWRlYmFyT3ZlcnZpZXcoKSB7XG4gICAgY29uc29sZS5sb2coJ1tQbHVnaW5dIGFjdGl2YXRlU2lkZWJhck92ZXJ2aWV3IC0gU1RBUlQnKTtcbiAgICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG4gICAgXG4gICAgbGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcbiAgICBjb25zdCBsZWF2ZXMgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9TSURFQkFSX09WRVJWSUVXKTtcbiAgICBjb25zb2xlLmxvZygnW1BsdWdpbl0gYWN0aXZhdGVTaWRlYmFyT3ZlcnZpZXcgLSBleGlzdGluZyBsZWF2ZXMgY291bnQ6JywgbGVhdmVzLmxlbmd0aCk7XG5cbiAgICBpZiAobGVhdmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGxlYWYgPSBsZWF2ZXNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NTcyOFx1NTNGM1x1NEZBN1x1OEZCOVx1NjgwRlx1NTIxQlx1NUVGQVx1NjVCMFx1NzY4NFx1ODlDNlx1NTZGRVxuICAgICAgbGVhZiA9IHdvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xuICAgICAgY29uc29sZS5sb2coJ1tQbHVnaW5dIGFjdGl2YXRlU2lkZWJhck92ZXJ2aWV3IC0gY3JlYXRpbmcgbmV3IGxlYWY6JywgKGxlYWYgYXMgYW55KS5pZCk7XG4gICAgICBhd2FpdCBsZWFmPy5zZXRWaWV3U3RhdGUoe1xuICAgICAgICB0eXBlOiBWSUVXX1RZUEVfU0lERUJBUl9PVkVSVklFVyxcbiAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAobGVhZikge1xuICAgICAgd29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCdbUGx1Z2luXSBhY3RpdmF0ZVNpZGViYXJPdmVydmlldyAtIEVORCcpO1xuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVPdmVydmlldygpIHtcbiAgICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG4gICAgbGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcbiAgICBjb25zdCBsZWF2ZXMgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9PVkVSVklFVyk7XG5cbiAgICBpZiAobGVhdmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGxlYWYgPSBsZWF2ZXNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhZihgdGFiYCk7XG4gICAgICBhd2FpdCBsZWFmPy5zZXRWaWV3U3RhdGUoe1xuICAgICAgICB0eXBlOiBWSUVXX1RZUEVfT1ZFUlZJRVcsXG4gICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGxlYWYpIHtcbiAgICAgIHdvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlUmV2aWV3KCkge1xuICAgIGNvbnN0IHN0YXRzID0gdGhpcy5mbGFzaGNhcmRNYW5hZ2VyLmdldFN0YXRzKCk7XG4gICAgXG4gICAgaWYgKHN0YXRzLmR1ZSA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnTm8gY2FyZHMgZHVlIGZvciByZXZpZXchJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgeyB3b3Jrc3BhY2UgfSA9IHRoaXMuYXBwO1xuICAgIGxldCBsZWFmOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCA9IG51bGw7XG4gICAgY29uc3QgbGVhdmVzID0gd29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfUkVWSUVXKTtcblxuICAgIGlmIChsZWF2ZXMubGVuZ3RoID4gMCkge1xuICAgICAgbGVhZiA9IGxlYXZlc1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWFmKHRydWUpO1xuICAgICAgYXdhaXQgbGVhZj8uc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgdHlwZTogVklFV19UWVBFX1JFVklFVyxcbiAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAobGVhZikge1xuICAgICAgd29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVTdGF0cygpIHtcbiAgICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG4gICAgbGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcbiAgICBjb25zdCBsZWF2ZXMgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9TVEFUUyk7XG5cbiAgICBpZiAobGVhdmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGxlYWYgPSBsZWF2ZXNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhZigndGFiJyk7XG4gICAgICBhd2FpdCBsZWFmPy5zZXRWaWV3U3RhdGUoe1xuICAgICAgICB0eXBlOiBWSUVXX1RZUEVfU1RBVFMsXG4gICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGxlYWYpIHtcbiAgICAgIHdvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuICAgIH1cbiAgfVxuXG4gIHJlZnJlc2hPdmVydmlldygpIHtcbiAgICBjb25zb2xlLmxvZygnW1BsdWdpbl0gcmVmcmVzaE92ZXJ2aWV3IC0gU1RBUlQnKTtcbiAgICBcbiAgICAvLyBcdTUyMzdcdTY1QjBcdTY1RTdcdTcyNDggT3ZlcnZpZXdcbiAgICBjb25zdCBvdmVydmlld0xlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX09WRVJWSUVXKTtcbiAgICBjb25zb2xlLmxvZygnW1BsdWdpbl0gcmVmcmVzaE92ZXJ2aWV3IC0gVklFV19UWVBFX09WRVJWSUVXIGxlYXZlczonLCBvdmVydmlld0xlYXZlcy5sZW5ndGgpO1xuICAgIG92ZXJ2aWV3TGVhdmVzLmZvckVhY2gobGVhZiA9PiB7XG4gICAgICBjb25zdCB2aWV3ID0gbGVhZi52aWV3IGFzIE92ZXJ2aWV3VmlldztcbiAgICAgIHZpZXcucmVmcmVzaCgpO1xuICAgIH0pO1xuXG4gICAgLy8gXHU1MjM3XHU2NUIwXHU0RkE3XHU4RkI5XHU2ODBGXHU4OUM2XHU1NkZFXG4gICAgY29uc3Qgc2lkZWJhckxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1NJREVCQVJfT1ZFUlZJRVcpO1xuICAgIGNvbnNvbGUubG9nKCdbUGx1Z2luXSByZWZyZXNoT3ZlcnZpZXcgLSBWSUVXX1RZUEVfU0lERUJBUl9PVkVSVklFVyBsZWF2ZXM6Jywgc2lkZWJhckxlYXZlcy5sZW5ndGgpO1xuICAgIHNpZGViYXJMZWF2ZXMuZm9yRWFjaChsZWFmID0+IHtcbiAgICAgIGNvbnN0IHZpZXcgPSBsZWFmLnZpZXcgYXMgU2lkZWJhck92ZXJ2aWV3VmlldztcbiAgICAgIHZpZXcucmVmcmVzaCgpO1xuICAgIH0pO1xuXG4gICAgLy8gXHU1MjM3XHU2NUIwXHU0RTNCXHU3NTRDXHU5NzYyXHU4OUM2XHU1NkZFXG4gICAgY29uc3QgbWFpbkxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX01BSU5fT1ZFUlZJRVcpO1xuICAgIGNvbnNvbGUubG9nKCdbUGx1Z2luXSByZWZyZXNoT3ZlcnZpZXcgLSBWSUVXX1RZUEVfTUFJTl9PVkVSVklFVyBsZWF2ZXM6JywgbWFpbkxlYXZlcy5sZW5ndGgpO1xuICAgIG1haW5MZWF2ZXMuZm9yRWFjaChsZWFmID0+IHtcbiAgICAgIGNvbnN0IHZpZXcgPSBsZWFmLnZpZXcgYXMgU2lkZWJhck92ZXJ2aWV3VmlldztcbiAgICAgIHZpZXcucmVmcmVzaCgpO1xuICAgIH0pO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdbUGx1Z2luXSByZWZyZXNoT3ZlcnZpZXcgLSBFTkQnKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBTdGF0dXNCYXIoKSB7XG4gICAgY29uc3Qgc3RhdHVzQmFySXRlbSA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xuICAgIHN0YXR1c0Jhckl0ZW0uYWRkQ2xhc3MoJ2xlYXJuaW5nLXN5c3RlbS1zdGF0dXMnKTtcbiAgICBcbiAgICBjb25zdCB1cGRhdGVTdGF0dXMgPSAoKSA9PiB7XG4gICAgICBjb25zdCBzdGF0cyA9IHRoaXMuZmxhc2hjYXJkTWFuYWdlci5nZXRTdGF0cygpO1xuICAgICAgc3RhdHVzQmFySXRlbS5zZXRUZXh0KGBcdUQ4M0NcdURDQ0YgJHtzdGF0cy5kdWV9IGR1ZWApO1xuICAgICAgc3RhdHVzQmFySXRlbS50aXRsZSA9IGAke3N0YXRzLmR1ZX0gY2FyZHMgZHVlIGZvciByZXZpZXdcXG4ke3N0YXRzLm5ld30gbmV3IGNhcmRzYDtcbiAgICB9O1xuXG4gICAgLy8gXHU1MjFEXHU1OUNCXHU2NkY0XHU2NUIwXG4gICAgdXBkYXRlU3RhdHVzKCk7XG5cbiAgICAvLyBcdTZCQ0ZcdTUyMDZcdTk0OUZcdTY2RjRcdTY1QjBcdTRFMDBcdTZCMjFcbiAgICB0aGlzLnJlZ2lzdGVySW50ZXJ2YWwoXG4gICAgICB3aW5kb3cuc2V0SW50ZXJ2YWwodXBkYXRlU3RhdHVzLCA2MDAwMClcbiAgICApO1xuXG4gICAgLy8gXHU3MEI5XHU1MUZCXHU2MjUzXHU1RjAwXHU1OTBEXHU0RTYwXG4gICAgc3RhdHVzQmFySXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuYWN0aXZhdGVSZXZpZXcoKTtcbiAgICB9KTtcbiAgfVxufSIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcblxuZXhwb3J0IGNsYXNzIFNldHRpbmdzVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW47XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4pIHtcbiAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBkaXNwbGF5KCk6IHZvaWQge1xuICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0xlYXJuaW5nIFN5c3RlbSBTZXR0aW5ncycgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdFbmFibGUgZXh0cmFjdGlvbicpXG4gICAgICAuc2V0RGVzYygnRW5hYmxlIGF1dG9tYXRpYyBjb250ZW50IGV4dHJhY3Rpb24nKVxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT5cbiAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmV4dHJhY3Rpb25FbmFibGVkKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHRyYWN0aW9uRW5hYmxlZCA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKCdBdXRvIHNjYW4nKVxuICAgICAgLnNldERlc2MoJ0F1dG9tYXRpY2FsbHkgc2NhbiBmaWxlcyB3aGVuIHRoZXkgYXJlIG9wZW5lZCcpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1NjYW4pXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9TY2FuID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgZGVjaycpXG4gICAgICAuc2V0RGVzYygnRGVmYXVsdCBkZWNrIG5hbWUgZm9yIG5ldyBmbGFzaGNhcmRzJylcbiAgICAgIC5hZGRUZXh0KHRleHQgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRGVmYXVsdCcpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHREZWNrKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0RGVjayA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG4gIH1cbn0iLCAiLy8gU2lkZWJhck92ZXJ2aWV3Vmlldy50cyAtIFx1NUI4Q1x1NjU3NFx1NUI5RVx1NzNCMFx1NzI0OFx1NjcyQ1xuaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlLCBNZW51LCBOb3RpY2UsIE1vZGFsLCBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IENvbnRlbnRVbml0IH0gZnJvbSAnLi4vY29yZS9EYXRhTWFuYWdlcic7XG5pbXBvcnQgeyBGbGFzaGNhcmQgfSBmcm9tICcuLi9jb3JlL0ZsYXNoY2FyZE1hbmFnZXInO1xuaW1wb3J0IHsgUXVpY2tGbGFzaGNhcmRDcmVhdG9yIH0gZnJvbSAnLi4vY29yZS9RdWlja0ZsYXNoY2FyZENyZWF0b3InO1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX1NJREVCQVJfT1ZFUlZJRVcgPSAnbGVhcm5pbmctc3lzdGVtLXNpZGViYXItb3ZlcnZpZXcnO1xuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9NQUlOX09WRVJWSUVXID0gJ2xlYXJuaW5nLXN5c3RlbS1tYWluLW92ZXJ2aWV3JztcblxudHlwZSBGaWx0ZXJNb2RlID0gJ2FsbCcgfCAnYW5ub3RhdGVkJyB8ICdmbGFzaGNhcmRzJztcbnR5cGUgRGlzcGxheU1vZGUgPSAnc2lkZWJhcicgfCAnbWFpbic7XG50eXBlIEdyb3VwTW9kZSA9ICdmaWxlJyB8ICd0YWcnIHwgJ2RhdGUnO1xudHlwZSBWaWV3VHlwZSA9ICdub3RlcycgfCAnY2FyZHMnO1xuXG5leHBvcnQgY2xhc3MgU2lkZWJhck92ZXJ2aWV3VmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbjtcbiAgXG4gIC8vIFx1NzJCNlx1NjAwMVx1N0JBMVx1NzQwNlxuICBwcml2YXRlIGZvcmNlTWFpbk1vZGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBzZWFyY2hRdWVyeTogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgZmlsdGVyTW9kZTogRmlsdGVyTW9kZSA9ICdhbGwnO1xuICBwcml2YXRlIGdyb3VwTW9kZTogR3JvdXBNb2RlID0gJ2ZpbGUnO1xuICBwcml2YXRlIHNlbGVjdGVkRmlsZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgZGlzcGxheU1vZGU6IERpc3BsYXlNb2RlID0gJ3NpZGViYXInO1xuICBwcml2YXRlIHZpZXdUeXBlOiBWaWV3VHlwZSA9ICdub3Rlcyc7XG4gIHByaXZhdGUgYWN0aXZlTWVudUlkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzYXZlZFNjcm9sbFBvc2l0aW9uOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIHNob3VsZFJlc3RvcmVTY3JvbGw6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBiYXRjaE1vZGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBzZWxlY3RlZFVuaXRJZHM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIHNlbGVjdGVkQ2FyZElkczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG5cbiAgXG4gIC8vIFx1NjAyN1x1ODBGRFx1NEYxOFx1NTMxNlxuICBwcml2YXRlIHNlYXJjaERlYm91bmNlVGltZXI6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGlzUmVuZGVyaW5nOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbiwgZm9yY2VNYWluTW9kZSA9IGZhbHNlKSB7XG4gICAgc3VwZXIobGVhZik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy5mb3JjZU1haW5Nb2RlID0gZm9yY2VNYWluTW9kZTsgIFxuXG5cbiAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gIGlmIChhY3RpdmVGaWxlKSB7XG4gICAgdGhpcy5zZWxlY3RlZEZpbGUgPSBhY3RpdmVGaWxlLnBhdGg7XG4gIH1cbiAgICAvLyAqKlx1NEZFRVx1NjUzOTogXHU2REZCXHU1MkEwXHU5NjMyXHU2Mjk2XHU3Njg0IHJlc2l6ZSBcdTc2RDFcdTU0MkMqKlxuICAgIGxldCByZXNpemVUaW1lcjogbnVtYmVyO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQocmVzaXplVGltZXIpO1xuICAgICAgcmVzaXplVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuZGV0ZWN0RGlzcGxheU1vZGUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIH0sIDE1MCk7XG4gICAgfSk7XG4gICAgLy8gXHU3NkQxXHU1NDJDXHU3QTk3XHU1M0UzXHU1OTI3XHU1QzBGXHU1M0Q4XHU1MzE2XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcbiAgICAgIHRoaXMuZGV0ZWN0RGlzcGxheU1vZGUoKTtcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgIC8vIHJldHVybiB0aGlzLmZvcmNlTWFpbk1vZGUgPyBWSUVXX1RZUEVfTUFJTl9PVkVSVklFVyA6IFZJRVdfVFlQRV9TSURFQkFSX09WRVJWSUVXO1xuICAvLyAgXHU4QzAzXHU4QkQ1XG4gICAgY29uc3Qgdmlld1R5cGUgPSB0aGlzLmZvcmNlTWFpbk1vZGUgPyBWSUVXX1RZUEVfTUFJTl9PVkVSVklFVyA6IFZJRVdfVFlQRV9TSURFQkFSX09WRVJWSUVXO1xuXG4gICAgcmV0dXJuIHZpZXdUeXBlO1xuICB9XG5cbiAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ0xlYXJuaW5nIE92ZXJ2aWV3JztcbiAgfVxuXG4gIGdldEljb24oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ2Jvb2stbWFya2VkJztcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICBjb25zb2xlLmxvZygnW29uT3Blbl0gU3RhcnQnLCB7XG4gICAgICBmb3JjZU1haW5Nb2RlOiB0aGlzLmZvcmNlTWFpbk1vZGUsXG4gICAgICB2aWV3VHlwZTogdGhpcy5nZXRWaWV3VHlwZSgpXG4gICAgfSk7XG4gICAgXG4gICAgdGhpcy5kZXRlY3REaXNwbGF5TW9kZSgpO1xuICAgIGNvbnNvbGUubG9nKCdbb25PcGVuXSBBZnRlciBkZXRlY3REaXNwbGF5TW9kZTonLCB0aGlzLmRpc3BsYXlNb2RlKTtcbiAgXG4gICAgaWYgKCF0aGlzLmZvcmNlTWFpbk1vZGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbb25PcGVuXSBSZWdpc3RlcmluZyBhY3RpdmUtbGVhZi1jaGFuZ2UnKTtcbiAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKCdhY3RpdmUtbGVhZi1jaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1thY3RpdmUtbGVhZi1jaGFuZ2VdIFRyaWdnZXJlZCcpO1xuICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICAgIGlmIChhY3RpdmVGaWxlICYmIHRoaXMuZGlzcGxheU1vZGUgPT09ICdzaWRlYmFyJykge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEZpbGUgPSBhY3RpdmVGaWxlLnBhdGg7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgXG4gICAgLy8gdGhpcy5yZWdpc3RlckV2ZW50KHNcbiAgICAvLyAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignbGF5b3V0LWNoYW5nZScsICgpID0+IHtcbiAgICAvLyAgICAgY29uc29sZS5sb2coJ1tsYXlvdXQtY2hhbmdlXSBUcmlnZ2VyZWQnKTtcbiAgICAvLyAgICAgdGhpcy5kZXRlY3REaXNwbGF5TW9kZSgpO1xuICAgIC8vICAgICB0aGlzLnJlbmRlcigpO1xuICAgIC8vICAgfSlcbiAgICAvLyApO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdbb25PcGVuXSBCZWZvcmUgcmVuZGVyJyk7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgICBjb25zb2xlLmxvZygnW29uT3Blbl0gQWZ0ZXIgcmVuZGVyJyk7XG4gICAgXG4gICAgdGhpcy5hZGRTdHlsZXMoKTtcbiAgICBjb25zb2xlLmxvZygnW29uT3Blbl0gQ29tcGxldGVkJyk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTY4MzhcdTVGQzNcdTY1QjlcdTZDRDUgPT09PT09PT09PT09PT09PT09PT1cbiAgXG4gIC8qKlxuICAgKiBcdTY4QzBcdTZENEJcdTVGNTNcdTUyNERcdTY2M0VcdTc5M0FcdTZBMjFcdTVGMEZcdUZGMDhcdTRGQTdcdThGQjlcdTY4MEYgdnMgXHU0RTNCXHU3NTRDXHU5NzYyXHVGRjA5XG4gICAqL1xuICBwcml2YXRlIGRldGVjdERpc3BsYXlNb2RlKCkge1xuICAgIGlmICh0aGlzLmZvcmNlTWFpbk1vZGUpIHtcbiAgICAgIHRoaXMuZGlzcGxheU1vZGUgPSAnbWFpbic7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBhcmVudFNwbGl0ID0gKHRoaXMubGVhZiBhcyBhbnkpLnBhcmVudFNwbGl0O1xuICAgIGNvbnN0IGlzTGVmdFNpZGViYXIgPSBwYXJlbnRTcGxpdD8udHlwZSA9PT0gJ3NwbGl0JyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmxlZnRTcGxpdCA9PT0gcGFyZW50U3BsaXQ7XG4gICAgY29uc3QgaXNSaWdodFNpZGViYXIgPSBwYXJlbnRTcGxpdD8udHlwZSA9PT0gJ3NwbGl0JyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yaWdodFNwbGl0ID09PSBwYXJlbnRTcGxpdDtcbiAgICBcbiAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGFpbmVyRWw7XG4gICAgY29uc3Qgd2lkdGggPSBjb250YWluZXJFbC5jbGllbnRXaWR0aDtcbiAgICBjb25zdCBpc05hcnJvdyA9IHdpZHRoIDwgNTAwO1xuICAgIFxuICAgIGNvbnN0IGlzU2lkZWJhciA9IGlzTGVmdFNpZGViYXIgfHwgaXNSaWdodFNpZGViYXIgfHwgaXNOYXJyb3c7XG5cbiAgICB0aGlzLmRpc3BsYXlNb2RlID0gaXNTaWRlYmFyID8gJ3NpZGViYXInIDogJ21haW4nO1xuICAgIFxuICB9XG5cbiAgLyoqXG4gICAqIFx1NTIzN1x1NjVCMFx1ODlDNlx1NTZGRVxuICAgKi9cbiAgcmVmcmVzaCgpIHtcblxuICAgIGlmICghdGhpcy5pc1JlbmRlcmluZykge1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU0RTNCXHU2RTMyXHU2N0QzXHU2NUI5XHU2Q0Q1XG4gICAqL1xuICBwcml2YXRlIHJlbmRlcigpIHtcbiAgICBjb25zb2xlLmxvZygnW3JlbmRlcl0gQ2FsbGVkJywge1xuICAgICAgaXNSZW5kZXJpbmc6IHRoaXMuaXNSZW5kZXJpbmcsXG4gICAgICBkaXNwbGF5TW9kZTogdGhpcy5kaXNwbGF5TW9kZSxcbiAgICAgIGZpbHRlck1vZGU6IHRoaXMuZmlsdGVyTW9kZSxcbiAgICAgIHZpZXdUeXBlOiB0aGlzLnZpZXdUeXBlXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKHRoaXMuaXNSZW5kZXJpbmcpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbcmVuZGVyXSBBbHJlYWR5IHJlbmRlcmluZywgcmV0dXJuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLnNlYXJjaERlYm91bmNlVGltZXIgIT09IG51bGwpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyKTtcbiAgICAgIHRoaXMuc2VhcmNoRGVib3VuY2VUaW1lciA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuaXNSZW5kZXJpbmcgPSB0cnVlO1xuICAgIGNvbnNvbGUubG9nKCdbcmVuZGVyXSBTZXQgaXNSZW5kZXJpbmcgPSB0cnVlJyk7XG4gICAgXG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudDtcbiAgICBjb25zb2xlLmxvZygnW3JlbmRlcl0gR290IGNvbnRhaW5lcjonLCAhIWNvbnRhaW5lcik7XG4gICAgXG4gICBcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTRGQTdcdThGQjlcdTY4MEZcdTZBMjFcdTVGMEZcdUZGMENcdTYwM0JcdTY2MkZcdTRGRERcdTVCNThcdTVGNTNcdTUyNERcdTZFREFcdTUyQThcdTRGNERcdTdGNkVcbiAgICBpZiAodGhpcy5kaXNwbGF5TW9kZSA9PT0gJ3NpZGViYXInKSB7XG4gICAgICBjb25zdCBjb250ZW50TGlzdCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc2lkZWJhci1jb250ZW50LWxpc3QnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmIChjb250ZW50TGlzdCkge1xuICAgICAgICB0aGlzLnNhdmVkU2Nyb2xsUG9zaXRpb24gPSBjb250ZW50TGlzdC5zY3JvbGxUb3A7XG4gICAgICB9XG4gICAgICBcbiAgICB9XG4gICAgLy8gXHVEODNEXHVERDI3IFx1NkUwNVx1OTY2NFx1NjI0MFx1NjcwOVx1NTNFRlx1ODBGRFx1OTYzQlx1NTg1RVx1NEVBNFx1NEU5Mlx1NzY4NFx1NjgzN1x1NUYwRlxuY29udGFpbmVyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7XG5jb25zdCB0b29sYmFyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyLXRvb2xiYXInKSBhcyBIVE1MRWxlbWVudDtcbmlmICh0b29sYmFyKSB7XG4gIHRvb2xiYXIuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJztcbiAgdG9vbGJhci5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gIHRvb2xiYXIuc3R5bGUuekluZGV4ID0gJzEwMCc7XG59XG4gICAgICAvLyBcdTI3MDUgXHU1OTgyXHU2NzlDXHU2NjJGXHU0RTNCXHU3NTRDXHU5NzYyXHU2QTIxXHU1RjBGXHU0RTE0XHU2Q0ExXHU2NzA5XHU5MDA5XHU0RTJEXHVGRjBDXHU1MjFEXHU1OUNCXHU1MzE2XHU5RUQ4XHU4QkE0XHU5MDA5XHU0RTJEXG4gIGlmICh0aGlzLmRpc3BsYXlNb2RlID09PSAnbWFpbicgJiYgIXRoaXMuc2VsZWN0ZWRGaWxlICYmIHRoaXMudmlld1R5cGUgPT09ICdub3RlcycpIHtcbiAgICBjb25zdCB1bml0cyA9IHRoaXMuZ2V0RmlsdGVyZWRVbml0cygpO1xuICAgIGNvbnN0IGdyb3VwZWQgPSB0aGlzLmdyb3VwVW5pdHModW5pdHMpO1xuICAgIGlmIChncm91cGVkLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gZ3JvdXBlZFswXS5ncm91cEtleTtcbiAgICB9XG4gIH1cbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBjb250YWluZXIuYWRkQ2xhc3MoJ2xlYXJuaW5nLW92ZXJ2aWV3LWNvbnRhaW5lcicpO1xuICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtbW9kZScsIHRoaXMuZGlzcGxheU1vZGUpO1xuICBcbiAgICAvLyBcdTY4MzlcdTYzNkVcdTZBMjFcdTVGMEZcdTZFMzJcdTY3RDNcdTRFMERcdTU0MENcdTVFMDNcdTVDNDBcbiAgICBpZiAodGhpcy5kaXNwbGF5TW9kZSA9PT0gJ3NpZGViYXInKSB7XG4gICAgICB0aGlzLnJlbmRlclNpZGViYXJNb2RlKGNvbnRhaW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVuZGVyTWFpbk1vZGUoY29udGFpbmVyKTtcbiAgICB9XG4gICAgXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU5NzAwXHU4OTgxXHU2MDYyXHU1OTBEXHU2RURBXHU1MkE4XHU0RjREXHU3RjZFXG4gICAgaWYgKHRoaXMuZGlzcGxheU1vZGUgPT09ICdzaWRlYmFyJyAmJiB0aGlzLnNob3VsZFJlc3RvcmVTY3JvbGwpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnRMaXN0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyLWNvbnRlbnQtbGlzdCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgaWYgKGNvbnRlbnRMaXN0KSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgY29udGVudExpc3Quc2Nyb2xsVG9wID0gdGhpcy5zYXZlZFNjcm9sbFBvc2l0aW9uO1xuXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmlzUmVuZGVyaW5nID0gZmFsc2U7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBcdTRFQzVcdTUyMzdcdTY1QjBcdTUxODVcdTVCQjlcdTUzM0FcdTU3REZcdUZGMDhcdTRFMERcdTkxQ0RcdTY1QjBcdTZFMzJcdTY3RDNcdTY1NzRcdTRFMkFcdTg5QzZcdTU2RkVcdUZGMDlcbiAgICovXG4gIHByaXZhdGUgcmVmcmVzaENvbnRlbnQoKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudDtcbiAgICBcbiAgICBpZiAodGhpcy5kaXNwbGF5TW9kZSA9PT0gJ3NpZGViYXInKSB7XG4gICAgICBjb25zdCBjb250ZW50TGlzdCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc2lkZWJhci1jb250ZW50LWxpc3QnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmIChjb250ZW50TGlzdCkge1xuICAgICAgICAvLyBcdTRGRERcdTVCNThcdTZFREFcdTUyQThcdTRGNERcdTdGNkVcbiAgICAgICAgdGhpcy5zYXZlZFNjcm9sbFBvc2l0aW9uID0gY29udGVudExpc3Quc2Nyb2xsVG9wO1xuICAgICAgICBcbiAgICAgICAgY29udGVudExpc3QuZW1wdHkoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJDb21wYWN0Q29udGVudExpc3QoY29udGVudExpc3QpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2MDYyXHU1OTBEXHU2RURBXHU1MkE4XHU0RjREXHU3RjZFXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgY29udGVudExpc3Quc2Nyb2xsVG9wID0gdGhpcy5zYXZlZFNjcm9sbFBvc2l0aW9uO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcmlnaHRQYW5lbCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucmlnaHQtcGFuZWwnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmIChyaWdodFBhbmVsKSB7XG4gICAgICAgIHJpZ2h0UGFuZWwuZW1wdHkoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJSaWdodFBhbmVsKHJpZ2h0UGFuZWwpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFx1NEZBN1x1OEZCOVx1NjgwRlx1NkEyMVx1NUYwRlx1NkUzMlx1NjdEMyA9PT09PT09PT09PT09PT09PT09PVxuICBcbiAgcHJpdmF0ZSByZW5kZXJTaWRlYmFyTW9kZShjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gXHU5ODc2XHU5MEU4XHU1REU1XHU1MTc3XHU2ODBGXG4gICAgdGhpcy5yZW5kZXJTaWRlYmFyVG9vbGJhcihjb250YWluZXIpO1xuICAgIFxuICAgIC8vIFx1NTE4NVx1NUJCOVx1NTIxN1x1ODg2OFx1RkYwOFx1N0QyN1x1NTFEMVx1NkEyMVx1NUYwRlx1RkYwOVxuICAgIGNvbnN0IGNvbnRlbnRMaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3NpZGViYXItY29udGVudC1saXN0JyB9KTtcbiAgICB0aGlzLnJlbmRlckNvbXBhY3RDb250ZW50TGlzdChjb250ZW50TGlzdCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclNpZGViYXJUb29sYmFyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zb2xlLmxvZygnW3JlbmRlclNpZGViYXJUb29sYmFyXSBTdGFydCcpO1xuICAgIGNvbnN0IHRvb2xiYXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc2lkZWJhci10b29sYmFyJyB9KTtcbiAgICBjb25zb2xlLmxvZygnW3JlbmRlclNpZGViYXJUb29sYmFyXSBDcmVhdGVkIHRvb2xiYXInKTtcbiAgICBcbiAgICAvLyBcdTY0MUNcdTdEMjJcdTY4NDZcbiAgICBjb25zdCBzZWFyY2hDb250YWluZXIgPSB0b29sYmFyLmNyZWF0ZURpdih7IGNsczogJ3NlYXJjaC1jb250YWluZXInIH0pO1xuICAgIGNvbnNvbGUubG9nKCdbcmVuZGVyU2lkZWJhclRvb2xiYXJdIENyZWF0ZWQgc2VhcmNoQ29udGFpbmVyJyk7XG4gICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzZWFyY2hDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgcGxhY2Vob2xkZXI6ICdcdUQ4M0RcdUREMEQgXHU2NDFDXHU3RDIyXHU3QjE0XHU4QkIwLi4uJyxcbiAgICAgIGNsczogJ3NlYXJjaC1pbnB1dCdcbiAgICB9KTtcbiAgICBzZWFyY2hJbnB1dC52YWx1ZSA9IHRoaXMuc2VhcmNoUXVlcnk7XG4gICAgXG4gICAgLy8gXHU0RjdGXHU3NTI4XHU5NjMyXHU2Mjk2XHU0RjE4XHU1MzE2XHU2NDFDXHU3RDIyXG4gICAgc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG4gICAgICB0aGlzLnNlYXJjaFF1ZXJ5ID0gdmFsdWU7XG4gICAgICBcbiAgICAgIC8vIFx1NkUwNVx1OTY2NFx1NEU0Qlx1NTI0RFx1NzY4NFx1NUI5QVx1NjVGNlx1NTY2OFxuICAgICAgaWYgKHRoaXMuc2VhcmNoRGVib3VuY2VUaW1lciAhPT0gbnVsbCkge1xuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc2VhcmNoRGVib3VuY2VUaW1lcik7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NjVCMFx1NzY4NFx1NUI5QVx1NjVGNlx1NTY2OFxuICAgICAgdGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5jbGVhcigpO1xuICAgICAgICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5jbGVhcigpO1xuICAgICAgICB0aGlzLnJlZnJlc2hDb250ZW50KCk7XG4gICAgICB9LCAzMDApOyAvLyAzMDBtcyBcdTk2MzJcdTYyOTZcbiAgICB9KTtcblxuICAgIC8vIFx1OEZDN1x1NkVFNFx1NTY2OFxuICAgIGNvbnN0IGZpbHRlcnMgPSB0b29sYmFyLmNyZWF0ZURpdih7IGNsczogJ2ZpbHRlci1jaGlwcycgfSk7XG4gICAgXG4gICAgY29uc3QgZmlsdGVyT3B0aW9ucyA9IFtcbiAgICAgIHsgbW9kZTogJ2FsbCcgYXMgRmlsdGVyTW9kZSwgaWNvbjogJ1x1RDgzRFx1RENERCcsIGxhYmVsOiAnXHU1MTY4XHU5MEU4JyB9LFxuICAgICAgeyBtb2RlOiAnYW5ub3RhdGVkJyBhcyBGaWx0ZXJNb2RlLCBpY29uOiAnXHVEODNEXHVEQ0FDJywgbGFiZWw6ICdcdTYyNzlcdTZDRTgnIH0sXG4gICAgICB7IG1vZGU6ICdmbGFzaGNhcmRzJyBhcyBGaWx0ZXJNb2RlLCBpY29uOiAnXHVEODNDXHVEQ0NGJywgbGFiZWw6ICdcdTk1RUFcdTUzNjEnIH1cbiAgICBdO1xuXG4gICAgZmlsdGVyT3B0aW9ucy5mb3JFYWNoKCh7IG1vZGUsIGljb24sIGxhYmVsIH0pID0+IHtcbiAgICAgIGNvbnN0IGNoaXAgPSBmaWx0ZXJzLmNyZWF0ZURpdih7XG4gICAgICAgIGNsczogYGZpbHRlci1jaGlwICR7dGhpcy5maWx0ZXJNb2RlID09PSBtb2RlID8gJ2FjdGl2ZScgOiAnJ31gLFxuICAgICAgICB0ZXh0OiBgJHtpY29ufSAke2xhYmVsfWAgIFxuICAgICAgfSk7XG4gICAgICBjaGlwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5maWx0ZXJNb2RlICE9PSBtb2RlKSB7XG4gICAgICAgICAgdGhpcy5maWx0ZXJNb2RlID0gbW9kZTtcbiAgICB0aGlzLmF1dG9TZWxlY3RBbGwoKTtcbiAgICAgICAgICB0aGlzLnNob3VsZFJlc3RvcmVTY3JvbGwgPSBmYWxzZTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW0ZpbHRlciBDbGlja10gQmVmb3JlIHJlbmRlcicpO1xuICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1tGaWx0ZXIgQ2xpY2tdIEFmdGVyIHJlbmRlcicpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIFx1NTIwNlx1N0VDNFx1NkEyMVx1NUYwRlx1NTIwN1x1NjM2MlxuICAgIGNvbnN0IGdyb3VwU3dpdGNoZXIgPSB0b29sYmFyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLXN3aXRjaGVyJyB9KTtcbiAgICBcbiAgICBjb25zdCBncm91cE9wdGlvbnMgPSBbXG4gICAgICB7IG1vZGU6ICdmaWxlJyBhcyBHcm91cE1vZGUsIGljb246ICdcdUQ4M0RcdURDQzEnLCB0b29sdGlwOiAnXHU2MzA5XHU2NTg3XHU0RUY2JyB9LFxuICAgICAgeyBtb2RlOiAndGFnJyBhcyBHcm91cE1vZGUsIGljb246ICdcdUQ4M0NcdURGRjdcdUZFMEYnLCB0b29sdGlwOiAnXHU2MzA5XHU2ODA3XHU3QjdFJyB9LFxuICAgICAgeyBtb2RlOiAnZGF0ZScgYXMgR3JvdXBNb2RlLCBpY29uOiAnXHVEODNEXHVEQ0M1JywgdG9vbHRpcDogJ1x1NjMwOVx1NjVFNVx1NjcxRicgfVxuICAgIF07XG5cbiAgICBncm91cE9wdGlvbnMuZm9yRWFjaCgoeyBtb2RlLCBpY29uLCB0b29sdGlwIH0pID0+IHtcbiAgICAgIGNvbnN0IGJ0biA9IGdyb3VwU3dpdGNoZXIuY3JlYXRlRGl2KHtcbiAgICAgICAgY2xzOiBgZ3JvdXAtYnRuICR7dGhpcy5ncm91cE1vZGUgPT09IG1vZGUgPyAnYWN0aXZlJyA6ICcnfWAsXG4gICAgICAgIHRleHQ6IGljb25cbiAgICAgIH0pO1xuICAgICAgYnRuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHRvb2x0aXApO1xuICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5ncm91cE1vZGUgIT09IG1vZGUpIHtcbiAgICAgICAgICB0aGlzLmdyb3VwTW9kZSA9IG1vZGU7XG4gICAgdGhpcy5hdXRvU2VsZWN0QWxsKCk7XG4gICAgICBcbiAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuXG5cbi8vIFx1N0VERlx1OEJBMVx1NEZFMVx1NjA2Rlx1NTQ4Q1x1NTE2OFx1OTAwOVx1NjMwOVx1OTRBRVx1NUJCOVx1NTY2OChcdTVFNzZcdTUyMTdcdTY2M0VcdTc5M0EpXG5jb25zdCBzdGF0c1JvdyA9IHRvb2xiYXIuY3JlYXRlRGl2KHsgY2xzOiAnc3RhdHMtcm93JyB9KTtcblxuLy8gXHU1MTY4XHU5MDA5L1x1NUI4Q1x1NjIxMFx1NjMwOVx1OTRBRVxuY29uc3Qgc2VsZWN0QWxsQnRuID0gc3RhdHNSb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgdGV4dDogdGhpcy5pc0FsbFNlbGVjdGVkKCkgPyAnXHUyNzEzJyA6ICdcdTI2MTAnLFxuICBjbHM6IGBzZWxlY3QtYWxsLWJ0bi1zaWRlYmFyICR7dGhpcy5pc0FsbFNlbGVjdGVkKCkgPyAnY29tcGxldGVkJyA6ICcnfWAsXG4gICB0aXRsZTogdGhpcy5pc0FsbFNlbGVjdGVkKCkgPyAnXHU1M0Q2XHU2RDg4XHU1MTY4XHU5MDA5JyA6ICdcdTUxNjhcdTkwMDknXG59KTtcbmNvbnN0IHNob3VsZERpc2FibGUgPSAhdGhpcy5zZWxlY3RlZEZpbGUgJiYgdGhpcy5ncm91cE1vZGUgIT09ICdmaWxlJztcbmlmIChzaG91bGREaXNhYmxlKSB7XG4gIHNlbGVjdEFsbEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gIHNlbGVjdEFsbEJ0bi5zdHlsZS5vcGFjaXR5ID0gJzAuNSc7XG4gIHNlbGVjdEFsbEJ0bi5zdHlsZS5jdXJzb3IgPSAnbm90LWFsbG93ZWQnO1xuICBzZWxlY3RBbGxCdG4udGl0bGUgPSAnXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU0RTAwXHU0RTJBXHU1MjA2XHU3RUM0Jztcbn1cbnNlbGVjdEFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgdGhpcy50b2dnbGVTZWxlY3RBbGwoKTtcbn0pO1xuXG5cblxuLy8gXHU2Mjc5XHU5MUNGXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFKFx1NjI3OVx1OTFDRlx1NkEyMVx1NUYwRlx1NEUwQlx1NTlDQlx1N0VDOFx1NjYzRVx1NzkzQSlcbmlmICh0aGlzLmJhdGNoTW9kZSkge1xuICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ25vdGVzJykge1xuICAgIGNvbnN0IGNyZWF0ZUJ0biA9IHN0YXRzUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiBgXHUyNkExKCR7dGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZX0pYCxcbiAgICAgIGNsczogJ2JhdGNoLWNyZWF0ZS1jYXJkcy1idG4tc2lkZWJhcicsXG4gICAgICB0aXRsZTogJ1x1NjI3OVx1OTFDRlx1NTIzNlx1NTM2MSdcbiAgICB9KTtcbiAgICBjcmVhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZSA9PT0gMCkge1xuICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU4OTgxXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXHU3Njg0XHU3QjE0XHU4QkIwJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuYmF0Y2hDcmVhdGVGbGFzaGNhcmRzKCk7XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBkZWxldGVCdG4gPSBzdGF0c1Jvdy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgIHRleHQ6IGBcdUQ4M0RcdURERDFcdUZFMEYoJHt0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnID8gdGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZSA6IHRoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemV9KWAsXG4gICAgY2xzOiAnYmF0Y2gtZGVsZXRlLWJ0bi1zaWRlYmFyJyxcbiAgICB0aXRsZTogJ1x1NjI3OVx1OTFDRlx1NTIyMFx1OTY2NCdcbiAgfSk7XG4gIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zdCBjb3VudCA9IHRoaXMudmlld1R5cGUgPT09ICdjYXJkcycgPyB0aGlzLnNlbGVjdGVkQ2FyZElkcy5zaXplIDogdGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZTtcbiAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTg5ODFcdTUyMjBcdTk2NjRcdTc2ODRcdTk4NzlcdTc2RUUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMudmlld1R5cGUgPT09ICdjYXJkcycpIHtcbiAgICAgIHRoaXMuYmF0Y2hEZWxldGVGbGFzaGNhcmRzKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYmF0Y2hEZWxldGVOb3RlcygpO1xuICAgIH1cbiAgfSk7XG4gIC8vIFx1NTNENlx1NkQ4OFx1NjMwOVx1OTRBRVx1RkYwOFx1NjI3OVx1OTFDRlx1NkEyMVx1NUYwRlx1NEUwQlx1NTlDQlx1N0VDOFx1NjYzRVx1NzkzQVx1RkYwOVxuaWYgKHRoaXMuYmF0Y2hNb2RlKSB7XG4gIGNvbnN0IGNhbmNlbEJ0biA9IHN0YXRzUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgdGV4dDogJ1x1MjcxNScsXG4gICAgY2xzOiAnY2FuY2VsLXNlbGVjdGlvbi1idG4tc2lkZWJhcicsXG4gICAgdGl0bGU6ICdcdTUxNzNcdTk1RUQnXG4gIH0pO1xuICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICB9KTtcbn1cbn1cblxuXG4gIH1cblxuICAvKipcbiAgICogXHU2RTMyXHU2N0QzXHU3RDI3XHU1MUQxXHU1MTg1XHU1QkI5XHU1MjE3XHU4ODY4XHVGRjA4XHU0RkE3XHU4RkI5XHU2ODBGXHU2QTIxXHU1RjBGXHVGRjA5XG4gICAqL1xuICBwcml2YXRlIHJlbmRlckNvbXBhY3RDb250ZW50TGlzdChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgbGV0IHVuaXRzID0gdGhpcy5nZXRGaWx0ZXJlZFVuaXRzKCk7XG5cbiAgLy8gXHU2NUIwXHU1ODlFOlx1NTk4Mlx1Njc5Q1x1NjYyRlx1NEZBN1x1OEZCOVx1NjgwRlx1NkEyMVx1NUYwRlx1NEUxNFx1NjcwOVx1OTAwOVx1NEUyRFx1NjU4N1x1NEVGNixcdTUzRUFcdTY2M0VcdTc5M0FcdThCRTVcdTY1ODdcdTRFRjZcdTc2ODRcdTdCMTRcdThCQjBcbiAgaWYgKHRoaXMuZGlzcGxheU1vZGUgPT09ICdzaWRlYmFyJyAmJiB0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgIHVuaXRzID0gdW5pdHMuZmlsdGVyKHVuaXQgPT4gdW5pdC5zb3VyY2UuZmlsZSA9PT0gdGhpcy5zZWxlY3RlZEZpbGUpO1xuICB9XG5cbiAgaWYgKHVuaXRzLmxlbmd0aCA9PT0gMCkge1xuICAgIC8vIFx1RDgzRFx1REQyNyBcdTZERkJcdTUyQTBcdThGRDlcdTZCQjU6XHU2NjNFXHU3OTNBXHU2M0QwXHU3OTNBXHU0RkUxXHU2MDZGXG4gICAgY29uc3QgZW1wdHlEaXYgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZW1wdHktc3RhdGUnIH0pO1xuICAgIFxuICAgIGlmICh0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgZW1wdHlEaXYuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogMjBweDsgdGV4dC1hbGlnbjogY2VudGVyO1wiPlxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJmb250LXNpemU6IDMycHg7IG1hcmdpbi1ib3R0b206IDEwcHg7XCI+XHVEODNEXHVEQ0VEPC9kaXY+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cImNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcIj5cdTVGNTNcdTUyNERcdTY1ODdcdTY4NjNcdTY2ODJcdTY1RTBcdTdCMTRcdThCQjA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC1zaXplOiAxMnB4OyBjb2xvcjogdmFyKC0tdGV4dC1mYWludCk7IG1hcmdpbi10b3A6IDhweDtcIj5cbiAgICAgICAgICAgICR7dGhpcy5maWx0ZXJNb2RlICE9PSAnYWxsJyA/ICdcdTVDMURcdThCRDVcdTUyMDdcdTYzNjJcdTUxNzZcdTRFRDZcdThGQzdcdTZFRTRcdTU2NjhcdTY3RTVcdTc3MEInIDogJ1x1NUYwMFx1NTlDQlx1OUFEOFx1NEVBRVx1NjU4N1x1NjcyQ1x1Njc2NVx1NTIxQlx1NUVGQVx1N0IxNFx1OEJCMCd9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9IGVsc2Uge1xuICAgICAgZW1wdHlEaXYudGV4dENvbnRlbnQgPSAnXHU2NjgyXHU2NUUwXHU1MTg1XHU1QkI5JztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgICBjb25zdCBncm91cGVkID0gdGhpcy5ncm91cFVuaXRzKHVuaXRzKTtcblxuICAgIGdyb3VwZWQuZm9yRWFjaCgoeyBncm91cEtleSwgdW5pdHM6IGdyb3VwVW5pdHMgfSkgPT4ge1xuICAgICAgY29uc3QgZ3JvdXBFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjb250ZW50LWdyb3VwJyB9KTtcblxuICAgICAgLy8gXHU1MjA2XHU3RUM0XHU2ODA3XHU5ODk4XG4gICAgICBjb25zdCBoZWFkZXIgPSBncm91cEVsLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLWhlYWRlcicgfSk7XG4gICAgICBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6IHRoaXMuZ2V0R3JvdXBJY29uKHRoaXMuZ3JvdXBNb2RlKSwgY2xzOiAnZ3JvdXAtaWNvbicgfSk7XG4gICAgICBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6IGdyb3VwS2V5LCBjbHM6ICdncm91cC10aXRsZScgfSk7XG4gICAgICBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6IGAke2dyb3VwVW5pdHMubGVuZ3RofWAsIGNsczogJ2dyb3VwLWNvdW50JyB9KTtcblxuICAgICAgLy8gXHU1MTg1XHU1QkI5XHU1MzYxXHU3MjQ3XHU1MjE3XHU4ODY4XG4gICAgICBncm91cFVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICAgIHRoaXMucmVuZGVyQ29tcGFjdENhcmQoZ3JvdXBFbCwgdW5pdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTZFMzJcdTY3RDNcdTdEMjdcdTUxRDFcdTUzNjFcdTcyNDdcdUZGMDhcdTRGQTdcdThGQjlcdTY4MEZcdTZBMjFcdTVGMEZcdUZGMDlcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyQ29tcGFjdENhcmQoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgdW5pdDogQ29udGVudFVuaXQpIHtcbiAgICBjb25zdCBjYXJkID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NvbXBhY3QtY2FyZCcgfSk7XG5cbiAgICAvLyBcdTYyNzlcdTkxQ0ZcdTkwMDlcdTYyRTlcdTZBMjFcdTVGMEZcdUZGMUFcdTZERkJcdTUyQTBjaGVja2JveFxuICAgIGlmICh0aGlzLmJhdGNoTW9kZSkge1xuICAgICAgY29uc3QgY2hlY2tib3ggPSBjYXJkLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgdHlwZTogJ2NoZWNrYm94JyxcbiAgICAgICAgY2xzOiAnYmF0Y2gtY2hlY2tib3gnXG4gICAgICB9KTtcbiAgICAgIGNoZWNrYm94LnNldEF0dHJpYnV0ZSgnZGF0YS11bml0LWlkJywgdW5pdC5pZCk7XG4gICAgICBjaGVja2JveC5jaGVja2VkID0gdGhpcy5zZWxlY3RlZFVuaXRJZHMuaGFzKHVuaXQuaWQpO1xuICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgICAgaWYgKChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuYWRkKHVuaXQuaWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmRlbGV0ZSh1bml0LmlkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU1REU2XHU0RkE3XHU2MzA3XHU3OTNBXHU1NjY4XG4gICAgY29uc3QgaW5kaWNhdG9yID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLWluZGljYXRvcicgfSk7XG4gICAgaWYgKHVuaXQuYW5ub3RhdGlvbklkKSBpbmRpY2F0b3IuYWRkQ2xhc3MoJ2hhcy1hbm5vdGF0aW9uJyk7XG4gICAgaWYgKHVuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApIGluZGljYXRvci5hZGRDbGFzcygnaGFzLWZsYXNoY2FyZCcpO1xuXG4vLyBcdTUxODVcdTVCQjlcdTUzM0FcdTU3REZcbmNvbnN0IGNvbnRlbnQgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ2NhcmQtY29udGVudCcgfSk7XG5cbi8vIFx1NURFNlx1NEUwQVx1ODlEMlx1RkYxQVx1NjI3OVx1NkNFOFx1NTZGRVx1NjgwN1xuY29uc3QgaGVhZGVyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLWhlYWRlcicgfSk7XG5cbi8vIFx1NjU3NFx1ODg0Q1x1NjI2N1x1ODg0Q1x1NURFNlx1NEZBN1x1OTAzQlx1OEY5MVxuaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICB0aGlzLnRvZ2dsZUlubGluZUFubm90YXRpb24oY2FyZCwgdW5pdCk7XG59KTtcblxuLy8gXHU2MzA5XHU5NEFFXHU0RTBEXHU5NzAwXHU4OTgxXHU0RUZCXHU0RjU1XHU5MDNCXHU4RjkxXHVGRjBDXHU3MEI5XHU1MUZCXHU0RjFBXHU4MUVBXHU3MTM2XHU4OUU2XHU1M0QxIGhlYWRlciBcdTc2ODRcdTkwM0JcdThGOTFcbmNvbnN0IGFubm90YXRpb25CdG4gPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnYW5ub3RhdGlvbi1idG4nIH0pO1xuYW5ub3RhdGlvbkJ0bi5pbm5lckhUTUwgPSAnXHVEODNEXHVEQ0FDJztcblxuXG4vLyBcdTUzRjNcdTRFMEFcdTg5RDJcdTVERTVcdTUxNzdcdTYzMDlcdTk0QUVcdUZGMDhcdTk2M0JcdTZCNjJcdTUxOTJcdTZDRTFcdUZGMDlcbmNvbnN0IHRvb2xzID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ2NhcmQtdG9vbHMnIH0pO1xudG9vbHMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICBlLnN0b3BQcm9wYWdhdGlvbigpOyAvLyBcdTUxNzNcdTk1MkVcdUZGMDFcdTRGRERcdThCQzFcdTUzRjNcdTRGQTdcdTYzMDlcdTk0QUVcdTRFMERcdTg5RTZcdTUzRDFcdTY1NzRcdTg4NENcdTcwQjlcdTUxRkJcbn0pO1xuICBcblxuXG4vLyAyLiBcdTk3NUVcdTYyNzlcdTkxQ0ZcdTZBMjFcdTVGMEZcdTRFMEJcdTc2ODRcdTk1RUFcdTUzNjFcdTYzMDlcdTk0QUVcbmlmICghdGhpcy5iYXRjaE1vZGUpIHtcbiAgY29uc3QgZmxhc2hjYXJkQnRuID0gdG9vbHMuY3JlYXRlRGl2KHsgY2xzOiAndG9vbC1idG4gZmxhc2hjYXJkLWJ0bicgfSk7XG4gIGZsYXNoY2FyZEJ0bi5pbm5lckhUTUwgPSAnXHUyNkExJztcbiAgZmxhc2hjYXJkQnRuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdcdTc1MUZcdTYyMTBcdTk1RUFcdTUzNjEnKTtcbiAgZmxhc2hjYXJkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMucXVpY2tHZW5lcmF0ZUZsYXNoY2FyZCh1bml0KTtcbiAgfSk7XG59XG5cbiAgICAvLyBcdTY2RjRcdTU5MUFcdTY0Q0RcdTRGNUNcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBtb3JlQnRuID0gdG9vbHMuY3JlYXRlRGl2KHsgY2xzOiAndG9vbC1idG4gbW9yZS1idG4nIH0pO1xuICAgIG1vcmVCdG4uaW5uZXJIVE1MID0gJ1x1MjJFRSc7XG4gICAgbW9yZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5zaG93Q29udGV4dE1lbnUoZSwgdW5pdCk7XG4gICAgfSk7XG5cbiAgICAvLyBcdTdCMTRcdThCQjBcdTUxODVcdTVCQjlcdUZGMDhcdTcwQjlcdTUxRkJcdThERjNcdThGNkNcdTUyMzBcdTUzOUZcdTY1ODdcdUZGMDlcbiAgICBjb25zdCBub3RlVGV4dCA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnbm90ZS10ZXh0JyB9KTtcbiAgICBjb25zdCB0cnVuY2F0ZWRUZXh0ID0gdW5pdC5jb250ZW50Lmxlbmd0aCA+IDgwXG4gICAgICA/IHVuaXQuY29udGVudC5zdWJzdHJpbmcoMCwgODApICsgJy4uLidcbiAgICAgIDogdW5pdC5jb250ZW50O1xuICAgIG5vdGVUZXh0LnRleHRDb250ZW50ID0gdHJ1bmNhdGVkVGV4dDtcbiAgICBcbiAgICBub3RlVGV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuanVtcFRvU291cmNlKHVuaXQpO1xuICAgIH0pO1xuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU2Mjc5XHU2Q0U4XHVGRjA4XHU1OTgyXHU2NzlDXHU2NzA5XHVGRjA5XG4gICAgY29uc3QgYW5ub3RhdGlvbiA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldENvbnRlbnRBbm5vdGF0aW9uKHVuaXQuaWQpO1xuICAgIGlmIChhbm5vdGF0aW9uKSB7XG4gICAgICBjb25zdCBhbm5FbCA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnYW5ub3RhdGlvbi1wcmV2aWV3JyB9KTtcbiAgICAgIGNvbnN0IGFublRleHQgPSBhbm5vdGF0aW9uLmNvbnRlbnQubGVuZ3RoID4gNjBcbiAgICAgICAgPyBhbm5vdGF0aW9uLmNvbnRlbnQuc3Vic3RyaW5nKDAsIDYwKSArICcuLi4nXG4gICAgICAgIDogYW5ub3RhdGlvbi5jb250ZW50O1xuICAgICAgYW5uRWwudGV4dENvbnRlbnQgPSBgXHVEODNEXHVEQ0FDICR7YW5uVGV4dH1gO1xuICAgICAgXG4gICAgICAvLyBcdTcwQjlcdTUxRkJcdTYyNzlcdTZDRThcdTk4ODRcdTg5QzhcdTRFNUZcdTUzRUZcdTRFRTVcdTVDNTVcdTVGMDBcdTdGMTZcdThGOTFcbiAgICAgIGFubkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdGhpcy50b2dnbGVJbmxpbmVBbm5vdGF0aW9uKGNhcmQsIHVuaXQpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU2ODA3XHU3QjdFXHU1NDhDXHU1MTQzXHU0RkUxXHU2MDZGXG4gICAgY29uc3QgbWV0YSA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1tZXRhJyB9KTtcbiAgICBcbiAgICBpZiAodW5pdC5tZXRhZGF0YS50YWdzLmxlbmd0aCA+IDApIHtcbiAgICAgIHVuaXQubWV0YWRhdGEudGFncy5zbGljZSgwLCAyKS5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgIG1ldGEuY3JlYXRlU3Bhbih7IHRleHQ6IGAjJHt0YWd9YCwgY2xzOiAndGFnJyB9KTtcbiAgICAgIH0pO1xuICAgICAgaWYgKHVuaXQubWV0YWRhdGEudGFncy5sZW5ndGggPiAyKSB7XG4gICAgICAgIG1ldGEuY3JlYXRlU3Bhbih7IHRleHQ6IGArJHt1bml0Lm1ldGFkYXRhLnRhZ3MubGVuZ3RoIC0gMn1gLCBjbHM6ICd0YWctbW9yZScgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHVuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIG1ldGEuY3JlYXRlU3Bhbih7IHRleHQ6IGBcdUQ4M0NcdURDQ0YgJHt1bml0LmZsYXNoY2FyZElkcy5sZW5ndGh9YCwgY2xzOiAnYmFkZ2UnIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFx1NEUzQlx1NzU0Q1x1OTc2Mlx1NkEyMVx1NUYwRlx1NkUzMlx1NjdEMyA9PT09PT09PT09PT09PT09PT09PVxuICBcbiAgcHJpdmF0ZSByZW5kZXJNYWluTW9kZShjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgbGF5b3V0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ21haW4tbGF5b3V0JyB9KTtcblxuICAgIC8vIFx1NURFNlx1NEZBN1x1OTc2Mlx1Njc3RlxuICAgIGNvbnN0IGxlZnRQYW5lbCA9IGxheW91dC5jcmVhdGVEaXYoeyBjbHM6ICdsZWZ0LXBhbmVsJyB9KTtcbiAgICBpZiAoIXRoaXMuc2VsZWN0ZWRGaWxlICYmIHRoaXMudmlld1R5cGUgPT09ICdub3RlcycpIHtcbiAgICAgIGNvbnN0IHVuaXRzID0gdGhpcy5nZXRGaWx0ZXJlZFVuaXRzKCk7XG4gICAgICBjb25zdCBncm91cGVkID0gdGhpcy5ncm91cFVuaXRzKHVuaXRzKTtcbiAgICAgIGlmIChncm91cGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEZpbGUgPSBncm91cGVkWzBdLmdyb3VwS2V5OyAvLyBcdTgxRUFcdTUyQThcdTkwMDlcdTRFMkRcdTdCMkNcdTRFMDBcdTRFMkFcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yZW5kZXJMZWZ0UGFuZWwobGVmdFBhbmVsKTtcblxuICAgIC8vIFx1NTNGM1x1NEZBN1x1OTc2Mlx1Njc3RlxuICAgIGNvbnN0IHJpZ2h0UGFuZWwgPSBsYXlvdXQuY3JlYXRlRGl2KHsgY2xzOiAncmlnaHQtcGFuZWwnIH0pO1xuICAgIHRoaXMucmVuZGVyUmlnaHRQYW5lbChyaWdodFBhbmVsKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTGVmdFBhbmVsKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgLy8gXHU2NDFDXHU3RDIyXHU1NDhDXHU4RkM3XHU2RUU0XG4gICAgdGhpcy5yZW5kZXJNYWluVG9vbGJhcihjb250YWluZXIpO1xuICAgIC8vIFx1OTg3Nlx1OTBFOFx1NTZGQVx1NUI5QVx1NTE2NVx1NTNFM1xuICAgIHRoaXMucmVuZGVyRml4ZWRFbnRyaWVzKGNvbnRhaW5lcik7XG5cblxuXG4gICAgLy8gXHU2NTg3XHU0RUY2XHU1MjE3XHU4ODY4XG4gICAgdGhpcy5yZW5kZXJGaWxlTGlzdChjb250YWluZXIpO1xuICB9XG5cblxuXG4gIHByaXZhdGUgcmVuZGVyTWFpblRvb2xiYXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHRvb2xiYXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbWFpbi10b29sYmFyJyB9KTtcbiAgXG4gICAgLy8gXHU2NDFDXHU3RDIyXHU2ODQ2XG4gICAgY29uc3Qgc2VhcmNoSW5wdXQgPSB0b29sYmFyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnXHVEODNEXHVERDBEIFx1NjQxQ1x1N0QyMi4uLicsXG4gICAgICBjbHM6ICdzZWFyY2gtaW5wdXQtbWFpbidcbiAgICB9KTtcbiAgICBzZWFyY2hJbnB1dC52YWx1ZSA9IHRoaXMuc2VhcmNoUXVlcnk7XG4gICAgXG4gICAgLy8gXHU0RjdGXHU3NTI4XHU5NjMyXHU2Mjk2XHU0RjE4XHU1MzE2XHU2NDFDXHU3RDIyXG4gICAgc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG4gICAgICB0aGlzLnNlYXJjaFF1ZXJ5ID0gdmFsdWU7XG4gICAgICBcbiAgICAgIC8vIFx1NkUwNVx1OTY2NFx1NEU0Qlx1NTI0RFx1NzY4NFx1NUI5QVx1NjVGNlx1NTY2OFxuICAgICAgaWYgKHRoaXMuc2VhcmNoRGVib3VuY2VUaW1lciAhPT0gbnVsbCkge1xuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc2VhcmNoRGVib3VuY2VUaW1lcik7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NjVCMFx1NzY4NFx1NUI5QVx1NjVGNlx1NTY2OFxuICAgICAgdGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IG51bGw7XG4gICAgICAgIC8vIFx1NTNFQVx1NTIzN1x1NjVCMFx1NTNGM1x1NEZBN1x1OTc2Mlx1Njc3RlxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBjb25zdCByaWdodFBhbmVsID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5yaWdodC1wYW5lbCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBpZiAocmlnaHRQYW5lbCkge1xuICAgICAgICAgIHJpZ2h0UGFuZWwuZW1wdHkoKTtcbiAgICAgICAgICB0aGlzLnJlbmRlclJpZ2h0UGFuZWwocmlnaHRQYW5lbCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NjU4N1x1NEVGNlx1NTIxN1x1ODg2OFxuICAgICAgICBjb25zdCBmaWxlTGlzdENvbnRhaW5lciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmlsZS1saXN0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGlmIChmaWxlTGlzdENvbnRhaW5lcikge1xuICAgICAgICAgIGZpbGVMaXN0Q29udGFpbmVyLmVtcHR5KCk7XG4gICAgICAgICAgdGhpcy5yZW5kZXJGaWxlTGlzdENvbnRlbnQoZmlsZUxpc3RDb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmNsZWFyKCk7XG4gICAgICB9LCAzMDApOyAvLyAzMDBtcyBcdTk2MzJcdTYyOTZcbiAgICB9KTtcbiAgXG4gICAgLy8gXHU1MjA2XHU3RUM0XHU2QTIxXHU1RjBGXHU1MjA3XHU2MzYyXHVGRjA4XHU3QjE0XHU4QkIwXHU1NDhDXHU1MzYxXHU3MjQ3XHU4OUM2XHU1NkZFXHU5MEZEXHU2NjNFXHU3OTNBXHVGRjA5LSBcdTc5RkJcdTk2NjRcdTY3NjFcdTRFRjZcdTUyMjRcdTY1QURcbiAgICBjb25zdCBncm91cFN3aXRjaGVyID0gdG9vbGJhci5jcmVhdGVEaXYoeyBjbHM6ICdncm91cC1zd2l0Y2hlci1tYWluJyB9KTtcbiAgICBcbiAgICBjb25zdCBncm91cE9wdGlvbnMgPSBbXG4gICAgICB7IG1vZGU6ICdmaWxlJyBhcyBHcm91cE1vZGUsIGljb246ICdcdUQ4M0RcdURDQzEnLCBsYWJlbDogJ1x1NjU4N1x1NEVGNicgfSxcbiAgICAgIHsgbW9kZTogJ3RhZycgYXMgR3JvdXBNb2RlLCBpY29uOiAnXHVEODNDXHVERkY3XHVGRTBGJywgbGFiZWw6ICdcdTY4MDdcdTdCN0UnIH0sXG4gICAgICB7IG1vZGU6ICdkYXRlJyBhcyBHcm91cE1vZGUsIGljb246ICdcdUQ4M0RcdURDQzUnLCBsYWJlbDogJ1x1NjVFNVx1NjcxRicgfVxuICAgIF07XG4gIFxuICAgIGdyb3VwT3B0aW9ucy5mb3JFYWNoKCh7IG1vZGUsIGljb24sIGxhYmVsIH0pID0+IHtcbiAgICAgIGNvbnN0IGJ0biA9IGdyb3VwU3dpdGNoZXIuY3JlYXRlRGl2KHtcbiAgICAgICAgY2xzOiBgZ3JvdXAtYnRuLW1haW4gJHt0aGlzLmdyb3VwTW9kZSA9PT0gbW9kZSA/ICdhY3RpdmUnIDogJyd9YCxcbiAgICAgIH0pO1xuICAgICAgYnRuLmlubmVySFRNTCA9IGAke2ljb259IDxzcGFuPiR7bGFiZWx9PC9zcGFuPmA7XG4gICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSAhPT0gbW9kZSkge1xuICAgICAgICAgIHRoaXMuZ3JvdXBNb2RlID0gbW9kZTtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IG51bGw7IC8vIFx1OTFDRFx1N0Y2RVx1OTAwOVx1NEUyRFxuICAgIHRoaXMuYXV0b1NlbGVjdEFsbCgpO1xuICAgICAgXG4gICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBcdTUyMzdcdTY1QjBcdTY1ODdcdTRFRjZcdTUyMTdcdTg4NjhcdTU0OENcdTUzRjNcdTRGQTdcdTk3NjJcdTY3N0ZcbiAgICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgIGNvbnN0IGZpbGVMaXN0Q29udGFpbmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5maWxlLWxpc3QnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICBpZiAoZmlsZUxpc3RDb250YWluZXIpIHtcbiAgICAgICAgICAgIGZpbGVMaXN0Q29udGFpbmVyLmVtcHR5KCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckZpbGVMaXN0Q29udGVudChmaWxlTGlzdENvbnRhaW5lcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHJpZ2h0UGFuZWwgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnJpZ2h0LXBhbmVsJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgaWYgKHJpZ2h0UGFuZWwpIHtcbiAgICAgICAgICAgIHJpZ2h0UGFuZWwuZW1wdHkoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUmlnaHRQYW5lbChyaWdodFBhbmVsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICBcblxuICB9XG4gIHByaXZhdGUgcmVuZGVyRml4ZWRFbnRyaWVzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBlbnRyaWVzID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2ZpeGVkLWVudHJpZXMnIH0pO1xuXG4gICAgLy8gXHU1MTY4XHU5MEU4XHU3QjE0XHU4QkIwXHU2MzA5XHU5NEFFXG4gICAgY29uc3QgYWxsTm90ZXNCdG4gPSBlbnRyaWVzLmNyZWF0ZURpdih7XG4gICAgICBjbHM6IGBlbnRyeS1idG4gJHt0aGlzLnZpZXdUeXBlID09PSAnbm90ZXMnID8gJ2FjdGl2ZScgOiAnJ31gLFxuICAgIH0pO1xuICAgIGFsbE5vdGVzQnRuLmlubmVySFRNTCA9ICdcdUQ4M0RcdURDREQgPHNwYW4+XHU1MTY4XHU5MEU4XHU3QjE0XHU4QkIwPC9zcGFuPic7XG4gICAgYWxsTm90ZXNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLnZpZXdUeXBlID0gJ25vdGVzJztcbiAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gbnVsbDtcbiAgICAgIHRoaXMuYXV0b1NlbGVjdEFsbCgpO1xuXG4gIFxuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9KTtcblxuICAgIC8vIENhcmQgTGlzdCBcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBjYXJkTGlzdEJ0biA9IGVudHJpZXMuY3JlYXRlRGl2KHtcbiAgICAgIGNsczogYGVudHJ5LWJ0biAke3RoaXMudmlld1R5cGUgPT09ICdjYXJkcycgPyAnYWN0aXZlJyA6ICcnfWAsXG4gICAgfSk7XG4gICAgY2FyZExpc3RCdG4uaW5uZXJIVE1MID0gJ1x1RDgzQ1x1RENDRiA8c3Bhbj5DYXJkIExpc3Q8L3NwYW4+JztcbiAgICBjYXJkTGlzdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMudmlld1R5cGUgPSAnY2FyZHMnO1xuICAgICAgdGhpcy5zZWxlY3RlZEZpbGUgPSBudWxsO1xuICAgICAgdGhpcy5hdXRvU2VsZWN0QWxsKCk7XG4gICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH0pO1xuICB9XG4gIHByaXZhdGUgcmVuZGVyRmlsZUxpc3QoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHRpdGxlVGV4dCA9IHRoaXMudmlld1R5cGUgPT09ICdjYXJkcycgPyAnXHU5NUVBXHU1MzYxXHU1MjA2XHU3RUM0JyA6ICdcdTY1ODdcdTY4NjNcdTUyMTdcdTg4NjgnO1xuICAgIC8vIGNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IHRpdGxlVGV4dCwgY2xzOiAncGFuZWwtdGl0bGUnIH0pO1xuXG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1RDgzRFx1RENDMSBcdTY1ODdcdTY4NjNcdTUyMTdcdTg4NjgnLCBjbHM6ICdwYW5lbC10aXRsZScgfSk7XG5cbiAgICBjb25zdCBmaWxlTGlzdENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdmaWxlLWxpc3QnIH0pO1xuICAgIHRoaXMucmVuZGVyRmlsZUxpc3RDb250ZW50KGZpbGVMaXN0Q29udGFpbmVyKTtcbiAgfVxuICBcbiAgcHJpdmF0ZSByZW5kZXJGaWxlTGlzdENvbnRlbnQoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIFxuICAgIC8vIFx1NjUyRlx1NjMwMVx1OTVFQVx1NTM2MVx1NTQ4Q1x1N0IxNFx1OEJCMFx1NzY4NFx1N0VERlx1NEUwMFx1NTIwNlx1N0VDNFx1NTkwNFx1NzQwNlxuICAgIGxldCBncm91cGVkOiBBcnJheTx7IGdyb3VwS2V5OiBzdHJpbmc7IHVuaXRzPzogQ29udGVudFVuaXRbXTsgY2FyZHM/OiBGbGFzaGNhcmRbXTsgY291bnQ6IG51bWJlciB9PjtcbiAgICBcbiAgICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgICAgY29uc3QgZmxhc2hjYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgICAgY29uc3QgY2FyZEdyb3VwcyA9IHRoaXMuZ3JvdXBGbGFzaGNhcmRzKGZsYXNoY2FyZHMpO1xuICAgICAgZ3JvdXBlZCA9IGNhcmRHcm91cHMubWFwKGcgPT4gKHsgZ3JvdXBLZXk6IGcuZ3JvdXBLZXksIGNhcmRzOiBnLmNhcmRzLCBjb3VudDogZy5jYXJkcy5sZW5ndGggfSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB1bml0cyA9IHRoaXMuZ2V0RmlsdGVyZWRVbml0cygpO1xuICAgICAgY29uc3QgdW5pdEdyb3VwcyA9IHRoaXMuZ3JvdXBVbml0cyh1bml0cyk7XG4gICAgICBncm91cGVkID0gdW5pdEdyb3Vwcy5tYXAoZyA9PiAoeyBncm91cEtleTogZy5ncm91cEtleSwgdW5pdHM6IGcudW5pdHMsIGNvdW50OiBnLnVuaXRzLmxlbmd0aCB9KSk7XG4gICAgfVxuICBcbiAgICBpZiAoZ3JvdXBlZC5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnRhaW5lci5jcmVhdGVEaXYoe1xuICAgICAgICB0ZXh0OiAnXHU2NjgyXHU2NUUwXHU2NTg3XHU2ODYzJyxcbiAgICAgICAgY2xzOiAnZW1wdHktaGludCdcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIXRoaXMuc2VsZWN0ZWRGaWxlICYmIGdyb3VwZWQubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5zZWxlY3RlZEZpbGUgPSBncm91cGVkWzBdLmdyb3VwS2V5O1xuICAgIH1cbiAgXG4gICAgZ3JvdXBlZC5mb3JFYWNoKCh7IGdyb3VwS2V5LCBjb3VudCB9KSA9PiB7XG4gICAgICBjb25zdCBmaWxlSXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoe1xuICAgICAgICBjbHM6IGBmaWxlLWl0ZW0gJHt0aGlzLnNlbGVjdGVkRmlsZSA9PT0gZ3JvdXBLZXkgPyAnc2VsZWN0ZWQnIDogJyd9YFxuICAgICAgfSk7XG4gIFxuICAgICAgZmlsZUl0ZW0uaW5uZXJIVE1MID0gYFxuICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtaWNvblwiPiR7dGhpcy5nZXRHcm91cEljb24odGhpcy5ncm91cE1vZGUpfTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLW5hbWVcIj4ke2dyb3VwS2V5fTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLWNvdW50XCI+JHtjb3VudH08L3NwYW4+XG4gICAgICBgO1xuICBcbiAgICAgIGZpbGVJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRGaWxlICE9PSBncm91cEtleSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEZpbGUgPSBncm91cEtleTtcbiAgICAgICAgICAgIFxuXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1OTAwOVx1NEUyRFx1NzJCNlx1NjAwMVxuICAgICAgICAgICAgY29uc3QgYWxsSXRlbXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmZpbGUtaXRlbScpO1xuICAgICAgICAgICAgYWxsSXRlbXMuZm9yRWFjaChpdGVtID0+IGl0ZW0ucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJykpO1xuICAgICAgICAgICAgZmlsZUl0ZW0uYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NTIzN1x1NjVCMFx1NTNGM1x1NEZBN1x1OTc2Mlx1Njc3RlxuICAgICAgICAgICAgY29uc3QgbWFpbkNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBjb25zdCByaWdodFBhbmVsID0gbWFpbkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucmlnaHQtcGFuZWwnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIGlmIChyaWdodFBhbmVsKSB7XG5cbiAgICAgICAgICAgICAgcmlnaHRQYW5lbC5lbXB0eSgpO1xuICAgICAgICAgICAgICB0aGlzLnJlbmRlclJpZ2h0UGFuZWwocmlnaHRQYW5lbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tmaWxlSXRlbSBjbGlja10gRXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdTUyMDdcdTYzNjJcdTUyMDZcdTdFQzRcdTY1RjZcdTUxRkFcdTk1MTlcdUZGMENcdThCRjdcdTkxQ0RcdThCRDUnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclJpZ2h0UGFuZWwoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGlmICh0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnKSB7XG4gICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRGaWxlKSB7XG4gICAgICAgIGNvbnN0IGZsYXNoY2FyZHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldEFsbEZsYXNoY2FyZHMoKTtcbiAgICAgICAgY29uc3QgZ3JvdXBlZCA9IHRoaXMuZ3JvdXBGbGFzaGNhcmRzKGZsYXNoY2FyZHMpO1xuICAgICAgICBpZiAoZ3JvdXBlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZEZpbGUgPSBncm91cGVkWzBdLmdyb3VwS2V5O1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgZW1wdHkgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZW1wdHktcmlnaHQtcGFuZWwnIH0pO1xuICAgICAgICAgIGVtcHR5LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJlbXB0eS1pY29uXCI+XHVEODNEXHVEQ0VEPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW1wdHktdGV4dFwiPlx1NjY4Mlx1NjVFMFx1OTVFQVx1NTM2MTwvZGl2PlxuICAgICAgICAgIGA7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1NkUzMlx1NjdEM1x1OTVFQVx1NTM2MVx1N0Y1MVx1NjgzQ1x1RkYwOFx1NEYxQVx1NjgzOVx1NjM2RSBzZWxlY3RlZEZpbGUgXHU4RkM3XHU2RUU0XHVGRjA5XG4gICAgICB0aGlzLnJlbmRlckZsYXNoY2FyZHNHcmlkKGNvbnRhaW5lcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuLy8gXHU4MUVBXHU1MkE4XHU5MDA5XHU0RTJEXHU3QjJDXHU0RTAwXHU0RTJBXG4gICAgaWYgKCF0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgY29uc3QgdW5pdHMgPSB0aGlzLmdldEZpbHRlcmVkVW5pdHMoKTtcbiAgICAgIGNvbnN0IGdyb3VwZWQgPSB0aGlzLmdyb3VwVW5pdHModW5pdHMpO1xuICAgICAgXG4gICAgICBpZiAoZ3JvdXBlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gZ3JvdXBlZFswXS5ncm91cEtleTtcbiAgICAgICAgLy8gXHU4OUU2XHU1M0QxXHU1REU2XHU0RkE3XHU2NTg3XHU0RUY2XHU1MjE3XHU4ODY4XHU2NkY0XHU2NUIwXHU5MDA5XHU0RTJEXHU3MkI2XHU2MDAxXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGZpbGVMaXN0Q29udGFpbmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5maWxlLWxpc3QnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgaWYgKGZpbGVMaXN0Q29udGFpbmVyKSB7XG4gICAgICAgICAgY29uc3QgZmlyc3RJdGVtID0gZmlsZUxpc3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLmZpbGUtaXRlbScpO1xuICAgICAgICAgIGZpcnN0SXRlbT8uYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1NzcxRlx1NzY4NFx1NkNBMVx1NjcwOVx1NjU3MFx1NjM2RVxuICAgICAgICBjb25zdCBlbXB0eSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdlbXB0eS1yaWdodC1wYW5lbCcgfSk7XG4gICAgICAgIGVtcHR5LmlubmVySFRNTCA9IGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW1wdHktaWNvblwiPlx1RDgzRFx1RENFRDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJlbXB0eS10ZXh0XCI+XHU2NjgyXHU2NUUwXHU1MTg1XHU1QkI5PC9kaXY+XG4gICAgICAgIGA7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTZFMzJcdTY3RDNcdTUxODVcdTVCQjlcdTdGNTFcdTY4M0NcbiAgICB0aGlzLnJlbmRlckNvbnRlbnRHcmlkKGNvbnRhaW5lcik7XG4gIH1cblxuICAvKipcbiAgICogXHU2RTMyXHU2N0QzXHU1MTg1XHU1QkI5XHU3RjUxXHU2ODNDXHVGRjA4XHU0RTNCXHU3NTRDXHU5NzYyXHU2QTIxXHU1RjBGXHVGRjA5XG4gICAqL1xuICBwcml2YXRlIHJlbmRlckNvbnRlbnRHcmlkKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBoZWFkZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1oZWFkZXInIH0pO1xuICAgIFxuICAgIGNvbnN0IHRpdGxlID0gaGVhZGVyLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdGhpcy5zZWxlY3RlZEZpbGUgfHwgJ1x1NTE4NVx1NUJCOScgfSk7XG4gICAgXG4gICAgLy8gXHU2MzA5XHU5NEFFXHU1QkI5XHU1NjY4XG4gICAgY29uc3QgaGVhZGVyQWN0aW9ucyA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdoZWFkZXItYWN0aW9ucycgfSk7XG4gICAgXG4gICAgLy8gXHU2Mjc5XHU5MUNGXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFKFx1NjI3OVx1OTFDRlx1NkEyMVx1NUYwRlx1NEUwQlx1NTlDQlx1N0VDOFx1NjYzRVx1NzkzQSlcbiAgICBpZiAodGhpcy5iYXRjaE1vZGUpIHtcbiAgICAgIGlmICh0aGlzLnZpZXdUeXBlID09PSAnbm90ZXMnKSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZUJ0biA9IGhlYWRlckFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICB0ZXh0OiBgXHUyNkExIFx1NjI3OVx1OTFDRlx1NTIzNlx1NTM2MSAoJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSlgLFxuICAgICAgICAgIGNsczogJ2JhdGNoLWNyZWF0ZS1jYXJkcy1idG4taGVhZGVyJ1xuICAgICAgICB9KTtcbiAgICAgICAgY3JlYXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplID09PSAwKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU4OTgxXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXHU3Njg0XHU3QjE0XHU4QkIwJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuYmF0Y2hDcmVhdGVGbGFzaGNhcmRzKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIFxuICAgICAgY29uc3QgZGVsZXRlQnRuID0gaGVhZGVyQWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICB0ZXh0OiBgXHVEODNEXHVEREQxXHVGRTBGIFx1NTIyMFx1OTY2NCAoJHt0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnID8gdGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZSA6IHRoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemV9KWAsXG4gICAgICAgIGNsczogJ2JhdGNoLWRlbGV0ZS1idG4taGVhZGVyJ1xuICAgICAgfSk7XG4gICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gdGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJyA/IHRoaXMuc2VsZWN0ZWRDYXJkSWRzLnNpemUgOiB0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplO1xuICAgICAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU4OTgxXHU1MjIwXHU5NjY0XHU3Njg0XHU5ODc5XHU3NkVFJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnKSB7XG4gICAgICAgICAgdGhpcy5iYXRjaERlbGV0ZUZsYXNoY2FyZHMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmJhdGNoRGVsZXRlTm90ZXMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFx1NTNENlx1NkQ4OFx1NjMwOVx1OTRBRVx1RkYwOFx1NjI3OVx1OTFDRlx1NkEyMVx1NUYwRlx1NEUwQlx1NTlDQlx1N0VDOFx1NjYzRVx1NzkzQVx1RkYwOVxuICAgIGlmICh0aGlzLmJhdGNoTW9kZSkge1xuICAgICAgY29uc3QgY2FuY2VsQnRuID0gaGVhZGVyQWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICB0ZXh0OiAnXHUyNzE1IFx1NTNENlx1NkQ4OCcsXG4gICAgICAgIGNsczogJ2NhbmNlbC1zZWxlY3Rpb24tYnRuLWhlYWRlcidcbiAgICAgIH0pO1xuICAgICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gXHU1MTY4XHU5MDA5L1x1NUI4Q1x1NjIxMFx1NjMwOVx1OTRBRVxuICAgIGNvbnN0IHNlbGVjdEFsbEJ0biA9IGhlYWRlckFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6IHRoaXMuaXNBbGxTZWxlY3RlZCgpID8gJ1x1MjcxMyBcdTkwMDlcdTYyRTknIDogJ1x1MjYxMCBcdTUxNjhcdTkwMDknLFxuICAgICAgY2xzOiBgc2VsZWN0LWFsbC1idG4taGVhZGVyICR7dGhpcy5pc0FsbFNlbGVjdGVkKCkgPyAnY29tcGxldGVkJyA6ICcnfWBcbiAgICB9KTtcbiAgICBzZWxlY3RBbGxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLnRvZ2dsZVNlbGVjdEFsbCgpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgZ3JpZENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjb250ZW50LWdyaWQnIH0pO1xuICAgIFxuICAgIGNvbnN0IHVuaXRzID0gdGhpcy5nZXRGaWx0ZXJlZFVuaXRzKCkuZmlsdGVyKHVuaXQgPT4ge1xuICAgICAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZmlsZScpIHtcbiAgICAgICAgcmV0dXJuIHVuaXQuc291cmNlLmZpbGUgPT09IHRoaXMuc2VsZWN0ZWRGaWxlO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ3RhZycpIHtcbiAgICAgICAgcmV0dXJuIHVuaXQubWV0YWRhdGEudGFncy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSEpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUodW5pdC5tZXRhZGF0YS5jcmVhdGVkQXQpKSA9PT0gdGhpcy5zZWxlY3RlZEZpbGU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICBpZiAodW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBncmlkQ29udGFpbmVyLmNyZWF0ZURpdih7XG4gICAgICAgIHRleHQ6ICdcdUQ4M0RcdURDRUQgXHU2NjgyXHU2NUUwXHU1MTg1XHU1QkI5JyxcbiAgICAgICAgY2xzOiAnZW1wdHktc3RhdGUnXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB1bml0cy5mb3JFYWNoKHVuaXQgPT4ge1xuICAgICAgdGhpcy5yZW5kZXJHcmlkQ2FyZChncmlkQ29udGFpbmVyLCB1bml0KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAqIFx1NkUzMlx1NjdEM1x1OTVFQVx1NTM2MVx1N0Y1MVx1NjgzQ1x1RkYwOFx1N0M3Qlx1NEYzQyByZW5kZXJDb250ZW50R3JpZFx1RkYwOVxuICovXG4gIHByaXZhdGUgcmVuZGVyRmxhc2hjYXJkc0dyaWQoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IGhlYWRlciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLWhlYWRlcicgfSk7XG4gICAgXG4gICAgaGVhZGVyLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdGhpcy5zZWxlY3RlZEZpbGUgfHwgJ1x1OTVFQVx1NTM2MScgfSk7XG5cbiAgLy8gXHU2MzA5XHU5NEFFXHU1QkI5XHU1NjY4XG4gIGNvbnN0IGhlYWRlckFjdGlvbnMgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnaGVhZGVyLWFjdGlvbnMnIH0pO1xuXG4gIC8vIFx1NjI3OVx1OTFDRlx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRShcdTYyNzlcdTkxQ0ZcdTZBMjFcdTVGMEZcdTRFMEJcdTU5Q0JcdTdFQzhcdTY2M0VcdTc5M0EpXG4gIGlmICh0aGlzLmJhdGNoTW9kZSkge1xuICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGhlYWRlckFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6IGBcdUQ4M0RcdURERDFcdUZFMEYgXHU1MjIwXHU5NjY0ICgke3RoaXMuc2VsZWN0ZWRDYXJkSWRzLnNpemV9KWAsXG4gICAgICBjbHM6IGBiYXRjaC1kZWxldGUtYnRuLWhlYWRlciAke3RoaXMuc2VsZWN0ZWRDYXJkSWRzLnNpemUgPT09IDAgPyAnZGlzYWJsZWQnIDogJyd9YFxuICAgIH0pO1xuICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkQ2FyZElkcy5zaXplID09PSAwKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTg5ODFcdTUyMjBcdTk2NjRcdTc2ODRcdTk1RUFcdTUzNjEnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5iYXRjaERlbGV0ZUZsYXNoY2FyZHMoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFx1NTNENlx1NkQ4OFx1NjMwOVx1OTRBRVx1RkYwOFx1NjI3OVx1OTFDRlx1NkEyMVx1NUYwRlx1NEUwQlx1NTlDQlx1N0VDOFx1NjYzRVx1NzkzQVx1RkYwOVxuICBpZiAodGhpcy5iYXRjaE1vZGUpIHtcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBoZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnXHUyNzE1IFx1NTNENlx1NkQ4OCcsXG4gICAgICBjbHM6ICdjYW5jZWwtc2VsZWN0aW9uLWJ0bi1oZWFkZXInXG4gICAgfSk7XG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gXHU1MTY4XHU5MDA5L1x1NUI4Q1x1NjIxMFx1NjMwOVx1OTRBRVxuICBjb25zdCBzZWxlY3RBbGxCdG4gPSBoZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgdGV4dDogdGhpcy5pc0FsbFNlbGVjdGVkKCkgPyAnXHUyNzEzIFx1NUI4Q1x1NjIxMCcgOiAnXHUyNjEwIFx1NTE2OFx1OTAwOScsXG4gICAgY2xzOiBgc2VsZWN0LWFsbC1idG4taGVhZGVyICR7dGhpcy5pc0FsbFNlbGVjdGVkKCkgPyAnY29tcGxldGVkJyA6ICcnfWBcbiAgfSk7XG4gIHNlbGVjdEFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICB0aGlzLnRvZ2dsZVNlbGVjdEFsbCgpO1xuICB9KTtcblxuXG4gICAgY29uc3QgZ3JpZENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjb250ZW50LWdyaWQnIH0pO1xuICAgIFxuICAgIGNvbnN0IGZsYXNoY2FyZHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldEFsbEZsYXNoY2FyZHMoKTtcbiAgICBcbiAgICAvLyBcdTY1MzlcdThGREJcdThGQzdcdTZFRTRcdTkwM0JcdThGOTFcbiAgICBjb25zdCBmaWx0ZXJlZENhcmRzID0gZmxhc2hjYXJkcy5maWx0ZXIoY2FyZCA9PiB7XG4gICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRGaWxlKSByZXR1cm4gZmFsc2U7XG4gICAgICBcbiAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgIC8vIFx1NjMwOVx1NjU4N1x1NEVGNlx1OEZDN1x1NkVFNFxuICAgICAgICByZXR1cm4gY2FyZC5zb3VyY2VGaWxlID09PSB0aGlzLnNlbGVjdGVkRmlsZTtcbiAgICAgIH0gXG4gICAgICBcbiAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ3RhZycpIHtcbiAgICAgICAgLy8gXHU2MzA5XHU2ODA3XHU3QjdFXHU4RkM3XHU2RUU0XG4gICAgICAgIGNvbnN0IHVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjYXJkLnNvdXJjZUNvbnRlbnRJZCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTdCMTRcdThCQjBcdTUzNTVcdTUxNDNcdTc2ODRcdTY4MDdcdTdCN0VcbiAgICAgICAgaWYgKHVuaXQgJiYgdW5pdC5tZXRhZGF0YS50YWdzICYmIHVuaXQubWV0YWRhdGEudGFncy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1MzYxXHU3MjQ3XHU4MUVBXHU1REYxXHU3Njg0XHU2ODA3XHU3QjdFXG4gICAgICAgIGlmIChjYXJkLnRhZ3MgJiYgY2FyZC50YWdzLmluY2x1ZGVzKHRoaXMuc2VsZWN0ZWRGaWxlKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBcdTY4QzBcdTY3RTUgZGVja1xuICAgICAgICBpZiAoY2FyZC5kZWNrID09PSB0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcIlx1NjcyQVx1NTIwNlx1N0M3QlwiXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkRmlsZSA9PT0gJ1x1NjcyQVx1NTIwNlx1N0M3QicgJiYgXG4gICAgICAgICAgICAoIWNhcmQudGFncyB8fCBjYXJkLnRhZ3MubGVuZ3RoID09PSAwKSAmJiBcbiAgICAgICAgICAgICFjYXJkLmRlY2sgJiZcbiAgICAgICAgICAgICghdW5pdCB8fCAhdW5pdC5tZXRhZGF0YS50YWdzIHx8IHVuaXQubWV0YWRhdGEudGFncy5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZGF0ZScpIHtcbiAgICAgICAgLy8gXHU2MzA5XHU2NUU1XHU2NzFGXHU4RkM3XHU2RUU0XG4gICAgICAgIGNvbnN0IGNhcmREYXRlID0gdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKGNhcmQubWV0YWRhdGEuY3JlYXRlZEF0KSk7XG4gICAgICAgIHJldHVybiBjYXJkRGF0ZSA9PT0gdGhpcy5zZWxlY3RlZEZpbGU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgXG5cbiAgXG4gICAgaWYgKGZpbHRlcmVkQ2FyZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBncmlkQ29udGFpbmVyLmNyZWF0ZURpdih7IHRleHQ6ICdcdUQ4M0RcdURDRUQgXHU4QkU1XHU1MjA2XHU3RUM0XHU0RTBCXHU2NjgyXHU2NUUwXHU5NUVBXHU1MzYxJywgY2xzOiAnZW1wdHktc3RhdGUnIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgXG4gICAgZmlsdGVyZWRDYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xuICAgICAgdGhpcy5yZW5kZXJGbGFzaGNhcmRHcmlkQ2FyZChncmlkQ29udGFpbmVyLCBjYXJkKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTZFMzJcdTY3RDNcdTdGNTFcdTY4M0NcdTUzNjFcdTcyNDdcdUZGMDhcdTRFM0JcdTc1NENcdTk3NjJcdTZBMjFcdTVGMEZcdUZGMDlcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyR3JpZENhcmQoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgdW5pdDogQ29udGVudFVuaXQpIHtcbiAgICBjb25zdCBjYXJkID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyaWQtY2FyZCcgfSk7XG5cbiAgICAvLyBcdTYyNzlcdTkxQ0ZcdTkwMDlcdTYyRTlcdTZBMjFcdTVGMEZcdUZGMUFcdTZERkJcdTUyQTBjaGVja2JveFxuICAgIGlmICh0aGlzLmJhdGNoTW9kZSkge1xuICAgICAgY29uc3QgY2hlY2tib3ggPSBjYXJkLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgdHlwZTogJ2NoZWNrYm94JyxcbiAgICAgICAgY2xzOiAnYmF0Y2gtY2hlY2tib3gnXG4gICAgICB9KTtcbiAgICAgIGNoZWNrYm94LnNldEF0dHJpYnV0ZSgnZGF0YS11bml0LWlkJywgdW5pdC5pZCk7XG4gICAgICBjaGVja2JveC5jaGVja2VkID0gdGhpcy5zZWxlY3RlZFVuaXRJZHMuaGFzKHVuaXQuaWQpO1xuICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgICAgaWYgKChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuYWRkKHVuaXQuaWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmRlbGV0ZSh1bml0LmlkKTtcbiAgICAgICAgfVxuICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1OTg3Nlx1OTBFOFx1RkYxQVx1NjU4N1x1Njg2M1x1NTQwRFx1NzlGMFxuICAgIGNvbnN0IGhlYWRlciA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkLWhlYWRlcicgfSk7XG4gICAgY29uc3QgZmlsZU5hbWUgPSB1bml0LnNvdXJjZS5maWxlLnNwbGl0KCcvJykucG9wKCk/LnJlcGxhY2UoJy5tZCcsICcnKSB8fCAnJztcbiAgICBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6IGZpbGVOYW1lLCBjbHM6ICdkb2MtbmFtZScgfSk7XG5cbiAgICAvLyBcdTUzRjNcdTRFMEFcdTg5RDJcdTVERTVcdTUxNzdcdTYzMDlcdTk0QUVcbiAgICBjb25zdCB0b29scyA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLWNhcmQtdG9vbHMnIH0pO1xuICAgIFxuXG5cbi8vIFx1OTc1RVx1NjI3OVx1OTFDRlx1NkEyMVx1NUYwRlx1NEUwQlx1NzY4NFx1OTVFQVx1NTM2MVx1NjMwOVx1OTRBRVxuaWYgKCF0aGlzLmJhdGNoTW9kZSkge1xuICBjb25zdCBmbGFzaGNhcmRCdG4gPSB0b29scy5jcmVhdGVEaXYoeyBjbHM6ICd0b29sLWJ0bi1ncmlkJyB9KTtcbiAgZmxhc2hjYXJkQnRuLmlubmVySFRNTCA9ICdcdTI2QTEnO1xuICBmbGFzaGNhcmRCdG4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ1x1NzUxRlx1NjIxMFx1OTVFQVx1NTM2MScpO1xuICBmbGFzaGNhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy5xdWlja0dlbmVyYXRlRmxhc2hjYXJkKHVuaXQpO1xuICB9KTtcbn1cblxuICAgIGNvbnN0IG1vcmVCdG4gPSB0b29scy5jcmVhdGVEaXYoeyBjbHM6ICd0b29sLWJ0bi1ncmlkJyB9KTtcbiAgICBtb3JlQnRuLmlubmVySFRNTCA9ICdcdTIyRUUnO1xuICAgIG1vcmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMuc2hvd0NvbnRleHRNZW51KGUsIHVuaXQpO1xuICAgIH0pO1xuXG4gICAgLy8gXHU3QjE0XHU4QkIwXHU1MTg1XHU1QkI5XHVGRjA4XHU3MEI5XHU1MUZCXHU1QzU1XHU1RjAwXHU2Mjc5XHU2Q0U4XHU3RjE2XHU4RjkxXHVGRjA5XG4gICAgY29uc3QgY29udGVudCA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkLWNvbnRlbnQnIH0pO1xuICAgIGNvbnN0IG5vdGVUZXh0ID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLW5vdGUtdGV4dCcgfSk7XG4gICAgbm90ZVRleHQudGV4dENvbnRlbnQgPSB1bml0LmNvbnRlbnQ7XG4gICAgXG4gICAgbm90ZVRleHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLnRvZ2dsZUlubGluZUFubm90YXRpb24oY2FyZCwgdW5pdCk7XG4gICAgfSk7XG5cbiAgICAvLyBcdTY2M0VcdTc5M0FcdTYyNzlcdTZDRThcbiAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk7XG4gICAgaWYgKGFubm90YXRpb24pIHtcbiAgICAgIGNvbnN0IGFubkVsID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLWFubm90YXRpb24nIH0pO1xuICAgICAgYW5uRWwuaW5uZXJIVE1MID0gYDxzdHJvbmc+XHU2Mjc5XHU2Q0U4XHVGRjFBPC9zdHJvbmc+JHthbm5vdGF0aW9uLmNvbnRlbnR9YDtcbiAgICAgIFxuICAgICAgLy8gXHU3MEI5XHU1MUZCXHU2Mjc5XHU2Q0U4XHU0RTVGXHU1M0VGXHU0RUU1XHU1QzU1XHU1RjAwXHU3RjE2XHU4RjkxXG4gICAgICBhbm5FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlSW5saW5lQW5ub3RhdGlvbihjYXJkLCB1bml0KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1NjgwN1x1N0I3RVxuICAgIGlmICh1bml0Lm1ldGFkYXRhLnRhZ3MubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgdGFncyA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC10YWdzJyB9KTtcbiAgICAgIHVuaXQubWV0YWRhdGEudGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgIHRhZ3MuY3JlYXRlU3Bhbih7IHRleHQ6IGAjJHt0YWd9YCwgY2xzOiAndGFnLWdyaWQnIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU1RTk1XHU5MEU4XHU1MTQzXHU0RkUxXHU2MDZGXG4gICAgY29uc3QgbWV0YSA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkLW1ldGEnIH0pO1xuICAgIG1ldGEuY3JlYXRlU3Bhbih7IHRleHQ6IGBMJHt1bml0LnNvdXJjZS5wb3NpdGlvbi5saW5lfWAsIGNsczogJ2xpbmUtaW5mbycgfSk7XG4gICAgXG4gICAgaWYgKHVuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIG1ldGEuY3JlYXRlU3Bhbih7IHRleHQ6IGBcdUQ4M0NcdURDQ0YgJHt1bml0LmZsYXNoY2FyZElkcy5sZW5ndGh9YCwgY2xzOiAnYmFkZ2UtZ3JpZCcgfSk7XG4gICAgfVxuICB9XG4vKipcbiAqIFx1NkUzMlx1NjdEM1x1OTVFQVx1NTM2MVx1N0Y1MVx1NjgzQ1x1NTM2MVx1NzI0N1x1RkYwOFx1NUUyNlx1NEUwQlx1NjJDOVx1ODNEQ1x1NTM1NVx1RkYwOVxuICovXG5wcml2YXRlIHJlbmRlckZsYXNoY2FyZEdyaWRDYXJkKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGNhcmQ6IEZsYXNoY2FyZCkge1xuICBjb25zdCBjYXJkRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkIGZsYXNoY2FyZC1ncmlkLWNhcmQnIH0pO1xuXG4gIC8vIFx1NjI3OVx1OTFDRlx1OTAwOVx1NjJFOVxuICBpZiAodGhpcy5iYXRjaE1vZGUpIHtcbiAgICBjb25zdCBjaGVja2JveCA9IGNhcmRFbC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgY2xzOiAnYmF0Y2gtY2hlY2tib3gnXG4gICAgfSk7XG4gICAgY2hlY2tib3guc2V0QXR0cmlidXRlKCdkYXRhLWNhcmQtaWQnLCBjYXJkLmlkKTtcbiAgICBjaGVja2JveC5jaGVja2VkID0gdGhpcy5zZWxlY3RlZENhcmRJZHMuaGFzKGNhcmQuaWQpO1xuICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICBpZiAoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuYWRkKGNhcmQuaWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuZGVsZXRlKGNhcmQuaWQpO1xuICAgICAgfVxuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFx1OTg3Nlx1OTBFOFxuICBjb25zdCBoZWFkZXIgPSBjYXJkRWwuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkLWhlYWRlcicgfSk7XG4gIGNvbnN0IHR5cGVMYWJlbCA9IGhlYWRlci5jcmVhdGVEaXYoe1xuICAgIGNsczogYGZsYXNoY2FyZC10eXBlICR7Y2FyZC50eXBlfWAsXG4gICAgdGV4dDogY2FyZC50eXBlID09PSAncWEnID8gJ1EmQScgOiAnXHU1ODZCXHU3QTdBJ1xuICB9KTtcblxuICAvLyBcdTUzRjNcdTRFMEFcdTg5RDJcdTRFMEJcdTYyQzlcdTgzRENcdTUzNTVcdTYzMDlcdTk0QUVcbiAgY29uc3QgdG9vbHMgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkLXRvb2xzJyB9KTtcbiAgY29uc3QgbW9yZUJ0biA9IHRvb2xzLmNyZWF0ZURpdih7IGNsczogJ3Rvb2wtYnRuLWdyaWQnIH0pO1xuICBtb3JlQnRuLmlubmVySFRNTCA9ICdcdTIyRUUnO1xuICBtb3JlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMuc2hvd0ZsYXNoY2FyZENvbnRleHRNZW51KGUsIGNhcmQpO1xuICB9KTtcblxuICAvLyBcdTUzNjFcdTcyNDdcdTUxODVcdTVCQjlcbiAgY29uc3QgY29udGVudCA9IGNhcmRFbC5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLWNhcmQtY29udGVudCcgfSk7XG4gIFxuICBjb25zdCBxdWVzdGlvbiA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnZmxhc2hjYXJkLXF1ZXN0aW9uJyB9KTtcbiAgcXVlc3Rpb24uaW5uZXJIVE1MID0gYDxzdHJvbmc+XHU5NUVFXHU5ODk4XHVGRjFBPC9zdHJvbmc+JHtjYXJkLmZyb250fWA7XG4gIFxuICBjb25zdCBhbnN3ZXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ2ZsYXNoY2FyZC1hbnN3ZXInIH0pO1xuICBjb25zdCBhbnN3ZXJUZXh0ID0gQXJyYXkuaXNBcnJheShjYXJkLmJhY2spID8gY2FyZC5iYWNrLmpvaW4oJywgJykgOiBjYXJkLmJhY2s7XG4gIGFuc3dlci5pbm5lckhUTUwgPSBgPHN0cm9uZz5cdTdCNTRcdTY4NDhcdUZGMUE8L3N0cm9uZz4ke2Fuc3dlclRleHR9YDtcblxuICAvLyBcdTVFOTVcdTkwRThcdTUxNDNcdTRGRTFcdTYwNkZcbiAgY29uc3QgbWV0YSA9IGNhcmRFbC5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLWNhcmQtbWV0YScgfSk7XG4gIG1ldGEuY3JlYXRlU3Bhbih7XG4gICAgdGV4dDogdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKGNhcmQubWV0YWRhdGEuY3JlYXRlZEF0KSksXG4gICAgY2xzOiAnZmxhc2hjYXJkLWRhdGUnXG4gIH0pO1xufVxuICAvKipcbiAgICogXHU2RTMyXHU2N0QzXHU5NUVBXHU1MzYxXHU1MjE3XHU4ODY4XG4gICAqL1xuICBwcml2YXRlIHJlbmRlckNhcmRzTGlzdChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgaGVhZGVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NhcmRzLWhlYWRlcicgfSk7XG4gICAgaGVhZGVyLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1RDgzQ1x1RENDRiBcdTYyNDBcdTY3MDlcdTk1RUFcdTUzNjEnIH0pO1xuXG4gICAgY29uc3QgY2FyZHNDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZHMtZ3JpZCcgfSk7XG4gICAgXG4gICAgY29uc3QgZmxhc2hjYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0QWxsRmxhc2hjYXJkcygpO1xuXG4gICAgXG4gICAgaWYgKGZsYXNoY2FyZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjYXJkc0NvbnRhaW5lci5jcmVhdGVEaXYoe1xuICAgICAgICB0ZXh0OiAnXHVEODNEXHVEQ0VEIFx1NjY4Mlx1NjVFMFx1OTVFQVx1NTM2MScsXG4gICAgICAgIGNsczogJ2VtcHR5LXN0YXRlJ1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZmxhc2hjYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsID0gY2FyZHNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZmxhc2hjYXJkLWl0ZW0nIH0pO1xuXG4gICAgICAvLyBcdTYyNzlcdTkxQ0ZcdTkwMDlcdTYyRTlcdTZBMjFcdTVGMEZcdUZGMUFcdTZERkJcdTUyQTBjaGVja2JveFxuICAgICAgaWYgKHRoaXMuYmF0Y2hNb2RlKSB7XG4gICAgICAgIGNvbnN0IGNoZWNrYm94ID0gY2FyZEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgICAgIGNsczogJ2JhdGNoLWNoZWNrYm94J1xuICAgICAgICB9KTtcbiAgICAgICAgY2hlY2tib3guc2V0QXR0cmlidXRlKCdkYXRhLWNhcmQtaWQnLCBjYXJkLmlkKTtcbiAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmhhcyhjYXJkLmlkKTtcbiAgICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgICAgICBpZiAoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmFkZChjYXJkLmlkKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuZGVsZXRlKGNhcmQuaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY2FyZEhlYWRlciA9IGNhcmRFbC5jcmVhdGVEaXYoeyBjbHM6ICdmbGFzaGNhcmQtaGVhZGVyJyB9KTtcbiAgICAgIGNvbnN0IHR5cGVMYWJlbCA9IGNhcmRIZWFkZXIuY3JlYXRlRGl2KHtcbiAgICAgICAgY2xzOiBgZmxhc2hjYXJkLXR5cGUgJHtjYXJkLnR5cGV9YCxcbiAgICAgICAgdGV4dDogY2FyZC50eXBlID09PSAncWEnID8gJ1EmQScgOiAnXHU1ODZCXHU3QTdBJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNhcmRIZWFkZXIuY3JlYXRlU3Bhbih7XG4gICAgICAgIHRleHQ6IHRoaXMuZm9ybWF0RGF0ZShuZXcgRGF0ZShjYXJkLm1ldGFkYXRhLmNyZWF0ZWRBdCkpLFxuICAgICAgICBjbHM6ICdmbGFzaGNhcmQtZGF0ZSdcbiAgICAgIH0pO1xuXG4gICAgICAvLyBcdTZERkJcdTUyQTBcdTUyMjBcdTk2NjRcdTYzMDlcdTk0QUVcbiAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGNhcmRIZWFkZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogJ1x1RDgzRFx1REREMVx1RkUwRicsXG4gICAgICAgIGNsczogJ2ZsYXNoY2FyZC1kZWxldGUtYnRuJ1xuICAgICAgfSk7XG4gICAgICBkZWxldGVCdG4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ1x1NTIyMFx1OTY2NFx1OTVFQVx1NTM2MScpO1xuICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgaWYgKGNvbmZpcm0oJ1x1Nzg2RVx1NUI5QVx1ODk4MVx1NTIyMFx1OTY2NFx1OEZEOVx1NUYyMFx1OTVFQVx1NTM2MVx1NTQxN1x1RkYxRicpKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5kZWxldGVGbGFzaGNhcmQoY2FyZC5pZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBjYXJkQm9keSA9IGNhcmRFbC5jcmVhdGVEaXYoeyBjbHM6ICdmbGFzaGNhcmQtYm9keScgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHF1ZXN0aW9uID0gY2FyZEJvZHkuY3JlYXRlRGl2KHsgY2xzOiAnZmxhc2hjYXJkLXF1ZXN0aW9uJyB9KTtcbiAgICAgIHF1ZXN0aW9uLmlubmVySFRNTCA9IGA8c3Ryb25nPlx1OTVFRVx1OTg5OFx1RkYxQTwvc3Ryb25nPiR7Y2FyZC5mcm9udH1gO1xuICAgICAgXG4gICAgICBjb25zdCBhbnN3ZXIgPSBjYXJkQm9keS5jcmVhdGVEaXYoeyBjbHM6ICdmbGFzaGNhcmQtYW5zd2VyJyB9KTtcbiAgICAgIGNvbnN0IGFuc3dlclRleHQgPSBBcnJheS5pc0FycmF5KGNhcmQuYmFjaykgPyBjYXJkLmJhY2suam9pbignLCAnKSA6IGNhcmQuYmFjaztcbiAgICAgIGFuc3dlci5pbm5lckhUTUwgPSBgPHN0cm9uZz5cdTdCNTRcdTY4NDhcdUZGMUE8L3N0cm9uZz4ke2Fuc3dlclRleHR9YDtcbiAgICB9KTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFx1NEVBNFx1NEU5Mlx1NjVCOVx1NkNENSA9PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBcdTUyMDdcdTYzNjJcdTUxODVcdTgwNTRcdTYyNzlcdTZDRThcdTdGMTZcdThGOTFcdTU2NjhcbiAgICovXG4gIHByaXZhdGUgdG9nZ2xlSW5saW5lQW5ub3RhdGlvbihjYXJkRWw6IEhUTUxFbGVtZW50LCB1bml0OiBDb250ZW50VW5pdCkge1xuICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NURGMlx1N0VDRlx1NUI1OFx1NTcyOFx1N0YxNlx1OEY5MVx1NTY2OFxuICAgIGxldCBleGlzdGluZ0VkaXRvciA9IGNhcmRFbC5xdWVyeVNlbGVjdG9yKCcuaW5saW5lLWFubm90YXRpb24tZWRpdG9yJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgXG4gICAgaWYgKGV4aXN0aW5nRWRpdG9yKSB7XG4gICAgICAvLyBcdTU5ODJcdTY3OUNcdTVERjJcdTVCNThcdTU3MjhcdUZGMENcdTc5RkJcdTk2NjRcdTdGMTZcdThGOTFcdTU2NjhcdTVFNzZcdTYwNjJcdTU5MERcdTYyNzlcdTZDRThcdTk4ODRcdTg5QzhcbiAgICAgIGV4aXN0aW5nRWRpdG9yLnJlbW92ZSgpO1xuICAgICAgXG4gICAgICAvLyBcdTYwNjJcdTU5MERcdTYyNzlcdTZDRThcdTk4ODRcdTg5QzhcdTY2M0VcdTc5M0FcbiAgICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKTtcbiAgICAgIGlmIChhbm5vdGF0aW9uKSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkRWwucXVlcnlTZWxlY3RvcignLmNhcmQtY29udGVudCwgLmdyaWQtY2FyZC1jb250ZW50JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUHJldmlldyA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcignLmFubm90YXRpb24tcHJldmlldywgLmdyaWQtYW5ub3RhdGlvbicpO1xuICAgICAgICBpZiAoIWV4aXN0aW5nUHJldmlldykge1xuICAgICAgICAgIHRoaXMucmVjcmVhdGVBbm5vdGF0aW9uUHJldmlldyhjb250ZW50LCBjYXJkRWwsIHVuaXQsIGFubm90YXRpb24uY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBcdTgzQjdcdTUzRDZcdTczQjBcdTY3MDlcdTYyNzlcdTZDRThcbiAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk7XG4gICAgXG4gICAgLy8gXHU2MjdFXHU1MjMwXHU2Mjc5XHU2Q0U4XHU5ODg0XHU4OUM4XHU1MTQzXHU3RDIwXHU2MjE2XHU2M0QyXHU1MTY1XHU0RjREXHU3RjZFXG4gICAgY29uc3QgY29udGVudCA9IGNhcmRFbC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1jb250ZW50LCAuZ3JpZC1jYXJkLWNvbnRlbnQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBjb25zdCBhbm5vdGF0aW9uUHJldmlldyA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcignLmFubm90YXRpb24tcHJldmlldywgLmdyaWQtYW5ub3RhdGlvbicpIGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbnN0IGlzR3JpZENhcmQgPSBjYXJkRWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdncmlkLWNhcmQnKTtcbiAgICBcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTY3MDlcdTYyNzlcdTZDRThcdTk4ODRcdTg5QzhcdUZGMENcdTY2RkZcdTYzNjJcdTVCODNcdUZGMUJcdTU0MjZcdTUyMTlcdTU3MjhcdTU0MDhcdTkwMDJcdTRGNERcdTdGNkVcdTYzRDJcdTUxNjVcbiAgICBjb25zdCBlZGl0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlZGl0b3IuY2xhc3NOYW1lID0gJ2lubGluZS1hbm5vdGF0aW9uLWVkaXRvcic7XG4gICAgXG4gICAgY29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgIHRleHRhcmVhLmNsYXNzTmFtZSA9ICdpbmxpbmUtYW5ub3RhdGlvbi10ZXh0YXJlYSc7XG4gICAgdGV4dGFyZWEucGxhY2Vob2xkZXIgPSAnQWRkIGNvbW1lbnQuLi4nO1xuICAgIHRleHRhcmVhLnZhbHVlID0gYW5ub3RhdGlvbj8uY29udGVudCB8fCAnJztcbiAgICBcbiAgICBjb25zdCBoaW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgaGludC5jbGFzc05hbWUgPSAnaW5saW5lLWFubm90YXRpb24taGludCc7XG4gICAgaGludC50ZXh0Q29udGVudCA9ICdTaGlmdCArIEVudGVyIFx1NjM2Mlx1ODg0QywgRW50ZXIgXHU0RkREXHU1QjU4JztcbiAgICBcbiAgICBlZGl0b3IuYXBwZW5kQ2hpbGQodGV4dGFyZWEpO1xuICAgIGVkaXRvci5hcHBlbmRDaGlsZChoaW50KTtcbiAgICBcbiAgICAvLyBcdTY2RkZcdTYzNjJcdTYyMTZcdTYzRDJcdTUxNjVcdTdGMTZcdThGOTFcdTU2NjhcbiAgICBpZiAoYW5ub3RhdGlvblByZXZpZXcpIHtcbiAgICAgIC8vIFx1NjZGRlx1NjM2Mlx1NjI3OVx1NkNFOFx1OTg4NFx1ODlDOFxuICAgICAgYW5ub3RhdGlvblByZXZpZXcucmVwbGFjZVdpdGgoZWRpdG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU1NzI4XHU3QjE0XHU4QkIwXHU2NTg3XHU2NzJDXHU1NDBFXHU5NzYyXHU2M0QyXHU1MTY1XG4gICAgICBjb25zdCBub3RlVGV4dCA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcignLm5vdGUtdGV4dCwgLmdyaWQtbm90ZS10ZXh0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAobm90ZVRleHQpIHtcbiAgICAgICAgbm90ZVRleHQuYWZ0ZXIoZWRpdG9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWRpdG9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTgxRUFcdTUyQThcdTgwNUFcdTcxMjZcbiAgICB0ZXh0YXJlYS5mb2N1cygpO1xuICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKHRleHRhcmVhLnZhbHVlLmxlbmd0aCwgdGV4dGFyZWEudmFsdWUubGVuZ3RoKTtcbiAgICBcbiAgICAvLyBFbnRlciBcdTk1MkVcdTRGRERcdTVCNThcbiAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgYXN5bmMgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhZS5zaGlmdEtleSAmJiAhZS5jdHJsS2V5ICYmICFlLm1ldGFLZXkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVJbmxpbmVBbm5vdGF0aW9uKGVkaXRvciwgdW5pdCwgdGV4dGFyZWEudmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgdGhpcy5jYW5jZWxJbmxpbmVBbm5vdGF0aW9uKGVkaXRvciwgY2FyZEVsLCB1bml0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBcdTU5MzFcdTcxMjZcdTY1RjZcdTRFMERcdTgxRUFcdTUyQThcdTRGRERcdTVCNThcdUZGMENcdTdCNDlcdTVGODVcdTc1MjhcdTYyMzdcdTY0Q0RcdTRGNUNcbiAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKGUpID0+IHtcbiAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NzBCOVx1NTFGQlx1NzY4NFx1NjYyRlx1NTE3Nlx1NEVENlx1NTM2MVx1NzI0N1x1RkYwQ1x1NTE3M1x1OTVFRFx1N0YxNlx1OEY5MVx1NTY2OFxuICAgICAgY29uc3QgcmVsYXRlZFRhcmdldCA9IGUucmVsYXRlZFRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmICghcmVsYXRlZFRhcmdldCB8fCAhZWRpdG9yLmNvbnRhaW5zKHJlbGF0ZWRUYXJnZXQpKSB7XG4gICAgICAgIC8vIFx1NUVGNlx1OEZERlx1NTE3M1x1OTVFRFx1RkYwQ1x1OTA3Rlx1NTE0RFx1NzBCOVx1NTFGQlx1NTE3Nlx1NEVENlx1NTE0M1x1N0QyMFx1NjVGNlx1OTVFQVx1NzBDMVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBpZiAoZWRpdG9yLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsSW5saW5lQW5ub3RhdGlvbihlZGl0b3IsIGNhcmRFbCwgdW5pdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCAyMDApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIFxuICAvKipcbiAgICogXHU0RkREXHU1QjU4XHU1MTg1XHU4MDU0XHU2Mjc5XHU2Q0U4XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHNhdmVJbmxpbmVBbm5vdGF0aW9uKGVkaXRvckVsOiBIVE1MRWxlbWVudCwgdW5pdDogQ29udGVudFVuaXQsIHRleHQ6IHN0cmluZykge1xuICAgIGNvbnN0IHRyaW1tZWRUZXh0ID0gdGV4dC50cmltKCk7XG4gICAgY29uc3QgYW5ub3RhdGlvbiA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldENvbnRlbnRBbm5vdGF0aW9uKHVuaXQuaWQpO1xuICAgIFxuICAgIGlmICh0cmltbWVkVGV4dCkge1xuICAgICAgaWYgKGFubm90YXRpb24pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIudXBkYXRlQW5ub3RhdGlvbihhbm5vdGF0aW9uLmlkLCB7XG4gICAgICAgICAgY29udGVudDogdHJpbW1lZFRleHRcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5hZGRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkLCB0cmltbWVkVGV4dCk7XG4gICAgICB9XG4gICAgICBuZXcgTm90aWNlKCdcdTI3MDUgXHU2Mjc5XHU2Q0U4XHU1REYyXHU0RkREXHU1QjU4Jyk7XG4gICAgfSBlbHNlIGlmIChhbm5vdGF0aW9uKSB7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5kZWxldGVBbm5vdGF0aW9uKGFubm90YXRpb24uaWQpO1xuICAgICAgbmV3IE5vdGljZSgnXHVEODNEXHVEREQxXHVGRTBGIFx1NjI3OVx1NkNFOFx1NURGMlx1NTIyMFx1OTY2NCcpO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdTc5RkJcdTk2NjRcdTdGMTZcdThGOTFcdTU2NjhcbiAgICBlZGl0b3JFbC5yZW1vdmUoKTtcbiAgICBcbiAgICAvLyBcdTUyMzdcdTY1QjBcdTUxODVcdTVCQjlcdTRFRTVcdTY2M0VcdTc5M0FcdTY2RjRcdTY1QjBcdTU0MEVcdTc2ODRcdTYyNzlcdTZDRThcbiAgICB0aGlzLnJlZnJlc2hDb250ZW50KCk7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBcdTUzRDZcdTZEODhcdTUxODVcdTgwNTRcdTYyNzlcdTZDRThcdTdGMTZcdThGOTFcbiAgICovXG4gIHByaXZhdGUgY2FuY2VsSW5saW5lQW5ub3RhdGlvbihlZGl0b3JFbDogSFRNTEVsZW1lbnQsIGNhcmRFbDogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0KSB7XG4gICAgLy8gXHU3OUZCXHU5NjY0XHU3RjE2XHU4RjkxXHU1NjY4XG4gICAgZWRpdG9yRWwucmVtb3ZlKCk7XG4gICAgXG4gICAgLy8gXHU2MDYyXHU1OTBEXHU2Mjc5XHU2Q0U4XHU5ODg0XHU4OUM4XHVGRjA4XHU1OTgyXHU2NzlDXHU2NzA5XHVGRjA5XG4gICAgY29uc3QgYW5ub3RhdGlvbiA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldENvbnRlbnRBbm5vdGF0aW9uKHVuaXQuaWQpO1xuICAgIGlmIChhbm5vdGF0aW9uKSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvbnRlbnQsIC5ncmlkLWNhcmQtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgdGhpcy5yZWNyZWF0ZUFubm90YXRpb25QcmV2aWV3KGNvbnRlbnQsIGNhcmRFbCwgdW5pdCwgYW5ub3RhdGlvbi5jb250ZW50KTtcbiAgICB9XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBcdTkxQ0RcdTY1QjBcdTUyMUJcdTVFRkFcdTYyNzlcdTZDRThcdTk4ODRcdTg5QzhcbiAgICovXG4gIHByaXZhdGUgcmVjcmVhdGVBbm5vdGF0aW9uUHJldmlldyhcbiAgICBjb250ZW50RWw6IEhUTUxFbGVtZW50LCBcbiAgICBjYXJkRWw6IEhUTUxFbGVtZW50LCBcbiAgICB1bml0OiBDb250ZW50VW5pdCwgXG4gICAgYW5ub3RhdGlvblRleHQ6IHN0cmluZ1xuICApIHtcbiAgICBjb25zdCBpc0dyaWRDYXJkID0gY2FyZEVsLmNsYXNzTGlzdC5jb250YWlucygnZ3JpZC1jYXJkJyk7XG4gICAgY29uc3QgYW5uRWwgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgXG4gICAgICBjbHM6IGlzR3JpZENhcmQgPyAnZ3JpZC1hbm5vdGF0aW9uJyA6ICdhbm5vdGF0aW9uLXByZXZpZXcnIFxuICAgIH0pO1xuICAgIFxuICAgIGlmIChpc0dyaWRDYXJkKSB7XG4gICAgICBhbm5FbC5pbm5lckhUTUwgPSBgPHN0cm9uZz5cdTYyNzlcdTZDRThcdUZGMUE8L3N0cm9uZz4ke2Fubm90YXRpb25UZXh0fWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpc3BsYXlUZXh0ID0gYW5ub3RhdGlvblRleHQubGVuZ3RoID4gNjBcbiAgICAgICAgPyBhbm5vdGF0aW9uVGV4dC5zdWJzdHJpbmcoMCwgNjApICsgJy4uLidcbiAgICAgICAgOiBhbm5vdGF0aW9uVGV4dDtcbiAgICAgIGFubkVsLnRleHRDb250ZW50ID0gYFx1RDgzRFx1RENBQyAke2Rpc3BsYXlUZXh0fWA7XG4gICAgfVxuICAgIFxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlxuICAgIGFubkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLnRvZ2dsZUlubGluZUFubm90YXRpb24oY2FyZEVsLCB1bml0KTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBcdTYzRDJcdTUxNjVcdTUyMzBcdTZCNjNcdTc4NkVcdTRGNERcdTdGNkVcbiAgICBjb25zdCBub3RlVGV4dCA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcubm90ZS10ZXh0LCAuZ3JpZC1ub3RlLXRleHQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAobm90ZVRleHQpIHtcbiAgICAgIG5vdGVUZXh0LmFmdGVyKGFubkVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGVudEVsLmFwcGVuZENoaWxkKGFubkVsKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU2MjUzXHU1RjAwXHU2Mjc5XHU2Q0U4XHU3RjE2XHU4RjkxXHU1NjY4XHVGRjA4XHU2QTIxXHU2MDAxXHU2ODQ2XHU2NUI5XHU1RjBGXHVGRjBDXHU0RkREXHU3NTU5XHU3NTI4XHU0RThFXHU1M0YzXHU5NTJFXHU4M0RDXHU1MzU1XHVGRjA5XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIG9wZW5Bbm5vdGF0aW9uRWRpdG9yKHVuaXQ6IENvbnRlbnRVbml0KSB7XG4gICAgY29uc3QgYW5ub3RhdGlvbiA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldENvbnRlbnRBbm5vdGF0aW9uKHVuaXQuaWQpO1xuICAgIGNvbnN0IGV4aXN0aW5nVGV4dCA9IGFubm90YXRpb24/LmNvbnRlbnQgfHwgJyc7XG5cbiAgICBjb25zdCBtb2RhbCA9IG5ldyBBbm5vdGF0aW9uTW9kYWwoXG4gICAgICB0aGlzLmFwcCxcbiAgICAgIGV4aXN0aW5nVGV4dCxcbiAgICAgIGFzeW5jIChuZXdUZXh0OiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKG5ld1RleHQudHJpbSgpKSB7XG4gICAgICAgICAgaWYgKGFubm90YXRpb24pIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLnVwZGF0ZUFubm90YXRpb24oYW5ub3RhdGlvbi5pZCwge1xuICAgICAgICAgICAgICBjb250ZW50OiBuZXdUZXh0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuYWRkQ29udGVudEFubm90YXRpb24odW5pdC5pZCwgbmV3VGV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBcdTYyNzlcdTZDRThcdTVERjJcdTRGRERcdTVCNTgnKTtcbiAgICAgICAgfSBlbHNlIGlmIChhbm5vdGF0aW9uKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZGVsZXRlQW5ub3RhdGlvbihhbm5vdGF0aW9uLmlkKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdcdUQ4M0RcdURERDFcdUZFMEYgXHU2Mjc5XHU2Q0U4XHU1REYyXHU1MjIwXHU5NjY0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICB9XG4gICAgKTtcblxuICAgIG1vZGFsLm9wZW4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdThERjNcdThGNkNcdTUyMzBcdTUzOUZcdTY1ODdcbiAgICovXG4gIHByaXZhdGUgYXN5bmMganVtcFRvU291cmNlKHVuaXQ6IENvbnRlbnRVbml0KSB7XG5cbiAgICBcbiAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHVuaXQuc291cmNlLmZpbGUpO1xuICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdTY1ODdcdTRFRjZcdTRFMERcdTVCNThcdTU3MjgnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIFxuICAgIC8vIFx1NjgwN1x1OEJCMFx1OTcwMFx1ODk4MVx1NjA2Mlx1NTkwRFx1NkVEQVx1NTJBOFxuICAgIHRoaXMuc2hvdWxkUmVzdG9yZVNjcm9sbCA9IHRydWU7XG5cbiAgICBcbiAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpO1xuICAgIGF3YWl0IGxlYWYub3BlbkZpbGUoZmlsZSk7XG4gIFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKEl0ZW1WaWV3KTtcbiAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgIGNvbnN0IGVkaXRvciA9ICh2aWV3IGFzIGFueSkuZWRpdG9yO1xuICAgICAgICBpZiAoZWRpdG9yKSB7XG4gICAgICAgICAgY29uc3QgbGluZSA9IHVuaXQuc291cmNlLnBvc2l0aW9uLmxpbmU7XG4gICAgICAgICAgY29uc3QgbGluZUNvdW50ID0gZWRpdG9yLmxpbmVDb3VudCgpO1xuICAgICAgICAgIGNvbnN0IHZhbGlkTGluZSA9IE1hdGgubWluKGxpbmUsIGxpbmVDb3VudCAtIDEpO1xuICAgICAgICAgIFxuICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3IoeyBsaW5lOiB2YWxpZExpbmUsIGNoOiAwIH0pO1xuICAgICAgICAgIGVkaXRvci5zY3JvbGxJbnRvVmlldyhcbiAgICAgICAgICAgIHsgZnJvbTogeyBsaW5lOiB2YWxpZExpbmUsIGNoOiAwIH0sIHRvOiB7IGxpbmU6IHZhbGlkTGluZSwgY2g6IDAgfSB9LFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICk7XG4gICAgICAgICAgXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCBsaW5lTGVuZ3RoID0gZWRpdG9yLmdldExpbmUodmFsaWRMaW5lKT8ubGVuZ3RoIHx8IDA7XG4gICAgICAgICAgICAgIGVkaXRvci5zZXRTZWxlY3Rpb24oXG4gICAgICAgICAgICAgICAgeyBsaW5lOiB2YWxpZExpbmUsIGNoOiAwIH0sIFxuICAgICAgICAgICAgICAgIHsgbGluZTogdmFsaWRMaW5lLCBjaDogbGluZUxlbmd0aCB9XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NlbGVjdGlvbiBlcnJvcjonLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCAxMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICB9LCAyMDApO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NUZFQlx1OTAxRlx1NzUxRlx1NjIxMFx1OTVFQVx1NTM2MVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBxdWlja0dlbmVyYXRlRmxhc2hjYXJkKHVuaXQ6IENvbnRlbnRVbml0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgUXVpY2tGbGFzaGNhcmRDcmVhdG9yIH0gPSBhd2FpdCBpbXBvcnQoJy4uL2NvcmUvUXVpY2tGbGFzaGNhcmRDcmVhdG9yJyk7XG4gICAgICBjb25zdCBjcmVhdG9yID0gbmV3IFF1aWNrRmxhc2hjYXJkQ3JlYXRvcih0aGlzLnBsdWdpbik7XG4gICAgICBhd2FpdCBjcmVhdG9yLmNyZWF0ZVNtYXJ0Q2FyZCh1bml0KTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMSBcdTk1RUFcdTUzNjFcdTVERjJcdTc1MUZcdTYyMTAnKTtcbiAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI3NEMgXHU3NTFGXHU2MjEwXHU5NUVBXHU1MzYxXHU1OTMxXHU4RDI1Jyk7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gKiBcdTY2M0VcdTc5M0FcdTYyNzlcdTkxQ0ZcdTY0Q0RcdTRGNUNcdTgzRENcdTUzNTVcbiAqL1xucHJpdmF0ZSBzaG93QmF0Y2hNZW51KGV2ZW50OiBNb3VzZUV2ZW50LCB1bml0PzogQ29udGVudFVuaXQpIHtcbiAgY29uc3QgbWVudSA9IG5ldyBNZW51KCk7XG5cblxuXG4gIC8vIFx1NURGMlx1N0VDRlx1NTcyOFx1NjI3OVx1OTFDRlx1NkEyMVx1NUYwRlx1RkYwQ1x1NjYzRVx1NzkzQVx1NjI3OVx1OTFDRlx1NjRDRFx1NEY1Q1x1OTAwOVx1OTg3OVxuICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgaXRlbVxuICAgICAgLnNldFRpdGxlKHRoaXMuaXNBbGxTZWxlY3RlZCgpID8gJ1x1MjYxMSBcdTkwMDlcdTYyRTknIDogJ1x1MjYxMCBcdTUxNjhcdTkwMDknKVxuICAgICAgLnNldEljb24oJ2NoZWNrLXNxdWFyZScpXG4gICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgIHRoaXMudG9nZ2xlU2VsZWN0QWxsKCk7XG4gICAgICB9KVxuICApO1xuXG4gIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgaWYgKHRoaXMudmlld1R5cGUgPT09ICdub3RlcycpIHtcbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZShgXHUyNkExIFx1NjI3OVx1OTFDRlx1NTIzNlx1NTM2MSAoJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSlgKVxuICAgICAgICAuc2V0SWNvbignemFwJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgIHRoaXMuYmF0Y2hDcmVhdGVGbGFzaGNhcmRzKCk7XG4gICAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICBpdGVtXG4gICAgICAuc2V0VGl0bGUoYFx1RDgzRFx1REREMVx1RkUwRiBcdTUyMjBcdTk2NjRcdTkwMDlcdTRFMkQgKCR7dGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJyA/IHRoaXMuc2VsZWN0ZWRDYXJkSWRzLnNpemUgOiB0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSlgKVxuICAgICAgLnNldEljb24oJ3RyYXNoJylcbiAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMudmlld1R5cGUgPT09ICdjYXJkcycpIHtcbiAgICAgICAgICB0aGlzLmJhdGNoRGVsZXRlRmxhc2hjYXJkcygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuYmF0Y2hEZWxldGVOb3RlcygpO1xuICAgICAgICB9XG4gICAgICB9KVxuICApO1xuXG4gIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgIGl0ZW1cbiAgICAgIC5zZXRUaXRsZSgnXHUyNzEzIFx1OTAwMFx1NTFGQVx1NjI3OVx1OTFDRlx1NkEyMVx1NUYwRicpXG4gICAgICAuc2V0SWNvbigneCcpXG4gICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgIHRoaXMuYmF0Y2hNb2RlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICB9KVxuICApO1xuXG4gIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XG59XG5cbiAgLyoqXG4gICAqIFx1NjYzRVx1NzkzQVx1NEUwQVx1NEUwQlx1NjU4N1x1ODNEQ1x1NTM1NVxuICAgKi9cbiAgcHJpdmF0ZSBzaG93Q29udGV4dE1lbnUoZXZlbnQ6IE1vdXNlRXZlbnQsIHVuaXQ6IENvbnRlbnRVbml0KSB7XG4gICAgY29uc3QgbWVudSA9IG5ldyBNZW51KCk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHVEODNEXHVEQ0Q2IFx1OERGM1x1OEY2Q1x1NTIzMFx1NTM5Rlx1NjU4NycpXG4gICAgICAgIC5zZXRJY29uKCdhcnJvdy11cC1yaWdodCcpXG4gICAgICAgIC5vbkNsaWNrKCgpID0+IHRoaXMuanVtcFRvU291cmNlKHVuaXQpKVxuICAgICk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHVEODNEXHVEQ0FDIFx1N0YxNlx1OEY5MVx1NjI3OVx1NkNFOCcpXG4gICAgICAgIC5zZXRJY29uKCdtZXNzYWdlLXNxdWFyZScpXG4gICAgICAgIC5vbkNsaWNrKCgpID0+IHRoaXMub3BlbkFubm90YXRpb25FZGl0b3IodW5pdCkpXG4gICAgKTtcblxuICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHUyNkExIFx1NzUxRlx1NjIxMFx1OTVFQVx1NTM2MScpXG4gICAgICAgIC5zZXRJY29uKCd6YXAnKVxuICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLnF1aWNrR2VuZXJhdGVGbGFzaGNhcmQodW5pdCkpXG4gICAgKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdTI3OTUgXHU1MjFCXHU1RUZBIFFBIFx1OTVFQVx1NTM2MScpXG4gICAgICAgIC5zZXRJY29uKCdwbHVzJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRmxhc2hjYXJkKHVuaXQsICdxYScpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHUyNzk1IFx1NTIxQlx1NUVGQVx1NTg2Qlx1N0E3QVx1OTVFQVx1NTM2MScpXG4gICAgICAgIC5zZXRJY29uKCdwbHVzJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRmxhc2hjYXJkKHVuaXQsICdjbG96ZScpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1NjdFNVx1NzcwQlx1N0VERlx1OEJBMScpXG4gICAgICAgIC5zZXRJY29uKCdiYXItY2hhcnQnKVxuICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgdGhpcy5wbHVnaW4uYWN0aXZhdGVTdGF0cygpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1RDgzRFx1REREMVx1RkUwRiBcdTUyMjBcdTk2NjRcdTdCMTRcdThCQjAnKVxuICAgICAgICAuc2V0SWNvbigndHJhc2gnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgaWYgKGNvbmZpcm0oJ1x1Nzg2RVx1NUI5QVx1ODk4MVx1NTIyMFx1OTY2NFx1OEZEOVx1Njc2MVx1N0IxNFx1OEJCMFx1NTQxN1x1RkYxRicpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5kZWxldGVDb250ZW50VW5pdCh1bml0LmlkKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1RDgzRFx1REREMVx1RkUwRiBcdTdCMTRcdThCQjBcdTVERjJcdTUyMjBcdTk2NjQnKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5zaG93QXRNb3VzZUV2ZW50KGV2ZW50KTtcbiAgfVxuLyoqXG4gKiBcdTY2M0VcdTc5M0FcdTk1RUFcdTUzNjFcdTRFMEFcdTRFMEJcdTY1ODdcdTgzRENcdTUzNTVcbiAqL1xucHJpdmF0ZSBzaG93Rmxhc2hjYXJkQ29udGV4dE1lbnUoZXZlbnQ6IE1vdXNlRXZlbnQsIGNhcmQ6IEZsYXNoY2FyZCkge1xuICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcblxuICAvLyBcdThERjNcdThGNkNcdTUyMzBcdTUzOUZcdTY1ODdcbiAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgIGl0ZW1cbiAgICAgIC5zZXRUaXRsZSgnXHVEODNEXHVEQ0Q2IFx1OERGM1x1OEY2Q1x1NTIzMFx1NTM5Rlx1NjU4NycpXG4gICAgICAuc2V0SWNvbignYXJyb3ctdXAtcmlnaHQnKVxuICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAvLyBcdTRGRUVcdTY1MzlcdUZGMUFcdTRGN0ZcdTc1Mjggc291cmNlQ29udGVudElkXG4gICAgICAgIGNvbnN0IHVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjYXJkLnNvdXJjZUNvbnRlbnRJZCk7XG4gICAgICAgIGlmICh1bml0KSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5qdW1wVG9Tb3VyY2UodW5pdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2MjdFXHU0RTBEXHU1MjMwXHU3QjE0XHU4QkIwXHU1MzU1XHU1MTQzXHVGRjBDXHU1QzFEXHU4QkQ1XHU3NkY0XHU2M0E1XHU2MjUzXHU1RjAwXHU2NTg3XHU0RUY2XG4gICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChjYXJkLnNvdXJjZUZpbGUpO1xuICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKS5vcGVuRmlsZShmaWxlKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBcdTVERjJcdTYyNTNcdTVGMDBcdTZFOTBcdTY1ODdcdTRFRjYnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1NjI3RVx1NEUwRFx1NTIzMFx1NTM5Rlx1NTlDQlx1N0IxNFx1OEJCMCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgKTtcbiAgLy8gXHU3RjE2XHU4RjkxXHU1MzYxXHU3MjQ3XG4gIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICBpdGVtXG4gICAgICAuc2V0VGl0bGUoJ1x1MjcwRlx1RkUwRiBcdTdGMTZcdThGOTFcdTUzNjFcdTcyNDcnKVxuICAgICAgLnNldEljb24oJ2VkaXQnKVxuICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICB0aGlzLmVkaXRGbGFzaGNhcmQoY2FyZCk7XG4gICAgICB9KVxuICApO1xuXG4gIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgLy8gXHU2N0U1XHU3NzBCXHU3RURGXHU4QkExXG4gIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICBpdGVtXG4gICAgICAuc2V0VGl0bGUoJ1x1RDgzRFx1RENDQSBcdTY3RTVcdTc3MEJcdTdFREZcdThCQTEnKVxuICAgICAgLnNldEljb24oJ2Jhci1jaGFydCcpXG4gICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFjdGl2YXRlU3RhdHMoKTtcbiAgICAgIH0pXG4gICk7XG5cbiAgbWVudS5hZGRTZXBhcmF0b3IoKTtcblxuICAvLyBcdTUyMjBcdTk2NjRcdTUzNjFcdTcyNDdcbiAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgIGl0ZW1cbiAgICAgIC5zZXRUaXRsZSgnXHVEODNEXHVEREQxXHVGRTBGIFx1NTIyMFx1OTY2NFx1NTM2MVx1NzI0NycpXG4gICAgICAuc2V0SWNvbigndHJhc2gnKVxuICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoY29uZmlybSgnXHU3ODZFXHU1QjlBXHU4OTgxXHU1MjIwXHU5NjY0XHU4RkQ5XHU1RjIwXHU5NUVBXHU1MzYxXHU1NDE3XHVGRjFGJykpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZUZsYXNoY2FyZChjYXJkLmlkKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgKTtcblxuICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xufVxuICAvKipcbiAgICogXHU1MjFCXHU1RUZBXHU3Mjc5XHU1QjlBXHU3QzdCXHU1NzhCXHU3Njg0XHU5NUVBXHU1MzYxXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNyZWF0ZUZsYXNoY2FyZCh1bml0OiBDb250ZW50VW5pdCwgdHlwZTogJ3FhJyB8ICdjbG96ZScpIHtcbiAgICBjb25zdCBtb2RhbCA9IG5ldyBGbGFzaGNhcmRDcmVhdGlvbk1vZGFsKFxuICAgICAgdGhpcy5hcHAsXG4gICAgICB1bml0LFxuICAgICAgdHlwZSxcbiAgICAgIGFzeW5jIChxdWVzdGlvbjogc3RyaW5nLCBhbnN3ZXI6IHN0cmluZykgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh0eXBlID09PSAncWEnKSB7XG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTk1RUVcdTdCNTRcdTUzNjFcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuY3JlYXRlUUFDYXJkKFxuICAgICAgICAgICAgICB1bml0LmlkLFxuICAgICAgICAgICAgICBxdWVzdGlvbixcbiAgICAgICAgICAgICAgYW5zd2VyXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdTUzNjEgLSBcdTdCODBcdTUzNTVcdTU5MDRcdTc0MDZcdUZGMENcdTVDMDZcdTY1NzRcdTRFMkFcdTdCNTRcdTY4NDhcdTRGNUNcdTRFM0FcdTRFMDBcdTRFMkFcdTdBN0FcbiAgICAgICAgICAgIGNvbnN0IGRlbGV0aW9ucyA9IFt7XG4gICAgICAgICAgICAgIGluZGV4OiAwLFxuICAgICAgICAgICAgICBhbnN3ZXI6IGFuc3dlclxuICAgICAgICAgICAgfV07XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmNyZWF0ZUNsb3plQ2FyZChcbiAgICAgICAgICAgICAgdW5pdC5pZCxcbiAgICAgICAgICAgICAgcXVlc3Rpb24sXG4gICAgICAgICAgICAgIGRlbGV0aW9uc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgbmV3IE5vdGljZShgXHUyNzA1ICR7dHlwZSA9PT0gJ3FhJyA/ICdRQScgOiAnXHU1ODZCXHU3QTdBJ31cdTk1RUFcdTUzNjFcdTVERjJcdTUyMUJcdTVFRkFgKTtcbiAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBmbGFzaGNhcmQ6JywgZXJyb3IpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcdTU5MzFcdThEMjUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG5cbiAgICBtb2RhbC5vcGVuKCk7XG4gIH1cblxuICAvKipcbiAgICogXHU1NzI4XHU3RjE2XHU4RjkxXHU1NjY4XHU0RTJEXHU2MjUzXHU1RjAwXHU2NTg3XHU0RUY2XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIG9wZW5GaWxlSW5FZGl0b3IoZmlsZVBhdGg6IHN0cmluZykge1xuICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKS5vcGVuRmlsZShmaWxlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1NjVFMFx1NkNENVx1NjI1M1x1NUYwMFx1NjU4N1x1NEVGNicpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTUyMjBcdTk2NjRcdTk1RUFcdTUzNjFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZGVsZXRlRmxhc2hjYXJkKGNhcmRJZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZGVsZXRlQ2FyZChjYXJkSWQpO1xuICAgICAgbmV3IE5vdGljZSgnXHVEODNEXHVEREQxXHVGRTBGIFx1OTVFQVx1NTM2MVx1NURGMlx1NTIyMFx1OTY2NCcpO1xuICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGZsYXNoY2FyZDonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdcdTI3NEMgXHU1MjIwXHU5NjY0XHU5NUVBXHU1MzYxXHU1OTMxXHU4RDI1Jyk7XG4gICAgfVxuICB9XG4vKipcbiAqIFx1N0YxNlx1OEY5MVx1OTVFQVx1NTM2MVxuICovXG5wcml2YXRlIGVkaXRGbGFzaGNhcmQoY2FyZDogRmxhc2hjYXJkKSB7XG4gIGNvbnN0IG1vZGFsID0gbmV3IEZsYXNoY2FyZEVkaXRNb2RhbChcbiAgICB0aGlzLmFwcCxcbiAgICBjYXJkLFxuICAgIGFzeW5jIChxdWVzdGlvbjogc3RyaW5nLCBhbnN3ZXI6IHN0cmluZykgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NkY0XHU2NUIwXHU1NDBFXHU3Njg0XHU1MzYxXHU3MjQ3XHU1QkY5XHU4QzYxXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRDYXJkOiBGbGFzaGNhcmQgPSB7XG4gICAgICAgICAgLi4uY2FyZCxcbiAgICAgICAgICBmcm9udDogcXVlc3Rpb24sXG4gICAgICAgICAgYmFjazogY2FyZC50eXBlID09PSAnY2xvemUnID8gW2Fuc3dlcl0gOiBhbnN3ZXIsXG4gICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgIC4uLmNhcmQubWV0YWRhdGEsXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KClcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBcdTU5ODJcdTY3OUMgdXBkYXRlQ2FyZCBcdTUzRUFcdTYzQTVcdTUzRDdcdTRFMDBcdTRFMkFcdTUzQzJcdTY1NzBcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci51cGRhdGVDYXJkKHVwZGF0ZWRDYXJkKTtcbiAgICAgICAgXG4gICAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBcdTk1RUFcdTUzNjFcdTVERjJcdTY2RjRcdTY1QjAnKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBmbGFzaGNhcmQ6JywgZXJyb3IpO1xuICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgXHU2NkY0XHU2NUIwXHU5NUVBXHU1MzYxXHU1OTMxXHU4RDI1Jyk7XG4gICAgICB9XG4gICAgfVxuICApO1xuICBtb2RhbC5vcGVuKCk7XG59XG4gIC8qKlxuICAgKiBcdTY2RjRcdTY1QjBcdTYyNzlcdTkxQ0ZcdTY0Q0RcdTRGNUNcdTYzMDlcdTk0QUVcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlQmF0Y2hCdXR0b25zKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgYmF0Y2hBY3Rpb25zID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5iYXRjaC1hY3Rpb25zJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKGJhdGNoQWN0aW9ucykge1xuICAgICAgY29uc3Qgc2VsZWN0QWxsQnRuID0gYmF0Y2hBY3Rpb25zLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3QtYWxsLWJ0bicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgY29uc3QgZGVsZXRlQnRuID0gYmF0Y2hBY3Rpb25zLnF1ZXJ5U2VsZWN0b3IoJy5iYXRjaC1kZWxldGUtYnRuJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBjb25zdCBjcmVhdGVCdG4gPSBiYXRjaEFjdGlvbnMucXVlcnlTZWxlY3RvcignLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG4nKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIFxuICAgICAgaWYgKHNlbGVjdEFsbEJ0bikge1xuICAgICAgICBzZWxlY3RBbGxCdG4udGV4dENvbnRlbnQgPSB0aGlzLmlzQWxsU2VsZWN0ZWQoKSA/ICdcdTI2MTEgXHU5MDA5XHU2MkU5JyA6ICdcdTI2MTAgXHU1MTY4XHU5MDA5JztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGRlbGV0ZUJ0bikge1xuICAgICAgICBjb25zdCBjb3VudCA9IHRoaXMudmlld1R5cGUgPT09ICdjYXJkcycgPyB0aGlzLnNlbGVjdGVkQ2FyZElkcy5zaXplIDogdGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZTtcbiAgICAgICAgZGVsZXRlQnRuLnRleHRDb250ZW50ID0gYFx1RDgzRFx1REREMVx1RkUwRiBcdTUyMjBcdTk2NjRcdTkwMDlcdTRFMkQgKCR7Y291bnR9KWA7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChjcmVhdGVCdG4pIHtcbiAgICAgICAgY3JlYXRlQnRuLnRleHRDb250ZW50ID0gYFx1MjZBMSBcdTYyNzlcdTkxQ0ZcdTUyMzZcdTUzNjEgKCR7dGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZX0pYDtcbiAgICAgIH1cbiAgICB9XG4gICAgICAvLyBcdTY2RjRcdTY1QjAgaGVhZGVyIFx1NEUyRFx1NzY4NFx1NTE2OFx1OTAwOVx1NjMwOVx1OTRBRVxuICBjb25zdCBoZWFkZXJTZWxlY3RCdG4gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnNlbGVjdC1hbGwtYnRuLWhlYWRlcicpIGFzIEhUTUxFbGVtZW50O1xuICBpZiAoaGVhZGVyU2VsZWN0QnRuKSB7XG4gICAgaGVhZGVyU2VsZWN0QnRuLnRleHRDb250ZW50ID0gdGhpcy5pc0FsbFNlbGVjdGVkKCkgPyAnXHUyNjExIFx1OTAwOVx1NjJFOScgOiAnXHUyNjEwIFx1NTE2OFx1OTAwOSc7XG4gIH1cbiAgXG4gIC8vIFx1NjZGNFx1NjVCMFx1NEZBN1x1OEZCOVx1NjgwRlx1NEUyRFx1NzY4NFx1NTE2OFx1OTAwOVx1NjMwOVx1OTRBRVxuICBjb25zdCBzaWRlYmFyU2VsZWN0QnRuID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3QtYWxsLWJ0bi1zaWRlYmFyJykgYXMgSFRNTEVsZW1lbnQ7XG4gIGlmIChzaWRlYmFyU2VsZWN0QnRuKSB7XG4gICAgc2lkZWJhclNlbGVjdEJ0bi50ZXh0Q29udGVudCA9IHRoaXMuaXNBbGxTZWxlY3RlZCgpID8gJ1x1MjYxMSBcdTkwMDlcdTYyRTknIDogJ1x1MjYxMCBcdTUxNjhcdTkwMDknO1xuICB9XG4gIH1cblxuICAvKipcbiAgICogXHU2Mjc5XHU5MUNGXHU1MjIwXHU5NjY0XHU5NUVBXHU1MzYxXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGJhdGNoRGVsZXRlRmxhc2hjYXJkcygpIHtcbiAgICBpZiAodGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZSA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1OEJGN1x1NTE0OFx1OTAwOVx1NjJFOVx1ODk4MVx1NTIyMFx1OTY2NFx1NzY4NFx1OTVFQVx1NTM2MScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghY29uZmlybShgXHU3ODZFXHU1QjlBXHU4OTgxXHU1MjIwXHU5NjY0XHU5MDA5XHU0RTJEXHU3Njg0ICR7dGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZX0gXHU1RjIwXHU5NUVBXHU1MzYxXHU1NDE3XHVGRjFGYCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgc3VjY2VzcyA9IDA7XG4gICAgbGV0IGZhaWxlZCA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IGNhcmRJZCBvZiB0aGlzLnNlbGVjdGVkQ2FyZElkcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5kZWxldGVDYXJkKGNhcmRJZCk7XG4gICAgICAgIHN1Y2Nlc3MrKztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGZsYXNoY2FyZDonLCBlcnJvcik7XG4gICAgICAgIGZhaWxlZCsrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmNsZWFyKCk7XG4gICAgbmV3IE5vdGljZShgXHUyNzA1IFx1NURGMlx1NTIyMFx1OTY2NCAke3N1Y2Nlc3N9IFx1NUYyMFx1OTVFQVx1NTM2MSR7ZmFpbGVkID4gMCA/IGBcdUZGMEMke2ZhaWxlZH0gXHU1RjIwXHU1OTMxXHU4RDI1YCA6ICcnfWApO1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjI3OVx1OTFDRlx1NTIyMFx1OTY2NFx1N0IxNFx1OEJCMFxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBiYXRjaERlbGV0ZU5vdGVzKCkge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU4OTgxXHU1MjIwXHU5NjY0XHU3Njg0XHU3QjE0XHU4QkIwJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFjb25maXJtKGBcdTc4NkVcdTVCOUFcdTg5ODFcdTUyMjBcdTk2NjRcdTkwMDlcdTRFMkRcdTc2ODQgJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSBcdTY3NjFcdTdCMTRcdThCQjBcdTU0MTdcdUZGMUZgKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBzdWNjZXNzID0gMDtcbiAgICBsZXQgZmFpbGVkID0gMDtcblxuICAgIGZvciAoY29uc3QgdW5pdElkIG9mIHRoaXMuc2VsZWN0ZWRVbml0SWRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5kZWxldGVDb250ZW50VW5pdCh1bml0SWQpO1xuICAgICAgICBzdWNjZXNzKys7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBub3RlOicsIGVycm9yKTtcbiAgICAgICAgZmFpbGVkKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICBuZXcgTm90aWNlKGBcdTI3MDUgXHU1REYyXHU1MjIwXHU5NjY0ICR7c3VjY2Vzc30gXHU2NzYxXHU3QjE0XHU4QkIwJHtmYWlsZWQgPiAwID8gYFx1RkYwQyR7ZmFpbGVkfSBcdTY3NjFcdTU5MzFcdThEMjVgIDogJyd9YCk7XG4gICAgdGhpcy5yZWZyZXNoKCk7XG4gIH1cblxuICAvKipcbiAgICogXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1MTY4XHU5MDA5XG4gICAqL1xuICBwcml2YXRlIGlzQWxsU2VsZWN0ZWQoKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMudmlld1R5cGUgPT09ICdjYXJkcycpIHtcbiAgICAgIGNvbnN0IGZsYXNoY2FyZHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldEFsbEZsYXNoY2FyZHMoKTtcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuZGlzcGxheU1vZGUgPT09ICdtYWluJyAmJiB0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgICBjb25zdCBmaWx0ZXJlZENhcmRzID0gZmxhc2hjYXJkcy5maWx0ZXIoY2FyZCA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZmlsZScpIHtcbiAgICAgICAgICAgIHJldHVybiBjYXJkLnNvdXJjZUZpbGUgPT09IHRoaXMuc2VsZWN0ZWRGaWxlO1xuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICd0YWcnKSB7XG4gICAgICAgICAgICBjb25zdCB1bml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY2FyZC5zb3VyY2VDb250ZW50SWQpO1xuICAgICAgICAgICAgcmV0dXJuIHVuaXQ/Lm1ldGFkYXRhLnRhZ3MuaW5jbHVkZXModGhpcy5zZWxlY3RlZEZpbGUhKSB8fCBcbiAgICAgICAgICAgICAgICAgICBjYXJkLnRhZ3M/LmluY2x1ZGVzKHRoaXMuc2VsZWN0ZWRGaWxlISkgfHwgXG4gICAgICAgICAgICAgICAgICAgY2FyZC5kZWNrID09PSB0aGlzLnNlbGVjdGVkRmlsZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZGF0ZScpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUoY2FyZC5tZXRhZGF0YS5jcmVhdGVkQXQpKSA9PT0gdGhpcy5zZWxlY3RlZEZpbGU7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmaWx0ZXJlZENhcmRzLmxlbmd0aCA+IDAgJiYgdGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZSA9PT0gZmlsdGVyZWRDYXJkcy5sZW5ndGg7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBmbGFzaGNhcmRzLmxlbmd0aCA+IDAgJiYgdGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZSA9PT0gZmxhc2hjYXJkcy5sZW5ndGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB2aXNpYmxlVW5pdHM6IENvbnRlbnRVbml0W107XG4gICAgICBcbiAgICAgIGlmICh0aGlzLmRpc3BsYXlNb2RlID09PSAnc2lkZWJhcicpIHtcbiAgICAgICAgLy8gXHVEODNEXHVERDI3IFx1NEZBN1x1OEZCOVx1NjgwRlx1RkYxQVx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NkUzMlx1NjdEM1x1NTIxN1x1ODg2OFx1NEUyRFx1NzY4NFx1NjI0MFx1NjcwOVx1N0IxNFx1OEJCMFxuICAgICAgICBsZXQgdW5pdHMgPSB0aGlzLmdldEZpbHRlcmVkVW5pdHMoKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgICAgIC8vIFx1NjcwOVx1OTAwOVx1NEUyRFx1NjU4N1x1NEVGNjpcdTY4MzlcdTYzNkUgZ3JvdXBNb2RlIFx1OEZDN1x1NkVFNFxuICAgICAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgICAgICB2aXNpYmxlVW5pdHMgPSB1bml0cy5maWx0ZXIodW5pdCA9PiB1bml0LnNvdXJjZS5maWxlID09PSB0aGlzLnNlbGVjdGVkRmlsZSk7XG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ3RhZycpIHtcbiAgICAgICAgICAgIC8vIFx1RDgzRFx1REQyNyBcdTUxNzNcdTk1MkVcdTRGRUVcdTY1Mzk6XHU2MzA5XHU2ODA3XHU3QjdFXHU3QjVCXHU5MDA5XHU2NUY2LFx1NTNFQVx1OTAwOVx1NjJFOVx1NTMwNVx1NTQyQlx1OEJFNVx1NjgwN1x1N0I3RVx1NzY4NFx1N0IxNFx1OEJCMFxuICAgICAgICAgICAgdmlzaWJsZVVuaXRzID0gdW5pdHMuZmlsdGVyKHVuaXQgPT4gdW5pdC5tZXRhZGF0YS50YWdzLmluY2x1ZGVzKHRoaXMuc2VsZWN0ZWRGaWxlISkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdkYXRlJykge1xuICAgICAgICAgICAgdmlzaWJsZVVuaXRzID0gdW5pdHMuZmlsdGVyKHVuaXQgPT4gXG4gICAgICAgICAgICAgIHRoaXMuZm9ybWF0RGF0ZShuZXcgRGF0ZSh1bml0Lm1ldGFkYXRhLmNyZWF0ZWRBdCkpID09PSB0aGlzLnNlbGVjdGVkRmlsZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmlzaWJsZVVuaXRzID0gdW5pdHM7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZpc2libGVVbml0cyA9IHVuaXRzO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBcdTRFM0JcdTc1NENcdTk3NjJcbiAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgdW5pdHMgPSB0aGlzLmdldEZpbHRlcmVkVW5pdHMoKTtcbiAgICAgICAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZmlsZScpIHtcbiAgICAgICAgICB2aXNpYmxlVW5pdHMgPSB1bml0cy5maWx0ZXIodW5pdCA9PiB1bml0LnNvdXJjZS5maWxlID09PSB0aGlzLnNlbGVjdGVkRmlsZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICd0YWcnKSB7XG4gICAgICAgICAgdmlzaWJsZVVuaXRzID0gdW5pdHMuZmlsdGVyKHVuaXQgPT4gXG4gICAgICAgICAgICB1bml0Lm1ldGFkYXRhLnRhZ3MuaW5jbHVkZXModGhpcy5zZWxlY3RlZEZpbGUhKVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdkYXRlJykge1xuICAgICAgICAgIHZpc2libGVVbml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+IFxuICAgICAgICAgICAgdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKHVuaXQubWV0YWRhdGEuY3JlYXRlZEF0KSkgPT09IHRoaXMuc2VsZWN0ZWRGaWxlXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2aXNpYmxlVW5pdHMgPSB1bml0cztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gdmlzaWJsZVVuaXRzLmxlbmd0aCA+IDAgJiYgdGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZSA9PT0gdmlzaWJsZVVuaXRzLmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU1MjA3XHU2MzYyXHU1MTY4XHU5MDA5L1x1NTNENlx1NkQ4OFxuICAgKi9cbiAgcHJpdmF0ZSB0b2dnbGVTZWxlY3RBbGwoKSB7XG4gICAgaWYgKHRoaXMudmlld1R5cGUgPT09ICdjYXJkcycpIHtcbiAgICAgIGNvbnN0IGZsYXNoY2FyZHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldEFsbEZsYXNoY2FyZHMoKTtcbiAgICAgIFxuICAgICAgY29uc3QgZmlsdGVyZWRDYXJkcyA9IHRoaXMuc2VsZWN0ZWRGaWxlID8gZmxhc2hjYXJkcy5maWx0ZXIoY2FyZCA9PiB7XG4gICAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgICAgcmV0dXJuIGNhcmQuc291cmNlRmlsZSA9PT0gdGhpcy5zZWxlY3RlZEZpbGU7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICd0YWcnKSB7XG4gICAgICAgICAgY29uc3QgdW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNhcmQuc291cmNlQ29udGVudElkKTtcbiAgICAgICAgICByZXR1cm4gdW5pdD8ubWV0YWRhdGEudGFncy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSEpIHx8IFxuICAgICAgICAgICAgICAgICBjYXJkLnRhZ3M/LmluY2x1ZGVzKHRoaXMuc2VsZWN0ZWRGaWxlISkgfHwgXG4gICAgICAgICAgICAgICAgIGNhcmQuZGVjayA9PT0gdGhpcy5zZWxlY3RlZEZpbGU7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdkYXRlJykge1xuICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUoY2FyZC5tZXRhZGF0YS5jcmVhdGVkQXQpKSA9PT0gdGhpcy5zZWxlY3RlZEZpbGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSkgOiBmbGFzaGNhcmRzO1xuICAgICAgXG4gICAgICBpZiAodGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZSA9PT0gZmlsdGVyZWRDYXJkcy5sZW5ndGggJiYgZmlsdGVyZWRDYXJkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmNsZWFyKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaWx0ZXJlZENhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuYWRkKGNhcmQuaWQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHZpc2libGVVbml0czogQ29udGVudFVuaXRbXTtcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuZGlzcGxheU1vZGUgPT09ICdzaWRlYmFyJykge1xuICAgICAgICBsZXQgdW5pdHMgPSB0aGlzLmdldEZpbHRlcmVkVW5pdHMoKTsgLy8gXHU1REYyXHU1MzA1XHU1NDJCIGZpbHRlck1vZGUgXHU4RkM3XHU2RUU0XHVGRjA4XHU1OTgyIGFubm90YXRlZFx1RkYwOVxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRGaWxlKSB7XG4gICAgICAgICAgLy8gXHVEODNEXHVERDI3IFx1NjgzOVx1NjM2RVx1NUY1M1x1NTI0RFx1NTIwNlx1N0VDNFx1NkEyMVx1NUYwRlx1OEZDN1x1NkVFNFxuICAgICAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgICAgICB2aXNpYmxlVW5pdHMgPSB1bml0cy5maWx0ZXIodW5pdCA9PiB1bml0LnNvdXJjZS5maWxlID09PSB0aGlzLnNlbGVjdGVkRmlsZSk7XG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ3RhZycpIHtcbiAgICAgICAgICAgIC8vIFx1RDgzRFx1REQyNyBcdTYzMDlcdTY4MDdcdTdCN0VcdTdCNUJcdTkwMDlcdUZGMUFcdTUzRUFcdTkwMDlcdTYyRTlcdTUzMDVcdTU0MkJcdThCRTVcdTY4MDdcdTdCN0VcdTc2ODRcdTdCMTRcdThCQjBcbiAgICAgICAgICAgIHZpc2libGVVbml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+IFxuICAgICAgICAgICAgICB1bml0Lm1ldGFkYXRhLnRhZ3MuaW5jbHVkZXModGhpcy5zZWxlY3RlZEZpbGUhKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZGF0ZScpIHtcbiAgICAgICAgICAgIHZpc2libGVVbml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+IFxuICAgICAgICAgICAgICB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUodW5pdC5tZXRhZGF0YS5jcmVhdGVkQXQpKSA9PT0gdGhpcy5zZWxlY3RlZEZpbGVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZpc2libGVVbml0cyA9IHVuaXRzO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBcdUQ4M0RcdUREMjcgXHU2Q0ExXHU2NzA5XHU5MDA5XHU0RTJEXHU1MjA2XHU3RUM0XHVGRjFBXHU2NjNFXHU3OTNBXHU2MjQwXHU2NzA5XHU4RkM3XHU2RUU0XHU1NDBFXHU3Njg0XHU3QjE0XHU4QkIwXG4gICAgICAgICAgdmlzaWJsZVVuaXRzID0gdW5pdHM7XG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gXHU0RTNCXHU3NTRDXHU5NzYyXHVGRjFBXHU1RkM1XHU5ODdCXHU5MDA5XHU0RTJEXHU1REU2XHU0RkE3XHU1MjA2XHU3RUM0XG4gICAgICAgIGlmICghdGhpcy5zZWxlY3RlZEZpbGUpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU0RTAwXHU0RTJBXHU1MjA2XHU3RUM0Jyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCB1bml0cyA9IHRoaXMuZ2V0RmlsdGVyZWRVbml0cygpO1xuICAgICAgICBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdmaWxlJykge1xuICAgICAgICAgIHZpc2libGVVbml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+IHVuaXQuc291cmNlLmZpbGUgPT09IHRoaXMuc2VsZWN0ZWRGaWxlKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ3RhZycpIHtcbiAgICAgICAgICB2aXNpYmxlVW5pdHMgPSB1bml0cy5maWx0ZXIodW5pdCA9PiBcbiAgICAgICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSEpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgdmlzaWJsZVVuaXRzID0gdW5pdHMuZmlsdGVyKHVuaXQgPT4gXG4gICAgICAgICAgICB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUodW5pdC5tZXRhZGF0YS5jcmVhdGVkQXQpKSA9PT0gdGhpcy5zZWxlY3RlZEZpbGVcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZpc2libGVVbml0cyA9IHVuaXRzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplID09PSB2aXNpYmxlVW5pdHMubGVuZ3RoICYmIHZpc2libGVVbml0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIFx1NTNENlx1NkQ4OFx1NTE2OFx1OTAwOVxuICAgICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5jbGVhcigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gXHU1MTY4XHU5MDA5XHU1RjUzXHU1MjREXHU1M0VGXHU4OUMxXHU3Njg0XHU2MjQwXHU2NzA5XHU3QjE0XHU4QkIwXG4gICAgICAgIHZpc2libGVVbml0cy5mb3JFYWNoKHVuaXQgPT4ge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmFkZCh1bml0LmlkKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplID4gMCB8fCB0aGlzLnNlbGVjdGVkQ2FyZElkcy5zaXplID4gMCkge1xuICAgICAgdGhpcy5iYXRjaE1vZGUgPSB0cnVlO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG4gIC8qKlxuICogXHU4MUVBXHU1MkE4XHU1MTY4XHU5MDA5XHU1RjUzXHU1MjREXHU1M0VGXHU4OUMxXHU5ODc5XHU3NkVFXG4gKi9cbnByaXZhdGUgYXV0b1NlbGVjdEFsbCgpIHtcbiAgLy8gXHU1MTQ4XHU2RTA1XHU3QTdBXG4gIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gIHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmNsZWFyKCk7XG4gIFxuICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgIC8vIFx1OTVFQVx1NTM2MVx1ODlDNlx1NTZGRVx1RkYxQVx1NTE2OFx1OTAwOVx1NjI0MFx1NjcwOVx1OTVFQVx1NTM2MVxuICAgIGNvbnN0IGZsYXNoY2FyZHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldEFsbEZsYXNoY2FyZHMoKTtcbiAgICBcbiAgICBjb25zdCBmaWx0ZXJlZENhcmRzID0gdGhpcy5zZWxlY3RlZEZpbGUgPyBmbGFzaGNhcmRzLmZpbHRlcihjYXJkID0+IHtcbiAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgIHJldHVybiBjYXJkLnNvdXJjZUZpbGUgPT09IHRoaXMuc2VsZWN0ZWRGaWxlO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ3RhZycpIHtcbiAgICAgICAgY29uc3QgdW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNhcmQuc291cmNlQ29udGVudElkKTtcbiAgICAgICAgcmV0dXJuIHVuaXQ/Lm1ldGFkYXRhLnRhZ3MuaW5jbHVkZXModGhpcy5zZWxlY3RlZEZpbGUhKSB8fCBcbiAgICAgICAgICAgICAgIGNhcmQudGFncz8uaW5jbHVkZXModGhpcy5zZWxlY3RlZEZpbGUhKSB8fCBcbiAgICAgICAgICAgICAgIGNhcmQuZGVjayA9PT0gdGhpcy5zZWxlY3RlZEZpbGU7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZGF0ZScpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0RGF0ZShuZXcgRGF0ZShjYXJkLm1ldGFkYXRhLmNyZWF0ZWRBdCkpID09PSB0aGlzLnNlbGVjdGVkRmlsZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KSA6IGZsYXNoY2FyZHM7XG4gICAgXG4gICAgZmlsdGVyZWRDYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xuICAgICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuYWRkKGNhcmQuaWQpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIC8vIFx1N0IxNFx1OEJCMFx1ODlDNlx1NTZGRVx1RkYxQVx1NTE2OFx1OTAwOVx1NUY1M1x1NTI0RFx1NTNFRlx1ODlDMVx1NzY4NFx1N0IxNFx1OEJCMFxuICAgIGxldCB2aXNpYmxlVW5pdHM6IENvbnRlbnRVbml0W107XG4gICAgXG4gICAgaWYgKHRoaXMuZGlzcGxheU1vZGUgPT09ICdzaWRlYmFyJykge1xuICAgICAgbGV0IHVuaXRzID0gdGhpcy5nZXRGaWx0ZXJlZFVuaXRzKCk7XG4gICAgICBcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgICB2aXNpYmxlVW5pdHMgPSB1bml0cy5maWx0ZXIodW5pdCA9PiB1bml0LnNvdXJjZS5maWxlID09PSB0aGlzLnNlbGVjdGVkRmlsZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2aXNpYmxlVW5pdHMgPSB1bml0cztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU0RTNCXHU3NTRDXHU5NzYyXHU2QTIxXHU1RjBGXG4gICAgICBpZiAodGhpcy5zZWxlY3RlZEZpbGUpIHtcbiAgICAgICAgY29uc3QgdW5pdHMgPSB0aGlzLmdldEZpbHRlcmVkVW5pdHMoKTtcbiAgICAgICAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZmlsZScpIHtcbiAgICAgICAgICB2aXNpYmxlVW5pdHMgPSB1bml0cy5maWx0ZXIodW5pdCA9PiB1bml0LnNvdXJjZS5maWxlID09PSB0aGlzLnNlbGVjdGVkRmlsZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICd0YWcnKSB7XG4gICAgICAgICAgdmlzaWJsZVVuaXRzID0gdW5pdHMuZmlsdGVyKHVuaXQgPT4gXG4gICAgICAgICAgICB1bml0Lm1ldGFkYXRhLnRhZ3MuaW5jbHVkZXModGhpcy5zZWxlY3RlZEZpbGUhKVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdkYXRlJykge1xuICAgICAgICAgIHZpc2libGVVbml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+IFxuICAgICAgICAgICAgdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKHVuaXQubWV0YWRhdGEuY3JlYXRlZEF0KSkgPT09IHRoaXMuc2VsZWN0ZWRGaWxlXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2aXNpYmxlVW5pdHMgPSB1bml0cztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmlzaWJsZVVuaXRzID0gdGhpcy5nZXRGaWx0ZXJlZFVuaXRzKCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHZpc2libGVVbml0cy5mb3JFYWNoKHVuaXQgPT4ge1xuICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuYWRkKHVuaXQuaWQpO1xuICAgIH0pO1xuICB9XG4gIFxuICAvLyBcdTU5ODJcdTY3OUNcdTY3MDlcdTkwMDlcdTRFMkRcdTk4NzlcdUZGMENcdTVGMDBcdTU0MkZcdTYyNzlcdTkxQ0ZcdTZBMjFcdTVGMEZcbiAgaWYgKHRoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemUgPiAwIHx8IHRoaXMuc2VsZWN0ZWRDYXJkSWRzLnNpemUgPiAwKSB7XG4gICAgdGhpcy5iYXRjaE1vZGUgPSB0cnVlO1xuICB9XG59XG4vKipcbiAqIFx1NkUwNVx1OTY2NFx1NjI0MFx1NjcwOVx1OTAwOVx1NjJFOVxuICovXG5wcml2YXRlIGNsZWFyU2VsZWN0aW9uKCkge1xuICB0aGlzLnNlbGVjdGVkVW5pdElkcy5jbGVhcigpO1xuICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5jbGVhcigpO1xuICB0aGlzLmJhdGNoTW9kZSA9IGZhbHNlO1xuICB0aGlzLnJlbmRlcigpO1xufVxuICAvKipcbiAgICogXHU2NkY0XHU2NUIwXHU2MjQwXHU2NzA5Y2hlY2tib3hcdTcyQjZcdTYwMDFcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlQ2hlY2tib3hlcygpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdIGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbnN0IGNoZWNrYm94ZXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmJhdGNoLWNoZWNrYm94JykgYXMgTm9kZUxpc3RPZjxIVE1MSW5wdXRFbGVtZW50PjtcbiAgICBcbiAgICBjaGVja2JveGVzLmZvckVhY2goY2hlY2tib3ggPT4ge1xuICAgICAgaWYgKHRoaXMudmlld1R5cGUgPT09ICdjYXJkcycpIHtcbiAgICAgICAgY29uc3QgY2FyZElkID0gY2hlY2tib3guZ2V0QXR0cmlidXRlKCdkYXRhLWNhcmQtaWQnKTtcbiAgICAgICAgaWYgKGNhcmRJZCkge1xuICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0aGlzLnNlbGVjdGVkQ2FyZElkcy5oYXMoY2FyZElkKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdW5pdElkID0gY2hlY2tib3guZ2V0QXR0cmlidXRlKCdkYXRhLXVuaXQtaWQnKTtcbiAgICAgICAgaWYgKHVuaXRJZCkge1xuICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0aGlzLnNlbGVjdGVkVW5pdElkcy5oYXModW5pdElkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjI3OVx1OTFDRlx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBiYXRjaENyZWF0ZUZsYXNoY2FyZHMoKSB7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemUgPT09IDApIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTg5ODFcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcdTc2ODRcdTdCMTRcdThCQjAnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB1bml0cyA9IEFycmF5LmZyb20odGhpcy5zZWxlY3RlZFVuaXRJZHMpXG4gICAgICAubWFwKGlkID0+IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGlkKSlcbiAgICAgIC5maWx0ZXIodSA9PiB1ICE9PSB1bmRlZmluZWQgJiYgdS5mbGFzaGNhcmRJZHMubGVuZ3RoID09PSAwKSBhcyBDb250ZW50VW5pdFtdO1xuXG4gICAgaWYgKHVuaXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1OTAwOVx1NEUyRFx1NzY4NFx1N0IxNFx1OEJCMFx1OTBGRFx1NURGMlx1NTIxQlx1NUVGQVx1OEZDN1x1OTVFQVx1NTM2MScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFx1NjYzRVx1NzkzQVx1OTAwOVx1NjJFOVx1N0M3Qlx1NTc4Qlx1NzY4NFx1NkEyMVx1NjAwMVx1Njg0NlxuICAgIGNvbnN0IHsgQmF0Y2hDcmVhdGVNb2RhbCB9ID0gYXdhaXQgaW1wb3J0KCcuL092ZXJ2aWV3VmlldycpO1xuICAgIGNvbnN0IHF1aWNrQ3JlYXRvciA9IG5ldyBRdWlja0ZsYXNoY2FyZENyZWF0b3IodGhpcy5wbHVnaW4pO1xuICAgIGNvbnN0IG1vZGFsID0gbmV3IEJhdGNoQ3JlYXRlTW9kYWwoXG4gICAgICB0aGlzLmFwcCxcbiAgICAgIHRoaXMucGx1Z2luLFxuICAgICAgcXVpY2tDcmVhdG9yLFxuICAgICAgdW5pdHMsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgfVxuICAgICk7XG4gICAgbW9kYWwub3BlbigpO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0gXHU1REU1XHU1MTc3XHU2NUI5XHU2Q0Q1ID09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1OEZDN1x1NkVFNFx1NTQwRVx1NzY4NFx1NTE4NVx1NUJCOVx1NTM1NVx1NTE0M1xuICAgKi9cbiAgcHJpdmF0ZSBnZXRGaWx0ZXJlZFVuaXRzKCk6IENvbnRlbnRVbml0W10ge1xuICAgIGxldCB1bml0cyA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldEFsbENvbnRlbnRVbml0cygpO1xuXG4gICAgLy8gXHU2NDFDXHU3RDIyXHU4RkM3XHU2RUU0XG4gICAgaWYgKHRoaXMuc2VhcmNoUXVlcnkpIHtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5zZWFyY2hRdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgICAgdW5pdHMgPSB1bml0cy5maWx0ZXIodW5pdCA9PlxuICAgICAgICB1bml0LmNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkgfHxcbiAgICAgICAgdW5pdC5zb3VyY2UuZmlsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSB8fFxuICAgICAgICB1bml0Lm1ldGFkYXRhLnRhZ3Muc29tZSh0YWcgPT4gdGFnLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBcdTdDN0JcdTU3OEJcdThGQzdcdTZFRTRcbiAgICBpZiAodGhpcy5maWx0ZXJNb2RlID09PSAnYW5ub3RhdGVkJykge1xuICAgICAgdW5pdHMgPSB1bml0cy5maWx0ZXIodSA9PiB1LmFubm90YXRpb25JZCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmZpbHRlck1vZGUgPT09ICdmbGFzaGNhcmRzJykge1xuICAgICAgdW5pdHMgPSB1bml0cy5maWx0ZXIodSA9PiB1LmZsYXNoY2FyZElkcy5sZW5ndGggPiAwKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdW5pdHM7XG4gIH1cblxuICAvKipcbiAgICogXHU1MjA2XHU3RUM0XHU1MTg1XHU1QkI5XHU1MzU1XHU1MTQzXG4gICAqL1xuICBwcml2YXRlIGdyb3VwVW5pdHModW5pdHM6IENvbnRlbnRVbml0W10pOiBBcnJheTx7IGdyb3VwS2V5OiBzdHJpbmc7IHVuaXRzOiBDb250ZW50VW5pdFtdIH0+IHtcbiAgICBjb25zdCBncm91cGVkID0gbmV3IE1hcDxzdHJpbmcsIENvbnRlbnRVbml0W10+KCk7XG5cbiAgICB1bml0cy5mb3JFYWNoKHVuaXQgPT4ge1xuICAgICAgbGV0IGtleTogc3RyaW5nO1xuXG4gICAgICBzd2l0Y2ggKHRoaXMuZ3JvdXBNb2RlKSB7XG4gICAgICAgIGNhc2UgJ2ZpbGUnOlxuICAgICAgICAgIGtleSA9IHVuaXQuc291cmNlLmZpbGU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3RhZyc6XG4gICAgICAgICAgdW5pdC5tZXRhZGF0YS50YWdzLmZvckVhY2godGFnID0+IHtcbiAgICAgICAgICAgIGlmICghZ3JvdXBlZC5oYXModGFnKSkgZ3JvdXBlZC5zZXQodGFnLCBbXSk7XG4gICAgICAgICAgICBncm91cGVkLmdldCh0YWcpIS5wdXNoKHVuaXQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAga2V5ID0gdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKHVuaXQubWV0YWRhdGEuY3JlYXRlZEF0KSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAga2V5ID0gJ1x1NjcyQVx1NTIwNlx1N0VDNCc7XG4gICAgICB9XG5cbiAgICAgIGlmICghZ3JvdXBlZC5oYXMoa2V5KSkgZ3JvdXBlZC5zZXQoa2V5LCBbXSk7XG4gICAgICBncm91cGVkLmdldChrZXkpIS5wdXNoKHVuaXQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIEFycmF5LmZyb20oZ3JvdXBlZC5lbnRyaWVzKCkpXG4gICAgLm1hcCgoW2dyb3VwS2V5LCB1bml0c10pID0+ICh7IGdyb3VwS2V5LCB1bml0cyB9KSlcbiAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2NjJGXHU2NUU1XHU2NzFGXHU1MjA2XHU3RUM0XHVGRjBDXHU2MzA5XHU2NUU1XHU2NzFGXHU5NjREXHU1RThGXHU2MzkyXHU1MjE3XG4gICAgICBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdkYXRlJykge1xuICAgICAgICByZXR1cm4gYi5ncm91cEtleS5sb2NhbGVDb21wYXJlKGEuZ3JvdXBLZXkpOyAvLyBcdTY1RTVcdTY3MUZcdTVCNTdcdTdCMjZcdTRFMzJcdTk2NERcdTVFOEZcbiAgICAgIH1cbiAgICAgIC8vIFx1NTE3Nlx1NEVENlx1NTIwNlx1N0VDNFx1NjMwOVx1NjU3MFx1OTFDRlx1OTY0RFx1NUU4RlxuICAgICAgcmV0dXJuIGIudW5pdHMubGVuZ3RoIC0gYS51bml0cy5sZW5ndGg7XG4gICAgfSk7XG4gIH1cbi8qKlxuICogXHU1MjA2XHU3RUM0XHU5NUVBXHU1MzYxXHVGRjA4XHU3QzdCXHU0RjNDIGdyb3VwVW5pdHNcdUZGMDlcbiAqL1xucHJpdmF0ZSBncm91cEZsYXNoY2FyZHMoZmxhc2hjYXJkczogRmxhc2hjYXJkW10pOiBBcnJheTx7IGdyb3VwS2V5OiBzdHJpbmc7IGNhcmRzOiBGbGFzaGNhcmRbXSB9PiB7XG4gIGNvbnN0IGdyb3VwZWQgPSBuZXcgTWFwPHN0cmluZywgRmxhc2hjYXJkW10+KCk7XG5cbiAgZmxhc2hjYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xuICAgIGxldCBrZXlzOiBzdHJpbmdbXSA9IFtdOyAvLyBcdTY1MzlcdTRFM0FcdTY1NzBcdTdFQzRcdUZGMENcdTY1MkZcdTYzMDFcdTRFMDBcdTRFMkFcdTUzNjFcdTcyNDdcdTVDNUVcdTRFOEVcdTU5MUFcdTRFMkFcdTUyMDZcdTdFQzRcbiAgICBcbiAgICAvLyBcdTgzQjdcdTUzRDZcdTUxNzNcdTgwNTRcdTc2ODRcdTdCMTRcdThCQjBcdTUzNTVcdTUxNDNcbiAgICBjb25zdCB1bml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY2FyZC5zb3VyY2VDb250ZW50SWQpO1xuXG4gICAgc3dpdGNoICh0aGlzLmdyb3VwTW9kZSkge1xuICAgICAgY2FzZSAnZmlsZSc6XG4gICAgICAgIC8vIFx1NjMwOVx1NjU4N1x1NEVGNlx1NTIwNlx1N0VDNCAtIFx1NEY3Rlx1NzUyOFx1NTM2MVx1NzI0N1x1NzY4NCBzb3VyY2VGaWxlXG4gICAgICAgIGtleXMgPSBbY2FyZC5zb3VyY2VGaWxlXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgY2FzZSAndGFnJzpcbiAgICAgICAgLy8gXHU2MzA5XHU2ODA3XHU3QjdFXHU1MjA2XHU3RUM0XG4gICAgICAgIC8vIFx1NEYxOFx1NTE0OFx1NEY3Rlx1NzUyOFx1N0IxNFx1OEJCMFx1NTM1NVx1NTE0M1x1NzY4NFx1NjgwN1x1N0I3RVxuICAgICAgICBpZiAodW5pdCAmJiB1bml0Lm1ldGFkYXRhLnRhZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGtleXMgPSB1bml0Lm1ldGFkYXRhLnRhZ3M7XG4gICAgICAgIH0gXG4gICAgICAgIC8vIFx1NTE3Nlx1NkIyMVx1NEY3Rlx1NzUyOFx1NTM2MVx1NzI0N1x1ODFFQVx1NURGMVx1NzY4NFx1NjgwN1x1N0I3RVxuICAgICAgICBlbHNlIGlmIChjYXJkLnRhZ3MgJiYgY2FyZC50YWdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBrZXlzID0gY2FyZC50YWdzO1xuICAgICAgICB9IFxuICAgICAgICAvLyBcdTY3MDBcdTU0MEVcdTRGN0ZcdTc1MjggZGVjayBcdTRGNUNcdTRFM0FcdTY4MDdcdTdCN0VcbiAgICAgICAgZWxzZSBpZiAoY2FyZC5kZWNrKSB7XG4gICAgICAgICAga2V5cyA9IFtjYXJkLmRlY2tdO1xuICAgICAgICB9XG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1OTBGRFx1NkNBMVx1NjcwOVx1RkYwQ1x1NjUzRVx1NTE2NVwiXHU2NzJBXHU1MjA2XHU3QzdCXCJcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAga2V5cyA9IFsnXHU2NzJBXHU1MjA2XHU3QzdCJ107XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgIC8vIFx1NjMwOVx1NjVFNVx1NjcxRlx1NTIwNlx1N0VDNFxuICAgICAgICBrZXlzID0gW3RoaXMuZm9ybWF0RGF0ZShuZXcgRGF0ZShjYXJkLm1ldGFkYXRhLmNyZWF0ZWRBdCkpXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAga2V5cyA9IFsnXHU2NzJBXHU1MjA2XHU3RUM0J107XG4gICAgfVxuXG4gICAgLy8gXHU1QzA2XHU1MzYxXHU3MjQ3XHU2REZCXHU1MkEwXHU1MjMwXHU2MjQwXHU2NzA5XHU1MzM5XHU5MTREXHU3Njg0XHU1MjA2XHU3RUM0XHU0RTJEXG4gICAga2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBpZiAoIWdyb3VwZWQuaGFzKGtleSkpIHtcbiAgICAgICAgZ3JvdXBlZC5zZXQoa2V5LCBbXSk7XG4gICAgICB9XG4gICAgICBncm91cGVkLmdldChrZXkpIS5wdXNoKGNhcmQpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBcdThGNkNcdTYzNjJcdTRFM0FcdTY1NzBcdTdFQzRcdTVFNzZcdTYzOTJcdTVFOEZcbiAgY29uc3QgcmVzdWx0ID0gQXJyYXkuZnJvbShncm91cGVkLmVudHJpZXMoKSlcbiAgLm1hcCgoW2dyb3VwS2V5LCBjYXJkc10pID0+ICh7IGdyb3VwS2V5LCBjYXJkcyB9KSlcbiAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTY1RTVcdTY3MUZcdTUyMDZcdTdFQzRcdUZGMENcdTYzMDlcdTY1RTVcdTY3MUZcdTk2NERcdTVFOEZcdTYzOTJcdTUyMTdcbiAgICBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdkYXRlJykge1xuICAgICAgcmV0dXJuIGIuZ3JvdXBLZXkubG9jYWxlQ29tcGFyZShhLmdyb3VwS2V5KTsgLy8gXHU2NUU1XHU2NzFGXHU1QjU3XHU3QjI2XHU0RTMyXHU5NjREXHU1RThGXG4gICAgfVxuICAgIC8vIFx1NTE3Nlx1NEVENlx1NTIwNlx1N0VDNFx1NjMwOVx1NjU3MFx1OTFDRlx1OTY0RFx1NUU4RlxuICAgIHJldHVybiBiLmNhcmRzLmxlbmd0aCAtIGEuY2FyZHMubGVuZ3RoO1xuICB9KTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU3RURGXHU4QkExXHU0RkUxXHU2MDZGXG4gICAqL1xuICBwcml2YXRlIGdldEZpbHRlcmVkU3RhdHMoKSB7XG4gICAgY29uc3QgdW5pdHMgPSB0aGlzLmdldEZpbHRlcmVkVW5pdHMoKTtcbiAgICByZXR1cm4ge1xuICAgICAgY291bnQ6IHVuaXRzLmxlbmd0aCxcbiAgICAgIHdpdGhBbm5vdGF0aW9uczogdW5pdHMuZmlsdGVyKHUgPT4gdS5hbm5vdGF0aW9uSWQpLmxlbmd0aCxcbiAgICAgIHdpdGhGbGFzaGNhcmRzOiB1bml0cy5maWx0ZXIodSA9PiB1LmZsYXNoY2FyZElkcy5sZW5ndGggPiAwKS5sZW5ndGhcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjgzQ1x1NUYwRlx1NTMxNlx1NjVFNVx1NjcxRlxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXREYXRlKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnemgtQ04nLCB7XG4gICAgICB5ZWFyOiAnbnVtZXJpYycsXG4gICAgICBtb250aDogJzItZGlnaXQnLFxuICAgICAgZGF5OiAnMi1kaWdpdCdcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTUyMDZcdTdFQzRcdTU2RkVcdTY4MDdcbiAgICovXG4gIHByaXZhdGUgZ2V0R3JvdXBJY29uKG1vZGU6IEdyb3VwTW9kZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICBjYXNlICdmaWxlJzogcmV0dXJuICdcdUQ4M0RcdURDQzQnO1xuICAgICAgY2FzZSAndGFnJzogcmV0dXJuICdcdUQ4M0NcdURGRjdcdUZFMEYnO1xuICAgICAgY2FzZSAnZGF0ZSc6IHJldHVybiAnXHVEODNEXHVEQ0M1JztcbiAgICAgIGRlZmF1bHQ6IHJldHVybiAnXHVEODNEXHVEQ0MxJztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU2REZCXHU1MkEwXHU2ODM3XHU1RjBGXG4gICAqL1xuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlYXJuaW5nLW92ZXJ2aWV3LXN0eWxlcycpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWwuaWQgPSAnbGVhcm5pbmctb3ZlcnZpZXctc3R5bGVzJztcbiAgICBcbiAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTVERjJcdTdFQ0ZcdTZERkJcdTUyQTBcbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlYXJuaW5nLW92ZXJ2aWV3LXN0eWxlcycpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgIC8qID09PT09PT09PT09PT09PT09PT09IFx1NTE2OFx1NUM0MFx1NUJCOVx1NTY2OCA9PT09PT09PT09PT09PT09PT09PSAqL1xuICAgICAgLmxlYXJuaW5nLW92ZXJ2aWV3LWNvbnRhaW5lciB7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgIH1cblxuICAgICAgLyogPT09PT09PT09PT09PT09PT09PT0gXHU0RkE3XHU4RkI5XHU2ODBGXHU2QTIxXHU1RjBGXHU2ODM3XHU1RjBGID09PT09PT09PT09PT09PT09PT09ICovXG4gICAgICAubGVhcm5pbmctb3ZlcnZpZXctY29udGFpbmVyW2RhdGEtbW9kZT1cInNpZGViYXJcIl0ge1xuICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgfVxuXG4gICAgICAuc2lkZWJhci10b29sYmFyIHtcbiAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOyAvKiBcdUQ4M0RcdUREMjcgXHU2REZCXHU1MkEwICovXG4gIHotaW5kZXg6IDEwO1xuICAgICAgfVxuXG4gICAgICAuc2VhcmNoLWNvbnRhaW5lciB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zZWFyY2gtaW5wdXQge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICB9XG5cbiAgICAgIC5zZWFyY2gtaW5wdXQ6Zm9jdXMge1xuICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICB9XG5cbiAgICAgIC5maWx0ZXItY2hpcHMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDZweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgIH1cblxuICAgICAgLmZpbHRlci1jaGlwIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBwYWRkaW5nOiA2cHggOHB4O1xuICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICB9XG5cbiAgICAgIC5maWx0ZXItY2hpcDpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAuZmlsdGVyLWNoaXAuYWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtc3dpdGNoZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDZweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWJ0biB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgcGFkZGluZzogNnB4O1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtYnRuLmFjdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTtcbiAgICAgIH1cbi8qIFx1NTcyOCAuc3RhdHMtYmFkZ2UgXHU2ODM3XHU1RjBGXHU0RTRCXHU1MjREXHU2REZCXHU1MkEwICovXG4uc3RhdHMtcm93IHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBnYXA6IDNweDtcbn1cbi8qIFx1NTkzNFx1OTBFOFx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVx1NUJCOVx1NTY2OCAqL1xuLmhlYWRlci1hY3Rpb25zIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZ2FwOiA4cHg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5cbi8qIFx1NjI3OVx1OTFDRlx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVx1NjgzN1x1NUYwRiAtIFx1NEZBN1x1OEZCOVx1NjgwRiAqL1xuLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG4tc2lkZWJhcixcbi5iYXRjaC1kZWxldGUtYnRuLXNpZGViYXIge1xuICBwYWRkaW5nOiA2cHggNnB4O1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICBmb250LXNpemU6IDExcHg7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG59XG5cbi5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuLXNpZGViYXI6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICBjb2xvcjogd2hpdGU7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbn1cblxuLmJhdGNoLWRlbGV0ZS1idG4tc2lkZWJhcjpob3ZlciB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXJlZCk7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xufVxuXG4vKiBcdTYyNzlcdTkxQ0ZcdTY0Q0RcdTRGNUNcdTYzMDlcdTk0QUVcdTY4MzdcdTVGMEYgLSBcdTRFM0JcdTc1NENcdTk3NjIgKi9cbi5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuLWhlYWRlcixcbi5iYXRjaC1kZWxldGUtYnRuLWhlYWRlciB7XG4gIHBhZGRpbmc6IDhweCAxNnB4O1xuICBmb250LXNpemU6IDEzcHg7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG59XG5cbi5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuLWhlYWRlcjpob3ZlciB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xufVxuXG4uYmF0Y2gtZGVsZXRlLWJ0bi1oZWFkZXI6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1yZWQpO1xuICBjb2xvcjogd2hpdGU7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbn1cbi5zZWxlY3QtYWxsLWJ0bi1zaWRlYmFyIHtcbiAgcGFkZGluZzogNnB4IDEycHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gIGZvbnQtc2l6ZTogMTFweDtcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgZmxleC1zaHJpbms6IDA7IC8qIFx1OTYzMlx1NkI2Mlx1NjMwOVx1OTRBRVx1ODhBQlx1NTM4Qlx1N0YyOSAqL1xufVxuXG4uc2VsZWN0LWFsbC1idG4tc2lkZWJhcjpob3ZlciB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG4uc3RhdHMtYmFkZ2Uge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGZvbnQtc2l6ZTogMTFweDtcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICBwYWRkaW5nOiA0cHg7XG4gIGZsZXg6IDE7IC8qIFx1NTM2MFx1NjM2RVx1NTI2OVx1NEY1OVx1N0E3QVx1OTVGNCAqL1xufVxuICAgICAgLnN0YXRzLWJhZGdlIHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgcGFkZGluZzogNHB4O1xuICAgICAgfVxuLnNlbGVjdC1hbGwtYnRuLWhlYWRlciB7XG4gIHBhZGRpbmc6IDhweCAxNnB4O1xuICBmb250LXNpemU6IDEzcHg7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIGJveC1zaGFkb3c6IDAgMXB4IDNweCByZ2JhKDAsIDAsIDAsIDAuMDgpO1xufVxuXG4uc2VsZWN0LWFsbC1idG4taGVhZGVyOmhvdmVyIHtcbiAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTFweCk7XG4gIGJveC1zaGFkb3c6IDAgMnB4IDZweCByZ2JhKDAsIDAsIDAsIDAuMTUpO1xufVxuXG4vKiBcdTVCOENcdTYyMTBcdTcyQjZcdTYwMDFcdTc2ODRcdTlBRDhcdTRFQUVcdTY4MzdcdTVGMEYgKi9cbi5zZWxlY3QtYWxsLWJ0bi1oZWFkZXIuY29tcGxldGVkIHtcbiAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xufVxuXG4uc2VsZWN0LWFsbC1idG4taGVhZGVyLmNvbXBsZXRlZDpob3ZlciB7XG4gIG9wYWNpdHk6IDAuOTtcbn1cblxuLnNlbGVjdC1hbGwtYnRuLXNpZGViYXIge1xuICBwYWRkaW5nOiA2cHggMTJweDtcblxuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gIGZvbnQtc2l6ZTogMTFweDtcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvOyAvKiBcdTk3NjBcdTVERTZcdTVCRjlcdTlGNTAgKi9cbn1cblxuLnNlbGVjdC1hbGwtYnRuLXNpZGViYXI6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gIGNvbG9yOiB3aGl0ZTtcbn1cbiAgLyogXHU1M0Q2XHU2RDg4XHU5MDA5XHU2MkU5XHU2MzA5XHU5NEFFIC0gXHU0RkE3XHU4RkI5XHU2ODBGICovXG4uY2FuY2VsLXNlbGVjdGlvbi1idG4tc2lkZWJhciB7XG4gIHBhZGRpbmc6IDZweCAxMnB4O1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICBmb250LXNpemU6IDExcHg7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbn1cblxuLmNhbmNlbC1zZWxlY3Rpb24tYnRuLXNpZGViYXI6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbn1cblxuLyogXHU1M0Q2XHU2RDg4XHU5MDA5XHU2MkU5XHU2MzA5XHU5NEFFIC0gXHU0RTNCXHU3NTRDXHU5NzYyICovXG4uY2FuY2VsLXNlbGVjdGlvbi1idG4taGVhZGVyIHtcbiAgcGFkZGluZzogOHB4IDE2cHg7XG4gIGZvbnQtc2l6ZTogMTNweDtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xufVxuXG4uY2FuY2VsLXNlbGVjdGlvbi1idG4taGVhZGVyOmhvdmVyIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG59XG5cbi8qIFx1NUI4Q1x1NjIxMFx1NzJCNlx1NjAwMVx1NzY4NFx1NTE2OFx1OTAwOVx1NjMwOVx1OTRBRVx1OUFEOFx1NEVBRSAqL1xuLnNlbGVjdC1hbGwtYnRuLXNpZGViYXIuY29tcGxldGVkLFxuLnNlbGVjdC1hbGwtYnRuLWhlYWRlci5jb21wbGV0ZWQge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG59XG4gICAgICAuYmF0Y2gtYWN0aW9ucyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogNnB4O1xuICAgICAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1tb2RlLWJ0bixcbiAgICAgIC5zZWxlY3QtYWxsLWJ0bixcbiAgICAgIC5iYXRjaC1kZWxldGUtYnRuLFxuICAgICAgLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG4ge1xuICAgICAgICBwYWRkaW5nOiA2cHggMTJweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuc2VsZWN0LWFsbC1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLW1vZGUtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1kZWxldGUtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1jaGVja2JveCB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5zaWRlYmFyLWNvbnRlbnQtbGlzdCB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7IC8qIFx1RDgzRFx1REQyNyBcdTZERkJcdTUyQTAgKi9cbiAgei1pbmRleDogMTsgLyogXHVEODNEXHVERDI3IFx1NkRGQlx1NTJBMCAqL1xuICAgICAgfVxuXG4gICAgICAuY29udGVudC1ncm91cCB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC1oZWFkZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDZweDtcbiAgICAgICAgcGFkZGluZzogNnB4IDhweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICBwb3NpdGlvbjogc3RpY2t5O1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIHotaW5kZXg6IDEwO1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtaWNvbiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLXRpdGxlIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC1jb3VudCB7XG4gICAgICAgIHBhZGRpbmc6IDJweCA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAuY29tcGFjdC1jYXJkIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIG1hcmdpbjogNHB4IDA7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLmNvbXBhY3QtY2FyZDpob3ZlciB7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgycHgpO1xuICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLDAsMCwwLjEpO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1pbmRpY2F0b3Ige1xuICAgICAgICB3aWR0aDogNHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkLWluZGljYXRvci5oYXMtYW5ub3RhdGlvbiB7XG4gICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICMzYjgyZjYgMCUsICMzYjgyZjYgNTAlLCB0cmFuc3BhcmVudCA1MCUpO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1pbmRpY2F0b3IuaGFzLWZsYXNoY2FyZCB7XG4gICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sIHRyYW5zcGFyZW50IDAlLCB0cmFuc3BhcmVudCA1MCUsICMxMGI5ODEgNTAlKTtcbiAgICAgIH1cblxuICAgICAgLmNhcmQtaW5kaWNhdG9yLmhhcy1hbm5vdGF0aW9uLmhhcy1mbGFzaGNhcmQge1xuICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjM2I4MmY2IDAlLCAjM2I4MmY2IDUwJSwgIzEwYjk4MSA1MCUpO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1jb250ZW50IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgbWluLXdpZHRoOiAwO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1oZWFkZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tYnRuIHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIHBhZGRpbmc6IDRweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xKTtcbiAgICAgIH1cblxuICAgICAgLmNhcmQtdG9vbHMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDRweDtcbiAgICAgIH1cblxuICAgICAgLnRvb2wtYnRuIHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIHBhZGRpbmc6IDRweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLnRvb2wtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTEsIDE5MSwgMzYsIDAuMik7XG4gICAgICB9XG5cbiAgICAgIC5tb3JlLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAubm90ZS10ZXh0IHtcbiAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cblxuICAgICAgLm5vdGUtdGV4dDpob3ZlciB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1wcmV2aWV3IHtcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICBsaW5lLWhlaWdodDogMS40O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIHBhZGRpbmc6IDZweCA4cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBtYXJnaW4tdG9wOiA2cHg7XG4gICAgICAgIGJvcmRlci1sZWZ0OiAzcHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLmFubm90YXRpb24tcHJldmlldzpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1tZXRhIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICBnYXA6IDZweDtcbiAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgfVxuICAgICAgXG4gICAgICAvKiA9PT09PT09PT09PT09PT09PT09PSBcdTUxODVcdTgwNTRcdTYyNzlcdTZDRThcdTdGMTZcdThGOTFcdTU2NjggPT09PT09PT09PT09PT09PT09PT0gKi9cbiAgICAgIC5pbmxpbmUtYW5ub3RhdGlvbi1lZGl0b3Ige1xuICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICBhbmltYXRpb246IHNsaWRlRG93biAwLjE1cyBlYXNlLW91dDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgQGtleWZyYW1lcyBzbGlkZURvd24ge1xuICAgICAgICBmcm9tIHtcbiAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNXB4KTtcbiAgICAgICAgfVxuICAgICAgICB0byB7XG4gICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLmlubGluZS1hbm5vdGF0aW9uLXRleHRhcmVhIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDgwcHg7XG4gICAgICAgIHBhZGRpbmc6IDEycHggMTRweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBmb250LWZhbWlseTogdmFyKC0tZm9udC10ZXh0KTtcbiAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgICByZXNpemU6IHZlcnRpY2FsO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLmlubGluZS1hbm5vdGF0aW9uLXRleHRhcmVhOmZvY3VzIHtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjE1KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLmlubGluZS1hbm5vdGF0aW9uLXRleHRhcmVhOjpwbGFjZWhvbGRlciB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWZhaW50KTtcbiAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgICAgfVxuICAgICAgXG4gICAgICAuaW5saW5lLWFubm90YXRpb24taGludCB7XG4gICAgICAgIG1hcmdpbi10b3A6IDZweDtcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1mYWludCk7XG4gICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLyogXHU3RjUxXHU2ODNDXHU1MzYxXHU3MjQ3XHU3Njg0XHU1MTg1XHU4MDU0XHU3RjE2XHU4RjkxXHU1NjY4XHU2ODM3XHU1RjBGICovXG4gICAgICAuZ3JpZC1jYXJkIC5pbmxpbmUtYW5ub3RhdGlvbi1lZGl0b3Ige1xuICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC5ncmlkLWNhcmQgLmlubGluZS1hbm5vdGF0aW9uLXRleHRhcmVhIHtcbiAgICAgICAgbWluLWhlaWdodDogMTAwcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgcGFkZGluZzogOHB4IDE0cHg7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC5ncmlkLWNhcmQgLmlubGluZS1hbm5vdGF0aW9uLWhpbnQge1xuICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgIH1cblxuICAgICAgLnRhZyB7XG4gICAgICAgIHBhZGRpbmc6IDJweCA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXRhZy1iYWNrZ3JvdW5kKTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRhZy1jb2xvcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAudGFnLW1vcmUge1xuICAgICAgICBwYWRkaW5nOiAycHggNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBmb250LXNpemU6IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5iYWRnZSB7XG4gICAgICAgIHBhZGRpbmc6IDJweCA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBmb250LXNpemU6IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC8qID09PT09PT09PT09PT09PT09PT09IFx1NEUzQlx1NzU0Q1x1OTc2Mlx1NkEyMVx1NUYwRlx1NjgzN1x1NUYwRiA9PT09PT09PT09PT09PT09PT09PSAqL1xuICAgICAgLm1haW4tbGF5b3V0IHtcbiAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAyNTBweCAxZnI7XG4gICAgICAgIGdhcDogMXB4O1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgIH1cblxuICAgICAgLmxlZnQtcGFuZWwge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgfVxuXG4gICAgICAucmlnaHQtcGFuZWwge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5maXhlZC1lbnRyaWVzIHtcbiAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC5lbnRyeS1idG4ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgcGFkZGluZzogMTBweCAxMnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgfVxuXG4gICAgICAuZW50cnktYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgycHgpO1xuICAgICAgfVxuXG4gICAgICAuZW50cnktYnRuLmFjdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICB9XG5cbiAgICAgIC5tYWluLXRvb2xiYXIge1xuICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtYWN0aW9ucy1tYWluIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLWFjdGlvbnMtbWFpbiAuYmF0Y2gtbW9kZS1idG4sXG4gICAgICAuYmF0Y2gtYWN0aW9ucy1tYWluIC5zZWxlY3QtYWxsLWJ0bixcbiAgICAgIC5iYXRjaC1hY3Rpb25zLW1haW4gLmJhdGNoLWRlbGV0ZS1idG4sXG4gICAgICAuYmF0Y2gtYWN0aW9ucy1tYWluIC5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuIHtcbiAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLWFjdGlvbnMtbWFpbiAuc2VsZWN0LWFsbC1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLnNlYXJjaC1pbnB1dC1tYWluIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAuc2VhcmNoLWlucHV0LW1haW46Zm9jdXMge1xuICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC1zd2l0Y2hlci1tYWluIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC1idG4tbWFpbiB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgcGFkZGluZzogOHB4IDEwcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC1idG4tbWFpbjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTFweCk7XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC1idG4tbWFpbi5hY3RpdmUge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAucGFuZWwtdGl0bGUge1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIG1hcmdpbjowO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5maWxlLWxpc3Qge1xuICAgICAgICBwYWRkaW5nOiAwIDhweCA4cHggOHB4O1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1pdGVtIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxMHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgIH1cblxuICAgICAgLmZpbGUtaXRlbTpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1pdGVtLnNlbGVjdGVkIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLmZpbGUtaWNvbiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIH1cblxuICAgICAgLmZpbGUtbmFtZSB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICB9XG5cbiAgICAgIC5maWxlLWNvdW50IHtcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICBwYWRkaW5nOiAycHggNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5maWxlLWl0ZW0uc2VsZWN0ZWQgLmZpbGUtY291bnQge1xuICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMik7XG4gICAgICB9XG5cbiAgICAgIC5lbXB0eS1yaWdodC1wYW5lbCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLmVtcHR5LWljb24ge1xuICAgICAgICBmb250LXNpemU6IDQ4cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gICAgICB9XG5cbiAgICAgIC5lbXB0eS10ZXh0IHtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgfVxuXG4gICAgICAuZ3JpZC1oZWFkZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgIHBhZGRpbmctYm90dG9tOiAxMnB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgfVxuXG4gICAgICAuZ3JpZC1oZWFkZXIgaDIge1xuICAgICAgICBmb250LXNpemU6IDE4cHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgIH1cblxuICAgICAgLm9wZW4tZmlsZS1idG4ge1xuICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLm9wZW4tZmlsZS1idG46aG92ZXIge1xuICAgICAgICBvcGFjaXR5OiAwLjk7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTtcbiAgICAgIH1cblxuICAgICAgLmNvbnRlbnQtZ3JpZCB7XG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDI0MHB4LCAxZnIpKTtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5ncmlkLWNhcmQge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpO1xuICAgICAgICBib3gtc2hhZG93OiAwIDFweCAzcHggcmdiYSgwLDAsMCwwLjEpO1xuICAgICAgfVxuXG4gICAgICAuZ3JpZC1jYXJkOmhvdmVyIHtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxMnB4IHJnYmEoMCwwLDAsMC4xNSk7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTtcbiAgICAgIH1cblxuICAgICAgLmdyaWQtY2FyZC1oZWFkZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICAgIHBhZGRpbmctYm90dG9tOiA4cHg7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICB9XG5cbiAgICAgIC5kb2MtbmFtZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgICAgICBsZXR0ZXItc3BhY2luZzogMC41cHg7XG4gICAgICB9XG5cbiAgICAgIC5ncmlkLWNhcmQtdG9vbHMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDRweDtcbiAgICAgIH1cblxuICAgICAgLnRvb2wtYnRuLWdyaWQge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgcGFkZGluZzogNHB4IDZweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLnRvb2wtYnRuLWdyaWQ6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjEpO1xuICAgICAgfVxuXG4gICAgICAuZ3JpZC1jYXJkLWNvbnRlbnQge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xuICAgICAgfVxuXG4gICAgICAuZ3JpZC1ub3RlLXRleHQge1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgIH1cblxuICAgICAgLmdyaWQtbm90ZS10ZXh0OmhvdmVyIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICB9XG5cbiAgICAgIC5ncmlkLWFubm90YXRpb24ge1xuICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGJvcmRlci1sZWZ0OiAzcHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLmdyaWQtYW5ub3RhdGlvbjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAuZ3JpZC1hbm5vdGF0aW9uIHN0cm9uZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICB9XG5cbiAgICAgIC5ncmlkLXRhZ3Mge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgIGdhcDogNnB4O1xuICAgICAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAudGFnLWdyaWQge1xuICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS10YWctYmFja2dyb3VuZCk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10YWctY29sb3IpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLmdyaWQtY2FyZC1tZXRhIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBwYWRkaW5nLXRvcDogMTBweDtcbiAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgfVxuXG4gICAgICAubGluZS1pbmZvIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuYmFkZ2UtZ3JpZCB7XG4gICAgICAgIHBhZGRpbmc6IDNweCA4cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgfVxuXG4gICAgICAuY2FyZHMtaGVhZGVyIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgIH1cblxuICAgICAgLmNhcmRzLWhlYWRlciBoMiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgIH1cblxuICAgICAgLmNhcmRzLWdyaWQge1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgxNjBweCwgMWZyKSk7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgfVxuXG4gICAgICAuZmxhc2hjYXJkLWl0ZW0ge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtaXRlbTpob3ZlciB7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsMCwwLDAuMSk7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtaGVhZGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xuICAgICAgfVxuXG4gICAgICAuZmxhc2hjYXJkLWRlbGV0ZS1idG4ge1xuICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgb3BhY2l0eTogMC42O1xuICAgICAgfVxuXG4gICAgICAuZmxhc2hjYXJkLWRlbGV0ZS1idG46aG92ZXIge1xuICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtdHlwZSB7XG4gICAgICAgIHBhZGRpbmc6IDRweCAxMHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtdHlwZS5xYSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMTQ3LCA1MSwgMjM0LCAwLjIpO1xuICAgICAgICBjb2xvcjogIzkzMzNlYTtcbiAgICAgIH1cblxuICAgICAgLmZsYXNoY2FyZC10eXBlLmNsb3plIHtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgxNiwgMTg1LCAxMjksIDAuMik7XG4gICAgICAgIGNvbG9yOiAjMTBiOTgxO1xuICAgICAgfVxuXG4gICAgICAuZmxhc2hjYXJkLWRhdGUge1xuICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLmZsYXNoY2FyZC1ib2R5IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAuZmxhc2hjYXJkLXF1ZXN0aW9uLFxuICAgICAgLmZsYXNoY2FyZC1hbnN3ZXIge1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtcXVlc3Rpb24gc3Ryb25nLFxuICAgICAgLmZsYXNoY2FyZC1hbnN3ZXIgc3Ryb25nIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICB9XG5cbi5lbXB0eS1zdGF0ZSB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgcGFkZGluZzogNDBweCAyMHB4O1xuICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7IC8qIFx1RDgzRFx1REQyNyBcdTUxNzNcdTk1MkVcdUZGMDFcdTdBN0FcdTcyQjZcdTYwMDFcdTRFMERcdTYyRTZcdTYyMkFcdTcwQjlcdTUxRkIgKi9cbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB6LWluZGV4OiAxOyAvKiBcdUQ4M0RcdUREMjcgXHU3ODZFXHU0RkREXHU1NzI4XHU1REU1XHU1MTc3XHU2ODBGXHU0RTBCXHU2NUI5ICovXG59XG5cbiAgICAgIC5lbXB0eS1oaW50IHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgIH1cblxuICAgICAgLyogPT09PT09PT09PT09PT09PT09PT0gXHU1NENEXHU1RTk0XHU1RjBGID09PT09PT09PT09PT09PT09PT09ICovXG4gICAgICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHtcbiAgICAgICAgLm1haW4tbGF5b3V0IHtcbiAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjtcbiAgICAgICAgfVxuXG4gICAgICAgIC5sZWZ0LXBhbmVsIHtcbiAgICAgICAgICBkaXNwbGF5OiBub25lO1xuICAgICAgICB9XG5cbiAgICAgICAgLmNvbnRlbnQtZ3JpZCxcbiAgICAgICAgLmNhcmRzLWdyaWQge1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyO1xuICAgICAgICB9XG4gICAgICAgICAgLmJhdGNoLWJ0biB7XG4gICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgfVxuXG4gICAgICAuYmF0Y2gtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSg1OSwgMTMwLCAyNDYsIDAuMik7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7XG4gICAgICB9XG5cbiAgICAgIC8qIFx1NjI3OVx1OTFDRlx1NkEyMVx1NUYwRlx1NkZDMFx1NkQzQlx1NzJCNlx1NjAwMSAqL1xuICAgICAgLmNvbXBhY3QtY2FyZC5iYXRjaC1tb2RlIC5iYXRjaC1idG4sXG4gICAgICAuZ3JpZC1jYXJkLmJhdGNoLW1vZGUgLmJhdGNoLWJ0biB7XG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoNTksIDEzMCwgMjQ2LCAwLjMpO1xuICAgICAgICBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLWFjdGlvbnMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBnYXA6IDZweDtcbiAgbWFyZ2luLXRvcDogMTBweDtcbiAgZmxleC13cmFwOiB3cmFwO1xuICBwYWRkaW5nOiA4cHg7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5LWFsdCk7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgYW5pbWF0aW9uOiBzbGlkZURvd24gMC4ycyBlYXNlO1xufVxuLyogXHU2Mjc5XHU5MUNGXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFXHU3OTgxXHU3NTI4XHU3MkI2XHU2MDAxXHVGRjA4XHU2NTcwXHU5MUNGXHU0RTNBMFx1NjVGNlx1NzY4NFx1ODlDNlx1ODlDOVx1NTNDRFx1OTk4OFx1RkYwOSAqL1xuLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG4tc2lkZWJhcjpoYXMtdGV4dChcIigwKVwiKSxcbi5iYXRjaC1kZWxldGUtYnRuLXNpZGViYXI6aGFzLXRleHQoXCIoMClcIiksXG4uYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bi1oZWFkZXI6aGFzLXRleHQoXCIoMClcIiksXG4uYmF0Y2gtZGVsZXRlLWJ0bi1oZWFkZXI6aGFzLXRleHQoXCIoMClcIikge1xuICBvcGFjaXR5OiAwLjU7XG4gIGN1cnNvcjogbm90LWFsbG93ZWQ7XG59XG5Aa2V5ZnJhbWVzIHNsaWRlRG93biB7XG4gIGZyb20ge1xuICAgIG9wYWNpdHk6IDA7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMHB4KTtcbiAgfVxuICB0byB7XG4gICAgb3BhY2l0eTogMTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7XG4gICAgXG4gIH1cbn1cbiAgICAgIH1cbiAgICBgO1xuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxuXG4gIGFzeW5jIG9uQ2xvc2UoKSB7XG4gICAgLy8gXHU2RTA1XHU3NDA2XHU1QjlBXHU2NUY2XHU1NjY4XG4gICAgaWYgKHRoaXMuc2VhcmNoRGVib3VuY2VUaW1lciAhPT0gbnVsbCkge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnNlYXJjaERlYm91bmNlVGltZXIpO1xuICAgIH1cbiAgICBcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PSBcdTYyNzlcdTZDRThcdTdGMTZcdThGOTFcdTZBMjFcdTYwMDFcdTY4NDYgPT09PT09PT09PT09PT09PT09PT1cbmNsYXNzIEFubm90YXRpb25Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSByZXN1bHQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG9uU3VibWl0OiAodGV4dDogc3RyaW5nKSA9PiB2b2lkO1xuICBwcml2YXRlIGRlZmF1bHRWYWx1ZTogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBkZWZhdWx0VmFsdWU6IHN0cmluZywgb25TdWJtaXQ6ICh0ZXh0OiBzdHJpbmcpID0+IHZvaWQpIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xuICAgIHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHUyNzBGXHVGRTBGIFx1N0YxNlx1OEY5MVx1NjI3OVx1NkNFOCcgfSk7XG5cbiAgICBjb25zdCB0ZXh0YXJlYSA9IGNvbnRlbnRFbC5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICBjbHM6ICdhbm5vdGF0aW9uLXRleHRhcmVhJyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnXHU4RjkzXHU1MTY1XHU0RjYwXHU3Njg0XHU2Mjc5XHU2Q0U4Li4uJ1xuICAgIH0pO1xuICAgIHRleHRhcmVhLnZhbHVlID0gdGhpcy5kZWZhdWx0VmFsdWU7XG4gICAgdGV4dGFyZWEuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgdGV4dGFyZWEuc3R5bGUubWluSGVpZ2h0ID0gJzEyMHB4JztcbiAgICB0ZXh0YXJlYS5zdHlsZS5wYWRkaW5nID0gJzEwcHgnO1xuICAgIHRleHRhcmVhLnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpJztcbiAgICB0ZXh0YXJlYS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNnB4JztcbiAgICB0ZXh0YXJlYS5zdHlsZS5mb250RmFtaWx5ID0gJ3ZhcigtLWZvbnQtaW50ZXJmYWNlKSc7XG4gICAgdGV4dGFyZWEuc3R5bGUuZm9udFNpemUgPSAnMTRweCc7XG4gICAgdGV4dGFyZWEuc3R5bGUucmVzaXplID0gJ3ZlcnRpY2FsJztcbiAgICB0ZXh0YXJlYS5zdHlsZS5tYXJnaW5Ub3AgPSAnMTJweCc7XG5cbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG4gICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmdhcCA9ICc4cHgnO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LWVuZCc7XG4gICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICcxNnB4JztcblxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHU1M0Q2XHU2RDg4JyB9KTtcbiAgICBjYW5jZWxCdG4uc3R5bGUucGFkZGluZyA9ICc4cHggMTZweCc7XG4gICAgY2FuY2VsQnRuLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc2cHgnO1xuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdcdTRGRERcdTVCNTgnLFxuICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICB9KTtcbiAgICBzYXZlQnRuLnN0eWxlLnBhZGRpbmcgPSAnOHB4IDE2cHgnO1xuICAgIHNhdmVCdG4uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzZweCc7XG4gICAgc2F2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMucmVzdWx0ID0gdGV4dGFyZWEudmFsdWU7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICB0ZXh0YXJlYS5mb2N1cygpO1xuICAgIFxuICAgIC8vIFx1NUZFQlx1NjM3N1x1OTUyRVx1NjUyRlx1NjMwMVxuICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmIChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSkge1xuICAgICAgICB0aGlzLnJlc3VsdCA9IHRleHRhcmVhLnZhbHVlO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIFxuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIFxuICAgIGlmICh0aGlzLnJlc3VsdCAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5vblN1Ym1pdCh0aGlzLnJlc3VsdCk7XG4gICAgfVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09IFx1OTVFQVx1NTM2MVx1NTIxQlx1NUVGQVx1NkEyMVx1NjAwMVx1Njg0NiA9PT09PT09PT09PT09PT09PT09PVxuY2xhc3MgRmxhc2hjYXJkQ3JlYXRpb25Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSB1bml0OiBDb250ZW50VW5pdDtcbiAgcHJpdmF0ZSB0eXBlOiAncWEnIHwgJ2Nsb3plJztcbiAgcHJpdmF0ZSBvblN1Ym1pdDogKHF1ZXN0aW9uOiBzdHJpbmcsIGFuc3dlcjogc3RyaW5nKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwcDogQXBwLFxuICAgIHVuaXQ6IENvbnRlbnRVbml0LFxuICAgIHR5cGU6ICdxYScgfCAnY2xvemUnLFxuICAgIG9uU3VibWl0OiAocXVlc3Rpb246IHN0cmluZywgYW5zd2VyOiBzdHJpbmcpID0+IHZvaWRcbiAgKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLnVuaXQgPSB1bml0O1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIFxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7XG4gICAgICB0ZXh0OiBgXHVEODNDXHVEQ0NGIFx1NTIxQlx1NUVGQSR7dGhpcy50eXBlID09PSAncWEnID8gJ1EmQScgOiAnXHU1ODZCXHU3QTdBJ31cdTk1RUFcdTUzNjFgXG4gICAgfSk7XG5cbiAgICAvLyBcdTY2M0VcdTc5M0FcdTUzOUZcdTY1ODdcbiAgICBjb25zdCBzb3VyY2VEaXYgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnZmxhc2hjYXJkLXNvdXJjZScgfSk7XG4gICAgc291cmNlRGl2LnN0eWxlLnBhZGRpbmcgPSAnMTBweCc7XG4gICAgc291cmNlRGl2LnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJztcbiAgICBzb3VyY2VEaXYuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzZweCc7XG4gICAgc291cmNlRGl2LnN0eWxlLm1hcmdpblRvcCA9ICcxMnB4JztcbiAgICBzb3VyY2VEaXYuc3R5bGUubWFyZ2luQm90dG9tID0gJzEycHgnO1xuICAgIHNvdXJjZURpdi5zdHlsZS5mb250U2l6ZSA9ICcxM3B4JztcbiAgICBzb3VyY2VEaXYuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xuICAgIHNvdXJjZURpdi5pbm5lckhUTUwgPSBgPHN0cm9uZz5cdTUzOUZcdTY1ODdcdUZGMUE8L3N0cm9uZz4ke3RoaXMudW5pdC5jb250ZW50fWA7XG5cbiAgICAvLyBcdTk1RUVcdTk4OThcdThGOTNcdTUxNjVcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2xhYmVsJywge1xuICAgICAgdGV4dDogdGhpcy50eXBlID09PSAncWEnID8gJ1x1OTVFRVx1OTg5OCcgOiAnXHU1ODZCXHU3QTdBXHU5ODk4XHU1RTcyJyxcbiAgICAgIGNsczogJ2ZsYXNoY2FyZC1sYWJlbCdcbiAgICB9KS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICBcbiAgICBjb25zdCBxdWVzdGlvbklucHV0ID0gY29udGVudEVsLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgIGNsczogJ2ZsYXNoY2FyZC1pbnB1dCcsXG4gICAgICBwbGFjZWhvbGRlcjogdGhpcy50eXBlID09PSAncWEnIFxuICAgICAgICA/ICdcdThGOTNcdTUxNjVcdTk1RUVcdTk4OTguLi4nIFxuICAgICAgICA6ICdcdTc1Mjgge3tjMTo6Li4ufX0gXHU2ODA3XHU4QkIwXHU5NzAwXHU4OTgxXHU1ODZCXHU3QTdBXHU3Njg0XHU1MTg1XHU1QkI5J1xuICAgIH0pO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgcXVlc3Rpb25JbnB1dC5zdHlsZS5taW5IZWlnaHQgPSAnODBweCc7XG4gICAgcXVlc3Rpb25JbnB1dC5zdHlsZS5wYWRkaW5nID0gJzEwcHgnO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzZweCc7XG4gICAgcXVlc3Rpb25JbnB1dC5zdHlsZS5tYXJnaW5Ub3AgPSAnOHB4JztcbiAgICBxdWVzdGlvbklucHV0LnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxMnB4JztcbiAgICBxdWVzdGlvbklucHV0LnN0eWxlLmZvbnRTaXplID0gJzE0cHgnO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUucmVzaXplID0gJ3ZlcnRpY2FsJztcblxuICAgIC8vIFx1N0I1NFx1Njg0OFx1OEY5M1x1NTE2NVxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnbGFiZWwnLCB7XG4gICAgICB0ZXh0OiAnXHU3QjU0XHU2ODQ4JyxcbiAgICAgIGNsczogJ2ZsYXNoY2FyZC1sYWJlbCdcbiAgICB9KS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICBcbiAgICBjb25zdCBhbnN3ZXJJbnB1dCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICBjbHM6ICdmbGFzaGNhcmQtaW5wdXQnLFxuICAgICAgcGxhY2Vob2xkZXI6ICdcdThGOTNcdTUxNjVcdTdCNTRcdTY4NDguLi4nXG4gICAgfSk7XG4gICAgYW5zd2VySW5wdXQudmFsdWUgPSB0aGlzLnVuaXQuY29udGVudDtcbiAgICBhbnN3ZXJJbnB1dC5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICBhbnN3ZXJJbnB1dC5zdHlsZS5taW5IZWlnaHQgPSAnODBweCc7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUucGFkZGluZyA9ICcxMHB4JztcbiAgICBhbnN3ZXJJbnB1dC5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzZweCc7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUubWFyZ2luVG9wID0gJzhweCc7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUuZm9udFNpemUgPSAnMTRweCc7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUucmVzaXplID0gJ3ZlcnRpY2FsJztcblxuICAgIC8vIFx1NjMwOVx1OTRBRVxuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdtb2RhbC1idXR0b24tY29udGFpbmVyJyB9KTtcbiAgICBidXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICBidXR0b25Db250YWluZXIuc3R5bGUuZ2FwID0gJzhweCc7XG4gICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2ZsZXgtZW5kJztcbiAgICBidXR0b25Db250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzE2cHgnO1xuXG4gICAgY29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdTUzRDZcdTZEODgnIH0pO1xuICAgIGNhbmNlbEJ0bi5zdHlsZS5wYWRkaW5nID0gJzhweCAxNnB4JztcbiAgICBjYW5jZWxCdG4uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzZweCc7XG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgY3JlYXRlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnXHU1MjFCXHU1RUZBJyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgY3JlYXRlQnRuLnN0eWxlLnBhZGRpbmcgPSAnOHB4IDE2cHgnO1xuICAgIGNyZWF0ZUJ0bi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNnB4JztcbiAgICBjcmVhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBxdWVzdGlvbiA9IHF1ZXN0aW9uSW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgY29uc3QgYW5zd2VyID0gYW5zd2VySW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgXG4gICAgICBpZiAoIXF1ZXN0aW9uIHx8ICFhbnN3ZXIpIHtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1OEJGN1x1NTg2Qlx1NTE5OVx1NUI4Q1x1NjU3NFx1NEZFMVx1NjA2RicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRoaXMub25TdWJtaXQocXVlc3Rpb24sIGFuc3dlcik7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICBxdWVzdGlvbklucHV0LmZvY3VzKCk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG4vLyA9PT09PT09PT09PT09PT09PT09PSBcdTk1RUFcdTUzNjFcdTdGMTZcdThGOTFcdTZBMjFcdTYwMDFcdTY4NDYgPT09PT09PT09PT09PT09PT09PT1cbmNsYXNzIEZsYXNoY2FyZEVkaXRNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBjYXJkOiBGbGFzaGNhcmQ7XG4gIHByaXZhdGUgb25TdWJtaXQ6IChxdWVzdGlvbjogc3RyaW5nLCBhbnN3ZXI6IHN0cmluZykgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBjYXJkOiBGbGFzaGNhcmQsXG4gICAgb25TdWJtaXQ6IChxdWVzdGlvbjogc3RyaW5nLCBhbnN3ZXI6IHN0cmluZykgPT4gdm9pZFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMuY2FyZCA9IGNhcmQ7XG4gICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIFxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdTI3MEZcdUZFMEYgXHU3RjE2XHU4RjkxXHU5NUVBXHU1MzYxJyB9KTtcblxuICAgIC8vIFx1OTVFRVx1OTg5OFx1OEY5M1x1NTE2NVxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnbGFiZWwnLCB7IHRleHQ6ICdcdTk1RUVcdTk4OTgnIH0pLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIGNvbnN0IHF1ZXN0aW9uSW5wdXQgPSBjb250ZW50RWwuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgY2xzOiAnZmxhc2hjYXJkLWlucHV0J1xuICAgIH0pO1xuICAgIHF1ZXN0aW9uSW5wdXQudmFsdWUgPSB0aGlzLmNhcmQuZnJvbnQ7XG4gICAgcXVlc3Rpb25JbnB1dC5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICBxdWVzdGlvbklucHV0LnN0eWxlLm1pbkhlaWdodCA9ICc4MHB4JztcbiAgICBxdWVzdGlvbklucHV0LnN0eWxlLnBhZGRpbmcgPSAnMTBweCc7XG4gICAgcXVlc3Rpb25JbnB1dC5zdHlsZS5tYXJnaW5Ub3AgPSAnOHB4JztcbiAgICBxdWVzdGlvbklucHV0LnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxMnB4JztcblxuICAgIC8vIFx1N0I1NFx1Njg0OFx1OEY5M1x1NTE2NVxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnbGFiZWwnLCB7IHRleHQ6ICdcdTdCNTRcdTY4NDgnIH0pLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIGNvbnN0IGFuc3dlcklucHV0ID0gY29udGVudEVsLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgIGNsczogJ2ZsYXNoY2FyZC1pbnB1dCdcbiAgICB9KTtcbiAgICBhbnN3ZXJJbnB1dC52YWx1ZSA9IEFycmF5LmlzQXJyYXkodGhpcy5jYXJkLmJhY2spIFxuICAgICAgPyB0aGlzLmNhcmQuYmFjay5qb2luKCcsICcpIFxuICAgICAgOiB0aGlzLmNhcmQuYmFjaztcbiAgICBhbnN3ZXJJbnB1dC5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICBhbnN3ZXJJbnB1dC5zdHlsZS5taW5IZWlnaHQgPSAnODBweCc7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUucGFkZGluZyA9ICcxMHB4JztcbiAgICBhbnN3ZXJJbnB1dC5zdHlsZS5tYXJnaW5Ub3AgPSAnOHB4JztcblxuICAgIC8vIFx1NjMwOVx1OTRBRVxuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcbiAgICBidXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICBidXR0b25Db250YWluZXIuc3R5bGUuZ2FwID0gJzhweCc7XG4gICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2ZsZXgtZW5kJztcbiAgICBidXR0b25Db250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzE2cHgnO1xuXG4gICAgY29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdTUzRDZcdTZEODgnIH0pO1xuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG5cbiAgICBjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnXHU0RkREXHU1QjU4JyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgc2F2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnN0IHF1ZXN0aW9uID0gcXVlc3Rpb25JbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICBjb25zdCBhbnN3ZXIgPSBhbnN3ZXJJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICBpZiAoIXF1ZXN0aW9uIHx8ICFhbnN3ZXIpIHtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1OEJGN1x1NTg2Qlx1NTE5OVx1NUI4Q1x1NjU3NFx1NEZFMVx1NjA2RicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLm9uU3VibWl0KHF1ZXN0aW9uLCBhbnN3ZXIpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgcXVlc3Rpb25JbnB1dC5mb2N1cygpO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59IiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBURmlsZSwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBGbGFzaGNhcmQgfSBmcm9tICcuLi9jb3JlL0ZsYXNoY2FyZE1hbmFnZXInO1xuaW1wb3J0IHsgQ2FyZFNjaGVkdWxlciwgUmV2aWV3RWFzZSB9IGZyb20gJy4uL2NvcmUvQ2FyZFNjaGVkdWxlcic7XG5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfUkVWSUVXID0gJ2xlYXJuaW5nLXN5c3RlbS1yZXZpZXcnO1xuXG5leHBvcnQgY2xhc3MgUmV2aWV3VmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbjtcbiAgcHJpdmF0ZSBzY2hlZHVsZXI6IENhcmRTY2hlZHVsZXI7XG4gIHByaXZhdGUgZHVlQ2FyZHM6IEZsYXNoY2FyZFtdID0gW107XG4gIHByaXZhdGUgY3VycmVudENhcmRJbmRleDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBjdXJyZW50Q2FyZDogRmxhc2hjYXJkIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc2hvd0Fuc3dlcjogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIHN0YXJ0VGltZTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSB1c2VyQW5zd2Vyczogc3RyaW5nW10gPSBbXTtcbiAgcHJpdmF0ZSB1c2VyQW5zd2VyOiBzdHJpbmcgPSAnJzsgLy8gUUEgXHU1MzYxXHU3MjQ3XHU3Njg0XHU3NTI4XHU2MjM3XHU3QjU0XHU2ODQ4XG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbikge1xuICAgIHN1cGVyKGxlYWYpO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMuc2NoZWR1bGVyID0gbmV3IENhcmRTY2hlZHVsZXIoKTtcbiAgfVxuXG4gIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFZJRVdfVFlQRV9SRVZJRVc7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnRmxhc2hjYXJkIFJldmlldyc7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdsYXllcnMnO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZER1ZUNhcmRzKCk7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgYXN5bmMgb25DbG9zZSgpIHt9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkRHVlQ2FyZHMoKSB7XG4gICAgdGhpcy5kdWVDYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0RHVlQ2FyZHMoKTtcbiAgICB0aGlzLmN1cnJlbnRDYXJkSW5kZXggPSAwO1xuICAgIHRoaXMuc2hvd0Fuc3dlciA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXIoKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBjb250YWluZXIuYWRkQ2xhc3MoJ3Jldmlldy1jb250YWluZXInKTtcblxuICAgIGlmICh0aGlzLmR1ZUNhcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5yZW5kZXJOb0R1ZUNhcmRzKGNvbnRhaW5lcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbmV3Q2FyZCA9IHRoaXMuZHVlQ2FyZHNbdGhpcy5jdXJyZW50Q2FyZEluZGV4XTtcbiAgICBcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTUyMDdcdTYzNjJcdTUyMzBcdTY1QjBcdTUzNjFcdTcyNDdcdUZGMENcdTkxQ0RcdTdGNkVcdTcyQjZcdTYwMDFcbiAgICBpZiAodGhpcy5jdXJyZW50Q2FyZD8uaWQgIT09IG5ld0NhcmQ/LmlkKSB7XG4gICAgICB0aGlzLnVzZXJBbnN3ZXJzID0gW107XG4gICAgICB0aGlzLnVzZXJBbnN3ZXIgPSAnJztcbiAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IGZhbHNlO1xuICAgICAgdGhpcy5zdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmN1cnJlbnRDYXJkID0gbmV3Q2FyZDtcbiAgICBcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTY2M0VcdTc5M0FcdTk1RUVcdTk4OThcdTRFMTRcdTVGMDBcdTU5Q0JcdTY1RjZcdTk1RjRcdTRFM0EwXHVGRjBDXHU4QkJFXHU3RjZFXHU1RjAwXHU1OUNCXHU2NUY2XHU5NUY0XG4gICAgaWYgKCF0aGlzLnNob3dBbnN3ZXIgJiYgdGhpcy5zdGFydFRpbWUgPT09IDApIHtcbiAgICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB9XG5cbiAgICAvLyBcdThGREJcdTVFQTZcdTY3NjFcbiAgICB0aGlzLnJlbmRlclByb2dyZXNzKGNvbnRhaW5lcik7XG5cbiAgICAvLyBcdTUzNjFcdTcyNDdcdTUzM0FcdTU3REZcbiAgICBjb25zdCBjYXJkQXJlYSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLWFyZWEnIH0pO1xuXG4gICAgaWYgKHRoaXMuc2hvd0Fuc3dlcikge1xuICAgICAgdGhpcy5yZW5kZXJBbnN3ZXIoY2FyZEFyZWEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbmRlclF1ZXN0aW9uKGNhcmRBcmVhKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck5vRHVlQ2FyZHMoY29udGFpbmVyOiBFbGVtZW50KSB7XG4gICAgY29uc3QgZW1wdHlTdGF0ZSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdlbXB0eS1zdGF0ZScgfSk7XG4gICAgZW1wdHlTdGF0ZS5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUQ4M0NcdURGODkgQWxsIERvbmUhJyB9KTtcbiAgICBlbXB0eVN0YXRlLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnTm8gY2FyZHMgZHVlIGZvciByZXZpZXcgcmlnaHQgbm93LicgfSk7XG5cbiAgICBjb25zdCBzdGF0cyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0U3RhdHMoKTtcbiAgICBjb25zdCBzdGF0c0RpdiA9IGVtcHR5U3RhdGUuY3JlYXRlRGl2KHsgY2xzOiAnc3RhdHMtc3VtbWFyeScgfSk7XG4gICAgc3RhdHNEaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBUb3RhbCBjYXJkczogJHtzdGF0cy50b3RhbH1gIH0pO1xuICAgIHN0YXRzRGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgTmV3IGNhcmRzOiAke3N0YXRzLm5ld31gIH0pO1xuICAgIHN0YXRzRGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgUmV2aWV3ZWQgdG9kYXk6ICR7c3RhdHMucmV2aWV3ZWRUb2RheX1gIH0pO1xuXG4gICAgY29uc3QgY2xvc2VCdG4gPSBlbXB0eVN0YXRlLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnQ2xvc2UgUmV2aWV3JyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmxlYWYuZGV0YWNoKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclByb2dyZXNzKGNvbnRhaW5lcjogRWxlbWVudCkge1xuICAgIGNvbnN0IHByb2dyZXNzQmFyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3Byb2dyZXNzLWJhcicgfSk7XG4gICAgXG4gICAgY29uc3Qgc3RhdHMgPSBwcm9ncmVzc0Jhci5jcmVhdGVEaXYoeyBjbHM6ICdwcm9ncmVzcy1zdGF0cycgfSk7XG4gICAgc3RhdHMuY3JlYXRlU3Bhbih7IFxuICAgICAgdGV4dDogYCR7dGhpcy5jdXJyZW50Q2FyZEluZGV4ICsgMX0gLyAke3RoaXMuZHVlQ2FyZHMubGVuZ3RofWAsXG4gICAgICBjbHM6ICdwcm9ncmVzcy10ZXh0J1xuICAgIH0pO1xuXG4gICAgY29uc3QgcmVtYWluaW5nID0gdGhpcy5kdWVDYXJkcy5sZW5ndGggLSB0aGlzLmN1cnJlbnRDYXJkSW5kZXggLSAxO1xuICAgIHN0YXRzLmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IGAke3JlbWFpbmluZ30gcmVtYWluaW5nYCxcbiAgICAgIGNsczogJ3JlbWFpbmluZy10ZXh0J1xuICAgIH0pO1xuXG4gICAgY29uc3QgYmFyQ29udGFpbmVyID0gcHJvZ3Jlc3NCYXIuY3JlYXRlRGl2KHsgY2xzOiAnYmFyLWNvbnRhaW5lcicgfSk7XG4gICAgY29uc3QgYmFyID0gYmFyQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2JhcicgfSk7XG4gICAgY29uc3QgcHJvZ3Jlc3MgPSAoKHRoaXMuY3VycmVudENhcmRJbmRleCArIDEpIC8gdGhpcy5kdWVDYXJkcy5sZW5ndGgpICogMTAwO1xuICAgIGJhci5zdHlsZS53aWR0aCA9IGAke3Byb2dyZXNzfSVgO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJRdWVzdGlvbihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRDYXJkKSByZXR1cm47XG5cbiAgICAvLyBcdTUzNjFcdTcyNDdcdTRGRTFcdTYwNkZcbiAgICBjb25zdCBjYXJkSW5mbyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLWluZm8nIH0pO1xuICAgIGNhcmRJbmZvLmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IHRoaXMuY3VycmVudENhcmQudHlwZSA9PT0gJ3FhJyA/ICdcdUQ4M0RcdURDREQgUSZBJyA6ICdcdTI3MEZcdUZFMEYgQ2xvemUnLFxuICAgICAgY2xzOiAnY2FyZC10eXBlJ1xuICAgIH0pO1xuICAgIGNhcmRJbmZvLmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IGBEZWNrOiAke3RoaXMuY3VycmVudENhcmQuZGVja31gLFxuICAgICAgY2xzOiAnY2FyZC1kZWNrJ1xuICAgIH0pO1xuXG4gICAgLy8gXHU5NUVFXHU5ODk4XHU1MzNBXHU1N0RGXG4gICAgY29uc3QgcXVlc3Rpb25BcmVhID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3F1ZXN0aW9uLWFyZWEnIH0pO1xuICAgIHF1ZXN0aW9uQXJlYS5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdRdWVzdGlvbicgfSk7XG4gICAgXG4gICAgY29uc3QgcXVlc3Rpb25UZXh0ID0gcXVlc3Rpb25BcmVhLmNyZWF0ZURpdih7IGNsczogJ3F1ZXN0aW9uLXRleHQnIH0pO1xuICAgIHF1ZXN0aW9uVGV4dC50ZXh0Q29udGVudCA9IHRoaXMuY3VycmVudENhcmQuZnJvbnQ7XG5cbiAgICAvLyBcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdThGOTNcdTUxNjVcdTY4NDZcbiAgICBpZiAodGhpcy5jdXJyZW50Q2FyZC50eXBlID09PSAnY2xvemUnICYmIHRoaXMuY3VycmVudENhcmQuY2xvemUpIHtcbiAgICAgIGNvbnN0IGlucHV0QXJlYSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjbG96ZS1pbnB1dC1hcmVhJyB9KTtcbiAgICAgIGlucHV0QXJlYS5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdGaWxsIGluIHRoZSBibGFua3M6JyB9KTtcblxuICAgICAgLy8gXHU3ODZFXHU0RkREIHVzZXJBbnN3ZXJzIFx1NjU3MFx1N0VDNFx1NjcwOVx1OERCM1x1NTkxRlx1NzY4NFx1OTU3Rlx1NUVBNlxuICAgICAgaWYgKHRoaXMudXNlckFuc3dlcnMubGVuZ3RoIDwgdGhpcy5jdXJyZW50Q2FyZC5jbG96ZS5kZWxldGlvbnMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMudXNlckFuc3dlcnMgPSBuZXcgQXJyYXkodGhpcy5jdXJyZW50Q2FyZC5jbG96ZS5kZWxldGlvbnMubGVuZ3RoKS5maWxsKCcnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5jdXJyZW50Q2FyZC5jbG96ZS5kZWxldGlvbnMuZm9yRWFjaCgoZGVsZXRpb24sIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0R3JvdXAgPSBpbnB1dEFyZWEuY3JlYXRlRGl2KHsgY2xzOiAnaW5wdXQtZ3JvdXAnIH0pO1xuICAgICAgICBpbnB1dEdyb3VwLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHtpbmRleCArIDF9LiBgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgaW5wdXQgPSBpbnB1dEdyb3VwLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgcGxhY2Vob2xkZXI6ICdZb3VyIGFuc3dlci4uLicsXG4gICAgICAgICAgY2xzOiAnY2xvemUtaW5wdXQnLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnVzZXJBbnN3ZXJzW2luZGV4XSB8fCAnJ1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcbiAgICAgICAgICB0aGlzLnVzZXJBbnN3ZXJzW2luZGV4XSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBRQSBcdTUzNjFcdTcyNDdcdThGOTNcdTUxNjVcdTY4NDZcbiAgICBpZiAodGhpcy5jdXJyZW50Q2FyZC50eXBlID09PSAncWEnKSB7XG4gICAgICBjb25zdCBpbnB1dEFyZWEgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncWEtaW5wdXQtYXJlYScgfSk7XG4gICAgICBpbnB1dEFyZWEuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnWW91ciBBbnN3ZXI6JyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgdGV4dGFyZWEgPSBpbnB1dEFyZWEuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgICBwbGFjZWhvbGRlcjogJ1R5cGUgeW91ciBhbnN3ZXIgaGVyZS4uLicsXG4gICAgICAgIGNsczogJ3FhLWlucHV0JyxcbiAgICAgICAgdmFsdWU6IHRoaXMudXNlckFuc3dlclxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcbiAgICAgICAgdGhpcy51c2VyQW5zd2VyID0gKGUudGFyZ2V0IGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQpLnZhbHVlO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU2MzA5XHU5NEFFXHU1MzNBXHU1N0RGXG4gICAgY29uc3QgYnV0dG9uQXJlYSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdidXR0b24tYXJlYScgfSk7XG5cbiAgICAvLyBcdThERjNcdThGNkNcdTUyMzBcdTZFOTBcdTY1ODdcdTRFRjZcbiAgICBjb25zdCBqdW1wQnRuID0gYnV0dG9uQXJlYS5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1x1MjE5NyBKdW1wIHRvIFNvdXJjZScsXG4gICAgICBjbHM6ICdqdW1wLWJ0bidcbiAgICB9KTtcbiAgICBqdW1wQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5qdW1wVG9Tb3VyY2UoKSk7XG5cbiAgICAvLyBcdTY2M0VcdTc5M0FcdTdCNTRcdTY4NDhcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBzaG93QW5zd2VyQnRuID0gYnV0dG9uQXJlYS5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1Nob3cgQW5zd2VyJyxcbiAgICAgIGNsczogJ21vZC1jdGEgc2hvdy1hbnN3ZXItYnRuJ1xuICAgIH0pO1xuICAgIHNob3dBbnN3ZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLnNob3dBbnN3ZXIgPSB0cnVlO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyQW5zd2VyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAoIXRoaXMuY3VycmVudENhcmQpIHJldHVybjtcblxuICAgIC8vIFx1NTM2MVx1NzI0N1x1NEZFMVx1NjA2RlxuICAgIGNvbnN0IGNhcmRJbmZvID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NhcmQtaW5mbycgfSk7XG4gICAgY2FyZEluZm8uY3JlYXRlU3Bhbih7IFxuICAgICAgdGV4dDogdGhpcy5jdXJyZW50Q2FyZC50eXBlID09PSAncWEnID8gJ1x1RDgzRFx1RENERCBRJkEnIDogJ1x1MjcwRlx1RkUwRiBDbG96ZScsXG4gICAgICBjbHM6ICdjYXJkLXR5cGUnXG4gICAgfSk7XG4gICAgY2FyZEluZm8uY3JlYXRlU3Bhbih7IFxuICAgICAgdGV4dDogYERlY2s6ICR7dGhpcy5jdXJyZW50Q2FyZC5kZWNrfWAsXG4gICAgICBjbHM6ICdjYXJkLWRlY2snXG4gICAgfSk7XG5cbiAgICAvLyBcdTk1RUVcdTk4OThcdTU2REVcdTk4N0VcbiAgICBjb25zdCBxdWVzdGlvblJldmlldyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdxdWVzdGlvbi1yZXZpZXcnIH0pO1xuICAgIHF1ZXN0aW9uUmV2aWV3LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1F1ZXN0aW9uOicgfSk7XG4gICAgcXVlc3Rpb25SZXZpZXcuY3JlYXRlRGl2KHsgXG4gICAgICB0ZXh0OiB0aGlzLmN1cnJlbnRDYXJkLmZyb250LFxuICAgICAgY2xzOiAncmV2aWV3LXRleHQnXG4gICAgfSk7XG5cbiAgICAvLyBcdTdCNTRcdTY4NDhcdTUzM0FcdTU3REZcbiAgICBjb25zdCBhbnN3ZXJBcmVhID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2Fuc3dlci1hcmVhJyB9KTtcbiAgICBhbnN3ZXJBcmVhLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0Fuc3dlcicgfSk7XG5cbiAgICBpZiAodGhpcy5jdXJyZW50Q2FyZC50eXBlID09PSAnY2xvemUnICYmIHRoaXMuY3VycmVudENhcmQuY2xvemUpIHtcbiAgICAgIC8vIFx1NjYzRVx1NzkzQVx1NUI4Q1x1NjU3NFx1NjU4N1x1NjcyQ1xuICAgICAgY29uc3QgZnVsbFRleHQgPSBhbnN3ZXJBcmVhLmNyZWF0ZURpdih7IGNsczogJ2Z1bGwtdGV4dCcgfSk7XG4gICAgICBmdWxsVGV4dC50ZXh0Q29udGVudCA9IHRoaXMuY3VycmVudENhcmQuY2xvemUub3JpZ2luYWw7XG5cbiAgICAgIC8vIFx1NjYzRVx1NzkzQVx1NzUyOFx1NjIzN1x1N0I1NFx1Njg0OFx1NUJGOVx1NkJENFxuICAgICAgaWYgKHRoaXMudXNlckFuc3dlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBjb21wYXJpc29uID0gYW5zd2VyQXJlYS5jcmVhdGVEaXYoeyBjbHM6ICdhbnN3ZXItY29tcGFyaXNvbicgfSk7XG4gICAgICAgIGNvbXBhcmlzb24uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnWW91ciBBbnN3ZXJzOicgfSk7XG5cbiAgICAgICAgdGhpcy5jdXJyZW50Q2FyZC5jbG96ZS5kZWxldGlvbnMuZm9yRWFjaCgoZGVsZXRpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGNvbXBhcmlzb24uY3JlYXRlRGl2KHsgY2xzOiAnY29tcGFyaXNvbi1pdGVtJyB9KTtcbiAgICAgICAgICBpdGVtLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHtpbmRleCArIDF9LiBgIH0pO1xuXG4gICAgICAgICAgY29uc3QgdXNlckFuc3dlciA9IHRoaXMudXNlckFuc3dlcnNbaW5kZXhdIHx8ICcnO1xuICAgICAgICAgIGNvbnN0IGV2YWx1YXRpb24gPSB0aGlzLnNjaGVkdWxlci5ldmFsdWF0ZUFuc3dlcihcbiAgICAgICAgICAgIGRlbGV0aW9uLmFuc3dlcixcbiAgICAgICAgICAgIHVzZXJBbnN3ZXJcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgY29uc3QgdXNlclNwYW4gPSBpdGVtLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgICAgdGV4dDogdXNlckFuc3dlciB8fCAnKGVtcHR5KScsXG4gICAgICAgICAgICBjbHM6IGB1c2VyLWFuc3dlciAke2V2YWx1YXRpb24uY29ycmVjdG5lc3N9YFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFx1Nzg2RVx1NEZERFx1N0M3Qlx1NTQwRFx1NkI2M1x1Nzg2RVx1OEJCRVx1N0Y2RVxuICAgICAgICAgIHVzZXJTcGFuLmNsYXNzTGlzdC5hZGQoJ3VzZXItYW5zd2VyJywgZXZhbHVhdGlvbi5jb3JyZWN0bmVzcyk7XG5cbiAgICAgICAgICBpdGVtLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnIFx1MjE5MiAnIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGl0ZW0uY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgICB0ZXh0OiBkZWxldGlvbi5hbnN3ZXIsXG4gICAgICAgICAgICBjbHM6ICdjb3JyZWN0LWFuc3dlcidcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChldmFsdWF0aW9uLmNvcnJlY3RuZXNzID09PSAncGFydGlhbCcpIHtcbiAgICAgICAgICAgIGl0ZW0uY3JlYXRlRWwoJ3NtYWxsJywge1xuICAgICAgICAgICAgICB0ZXh0OiBgICgke01hdGgucm91bmQoZXZhbHVhdGlvbi5zaW1pbGFyaXR5ICogMTAwKX0lIG1hdGNoKWAsXG4gICAgICAgICAgICAgIGNsczogJ3NpbWlsYXJpdHktaW5mbydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFEmQSBcdTdCNTRcdTY4NDhcbiAgICAgIGNvbnN0IGNvcnJlY3RBbnN3ZXIgPSB0aGlzLmN1cnJlbnRDYXJkLmJhY2sgYXMgc3RyaW5nO1xuICAgICAgXG4gICAgICAvLyBcdTY2M0VcdTc5M0FcdTZCNjNcdTc4NkVcdTdCNTRcdTY4NDhcbiAgICAgIGNvbnN0IGFuc3dlclRleHQgPSBhbnN3ZXJBcmVhLmNyZWF0ZURpdih7IGNsczogJ2Fuc3dlci10ZXh0JyB9KTtcbiAgICAgIGFuc3dlclRleHQudGV4dENvbnRlbnQgPSBjb3JyZWN0QW5zd2VyO1xuXG4gICAgICAvLyBcdTY2M0VcdTc5M0FcdTc1MjhcdTYyMzdcdTdCNTRcdTY4NDhcdTVCRjlcdTZCRDRcbiAgICAgIGlmICh0aGlzLnVzZXJBbnN3ZXIudHJpbSgpKSB7XG4gICAgICAgIGNvbnN0IGNvbXBhcmlzb24gPSBhbnN3ZXJBcmVhLmNyZWF0ZURpdih7IGNsczogJ2Fuc3dlci1jb21wYXJpc29uIHFhLWNvbXBhcmlzb24nIH0pO1xuICAgICAgICBjb21wYXJpc29uLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1lvdXIgQW5zd2VyOicgfSk7XG5cbiAgICAgICAgY29uc3QgZXZhbHVhdGlvbiA9IHRoaXMuc2NoZWR1bGVyLmV2YWx1YXRlQW5zd2VyKFxuICAgICAgICAgIGNvcnJlY3RBbnN3ZXIsXG4gICAgICAgICAgdGhpcy51c2VyQW5zd2VyXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gXHU4QkU2XHU3RUM2XHU3Njg0XHU4QzAzXHU4QkQ1XHU0RkUxXHU2MDZGXG4gICAgICAgIGNvbnNvbGUubG9nKCc9PT0gQW5zd2VyIEV2YWx1YXRpb24gRGVidWcgPT09Jyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIEFuc3dlcjonLCB0aGlzLnVzZXJBbnN3ZXIpO1xuICAgICAgICBjb25zb2xlLmxvZygnQ29ycmVjdCBBbnN3ZXI6JywgY29ycmVjdEFuc3dlcik7XG4gICAgICAgIGNvbnNvbGUubG9nKCdFdmFsdWF0aW9uIFJlc3VsdDonLCBldmFsdWF0aW9uKTtcbiAgICAgICAgY29uc29sZS5sb2coJ0NvcnJlY3RuZXNzOicsIGV2YWx1YXRpb24uY29ycmVjdG5lc3MpO1xuICAgICAgICBjb25zb2xlLmxvZygnU2ltaWxhcml0eTonLCBldmFsdWF0aW9uLnNpbWlsYXJpdHkpO1xuXG4gICAgICAgIGNvbnN0IHVzZXJBbnN3ZXJEaXYgPSBjb21wYXJpc29uLmNyZWF0ZURpdih7IGNsczogJ2NvbXBhcmlzb24taXRlbScgfSk7XG4gICAgICAgIGNvbnN0IHVzZXJBbnN3ZXJFbGVtZW50ID0gdXNlckFuc3dlckRpdi5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgIHRleHQ6IHRoaXMudXNlckFuc3dlciB8fCAnKGVtcHR5KSdcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTZFMDVcdTk2NjRcdTYyNDBcdTY3MDlcdTUzRUZcdTgwRkRcdTc2ODRcdTdDN0JcdTU0MERcdUZGMENcdTcxMzZcdTU0MEVcdTkxQ0RcdTY1QjBcdTZERkJcdTUyQTBcbiAgICAgICAgdXNlckFuc3dlckVsZW1lbnQuY2xhc3NOYW1lID0gJyc7XG4gICAgICAgIHVzZXJBbnN3ZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3FhLXVzZXItYW5zd2VyJywgJ3VzZXItYW5zd2VyJywgZXZhbHVhdGlvbi5jb3JyZWN0bmVzcyk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTlBOENcdThCQzFcdTdDN0JcdTU0MERcdTY2MkZcdTU0MjZcdTZCNjNcdTc4NkVcdThCQkVcdTdGNkVcbiAgICAgICAgY29uc29sZS5sb2coJ0FwcGxpZWQgY2xhc3NlczonLCB1c2VyQW5zd2VyRWxlbWVudC5jbGFzc05hbWUpO1xuICAgICAgICBjb25zb2xlLmxvZygnSGFzIGNvcnJlY3QgY2xhc3M6JywgdXNlckFuc3dlckVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb3JyZWN0JykpO1xuICAgICAgICBjb25zb2xlLmxvZygnSGFzIHBhcnRpYWwgY2xhc3M6JywgdXNlckFuc3dlckVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwYXJ0aWFsJykpO1xuICAgICAgICBjb25zb2xlLmxvZygnSGFzIHdyb25nIGNsYXNzOicsIHVzZXJBbnN3ZXJFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnd3JvbmcnKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTc2RjRcdTYzQTVcdThCQkVcdTdGNkVcdTY4MzdcdTVGMEZcdTc1MjhcdTRFOEVcdThDMDNcdThCRDVcbiAgICAgICAgaWYgKGV2YWx1YXRpb24uY29ycmVjdG5lc3MgPT09ICd3cm9uZycpIHtcbiAgICAgICAgICB1c2VyQW5zd2VyRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2Y0NDMzNic7XG4gICAgICAgICAgdXNlckFuc3dlckVsZW1lbnQuc3R5bGUuY29sb3IgPSAnd2hpdGUnO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdBcHBsaWVkIHdyb25nIGFuc3dlciBzdHlsZXMgZGlyZWN0bHknKTtcbiAgICAgICAgfSBlbHNlIGlmIChldmFsdWF0aW9uLmNvcnJlY3RuZXNzID09PSAncGFydGlhbCcpIHtcbiAgICAgICAgICB1c2VyQW5zd2VyRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI0ZGQzAwMCc7XG4gICAgICAgICAgdXNlckFuc3dlckVsZW1lbnQuc3R5bGUuY29sb3IgPSAnd2hpdGUnO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdBcHBsaWVkIHBhcnRpYWwgYW5zd2VyIHN0eWxlcyBkaXJlY3RseScpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2YWx1YXRpb24uY29ycmVjdG5lc3MgPT09ICdjb3JyZWN0Jykge1xuICAgICAgICAgIHVzZXJBbnN3ZXJFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjNGNhZjUwJztcbiAgICAgICAgICB1c2VyQW5zd2VyRWxlbWVudC5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0FwcGxpZWQgY29ycmVjdCBhbnN3ZXIgc3R5bGVzIGRpcmVjdGx5Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb21wYXJpc29uLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0NvcnJlY3QgQW5zd2VyOicsIGNsczogJ2NvcnJlY3QtYW5zd2VyLWxhYmVsJyB9KTtcbiAgICAgICAgY29uc3QgY29ycmVjdEFuc3dlckRpdiA9IGNvbXBhcmlzb24uY3JlYXRlRGl2KHsgY2xzOiAnY29tcGFyaXNvbi1pdGVtJyB9KTtcbiAgICAgICAgY29ycmVjdEFuc3dlckRpdi5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgIHRleHQ6IGNvcnJlY3RBbnN3ZXIsXG4gICAgICAgICAgY2xzOiAnY29ycmVjdC1hbnN3ZXIgcWEtY29ycmVjdC1hbnN3ZXInXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChldmFsdWF0aW9uLmNvcnJlY3RuZXNzID09PSAncGFydGlhbCcpIHtcbiAgICAgICAgICBjb25zdCBzaW1pbGFyaXR5SW5mbyA9IGNvbXBhcmlzb24uY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgIGNsczogJ3NpbWlsYXJpdHktaW5mbyBxYS1zaW1pbGFyaXR5J1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNpbWlsYXJpdHlJbmZvLnRleHRDb250ZW50ID0gYFNpbWlsYXJpdHk6ICR7TWF0aC5yb3VuZChldmFsdWF0aW9uLnNpbWlsYXJpdHkgKiAxMDApfSVgO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHU4QkM0XHU3RUE3XHU2MzA5XHU5NEFFXG4gICAgY29uc3QgcmF0aW5nQXJlYSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdyYXRpbmctYXJlYScgfSk7XG4gICAgcmF0aW5nQXJlYS5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdIb3cgd2VsbCBkaWQgeW91IGtub3cgdGhpcz8nIH0pO1xuXG4gICAgY29uc3QgYnV0dG9uR3JvdXAgPSByYXRpbmdBcmVhLmNyZWF0ZURpdih7IGNsczogJ3JhdGluZy1idXR0b25zJyB9KTtcblxuICAgIGNvbnN0IHJhdGluZ3M6IHsgZWFzZTogUmV2aWV3RWFzZTsgbGFiZWw6IHN0cmluZzsgY29sb3I6IHN0cmluZyB9W10gPSBbXG4gICAgICB7IGVhc2U6ICdhZ2FpbicsIGxhYmVsOiAnQWdhaW5cXG48IDEgbWluJywgY29sb3I6ICdyZWQnIH0sXG4gICAgICB7IGVhc2U6ICdoYXJkJywgbGFiZWw6ICdIYXJkXFxuPCAxMCBtaW4nLCBjb2xvcjogJ29yYW5nZScgfSxcbiAgICAgIHsgZWFzZTogJ2dvb2QnLCBsYWJlbDogJ0dvb2RcXG4xIGRheScsIGNvbG9yOiAnYmx1ZScgfSxcbiAgICAgIHsgZWFzZTogJ2Vhc3knLCBsYWJlbDogJ0Vhc3lcXG40IGRheXMnLCBjb2xvcjogJ2dyZWVuJyB9XG4gICAgXTtcblxuICAgIHJhdGluZ3MuZm9yRWFjaCgoeyBlYXNlLCBsYWJlbCwgY29sb3IgfSkgPT4ge1xuICAgICAgY29uc3QgYnRuID0gYnV0dG9uR3JvdXAuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgY2xzOiBgcmF0aW5nLWJ0biByYXRpbmctJHtjb2xvcn1gXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgbGluZXMgPSBsYWJlbC5zcGxpdCgnXFxuJyk7XG4gICAgICBidG4uY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogbGluZXNbMF0sIGNsczogJ3JhdGluZy1sYWJlbCcgfSk7XG4gICAgICBidG4uY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogbGluZXNbMV0sIGNsczogJ3JhdGluZy1pbnRlcnZhbCcgfSk7XG5cbiAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc3VibWl0UmV2aWV3KGVhc2UpKTtcbiAgICB9KTtcblxuICAgIC8vIFx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVx1N0VDNFxuICAgIGNvbnN0IGFjdGlvbkJ1dHRvbnMgPSByYXRpbmdBcmVhLmNyZWF0ZURpdih7IGNsczogJ2FjdGlvbi1idXR0b25zJyB9KTtcbiAgICBcbiAgICAvLyBcdThERjNcdThGNkNcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBqdW1wQnRuID0gYWN0aW9uQnV0dG9ucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1x1MjE5NyBKdW1wIHRvIFNvdXJjZScsXG4gICAgICBjbHM6ICdqdW1wLWJ0bi1zbWFsbCdcbiAgICB9KTtcbiAgICBqdW1wQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5qdW1wVG9Tb3VyY2UoKSk7XG5cbiAgICAvLyBcdTUyMjBcdTk2NjRcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBkZWxldGVCdG4gPSBhY3Rpb25CdXR0b25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnXHVEODNEXHVEREQxXHVGRTBGIERlbGV0ZSBDYXJkJyxcbiAgICAgIGNsczogJ2RlbGV0ZS1idG4tc21hbGwnXG4gICAgfSk7XG4gICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLmN1cnJlbnRDYXJkKSByZXR1cm47XG4gICAgICBpZiAoY29uZmlybSgnXHU3ODZFXHU1QjlBXHU4OTgxXHU1MjIwXHU5NjY0XHU4RkQ5XHU1RjIwXHU5NUVBXHU1MzYxXHU1NDE3XHVGRjFGXHU1MjIwXHU5NjY0XHU1NDBFXHU1QzA2XHU0RUNFXHU1OTBEXHU0RTYwXHU5NjFGXHU1MjE3XHU0RTJEXHU3OUZCXHU5NjY0XHUzMDAyJykpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5kZWxldGVGbGFzaGNhcmQodGhpcy5jdXJyZW50Q2FyZC5pZCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN1Ym1pdFJldmlldyhlYXNlOiBSZXZpZXdFYXNlKSB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRDYXJkKSByZXR1cm47XG5cbiAgICBjb25zdCB0aW1lU3BlbnQgPSAoRGF0ZS5ub3coKSAtIHRoaXMuc3RhcnRUaW1lKSAvIDEwMDA7IC8vIFx1NzlEMlxuXG4gICAgLy8gXHU1QkY5XHU0RThFXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU1NDhDIFFBIFx1NTM2MVx1NzI0N1x1RkYwQ1x1NEY3Rlx1NzUyOFx1NzUyOFx1NjIzN1x1N0I1NFx1Njg0OFxuICAgIGNvbnN0IHVzZXJBbnN3ZXIgPSB0aGlzLmN1cnJlbnRDYXJkLnR5cGUgPT09ICdjbG96ZScgXG4gICAgICA/IHRoaXMudXNlckFuc3dlcnMgXG4gICAgICA6IHRoaXMuY3VycmVudENhcmQudHlwZSA9PT0gJ3FhJ1xuICAgICAgPyB0aGlzLnVzZXJBbnN3ZXJcbiAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgLy8gXHU4QkExXHU3Qjk3XHU2NUIwXHU3Njg0XHU4QzAzXHU1RUE2XG4gICAgY29uc3QgeyB1cGRhdGVkQ2FyZCwgcmV2aWV3TG9nIH0gPSB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShcbiAgICAgIHRoaXMuY3VycmVudENhcmQsXG4gICAgICBlYXNlLFxuICAgICAgdGltZVNwZW50LFxuICAgICAgdXNlckFuc3dlclxuICAgICk7XG5cbiAgICAvLyBcdTY2RjRcdTY1QjBcdTUzNjFcdTcyNDdcbiAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLnVwZGF0ZUNhcmQodXBkYXRlZENhcmQpO1xuXG4gICAgLy8gXHU4QkIwXHU1RjU1XHU2NUU1XHU1RkQ3XG4gICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5sb2dSZXZpZXcoe1xuICAgICAgaWQ6IGBsb2ctJHtEYXRlLm5vdygpfWAsXG4gICAgICAuLi5yZXZpZXdMb2dcbiAgICB9KTtcblxuICAgIC8vIFx1NEUwQlx1NEUwMFx1NUYyMFx1NTM2MVx1NzI0N1xuICAgIHRoaXMuY3VycmVudENhcmRJbmRleCsrO1xuICAgIHRoaXMuc2hvd0Fuc3dlciA9IGZhbHNlO1xuICAgIHRoaXMudXNlckFuc3dlcnMgPSBbXTtcbiAgICB0aGlzLnVzZXJBbnN3ZXIgPSAnJztcblxuICAgIGlmICh0aGlzLmN1cnJlbnRDYXJkSW5kZXggPj0gdGhpcy5kdWVDYXJkcy5sZW5ndGgpIHtcbiAgICAgIC8vIFx1NTkwRFx1NEU2MFx1NUI4Q1x1NjIxMFxuICAgICAgbmV3IE5vdGljZShgXHUyNzA1IFJldmlldyBzZXNzaW9uIGNvbXBsZXRlISBSZXZpZXdlZCAke3RoaXMuZHVlQ2FyZHMubGVuZ3RofSBjYXJkcy5gKTtcbiAgICAgIGF3YWl0IHRoaXMubG9hZER1ZUNhcmRzKCk7XG4gICAgfVxuXG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMganVtcFRvU291cmNlKCkge1xuICAgIGlmICghdGhpcy5jdXJyZW50Q2FyZCkgcmV0dXJuO1xuXG4gICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLmN1cnJlbnRDYXJkLnNvdXJjZUZpbGUpO1xuICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1NvdXJjZSBmaWxlIG5vdCBmb3VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRlbnRVbml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoXG4gICAgICB0aGlzLmN1cnJlbnRDYXJkLnNvdXJjZUNvbnRlbnRJZFxuICAgICk7XG5cbiAgICBpZiAoIWNvbnRlbnRVbml0KSB7XG4gICAgICBuZXcgTm90aWNlKCdTb3VyY2UgY29udGVudCBub3QgZm91bmQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBcdTYyNTNcdTVGMDBcdTY1ODdcdTRFRjZcdTVFNzZcdThERjNcdThGNkNcbiAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpO1xuICAgIGF3YWl0IGxlYWYub3BlbkZpbGUoZmlsZSk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShJdGVtVmlldyk7XG4gICAgICBpZiAodmlldykge1xuICAgICAgICBjb25zdCBlZGl0b3IgPSAodmlldyBhcyBhbnkpLmVkaXRvcjtcbiAgICAgICAgaWYgKGVkaXRvcikge1xuICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3IoeyBsaW5lOiBjb250ZW50VW5pdC5zb3VyY2UucG9zaXRpb24ubGluZSwgY2g6IDAgfSk7XG4gICAgICAgICAgZWRpdG9yLnNjcm9sbEludG9WaWV3KHtcbiAgICAgICAgICAgIGZyb206IHsgbGluZTogY29udGVudFVuaXQuc291cmNlLnBvc2l0aW9uLmxpbmUsIGNoOiAwIH0sXG4gICAgICAgICAgICB0bzogeyBsaW5lOiBjb250ZW50VW5pdC5zb3VyY2UucG9zaXRpb24ubGluZSwgY2g6IDAgfVxuICAgICAgICAgIH0sIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgMTAwKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGVsZXRlRmxhc2hjYXJkKGNhcmRJZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZGVsZXRlQ2FyZChjYXJkSWQpO1xuICAgICAgbmV3IE5vdGljZSgnXHVEODNEXHVEREQxXHVGRTBGIFx1OTVFQVx1NTM2MVx1NURGMlx1NTIyMFx1OTY2NCcpO1xuICAgICAgXG4gICAgICAvLyBcdTRFQ0VcdTVGNTNcdTUyNERcdTU5MERcdTRFNjBcdTk2MUZcdTUyMTdcdTRFMkRcdTc5RkJcdTk2NjRcbiAgICAgIHRoaXMuZHVlQ2FyZHMgPSB0aGlzLmR1ZUNhcmRzLmZpbHRlcihjYXJkID0+IGNhcmQuaWQgIT09IGNhcmRJZCk7XG4gICAgICBcbiAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTIyMFx1OTY2NFx1NzY4NFx1NjYyRlx1NUY1M1x1NTI0RFx1NTM2MVx1NzI0N1x1RkYwQ1x1NzlGQlx1NTJBOFx1NTIzMFx1NEUwQlx1NEUwMFx1NUYyMFxuICAgICAgaWYgKHRoaXMuY3VycmVudENhcmQ/LmlkID09PSBjYXJkSWQpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudENhcmRJbmRleCA+PSB0aGlzLmR1ZUNhcmRzLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuY3VycmVudENhcmRJbmRleCA9IE1hdGgubWF4KDAsIHRoaXMuZHVlQ2FyZHMubGVuZ3RoIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50Q2FyZCA9IG51bGw7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1OTFDRFx1NjVCMFx1NkUzMlx1NjdEM1xuICAgICAgYXdhaXQgdGhpcy5sb2FkRHVlQ2FyZHMoKTtcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGZsYXNoY2FyZDonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdcdTI3NEMgXHU1MjIwXHU5NjY0XHU5NUVBXHU1MzYxXHU1OTMxXHU4RDI1Jyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgIC5yZXZpZXctY29udGFpbmVyIHtcbiAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgbWF4LXdpZHRoOiA4MDBweDtcbiAgICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgICB9XG5cbiAgICAgIC8qIFx1N0E3QVx1NzJCNlx1NjAwMSAqL1xuICAgICAgLmVtcHR5LXN0YXRlIHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBwYWRkaW5nOiA2MHB4IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5lbXB0eS1zdGF0ZSBoMiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMmVtO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAuc3RhdHMtc3VtbWFyeSB7XG4gICAgICAgIG1hcmdpbjogMzBweCAwO1xuICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgICAgbWF4LXdpZHRoOiAzMDBweDtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgICAgIG1hcmdpbi1yaWdodDogYXV0bztcbiAgICAgIH1cblxuICAgICAgLyogXHU4RkRCXHU1RUE2XHU2NzYxICovXG4gICAgICAucHJvZ3Jlc3MtYmFyIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDtcbiAgICAgIH1cblxuICAgICAgLnByb2dyZXNzLXN0YXRzIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAucHJvZ3Jlc3MtdGV4dCB7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gICAgICB9XG5cbiAgICAgIC5yZW1haW5pbmctdGV4dCB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLmJhci1jb250YWluZXIge1xuICAgICAgICBoZWlnaHQ6IDhweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICB9XG5cbiAgICAgIC5iYXIge1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIHRyYW5zaXRpb246IHdpZHRoIDAuM3MgZWFzZTtcbiAgICAgIH1cblxuICAgICAgLyogXHU1MzYxXHU3MjQ3XHU1MzNBXHU1N0RGICovXG4gICAgICAuY2FyZC1hcmVhIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgICAgICBwYWRkaW5nOiAzMHB4O1xuICAgICAgICBtaW4taGVpZ2h0OiA0MDBweDtcbiAgICAgIH1cblxuICAgICAgLmNhcmQtaW5mbyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogMTVweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjVweDtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDE1cHg7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkLXR5cGUsIC5jYXJkLWRlY2sge1xuICAgICAgICBwYWRkaW5nOiA0cHggMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTk1RUVcdTk4OThcdTUzM0FcdTU3REYgKi9cbiAgICAgIC5xdWVzdGlvbi1hcmVhLCAuYW5zd2VyLWFyZWEge1xuICAgICAgICBtYXJnaW46IDI1cHggMDtcbiAgICAgIH1cblxuICAgICAgLnF1ZXN0aW9uLWFyZWEgaDMsIC5hbnN3ZXItYXJlYSBoMyB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLnF1ZXN0aW9uLXRleHQsIC5hbnN3ZXItdGV4dCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMS4zZW07XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgfVxuXG4gICAgICAvKiBcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdThGOTNcdTUxNjUgKi9cbiAgICAgIC5jbG96ZS1pbnB1dC1hcmVhIHtcbiAgICAgICAgbWFyZ2luOiAyNXB4IDA7XG4gICAgICB9XG5cbiAgICAgIC5jbG96ZS1pbnB1dC1hcmVhIGg0IHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuaW5wdXQtZ3JvdXAge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICB9XG5cbiAgICAgIC5jbG96ZS1pbnB1dCB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIHBhZGRpbmc6IDEwcHggMTVweDtcbiAgICAgICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtaW5wdXQ6Zm9jdXMge1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIC8qIFFBIFx1NTM2MVx1NzI0N1x1OEY5M1x1NTE2NSAqL1xuICAgICAgLnFhLWlucHV0LWFyZWEge1xuICAgICAgICBtYXJnaW46IDI1cHggMDtcbiAgICAgIH1cblxuICAgICAgLnFhLWlucHV0LWFyZWEgaDQge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5xYS1pbnB1dCB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBtaW4taGVpZ2h0OiAxMjBweDtcbiAgICAgICAgcGFkZGluZzogMTJweCAxNXB4O1xuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xuICAgICAgICByZXNpemU6IHZlcnRpY2FsO1xuICAgICAgICBsaW5lLWhlaWdodDogMS42O1xuICAgICAgfVxuXG4gICAgICAucWEtaW5wdXQ6Zm9jdXMge1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIC8qIFx1N0I1NFx1Njg0OFx1NUJGOVx1NkJENCAqL1xuICAgICAgLnF1ZXN0aW9uLXJldmlldyB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5LWFsdCk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgIH1cblxuICAgICAgLnF1ZXN0aW9uLXJldmlldyBoNCB7XG4gICAgICAgIG1hcmdpbjogMCAwIDEwcHggMDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAucmV2aWV3LXRleHQge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5mdWxsLXRleHQge1xuICAgICAgICBmb250LXNpemU6IDEuMmVtO1xuICAgICAgICBsaW5lLWhlaWdodDogMS42O1xuICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgIH1cblxuICAgICAgLmFuc3dlci1jb21wYXJpc29uIHtcbiAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnktYWx0KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgfVxuXG4gICAgICAuYW5zd2VyLWNvbXBhcmlzb24gaDQge1xuICAgICAgICBtYXJnaW46IDAgMCAxNXB4IDA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgIH1cblxuICAgICAgLmNvbXBhcmlzb24taXRlbSB7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgfVxuXG4gICAgICAudXNlci1hbnN3ZXIge1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBwYWRkaW5nOiAycHggNnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgICB9XG5cbiAgICAgIC51c2VyLWFuc3dlci5jb3JyZWN0IHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1zdWNjZXNzLCAjNGNhZjUwKSAhaW1wb3J0YW50O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQsIHdoaXRlKSAhaW1wb3J0YW50O1xuICAgICAgfVxuXG4gICAgICAudXNlci1hbnN3ZXIucGFydGlhbCB7XG4gICAgICAgIGJhY2tncm91bmQ6ICNGRkMwMDAgIWltcG9ydGFudDtcbiAgICAgICAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cbiAgICAgIC51c2VyLWFuc3dlci53cm9uZyB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItZXJyb3IsICNmNDQzMzYpICFpbXBvcnRhbnQ7XG4gICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xuICAgICAgfVxuXG4gICAgICAuY29ycmVjdC1hbnN3ZXIge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuc2ltaWxhcml0eS1pbmZvIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgICB9XG5cbiAgICAgIC8qIFFBIFx1NTM2MVx1NzI0N1x1NUJGOVx1NkJENFx1NjgzN1x1NUYwRiAqL1xuICAgICAgLnFhLWNvbXBhcmlzb24ge1xuICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgfVxuXG4gICAgICAucWEtdXNlci1hbnN3ZXIge1xuICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbiAgICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgICAgIH1cblxuICAgICAgLyogXHU3ODZFXHU0RkREUUFcdTUzNjFcdTcyNDdcdTc2ODRcdTc1MjhcdTYyMzdcdTdCNTRcdTY4NDhcdTRFNUZcdTgwRkRcdTZCNjNcdTc4NkVcdTY2M0VcdTc5M0FcdTk4OUNcdTgyNzIgLSBcdTRGN0ZcdTc1MjhcdTY3MDBcdTlBRDhcdTRGMThcdTUxNDhcdTdFQTcgKi9cbiAgICAgIC5xYS11c2VyLWFuc3dlci5jb3JyZWN0LFxuICAgICAgLnVzZXItYW5zd2VyLmNvcnJlY3QucWEtdXNlci1hbnN3ZXIsXG4gICAgICBkaXYucWEtdXNlci1hbnN3ZXIuY29ycmVjdCxcbiAgICAgIGRpdi51c2VyLWFuc3dlci5jb3JyZWN0LnFhLXVzZXItYW5zd2VyLFxuICAgICAgLmNvbXBhcmlzb24taXRlbSAucWEtdXNlci1hbnN3ZXIuY29ycmVjdCxcbiAgICAgIC5jb21wYXJpc29uLWl0ZW0gLnVzZXItYW5zd2VyLmNvcnJlY3QucWEtdXNlci1hbnN3ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLXN1Y2Nlc3MsICM0Y2FmNTApICFpbXBvcnRhbnQ7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM0Y2FmNTAgIWltcG9ydGFudDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50LCB3aGl0ZSkgIWltcG9ydGFudDtcbiAgICAgICAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cbiAgICAgIC5xYS11c2VyLWFuc3dlci5wYXJ0aWFsLFxuICAgICAgLnVzZXItYW5zd2VyLnBhcnRpYWwucWEtdXNlci1hbnN3ZXIsXG4gICAgICBkaXYucWEtdXNlci1hbnN3ZXIucGFydGlhbCxcbiAgICAgIGRpdi51c2VyLWFuc3dlci5wYXJ0aWFsLnFhLXVzZXItYW5zd2VyLFxuICAgICAgLmNvbXBhcmlzb24taXRlbSAucWEtdXNlci1hbnN3ZXIucGFydGlhbCxcbiAgICAgIC5jb21wYXJpc29uLWl0ZW0gLnVzZXItYW5zd2VyLnBhcnRpYWwucWEtdXNlci1hbnN3ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiAjRkZDMDAwICFpbXBvcnRhbnQ7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkMwMDAgIWltcG9ydGFudDtcbiAgICAgICAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cbiAgICAgIC5xYS11c2VyLWFuc3dlci53cm9uZyxcbiAgICAgIC51c2VyLWFuc3dlci53cm9uZy5xYS11c2VyLWFuc3dlcixcbiAgICAgIGRpdi5xYS11c2VyLWFuc3dlci53cm9uZyxcbiAgICAgIGRpdi51c2VyLWFuc3dlci53cm9uZy5xYS11c2VyLWFuc3dlcixcbiAgICAgIC5jb21wYXJpc29uLWl0ZW0gLnFhLXVzZXItYW5zd2VyLndyb25nLFxuICAgICAgLmNvbXBhcmlzb24taXRlbSAudXNlci1hbnN3ZXIud3JvbmcucWEtdXNlci1hbnN3ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yLCAjZjQ0MzM2KSAhaW1wb3J0YW50O1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjQ0MzM2ICFpbXBvcnRhbnQ7XG4gICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xuICAgICAgfVxuXG4gICAgICAucWEtY29ycmVjdC1hbnN3ZXIge1xuICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbiAgICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgICAgIH1cblxuICAgICAgLmNvcnJlY3QtYW5zd2VyLWxhYmVsIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMjBweCAhaW1wb3J0YW50O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4ICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cbiAgICAgIC5xYS1zaW1pbGFyaXR5IHtcbiAgICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTYzMDlcdTk0QUVcdTUzM0FcdTU3REYgKi9cbiAgICAgIC5idXR0b24tYXJlYSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogMTVweDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIG1hcmdpbi10b3A6IDMwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zaG93LWFuc3dlci1idG4ge1xuICAgICAgICBwYWRkaW5nOiAxMnB4IDQwcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gICAgICB9XG5cbiAgICAgIC5qdW1wLWJ0biwgLmp1bXAtYnRuLXNtYWxsIHtcbiAgICAgICAgcGFkZGluZzogMTBweCAyMHB4O1xuICAgICAgfVxuXG4gICAgICAuYWN0aW9uLWJ1dHRvbnMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIG1hcmdpbi10b3A6IDE1cHg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgfVxuXG4gICAgICAuZGVsZXRlLWJ0bi1zbWFsbCB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgIH1cblxuICAgICAgLmRlbGV0ZS1idG4tc21hbGw6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLyogXHU4QkM0XHU3RUE3XHU1MzNBXHU1N0RGICovXG4gICAgICAucmF0aW5nLWFyZWEge1xuICAgICAgICBtYXJnaW4tdG9wOiAzMHB4O1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbmctYXJlYSBoNCB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLnJhdGluZy1idXR0b25zIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiAxMnB4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgIH1cblxuICAgICAgLnJhdGluZy1idG4ge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBtYXgtd2lkdGg6IDE1MHB4O1xuICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLnJhdGluZy1idG46aG92ZXIge1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDEycHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLXJlZDpob3ZlciB7IFxuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItZXJyb3ItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLW9yYW5nZTpob3ZlciB7IFxuICAgICAgICBib3JkZXItY29sb3I6ICNGRkMwMDA7XG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAxOTIsIDAsIDAuMSk7XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbmctYmx1ZTpob3ZlciB7IFxuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLWdyZWVuOmhvdmVyIHsgXG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItZ3JlZW4pO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLXN1Y2Nlc3MtaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLWxhYmVsIHtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgZm9udC1zaXplOiAxLjFlbTtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLWludGVydmFsIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuICAgIGA7XG5cbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICB9XG59IiwgImltcG9ydCB7IEZsYXNoY2FyZCwgUmV2aWV3TG9nIH0gZnJvbSAnLi9GbGFzaGNhcmRNYW5hZ2VyJztcblxuZXhwb3J0IHR5cGUgUmV2aWV3RWFzZSA9ICdhZ2FpbicgfCAnaGFyZCcgfCAnZ29vZCcgfCAnZWFzeSc7XG5cbmV4cG9ydCBjbGFzcyBDYXJkU2NoZWR1bGVyIHtcbiAgLyoqXG4gICAqIFx1OEJBMVx1N0I5N1x1NEUwQlx1NkIyMVx1NTkwRFx1NEU2MFx1NjVGNlx1OTVGNFx1RkYwOFx1NTdGQVx1NEU4RSBTTS0yIFx1N0I5N1x1NkNENVx1RkYwOVxuICAgKi9cbiAgc2NoZWR1bGUoXG4gICAgY2FyZDogRmxhc2hjYXJkLFxuICAgIGVhc2U6IFJldmlld0Vhc2UsXG4gICAgdGltZVNwZW50OiBudW1iZXIsXG4gICAgdXNlckFuc3dlcj86IHN0cmluZyB8IHN0cmluZ1tdXG4gICk6IHtcbiAgICB1cGRhdGVkQ2FyZDogRmxhc2hjYXJkO1xuICAgIHJldmlld0xvZzogT21pdDxSZXZpZXdMb2csICdpZCc+O1xuICB9IHtcbiAgICBjb25zdCBvbGRTY2hlZHVsaW5nID0geyAuLi5jYXJkLnNjaGVkdWxpbmcgfTtcbiAgICBjb25zdCBuZXdTY2hlZHVsaW5nID0geyAuLi5jYXJkLnNjaGVkdWxpbmcgfTtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU3RURGXHU4QkExXG4gICAgY2FyZC5zdGF0cy50b3RhbFJldmlld3MrKztcbiAgICBjYXJkLnN0YXRzLmxhc3RSZXZpZXcgPSBub3c7XG5cbiAgICAvLyBcdThCQTFcdTdCOTdcdTVFNzNcdTU3NDdcdTY1RjZcdTk1RjRcbiAgICBjb25zdCB0b3RhbFRpbWUgPSBjYXJkLnN0YXRzLmF2ZXJhZ2VUaW1lICogKGNhcmQuc3RhdHMudG90YWxSZXZpZXdzIC0gMSkgKyB0aW1lU3BlbnQ7XG4gICAgY2FyZC5zdGF0cy5hdmVyYWdlVGltZSA9IHRvdGFsVGltZSAvIGNhcmQuc3RhdHMudG90YWxSZXZpZXdzO1xuXG4gICAgLy8gXHU2ODM5XHU2MzZFXHU5NkJFXHU1RUE2XHU4QkM0XHU3RUE3XHU2NkY0XHU2NUIwXHU4QzAzXHU1RUE2XG4gICAgc3dpdGNoIChlYXNlKSB7XG4gICAgICBjYXNlICdhZ2Fpbic6XG4gICAgICAgIHRoaXMuc2NoZWR1bGVBZ2FpbihuZXdTY2hlZHVsaW5nLCBjYXJkLnN0YXRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdoYXJkJzpcbiAgICAgICAgdGhpcy5zY2hlZHVsZUhhcmQobmV3U2NoZWR1bGluZywgY2FyZC5zdGF0cyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZ29vZCc6XG4gICAgICAgIHRoaXMuc2NoZWR1bGVHb29kKG5ld1NjaGVkdWxpbmcsIGNhcmQuc3RhdHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Vhc3knOlxuICAgICAgICB0aGlzLnNjaGVkdWxlRWFzeShuZXdTY2hlZHVsaW5nLCBjYXJkLnN0YXRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY2FyZC5zY2hlZHVsaW5nID0gbmV3U2NoZWR1bGluZztcbiAgICBjYXJkLm1ldGFkYXRhLnVwZGF0ZWRBdCA9IG5vdztcblxuICAgIC8vIFx1NTIxQlx1NUVGQVx1NTkwRFx1NEU2MFx1NjVFNVx1NUZEN1xuICAgIGNvbnN0IHJldmlld0xvZzogT21pdDxSZXZpZXdMb2csICdpZCc+ID0ge1xuICAgICAgZmxhc2hjYXJkSWQ6IGNhcmQuaWQsXG4gICAgICB0aW1lc3RhbXA6IG5vdyxcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIHVzZXJBbnN3ZXIsXG4gICAgICAgIHRpbWVTcGVudCxcbiAgICAgICAgZWFzZVxuICAgICAgfSxcbiAgICAgIHNjaGVkdWxpbmdDaGFuZ2U6IHtcbiAgICAgICAgb2xkSW50ZXJ2YWw6IG9sZFNjaGVkdWxpbmcuaW50ZXJ2YWwsXG4gICAgICAgIG5ld0ludGVydmFsOiBuZXdTY2hlZHVsaW5nLmludGVydmFsLFxuICAgICAgICBvbGRFYXNlOiBvbGRTY2hlZHVsaW5nLmVhc2UsXG4gICAgICAgIG5ld0Vhc2U6IG5ld1NjaGVkdWxpbmcuZWFzZVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4geyB1cGRhdGVkQ2FyZDogY2FyZCwgcmV2aWV3TG9nIH07XG4gIH1cblxuICAvKipcbiAgICogQWdhaW4gLSBcdTVCOENcdTUxNjhcdTVGRDhcdThCQjBcbiAgICovXG4gIHByaXZhdGUgc2NoZWR1bGVBZ2FpbihcbiAgICBzY2hlZHVsaW5nOiBGbGFzaGNhcmRbJ3NjaGVkdWxpbmcnXSxcbiAgICBzdGF0czogRmxhc2hjYXJkWydzdGF0cyddXG4gICkge1xuICAgIC8vIFx1OTFDRFx1N0Y2RVx1OTVGNFx1OTY5NFxuICAgIHNjaGVkdWxpbmcuaW50ZXJ2YWwgPSAxOyAvLyAxIFx1NTIwNlx1OTQ5RlxuICAgIHNjaGVkdWxpbmcuZWFzZSA9IE1hdGgubWF4KDEuMywgc2NoZWR1bGluZy5lYXNlIC0gMC4yKTtcbiAgICBzY2hlZHVsaW5nLmR1ZSA9IERhdGUubm93KCkgKyBzY2hlZHVsaW5nLmludGVydmFsICogNjAgKiAxMDAwO1xuICAgIHNjaGVkdWxpbmcubGFwc2VzKys7XG4gICAgc2NoZWR1bGluZy5yZXBzKys7XG4gICAgXG4gICAgLy8gXHU3MkI2XHU2MDAxXHU4RjZDXHU2MzYyXG4gICAgaWYgKHNjaGVkdWxpbmcuc3RhdGUgPT09ICduZXcnKSB7XG4gICAgICBzY2hlZHVsaW5nLnN0YXRlID0gJ2xlYXJuaW5nJztcbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdyZWxlYXJuaW5nJztcbiAgICB9XG5cbiAgICAvLyBcdTU4OUVcdTUyQTBcdTk2QkVcdTVFQTZcbiAgICBzdGF0cy5kaWZmaWN1bHR5ID0gTWF0aC5taW4oMS4wLCBzdGF0cy5kaWZmaWN1bHR5ICsgMC4xKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYXJkIC0gXHU1NkYwXHU5NkJFXG4gICAqL1xuICBwcml2YXRlIHNjaGVkdWxlSGFyZChcbiAgICBzY2hlZHVsaW5nOiBGbGFzaGNhcmRbJ3NjaGVkdWxpbmcnXSxcbiAgICBzdGF0czogRmxhc2hjYXJkWydzdGF0cyddXG4gICkge1xuICAgIHNjaGVkdWxpbmcucmVwcysrO1xuXG4gICAgaWYgKHNjaGVkdWxpbmcuc3RhdGUgPT09ICduZXcnIHx8IHNjaGVkdWxpbmcuc3RhdGUgPT09ICdsZWFybmluZycpIHtcbiAgICAgIC8vIFx1NUI2Nlx1NEU2MFx1OTYzNlx1NkJCNVx1RkYxQTEwIFx1NTIwNlx1OTQ5RlxuICAgICAgc2NoZWR1bGluZy5pbnRlcnZhbCA9IDEwO1xuICAgICAgc2NoZWR1bGluZy5kdWUgPSBEYXRlLm5vdygpICsgMTAgKiA2MCAqIDEwMDA7XG4gICAgICBzY2hlZHVsaW5nLnN0YXRlID0gJ2xlYXJuaW5nJztcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU1OTBEXHU0RTYwXHU5NjM2XHU2QkI1XHVGRjFBXHU1RjUzXHU1MjREXHU5NUY0XHU5Njk0ICogMS4yXG4gICAgICBzY2hlZHVsaW5nLmludGVydmFsID0gTWF0aC5tYXgoMSwgc2NoZWR1bGluZy5pbnRlcnZhbCAqIDEuMik7XG4gICAgICBzY2hlZHVsaW5nLmVhc2UgPSBNYXRoLm1heCgxLjMsIHNjaGVkdWxpbmcuZWFzZSAtIDAuMTUpO1xuICAgICAgc2NoZWR1bGluZy5kdWUgPSBEYXRlLm5vdygpICsgc2NoZWR1bGluZy5pbnRlcnZhbCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gICAgICBzY2hlZHVsaW5nLnN0YXRlID0gJ3Jldmlldyc7XG4gICAgfVxuXG4gICAgc3RhdHMuZGlmZmljdWx0eSA9IE1hdGgubWluKDEuMCwgc3RhdHMuZGlmZmljdWx0eSArIDAuMDUpO1xuICAgIHN0YXRzLmNvcnJlY3RDb3VudCArPSAwLjU7IC8vIFx1OTBFOFx1NTIwNlx1NkI2M1x1Nzg2RVxuICB9XG5cbiAgLyoqXG4gICAqIEdvb2QgLSBcdTZCNjNcdTc4NkVcbiAgICovXG4gIHByaXZhdGUgc2NoZWR1bGVHb29kKFxuICAgIHNjaGVkdWxpbmc6IEZsYXNoY2FyZFsnc2NoZWR1bGluZyddLFxuICAgIHN0YXRzOiBGbGFzaGNhcmRbJ3N0YXRzJ11cbiAgKSB7XG4gICAgc2NoZWR1bGluZy5yZXBzKys7XG4gICAgc3RhdHMuY29ycmVjdENvdW50Kys7XG5cbiAgICBpZiAoc2NoZWR1bGluZy5zdGF0ZSA9PT0gJ25ldycpIHtcbiAgICAgIC8vIFx1NjVCMFx1NTM2MVx1NzI0N1x1RkYxQTEgXHU1OTI5XG4gICAgICBzY2hlZHVsaW5nLmludGVydmFsID0gMTtcbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIDEgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdsZWFybmluZyc7XG4gICAgfSBlbHNlIGlmIChzY2hlZHVsaW5nLnN0YXRlID09PSAnbGVhcm5pbmcnKSB7XG4gICAgICAvLyBcdTVCNjZcdTRFNjBcdTRFMkRcdUZGMUFcdThGREJcdTUxNjVcdTU5MERcdTRFNjBcdUZGMENcdTk1RjRcdTk2OTRcdTY4MzlcdTYzNkVcdThCQjBcdTVGQzZcdTVGM0FcdTVFQTZcbiAgICAgIGlmIChzY2hlZHVsaW5nLmludGVydmFsIDwgMSkge1xuICAgICAgICBzY2hlZHVsaW5nLmludGVydmFsID0gMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNjaGVkdWxpbmcuaW50ZXJ2YWwgPSAzO1xuICAgICAgfVxuICAgICAgc2NoZWR1bGluZy5kdWUgPSBEYXRlLm5vdygpICsgc2NoZWR1bGluZy5pbnRlcnZhbCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gICAgICBzY2hlZHVsaW5nLnN0YXRlID0gJ3Jldmlldyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NTkwRFx1NEU2MFx1OTYzNlx1NkJCNVx1RkYxQVx1OTVGNFx1OTY5NCAqIGVhc2VcbiAgICAgIHNjaGVkdWxpbmcuaW50ZXJ2YWwgPSBzY2hlZHVsaW5nLmludGVydmFsICogc2NoZWR1bGluZy5lYXNlO1xuICAgICAgc2NoZWR1bGluZy5kdWUgPSBEYXRlLm5vdygpICsgc2NoZWR1bGluZy5pbnRlcnZhbCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gICAgICBzY2hlZHVsaW5nLmVhc2UgPSBzY2hlZHVsaW5nLmVhc2UgKyAwLjE7XG4gICAgICBzY2hlZHVsaW5nLnN0YXRlID0gJ3Jldmlldyc7XG4gICAgfVxuXG4gICAgLy8gXHU5NjREXHU0RjRFXHU5NkJFXHU1RUE2XG4gICAgc3RhdHMuZGlmZmljdWx0eSA9IE1hdGgubWF4KDAsIHN0YXRzLmRpZmZpY3VsdHkgLSAwLjA1KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFYXN5IC0gXHU5NzVFXHU1RTM4XHU3QjgwXHU1MzU1XG4gICAqL1xuICBwcml2YXRlIHNjaGVkdWxlRWFzeShcbiAgICBzY2hlZHVsaW5nOiBGbGFzaGNhcmRbJ3NjaGVkdWxpbmcnXSxcbiAgICBzdGF0czogRmxhc2hjYXJkWydzdGF0cyddXG4gICkge1xuICAgIHNjaGVkdWxpbmcucmVwcysrO1xuICAgIHN0YXRzLmNvcnJlY3RDb3VudCsrO1xuXG4gICAgaWYgKHNjaGVkdWxpbmcuc3RhdGUgPT09ICduZXcnKSB7XG4gICAgICAvLyBcdTY1QjBcdTUzNjFcdTcyNDdcdUZGMUFcdTc2RjRcdTYzQTUgNCBcdTU5MjlcbiAgICAgIHNjaGVkdWxpbmcuaW50ZXJ2YWwgPSA0O1xuICAgICAgc2NoZWR1bGluZy5kdWUgPSBEYXRlLm5vdygpICsgNCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gICAgICBzY2hlZHVsaW5nLnN0YXRlID0gJ3Jldmlldyc7XG4gICAgfSBlbHNlIGlmIChzY2hlZHVsaW5nLnN0YXRlID09PSAnbGVhcm5pbmcnKSB7XG4gICAgICAvLyBcdTVCNjZcdTRFNjBcdTRFMkRcdUZGMUFcdTc2RjRcdTYzQTVcdThGREJcdTUxNjVcdTU5MERcdTRFNjBcdUZGMEM3IFx1NTkyOVxuICAgICAgc2NoZWR1bGluZy5pbnRlcnZhbCA9IDc7XG4gICAgICBzY2hlZHVsaW5nLmR1ZSA9IERhdGUubm93KCkgKyA3ICogMjQgKiA2MCAqIDYwICogMTAwMDtcbiAgICAgIHNjaGVkdWxpbmcuc3RhdGUgPSAncmV2aWV3JztcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU1OTBEXHU0RTYwXHU5NjM2XHU2QkI1XHVGRjFBXHU5NUY0XHU5Njk0ICogKGVhc2UgKyAwLjMpXG4gICAgICBzY2hlZHVsaW5nLmludGVydmFsID0gc2NoZWR1bGluZy5pbnRlcnZhbCAqIChzY2hlZHVsaW5nLmVhc2UgKyAwLjMpO1xuICAgICAgc2NoZWR1bGluZy5kdWUgPSBEYXRlLm5vdygpICsgc2NoZWR1bGluZy5pbnRlcnZhbCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gICAgICBzY2hlZHVsaW5nLmVhc2UgPSBzY2hlZHVsaW5nLmVhc2UgKyAwLjE1O1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdyZXZpZXcnO1xuICAgIH1cblxuICAgIC8vIFx1NjYzRVx1ODQ1N1x1OTY0RFx1NEY0RVx1OTZCRVx1NUVBNlxuICAgIHN0YXRzLmRpZmZpY3VsdHkgPSBNYXRoLm1heCgwLCBzdGF0cy5kaWZmaWN1bHR5IC0gMC4xKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdThCQzRcdTRGMzBcdTc1MjhcdTYyMzdcdTdCNTRcdTY4NDhcdUZGMDhcdTc1MjhcdTRFOEVcdThGOTNcdTUxNjVcdTdCNTRcdTY4NDhcdTZBMjFcdTVGMEZcdUZGMDlcbiAgICovXG4gIGV2YWx1YXRlQW5zd2VyKFxuICAgIGNvcnJlY3RBbnN3ZXI6IHN0cmluZyB8IHN0cmluZ1tdLFxuICAgIHVzZXJBbnN3ZXI6IHN0cmluZyB8IHN0cmluZ1tdXG4gICk6IHtcbiAgICBjb3JyZWN0bmVzczogJ2NvcnJlY3QnIHwgJ3BhcnRpYWwnIHwgJ3dyb25nJztcbiAgICBzaW1pbGFyaXR5OiBudW1iZXI7XG4gIH0ge1xuICAgIC8vIFx1NTkwNFx1NzQwNlx1NjU3MFx1N0VDNFx1RkYwOFx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1RkYwOVxuICAgIGlmIChBcnJheS5pc0FycmF5KGNvcnJlY3RBbnN3ZXIpICYmIEFycmF5LmlzQXJyYXkodXNlckFuc3dlcikpIHtcbiAgICAgIGxldCBjb3JyZWN0Q291bnQgPSAwO1xuICAgICAgY29uc3QgdG90YWwgPSBjb3JyZWN0QW5zd2VyLmxlbmd0aDtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHNpbWlsYXJpdHkgPSB0aGlzLmNhbGN1bGF0ZVNpbWlsYXJpdHkoXG4gICAgICAgICAgdGhpcy5ub3JtYWxpemUoY29ycmVjdEFuc3dlcltpXSksXG4gICAgICAgICAgdGhpcy5ub3JtYWxpemUodXNlckFuc3dlcltpXSB8fCAnJylcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHNpbWlsYXJpdHkgPj0gMC45KSBjb3JyZWN0Q291bnQrKztcbiAgICAgICAgZWxzZSBpZiAoc2ltaWxhcml0eSA+PSAwLjYpIGNvcnJlY3RDb3VudCArPSAwLjU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG92ZXJhbGxTaW1pbGFyaXR5ID0gY29ycmVjdENvdW50IC8gdG90YWw7XG5cbiAgICAgIGlmIChvdmVyYWxsU2ltaWxhcml0eSA+PSAwLjkpIHtcbiAgICAgICAgcmV0dXJuIHsgY29ycmVjdG5lc3M6ICdjb3JyZWN0Jywgc2ltaWxhcml0eTogb3ZlcmFsbFNpbWlsYXJpdHkgfTtcbiAgICAgIH0gZWxzZSBpZiAob3ZlcmFsbFNpbWlsYXJpdHkgPj0gMC42KSB7XG4gICAgICAgIHJldHVybiB7IGNvcnJlY3RuZXNzOiAncGFydGlhbCcsIHNpbWlsYXJpdHk6IG92ZXJhbGxTaW1pbGFyaXR5IH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4geyBjb3JyZWN0bmVzczogJ3dyb25nJywgc2ltaWxhcml0eTogb3ZlcmFsbFNpbWlsYXJpdHkgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTU5MDRcdTc0MDZcdTVCNTdcdTdCMjZcdTRFMzJcbiAgICBjb25zdCBjb3JyZWN0ID0gdGhpcy5ub3JtYWxpemUoY29ycmVjdEFuc3dlciBhcyBzdHJpbmcpO1xuICAgIGNvbnN0IHVzZXIgPSB0aGlzLm5vcm1hbGl6ZSh1c2VyQW5zd2VyIGFzIHN0cmluZyk7XG5cbiAgICAvLyBcdTdBN0FcdTdCNTRcdTY4NDhcbiAgICBpZiAodXNlci5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB7IGNvcnJlY3RuZXNzOiAnd3JvbmcnLCBzaW1pbGFyaXR5OiAwIH07XG4gICAgfVxuXG4gICAgLy8gXHU5NTdGXHU1RUE2XHU1REVFXHU1RjAyXHU4RkM3XHU1OTI3XHU3NkY0XHU2M0E1XHU1MjI0XHU5NTE5XG4gICAgY29uc3QgbGVuZ3RoUmF0aW8gPSBNYXRoLm1pbih1c2VyLmxlbmd0aCwgY29ycmVjdC5sZW5ndGgpIC8gTWF0aC5tYXgodXNlci5sZW5ndGgsIGNvcnJlY3QubGVuZ3RoKTtcbiAgICBpZiAobGVuZ3RoUmF0aW8gPCAwLjMpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdBbnN3ZXIgZXZhbHVhdGlvbjogTGVuZ3RoIGRpZmZlcmVuY2UgdG9vIGxhcmdlJywge1xuICAgICAgICBjb3JyZWN0QW5zd2VyOiBjb3JyZWN0LFxuICAgICAgICB1c2VyQW5zd2VyOiB1c2VyLFxuICAgICAgICBsZW5ndGhSYXRpbyxcbiAgICAgICAgcmVzdWx0OiAnd3JvbmcnXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB7IGNvcnJlY3RuZXNzOiAnd3JvbmcnLCBzaW1pbGFyaXR5OiAwIH07XG4gICAgfVxuXG4gICAgY29uc3Qgc2ltaWxhcml0eSA9IHRoaXMuY2FsY3VsYXRlU2ltaWxhcml0eShjb3JyZWN0LCB1c2VyKTtcblxuICAgIGNvbnNvbGUubG9nKCdBbnN3ZXIgZXZhbHVhdGlvbjonLCB7XG4gICAgICBjb3JyZWN0QW5zd2VyOiBjb3JyZWN0LFxuICAgICAgdXNlckFuc3dlcjogdXNlcixcbiAgICAgIHNpbWlsYXJpdHksXG4gICAgICBsZW5ndGhSYXRpb1xuICAgIH0pO1xuXG4gICAgaWYgKHNpbWlsYXJpdHkgPj0gMC45KSB7XG4gICAgICByZXR1cm4geyBjb3JyZWN0bmVzczogJ2NvcnJlY3QnLCBzaW1pbGFyaXR5IH07XG4gICAgfSBlbHNlIGlmIChzaW1pbGFyaXR5ID49IDAuNykge1xuICAgICAgcmV0dXJuIHsgY29ycmVjdG5lc3M6ICdwYXJ0aWFsJywgc2ltaWxhcml0eSB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4geyBjb3JyZWN0bmVzczogJ3dyb25nJywgc2ltaWxhcml0eSB9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTY4MDdcdTUxQzZcdTUzMTZcdTY1ODdcdTY3MkNcbiAgICovXG4gIHByaXZhdGUgbm9ybWFsaXplKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRleHRcbiAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAudHJpbSgpXG4gICAgICAucmVwbGFjZSgvXFxzKy9nLCAnICcpICAgIC8vIFx1NTQwOFx1NUU3Nlx1NTkxQVx1NEUyQVx1N0E3QVx1NjgzQ1x1NEUzQVx1NEUwMFx1NEUyQVxuICAgICAgLnJlcGxhY2UoL1xcbisvZywgJyAnKSAgICAvLyBcdTYzNjJcdTg4NENcdTY2RkZcdTYzNjJcdTRFM0FcdTdBN0FcdTY4M0NcbiAgICAgIC5yZXBsYWNlKC9bXHVGRjBDXHUzMDAyXHVGRjAxXHVGRjFGXHUzMDAxXHVGRjFCXHVGRjFBXCJcIicnXHVGRjA4XHVGRjA5XHUzMDBBXHUzMDBCXHUzMDEwXHUzMDExXFwuLCE/OzpcIicoKVxcW1xcXXt9XS9nLCAnJyk7ICAvLyBcdTc5RkJcdTk2NjRcdTY4MDdcdTcwQjlcdTdCMjZcdTUzRjdcbiAgfVxuXG4gIC8qKlxuICAgKiBcdThCQTFcdTdCOTdcdTc2RjhcdTRGM0NcdTVFQTZcdUZGMDhMZXZlbnNodGVpbiBcdThERERcdTc5QkJcdUZGMDlcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlU2ltaWxhcml0eShzdHIxOiBzdHJpbmcsIHN0cjI6IHN0cmluZyk6IG51bWJlciB7XG4gICAgaWYgKHN0cjEgPT09IHN0cjIpIHJldHVybiAxO1xuICAgIGlmIChzdHIxLmxlbmd0aCA9PT0gMCB8fCBzdHIyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDA7XG5cbiAgICBjb25zdCBtYXRyaXg6IG51bWJlcltdW10gPSBbXTtcblxuICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1NzdFOVx1OTYzNVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHN0cjIubGVuZ3RoOyBpKyspIHtcbiAgICAgIG1hdHJpeFtpXSA9IFtpXTtcbiAgICB9XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPD0gc3RyMS5sZW5ndGg7IGorKykge1xuICAgICAgbWF0cml4WzBdW2pdID0gajtcbiAgICB9XG5cbiAgICAvLyBcdTU4NkJcdTUxNDVcdTc3RTlcdTk2MzVcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBzdHIyLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMTsgaiA8PSBzdHIxLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChzdHIyLmNoYXJBdChpIC0gMSkgPT09IHN0cjEuY2hhckF0KGogLSAxKSkge1xuICAgICAgICAgIG1hdHJpeFtpXVtqXSA9IG1hdHJpeFtpIC0gMV1baiAtIDFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1hdHJpeFtpXVtqXSA9IE1hdGgubWluKFxuICAgICAgICAgICAgbWF0cml4W2kgLSAxXVtqIC0gMV0gKyAxLCAvLyBcdTY2RkZcdTYzNjJcbiAgICAgICAgICAgIG1hdHJpeFtpXVtqIC0gMV0gKyAxLCAgICAgLy8gXHU2M0QyXHU1MTY1XG4gICAgICAgICAgICBtYXRyaXhbaSAtIDFdW2pdICsgMSAgICAgIC8vIFx1NTIyMFx1OTY2NFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBkaXN0YW5jZSA9IG1hdHJpeFtzdHIyLmxlbmd0aF1bc3RyMS5sZW5ndGhdO1xuICAgIGNvbnN0IG1heExlbmd0aCA9IE1hdGgubWF4KHN0cjEubGVuZ3RoLCBzdHIyLmxlbmd0aCk7XG4gICAgXG4gICAgcmV0dXJuIDEgLSBkaXN0YW5jZSAvIG1heExlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTY4MzlcdTYzNkVcdTc2RjhcdTRGM0NcdTVFQTZcdTVFRkFcdThCQUVcdTk2QkVcdTVFQTZcbiAgICovXG4gIHN1Z2dlc3RFYXNlKHNpbWlsYXJpdHk6IG51bWJlcik6IFJldmlld0Vhc2Uge1xuICAgIGlmIChzaW1pbGFyaXR5ID49IDAuOSkgcmV0dXJuICdlYXN5JztcbiAgICBpZiAoc2ltaWxhcml0eSA+PSAwLjgpIHJldHVybiAnZ29vZCc7XG4gICAgaWYgKHNpbWlsYXJpdHkgPj0gMC41KSByZXR1cm4gJ2hhcmQnO1xuICAgIHJldHVybiAnYWdhaW4nO1xuICB9XG59IiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBURmlsZSwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBBbmFseXRpY3NFbmdpbmUgfSBmcm9tICcuLi9jb3JlL0FuYWx5dGljc0VuZ2luZSc7XG5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfU1RBVFMgPSAnbGVhcm5pbmctc3lzdGVtLXN0YXRzJztcblxuZXhwb3J0IGNsYXNzIFN0YXRzVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbjtcbiAgcHJpdmF0ZSBhbmFseXRpY3M6IEFuYWx5dGljc0VuZ2luZTtcbiAgcHJpdmF0ZSBjdXJyZW50VGFiOiAnb3ZlcnZpZXcnIHwgJ3RyZW5kcycgfCAnZGVja3MnIHwgJ2RpZmZpY3VsdCcgPSAnb3ZlcnZpZXcnO1xuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4pIHtcbiAgICBzdXBlcihsZWFmKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLmFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3NFbmdpbmUocGx1Z2luKTtcbiAgfVxuXG4gIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFZJRVdfVFlQRV9TVEFUUztcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdMZWFybmluZyBTdGF0aXN0aWNzJztcbiAgfVxuXG4gIGdldEljb24oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ2Jhci1jaGFydCc7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgYXN5bmMgb25DbG9zZSgpIHt9XG5cbiAgcHJpdmF0ZSByZW5kZXIoKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBjb250YWluZXIuYWRkQ2xhc3MoJ3N0YXRzLWNvbnRhaW5lcicpO1xuXG4gICAgLy8gXHU2ODA3XHU5ODk4XHU2ODBGXG4gICAgY29uc3QgaGVhZGVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3N0YXRzLWhlYWRlcicgfSk7XG4gICAgaGVhZGVyLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1RDgzRFx1RENDQSBMZWFybmluZyBTdGF0aXN0aWNzJyB9KTtcblxuICAgIC8vIFx1NTIzN1x1NjVCMFx1NjMwOVx1OTRBRVxuICAgIGNvbnN0IHJlZnJlc2hCdG4gPSBoZWFkZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdcdTI3RjMnLFxuICAgICAgY2xzOiAncmVmcmVzaC1idG4nXG4gICAgfSk7XG4gICAgcmVmcmVzaEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMucmVuZGVyKCkpO1xuXG4gICAgLy8gXHU2ODA3XHU3QjdFXHU5ODc1XG4gICAgdGhpcy5yZW5kZXJUYWJzKGNvbnRhaW5lcik7XG5cbiAgICAvLyBcdTUxODVcdTVCQjlcdTUzM0FcdTU3REZcbiAgICBjb25zdCBjb250ZW50ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3N0YXRzLWNvbnRlbnQnIH0pO1xuXG4gICAgc3dpdGNoICh0aGlzLmN1cnJlbnRUYWIpIHtcbiAgICAgIGNhc2UgJ292ZXJ2aWV3JzpcbiAgICAgICAgdGhpcy5yZW5kZXJPdmVydmlldyhjb250ZW50KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0cmVuZHMnOlxuICAgICAgICB0aGlzLnJlbmRlclRyZW5kcyhjb250ZW50KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkZWNrcyc6XG4gICAgICAgIHRoaXMucmVuZGVyRGVja3MoY29udGVudCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZGlmZmljdWx0JzpcbiAgICAgICAgdGhpcy5yZW5kZXJEaWZmaWN1bHQoY29udGVudCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyVGFicyhjb250YWluZXI6IEVsZW1lbnQpIHtcbiAgICBjb25zdCB0YWJzID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3N0YXRzLXRhYnMnIH0pO1xuXG4gICAgY29uc3QgdGFiQ29uZmlncyA9IFtcbiAgICAgIHsgaWQ6ICdvdmVydmlldycsIGxhYmVsOiAnXHVEODNEXHVEQ0NBIE92ZXJ2aWV3JyB9LFxuICAgICAgeyBpZDogJ3RyZW5kcycsIGxhYmVsOiAnXHVEODNEXHVEQ0M4IFRyZW5kcycgfSxcbiAgICAgIHsgaWQ6ICdkZWNrcycsIGxhYmVsOiAnXHVEODNEXHVEQ0RBIERlY2tzJyB9LFxuICAgICAgeyBpZDogJ2RpZmZpY3VsdCcsIGxhYmVsOiAnXHUyNkEwXHVGRTBGIERpZmZpY3VsdCcgfVxuICAgIF07XG5cbiAgICB0YWJDb25maWdzLmZvckVhY2goY29uZmlnID0+IHtcbiAgICAgIGNvbnN0IHRhYiA9IHRhYnMuY3JlYXRlRGl2KHtcbiAgICAgICAgY2xzOiBgdGFiICR7dGhpcy5jdXJyZW50VGFiID09PSBjb25maWcuaWQgPyAnYWN0aXZlJyA6ICcnfWBcbiAgICAgIH0pO1xuICAgICAgdGFiLnRleHRDb250ZW50ID0gY29uZmlnLmxhYmVsO1xuICAgICAgdGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLmN1cnJlbnRUYWIgPSBjb25maWcuaWQgYXMgYW55O1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck92ZXJ2aWV3KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBzdGF0cyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0U3RhdHMoKTtcbiAgICBjb25zdCB7IHRoaXNXZWVrLCBsYXN0V2VlayB9ID0gdGhpcy5hbmFseXRpY3MuZ2V0V2Vla2x5U3RhdHMoKTtcbiAgICBjb25zdCBkYWlseVN0YXRzID0gdGhpcy5hbmFseXRpY3MuZ2V0RGFpbHlTdGF0cyg3KTtcblxuICAgIC8vIFx1NTE3M1x1OTUyRVx1NjMwN1x1NjgwN1x1NTM2MVx1NzI0N1xuICAgIGNvbnN0IG1ldHJpY3NHcmlkID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ21ldHJpY3MtZ3JpZCcgfSk7XG5cbiAgICB0aGlzLmNyZWF0ZU1ldHJpY0NhcmQobWV0cmljc0dyaWQsIHtcbiAgICAgIHRpdGxlOiAnVG90YWwgQ2FyZHMnLFxuICAgICAgdmFsdWU6IHN0YXRzLnRvdGFsLnRvU3RyaW5nKCksXG4gICAgICBpY29uOiAnXHVEODNDXHVEQ0NGJ1xuICAgIH0pO1xuXG4gICAgdGhpcy5jcmVhdGVNZXRyaWNDYXJkKG1ldHJpY3NHcmlkLCB7XG4gICAgICB0aXRsZTogJ0R1ZSBUb2RheScsXG4gICAgICB2YWx1ZTogc3RhdHMuZHVlLnRvU3RyaW5nKCksXG4gICAgICBpY29uOiAnXHVEODNEXHVEQ0M1J1xuICAgIH0pO1xuXG4gICAgdGhpcy5jcmVhdGVNZXRyaWNDYXJkKG1ldHJpY3NHcmlkLCB7XG4gICAgICB0aXRsZTogJ1Jldmlld2VkIFRvZGF5JyxcbiAgICAgIHZhbHVlOiBzdGF0cy5yZXZpZXdlZFRvZGF5LnRvU3RyaW5nKCksXG4gICAgICBpY29uOiAnXHUyNzA1J1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc3RyZWFrID0gdGhpcy5hbmFseXRpY3MuY2FsY3VsYXRlU3RyZWFrKCk7XG4gICAgdGhpcy5jcmVhdGVNZXRyaWNDYXJkKG1ldHJpY3NHcmlkLCB7XG4gICAgICB0aXRsZTogJ0N1cnJlbnQgU3RyZWFrJyxcbiAgICAgIHZhbHVlOiBgJHtzdHJlYWt9IGRheXNgLFxuICAgICAgaWNvbjogJ1x1RDgzRFx1REQyNSdcbiAgICB9KTtcblxuICAgIC8vIFx1NjcyQ1x1NTQ2OCB2cyBcdTRFMEFcdTU0NjhcbiAgICBjb25zdCB3ZWVrQ29tcGFyaXNvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd3ZWVrLWNvbXBhcmlzb24nIH0pO1xuICAgIHdlZWtDb21wYXJpc29uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1RoaXMgV2VlayB2cyBMYXN0IFdlZWsnIH0pO1xuXG4gICAgY29uc3QgY29tcGFyaXNvbkdyaWQgPSB3ZWVrQ29tcGFyaXNvbi5jcmVhdGVEaXYoeyBjbHM6ICdjb21wYXJpc29uLWdyaWQnIH0pO1xuXG4gICAgY29uc3QgcmV2aWV3Q2hhbmdlID0gdGhpc1dlZWsudG90YWxSZXZpZXdzIC0gbGFzdFdlZWsudG90YWxSZXZpZXdzO1xuICAgIGNvbnN0IHJldmlld0NoYW5nZVBlcmNlbnQgPSBsYXN0V2Vlay50b3RhbFJldmlld3MgPiAwXG4gICAgICA/ICgocmV2aWV3Q2hhbmdlIC8gbGFzdFdlZWsudG90YWxSZXZpZXdzKSAqIDEwMCkudG9GaXhlZCgxKVxuICAgICAgOiAnMCc7XG5cbiAgICB0aGlzLmNyZWF0ZUNvbXBhcmlzb25JdGVtKGNvbXBhcmlzb25HcmlkLCB7XG4gICAgICBsYWJlbDogJ1Jldmlld3MnLFxuICAgICAgdGhpc1dlZWs6IHRoaXNXZWVrLnRvdGFsUmV2aWV3cyxcbiAgICAgIGxhc3RXZWVrOiBsYXN0V2Vlay50b3RhbFJldmlld3MsXG4gICAgICBjaGFuZ2U6IHJldmlld0NoYW5nZSxcbiAgICAgIGNoYW5nZVBlcmNlbnQ6IHJldmlld0NoYW5nZVBlcmNlbnRcbiAgICB9KTtcblxuICAgIGNvbnN0IHJhdGVDaGFuZ2UgPSAodGhpc1dlZWsuYXZlcmFnZUNvcnJlY3RSYXRlIC0gbGFzdFdlZWsuYXZlcmFnZUNvcnJlY3RSYXRlKSAqIDEwMDtcbiAgICB0aGlzLmNyZWF0ZUNvbXBhcmlzb25JdGVtKGNvbXBhcmlzb25HcmlkLCB7XG4gICAgICBsYWJlbDogJ0NvcnJlY3QgUmF0ZScsXG4gICAgICB0aGlzV2VlazogYCR7KHRoaXNXZWVrLmF2ZXJhZ2VDb3JyZWN0UmF0ZSAqIDEwMCkudG9GaXhlZCgxKX0lYCxcbiAgICAgIGxhc3RXZWVrOiBgJHsobGFzdFdlZWsuYXZlcmFnZUNvcnJlY3RSYXRlICogMTAwKS50b0ZpeGVkKDEpfSVgLFxuICAgICAgY2hhbmdlOiByYXRlQ2hhbmdlLFxuICAgICAgY2hhbmdlUGVyY2VudDogcmF0ZUNoYW5nZS50b0ZpeGVkKDEpXG4gICAgfSk7XG5cbiAgICAvLyBcdTY3MDBcdThGRDE3XHU1OTI5XHU2RDNCXHU1MkE4XG4gICAgY29uc3QgcmVjZW50QWN0aXZpdHkgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncmVjZW50LWFjdGl2aXR5JyB9KTtcbiAgICByZWNlbnRBY3Rpdml0eS5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdMYXN0IDcgRGF5cyBBY3Rpdml0eScgfSk7XG5cbiAgICBjb25zdCBhY3Rpdml0eUNoYXJ0ID0gcmVjZW50QWN0aXZpdHkuY3JlYXRlRGl2KHsgY2xzOiAnYWN0aXZpdHktY2hhcnQnIH0pO1xuICAgIHRoaXMucmVuZGVyU2ltcGxlQmFyQ2hhcnQoYWN0aXZpdHlDaGFydCwgZGFpbHlTdGF0cyk7XG5cbiAgICAvLyBcdTc1MUZcdTYyMTBcdTYyQTVcdTU0NEFcdTYzMDlcdTk0QUVcbiAgICBjb25zdCByZXBvcnRTZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3JlcG9ydC1zZWN0aW9uJyB9KTtcbiAgICBjb25zdCByZXBvcnRCdG4gPSByZXBvcnRTZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnXHVEODNEXHVEQ0M0IEdlbmVyYXRlIEZ1bGwgUmVwb3J0JyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgLy8gcmVwb3J0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5nZW5lcmF0ZUFuZFNob3dSZXBvcnQoKSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclRyZW5kcyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1BlcmZvcm1hbmNlIFRyZW5kcycgfSk7XG5cbiAgICBjb25zdCBkYWlseVN0YXRzID0gdGhpcy5hbmFseXRpY3MuZ2V0RGFpbHlTdGF0cygzMCk7XG5cbiAgICAvLyBcdTZCNjNcdTc4NkVcdTczODdcdThEOEJcdTUyQkZcbiAgICBjb25zdCBjb3JyZWN0UmF0ZVNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2hhcnQtc2VjdGlvbicgfSk7XG4gICAgY29ycmVjdFJhdGVTZWN0aW9uLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0NvcnJlY3QgUmF0ZSAoTGFzdCAzMCBEYXlzKScgfSk7XG4gICAgY29uc3QgY29ycmVjdFJhdGVDaGFydCA9IGNvcnJlY3RSYXRlU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICdsaW5lLWNoYXJ0JyB9KTtcbiAgICB0aGlzLnJlbmRlckxpbmVDaGFydChjb3JyZWN0UmF0ZUNoYXJ0LCBkYWlseVN0YXRzLCAnY29ycmVjdFJhdGUnKTtcblxuICAgIC8vIFx1NkJDRlx1NjVFNVx1NTkwRFx1NEU2MFx1OTFDRlxuICAgIGNvbnN0IHJldmlld3NTZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NoYXJ0LXNlY3Rpb24nIH0pO1xuICAgIHJldmlld3NTZWN0aW9uLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0RhaWx5IFJldmlld3MnIH0pO1xuICAgIGNvbnN0IHJldmlld3NDaGFydCA9IHJldmlld3NTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ2Jhci1jaGFydCcgfSk7XG4gICAgdGhpcy5yZW5kZXJCYXJDaGFydChyZXZpZXdzQ2hhcnQsIGRhaWx5U3RhdHMpO1xuXG4gICAgLy8gXHU3MEVEXHU1MjlCXHU1NkZFXG4gICAgY29uc3QgaGVhdG1hcFNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2hhcnQtc2VjdGlvbicgfSk7XG4gICAgaGVhdG1hcFNlY3Rpb24uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnU3R1ZHkgQWN0aXZpdHkgQ2FsZW5kYXInIH0pO1xuICAgIGNvbnN0IGhlYXRtYXAgPSBoZWF0bWFwU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICdoZWF0bWFwJyB9KTtcbiAgICB0aGlzLnJlbmRlckhlYXRtYXAoaGVhdG1hcCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckRlY2tzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnRGVjayBTdGF0aXN0aWNzJyB9KTtcblxuICAgIGNvbnN0IGRlY2tTdGF0cyA9IHRoaXMuYW5hbHl0aWNzLmdldERlY2tTdGF0cygpO1xuXG4gICAgaWYgKGRlY2tTdGF0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnRhaW5lci5jcmVhdGVEaXYoeyBcbiAgICAgICAgdGV4dDogJ05vIGRlY2tzIHlldC4gQ3JlYXRlIHNvbWUgZmxhc2hjYXJkcyB0byBzZWUgZGVjayBzdGF0aXN0aWNzIScsXG4gICAgICAgIGNsczogJ2VtcHR5LW1lc3NhZ2UnXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBkZWNrc0dyaWQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZGVja3MtZ3JpZCcgfSk7XG5cbiAgICBkZWNrU3RhdHMuZm9yRWFjaChkZWNrID0+IHtcbiAgICAgIGNvbnN0IGRlY2tDYXJkID0gZGVja3NHcmlkLmNyZWF0ZURpdih7IGNsczogJ2RlY2stY2FyZCcgfSk7XG5cbiAgICAgIGNvbnN0IGhlYWRlciA9IGRlY2tDYXJkLmNyZWF0ZURpdih7IGNsczogJ2RlY2stY2FyZC1oZWFkZXInIH0pO1xuICAgICAgaGVhZGVyLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogZGVjay5kZWNrTmFtZSB9KTtcbiAgICAgIFxuICAgICAgaGVhZGVyLmNyZWF0ZVNwYW4oe1xuICAgICAgICB0ZXh0OiBgJHtkZWNrLnRvdGFsQ2FyZHN9IGNhcmRzYCxcbiAgICAgICAgY2xzOiAnZGVjay1iYWRnZSdcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBzdGF0cyA9IGRlY2tDYXJkLmNyZWF0ZURpdih7IGNsczogJ2RlY2stY2FyZC1zdGF0cycgfSk7XG5cbiAgICAgIHRoaXMuY3JlYXRlU3RhdFJvdyhzdGF0cywgJ0R1ZScsIGRlY2suZHVlQ2FyZHMudG9TdHJpbmcoKSwgJ1x1RDgzRFx1RENDNScpO1xuICAgICAgdGhpcy5jcmVhdGVTdGF0Um93KHN0YXRzLCAnTmV3JywgZGVjay5uZXdDYXJkcy50b1N0cmluZygpLCAnXHVEODNDXHVERDk1Jyk7XG4gICAgICB0aGlzLmNyZWF0ZVN0YXRSb3coXG4gICAgICAgIHN0YXRzLCBcbiAgICAgICAgJ0NvcnJlY3QgUmF0ZScsIFxuICAgICAgICBgJHsoZGVjay5jb3JyZWN0UmF0ZSAqIDEwMCkudG9GaXhlZCgxKX0lYCxcbiAgICAgICAgJ1x1MjcwNSdcbiAgICAgICk7XG4gICAgICB0aGlzLmNyZWF0ZVN0YXRSb3coXG4gICAgICAgIHN0YXRzLFxuICAgICAgICAnQXZnIEludGVydmFsJyxcbiAgICAgICAgYCR7ZGVjay5hdmVyYWdlSW50ZXJ2YWwudG9GaXhlZCgxKX0gZGF5c2AsXG4gICAgICAgICdcdUQ4M0RcdURDQ0EnXG4gICAgICApO1xuXG4gICAgICAvLyBcdThGREJcdTVFQTZcdTY3NjFcbiAgICAgIGNvbnN0IHByb2dyZXNzID0gZGVja0NhcmQuY3JlYXRlRGl2KHsgY2xzOiAnZGVjay1wcm9ncmVzcycgfSk7XG4gICAgICBjb25zdCBtYXN0ZXJlZENvdW50ID0gZGVjay50b3RhbENhcmRzIC0gZGVjay5kdWVDYXJkcyAtIGRlY2submV3Q2FyZHM7XG4gICAgICBjb25zdCBtYXN0ZXJlZFBlcmNlbnQgPSAobWFzdGVyZWRDb3VudCAvIGRlY2sudG90YWxDYXJkcykgKiAxMDA7XG4gICAgICBcbiAgICAgIGNvbnN0IHByb2dyZXNzQmFyID0gcHJvZ3Jlc3MuY3JlYXRlRGl2KHsgY2xzOiAncHJvZ3Jlc3MtYmFyLWNvbnRhaW5lcicgfSk7XG4gICAgICBjb25zdCBiYXIgPSBwcm9ncmVzc0Jhci5jcmVhdGVEaXYoeyBjbHM6ICdwcm9ncmVzcy1iYXItZmlsbCcgfSk7XG4gICAgICBiYXIuc3R5bGUud2lkdGggPSBgJHttYXN0ZXJlZFBlcmNlbnR9JWA7XG4gICAgICBcbiAgICAgIHByb2dyZXNzLmNyZWF0ZURpdih7XG4gICAgICAgIHRleHQ6IGAke21hc3RlcmVkUGVyY2VudC50b0ZpeGVkKDApfSUgbWFzdGVyZWRgLFxuICAgICAgICBjbHM6ICdwcm9ncmVzcy1sYWJlbCdcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJEaWZmaWN1bHQoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDYXJkcyBOZWVkaW5nIEF0dGVudGlvbicgfSk7XG5cbiAgICBjb25zdCBkaWZmaWN1bHRDYXJkcyA9IHRoaXMuYW5hbHl0aWNzLmdldERpZmZpY3VsdENhcmRzKDEwKTtcblxuICAgIGlmIChkaWZmaWN1bHRDYXJkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnRhaW5lci5jcmVhdGVEaXYoe1xuICAgICAgICB0ZXh0OiAnXHVEODNDXHVERjg5IE5vIGRpZmZpY3VsdCBjYXJkcyEgR3JlYXQgam9iIScsXG4gICAgICAgIGNsczogJ2VtcHR5LW1lc3NhZ2UnXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjYXJkc0xpc3QgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZGlmZmljdWx0LWNhcmRzLWxpc3QnIH0pO1xuXG4gICAgZGlmZmljdWx0Q2FyZHMuZm9yRWFjaCgoZGMsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBjYXJkSXRlbSA9IGNhcmRzTGlzdC5jcmVhdGVEaXYoeyBjbHM6ICdkaWZmaWN1bHQtY2FyZC1pdGVtJyB9KTtcblxuICAgICAgY29uc3QgcmFuayA9IGNhcmRJdGVtLmNyZWF0ZURpdih7IGNsczogJ2NhcmQtcmFuaycgfSk7XG4gICAgICByYW5rLnRleHRDb250ZW50ID0gYCR7aW5kZXggKyAxfWA7XG5cbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkSXRlbS5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLWNvbnRlbnQnIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBxdWVzdGlvbiA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1xdWVzdGlvbicgfSk7XG4gICAgICBxdWVzdGlvbi50ZXh0Q29udGVudCA9IGRjLmNhcmQuZnJvbnQuc3Vic3RyaW5nKDAsIDgwKSArIFxuICAgICAgICAoZGMuY2FyZC5mcm9udC5sZW5ndGggPiA4MCA/ICcuLi4nIDogJycpO1xuXG4gICAgICBjb25zdCBtZXRhID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLW1ldGEnIH0pO1xuXG4gICAgICBjb25zdCBwYXR0ZXJuRW1vamk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAgICdjb25jZXB0JzogJ1x1RDgzRVx1RERFMCcsXG4gICAgICAgICdtZW1vcnknOiAnXHVEODNEXHVEQ0FEJyxcbiAgICAgICAgJ2NhbGN1bGF0aW9uJzogJ1x1RDgzRFx1REQyMicsXG4gICAgICAgICd1bmtub3duJzogJ1x1Mjc1MydcbiAgICAgIH07XG5cbiAgICAgIG1ldGEuY3JlYXRlU3Bhbih7XG4gICAgICAgIHRleHQ6IGAke3BhdHRlcm5FbW9qaVtkYy5wYXR0ZXJuXX0gJHtkYy5wYXR0ZXJufWAsXG4gICAgICAgIGNsczogJ3BhdHRlcm4tYmFkZ2UnXG4gICAgICB9KTtcblxuICAgICAgbWV0YS5jcmVhdGVTcGFuKHtcbiAgICAgICAgdGV4dDogYCR7ZGMuZXJyb3JDb3VudH0gZXJyb3JzYCxcbiAgICAgICAgY2xzOiAnZXJyb3ItY291bnQnXG4gICAgICB9KTtcblxuICAgICAgbWV0YS5jcmVhdGVTcGFuKHtcbiAgICAgICAgdGV4dDogYCR7ZGMuYXZlcmFnZVRpbWUudG9GaXhlZCgxKX1zIGF2Z2AsXG4gICAgICAgIGNsczogJ2F2Zy10aW1lJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFx1OTZCRVx1NUVBNlx1Njc2MVxuICAgICAgY29uc3QgZGlmZmljdWx0eUJhciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnZGlmZmljdWx0eS1iYXItY29udGFpbmVyJyB9KTtcbiAgICAgIGNvbnN0IGRpZmZCYXIgPSBkaWZmaWN1bHR5QmFyLmNyZWF0ZURpdih7IGNsczogJ2RpZmZpY3VsdHktYmFyJyB9KTtcbiAgICAgIGRpZmZCYXIuc3R5bGUud2lkdGggPSBgJHtkYy5jYXJkLnN0YXRzLmRpZmZpY3VsdHkgKiAxMDB9JWA7XG5cbiAgICAgIC8vIFx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVxuICAgICAgY29uc3QgYWN0aW9ucyA9IGNhcmRJdGVtLmNyZWF0ZURpdih7IGNsczogJ2NhcmQtYWN0aW9ucycgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGp1bXBCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIHRleHQ6ICdcdTIxOTcnLFxuICAgICAgICBjbHM6ICdhY3Rpb24tYnRuLXNtYWxsJ1xuICAgICAgfSk7XG4gICAgICBqdW1wQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5qdW1wVG9DYXJkKGRjLmNhcmQpKTtcblxuICAgICAgY29uc3QgcmV2aWV3QnRuID0gYWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICB0ZXh0OiAnXHVEODNEXHVERDA0JyxcbiAgICAgICAgY2xzOiAnYWN0aW9uLWJ0bi1zbWFsbCdcbiAgICAgIH0pO1xuICAgICAgcmV2aWV3QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLnBsdWdpbi5hY3RpdmF0ZVJldmlldygpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogJ1x1RDgzRFx1REREMVx1RkUwRicsXG4gICAgICAgIGNsczogJ2FjdGlvbi1idG4tc21hbGwgZGVsZXRlLWJ0bidcbiAgICAgIH0pO1xuICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoY29uZmlybSgnXHU3ODZFXHU1QjlBXHU4OTgxXHU1MjIwXHU5NjY0XHU4RkQ5XHU1RjIwXHU5NUVBXHU1MzYxXHU1NDE3XHVGRjFGJykpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZUZsYXNoY2FyZChkYy5jYXJkLmlkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZU1ldHJpY0NhcmQoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICBjb25maWc6IHsgdGl0bGU6IHN0cmluZzsgdmFsdWU6IHN0cmluZzsgaWNvbjogc3RyaW5nIH1cbiAgKSB7XG4gICAgY29uc3QgY2FyZCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdtZXRyaWMtY2FyZCcgfSk7XG4gICAgXG4gICAgY2FyZC5jcmVhdGVEaXYoeyB0ZXh0OiBjb25maWcuaWNvbiwgY2xzOiAnbWV0cmljLWljb24nIH0pO1xuICAgIFxuICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ21ldHJpYy1jb250ZW50JyB9KTtcbiAgICBjb250ZW50LmNyZWF0ZURpdih7IHRleHQ6IGNvbmZpZy50aXRsZSwgY2xzOiAnbWV0cmljLXRpdGxlJyB9KTtcbiAgICBjb250ZW50LmNyZWF0ZURpdih7IHRleHQ6IGNvbmZpZy52YWx1ZSwgY2xzOiAnbWV0cmljLXZhbHVlJyB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlQ29tcGFyaXNvbkl0ZW0oXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICBjb25maWc6IHtcbiAgICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgICB0aGlzV2VlazogbnVtYmVyIHwgc3RyaW5nO1xuICAgICAgbGFzdFdlZWs6IG51bWJlciB8IHN0cmluZztcbiAgICAgIGNoYW5nZTogbnVtYmVyO1xuICAgICAgY2hhbmdlUGVyY2VudDogc3RyaW5nO1xuICAgIH1cbiAgKSB7XG4gICAgY29uc3QgaXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjb21wYXJpc29uLWl0ZW0nIH0pO1xuICAgIFxuICAgIGl0ZW0uY3JlYXRlRGl2KHsgdGV4dDogY29uZmlnLmxhYmVsLCBjbHM6ICdjb21wYXJpc29uLWxhYmVsJyB9KTtcbiAgICBcbiAgICBjb25zdCB2YWx1ZXMgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogJ2NvbXBhcmlzb24tdmFsdWVzJyB9KTtcbiAgICB2YWx1ZXMuY3JlYXRlU3Bhbih7IFxuICAgICAgdGV4dDogYCR7Y29uZmlnLnRoaXNXZWVrfWAsXG4gICAgICBjbHM6ICd0aGlzLXdlZWsnXG4gICAgfSk7XG4gICAgdmFsdWVzLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnIHZzICcsIGNsczogJ3ZzJyB9KTtcbiAgICB2YWx1ZXMuY3JlYXRlU3Bhbih7XG4gICAgICB0ZXh0OiBgJHtjb25maWcubGFzdFdlZWt9YCxcbiAgICAgIGNsczogJ2xhc3Qtd2VlaydcbiAgICB9KTtcblxuICAgIGNvbnN0IGNoYW5nZUNsYXNzID0gY29uZmlnLmNoYW5nZSA+IDAgPyAncG9zaXRpdmUnIDogY29uZmlnLmNoYW5nZSA8IDAgPyAnbmVnYXRpdmUnIDogJ25ldXRyYWwnO1xuICAgIGNvbnN0IGNoYW5nZUljb24gPSBjb25maWcuY2hhbmdlID4gMCA/ICdcdTIxOTcnIDogY29uZmlnLmNoYW5nZSA8IDAgPyAnXHUyMTk4JyA6ICdcdTIxOTInO1xuICAgIFxuICAgIGl0ZW0uY3JlYXRlRGl2KHtcbiAgICAgIHRleHQ6IGAke2NoYW5nZUljb259ICR7Y29uZmlnLmNoYW5nZVBlcmNlbnR9JWAsXG4gICAgICBjbHM6IGBjaGFuZ2UgJHtjaGFuZ2VDbGFzc31gXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVN0YXRSb3coXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICBsYWJlbDogc3RyaW5nLFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgaWNvbjogc3RyaW5nXG4gICkge1xuICAgIGNvbnN0IHJvdyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzdGF0LXJvdycgfSk7XG4gICAgcm93LmNyZWF0ZVNwYW4oeyB0ZXh0OiBpY29uLCBjbHM6ICdzdGF0LWljb24nIH0pO1xuICAgIHJvdy5jcmVhdGVTcGFuKHsgdGV4dDogbGFiZWwsIGNsczogJ3N0YXQtbGFiZWwnIH0pO1xuICAgIHJvdy5jcmVhdGVTcGFuKHsgdGV4dDogdmFsdWUsIGNsczogJ3N0YXQtdmFsdWUnIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTaW1wbGVCYXJDaGFydChjb250YWluZXI6IEhUTUxFbGVtZW50LCBkYXRhOiBhbnlbXSkge1xuICAgIGNvbnN0IG1heFZhbHVlID0gTWF0aC5tYXgoLi4uZGF0YS5tYXAoZCA9PiBkLnJldmlld2VkKSk7XG5cbiAgICBkYXRhLmZvckVhY2goc3RhdCA9PiB7XG4gICAgICBjb25zdCBiYXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc2ltcGxlLWJhcicgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShzdGF0LmRhdGUpO1xuICAgICAgY29uc3QgZGF5TmFtZSA9IGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIHsgd2Vla2RheTogJ3Nob3J0JyB9KTtcbiAgICAgIFxuICAgICAgYmFyLmNyZWF0ZURpdih7IHRleHQ6IGRheU5hbWUsIGNsczogJ2Jhci1sYWJlbCcgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGJhckNvbnRhaW5lciA9IGJhci5jcmVhdGVEaXYoeyBjbHM6ICdiYXItY29udGFpbmVyJyB9KTtcbiAgICAgIGNvbnN0IGJhckZpbGwgPSBiYXJDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnYmFyLWZpbGwnIH0pO1xuICAgICAgY29uc3QgaGVpZ2h0ID0gbWF4VmFsdWUgPiAwID8gKHN0YXQucmV2aWV3ZWQgLyBtYXhWYWx1ZSkgKiAxMDAgOiAwO1xuICAgICAgYmFyRmlsbC5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9JWA7XG4gICAgICBcbiAgICAgIGJhci5jcmVhdGVEaXYoeyB0ZXh0OiBzdGF0LnJldmlld2VkLnRvU3RyaW5nKCksIGNsczogJ2Jhci12YWx1ZScgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckJhckNoYXJ0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGRhdGE6IGFueVtdKSB7XG4gICAgY29uc3QgY2hhcnQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2hhcnQtY2FudmFzJyB9KTtcbiAgICBjb25zdCBtYXhWYWx1ZSA9IE1hdGgubWF4KC4uLmRhdGEubWFwKGQgPT4gZC5yZXZpZXdlZCkpO1xuXG4gICAgZGF0YS5mb3JFYWNoKHN0YXQgPT4ge1xuICAgICAgY29uc3QgYmFyR3JvdXAgPSBjaGFydC5jcmVhdGVEaXYoeyBjbHM6ICdiYXItZ3JvdXAnIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBiYXJDb250YWluZXIgPSBiYXJHcm91cC5jcmVhdGVEaXYoeyBjbHM6ICdiYXInIH0pO1xuICAgICAgY29uc3QgaGVpZ2h0ID0gbWF4VmFsdWUgPiAwID8gKHN0YXQucmV2aWV3ZWQgLyBtYXhWYWx1ZSkgKiAxMDAgOiAwO1xuICAgICAgYmFyQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH0lYDtcbiAgICAgIGJhckNvbnRhaW5lci50aXRsZSA9IGAke3N0YXQucmV2aWV3ZWR9IHJldmlld3NgO1xuICAgICAgXG4gICAgICBjb25zdCBiYXJMYWJlbCA9IGJhckdyb3VwLmNyZWF0ZURpdih7IGNsczogJ2Jhci1sYWJlbCcgfSk7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoc3RhdC5kYXRlKTtcbiAgICAgIGJhckxhYmVsLnRleHRDb250ZW50ID0gZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTGluZUNoYXJ0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGRhdGE6IGFueVtdLCBrZXk6IHN0cmluZykge1xuICAgIGNvbnN0IGNoYXJ0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2xpbmUtY2hhcnQtY2FudmFzJyB9KTtcbiAgICBcbiAgICBjb25zdCBwb2ludHMgPSBkYXRhLm1hcCgoc3RhdCwgaSkgPT4ge1xuICAgICAgY29uc3QgeCA9IChpIC8gKGRhdGEubGVuZ3RoIC0gMSkpICogMTAwO1xuICAgICAgY29uc3QgeSA9IDEwMCAtIChzdGF0W2tleV0gKiAxMDApO1xuICAgICAgcmV0dXJuIHsgeCwgeSwgdmFsdWU6IHN0YXRba2V5XSB9O1xuICAgIH0pO1xuXG4gICAgLy8gXHU1MjFCXHU1RUZBU1ZHXG4gICAgY29uc3Qgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdzdmcnKTtcbiAgICBzdmcuc2V0QXR0cmlidXRlKCd2aWV3Qm94JywgJzAgMCAxMDAgMTAwJyk7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZSgncHJlc2VydmVBc3BlY3RSYXRpbycsICdub25lJyk7XG4gICAgc3ZnLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHN2Zy5zdHlsZS5oZWlnaHQgPSAnMjAwcHgnO1xuXG4gICAgLy8gXHU1MjFCXHU1RUZBXHU2Mjk4XHU3RUJGXHU4REVGXHU1Rjg0XG4gICAgY29uc3QgcGF0aERhdGEgPSBwb2ludHMubWFwKChwLCBpKSA9PiBcbiAgICAgIGAke2kgPT09IDAgPyAnTScgOiAnTCd9ICR7cC54fSAke3AueX1gXG4gICAgKS5qb2luKCcgJyk7XG5cbiAgICBjb25zdCBwYXRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XG4gICAgcGF0aC5zZXRBdHRyaWJ1dGUoJ2QnLCBwYXRoRGF0YSk7XG4gICAgcGF0aC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnbm9uZScpO1xuICAgIHBhdGguc2V0QXR0cmlidXRlKCdzdHJva2UnLCAndmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KScpO1xuICAgIHBhdGguc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xuXG4gICAgc3ZnLmFwcGVuZENoaWxkKHBhdGgpO1xuICAgIGNoYXJ0LmFwcGVuZENoaWxkKHN2Zyk7XG5cbiAgICAvLyBcdTZERkJcdTUyQTBcdTUwM0NcdTY4MDdcdTdCN0VcbiAgICBjb25zdCBsYWJlbHNDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2hhcnQtbGFiZWxzJyB9KTtcbiAgICBkYXRhLmZvckVhY2goKHN0YXQsIGkpID0+IHtcbiAgICAgIGlmIChpICUgTWF0aC5jZWlsKGRhdGEubGVuZ3RoIC8gNykgPT09IDApIHtcbiAgICAgICAgY29uc3QgY2hhcnRMYWJlbCA9IGxhYmVsc0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjaGFydC1sYWJlbCcgfSk7XG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShzdGF0LmRhdGUpO1xuICAgICAgICBjaGFydExhYmVsLnRleHRDb250ZW50ID0gYCR7ZGF0ZS5nZXRNb250aCgpICsgMX0vJHtkYXRlLmdldERhdGUoKX1gO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJIZWF0bWFwKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBoZWF0bWFwRGF0YSA9IHRoaXMuYW5hbHl0aWNzLmdldEhlYXRtYXBEYXRhKDkwKTtcbiAgICBcbiAgICAvLyBcdTYzMDlcdTU0NjhcdTUyMDZcdTdFQzRcbiAgICBjb25zdCB3ZWVrczogYW55W11bXSA9IFtdO1xuICAgIGxldCBjdXJyZW50V2VlazogYW55W10gPSBbXTtcbiAgICBcbiAgICBoZWF0bWFwRGF0YS5mb3JFYWNoKChkYXksIGkpID0+IHtcbiAgICAgIGN1cnJlbnRXZWVrLnB1c2goZGF5KTtcbiAgICAgIGlmIChjdXJyZW50V2Vlay5sZW5ndGggPT09IDcgfHwgaSA9PT0gaGVhdG1hcERhdGEubGVuZ3RoIC0gMSkge1xuICAgICAgICB3ZWVrcy5wdXNoKGN1cnJlbnRXZWVrKTtcbiAgICAgICAgY3VycmVudFdlZWsgPSBbXTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHdlZWtzLmZvckVhY2god2VlayA9PiB7XG4gICAgICBjb25zdCB3ZWVrUm93ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2hlYXRtYXAtd2VlaycgfSk7XG4gICAgICBcbiAgICAgIHdlZWsuZm9yRWFjaChkYXkgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gd2Vla1Jvdy5jcmVhdGVEaXYoeyBjbHM6ICdoZWF0bWFwLWNlbGwnIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU1RjNBXHU1RUE2XHU3QjQ5XHU3RUE3IDAtNFxuICAgICAgICBjb25zdCBsZXZlbCA9IE1hdGguY2VpbChkYXkuaW50ZW5zaXR5ICogNCk7XG4gICAgICAgIGNlbGwuYWRkQ2xhc3MoYGxldmVsLSR7bGV2ZWx9YCk7XG4gICAgICAgIFxuICAgICAgICBjZWxsLnRpdGxlID0gYCR7ZGF5LmRhdGV9OiAke2RheS5jb3VudH0gcmV2aWV3c2A7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG5cblxuICBwcml2YXRlIGFzeW5jIGp1bXBUb0NhcmQoY2FyZDogYW55KSB7XG4gICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChjYXJkLnNvdXJjZUZpbGUpO1xuICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcblxuICAgIGNvbnN0IGNvbnRlbnRVbml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY2FyZC5zb3VyY2VDb250ZW50SWQpO1xuICAgIGlmICghY29udGVudFVuaXQpIHJldHVybjtcblxuICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XG4gICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKEl0ZW1WaWV3KTtcbiAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgIGNvbnN0IGVkaXRvciA9ICh2aWV3IGFzIGFueSkuZWRpdG9yO1xuICAgICAgICBpZiAoZWRpdG9yKSB7XG4gICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IGNvbnRlbnRVbml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogMCB9KTtcbiAgICAgICAgICBlZGl0b3Iuc2Nyb2xsSW50b1ZpZXcoe1xuICAgICAgICAgICAgZnJvbTogeyBsaW5lOiBjb250ZW50VW5pdC5zb3VyY2UucG9zaXRpb24ubGluZSwgY2g6IDAgfSxcbiAgICAgICAgICAgIHRvOiB7IGxpbmU6IGNvbnRlbnRVbml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogMCB9XG4gICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCAxMDApO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkZWxldGVGbGFzaGNhcmQoY2FyZElkOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5kZWxldGVDYXJkKGNhcmRJZCk7XG4gICAgICBuZXcgTm90aWNlKCdcdUQ4M0RcdURERDFcdUZFMEYgXHU5NUVBXHU1MzYxXHU1REYyXHU1MjIwXHU5NjY0Jyk7XG4gICAgICB0aGlzLnJlbmRlcigpOyAvLyBcdTkxQ0RcdTY1QjBcdTZFMzJcdTY3RDNcdTg5QzZcdTU2RkVcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgZmxhc2hjYXJkOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBcdTUyMjBcdTk2NjRcdTk1RUFcdTUzNjFcdTU5MzFcdThEMjUnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgLnN0YXRzLWNvbnRhaW5lciB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICB9XG5cbiAgICAgIC5zdGF0cy1oZWFkZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zdGF0cy1oZWFkZXIgaDIge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICB9XG5cbiAgICAgIC5zdGF0cy10YWJzIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICB9XG5cbiAgICAgIC50YWIge1xuICAgICAgICBwYWRkaW5nOiAxMHB4IDIwcHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIC50YWI6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLnRhYi5hY3RpdmUge1xuICAgICAgICBib3JkZXItYm90dG9tLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgIH1cblxuICAgICAgLm1ldHJpY3MtZ3JpZCB7XG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMjAwcHgsIDFmcikpO1xuICAgICAgICBnYXA6IDE1cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDMwcHg7XG4gICAgICB9XG5cbiAgICAgIC5tZXRyaWMtY2FyZCB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDE1cHg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5tZXRyaWMtaWNvbiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMzJweDtcbiAgICAgIH1cblxuICAgICAgLm1ldHJpYy1jb250ZW50IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgIH1cblxuICAgICAgLm1ldHJpYy10aXRsZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICAgICAgfVxuXG4gICAgICAubWV0cmljLXZhbHVlIHtcbiAgICAgICAgZm9udC1zaXplOiAxLjhlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgIH1cblxuICAgICAgLndlZWstY29tcGFyaXNvbiB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDMwcHg7XG4gICAgICB9XG5cbiAgICAgIC5jb21wYXJpc29uLWdyaWQge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDE1cHg7XG4gICAgICAgIG1hcmdpbi10b3A6IDE1cHg7XG4gICAgICB9XG5cbiAgICAgIC5jb21wYXJpc29uLWl0ZW0ge1xuICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgfVxuXG4gICAgICAuY29tcGFyaXNvbi1sYWJlbCB7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC5jb21wYXJpc29uLXZhbHVlcyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgfVxuXG4gICAgICAudGhpcy13ZWVrIHtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgZm9udC1zaXplOiAxLjFlbTtcbiAgICAgIH1cblxuICAgICAgLmxhc3Qtd2VlayB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLmNoYW5nZSB7XG4gICAgICAgIHBhZGRpbmc6IDRweCAxMHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuY2hhbmdlLnBvc2l0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1zdWNjZXNzKTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLmNoYW5nZS5uZWdhdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItZXJyb3IpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICB9XG5cbiAgICAgIC5jaGFydC1zZWN0aW9uIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDtcbiAgICAgIH1cblxuICAgICAgLnJlY2VudC1hY3Rpdml0eSAuYWN0aXZpdHktY2hhcnQge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuICAgICAgICBoZWlnaHQ6IDE1MHB4O1xuICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgIH1cblxuICAgICAgLnNpbXBsZS1iYXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgZmxleDogMTtcbiAgICAgIH1cblxuICAgICAgLnNpbXBsZS1iYXIgLmJhci1jb250YWluZXIge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgaGVpZ2h0OiAxMDBweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgIH1cblxuICAgICAgLnNpbXBsZS1iYXIgLmJhci1maWxsIHtcbiAgICAgICAgd2lkdGg6IDYwJTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4IDRweCAwIDA7XG4gICAgICAgIHRyYW5zaXRpb246IGhlaWdodCAwLjNzO1xuICAgICAgfVxuXG4gICAgICAuYmFyLWxhYmVsLCAuYmFyLXZhbHVlIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLmhlYXRtYXAge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5oZWF0bWFwLXdlZWsge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDRweDtcbiAgICAgIH1cblxuICAgICAgLmhlYXRtYXAtY2VsbCB7XG4gICAgICAgIHdpZHRoOiAxMnB4O1xuICAgICAgICBoZWlnaHQ6IDEycHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICAuaGVhdG1hcC1jZWxsLmxldmVsLTEgeyBiYWNrZ3JvdW5kOiByZ2JhKDk0LCAxNTYsIDIzNSwgMC4zKTsgfVxuICAgICAgLmhlYXRtYXAtY2VsbC5sZXZlbC0yIHsgYmFja2dyb3VuZDogcmdiYSg5NCwgMTU2LCAyMzUsIDAuNSk7IH1cbiAgICAgIC5oZWF0bWFwLWNlbGwubGV2ZWwtMyB7IGJhY2tncm91bmQ6IHJnYmEoOTQsIDE1NiwgMjM1LCAwLjcpOyB9XG4gICAgICAuaGVhdG1hcC1jZWxsLmxldmVsLTQgeyBiYWNrZ3JvdW5kOiByZ2JhKDk0LCAxNTYsIDIzNSwgMSk7IH1cblxuICAgICAgLmRlY2tzLWdyaWQge1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgzMDBweCwgMWZyKSk7XG4gICAgICAgIGdhcDogMTVweDtcbiAgICAgIH1cblxuICAgICAgLmRlY2stY2FyZCB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICB9XG5cbiAgICAgIC5kZWNrLWNhcmQtaGVhZGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTBweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgIH1cblxuICAgICAgLmRlY2stY2FyZC1oZWFkZXIgaDQge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICB9XG5cbiAgICAgIC5kZWNrLWJhZGdlIHtcbiAgICAgICAgcGFkZGluZzogNHB4IDEwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICB9XG5cbiAgICAgIC5kZWNrLWNhcmQtc3RhdHMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgIH1cblxuICAgICAgLnN0YXQtcm93IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5zdGF0LWljb24ge1xuICAgICAgICB3aWR0aDogMjBweDtcbiAgICAgIH1cblxuICAgICAgLnN0YXQtbGFiZWwge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5zdGF0LXZhbHVlIHtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLmRlY2stcHJvZ3Jlc3Mge1xuICAgICAgICBtYXJnaW4tdG9wOiAxNXB4O1xuICAgICAgfVxuXG4gICAgICAucHJvZ3Jlc3MtYmFyLWNvbnRhaW5lciB7XG4gICAgICAgIGhlaWdodDogOHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDVweDtcbiAgICAgIH1cblxuICAgICAgLnByb2dyZXNzLWJhci1maWxsIHtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICB0cmFuc2l0aW9uOiB3aWR0aCAwLjNzO1xuICAgICAgfVxuXG4gICAgICAucHJvZ3Jlc3MtbGFiZWwge1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuZGlmZmljdWx0LWNhcmRzLWxpc3Qge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDEycHg7XG4gICAgICB9XG5cbiAgICAgIC5kaWZmaWN1bHQtY2FyZC1pdGVtIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiAxNXB4O1xuICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1yYW5rIHtcbiAgICAgICAgd2lkdGg6IDMwcHg7XG4gICAgICAgIGhlaWdodDogMzBweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgIH1cblxuICAgICAgLmNhcmQtY29udGVudCB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkLXF1ZXN0aW9uIHtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1tZXRhIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgIG1hcmdpbi1ib3R0b206OHB4O1xuICAgICAgfSBcblxuLnBhdHRlcm4tYmFkZ2UsIC5lcnJvci1jb3VudCwgLmF2Zy10aW1lIHtcbiAgICBwYWRkaW5nOiAzcHggMTBweDtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgZm9udC1zaXplOiAwLjg1ZW07XG4gIH1cblxuICAuZGlmZmljdWx0eS1iYXItY29udGFpbmVyIHtcbiAgICBoZWlnaHQ6IDZweDtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICB9XG5cbiAgLmRpZmZpY3VsdHktYmFyIHtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCB2YXIoLS1jb2xvci1ncmVlbiksIHZhcigtLWNvbG9yLXllbGxvdyksIHZhcigtLWNvbG9yLXJlZCkpO1xuICAgIHRyYW5zaXRpb246IHdpZHRoIDAuM3M7XG4gIH1cblxuICAuY2FyZC1hY3Rpb25zIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGdhcDogOHB4O1xuICB9XG5cbiAgLmFjdGlvbi1idG4tc21hbGwge1xuICAgIHBhZGRpbmc6IDZweCAxMnB4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gIH1cblxuICAuYWN0aW9uLWJ0bi1zbWFsbDpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICB9XG5cbiAgLmFjdGlvbi1idG4tc21hbGwuZGVsZXRlLWJ0bjpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItcmVkKTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgY29sb3I6IHdoaXRlO1xuICB9XG5cbiAgLmVtcHR5LW1lc3NhZ2Uge1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBwYWRkaW5nOiA0MHB4O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICBmb250LXNpemU6IDEuMWVtO1xuICB9XG5cbiAgLnJlcG9ydC1zZWN0aW9uIHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgbWFyZ2luLXRvcDogMzBweDtcbiAgICBwYWRkaW5nOiAyMHB4O1xuICB9XG5cbiAgLmNoYXJ0LWNhbnZhcyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XG4gICAgaGVpZ2h0OiAyMDBweDtcbiAgICBwYWRkaW5nOiAyMHB4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgfVxuXG4gIC5iYXItZ3JvdXAge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGZsZXg6IDE7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICB9XG5cbiAgLmJhci1ncm91cCAuYmFyIHtcbiAgICB3aWR0aDogODAlO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4IDRweCAwIDA7XG4gICAgdHJhbnNpdGlvbjogaGVpZ2h0IDAuM3M7XG4gICAgbWFyZ2luLXRvcDogYXV0bztcbiAgfVxuXG4gIC5saW5lLWNoYXJ0LWNhbnZhcyB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICBwYWRkaW5nOiAyMHB4O1xuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gIH1cblxuICAuY2hhcnQtbGFiZWxzIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO1xuICAgIHBhZGRpbmc6IDEwcHggMjBweDtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICB9XG5cbiAgLmNoYXJ0LWxhYmVsIHtcbiAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gIH1cbmA7XG5cbmRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gIH19IiwgImltcG9ydCB0eXBlIExlYXJuaW5nU3lzdGVtUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgRmxhc2hjYXJkLCBSZXZpZXdMb2cgfSBmcm9tICcuL0ZsYXNoY2FyZE1hbmFnZXInO1xuXG5leHBvcnQgaW50ZXJmYWNlIERhaWx5U3RhdHMge1xuICBkYXRlOiBzdHJpbmc7XG4gIHJldmlld2VkOiBudW1iZXI7XG4gIGNvcnJlY3RDb3VudDogbnVtYmVyO1xuICBjb3JyZWN0UmF0ZTogbnVtYmVyO1xuICB0aW1lU3BlbnQ6IG51bWJlcjtcbiAgbmV3Q2FyZHM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXZWVrbHlTdGF0cyB7XG4gIHN0YXJ0RGF0ZTogc3RyaW5nO1xuICBlbmREYXRlOiBzdHJpbmc7XG4gIHRvdGFsUmV2aWV3czogbnVtYmVyO1xuICBhdmVyYWdlQ29ycmVjdFJhdGU6IG51bWJlcjtcbiAgdG90YWxUaW1lU3BlbnQ6IG51bWJlcjtcbiAgc3RyZWFrOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGVja1N0YXRzIHtcbiAgZGVja05hbWU6IHN0cmluZztcbiAgdG90YWxDYXJkczogbnVtYmVyO1xuICBkdWVDYXJkczogbnVtYmVyO1xuICBuZXdDYXJkczogbnVtYmVyO1xuICBjb3JyZWN0UmF0ZTogbnVtYmVyO1xuICBhdmVyYWdlSW50ZXJ2YWw6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEaWZmaWN1bHRDYXJkIHtcbiAgY2FyZDogRmxhc2hjYXJkO1xuICBlcnJvckNvdW50OiBudW1iZXI7XG4gIGxhc3RFcnJvcjogbnVtYmVyO1xuICBhdmVyYWdlVGltZTogbnVtYmVyO1xuICBwYXR0ZXJuOiAnY29uY2VwdCcgfCAnbWVtb3J5JyB8ICdjYWxjdWxhdGlvbicgfCAndW5rbm93bic7XG59XG5cbmV4cG9ydCBjbGFzcyBBbmFseXRpY3NFbmdpbmUge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4pIHt9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NkJDRlx1NjVFNVx1N0VERlx1OEJBMVxuICAgKi9cbiAgZ2V0RGFpbHlTdGF0cyhkYXlzOiBudW1iZXIgPSAzMCk6IERhaWx5U3RhdHNbXSB7XG4gICAgY29uc3QgbG9ncyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXJbJ3Jldmlld0xvZ3MnXSB8fCBbXTtcbiAgICBjb25zdCBzdGF0czogTWFwPHN0cmluZywgRGFpbHlTdGF0cz4gPSBuZXcgTWFwKCk7XG5cbiAgICAvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdTY3MDBcdThGRDFOXHU1OTI5XHU3Njg0XHU2NTcwXHU2MzZFXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXlzOyBpKyspIHtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gaSk7XG4gICAgICBjb25zdCBkYXRlS2V5ID0gZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICBcbiAgICAgIHN0YXRzLnNldChkYXRlS2V5LCB7XG4gICAgICAgIGRhdGU6IGRhdGVLZXksXG4gICAgICAgIHJldmlld2VkOiAwLFxuICAgICAgICBjb3JyZWN0Q291bnQ6IDAsXG4gICAgICAgIGNvcnJlY3RSYXRlOiAwLFxuICAgICAgICB0aW1lU3BlbnQ6IDAsXG4gICAgICAgIG5ld0NhcmRzOiAwXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTdFREZcdThCQTFcdTU5MERcdTRFNjBcdThCQjBcdTVGNTVcbiAgICBsb2dzLmZvckVhY2gobG9nID0+IHtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShsb2cudGltZXN0YW1wKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICBjb25zdCBzdGF0ID0gc3RhdHMuZ2V0KGRhdGUpO1xuICAgICAgaWYgKCFzdGF0KSByZXR1cm47XG5cbiAgICAgIHN0YXQucmV2aWV3ZWQrKztcbiAgICAgIHN0YXQudGltZVNwZW50ICs9IGxvZy5yZXNwb25zZS50aW1lU3BlbnQ7XG5cbiAgICAgIC8vIFx1NTIyNFx1NjVBRFx1NjYyRlx1NTQyNlx1NkI2M1x1Nzg2RVxuICAgICAgaWYgKGxvZy5yZXNwb25zZS5lYXNlID09PSAnZ29vZCcgfHwgbG9nLnJlc3BvbnNlLmVhc2UgPT09ICdlYXN5Jykge1xuICAgICAgICBzdGF0LmNvcnJlY3RDb3VudCsrO1xuICAgICAgfSBlbHNlIGlmIChsb2cucmVzcG9uc2UuZWFzZSA9PT0gJ2hhcmQnKSB7XG4gICAgICAgIHN0YXQuY29ycmVjdENvdW50ICs9IDAuNTtcbiAgICAgIH1cblxuICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NjJGXHU2NUIwXHU1MzYxXHU3MjQ3XHVGRjA4XHU3QjJDXHU0RTAwXHU2QjIxXHU1OTBEXHU0RTYwXHVGRjA5XG4gICAgICBjb25zdCBjYXJkID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRGbGFzaGNhcmQobG9nLmZsYXNoY2FyZElkKTtcbiAgICAgIGlmIChjYXJkICYmIGNhcmQuc3RhdHMudG90YWxSZXZpZXdzID09PSAxKSB7XG4gICAgICAgIHN0YXQubmV3Q2FyZHMrKztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFx1OEJBMVx1N0I5N1x1NkI2M1x1Nzg2RVx1NzM4N1xuICAgIHN0YXRzLmZvckVhY2goc3RhdCA9PiB7XG4gICAgICBpZiAoc3RhdC5yZXZpZXdlZCA+IDApIHtcbiAgICAgICAgc3RhdC5jb3JyZWN0UmF0ZSA9IHN0YXQuY29ycmVjdENvdW50IC8gc3RhdC5yZXZpZXdlZDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBBcnJheS5mcm9tKHN0YXRzLnZhbHVlcygpKS5zb3J0KChhLCBiKSA9PiBcbiAgICAgIGEuZGF0ZS5sb2NhbGVDb21wYXJlKGIuZGF0ZSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NTQ2OFx1N0VERlx1OEJBMVxuICAgKi9cbiAgZ2V0V2Vla2x5U3RhdHMoKTogeyB0aGlzV2VlazogV2Vla2x5U3RhdHM7IGxhc3RXZWVrOiBXZWVrbHlTdGF0cyB9IHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIFxuICAgIC8vIFx1NjcyQ1x1NTQ2OFxuICAgIGNvbnN0IHRoaXNXZWVrU3RhcnQgPSBuZXcgRGF0ZShub3cpO1xuICAgIHRoaXNXZWVrU3RhcnQuc2V0RGF0ZShub3cuZ2V0RGF0ZSgpIC0gbm93LmdldERheSgpKTtcbiAgICB0aGlzV2Vla1N0YXJ0LnNldEhvdXJzKDAsIDAsIDAsIDApO1xuXG4gICAgLy8gXHU0RTBBXHU1NDY4XG4gICAgY29uc3QgbGFzdFdlZWtTdGFydCA9IG5ldyBEYXRlKHRoaXNXZWVrU3RhcnQpO1xuICAgIGxhc3RXZWVrU3RhcnQuc2V0RGF0ZShsYXN0V2Vla1N0YXJ0LmdldERhdGUoKSAtIDcpO1xuXG4gICAgY29uc3QgdGhpc1dlZWsgPSB0aGlzLmNhbGN1bGF0ZVdlZWtTdGF0cyh0aGlzV2Vla1N0YXJ0KTtcbiAgICBjb25zdCBsYXN0V2VlayA9IHRoaXMuY2FsY3VsYXRlV2Vla1N0YXRzKGxhc3RXZWVrU3RhcnQpO1xuXG4gICAgcmV0dXJuIHsgdGhpc1dlZWssIGxhc3RXZWVrIH07XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVdlZWtTdGF0cyhzdGFydERhdGU6IERhdGUpOiBXZWVrbHlTdGF0cyB7XG4gICAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKHN0YXJ0RGF0ZSk7XG4gICAgZW5kRGF0ZS5zZXREYXRlKGVuZERhdGUuZ2V0RGF0ZSgpICsgNyk7XG5cbiAgICBjb25zdCBsb2dzID0gKHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXJbJ3Jldmlld0xvZ3MnXSB8fCBbXSkuZmlsdGVyKFxuICAgICAgbG9nID0+IGxvZy50aW1lc3RhbXAgPj0gc3RhcnREYXRlLmdldFRpbWUoKSAmJiBsb2cudGltZXN0YW1wIDwgZW5kRGF0ZS5nZXRUaW1lKClcbiAgICApO1xuXG4gICAgbGV0IHRvdGFsQ29ycmVjdCA9IDA7XG4gICAgbGV0IHRvdGFsVGltZVNwZW50ID0gMDtcblxuICAgIGxvZ3MuZm9yRWFjaChsb2cgPT4ge1xuICAgICAgdG90YWxUaW1lU3BlbnQgKz0gbG9nLnJlc3BvbnNlLnRpbWVTcGVudDtcbiAgICAgIGlmIChsb2cucmVzcG9uc2UuZWFzZSA9PT0gJ2dvb2QnIHx8IGxvZy5yZXNwb25zZS5lYXNlID09PSAnZWFzeScpIHtcbiAgICAgICAgdG90YWxDb3JyZWN0Kys7XG4gICAgICB9IGVsc2UgaWYgKGxvZy5yZXNwb25zZS5lYXNlID09PSAnaGFyZCcpIHtcbiAgICAgICAgdG90YWxDb3JyZWN0ICs9IDAuNTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IGF2ZXJhZ2VDb3JyZWN0UmF0ZSA9IGxvZ3MubGVuZ3RoID4gMCA/IHRvdGFsQ29ycmVjdCAvIGxvZ3MubGVuZ3RoIDogMDtcbiAgICBjb25zdCBzdHJlYWsgPSB0aGlzLmNhbGN1bGF0ZVN0cmVhaygpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0RGF0ZTogc3RhcnREYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcbiAgICAgIGVuZERhdGU6IGVuZERhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxuICAgICAgdG90YWxSZXZpZXdzOiBsb2dzLmxlbmd0aCxcbiAgICAgIGF2ZXJhZ2VDb3JyZWN0UmF0ZSxcbiAgICAgIHRvdGFsVGltZVNwZW50LFxuICAgICAgc3RyZWFrXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdThCQTFcdTdCOTdcdThGREVcdTdFRURcdTVCNjZcdTRFNjBcdTU5MjlcdTY1NzBcbiAgICovXG4gIGNhbGN1bGF0ZVN0cmVhaygpOiBudW1iZXIge1xuICAgIGNvbnN0IGxvZ3MgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyWydyZXZpZXdMb2dzJ10gfHwgW107XG4gICAgaWYgKGxvZ3MubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IGRhdGVzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgbG9ncy5mb3JFYWNoKGxvZyA9PiB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUobG9nLnRpbWVzdGFtcCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgZGF0ZXMuYWRkKGRhdGUpO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc29ydGVkRGF0ZXMgPSBBcnJheS5mcm9tKGRhdGVzKS5zb3J0KCkucmV2ZXJzZSgpO1xuICAgIGxldCBzdHJlYWsgPSAwO1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvcnRlZERhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBleHBlY3RlZERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgZXhwZWN0ZWREYXRlLnNldERhdGUoZXhwZWN0ZWREYXRlLmdldERhdGUoKSAtIGkpO1xuICAgICAgY29uc3QgZXhwZWN0ZWQgPSBleHBlY3RlZERhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuXG4gICAgICBpZiAoc29ydGVkRGF0ZXNbaV0gPT09IGV4cGVjdGVkKSB7XG4gICAgICAgIHN0cmVhaysrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0cmVhaztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTUzNjFcdTdFQzRcdTdFREZcdThCQTFcbiAgICovXG4gIGdldERlY2tTdGF0cygpOiBEZWNrU3RhdHNbXSB7XG4gICAgY29uc3QgY2FyZHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldEFsbEZsYXNoY2FyZHMoKTtcbiAgICBjb25zdCBkZWNrTWFwID0gbmV3IE1hcDxzdHJpbmcsIEZsYXNoY2FyZFtdPigpO1xuXG4gICAgLy8gXHU2MzA5XHU1MzYxXHU3RUM0XHU1MjA2XHU3RUM0XG4gICAgY2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgIGlmICghZGVja01hcC5oYXMoY2FyZC5kZWNrKSkge1xuICAgICAgICBkZWNrTWFwLnNldChjYXJkLmRlY2ssIFtdKTtcbiAgICAgIH1cbiAgICAgIGRlY2tNYXAuZ2V0KGNhcmQuZGVjaykhLnB1c2goY2FyZCk7XG4gICAgfSk7XG5cbiAgICAvLyBcdThCQTFcdTdCOTdcdTZCQ0ZcdTRFMkFcdTUzNjFcdTdFQzRcdTc2ODRcdTdFREZcdThCQTFcbiAgICBjb25zdCBzdGF0czogRGVja1N0YXRzW10gPSBbXTtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXG4gICAgZGVja01hcC5mb3JFYWNoKChkZWNrQ2FyZHMsIGRlY2tOYW1lKSA9PiB7XG4gICAgICBjb25zdCBkdWVDYXJkcyA9IGRlY2tDYXJkcy5maWx0ZXIoYyA9PiBjLnNjaGVkdWxpbmcuZHVlIDw9IG5vdykubGVuZ3RoO1xuICAgICAgY29uc3QgbmV3Q2FyZHMgPSBkZWNrQ2FyZHMuZmlsdGVyKGMgPT4gYy5zY2hlZHVsaW5nLnN0YXRlID09PSAnbmV3JykubGVuZ3RoO1xuICAgICAgXG4gICAgICBjb25zdCB0b3RhbENvcnJlY3QgPSBkZWNrQ2FyZHMucmVkdWNlKFxuICAgICAgICAoc3VtLCBjKSA9PiBzdW0gKyBjLnN0YXRzLmNvcnJlY3RDb3VudCwgMFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHRvdGFsUmV2aWV3cyA9IGRlY2tDYXJkcy5yZWR1Y2UoXG4gICAgICAgIChzdW0sIGMpID0+IHN1bSArIGMuc3RhdHMudG90YWxSZXZpZXdzLCAwXG4gICAgICApO1xuICAgICAgY29uc3QgY29ycmVjdFJhdGUgPSB0b3RhbFJldmlld3MgPiAwID8gdG90YWxDb3JyZWN0IC8gdG90YWxSZXZpZXdzIDogMDtcblxuICAgICAgY29uc3QgdG90YWxJbnRlcnZhbCA9IGRlY2tDYXJkcy5yZWR1Y2UoXG4gICAgICAgIChzdW0sIGMpID0+IHN1bSArIGMuc2NoZWR1bGluZy5pbnRlcnZhbCwgMFxuICAgICAgKTtcbiAgICAgIGNvbnN0IGF2ZXJhZ2VJbnRlcnZhbCA9IGRlY2tDYXJkcy5sZW5ndGggPiAwIFxuICAgICAgICA/IHRvdGFsSW50ZXJ2YWwgLyBkZWNrQ2FyZHMubGVuZ3RoIFxuICAgICAgICA6IDA7XG5cbiAgICAgIHN0YXRzLnB1c2goe1xuICAgICAgICBkZWNrTmFtZSxcbiAgICAgICAgdG90YWxDYXJkczogZGVja0NhcmRzLmxlbmd0aCxcbiAgICAgICAgZHVlQ2FyZHMsXG4gICAgICAgIG5ld0NhcmRzLFxuICAgICAgICBjb3JyZWN0UmF0ZSxcbiAgICAgICAgYXZlcmFnZUludGVydmFsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBzdGF0cy5zb3J0KChhLCBiKSA9PiBiLnRvdGFsQ2FyZHMgLSBhLnRvdGFsQ2FyZHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1OTZCRVx1NzBCOVx1NTM2MVx1NzI0N1xuICAgKi9cbiAgZ2V0RGlmZmljdWx0Q2FyZHMobGltaXQ6IG51bWJlciA9IDEwKTogRGlmZmljdWx0Q2FyZFtdIHtcbiAgICBjb25zdCBjYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgIGNvbnN0IGxvZ3MgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyWydyZXZpZXdMb2dzJ10gfHwgW107XG5cbiAgICBjb25zdCBkaWZmaWN1bHRDYXJkczogRGlmZmljdWx0Q2FyZFtdID0gW107XG5cbiAgICBjYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xuICAgICAgY29uc3QgY2FyZExvZ3MgPSBsb2dzLmZpbHRlcihsb2cgPT4gbG9nLmZsYXNoY2FyZElkID09PSBjYXJkLmlkKTtcbiAgICAgIFxuICAgICAgLy8gXHU4QkExXHU3Qjk3XHU5NTE5XHU4QkVGXHU2QjIxXHU2NTcwXG4gICAgICBjb25zdCBlcnJvckNvdW50ID0gY2FyZExvZ3MuZmlsdGVyKFxuICAgICAgICBsb2cgPT4gbG9nLnJlc3BvbnNlLmVhc2UgPT09ICdhZ2FpbidcbiAgICAgICkubGVuZ3RoO1xuXG4gICAgICBpZiAoZXJyb3JDb3VudCA9PT0gMCAmJiBjYXJkLnN0YXRzLmRpZmZpY3VsdHkgPCAwLjcpIHJldHVybjtcblxuICAgICAgLy8gXHU2NzAwXHU1NDBFXHU0RTAwXHU2QjIxXHU5NTE5XHU4QkVGXG4gICAgICBjb25zdCBlcnJvckxvZ3MgPSBjYXJkTG9ncy5maWx0ZXIobG9nID0+IGxvZy5yZXNwb25zZS5lYXNlID09PSAnYWdhaW4nKTtcbiAgICAgIGNvbnN0IGxhc3RFcnJvciA9IGVycm9yTG9ncy5sZW5ndGggPiAwIFxuICAgICAgICA/IGVycm9yTG9nc1tlcnJvckxvZ3MubGVuZ3RoIC0gMV0udGltZXN0YW1wIFxuICAgICAgICA6IDA7XG5cbiAgICAgIC8vIFx1NTIyNFx1NjVBRFx1OTUxOVx1OEJFRlx1NkEyMVx1NUYwRlxuICAgICAgY29uc3QgcGF0dGVybiA9IHRoaXMuZGV0ZWN0RXJyb3JQYXR0ZXJuKGNhcmQsIGNhcmRMb2dzKTtcblxuICAgICAgZGlmZmljdWx0Q2FyZHMucHVzaCh7XG4gICAgICAgIGNhcmQsXG4gICAgICAgIGVycm9yQ291bnQsXG4gICAgICAgIGxhc3RFcnJvcixcbiAgICAgICAgYXZlcmFnZVRpbWU6IGNhcmQuc3RhdHMuYXZlcmFnZVRpbWUsXG4gICAgICAgIHBhdHRlcm5cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gXHU2MzkyXHU1RThGXHVGRjFBXHU5NTE5XHU4QkVGXHU2QjIxXHU2NTcwID4gXHU5NkJFXHU1RUE2ID4gXHU2NzAwXHU4RkQxXHU5NTE5XHU4QkVGXG4gICAgcmV0dXJuIGRpZmZpY3VsdENhcmRzXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBpZiAoYS5lcnJvckNvdW50ICE9PSBiLmVycm9yQ291bnQpIHtcbiAgICAgICAgICByZXR1cm4gYi5lcnJvckNvdW50IC0gYS5lcnJvckNvdW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChhLmNhcmQuc3RhdHMuZGlmZmljdWx0eSAhPT0gYi5jYXJkLnN0YXRzLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgICByZXR1cm4gYi5jYXJkLnN0YXRzLmRpZmZpY3VsdHkgLSBhLmNhcmQuc3RhdHMuZGlmZmljdWx0eTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYi5sYXN0RXJyb3IgLSBhLmxhc3RFcnJvcjtcbiAgICAgIH0pXG4gICAgICAuc2xpY2UoMCwgbGltaXQpO1xuICB9XG5cbiAgcHJpdmF0ZSBkZXRlY3RFcnJvclBhdHRlcm4oXG4gICAgY2FyZDogRmxhc2hjYXJkLFxuICAgIGxvZ3M6IFJldmlld0xvZ1tdXG4gICk6IERpZmZpY3VsdENhcmRbJ3BhdHRlcm4nXSB7XG4gICAgaWYgKGxvZ3MubGVuZ3RoIDwgMykgcmV0dXJuICd1bmtub3duJztcblxuICAgIC8vIFx1NjVGNlx1OTVGNFx1OEZDN1x1OTU3RiAtPiBcdThCQTFcdTdCOTdcdTk1RUVcdTk4OThcbiAgICBpZiAoY2FyZC5zdGF0cy5hdmVyYWdlVGltZSA+IDYwKSB7XG4gICAgICByZXR1cm4gJ2NhbGN1bGF0aW9uJztcbiAgICB9XG5cbiAgICAvLyBcdTk1RjRcdTk2OTRcdTVGODhcdTc3RURcdTRFQ0RcdTcxMzZcdTk1MTlcdThCRUYgLT4gXHU4QkIwXHU1RkM2XHU5NUVFXHU5ODk4XG4gICAgaWYgKGNhcmQuc2NoZWR1bGluZy5pbnRlcnZhbCA8IDMgJiYgY2FyZC5zY2hlZHVsaW5nLmxhcHNlcyA+IDIpIHtcbiAgICAgIHJldHVybiAnbWVtb3J5JztcbiAgICB9XG5cbiAgICAvLyBcdTYzMDFcdTdFRURcdTU5MzFcdThEMjUgLT4gXHU2OTgyXHU1RkY1XHU3NDA2XHU4OUUzXHU5NUVFXHU5ODk4XG4gICAgY29uc3QgcmVjZW50TG9ncyA9IGxvZ3Muc2xpY2UoLTUpO1xuICAgIGNvbnN0IHJlY2VudEZhaWx1cmVzID0gcmVjZW50TG9ncy5maWx0ZXIoXG4gICAgICBsb2cgPT4gbG9nLnJlc3BvbnNlLmVhc2UgPT09ICdhZ2FpbidcbiAgICApLmxlbmd0aDtcbiAgICBcbiAgICBpZiAocmVjZW50RmFpbHVyZXMgPj0gMykge1xuICAgICAgcmV0dXJuICdjb25jZXB0JztcbiAgICB9XG5cbiAgICByZXR1cm4gJ3Vua25vd24nO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NjgwN1x1N0I3RVx1N0VERlx1OEJBMVxuICAgKi9cbiAgZ2V0VGFnU3RhdHMoKTogeyB0YWc6IHN0cmluZzsgY291bnQ6IG51bWJlcjsgY29ycmVjdFJhdGU6IG51bWJlciB9W10ge1xuICAgIGNvbnN0IGNhcmRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRBbGxGbGFzaGNhcmRzKCk7XG4gICAgY29uc3QgdGFnTWFwID0gbmV3IE1hcDxzdHJpbmcsIHsgdG90YWw6IG51bWJlcjsgY29ycmVjdDogbnVtYmVyOyByZXZpZXdzOiBudW1iZXIgfT4oKTtcblxuICAgIGNhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICBjYXJkLnRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICBpZiAoIXRhZ01hcC5oYXModGFnKSkge1xuICAgICAgICAgIHRhZ01hcC5zZXQodGFnLCB7IHRvdGFsOiAwLCBjb3JyZWN0OiAwLCByZXZpZXdzOiAwIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXQgPSB0YWdNYXAuZ2V0KHRhZykhO1xuICAgICAgICBzdGF0LnRvdGFsKys7XG4gICAgICAgIHN0YXQuY29ycmVjdCArPSBjYXJkLnN0YXRzLmNvcnJlY3RDb3VudDtcbiAgICAgICAgc3RhdC5yZXZpZXdzICs9IGNhcmQuc3RhdHMudG90YWxSZXZpZXdzO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBzdGF0cyA9IEFycmF5LmZyb20odGFnTWFwLmVudHJpZXMoKSkubWFwKChbdGFnLCBkYXRhXSkgPT4gKHtcbiAgICAgIHRhZyxcbiAgICAgIGNvdW50OiBkYXRhLnRvdGFsLFxuICAgICAgY29ycmVjdFJhdGU6IGRhdGEucmV2aWV3cyA+IDAgPyBkYXRhLmNvcnJlY3QgLyBkYXRhLnJldmlld3MgOiAwXG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIHN0YXRzLnNvcnQoKGEsIGIpID0+IGIuY291bnQgLSBhLmNvdW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTc1MUZcdTYyMTBcdTVCNjZcdTRFNjBcdTYyQTVcdTU0NEFcbiAgICovXG4gIGdlbmVyYXRlUmVwb3J0KGRheXM6IG51bWJlciA9IDcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRhaWx5U3RhdHMgPSB0aGlzLmdldERhaWx5U3RhdHMoZGF5cyk7XG4gICAgY29uc3QgeyB0aGlzV2VlaywgbGFzdFdlZWsgfSA9IHRoaXMuZ2V0V2Vla2x5U3RhdHMoKTtcbiAgICBjb25zdCBkaWZmaWN1bHRDYXJkcyA9IHRoaXMuZ2V0RGlmZmljdWx0Q2FyZHMoNSk7XG4gICAgY29uc3QgZGVja1N0YXRzID0gdGhpcy5nZXREZWNrU3RhdHMoKTtcblxuICAgIC8vIFx1OEJBMVx1N0I5N1x1NjAzQlx1ODlDOFx1NjU3MFx1NjM2RVxuICAgIGNvbnN0IHRvdGFsUmV2aWV3ZWQgPSBkYWlseVN0YXRzLnJlZHVjZSgoc3VtLCBzKSA9PiBzdW0gKyBzLnJldmlld2VkLCAwKTtcbiAgICBjb25zdCB0b3RhbENvcnJlY3QgPSBkYWlseVN0YXRzLnJlZHVjZSgoc3VtLCBzKSA9PiBzdW0gKyBzLmNvcnJlY3RDb3VudCwgMCk7XG4gICAgY29uc3QgYXZlcmFnZUNvcnJlY3RSYXRlID0gdG90YWxSZXZpZXdlZCA+IDAgPyB0b3RhbENvcnJlY3QgLyB0b3RhbFJldmlld2VkIDogMDtcbiAgICBjb25zdCB0b3RhbFRpbWUgPSBkYWlseVN0YXRzLnJlZHVjZSgoc3VtLCBzKSA9PiBzdW0gKyBzLnRpbWVTcGVudCwgMCk7XG5cbiAgICAvLyBcdThEOEJcdTUyQkZcdTUyMDZcdTY3OTBcbiAgICBjb25zdCByZWNlbnREYXlzID0gZGFpbHlTdGF0cy5zbGljZSgtNyk7XG4gICAgY29uc3Qgb2xkZXJEYXlzID0gZGFpbHlTdGF0cy5zbGljZSgtMTQsIC03KTtcbiAgICBjb25zdCByZWNlbnRSYXRlID0gdGhpcy5jYWxjdWxhdGVBdmVyYWdlUmF0ZShyZWNlbnREYXlzKTtcbiAgICBjb25zdCBvbGRlclJhdGUgPSB0aGlzLmNhbGN1bGF0ZUF2ZXJhZ2VSYXRlKG9sZGVyRGF5cyk7XG4gICAgY29uc3QgdHJlbmQgPSByZWNlbnRSYXRlID4gb2xkZXJSYXRlID8gJ1x1RDgzRFx1RENDOCBpbXByb3ZpbmcnIDogXG4gICAgICAgICAgICAgICAgICByZWNlbnRSYXRlIDwgb2xkZXJSYXRlID8gJ1x1RDgzRFx1RENDOSBkZWNsaW5pbmcnIDogJ1x1MjdBMVx1RkUwRiBzdGFibGUnO1xuXG4gICAgbGV0IHJlcG9ydCA9IGAjIFx1RDgzRFx1RENDQSBMZWFybmluZyBSZXBvcnRcXG5cXG5gO1xuICAgIHJlcG9ydCArPSBgKipQZXJpb2Q6KiogTGFzdCAke2RheXN9IGRheXNcXG5gO1xuICAgIHJlcG9ydCArPSBgKipHZW5lcmF0ZWQ6KiogJHtuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCl9XFxuXFxuYDtcblxuICAgIHJlcG9ydCArPSBgIyMgXHVEODNDXHVERkFGIE92ZXJhbGwgUGVyZm9ybWFuY2VcXG5cXG5gO1xuICAgIHJlcG9ydCArPSBgLSAqKkNhcmRzIFJldmlld2VkOioqICR7dG90YWxSZXZpZXdlZH1cXG5gO1xuICAgIHJlcG9ydCArPSBgLSAqKkNvcnJlY3QgUmF0ZToqKiAkeyhhdmVyYWdlQ29ycmVjdFJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JVxcbmA7XG4gICAgcmVwb3J0ICs9IGAtICoqU3R1ZHkgVGltZToqKiAke3RoaXMuZm9ybWF0VGltZSh0b3RhbFRpbWUpfVxcbmA7XG4gICAgcmVwb3J0ICs9IGAtICoqQ3VycmVudCBTdHJlYWs6KiogJHt0aGlzV2Vlay5zdHJlYWt9IGRheXMgXHVEODNEXHVERDI1XFxuYDtcbiAgICByZXBvcnQgKz0gYC0gKipUcmVuZDoqKiAke3RyZW5kfVxcblxcbmA7XG5cbiAgICByZXBvcnQgKz0gYCMjIFx1RDgzRFx1RENDOCBXZWVrIENvbXBhcmlzb25cXG5cXG5gO1xuICAgIHJlcG9ydCArPSBgIyMjIFRoaXMgV2Vla1xcbmA7XG4gICAgcmVwb3J0ICs9IGAtIFJldmlld3M6ICR7dGhpc1dlZWsudG90YWxSZXZpZXdzfVxcbmA7XG4gICAgcmVwb3J0ICs9IGAtIENvcnJlY3QgUmF0ZTogJHsodGhpc1dlZWsuYXZlcmFnZUNvcnJlY3RSYXRlICogMTAwKS50b0ZpeGVkKDEpfSVcXG5gO1xuICAgIHJlcG9ydCArPSBgLSBUaW1lOiAke3RoaXMuZm9ybWF0VGltZSh0aGlzV2Vlay50b3RhbFRpbWVTcGVudCl9XFxuXFxuYDtcblxuICAgIHJlcG9ydCArPSBgIyMjIExhc3QgV2Vla1xcbmA7XG4gICAgcmVwb3J0ICs9IGAtIFJldmlld3M6ICR7bGFzdFdlZWsudG90YWxSZXZpZXdzfVxcbmA7XG4gICAgcmVwb3J0ICs9IGAtIENvcnJlY3QgUmF0ZTogJHsobGFzdFdlZWsuYXZlcmFnZUNvcnJlY3RSYXRlICogMTAwKS50b0ZpeGVkKDEpfSVcXG5gO1xuICAgIHJlcG9ydCArPSBgLSBUaW1lOiAke3RoaXMuZm9ybWF0VGltZShsYXN0V2Vlay50b3RhbFRpbWVTcGVudCl9XFxuXFxuYDtcblxuICAgIGNvbnN0IHJldmlld0NoYW5nZSA9IHRoaXNXZWVrLnRvdGFsUmV2aWV3cyAtIGxhc3RXZWVrLnRvdGFsUmV2aWV3cztcbiAgICBjb25zdCByYXRlQ2hhbmdlID0gKHRoaXNXZWVrLmF2ZXJhZ2VDb3JyZWN0UmF0ZSAtIGxhc3RXZWVrLmF2ZXJhZ2VDb3JyZWN0UmF0ZSkgKiAxMDA7XG4gICAgXG4gICAgaWYgKHJldmlld0NoYW5nZSA+IDApIHtcbiAgICAgIHJlcG9ydCArPSBgXHVEODNEXHVEQ0FBIFlvdSByZXZpZXdlZCAqKiR7cmV2aWV3Q2hhbmdlfSBtb3JlIGNhcmRzKiogdGhpcyB3ZWVrIVxcbmA7XG4gICAgfVxuICAgIGlmIChyYXRlQ2hhbmdlID4gNSkge1xuICAgICAgcmVwb3J0ICs9IGBcdUQ4M0NcdURGODkgWW91ciBhY2N1cmFjeSBpbXByb3ZlZCBieSAqKiR7cmF0ZUNoYW5nZS50b0ZpeGVkKDEpfSUqKiFcXG5gO1xuICAgIH1cbiAgICByZXBvcnQgKz0gYFxcbmA7XG5cbiAgICBpZiAoZGlmZmljdWx0Q2FyZHMubGVuZ3RoID4gMCkge1xuICAgICAgcmVwb3J0ICs9IGAjIyBcdTI2QTBcdUZFMEYgQ2FyZHMgTmVlZGluZyBBdHRlbnRpb25cXG5cXG5gO1xuICAgICAgZGlmZmljdWx0Q2FyZHMuZm9yRWFjaCgoZGMsIGkpID0+IHtcbiAgICAgICAgY29uc3QgcGF0dGVybkVtb2ppID0ge1xuICAgICAgICAgICdjb25jZXB0JzogJ1x1RDgzRVx1RERFMCcsXG4gICAgICAgICAgJ21lbW9yeSc6ICdcdUQ4M0RcdURDQUQnLFxuICAgICAgICAgICdjYWxjdWxhdGlvbic6ICdcdUQ4M0RcdUREMjInLFxuICAgICAgICAgICd1bmtub3duJzogJ1x1Mjc1MydcbiAgICAgICAgfTtcbiAgICAgICAgcmVwb3J0ICs9IGAke2kgKyAxfS4gKioke2RjLmNhcmQuZnJvbnQuc3Vic3RyaW5nKDAsIDUwKX0ke2RjLmNhcmQuZnJvbnQubGVuZ3RoID4gNTAgPyAnLi4uJyA6ICcnfSoqXFxuYDtcbiAgICAgICAgcmVwb3J0ICs9IGAgICAtIEVycm9yczogJHtkYy5lcnJvckNvdW50fSB8IFBhdHRlcm46ICR7cGF0dGVybkVtb2ppW2RjLnBhdHRlcm5dfSAke2RjLnBhdHRlcm59XFxuYDtcbiAgICAgICAgcmVwb3J0ICs9IGAgICAtIEF2ZyBUaW1lOiAke2RjLmF2ZXJhZ2VUaW1lLnRvRml4ZWQoMSl9cyB8IERpZmZpY3VsdHk6ICR7KGRjLmNhcmQuc3RhdHMuZGlmZmljdWx0eSAqIDEwMCkudG9GaXhlZCgwKX0lXFxuXFxuYDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlcG9ydCArPSBgIyMgXHVEODNEXHVEQ0RBIERlY2sgT3ZlcnZpZXdcXG5cXG5gO1xuICAgIGRlY2tTdGF0cy5mb3JFYWNoKGRlY2sgPT4ge1xuICAgICAgcmVwb3J0ICs9IGAjIyMgJHtkZWNrLmRlY2tOYW1lfVxcbmA7XG4gICAgICByZXBvcnQgKz0gYC0gVG90YWw6ICR7ZGVjay50b3RhbENhcmRzfSB8IER1ZTogJHtkZWNrLmR1ZUNhcmRzfSB8IE5ldzogJHtkZWNrLm5ld0NhcmRzfVxcbmA7XG4gICAgICByZXBvcnQgKz0gYC0gQ29ycmVjdCBSYXRlOiAkeyhkZWNrLmNvcnJlY3RSYXRlICogMTAwKS50b0ZpeGVkKDEpfSVcXG5gO1xuICAgICAgcmVwb3J0ICs9IGAtIEF2ZyBJbnRlcnZhbDogJHtkZWNrLmF2ZXJhZ2VJbnRlcnZhbC50b0ZpeGVkKDEpfSBkYXlzXFxuXFxuYDtcbiAgICB9KTtcblxuICAgIHJlcG9ydCArPSBgIyMgXHVEODNEXHVEQ0ExIFJlY29tbWVuZGF0aW9uc1xcblxcbmA7XG5cbiAgICAvLyBcdTc1MUZcdTYyMTBcdTVFRkFcdThCQUVcbiAgICBpZiAoYXZlcmFnZUNvcnJlY3RSYXRlIDwgMC43KSB7XG4gICAgICByZXBvcnQgKz0gYC0gXHUyNkExIFlvdXIgY29ycmVjdCByYXRlIGlzIGJlbG93IDcwJS4gQ29uc2lkZXIgcmV2aWV3aW5nIGRpZmZpY3VsdCBjYXJkcyBtb3JlIGZyZXF1ZW50bHkuXFxuYDtcbiAgICB9XG4gICAgaWYgKGRpZmZpY3VsdENhcmRzLmxlbmd0aCA+IDUpIHtcbiAgICAgIHJlcG9ydCArPSBgLSBcdUQ4M0RcdURDRDYgWW91IGhhdmUgbWFueSBkaWZmaWN1bHQgY2FyZHMuIFRyeSBicmVha2luZyBjb21wbGV4IGNvbmNlcHRzIGludG8gc21hbGxlciBmbGFzaGNhcmRzLlxcbmA7XG4gICAgfVxuICAgIGlmICh0aGlzV2Vlay5zdHJlYWsgPiA3KSB7XG4gICAgICByZXBvcnQgKz0gYC0gXHVEODNDXHVERjg5IEFtYXppbmcgc3RyZWFrISBLZWVwIHVwIHRoZSBjb25zaXN0ZW5jeSFcXG5gO1xuICAgIH1cbiAgICBpZiAodG90YWxUaW1lIC8gdG90YWxSZXZpZXdlZCA+IDMwKSB7XG4gICAgICByZXBvcnQgKz0gYC0gXHUyM0YxXHVGRTBGIEF2ZXJhZ2UgcmV2aWV3IHRpbWUgaXMgaGlnaC4gQ29uc2lkZXIgc2ltcGxpZnlpbmcgY2FyZCBjb250ZW50LlxcbmA7XG4gICAgfVxuICAgIGlmIChkZWNrU3RhdHMuc29tZShkID0+IGQuZHVlQ2FyZHMgPiBkLnRvdGFsQ2FyZHMgKiAwLjUpKSB7XG4gICAgICByZXBvcnQgKz0gYC0gXHVEODNEXHVEQ0M1IFNvbWUgZGVja3MgaGF2ZSBtYW55IG92ZXJkdWUgY2FyZHMuIEZvY3VzIG9uIGNhdGNoaW5nIHVwIHdpdGggdGhlc2UuXFxuYDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVwb3J0O1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVBdmVyYWdlUmF0ZShzdGF0czogRGFpbHlTdGF0c1tdKTogbnVtYmVyIHtcbiAgICBjb25zdCB0b3RhbCA9IHN0YXRzLnJlZHVjZSgoc3VtLCBzKSA9PiBzdW0gKyBzLnJldmlld2VkLCAwKTtcbiAgICBjb25zdCBjb3JyZWN0ID0gc3RhdHMucmVkdWNlKChzdW0sIHMpID0+IHN1bSArIHMuY29ycmVjdENvdW50LCAwKTtcbiAgICByZXR1cm4gdG90YWwgPiAwID8gY29ycmVjdCAvIHRvdGFsIDogMDtcbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0VGltZShzZWNvbmRzOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gMzYwMCk7XG4gICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKHNlY29uZHMgJSAzNjAwKSAvIDYwKTtcbiAgICBcbiAgICBpZiAoaG91cnMgPiAwKSB7XG4gICAgICByZXR1cm4gYCR7aG91cnN9aCAke21pbnV0ZXN9bWA7XG4gICAgfVxuICAgIHJldHVybiBgJHttaW51dGVzfW1gO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NzBFRFx1NTI5Qlx1NTZGRVx1NjU3MFx1NjM2RVx1RkYwOFx1NzUyOFx1NEU4RVx1NjVFNVx1NTM4Nlx1ODlDNlx1NTZGRVx1RkYwOVxuICAgKi9cbiAgZ2V0SGVhdG1hcERhdGEoZGF5czogbnVtYmVyID0gOTApOiB7IGRhdGU6IHN0cmluZzsgY291bnQ6IG51bWJlcjsgaW50ZW5zaXR5OiBudW1iZXIgfVtdIHtcbiAgICBjb25zdCBkYWlseVN0YXRzID0gdGhpcy5nZXREYWlseVN0YXRzKGRheXMpO1xuICAgIGNvbnN0IG1heFJldmlld3MgPSBNYXRoLm1heCguLi5kYWlseVN0YXRzLm1hcChzID0+IHMucmV2aWV3ZWQpKTtcblxuICAgIHJldHVybiBkYWlseVN0YXRzLm1hcChzdGF0ID0+ICh7XG4gICAgICBkYXRlOiBzdGF0LmRhdGUsXG4gICAgICBjb3VudDogc3RhdC5yZXZpZXdlZCxcbiAgICAgIGludGVuc2l0eTogbWF4UmV2aWV3cyA+IDAgPyBzdGF0LnJldmlld2VkIC8gbWF4UmV2aWV3cyA6IDBcbiAgICB9KSk7XG4gIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIExlYXJuaW5nU3lzdGVtUGx1Z2luIGZyb20gJy4uL21haW4nO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbnRlbnRVbml0IHtcbiAgaWQ6IHN0cmluZztcbiAgdHlwZTogJ2hpZ2hsaWdodCcgfCAnYm9sZCcgfCAndGFnJyB8ICdjdXN0b20nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIGZ1bGxDb250ZXh0Pzogc3RyaW5nO1xuICBzb3VyY2U6IHtcbiAgICBmaWxlOiBzdHJpbmc7XG4gICAgcG9zaXRpb246IHtcbiAgICAgIHN0YXJ0OiBudW1iZXI7XG4gICAgICBlbmQ6IG51bWJlcjtcbiAgICAgIGxpbmU6IG51bWJlcjtcbiAgICB9O1xuICAgIGJsb2NrSWQ/OiBzdHJpbmc7XG4gICAgaGVhZGluZz86IHN0cmluZztcbiAgICBhbmNob3JMaW5rOiBzdHJpbmc7XG4gIH07XG4gIGV4dHJhY3RSdWxlOiB7XG4gICAgcnVsZUlkOiBzdHJpbmc7XG4gICAgcnVsZU5hbWU6IHN0cmluZztcbiAgICBleHRyYWN0ZWRCeTogJ2F1dG8nIHwgJ21hbnVhbCc7XG4gIH07XG4gIG1ldGFkYXRhOiB7XG4gICAgY3JlYXRlZEF0OiBudW1iZXI7XG4gICAgdXBkYXRlZEF0OiBudW1iZXI7XG4gICAgdGFnczogc3RyaW5nW107XG4gICAgY29sb3I/OiBzdHJpbmc7XG4gIH07XG4gIGFubm90YXRpb25JZD86IHN0cmluZztcbiAgZmxhc2hjYXJkSWRzOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGNsYXNzIERhdGFNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBkYXRhRm9sZGVyOiBzdHJpbmc7XG4gIHByaXZhdGUgY29udGVudFVuaXRzOiBNYXA8c3RyaW5nLCBDb250ZW50VW5pdD4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgZmlsZUluZGV4OiBNYXA8c3RyaW5nLCBzdHJpbmdbXT4gPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW5cbiAgKSB7XG4gICAgdGhpcy5kYXRhRm9sZGVyID0gYCR7dGhpcy5hcHAudmF1bHQuY29uZmlnRGlyfS9wbHVnaW5zL2xlYXJuaW5nLXN5c3RlbS9kYXRhYDtcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUoKSB7XG4gICAgLy8gXHU3ODZFXHU0RkREXHU2NTcwXHU2MzZFXHU2NTg3XHU0RUY2XHU1OTM5XHU1QjU4XHU1NzI4XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVEYXRhRm9sZGVyKCk7XG4gICAgXG4gICAgLy8gXHU1MkEwXHU4RjdEXHU3M0IwXHU2NzA5XHU2NTcwXHU2MzZFXG4gICAgYXdhaXQgdGhpcy5sb2FkRGF0YSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBlbnN1cmVEYXRhRm9sZGVyKCkge1xuICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzLmFwcC52YXVsdC5hZGFwdGVyO1xuICAgIFxuICAgIC8vIFx1NTIxQlx1NUVGQVx1NEUzQlx1NjU3MFx1NjM2RVx1NjU4N1x1NEVGNlx1NTkzOVxuICAgIGlmICghKGF3YWl0IGFkYXB0ZXIuZXhpc3RzKHRoaXMuZGF0YUZvbGRlcikpKSB7XG4gICAgICBhd2FpdCBhZGFwdGVyLm1rZGlyKHRoaXMuZGF0YUZvbGRlcik7XG4gICAgfVxuXG4gICAgLy8gXHU1MjFCXHU1RUZBXHU1QjUwXHU2NTg3XHU0RUY2XHU1OTM5XG4gICAgY29uc3Qgc3ViZm9sZGVycyA9IFsnaW5kZXhlcycsICdjb25maWcnLCAnY2FjaGUnXTtcbiAgICBmb3IgKGNvbnN0IGZvbGRlciBvZiBzdWJmb2xkZXJzKSB7XG4gICAgICBjb25zdCBwYXRoID0gYCR7dGhpcy5kYXRhRm9sZGVyfS8ke2ZvbGRlcn1gO1xuICAgICAgaWYgKCEoYXdhaXQgYWRhcHRlci5leGlzdHMocGF0aCkpKSB7XG4gICAgICAgIGF3YWl0IGFkYXB0ZXIubWtkaXIocGF0aCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkRGF0YSgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGVudFBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L2NvbnRlbnQtdW5pdHMuanNvbmA7XG4gICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5hcHAudmF1bHQuYWRhcHRlcjtcblxuICAgICAgaWYgKGF3YWl0IGFkYXB0ZXIuZXhpc3RzKGNvbnRlbnRQYXRoKSkge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgYWRhcHRlci5yZWFkKGNvbnRlbnRQYXRoKTtcbiAgICAgICAgY29uc3QgdW5pdHM6IENvbnRlbnRVbml0W10gPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCB1bml0IG9mIHVuaXRzKSB7XG4gICAgICAgICAgdGhpcy5jb250ZW50VW5pdHMuc2V0KHVuaXQuaWQsIHVuaXQpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFx1Njc4NFx1NUVGQVx1NjU4N1x1NEVGNlx1N0QyMlx1NUYxNVxuICAgICAgICAgIGlmICghdGhpcy5maWxlSW5kZXguaGFzKHVuaXQuc291cmNlLmZpbGUpKSB7XG4gICAgICAgICAgICB0aGlzLmZpbGVJbmRleC5zZXQodW5pdC5zb3VyY2UuZmlsZSwgW10pO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmZpbGVJbmRleC5nZXQodW5pdC5zb3VyY2UuZmlsZSkhLnB1c2godW5pdC5pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBkYXRhOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzYXZlQ29udGVudFVuaXQodW5pdDogQ29udGVudFVuaXQpIHtcbiAgICB0aGlzLmNvbnRlbnRVbml0cy5zZXQodW5pdC5pZCwgdW5pdCk7XG4gICAgXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU2NTg3XHU0RUY2XHU3RDIyXHU1RjE1XG4gICAgaWYgKCF0aGlzLmZpbGVJbmRleC5oYXModW5pdC5zb3VyY2UuZmlsZSkpIHtcbiAgICAgIHRoaXMuZmlsZUluZGV4LnNldCh1bml0LnNvdXJjZS5maWxlLCBbXSk7XG4gICAgfVxuICAgIGlmICghdGhpcy5maWxlSW5kZXguZ2V0KHVuaXQuc291cmNlLmZpbGUpIS5pbmNsdWRlcyh1bml0LmlkKSkge1xuICAgICAgdGhpcy5maWxlSW5kZXguZ2V0KHVuaXQuc291cmNlLmZpbGUpIS5wdXNoKHVuaXQuaWQpO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMucGVyc2lzdCgpO1xuICB9XG5cbiAgYXN5bmMgc2F2ZUNvbnRlbnRVbml0cyh1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIGZvciAoY29uc3QgdW5pdCBvZiB1bml0cykge1xuICAgICAgdGhpcy5jb250ZW50VW5pdHMuc2V0KHVuaXQuaWQsIHVuaXQpO1xuICAgICAgXG4gICAgICBpZiAoIXRoaXMuZmlsZUluZGV4Lmhhcyh1bml0LnNvdXJjZS5maWxlKSkge1xuICAgICAgICB0aGlzLmZpbGVJbmRleC5zZXQodW5pdC5zb3VyY2UuZmlsZSwgW10pO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmZpbGVJbmRleC5nZXQodW5pdC5zb3VyY2UuZmlsZSkhLmluY2x1ZGVzKHVuaXQuaWQpKSB7XG4gICAgICAgIHRoaXMuZmlsZUluZGV4LmdldCh1bml0LnNvdXJjZS5maWxlKSEucHVzaCh1bml0LmlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnBlcnNpc3QoKTtcbiAgfVxuXG4gIGdldENvbnRlbnRVbml0KGlkOiBzdHJpbmcpOiBDb250ZW50VW5pdCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuY29udGVudFVuaXRzLmdldChpZCk7XG4gIH1cblxuICBnZXRDb250ZW50VW5pdHNCeUZpbGUoZmlsZVBhdGg6IHN0cmluZyk6IENvbnRlbnRVbml0W10ge1xuICAgIGNvbnN0IGlkcyA9IHRoaXMuZmlsZUluZGV4LmdldChmaWxlUGF0aCkgfHwgW107XG4gICAgcmV0dXJuIGlkcy5tYXAoaWQgPT4gdGhpcy5jb250ZW50VW5pdHMuZ2V0KGlkKSkuZmlsdGVyKEJvb2xlYW4pIGFzIENvbnRlbnRVbml0W107XG4gIH1cblxuICBnZXRBbGxDb250ZW50VW5pdHMoKTogQ29udGVudFVuaXRbXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5jb250ZW50VW5pdHMudmFsdWVzKCkpO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlQ29udGVudFVuaXQoaWQ6IHN0cmluZykge1xuICAgIGNvbnN0IHVuaXQgPSB0aGlzLmNvbnRlbnRVbml0cy5nZXQoaWQpO1xuICAgIGlmICh1bml0KSB7XG4gICAgICB0aGlzLmNvbnRlbnRVbml0cy5kZWxldGUoaWQpO1xuICAgICAgXG4gICAgICAvLyBcdTY2RjRcdTY1QjBcdTY1ODdcdTRFRjZcdTdEMjJcdTVGMTVcbiAgICAgIGNvbnN0IGZpbGVVbml0cyA9IHRoaXMuZmlsZUluZGV4LmdldCh1bml0LnNvdXJjZS5maWxlKTtcbiAgICAgIGlmIChmaWxlVW5pdHMpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBmaWxlVW5pdHMuaW5kZXhPZihpZCk7XG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgZmlsZVVuaXRzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0KCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBwZXJzaXN0KCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250ZW50UGF0aCA9IGAke3RoaXMuZGF0YUZvbGRlcn0vY29udGVudC11bml0cy5qc29uYDtcbiAgICAgIGNvbnN0IHVuaXRzID0gQXJyYXkuZnJvbSh0aGlzLmNvbnRlbnRVbml0cy52YWx1ZXMoKSk7XG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5zdHJpbmdpZnkodW5pdHMsIG51bGwsIDIpO1xuICAgICAgXG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGNvbnRlbnRQYXRoLCBkYXRhKTtcbiAgICAgIFxuICAgICAgLy8gXHU0RkREXHU1QjU4XHU3RDIyXHU1RjE1XG4gICAgICBjb25zdCBpbmRleFBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L2luZGV4ZXMvZmlsZS1pbmRleC5qc29uYDtcbiAgICAgIGNvbnN0IGluZGV4RGF0YSA9IEpTT04uc3RyaW5naWZ5KFxuICAgICAgICBPYmplY3QuZnJvbUVudHJpZXModGhpcy5maWxlSW5kZXgpLFxuICAgICAgICBudWxsLFxuICAgICAgICAyXG4gICAgICApO1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShpbmRleFBhdGgsIGluZGV4RGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBlcnNpc3RpbmcgZGF0YTonLCBlcnJvcik7XG4gICAgfVxuICB9XG59IiwgImltcG9ydCB7IEFwcCwgVEZpbGUsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERhdGFNYW5hZ2VyLCBDb250ZW50VW5pdCB9IGZyb20gJy4vRGF0YU1hbmFnZXInO1xuXG5leHBvcnQgY2xhc3MgRXh0cmFjdGlvbkVuZ2luZSB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgYXBwOiBBcHAsXG4gICAgcHJpdmF0ZSBkYXRhTWFuYWdlcjogRGF0YU1hbmFnZXJcbiAgKSB7fVxuXG4gIC8qKlxuICAgKiBcdTYyNkJcdTYzQ0ZcdTUzNTVcdTRFMkFcdTY1ODdcdTRFRjZcbiAgICovXG4gIGFzeW5jIHNjYW5GaWxlKGZpbGU6IFRGaWxlKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICBjb25zdCB1bml0cyA9IHRoaXMuZXh0cmFjdEhpZ2hsaWdodHMoZmlsZSwgY29udGVudCk7XG4gICAgICBcbiAgICAgIGlmICh1bml0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YU1hbmFnZXIuc2F2ZUNvbnRlbnRVbml0cyh1bml0cyk7XG4gICAgICAgIG5ldyBOb3RpY2UoYEV4dHJhY3RlZCAke3VuaXRzLmxlbmd0aH0gaGlnaGxpZ2h0cyBmcm9tICR7ZmlsZS5uYW1lfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZShgTm8gaGlnaGxpZ2h0cyBmb3VuZCBpbiAke2ZpbGUubmFtZX1gKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHVuaXRzLmxlbmd0aDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2Nhbm5pbmcgZmlsZTonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKGBFcnJvciBzY2FubmluZyBmaWxlOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU2MjZCXHU2M0NGXHU2NTc0XHU0RTJBIFZhdWx0XG4gICAqL1xuICBhc3luYyBzY2FuVmF1bHQoKTogUHJvbWlzZTx7IHNjYW5uZWQ6IG51bWJlcjsgZXh0cmFjdGVkOiBudW1iZXIgfT4ge1xuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIGxldCBzY2FubmVkID0gMDtcbiAgICBsZXQgZXh0cmFjdGVkID0gMDtcblxuICAgIG5ldyBOb3RpY2UoYFNjYW5uaW5nICR7ZmlsZXMubGVuZ3RofSBmaWxlcy4uLmApO1xuXG4gICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICBjb25zdCBjb3VudCA9IGF3YWl0IHRoaXMuc2NhbkZpbGUoZmlsZSk7XG4gICAgICBzY2FubmVkKys7XG4gICAgICBleHRyYWN0ZWQgKz0gY291bnQ7XG4gICAgfVxuXG4gICAgbmV3IE5vdGljZShgU2NhbiBjb21wbGV0ZSEgRXh0cmFjdGVkICR7ZXh0cmFjdGVkfSBpdGVtcyBmcm9tICR7c2Nhbm5lZH0gZmlsZXMuYCk7XG5cbiAgICByZXR1cm4geyBzY2FubmVkLCBleHRyYWN0ZWQgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYzRDBcdTUzRDZcdTlBRDhcdTRFQUVcdTUxODVcdTVCQjlcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdEhpZ2hsaWdodHMoZmlsZTogVEZpbGUsIGNvbnRlbnQ6IHN0cmluZyk6IENvbnRlbnRVbml0W10ge1xuICAgIGNvbnN0IHVuaXRzOiBDb250ZW50VW5pdFtdID0gW107XG4gICAgY29uc3QgaGlnaGxpZ2h0UmVnZXggPSAvPT0oLis/KT09L2c7XG4gICAgbGV0IG1hdGNoO1xuXG4gICAgd2hpbGUgKChtYXRjaCA9IGhpZ2hsaWdodFJlZ2V4LmV4ZWMoY29udGVudCkpICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBleHRyYWN0ZWRUZXh0ID0gbWF0Y2hbMV07XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuY2FsY3VsYXRlUG9zaXRpb24oY29udGVudCwgbWF0Y2guaW5kZXgpO1xuICAgICAgY29uc3QgZnVsbFNlbnRlbmNlID0gdGhpcy5leHRyYWN0RnVsbFNlbnRlbmNlKGNvbnRlbnQsIG1hdGNoLmluZGV4LCBtYXRjaFswXS5sZW5ndGgpO1xuXG4gICAgICBjb25zdCB1bml0OiBDb250ZW50VW5pdCA9IHtcbiAgICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVJZCgpLFxuICAgICAgICB0eXBlOiAnaGlnaGxpZ2h0JyxcbiAgICAgICAgY29udGVudDogZXh0cmFjdGVkVGV4dC50cmltKCksXG4gICAgICAgIGZ1bGxDb250ZXh0OiBmdWxsU2VudGVuY2UsXG4gICAgICAgIHNvdXJjZToge1xuICAgICAgICAgIGZpbGU6IGZpbGUucGF0aCxcbiAgICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgc3RhcnQ6IG1hdGNoLmluZGV4LFxuICAgICAgICAgICAgZW5kOiBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCxcbiAgICAgICAgICAgIGxpbmU6IHBvc2l0aW9uLmxpbmVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGhlYWRpbmc6IHRoaXMuZmluZEhlYWRpbmcoY29udGVudCwgbWF0Y2guaW5kZXgpLFxuICAgICAgICAgIGFuY2hvckxpbms6IGBbWyR7ZmlsZS5iYXNlbmFtZX0jXiR7dGhpcy5nZW5lcmF0ZUJsb2NrSWQoKX1dXWBcbiAgICAgICAgfSxcbiAgICAgICAgZXh0cmFjdFJ1bGU6IHtcbiAgICAgICAgICBydWxlSWQ6ICdoaWdobGlnaHQnLFxuICAgICAgICAgIHJ1bGVOYW1lOiAnSGlnaGxpZ2h0JyxcbiAgICAgICAgICBleHRyYWN0ZWRCeTogJ2F1dG8nXG4gICAgICAgIH0sXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgICB0YWdzOiB0aGlzLmV4dHJhY3RUYWdzKGNvbnRlbnQsIG1hdGNoLmluZGV4KVxuICAgICAgICB9LFxuICAgICAgICBmbGFzaGNhcmRJZHM6IFtdXG4gICAgICB9O1xuXG4gICAgICB1bml0cy5wdXNoKHVuaXQpO1xuICAgIH1cblxuICAgIHJldHVybiB1bml0cztcbiAgfVxuLyoqXG4gKiBcdTYzRDBcdTUzRDZcdTUzMDVcdTU0MkJcdTlBRDhcdTRFQUVcdTc2ODRcdTVCOENcdTY1NzRcdTUzRTVcdTVCNTBcbiAqL1xucHJpdmF0ZSBleHRyYWN0RnVsbFNlbnRlbmNlKGNvbnRlbnQ6IHN0cmluZywgaGlnaGxpZ2h0U3RhcnQ6IG51bWJlciwgaGlnaGxpZ2h0TGVuZ3RoOiBudW1iZXIpOiBzdHJpbmcge1xuICAvLyBcdTUzRTVcdTVCNTBcdTdFRDNcdTY3NUZcdTdCMjZcbiAgY29uc3Qgc2VudGVuY2VFbmRzID0gL1suIT9cdTMwMDJcdUZGMDFcdUZGMUZcXG5dLztcbiAgXG4gIC8vIFx1NTQxMVx1NTI0RFx1NjI3RVx1NTNFNVx1NUI1MFx1NUYwMFx1NTkzNFxuICBsZXQgc3RhcnQgPSBoaWdobGlnaHRTdGFydDtcbiAgd2hpbGUgKHN0YXJ0ID4gMCkge1xuICAgIGNvbnN0IGNoYXIgPSBjb250ZW50W3N0YXJ0IC0gMV07XG4gICAgaWYgKHNlbnRlbmNlRW5kcy50ZXN0KGNoYXIpKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgc3RhcnQtLTtcbiAgfVxuICBcbiAgLy8gXHU1NDExXHU1NDBFXHU2MjdFXHU1M0U1XHU1QjUwXHU3RUQzXHU1QzNFXG4gIGxldCBlbmQgPSBoaWdobGlnaHRTdGFydCArIGhpZ2hsaWdodExlbmd0aDtcbiAgd2hpbGUgKGVuZCA8IGNvbnRlbnQubGVuZ3RoKSB7XG4gICAgY29uc3QgY2hhciA9IGNvbnRlbnRbZW5kXTtcbiAgICBpZiAoc2VudGVuY2VFbmRzLnRlc3QoY2hhcikpIHtcbiAgICAgIGVuZCsrOyAvLyBcdTUzMDVcdTU0MkJcdTdFRDNcdTY3NUZcdTdCMjZcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBlbmQrKztcbiAgfVxuICBcbiAgcmV0dXJuIGNvbnRlbnQuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpLnRyaW0oKTtcbn1cbiAgLyoqXG4gICAqIFx1OEJBMVx1N0I5N1x1NjU4N1x1NjcyQ1x1NEY0RFx1N0Y2RVxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVQb3NpdGlvbihjb250ZW50OiBzdHJpbmcsIG9mZnNldDogbnVtYmVyKTogeyBsaW5lOiBudW1iZXI7IGNvbHVtbjogbnVtYmVyIH0ge1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zdWJzdHJpbmcoMCwgb2Zmc2V0KS5zcGxpdCgnXFxuJyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxpbmU6IGxpbmVzLmxlbmd0aCAtIDEsXG4gICAgICBjb2x1bW46IGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdLmxlbmd0aFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogXHU2N0U1XHU2MjdFXHU2MjQwXHU1NzI4XHU2ODA3XHU5ODk4XG4gICAqL1xuICBwcml2YXRlIGZpbmRIZWFkaW5nKGNvbnRlbnQ6IHN0cmluZywgcG9zaXRpb246IG51bWJlcik6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgYmVmb3JlQ29udGVudCA9IGNvbnRlbnQuc3Vic3RyaW5nKDAsIHBvc2l0aW9uKTtcbiAgICBjb25zdCBoZWFkaW5ncyA9IGJlZm9yZUNvbnRlbnQubWF0Y2goL14jezEsNn0gLiskL2dtKTtcbiAgICByZXR1cm4gaGVhZGluZ3MgPyBoZWFkaW5nc1toZWFkaW5ncy5sZW5ndGggLSAxXSA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYzRDBcdTUzRDZcdTk2NDRcdThGRDFcdTc2ODRcdTY4MDdcdTdCN0VcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdFRhZ3MoY29udGVudDogc3RyaW5nLCBwb3NpdGlvbjogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHRhZ3MgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBcbiAgICAvLyAxLiBcdTYzRDBcdTUzRDYgWUFNTCBmcm9udG1hdHRlciBcdTRFMkRcdTc2ODQgdGFnc1xuICAgIGNvbnN0IHlhbWxNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcbiAgICBpZiAoeWFtbE1hdGNoKSB7XG4gICAgICBjb25zdCB5YW1sQ29udGVudCA9IHlhbWxNYXRjaFsxXTtcbiAgICAgIC8vIFx1NTMzOVx1OTE0RCB0YWdzOiBbdGFnMSwgdGFnMl0gXHU2MjE2IHRhZ3M6IHRhZzFcbiAgICAgIGNvbnN0IHRhZ3NNYXRjaCA9IHlhbWxDb250ZW50Lm1hdGNoKC9edGFnczpcXHMqKC4rKSQvbSk7XG4gICAgICBpZiAodGFnc01hdGNoKSB7XG4gICAgICAgIGNvbnN0IHRhZ0NvbnRlbnQgPSB0YWdzTWF0Y2hbMV0udHJpbSgpO1xuICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTY1NzBcdTdFQzRcdTY4M0NcdTVGMEYgW3RhZzEsIHRhZzJdXG4gICAgICAgIGlmICh0YWdDb250ZW50LnN0YXJ0c1dpdGgoJ1snKSkge1xuICAgICAgICAgIGNvbnN0IGFycmF5VGFncyA9IHRhZ0NvbnRlbnQubWF0Y2goL1tcXHcvLV0rL2cpO1xuICAgICAgICAgIGFycmF5VGFncz8uZm9yRWFjaCh0YWcgPT4gdGFncy5hZGQoYCMke3RhZ31gKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU1MzU1XHU0RTJBIHRhZyBcdTYyMTZcdTkwMTdcdTUzRjdcdTUyMDZcdTk2OTRcbiAgICAgICAgICB0YWdDb250ZW50LnNwbGl0KCcsJykuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2xlYW5lZCA9IHRhZy50cmltKCk7XG4gICAgICAgICAgICBpZiAoY2xlYW5lZCkgdGFncy5hZGQoYCMke2NsZWFuZWR9YCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gMi4gXHU2M0QwXHU1M0Q2XHU1M0U1XHU1QjUwXHU2NzJCXHU1QzNFXHU3Njg0IGlubGluZSB0YWdzXG4gICAgLy8gXHU2MjdFXHU1MjMwXHU1RjUzXHU1MjREXHU5QUQ4XHU0RUFFXHU2MjQwXHU1NzI4XHU3Njg0XHU4ODRDXG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnN1YnN0cmluZygwLCBwb3NpdGlvbikuc3BsaXQoJ1xcbicpO1xuICAgIGNvbnN0IGN1cnJlbnRMaW5lID0gbGluZXMubGVuZ3RoIC0gMTtcbiAgICBjb25zdCBsaW5lQ29udGVudCA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpW2N1cnJlbnRMaW5lXSB8fCAnJztcbiAgICBcbiAgICAvLyBcdTUzMzlcdTkxNERcdTY1MkZcdTYzMDFcdTU5MUFcdTdFQTdcdThERUZcdTVGODRcdTc2ODQgdGFnOiAjdGFnIFx1NjIxNiAjdGFnL3N1YnRhZy9zdWJzdWJ0YWdcbiAgICBjb25zdCBpbmxpbmVUYWdSZWdleCA9IC8jW1xcdy8tXSsvZztcbiAgICBjb25zdCBpbmxpbmVUYWdzID0gbGluZUNvbnRlbnQubWF0Y2goaW5saW5lVGFnUmVnZXgpO1xuICAgIGlubGluZVRhZ3M/LmZvckVhY2godGFnID0+IHRhZ3MuYWRkKHRhZykpO1xuICAgIFxuICAgIHJldHVybiBBcnJheS5mcm9tKHRhZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NzUxRlx1NjIxMFx1NTUyRlx1NEUwMCBJRFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gIH1cblxuICAvKipcbiAgICogXHU3NTFGXHU2MjEwIEJsb2NrIElEXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlQmxvY2tJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgZXh0cmFjdC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDYpfWA7XG4gIH1cbn0iLCAiaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW5ub3RhdGlvbiB7XG4gIGlkOiBzdHJpbmc7XG4gIHRhcmdldFR5cGU6ICdjb250ZW50JyB8ICdmaWxlJztcbiAgdGFyZ2V0SWQ6IHN0cmluZztcbiAgY29udGVudDogc3RyaW5nO1xuICBiYWRnZT86IHtcbiAgICB0ZXh0OiBzdHJpbmc7XG4gICAgY29sb3I6IHN0cmluZztcbiAgICBpY29uPzogc3RyaW5nO1xuICB9O1xuICBtZXRhZGF0YToge1xuICAgIGNyZWF0ZWRBdDogbnVtYmVyO1xuICAgIHVwZGF0ZWRBdDogbnVtYmVyO1xuICAgIGlzUGlubmVkPzogYm9vbGVhbjtcbiAgfTtcbn1cblxuZXhwb3J0IGNsYXNzIEFubm90YXRpb25NYW5hZ2VyIHtcbiAgcHJpdmF0ZSBhbm5vdGF0aW9uczogTWFwPHN0cmluZywgQW5ub3RhdGlvbj4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgZGF0YUZvbGRlcjogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgYXBwOiBBcHAsXG4gICAgcHJpdmF0ZSBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luXG4gICkge1xuICAgIHRoaXMuZGF0YUZvbGRlciA9IGAke3RoaXMuYXBwLnZhdWx0LmNvbmZpZ0Rpcn0vcGx1Z2lucy9sZWFybmluZy1zeXN0ZW0vZGF0YWA7XG4gIH1cblxuICBhc3luYyBpbml0aWFsaXplKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZEFubm90YXRpb25zKCk7XG4gIH1cblxuICAvKipcbiAgICogXHU1MkEwXHU4RjdEXHU2MjQwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGxvYWRBbm5vdGF0aW9ucygpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGF0aCA9IGAke3RoaXMuZGF0YUZvbGRlcn0vYW5ub3RhdGlvbnMuanNvbmA7XG4gICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5hcHAudmF1bHQuYWRhcHRlcjtcblxuICAgICAgaWYgKGF3YWl0IGFkYXB0ZXIuZXhpc3RzKHBhdGgpKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhZGFwdGVyLnJlYWQocGF0aCk7XG4gICAgICAgIGNvbnN0IGFubm90YXRpb25zOiBBbm5vdGF0aW9uW10gPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBhbm5vdGF0aW9uIG9mIGFubm90YXRpb25zKSB7XG4gICAgICAgICAgdGhpcy5hbm5vdGF0aW9ucy5zZXQoYW5ub3RhdGlvbi5pZCwgYW5ub3RhdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBhbm5vdGF0aW9uczonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NkRGQlx1NTJBMFx1NTE4NVx1NUJCOVx1NjI3OVx1NkNFOFxuICAgKi9cbiAgYXN5bmMgYWRkQ29udGVudEFubm90YXRpb24oXG4gICAgY29udGVudFVuaXRJZDogc3RyaW5nLFxuICAgIGNvbnRlbnQ6IHN0cmluZyxcbiAgICBiYWRnZT86IEFubm90YXRpb25bJ2JhZGdlJ11cbiAgKTogUHJvbWlzZTxBbm5vdGF0aW9uPiB7XG4gICAgY29uc3QgYW5ub3RhdGlvbjogQW5ub3RhdGlvbiA9IHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgIHRhcmdldFR5cGU6ICdjb250ZW50JyxcbiAgICAgIHRhcmdldElkOiBjb250ZW50VW5pdElkLFxuICAgICAgY29udGVudCxcbiAgICAgIGJhZGdlLFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KClcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5hbm5vdGF0aW9ucy5zZXQoYW5ub3RhdGlvbi5pZCwgYW5ub3RhdGlvbik7XG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0KCk7XG5cbiAgICAvLyBcdTY2RjRcdTY1QjAgQ29udGVudFVuaXQgXHU1MTczXHU4MDU0XG4gICAgY29uc3QgY29udGVudFVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjb250ZW50VW5pdElkKTtcbiAgICBpZiAoY29udGVudFVuaXQpIHtcbiAgICAgIGNvbnRlbnRVbml0LmFubm90YXRpb25JZCA9IGFubm90YXRpb24uaWQ7XG4gICAgICBjb250ZW50VW5pdC5tZXRhZGF0YS51cGRhdGVkQXQgPSBEYXRlLm5vdygpO1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuc2F2ZUNvbnRlbnRVbml0KGNvbnRlbnRVbml0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYW5ub3RhdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTZERkJcdTUyQTBcdTY1ODdcdTRFRjZcdTYyNzlcdTZDRThcbiAgICovXG4gIGFzeW5jIGFkZEZpbGVBbm5vdGF0aW9uKFxuICAgIGZpbGVQYXRoOiBzdHJpbmcsXG4gICAgY29udGVudDogc3RyaW5nXG4gICk6IFByb21pc2U8QW5ub3RhdGlvbj4ge1xuICAgIGNvbnN0IGFubm90YXRpb246IEFubm90YXRpb24gPSB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICB0YXJnZXRUeXBlOiAnZmlsZScsXG4gICAgICB0YXJnZXRJZDogZmlsZVBhdGgsXG4gICAgICBjb250ZW50LFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KClcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5hbm5vdGF0aW9ucy5zZXQoYW5ub3RhdGlvbi5pZCwgYW5ub3RhdGlvbik7XG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0KCk7XG5cbiAgICByZXR1cm4gYW5ub3RhdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTYyNzlcdTZDRThcbiAgICovXG4gIGdldEFubm90YXRpb24oaWQ6IHN0cmluZyk6IEFubm90YXRpb24gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmFubm90YXRpb25zLmdldChpZCk7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU1MTg1XHU1QkI5XHU3Njg0XHU2Mjc5XHU2Q0U4XG4gICAqL1xuICBnZXRDb250ZW50QW5ub3RhdGlvbihjb250ZW50VW5pdElkOiBzdHJpbmcpOiBBbm5vdGF0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBjb250ZW50VW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNvbnRlbnRVbml0SWQpO1xuICAgIGlmICghY29udGVudFVuaXQ/LmFubm90YXRpb25JZCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBcbiAgICByZXR1cm4gdGhpcy5hbm5vdGF0aW9ucy5nZXQoY29udGVudFVuaXQuYW5ub3RhdGlvbklkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTY1ODdcdTRFRjZcdTc2ODRcdTYyNDBcdTY3MDlcdTYyNzlcdTZDRThcbiAgICovXG4gIGdldEZpbGVBbm5vdGF0aW9ucyhmaWxlUGF0aDogc3RyaW5nKTogQW5ub3RhdGlvbltdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmFubm90YXRpb25zLnZhbHVlcygpKS5maWx0ZXIoXG4gICAgICBhbm4gPT4gYW5uLnRhcmdldFR5cGUgPT09ICdmaWxlJyAmJiBhbm4udGFyZ2V0SWQgPT09IGZpbGVQYXRoXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTY2RjRcdTY1QjBcdTYyNzlcdTZDRThcbiAgICovXG4gIGFzeW5jIHVwZGF0ZUFubm90YXRpb24oXG4gICAgaWQ6IHN0cmluZyxcbiAgICB1cGRhdGVzOiBQYXJ0aWFsPEFubm90YXRpb24+XG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLmFubm90YXRpb25zLmdldChpZCk7XG4gICAgaWYgKCFhbm5vdGF0aW9uKSByZXR1cm47XG5cbiAgICBPYmplY3QuYXNzaWduKGFubm90YXRpb24sIHVwZGF0ZXMsIHtcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIC4uLmFubm90YXRpb24ubWV0YWRhdGEsXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0KCk7XG4gIH1cblxuICAvKipcbiAgICogXHU1MjIwXHU5NjY0XHU2Mjc5XHU2Q0U4XG4gICAqL1xuICBhc3luYyBkZWxldGVBbm5vdGF0aW9uKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5hbm5vdGF0aW9ucy5nZXQoaWQpO1xuICAgIGlmICghYW5ub3RhdGlvbikgcmV0dXJuO1xuXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU2NjJGXHU1MTg1XHU1QkI5XHU2Mjc5XHU2Q0U4XHVGRjBDXHU4OUUzXHU5NjY0XHU1MTczXHU4MDU0XG4gICAgaWYgKGFubm90YXRpb24udGFyZ2V0VHlwZSA9PT0gJ2NvbnRlbnQnKSB7XG4gICAgICBjb25zdCBjb250ZW50VW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGFubm90YXRpb24udGFyZ2V0SWQpO1xuICAgICAgaWYgKGNvbnRlbnRVbml0KSB7XG4gICAgICAgIGNvbnRlbnRVbml0LmFubm90YXRpb25JZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuc2F2ZUNvbnRlbnRVbml0KGNvbnRlbnRVbml0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmFubm90YXRpb25zLmRlbGV0ZShpZCk7XG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0KCk7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU2MjQwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAqL1xuICBnZXRBbGxBbm5vdGF0aW9ucygpOiBBbm5vdGF0aW9uW10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYW5ub3RhdGlvbnMudmFsdWVzKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjMwMVx1NEU0NVx1NTMxNlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwZXJzaXN0KCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXRoID0gYCR7dGhpcy5kYXRhRm9sZGVyfS9hbm5vdGF0aW9ucy5qc29uYDtcbiAgICAgIGNvbnN0IGFubm90YXRpb25zID0gQXJyYXkuZnJvbSh0aGlzLmFubm90YXRpb25zLnZhbHVlcygpKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnN0cmluZ2lmeShhbm5vdGF0aW9ucywgbnVsbCwgMik7XG4gICAgICBcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUocGF0aCwgZGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBlcnNpc3RpbmcgYW5ub3RhdGlvbnM6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTc1MUZcdTYyMTBcdTU1MkZcdTRFMDAgSURcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgYW5uLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcbiAgfVxufSIsICJpbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcblxuZXhwb3J0IGludGVyZmFjZSBGbGFzaGNhcmQge1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiAncWEnIHwgJ2Nsb3plJztcbiAgc291cmNlQ29udGVudElkOiBzdHJpbmc7XG4gIHNvdXJjZUZpbGU6IHN0cmluZztcbiAgYW5jaG9yTGluazogc3RyaW5nO1xuICBcbiAgLy8gXHU1MzYxXHU3MjQ3XHU1MTg1XHU1QkI5XG4gIGZyb250OiBzdHJpbmc7XG4gIGJhY2s6IHN0cmluZyB8IHN0cmluZ1tdO1xuICBcbiAgLy8gXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU0RTEzXHU3NTI4XG4gIGNsb3plPzoge1xuICAgIG9yaWdpbmFsOiBzdHJpbmc7XG4gICAgZGVsZXRpb25zOiB7XG4gICAgICBpbmRleDogbnVtYmVyO1xuICAgICAgYW5zd2VyOiBzdHJpbmc7XG4gICAgICBhbHRlcm5hdGl2ZXM/OiBzdHJpbmdbXTtcbiAgICB9W107XG4gIH07XG4gIFxuICAvLyBcdTUyMDZcdTdFQzRcbiAgZGVjazogc3RyaW5nO1xuICB0YWdzOiBzdHJpbmdbXTtcbiAgXG4gIC8vIFx1NTkwRFx1NEU2MFx1NjU3MFx1NjM2RVxuICBzY2hlZHVsaW5nOiB7XG4gICAgaW50ZXJ2YWw6IG51bWJlcjtcbiAgICBlYXNlOiBudW1iZXI7XG4gICAgZHVlOiBudW1iZXI7XG4gICAgbGFwc2VzOiBudW1iZXI7XG4gICAgcmVwczogbnVtYmVyO1xuICAgIHN0YXRlOiAnbmV3JyB8ICdsZWFybmluZycgfCAncmV2aWV3JyB8ICdyZWxlYXJuaW5nJztcbiAgfTtcbiAgXG4gIC8vIFx1N0VERlx1OEJBMVxuICBzdGF0czoge1xuICAgIHRvdGFsUmV2aWV3czogbnVtYmVyO1xuICAgIGNvcnJlY3RDb3VudDogbnVtYmVyO1xuICAgIGF2ZXJhZ2VUaW1lOiBudW1iZXI7XG4gICAgbGFzdFJldmlldz86IG51bWJlcjtcbiAgICBkaWZmaWN1bHR5OiBudW1iZXI7XG4gIH07XG4gIFxuICBtZXRhZGF0YToge1xuICAgIGNyZWF0ZWRBdDogbnVtYmVyO1xuICAgIHVwZGF0ZWRBdDogbnVtYmVyO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJldmlld0xvZyB7XG4gIGlkOiBzdHJpbmc7XG4gIGZsYXNoY2FyZElkOiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xuICByZXNwb25zZToge1xuICAgIHVzZXJBbnN3ZXI/OiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgICB0aW1lU3BlbnQ6IG51bWJlcjtcbiAgICBlYXNlOiAnYWdhaW4nIHwgJ2hhcmQnIHwgJ2dvb2QnIHwgJ2Vhc3knO1xuICB9O1xuICBncmFkaW5nPzoge1xuICAgIGNvcnJlY3RuZXNzOiAnY29ycmVjdCcgfCAncGFydGlhbCcgfCAnd3JvbmcnO1xuICAgIHNpbWlsYXJpdHk/OiBudW1iZXI7XG4gIH07XG4gIHNjaGVkdWxpbmdDaGFuZ2U6IHtcbiAgICBvbGRJbnRlcnZhbDogbnVtYmVyO1xuICAgIG5ld0ludGVydmFsOiBudW1iZXI7XG4gICAgb2xkRWFzZTogbnVtYmVyO1xuICAgIG5ld0Vhc2U6IG51bWJlcjtcbiAgfTtcbn1cblxuZXhwb3J0IGNsYXNzIEZsYXNoY2FyZE1hbmFnZXIge1xuICBwcml2YXRlIGZsYXNoY2FyZHM6IE1hcDxzdHJpbmcsIEZsYXNoY2FyZD4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgcmV2aWV3TG9nczogUmV2aWV3TG9nW10gPSBbXTtcbiAgcHJpdmF0ZSBkYXRhRm9sZGVyOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW5cbiAgKSB7XG4gICAgdGhpcy5kYXRhRm9sZGVyID0gYCR7dGhpcy5hcHAudmF1bHQuY29uZmlnRGlyfS9wbHVnaW5zL2xlYXJuaW5nLXN5c3RlbS9kYXRhYDtcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUoKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkRmxhc2hjYXJkcygpO1xuICAgIGF3YWl0IHRoaXMubG9hZFJldmlld0xvZ3MoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZEZsYXNoY2FyZHMoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L2ZsYXNoY2FyZHMuanNvbmA7XG4gICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5hcHAudmF1bHQuYWRhcHRlcjtcblxuICAgICAgaWYgKGF3YWl0IGFkYXB0ZXIuZXhpc3RzKHBhdGgpKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhZGFwdGVyLnJlYWQocGF0aCk7XG4gICAgICAgIGNvbnN0IGZsYXNoY2FyZHM6IEZsYXNoY2FyZFtdID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgY2FyZCBvZiBmbGFzaGNhcmRzKSB7XG4gICAgICAgICAgdGhpcy5mbGFzaGNhcmRzLnNldChjYXJkLmlkLCBjYXJkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGZsYXNoY2FyZHM6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZFJldmlld0xvZ3MoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L3Jldmlldy1sb2dzLmpzb25gO1xuICAgICAgY29uc3QgYWRhcHRlciA9IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXI7XG5cbiAgICAgIGlmIChhd2FpdCBhZGFwdGVyLmV4aXN0cyhwYXRoKSkge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgYWRhcHRlci5yZWFkKHBhdGgpO1xuICAgICAgICB0aGlzLnJldmlld0xvZ3MgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIHJldmlldyBsb2dzOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU1MjFCXHU1RUZBXHU5NUVFXHU3QjU0XHU1MzYxXG4gICAqL1xuICBhc3luYyBjcmVhdGVRQUNhcmQoXG4gICAgY29udGVudFVuaXRJZDogc3RyaW5nLFxuICAgIHF1ZXN0aW9uOiBzdHJpbmcsXG4gICAgYW5zd2VyOiBzdHJpbmcsXG4gICAgZGVjaz86IHN0cmluZ1xuICApOiBQcm9taXNlPEZsYXNoY2FyZD4ge1xuICAgIGNvbnN0IGNvbnRlbnRVbml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY29udGVudFVuaXRJZCk7XG4gICAgaWYgKCFjb250ZW50VW5pdCkgdGhyb3cgbmV3IEVycm9yKCdDb250ZW50IHVuaXQgbm90IGZvdW5kJyk7XG5cbiAgICBjb25zdCBjYXJkOiBGbGFzaGNhcmQgPSB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICB0eXBlOiAncWEnLFxuICAgICAgc291cmNlQ29udGVudElkOiBjb250ZW50VW5pdElkLFxuICAgICAgc291cmNlRmlsZTogY29udGVudFVuaXQuc291cmNlLmZpbGUsXG4gICAgICBhbmNob3JMaW5rOiBjb250ZW50VW5pdC5zb3VyY2UuYW5jaG9yTGluayxcbiAgICAgIGZyb250OiBxdWVzdGlvbixcbiAgICAgIGJhY2s6IGFuc3dlcixcbiAgICAgIGRlY2s6IGRlY2sgfHwgdGhpcy5pbmZlckRlY2soY29udGVudFVuaXQuc291cmNlLmZpbGUpLFxuICAgICAgdGFnczogY29udGVudFVuaXQubWV0YWRhdGEudGFncyxcbiAgICAgIHNjaGVkdWxpbmc6IHRoaXMuaW5pdGlhbGl6ZVNjaGVkdWxpbmcoKSxcbiAgICAgIHN0YXRzOiB7XG4gICAgICAgIHRvdGFsUmV2aWV3czogMCxcbiAgICAgICAgY29ycmVjdENvdW50OiAwLFxuICAgICAgICBhdmVyYWdlVGltZTogMCxcbiAgICAgICAgZGlmZmljdWx0eTogMC41XG4gICAgICB9LFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KClcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5mbGFzaGNhcmRzLnNldChjYXJkLmlkLCBjYXJkKTtcbiAgICBcbiAgICAvLyBcdTY2RjRcdTY1QjAgQ29udGVudFVuaXQgXHU1MTczXHU4MDU0XG4gICAgY29udGVudFVuaXQuZmxhc2hjYXJkSWRzLnB1c2goY2FyZC5pZCk7XG4gICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuc2F2ZUNvbnRlbnRVbml0KGNvbnRlbnRVbml0KTtcbiAgICBcbiAgICBhd2FpdCB0aGlzLnBlcnNpc3RGbGFzaGNhcmRzKCk7XG4gICAgcmV0dXJuIGNhcmQ7XG4gIH1cblxuICAvKipcbiAgICogXHU1MjFCXHU1RUZBXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU1MzYxXG4gICAqL1xuICBhc3luYyBjcmVhdGVDbG96ZUNhcmQoXG4gICAgY29udGVudFVuaXRJZDogc3RyaW5nLFxuICAgIG9yaWdpbmFsOiBzdHJpbmcsXG4gICAgZGVsZXRpb25zOiB7IGluZGV4OiBudW1iZXI7IGFuc3dlcjogc3RyaW5nOyBhbHRlcm5hdGl2ZXM/OiBzdHJpbmdbXSB9W11cbiAgKTogUHJvbWlzZTxGbGFzaGNhcmQ+IHtcbiAgICBjb25zdCBjb250ZW50VW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNvbnRlbnRVbml0SWQpO1xuICAgIGlmICghY29udGVudFVuaXQpIHRocm93IG5ldyBFcnJvcignQ29udGVudCB1bml0IG5vdCBmb3VuZCcpO1xuXG4gICAgY29uc3QgZnJvbnQgPSB0aGlzLmdlbmVyYXRlQ2xvemVUZXh0KG9yaWdpbmFsLCBkZWxldGlvbnMpO1xuICAgIGNvbnN0IGJhY2sgPSBkZWxldGlvbnMubWFwKGQgPT4gZC5hbnN3ZXIpO1xuXG4gICAgY29uc3QgY2FyZDogRmxhc2hjYXJkID0ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVJZCgpLFxuICAgICAgdHlwZTogJ2Nsb3plJyxcbiAgICAgIHNvdXJjZUNvbnRlbnRJZDogY29udGVudFVuaXRJZCxcbiAgICAgIHNvdXJjZUZpbGU6IGNvbnRlbnRVbml0LnNvdXJjZS5maWxlLFxuICAgICAgYW5jaG9yTGluazogY29udGVudFVuaXQuc291cmNlLmFuY2hvckxpbmssXG4gICAgICBmcm9udCxcbiAgICAgIGJhY2ssXG4gICAgICBjbG96ZToge1xuICAgICAgICBvcmlnaW5hbCxcbiAgICAgICAgZGVsZXRpb25zXG4gICAgICB9LFxuICAgICAgZGVjazogdGhpcy5pbmZlckRlY2soY29udGVudFVuaXQuc291cmNlLmZpbGUpLFxuICAgICAgdGFnczogY29udGVudFVuaXQubWV0YWRhdGEudGFncyxcbiAgICAgIHNjaGVkdWxpbmc6IHRoaXMuaW5pdGlhbGl6ZVNjaGVkdWxpbmcoKSxcbiAgICAgIHN0YXRzOiB7XG4gICAgICAgIHRvdGFsUmV2aWV3czogMCxcbiAgICAgICAgY29ycmVjdENvdW50OiAwLFxuICAgICAgICBhdmVyYWdlVGltZTogMCxcbiAgICAgICAgZGlmZmljdWx0eTogMC41XG4gICAgICB9LFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KClcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5mbGFzaGNhcmRzLnNldChjYXJkLmlkLCBjYXJkKTtcbiAgICBcbiAgICBjb250ZW50VW5pdC5mbGFzaGNhcmRJZHMucHVzaChjYXJkLmlkKTtcbiAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5zYXZlQ29udGVudFVuaXQoY29udGVudFVuaXQpO1xuICAgIFxuICAgIGF3YWl0IHRoaXMucGVyc2lzdEZsYXNoY2FyZHMoKTtcbiAgICByZXR1cm4gY2FyZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTk1RUFcdTUzNjFcbiAgICovXG4gIGdldEZsYXNoY2FyZChpZDogc3RyaW5nKTogRmxhc2hjYXJkIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5mbGFzaGNhcmRzLmdldChpZCk7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU2MjQwXHU2NzA5XHU5NUVBXHU1MzYxXG4gICAqL1xuICBnZXRBbGxGbGFzaGNhcmRzKCk6IEZsYXNoY2FyZFtdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmZsYXNoY2FyZHMudmFsdWVzKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NEVDQVx1NjVFNVx1NUY4NVx1NTkwRFx1NEU2MFx1NzY4NFx1NTM2MVx1NzI0N1xuICAgKi9cbiAgZ2V0RHVlQ2FyZHMoKTogRmxhc2hjYXJkW10ge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5mbGFzaGNhcmRzLnZhbHVlcygpKVxuICAgICAgLmZpbHRlcihjYXJkID0+IGNhcmQuc2NoZWR1bGluZy5kdWUgPD0gbm93KVxuICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgLy8gXHU0RjE4XHU1MTQ4XHU3RUE3XHVGRjFBXHU4RkM3XHU2NzFGXHU2NUY2XHU5NUY0XHU4RDhBXHU5NTdGID4gXHU2NUIwXHU1MzYxXHU3MjQ3ID4gXHU2QjYzXHU1NzI4XHU1QjY2XHU0RTYwXG4gICAgICAgIGNvbnN0IGFQcmlvcml0eSA9IHRoaXMuZ2V0Q2FyZFByaW9yaXR5KGEpO1xuICAgICAgICBjb25zdCBiUHJpb3JpdHkgPSB0aGlzLmdldENhcmRQcmlvcml0eShiKTtcbiAgICAgICAgcmV0dXJuIGJQcmlvcml0eSAtIGFQcmlvcml0eTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NjVCMFx1NTM2MVx1NzI0N1xuICAgKi9cbiAgZ2V0TmV3Q2FyZHMoKTogRmxhc2hjYXJkW10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZmxhc2hjYXJkcy52YWx1ZXMoKSlcbiAgICAgIC5maWx0ZXIoY2FyZCA9PiBjYXJkLnNjaGVkdWxpbmcuc3RhdGUgPT09ICduZXcnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTY2RjRcdTY1QjBcdTUzNjFcdTcyNDdcdUZGMDhcdTU5MERcdTRFNjBcdTU0MEVcdUZGMDlcbiAgICovXG4gIGFzeW5jIHVwZGF0ZUNhcmQoY2FyZDogRmxhc2hjYXJkKSB7XG4gICAgdGhpcy5mbGFzaGNhcmRzLnNldChjYXJkLmlkLCBjYXJkKTtcbiAgICBhd2FpdCB0aGlzLnBlcnNpc3RGbGFzaGNhcmRzKCk7XG4gIH1cblxuICAvKipcbiAgICogXHU1MjIwXHU5NjY0XHU1MzYxXHU3MjQ3XG4gICAqL1xuICBhc3luYyBkZWxldGVDYXJkKGlkOiBzdHJpbmcpIHtcbiAgICBjb25zdCBjYXJkID0gdGhpcy5mbGFzaGNhcmRzLmdldChpZCk7XG4gICAgaWYgKCFjYXJkKSByZXR1cm47XG5cbiAgICAvLyBcdTg5RTNcdTk2NjQgQ29udGVudFVuaXQgXHU1MTczXHU4MDU0XG4gICAgY29uc3QgY29udGVudFVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjYXJkLnNvdXJjZUNvbnRlbnRJZCk7XG4gICAgaWYgKGNvbnRlbnRVbml0KSB7XG4gICAgICBjb25zdCBpbmRleCA9IGNvbnRlbnRVbml0LmZsYXNoY2FyZElkcy5pbmRleE9mKGlkKTtcbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIGNvbnRlbnRVbml0LmZsYXNoY2FyZElkcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5zYXZlQ29udGVudFVuaXQoY29udGVudFVuaXQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZmxhc2hjYXJkcy5kZWxldGUoaWQpO1xuICAgIGF3YWl0IHRoaXMucGVyc2lzdEZsYXNoY2FyZHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdThCQjBcdTVGNTVcdTU5MERcdTRFNjBcdTY1RTVcdTVGRDdcbiAgICovXG4gIGFzeW5jIGxvZ1Jldmlldyhsb2c6IFJldmlld0xvZykge1xuICAgIHRoaXMucmV2aWV3TG9ncy5wdXNoKGxvZyk7XG4gICAgXG4gICAgLy8gXHU1M0VBXHU0RkREXHU3NTU5XHU2NzAwXHU4RkQxIDEwMDAgXHU2NzYxXHU4QkIwXHU1RjU1XG4gICAgaWYgKHRoaXMucmV2aWV3TG9ncy5sZW5ndGggPiAxMDAwKSB7XG4gICAgICB0aGlzLnJldmlld0xvZ3MgPSB0aGlzLnJldmlld0xvZ3Muc2xpY2UoLTEwMDApO1xuICAgIH1cbiAgICBcbiAgICBhd2FpdCB0aGlzLnBlcnNpc3RSZXZpZXdMb2dzKCk7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU1MzYxXHU3MjQ3XHU3Njg0XHU1OTBEXHU0RTYwXHU1Mzg2XHU1M0YyXG4gICAqL1xuICBnZXRDYXJkUmV2aWV3SGlzdG9yeShjYXJkSWQ6IHN0cmluZyk6IFJldmlld0xvZ1tdIHtcbiAgICByZXR1cm4gdGhpcy5yZXZpZXdMb2dzLmZpbHRlcihsb2cgPT4gbG9nLmZsYXNoY2FyZElkID09PSBjYXJkSWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NTIxRFx1NTlDQlx1NTMxNlx1OEMwM1x1NUVBNlx1NTNDMlx1NjU3MFxuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplU2NoZWR1bGluZygpOiBGbGFzaGNhcmRbJ3NjaGVkdWxpbmcnXSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGludGVydmFsOiAwLFxuICAgICAgZWFzZTogMi41LFxuICAgICAgZHVlOiBEYXRlLm5vdygpLFxuICAgICAgbGFwc2VzOiAwLFxuICAgICAgcmVwczogMCxcbiAgICAgIHN0YXRlOiAnbmV3J1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogXHU3NTFGXHU2MjEwXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU2NTg3XHU2NzJDXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlQ2xvemVUZXh0KFxuICAgIG9yaWdpbmFsOiBzdHJpbmcsXG4gICAgZGVsZXRpb25zOiB7IGluZGV4OiBudW1iZXI7IGFuc3dlcjogc3RyaW5nIH1bXVxuICApOiBzdHJpbmcge1xuICAgIGxldCByZXN1bHQgPSBvcmlnaW5hbDtcbiAgICBjb25zdCBzb3J0ZWQgPSBbLi4uZGVsZXRpb25zXS5zb3J0KChhLCBiKSA9PiBiLmluZGV4IC0gYS5pbmRleCk7XG4gICAgXG4gICAgZm9yIChjb25zdCBkZWxldGlvbiBvZiBzb3J0ZWQpIHtcbiAgICAgIGNvbnN0IGJlZm9yZSA9IHJlc3VsdC5zdWJzdHJpbmcoMCwgZGVsZXRpb24uaW5kZXgpO1xuICAgICAgY29uc3QgYWZ0ZXIgPSByZXN1bHQuc3Vic3RyaW5nKGRlbGV0aW9uLmluZGV4ICsgZGVsZXRpb24uYW5zd2VyLmxlbmd0aCk7XG4gICAgICByZXN1bHQgPSBgJHtiZWZvcmV9Wy4uLl0ke2FmdGVyfWA7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogXHU2M0E4XHU2NUFEXHU1MzYxXHU3RUM0XHU1NDBEXHU3OUYwXG4gICAqL1xuICBwcml2YXRlIGluZmVyRGVjayhmaWxlUGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBwYXJ0cyA9IGZpbGVQYXRoLnNwbGl0KCcvJyk7XG4gICAgcmV0dXJuIHBhcnRzLmxlbmd0aCA+IDEgPyBwYXJ0c1twYXJ0cy5sZW5ndGggLSAyXSA6ICdEZWZhdWx0JztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTUzNjFcdTcyNDdcdTRGMThcdTUxNDhcdTdFQTdcbiAgICovXG4gIHByaXZhdGUgZ2V0Q2FyZFByaW9yaXR5KGNhcmQ6IEZsYXNoY2FyZCk6IG51bWJlciB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBvdmVyZHVlID0gTWF0aC5tYXgoMCwgbm93IC0gY2FyZC5zY2hlZHVsaW5nLmR1ZSk7XG4gICAgY29uc3QgZGF5c092ZXJkdWUgPSBvdmVyZHVlIC8gKDI0ICogNjAgKiA2MCAqIDEwMDApO1xuICAgIFxuICAgIGlmIChjYXJkLnNjaGVkdWxpbmcuc3RhdGUgPT09ICduZXcnKSByZXR1cm4gMTAwICsgZGF5c092ZXJkdWU7XG4gICAgaWYgKGNhcmQuc2NoZWR1bGluZy5zdGF0ZSA9PT0gJ3JlbGVhcm5pbmcnKSByZXR1cm4gMjAwICsgZGF5c092ZXJkdWU7XG4gICAgcmV0dXJuIGRheXNPdmVyZHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjMwMVx1NEU0NVx1NTMxNlx1OTVFQVx1NTM2MVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwZXJzaXN0Rmxhc2hjYXJkcygpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGF0aCA9IGAke3RoaXMuZGF0YUZvbGRlcn0vZmxhc2hjYXJkcy5qc29uYDtcbiAgICAgIGNvbnN0IGZsYXNoY2FyZHMgPSBBcnJheS5mcm9tKHRoaXMuZmxhc2hjYXJkcy52YWx1ZXMoKSk7XG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5zdHJpbmdpZnkoZmxhc2hjYXJkcywgbnVsbCwgMik7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKHBhdGgsIGRhdGEpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwZXJzaXN0aW5nIGZsYXNoY2FyZHM6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYzMDFcdTRFNDVcdTUzMTZcdTU5MERcdTRFNjBcdTY1RTVcdTVGRDdcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgcGVyc2lzdFJldmlld0xvZ3MoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L3Jldmlldy1sb2dzLmpzb25gO1xuICAgICAgY29uc3QgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHRoaXMucmV2aWV3TG9ncywgbnVsbCwgMik7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKHBhdGgsIGRhdGEpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwZXJzaXN0aW5nIHJldmlldyBsb2dzOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU3NTFGXHU2MjEwXHU1NTJGXHU0RTAwIElEXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlSWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYGNhcmQtJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1N0VERlx1OEJBMVx1NjU3MFx1NjM2RVxuICAgKi9cbiAgZ2V0U3RhdHMoKSB7XG4gICAgY29uc3QgYWxsID0gdGhpcy5nZXRBbGxGbGFzaGNhcmRzKCk7XG4gICAgY29uc3QgZHVlID0gdGhpcy5nZXREdWVDYXJkcygpO1xuICAgIGNvbnN0IG5ld0NhcmRzID0gdGhpcy5nZXROZXdDYXJkcygpO1xuICAgIFxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICBjb25zdCByZXZpZXdlZFRvZGF5ID0gdGhpcy5yZXZpZXdMb2dzLmZpbHRlcihcbiAgICAgIGxvZyA9PiBsb2cudGltZXN0YW1wID49IHRvZGF5XG4gICAgKS5sZW5ndGg7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG90YWw6IGFsbC5sZW5ndGgsXG4gICAgICBuZXc6IG5ld0NhcmRzLmxlbmd0aCxcbiAgICAgIGR1ZTogZHVlLmxlbmd0aCxcbiAgICAgIHJldmlld2VkVG9kYXksXG4gICAgICB0b3RhbFJldmlld3M6IHRoaXMucmV2aWV3TG9ncy5sZW5ndGhcbiAgICB9O1xuICB9XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7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QUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FB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QUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtB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O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFB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QTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFB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S0FBSztBQUNsQixXQUFLLFFBQVE7QUFBQSxJQUNmLENBQUM7QUFHRCxVQUFNLGFBQWEsS0FBSyxJQUFJLFVBQVUsZ0JBQWdCLHVCQUF1QjtBQUM3RSxZQUFRLElBQUksOERBQThELFdBQVcsTUFBTTtBQUMzRixlQUFXLFFBQVEsVUFBUTtBQUN6QixZQUFNLE9BQU8sS0FBSztBQUNsQixXQUFLLFFBQVE7QUFBQSxJQUNmLENBQUM7QUFFRCxZQUFRLElBQUksZ0NBQWdDO0FBQUEsRUFDOUM7QUFBQSxFQUVRLGlCQUFpQjtBQUN2QixVQUFNLGdCQUFnQixLQUFLLGlCQUFpQjtBQUM1QyxrQkFBYyxTQUFTLHdCQUF3QjtBQUUvQyxVQUFNLGVBQWUsTUFBTTtBQUN6QixZQUFNLFFBQVEsS0FBSyxpQkFBaUIsU0FBUztBQUM3QyxvQkFBYyxRQUFRLGFBQU0sTUFBTSxTQUFTO0FBQzNDLG9CQUFjLFFBQVEsR0FBRyxNQUFNO0FBQUEsRUFBNkIsTUFBTTtBQUFBLElBQ3BFO0FBR0EsaUJBQWE7QUFHYixTQUFLO0FBQUEsTUFDSCxPQUFPLFlBQVksY0FBYyxHQUFLO0FBQUEsSUFDeEM7QUFHQSxrQkFBYyxpQkFBaUIsU0FBUyxNQUFNO0FBQzVDLFdBQUssZUFBZTtBQUFBLElBQ3RCLENBQUM7QUFBQSxFQUNIO0FBQ0Y7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIkZsYXNoY2FyZENyZWF0ZU1vZGFsIiwgIkFubm90YXRpb25Nb2RhbCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJjb250YWluZXIiLCAiYW5ub3RhdGlvbiIsICJjb250ZW50IiwgIlF1aWNrRmxhc2hjYXJkQ3JlYXRvciIsICJCYXRjaENyZWF0ZU1vZGFsIiwgInVuaXRzIiwgImltcG9ydF9vYnNpZGlhbiIsICJzaW1pbGFyaXR5IiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiRmlsZUFubm90YXRpb25Nb2RhbCJdCn0K
