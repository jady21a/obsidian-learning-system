/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/core/QuickFlashcardCreator.ts
var QuickFlashcardCreator_exports = {};
__export(QuickFlashcardCreator_exports, {
  QuickFlashcardCreator: () => QuickFlashcardCreator
});
var import_obsidian2, QuickFlashcardCreator;
var init_QuickFlashcardCreator = __esm({
  "src/core/QuickFlashcardCreator.ts"() {
    import_obsidian2 = require("obsidian");
    QuickFlashcardCreator = class {
      constructor(plugin) {
        this.plugin = plugin;
      }
      /**
       * 从提取内容一键创建问答卡
       * 如果有批注，使用批注作为答案
       */
      async createQuickQACard(contentUnit) {
        try {
          const annotation = this.plugin.annotationManager.getContentAnnotation(contentUnit.id);
          let question;
          let answer;
          if (annotation && annotation.content) {
            if (this.isQuestion(annotation.content)) {
              question = this.generateDefaultQuestion(contentUnit);
              answer = annotation.content;
            } else {
              question = this.generateDefaultQuestion(contentUnit);
              answer = annotation.content;
            }
          } else {
            question = this.generateDefaultQuestion(contentUnit);
            answer = contentUnit.content;
          }
          const card = await this.plugin.flashcardManager.createQACard(
            contentUnit.id,
            question,
            answer
          );
          new import_obsidian2.Notice(`\u2705 Flashcard created! (Q&A)`);
        } catch (error) {
          console.error("Error creating quick flashcard:", error);
          new import_obsidian2.Notice("\u274C Failed to create flashcard");
        }
      }
      /**
       * 从提取内容一键创建完形填空卡
       * 自动识别关键词
       */
      async createQuickClozeCard(contentUnit) {
        try {
          const keywords = this.extractKeywords(contentUnit.content);
          if (keywords.length === 0) {
            new import_obsidian2.Notice("\u26A0\uFE0F No keywords found for cloze deletion");
            return;
          }
          const deletions = keywords.map((keyword) => {
            const index = contentUnit.content.indexOf(keyword.word);
            return {
              index,
              answer: keyword.word
            };
          }).filter((d) => d.index !== -1);
          if (deletions.length === 0) {
            new import_obsidian2.Notice("\u26A0\uFE0F Could not create cloze deletions");
            return;
          }
          const card = await this.plugin.flashcardManager.createClozeCard(
            contentUnit.id,
            contentUnit.content,
            deletions
          );
          new import_obsidian2.Notice(`\u2705 Flashcard created! (Cloze with ${deletions.length} blanks)`);
        } catch (error) {
          console.error("Error creating quick cloze card:", error);
          new import_obsidian2.Notice("\u274C Failed to create flashcard");
        }
      }
      /**
       * 智能创建闪卡（自动判断类型）
       */
      async createSmartCard(contentUnit) {
        const annotation = this.plugin.annotationManager.getContentAnnotation(contentUnit.id);
        if (annotation && this.isQuestion(annotation.content)) {
          await this.createQuickQACard(contentUnit);
          return;
        }
        if (contentUnit.content.length < 200) {
          await this.createQuickQACard(contentUnit);
          return;
        }
        await this.createQuickClozeCard(contentUnit);
      }
      /**
       * 批量创建闪卡
       */
      async createBatchCards(contentUnits, type = "smart") {
        let success = 0;
        let failed = 0;
        for (const unit of contentUnits) {
          try {
            switch (type) {
              case "qa":
                await this.createQuickQACard(unit);
                break;
              case "cloze":
                await this.createQuickClozeCard(unit);
                break;
              case "smart":
                await this.createSmartCard(unit);
                break;
            }
            success++;
          } catch (error) {
            console.error("Error creating card:", error);
            failed++;
          }
        }
        return { success, failed };
      }
      /**
       * 判断文本是否是问题
       */
      isQuestion(text) {
        const questionWords = ["what", "why", "how", "when", "where", "who", "which"];
        const lowerText = text.toLowerCase().trim();
        if (lowerText.endsWith("?"))
          return true;
        for (const word of questionWords) {
          if (lowerText.startsWith(word + " "))
            return true;
        }
        if (text.includes("\u4EC0\u4E48") || text.includes("\u4E3A\u4EC0\u4E48") || text.includes("\u600E\u4E48") || text.includes("\u5982\u4F55") || text.includes("\u5417\uFF1F") || text.includes("\u5462\uFF1F")) {
          return true;
        }
        return false;
      }
      /**
       * 生成默认问题
       */
      generateDefaultQuestion(contentUnit) {
        if (contentUnit.source.heading) {
          const heading = contentUnit.source.heading.replace(/^#+\s*/, "");
          return `What is the key point about "${heading}"?`;
        }
        if (contentUnit.content.length < 50) {
          return `What does "${contentUnit.content}" mean?`;
        } else if (contentUnit.content.length < 150) {
          const firstWords = contentUnit.content.substring(0, 30) + "...";
          return `Explain: "${firstWords}"`;
        } else {
          return `What are the key points in this content?`;
        }
      }
      /**
       * 提取关键词（用于完形填空）
       */
      extractKeywords(text) {
        const words = text.match(/\b[A-Za-z]{3,}\b/g) || [];
        const stopWords = /* @__PURE__ */ new Set([
          "the",
          "is",
          "at",
          "which",
          "on",
          "a",
          "an",
          "and",
          "or",
          "but",
          "in",
          "with",
          "to",
          "for",
          "of",
          "as",
          "by",
          "this",
          "that",
          "from",
          "they",
          "we",
          "say",
          "her",
          "she",
          "he",
          "will",
          "my",
          "one",
          "all",
          "would",
          "there",
          "their",
          "what",
          "so",
          "up",
          "out",
          "if",
          "about",
          "who",
          "get",
          "which",
          "go",
          "me",
          "when",
          "make",
          "can",
          "like",
          "time",
          "no",
          "just",
          "him",
          "know",
          "take",
          "people",
          "into",
          "year",
          "your",
          "good",
          "some",
          "could",
          "them",
          "see",
          "other"
        ]);
        const wordFreq = /* @__PURE__ */ new Map();
        words.forEach((word) => {
          const lower = word.toLowerCase();
          if (!stopWords.has(lower) && word.length > 3) {
            wordFreq.set(word, (wordFreq.get(word) || 0) + 1);
          }
        });
        const scored = Array.from(wordFreq.entries()).map(([word, freq]) => {
          let score = freq;
          if (word.length > 8)
            score += 2;
          else if (word.length > 6)
            score += 1;
          if (word[0] === word[0].toUpperCase())
            score += 1;
          return { word, score };
        });
        return scored.sort((a, b) => b.score - a.score).slice(0, 3);
      }
    };
  }
});

// src/ui/FlashcardCreateModal.ts
var FlashcardCreateModal_exports = {};
__export(FlashcardCreateModal_exports, {
  FlashcardCreateModal: () => FlashcardCreateModal
});
var import_obsidian3, FlashcardCreateModal;
var init_FlashcardCreateModal = __esm({
  "src/ui/FlashcardCreateModal.ts"() {
    import_obsidian3 = require("obsidian");
    FlashcardCreateModal = class extends import_obsidian3.Modal {
      constructor(app, plugin, contentUnit, onSave) {
        super(app);
        this.plugin = plugin;
        this.cardType = "qa";
        // Q&A 字段
        this.question = "";
        this.answer = "";
        // Cloze 字段
        this.clozeText = "";
        this.selectedRanges = [];
        this.contentUnit = contentUnit;
        this.onSave = onSave;
        this.answer = contentUnit.content;
        this.clozeText = contentUnit.content;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.addClass("flashcard-create-modal");
        contentEl.createEl("h2", { text: "Create Flashcard" });
        const contentPreview = contentEl.createDiv({ cls: "content-preview" });
        contentPreview.createEl("h3", { text: "Source Content:" });
        contentPreview.createEl("blockquote", { text: this.contentUnit.content });
        new import_obsidian3.Setting(contentEl).setName("Card Type").setDesc("Choose the type of flashcard").addDropdown((dropdown) => {
          dropdown.addOption("qa", "\u{1F4DD} Question & Answer").addOption("cloze", "\u270F\uFE0F Cloze Deletion").setValue(this.cardType).onChange((value) => {
            this.cardType = value;
            this.refreshCardInputs();
          });
        });
        this.cardInputContainer = contentEl.createDiv({ cls: "card-input-container" });
        this.refreshCardInputs();
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => this.close());
        const saveBtn = buttonContainer.createEl("button", {
          text: "Create Flashcard",
          cls: "mod-cta"
        });
        saveBtn.addEventListener("click", () => this.saveFlashcard());
        this.addStyles();
      }
      refreshCardInputs() {
        this.cardInputContainer.empty();
        if (this.cardType === "qa") {
          this.renderQAInputs();
        } else {
          this.renderClozeInputs();
        }
      }
      renderQAInputs() {
        new import_obsidian3.Setting(this.cardInputContainer).setName("Question (Front)").setDesc("What question should this card ask?").addTextArea((text) => {
          text.setPlaceholder("Enter your question...").setValue(this.question).onChange((value) => {
            this.question = value;
          });
          text.inputEl.rows = 3;
          text.inputEl.style.width = "100%";
        });
        new import_obsidian3.Setting(this.cardInputContainer).setName("Answer (Back)").setDesc("What is the correct answer?").addTextArea((text) => {
          text.setPlaceholder("Enter the answer...").setValue(this.answer).onChange((value) => {
            this.answer = value;
          });
          text.inputEl.rows = 3;
          text.inputEl.style.width = "100%";
        });
        const hint = this.cardInputContainer.createDiv({ cls: "input-hint" });
        hint.createEl("small", {
          text: "\u{1F4A1} Tip: You can use the source content as the answer, or write your own."
        });
      }
      renderClozeInputs() {
        const container = this.cardInputContainer;
        container.createEl("h3", { text: "Cloze Deletion" });
        container.createEl("p", {
          text: "Select text to hide (cloze deletion). Click on words to toggle selection.",
          cls: "cloze-instruction"
        });
        const textContainer = container.createDiv({ cls: "cloze-text-container" });
        this.renderSelectableText(textContainer);
        if (this.selectedRanges.length > 0) {
          const selectedList = container.createDiv({ cls: "selected-deletions" });
          selectedList.createEl("h4", { text: "Selected Deletions:" });
          this.selectedRanges.forEach((range, index) => {
            const item = selectedList.createDiv({ cls: "deletion-item" });
            item.createSpan({ text: `${index + 1}. ` });
            item.createSpan({
              text: range.text,
              cls: "deletion-text"
            });
            const removeBtn = item.createEl("button", {
              text: "\xD7",
              cls: "remove-deletion-btn"
            });
            removeBtn.addEventListener("click", () => {
              this.selectedRanges.splice(index, 1);
              this.refreshCardInputs();
            });
          });
        }
        const preview = container.createDiv({ cls: "cloze-preview" });
        preview.createEl("h4", { text: "Preview:" });
        preview.createDiv({
          text: this.generateClozePreview(),
          cls: "preview-text"
        });
      }
      renderSelectableText(container) {
        const words = this.clozeText.split(/(\s+)/);
        let currentIndex = 0;
        words.forEach((word) => {
          const wordStart = currentIndex;
          const wordEnd = currentIndex + word.length;
          if (word.trim()) {
            const isSelected = this.selectedRanges.some(
              (range) => range.start === wordStart && range.end === wordEnd
            );
            const span = container.createEl("span", {
              text: word,
              cls: isSelected ? "cloze-word selected" : "cloze-word"
            });
            span.addEventListener("click", () => {
              this.toggleWordSelection(wordStart, wordEnd, word);
            });
          } else {
            container.createEl("span", { text: word });
          }
          currentIndex = wordEnd;
        });
      }
      toggleWordSelection(start, end, text) {
        const index = this.selectedRanges.findIndex(
          (range) => range.start === start && range.end === end
        );
        if (index > -1) {
          this.selectedRanges.splice(index, 1);
        } else {
          this.selectedRanges.push({ start, end, text });
          this.selectedRanges.sort((a, b) => a.start - b.start);
        }
        this.refreshCardInputs();
      }
      generateClozePreview() {
        let preview = this.clozeText;
        const sorted = [...this.selectedRanges].sort((a, b) => b.start - a.start);
        for (const range of sorted) {
          const before = preview.substring(0, range.start);
          const after = preview.substring(range.end);
          preview = `${before}[...]${after}`;
        }
        return preview;
      }
      async saveFlashcard() {
        try {
          if (this.cardType === "qa") {
            if (!this.question.trim()) {
              new import_obsidian3.Notice("Please enter a question");
              return;
            }
            if (!this.answer.trim()) {
              new import_obsidian3.Notice("Please enter an answer");
              return;
            }
            await this.plugin.flashcardManager.createQACard(
              this.contentUnit.id,
              this.question,
              this.answer
            );
            new import_obsidian3.Notice("Q&A flashcard created!");
          } else {
            if (this.selectedRanges.length === 0) {
              new import_obsidian3.Notice("Please select at least one word to hide");
              return;
            }
            const deletions = this.selectedRanges.map((range) => ({
              index: range.start,
              answer: range.text
            }));
            await this.plugin.flashcardManager.createClozeCard(
              this.contentUnit.id,
              this.clozeText,
              deletions
            );
            new import_obsidian3.Notice("Cloze flashcard created!");
          }
          this.close();
          this.onSave();
        } catch (error) {
          console.error("Error creating flashcard:", error);
          new import_obsidian3.Notice("Error creating flashcard");
        }
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      .flashcard-create-modal {
        padding: 20px;
        max-width: 600px;
      }

      .content-preview {
        margin: 20px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .content-preview h3 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .content-preview blockquote {
        margin: 0;
        padding: 10px;
        border-left: 3px solid var(--interactive-accent);
        background: var(--background-primary);
        border-radius: 4px;
      }

      .card-input-container {
        margin: 20px 0;
      }

      .input-hint {
        margin-top: 10px;
        padding: 10px;
        background: var(--background-secondary);
        border-radius: 4px;
        color: var(--text-muted);
      }

      /* Cloze \u6837\u5F0F */
      .cloze-instruction {
        color: var(--text-muted);
        font-size: 0.9em;
        margin-bottom: 15px;
      }

      .cloze-text-container {
        padding: 15px;
        background: var(--background-primary);
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        line-height: 1.8;
        margin-bottom: 15px;
        cursor: default;
      }

      .cloze-word {
        padding: 2px 4px;
        margin: 0 1px;
        border-radius: 3px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .cloze-word:hover {
        background: var(--background-modifier-hover);
      }

      .cloze-word.selected {
        background: var(--interactive-accent);
        color: white;
        font-weight: 500;
      }

      .selected-deletions {
        margin: 15px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .selected-deletions h4 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .deletion-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 6px 10px;
        background: var(--background-primary);
        border-radius: 4px;
        margin-bottom: 6px;
      }

      .deletion-text {
        flex: 1;
        font-weight: 500;
        color: var(--interactive-accent);
      }

      .remove-deletion-btn {
        padding: 2px 8px;
        background: var(--background-modifier-error);
        color: white;
        border: none;
        border-radius: 3px;
        cursor: pointer;
        font-size: 16px;
        line-height: 1;
      }

      .remove-deletion-btn:hover {
        background: var(--color-red);
      }

      .cloze-preview {
        margin: 15px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .cloze-preview h4 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .preview-text {
        padding: 10px;
        background: var(--background-primary);
        border-radius: 4px;
        line-height: 1.6;
      }

      .modal-button-container {
        display: flex;
        gap: 10px;
        justify-content: flex-end;
        margin-top: 20px;
      }

      .modal-button-container button {
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
      }
    `;
        document.head.appendChild(styleEl);
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
  }
});

// src/ui/OverviewView.ts
var OverviewView_exports = {};
__export(OverviewView_exports, {
  BatchCreateModal: () => BatchCreateModal,
  OverviewView: () => OverviewView,
  VIEW_TYPE_OVERVIEW: () => VIEW_TYPE_OVERVIEW
});
var import_obsidian4, VIEW_TYPE_OVERVIEW, OverviewView, BatchCreateModal, ConfirmModal;
var init_OverviewView = __esm({
  "src/ui/OverviewView.ts"() {
    import_obsidian4 = require("obsidian");
    init_QuickFlashcardCreator();
    VIEW_TYPE_OVERVIEW = "learning-system-overview";
    OverviewView = class extends import_obsidian4.ItemView {
      constructor(leaf, plugin) {
        super(leaf);
        //   private contentEl: HTMLElement;
        this.groupBy = "file";
        this.searchQuery = "";
        this.batchMode = false;
        this.selectedUnitIds = /* @__PURE__ */ new Set();
        this.plugin = plugin;
        this.quickCreator = new QuickFlashcardCreator(plugin);
      }
      getViewType() {
        return VIEW_TYPE_OVERVIEW;
      }
      getDisplayText() {
        return "Learning Overview";
      }
      getIcon() {
        return "layout-list";
      }
      async onOpen() {
        const container = this.containerEl.children[1];
        container.empty();
        this.createToolbar(container);
        this.contentEl = container.createDiv({ cls: "learning-system-content" });
        await this.refresh();
        this.addStyles();
      }
      async onClose() {
      }
      // 添加到 OverviewView 类中
      scrollToFile(filePath) {
        setTimeout(() => {
          const fileGroups = this.contentEl.querySelectorAll(".file-group");
          fileGroups.forEach((group) => {
            var _a, _b;
            const header = group.querySelector(".group-header");
            if ((_b = header == null ? void 0 : header.textContent) == null ? void 0 : _b.includes(((_a = filePath.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || "")) {
              group.scrollIntoView({ behavior: "smooth", block: "start" });
            }
          });
        }, 100);
      }
      createToolbar(container) {
        const toolbar = container.createDiv({ cls: "learning-system-toolbar" });
        const searchContainer = toolbar.createDiv({ cls: "search-container" });
        const searchInput = searchContainer.createEl("input", {
          type: "text",
          placeholder: "Search content...",
          cls: "search-input"
        });
        searchInput.addEventListener("input", (e) => {
          this.searchQuery = e.target.value;
          this.refresh();
        });
        const groupContainer = toolbar.createDiv({ cls: "group-container" });
        groupContainer.createSpan({ text: "Group by: ", cls: "group-label" });
        const groupSelect = groupContainer.createEl("select", { cls: "group-select" });
        const options = [
          { value: "file", label: "File" },
          { value: "tag", label: "Tag" },
          { value: "date", label: "Date" }
        ];
        options.forEach((opt) => {
          const option = groupSelect.createEl("option", {
            value: opt.value,
            text: opt.label
          });
          if (opt.value === this.groupBy) {
            option.selected = true;
          }
        });
        groupSelect.addEventListener("change", (e) => {
          this.groupBy = e.target.value;
          this.refresh();
        });
        const batchActions = toolbar.createDiv({ cls: "batch-actions-overview" });
        const batchModeBtn = batchActions.createEl("button", {
          text: this.batchMode ? "\u2713 Done" : "\u2610 Batch Mode",
          cls: "batch-mode-btn"
        });
        batchModeBtn.addEventListener("click", () => {
          this.batchMode = !this.batchMode;
          if (!this.batchMode) {
            this.selectedUnitIds.clear();
          }
          this.refresh();
        });
        if (this.batchMode) {
          const selectAllBtn = batchActions.createEl("button", {
            text: this.isAllSelected() ? "\u2611 Deselect All" : "\u2610 Select All",
            cls: "select-all-btn"
          });
          selectAllBtn.addEventListener("click", () => {
            this.toggleSelectAll();
          });
          const batchDeleteBtn = batchActions.createEl("button", {
            text: `\u{1F5D1}\uFE0F Delete (${this.selectedUnitIds.size})`,
            cls: "batch-delete-btn"
          });
          batchDeleteBtn.addEventListener("click", () => {
            this.batchDeleteNotes();
          });
          const batchCreateBtn = batchActions.createEl("button", {
            text: `\u26A1 Create Cards (${this.selectedUnitIds.size})`,
            cls: "batch-create-cards-btn"
          });
          batchCreateBtn.addEventListener("click", () => {
            this.batchCreateFlashcards();
          });
        } else {
          const batchCreateAllBtn = batchActions.createEl("button", {
            text: "\u26A1 Batch Create Cards",
            cls: "batch-create-btn"
          });
          batchCreateAllBtn.addEventListener("click", () => this.showBatchCreateModal());
        }
        const refreshBtn = toolbar.createEl("button", {
          text: "\u27F3",
          cls: "refresh-btn"
        });
        refreshBtn.addEventListener("click", () => this.refresh());
        const stats = toolbar.createDiv({ cls: "stats-container" });
        const totalCount = this.plugin.dataManager.getAllContentUnits().length;
        stats.createSpan({ text: `Total: ${totalCount}`, cls: "stats-text" });
      }
      async refresh() {
        this.contentEl.empty();
        let units = this.plugin.dataManager.getAllContentUnits();
        if (this.searchQuery) {
          const query = this.searchQuery.toLowerCase();
          units = units.filter(
            (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
          );
        }
        if (units.length === 0) {
          this.contentEl.createDiv({
            text: this.searchQuery ? "No results found" : "No content extracted yet",
            cls: "empty-state"
          });
          return;
        }
        switch (this.groupBy) {
          case "file":
            this.renderByFile(units);
            break;
          case "tag":
            this.renderByTag(units);
            break;
          case "date":
            this.renderByDate(units);
            break;
        }
      }
      renderByFile(units) {
        const grouped = /* @__PURE__ */ new Map();
        units.forEach((unit) => {
          if (!grouped.has(unit.source.file)) {
            grouped.set(unit.source.file, []);
          }
          grouped.get(unit.source.file).push(unit);
        });
        const sortedFiles = Array.from(grouped.keys()).sort();
        sortedFiles.forEach((filePath) => {
          const fileUnits = grouped.get(filePath);
          this.renderFileGroup(filePath, fileUnits);
        });
      }
      renderFileGroup(filePath, units) {
        var _a;
        const groupContainer = this.contentEl.createDiv({ cls: "file-group" });
        const header = groupContainer.createDiv({ cls: "group-header" });
        const fileName = ((_a = filePath.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || filePath;
        const titleEl = header.createDiv({ cls: "group-title" });
        titleEl.createSpan({ text: "\u{1F4C4} ", cls: "group-icon" });
        titleEl.createSpan({ text: fileName, cls: "group-name" });
        header.createSpan({ text: `${units.length}`, cls: "count-badge" });
        const collapseBtn = header.createSpan({ text: "\u25BC", cls: "collapse-btn" });
        const fileAnnotations = this.plugin.annotationManager.getFileAnnotations(filePath);
        if (fileAnnotations.length > 0) {
          const fileAnnotationDisplay = groupContainer.createDiv({
            cls: "file-annotation-display"
          });
          fileAnnotations.forEach((ann) => {
            const annEl = fileAnnotationDisplay.createDiv({ cls: "file-annotation-item" });
            annEl.createEl("strong", { text: "\u{1F4CC} " });
            annEl.createSpan({ text: ann.content });
          });
        }
        const contentContainer = groupContainer.createDiv({ cls: "group-content" });
        units.forEach((unit) => {
          this.renderContentUnit(contentContainer, unit);
        });
        let isCollapsed = false;
        collapseBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          isCollapsed = !isCollapsed;
          contentContainer.style.display = isCollapsed ? "none" : "block";
          collapseBtn.textContent = isCollapsed ? "\u25B6" : "\u25BC";
        });
        header.addEventListener("click", async () => {
          const file = this.app.vault.getAbstractFileByPath(filePath);
          if (file instanceof import_obsidian4.TFile) {
            await this.app.workspace.getLeaf(false).openFile(file);
          }
        });
      }
      renderContentUnit(container, unit) {
        const card = container.createDiv({ cls: "content-card" });
        if (this.batchMode) {
          const checkbox = card.createEl("input", {
            type: "checkbox",
            cls: "batch-checkbox"
          });
          checkbox.setAttribute("data-unit-id", unit.id);
          checkbox.checked = this.selectedUnitIds.has(unit.id);
          checkbox.addEventListener("change", (e) => {
            if (e.target.checked) {
              this.selectedUnitIds.add(unit.id);
            } else {
              this.selectedUnitIds.delete(unit.id);
            }
            this.updateBatchButtons();
          });
        }
        const contentArea = card.createDiv({ cls: "card-content" });
        const typeIcon = this.getTypeIcon(unit.type);
        contentArea.createSpan({ text: typeIcon + " ", cls: "type-icon" });
        const contentText = contentArea.createSpan({
          text: unit.content,
          cls: "content-text clickable-content"
        });
        contentText.addEventListener("click", (e) => {
          var _a;
          e.stopPropagation();
          this.showAnnotationInput(card, unit, (_a = this.plugin.annotationManager.getContentAnnotation(unit.id)) == null ? void 0 : _a.content);
        });
        if (unit.annotationId) {
          contentArea.createSpan({
            text: "\u{1F4DD}",
            cls: "annotation-badge has-annotation",
            attr: { title: "Has annotation" }
          });
        }
        if (unit.flashcardIds.length > 0) {
          contentArea.createSpan({
            text: "\u{1F0CF}",
            cls: "flashcard-badge",
            attr: { title: `${unit.flashcardIds.length} flashcard(s)` }
          });
        }
        const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
        if (annotation) {
          const annotationDisplay = card.createDiv({ cls: "annotation-display" });
          if (annotation.badge) {
            const badge = annotationDisplay.createSpan({
              text: annotation.badge.text,
              cls: "annotation-badge-display"
            });
            badge.style.backgroundColor = annotation.badge.color;
          }
          const annotationContent = annotationDisplay.createDiv({
            cls: "annotation-content-display"
          });
          annotationContent.createEl("strong", { text: "\u{1F4AC} " });
          annotationContent.createSpan({ text: annotation.content });
          const timestamp = annotationDisplay.createDiv({ cls: "annotation-timestamp" });
          const date = new Date(annotation.metadata.createdAt);
          timestamp.textContent = date.toLocaleString();
          annotationDisplay.addEventListener("click", (e) => {
            e.stopPropagation();
            this.showAnnotationInput(card, unit, annotation.content);
          });
        }
        const metaArea = card.createDiv({ cls: "card-meta" });
        if (unit.metadata.tags.length > 0) {
          const tagsContainer = metaArea.createSpan({ cls: "tags-container" });
          unit.metadata.tags.forEach((tag) => {
            tagsContainer.createSpan({ text: tag, cls: "tag" });
          });
        }
        if (unit.source.heading) {
          metaArea.createSpan({
            text: `\u{1F4CD} ${unit.source.heading}`,
            cls: "heading-info"
          });
        }
        const actionsArea = card.createDiv({ cls: "card-actions" });
        const jumpBtn = actionsArea.createEl("button", {
          text: "\u2197",
          cls: "action-btn jump-btn",
          attr: { title: "Jump to source" }
        });
        jumpBtn.addEventListener("click", async (e) => {
          e.stopPropagation();
          await this.jumpToSource(unit);
        });
        const flashcardGroup = actionsArea.createDiv({ cls: "flashcard-btn-group" });
        const quickCardBtn = flashcardGroup.createEl("button", {
          text: "\u26A1",
          cls: "action-btn quick-card-btn",
          attr: { title: "Quick create flashcard (smart)" }
        });
        quickCardBtn.addEventListener("click", async (e) => {
          e.stopPropagation();
          await this.quickCreator.createSmartCard(unit);
          await this.refresh();
        });
        const moreCardBtn = flashcardGroup.createEl("button", {
          text: "\u25BC",
          cls: "action-btn more-card-btn",
          attr: { title: "More flashcard options" }
        });
        moreCardBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          this.showFlashcardMenu(e, unit);
        });
        const deleteBtn = actionsArea.createEl("button", {
          text: "\u{1F5D1}",
          cls: "action-btn delete-btn",
          attr: { title: "Delete" }
        });
        deleteBtn.addEventListener("click", async (e) => {
          e.stopPropagation();
          await this.deleteContentUnit(unit);
        });
        card.addEventListener("contextmenu", (e) => {
          e.preventDefault();
          this.showContextMenu(e, unit);
        });
      }
      renderByTag(units) {
        const grouped = /* @__PURE__ */ new Map();
        units.forEach((unit) => {
          if (unit.metadata.tags.length === 0) {
            if (!grouped.has("Untagged")) {
              grouped.set("Untagged", []);
            }
            grouped.get("Untagged").push(unit);
          } else {
            unit.metadata.tags.forEach((tag) => {
              if (!grouped.has(tag)) {
                grouped.set(tag, []);
              }
              grouped.get(tag).push(unit);
            });
          }
        });
        const sortedTags = Array.from(grouped.keys()).sort();
        sortedTags.forEach((tag) => {
          const tagUnits = grouped.get(tag);
          this.renderTagGroup(tag, tagUnits);
        });
      }
      renderTagGroup(tag, units) {
        const groupContainer = this.contentEl.createDiv({ cls: "tag-group" });
        const header = groupContainer.createDiv({ cls: "group-header" });
        const titleEl = header.createDiv({ cls: "group-title" });
        titleEl.createSpan({ text: "\u{1F3F7}\uFE0F ", cls: "group-icon" });
        titleEl.createSpan({ text: tag, cls: "group-name" });
        header.createSpan({ text: `${units.length}`, cls: "count-badge" });
        const collapseBtn = header.createSpan({ text: "\u25BC", cls: "collapse-btn" });
        const contentContainer = groupContainer.createDiv({ cls: "group-content" });
        units.forEach((unit) => {
          this.renderContentUnit(contentContainer, unit);
        });
        let isCollapsed = false;
        collapseBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          isCollapsed = !isCollapsed;
          contentContainer.style.display = isCollapsed ? "none" : "block";
          collapseBtn.textContent = isCollapsed ? "\u25B6" : "\u25BC";
        });
      }
      renderByDate(units) {
        const grouped = /* @__PURE__ */ new Map();
        units.forEach((unit) => {
          const date = new Date(unit.metadata.createdAt);
          const dateKey = date.toLocaleDateString();
          if (!grouped.has(dateKey)) {
            grouped.set(dateKey, []);
          }
          grouped.get(dateKey).push(unit);
        });
        const sortedDates = Array.from(grouped.keys()).sort((a, b) => {
          return new Date(b).getTime() - new Date(a).getTime();
        });
        sortedDates.forEach((date) => {
          const dateUnits = grouped.get(date);
          this.renderDateGroup(date, dateUnits);
        });
      }
      renderDateGroup(date, units) {
        const groupContainer = this.contentEl.createDiv({ cls: "date-group" });
        const header = groupContainer.createDiv({ cls: "group-header" });
        const titleEl = header.createDiv({ cls: "group-title" });
        titleEl.createSpan({ text: "\u{1F4C5} ", cls: "group-icon" });
        titleEl.createSpan({ text: date, cls: "group-name" });
        header.createSpan({ text: `${units.length}`, cls: "count-badge" });
        const collapseBtn = header.createSpan({ text: "\u25BC", cls: "collapse-btn" });
        const contentContainer = groupContainer.createDiv({ cls: "group-content" });
        units.forEach((unit) => {
          this.renderContentUnit(contentContainer, unit);
        });
        let isCollapsed = false;
        collapseBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          isCollapsed = !isCollapsed;
          contentContainer.style.display = isCollapsed ? "none" : "block";
          collapseBtn.textContent = isCollapsed ? "\u25B6" : "\u25BC";
        });
      }
      showAnnotationInput(card, unit, existingText) {
        let inputContainer = card.querySelector(".annotation-input-container");
        if (inputContainer) {
          inputContainer.remove();
          return;
        }
        inputContainer = card.createDiv({ cls: "annotation-input-container" });
        const textarea = inputContainer.createEl("textarea", {
          cls: "annotation-textarea",
          placeholder: "Add comment..."
        });
        textarea.value = existingText || "";
        textarea.rows = 3;
        const buttonArea = inputContainer.createDiv({ cls: "annotation-buttons" });
        if (existingText) {
          const deleteBtn = buttonArea.createEl("button", {
            text: "Delete",
            cls: "annotation-delete-btn"
          });
          deleteBtn.addEventListener("click", async () => {
            const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
            if (annotation) {
              await this.plugin.annotationManager.deleteAnnotation(annotation.id);
              new import_obsidian4.Notice("Annotation deleted");
              await this.refresh();
            }
          });
        }
        const saveBtn = buttonArea.createEl("button", {
          text: "Save",
          cls: "annotation-save-btn"
        });
        const saveAnnotation = async () => {
          const text = textarea.value.trim();
          if (!text) {
            inputContainer.remove();
            return;
          }
          try {
            const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
            if (annotation) {
              await this.plugin.annotationManager.updateAnnotation(annotation.id, {
                content: text
              });
            } else {
              await this.plugin.annotationManager.addContentAnnotation(
                unit.id,
                text
              );
            }
            await this.refresh();
          } catch (error) {
            console.error("Error saving annotation:", error);
            new import_obsidian4.Notice("Error saving annotation");
          }
        };
        saveBtn.addEventListener("click", saveAnnotation);
        textarea.addEventListener("keydown", (e) => {
          if (e.key === "Enter" && (e.ctrlKey || e.metaKey)) {
            e.preventDefault();
            saveAnnotation();
          }
          if (e.key === "Escape") {
            e.preventDefault();
            inputContainer.remove();
          }
        });
        textarea.focus();
      }
      showFlashcardMenu(e, unit) {
        const menu = new import_obsidian4.Menu();
        menu.addItem(
          (item) => item.setTitle("\u26A1 Smart create").setIcon("zap").onClick(async () => {
            await this.quickCreator.createSmartCard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("\u{1F4DD} Create Q&A card").setIcon("message-square").onClick(async () => {
            await this.quickCreator.createQuickQACard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("\u270F\uFE0F Create Cloze card").setIcon("edit").onClick(async () => {
            await this.quickCreator.createQuickClozeCard(unit);
            await this.refresh();
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("\u{1F3A8} Custom card...").setIcon("settings").onClick(async () => {
            const { FlashcardCreateModal: FlashcardCreateModal2 } = await Promise.resolve().then(() => (init_FlashcardCreateModal(), FlashcardCreateModal_exports));
            const modal = new FlashcardCreateModal2(
              this.app,
              this.plugin,
              unit,
              async () => {
                await this.refresh();
              }
            );
            modal.open();
          })
        );
        menu.showAtMouseEvent(e);
      }
      async showBatchCreateModal() {
        const units = this.plugin.dataManager.getAllContentUnits();
        const unitsWithoutCards = units.filter((u) => u.flashcardIds.length === 0);
        if (unitsWithoutCards.length === 0) {
          new import_obsidian4.Notice("All content already has flashcards!");
          return;
        }
        const modal = new BatchCreateModal(
          this.app,
          this.plugin,
          this.quickCreator,
          unitsWithoutCards,
          () => this.refresh()
        );
        modal.open();
      }
      isAllSelected() {
        const units = this.plugin.dataManager.getAllContentUnits();
        let filteredUnits = units;
        if (this.searchQuery) {
          const query = this.searchQuery.toLowerCase();
          filteredUnits = units.filter(
            (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
          );
        }
        return filteredUnits.length > 0 && this.selectedUnitIds.size === filteredUnits.length;
      }
      toggleSelectAll() {
        const units = this.plugin.dataManager.getAllContentUnits();
        let filteredUnits = units;
        if (this.searchQuery) {
          const query = this.searchQuery.toLowerCase();
          filteredUnits = units.filter(
            (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
          );
        }
        if (this.isAllSelected()) {
          this.selectedUnitIds.clear();
        } else {
          filteredUnits.forEach((unit) => {
            this.selectedUnitIds.add(unit.id);
          });
        }
        this.updateBatchButtons();
        this.updateCheckboxes();
      }
      updateCheckboxes() {
        const container = this.containerEl.children[1];
        const checkboxes = container.querySelectorAll(".batch-checkbox");
        checkboxes.forEach((checkbox) => {
          const unitId = checkbox.getAttribute("data-unit-id");
          if (unitId) {
            checkbox.checked = this.selectedUnitIds.has(unitId);
          }
        });
      }
      updateBatchButtons() {
        const toolbar = this.containerEl.querySelector(".learning-system-toolbar");
        if (toolbar) {
          const batchActions = toolbar.querySelector(".batch-actions-overview");
          if (batchActions) {
            const selectAllBtn = batchActions.querySelector(".select-all-btn");
            const deleteBtn = batchActions.querySelector(".batch-delete-btn");
            const createBtn = batchActions.querySelector(".batch-create-cards-btn");
            if (selectAllBtn) {
              selectAllBtn.textContent = this.isAllSelected() ? "\u2611 Deselect All" : "\u2610 Select All";
            }
            if (deleteBtn) {
              deleteBtn.textContent = `\u{1F5D1}\uFE0F Delete (${this.selectedUnitIds.size})`;
            }
            if (createBtn) {
              createBtn.textContent = `\u26A1 Create Cards (${this.selectedUnitIds.size})`;
            }
          }
        }
      }
      async batchDeleteNotes() {
        if (this.selectedUnitIds.size === 0) {
          new import_obsidian4.Notice("\u26A0\uFE0F Please select notes to delete");
          return;
        }
        if (!confirm(`Are you sure you want to delete ${this.selectedUnitIds.size} selected notes?`)) {
          return;
        }
        let success = 0;
        let failed = 0;
        for (const unitId of this.selectedUnitIds) {
          try {
            await this.plugin.dataManager.deleteContentUnit(unitId);
            success++;
          } catch (error) {
            console.error("Error deleting note:", error);
            failed++;
          }
        }
        this.selectedUnitIds.clear();
        new import_obsidian4.Notice(`\u2705 Deleted ${success} notes${failed > 0 ? `, ${failed} failed` : ""}`);
        this.refresh();
      }
      async batchCreateFlashcards() {
        if (this.selectedUnitIds.size === 0) {
          new import_obsidian4.Notice("\u26A0\uFE0F Please select notes to create flashcards");
          return;
        }
        const units = Array.from(this.selectedUnitIds).map((id) => this.plugin.dataManager.getContentUnit(id)).filter((u) => u !== void 0 && u.flashcardIds.length === 0);
        if (units.length === 0) {
          new import_obsidian4.Notice("\u26A0\uFE0F Selected notes already have flashcards");
          return;
        }
        const modal = new BatchCreateModal(
          this.app,
          this.plugin,
          this.quickCreator,
          units,
          () => {
            this.selectedUnitIds.clear();
            this.refresh();
          }
        );
        modal.open();
      }
      async jumpToSource(unit) {
        const file = this.app.vault.getAbstractFileByPath(unit.source.file);
        if (!(file instanceof import_obsidian4.TFile))
          return;
        const leaf = this.app.workspace.getLeaf(false);
        await leaf.openFile(file);
        const view = this.app.workspace.getActiveViewOfType(import_obsidian4.ItemView);
        if (view) {
          const editor = view.editor;
          if (editor) {
            editor.setCursor({ line: unit.source.position.line, ch: 0 });
            editor.scrollIntoView({
              from: { line: unit.source.position.line, ch: 0 },
              to: { line: unit.source.position.line, ch: 0 }
            }, true);
            setTimeout(() => {
              editor.setSelection(
                { line: unit.source.position.line, ch: 0 },
                { line: unit.source.position.line, ch: 999 }
              );
            }, 100);
          }
        }
      }
      async deleteContentUnit(unit) {
        const confirmed = await this.confirmDelete(unit);
        if (!confirmed)
          return;
        await this.plugin.dataManager.deleteContentUnit(unit.id);
        await this.refresh();
      }
      async confirmDelete(unit) {
        return new Promise((resolve) => {
          const modal = new ConfirmModal(
            this.app,
            "Delete content",
            `Are you sure you want to delete this content?

"${unit.content.substring(0, 50)}..."`,
            () => resolve(true),
            () => resolve(false)
          );
          modal.open();
        });
      }
      showContextMenu(e, unit) {
        const menu = new import_obsidian4.Menu();
        menu.addItem(
          (item) => item.setTitle("Jump to source").setIcon("arrow-right").onClick(() => this.jumpToSource(unit))
        );
        const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
        menu.addItem(
          (item) => item.setTitle(annotation ? "Edit annotation" : "Add annotation").setIcon("pencil").onClick(() => {
            const card = e.target.closest(".content-card");
            if (card) {
              this.showAnnotationInput(card, unit, annotation == null ? void 0 : annotation.content);
            }
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("\u26A1 Quick create flashcard").setIcon("zap").onClick(async () => {
            await this.quickCreator.createSmartCard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("Create Q&A card").setIcon("message-square").onClick(async () => {
            await this.quickCreator.createQuickQACard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("Create Cloze card").setIcon("edit").onClick(async () => {
            await this.quickCreator.createQuickClozeCard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("Custom flashcard...").setIcon("settings").onClick(async () => {
            const { FlashcardCreateModal: FlashcardCreateModal2 } = await Promise.resolve().then(() => (init_FlashcardCreateModal(), FlashcardCreateModal_exports));
            const modal = new FlashcardCreateModal2(
              this.app,
              this.plugin,
              unit,
              async () => {
                await this.refresh();
              }
            );
            modal.open();
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("View Statistics").setIcon("bar-chart").onClick(() => {
            this.plugin.activateStats();
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("Delete").setIcon("trash").onClick(() => this.deleteContentUnit(unit))
        );
        menu.showAtMouseEvent(e);
      }
      getTypeIcon(type) {
        const icons = {
          "highlight": "\u2728",
          "bold": "**",
          "tag": "\u{1F3F7}",
          "custom": "\u2B50"
        };
        return icons[type] || "\u2022";
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      /* \u5DE5\u5177\u680F\u6837\u5F0F */
      .learning-system-toolbar {
        padding: 10px;
        border-bottom: 1px solid var(--background-modifier-border);
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .search-container { display: flex; }

      .search-input {
        flex: 1;
        padding: 6px 10px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
      }

      .group-container {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .group-label {
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .group-select {
        padding: 4px 8px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
      }

      .refresh-btn {
        padding: 4px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
        cursor: pointer;
        font-size: 16px;
      }

      .refresh-btn:hover { background: var(--background-modifier-hover); }

      .stats-container {
        color: var(--text-muted);
        font-size: 0.9em;
      }

      /* \u5185\u5BB9\u533A\u57DF\u6837\u5F0F */
      .learning-system-content {
        padding: 10px;
        overflow-y: auto;
      }

      .empty-state {
        text-align: center;
        color: var(--text-muted);
        padding: 40px 20px;
      }

      .file-group, .tag-group, .date-group { margin-bottom: 20px; }

      .group-header {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        background: var(--background-secondary);
        border-radius: 6px;
        cursor: pointer;
        margin-bottom: 8px;
      }

      .group-header:hover { background: var(--background-modifier-hover); }

      .group-title {
        flex: 1;
        display: flex;
        align-items: center;
        font-weight: 500;
      }

      .group-icon { margin-right: 4px; }

      .count-badge {
        background: var(--interactive-accent);
        color: white;
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 0.85em;
        font-weight: 500;
      }

      .collapse-btn {
        color: var(--text-muted);
        user-select: none;
        cursor: pointer;
      }

      /* \u6587\u4EF6\u6279\u6CE8\u663E\u793A */
      .file-annotation-display {
        margin: 8px 0 12px 0;
        padding: 8px 12px;
        background: var(--background-secondary-alt);
        border-radius: 4px;
        font-size: 0.9em;
      }

      .file-annotation-item {
        padding: 4px 0;
        color: var(--text-muted);
      }

      .file-annotation-item strong { color: var(--text-normal); }

      /* \u5185\u5BB9\u5361\u7247\u6837\u5F0F */
      .group-content {
        display: flex;
        flex-direction: column;
        gap: 8px;
        padding-left: 8px;
      }

      .content-card {
        padding: 12px;
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        transition: all 0.2s;
      }

      .content-card:hover {
        border-color: var(--interactive-accent);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .card-content {
        margin-bottom: 8px;
        display: flex;
        align-items: flex-start;
        gap: 4px;
        flex-wrap: wrap;
      }

      .type-icon { color: var(--text-muted); }

      .content-text {
        flex: 1;
        line-height: 1.5;
        word-wrap: break-word;
      }

      .clickable-content {
        cursor: pointer;
        transition: all 0.2s;
        padding: 4px;
        border-radius: 4px;
      }

      .clickable-content:hover {
        background: var(--background-modifier-hover);
        color: var(--interactive-accent);
      }

      .annotation-badge, .flashcard-badge {
        font-size: 14px;
        cursor: pointer;
        margin-left: 4px;
      }

      .annotation-badge.has-annotation {
        color: var(--interactive-accent);
      }

      /* \u6279\u6CE8\u663E\u793A\u6837\u5F0F */
      .annotation-display {
        margin: 10px 0;
        padding: 12px;
        background: var(--background-secondary-alt);
        border-left: 3px solid var(--interactive-accent);
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .annotation-display:hover {
        background: var(--background-modifier-hover);
        border-left-color: var(--interactive-accent-hover);
      }

      .annotation-content-display {
        line-height: 1.6;
        color: var(--text-normal);
        margin-bottom: 6px;
      }

      .annotation-content-display strong {
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .annotation-timestamp {
        font-size: 0.8em;
        color: var(--text-faint);
        text-align: right;
      }

      .annotation-badge-display {
        display: inline-block;
        padding: 3px 10px;
        border-radius: 12px;
        color: white;
        font-size: 0.85em;
        font-weight: 500;
        margin-right: 8px;
        margin-bottom: 6px;
      }

      /* \u5185\u8054\u6279\u6CE8\u8F93\u5165 */
      .annotation-input-container {
        margin: 12px 0;
        padding: 12px;
        background: var(--background-primary);
        border: 2px solid var(--interactive-accent);
        border-radius: 6px;
        animation: slideDown 0.2s ease;
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .annotation-textarea {
        width: 100%;
        padding: 10px;
        margin-bottom: 8px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-secondary);
        color: var(--text-normal);
        font-family: inherit;
        font-size: 1em;
        resize: vertical;
        min-height: 60px;
      }

      .annotation-textarea:focus {
        outline: none;
        border-color: var(--interactive-accent);
        background: var(--background-primary);
      }

      .annotation-textarea::placeholder {
        color: var(--text-faint);
      }

      .annotation-buttons {
        display: flex;
        gap: 8px;
        justify-content: flex-end;
      }

      .annotation-buttons button {
        padding: 6px 16px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.9em;
      }

      .annotation-delete-btn {
        background: transparent;
        color: var(--text-muted);
      }

      .annotation-delete-btn:hover {
        color: var(--color-red);
      }

      .annotation-save-btn {
        background: var(--interactive-accent);
        color: white;
      }

      .annotation-save-btn:hover {
        opacity: 0.8;
      }

      /* \u5143\u6570\u636E\u533A\u57DF */
      .card-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 8px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .tags-container {
        display: flex;
        flex-wrap: wrap;
        gap: 4px;
      }

      .tag {
        background: var(--background-secondary);
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.85em;
      }

      .heading-info {
        color: var(--text-muted);
        font-style: italic;
      }

      /* \u64CD\u4F5C\u6309\u94AE */
      .card-actions {
        display: flex;
        gap: 6px;
      }

      .action-btn {
        padding: 4px 10px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
        cursor: pointer;
        font-size: 14px;
        transition: all 0.2s;
      }

      .action-btn:hover {
        background: var(--interactive-accent);
        color: white;
        border-color: var(--interactive-accent);
      }

      .delete-btn:hover {
        background: var(--color-red);
        border-color: var(--color-red);
      }

      /* \u4E00\u952E\u521B\u5EFA\u95EA\u5361\u6309\u94AE\u7EC4 */
      .flashcard-btn-group {
        display: flex;
        gap: 0;
      }

      .quick-card-btn {
        border-radius: 4px 0 0 4px;
        border-right: none;
      }

      .more-card-btn {
        border-radius: 0 4px 4px 0;
        padding: 4px 6px;
        font-size: 10px;
      }

      .quick-card-btn:hover, .more-card-btn:hover {
        background: var(--interactive-accent);
        color: white;
      }

      .batch-create-btn {
        padding: 6px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--interactive-accent);
        color: white;
        cursor: pointer;
        font-weight: 500;
        transition: all 0.2s;
      }

      .batch-create-btn:hover {
        opacity: 0.8;
      }

      .batch-actions-overview {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .batch-mode-btn,
      .select-all-btn,
      .batch-delete-btn,
      .batch-create-cards-btn {
        padding: 6px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.9em;
        font-weight: 500;
      }

      .select-all-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .batch-mode-btn:hover {
        background: var(--background-modifier-hover);
      }

      .batch-delete-btn:hover {
        background: var(--color-red);
        border-color: var(--color-red);
        color: white;
      }

      .batch-create-cards-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .batch-checkbox {
        margin-right: 8px;
        cursor: pointer;
      }
    `;
        document.head.appendChild(styleEl);
      }
    };
    BatchCreateModal = class extends import_obsidian4.Modal {
      constructor(app, plugin, quickCreator, units, onComplete) {
        super(app);
        this.plugin = plugin;
        this.quickCreator = quickCreator;
        this.units = units;
        this.onComplete = onComplete;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h2", { text: "\u26A1 Batch Create Flashcards" });
        contentEl.createEl("p", {
          text: `Create flashcards for ${this.units.length} content items without cards.`
        });
        const typeContainer = contentEl.createDiv({ cls: "type-select-container" });
        typeContainer.createEl("h3", { text: "Card Type" });
        let selectedType = "smart";
        const types = [
          { value: "smart", label: "\u26A1 Smart (Auto-detect)", desc: "Automatically choose the best type" },
          { value: "qa", label: "\u{1F4DD} Q&A Cards", desc: "Question and answer format" },
          { value: "cloze", label: "\u270F\uFE0F Cloze Cards", desc: "Fill in the blanks" }
        ];
        types.forEach((type) => {
          const option = typeContainer.createDiv({ cls: "type-option" });
          const radio = option.createEl("input", {
            type: "radio",
            value: type.value,
            attr: { name: "card-type" }
          });
          if (type.value === "smart")
            radio.checked = true;
          const label = option.createDiv({ cls: "type-label" });
          label.createEl("strong", { text: type.label });
          label.createEl("div", { text: type.desc, cls: "type-desc" });
          option.addEventListener("click", () => {
            radio.checked = true;
            selectedType = type.value;
          });
        });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => this.close());
        const createBtn = buttonContainer.createEl("button", {
          text: `Create ${this.units.length} Cards`,
          cls: "mod-cta"
        });
        createBtn.addEventListener("click", async () => {
          await this.batchCreate(selectedType);
        });
        this.addStyles();
      }
      async batchCreate(type) {
        const { success, failed } = await this.quickCreator.createBatchCards(this.units, type);
        new import_obsidian4.Notice(`\u2705 Created ${success} flashcards! ${failed > 0 ? `(${failed} failed)` : ""}`);
        this.close();
        this.onComplete();
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      .type-select-container {
        margin: 20px 0;
      }

      .type-option {
        padding: 15px;
        margin: 10px 0;
        background: var(--background-secondary);
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .type-option:hover {
        border-color: var(--interactive-accent);
        background: var(--background-modifier-hover);
      }

      .type-option input[type="radio"] {
        margin-right: 10px;
      }

      .type-label {
        display: inline-block;
        vertical-align: top;
      }

      .type-desc {
        font-size: 0.9em;
        color: var(--text-muted);
        margin-top: 4px;
      }
    `;
        document.head.appendChild(styleEl);
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
    ConfirmModal = class extends import_obsidian4.Modal {
      constructor(app, title, message, onConfirm, onCancel) {
        super(app);
        this.title = title;
        this.message = message;
        this.onConfirm = onConfirm;
        this.onCancel = onCancel;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h2", { text: this.title });
        contentEl.createEl("p", { text: this.message });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => {
          this.close();
          this.onCancel();
        });
        const confirmBtn = buttonContainer.createEl("button", {
          text: "Delete",
          cls: "mod-warning"
        });
        confirmBtn.addEventListener("click", () => {
          this.close();
          this.onConfirm();
        });
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
  }
});

// src/ui/AnnotationModal.ts
var AnnotationModal_exports = {};
__export(AnnotationModal_exports, {
  AnnotationModal: () => AnnotationModal2,
  FileAnnotationModal: () => FileAnnotationModal
});
var import_obsidian9, AnnotationModal2, FileAnnotationModal;
var init_AnnotationModal = __esm({
  "src/ui/AnnotationModal.ts"() {
    import_obsidian9 = require("obsidian");
    AnnotationModal2 = class extends import_obsidian9.Modal {
      constructor(app, plugin, contentUnit, onSave) {
        super(app);
        this.plugin = plugin;
        this.annotationText = "";
        this.badgeText = "";
        this.badgeColor = "#5B9BD5";
        this.contentUnit = contentUnit;
        this.onSave = onSave;
        this.existingAnnotation = this.plugin.annotationManager.getContentAnnotation(
          contentUnit.id
        );
        if (this.existingAnnotation) {
          this.annotationText = this.existingAnnotation.content;
          if (this.existingAnnotation.badge) {
            this.badgeText = this.existingAnnotation.badge.text;
            this.badgeColor = this.existingAnnotation.badge.color;
          }
        }
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.addClass("annotation-modal");
        contentEl.createEl("h2", {
          text: this.existingAnnotation ? "Edit Annotation" : "Add Annotation"
        });
        const contentPreview = contentEl.createDiv({ cls: "annotation-content-preview" });
        contentPreview.createEl("h3", { text: "Content:" });
        contentPreview.createEl("blockquote", { text: this.contentUnit.content });
        new import_obsidian9.Setting(contentEl).setName("Annotation").setDesc("Add your notes or comments about this content").addTextArea((text) => {
          text.setPlaceholder("Enter your annotation here...").setValue(this.annotationText).onChange((value) => {
            this.annotationText = value;
          });
          text.inputEl.rows = 6;
          text.inputEl.style.width = "100%";
        });
        contentEl.createEl("h3", { text: "Badge (Optional)" });
        new import_obsidian9.Setting(contentEl).setName("Badge text").setDesc('Short text to display as a badge (e.g., "\u91CD\u8981", "\u5F85\u590D\u4E60")').addText(
          (text) => text.setPlaceholder("Badge text").setValue(this.badgeText).onChange((value) => {
            this.badgeText = value;
            this.updateBadgePreview();
          })
        );
        new import_obsidian9.Setting(contentEl).setName("Badge color").setDesc("Choose a color for the badge").addDropdown((dropdown) => {
          dropdown.addOption("#5B9BD5", "\u{1F535} Blue").addOption("#70AD47", "\u{1F7E2} Green").addOption("#FFC000", "\u{1F7E1} Yellow").addOption("#FF6B6B", "\u{1F534} Red").addOption("#C78BFF", "\u{1F7E3} Purple").addOption("#FF9F43", "\u{1F7E0} Orange").setValue(this.badgeColor).onChange((value) => {
            this.badgeColor = value;
            this.updateBadgePreview();
          });
        });
        const badgePreview = contentEl.createDiv({ cls: "badge-preview-container" });
        badgePreview.createEl("span", { text: "Preview: ", cls: "preview-label" });
        const badgeEl = badgePreview.createEl("span", { cls: "badge-preview" });
        this.badgePreviewEl = badgeEl;
        this.updateBadgePreview();
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        if (this.existingAnnotation) {
          const deleteBtn = buttonContainer.createEl("button", {
            text: "Delete",
            cls: "mod-warning"
          });
          deleteBtn.addEventListener("click", async () => {
            await this.deleteAnnotation();
          });
        }
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => {
          this.close();
        });
        const saveBtn = buttonContainer.createEl("button", {
          text: "Save",
          cls: "mod-cta"
        });
        saveBtn.addEventListener("click", async () => {
          await this.saveAnnotation();
        });
        this.addStyles();
      }
      updateBadgePreview() {
        if (!this.badgePreviewEl)
          return;
        if (this.badgeText) {
          this.badgePreviewEl.textContent = this.badgeText;
          this.badgePreviewEl.style.backgroundColor = this.badgeColor;
          this.badgePreviewEl.style.display = "inline-block";
        } else {
          this.badgePreviewEl.textContent = "No badge";
          this.badgePreviewEl.style.backgroundColor = "transparent";
          this.badgePreviewEl.style.color = "var(--text-muted)";
        }
      }
      async saveAnnotation() {
        if (!this.annotationText.trim()) {
          new import_obsidian9.Notice("Please enter annotation text");
          return;
        }
        try {
          let annotation;
          if (this.existingAnnotation) {
            await this.plugin.annotationManager.updateAnnotation(
              this.existingAnnotation.id,
              {
                content: this.annotationText,
                badge: this.badgeText ? {
                  text: this.badgeText,
                  color: this.badgeColor
                } : void 0
              }
            );
            annotation = this.plugin.annotationManager.getAnnotation(
              this.existingAnnotation.id
            );
            new import_obsidian9.Notice("Annotation updated");
          } else {
            annotation = await this.plugin.annotationManager.addContentAnnotation(
              this.contentUnit.id,
              this.annotationText,
              this.badgeText ? {
                text: this.badgeText,
                color: this.badgeColor
              } : void 0
            );
            new import_obsidian9.Notice("Annotation added");
          }
          this.onSave(annotation);
          this.close();
        } catch (error) {
          console.error("Error saving annotation:", error);
          new import_obsidian9.Notice("Error saving annotation");
        }
      }
      async deleteAnnotation() {
        if (!this.existingAnnotation)
          return;
        try {
          await this.plugin.annotationManager.deleteAnnotation(
            this.existingAnnotation.id
          );
          new import_obsidian9.Notice("Annotation deleted");
          this.close();
          this.onSave(null);
        } catch (error) {
          console.error("Error deleting annotation:", error);
          new import_obsidian9.Notice("Error deleting annotation");
        }
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      .annotation-modal {
        padding: 20px;
      }

      .annotation-content-preview {
        margin: 20px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .annotation-content-preview h3 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .annotation-content-preview blockquote {
        margin: 0;
        padding: 10px;
        border-left: 3px solid var(--interactive-accent);
        background: var(--background-primary);
        border-radius: 4px;
      }

      .badge-preview-container {
        margin: 10px 0;
        padding: 10px;
        background: var(--background-secondary);
        border-radius: 4px;
      }

      .preview-label {
        color: var(--text-muted);
        margin-right: 10px;
      }

      .badge-preview {
        padding: 4px 10px;
        border-radius: 12px;
        color: white;
        font-size: 0.85em;
        font-weight: 500;
      }

      .modal-button-container {
        display: flex;
        gap: 10px;
        justify-content: flex-end;
        margin-top: 20px;
      }

      .modal-button-container button {
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
      }
    `;
        document.head.appendChild(styleEl);
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
    FileAnnotationModal = class extends import_obsidian9.Modal {
      constructor(app, plugin, filePath, onSave) {
        super(app);
        this.plugin = plugin;
        this.existingAnnotations = [];
        this.annotationText = "";
        this.filePath = filePath;
        this.onSave = onSave;
        this.existingAnnotations = this.plugin.annotationManager.getFileAnnotations(filePath);
      }
      onOpen() {
        var _a;
        const { contentEl } = this;
        contentEl.createEl("h2", { text: "File Annotations" });
        const fileName = ((_a = this.filePath.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || this.filePath;
        contentEl.createEl("p", {
          text: `File: ${fileName}`,
          cls: "file-name"
        });
        if (this.existingAnnotations.length > 0) {
          const existingSection = contentEl.createDiv({ cls: "existing-annotations" });
          existingSection.createEl("h3", { text: "Existing Annotations" });
          this.existingAnnotations.forEach((annotation) => {
            const annotationCard = existingSection.createDiv({ cls: "annotation-card" });
            annotationCard.createEl("p", { text: annotation.content });
            const date = new Date(annotation.metadata.createdAt).toLocaleDateString();
            annotationCard.createEl("small", {
              text: `Created: ${date}`,
              cls: "annotation-date"
            });
            const deleteBtn = annotationCard.createEl("button", {
              text: "\u{1F5D1} Delete",
              cls: "delete-annotation-btn"
            });
            deleteBtn.addEventListener("click", async () => {
              await this.deleteAnnotation(annotation.id);
              this.close();
              this.onSave();
            });
          });
        }
        contentEl.createEl("h3", { text: "Add New Annotation" });
        new import_obsidian9.Setting(contentEl).setName("Annotation").setDesc("Add notes about this file").addTextArea((text) => {
          text.setPlaceholder("Enter file annotation...").setValue(this.annotationText).onChange((value) => {
            this.annotationText = value;
          });
          text.inputEl.rows = 4;
          text.inputEl.style.width = "100%";
        });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => {
          this.close();
        });
        const saveBtn = buttonContainer.createEl("button", {
          text: "Save",
          cls: "mod-cta"
        });
        saveBtn.addEventListener("click", async () => {
          await this.saveAnnotation();
        });
      }
      async saveAnnotation() {
        if (!this.annotationText.trim()) {
          new import_obsidian9.Notice("Please enter annotation text");
          return;
        }
        try {
          await this.plugin.annotationManager.addFileAnnotation(
            this.filePath,
            this.annotationText
          );
          new import_obsidian9.Notice("File annotation added");
          this.close();
          this.onSave();
        } catch (error) {
          console.error("Error saving file annotation:", error);
          new import_obsidian9.Notice("Error saving file annotation");
        }
      }
      async deleteAnnotation(id) {
        try {
          await this.plugin.annotationManager.deleteAnnotation(id);
          new import_obsidian9.Notice("Annotation deleted");
        } catch (error) {
          console.error("Error deleting annotation:", error);
          new import_obsidian9.Notice("Error deleting annotation");
        }
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => LearningSystemPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian10 = require("obsidian");

// src/ui/SettingsTab.ts
var import_obsidian = require("obsidian");
var SettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Learning System Settings" });
    new import_obsidian.Setting(containerEl).setName("Enable extraction").setDesc("Enable automatic content extraction").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.extractionEnabled).onChange(async (value) => {
        this.plugin.settings.extractionEnabled = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Auto scan").setDesc("Automatically scan files when they are opened").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.autoScan).onChange(async (value) => {
        this.plugin.settings.autoScan = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Default deck").setDesc("Default deck name for new flashcards").addText(
      (text) => text.setPlaceholder("Default").setValue(this.plugin.settings.defaultDeck).onChange(async (value) => {
        this.plugin.settings.defaultDeck = value;
        await this.plugin.saveSettings();
      })
    );
  }
};

// src/main.ts
init_OverviewView();

// src/ui/SidebarOverviewView.ts
var import_obsidian5 = require("obsidian");
init_QuickFlashcardCreator();
var VIEW_TYPE_SIDEBAR_OVERVIEW = "learning-system-sidebar-overview";
var VIEW_TYPE_MAIN_OVERVIEW = "learning-system-main-overview";
var SidebarOverviewView = class extends import_obsidian5.ItemView {
  constructor(leaf, plugin, forceMainMode = false) {
    super(leaf);
    // 状态管理
    this.forceMainMode = false;
    this.searchQuery = "";
    this.filterMode = "all";
    this.groupMode = "file";
    this.selectedFile = null;
    this.displayMode = "sidebar";
    this.viewType = "notes";
    this.activeMenuId = null;
    this.savedScrollPosition = 0;
    this.shouldRestoreScroll = false;
    this.batchMode = false;
    this.selectedUnitIds = /* @__PURE__ */ new Set();
    this.selectedCardIds = /* @__PURE__ */ new Set();
    // 性能优化
    this.searchDebounceTimer = null;
    this.isRendering = false;
    this.plugin = plugin;
    this.forceMainMode = forceMainMode;
    const activeFile = this.app.workspace.getActiveFile();
    if (activeFile) {
      this.selectedFile = activeFile.path;
    }
    let resizeTimer;
    window.addEventListener("resize", () => {
      clearTimeout(resizeTimer);
      resizeTimer = window.setTimeout(() => {
        this.detectDisplayMode();
        this.render();
      }, 150);
    });
    window.addEventListener("resize", () => {
      this.detectDisplayMode();
      this.render();
    });
  }
  getViewType() {
    const viewType = this.forceMainMode ? VIEW_TYPE_MAIN_OVERVIEW : VIEW_TYPE_SIDEBAR_OVERVIEW;
    return viewType;
  }
  getDisplayText() {
    return "Learning Overview";
  }
  getIcon() {
    return "book-marked";
  }
  async onOpen() {
    this.detectDisplayMode();
    if (!this.forceMainMode) {
      this.registerEvent(
        this.app.workspace.on("active-leaf-change", () => {
          const activeFile = this.app.workspace.getActiveFile();
          if (activeFile && this.displayMode === "sidebar") {
            this.selectedFile = activeFile.path;
            this.refresh();
          }
        })
      );
    }
    this.render();
    this.addStyles();
  }
  // ==================== 核心方法 ====================
  /**
   * 检测当前显示模式（侧边栏 vs 主界面）
   */
  detectDisplayMode() {
    if (this.forceMainMode) {
      this.displayMode = "main";
      return;
    }
    const parentSplit = this.leaf.parentSplit;
    const isLeftSidebar = (parentSplit == null ? void 0 : parentSplit.type) === "split" && this.app.workspace.leftSplit === parentSplit;
    const isRightSidebar = (parentSplit == null ? void 0 : parentSplit.type) === "split" && this.app.workspace.rightSplit === parentSplit;
    const containerEl = this.containerEl;
    const width = containerEl.clientWidth;
    const isNarrow = width < 500;
    const isSidebar = isLeftSidebar || isRightSidebar || isNarrow;
    this.displayMode = isSidebar ? "sidebar" : "main";
  }
  /**
   * 刷新视图
   */
  refresh() {
    if (this.isRendering) {
      requestAnimationFrame(() => {
        this.refresh();
      });
      return;
    }
    if (this.searchDebounceTimer !== null) {
      window.clearTimeout(this.searchDebounceTimer);
      this.searchDebounceTimer = null;
    }
    this.shouldRestoreScroll = true;
    this.render();
  }
  /**
   * 主渲染方法
   */
  render() {
    const allUnits = this.plugin.dataManager.getAllContentUnits();
    const unitsWithCards = allUnits.filter((u) => u.flashcardIds.length > 0);
    if (this.isRendering) {
      return;
    }
    if (this.searchDebounceTimer !== null) {
      window.clearTimeout(this.searchDebounceTimer);
      this.searchDebounceTimer = null;
    }
    this.isRendering = true;
    const container = this.containerEl.children[1];
    if (this.displayMode === "sidebar") {
      const contentList = container.querySelector(".sidebar-content-list");
      if (contentList) {
        this.savedScrollPosition = contentList.scrollTop;
      }
    }
    container.style.pointerEvents = "auto";
    const toolbar = container.querySelector(".sidebar-toolbar");
    if (toolbar) {
      toolbar.style.pointerEvents = "auto";
      toolbar.style.position = "relative";
      toolbar.style.zIndex = "100";
    }
    if (this.displayMode === "main" && !this.selectedFile && this.viewType === "notes") {
      const units = this.getFilteredUnits();
      const grouped = this.groupUnits(units);
      if (grouped.length > 0) {
        this.selectedFile = grouped[0].groupKey;
      }
    }
    container.empty();
    container.addClass("learning-overview-container");
    container.setAttribute("data-mode", this.displayMode);
    if (this.displayMode === "sidebar") {
      this.renderSidebarMode(container);
    } else {
      this.renderMainMode(container);
    }
    if (this.displayMode === "sidebar" && this.shouldRestoreScroll) {
      const contentList = container.querySelector(".sidebar-content-list");
      if (contentList) {
        requestAnimationFrame(() => {
          contentList.scrollTop = this.savedScrollPosition;
        });
      }
    }
    this.isRendering = false;
  }
  /**
   * 仅刷新内容区域（不重新渲染整个视图）
   */
  refreshContent() {
    const container = this.containerEl.children[1];
    if (this.displayMode === "sidebar") {
      const contentList = container.querySelector(".sidebar-content-list");
      if (contentList) {
        this.savedScrollPosition = contentList.scrollTop;
        contentList.empty();
        this.renderCompactContentList(contentList);
        requestAnimationFrame(() => {
          contentList.scrollTop = this.savedScrollPosition;
        });
      }
    } else {
      const rightPanel = container.querySelector(".right-panel");
      if (rightPanel) {
        rightPanel.empty();
        this.renderRightPanel(rightPanel);
      }
    }
  }
  // ==================== 侧边栏模式渲染 ====================
  renderSidebarMode(container) {
    this.renderSidebarToolbar(container);
    const contentList = container.createDiv({ cls: "sidebar-content-list" });
    this.renderCompactContentList(contentList);
  }
  renderSidebarToolbar(container) {
    const toolbar = container.createDiv({ cls: "sidebar-toolbar" });
    const searchContainer = toolbar.createDiv({ cls: "search-container" });
    const searchInput = searchContainer.createEl("input", {
      type: "text",
      placeholder: "\u{1F50D} \u641C\u7D22\u7B14\u8BB0...",
      cls: "search-input"
    });
    searchInput.value = this.searchQuery;
    searchInput.addEventListener("input", (e) => {
      const value = e.target.value;
      this.searchQuery = value;
      if (this.searchDebounceTimer !== null) {
        window.clearTimeout(this.searchDebounceTimer);
      }
      this.searchDebounceTimer = window.setTimeout(() => {
        this.selectedUnitIds.clear();
        this.selectedCardIds.clear();
        this.refreshContent();
      }, 300);
    });
    const filters = toolbar.createDiv({ cls: "filter-chips" });
    const filterOptions = [
      { mode: "all", icon: "\u{1F4DD}", label: "\u5168\u90E8" },
      { mode: "annotated", icon: "\u{1F4AC}", label: "\u6279\u6CE8" },
      { mode: "flashcards", icon: "\u{1F0CF}", label: "\u95EA\u5361" }
    ];
    filterOptions.forEach(({ mode, icon, label }) => {
      const chip = filters.createDiv({
        cls: `filter-chip ${this.filterMode === mode ? "active" : ""}`,
        text: `${icon} ${label}`
      });
      chip.addEventListener("click", () => {
        if (this.filterMode !== mode) {
          this.filterMode = mode;
          this.autoSelectAll();
          this.shouldRestoreScroll = false;
          this.render();
        }
      });
    });
    const groupSwitcher = toolbar.createDiv({ cls: "group-switcher" });
    const groupOptions = [
      { mode: "file", icon: "\u{1F4C1}", tooltip: "\u6309\u6587\u4EF6" },
      // { mode: 'annotation' as GroupMode, icon: '💬', tooltip: '批注' },
      { mode: "tag", icon: "\u{1F3F7}\uFE0F", tooltip: "\u6309\u6807\u7B7E" },
      { mode: "date", icon: "\u{1F4C5}", tooltip: "\u6309\u65E5\u671F" }
    ];
    groupOptions.forEach(({ mode, icon, tooltip }) => {
      const btn = groupSwitcher.createDiv({
        cls: `group-btn ${this.groupMode === mode ? "active" : ""}`,
        text: icon
      });
      btn.setAttribute("aria-label", tooltip);
      btn.addEventListener("click", () => {
        if (this.groupMode !== mode) {
          this.groupMode = mode;
          this.autoSelectAll();
          this.render();
        }
      });
    });
    const statsRow = toolbar.createDiv({ cls: "stats-row" });
    const selectAllBtn = statsRow.createEl("button", {
      text: this.isAllSelected() ? "\u2713" : "\u2610",
      cls: `select-all-btn-sidebar ${this.isAllSelected() ? "completed" : ""}`,
      title: this.isAllSelected() ? "\u53D6\u6D88\u5168\u9009" : "\u5168\u9009"
    });
    const shouldDisable = !this.selectedFile && this.groupMode !== "file";
    if (shouldDisable) {
      selectAllBtn.disabled = true;
      selectAllBtn.style.opacity = "0.5";
      selectAllBtn.style.cursor = "not-allowed";
      selectAllBtn.title = "\u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u5206\u7EC4";
    }
    selectAllBtn.addEventListener("click", () => {
      this.toggleSelectAll();
    });
    if (this.batchMode) {
      if (this.viewType === "notes") {
        const createBtn = statsRow.createEl("button", {
          text: `\u26A1(${this.selectedUnitIds.size})`,
          cls: "batch-create-cards-btn-sidebar",
          title: "\u6279\u91CF\u5236\u5361"
        });
        createBtn.addEventListener("click", () => {
          if (this.selectedUnitIds.size === 0) {
            new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u521B\u5EFA\u95EA\u5361\u7684\u7B14\u8BB0");
            return;
          }
          this.batchCreateFlashcards();
        });
      }
      const deleteBtn = statsRow.createEl("button", {
        text: `\u{1F5D1}\uFE0F(${this.viewType === "cards" ? this.selectedCardIds.size : this.selectedUnitIds.size})`,
        cls: "batch-delete-btn-sidebar",
        title: "\u6279\u91CF\u5220\u9664"
      });
      deleteBtn.addEventListener("click", () => {
        const count = this.viewType === "cards" ? this.selectedCardIds.size : this.selectedUnitIds.size;
        if (count === 0) {
          new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u9879\u76EE");
          return;
        }
        if (this.viewType === "cards") {
          this.batchDeleteFlashcards();
        } else {
          this.batchDeleteNotes();
        }
      });
      if (this.batchMode) {
        const cancelBtn = statsRow.createEl("button", {
          text: "\u2715",
          cls: "cancel-selection-btn-sidebar",
          title: "\u5173\u95ED"
        });
        cancelBtn.addEventListener("click", () => {
          this.clearSelection();
        });
      }
    }
  }
  /**
   * 渲染紧凑内容列表（侧边栏模式）
   */
  renderCompactContentList(container) {
    let units = this.getFilteredUnits();
    if (this.displayMode === "sidebar" && this.selectedFile) {
      units = units.filter((unit) => unit.source.file === this.selectedFile);
    }
    if (units.length === 0) {
      const emptyDiv = container.createDiv({ cls: "empty-state" });
      if (this.selectedFile) {
        emptyDiv.innerHTML = `
        <div style="padding: 20px; text-align: center;">
          <div style="font-size: 32px; margin-bottom: 10px;">\u{1F4ED}</div>
          <div style="color: var(--text-muted);">\u5F53\u524D\u6587\u6863\u6682\u65E0\u7B14\u8BB0</div>
          <div style="font-size: 12px; color: var(--text-faint); margin-top: 8px;">
            ${this.filterMode !== "all" ? "\u5C1D\u8BD5\u5207\u6362\u5176\u4ED6\u8FC7\u6EE4\u5668\u67E5\u770B" : "\u5F00\u59CB\u9AD8\u4EAE\u6587\u672C\u6765\u521B\u5EFA\u7B14\u8BB0"}
          </div>
        </div>
      `;
      } else {
        emptyDiv.textContent = "\u6682\u65E0\u5185\u5BB9";
      }
      return;
    }
    const grouped = this.groupUnits(units);
    grouped.forEach(({ groupKey, units: groupUnits }) => {
      const groupEl = container.createDiv({ cls: "content-group" });
      const header = groupEl.createDiv({ cls: "group-header" });
      header.createSpan({ text: this.getGroupIcon(this.groupMode), cls: "group-icon" });
      header.createSpan({ text: groupKey, cls: "group-title" });
      header.createSpan({ text: `${groupUnits.length}`, cls: "group-count" });
      groupUnits.forEach((unit) => {
        this.renderCompactCard(groupEl, unit);
      });
    });
  }
  /**
   * 渲染紧凑卡片（侧边栏模式）
   */
  renderCompactCard(container, unit) {
    const card = container.createDiv({ cls: "compact-card" });
    if (this.batchMode) {
      const checkbox = card.createEl("input", {
        type: "checkbox",
        cls: "batch-checkbox"
      });
      checkbox.setAttribute("data-unit-id", unit.id);
      checkbox.checked = this.selectedUnitIds.has(unit.id);
      checkbox.addEventListener("change", (e) => {
        if (e.target.checked) {
          this.selectedUnitIds.add(unit.id);
        } else {
          this.selectedUnitIds.delete(unit.id);
        }
        this.render();
      });
    }
    const indicator = card.createDiv({ cls: "card-indicator" });
    if (unit.type === "QA") {
      indicator.addClass("type-qa");
    } else if (unit.type === "cloze") {
      indicator.addClass("type-cloze");
    } else if (unit.type === "text") {
      indicator.addClass("type-text");
    }
    if (unit.annotationId)
      indicator.addClass("has-annotation");
    if (unit.flashcardIds.length > 0)
      indicator.addClass("has-flashcard");
    const content = card.createDiv({ cls: "card-content" });
    const header = content.createDiv({ cls: "card-header" });
    header.addEventListener("click", () => {
      this.toggleInlineAnnotation(card, unit);
    });
    const annotationBtn = header.createDiv({ cls: "annotation-btn" });
    annotationBtn.innerHTML = "\u{1F4AC}";
    const tools = header.createDiv({ cls: "card-tools" });
    tools.addEventListener("click", (e) => {
      e.stopPropagation();
    });
    if (!this.batchMode) {
      const flashcardBtn = tools.createDiv({ cls: "tool-btn flashcard-btn" });
      flashcardBtn.innerHTML = "\u26A1";
      flashcardBtn.setAttribute("aria-label", "\u751F\u6210\u95EA\u5361");
      flashcardBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        this.quickGenerateFlashcard(unit);
      });
    }
    const moreBtn = tools.createDiv({ cls: "tool-btn more-btn" });
    moreBtn.innerHTML = "\u22EE";
    moreBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      this.showContextMenu(e, unit);
    });
    const noteText = content.createDiv({ cls: "note-text" });
    let displayHTML = "";
    if (unit.type === "QA" && unit.answer) {
      displayHTML = `<span class="qa-question">${unit.content}</span> <span class="qa-separator">::</span> <span class="qa-answer">${unit.answer}</span>`;
    } else if (unit.type === "cloze" && unit.fullContext) {
      let context = unit.fullContext.replace(/==/g, "");
      const answer = unit.content;
      displayHTML = context.replace(
        answer,
        `<span class="cloze-highlight">${answer}</span>`
      );
    } else {
      displayHTML = unit.content;
    }
    noteText.innerHTML = displayHTML;
    noteText.addEventListener("click", () => {
      this.jumpToSource(unit);
    });
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    if (annotation) {
      const annEl = content.createDiv({ cls: "annotation-preview" });
      const annText = annotation.content.length > 60 ? annotation.content.substring(0, 60) + "..." : annotation.content;
      annEl.textContent = `\u{1F4AC} ${annText}`;
      annEl.addEventListener("click", (e) => {
        e.stopPropagation();
        this.toggleInlineAnnotation(card, unit);
      });
    }
    const meta = content.createDiv({ cls: "card-meta" });
    if (unit.metadata.tags.length > 0) {
      unit.metadata.tags.slice(0, 2).forEach((tag) => {
        meta.createSpan({ text: `#${tag}`, cls: "tag" });
      });
      if (unit.metadata.tags.length > 2) {
        meta.createSpan({ text: `+${unit.metadata.tags.length - 2}`, cls: "tag-more" });
      }
    }
    if (unit.flashcardIds.length > 0) {
      meta.createSpan({ text: `\u{1F0CF} ${unit.flashcardIds.length}`, cls: "badge" });
    }
  }
  // ==================== 主界面模式渲染 ====================
  renderMainMode(container) {
    const layout = container.createDiv({ cls: "main-layout" });
    const leftPanel = layout.createDiv({ cls: "left-panel" });
    if (!this.selectedFile && this.viewType === "notes") {
      const units = this.getFilteredUnits();
      const grouped = this.groupUnits(units);
      if (grouped.length > 0) {
        this.selectedFile = grouped[0].groupKey;
      }
    }
    this.renderLeftPanel(leftPanel);
    const rightPanel = layout.createDiv({ cls: "right-panel" });
    this.renderRightPanel(rightPanel);
  }
  renderLeftPanel(container) {
    this.renderMainToolbar(container);
    this.renderFixedEntries(container);
    this.renderFileList(container);
  }
  renderMainToolbar(container) {
    const toolbar = container.createDiv({ cls: "main-toolbar" });
    const searchInput = toolbar.createEl("input", {
      type: "text",
      placeholder: "\u{1F50D} \u641C\u7D22...",
      cls: "search-input-main"
    });
    searchInput.value = this.searchQuery;
    searchInput.addEventListener("input", (e) => {
      const value = e.target.value;
      this.searchQuery = value;
      if (this.searchDebounceTimer !== null) {
        window.clearTimeout(this.searchDebounceTimer);
      }
      this.searchDebounceTimer = window.setTimeout(() => {
        this.selectedFile = null;
        const container2 = this.containerEl.children[1];
        const rightPanel = container2.querySelector(".right-panel");
        if (rightPanel) {
          rightPanel.empty();
          this.renderRightPanel(rightPanel);
        }
        const fileListContainer = container2.querySelector(".file-list");
        if (fileListContainer) {
          fileListContainer.empty();
          this.renderFileListContent(fileListContainer);
        }
        this.selectedUnitIds.clear();
        this.selectedCardIds.clear();
      }, 300);
    });
    const groupSwitcher = toolbar.createDiv({ cls: "group-switcher-main" });
    const groupOptions = [
      { mode: "file", icon: "\u{1F4C1}", label: "\u6587\u4EF6" },
      { mode: "annotation", icon: "\u{1F4AC}", label: "\u6279\u6CE8" },
      { mode: "tag", icon: "\u{1F3F7}\uFE0F", label: "\u6807\u7B7E" },
      { mode: "date", icon: "\u{1F4C5}", label: "\u65E5\u671F" }
    ];
    groupOptions.forEach(({ mode, icon, label }) => {
      const btn = groupSwitcher.createDiv({
        cls: `group-btn-main ${this.groupMode === mode ? "active" : ""}`
      });
      btn.innerHTML = `${icon} `;
      btn.addEventListener("click", () => {
        if (this.groupMode !== mode) {
          this.groupMode = mode;
          this.selectedFile = null;
          this.autoSelectAll();
          this.render();
          const container2 = this.containerEl.children[1];
          const fileListContainer = container2.querySelector(".file-list");
          if (fileListContainer) {
            fileListContainer.empty();
            this.renderFileListContent(fileListContainer);
          }
          const rightPanel = container2.querySelector(".right-panel");
          if (rightPanel) {
            rightPanel.empty();
            this.renderRightPanel(rightPanel);
          }
        }
      });
    });
  }
  renderFixedEntries(container) {
    const entries = container.createDiv({ cls: "fixed-entries" });
    const allNotesBtn = entries.createDiv({
      cls: `entry-btn ${this.viewType === "notes" ? "active" : ""}`
    });
    allNotesBtn.innerHTML = "\u{1F4DD} <span>\u5168\u90E8\u7B14\u8BB0</span>";
    allNotesBtn.addEventListener("click", () => {
      this.viewType = "notes";
      this.selectedFile = null;
      this.autoSelectAll();
      this.render();
    });
    const cardListBtn = entries.createDiv({
      cls: `entry-btn ${this.viewType === "cards" ? "active" : ""}`
    });
    cardListBtn.innerHTML = "\u{1F0CF} <span>Card List</span>";
    cardListBtn.addEventListener("click", () => {
      this.viewType = "cards";
      this.selectedFile = null;
      this.autoSelectAll();
      this.render();
    });
  }
  renderFileList(container) {
    const titleText = this.viewType === "cards" ? "\u95EA\u5361\u5206\u7EC4" : "\u6587\u6863\u5217\u8868";
    container.createEl("h3", { text: "\u{1F4C1} \u6587\u6863\u5217\u8868", cls: "panel-title" });
    const fileListContainer = container.createDiv({ cls: "file-list" });
    this.renderFileListContent(fileListContainer);
  }
  renderFileListContent(container) {
    container.empty();
    let grouped;
    if (this.viewType === "cards") {
      const flashcards = this.plugin.flashcardManager.getAllFlashcards();
      const cardGroups = this.groupFlashcards(flashcards);
      grouped = cardGroups.map((g) => ({ groupKey: g.groupKey, cards: g.cards, count: g.cards.length }));
    } else {
      const units = this.getFilteredUnits();
      const unitGroups = this.groupUnits(units);
      grouped = unitGroups.map((g) => ({ groupKey: g.groupKey, units: g.units, count: g.units.length }));
    }
    if (grouped.length === 0) {
      container.createDiv({
        text: "\u6682\u65E0\u6587\u6863",
        cls: "empty-hint"
      });
      return;
    }
    if (!this.selectedFile && grouped.length > 0) {
      this.selectedFile = grouped[0].groupKey;
    }
    grouped.forEach(({ groupKey, count }) => {
      const fileItem = container.createDiv({
        cls: `file-item ${this.selectedFile === groupKey ? "selected" : ""}`
      });
      fileItem.innerHTML = `
        <span class="file-icon">${this.getGroupIcon(this.groupMode)}</span>
        <span class="file-name">${groupKey}</span>
        <span class="file-count">${count}</span>
      `;
      fileItem.addEventListener("click", () => {
        try {
          if (this.selectedFile !== groupKey) {
            this.selectedFile = groupKey;
            const allItems = container.querySelectorAll(".file-item");
            allItems.forEach((item) => item.removeClass("selected"));
            fileItem.addClass("selected");
            const mainContainer = this.containerEl.children[1];
            const rightPanel = mainContainer.querySelector(".right-panel");
            if (rightPanel) {
              rightPanel.empty();
              this.renderRightPanel(rightPanel);
            }
          }
        } catch (error) {
          console.error("[fileItem click] Error:", error);
          new import_obsidian5.Notice("\u26A0\uFE0F \u5207\u6362\u5206\u7EC4\u65F6\u51FA\u9519\uFF0C\u8BF7\u91CD\u8BD5");
        }
      });
    });
  }
  renderRightPanel(container) {
    if (this.viewType === "cards") {
      if (!this.selectedFile) {
        const flashcards = this.plugin.flashcardManager.getAllFlashcards();
        const grouped = this.groupFlashcards(flashcards);
        if (grouped.length > 0) {
          this.selectedFile = grouped[0].groupKey;
        } else {
          const empty = container.createDiv({ cls: "empty-right-panel" });
          empty.innerHTML = `
            <div class="empty-icon">\u{1F4ED}</div>
            <div class="empty-text">\u6682\u65E0\u95EA\u5361</div>
          `;
          return;
        }
      }
      this.renderFlashcardsGrid(container);
      return;
    }
    if (!this.selectedFile) {
      const units = this.getFilteredUnits();
      const grouped = this.groupUnits(units);
      if (grouped.length > 0) {
        this.selectedFile = grouped[0].groupKey;
        const container2 = this.containerEl.children[1];
        const fileListContainer = container2.querySelector(".file-list");
        if (fileListContainer) {
          const firstItem = fileListContainer.querySelector(".file-item");
          firstItem == null ? void 0 : firstItem.addClass("selected");
        }
      } else {
        const empty = container.createDiv({ cls: "empty-right-panel" });
        empty.innerHTML = `
          <div class="empty-icon">\u{1F4ED}</div>
          <div class="empty-text">\u6682\u65E0\u5185\u5BB9</div>
        `;
        return;
      }
    }
    this.renderContentGrid(container);
  }
  /**
   * 渲染内容网格（主界面模式）
   */
  renderContentGrid(container) {
    const header = container.createDiv({ cls: "grid-header" });
    const title = header.createEl("h2", { text: this.selectedFile || "\u5185\u5BB9" });
    const headerActions = header.createDiv({ cls: "header-actions" });
    if (this.batchMode) {
      if (this.viewType === "notes") {
        const createBtn = headerActions.createEl("button", {
          text: `\u26A1 \u6279\u91CF\u5236\u5361 (${this.selectedUnitIds.size})`,
          cls: "batch-create-cards-btn-header"
        });
        createBtn.addEventListener("click", () => {
          if (this.selectedUnitIds.size === 0) {
            new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u521B\u5EFA\u95EA\u5361\u7684\u7B14\u8BB0");
            return;
          }
          this.batchCreateFlashcards();
        });
      }
      const deleteBtn = headerActions.createEl("button", {
        text: `\u{1F5D1}\uFE0F \u5220\u9664 (${this.viewType === "cards" ? this.selectedCardIds.size : this.selectedUnitIds.size})`,
        cls: "batch-delete-btn-header"
      });
      deleteBtn.addEventListener("click", () => {
        const count = this.viewType === "cards" ? this.selectedCardIds.size : this.selectedUnitIds.size;
        if (count === 0) {
          new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u9879\u76EE");
          return;
        }
        if (this.viewType === "cards") {
          this.batchDeleteFlashcards();
        } else {
          this.batchDeleteNotes();
        }
      });
    }
    if (this.batchMode) {
      const cancelBtn = headerActions.createEl("button", {
        text: "\u2715 \u53D6\u6D88",
        cls: "cancel-selection-btn-header"
      });
      cancelBtn.addEventListener("click", () => {
        this.clearSelection();
      });
    }
    const selectAllBtn = headerActions.createEl("button", {
      text: this.isAllSelected() ? "\u2713 \u9009\u62E9" : "\u2610 \u5168\u9009",
      cls: `select-all-btn-header ${this.isAllSelected() ? "completed" : ""}`
    });
    selectAllBtn.addEventListener("click", () => {
      this.toggleSelectAll();
    });
    const gridContainer = container.createDiv({ cls: "content-grid" });
    const units = this.getFilteredUnits().filter((unit) => {
      if (this.groupMode === "file") {
        return unit.source.file === this.selectedFile;
      } else if (this.groupMode === "annotation") {
        const hasAnnotation = this.selectedFile === "\u6709\u6279\u6CE8";
        return hasAnnotation ? !!unit.annotationId : !unit.annotationId;
      } else if (this.groupMode === "tag") {
        return unit.metadata.tags.includes(this.selectedFile);
      } else if (this.groupMode === "date") {
        return this.formatDate(new Date(unit.metadata.createdAt)) === this.selectedFile;
      }
      return false;
    });
    if (units.length === 0) {
      gridContainer.createDiv({
        text: "\u{1F4ED} \u6682\u65E0\u5185\u5BB9",
        cls: "empty-state"
      });
      return;
    }
    units.forEach((unit) => {
      this.renderGridCard(gridContainer, unit);
    });
  }
  /**
  * 渲染闪卡网格（类似 renderContentGrid）
  */
  renderFlashcardsGrid(container) {
    const header = container.createDiv({ cls: "grid-header" });
    header.createEl("h2", { text: this.selectedFile || "\u95EA\u5361" });
    const headerActions = header.createDiv({ cls: "header-actions" });
    if (this.batchMode) {
      const deleteBtn = headerActions.createEl("button", {
        text: `\u{1F5D1}\uFE0F \u5220\u9664 (${this.selectedCardIds.size})`,
        cls: `batch-delete-btn-header ${this.selectedCardIds.size === 0 ? "disabled" : ""}`
      });
      deleteBtn.addEventListener("click", () => {
        if (this.selectedCardIds.size === 0) {
          new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u95EA\u5361");
          return;
        }
        this.batchDeleteFlashcards();
      });
    }
    if (this.batchMode) {
      const cancelBtn = headerActions.createEl("button", {
        text: "\u2715 \u53D6\u6D88",
        cls: "cancel-selection-btn-header"
      });
      cancelBtn.addEventListener("click", () => {
        this.clearSelection();
      });
    }
    const selectAllBtn = headerActions.createEl("button", {
      text: this.isAllSelected() ? "\u2713 \u5B8C\u6210" : "\u2610 \u5168\u9009",
      cls: `select-all-btn-header ${this.isAllSelected() ? "completed" : ""}`
    });
    selectAllBtn.addEventListener("click", () => {
      this.toggleSelectAll();
    });
    const gridContainer = container.createDiv({ cls: "content-grid" });
    const flashcards = this.plugin.flashcardManager.getAllFlashcards();
    const filteredCards = flashcards.filter((card) => {
      if (!this.selectedFile)
        return false;
      if (this.groupMode === "file") {
        return card.sourceFile === this.selectedFile;
      }
      if (this.groupMode === "annotation") {
        const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
        const hasAnnotation = this.selectedFile === "\u6709\u6279\u6CE8";
        if (hasAnnotation) {
          return unit && !!unit.annotationId;
        } else {
          return !unit || !unit.annotationId;
        }
      }
      if (this.groupMode === "tag") {
        const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
        if (unit && unit.metadata.tags && unit.metadata.tags.includes(this.selectedFile)) {
          return true;
        }
        if (card.tags && card.tags.includes(this.selectedFile)) {
          return true;
        }
        if (card.deck === this.selectedFile) {
          return true;
        }
        if (this.selectedFile === "\u672A\u5206\u7C7B" && (!card.tags || card.tags.length === 0) && !card.deck && (!unit || !unit.metadata.tags || unit.metadata.tags.length === 0)) {
          return true;
        }
        return false;
      }
      if (this.groupMode === "date") {
        const cardDate = this.formatDate(new Date(card.metadata.createdAt));
        return cardDate === this.selectedFile;
      }
      return false;
    });
    if (filteredCards.length === 0) {
      gridContainer.createDiv({ text: "\u{1F4ED} \u8BE5\u5206\u7EC4\u4E0B\u6682\u65E0\u95EA\u5361", cls: "empty-state" });
      return;
    }
    filteredCards.forEach((card) => {
      this.renderFlashcardGridCard(gridContainer, card);
    });
  }
  /**
   * 渲染网格卡片（主界面模式）
   */
  renderGridCard(container, unit) {
    var _a;
    const card = container.createDiv({ cls: "grid-card" });
    if (this.batchMode) {
      const checkbox = card.createEl("input", {
        type: "checkbox",
        cls: "batch-checkbox"
      });
      checkbox.setAttribute("data-unit-id", unit.id);
      checkbox.checked = this.selectedUnitIds.has(unit.id);
      checkbox.addEventListener("change", (e) => {
        if (e.target.checked) {
          this.selectedUnitIds.add(unit.id);
        } else {
          this.selectedUnitIds.delete(unit.id);
        }
        this.render();
      });
    }
    const header = card.createDiv({ cls: "grid-card-header" });
    header.addEventListener("click", () => {
      this.jumpToSource(unit);
    });
    const typeIndicator = header.createDiv({ cls: "type-indicator" });
    if (unit.type === "QA") {
      typeIndicator.addClass("type-qa");
      typeIndicator.textContent = "Q&A";
    } else if (unit.type === "cloze") {
      typeIndicator.addClass("type-cloze");
      typeIndicator.textContent = "Cloze";
    } else {
      typeIndicator.addClass("type-text");
      typeIndicator.textContent = "Text";
    }
    const fileName = ((_a = unit.source.file.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || "";
    header.createSpan({ text: fileName, cls: "doc-name" });
    const tools = header.createDiv({ cls: "grid-card-tools" });
    if (!this.batchMode) {
      const flashcardBtn = tools.createDiv({ cls: "tool-btn-grid" });
      flashcardBtn.innerHTML = "\u26A1";
      flashcardBtn.setAttribute("aria-label", "\u751F\u6210\u95EA\u5361");
      flashcardBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        this.quickGenerateFlashcard(unit);
      });
    }
    const moreBtn = tools.createDiv({ cls: "tool-btn-grid" });
    moreBtn.innerHTML = "\u22EE";
    moreBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      this.showContextMenu(e, unit);
    });
    const content = card.createDiv({ cls: "grid-card-content" });
    const noteText = content.createDiv({ cls: "grid-note-text" });
    let displayHTML = "";
    if (unit.type === "QA" && unit.answer) {
      displayHTML = `<span>${unit.content}</span> <span >::</span> <span >${unit.answer}</span>`;
    } else if (unit.type === "cloze" && unit.fullContext) {
      const context = unit.fullContext;
      const answer = unit.content;
      displayHTML = context.replace(
        answer,
        `<span >${answer}</span>`
      );
    } else {
      displayHTML = unit.content;
    }
    noteText.innerHTML = displayHTML;
    noteText.addEventListener("click", () => {
      this.toggleInlineAnnotation(card, unit);
    });
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    if (annotation) {
      const annEl = content.createDiv({ cls: "grid-annotation" });
      annEl.innerHTML = `<strong>\u6279\u6CE8\uFF1A</strong>${annotation.content}`;
      annEl.addEventListener("click", (e) => {
        e.stopPropagation();
        this.toggleInlineAnnotation(card, unit);
      });
    }
    if (unit.metadata.tags.length > 0) {
      const tags = content.createDiv({ cls: "grid-tags" });
      unit.metadata.tags.forEach((tag) => {
        tags.createSpan({ text: `#${tag}`, cls: "tag-grid" });
      });
    }
    const meta = card.createDiv({ cls: "grid-card-meta" });
    meta.createSpan({ text: `L${unit.source.position.line}`, cls: "line-info" });
    if (unit.flashcardIds.length > 0) {
      meta.createSpan({ text: `\u{1F0CF} ${unit.flashcardIds.length}`, cls: "badge-grid" });
    }
  }
  /**
   * 渲染闪卡网格卡片（带下拉菜单）
   */
  renderFlashcardGridCard(container, card) {
    const cardEl = container.createDiv({ cls: "grid-card flashcard-grid-card" });
    if (this.batchMode) {
      const checkbox = cardEl.createEl("input", {
        type: "checkbox",
        cls: "batch-checkbox"
      });
      checkbox.setAttribute("data-card-id", card.id);
      checkbox.checked = this.selectedCardIds.has(card.id);
      checkbox.addEventListener("change", (e) => {
        if (e.target.checked) {
          this.selectedCardIds.add(card.id);
        } else {
          this.selectedCardIds.delete(card.id);
        }
        this.render();
      });
    }
    const header = cardEl.createDiv({ cls: "grid-card-header" });
    header.addEventListener("click", async () => {
      const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
      if (unit) {
        await this.jumpToSource(unit);
      } else {
        const file = this.app.vault.getAbstractFileByPath(card.sourceFile);
        if (file instanceof import_obsidian5.TFile) {
          await this.app.workspace.getLeaf(false).openFile(file);
          new import_obsidian5.Notice("\u2705 \u5DF2\u6253\u5F00\u6E90\u6587\u4EF6");
        } else {
          new import_obsidian5.Notice("\u26A0\uFE0F \u627E\u4E0D\u5230\u539F\u59CB\u7B14\u8BB0");
        }
      }
    });
    const typeLabel = header.createDiv({
      cls: `flashcard-type ${card.type}`,
      text: card.type === "qa" ? "Q&A" : "\u586B\u7A7A"
    });
    const tools = header.createDiv({ cls: "grid-card-tools" });
    const moreBtn = tools.createDiv({ cls: "tool-btn-grid" });
    moreBtn.innerHTML = "\u22EE";
    moreBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      this.showFlashcardContextMenu(e, card);
    });
    const content = cardEl.createDiv({ cls: "grid-card-content" });
    const question = content.createDiv({ cls: "flashcard-question" });
    question.innerHTML = `<strong>\u95EE\u9898\uFF1A</strong>${card.front}`;
    const answer = content.createDiv({ cls: "flashcard-answer" });
    const answerText = Array.isArray(card.back) ? card.back.join(", ") : card.back;
    answer.innerHTML = `<strong>\u7B54\u6848\uFF1A</strong>${answerText}`;
    const meta = cardEl.createDiv({ cls: "grid-card-meta" });
    meta.createSpan({
      text: this.formatDate(new Date(card.metadata.createdAt)),
      cls: "flashcard-date"
    });
  }
  /**
   * 渲染闪卡列表
   */
  renderCardsList(container) {
    const header = container.createDiv({ cls: "cards-header" });
    header.createEl("h2", { text: "\u{1F0CF} \u6240\u6709\u95EA\u5361" });
    const cardsContainer = container.createDiv({ cls: "cards-grid" });
    const flashcards = this.plugin.flashcardManager.getAllFlashcards();
    if (flashcards.length === 0) {
      cardsContainer.createDiv({
        text: "\u{1F4ED} \u6682\u65E0\u95EA\u5361",
        cls: "empty-state"
      });
      return;
    }
    flashcards.forEach((card) => {
      const cardEl = cardsContainer.createDiv({ cls: "flashcard-item" });
      if (this.batchMode) {
        const checkbox = cardEl.createEl("input", {
          type: "checkbox",
          cls: "batch-checkbox"
        });
        checkbox.setAttribute("data-card-id", card.id);
        checkbox.checked = this.selectedCardIds.has(card.id);
        checkbox.addEventListener("change", (e) => {
          if (e.target.checked) {
            this.selectedCardIds.add(card.id);
          } else {
            this.selectedCardIds.delete(card.id);
          }
          this.render();
        });
      }
      const cardHeader = cardEl.createDiv({ cls: "flashcard-header" });
      const typeLabel = cardHeader.createDiv({
        cls: `flashcard-type ${card.type}`,
        text: card.type === "qa" ? "Q&A" : "\u586B\u7A7A"
      });
      cardHeader.createSpan({
        text: this.formatDate(new Date(card.metadata.createdAt)),
        cls: "flashcard-date"
      });
      const deleteBtn = cardHeader.createEl("button", {
        text: "\u{1F5D1}\uFE0F",
        cls: "flashcard-delete-btn"
      });
      deleteBtn.setAttribute("aria-label", "\u5220\u9664\u95EA\u5361");
      deleteBtn.addEventListener("click", async (e) => {
        e.stopPropagation();
        if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u5F20\u95EA\u5361\u5417\uFF1F")) {
          await this.deleteFlashcard(card.id);
        }
      });
      const cardBody = cardEl.createDiv({ cls: "flashcard-body" });
      const question = cardBody.createDiv({ cls: "flashcard-question" });
      question.innerHTML = `<strong>\u95EE\u9898\uFF1A</strong>${card.front}`;
      const answer = cardBody.createDiv({ cls: "flashcard-answer" });
      const answerText = Array.isArray(card.back) ? card.back.join(", ") : card.back;
      answer.innerHTML = `<strong>\u7B54\u6848\uFF1A</strong>${answerText}`;
    });
  }
  // ==================== 交互方法 ====================
  /**
   * 切换内联批注编辑器
   */
  toggleInlineAnnotation(cardEl, unit) {
    let existingEditor = cardEl.querySelector(".inline-annotation-editor");
    if (existingEditor) {
      existingEditor.remove();
      const annotation2 = this.plugin.annotationManager.getContentAnnotation(unit.id);
      if (annotation2) {
        const content2 = cardEl.querySelector(".card-content, .grid-card-content");
        const existingPreview = content2.querySelector(".annotation-preview, .grid-annotation");
        if (!existingPreview) {
          this.recreateAnnotationPreview(content2, cardEl, unit, annotation2.content);
        }
      }
      return;
    }
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    const content = cardEl.querySelector(".card-content, .grid-card-content");
    const annotationPreview = content.querySelector(".annotation-preview, .grid-annotation");
    const isGridCard = cardEl.classList.contains("grid-card");
    const editor = document.createElement("div");
    editor.className = "inline-annotation-editor";
    const textarea = document.createElement("textarea");
    textarea.className = "inline-annotation-textarea";
    textarea.placeholder = "Add comment...";
    textarea.value = (annotation == null ? void 0 : annotation.content) || "";
    textarea.setAttribute("data-unit-id", unit.id);
    const hint = document.createElement("div");
    hint.className = "inline-annotation-hint";
    hint.textContent = "Shift + Enter \u6362\u884C";
    editor.appendChild(textarea);
    editor.appendChild(hint);
    if (annotationPreview) {
      annotationPreview.replaceWith(editor);
    } else {
      const noteText = content.querySelector(".note-text, .grid-note-text");
      if (noteText) {
        noteText.after(editor);
      } else {
        content.appendChild(editor);
      }
    }
    textarea.focus();
    textarea.setSelectionRange(textarea.value.length, textarea.value.length);
    textarea.addEventListener("blur", async (e) => {
      const relatedTarget = e.relatedTarget;
      if (!relatedTarget || !editor.contains(relatedTarget)) {
        setTimeout(async () => {
          if (editor.parentElement) {
            await this.saveInlineAnnotation(editor, unit, textarea.value);
          }
        }, 100);
      }
    });
    textarea.addEventListener("keydown", async (e) => {
      if (e.key === "Tab") {
        e.preventDefault();
        await this.saveInlineAnnotation(editor, unit, textarea.value);
      }
    });
  }
  /**
   * 保存内联批注
   */
  async saveInlineAnnotation(editorEl, unit, text) {
    console.log("\u{1F50D} [saveInlineAnnotation] \u5F00\u59CB\u4FDD\u5B58", { unitId: unit.id, text });
    const trimmedText = text.trim();
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    if (trimmedText) {
      if (annotation) {
        await this.plugin.annotationManager.updateAnnotation(annotation.id, {
          content: trimmedText
        });
      } else {
        await this.plugin.annotationManager.addContentAnnotation(unit.id, trimmedText);
      }
    } else if (annotation) {
      await this.plugin.annotationManager.deleteAnnotation(annotation.id);
      new import_obsidian5.Notice("\u{1F5D1}\uFE0F \u6279\u6CE8\u5DF2\u5220\u9664");
    }
    const card = editorEl.closest(".compact-card, .grid-card");
    console.log("\u{1F50D} [saveInlineAnnotation] \u627E\u5230 card:", !!card);
    editorEl.remove();
    console.log("\u{1F50D} [saveInlineAnnotation] \u7F16\u8F91\u5668\u5DF2\u79FB\u9664");
    if (trimmedText && card) {
      const content = card.querySelector(".card-content, .grid-card-content");
      console.log("\u{1F50D} [saveInlineAnnotation] \u627E\u5230 content:", !!content);
      if (content) {
        console.log("\u{1F50D} [saveInlineAnnotation] \u51C6\u5907\u91CD\u5EFA\u6279\u6CE8\u9884\u89C8");
        this.recreateAnnotationPreview(content, card, unit, trimmedText);
        console.log("\u{1F50D} [saveInlineAnnotation] \u6279\u6CE8\u9884\u89C8\u5DF2\u91CD\u5EFA");
        const indicator = card.querySelector(".card-indicator");
        if (indicator && !indicator.classList.contains("has-annotation")) {
          console.log("\u{1F50D} [saveInlineAnnotation] \u66F4\u65B0 indicator \u6DFB\u52A0\u6279\u6CE8\u6837\u5F0F");
          indicator.classList.add("has-annotation");
        }
      }
    } else if (!trimmedText && card) {
      const indicator = card.querySelector(".card-indicator");
      if (indicator && indicator.classList.contains("has-annotation")) {
        console.log("\u{1F50D} [saveInlineAnnotation] \u66F4\u65B0 indicator \u79FB\u9664\u6279\u6CE8\u6837\u5F0F");
        indicator.classList.remove("has-annotation");
      }
    }
  }
  /**
   * 取消内联批注编辑
   */
  cancelInlineAnnotation(editorEl, cardEl, unit) {
    editorEl.remove();
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    if (annotation) {
      const content = cardEl.querySelector(".card-content, .grid-card-content");
      this.recreateAnnotationPreview(content, cardEl, unit, annotation.content);
    }
  }
  /**
   * 重新创建批注预览
   */
  recreateAnnotationPreview(contentEl, cardEl, unit, annotationText) {
    console.log("\u{1F50D} [recreateAnnotationPreview] \u5F00\u59CB\u91CD\u5EFA", { unitId: unit.id });
    const existingPreview = contentEl.querySelector(".annotation-preview, .grid-annotation");
    if (existingPreview) {
      console.log("\u{1F50D} [recreateAnnotationPreview] \u79FB\u9664\u65E7\u9884\u89C8");
      existingPreview.remove();
    }
    const isGridCard = cardEl.classList.contains("grid-card");
    const annEl = document.createElement("div");
    annEl.className = isGridCard ? "grid-annotation" : "annotation-preview";
    if (isGridCard) {
      annEl.innerHTML = `<strong>\u6279\u6CE8\uFF1A</strong>${annotationText}`;
    } else {
      const displayText = annotationText.length > 60 ? annotationText.substring(0, 60) + "..." : annotationText;
      annEl.textContent = `\u{1F4AC} ${displayText}`;
    }
    console.log("\u{1F50D} [recreateAnnotationPreview] \u6279\u6CE8\u5143\u7D20\u5DF2\u521B\u5EFA\uFF0CclassName:", annEl.className);
    annEl.addEventListener("click", (e) => {
      console.log("\u{1F50D} [\u6279\u6CE8\u9884\u89C8] \u88AB\u70B9\u51FB");
      e.stopPropagation();
      this.toggleInlineAnnotation(cardEl, unit);
    });
    annEl.addEventListener("keydown", (e) => {
      if (e.key === "Tab") {
        console.log("\u{1F50D} [\u6279\u6CE8\u9884\u89C8] Tab \u952E\u88AB\u6309\u4E0B");
        e.preventDefault();
        e.stopPropagation();
        this.toggleInlineAnnotation(cardEl, unit);
      }
    });
    const noteText = contentEl.querySelector(".note-text, .grid-note-text");
    if (noteText) {
      console.log("\u{1F50D} [recreateAnnotationPreview] \u63D2\u5165\u5230 note-text \u540E\u9762");
      noteText.insertAdjacentElement("afterend", annEl);
      const inserted = contentEl.querySelector(".annotation-preview, .grid-annotation");
      console.log("\u{1F50D} [recreateAnnotationPreview] \u63D2\u5165\u540E\u68C0\u67E5\uFF0C\u5143\u7D20\u662F\u5426\u5728DOM\u4E2D:", !!inserted, inserted);
    } else {
      console.log("\u{1F50D} [recreateAnnotationPreview] \u76F4\u63A5\u8FFD\u52A0\u5230 content");
      contentEl.appendChild(annEl);
    }
    console.log("\u{1F50D} [recreateAnnotationPreview] \u91CD\u5EFA\u5B8C\u6210");
    annEl.setAttribute("tabindex", "0");
    annEl.focus();
    console.log("\u{1F50D} [recreateAnnotationPreview] \u5DF2\u805A\u7126\u5230\u6279\u6CE8\u9884\u89C8");
  }
  /**
   * 打开批注编辑器（模态框方式，保留用于右键菜单）
   */
  async openAnnotationEditor(unit) {
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    const existingText = (annotation == null ? void 0 : annotation.content) || "";
    const modal = new AnnotationModal(
      this.app,
      existingText,
      async (newText) => {
        if (newText.trim()) {
          if (annotation) {
            await this.plugin.annotationManager.updateAnnotation(annotation.id, {
              content: newText
            });
          } else {
            await this.plugin.annotationManager.addContentAnnotation(unit.id, newText);
          }
          new import_obsidian5.Notice("\u2705 \u6279\u6CE8\u5DF2\u4FDD\u5B58");
        } else if (annotation) {
          await this.plugin.annotationManager.deleteAnnotation(annotation.id);
          new import_obsidian5.Notice("\u{1F5D1}\uFE0F \u6279\u6CE8\u5DF2\u5220\u9664");
        }
        this.refresh();
      }
    );
    modal.open();
  }
  /**
   * 跳转到原文
   */
  async jumpToSource(unit) {
    const file = this.app.vault.getAbstractFileByPath(unit.source.file);
    if (!(file instanceof import_obsidian5.TFile)) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u6587\u4EF6\u4E0D\u5B58\u5728");
      return;
    }
    this.shouldRestoreScroll = true;
    const leaf = this.app.workspace.getLeaf(false);
    await leaf.openFile(file);
    setTimeout(() => {
      const view = this.app.workspace.getActiveViewOfType(import_obsidian5.ItemView);
      if (view) {
        const editor = view.editor;
        if (editor) {
          const line = unit.source.position.line;
          const lineCount = editor.lineCount();
          const validLine = Math.min(line, lineCount - 1);
          editor.setCursor({ line: validLine, ch: 0 });
          editor.scrollIntoView(
            { from: { line: validLine, ch: 0 }, to: { line: validLine, ch: 0 } },
            true
          );
          setTimeout(() => {
            var _a;
            try {
              const lineLength = ((_a = editor.getLine(validLine)) == null ? void 0 : _a.length) || 0;
              editor.setSelection(
                { line: validLine, ch: 0 },
                { line: validLine, ch: lineLength }
              );
            } catch (e) {
              console.error("Selection error:", e);
            }
          }, 100);
        }
      }
    }, 200);
  }
  /**
   * 快速生成闪卡
   */
  async quickGenerateFlashcard(unit) {
    try {
      const { QuickFlashcardCreator: QuickFlashcardCreator2 } = await Promise.resolve().then(() => (init_QuickFlashcardCreator(), QuickFlashcardCreator_exports));
      const creator = new QuickFlashcardCreator2(this.plugin);
      await creator.createSmartCard(unit);
      new import_obsidian5.Notice("\u26A1 \u95EA\u5361\u5DF2\u751F\u6210");
      this.refresh();
    } catch (error) {
      new import_obsidian5.Notice("\u274C \u751F\u6210\u95EA\u5361\u5931\u8D25");
      console.error(error);
    }
  }
  /**
  * 显示批量操作菜单
  */
  showBatchMenu(event, unit) {
    const menu = new import_obsidian5.Menu();
    menu.addItem(
      (item) => item.setTitle(this.isAllSelected() ? "\u2611 \u9009\u62E9" : "\u2610 \u5168\u9009").setIcon("check-square").onClick(() => {
        this.toggleSelectAll();
      })
    );
    menu.addSeparator();
    if (this.viewType === "notes") {
      menu.addItem(
        (item) => item.setTitle(`\u26A1 \u6279\u91CF\u5236\u5361 (${this.selectedUnitIds.size})`).setIcon("zap").onClick(() => {
          this.batchCreateFlashcards();
        })
      );
    }
    menu.addItem(
      (item) => item.setTitle(`\u{1F5D1}\uFE0F \u5220\u9664\u9009\u4E2D (${this.viewType === "cards" ? this.selectedCardIds.size : this.selectedUnitIds.size})`).setIcon("trash").onClick(() => {
        if (this.viewType === "cards") {
          this.batchDeleteFlashcards();
        } else {
          this.batchDeleteNotes();
        }
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u2713 \u9000\u51FA\u6279\u91CF\u6A21\u5F0F").setIcon("x").onClick(() => {
        this.batchMode = false;
        this.selectedUnitIds.clear();
        this.selectedCardIds.clear();
        this.render();
      })
    );
    menu.showAtMouseEvent(event);
  }
  /**
   * 显示上下文菜单
   */
  showContextMenu(event, unit) {
    const menu = new import_obsidian5.Menu();
    menu.addItem(
      (item) => item.setTitle("\u{1F4D6} \u8DF3\u8F6C\u5230\u539F\u6587").setIcon("arrow-up-right").onClick(() => this.jumpToSource(unit))
    );
    menu.addItem(
      (item) => item.setTitle("\u{1F4AC} \u7F16\u8F91\u6279\u6CE8").setIcon("message-square").onClick(() => this.openAnnotationEditor(unit))
    );
    menu.addSeparator();
    if (unit.flashcardIds.length > 0) {
      menu.addItem(
        (item) => item.setTitle("\u270F\uFE0F \u7F16\u8F91\u95EA\u5361").setIcon("edit").onClick(() => this.editFlashcardsForUnit(unit, event))
      );
      menu.addSeparator();
    }
    menu.addItem(
      (item) => item.setTitle("\u26A1 \u751F\u6210\u95EA\u5361").setIcon("zap").onClick(() => this.quickGenerateFlashcard(unit))
    );
    menu.addItem(
      (item) => item.setTitle("\u2795 \u521B\u5EFA QA \u95EA\u5361").setIcon("plus").onClick(async () => {
        await this.createFlashcard(unit, "qa");
      })
    );
    menu.addItem(
      (item) => item.setTitle("\u2795 \u521B\u5EFA\u586B\u7A7A\u95EA\u5361").setIcon("plus").onClick(async () => {
        await this.createFlashcard(unit, "cloze");
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u67E5\u770B\u7EDF\u8BA1").setIcon("bar-chart").onClick(() => {
        this.plugin.activateStats();
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u{1F5D1}\uFE0F \u5220\u9664\u7B14\u8BB0").setIcon("trash").onClick(async () => {
        if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u6761\u7B14\u8BB0\u5417\uFF1F")) {
          if (unit.flashcardIds.length > 0) {
            for (const cardId of unit.flashcardIds) {
              await this.plugin.flashcardManager.deleteCard(cardId);
            }
          }
          await this.plugin.dataManager.deleteContentUnit(unit.id);
          new import_obsidian5.Notice("\u{1F5D1}\uFE0F \u7B14\u8BB0\u5DF2\u5220\u9664");
          this.refresh();
        }
      })
    );
    menu.showAtMouseEvent(event);
  }
  /**
   * 编辑笔记单元关联的闪卡
   */
  editFlashcardsForUnit(unit, event) {
    if (unit.flashcardIds.length === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u8BE5\u7B14\u8BB0\u6CA1\u6709\u5173\u8054\u7684\u95EA\u5361");
      return;
    }
    if (unit.flashcardIds.length === 1) {
      const allCards2 = this.plugin.flashcardManager.getAllFlashcards();
      const card = allCards2.find((c) => c.id === unit.flashcardIds[0]);
      if (card) {
        this.editFlashcard(card);
      } else {
        new import_obsidian5.Notice("\u26A0\uFE0F \u627E\u4E0D\u5230\u8BE5\u95EA\u5361");
      }
      return;
    }
    const menu = new import_obsidian5.Menu();
    const allCards = this.plugin.flashcardManager.getAllFlashcards();
    unit.flashcardIds.forEach((cardId, index) => {
      const card = allCards.find((c) => c.id === cardId);
      if (card) {
        const typeLabel = card.type === "qa" ? "Q&A" : "\u586B\u7A7A";
        const preview = card.front.length > 30 ? card.front.substring(0, 30) + "..." : card.front;
        menu.addItem(
          (item) => item.setTitle(`${index + 1}. ${typeLabel}: ${preview}`).onClick(() => this.editFlashcard(card))
        );
      }
    });
    if (event) {
      menu.showAtMouseEvent(event);
    } else {
      menu.showAtPosition({ x: 100, y: 100 });
    }
  }
  /**
   * 显示闪卡上下文菜单
   */
  showFlashcardContextMenu(event, card) {
    const menu = new import_obsidian5.Menu();
    menu.addItem(
      (item) => item.setTitle("\u{1F4D6} \u8DF3\u8F6C\u5230\u539F\u6587").setIcon("arrow-up-right").onClick(async () => {
        const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
        if (unit) {
          await this.jumpToSource(unit);
        } else {
          const file = this.app.vault.getAbstractFileByPath(card.sourceFile);
          if (file instanceof import_obsidian5.TFile) {
            await this.app.workspace.getLeaf(false).openFile(file);
            new import_obsidian5.Notice("\u2705 \u5DF2\u6253\u5F00\u6E90\u6587\u4EF6");
          } else {
            new import_obsidian5.Notice("\u26A0\uFE0F \u627E\u4E0D\u5230\u539F\u59CB\u7B14\u8BB0");
          }
        }
      })
    );
    menu.addItem(
      (item) => item.setTitle("\u270F\uFE0F \u7F16\u8F91\u5361\u7247").setIcon("edit").onClick(() => {
        this.editFlashcard(card);
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u{1F4CA} \u67E5\u770B\u7EDF\u8BA1").setIcon("bar-chart").onClick(() => {
        this.plugin.activateStats();
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u{1F5D1}\uFE0F \u5220\u9664\u5361\u7247").setIcon("trash").onClick(async () => {
        if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u5F20\u95EA\u5361\u5417\uFF1F")) {
          await this.deleteFlashcard(card.id);
        }
      })
    );
    menu.showAtMouseEvent(event);
  }
  /**
   * 创建特定类型的闪卡
   */
  async createFlashcard(unit, type) {
    const modal = new FlashcardCreationModal(
      this.app,
      unit,
      type,
      async (question, answer) => {
        try {
          if (type === "qa") {
            await this.plugin.flashcardManager.createQACard(
              unit.id,
              question,
              answer
            );
          } else {
            const deletions = [{
              index: 0,
              answer
            }];
            await this.plugin.flashcardManager.createClozeCard(
              unit.id,
              question,
              deletions
            );
          }
          new import_obsidian5.Notice(`\u2705 ${type === "qa" ? "QA" : "\u586B\u7A7A"}\u95EA\u5361\u5DF2\u521B\u5EFA`);
          this.refresh();
        } catch (error) {
          console.error("Error creating flashcard:", error);
          new import_obsidian5.Notice("\u274C \u521B\u5EFA\u95EA\u5361\u5931\u8D25");
        }
      }
    );
    modal.open();
  }
  /**
   * 在编辑器中打开文件
   */
  async openFileInEditor(filePath) {
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian5.TFile) {
      await this.app.workspace.getLeaf(false).openFile(file);
    } else {
      new import_obsidian5.Notice("\u26A0\uFE0F \u65E0\u6CD5\u6253\u5F00\u6587\u4EF6");
    }
  }
  /**
   * 删除闪卡
   */
  async deleteFlashcard(cardId) {
    try {
      await this.plugin.flashcardManager.deleteCard(cardId);
      new import_obsidian5.Notice("\u{1F5D1}\uFE0F \u95EA\u5361\u5DF2\u5220\u9664");
      this.refresh();
    } catch (error) {
      console.error("Error deleting flashcard:", error);
      new import_obsidian5.Notice("\u274C \u5220\u9664\u95EA\u5361\u5931\u8D25");
    }
  }
  /**
   * 编辑闪卡
   */
  editFlashcard(card) {
    const modal = new FlashcardEditModal(
      this.app,
      card,
      async (question, answer) => {
        try {
          const updatedCard = {
            ...card,
            front: question,
            back: card.type === "cloze" ? [answer] : answer,
            metadata: {
              ...card.metadata,
              updatedAt: Date.now()
            }
          };
          await this.plugin.flashcardManager.updateCard(updatedCard);
          new import_obsidian5.Notice("\u2705 \u95EA\u5361\u5DF2\u66F4\u65B0");
          this.refresh();
        } catch (error) {
          console.error("Error updating flashcard:", error);
          new import_obsidian5.Notice("\u274C \u66F4\u65B0\u95EA\u5361\u5931\u8D25");
        }
      }
    );
    modal.open();
  }
  /**
   * 更新批量操作按钮
   */
  updateBatchButtons() {
    const container = this.containerEl.children[1];
    const batchActions = container.querySelector(".batch-actions");
    if (batchActions) {
      const selectAllBtn = batchActions.querySelector(".select-all-btn");
      const deleteBtn = batchActions.querySelector(".batch-delete-btn");
      const createBtn = batchActions.querySelector(".batch-create-cards-btn");
      if (selectAllBtn) {
        selectAllBtn.textContent = this.isAllSelected() ? "\u2611 \u9009\u62E9" : "\u2610 \u5168\u9009";
      }
      if (deleteBtn) {
        const count = this.viewType === "cards" ? this.selectedCardIds.size : this.selectedUnitIds.size;
        deleteBtn.textContent = `\u{1F5D1}\uFE0F \u5220\u9664\u9009\u4E2D (${count})`;
      }
      if (createBtn) {
        createBtn.textContent = `\u26A1 \u6279\u91CF\u5236\u5361 (${this.selectedUnitIds.size})`;
      }
    }
    const headerSelectBtn = container.querySelector(".select-all-btn-header");
    if (headerSelectBtn) {
      headerSelectBtn.textContent = this.isAllSelected() ? "\u2611 \u9009\u62E9" : "\u2610 \u5168\u9009";
    }
    const sidebarSelectBtn = container.querySelector(".select-all-btn-sidebar");
    if (sidebarSelectBtn) {
      sidebarSelectBtn.textContent = this.isAllSelected() ? "\u2611 \u9009\u62E9" : "\u2610 \u5168\u9009";
    }
  }
  /**
   * 批量删除闪卡
   */
  async batchDeleteFlashcards() {
    if (this.selectedCardIds.size === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u95EA\u5361");
      return;
    }
    if (!confirm(`\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u7684 ${this.selectedCardIds.size} \u5F20\u95EA\u5361\u5417\uFF1F`)) {
      return;
    }
    let success = 0;
    let failed = 0;
    for (const cardId of this.selectedCardIds) {
      try {
        await this.plugin.flashcardManager.deleteCard(cardId);
        success++;
      } catch (error) {
        console.error("Error deleting flashcard:", error);
        failed++;
      }
    }
    this.selectedCardIds.clear();
    new import_obsidian5.Notice(`\u2705 \u5DF2\u5220\u9664 ${success} \u5F20\u95EA\u5361${failed > 0 ? `\uFF0C${failed} \u5F20\u5931\u8D25` : ""}`);
    this.refresh();
  }
  /**
   * 批量删除笔记
   */
  async batchDeleteNotes() {
    if (this.selectedUnitIds.size === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u7B14\u8BB0");
      return;
    }
    if (!confirm(`\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u7684 ${this.selectedUnitIds.size} \u6761\u7B14\u8BB0\u5417\uFF1F`)) {
      return;
    }
    let success = 0;
    let failed = 0;
    for (const unitId of this.selectedUnitIds) {
      try {
        const unit = this.plugin.dataManager.getContentUnit(unitId);
        if (unit) {
          if (unit.flashcardIds.length > 0) {
            for (const cardId of unit.flashcardIds) {
              await this.plugin.flashcardManager.deleteCard(cardId);
            }
          }
        }
        await this.plugin.dataManager.deleteContentUnit(unitId);
        success++;
      } catch (error) {
        console.error("Error deleting note:", error);
        failed++;
      }
    }
    this.selectedUnitIds.clear();
    this.batchMode = false;
    new import_obsidian5.Notice(`\u2705 \u5DF2\u5220\u9664 ${success} \u6761\u7B14\u8BB0${failed > 0 ? `\uFF0C${failed} \u6761\u5931\u8D25` : ""}`);
    this.refresh();
  }
  /**
   * 检查是否全选
   */
  isAllSelected() {
    if (this.viewType === "cards") {
      const flashcards = this.plugin.flashcardManager.getAllFlashcards();
      if (this.displayMode === "main" && this.selectedFile) {
        const filteredCards = flashcards.filter((card) => {
          var _a;
          if (this.groupMode === "file") {
            return card.sourceFile === this.selectedFile;
          } else if (this.groupMode === "tag") {
            const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
            return (unit == null ? void 0 : unit.metadata.tags.includes(this.selectedFile)) || ((_a = card.tags) == null ? void 0 : _a.includes(this.selectedFile)) || card.deck === this.selectedFile;
          } else if (this.groupMode === "date") {
            return this.formatDate(new Date(card.metadata.createdAt)) === this.selectedFile;
          }
          return false;
        });
        return filteredCards.length > 0 && this.selectedCardIds.size === filteredCards.length;
      }
      return flashcards.length > 0 && this.selectedCardIds.size === flashcards.length;
    } else {
      let visibleUnits;
      if (this.displayMode === "sidebar") {
        let units = this.getFilteredUnits();
        if (this.selectedFile) {
          if (this.groupMode === "file") {
            visibleUnits = units.filter((unit) => unit.source.file === this.selectedFile);
          } else if (this.groupMode === "tag") {
            visibleUnits = units.filter((unit) => unit.metadata.tags.includes(this.selectedFile));
          } else if (this.groupMode === "date") {
            visibleUnits = units.filter(
              (unit) => this.formatDate(new Date(unit.metadata.createdAt)) === this.selectedFile
            );
          } else {
            visibleUnits = units;
          }
        } else {
          visibleUnits = units;
        }
      } else {
        if (!this.selectedFile) {
          return false;
        }
        const units = this.getFilteredUnits();
        if (this.groupMode === "file") {
          visibleUnits = units.filter((unit) => unit.source.file === this.selectedFile);
        } else if (this.groupMode === "tag") {
          visibleUnits = units.filter(
            (unit) => unit.metadata.tags.includes(this.selectedFile)
          );
        } else if (this.groupMode === "date") {
          visibleUnits = units.filter(
            (unit) => this.formatDate(new Date(unit.metadata.createdAt)) === this.selectedFile
          );
        } else {
          visibleUnits = units;
        }
      }
      return visibleUnits.length > 0 && this.selectedUnitIds.size === visibleUnits.length;
    }
  }
  /**
   * 切换全选/取消
   */
  toggleSelectAll() {
    if (this.viewType === "cards") {
      const flashcards = this.plugin.flashcardManager.getAllFlashcards();
      const filteredCards = this.selectedFile ? flashcards.filter((card) => {
        var _a;
        if (this.groupMode === "file") {
          return card.sourceFile === this.selectedFile;
        } else if (this.groupMode === "tag") {
          const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
          return (unit == null ? void 0 : unit.metadata.tags.includes(this.selectedFile)) || ((_a = card.tags) == null ? void 0 : _a.includes(this.selectedFile)) || card.deck === this.selectedFile;
        } else if (this.groupMode === "date") {
          return this.formatDate(new Date(card.metadata.createdAt)) === this.selectedFile;
        }
        return false;
      }) : flashcards;
      if (this.selectedCardIds.size === filteredCards.length && filteredCards.length > 0) {
        this.selectedCardIds.clear();
      } else {
        filteredCards.forEach((card) => {
          this.selectedCardIds.add(card.id);
        });
      }
    } else {
      let visibleUnits;
      if (this.displayMode === "sidebar") {
        let units = this.getFilteredUnits();
        if (this.selectedFile) {
          if (this.groupMode === "file") {
            visibleUnits = units.filter((unit) => unit.source.file === this.selectedFile);
          } else if (this.groupMode === "tag") {
            visibleUnits = units.filter(
              (unit) => unit.metadata.tags.includes(this.selectedFile)
            );
          } else if (this.groupMode === "date") {
            visibleUnits = units.filter(
              (unit) => this.formatDate(new Date(unit.metadata.createdAt)) === this.selectedFile
            );
          } else {
            visibleUnits = units;
          }
        } else {
          visibleUnits = units;
        }
      } else {
        if (!this.selectedFile) {
          new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u5206\u7EC4");
          return;
        }
        const units = this.getFilteredUnits();
        if (this.groupMode === "file") {
          visibleUnits = units.filter((unit) => unit.source.file === this.selectedFile);
        } else if (this.groupMode === "tag") {
          visibleUnits = units.filter(
            (unit) => unit.metadata.tags.includes(this.selectedFile)
          );
        } else if (this.groupMode === "date") {
          visibleUnits = units.filter(
            (unit) => this.formatDate(new Date(unit.metadata.createdAt)) === this.selectedFile
          );
        } else {
          visibleUnits = units;
        }
      }
      if (this.selectedUnitIds.size === visibleUnits.length && visibleUnits.length > 0) {
        this.selectedUnitIds.clear();
      } else {
        visibleUnits.forEach((unit) => {
          this.selectedUnitIds.add(unit.id);
        });
      }
    }
    if (this.selectedUnitIds.size > 0 || this.selectedCardIds.size > 0) {
      this.batchMode = true;
    }
    this.render();
  }
  /**
  * 自动全选当前可见项目
  */
  autoSelectAll() {
    this.selectedUnitIds.clear();
    this.selectedCardIds.clear();
    if (this.viewType === "cards") {
      const flashcards = this.plugin.flashcardManager.getAllFlashcards();
      const filteredCards = this.selectedFile ? flashcards.filter((card) => {
        var _a;
        if (this.groupMode === "file") {
          return card.sourceFile === this.selectedFile;
        } else if (this.groupMode === "tag") {
          const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
          return (unit == null ? void 0 : unit.metadata.tags.includes(this.selectedFile)) || ((_a = card.tags) == null ? void 0 : _a.includes(this.selectedFile)) || card.deck === this.selectedFile;
        } else if (this.groupMode === "date") {
          return this.formatDate(new Date(card.metadata.createdAt)) === this.selectedFile;
        }
        return false;
      }) : flashcards;
      filteredCards.forEach((card) => {
        this.selectedCardIds.add(card.id);
      });
    } else {
      let visibleUnits;
      if (this.displayMode === "sidebar") {
        let units = this.getFilteredUnits();
        if (this.selectedFile) {
          visibleUnits = units.filter((unit) => unit.source.file === this.selectedFile);
        } else {
          visibleUnits = units;
        }
      } else {
        if (this.selectedFile) {
          const units = this.getFilteredUnits();
          if (this.groupMode === "file") {
            visibleUnits = units.filter((unit) => unit.source.file === this.selectedFile);
          } else if (this.groupMode === "tag") {
            visibleUnits = units.filter(
              (unit) => unit.metadata.tags.includes(this.selectedFile)
            );
          } else if (this.groupMode === "date") {
            visibleUnits = units.filter(
              (unit) => this.formatDate(new Date(unit.metadata.createdAt)) === this.selectedFile
            );
          } else {
            visibleUnits = units;
          }
        } else {
          visibleUnits = this.getFilteredUnits();
        }
      }
      visibleUnits.forEach((unit) => {
        this.selectedUnitIds.add(unit.id);
      });
    }
    if (this.selectedUnitIds.size > 0 || this.selectedCardIds.size > 0) {
      this.batchMode = true;
    }
  }
  /**
   * 清除所有选择
   */
  clearSelection() {
    this.selectedUnitIds.clear();
    this.selectedCardIds.clear();
    this.batchMode = false;
    this.render();
  }
  /**
   * 更新所有checkbox状态
   */
  updateCheckboxes() {
    const container = this.containerEl.children[1];
    const checkboxes = container.querySelectorAll(".batch-checkbox");
    checkboxes.forEach((checkbox) => {
      if (this.viewType === "cards") {
        const cardId = checkbox.getAttribute("data-card-id");
        if (cardId) {
          checkbox.checked = this.selectedCardIds.has(cardId);
        }
      } else {
        const unitId = checkbox.getAttribute("data-unit-id");
        if (unitId) {
          checkbox.checked = this.selectedUnitIds.has(unitId);
        }
      }
    });
  }
  /**
   * 批量创建闪卡
   */
  async batchCreateFlashcards() {
    if (this.selectedUnitIds.size === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u521B\u5EFA\u95EA\u5361\u7684\u7B14\u8BB0");
      return;
    }
    const units = Array.from(this.selectedUnitIds).map((id) => this.plugin.dataManager.getContentUnit(id)).filter((u) => u !== void 0 && u.flashcardIds.length === 0);
    if (units.length === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u9009\u4E2D\u7684\u7B14\u8BB0\u90FD\u5DF2\u521B\u5EFA\u8FC7\u95EA\u5361");
      return;
    }
    const { BatchCreateModal: BatchCreateModal2 } = await Promise.resolve().then(() => (init_OverviewView(), OverviewView_exports));
    const quickCreator = new QuickFlashcardCreator(this.plugin);
    const modal = new BatchCreateModal2(
      this.app,
      this.plugin,
      quickCreator,
      units,
      () => {
        this.selectedUnitIds.clear();
        this.refresh();
      }
    );
    modal.open();
  }
  // ==================== 工具方法 ====================
  /**
   * 获取过滤后的内容单元
   */
  getFilteredUnits() {
    let units = this.plugin.dataManager.getAllContentUnits();
    if (this.searchQuery) {
      const query = this.searchQuery.toLowerCase();
      units = units.filter(
        (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
      );
    }
    if (this.filterMode === "annotated") {
      units = units.filter((u) => u.annotationId);
    } else if (this.filterMode === "flashcards") {
      units = units.filter((u) => u.flashcardIds.length > 0);
    }
    return units;
  }
  /**
   * 分组内容单元
   */
  groupUnits(units) {
    const grouped = /* @__PURE__ */ new Map();
    units.forEach((unit) => {
      let key;
      switch (this.groupMode) {
        case "file":
          key = unit.source.file;
          break;
        case "annotation":
          const hasAnnotation = unit.annotationId ? "\u6709\u6279\u6CE8" : "\u65E0\u6279\u6CE8";
          if (!grouped.has(hasAnnotation))
            grouped.set(hasAnnotation, []);
          grouped.get(hasAnnotation).push(unit);
          return;
        case "tag":
          unit.metadata.tags.forEach((tag) => {
            if (!grouped.has(tag))
              grouped.set(tag, []);
            grouped.get(tag).push(unit);
          });
          return;
        case "date":
          key = this.formatDate(new Date(unit.metadata.createdAt));
          break;
        default:
          key = "\u672A\u5206\u7EC4";
      }
      if (!grouped.has(key))
        grouped.set(key, []);
      grouped.get(key).push(unit);
    });
    return Array.from(grouped.entries()).map(([groupKey, units2]) => ({ groupKey, units: units2 })).sort((a, b) => {
      if (this.groupMode === "annotation") {
        if (a.groupKey === "\u6709\u6279\u6CE8")
          return -1;
        if (b.groupKey === "\u6709\u6279\u6CE8")
          return 1;
        return 0;
      }
      if (this.groupMode === "date") {
        return b.groupKey.localeCompare(a.groupKey);
      }
      return b.units.length - a.units.length;
    });
  }
  /**
   * 分组闪卡（类似 groupUnits）
   */
  groupFlashcards(flashcards) {
    const grouped = /* @__PURE__ */ new Map();
    flashcards.forEach((card) => {
      let keys = [];
      const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
      switch (this.groupMode) {
        case "file":
          keys = [card.sourceFile];
          break;
        case "annotation":
          const unit2 = this.plugin.dataManager.getContentUnit(card.sourceContentId);
          if (unit2 && unit2.annotationId) {
            keys = ["\u6709\u6279\u6CE8"];
          } else {
            keys = ["\u65E0\u6279\u6CE8"];
          }
          break;
        case "tag":
          if (unit2 && unit2.metadata.tags.length > 0) {
            keys = unit2.metadata.tags;
          } else if (card.tags && card.tags.length > 0) {
            keys = card.tags;
          } else if (card.deck) {
            keys = [card.deck];
          } else {
            keys = ["\u672A\u5206\u7C7B"];
          }
          break;
        case "date":
          keys = [this.formatDate(new Date(card.metadata.createdAt))];
          break;
        default:
          keys = ["\u672A\u5206\u7EC4"];
      }
      keys.forEach((key) => {
        if (!grouped.has(key)) {
          grouped.set(key, []);
        }
        grouped.get(key).push(card);
      });
    });
    const result = Array.from(grouped.entries()).map(([groupKey, cards]) => ({ groupKey, cards })).sort((a, b) => {
      if (this.groupMode === "annotation") {
        if (a.groupKey === "\u6709\u6279\u6CE8")
          return -1;
        if (b.groupKey === "\u6709\u6279\u6CE8")
          return 1;
        return 0;
      }
      if (this.groupMode === "date") {
        return b.groupKey.localeCompare(a.groupKey);
      }
      return b.cards.length - a.cards.length;
    });
    return result;
  }
  /**
   * 获取统计信息
   */
  getFilteredStats() {
    const units = this.getFilteredUnits();
    return {
      count: units.length,
      withAnnotations: units.filter((u) => u.annotationId).length,
      withFlashcards: units.filter((u) => u.flashcardIds.length > 0).length
    };
  }
  /**
   * 格式化日期
   */
  formatDate(date) {
    return date.toLocaleDateString("zh-CN", {
      year: "numeric",
      month: "2-digit",
      day: "2-digit"
    });
  }
  /**
   * 获取分组图标
   */
  getGroupIcon(mode) {
    switch (mode) {
      case "file":
        return "\u{1F4C4}";
      case "annotation":
        return "\u{1F4AC}";
      case "tag":
        return "\u{1F3F7}\uFE0F";
      case "date":
        return "\u{1F4C5}";
      default:
        return "\u{1F4C1}";
    }
  }
  /**
   * 添加样式
   */
  addStyles() {
    if (document.getElementById("learning-overview-styles")) {
      return;
    }
    const styleEl = document.createElement("style");
    styleEl.id = "learning-overview-styles";
    if (document.getElementById("learning-overview-styles")) {
      return;
    }
    styleEl.textContent = `
      /* ==================== \u5168\u5C40\u5BB9\u5668 ==================== */
      .learning-overview-container {
        height: 100%;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        background: var(--background-primary);
      }

      /* ==================== \u4FA7\u8FB9\u680F\u6A21\u5F0F\u6837\u5F0F ==================== */
      .learning-overview-container[data-mode="sidebar"] {
        padding: 0;
      }

      .sidebar-toolbar {
        padding: 12px;
        border-bottom: 1px solid var(--background-modifier-border);
        background: var(--background-primary);
        flex-shrink: 0;
          position: relative; /* \u{1F527} \u6DFB\u52A0 */
  z-index: 10;
      }

      .search-container {
        margin-bottom: 10px;
      }

      .search-input {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        font-size: 13px;
        background: var(--background-primary);
        color: var(--text-normal);
      }

      .search-input:focus {
        outline: none;
        border-color: var(--interactive-accent);
      }

      .filter-chips {
        display: flex;
        gap: 6px;
        margin-bottom: 10px;
      }

      .filter-chip {
        flex: 1;
        text-align: center;
        padding: 6px 8px;
        font-size: 11px;
        border-radius: 12px;
        background: var(--background-secondary);
        cursor: pointer;
        transition: all 0.2s;
        border: 1px solid transparent;
      }

      .filter-chip:hover {
        background: var(--background-modifier-hover);
      }

      .filter-chip.active {
        background: var(--interactive-accent);
        color: var(--text-on-accent);
        font-weight: 600;
        border-color: var(--interactive-accent);
      }

      .group-switcher {
        display: flex;
        gap: 6px;
        margin-bottom: 10px;
      }

      .group-btn {
        flex: 1;
        text-align: center;
        padding: 6px;
        font-size: 16px;
        border-radius: 6px;
        background: var(--background-secondary);
        cursor: pointer;
        transition: all 0.2s;
        border: 1px solid transparent;
      }

      .group-btn:hover {
        background: var(--background-modifier-hover);
      }

      .group-btn.active {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        transform: scale(1.05);
      }
/* \u5728 .stats-badge \u6837\u5F0F\u4E4B\u524D\u6DFB\u52A0 */
.stats-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 3px;
}
/* \u5934\u90E8\u64CD\u4F5C\u6309\u94AE\u5BB9\u5668 */
.header-actions {
  display: flex;
  gap: 8px;
  align-items: center;
}

/* \u6279\u91CF\u64CD\u4F5C\u6309\u94AE\u6837\u5F0F - \u4FA7\u8FB9\u680F */
.batch-create-cards-btn-sidebar,
.batch-delete-btn-sidebar {
  padding: 6px 6px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 11px;
  font-weight: 500;
  white-space: nowrap;
}

.batch-create-cards-btn-sidebar:hover {
  background: var(--interactive-accent);
  color: white;
  border-color: var(--interactive-accent);
}

.batch-delete-btn-sidebar:hover {
  background: var(--color-red);
  color: white;
  border-color: var(--color-red);
}

/* \u6279\u91CF\u64CD\u4F5C\u6309\u94AE\u6837\u5F0F - \u4E3B\u754C\u9762 */
.batch-create-cards-btn-header,
.batch-delete-btn-header {
  padding: 8px 16px;
  font-size: 13px;
  border-radius: 6px;
  border: 1px solid var(--background-modifier-border);
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-weight: 500;
  white-space: nowrap;
}

.batch-create-cards-btn-header:hover {
  background: var(--interactive-accent);
  color: white;
  border-color: var(--interactive-accent);
}

.batch-delete-btn-header:hover {
  background: var(--color-red);
  color: white;
  border-color: var(--color-red);
}
.select-all-btn-sidebar {
  padding: 6px 12px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 11px;
  font-weight: 500;
  flex-shrink: 0; /* \u9632\u6B62\u6309\u94AE\u88AB\u538B\u7F29 */
}

.select-all-btn-sidebar:hover {
  background: var(--interactive-accent);
  border-color: var(--interactive-accent);
  color: white;
}

.stats-badge {
  text-align: center;
  font-size: 11px;
  color: var(--text-muted);
  padding: 4px;
  flex: 1; /* \u5360\u636E\u5269\u4F59\u7A7A\u95F4 */
}
      .stats-badge {
        text-align: center;
        font-size: 11px;
        color: var(--text-muted);
        padding: 4px;
      }
.select-all-btn-header {
  padding: 8px 16px;
  font-size: 13px;
  border-radius: 6px;
  background: var(--background-secondary);
  color: var(--text-normal);
  border: 1px solid var(--background-modifier-border);
  cursor: pointer;
  transition: all 0.2s;
  font-weight: 500;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.select-all-btn-header:hover {
  background: var(--interactive-accent);
  color: var(--text-on-accent);
  border-color: var(--interactive-accent);
  transform: translateY(-1px);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

/* \u5B8C\u6210\u72B6\u6001\u7684\u9AD8\u4EAE\u6837\u5F0F */
.select-all-btn-header.completed {
  background: var(--interactive-accent);
  border-color: var(--interactive-accent);
  color: var(--text-on-accent);
}

.select-all-btn-header.completed:hover {
  opacity: 0.9;
}

.select-all-btn-sidebar {
  padding: 6px 12px;

  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 11px;
  font-weight: 500;
  margin-right: auto; /* \u9760\u5DE6\u5BF9\u9F50 */
}

.select-all-btn-sidebar:hover {
  background: var(--interactive-accent);
  border-color: var(--interactive-accent);
  color: white;
}
  /* \u53D6\u6D88\u9009\u62E9\u6309\u94AE - \u4FA7\u8FB9\u680F */
.cancel-selection-btn-sidebar {
  padding: 6px 12px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 11px;
  font-weight: 500;
  white-space: nowrap;
  color: var(--text-muted);
}

.cancel-selection-btn-sidebar:hover {
  background: var(--background-modifier-hover);
  color: var(--text-normal);
  border-color: var(--text-muted);
}

/* \u53D6\u6D88\u9009\u62E9\u6309\u94AE - \u4E3B\u754C\u9762 */
.cancel-selection-btn-header {
  padding: 8px 16px;
  font-size: 13px;
  border-radius: 6px;
  border: 1px solid var(--background-modifier-border);
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-weight: 500;
  white-space: nowrap;
  color: var(--text-muted);
}

.cancel-selection-btn-header:hover {
  background: var(--background-modifier-hover);
  color: var(--text-normal);
  border-color: var(--text-muted);
}

/* \u5B8C\u6210\u72B6\u6001\u7684\u5168\u9009\u6309\u94AE\u9AD8\u4EAE */
.select-all-btn-sidebar.completed,
.select-all-btn-header.completed {
  background: var(--interactive-accent);
  color: var(--text-on-accent);
  border-color: var(--interactive-accent);
}
      .batch-actions {
        display: flex;
        gap: 6px;
        margin-top: 10px;
        flex-wrap: wrap;
      }

      .batch-mode-btn,
      .select-all-btn,
      .batch-delete-btn,
      .batch-create-cards-btn {
        padding: 6px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-secondary);
        cursor: pointer;
        transition: all 0.2s;
        font-size: 11px;
        font-weight: 500;
      }

      .select-all-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .batch-mode-btn:hover {
        background: var(--background-modifier-hover);
      }

      .batch-delete-btn:hover {
        background: var(--color-red);
        border-color: var(--color-red);
        color: white;
      }

      .batch-create-cards-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .batch-checkbox {
        margin-right: 8px;
        cursor: pointer;
      }

      .sidebar-content-list {
        flex: 1;
        overflow-y: auto;
        padding: 8px;
          position: relative; /* \u{1F527} \u6DFB\u52A0 */
  z-index: 1; /* \u{1F527} \u6DFB\u52A0 */
      }

      .content-group {
        margin-bottom: 16px;
      }

      .group-header {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 6px 8px;
        background: var(--background-secondary);
        border-radius: 6px;
        margin-bottom: 6px;
        font-size: 12px;
        font-weight: 600;
        position: sticky;
        top: 0;
        z-index: 10;
      }

      .group-icon {
        font-size: 14px;
      }

      .group-title {
        flex: 1;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .group-count {
        padding: 2px 6px;
        background: var(--background-modifier-border);
        border-radius: 10px;
        font-size: 10px;
      }

      .compact-card {
        display: flex;
        gap: 8px;
        padding: 10px;
        margin: 4px 0;
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        transition: all 0.2s;
      }

      .compact-card:hover {
        border-color: var(--interactive-accent);
        background: var(--background-primary-alt);
        transform: translateX(2px);
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      }

/* \u57FA\u7840\u6307\u793A\u5668\u6837\u5F0F */
.card-indicator {
  width: 4px;
  border-radius: 2px;
  background: var(--background-modifier-border);
  flex-shrink: 0;
  transition: all 0.2s;
}


/* \u{1F527} \u6CA1\u6709\u6279\u6CE8\u65F6\uFF1A\u4E0A\u534A\u900F\u660E\uFF0C\u4E0B\u534A\u663E\u793A\u7C7B\u578B\u989C\u8272 */
.card-indicator.type-qa {
  background: linear-gradient(
    to bottom,
    transparent 0%,
    transparent 50%,
    #10b981 50%,
    #10b981 100%
  );
}

.card-indicator.type-cloze {
  background: linear-gradient(
    to bottom,
    transparent 0%,
    transparent 50%,
        #9333ea 50%,
    #9333ea 100%

  );
}

.card-indicator.type-text {
  background: linear-gradient(
    to bottom,
    transparent 0%,
    transparent 50%,
    #6b7280 50%,
    #6b7280 100%
  );
}

/* \u{1F527} \u6709\u6279\u6CE8\u65F6\uFF1A\u4E0A\u534A\u84DD\u8272\uFF0C\u4E0B\u534A\u7C7B\u578B\u989C\u8272 */
.card-indicator.type-qa.has-annotation {
  background: linear-gradient(
    to bottom, 
    #3b82f6 0%, 
    #3b82f6 50%, 
    #10b981 50%,
    #10b981 100%
  );
}

.card-indicator.type-cloze.has-annotation {
  background: linear-gradient(
    to bottom, 
    #3b82f6 0%, 
    #3b82f6 50%, 
        #9333ea 50%,
    #9333ea 100%

  );
}

.card-indicator.type-text.has-annotation {
  background: linear-gradient(
    to bottom, 
    #3b82f6 0%, 
    #3b82f6 50%, 
    #6b7280 50%,
    #6b7280 100%
  );
}

/* \u{1F527} \u9ED8\u8BA4\u6837\u5F0F\uFF08\u6CA1\u6709\u7C7B\u578B\u65F6\u7684\u515C\u5E95\uFF09 */
.card-indicator:not(.type-qa):not(.type-cloze):not(.type-text) {
  background: linear-gradient(
    to bottom,
    transparent 0%,
    transparent 50%,
    var(--background-modifier-border) 50%,
    var(--background-modifier-border) 100%
  );
}

.card-indicator.has-annotation:not(.type-qa):not(.type-cloze):not(.type-text) {
  background: linear-gradient(
    to bottom,
    #3b82f6 0%,
    #3b82f6 50%,
    var(--background-modifier-border) 50%,
    var(--background-modifier-border) 100%
  );
}



.type-indicator {
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
}

.type-indicator.type-qa {
  background: rgba(16, 185, 129, 0.2);

  color: #10b981;
}

.type-indicator.type-cloze {
  background: rgba(147, 51, 234, 0.2);
    color: #9333ea;

}

.type-indicator.type-text {
  background: rgba(107, 114, 128, 0.2);
  color: #6b7280;
}

      .card-content {
        flex: 1;
        min-width: 0;
      }

      .card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 6px;
      }

      .annotation-btn {
        cursor: pointer;
        font-size: 14px;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.2s;
      }

      .annotation-btn:hover {
        background: var(--background-modifier-hover);
        transform: scale(1.1);
      }

      .card-tools {
        display: flex;
        gap: 4px;
      }

      .tool-btn {
        cursor: pointer;
        font-size: 14px;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.2s;
      }

      .tool-btn:hover {
        background: var(--background-modifier-hover);
      }

      .flashcard-btn:hover {
        background: rgba(251, 191, 36, 0.2);
      }

      .more-btn:hover {
        background: var(--background-modifier-hover);
      }

.note-text {
  font-size: 12px;
  line-height: 1.6;
  color: var(--text-normal);
  cursor: pointer;
  word-wrap: break-word;
  word-break: break-word;
  white-space: normal;
  overflow-wrap: break-word;
  margin-bottom: 6px;
}

.note-text:hover {
  color: var(--interactive-accent);
}

/* \u{1F527} QA \u6837\u5F0F */
.qa-question {
  font-weight: 500;
  color: var(--text-normal);
}

.qa-separator {
  color: var(--text-muted);
  margin: 0 4px;
}

.qa-answer {
  color: var(--text-accent);
  font-style: italic;
}

/* \u{1F527} Cloze \u9AD8\u4EAE\u6837\u5F0F */
.cloze-highlight {

  color: #f59e0b;
  font-weight: 500;
  padding: 1px 3px;
  border-radius: 3px;
}

      .annotation-preview {
        font-size: 11px;
        line-height: 1.4;
        color: var(--text-muted);
        padding: 6px 8px;
        background: var(--background-secondary);
        border-radius: 4px;
        margin-top: 6px;
        border-left: 3px solid var(--interactive-accent);
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .annotation-preview:hover {
        background: var(--background-modifier-hover);
      }

      .card-meta {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        gap: 6px;
        margin-top: 8px;
      }
      
      /* ==================== \u5185\u8054\u6279\u6CE8\u7F16\u8F91\u5668 ==================== */
      .inline-annotation-editor {
        margin-top: 8px;
        padding: 0;
        background: transparent;
        animation: slideDown 0.15s ease-out;
      }
      
      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-5px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      .inline-annotation-textarea {
        width: 100%;
        min-height: 80px;
        padding: 12px 14px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-primary-alt);
        color: var(--text-normal);
        font-family: var(--font-text);
        font-size: 13px;
        line-height: 1.5;
        resize: vertical;
        transition: all 0.2s;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }
      
      .inline-annotation-textarea:focus {
        outline: none;
        border-color: var(--interactive-accent);
        background: var(--background-primary);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      }
      
      .inline-annotation-textarea::placeholder {
        color: var(--text-faint);
        font-style: italic;
      }
      
      .inline-annotation-hint {
        margin-top: 6px;
        font-size: 11px;
        color: var(--text-faint);
        font-style: italic;
        text-align: left;
      }
      
      /* \u7F51\u683C\u5361\u7247\u7684\u5185\u8054\u7F16\u8F91\u5668\u6837\u5F0F */
      .grid-card .inline-annotation-editor {
        margin-top: 8px;
      }
      
      .grid-card .inline-annotation-textarea {
        min-height: 100px;
        font-size: 14px;
        padding: 8px 14px;
      }
      
      .grid-card .inline-annotation-hint {
        font-size: 12px;
        margin-top: 8px;
      }

      .tag {
        padding: 2px 6px;
        background: var(--tag-background);
        color: var(--tag-color);
        border-radius: 4px;
        font-size: 10px;
        font-weight: 500;
      }

      .tag-more {
        padding: 2px 6px;
        background: var(--background-modifier-border);
        color: var(--text-muted);
        border-radius: 4px;
        font-size: 10px;
      }

      .badge {
        padding: 2px 6px;
        background: var(--background-modifier-border);
        border-radius: 4px;
        font-size: 10px;
      }

      /* ==================== \u4E3B\u754C\u9762\u6A21\u5F0F\u6837\u5F0F ==================== */
      .main-layout {
        display: grid;
        grid-template-columns: 250px 1fr;
        gap: 1px;
        height: 100%;
        background: var(--background-modifier-border);
      }

      .left-panel {
        background: var(--background-primary);
        overflow-y: auto;
        display: flex;
        flex-direction: column;
      }

      .right-panel {
        background: var(--background-primary);
        overflow-y: auto;
        padding: 8px;
      }

      .fixed-entries {
        padding: 12px;
        border-bottom: 1px solid var(--background-modifier-border);
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .entry-btn {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 12px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 13px;
        font-weight: 500;
        background: var(--background-secondary);
      }

      .entry-btn:hover {
        background: var(--background-modifier-hover);
        transform: translateX(2px);
      }

      .entry-btn.active {
        background: var(--interactive-accent);
        color: var(--text-on-accent);
      }

      .main-toolbar {
        padding: 12px;
        border-bottom: 1px solid var(--background-modifier-border);
      }

      .batch-actions-main {
        display: flex;
        gap: 8px;
        margin-top: 10px;
        flex-wrap: wrap;
      }

      .batch-actions-main .batch-mode-btn,
      .batch-actions-main .select-all-btn,
      .batch-actions-main .batch-delete-btn,
      .batch-actions-main .batch-create-cards-btn {
        padding: 8px 16px;
        font-size: 12px;
      }

      .batch-actions-main .select-all-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .search-input-main {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        font-size: 13px;
        background: var(--background-primary);
        color: var(--text-normal);
        margin-bottom: 10px;
      }

      .search-input-main:focus {
        outline: none;
        border-color: var(--interactive-accent);
      }

      .group-switcher-main {
        display: flex;
        gap: 6px;
      }

      .group-btn-main {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 4px;
        padding: 8px 10px;
        font-size: 12px;
        border-radius: 6px;
        background: var(--background-secondary);
        cursor: pointer;
        transition: all 0.2s;
        font-weight: 500;
      }

      .group-btn-main:hover {
        background: var(--background-modifier-hover);
        transform: translateY(-1px);
      }

      .group-btn-main.active {
        background: var(--interactive-accent);
        color: var(--text-on-accent);
      }

      .panel-title {
        font-size: 13px;
        font-weight: 600;
        padding: 12px;
        margin:0;
        color: var(--text-muted);
      }

      .file-list {
        padding: 0 8px 8px 8px;
        flex: 1;
        overflow-y: auto;
      }

      .file-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 10px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
        margin-bottom: 4px;
      }

      .file-item:hover {
        background: var(--background-modifier-hover);
      }

      .file-item.selected {
        background: var(--interactive-accent);
        color: var(--text-on-accent);
      }

      .file-icon {
        font-size: 14px;
      }

      .file-name {
        flex: 1;
        font-size: 13px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .file-count {
        font-size: 11px;
        padding: 2px 6px;
        background: rgba(255,255,255,0.1);
        border-radius: 10px;
      }

      .file-item.selected .file-count {
        background: rgba(255,255,255,0.2);
      }

      .empty-right-panel {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100%;
        color: var(--text-muted);
      }

      .empty-icon {
        font-size: 48px;
        margin-bottom: 16px;
      }

      .empty-text {
        font-size: 14px;
      }

      .grid-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 12px;
        border-bottom: 2px solid var(--background-modifier-border);
      }

      .grid-header h2 {
        font-size: 18px;
        font-weight: 600;
        margin: 0;
      }

      .open-file-btn {
        padding: 8px 16px;
        font-size: 13px;
        border-radius: 6px;
        background: var(--interactive-accent);
        color: var(--text-on-accent);
        border: none;
        cursor: pointer;
        transition: all 0.2s;
        font-weight: 500;
      }

      .open-file-btn:hover {
        opacity: 0.9;
        transform: translateY(-1px);
      }

      .content-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
        gap: 8px;
      }

      .grid-card {
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 8px;
        padding: 8px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      }

      .grid-card:hover {
        border-color: var(--interactive-accent);
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        transform: translateY(-2px);
      }

      .grid-card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 12px;
        padding-bottom: 8px;
        border-bottom: 1px solid var(--background-modifier-border);
      }

      .doc-name {
        font-size: 11px;
        color: var(--text-muted);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .grid-card-tools {
        display: flex;
        gap: 4px;
      }

      .tool-btn-grid {
        cursor: pointer;
        font-size: 16px;
        padding: 4px 6px;
        border-radius: 4px;
        transition: all 0.2s;
      }

      .tool-btn-grid:hover {
        background: var(--background-modifier-hover);
        transform: scale(1.1);
      }

      .grid-card-content {
        margin-bottom: 12px;
      }

.grid-note-text {
  font-size: 13px;  /* \u{1F527} \u4ECE 14px \u6539\u4E3A 13px */
  line-height: 1.6;
  color: var(--text-normal);
  cursor: pointer;
  margin-bottom: 10px;
  word-wrap: break-word;  /* \u{1F527} \u5141\u8BB8\u6362\u884C */
  word-break: break-word;
  white-space: normal;
  overflow-wrap: break-word;
}

.grid-note-text:hover {
  color: var(--interactive-accent);
}


      .grid-annotation {
        font-size: 12px;
        line-height: 1.5;
        color: var(--text-muted);
        padding: 10px;
        background: var(--background-secondary);
        border-radius: 4px;
        border-left: 3px solid var(--interactive-accent);
        margin-top: 10px;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .grid-annotation:hover {
        background: var(--background-modifier-hover);
      }

      .grid-annotation strong {
        color: var(--text-normal);
      }

      .grid-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin-top: 10px;
      }

      .tag-grid {
        padding: 4px 8px;
        background: var(--tag-background);
        color: var(--tag-color);
        border-radius: 4px;
        font-size: 11px;
        font-weight: 500;
      }

      .grid-card-meta {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding-top: 10px;
        border-top: 1px solid var(--background-modifier-border);
        font-size: 11px;
      }

      .line-info {
        color: var(--text-muted);
      }

      .badge-grid {
        padding: 3px 8px;
        background: var(--background-secondary);
        border-radius: 4px;
      }

      .cards-header {
        margin-bottom: 20px;
      }

      .cards-header h2 {
        font-size: 18px;
        font-weight: 600;
      }

      .cards-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 8px;
      }

      .flashcard-item {
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 8px;
        padding: 16px;
        transition: all 0.2s;
      }

      .flashcard-item:hover {
        border-color: var(--interactive-accent);
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      }

      .flashcard-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }

      .flashcard-delete-btn {
        padding: 4px 8px;
        border: none;
        background: transparent;
        cursor: pointer;
        font-size: 14px;
        border-radius: 4px;
        transition: all 0.2s;
        opacity: 0.6;
      }

      .flashcard-delete-btn:hover {
        opacity: 1;
        background: var(--background-modifier-hover);
        color: var(--color-red);
      }

      .flashcard-type {
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
      }

      .flashcard-type.qa {
              background: rgba(16, 185, 129, 0.2);

        color: #10b981;
      }

      .flashcard-type.cloze {

               background: rgba(147, 51, 234, 0.2);
         color: #9333ea;
      }

      .flashcard-date {
        font-size: 11px;
        color: var(--text-muted);
      }

      .flashcard-body {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .flashcard-question,
      .flashcard-answer {
        font-size: 13px;
        line-height: 1.5;
      }

      .flashcard-question strong,
      .flashcard-answer strong {
        color: var(--text-muted);
        font-size: 11px;
        display: block;
        margin-bottom: 4px;
      }

.empty-state {
  text-align: center;
  padding: 40px 20px;
  color: var(--text-muted);
  font-size: 14px;
  pointer-events: none; /* \u{1F527} \u5173\u952E\uFF01\u7A7A\u72B6\u6001\u4E0D\u62E6\u622A\u70B9\u51FB */
  position: relative;
  z-index: 1; /* \u{1F527} \u786E\u4FDD\u5728\u5DE5\u5177\u680F\u4E0B\u65B9 */
}

      .empty-hint {
        text-align: center;
        padding: 20px;
        color: var(--text-muted);
        font-size: 13px;
      }

      /* ==================== \u54CD\u5E94\u5F0F ==================== */
      @media (max-width: 768px) {
        .main-layout {
          grid-template-columns: 1fr;
        }

        .left-panel {
          display: none;
        }

        .content-grid,
        .cards-grid {
          grid-template-columns: 1fr;
        }
          .batch-btn {
          font-size: 14px;
          position: relative;
        }

      .batch-btn:hover {
        background: rgba(59, 130, 246, 0.2);
        transform: scale(1.05);
      }

      /* \u6279\u91CF\u6A21\u5F0F\u6FC0\u6D3B\u72B6\u6001 */
      .compact-card.batch-mode .batch-btn,
      .grid-card.batch-mode .batch-btn {
        background: rgba(59, 130, 246, 0.3);
        color: var(--interactive-accent);
      }

      .batch-actions {
  display: flex;
  gap: 6px;
  margin-top: 10px;
  flex-wrap: wrap;
  padding: 8px;
  background: var(--background-secondary-alt);
  border-radius: 6px;
  animation: slideDown 0.2s ease;
}
/* \u6279\u91CF\u64CD\u4F5C\u6309\u94AE\u7981\u7528\u72B6\u6001\uFF08\u6570\u91CF\u4E3A0\u65F6\u7684\u89C6\u89C9\u53CD\u9988\uFF09 */
.batch-create-cards-btn-sidebar:has-text("(0)"),
.batch-delete-btn-sidebar:has-text("(0)"),
.batch-create-cards-btn-header:has-text("(0)"),
.batch-delete-btn-header:has-text("(0)") {
  opacity: 0.5;
  cursor: not-allowed;
}
@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
    
  }
}
      }
    `;
    document.head.appendChild(styleEl);
  }
  async onClose() {
    if (this.searchDebounceTimer !== null) {
      window.clearTimeout(this.searchDebounceTimer);
    }
  }
};
var AnnotationModal = class extends import_obsidian5.Modal {
  constructor(app, defaultValue, onSubmit) {
    super(app);
    this.result = null;
    this.defaultValue = defaultValue;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h3", { text: "\u270F\uFE0F \u7F16\u8F91\u6279\u6CE8" });
    const textarea = contentEl.createEl("textarea", {
      cls: "annotation-textarea",
      placeholder: "\u8F93\u5165\u4F60\u7684\u6279\u6CE8..."
    });
    textarea.value = this.defaultValue;
    textarea.style.width = "100%";
    textarea.style.minHeight = "120px";
    textarea.style.padding = "10px";
    textarea.style.border = "1px solid var(--background-modifier-border)";
    textarea.style.borderRadius = "6px";
    textarea.style.fontFamily = "var(--font-interface)";
    textarea.style.fontSize = "14px";
    textarea.style.resize = "vertical";
    textarea.style.marginTop = "12px";
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    buttonContainer.style.display = "flex";
    buttonContainer.style.gap = "8px";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.marginTop = "16px";
    const cancelBtn = buttonContainer.createEl("button", { text: "\u53D6\u6D88" });
    cancelBtn.style.padding = "8px 16px";
    cancelBtn.style.borderRadius = "6px";
    cancelBtn.addEventListener("click", () => {
      this.close();
    });
    const saveBtn = buttonContainer.createEl("button", {
      text: "\u4FDD\u5B58",
      cls: "mod-cta"
    });
    saveBtn.style.padding = "8px 16px";
    saveBtn.style.borderRadius = "6px";
    saveBtn.addEventListener("click", () => {
      this.result = textarea.value;
      this.close();
    });
    textarea.focus();
    textarea.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && (e.ctrlKey || e.metaKey)) {
        this.result = textarea.value;
        this.close();
      }
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    if (this.result !== null) {
      this.onSubmit(this.result);
    }
  }
};
var FlashcardCreationModal = class extends import_obsidian5.Modal {
  constructor(app, unit, type, onSubmit) {
    super(app);
    this.unit = unit;
    this.type = type;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h3", {
      text: `\u{1F0CF} \u521B\u5EFA${this.type === "qa" ? "Q&A" : "\u586B\u7A7A"}\u95EA\u5361`
    });
    const sourceDiv = contentEl.createDiv({ cls: "flashcard-source" });
    sourceDiv.style.padding = "10px";
    sourceDiv.style.background = "var(--background-secondary)";
    sourceDiv.style.borderRadius = "6px";
    sourceDiv.style.marginTop = "12px";
    sourceDiv.style.marginBottom = "12px";
    sourceDiv.style.fontSize = "13px";
    sourceDiv.style.color = "var(--text-muted)";
    sourceDiv.innerHTML = `<strong>\u539F\u6587\uFF1A</strong>${this.unit.content}`;
    contentEl.createEl("label", {
      text: this.type === "qa" ? "\u95EE\u9898" : "\u586B\u7A7A\u9898\u5E72",
      cls: "flashcard-label"
    }).style.display = "block";
    const questionInput = contentEl.createEl("textarea", {
      cls: "flashcard-input",
      placeholder: this.type === "qa" ? "\u8F93\u5165\u95EE\u9898..." : "\u7528 {{c1::...}} \u6807\u8BB0\u9700\u8981\u586B\u7A7A\u7684\u5185\u5BB9"
    });
    questionInput.style.width = "100%";
    questionInput.style.minHeight = "80px";
    questionInput.style.padding = "10px";
    questionInput.style.border = "1px solid var(--background-modifier-border)";
    questionInput.style.borderRadius = "6px";
    questionInput.style.marginTop = "8px";
    questionInput.style.marginBottom = "12px";
    questionInput.style.fontSize = "14px";
    questionInput.style.resize = "vertical";
    contentEl.createEl("label", {
      text: "\u7B54\u6848",
      cls: "flashcard-label"
    }).style.display = "block";
    const answerInput = contentEl.createEl("textarea", {
      cls: "flashcard-input",
      placeholder: "\u8F93\u5165\u7B54\u6848..."
    });
    answerInput.value = this.unit.content;
    answerInput.style.width = "100%";
    answerInput.style.minHeight = "80px";
    answerInput.style.padding = "10px";
    answerInput.style.border = "1px solid var(--background-modifier-border)";
    answerInput.style.borderRadius = "6px";
    answerInput.style.marginTop = "8px";
    answerInput.style.fontSize = "14px";
    answerInput.style.resize = "vertical";
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    buttonContainer.style.display = "flex";
    buttonContainer.style.gap = "8px";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.marginTop = "16px";
    const cancelBtn = buttonContainer.createEl("button", { text: "\u53D6\u6D88" });
    cancelBtn.style.padding = "8px 16px";
    cancelBtn.style.borderRadius = "6px";
    cancelBtn.addEventListener("click", () => {
      this.close();
    });
    const createBtn = buttonContainer.createEl("button", {
      text: "\u521B\u5EFA",
      cls: "mod-cta"
    });
    createBtn.style.padding = "8px 16px";
    createBtn.style.borderRadius = "6px";
    createBtn.addEventListener("click", () => {
      const question = questionInput.value.trim();
      const answer = answerInput.value.trim();
      if (!question || !answer) {
        new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u586B\u5199\u5B8C\u6574\u4FE1\u606F");
        return;
      }
      this.onSubmit(question, answer);
      this.close();
    });
    questionInput.focus();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var FlashcardEditModal = class extends import_obsidian5.Modal {
  constructor(app, card, onSubmit) {
    super(app);
    this.card = card;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h3", { text: "\u270F\uFE0F \u7F16\u8F91\u95EA\u5361" });
    contentEl.createEl("label", { text: "\u95EE\u9898" }).style.display = "block";
    const questionInput = contentEl.createEl("textarea", {
      cls: "flashcard-input"
    });
    questionInput.value = this.card.front;
    questionInput.style.width = "100%";
    questionInput.style.minHeight = "80px";
    questionInput.style.padding = "10px";
    questionInput.style.marginTop = "8px";
    questionInput.style.marginBottom = "12px";
    contentEl.createEl("label", { text: "\u7B54\u6848" }).style.display = "block";
    const answerInput = contentEl.createEl("textarea", {
      cls: "flashcard-input"
    });
    answerInput.value = Array.isArray(this.card.back) ? this.card.back.join(", ") : this.card.back;
    answerInput.style.width = "100%";
    answerInput.style.minHeight = "80px";
    answerInput.style.padding = "10px";
    answerInput.style.marginTop = "8px";
    const buttonContainer = contentEl.createDiv();
    buttonContainer.style.display = "flex";
    buttonContainer.style.gap = "8px";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.marginTop = "16px";
    const cancelBtn = buttonContainer.createEl("button", { text: "\u53D6\u6D88" });
    cancelBtn.addEventListener("click", () => this.close());
    const saveBtn = buttonContainer.createEl("button", {
      text: "\u4FDD\u5B58",
      cls: "mod-cta"
    });
    saveBtn.addEventListener("click", () => {
      const question = questionInput.value.trim();
      const answer = answerInput.value.trim();
      if (!question || !answer) {
        new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u586B\u5199\u5B8C\u6574\u4FE1\u606F");
        return;
      }
      this.onSubmit(question, answer);
      this.close();
    });
    questionInput.focus();
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/ui/ReviewView.ts
var import_obsidian6 = require("obsidian");

// src/core/CardScheduler.ts
var CardScheduler = class {
  /**
   * 计算下次复习时间（基于 SM-2 算法）
   */
  schedule(card, ease, timeSpent, userAnswer) {
    const oldScheduling = { ...card.scheduling };
    const newScheduling = { ...card.scheduling };
    const now = Date.now();
    card.stats.totalReviews++;
    card.stats.lastReview = now;
    const totalTime = card.stats.averageTime * (card.stats.totalReviews - 1) + timeSpent;
    card.stats.averageTime = totalTime / card.stats.totalReviews;
    switch (ease) {
      case "again":
        this.scheduleAgain(newScheduling, card.stats);
        break;
      case "hard":
        this.scheduleHard(newScheduling, card.stats);
        break;
      case "good":
        this.scheduleGood(newScheduling, card.stats);
        break;
      case "easy":
        this.scheduleEasy(newScheduling, card.stats);
        break;
    }
    card.scheduling = newScheduling;
    card.metadata.updatedAt = now;
    const reviewLog = {
      flashcardId: card.id,
      timestamp: now,
      response: {
        userAnswer,
        timeSpent,
        ease
      },
      schedulingChange: {
        oldInterval: oldScheduling.interval,
        newInterval: newScheduling.interval,
        oldEase: oldScheduling.ease,
        newEase: newScheduling.ease
      }
    };
    return { updatedCard: card, reviewLog };
  }
  /**
   * Again - 完全忘记
   */
  scheduleAgain(scheduling, stats) {
    scheduling.interval = 1;
    scheduling.ease = Math.max(1.3, scheduling.ease - 0.2);
    scheduling.due = Date.now() + scheduling.interval * 60 * 1e3;
    scheduling.lapses++;
    scheduling.reps++;
    if (scheduling.state === "new") {
      scheduling.state = "learning";
    } else {
      scheduling.state = "relearning";
    }
    stats.difficulty = Math.min(1, stats.difficulty + 0.1);
  }
  /**
   * Hard - 困难
   */
  scheduleHard(scheduling, stats) {
    scheduling.reps++;
    if (scheduling.state === "new" || scheduling.state === "learning") {
      scheduling.interval = 10;
      scheduling.due = Date.now() + 10 * 60 * 1e3;
      scheduling.state = "learning";
    } else {
      scheduling.interval = Math.max(1, scheduling.interval * 1.2);
      scheduling.ease = Math.max(1.3, scheduling.ease - 0.15);
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    }
    stats.difficulty = Math.min(1, stats.difficulty + 0.05);
    stats.correctCount += 0.5;
  }
  /**
   * Good - 正确
   */
  scheduleGood(scheduling, stats) {
    scheduling.reps++;
    stats.correctCount++;
    if (scheduling.state === "new") {
      scheduling.interval = 1;
      scheduling.due = Date.now() + 1 * 24 * 60 * 60 * 1e3;
      scheduling.state = "learning";
    } else if (scheduling.state === "learning") {
      if (scheduling.interval < 1) {
        scheduling.interval = 1;
      } else {
        scheduling.interval = 3;
      }
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    } else {
      scheduling.interval = scheduling.interval * scheduling.ease;
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.ease = scheduling.ease + 0.1;
      scheduling.state = "review";
    }
    stats.difficulty = Math.max(0, stats.difficulty - 0.05);
  }
  /**
   * Easy - 非常简单
   */
  scheduleEasy(scheduling, stats) {
    scheduling.reps++;
    stats.correctCount++;
    if (scheduling.state === "new") {
      scheduling.interval = 4;
      scheduling.due = Date.now() + 4 * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    } else if (scheduling.state === "learning") {
      scheduling.interval = 7;
      scheduling.due = Date.now() + 7 * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    } else {
      scheduling.interval = scheduling.interval * (scheduling.ease + 0.3);
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.ease = scheduling.ease + 0.15;
      scheduling.state = "review";
    }
    stats.difficulty = Math.max(0, stats.difficulty - 0.1);
  }
  /**
   * 评估用户答案（用于输入答案模式）
   */
  evaluateAnswer(correctAnswer, userAnswer) {
    if (Array.isArray(correctAnswer) && Array.isArray(userAnswer)) {
      let correctCount = 0;
      const total = correctAnswer.length;
      for (let i = 0; i < total; i++) {
        const similarity2 = this.calculateSimilarity(
          this.normalize(correctAnswer[i]),
          this.normalize(userAnswer[i] || "")
        );
        if (similarity2 >= 0.9)
          correctCount++;
        else if (similarity2 >= 0.6)
          correctCount += 0.5;
      }
      const overallSimilarity = correctCount / total;
      if (overallSimilarity >= 0.9) {
        return { correctness: "correct", similarity: overallSimilarity };
      } else if (overallSimilarity >= 0.6) {
        return { correctness: "partial", similarity: overallSimilarity };
      } else {
        return { correctness: "wrong", similarity: overallSimilarity };
      }
    }
    const correct = this.normalize(correctAnswer);
    const user = this.normalize(userAnswer);
    if (user.length === 0) {
      return { correctness: "wrong", similarity: 0 };
    }
    const lengthRatio = Math.min(user.length, correct.length) / Math.max(user.length, correct.length);
    if (lengthRatio < 0.3) {
      return { correctness: "wrong", similarity: 0 };
    }
    const similarity = this.calculateSimilarity(correct, user);
    if (similarity >= 0.9) {
      return { correctness: "correct", similarity };
    } else if (similarity >= 0.7) {
      return { correctness: "partial", similarity };
    } else {
      return { correctness: "wrong", similarity };
    }
  }
  /**
   * 标准化文本
   */
  normalize(text) {
    return text.toLowerCase().trim().replace(/\s+/g, " ").replace(/\n+/g, " ").replace(/[，。！？、；：""''（）《》【】\.,!?;:"'()\[\]{}]/g, "");
  }
  /**
   * 计算相似度（Levenshtein 距离）
   */
  calculateSimilarity(str1, str2) {
    if (str1 === str2)
      return 1;
    if (str1.length === 0 || str2.length === 0)
      return 0;
    const matrix = [];
    for (let i = 0; i <= str2.length; i++) {
      matrix[i] = [i];
    }
    for (let j = 0; j <= str1.length; j++) {
      matrix[0][j] = j;
    }
    for (let i = 1; i <= str2.length; i++) {
      for (let j = 1; j <= str1.length; j++) {
        if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
          matrix[i][j] = matrix[i - 1][j - 1];
        } else {
          matrix[i][j] = Math.min(
            matrix[i - 1][j - 1] + 1,
            // 替换
            matrix[i][j - 1] + 1,
            // 插入
            matrix[i - 1][j] + 1
            // 删除
          );
        }
      }
    }
    const distance = matrix[str2.length][str1.length];
    const maxLength = Math.max(str1.length, str2.length);
    return 1 - distance / maxLength;
  }
  /**
   * 根据相似度建议难度
   */
  suggestEase(similarity) {
    if (similarity >= 0.9)
      return "easy";
    if (similarity >= 0.8)
      return "good";
    if (similarity >= 0.5)
      return "hard";
    return "again";
  }
};

// src/ui/ReviewView.ts
var VIEW_TYPE_REVIEW = "learning-system-review";
var ReviewView = class extends import_obsidian6.ItemView {
  // QA 卡片的用户答案
  constructor(leaf, plugin) {
    super(leaf);
    this.dueCards = [];
    this.currentCardIndex = 0;
    this.currentCard = null;
    this.showAnswer = false;
    this.startTime = 0;
    this.userAnswers = [];
    this.userAnswer = "";
    // 快捷键
    this.keyboardHandler = (e) => {
      const target = e.target;
      const isInInput = target.tagName === "INPUT" || target.tagName === "TEXTAREA";
      if (e.key === "Tab") {
        e.preventDefault();
        if (e.shiftKey) {
          if (this.showAnswer) {
            this.showAnswer = false;
            this.render();
          }
        } else {
          if (!this.showAnswer) {
            this.showAnswer = true;
            this.render();
          } else {
            this.submitReview("good");
          }
        }
        return;
      }
      if (this.showAnswer) {
        const ratingMap = {
          "1": "again",
          "2": "hard",
          "3": "good",
          "4": "easy"
        };
        if (ratingMap[e.key]) {
          e.preventDefault();
          this.submitReview(ratingMap[e.key]);
        }
      }
    };
    this.plugin = plugin;
    this.scheduler = new CardScheduler();
  }
  getViewType() {
    return VIEW_TYPE_REVIEW;
  }
  getDisplayText() {
    return "Flashcard Review";
  }
  getIcon() {
    return "layers";
  }
  async onOpen() {
    await this.loadDueCards();
    this.render();
    this.addStyles();
    this.registerKeyboardHandlers();
  }
  async onClose() {
  }
  async loadDueCards() {
    this.dueCards = this.plugin.flashcardManager.getDueCards();
    this.currentCardIndex = 0;
    this.showAnswer = false;
    document.removeEventListener("keydown", this.keyboardHandler);
  }
  render() {
    var _a;
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("review-container");
    if (this.dueCards.length === 0) {
      this.renderNoDueCards(container);
      return;
    }
    const newCard = this.dueCards[this.currentCardIndex];
    if (((_a = this.currentCard) == null ? void 0 : _a.id) !== (newCard == null ? void 0 : newCard.id)) {
      this.userAnswers = [];
      this.userAnswer = "";
      this.showAnswer = false;
      this.startTime = Date.now();
    }
    this.currentCard = newCard;
    if (!this.showAnswer && this.startTime === 0) {
      this.startTime = Date.now();
    }
    this.renderProgress(container);
    const cardArea = container.createDiv({ cls: "card-area" });
    this.renderTopActions(cardArea);
    if (this.showAnswer) {
      this.renderAnswer(cardArea);
    } else {
      this.renderQuestion(cardArea);
    }
  }
  renderTopActions(container) {
    const actionsBar = container.createDiv({ cls: "top-actions-bar" });
    const jumpBtn = actionsBar.createEl("button", {
      cls: "top-action-btn jump-icon-btn",
      attr: { "aria-label": "Jump to Source" }
    });
    jumpBtn.innerHTML = "\u2197";
    jumpBtn.addEventListener("click", () => this.jumpToSource());
    const moreBtn = actionsBar.createEl("button", {
      cls: "top-action-btn more-btn",
      attr: { "aria-label": "More actions" }
    });
    moreBtn.innerHTML = "\u22EF";
    const dropdown = actionsBar.createDiv({ cls: "more-dropdown" });
    dropdown.style.display = "none";
    const editOption = dropdown.createEl("div", {
      cls: "dropdown-item"
    });
    editOption.innerHTML = "\u270F\uFE0F Edit Card";
    editOption.addEventListener("click", () => {
      if (!this.currentCard)
        return;
      this.editCurrentFlashcard();
      dropdown.style.display = "none";
    });
    const deleteOption = dropdown.createEl("div", {
      cls: "dropdown-item delete-item"
    });
    deleteOption.innerHTML = "\u{1F5D1}\uFE0F Delete Card";
    deleteOption.addEventListener("click", async () => {
      if (!this.currentCard)
        return;
      if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u5F20\u95EA\u5361\u5417\uFF1F\u5220\u9664\u540E\u5C06\u4ECE\u590D\u4E60\u961F\u5217\u4E2D\u79FB\u9664\u3002")) {
        await this.deleteFlashcard(this.currentCard.id);
      }
      dropdown.style.display = "none";
    });
    moreBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      dropdown.style.display = dropdown.style.display === "none" ? "block" : "none";
    });
    document.addEventListener("click", () => {
      dropdown.style.display = "none";
    });
    dropdown.addEventListener("click", (e) => {
      e.stopPropagation();
    });
  }
  renderNoDueCards(container) {
    const emptyState = container.createDiv({ cls: "empty-state" });
    emptyState.createEl("h2", { text: "\u{1F389} All Done!" });
    emptyState.createEl("p", { text: "No cards due for review right now." });
    const stats = this.plugin.flashcardManager.getStats();
    const statsDiv = emptyState.createDiv({ cls: "stats-summary" });
    statsDiv.createEl("p", { text: `Total cards: ${stats.total}` });
    statsDiv.createEl("p", { text: `New cards: ${stats.new}` });
    statsDiv.createEl("p", { text: `Reviewed today: ${stats.reviewedToday}` });
    const closeBtn = emptyState.createEl("button", {
      text: "Close Review",
      cls: "mod-cta"
    });
    closeBtn.addEventListener("click", () => {
      this.leaf.detach();
    });
  }
  renderProgress(container) {
    const progressBar = container.createDiv({ cls: "progress-bar" });
    const stats = progressBar.createDiv({ cls: "progress-stats" });
    stats.createSpan({
      text: `${this.currentCardIndex + 1} / ${this.dueCards.length}`,
      cls: "progress-text"
    });
    const barContainer = progressBar.createDiv({ cls: "bar-container" });
    const bar = barContainer.createDiv({ cls: "bar" });
    const progress = (this.currentCardIndex + 1) / this.dueCards.length * 100;
    bar.style.width = `${progress}%`;
  }
  renderQuestion(container) {
    if (!this.currentCard)
      return;
    const cardInfo = container.createDiv({ cls: "card-info" });
    cardInfo.createSpan({
      text: this.currentCard.type === "qa" ? "\u{1F4DD} Q&A" : "\u270F\uFE0F Cloze",
      cls: "card-type"
    });
    cardInfo.createSpan({
      text: `Deck: ${this.currentCard.deck}`,
      cls: "card-deck"
    });
    const questionArea = container.createDiv({ cls: "question-area" });
    questionArea.createEl("h3", { text: "Question" });
    const questionText = questionArea.createDiv({ cls: "question-text" });
    questionText.textContent = this.currentCard.front;
    if (this.currentCard.type === "cloze" && this.currentCard.cloze) {
      const inputArea = container.createDiv({ cls: "cloze-input-area" });
      inputArea.createEl("h4", { text: "Fill in the blanks:" });
      if (this.userAnswers.length < this.currentCard.cloze.deletions.length) {
        this.userAnswers = new Array(this.currentCard.cloze.deletions.length).fill("");
      }
      this.currentCard.cloze.deletions.forEach((deletion, index) => {
        const inputGroup = inputArea.createDiv({ cls: "input-group" });
        inputGroup.createSpan({ text: `${index + 1}. ` });
        const input = inputGroup.createEl("input", {
          type: "text",
          placeholder: "Your answer...",
          cls: "cloze-input",
          value: this.userAnswers[index] || ""
        });
        input.addEventListener("input", (e) => {
          this.userAnswers[index] = e.target.value;
        });
        if (index === 0) {
          setTimeout(() => input.focus(), 50);
        }
      });
    }
    if (this.currentCard.type === "qa") {
      const inputArea = container.createDiv({ cls: "qa-input-area" });
      inputArea.createEl("h4", { text: "Your Answer:" });
      const textarea = inputArea.createEl("textarea", {
        placeholder: "Type your answer here...",
        cls: "qa-input",
        value: this.userAnswer
      });
      textarea.addEventListener("input", (e) => {
        this.userAnswer = e.target.value;
      });
      setTimeout(() => textarea.focus(), 50);
    }
    const buttonArea = container.createDiv({ cls: "button-area" });
    const showAnswerBtn = buttonArea.createEl("button", {
      text: "Show Answer",
      cls: "mod-cta show-answer-btn",
      attr: { title: "Press Enter or Tab" }
    });
    showAnswerBtn.addEventListener("click", () => {
      this.showAnswer = true;
      this.render();
    });
  }
  renderAnswer(container) {
    if (!this.currentCard)
      return;
    const cardInfo = container.createDiv({ cls: "card-info" });
    cardInfo.createSpan({
      text: this.currentCard.type === "qa" ? "\u{1F4DD} Q&A" : "\u270F\uFE0F Cloze",
      cls: "card-type"
    });
    cardInfo.createSpan({
      text: `Deck: ${this.currentCard.deck}`,
      cls: "card-deck"
    });
    const questionReview = container.createDiv({ cls: "question-review" });
    questionReview.createEl("h4", { text: "Question:" });
    questionReview.createDiv({
      text: this.currentCard.front,
      cls: "review-text"
    });
    const answerArea = container.createDiv({ cls: "answer-area" });
    if (this.currentCard.type === "cloze" && this.currentCard.cloze) {
      const fullText = answerArea.createDiv({ cls: "full-text" });
      fullText.textContent = this.currentCard.cloze.original;
      if (this.userAnswers.length > 0) {
        const comparison = answerArea.createDiv({ cls: "answer-comparison" });
        comparison.createEl("h4", { text: "Your Answers:" });
        this.currentCard.cloze.deletions.forEach((deletion, index) => {
          const item = comparison.createDiv({ cls: "comparison-item" });
          item.createSpan({ text: `${index + 1}. ` });
          const userAnswer = this.userAnswers[index] || "";
          const evaluation = this.scheduler.evaluateAnswer(
            deletion.answer,
            userAnswer
          );
          const userSpan = item.createEl("span", {
            text: userAnswer || "(empty)",
            cls: `user-answer ${evaluation.correctness}`
          });
          userSpan.classList.add("user-answer", evaluation.correctness);
          item.createSpan({ text: " \u2192 " });
          item.createEl("span", {
            text: deletion.answer,
            cls: "correct-answer"
          });
          if (evaluation.correctness === "partial") {
            item.createEl("small", {
              text: ` (${Math.round(evaluation.similarity * 100)}% match)`,
              cls: "similarity-info"
            });
          }
        });
      }
    } else {
      const correctAnswer = this.currentCard.back;
      const comparison = answerArea.createDiv({ cls: "answer-comparison qa-comparison" });
      const evaluation = this.userAnswer.trim() ? this.scheduler.evaluateAnswer(correctAnswer, this.userAnswer) : null;
      const columnsContainer = comparison.createDiv({ cls: "qa-columns-container" });
      const correctColumn = columnsContainer.createDiv({ cls: "qa-column" });
      correctColumn.createEl("h4", { text: "Correct Answer:", cls: "column-label" });
      const correctAnswerDiv = correctColumn.createDiv({ cls: "comparison-item" });
      correctAnswerDiv.createEl("div", {
        text: correctAnswer,
        cls: "correct-answer qa-correct-answer"
      });
      const userColumn = columnsContainer.createDiv({ cls: "qa-column" });
      userColumn.createEl("h4", { text: "Your Answer:", cls: "column-label" });
      const userAnswerDiv = userColumn.createDiv({ cls: "comparison-item" });
      const userAnswerElement = userAnswerDiv.createEl("div", {
        text: this.userAnswer.trim() || "(no answer provided)",
        cls: "qa-user-answer"
      });
      if (evaluation) {
        userAnswerElement.classList.add("user-answer", evaluation.correctness);
        if (evaluation.correctness === "partial") {
          const similarityInfo = comparison.createEl("div", {
            cls: "similarity-info qa-similarity"
          });
          similarityInfo.textContent = `Similarity: ${Math.round(evaluation.similarity * 100)}%`;
        }
      } else {
        userAnswerElement.classList.add("no-answer");
      }
    }
    const ratingArea = container.createDiv({ cls: "rating-area" });
    const buttonGroup = ratingArea.createDiv({ cls: "rating-buttons" });
    const ratings = [
      { ease: "again", label: "Again\n < 1 min", color: "red", key: "1" },
      { ease: "hard", label: "Hard\n < 10 min", color: "orange", key: "2" },
      { ease: "good", label: "Good\n 1 day", color: "blue", key: "3" },
      { ease: "easy", label: "Easy\n 4 days", color: "green", key: "4" }
    ];
    ratings.forEach(({ ease, label, color, key }) => {
      const btn = buttonGroup.createEl("button", {
        cls: `rating-btn rating-${color}`,
        attr: { title: `Press ${key}` }
      });
      const lines = label.split("\n");
      btn.createEl("div", { text: lines[0], cls: "rating-label" });
      btn.createEl("div", { text: lines[1], cls: "rating-interval" });
      btn.createEl("div", { text: `(${key})`, cls: "rating-hotkey" });
      btn.addEventListener("click", () => this.submitReview(ease));
    });
  }
  async submitReview(ease) {
    if (!this.currentCard)
      return;
    const timeSpent = (Date.now() - this.startTime) / 1e3;
    const userAnswer = this.currentCard.type === "cloze" ? this.userAnswers : this.currentCard.type === "qa" ? this.userAnswer : void 0;
    const { updatedCard, reviewLog } = this.scheduler.schedule(
      this.currentCard,
      ease,
      timeSpent,
      userAnswer
    );
    await this.plugin.flashcardManager.updateCard(updatedCard);
    await this.plugin.flashcardManager.logReview({
      id: `log-${Date.now()}`,
      ...reviewLog
    });
    this.currentCardIndex++;
    this.showAnswer = false;
    this.userAnswers = [];
    this.userAnswer = "";
    if (this.currentCardIndex >= this.dueCards.length) {
      new import_obsidian6.Notice(`\u2705 Review session complete! Reviewed ${this.dueCards.length} cards.`);
      await this.loadDueCards();
    }
    this.render();
  }
  async jumpToSource() {
    if (!this.currentCard)
      return;
    const file = this.app.vault.getAbstractFileByPath(this.currentCard.sourceFile);
    if (!(file instanceof import_obsidian6.TFile)) {
      new import_obsidian6.Notice("Source file not found");
      return;
    }
    const contentUnit = this.plugin.dataManager.getContentUnit(
      this.currentCard.sourceContentId
    );
    if (!contentUnit) {
      new import_obsidian6.Notice("Source content not found");
      return;
    }
    const leaf = this.app.workspace.getLeaf(false);
    await leaf.openFile(file);
    setTimeout(() => {
      const view = this.app.workspace.getActiveViewOfType(import_obsidian6.ItemView);
      if (view) {
        const editor = view.editor;
        if (editor) {
          editor.setCursor({ line: contentUnit.source.position.line, ch: 0 });
          editor.scrollIntoView({
            from: { line: contentUnit.source.position.line, ch: 0 },
            to: { line: contentUnit.source.position.line, ch: 0 }
          }, true);
        }
      }
    }, 100);
  }
  async deleteFlashcard(cardId) {
    var _a;
    try {
      await this.plugin.flashcardManager.deleteCard(cardId);
      new import_obsidian6.Notice("\u{1F5D1}\uFE0F \u95EA\u5361\u5DF2\u5220\u9664");
      this.dueCards = this.dueCards.filter((card) => card.id !== cardId);
      if (((_a = this.currentCard) == null ? void 0 : _a.id) === cardId) {
        if (this.currentCardIndex >= this.dueCards.length) {
          this.currentCardIndex = Math.max(0, this.dueCards.length - 1);
        }
        this.currentCard = null;
      }
      await this.loadDueCards();
      this.render();
    } catch (error) {
      console.error("Error deleting flashcard:", error);
      new import_obsidian6.Notice("\u274C \u5220\u9664\u95EA\u5361\u5931\u8D25");
    }
  }
  editCurrentFlashcard() {
    if (!this.currentCard)
      return;
    const modal = new FlashcardEditModal(
      this.app,
      this.currentCard,
      async (question, answer) => {
        try {
          const updatedCard = {
            ...this.currentCard,
            front: question,
            back: this.currentCard.type === "cloze" ? [answer] : answer,
            metadata: {
              ...this.currentCard.metadata,
              updatedAt: Date.now()
            }
          };
          await this.plugin.flashcardManager.updateCard(updatedCard);
          new import_obsidian6.Notice("\u2705 \u95EA\u5361\u5DF2\u66F4\u65B0");
          this.currentCard = updatedCard;
          this.render();
        } catch (error) {
          console.error("Error updating flashcard:", error);
          new import_obsidian6.Notice("\u274C \u66F4\u65B0\u95EA\u5361\u5931\u8D25");
        }
      }
    );
    modal.open();
  }
  registerKeyboardHandlers() {
    document.addEventListener("keydown", this.keyboardHandler);
  }
  addStyles() {
    const styleEl = document.createElement("style");
    styleEl.textContent = `
    .review-container {
        padding: 16px;
        max-width: 800px;
        margin: 0 auto;
      }

      /* \u7A7A\u72B6\u6001 */
      .empty-state {
        text-align: center;
        padding: 40px 20px;
      }

      .empty-state h2 {
        font-size: 1.8em;
        margin-bottom: 8px;
      }

      .stats-summary {
        margin: 20px 0;
        padding: 16px;
        background: var(--background-secondary);
        border-radius: 8px;
        text-align: left;
        max-width: 300px;
        margin-left: auto;
        margin-right: auto;
      }

      /* \u8FDB\u5EA6\u6761 */
      .progress-bar {
        margin-bottom: 20px;
      }

      .progress-stats {
        display: flex;
        justify-content: space-between;
        margin-bottom: 8px;
      }

      .progress-text {
        font-weight: 600;
        font-size: 1em;
      }

      .remaining-text {
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .bar-container {
        height: 6px;
        background: var(--background-secondary);
        border-radius: 3px;
        overflow: hidden;
      }

      .bar {
        height: 100%;
        background: var(--interactive-accent);
        transition: width 0.3s ease;
      }

      /* \u5361\u7247\u533A\u57DF */
      .card-area {
        background: var(--background-primary);
        border: 2px solid var(--background-modifier-border);
        border-radius: 10px;
        padding: 20px;
        min-height: 350px;
        position: relative;
      }

      /* \u53F3\u4E0A\u89D2\u64CD\u4F5C\u680F */
      .top-actions-bar {
        position: absolute;
        top: 16px;
        right: 16px;
        display: flex;
        gap: 6px;
        z-index: 10;
      }

      .top-action-btn {
        width: 32px;
        height: 32px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-primary);
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        color: var(--text-normal);
        padding: 0;
      }

      .top-action-btn:hover {
        background: var(--background-modifier-hover);
        border-color: var(--interactive-accent);
      }

      .jump-icon-btn {
        font-weight: bold;
      }

      .more-btn {
        font-weight: bold;
        letter-spacing: 1px;
      }

      /* \u4E0B\u62C9\u83DC\u5355 */
      .more-dropdown {
        position: absolute;
        top: 38px;
        right: 0;
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        min-width: 150px;
        z-index: 100;
      }

      .dropdown-item {
        padding: 8px 14px;
        cursor: pointer;
        transition: background 0.2s;
        white-space: nowrap;
        font-size: 0.9em;
      }

      .dropdown-item:hover {
        background: var(--background-modifier-hover);
      }

      .dropdown-item:first-child {
        border-radius: 6px 6px 0 0;
      }

      .dropdown-item:last-child {
        border-radius: 0 0 6px 6px;
      }

      .delete-item:hover {
        background: var(--background-modifier-error-hover);
        color: var(--color-red);
      }

      .card-info {
        display: flex;
        gap: 10px;
        margin-bottom: 16px;
        padding-bottom: 12px;
        border-bottom: 1px solid var(--background-modifier-border);
        padding-right: 80px;
      }

      .card-type, .card-deck {
        padding: 3px 10px;
        background: var(--background-secondary);
        border-radius: 10px;
        font-size: 0.85em;
      }

      /* \u95EE\u9898\u533A\u57DF */
      .question-area, .answer-area {
        margin: 16px 0;
      }

      .question-area h3, .answer-area h3 {
        margin-bottom: 10px;
        color: var(--text-muted);
        font-size: 1em;
      }

      .question-text, .answer-text {
        font-size: 1.2em;
        line-height: 1.5;
        padding: 14px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      /* \u5B8C\u5F62\u586B\u7A7A\u8F93\u5165 */
      .cloze-input-area {
        margin: 16px 0;
      }

      .cloze-input-area h4 {
        margin-bottom: 10px;
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .input-group {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 8px;
      }

      .cloze-input {
        flex: 1;
        padding: 8px 12px;
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-primary);
        font-size: 0.95em;
      }

      .cloze-input:focus {
        border-color: var(--interactive-accent);
        outline: none;
      }

      /* QA \u5361\u7247\u8F93\u5165 */
      .qa-input-area {
        margin: 16px 0;
      }

      .qa-input-area h4 {
        margin-bottom: 10px;
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .qa-input {
        width: 100%;
        min-height: 100px;
        padding: 10px 12px;
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-primary);
        font-size: 0.95em;
        font-family: inherit;
        resize: vertical;
        line-height: 1.5;
      }

      .qa-input:focus {
        border-color: var(--interactive-accent);
        outline: none;
      }

      /* \u7B54\u6848\u5BF9\u6BD4 */
      .question-review {
        margin-bottom: 12px;
        padding: 10px;
        background: var(--background-secondary-alt);
        border-radius: 6px;
      }

      .question-review h4 {
        margin: 0 0 6px 0;
        color: var(--text-muted);
        font-size: 0.85em;
      }

      .review-text {
        color: var(--text-muted);
        font-size: 0.95em;
      }

      .full-text {
        font-size: 1.1em;
        line-height: 1.5;
        padding: 12px;
        background: var(--background-secondary);
        border-radius: 6px;
        margin-bottom: 12px;
      }

      .answer-comparison {
        padding: 10px;
        background: var(--background-secondary-alt);
        border-radius: 6px;
        margin-top: 12px;
      }

      .answer-comparison h4 {
        margin: 0 0 8px 0;
        color: var(--text-muted);
        font-size: 0.85em;
      }

      .comparison-item {
        padding: 8px;
        margin-bottom: 6px;
        background: var(--background-primary);
        border-radius: 4px;
      }

      .user-answer {
        font-weight: 500;
        padding: 2px 6px;
        border-radius: 3px;
      }

      .user-answer.correct {
        background: var(--background-modifier-success, #4caf50) !important;
        color: var(--text-on-accent, white) !important;
      }

      .user-answer.partial {
        background: #FFC000 !important;
        color: white !important;
      }

      .user-answer.wrong {
        background: var(--background-modifier-error, #f44336) !important;
        color: white !important;
      }

      .correct-answer {
        color: var(--text-accent);
        font-weight: 500;
      }

      .similarity-info {
        color: var(--text-muted);
        font-style: italic;
        font-size: 0.85em;
      }

      /* QA \u5361\u7247\u5BF9\u6BD4\u6837\u5F0F */
      .qa-comparison {
        margin-top: 12px;
      }


.qa-columns-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-bottom: 12px;
}

.qa-column {
  display: flex;
  flex-direction: column;
}

.column-label {
  margin: 0 0 8px 0 !important;
  color: var(--text-muted);
  font-size: 0.85em;
}

.qa-user-answer,
.qa-correct-answer {
  padding: 12px;
  border-radius: 6px;
  white-space: pre-wrap;
  word-break: break-word;
  font-size: 0.95em;
  line-height: 1.5;
  min-height: 60px;
}

.qa-correct-answer {
  background: var(--background-secondary);
}

/* \u76F8\u4F3C\u5EA6\u4FE1\u606F\u653E\u5728\u4E24\u5217\u4E0B\u65B9 */
.qa-similarity {
  margin-top: 8px;
  padding: 6px;
  background: var(--background-secondary);
  border-radius: 4px;
  text-align: center;
  font-size: 0.85em;
  grid-column: 1 / -1;
}




      .qa-user-answer.correct,
      .user-answer.correct.qa-user-answer,
      div.qa-user-answer.correct,
      div.user-answer.correct.qa-user-answer,
      .comparison-item .qa-user-answer.correct,
      .comparison-item .user-answer.correct.qa-user-answer {
        background: var(--background-modifier-success, #4caf50) !important;
        background-color: #4caf50 !important;
        color: var(--text-on-accent, white) !important;
        color: white !important;
      }

      .qa-user-answer.partial,
      .user-answer.partial.qa-user-answer,
      div.qa-user-answer.partial,
      div.user-answer.partial.qa-user-answer,
      .comparison-item .qa-user-answer.partial,
      .comparison-item .user-answer.partial.qa-user-answer {
        background: #FFC000 !important;
        background-color: #FFC000 !important;
        color: white !important;
      }

      .qa-user-answer.wrong,
      .user-answer.wrong.qa-user-answer,
      div.qa-user-answer.wrong,
      div.user-answer.wrong.qa-user-answer,
      .comparison-item .qa-user-answer.wrong,
      .comparison-item .user-answer.wrong.qa-user-answer {
        background: var(--background-modifier-error, #f44336) !important;
        background-color: #f44336 !important;
        color: white !important;
      }


      .correct-answer-label {
        margin-top: 12px !important;
        margin-bottom: 6px !important;
      }

      .qa-similarity {
        margin-top: 8px;
        padding: 6px;
        background: var(--background-secondary);
        border-radius: 4px;
        text-align: center;
        font-size: 0.85em;
      }

      /* \u6309\u94AE\u533A\u57DF */
      .button-area {
        display: flex;
        gap: 12px;
        justify-content: center;
        margin-top: 20px;
      }

      .show-answer-btn {
        padding: 10px 32px;
        font-size: 1em;
      }

      /* \u8BC4\u7EA7\u533A\u57DF */
      .rating-area {
        margin: 15px 0 10px 0;
        text-align: center;
      }

      .rating-area h4 {
        margin-bottom: 12px;
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .rating-buttons {
        display: flex;
        gap: 20px;
        justify-content: center;
        margin-bottom: 0;
      }

      .rating-btn {
        flex: 1;
        max-width: 120px;
        hight:100px;
        padding: 14px 8px;
        border: 2px solid var(--background-modifier-border);
        border-radius: 8px;
        background: var(--background-primary);
        cursor: pointer;
        transition: all 0.2s;
      }

      .rating-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      }

      .rating-red:hover { 
        border-color: var(--color-red);
        background: var(--background-modifier-error-hover);
      }

      .rating-orange:hover { 
        border-color: #FFC000;
        background: rgba(255, 192, 0, 0.1);
      }

      .rating-blue:hover { 
        border-color: var(--interactive-accent);
        background: var(--background-modifier-hover);
      }

      .rating-green:hover { 
        border-color: var(--color-green);
        background: var(--background-modifier-success-hover);
      }

      .rating-label {
        font-weight: 600;
        font-size: 1em;
        margin-bottom: 4px;
      }

      .rating-interval {
        font-size: 0.85em;
        color: var(--text-muted);
      }
        /* \u5FEB\u6377\u952E\u63D0\u793A */
.rating-hotkey {
  font-size: 0.75em;
  color: var(--text-muted);
  margin-top: 4px;
  opacity: 0.7;
}

.rating-btn:hover .rating-hotkey {
  opacity: 1;
  color: var(--text-normal);
}

/* Show Answer \u6309\u94AE tooltip */
.show-answer-btn {
  position: relative;
}
  .cloze-input:focus,
.qa-input:focus {
  border-color: var(--interactive-accent);
  outline: none;
  box-shadow: 0 0 0 2px var(--interactive-accent-hover);
}
  /* \u65E0\u7B54\u6848\u72B6\u6001 */
.qa-user-answer.no-answer {
  background: var(--background-secondary);
  color: var(--text-muted);
  font-style: italic;
  border: 2px dashed var(--background-modifier-border);
}
    `;
    document.head.appendChild(styleEl);
  }
};

// src/ui/StatsView.ts
var import_obsidian7 = require("obsidian");

// src/core/AnalyticsEngine.ts
var AnalyticsEngine = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * 获取每日统计
   */
  getDailyStats(days = 30) {
    const logs = this.plugin.flashcardManager["reviewLogs"] || [];
    const stats = /* @__PURE__ */ new Map();
    for (let i = 0; i < days; i++) {
      const date = new Date();
      date.setDate(date.getDate() - i);
      const dateKey = date.toISOString().split("T")[0];
      stats.set(dateKey, {
        date: dateKey,
        reviewed: 0,
        correctCount: 0,
        correctRate: 0,
        timeSpent: 0,
        newCards: 0
      });
    }
    logs.forEach((log) => {
      const date = new Date(log.timestamp).toISOString().split("T")[0];
      const stat = stats.get(date);
      if (!stat)
        return;
      stat.reviewed++;
      stat.timeSpent += log.response.timeSpent;
      if (log.response.ease === "good" || log.response.ease === "easy") {
        stat.correctCount++;
      } else if (log.response.ease === "hard") {
        stat.correctCount += 0.5;
      }
      const card = this.plugin.flashcardManager.getFlashcard(log.flashcardId);
      if (card && card.stats.totalReviews === 1) {
        stat.newCards++;
      }
    });
    stats.forEach((stat) => {
      if (stat.reviewed > 0) {
        stat.correctRate = stat.correctCount / stat.reviewed;
      }
    });
    return Array.from(stats.values()).sort(
      (a, b) => a.date.localeCompare(b.date)
    );
  }
  /**
   * 获取周统计
   */
  getWeeklyStats() {
    const now = new Date();
    const thisWeekStart = new Date(now);
    thisWeekStart.setDate(now.getDate() - now.getDay());
    thisWeekStart.setHours(0, 0, 0, 0);
    const lastWeekStart = new Date(thisWeekStart);
    lastWeekStart.setDate(lastWeekStart.getDate() - 7);
    const thisWeek = this.calculateWeekStats(thisWeekStart);
    const lastWeek = this.calculateWeekStats(lastWeekStart);
    return { thisWeek, lastWeek };
  }
  calculateWeekStats(startDate) {
    const endDate = new Date(startDate);
    endDate.setDate(endDate.getDate() + 7);
    const logs = (this.plugin.flashcardManager["reviewLogs"] || []).filter(
      (log) => log.timestamp >= startDate.getTime() && log.timestamp < endDate.getTime()
    );
    let totalCorrect = 0;
    let totalTimeSpent = 0;
    logs.forEach((log) => {
      totalTimeSpent += log.response.timeSpent;
      if (log.response.ease === "good" || log.response.ease === "easy") {
        totalCorrect++;
      } else if (log.response.ease === "hard") {
        totalCorrect += 0.5;
      }
    });
    const averageCorrectRate = logs.length > 0 ? totalCorrect / logs.length : 0;
    const streak = this.calculateStreak();
    return {
      startDate: startDate.toISOString().split("T")[0],
      endDate: endDate.toISOString().split("T")[0],
      totalReviews: logs.length,
      averageCorrectRate,
      totalTimeSpent,
      streak
    };
  }
  /**
   * 计算连续学习天数
   */
  calculateStreak() {
    const logs = this.plugin.flashcardManager["reviewLogs"] || [];
    if (logs.length === 0)
      return 0;
    const dates = /* @__PURE__ */ new Set();
    logs.forEach((log) => {
      const date = new Date(log.timestamp).toISOString().split("T")[0];
      dates.add(date);
    });
    const sortedDates = Array.from(dates).sort().reverse();
    let streak = 0;
    const today = new Date().toISOString().split("T")[0];
    for (let i = 0; i < sortedDates.length; i++) {
      const expectedDate = new Date();
      expectedDate.setDate(expectedDate.getDate() - i);
      const expected = expectedDate.toISOString().split("T")[0];
      if (sortedDates[i] === expected) {
        streak++;
      } else {
        break;
      }
    }
    return streak;
  }
  /**
   * 获取卡组统计
   */
  getDeckStats() {
    const cards = this.plugin.flashcardManager.getAllFlashcards();
    const deckMap = /* @__PURE__ */ new Map();
    cards.forEach((card) => {
      if (!deckMap.has(card.deck)) {
        deckMap.set(card.deck, []);
      }
      deckMap.get(card.deck).push(card);
    });
    const stats = [];
    const now = Date.now();
    deckMap.forEach((deckCards, deckName) => {
      const dueCards = deckCards.filter((c) => c.scheduling.due <= now).length;
      const newCards = deckCards.filter((c) => c.scheduling.state === "new").length;
      const totalCorrect = deckCards.reduce(
        (sum, c) => sum + c.stats.correctCount,
        0
      );
      const totalReviews = deckCards.reduce(
        (sum, c) => sum + c.stats.totalReviews,
        0
      );
      const correctRate = totalReviews > 0 ? totalCorrect / totalReviews : 0;
      const totalInterval = deckCards.reduce(
        (sum, c) => sum + c.scheduling.interval,
        0
      );
      const averageInterval = deckCards.length > 0 ? totalInterval / deckCards.length : 0;
      stats.push({
        deckName,
        totalCards: deckCards.length,
        dueCards,
        newCards,
        correctRate,
        averageInterval
      });
    });
    return stats.sort((a, b) => b.totalCards - a.totalCards);
  }
  /**
   * 获取难点卡片
   */
  getDifficultCards(limit = 10) {
    const cards = this.plugin.flashcardManager.getAllFlashcards();
    const logs = this.plugin.flashcardManager["reviewLogs"] || [];
    const difficultCards = [];
    cards.forEach((card) => {
      const cardLogs = logs.filter((log) => log.flashcardId === card.id);
      const errorCount = cardLogs.filter(
        (log) => log.response.ease === "again"
      ).length;
      if (errorCount === 0 && card.stats.difficulty < 0.7)
        return;
      const errorLogs = cardLogs.filter((log) => log.response.ease === "again");
      const lastError = errorLogs.length > 0 ? errorLogs[errorLogs.length - 1].timestamp : 0;
      const pattern = this.detectErrorPattern(card, cardLogs);
      difficultCards.push({
        card,
        errorCount,
        lastError,
        averageTime: card.stats.averageTime,
        pattern
      });
    });
    return difficultCards.sort((a, b) => {
      if (a.errorCount !== b.errorCount) {
        return b.errorCount - a.errorCount;
      }
      if (a.card.stats.difficulty !== b.card.stats.difficulty) {
        return b.card.stats.difficulty - a.card.stats.difficulty;
      }
      return b.lastError - a.lastError;
    }).slice(0, limit);
  }
  detectErrorPattern(card, logs) {
    if (logs.length < 3)
      return "unknown";
    if (card.stats.averageTime > 60) {
      return "calculation";
    }
    if (card.scheduling.interval < 3 && card.scheduling.lapses > 2) {
      return "memory";
    }
    const recentLogs = logs.slice(-5);
    const recentFailures = recentLogs.filter(
      (log) => log.response.ease === "again"
    ).length;
    if (recentFailures >= 3) {
      return "concept";
    }
    return "unknown";
  }
  /**
   * 获取标签统计
   */
  getTagStats() {
    const cards = this.plugin.flashcardManager.getAllFlashcards();
    const tagMap = /* @__PURE__ */ new Map();
    cards.forEach((card) => {
      card.tags.forEach((tag) => {
        if (!tagMap.has(tag)) {
          tagMap.set(tag, { total: 0, correct: 0, reviews: 0 });
        }
        const stat = tagMap.get(tag);
        stat.total++;
        stat.correct += card.stats.correctCount;
        stat.reviews += card.stats.totalReviews;
      });
    });
    const stats = Array.from(tagMap.entries()).map(([tag, data]) => ({
      tag,
      count: data.total,
      correctRate: data.reviews > 0 ? data.correct / data.reviews : 0
    }));
    return stats.sort((a, b) => b.count - a.count);
  }
  /**
   * 生成学习报告
   */
  generateReport(days = 7) {
    const dailyStats = this.getDailyStats(days);
    const { thisWeek, lastWeek } = this.getWeeklyStats();
    const difficultCards = this.getDifficultCards(5);
    const deckStats = this.getDeckStats();
    const totalReviewed = dailyStats.reduce((sum, s) => sum + s.reviewed, 0);
    const totalCorrect = dailyStats.reduce((sum, s) => sum + s.correctCount, 0);
    const averageCorrectRate = totalReviewed > 0 ? totalCorrect / totalReviewed : 0;
    const totalTime = dailyStats.reduce((sum, s) => sum + s.timeSpent, 0);
    const recentDays = dailyStats.slice(-7);
    const olderDays = dailyStats.slice(-14, -7);
    const recentRate = this.calculateAverageRate(recentDays);
    const olderRate = this.calculateAverageRate(olderDays);
    const trend = recentRate > olderRate ? "\u{1F4C8} improving" : recentRate < olderRate ? "\u{1F4C9} declining" : "\u27A1\uFE0F stable";
    let report = `# \u{1F4CA} Learning Report

`;
    report += `**Period:** Last ${days} days
`;
    report += `**Generated:** ${new Date().toLocaleString()}

`;
    report += `## \u{1F3AF} Overall Performance

`;
    report += `- **Cards Reviewed:** ${totalReviewed}
`;
    report += `- **Correct Rate:** ${(averageCorrectRate * 100).toFixed(1)}%
`;
    report += `- **Study Time:** ${this.formatTime(totalTime)}
`;
    report += `- **Current Streak:** ${thisWeek.streak} days \u{1F525}
`;
    report += `- **Trend:** ${trend}

`;
    report += `## \u{1F4C8} Week Comparison

`;
    report += `### This Week
`;
    report += `- Reviews: ${thisWeek.totalReviews}
`;
    report += `- Correct Rate: ${(thisWeek.averageCorrectRate * 100).toFixed(1)}%
`;
    report += `- Time: ${this.formatTime(thisWeek.totalTimeSpent)}

`;
    report += `### Last Week
`;
    report += `- Reviews: ${lastWeek.totalReviews}
`;
    report += `- Correct Rate: ${(lastWeek.averageCorrectRate * 100).toFixed(1)}%
`;
    report += `- Time: ${this.formatTime(lastWeek.totalTimeSpent)}

`;
    const reviewChange = thisWeek.totalReviews - lastWeek.totalReviews;
    const rateChange = (thisWeek.averageCorrectRate - lastWeek.averageCorrectRate) * 100;
    if (reviewChange > 0) {
      report += `\u{1F4AA} You reviewed **${reviewChange} more cards** this week!
`;
    }
    if (rateChange > 5) {
      report += `\u{1F389} Your accuracy improved by **${rateChange.toFixed(1)}%**!
`;
    }
    report += `
`;
    if (difficultCards.length > 0) {
      report += `## \u26A0\uFE0F Cards Needing Attention

`;
      difficultCards.forEach((dc, i) => {
        const patternEmoji = {
          "concept": "\u{1F9E0}",
          "memory": "\u{1F4AD}",
          "calculation": "\u{1F522}",
          "unknown": "\u2753"
        };
        report += `${i + 1}. **${dc.card.front.substring(0, 50)}${dc.card.front.length > 50 ? "..." : ""}**
`;
        report += `   - Errors: ${dc.errorCount} | Pattern: ${patternEmoji[dc.pattern]} ${dc.pattern}
`;
        report += `   - Avg Time: ${dc.averageTime.toFixed(1)}s | Difficulty: ${(dc.card.stats.difficulty * 100).toFixed(0)}%

`;
      });
    }
    report += `## \u{1F4DA} Deck Overview

`;
    deckStats.forEach((deck) => {
      report += `### ${deck.deckName}
`;
      report += `- Total: ${deck.totalCards} | Due: ${deck.dueCards} | New: ${deck.newCards}
`;
      report += `- Correct Rate: ${(deck.correctRate * 100).toFixed(1)}%
`;
      report += `- Avg Interval: ${deck.averageInterval.toFixed(1)} days

`;
    });
    report += `## \u{1F4A1} Recommendations

`;
    if (averageCorrectRate < 0.7) {
      report += `- \u26A1 Your correct rate is below 70%. Consider reviewing difficult cards more frequently.
`;
    }
    if (difficultCards.length > 5) {
      report += `- \u{1F4D6} You have many difficult cards. Try breaking complex concepts into smaller flashcards.
`;
    }
    if (thisWeek.streak > 7) {
      report += `- \u{1F389} Amazing streak! Keep up the consistency!
`;
    }
    if (totalTime / totalReviewed > 30) {
      report += `- \u23F1\uFE0F Average review time is high. Consider simplifying card content.
`;
    }
    if (deckStats.some((d) => d.dueCards > d.totalCards * 0.5)) {
      report += `- \u{1F4C5} Some decks have many overdue cards. Focus on catching up with these.
`;
    }
    return report;
  }
  calculateAverageRate(stats) {
    const total = stats.reduce((sum, s) => sum + s.reviewed, 0);
    const correct = stats.reduce((sum, s) => sum + s.correctCount, 0);
    return total > 0 ? correct / total : 0;
  }
  formatTime(seconds) {
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor(seconds % 3600 / 60);
    if (hours > 0) {
      return `${hours}h ${minutes}m`;
    }
    return `${minutes}m`;
  }
  /**
   * 获取热力图数据（用于日历视图）
   */
  getHeatmapData(days = 90) {
    const dailyStats = this.getDailyStats(days);
    const maxReviews = Math.max(...dailyStats.map((s) => s.reviewed));
    return dailyStats.map((stat) => ({
      date: stat.date,
      count: stat.reviewed,
      intensity: maxReviews > 0 ? stat.reviewed / maxReviews : 0
    }));
  }
};

// src/ui/StatsView.ts
var VIEW_TYPE_STATS = "learning-system-stats";
var StatsView = class extends import_obsidian7.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.currentTab = "overview";
    this.plugin = plugin;
    this.analytics = new AnalyticsEngine(plugin);
  }
  getViewType() {
    return VIEW_TYPE_STATS;
  }
  getDisplayText() {
    return "Learning Statistics";
  }
  getIcon() {
    return "bar-chart";
  }
  async onOpen() {
    this.render();
    this.addStyles();
  }
  async onClose() {
  }
  render() {
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("stats-container");
    const header = container.createDiv({ cls: "stats-header" });
    header.createEl("h2", { text: "\u{1F4CA} Learning Statistics" });
    const refreshBtn = header.createEl("button", {
      text: "\u27F3",
      cls: "refresh-btn"
    });
    refreshBtn.addEventListener("click", () => this.render());
    this.renderTabs(container);
    const content = container.createDiv({ cls: "stats-content" });
    switch (this.currentTab) {
      case "overview":
        this.renderOverview(content);
        break;
      case "trends":
        this.renderTrends(content);
        break;
      case "decks":
        this.renderDecks(content);
        break;
      case "difficult":
        this.renderDifficult(content);
        break;
    }
  }
  renderTabs(container) {
    const tabs = container.createDiv({ cls: "stats-tabs" });
    const tabConfigs = [
      { id: "overview", label: "\u{1F4CA} Overview" },
      { id: "trends", label: "\u{1F4C8} Trends" },
      { id: "decks", label: "\u{1F4DA} Decks" },
      { id: "difficult", label: "\u26A0\uFE0F Difficult" }
    ];
    tabConfigs.forEach((config) => {
      const tab = tabs.createDiv({
        cls: `tab ${this.currentTab === config.id ? "active" : ""}`
      });
      tab.textContent = config.label;
      tab.addEventListener("click", () => {
        this.currentTab = config.id;
        this.render();
      });
    });
  }
  renderOverview(container) {
    const stats = this.plugin.flashcardManager.getStats();
    const { thisWeek, lastWeek } = this.analytics.getWeeklyStats();
    const dailyStats = this.analytics.getDailyStats(7);
    const metricsGrid = container.createDiv({ cls: "metrics-grid" });
    this.createMetricCard(metricsGrid, {
      title: "Total Cards",
      value: stats.total.toString(),
      icon: "\u{1F0CF}"
    });
    this.createMetricCard(metricsGrid, {
      title: "Due Today",
      value: stats.due.toString(),
      icon: "\u{1F4C5}"
    });
    this.createMetricCard(metricsGrid, {
      title: "Reviewed Today",
      value: stats.reviewedToday.toString(),
      icon: "\u2705"
    });
    const streak = this.analytics.calculateStreak();
    this.createMetricCard(metricsGrid, {
      title: "Current Streak",
      value: `${streak} days`,
      icon: "\u{1F525}"
    });
    const weekComparison = container.createDiv({ cls: "week-comparison" });
    weekComparison.createEl("h3", { text: "This Week vs Last Week" });
    const comparisonGrid = weekComparison.createDiv({ cls: "comparison-grid" });
    const reviewChange = thisWeek.totalReviews - lastWeek.totalReviews;
    const reviewChangePercent = lastWeek.totalReviews > 0 ? (reviewChange / lastWeek.totalReviews * 100).toFixed(1) : "0";
    this.createComparisonItem(comparisonGrid, {
      label: "Reviews",
      thisWeek: thisWeek.totalReviews,
      lastWeek: lastWeek.totalReviews,
      change: reviewChange,
      changePercent: reviewChangePercent
    });
    const rateChange = (thisWeek.averageCorrectRate - lastWeek.averageCorrectRate) * 100;
    this.createComparisonItem(comparisonGrid, {
      label: "Correct Rate",
      thisWeek: `${(thisWeek.averageCorrectRate * 100).toFixed(1)}%`,
      lastWeek: `${(lastWeek.averageCorrectRate * 100).toFixed(1)}%`,
      change: rateChange,
      changePercent: rateChange.toFixed(1)
    });
    const recentActivity = container.createDiv({ cls: "recent-activity" });
    recentActivity.createEl("h3", { text: "Last 7 Days Activity" });
    const activityChart = recentActivity.createDiv({ cls: "activity-chart" });
    this.renderSimpleBarChart(activityChart, dailyStats);
    const reportSection = container.createDiv({ cls: "report-section" });
    const reportBtn = reportSection.createEl("button", {
      text: "\u{1F4C4} Generate Full Report",
      cls: "mod-cta"
    });
  }
  renderTrends(container) {
    container.createEl("h3", { text: "Performance Trends" });
    const dailyStats = this.analytics.getDailyStats(30);
    const correctRateSection = container.createDiv({ cls: "chart-section" });
    correctRateSection.createEl("h4", { text: "Correct Rate (Last 30 Days)" });
    const correctRateChart = correctRateSection.createDiv({ cls: "line-chart" });
    this.renderLineChart(correctRateChart, dailyStats, "correctRate");
    const reviewsSection = container.createDiv({ cls: "chart-section" });
    reviewsSection.createEl("h4", { text: "Daily Reviews" });
    const reviewsChart = reviewsSection.createDiv({ cls: "bar-chart" });
    this.renderBarChart(reviewsChart, dailyStats);
    const heatmapSection = container.createDiv({ cls: "chart-section" });
    heatmapSection.createEl("h4", { text: "Study Activity Calendar" });
    const heatmap = heatmapSection.createDiv({ cls: "heatmap" });
    this.renderHeatmap(heatmap);
  }
  renderDecks(container) {
    container.createEl("h3", { text: "Deck Statistics" });
    const deckStats = this.analytics.getDeckStats();
    if (deckStats.length === 0) {
      container.createDiv({
        text: "No decks yet. Create some flashcards to see deck statistics!",
        cls: "empty-message"
      });
      return;
    }
    const decksGrid = container.createDiv({ cls: "decks-grid" });
    deckStats.forEach((deck) => {
      const deckCard = decksGrid.createDiv({ cls: "deck-card" });
      const header = deckCard.createDiv({ cls: "deck-card-header" });
      header.createEl("h4", { text: deck.deckName });
      header.createSpan({
        text: `${deck.totalCards} cards`,
        cls: "deck-badge"
      });
      const stats = deckCard.createDiv({ cls: "deck-card-stats" });
      this.createStatRow(stats, "Due", deck.dueCards.toString(), "\u{1F4C5}");
      this.createStatRow(stats, "New", deck.newCards.toString(), "\u{1F195}");
      this.createStatRow(
        stats,
        "Correct Rate",
        `${(deck.correctRate * 100).toFixed(1)}%`,
        "\u2705"
      );
      this.createStatRow(
        stats,
        "Avg Interval",
        `${deck.averageInterval.toFixed(1)} days`,
        "\u{1F4CA}"
      );
      const progress = deckCard.createDiv({ cls: "deck-progress" });
      const masteredCount = deck.totalCards - deck.dueCards - deck.newCards;
      const masteredPercent = masteredCount / deck.totalCards * 100;
      const progressBar = progress.createDiv({ cls: "progress-bar-container" });
      const bar = progressBar.createDiv({ cls: "progress-bar-fill" });
      bar.style.width = `${masteredPercent}%`;
      progress.createDiv({
        text: `${masteredPercent.toFixed(0)}% mastered`,
        cls: "progress-label"
      });
    });
  }
  renderDifficult(container) {
    container.createEl("h3", { text: "Cards Needing Attention" });
    const difficultCards = this.analytics.getDifficultCards(10);
    if (difficultCards.length === 0) {
      container.createDiv({
        text: "\u{1F389} No difficult cards! Great job!",
        cls: "empty-message"
      });
      return;
    }
    const cardsList = container.createDiv({ cls: "difficult-cards-list" });
    difficultCards.forEach((dc, index) => {
      const cardItem = cardsList.createDiv({ cls: "difficult-card-item" });
      const rank = cardItem.createDiv({ cls: "card-rank" });
      rank.textContent = `${index + 1}`;
      const content = cardItem.createDiv({ cls: "card-content" });
      const question = content.createDiv({ cls: "card-question" });
      question.textContent = dc.card.front.substring(0, 80) + (dc.card.front.length > 80 ? "..." : "");
      const meta = content.createDiv({ cls: "card-meta" });
      const patternEmoji = {
        "concept": "\u{1F9E0}",
        "memory": "\u{1F4AD}",
        "calculation": "\u{1F522}",
        "unknown": "\u2753"
      };
      meta.createSpan({
        text: `${patternEmoji[dc.pattern]} ${dc.pattern}`,
        cls: "pattern-badge"
      });
      meta.createSpan({
        text: `${dc.errorCount} errors`,
        cls: "error-count"
      });
      meta.createSpan({
        text: `${dc.averageTime.toFixed(1)}s avg`,
        cls: "avg-time"
      });
      const difficultyBar = content.createDiv({ cls: "difficulty-bar-container" });
      const diffBar = difficultyBar.createDiv({ cls: "difficulty-bar" });
      diffBar.style.width = `${dc.card.stats.difficulty * 100}%`;
      const actions = cardItem.createDiv({ cls: "card-actions" });
      const jumpBtn = actions.createEl("button", {
        text: "\u2197",
        cls: "action-btn-small"
      });
      jumpBtn.addEventListener("click", () => this.jumpToCard(dc.card));
      const reviewBtn = actions.createEl("button", {
        text: "\u{1F504}",
        cls: "action-btn-small"
      });
      reviewBtn.addEventListener("click", () => {
        this.plugin.activateReview();
      });
      const deleteBtn = actions.createEl("button", {
        text: "\u{1F5D1}\uFE0F",
        cls: "action-btn-small delete-btn"
      });
      deleteBtn.addEventListener("click", async () => {
        if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u5F20\u95EA\u5361\u5417\uFF1F")) {
          await this.deleteFlashcard(dc.card.id);
        }
      });
    });
  }
  createMetricCard(container, config) {
    const card = container.createDiv({ cls: "metric-card" });
    card.createDiv({ text: config.icon, cls: "metric-icon" });
    const content = card.createDiv({ cls: "metric-content" });
    content.createDiv({ text: config.title, cls: "metric-title" });
    content.createDiv({ text: config.value, cls: "metric-value" });
  }
  createComparisonItem(container, config) {
    const item = container.createDiv({ cls: "comparison-item" });
    item.createDiv({ text: config.label, cls: "comparison-label" });
    const values = item.createDiv({ cls: "comparison-values" });
    values.createSpan({
      text: `${config.thisWeek}`,
      cls: "this-week"
    });
    values.createSpan({ text: " vs ", cls: "vs" });
    values.createSpan({
      text: `${config.lastWeek}`,
      cls: "last-week"
    });
    const changeClass = config.change > 0 ? "positive" : config.change < 0 ? "negative" : "neutral";
    const changeIcon = config.change > 0 ? "\u2197" : config.change < 0 ? "\u2198" : "\u2192";
    item.createDiv({
      text: `${changeIcon} ${config.changePercent}%`,
      cls: `change ${changeClass}`
    });
  }
  createStatRow(container, label, value, icon) {
    const row = container.createDiv({ cls: "stat-row" });
    row.createSpan({ text: icon, cls: "stat-icon" });
    row.createSpan({ text: label, cls: "stat-label" });
    row.createSpan({ text: value, cls: "stat-value" });
  }
  renderSimpleBarChart(container, data) {
    const maxValue = Math.max(...data.map((d) => d.reviewed));
    data.forEach((stat) => {
      const bar = container.createDiv({ cls: "simple-bar" });
      const date = new Date(stat.date);
      const dayName = date.toLocaleDateString("en-US", { weekday: "short" });
      bar.createDiv({ text: dayName, cls: "bar-label" });
      const barContainer = bar.createDiv({ cls: "bar-container" });
      const barFill = barContainer.createDiv({ cls: "bar-fill" });
      const height = maxValue > 0 ? stat.reviewed / maxValue * 100 : 0;
      barFill.style.height = `${height}%`;
      bar.createDiv({ text: stat.reviewed.toString(), cls: "bar-value" });
    });
  }
  renderBarChart(container, data) {
    const chart = container.createDiv({ cls: "chart-canvas" });
    const maxValue = Math.max(...data.map((d) => d.reviewed));
    data.forEach((stat) => {
      const barGroup = chart.createDiv({ cls: "bar-group" });
      const barContainer = barGroup.createDiv({ cls: "bar" });
      const height = maxValue > 0 ? stat.reviewed / maxValue * 100 : 0;
      barContainer.style.height = `${height}%`;
      barContainer.title = `${stat.reviewed} reviews`;
      const barLabel = barGroup.createDiv({ cls: "bar-label" });
      const date = new Date(stat.date);
      barLabel.textContent = date.getDate().toString();
    });
  }
  renderLineChart(container, data, key) {
    const chart = container.createDiv({ cls: "line-chart-canvas" });
    const points = data.map((stat, i) => {
      const x = i / (data.length - 1) * 100;
      const y = 100 - stat[key] * 100;
      return { x, y, value: stat[key] };
    });
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("viewBox", "0 0 100 100");
    svg.setAttribute("preserveAspectRatio", "none");
    svg.style.width = "100%";
    svg.style.height = "200px";
    const pathData = points.map(
      (p, i) => `${i === 0 ? "M" : "L"} ${p.x} ${p.y}`
    ).join(" ");
    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
    path.setAttribute("d", pathData);
    path.setAttribute("fill", "none");
    path.setAttribute("stroke", "var(--interactive-accent)");
    path.setAttribute("stroke-width", "2");
    svg.appendChild(path);
    chart.appendChild(svg);
    const labelsContainer = container.createDiv({ cls: "chart-labels" });
    data.forEach((stat, i) => {
      if (i % Math.ceil(data.length / 7) === 0) {
        const chartLabel = labelsContainer.createDiv({ cls: "chart-label" });
        const date = new Date(stat.date);
        chartLabel.textContent = `${date.getMonth() + 1}/${date.getDate()}`;
      }
    });
  }
  renderHeatmap(container) {
    const heatmapData = this.analytics.getHeatmapData(90);
    const weeks = [];
    let currentWeek = [];
    heatmapData.forEach((day, i) => {
      currentWeek.push(day);
      if (currentWeek.length === 7 || i === heatmapData.length - 1) {
        weeks.push(currentWeek);
        currentWeek = [];
      }
    });
    weeks.forEach((week) => {
      const weekRow = container.createDiv({ cls: "heatmap-week" });
      week.forEach((day) => {
        const cell = weekRow.createDiv({ cls: "heatmap-cell" });
        const level = Math.ceil(day.intensity * 4);
        cell.addClass(`level-${level}`);
        cell.title = `${day.date}: ${day.count} reviews`;
      });
    });
  }
  async jumpToCard(card) {
    const file = this.app.vault.getAbstractFileByPath(card.sourceFile);
    if (!(file instanceof import_obsidian7.TFile))
      return;
    const contentUnit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
    if (!contentUnit)
      return;
    const leaf = this.app.workspace.getLeaf(false);
    await leaf.openFile(file);
    setTimeout(() => {
      const view = this.app.workspace.getActiveViewOfType(import_obsidian7.ItemView);
      if (view) {
        const editor = view.editor;
        if (editor) {
          editor.setCursor({ line: contentUnit.source.position.line, ch: 0 });
          editor.scrollIntoView({
            from: { line: contentUnit.source.position.line, ch: 0 },
            to: { line: contentUnit.source.position.line, ch: 0 }
          }, true);
        }
      }
    }, 100);
  }
  async deleteFlashcard(cardId) {
    try {
      await this.plugin.flashcardManager.deleteCard(cardId);
      new import_obsidian7.Notice("\u{1F5D1}\uFE0F \u95EA\u5361\u5DF2\u5220\u9664");
      this.render();
    } catch (error) {
      console.error("Error deleting flashcard:", error);
      new import_obsidian7.Notice("\u274C \u5220\u9664\u95EA\u5361\u5931\u8D25");
    }
  }
  addStyles() {
    const styleEl = document.createElement("style");
    styleEl.textContent = `
      .stats-container {
        padding: 20px;
        overflow-y: auto;
      }

      .stats-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .stats-header h2 {
        margin: 0;
      }

      .stats-tabs {
        display: flex;
        gap: 8px;
        margin-bottom: 20px;
        border-bottom: 2px solid var(--background-modifier-border);
      }

      .tab {
        padding: 10px 20px;
        cursor: pointer;
        border-bottom: 3px solid transparent;
        transition: all 0.2s;
        user-select: none;
      }

      .tab:hover {
        background: var(--background-modifier-hover);
      }

      .tab.active {
        border-bottom-color: var(--interactive-accent);
        color: var(--interactive-accent);
        font-weight: 600;
      }

      .metrics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 30px;
      }

      .metric-card {
        padding: 20px;
        background: var(--background-secondary);
        border-radius: 8px;
        display: flex;
        gap: 15px;
        align-items: center;
      }

      .metric-icon {
        font-size: 32px;
      }

      .metric-content {
        flex: 1;
      }

      .metric-title {
        font-size: 0.9em;
        color: var(--text-muted);
        margin-bottom: 5px;
      }

      .metric-value {
        font-size: 1.8em;
        font-weight: 600;
      }

      .week-comparison {
        margin-bottom: 30px;
      }

      .comparison-grid {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-top: 15px;
      }

      .comparison-item {
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .comparison-label {
        font-weight: 500;
      }

      .comparison-values {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .this-week {
        font-weight: 600;
        font-size: 1.1em;
      }

      .last-week {
        color: var(--text-muted);
      }

      .change {
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 0.9em;
        font-weight: 500;
      }

      .change.positive {
        background: var(--background-modifier-success);
        color: var(--text-on-accent);
      }

      .change.negative {
        background: var(--background-modifier-error);
        color: white;
      }

      .chart-section {
        margin-bottom: 30px;
      }

      .recent-activity .activity-chart {
        display: flex;
        justify-content: space-around;
        align-items: flex-end;
        height: 150px;
        padding: 20px;
        background: var(--background-secondary);
        border-radius: 8px;
      }

      .simple-bar {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        flex: 1;
      }

      .simple-bar .bar-container {
        width: 100%;
        height: 100px;
        display: flex;
        align-items: flex-end;
        justify-content: center;
      }

      .simple-bar .bar-fill {
        width: 60%;
        background: var(--interactive-accent);
        border-radius: 4px 4px 0 0;
        transition: height 0.3s;
      }

      .bar-label, .bar-value {
        font-size: 0.85em;
        color: var(--text-muted);
      }

      .heatmap {
        display: flex;
        flex-direction: column;
        gap: 4px;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 8px;
      }

      .heatmap-week {
        display: flex;
        gap: 4px;
      }

      .heatmap-cell {
        width: 12px;
        height: 12px;
        background: var(--background-primary);
        border-radius: 2px;
        cursor: pointer;
      }

      .heatmap-cell.level-1 { background: rgba(94, 156, 235, 0.3); }
      .heatmap-cell.level-2 { background: rgba(94, 156, 235, 0.5); }
      .heatmap-cell.level-3 { background: rgba(94, 156, 235, 0.7); }
      .heatmap-cell.level-4 { background: rgba(94, 156, 235, 1); }

      .decks-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 15px;
      }

      .deck-card {
        padding: 20px;
        background: var(--background-secondary);
        border-radius: 8px;
        border: 1px solid var(--background-modifier-border);
      }

      .deck-card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--background-modifier-border);
      }

      .deck-card-header h4 {
        margin: 0;
      }

      .deck-badge {
        padding: 4px 10px;
        background: var(--interactive-accent);
        color: white;
        border-radius: 12px;
        font-size: 0.85em;
      }

      .deck-card-stats {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-bottom: 15px;
      }

      .stat-row {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .stat-icon {
        width: 20px;
      }

      .stat-label {
        flex: 1;
        color: var(--text-muted);
      }

      .stat-value {
        font-weight: 500;
      }

      .deck-progress {
        margin-top: 15px;
      }

      .progress-bar-container {
        height: 8px;
        background: var(--background-primary);
        border-radius: 4px;
        overflow: hidden;
        margin-bottom: 5px;
      }

      .progress-bar-fill {
        height: 100%;
        background: var(--interactive-accent);
        transition: width 0.3s;
      }

      .progress-label {
        font-size: 0.85em;
        color: var(--text-muted);
      }

      .difficult-cards-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .difficult-card-item {
        display: flex;
        gap: 15px;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 8px;
        border: 1px solid var(--background-modifier-border);
      }

      .card-rank {
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--interactive-accent);
        color: white;
        border-radius: 50%;
        font-weight: 600;
        flex-shrink: 0;
      }

      .card-content {
        flex: 1;
      }

      .card-question {
        font-weight: 500;
        margin-bottom: 8px;
      }

      .card-meta {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-bottom:8px;
      } 

.pattern-badge, .error-count, .avg-time {
    padding: 3px 10px;
    background: var(--background-primary);
    border-radius: 12px;
    font-size: 0.85em;
  }

  .difficulty-bar-container {
    height: 6px;
    background: var(--background-primary);
    border-radius: 3px;
    overflow: hidden;
  }

  .difficulty-bar {
    height: 100%;
    background: linear-gradient(to right, var(--color-green), var(--color-yellow), var(--color-red));
    transition: width 0.3s;
  }

  .card-actions {
    display: flex;
    gap: 8px;
  }

  .action-btn-small {
    padding: 6px 12px;
    border: 1px solid var(--background-modifier-border);
    border-radius: 4px;
    background: var(--background-primary);
    cursor: pointer;
    transition: all 0.2s;
  }

  .action-btn-small:hover {
    background: var(--interactive-accent);
    color: white;
    border-color: var(--interactive-accent);
  }

  .action-btn-small.delete-btn:hover {
    background: var(--color-red);
    border-color: var(--color-red);
    color: white;
  }

  .empty-message {
    text-align: center;
    padding: 40px;
    color: var(--text-muted);
    font-size: 1.1em;
  }

  .report-section {
    text-align: center;
    margin-top: 30px;
    padding: 20px;
  }

  .chart-canvas {
    display: flex;
    align-items: flex-end;
    justify-content: space-around;
    height: 200px;
    padding: 20px;
    background: var(--background-secondary);
    border-radius: 8px;
    margin-bottom: 10px;
  }

  .bar-group {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
    height: 100%;
  }

  .bar-group .bar {
    width: 80%;
    background: var(--interactive-accent);
    border-radius: 4px 4px 0 0;
    transition: height 0.3s;
    margin-top: auto;
  }

  .line-chart-canvas {
    background: var(--background-secondary);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 10px;
  }

  .chart-labels {
    display: flex;
    justify-content: space-around;
    padding: 10px 20px;
    background: var(--background-secondary);
    border-radius: 8px;
  }

  .chart-label {
    font-size: 0.85em;
    color: var(--text-muted);
  }
`;
    document.head.appendChild(styleEl);
  }
};

// src/core/DataManager.ts
var DataManager = class {
  constructor(app, plugin) {
    this.app = app;
    this.plugin = plugin;
    this.contentUnits = /* @__PURE__ */ new Map();
    this.fileIndex = /* @__PURE__ */ new Map();
    this.dataFolder = `${this.app.vault.configDir}/plugins/learning-system/data`;
  }
  async initialize() {
    await this.ensureDataFolder();
    await this.loadData();
  }
  async ensureDataFolder() {
    const adapter = this.app.vault.adapter;
    if (!await adapter.exists(this.dataFolder)) {
      await adapter.mkdir(this.dataFolder);
    }
    const subfolders = ["indexes", "config", "cache"];
    for (const folder of subfolders) {
      const path = `${this.dataFolder}/${folder}`;
      if (!await adapter.exists(path)) {
        await adapter.mkdir(path);
      }
    }
  }
  async loadData() {
    try {
      const contentPath = `${this.dataFolder}/content-units.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(contentPath)) {
        const data = await adapter.read(contentPath);
        const units = JSON.parse(data);
        for (const unit of units) {
          this.contentUnits.set(unit.id, unit);
          if (!this.fileIndex.has(unit.source.file)) {
            this.fileIndex.set(unit.source.file, []);
          }
          this.fileIndex.get(unit.source.file).push(unit.id);
        }
      }
    } catch (error) {
      console.error("Error loading data:", error);
    }
  }
  async saveContentUnit(unit) {
    this.contentUnits.set(unit.id, unit);
    if (!this.fileIndex.has(unit.source.file)) {
      this.fileIndex.set(unit.source.file, []);
    }
    if (!this.fileIndex.get(unit.source.file).includes(unit.id)) {
      this.fileIndex.get(unit.source.file).push(unit.id);
    }
    await this.persist();
  }
  async saveContentUnits(units) {
    for (const unit of units) {
      this.contentUnits.set(unit.id, unit);
      if (!this.fileIndex.has(unit.source.file)) {
        this.fileIndex.set(unit.source.file, []);
      }
      if (!this.fileIndex.get(unit.source.file).includes(unit.id)) {
        this.fileIndex.get(unit.source.file).push(unit.id);
      }
    }
    await this.persist();
  }
  getContentUnit(id) {
    return this.contentUnits.get(id);
  }
  getContentUnitsByFile(filePath) {
    const ids = this.fileIndex.get(filePath) || [];
    return ids.map((id) => this.contentUnits.get(id)).filter(Boolean);
  }
  getContentUnitsByType(type) {
    return Array.from(this.contentUnits.values()).filter((unit) => unit.type === type);
  }
  getAllContentUnits() {
    return Array.from(this.contentUnits.values());
  }
  async deleteContentUnit(id) {
    const unit = this.contentUnits.get(id);
    if (unit) {
      this.contentUnits.delete(id);
      const fileUnits = this.fileIndex.get(unit.source.file);
      if (fileUnits) {
        const index = fileUnits.indexOf(id);
        if (index > -1) {
          fileUnits.splice(index, 1);
        }
      }
      await this.persist();
    }
  }
  async persist() {
    try {
      const contentPath = `${this.dataFolder}/content-units.json`;
      const units = Array.from(this.contentUnits.values());
      const data = JSON.stringify(units, null, 2);
      await this.app.vault.adapter.write(contentPath, data);
      const indexPath = `${this.dataFolder}/indexes/file-index.json`;
      const indexData = JSON.stringify(
        Object.fromEntries(this.fileIndex),
        null,
        2
      );
      await this.app.vault.adapter.write(indexPath, indexData);
    } catch (error) {
      console.error("Error persisting data:", error);
    }
  }
};

// src/core/ExtractionEngine.ts
var import_obsidian8 = require("obsidian");
var ExtractionEngine = class {
  constructor(app, dataManager, flashcardManager) {
    this.app = app;
    this.dataManager = dataManager;
    this.flashcardManager = flashcardManager;
  }
  /**
   * 注册右键菜单
   */
  registerContextMenu(menu, editor, file) {
    const selection = editor.getSelection();
    if (!selection)
      return;
    menu.addItem((item) => {
      item.setTitle("\u{1F4DD} Extract as text only").setIcon("file-text").onClick(async () => {
        await this.extractSelectedText(editor, file, "text");
      });
    });
    menu.addItem((item) => {
      item.setTitle("\u2753 Extract as QA card").setIcon("help-circle").onClick(async () => {
        await this.extractSelectedText(editor, file, "QA");
      });
    });
    menu.addItem((item) => {
      item.setTitle("\u270F\uFE0F Extract as Cloze card").setIcon("highlighter").onClick(async () => {
        await this.extractSelectedText(editor, file, "cloze");
      });
    });
  }
  /**
   * 提取选中的文本
   */
  async extractSelectedText(editor, file, extractType) {
    const selection = editor.getSelection();
    if (!selection) {
      new import_obsidian8.Notice("No text selected");
      return;
    }
    const cursor = editor.getCursor("from");
    const content = await this.app.vault.read(file);
    const offset = this.getOffsetFromCursor(content, cursor.line, cursor.ch);
    try {
      let unit;
      switch (extractType) {
        case "text":
          unit = this.createTextUnit(file, selection, offset, content);
          break;
        case "QA":
          unit = this.createQAUnit(file, selection, offset, content);
          break;
        case "cloze":
          unit = this.createClozeUnit(file, selection, offset, content);
          break;
      }
      await this.dataManager.saveContentUnits([unit]);
      if (extractType === "QA" || extractType === "cloze") {
        try {
          const cardType = extractType === "QA" ? "qa" : "cloze";
          const flashcard = await this.flashcardManager.createFlashcardFromUnit(unit, {
            cardType
          });
          await this.dataManager.saveContentUnits([unit]);
        } catch (error) {
          console.error("[extractSelectedText] \u521B\u5EFA\u95EA\u5361\u5931\u8D25:", error);
        }
      }
      const typeNames = {
        text: "text",
        QA: "QA card",
        cloze: "cloze card"
      };
      new import_obsidian8.Notice(`\u2705 Extracted as ${typeNames[extractType]}`);
      this.refreshAllViews();
    } catch (error) {
      console.error("Error extracting selection:", error);
      new import_obsidian8.Notice(`\u274C Error: ${error.message}`);
    }
  }
  /**
   * 创建纯文本单元
   */
  createTextUnit(file, selection, offset, fileContent) {
    const position = this.calculatePosition(fileContent, offset);
    return {
      id: this.generateId(),
      type: "text",
      content: selection.trim(),
      fullContext: selection.trim(),
      source: {
        file: file.path,
        position: {
          start: offset,
          end: offset + selection.length,
          line: position.line
        },
        heading: this.findHeading(fileContent, offset),
        anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
      },
      extractRule: {
        ruleId: "text-manual",
        ruleName: "Manual Text Extract",
        extractedBy: "manual"
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now(),
        tags: this.extractTags(fileContent, offset)
      },
      flashcardIds: []
    };
  }
  /**
   * 创建 QA 卡片单元
   */
  createQAUnit(file, selection, offset, fileContent) {
    const position = this.calculatePosition(fileContent, offset);
    let question, answer;
    if (selection.includes("::")) {
      const parts = selection.split("::");
      question = parts[0].trim();
      answer = parts.slice(1).join("::").trim();
    } else {
      question = selection.trim();
      answer = "[Answer needed]";
    }
    return {
      id: this.generateId(),
      type: "QA",
      content: question,
      answer,
      fullContext: selection.trim(),
      source: {
        file: file.path,
        position: {
          start: offset,
          end: offset + selection.length,
          line: position.line
        },
        heading: this.findHeading(fileContent, offset),
        anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
      },
      extractRule: {
        ruleId: "QA-manual",
        ruleName: "Manual QA Card",
        extractedBy: "manual"
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now(),
        tags: this.extractTags(fileContent, offset)
      },
      flashcardIds: []
    };
  }
  /**
   * 创建完形填空卡片单元
   */
  createClozeUnit(file, selection, offset, fileContent) {
    const position = this.calculatePosition(fileContent, offset);
    const fullSentence = this.extractFullSentence(fileContent, offset, selection.length);
    return {
      id: this.generateId(),
      type: "cloze",
      content: selection.trim(),
      fullContext: fullSentence,
      source: {
        file: file.path,
        position: {
          start: offset,
          end: offset + selection.length,
          line: position.line
        },
        heading: this.findHeading(fileContent, offset),
        anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
      },
      extractRule: {
        ruleId: "cloze-manual",
        ruleName: "Manual Cloze Card",
        extractedBy: "manual"
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now(),
        tags: this.extractTags(fileContent, offset)
      },
      flashcardIds: []
    };
  }
  /**
   * 从光标位置计算文件偏移量
   */
  getOffsetFromCursor(content, line, ch) {
    const lines = content.split("\n");
    let offset = 0;
    for (let i = 0; i < line; i++) {
      offset += lines[i].length + 1;
    }
    offset += ch;
    return offset;
  }
  /**
   * 扫描单个文件
   */
  async scanFile(file) {
    try {
      const content = await this.app.vault.read(file);
      const units = await this.extractContent(file, content);
      if (units.length > 0) {
        await this.dataManager.saveContentUnits(units);
        const qaCount = units.filter((u) => u.type === "QA").length;
        const clozeCount = units.filter((u) => u.type === "cloze").length;
        new import_obsidian8.Notice(`Extracted ${qaCount} QA cards and ${clozeCount} cloze cards from ${file.name}`);
        setTimeout(() => {
          this.refreshAllViews();
        }, 100);
      }
      return units.length;
    } catch (error) {
      console.error("[scanFile] \u9519\u8BEF:", error);
      new import_obsidian8.Notice(`Error scanning file: ${error.message}`);
      return 0;
    }
  }
  /**
   * 刷新所有相关视图
   */
  refreshAllViews() {
    this.app.workspace.iterateAllLeaves((leaf) => {
      const viewType = leaf.view.getViewType();
      if (viewType === "learning-system-sidebar-overview" || viewType === "learning-system-main-overview") {
        leaf.view.refresh();
      }
    });
  }
  /**
   * 扫描整个 Vault
   */
  async scanVault() {
    const files = this.app.vault.getMarkdownFiles();
    let scanned = 0;
    let extracted = 0;
    new import_obsidian8.Notice(`Scanning ${files.length} files...`);
    for (const file of files) {
      const count = await this.scanFile(file);
      scanned++;
      extracted += count;
    }
    new import_obsidian8.Notice(`Scan complete! Extracted ${extracted} items from ${scanned} files.`);
    return { scanned, extracted };
  }
  /**
   * 🔧 修改: 先保存 units，再创建闪卡
   */
  async extractContent(file, content) {
    const units = [];
    const qaUnits = this.extractQACards(file, content);
    units.push(...qaUnits);
    const clozeUnits = this.extractClozeCards(file, content);
    units.push(...clozeUnits);
    if (units.length > 0) {
      await this.dataManager.saveContentUnits(units);
    }
    for (const unit of units) {
      try {
        const cardType = unit.type === "QA" ? "qa" : "cloze";
        const flashcard = await this.flashcardManager.createFlashcardFromUnit(unit, {
          cardType
        });
      } catch (error) {
        console.error("[extractContent] \u521B\u5EFA\u95EA\u5361\u5931\u8D25:", error);
      }
    }
    return units;
  }
  /**
   * ✅ 检查是否为任务完成标记
   * 排除: [completion:: date], [due:: date] 等任务相关的 :: 格式
   */
  isTaskCompletion(line) {
    const taskPattern = /^[\s]*-\s*\[[x\s]\].*::/i;
    return taskPattern.test(line);
  }
  /**
   * ✅ 检查是否为日期/时间字段
   * 排除: date1:: 2021-02-26T15:15, date2:: 2021-04-17 18:00 等格式
   */
  isDateTimeField(question, answer) {
    const dateFieldPattern = /\b(date\d*|time\d*|created|updated|modified|scheduled|due|completion)\b/i;
    const dateTimePattern = /^\s*\d{4}-\d{2}-\d{2}(T|\s)\d{2}:\d{2}|\d{4}-\d{2}-\d{2}\s+\d{2}:\d{2}/;
    const dateOnlyPattern = /^\s*\d{4}-\d{2}-\d{2}\s*$/;
    return dateFieldPattern.test(question) && (dateTimePattern.test(answer) || dateOnlyPattern.test(answer));
  }
  /**
   * ✅ 检查是否为 Excalidraw 高亮
   * 排除: ==switch to excalidraw view...== 这类特定高亮
   */
  isExcalidrawHighlight(matchText, line) {
    const excalidrawKeywords = /excalidraw|drawing|sketch/i;
    return excalidrawKeywords.test(matchText) || excalidrawKeywords.test(line);
  }
  /**
   * ✅ 提取 QA 卡片 (格式: Question :: Answer)
   * 新增: 过滤任务完成标记和日期时间字段
   */
  extractQACards(file, content) {
    const units = [];
    const qaRegex = /^(.+?)\s*::\s*(.+?)$/gm;
    let match;
    while ((match = qaRegex.exec(content)) !== null) {
      const fullMatch = match[0];
      const question = match[1].trim();
      const answer = match[2].trim();
      if (this.isTaskCompletion(fullMatch)) {
        console.log("[extractQACards] \u8DF3\u8FC7\u4EFB\u52A1\u6807\u8BB0:", fullMatch);
        continue;
      }
      if (this.isDateTimeField(question, answer)) {
        console.log("[extractQACards] \u8DF3\u8FC7\u65E5\u671F\u65F6\u95F4\u5B57\u6BB5:", fullMatch);
        continue;
      }
      const position = this.calculatePosition(content, match.index);
      const unit = {
        id: this.generateId(),
        type: "QA",
        content: question,
        answer,
        fullContext: fullMatch,
        source: {
          file: file.path,
          position: {
            start: match.index,
            end: match.index + fullMatch.length,
            line: position.line
          },
          heading: this.findHeading(content, match.index),
          anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
        },
        extractRule: {
          ruleId: "QA",
          ruleName: "QA Card",
          extractedBy: "auto"
        },
        metadata: {
          createdAt: Date.now(),
          updatedAt: Date.now(),
          tags: this.extractTags(content, match.index)
        },
        flashcardIds: []
      };
      units.push(unit);
    }
    return units;
  }
  /**
   * ✅ 提取完形填空卡 (格式: ==highlight==)
   * 新增: 过滤 Excalidraw 高亮
   */
  extractClozeCards(file, content) {
    const units = [];
    const highlightRegex = /==(.+?)==/g;
    let match;
    while ((match = highlightRegex.exec(content)) !== null) {
      const extractedText = match[1];
      const fullMatch = match[0];
      const position = this.calculatePosition(content, match.index);
      const lineStart = content.lastIndexOf("\n", match.index) + 1;
      const lineEnd = content.indexOf("\n", match.index);
      const currentLine = content.substring(lineStart, lineEnd === -1 ? content.length : lineEnd);
      if (this.isExcalidrawHighlight(extractedText, currentLine)) {
        console.log("[extractClozeCards] \u8DF3\u8FC7 Excalidraw \u9AD8\u4EAE:", extractedText);
        continue;
      }
      const fullSentence = this.extractFullSentence(content, match.index, fullMatch.length);
      const unit = {
        id: this.generateId(),
        type: "cloze",
        content: extractedText.trim(),
        fullContext: fullSentence,
        source: {
          file: file.path,
          position: {
            start: match.index,
            end: match.index + fullMatch.length,
            line: position.line
          },
          heading: this.findHeading(content, match.index),
          anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
        },
        extractRule: {
          ruleId: "cloze",
          ruleName: "Cloze Deletion",
          extractedBy: "auto"
        },
        metadata: {
          createdAt: Date.now(),
          updatedAt: Date.now(),
          tags: this.extractTags(content, match.index)
        },
        flashcardIds: []
      };
      units.push(unit);
    }
    return units;
  }
  /**
   * 提取包含高亮的完整句子
   */
  extractFullSentence(content, highlightStart, highlightLength) {
    const sentenceEnds = /[.!?。！?\n]/;
    let start = highlightStart;
    while (start > 0) {
      const char = content[start - 1];
      if (sentenceEnds.test(char)) {
        break;
      }
      start--;
    }
    let end = highlightStart + highlightLength;
    while (end < content.length) {
      const char = content[end];
      if (sentenceEnds.test(char)) {
        end++;
        break;
      }
      end++;
    }
    return content.substring(start, end).trim();
  }
  /**
   * 计算文本位置
   */
  calculatePosition(content, offset) {
    const lines = content.substring(0, offset).split("\n");
    return {
      line: lines.length - 1,
      column: lines[lines.length - 1].length
    };
  }
  /**
   * 查找所在标题
   */
  findHeading(content, position) {
    const beforeContent = content.substring(0, position);
    const headings = beforeContent.match(/^#{1,6} .+$/gm);
    return headings ? headings[headings.length - 1] : void 0;
  }
  /**
   * 提取附近的标签
   */
  extractTags(content, position) {
    const tags = /* @__PURE__ */ new Set();
    const yamlMatch = content.match(/^---\n([\s\S]*?)\n---/);
    if (yamlMatch) {
      const yamlContent = yamlMatch[1];
      const tagsMatch = yamlContent.match(/^tags:\s*(.+)$/m);
      if (tagsMatch) {
        const tagContent = tagsMatch[1].trim();
        if (tagContent.startsWith("[")) {
          const arrayTags = tagContent.match(/[\w/-]+/g);
          arrayTags == null ? void 0 : arrayTags.forEach((tag) => tags.add(`#${tag}`));
        } else {
          tagContent.split(",").forEach((tag) => {
            const cleaned = tag.trim();
            if (cleaned)
              tags.add(`#${cleaned}`);
          });
        }
      }
    }
    const lines = content.substring(0, position).split("\n");
    const currentLine = lines.length - 1;
    const lineContent = content.split("\n")[currentLine] || "";
    const inlineTagRegex = /#[\w/-]+/g;
    const inlineTags = lineContent.match(inlineTagRegex);
    inlineTags == null ? void 0 : inlineTags.forEach((tag) => tags.add(tag));
    return Array.from(tags);
  }
  /**
   * 生成唯一 ID
   */
  generateId() {
    return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
  }
  /**
   * 生成 Block ID
   */
  generateBlockId() {
    return `extract-${Date.now()}-${Math.random().toString(36).substr(2, 6)}`;
  }
};

// src/core/AnnotationManager.ts
var AnnotationManager = class {
  constructor(app, plugin) {
    this.app = app;
    this.plugin = plugin;
    this.annotations = /* @__PURE__ */ new Map();
    this.dataFolder = `${this.app.vault.configDir}/plugins/learning-system/data`;
  }
  async initialize() {
    await this.loadAnnotations();
  }
  /**
   * 加载所有批注
   */
  async loadAnnotations() {
    try {
      const path = `${this.dataFolder}/annotations.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(path)) {
        const data = await adapter.read(path);
        const annotations = JSON.parse(data);
        for (const annotation of annotations) {
          this.annotations.set(annotation.id, annotation);
        }
      }
    } catch (error) {
      console.error("Error loading annotations:", error);
    }
  }
  /**
   * 添加内容批注
   */
  async addContentAnnotation(contentUnitId, content, badge) {
    const annotation = {
      id: this.generateId(),
      targetType: "content",
      targetId: contentUnitId,
      content,
      badge,
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.annotations.set(annotation.id, annotation);
    await this.persist();
    const contentUnit = this.plugin.dataManager.getContentUnit(contentUnitId);
    if (contentUnit) {
      contentUnit.annotationId = annotation.id;
      contentUnit.metadata.updatedAt = Date.now();
      await this.plugin.dataManager.saveContentUnit(contentUnit);
    }
    return annotation;
  }
  /**
   * 添加文件批注
   */
  async addFileAnnotation(filePath, content) {
    const annotation = {
      id: this.generateId(),
      targetType: "file",
      targetId: filePath,
      content,
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.annotations.set(annotation.id, annotation);
    await this.persist();
    return annotation;
  }
  /**
   * 获取批注
   */
  getAnnotation(id) {
    return this.annotations.get(id);
  }
  /**
   * 获取内容的批注
   */
  getContentAnnotation(contentUnitId) {
    const contentUnit = this.plugin.dataManager.getContentUnit(contentUnitId);
    if (!(contentUnit == null ? void 0 : contentUnit.annotationId))
      return void 0;
    return this.annotations.get(contentUnit.annotationId);
  }
  /**
   * 获取文件的所有批注
   */
  getFileAnnotations(filePath) {
    return Array.from(this.annotations.values()).filter(
      (ann) => ann.targetType === "file" && ann.targetId === filePath
    );
  }
  /**
   * 更新批注
   */
  async updateAnnotation(id, updates) {
    const annotation = this.annotations.get(id);
    if (!annotation)
      return;
    Object.assign(annotation, updates, {
      metadata: {
        ...annotation.metadata,
        updatedAt: Date.now()
      }
    });
    await this.persist();
  }
  /**
   * 删除批注
   */
  async deleteAnnotation(id) {
    const annotation = this.annotations.get(id);
    if (!annotation)
      return;
    if (annotation.targetType === "content") {
      const contentUnit = this.plugin.dataManager.getContentUnit(annotation.targetId);
      if (contentUnit) {
        contentUnit.annotationId = void 0;
        await this.plugin.dataManager.saveContentUnit(contentUnit);
      }
    }
    this.annotations.delete(id);
    await this.persist();
  }
  /**
   * 获取所有批注
   */
  getAllAnnotations() {
    return Array.from(this.annotations.values());
  }
  /**
   * 持久化
   */
  async persist() {
    try {
      const path = `${this.dataFolder}/annotations.json`;
      const annotations = Array.from(this.annotations.values());
      const data = JSON.stringify(annotations, null, 2);
      await this.app.vault.adapter.write(path, data);
    } catch (error) {
      console.error("Error persisting annotations:", error);
    }
  }
  /**
   * 生成唯一 ID
   */
  generateId() {
    return `ann-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
  }
};

// src/core/FlashcardManager.ts
var FlashcardManager = class {
  constructor(app, dataManager, plugin) {
    this.app = app;
    this.dataManager = dataManager;
    this.plugin = plugin;
    this.flashcards = /* @__PURE__ */ new Map();
    this.reviewLogs = [];
    this.dataFolder = `${this.app.vault.configDir}/plugins/learning-system/data`;
  }
  async initialize() {
    await this.loadFlashcards();
    await this.loadReviewLogs();
  }
  // ==================== 统一创建入口 ====================
  /**
   * 🆕 统一入口: 从 ContentUnit 创建闪卡
   * 适配所有场景: 右键提取、Scan、批量创建、快速生成
   */
  async createFlashcardFromUnit(unit, options) {
    const cardType = (options == null ? void 0 : options.cardType) || (unit.type === "QA" ? "qa" : "cloze");
    let flashcard;
    if (cardType === "qa" || unit.type === "QA") {
      const question = (options == null ? void 0 : options.customQuestion) || unit.content;
      const answer = (options == null ? void 0 : options.customAnswer) || unit.answer || unit.content;
      flashcard = await this.createQACard(unit.id, question, answer);
    } else {
      const text = unit.fullContext || unit.content;
      const answer = (options == null ? void 0 : options.customAnswer) || unit.content;
      const deletions = [{
        index: text.indexOf(answer),
        answer
      }];
      flashcard = await this.createClozeCard(unit.id, text, deletions);
    }
    return flashcard;
  }
  // ==================== 核心创建方法 ====================
  /**
   * 创建问答卡（唯一版本，合并了所有功能）
   */
  async createQACard(contentUnitId, question, answer, deck) {
    const contentUnit = this.dataManager.getContentUnit(contentUnitId);
    if (!contentUnit)
      throw new Error("Content unit not found");
    const card = {
      id: this.generateId(),
      type: "qa",
      sourceContentId: contentUnitId,
      sourceFile: contentUnit.source.file,
      anchorLink: contentUnit.source.anchorLink,
      front: question,
      back: answer,
      deck: deck || this.inferDeck(contentUnit.source.file),
      tags: contentUnit.metadata.tags,
      scheduling: this.initializeScheduling(),
      stats: {
        totalReviews: 0,
        correctCount: 0,
        averageTime: 0,
        difficulty: 0.5
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.flashcards.set(card.id, card);
    contentUnit.flashcardIds.push(card.id);
    await this.dataManager.saveContentUnits([contentUnit]);
    await this.persistFlashcards();
    return card;
  }
  /**
   * 创建完形填空卡（唯一版本，合并了所有功能）
   */
  async createClozeCard(contentUnitId, original, deletions) {
    const contentUnit = this.dataManager.getContentUnit(contentUnitId);
    if (!contentUnit)
      throw new Error("Content unit not found");
    const front = this.generateClozeText(original, deletions);
    const back = deletions.map((d) => d.answer);
    const card = {
      id: this.generateId(),
      type: "cloze",
      sourceContentId: contentUnitId,
      sourceFile: contentUnit.source.file,
      anchorLink: contentUnit.source.anchorLink,
      front,
      back,
      cloze: {
        original,
        deletions
      },
      deck: this.inferDeck(contentUnit.source.file),
      tags: contentUnit.metadata.tags,
      scheduling: this.initializeScheduling(),
      stats: {
        totalReviews: 0,
        correctCount: 0,
        averageTime: 0,
        difficulty: 0.5
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.flashcards.set(card.id, card);
    contentUnit.flashcardIds.push(card.id);
    await this.dataManager.saveContentUnits([contentUnit]);
    await this.persistFlashcards();
    return card;
  }
  // ==================== 查询方法 ====================
  /**
   * 获取闪卡
   */
  getFlashcard(id) {
    return this.flashcards.get(id);
  }
  /**
   * 获取所有闪卡
   */
  getAllFlashcards() {
    return Array.from(this.flashcards.values());
  }
  /**
   * 获取今日待复习的卡片
   */
  getDueCards() {
    const now = Date.now();
    return Array.from(this.flashcards.values()).filter((card) => card.scheduling.due <= now).sort((a, b) => {
      const aPriority = this.getCardPriority(a);
      const bPriority = this.getCardPriority(b);
      return bPriority - aPriority;
    });
  }
  /**
   * 获取新卡片
   */
  getNewCards() {
    return Array.from(this.flashcards.values()).filter((card) => card.scheduling.state === "new");
  }
  // ==================== 更新和删除 ====================
  /**
   * 更新卡片（复习后）
   */
  async updateCard(card) {
    this.flashcards.set(card.id, card);
    await this.persistFlashcards();
  }
  /**
   * 删除卡片
   */
  async deleteCard(id) {
    const card = this.flashcards.get(id);
    if (!card)
      return;
    const contentUnit = this.dataManager.getContentUnit(card.sourceContentId);
    if (contentUnit) {
      const index = contentUnit.flashcardIds.indexOf(id);
      if (index > -1) {
        contentUnit.flashcardIds.splice(index, 1);
        await this.dataManager.saveContentUnits([contentUnit]);
      }
    }
    this.flashcards.delete(id);
    await this.persistFlashcards();
  }
  // ==================== 复习日志 ====================
  /**
   * 记录复习日志
   */
  async logReview(log) {
    this.reviewLogs.push(log);
    if (this.reviewLogs.length > 1e3) {
      this.reviewLogs = this.reviewLogs.slice(-1e3);
    }
    await this.persistReviewLogs();
  }
  /**
   * 获取卡片的复习历史
   */
  getCardReviewHistory(cardId) {
    return this.reviewLogs.filter((log) => log.flashcardId === cardId);
  }
  // ==================== 统计 ====================
  /**
   * 获取统计数据
   */
  getStats() {
    const all = this.getAllFlashcards();
    const due = this.getDueCards();
    const newCards = this.getNewCards();
    const today = new Date().setHours(0, 0, 0, 0);
    const reviewedToday = this.reviewLogs.filter(
      (log) => log.timestamp >= today
    ).length;
    return {
      total: all.length,
      new: newCards.length,
      due: due.length,
      reviewedToday,
      totalReviews: this.reviewLogs.length
    };
  }
  // ==================== 私有工具方法 ====================
  /**
   * 加载闪卡
   */
  async loadFlashcards() {
    try {
      const path = `${this.dataFolder}/flashcards.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(path)) {
        const data = await adapter.read(path);
        const flashcards = JSON.parse(data);
        for (const card of flashcards) {
          this.flashcards.set(card.id, card);
        }
      }
    } catch (error) {
      console.error("Error loading flashcards:", error);
    }
  }
  /**
   * 加载复习日志
   */
  async loadReviewLogs() {
    try {
      const path = `${this.dataFolder}/review-logs.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(path)) {
        const data = await adapter.read(path);
        this.reviewLogs = JSON.parse(data);
      }
    } catch (error) {
      console.error("Error loading review logs:", error);
    }
  }
  /**
   * 初始化调度参数
   */
  initializeScheduling() {
    return {
      interval: 0,
      ease: 2.5,
      due: Date.now(),
      lapses: 0,
      reps: 0,
      state: "new"
    };
  }
  /**
   * 生成完形填空文本
   */
  generateClozeText(original, deletions) {
    let result = original;
    const sorted = [...deletions].sort((a, b) => b.index - a.index);
    for (const deletion of sorted) {
      const before = result.substring(0, deletion.index);
      const after = result.substring(deletion.index + deletion.answer.length);
      result = `${before}[...]${after}`;
    }
    return result;
  }
  /**
   * 推断卡组名称
   */
  inferDeck(filePath) {
    const parts = filePath.split("/");
    return parts.length > 1 ? parts[parts.length - 2] : "Default";
  }
  /**
   * 获取卡片优先级
   */
  getCardPriority(card) {
    const now = Date.now();
    const overdue = Math.max(0, now - card.scheduling.due);
    const daysOverdue = overdue / (24 * 60 * 60 * 1e3);
    if (card.scheduling.state === "new")
      return 100 + daysOverdue;
    if (card.scheduling.state === "relearning")
      return 200 + daysOverdue;
    return daysOverdue;
  }
  /**
   * 持久化闪卡
   */
  async persistFlashcards() {
    try {
      const path = `${this.dataFolder}/flashcards.json`;
      const flashcards = Array.from(this.flashcards.values());
      const data = JSON.stringify(flashcards, null, 2);
      await this.app.vault.adapter.write(path, data);
    } catch (error) {
      console.error("Error persisting flashcards:", error);
    }
  }
  /**
   * 持久化复习日志
   */
  async persistReviewLogs() {
    try {
      const path = `${this.dataFolder}/review-logs.json`;
      const data = JSON.stringify(this.reviewLogs, null, 2);
      await this.app.vault.adapter.write(path, data);
    } catch (error) {
      console.error("Error persisting review logs:", error);
    }
  }
  /**
   * 生成唯一 ID
   */
  generateId() {
    return `card-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  extractionEnabled: true,
  autoScan: false,
  defaultDeck: "Default"
};
var LearningSystemPlugin = class extends import_obsidian10.Plugin {
  async onload() {
    console.log("Loading Learning System Plugin");
    await this.loadSettings();
    this.dataManager = new DataManager(this.app, this);
    await this.dataManager.initialize();
    this.annotationManager = new AnnotationManager(this.app, this);
    await this.annotationManager.initialize();
    this.flashcardManager = new FlashcardManager(
      this.app,
      this.dataManager,
      this
    );
    await this.flashcardManager.initialize();
    this.extractionEngine = new ExtractionEngine(
      this.app,
      this.dataManager,
      this.flashcardManager
    );
    this.registerView(
      VIEW_TYPE_OVERVIEW,
      (leaf) => new OverviewView(leaf, this)
    );
    this.registerView(
      VIEW_TYPE_SIDEBAR_OVERVIEW,
      (leaf) => new SidebarOverviewView(leaf, this, false)
    );
    this.registerView(
      VIEW_TYPE_MAIN_OVERVIEW,
      (leaf) => new SidebarOverviewView(leaf, this, true)
    );
    this.registerView(
      VIEW_TYPE_REVIEW,
      (leaf) => new ReviewView(leaf, this)
    );
    this.registerView(
      VIEW_TYPE_STATS,
      (leaf) => new StatsView(leaf, this)
    );
    this.registerEvent(
      this.app.workspace.on("editor-menu", (menu, editor, view) => {
        if (view instanceof import_obsidian10.MarkdownView) {
          const file = view.file;
          if (file) {
            this.extractionEngine.registerContextMenu(menu, editor, file);
          }
        }
      })
    );
    this.addSettingTab(new SettingsTab(this.app, this));
    this.addCommands();
    this.addRibbonIcon("layout-list", "Open Learning Overview", () => {
      this.activateSidebarOverview();
    });
    this.addRibbonIcon("layers", "Start Review", () => {
      this.activateReview();
    });
    this.setupStatusBar();
    console.log("Learning System Plugin loaded");
  }
  onunload() {
    console.log("Unloading Learning System Plugin");
    const styleEl = document.getElementById("learning-overview-styles");
    if (styleEl) {
      styleEl.remove();
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  addCommands() {
    this.addCommand({
      id: "scan-current-file",
      name: "Scan current file for content",
      callback: async () => {
        const activeFile = this.app.workspace.getActiveFile();
        if (!activeFile)
          return;
        await this.extractionEngine.scanFile(activeFile);
        this.refreshOverview();
      }
    });
    this.addCommand({
      id: "scan-vault",
      name: "Scan entire vault",
      callback: async () => {
        await this.extractionEngine.scanVault();
        this.refreshOverview();
      }
    });
    this.addCommand({
      id: "open-overview",
      name: "Open Learning Overview",
      callback: () => {
        this.activateSidebarOverview();
      }
    });
    this.addCommand({
      id: "open-main-overview",
      name: "Open Learning Overview (Main View)",
      callback: async () => {
        await this.activateMainView();
      }
    });
    this.addCommand({
      id: "add-file-annotation",
      name: "Add file annotation",
      callback: async () => {
        const activeFile = this.app.workspace.getActiveFile();
        if (!activeFile)
          return;
        const { FileAnnotationModal: FileAnnotationModal2 } = await Promise.resolve().then(() => (init_AnnotationModal(), AnnotationModal_exports));
        const modal = new FileAnnotationModal2(
          this.app,
          this,
          activeFile.path,
          () => this.refreshOverview()
        );
        modal.open();
      }
    });
    this.addCommand({
      id: "start-review",
      name: "Start flashcard review",
      callback: () => {
        this.activateReview();
      }
    });
    this.addCommand({
      id: "show-stats",
      name: "Show flashcard statistics",
      callback: () => {
        this.activateStats();
      }
    });
  }
  async activateMainView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType(VIEW_TYPE_MAIN_OVERVIEW)[0];
    if (!leaf) {
      leaf = workspace.getLeaf("tab");
      await leaf.setViewState({
        type: VIEW_TYPE_MAIN_OVERVIEW,
        active: true
      });
    }
    workspace.revealLeaf(leaf);
  }
  async activateSidebarOverview() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_SIDEBAR_OVERVIEW);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getRightLeaf(false);
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_SIDEBAR_OVERVIEW,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async activateOverview() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_OVERVIEW);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getLeaf(`tab`);
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_OVERVIEW,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async activateReview() {
    const stats = this.flashcardManager.getStats();
    if (stats.due === 0) {
      new import_obsidian10.Notice("No cards due for review!");
      return;
    }
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_REVIEW);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getLeaf(true);
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_REVIEW,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async activateStats() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_STATS);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getLeaf("tab");
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_STATS,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  refreshOverview() {
    const overviewLeaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_OVERVIEW);
    overviewLeaves.forEach((leaf) => {
      const view = leaf.view;
      view.refresh();
    });
    const sidebarLeaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_SIDEBAR_OVERVIEW);
    sidebarLeaves.forEach((leaf) => {
      const view = leaf.view;
      view.refresh();
    });
    const mainLeaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_MAIN_OVERVIEW);
    mainLeaves.forEach((leaf) => {
      const view = leaf.view;
      view.refresh();
    });
  }
  setupStatusBar() {
    const statusBarItem = this.addStatusBarItem();
    statusBarItem.addClass("learning-system-status");
    const updateStatus = () => {
      const stats = this.flashcardManager.getStats();
      statusBarItem.setText(`\u{1F0CF} ${stats.due} due`);
      statusBarItem.title = `${stats.due} cards due for review
${stats.new} new cards`;
    };
    updateStatus();
    this.registerInterval(
      window.setInterval(updateStatus, 6e4)
    );
    statusBarItem.addEventListener("click", () => {
      this.activateReview();
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL2NvcmUvUXVpY2tGbGFzaGNhcmRDcmVhdG9yLnRzIiwgInNyYy91aS9GbGFzaGNhcmRDcmVhdGVNb2RhbC50cyIsICJzcmMvdWkvT3ZlcnZpZXdWaWV3LnRzIiwgInNyYy91aS9Bbm5vdGF0aW9uTW9kYWwudHMiLCAic3JjL21haW4udHMiLCAic3JjL3VpL1NldHRpbmdzVGFiLnRzIiwgInNyYy91aS9TaWRlYmFyT3ZlcnZpZXdWaWV3LnRzIiwgInNyYy91aS9SZXZpZXdWaWV3LnRzIiwgInNyYy9jb3JlL0NhcmRTY2hlZHVsZXIudHMiLCAic3JjL3VpL1N0YXRzVmlldy50cyIsICJzcmMvY29yZS9BbmFseXRpY3NFbmdpbmUudHMiLCAic3JjL2NvcmUvRGF0YU1hbmFnZXIudHMiLCAic3JjL2NvcmUvRXh0cmFjdGlvbkVuZ2luZS50cyIsICJzcmMvY29yZS9Bbm5vdGF0aW9uTWFuYWdlci50cyIsICJzcmMvY29yZS9GbGFzaGNhcmRNYW5hZ2VyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IENvbnRlbnRVbml0IH0gZnJvbSAnLi4vY29yZS9EYXRhTWFuYWdlcic7XG5pbXBvcnQgeyBBbm5vdGF0aW9uIH0gZnJvbSAnLi4vY29yZS9Bbm5vdGF0aW9uTWFuYWdlcic7XG5cbi8qKlxuICogXHU0RTAwXHU5NTJFXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXHU1REU1XHU1MTc3XHU3QzdCXG4gKi9cbmV4cG9ydCBjbGFzcyBRdWlja0ZsYXNoY2FyZENyZWF0b3Ige1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4pIHt9XG5cbiAgLyoqXG4gICAqIFx1NEVDRVx1NjNEMFx1NTNENlx1NTE4NVx1NUJCOVx1NEUwMFx1OTUyRVx1NTIxQlx1NUVGQVx1OTVFRVx1N0I1NFx1NTM2MVxuICAgKiBcdTU5ODJcdTY3OUNcdTY3MDlcdTYyNzlcdTZDRThcdUZGMENcdTRGN0ZcdTc1MjhcdTYyNzlcdTZDRThcdTRGNUNcdTRFM0FcdTdCNTRcdTY4NDhcbiAgICovXG4gIGFzeW5jIGNyZWF0ZVF1aWNrUUFDYXJkKGNvbnRlbnRVbml0OiBDb250ZW50VW5pdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24oY29udGVudFVuaXQuaWQpO1xuICAgICAgXG4gICAgICBsZXQgcXVlc3Rpb246IHN0cmluZztcbiAgICAgIGxldCBhbnN3ZXI6IHN0cmluZztcblxuICAgICAgaWYgKGFubm90YXRpb24gJiYgYW5ub3RhdGlvbi5jb250ZW50KSB7XG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1NjI3OVx1NkNFOFx1RkYwQ1x1NEY3Rlx1NzUyOFx1NjI3OVx1NkNFOFx1NTE4NVx1NUJCOVx1NEY1Q1x1NEUzQVx1N0I1NFx1Njg0OFxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTYyNzlcdTZDRThcdTY2MkZcdTU0MjZcdTY2MkZcdTk1RUVcdTk4OThcdTVGNjJcdTVGMEZcbiAgICAgICAgaWYgKHRoaXMuaXNRdWVzdGlvbihhbm5vdGF0aW9uLmNvbnRlbnQpKSB7XG4gICAgICAgICAgLy8gXHU2Mjc5XHU2Q0U4XHU2NjJGXHU5NUVFXHU5ODk4XHVGRjBDXHU3NTFGXHU2MjEwXHU5RUQ4XHU4QkE0XHU5NUVFXHU5ODk4XHVGRjBDXHU2Mjc5XHU2Q0U4XHU1MTg1XHU1QkI5XHU0RjVDXHU0RTNBXHU3QjU0XHU2ODQ4XG4gICAgICAgICAgcXVlc3Rpb24gPSB0aGlzLmdlbmVyYXRlRGVmYXVsdFF1ZXN0aW9uKGNvbnRlbnRVbml0KTtcbiAgICAgICAgICBhbnN3ZXIgPSBhbm5vdGF0aW9uLmNvbnRlbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gXHU2Mjc5XHU2Q0U4XHU0RTBEXHU2NjJGXHU5NUVFXHU5ODk4XHU1RjYyXHU1RjBGXHVGRjBDXHU3NTFGXHU2MjEwXHU5RUQ4XHU4QkE0XHU5NUVFXHU5ODk4XHVGRjBDXHU2Mjc5XHU2Q0U4XHU1MTg1XHU1QkI5XHU0RjVDXHU0RTNBXHU3QjU0XHU2ODQ4XG4gICAgICAgICAgcXVlc3Rpb24gPSB0aGlzLmdlbmVyYXRlRGVmYXVsdFF1ZXN0aW9uKGNvbnRlbnRVbml0KTtcbiAgICAgICAgICBhbnN3ZXIgPSBhbm5vdGF0aW9uLmNvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1NkNBMVx1NjcwOVx1NjI3OVx1NkNFOFx1RkYwQ1x1NEY3Rlx1NzUyOFx1OUVEOFx1OEJBNFx1NkEyMVx1NUYwRlxuICAgICAgICBxdWVzdGlvbiA9IHRoaXMuZ2VuZXJhdGVEZWZhdWx0UXVlc3Rpb24oY29udGVudFVuaXQpO1xuICAgICAgICBhbnN3ZXIgPSBjb250ZW50VW5pdC5jb250ZW50O1xuICAgICAgfVxuXG4gICAgICAvLyBcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcbiAgICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmNyZWF0ZVFBQ2FyZChcbiAgICAgICAgY29udGVudFVuaXQuaWQsXG4gICAgICAgIHF1ZXN0aW9uLFxuICAgICAgICBhbnN3ZXJcbiAgICAgICk7XG5cbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBGbGFzaGNhcmQgY3JlYXRlZCEgKFEmQSlgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgcXVpY2sgZmxhc2hjYXJkOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBGYWlsZWQgdG8gY3JlYXRlIGZsYXNoY2FyZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTRFQ0VcdTYzRDBcdTUzRDZcdTUxODVcdTVCQjlcdTRFMDBcdTk1MkVcdTUyMUJcdTVFRkFcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdTUzNjFcbiAgICogXHU4MUVBXHU1MkE4XHU4QkM2XHU1MjJCXHU1MTczXHU5NTJFXHU4QkNEXG4gICAqL1xuICBhc3luYyBjcmVhdGVRdWlja0Nsb3plQ2FyZChjb250ZW50VW5pdDogQ29udGVudFVuaXQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qga2V5d29yZHMgPSB0aGlzLmV4dHJhY3RLZXl3b3Jkcyhjb250ZW50VW5pdC5jb250ZW50KTtcbiAgICAgIFxuICAgICAgaWYgKGtleXdvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgTm8ga2V5d29yZHMgZm91bmQgZm9yIGNsb3plIGRlbGV0aW9uJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gXHU2MjdFXHU1MjMwXHU1MTczXHU5NTJFXHU4QkNEXHU1NzI4XHU2NTg3XHU2NzJDXHU0RTJEXHU3Njg0XHU0RjREXHU3RjZFXG4gICAgICBjb25zdCBkZWxldGlvbnMgPSBrZXl3b3Jkcy5tYXAoa2V5d29yZCA9PiB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gY29udGVudFVuaXQuY29udGVudC5pbmRleE9mKGtleXdvcmQud29yZCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgYW5zd2VyOiBrZXl3b3JkLndvcmRcbiAgICAgICAgfTtcbiAgICAgIH0pLmZpbHRlcihkID0+IGQuaW5kZXggIT09IC0xKTtcblxuICAgICAgaWYgKGRlbGV0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIENvdWxkIG5vdCBjcmVhdGUgY2xvemUgZGVsZXRpb25zJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gXHU1MjFCXHU1RUZBXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU1MzYxXG4gICAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5jcmVhdGVDbG96ZUNhcmQoXG4gICAgICAgIGNvbnRlbnRVbml0LmlkLFxuICAgICAgICBjb250ZW50VW5pdC5jb250ZW50LFxuICAgICAgICBkZWxldGlvbnNcbiAgICAgICk7XG5cbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBGbGFzaGNhcmQgY3JlYXRlZCEgKENsb3plIHdpdGggJHtkZWxldGlvbnMubGVuZ3RofSBibGFua3MpYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHF1aWNrIGNsb3plIGNhcmQ6JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIEZhaWxlZCB0byBjcmVhdGUgZmxhc2hjYXJkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NjY3QVx1ODBGRFx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1RkYwOFx1ODFFQVx1NTJBOFx1NTIyNFx1NjVBRFx1N0M3Qlx1NTc4Qlx1RkYwOVxuICAgKi9cbiAgYXN5bmMgY3JlYXRlU21hcnRDYXJkKGNvbnRlbnRVbml0OiBDb250ZW50VW5pdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbihjb250ZW50VW5pdC5pZCk7XG5cbiAgICAvLyBcdTU5ODJcdTY3OUNcdTY3MDlcdTk1RUVcdTk4OThcdTVGNjJcdTVGMEZcdTc2ODRcdTYyNzlcdTZDRThcdUZGMENcdTUyMUJcdTVFRkFcdTk1RUVcdTdCNTRcdTUzNjFcbiAgICBpZiAoYW5ub3RhdGlvbiAmJiB0aGlzLmlzUXVlc3Rpb24oYW5ub3RhdGlvbi5jb250ZW50KSkge1xuICAgICAgYXdhaXQgdGhpcy5jcmVhdGVRdWlja1FBQ2FyZChjb250ZW50VW5pdCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU1MTg1XHU1QkI5XHU4RjgzXHU3N0VEXHU0RTE0XHU1MzA1XHU1NDJCXHU1MTczXHU5NTJFXHU0RkUxXHU2MDZGXHVGRjBDXHU1MjFCXHU1RUZBXHU5NUVFXHU3QjU0XHU1MzYxXG4gICAgaWYgKGNvbnRlbnRVbml0LmNvbnRlbnQubGVuZ3RoIDwgMjAwKSB7XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZVF1aWNrUUFDYXJkKGNvbnRlbnRVbml0KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBcdTU5ODJcdTY3OUNcdTUxODVcdTVCQjlcdThGODNcdTk1N0ZcdUZGMENcdTUyMUJcdTVFRkFcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdTUzNjFcbiAgICBhd2FpdCB0aGlzLmNyZWF0ZVF1aWNrQ2xvemVDYXJkKGNvbnRlbnRVbml0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYyNzlcdTkxQ0ZcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcbiAgICovXG4gIGFzeW5jIGNyZWF0ZUJhdGNoQ2FyZHMoXG4gICAgY29udGVudFVuaXRzOiBDb250ZW50VW5pdFtdLFxuICAgIHR5cGU6ICdxYScgfCAnY2xvemUnIHwgJ3NtYXJ0JyA9ICdzbWFydCdcbiAgKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IG51bWJlcjsgZmFpbGVkOiBudW1iZXIgfT4ge1xuICAgIGxldCBzdWNjZXNzID0gMDtcbiAgICBsZXQgZmFpbGVkID0gMDtcblxuICAgIGZvciAoY29uc3QgdW5pdCBvZiBjb250ZW50VW5pdHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgIGNhc2UgJ3FhJzpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlUXVpY2tRQUNhcmQodW5pdCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdjbG96ZSc6XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZVF1aWNrQ2xvemVDYXJkKHVuaXQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnc21hcnQnOlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVTbWFydENhcmQodW5pdCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBzdWNjZXNzKys7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjYXJkOicsIGVycm9yKTtcbiAgICAgICAgZmFpbGVkKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzcywgZmFpbGVkIH07XG4gIH1cblxuICAvKipcbiAgICogXHU1MjI0XHU2NUFEXHU2NTg3XHU2NzJDXHU2NjJGXHU1NDI2XHU2NjJGXHU5NUVFXHU5ODk4XG4gICAqL1xuICBwcml2YXRlIGlzUXVlc3Rpb24odGV4dDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcXVlc3Rpb25Xb3JkcyA9IFsnd2hhdCcsICd3aHknLCAnaG93JywgJ3doZW4nLCAnd2hlcmUnLCAnd2hvJywgJ3doaWNoJ107XG4gICAgY29uc3QgbG93ZXJUZXh0ID0gdGV4dC50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICBcbiAgICAvLyBcdTRFRTVcdTk1RUVcdTUzRjdcdTdFRDNcdTVDM0VcbiAgICBpZiAobG93ZXJUZXh0LmVuZHNXaXRoKCc/JykpIHJldHVybiB0cnVlO1xuICAgIFxuICAgIC8vIFx1NEVFNVx1NzU5MVx1OTVFRVx1OEJDRFx1NUYwMFx1NTkzNFxuICAgIGZvciAoY29uc3Qgd29yZCBvZiBxdWVzdGlvbldvcmRzKSB7XG4gICAgICBpZiAobG93ZXJUZXh0LnN0YXJ0c1dpdGgod29yZCArICcgJykpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdTRFMkRcdTY1ODdcdTk1RUVcdTUzRTVcdTcyNzlcdTVGODFcbiAgICBpZiAodGV4dC5pbmNsdWRlcygnXHU0RUMwXHU0RTQ4JykgfHwgdGV4dC5pbmNsdWRlcygnXHU0RTNBXHU0RUMwXHU0RTQ4JykgfHwgXG4gICAgICAgIHRleHQuaW5jbHVkZXMoJ1x1NjAwRVx1NEU0OCcpIHx8IHRleHQuaW5jbHVkZXMoJ1x1NTk4Mlx1NEY1NScpIHx8XG4gICAgICAgIHRleHQuaW5jbHVkZXMoJ1x1NTQxN1x1RkYxRicpIHx8IHRleHQuaW5jbHVkZXMoJ1x1NTQ2Mlx1RkYxRicpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NzUxRlx1NjIxMFx1OUVEOFx1OEJBNFx1OTVFRVx1OTg5OFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZURlZmF1bHRRdWVzdGlvbihjb250ZW50VW5pdDogQ29udGVudFVuaXQpOiBzdHJpbmcge1xuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1NjgwN1x1OTg5OFx1RkYwQ1x1NEY3Rlx1NzUyOFx1NjgwN1x1OTg5OFx1NzUxRlx1NjIxMFx1OTVFRVx1OTg5OFxuICAgIGlmIChjb250ZW50VW5pdC5zb3VyY2UuaGVhZGluZykge1xuICAgICAgY29uc3QgaGVhZGluZyA9IGNvbnRlbnRVbml0LnNvdXJjZS5oZWFkaW5nLnJlcGxhY2UoL14jK1xccyovLCAnJyk7XG4gICAgICByZXR1cm4gYFdoYXQgaXMgdGhlIGtleSBwb2ludCBhYm91dCBcIiR7aGVhZGluZ31cIj9gO1xuICAgIH1cblxuICAgIC8vIFx1NjgzOVx1NjM2RVx1NTE4NVx1NUJCOVx1OTU3Rlx1NUVBNlx1NzUxRlx1NjIxMFx1NEUwRFx1NTQwQ1x1NzY4NFx1OTVFRVx1OTg5OFxuICAgIGlmIChjb250ZW50VW5pdC5jb250ZW50Lmxlbmd0aCA8IDUwKSB7XG4gICAgICByZXR1cm4gYFdoYXQgZG9lcyBcIiR7Y29udGVudFVuaXQuY29udGVudH1cIiBtZWFuP2A7XG4gICAgfSBlbHNlIGlmIChjb250ZW50VW5pdC5jb250ZW50Lmxlbmd0aCA8IDE1MCkge1xuICAgICAgY29uc3QgZmlyc3RXb3JkcyA9IGNvbnRlbnRVbml0LmNvbnRlbnQuc3Vic3RyaW5nKDAsIDMwKSArICcuLi4nO1xuICAgICAgcmV0dXJuIGBFeHBsYWluOiBcIiR7Zmlyc3RXb3Jkc31cImA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBgV2hhdCBhcmUgdGhlIGtleSBwb2ludHMgaW4gdGhpcyBjb250ZW50P2A7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NjNEMFx1NTNENlx1NTE3M1x1OTUyRVx1OEJDRFx1RkYwOFx1NzUyOFx1NEU4RVx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1RkYwOVxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0S2V5d29yZHModGV4dDogc3RyaW5nKTogQXJyYXk8eyB3b3JkOiBzdHJpbmc7IHNjb3JlOiBudW1iZXIgfT4ge1xuICAgIC8vIFx1NTIwNlx1OEJDRFxuICAgIGNvbnN0IHdvcmRzID0gdGV4dC5tYXRjaCgvXFxiW0EtWmEtel17Myx9XFxiL2cpIHx8IFtdO1xuICAgIFxuICAgIC8vIFx1NUUzOFx1ODlDMVx1NTA1Q1x1NzUyOFx1OEJDRFxuICAgIGNvbnN0IHN0b3BXb3JkcyA9IG5ldyBTZXQoW1xuICAgICAgJ3RoZScsICdpcycsICdhdCcsICd3aGljaCcsICdvbicsICdhJywgJ2FuJywgJ2FuZCcsICdvcicsICdidXQnLFxuICAgICAgJ2luJywgJ3dpdGgnLCAndG8nLCAnZm9yJywgJ29mJywgJ2FzJywgJ2J5JywgJ3RoaXMnLCAndGhhdCcsXG4gICAgICAnZnJvbScsICd0aGV5JywgJ3dlJywgJ3NheScsICdoZXInLCAnc2hlJywgJ2hlJywgJ3dpbGwnLCAnbXknLFxuICAgICAgJ29uZScsICdhbGwnLCAnd291bGQnLCAndGhlcmUnLCAndGhlaXInLCAnd2hhdCcsICdzbycsICd1cCcsICdvdXQnLFxuICAgICAgJ2lmJywgJ2Fib3V0JywgJ3dobycsICdnZXQnLCAnd2hpY2gnLCAnZ28nLCAnbWUnLCAnd2hlbicsICdtYWtlJyxcbiAgICAgICdjYW4nLCAnbGlrZScsICd0aW1lJywgJ25vJywgJ2p1c3QnLCAnaGltJywgJ2tub3cnLCAndGFrZScsICdwZW9wbGUnLFxuICAgICAgJ2ludG8nLCAneWVhcicsICd5b3VyJywgJ2dvb2QnLCAnc29tZScsICdjb3VsZCcsICd0aGVtJywgJ3NlZScsICdvdGhlcidcbiAgICBdKTtcblxuICAgIC8vIFx1OEJDRFx1OTg5MVx1N0VERlx1OEJBMVxuICAgIGNvbnN0IHdvcmRGcmVxID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcbiAgICB3b3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xuICAgICAgY29uc3QgbG93ZXIgPSB3b3JkLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoIXN0b3BXb3Jkcy5oYXMobG93ZXIpICYmIHdvcmQubGVuZ3RoID4gMykge1xuICAgICAgICB3b3JkRnJlcS5zZXQod29yZCwgKHdvcmRGcmVxLmdldCh3b3JkKSB8fCAwKSArIDEpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gXHU4QkExXHU3Qjk3XHU1MjA2XHU2NTcwXHVGRjA4XHU4MDAzXHU4NjUxXHU5ODkxXHU3Mzg3XHUzMDAxXHU5NTdGXHU1RUE2XHUzMDAxXHU1OTI3XHU1MTk5XHVGRjA5XG4gICAgY29uc3Qgc2NvcmVkID0gQXJyYXkuZnJvbSh3b3JkRnJlcS5lbnRyaWVzKCkpLm1hcCgoW3dvcmQsIGZyZXFdKSA9PiB7XG4gICAgICBsZXQgc2NvcmUgPSBmcmVxO1xuICAgICAgXG4gICAgICAvLyBcdTk1N0ZcdThCQ0RcdTUyQTBcdTUyMDZcbiAgICAgIGlmICh3b3JkLmxlbmd0aCA+IDgpIHNjb3JlICs9IDI7XG4gICAgICBlbHNlIGlmICh3b3JkLmxlbmd0aCA+IDYpIHNjb3JlICs9IDE7XG4gICAgICBcbiAgICAgIC8vIFx1OTk5Nlx1NUI1N1x1NkJDRFx1NTkyN1x1NTE5OVx1NTJBMFx1NTIwNlx1RkYwOFx1NTNFRlx1ODBGRFx1NjYyRlx1NEUxM1x1NjcwOVx1NTQwRFx1OEJDRFx1RkYwOVxuICAgICAgaWYgKHdvcmRbMF0gPT09IHdvcmRbMF0udG9VcHBlckNhc2UoKSkgc2NvcmUgKz0gMTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHsgd29yZCwgc2NvcmUgfTtcbiAgICB9KTtcblxuICAgIC8vIFx1NjM5Mlx1NUU4Rlx1NUU3Nlx1OEZENFx1NTZERVx1NTI0RDNcdTRFMkFcdTUxNzNcdTk1MkVcdThCQ0RcbiAgICByZXR1cm4gc2NvcmVkXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi5zY29yZSAtIGEuc2NvcmUpXG4gICAgICAuc2xpY2UoMCwgMyk7XG4gIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBDb250ZW50VW5pdCB9IGZyb20gJy4uL2NvcmUvRGF0YU1hbmFnZXInO1xuXG5leHBvcnQgY2xhc3MgRmxhc2hjYXJkQ3JlYXRlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgY29udGVudFVuaXQ6IENvbnRlbnRVbml0O1xuICBwcml2YXRlIGNhcmRUeXBlOiAncWEnIHwgJ2Nsb3plJyA9ICdxYSc7XG4gIFxuICAvLyBRJkEgXHU1QjU3XHU2QkI1XG4gIHByaXZhdGUgcXVlc3Rpb246IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIGFuc3dlcjogc3RyaW5nID0gJyc7XG4gIFxuICAvLyBDbG96ZSBcdTVCNTdcdTZCQjVcbiAgcHJpdmF0ZSBjbG96ZVRleHQ6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIHNlbGVjdGVkUmFuZ2VzOiB7IHN0YXJ0OiBudW1iZXI7IGVuZDogbnVtYmVyOyB0ZXh0OiBzdHJpbmcgfVtdID0gW107XG4gIFxuICBwcml2YXRlIG9uU2F2ZTogKCkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4sXG4gICAgY29udGVudFVuaXQ6IENvbnRlbnRVbml0LFxuICAgIG9uU2F2ZTogKCkgPT4gdm9pZFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMuY29udGVudFVuaXQgPSBjb250ZW50VW5pdDtcbiAgICB0aGlzLm9uU2F2ZSA9IG9uU2F2ZTtcbiAgICBcbiAgICAvLyBcdTlFRDhcdThCQTRcdTRGN0ZcdTc1MjhcdTUxODVcdTVCQjlcdTRGNUNcdTRFM0FcdTdCNTRcdTY4NDgvXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU2NTg3XHU2NzJDXG4gICAgdGhpcy5hbnN3ZXIgPSBjb250ZW50VW5pdC5jb250ZW50O1xuICAgIHRoaXMuY2xvemVUZXh0ID0gY29udGVudFVuaXQuY29udGVudDtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2ZsYXNoY2FyZC1jcmVhdGUtbW9kYWwnKTtcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQ3JlYXRlIEZsYXNoY2FyZCcgfSk7XG5cbiAgICAvLyBcdTY2M0VcdTc5M0FcdTZFOTBcdTUxODVcdTVCQjlcbiAgICBjb25zdCBjb250ZW50UHJldmlldyA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdjb250ZW50LXByZXZpZXcnIH0pO1xuICAgIGNvbnRlbnRQcmV2aWV3LmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1NvdXJjZSBDb250ZW50OicgfSk7XG4gICAgY29udGVudFByZXZpZXcuY3JlYXRlRWwoJ2Jsb2NrcXVvdGUnLCB7IHRleHQ6IHRoaXMuY29udGVudFVuaXQuY29udGVudCB9KTtcblxuICAgIC8vIFx1NTM2MVx1NzI0N1x1N0M3Qlx1NTc4Qlx1OTAwOVx1NjJFOVxuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5zZXROYW1lKCdDYXJkIFR5cGUnKVxuICAgICAgLnNldERlc2MoJ0Nob29zZSB0aGUgdHlwZSBvZiBmbGFzaGNhcmQnKVxuICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAuYWRkT3B0aW9uKCdxYScsICdcdUQ4M0RcdURDREQgUXVlc3Rpb24gJiBBbnN3ZXInKVxuICAgICAgICAgIC5hZGRPcHRpb24oJ2Nsb3plJywgJ1x1MjcwRlx1RkUwRiBDbG96ZSBEZWxldGlvbicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuY2FyZFR5cGUpXG4gICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2FyZFR5cGUgPSB2YWx1ZSBhcyAncWEnIHwgJ2Nsb3plJztcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaENhcmRJbnB1dHMoKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgLy8gXHU1MzYxXHU3MjQ3XHU4RjkzXHU1MTY1XHU1MzNBXHU1N0RGXHU1QkI5XHU1NjY4XG4gICAgdGhpcy5jYXJkSW5wdXRDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1pbnB1dC1jb250YWluZXInIH0pO1xuICAgIHRoaXMucmVmcmVzaENhcmRJbnB1dHMoKTtcblxuICAgIC8vIFx1NjMwOVx1OTRBRVxuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdtb2RhbC1idXR0b24tY29udGFpbmVyJyB9KTtcblxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KTtcbiAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuXG4gICAgY29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdDcmVhdGUgRmxhc2hjYXJkJyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgc2F2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc2F2ZUZsYXNoY2FyZCgpKTtcblxuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIGNhcmRJbnB1dENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSByZWZyZXNoQ2FyZElucHV0cygpIHtcbiAgICB0aGlzLmNhcmRJbnB1dENvbnRhaW5lci5lbXB0eSgpO1xuXG4gICAgaWYgKHRoaXMuY2FyZFR5cGUgPT09ICdxYScpIHtcbiAgICAgIHRoaXMucmVuZGVyUUFJbnB1dHMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW5kZXJDbG96ZUlucHV0cygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyUUFJbnB1dHMoKSB7XG4gICAgLy8gXHU5NUVFXHU5ODk4XHU4RjkzXHU1MTY1XG4gICAgbmV3IFNldHRpbmcodGhpcy5jYXJkSW5wdXRDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnUXVlc3Rpb24gKEZyb250KScpXG4gICAgICAuc2V0RGVzYygnV2hhdCBxdWVzdGlvbiBzaG91bGQgdGhpcyBjYXJkIGFzaz8nKVxuICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4ge1xuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciB5b3VyIHF1ZXN0aW9uLi4uJylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5xdWVzdGlvbilcbiAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5xdWVzdGlvbiA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB0ZXh0LmlucHV0RWwucm93cyA9IDM7XG4gICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgIH0pO1xuXG4gICAgLy8gXHU3QjU0XHU2ODQ4XHU4RjkzXHU1MTY1XG4gICAgbmV3IFNldHRpbmcodGhpcy5jYXJkSW5wdXRDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnQW5zd2VyIChCYWNrKScpXG4gICAgICAuc2V0RGVzYygnV2hhdCBpcyB0aGUgY29ycmVjdCBhbnN3ZXI/JylcbiAgICAgIC5hZGRUZXh0QXJlYSh0ZXh0ID0+IHtcbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgdGhlIGFuc3dlci4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuYW5zd2VyKVxuICAgICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFuc3dlciA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB0ZXh0LmlucHV0RWwucm93cyA9IDM7XG4gICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgIH0pO1xuXG4gICAgLy8gXHU2M0QwXHU3OTNBXHVGRjFBXHU1M0VGXHU0RUU1XHU0RjdGXHU3NTI4XHU1MzlGXHU1MTg1XHU1QkI5XG4gICAgY29uc3QgaGludCA9IHRoaXMuY2FyZElucHV0Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2lucHV0LWhpbnQnIH0pO1xuICAgIGhpbnQuY3JlYXRlRWwoJ3NtYWxsJywgeyBcbiAgICAgIHRleHQ6ICdcdUQ4M0RcdURDQTEgVGlwOiBZb3UgY2FuIHVzZSB0aGUgc291cmNlIGNvbnRlbnQgYXMgdGhlIGFuc3dlciwgb3Igd3JpdGUgeW91ciBvd24uJ1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJDbG96ZUlucHV0cygpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNhcmRJbnB1dENvbnRhaW5lcjtcblxuICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDbG96ZSBEZWxldGlvbicgfSk7XG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdTZWxlY3QgdGV4dCB0byBoaWRlIChjbG96ZSBkZWxldGlvbikuIENsaWNrIG9uIHdvcmRzIHRvIHRvZ2dsZSBzZWxlY3Rpb24uJyxcbiAgICAgIGNsczogJ2Nsb3plLWluc3RydWN0aW9uJ1xuICAgIH0pO1xuXG4gICAgLy8gXHU1M0VGXHU5MDA5XHU2MkU5XHU3Njg0XHU2NTg3XHU2NzJDXHU1MzNBXHU1N0RGXG4gICAgY29uc3QgdGV4dENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjbG96ZS10ZXh0LWNvbnRhaW5lcicgfSk7XG4gICAgdGhpcy5yZW5kZXJTZWxlY3RhYmxlVGV4dCh0ZXh0Q29udGFpbmVyKTtcblxuICAgIC8vIFx1OTAwOVx1NEUyRFx1NzY4NFx1NTIyMFx1OTY2NFx1OTg3OVx1NTIxN1x1ODg2OFxuICAgIGlmICh0aGlzLnNlbGVjdGVkUmFuZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkTGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzZWxlY3RlZC1kZWxldGlvbnMnIH0pO1xuICAgICAgc2VsZWN0ZWRMaXN0LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1NlbGVjdGVkIERlbGV0aW9uczonIH0pO1xuICAgICAgXG4gICAgICB0aGlzLnNlbGVjdGVkUmFuZ2VzLmZvckVhY2goKHJhbmdlLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBpdGVtID0gc2VsZWN0ZWRMaXN0LmNyZWF0ZURpdih7IGNsczogJ2RlbGV0aW9uLWl0ZW0nIH0pO1xuICAgICAgICBpdGVtLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHtpbmRleCArIDF9LiBgIH0pO1xuICAgICAgICBpdGVtLmNyZWF0ZVNwYW4oeyBcbiAgICAgICAgICB0ZXh0OiByYW5nZS50ZXh0LFxuICAgICAgICAgIGNsczogJ2RlbGV0aW9uLXRleHQnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVtb3ZlQnRuID0gaXRlbS5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgIHRleHQ6ICdcdTAwRDcnLFxuICAgICAgICAgIGNsczogJ3JlbW92ZS1kZWxldGlvbi1idG4nXG4gICAgICAgIH0pO1xuICAgICAgICByZW1vdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFJhbmdlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgIHRoaXMucmVmcmVzaENhcmRJbnB1dHMoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTk4ODRcdTg5QzhcbiAgICBjb25zdCBwcmV2aWV3ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2Nsb3plLXByZXZpZXcnIH0pO1xuICAgIHByZXZpZXcuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnUHJldmlldzonIH0pO1xuICAgIHByZXZpZXcuY3JlYXRlRGl2KHsgXG4gICAgICB0ZXh0OiB0aGlzLmdlbmVyYXRlQ2xvemVQcmV2aWV3KCksXG4gICAgICBjbHM6ICdwcmV2aWV3LXRleHQnXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclNlbGVjdGFibGVUZXh0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCB3b3JkcyA9IHRoaXMuY2xvemVUZXh0LnNwbGl0KC8oXFxzKykvKTsgLy8gXHU0RkREXHU3NTU5XHU3QTdBXHU2ODNDXG4gICAgbGV0IGN1cnJlbnRJbmRleCA9IDA7XG5cbiAgICB3b3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xuICAgICAgY29uc3Qgd29yZFN0YXJ0ID0gY3VycmVudEluZGV4O1xuICAgICAgY29uc3Qgd29yZEVuZCA9IGN1cnJlbnRJbmRleCArIHdvcmQubGVuZ3RoO1xuXG4gICAgICBpZiAod29yZC50cmltKCkpIHtcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU5MDA5XHU0RTJEXG4gICAgICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkUmFuZ2VzLnNvbWUoXG4gICAgICAgICAgcmFuZ2UgPT4gcmFuZ2Uuc3RhcnQgPT09IHdvcmRTdGFydCAmJiByYW5nZS5lbmQgPT09IHdvcmRFbmRcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBzcGFuID0gY29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgIHRleHQ6IHdvcmQsXG4gICAgICAgICAgY2xzOiBpc1NlbGVjdGVkID8gJ2Nsb3plLXdvcmQgc2VsZWN0ZWQnIDogJ2Nsb3plLXdvcmQnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNwYW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy50b2dnbGVXb3JkU2VsZWN0aW9uKHdvcmRTdGFydCwgd29yZEVuZCwgd29yZCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiB3b3JkIH0pO1xuICAgICAgfVxuXG4gICAgICBjdXJyZW50SW5kZXggPSB3b3JkRW5kO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB0b2dnbGVXb3JkU2VsZWN0aW9uKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCB0ZXh0OiBzdHJpbmcpIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuc2VsZWN0ZWRSYW5nZXMuZmluZEluZGV4KFxuICAgICAgcmFuZ2UgPT4gcmFuZ2Uuc3RhcnQgPT09IHN0YXJ0ICYmIHJhbmdlLmVuZCA9PT0gZW5kXG4gICAgKTtcblxuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAvLyBcdTUzRDZcdTZEODhcdTkwMDlcdTYyRTlcbiAgICAgIHRoaXMuc2VsZWN0ZWRSYW5nZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU2REZCXHU1MkEwXHU5MDA5XHU2MkU5XG4gICAgICB0aGlzLnNlbGVjdGVkUmFuZ2VzLnB1c2goeyBzdGFydCwgZW5kLCB0ZXh0IH0pO1xuICAgICAgLy8gXHU2MzA5XHU0RjREXHU3RjZFXHU2MzkyXHU1RThGXG4gICAgICB0aGlzLnNlbGVjdGVkUmFuZ2VzLnNvcnQoKGEsIGIpID0+IGEuc3RhcnQgLSBiLnN0YXJ0KTtcbiAgICB9XG5cbiAgICB0aGlzLnJlZnJlc2hDYXJkSW5wdXRzKCk7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlQ2xvemVQcmV2aWV3KCk6IHN0cmluZyB7XG4gICAgbGV0IHByZXZpZXcgPSB0aGlzLmNsb3plVGV4dDtcbiAgICBjb25zdCBzb3J0ZWQgPSBbLi4udGhpcy5zZWxlY3RlZFJhbmdlc10uc29ydCgoYSwgYikgPT4gYi5zdGFydCAtIGEuc3RhcnQpO1xuXG4gICAgZm9yIChjb25zdCByYW5nZSBvZiBzb3J0ZWQpIHtcbiAgICAgIGNvbnN0IGJlZm9yZSA9IHByZXZpZXcuc3Vic3RyaW5nKDAsIHJhbmdlLnN0YXJ0KTtcbiAgICAgIGNvbnN0IGFmdGVyID0gcHJldmlldy5zdWJzdHJpbmcocmFuZ2UuZW5kKTtcbiAgICAgIHByZXZpZXcgPSBgJHtiZWZvcmV9Wy4uLl0ke2FmdGVyfWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByZXZpZXc7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNhdmVGbGFzaGNhcmQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0aGlzLmNhcmRUeXBlID09PSAncWEnKSB7XG4gICAgICAgIC8vIFx1OUE4Q1x1OEJDMVx1OEY5M1x1NTE2NVxuICAgICAgICBpZiAoIXRoaXMucXVlc3Rpb24udHJpbSgpKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGVudGVyIGEgcXVlc3Rpb24nKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmFuc3dlci50cmltKCkpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2UgZW50ZXIgYW4gYW5zd2VyJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU5NUVFXHU3QjU0XHU1MzYxXG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuY3JlYXRlUUFDYXJkKFxuICAgICAgICAgIHRoaXMuY29udGVudFVuaXQuaWQsXG4gICAgICAgICAgdGhpcy5xdWVzdGlvbixcbiAgICAgICAgICB0aGlzLmFuc3dlclxuICAgICAgICApO1xuXG4gICAgICAgIG5ldyBOb3RpY2UoJ1EmQSBmbGFzaGNhcmQgY3JlYXRlZCEnKTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gXHU5QThDXHU4QkMxXHU4RjkzXHU1MTY1XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUmFuZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBzZWxlY3QgYXQgbGVhc3Qgb25lIHdvcmQgdG8gaGlkZScpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1NTM2MVxuICAgICAgICBjb25zdCBkZWxldGlvbnMgPSB0aGlzLnNlbGVjdGVkUmFuZ2VzLm1hcChyYW5nZSA9PiAoe1xuICAgICAgICAgIGluZGV4OiByYW5nZS5zdGFydCxcbiAgICAgICAgICBhbnN3ZXI6IHJhbmdlLnRleHRcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuY3JlYXRlQ2xvemVDYXJkKFxuICAgICAgICAgIHRoaXMuY29udGVudFVuaXQuaWQsXG4gICAgICAgICAgdGhpcy5jbG96ZVRleHQsXG4gICAgICAgICAgZGVsZXRpb25zXG4gICAgICAgICk7XG5cbiAgICAgICAgbmV3IE5vdGljZSgnQ2xvemUgZmxhc2hjYXJkIGNyZWF0ZWQhJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMub25TYXZlKCk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZmxhc2hjYXJkOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ0Vycm9yIGNyZWF0aW5nIGZsYXNoY2FyZCcpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAuZmxhc2hjYXJkLWNyZWF0ZS1tb2RhbCB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIG1heC13aWR0aDogNjAwcHg7XG4gICAgICB9XG5cbiAgICAgIC5jb250ZW50LXByZXZpZXcge1xuICAgICAgICBtYXJnaW46IDIwcHggMDtcbiAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC5jb250ZW50LXByZXZpZXcgaDMge1xuICAgICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5jb250ZW50LXByZXZpZXcgYmxvY2txdW90ZSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkLWlucHV0LWNvbnRhaW5lciB7XG4gICAgICAgIG1hcmdpbjogMjBweCAwO1xuICAgICAgfVxuXG4gICAgICAuaW5wdXQtaGludCB7XG4gICAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC8qIENsb3plIFx1NjgzN1x1NUYwRiAqL1xuICAgICAgLmNsb3plLWluc3RydWN0aW9uIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtdGV4dC1jb250YWluZXIge1xuICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuODtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgY3Vyc29yOiBkZWZhdWx0O1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtd29yZCB7XG4gICAgICAgIHBhZGRpbmc6IDJweCA0cHg7XG4gICAgICAgIG1hcmdpbjogMCAxcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLmNsb3plLXdvcmQ6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLmNsb3plLXdvcmQuc2VsZWN0ZWQge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3RlZC1kZWxldGlvbnMge1xuICAgICAgICBtYXJnaW46IDE1cHggMDtcbiAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3RlZC1kZWxldGlvbnMgaDQge1xuICAgICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5kZWxldGlvbi1pdGVtIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDZweCAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICAgIH1cblxuICAgICAgLmRlbGV0aW9uLXRleHQge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLnJlbW92ZS1kZWxldGlvbi1idG4ge1xuICAgICAgICBwYWRkaW5nOiAycHggOHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yKTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxO1xuICAgICAgfVxuXG4gICAgICAucmVtb3ZlLWRlbGV0aW9uLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICB9XG5cbiAgICAgIC5jbG96ZS1wcmV2aWV3IHtcbiAgICAgICAgbWFyZ2luOiAxNXB4IDA7XG4gICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtcHJldmlldyBoNCB7XG4gICAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLnByZXZpZXctdGV4dCB7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjtcbiAgICAgIH1cblxuICAgICAgLm1vZGFsLWJ1dHRvbi1jb250YWluZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5tb2RhbC1idXR0b24tY29udGFpbmVyIGJ1dHRvbiB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn0iLCAiLy8gb3ZlcnZpZXcgVmlldy50c1xuaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlLCBNZW51LCBNb2RhbCwgQXBwLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IENvbnRlbnRVbml0IH0gZnJvbSAnLi4vY29yZS9EYXRhTWFuYWdlcic7XG5pbXBvcnQgeyBRdWlja0ZsYXNoY2FyZENyZWF0b3IgfSBmcm9tICcuLi9jb3JlL1F1aWNrRmxhc2hjYXJkQ3JlYXRvcic7XG5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfT1ZFUlZJRVcgPSAnbGVhcm5pbmctc3lzdGVtLW92ZXJ2aWV3JztcblxuZXhwb3J0IGNsYXNzIE92ZXJ2aWV3VmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbjtcbi8vICAgcHJpdmF0ZSBjb250ZW50RWw6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGdyb3VwQnk6ICdmaWxlJyB8ICd0YWcnIHwgJ2RhdGUnID0gJ2ZpbGUnO1xuICBwcml2YXRlIHNlYXJjaFF1ZXJ5OiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBxdWlja0NyZWF0b3I6IFF1aWNrRmxhc2hjYXJkQ3JlYXRvcjtcbiAgcHJpdmF0ZSBiYXRjaE1vZGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBzZWxlY3RlZFVuaXRJZHM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4pIHtcbiAgICBzdXBlcihsZWFmKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLnF1aWNrQ3JlYXRvciA9IG5ldyBRdWlja0ZsYXNoY2FyZENyZWF0b3IocGx1Z2luKTtcbiAgfVxuXG4gIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFZJRVdfVFlQRV9PVkVSVklFVztcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdMZWFybmluZyBPdmVydmlldyc7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdsYXlvdXQtbGlzdCc7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgXG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcblxuICAgIHRoaXMuY3JlYXRlVG9vbGJhcihjb250YWluZXIpO1xuICAgIHRoaXMuY29udGVudEVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2xlYXJuaW5nLXN5c3RlbS1jb250ZW50JyB9KTtcbiAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgYXN5bmMgb25DbG9zZSgpIHt9XG5cbiAgLy8gXHU2REZCXHU1MkEwXHU1MjMwIE92ZXJ2aWV3VmlldyBcdTdDN0JcdTRFMkRcbnNjcm9sbFRvRmlsZShmaWxlUGF0aDogc3RyaW5nKSB7XG4gICAgLy8gdGhpcy5zZWxlY3RlZEZpbGUgPSBmaWxlUGF0aDsgLy8gXHU1OTgyXHU2NzlDXHU0RjYwXHU2NzA5XHU4RkQ5XHU0RTJBXHU1QzVFXHU2MDI3XG4gICAgXG4gICAgLy8gXHU2RURBXHU1MkE4XHU1MjMwXHU1QkY5XHU1RTk0XHU3Njg0XHU2NTg3XHU0RUY2XHU3RUM0XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBmaWxlR3JvdXBzID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvckFsbCgnLmZpbGUtZ3JvdXAnKTtcbiAgICAgIGZpbGVHcm91cHMuZm9yRWFjaCgoZ3JvdXApID0+IHtcbiAgICAgICAgY29uc3QgaGVhZGVyID0gZ3JvdXAucXVlcnlTZWxlY3RvcignLmdyb3VwLWhlYWRlcicpO1xuICAgICAgICBpZiAoaGVhZGVyPy50ZXh0Q29udGVudD8uaW5jbHVkZXMoZmlsZVBhdGguc3BsaXQoJy8nKS5wb3AoKT8ucmVwbGFjZSgnLm1kJywgJycpIHx8ICcnKSkge1xuICAgICAgICAgIGdyb3VwLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSwgMTAwKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlVG9vbGJhcihjb250YWluZXI6IEVsZW1lbnQpIHtcbiAgICBjb25zdCB0b29sYmFyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2xlYXJuaW5nLXN5c3RlbS10b29sYmFyJyB9KTtcblxuICAgIGNvbnN0IHNlYXJjaENvbnRhaW5lciA9IHRvb2xiYXIuY3JlYXRlRGl2KHsgY2xzOiAnc2VhcmNoLWNvbnRhaW5lcicgfSk7XG4gICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzZWFyY2hDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgcGxhY2Vob2xkZXI6ICdTZWFyY2ggY29udGVudC4uLicsXG4gICAgICBjbHM6ICdzZWFyY2gtaW5wdXQnXG4gICAgfSk7XG5cbiAgICBzZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICB0aGlzLnNlYXJjaFF1ZXJ5ID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBncm91cENvbnRhaW5lciA9IHRvb2xiYXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtY29udGFpbmVyJyB9KTtcbiAgICBncm91cENvbnRhaW5lci5jcmVhdGVTcGFuKHsgdGV4dDogJ0dyb3VwIGJ5OiAnLCBjbHM6ICdncm91cC1sYWJlbCcgfSk7XG5cbiAgICBjb25zdCBncm91cFNlbGVjdCA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZUVsKCdzZWxlY3QnLCB7IGNsczogJ2dyb3VwLXNlbGVjdCcgfSk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IFtcbiAgICAgIHsgdmFsdWU6ICdmaWxlJywgbGFiZWw6ICdGaWxlJyB9LFxuICAgICAgeyB2YWx1ZTogJ3RhZycsIGxhYmVsOiAnVGFnJyB9LFxuICAgICAgeyB2YWx1ZTogJ2RhdGUnLCBsYWJlbDogJ0RhdGUnIH1cbiAgICBdO1xuXG4gICAgb3B0aW9ucy5mb3JFYWNoKG9wdCA9PiB7XG4gICAgICBjb25zdCBvcHRpb24gPSBncm91cFNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywge1xuICAgICAgICB2YWx1ZTogb3B0LnZhbHVlLFxuICAgICAgICB0ZXh0OiBvcHQubGFiZWxcbiAgICAgIH0pO1xuICAgICAgaWYgKG9wdC52YWx1ZSA9PT0gdGhpcy5ncm91cEJ5KSB7XG4gICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBncm91cFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgdGhpcy5ncm91cEJ5ID0gKGUudGFyZ2V0IGFzIEhUTUxTZWxlY3RFbGVtZW50KS52YWx1ZSBhcyBhbnk7XG4gICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9KTtcblxuICAgIC8vIFx1NjI3OVx1OTFDRlx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVx1RkYwOFx1NzlGQlx1NTIzMFx1NTI0RFx1OTc2Mlx1RkYwOVxuICAgIGNvbnN0IGJhdGNoQWN0aW9ucyA9IHRvb2xiYXIuY3JlYXRlRGl2KHsgY2xzOiAnYmF0Y2gtYWN0aW9ucy1vdmVydmlldycgfSk7XG4gICAgXG4gICAgY29uc3QgYmF0Y2hNb2RlQnRuID0gYmF0Y2hBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiB0aGlzLmJhdGNoTW9kZSA/ICdcdTI3MTMgRG9uZScgOiAnXHUyNjEwIEJhdGNoIE1vZGUnLFxuICAgICAgY2xzOiAnYmF0Y2gtbW9kZS1idG4nXG4gICAgfSk7XG4gICAgYmF0Y2hNb2RlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5iYXRjaE1vZGUgPSAhdGhpcy5iYXRjaE1vZGU7XG4gICAgICBpZiAoIXRoaXMuYmF0Y2hNb2RlKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLmJhdGNoTW9kZSkge1xuICAgICAgLy8gXHU1MTY4XHU5MDA5L1x1NTNENlx1NkQ4OFx1NTE2OFx1OTAwOVx1NjMwOVx1OTRBRVxuICAgICAgY29uc3Qgc2VsZWN0QWxsQnRuID0gYmF0Y2hBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIHRleHQ6IHRoaXMuaXNBbGxTZWxlY3RlZCgpID8gJ1x1MjYxMSBEZXNlbGVjdCBBbGwnIDogJ1x1MjYxMCBTZWxlY3QgQWxsJyxcbiAgICAgICAgY2xzOiAnc2VsZWN0LWFsbC1idG4nXG4gICAgICB9KTtcbiAgICAgIHNlbGVjdEFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy50b2dnbGVTZWxlY3RBbGwoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBiYXRjaERlbGV0ZUJ0biA9IGJhdGNoQWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICB0ZXh0OiBgXHVEODNEXHVEREQxXHVGRTBGIERlbGV0ZSAoJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSlgLFxuICAgICAgICBjbHM6ICdiYXRjaC1kZWxldGUtYnRuJ1xuICAgICAgfSk7XG4gICAgICBiYXRjaERlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5iYXRjaERlbGV0ZU5vdGVzKCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgYmF0Y2hDcmVhdGVCdG4gPSBiYXRjaEFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogYFx1MjZBMSBDcmVhdGUgQ2FyZHMgKCR7dGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZX0pYCxcbiAgICAgICAgY2xzOiAnYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bidcbiAgICAgIH0pO1xuICAgICAgYmF0Y2hDcmVhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuYmF0Y2hDcmVhdGVGbGFzaGNhcmRzKCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYmF0Y2hDcmVhdGVBbGxCdG4gPSBiYXRjaEFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogJ1x1MjZBMSBCYXRjaCBDcmVhdGUgQ2FyZHMnLFxuICAgICAgICBjbHM6ICdiYXRjaC1jcmVhdGUtYnRuJ1xuICAgICAgfSk7XG4gICAgICBiYXRjaENyZWF0ZUFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc2hvd0JhdGNoQ3JlYXRlTW9kYWwoKSk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVmcmVzaEJ0biA9IHRvb2xiYXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdcdTI3RjMnLFxuICAgICAgY2xzOiAncmVmcmVzaC1idG4nXG4gICAgfSk7XG4gICAgcmVmcmVzaEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMucmVmcmVzaCgpKTtcblxuICAgIGNvbnN0IHN0YXRzID0gdG9vbGJhci5jcmVhdGVEaXYoeyBjbHM6ICdzdGF0cy1jb250YWluZXInIH0pO1xuICAgIGNvbnN0IHRvdGFsQ291bnQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRBbGxDb250ZW50VW5pdHMoKS5sZW5ndGg7XG4gICAgc3RhdHMuY3JlYXRlU3Bhbih7IHRleHQ6IGBUb3RhbDogJHt0b3RhbENvdW50fWAsIGNsczogJ3N0YXRzLXRleHQnIH0pO1xuICB9XG5cbiAgYXN5bmMgcmVmcmVzaCgpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgbGV0IHVuaXRzID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0QWxsQ29udGVudFVuaXRzKCk7XG5cbiAgICBpZiAodGhpcy5zZWFyY2hRdWVyeSkge1xuICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLnNlYXJjaFF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+XG4gICAgICAgIHVuaXQuY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSB8fFxuICAgICAgICB1bml0LnNvdXJjZS5maWxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5zb21lKHRhZyA9PiB0YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkpXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh1bml0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7XG4gICAgICAgIHRleHQ6IHRoaXMuc2VhcmNoUXVlcnkgPyAnTm8gcmVzdWx0cyBmb3VuZCcgOiAnTm8gY29udGVudCBleHRyYWN0ZWQgeWV0JyxcbiAgICAgICAgY2xzOiAnZW1wdHktc3RhdGUnXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRoaXMuZ3JvdXBCeSkge1xuICAgICAgY2FzZSAnZmlsZSc6XG4gICAgICAgIHRoaXMucmVuZGVyQnlGaWxlKHVuaXRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0YWcnOlxuICAgICAgICB0aGlzLnJlbmRlckJ5VGFnKHVuaXRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgdGhpcy5yZW5kZXJCeURhdGUodW5pdHMpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckJ5RmlsZSh1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIGNvbnN0IGdyb3VwZWQgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudFVuaXRbXT4oKTtcblxuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICBpZiAoIWdyb3VwZWQuaGFzKHVuaXQuc291cmNlLmZpbGUpKSB7XG4gICAgICAgIGdyb3VwZWQuc2V0KHVuaXQuc291cmNlLmZpbGUsIFtdKTtcbiAgICAgIH1cbiAgICAgIGdyb3VwZWQuZ2V0KHVuaXQuc291cmNlLmZpbGUpIS5wdXNoKHVuaXQpO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc29ydGVkRmlsZXMgPSBBcnJheS5mcm9tKGdyb3VwZWQua2V5cygpKS5zb3J0KCk7XG4gICAgc29ydGVkRmlsZXMuZm9yRWFjaChmaWxlUGF0aCA9PiB7XG4gICAgICBjb25zdCBmaWxlVW5pdHMgPSBncm91cGVkLmdldChmaWxlUGF0aCkhO1xuICAgICAgdGhpcy5yZW5kZXJGaWxlR3JvdXAoZmlsZVBhdGgsIGZpbGVVbml0cyk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckZpbGVHcm91cChmaWxlUGF0aDogc3RyaW5nLCB1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIGNvbnN0IGdyb3VwQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnZmlsZS1ncm91cCcgfSk7XG5cbiAgICBjb25zdCBoZWFkZXIgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdncm91cC1oZWFkZXInIH0pO1xuICAgIGNvbnN0IGZpbGVOYW1lID0gZmlsZVBhdGguc3BsaXQoJy8nKS5wb3AoKT8ucmVwbGFjZSgnLm1kJywgJycpIHx8IGZpbGVQYXRoO1xuICAgIGNvbnN0IHRpdGxlRWwgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtdGl0bGUnIH0pO1xuICAgIHRpdGxlRWwuY3JlYXRlU3Bhbih7IHRleHQ6ICdcdUQ4M0RcdURDQzQgJywgY2xzOiAnZ3JvdXAtaWNvbicgfSk7XG4gICAgdGl0bGVFbC5jcmVhdGVTcGFuKHsgdGV4dDogZmlsZU5hbWUsIGNsczogJ2dyb3VwLW5hbWUnIH0pO1xuXG4gICAgaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHt1bml0cy5sZW5ndGh9YCwgY2xzOiAnY291bnQtYmFkZ2UnIH0pO1xuXG4gICAgY29uc3QgY29sbGFwc2VCdG4gPSBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6ICdcdTI1QkMnLCBjbHM6ICdjb2xsYXBzZS1idG4nIH0pO1xuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU2NTg3XHU0RUY2XHU2Mjc5XHU2Q0U4XG4gICAgY29uc3QgZmlsZUFubm90YXRpb25zID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0RmlsZUFubm90YXRpb25zKGZpbGVQYXRoKTtcbiAgICBpZiAoZmlsZUFubm90YXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGZpbGVBbm5vdGF0aW9uRGlzcGxheSA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IFxuICAgICAgICBjbHM6ICdmaWxlLWFubm90YXRpb24tZGlzcGxheScgXG4gICAgICB9KTtcbiAgICAgIGZpbGVBbm5vdGF0aW9ucy5mb3JFYWNoKGFubiA9PiB7XG4gICAgICAgIGNvbnN0IGFubkVsID0gZmlsZUFubm90YXRpb25EaXNwbGF5LmNyZWF0ZURpdih7IGNsczogJ2ZpbGUtYW5ub3RhdGlvbi1pdGVtJyB9KTtcbiAgICAgICAgYW5uRWwuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogJ1x1RDgzRFx1RENDQyAnIH0pO1xuICAgICAgICBhbm5FbC5jcmVhdGVTcGFuKHsgdGV4dDogYW5uLmNvbnRlbnQgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50Q29udGFpbmVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtY29udGVudCcgfSk7XG4gICAgdW5pdHMuZm9yRWFjaCh1bml0ID0+IHtcbiAgICAgIHRoaXMucmVuZGVyQ29udGVudFVuaXQoY29udGVudENvbnRhaW5lciwgdW5pdCk7XG4gICAgfSk7XG5cbiAgICBsZXQgaXNDb2xsYXBzZWQgPSBmYWxzZTtcbiAgICBjb2xsYXBzZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgaXNDb2xsYXBzZWQgPSAhaXNDb2xsYXBzZWQ7XG4gICAgICBjb250ZW50Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBpc0NvbGxhcHNlZCA/ICdub25lJyA6ICdibG9jayc7XG4gICAgICBjb2xsYXBzZUJ0bi50ZXh0Q29udGVudCA9IGlzQ29sbGFwc2VkID8gJ1x1MjVCNicgOiAnXHUyNUJDJztcbiAgICB9KTtcblxuICAgIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSkub3BlbkZpbGUoZmlsZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckNvbnRlbnRVbml0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0KSB7XG4gICAgY29uc3QgY2FyZCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjb250ZW50LWNhcmQnIH0pO1xuXG4gICAgLy8gXHU2Mjc5XHU5MUNGXHU5MDA5XHU2MkU5XHU2QTIxXHU1RjBGXHVGRjFBXHU2REZCXHU1MkEwY2hlY2tib3hcbiAgICBpZiAodGhpcy5iYXRjaE1vZGUpIHtcbiAgICAgIGNvbnN0IGNoZWNrYm94ID0gY2FyZC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgIGNsczogJ2JhdGNoLWNoZWNrYm94J1xuICAgICAgfSk7XG4gICAgICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdW5pdC1pZCcsIHVuaXQuaWQpO1xuICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRoaXMuc2VsZWN0ZWRVbml0SWRzLmhhcyh1bml0LmlkKTtcbiAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCkge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmFkZCh1bml0LmlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5kZWxldGUodW5pdC5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVCYXRjaEJ1dHRvbnMoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRlbnRBcmVhID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLWNvbnRlbnQnIH0pO1xuICAgIGNvbnN0IHR5cGVJY29uID0gdGhpcy5nZXRUeXBlSWNvbih1bml0LnR5cGUpO1xuICAgIGNvbnRlbnRBcmVhLmNyZWF0ZVNwYW4oeyB0ZXh0OiB0eXBlSWNvbiArICcgJywgY2xzOiAndHlwZS1pY29uJyB9KTtcbiAgICBcbiAgICBjb25zdCBjb250ZW50VGV4dCA9IGNvbnRlbnRBcmVhLmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IHVuaXQuY29udGVudCwgXG4gICAgICBjbHM6ICdjb250ZW50LXRleHQgY2xpY2thYmxlLWNvbnRlbnQnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHU3MEI5XHU1MUZCXHU1MTg1XHU1QkI5XHU1QzU1XHU1RjAwXHU2Mjc5XHU2Q0U4XHU4RjkzXHU1MTY1XG4gICAgY29udGVudFRleHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMuc2hvd0Fubm90YXRpb25JbnB1dChjYXJkLCB1bml0LCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKT8uY29udGVudCk7XG4gICAgfSk7XG5cbiAgICBpZiAodW5pdC5hbm5vdGF0aW9uSWQpIHtcbiAgICAgIGNvbnRlbnRBcmVhLmNyZWF0ZVNwYW4oe1xuICAgICAgICB0ZXh0OiAnXHVEODNEXHVEQ0REJyxcbiAgICAgICAgY2xzOiAnYW5ub3RhdGlvbi1iYWRnZSBoYXMtYW5ub3RhdGlvbicsXG4gICAgICAgIGF0dHI6IHsgdGl0bGU6ICdIYXMgYW5ub3RhdGlvbicgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHVuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnRlbnRBcmVhLmNyZWF0ZVNwYW4oe1xuICAgICAgICB0ZXh0OiAnXHVEODNDXHVEQ0NGJyxcbiAgICAgICAgY2xzOiAnZmxhc2hjYXJkLWJhZGdlJyxcbiAgICAgICAgYXR0cjogeyB0aXRsZTogYCR7dW5pdC5mbGFzaGNhcmRJZHMubGVuZ3RofSBmbGFzaGNhcmQocylgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1NjYzRVx1NzkzQVx1NjI3OVx1NkNFOFx1NTE4NVx1NUJCOVxuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKTtcbiAgICBpZiAoYW5ub3RhdGlvbikge1xuICAgICAgY29uc3QgYW5ub3RhdGlvbkRpc3BsYXkgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ2Fubm90YXRpb24tZGlzcGxheScgfSk7XG4gICAgICBcbiAgICAgIGlmIChhbm5vdGF0aW9uLmJhZGdlKSB7XG4gICAgICAgIGNvbnN0IGJhZGdlID0gYW5ub3RhdGlvbkRpc3BsYXkuY3JlYXRlU3Bhbih7XG4gICAgICAgICAgdGV4dDogYW5ub3RhdGlvbi5iYWRnZS50ZXh0LFxuICAgICAgICAgIGNsczogJ2Fubm90YXRpb24tYmFkZ2UtZGlzcGxheSdcbiAgICAgICAgfSk7XG4gICAgICAgIGJhZGdlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGFubm90YXRpb24uYmFkZ2UuY29sb3I7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGFubm90YXRpb25Db250ZW50ID0gYW5ub3RhdGlvbkRpc3BsYXkuY3JlYXRlRGl2KHsgXG4gICAgICAgIGNsczogJ2Fubm90YXRpb24tY29udGVudC1kaXNwbGF5J1xuICAgICAgfSk7XG4gICAgICBhbm5vdGF0aW9uQ29udGVudC5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0FDICcgfSk7XG4gICAgICBhbm5vdGF0aW9uQ29udGVudC5jcmVhdGVTcGFuKHsgdGV4dDogYW5ub3RhdGlvbi5jb250ZW50IH0pO1xuICAgICAgXG4gICAgICAvLyBcdTY1RjZcdTk1RjRcdTYyMzNcbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IGFubm90YXRpb25EaXNwbGF5LmNyZWF0ZURpdih7IGNsczogJ2Fubm90YXRpb24tdGltZXN0YW1wJyB9KTtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShhbm5vdGF0aW9uLm1ldGFkYXRhLmNyZWF0ZWRBdCk7XG4gICAgICB0aW1lc3RhbXAudGV4dENvbnRlbnQgPSBkYXRlLnRvTG9jYWxlU3RyaW5nKCk7XG4gICAgICBcbiAgICAgIC8vIFx1NzBCOVx1NTFGQlx1NjI3OVx1NkNFOFx1NEU1Rlx1NTNFRlx1NEVFNVx1N0YxNlx1OEY5MVxuICAgICAgYW5ub3RhdGlvbkRpc3BsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLnNob3dBbm5vdGF0aW9uSW5wdXQoY2FyZCwgdW5pdCwgYW5ub3RhdGlvbi5jb250ZW50KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IG1ldGFBcmVhID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLW1ldGEnIH0pO1xuXG4gICAgaWYgKHVuaXQubWV0YWRhdGEudGFncy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCB0YWdzQ29udGFpbmVyID0gbWV0YUFyZWEuY3JlYXRlU3Bhbih7IGNsczogJ3RhZ3MtY29udGFpbmVyJyB9KTtcbiAgICAgIHVuaXQubWV0YWRhdGEudGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgIHRhZ3NDb250YWluZXIuY3JlYXRlU3Bhbih7IHRleHQ6IHRhZywgY2xzOiAndGFnJyB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh1bml0LnNvdXJjZS5oZWFkaW5nKSB7XG4gICAgICBtZXRhQXJlYS5jcmVhdGVTcGFuKHtcbiAgICAgICAgdGV4dDogYFx1RDgzRFx1RENDRCAke3VuaXQuc291cmNlLmhlYWRpbmd9YCxcbiAgICAgICAgY2xzOiAnaGVhZGluZy1pbmZvJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgYWN0aW9uc0FyZWEgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ2NhcmQtYWN0aW9ucycgfSk7XG5cbiAgICBjb25zdCBqdW1wQnRuID0gYWN0aW9uc0FyZWEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdcdTIxOTcnLFxuICAgICAgY2xzOiAnYWN0aW9uLWJ0biBqdW1wLWJ0bicsXG4gICAgICBhdHRyOiB7IHRpdGxlOiAnSnVtcCB0byBzb3VyY2UnIH1cbiAgICB9KTtcbiAgICBqdW1wQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBhd2FpdCB0aGlzLmp1bXBUb1NvdXJjZSh1bml0KTtcbiAgICB9KTtcblxuICAgIC8vIFx1NEUwMFx1OTUyRVx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1NjMwOVx1OTRBRVx1N0VDNFxuICAgIGNvbnN0IGZsYXNoY2FyZEdyb3VwID0gYWN0aW9uc0FyZWEuY3JlYXRlRGl2KHsgY2xzOiAnZmxhc2hjYXJkLWJ0bi1ncm91cCcgfSk7XG5cbiAgICAvLyBcdTY2N0FcdTgwRkRcdTUyMUJcdTVFRkFcdUZGMDhcdTRFM0JcdTYzMDlcdTk0QUVcdUZGMDlcbiAgICBjb25zdCBxdWlja0NhcmRCdG4gPSBmbGFzaGNhcmRHcm91cC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1x1MjZBMScsXG4gICAgICBjbHM6ICdhY3Rpb24tYnRuIHF1aWNrLWNhcmQtYnRuJyxcbiAgICAgIGF0dHI6IHsgdGl0bGU6ICdRdWljayBjcmVhdGUgZmxhc2hjYXJkIChzbWFydCknIH1cbiAgICB9KTtcbiAgICBxdWlja0NhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGF3YWl0IHRoaXMucXVpY2tDcmVhdG9yLmNyZWF0ZVNtYXJ0Q2FyZCh1bml0KTtcbiAgICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICAgIH0pO1xuXG4gICAgLy8gXHU0RTBCXHU2MkM5XHU4M0RDXHU1MzU1XHU2MzA5XHU5NEFFXG4gICAgY29uc3QgbW9yZUNhcmRCdG4gPSBmbGFzaGNhcmRHcm91cC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1x1MjVCQycsXG4gICAgICBjbHM6ICdhY3Rpb24tYnRuIG1vcmUtY2FyZC1idG4nLFxuICAgICAgYXR0cjogeyB0aXRsZTogJ01vcmUgZmxhc2hjYXJkIG9wdGlvbnMnIH1cbiAgICB9KTtcbiAgICBtb3JlQ2FyZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5zaG93Rmxhc2hjYXJkTWVudShlLCB1bml0KTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGFjdGlvbnNBcmVhLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnXHVEODNEXHVEREQxJyxcbiAgICAgIGNsczogJ2FjdGlvbi1idG4gZGVsZXRlLWJ0bicsXG4gICAgICBhdHRyOiB7IHRpdGxlOiAnRGVsZXRlJyB9XG4gICAgfSk7XG4gICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBhd2FpdCB0aGlzLmRlbGV0ZUNvbnRlbnRVbml0KHVuaXQpO1xuICAgIH0pO1xuXG4gICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnNob3dDb250ZXh0TWVudShlLCB1bml0KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyQnlUYWcodW5pdHM6IENvbnRlbnRVbml0W10pIHtcbiAgICBjb25zdCBncm91cGVkID0gbmV3IE1hcDxzdHJpbmcsIENvbnRlbnRVbml0W10+KCk7XG5cbiAgICB1bml0cy5mb3JFYWNoKHVuaXQgPT4ge1xuICAgICAgaWYgKHVuaXQubWV0YWRhdGEudGFncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKCFncm91cGVkLmhhcygnVW50YWdnZWQnKSkge1xuICAgICAgICAgIGdyb3VwZWQuc2V0KCdVbnRhZ2dlZCcsIFtdKTtcbiAgICAgICAgfVxuICAgICAgICBncm91cGVkLmdldCgnVW50YWdnZWQnKSEucHVzaCh1bml0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgICAgaWYgKCFncm91cGVkLmhhcyh0YWcpKSB7XG4gICAgICAgICAgICBncm91cGVkLnNldCh0YWcsIFtdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZ3JvdXBlZC5nZXQodGFnKSEucHVzaCh1bml0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBzb3J0ZWRUYWdzID0gQXJyYXkuZnJvbShncm91cGVkLmtleXMoKSkuc29ydCgpO1xuICAgIHNvcnRlZFRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgY29uc3QgdGFnVW5pdHMgPSBncm91cGVkLmdldCh0YWcpITtcbiAgICAgIHRoaXMucmVuZGVyVGFnR3JvdXAodGFnLCB0YWdVbml0cyk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclRhZ0dyb3VwKHRhZzogc3RyaW5nLCB1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIGNvbnN0IGdyb3VwQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAndGFnLWdyb3VwJyB9KTtcblxuICAgIGNvbnN0IGhlYWRlciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLWhlYWRlcicgfSk7XG4gICAgY29uc3QgdGl0bGVFbCA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdncm91cC10aXRsZScgfSk7XG4gICAgdGl0bGVFbC5jcmVhdGVTcGFuKHsgdGV4dDogJ1x1RDgzQ1x1REZGN1x1RkUwRiAnLCBjbHM6ICdncm91cC1pY29uJyB9KTtcbiAgICB0aXRsZUVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiB0YWcsIGNsczogJ2dyb3VwLW5hbWUnIH0pO1xuXG4gICAgaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHt1bml0cy5sZW5ndGh9YCwgY2xzOiAnY291bnQtYmFkZ2UnIH0pO1xuXG4gICAgY29uc3QgY29sbGFwc2VCdG4gPSBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6ICdcdTI1QkMnLCBjbHM6ICdjb2xsYXBzZS1idG4nIH0pO1xuXG4gICAgY29uc3QgY29udGVudENvbnRhaW5lciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLWNvbnRlbnQnIH0pO1xuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICB0aGlzLnJlbmRlckNvbnRlbnRVbml0KGNvbnRlbnRDb250YWluZXIsIHVuaXQpO1xuICAgIH0pO1xuXG4gICAgbGV0IGlzQ29sbGFwc2VkID0gZmFsc2U7XG4gICAgY29sbGFwc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGlzQ29sbGFwc2VkID0gIWlzQ29sbGFwc2VkO1xuICAgICAgY29udGVudENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gaXNDb2xsYXBzZWQgPyAnbm9uZScgOiAnYmxvY2snO1xuICAgICAgY29sbGFwc2VCdG4udGV4dENvbnRlbnQgPSBpc0NvbGxhcHNlZCA/ICdcdTI1QjYnIDogJ1x1MjVCQyc7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckJ5RGF0ZSh1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIGNvbnN0IGdyb3VwZWQgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudFVuaXRbXT4oKTtcblxuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodW5pdC5tZXRhZGF0YS5jcmVhdGVkQXQpO1xuICAgICAgY29uc3QgZGF0ZUtleSA9IGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XG4gICAgICBcbiAgICAgIGlmICghZ3JvdXBlZC5oYXMoZGF0ZUtleSkpIHtcbiAgICAgICAgZ3JvdXBlZC5zZXQoZGF0ZUtleSwgW10pO1xuICAgICAgfVxuICAgICAgZ3JvdXBlZC5nZXQoZGF0ZUtleSkhLnB1c2godW5pdCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBzb3J0ZWREYXRlcyA9IEFycmF5LmZyb20oZ3JvdXBlZC5rZXlzKCkpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShiKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhKS5nZXRUaW1lKCk7XG4gICAgfSk7XG5cbiAgICBzb3J0ZWREYXRlcy5mb3JFYWNoKGRhdGUgPT4ge1xuICAgICAgY29uc3QgZGF0ZVVuaXRzID0gZ3JvdXBlZC5nZXQoZGF0ZSkhO1xuICAgICAgdGhpcy5yZW5kZXJEYXRlR3JvdXAoZGF0ZSwgZGF0ZVVuaXRzKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyRGF0ZUdyb3VwKGRhdGU6IHN0cmluZywgdW5pdHM6IENvbnRlbnRVbml0W10pIHtcbiAgICBjb25zdCBncm91cENvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2RhdGUtZ3JvdXAnIH0pO1xuXG4gICAgY29uc3QgaGVhZGVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtaGVhZGVyJyB9KTtcbiAgICBjb25zdCB0aXRsZUVsID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLXRpdGxlJyB9KTtcbiAgICB0aXRsZUVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnXHVEODNEXHVEQ0M1ICcsIGNsczogJ2dyb3VwLWljb24nIH0pO1xuICAgIHRpdGxlRWwuY3JlYXRlU3Bhbih7IHRleHQ6IGRhdGUsIGNsczogJ2dyb3VwLW5hbWUnIH0pO1xuXG4gICAgaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHt1bml0cy5sZW5ndGh9YCwgY2xzOiAnY291bnQtYmFkZ2UnIH0pO1xuXG4gICAgY29uc3QgY29sbGFwc2VCdG4gPSBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6ICdcdTI1QkMnLCBjbHM6ICdjb2xsYXBzZS1idG4nIH0pO1xuXG4gICAgY29uc3QgY29udGVudENvbnRhaW5lciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLWNvbnRlbnQnIH0pO1xuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICB0aGlzLnJlbmRlckNvbnRlbnRVbml0KGNvbnRlbnRDb250YWluZXIsIHVuaXQpO1xuICAgIH0pO1xuXG4gICAgbGV0IGlzQ29sbGFwc2VkID0gZmFsc2U7XG4gICAgY29sbGFwc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGlzQ29sbGFwc2VkID0gIWlzQ29sbGFwc2VkO1xuICAgICAgY29udGVudENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gaXNDb2xsYXBzZWQgPyAnbm9uZScgOiAnYmxvY2snO1xuICAgICAgY29sbGFwc2VCdG4udGV4dENvbnRlbnQgPSBpc0NvbGxhcHNlZCA/ICdcdTI1QjYnIDogJ1x1MjVCQyc7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHNob3dBbm5vdGF0aW9uSW5wdXQoY2FyZDogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0LCBleGlzdGluZ1RleHQ/OiBzdHJpbmcpIHtcbiAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTVERjJcdTdFQ0ZcdTY3MDlcdThGOTNcdTUxNjVcdTY4NDZcdTVDNTVcdTVGMDBcbiAgICBsZXQgaW5wdXRDb250YWluZXIgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5hbm5vdGF0aW9uLWlucHV0LWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xuICAgIFxuICAgIGlmIChpbnB1dENvbnRhaW5lcikge1xuICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1REYyXHU1QzU1XHU1RjAwXHVGRjBDXHU1MjE5XHU2Mjk4XHU1M0UwXG4gICAgICBpbnB1dENvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBcdTUyMUJcdTVFRkFcdThGOTNcdTUxNjVcdTUzM0FcdTU3REZcbiAgICBpbnB1dENvbnRhaW5lciA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnYW5ub3RhdGlvbi1pbnB1dC1jb250YWluZXInIH0pO1xuXG4gICAgY29uc3QgdGV4dGFyZWEgPSBpbnB1dENvbnRhaW5lci5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICBjbHM6ICdhbm5vdGF0aW9uLXRleHRhcmVhJyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnQWRkIGNvbW1lbnQuLi4nXG4gICAgfSk7XG4gICAgdGV4dGFyZWEudmFsdWUgPSBleGlzdGluZ1RleHQgfHwgJyc7XG4gICAgdGV4dGFyZWEucm93cyA9IDM7XG5cbiAgICAvLyBcdTYzMDlcdTk0QUVcdTUzM0FcdTU3REZcdUZGMDhcdTdCODBcdTUzMTZcdTcyNDhcdUZGMDlcbiAgICBjb25zdCBidXR0b25BcmVhID0gaW5wdXRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnYW5ub3RhdGlvbi1idXR0b25zJyB9KTtcblxuICAgIGlmIChleGlzdGluZ1RleHQpIHtcbiAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGJ1dHRvbkFyZWEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogJ0RlbGV0ZScsXG4gICAgICAgIGNsczogJ2Fubm90YXRpb24tZGVsZXRlLWJ0bidcbiAgICAgIH0pO1xuICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk7XG4gICAgICAgIGlmIChhbm5vdGF0aW9uKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZGVsZXRlQW5ub3RhdGlvbihhbm5vdGF0aW9uLmlkKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIGRlbGV0ZWQnKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkFyZWEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdTYXZlJyxcbiAgICAgIGNsczogJ2Fubm90YXRpb24tc2F2ZS1idG4nXG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHU0RkREXHU1QjU4XHU1MUZEXHU2NTcwXG4gICAgY29uc3Qgc2F2ZUFubm90YXRpb24gPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXh0ID0gdGV4dGFyZWEudmFsdWUudHJpbSgpO1xuICAgICAgaWYgKCF0ZXh0KSB7XG4gICAgICAgIGlucHV0Q29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChhbm5vdGF0aW9uKSB7XG4gICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU3M0IwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIudXBkYXRlQW5ub3RhdGlvbihhbm5vdGF0aW9uLmlkLCB7XG4gICAgICAgICAgICBjb250ZW50OiB0ZXh0XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NUIwXHU2Mjc5XHU2Q0U4XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuYWRkQ29udGVudEFubm90YXRpb24oXG4gICAgICAgICAgICB1bml0LmlkLFxuICAgICAgICAgICAgdGV4dFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBhbm5vdGF0aW9uOicsIGVycm9yKTtcbiAgICAgICAgbmV3IE5vdGljZSgnRXJyb3Igc2F2aW5nIGFubm90YXRpb24nKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgc2F2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNhdmVBbm5vdGF0aW9uKTtcblxuICAgIC8vIFx1NjUyRlx1NjMwMSBDdHJsK0VudGVyIFx1NUZFQlx1NjM3N1x1OTUyRVx1NEZERFx1NUI1OFxuICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmIChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHNhdmVBbm5vdGF0aW9uKCk7XG4gICAgICB9XG4gICAgICAvLyBFc2MgXHU5NTJFXHU1MTczXHU5NUVEXG4gICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaW5wdXRDb250YWluZXIucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBcdTgxRUFcdTUyQThcdTgwNUFcdTcxMjZcbiAgICB0ZXh0YXJlYS5mb2N1cygpO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG93Rmxhc2hjYXJkTWVudShlOiBNb3VzZUV2ZW50LCB1bml0OiBDb250ZW50VW5pdCkge1xuICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1MjZBMSBTbWFydCBjcmVhdGUnKVxuICAgICAgICAuc2V0SWNvbignemFwJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMucXVpY2tDcmVhdG9yLmNyZWF0ZVNtYXJ0Q2FyZCh1bml0KTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1RDgzRFx1RENERCBDcmVhdGUgUSZBIGNhcmQnKVxuICAgICAgICAuc2V0SWNvbignbWVzc2FnZS1zcXVhcmUnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5xdWlja0NyZWF0b3IuY3JlYXRlUXVpY2tRQUNhcmQodW5pdCk7XG4gICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdTI3MEZcdUZFMEYgQ3JlYXRlIENsb3plIGNhcmQnKVxuICAgICAgICAuc2V0SWNvbignZWRpdCcpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnF1aWNrQ3JlYXRvci5jcmVhdGVRdWlja0Nsb3plQ2FyZCh1bml0KTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdUQ4M0NcdURGQTggQ3VzdG9tIGNhcmQuLi4nKVxuICAgICAgICAuc2V0SWNvbignc2V0dGluZ3MnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBGbGFzaGNhcmRDcmVhdGVNb2RhbCB9ID0gYXdhaXQgaW1wb3J0KCcuL0ZsYXNoY2FyZENyZWF0ZU1vZGFsJyk7XG4gICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgRmxhc2hjYXJkQ3JlYXRlTW9kYWwoXG4gICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLFxuICAgICAgICAgICAgdW5pdCxcbiAgICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChlKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2hvd0JhdGNoQ3JlYXRlTW9kYWwoKSB7XG4gICAgY29uc3QgdW5pdHMgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRBbGxDb250ZW50VW5pdHMoKTtcbiAgICBcbiAgICAvLyBcdThGQzdcdTZFRTRcdTYzODlcdTVERjJcdTdFQ0ZcdTY3MDlcdTk1RUFcdTUzNjFcdTc2ODRcdTUxODVcdTVCQjlcbiAgICBjb25zdCB1bml0c1dpdGhvdXRDYXJkcyA9IHVuaXRzLmZpbHRlcih1ID0+IHUuZmxhc2hjYXJkSWRzLmxlbmd0aCA9PT0gMCk7XG4gICAgXG4gICAgaWYgKHVuaXRzV2l0aG91dENhcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnQWxsIGNvbnRlbnQgYWxyZWFkeSBoYXMgZmxhc2hjYXJkcyEnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtb2RhbCA9IG5ldyBCYXRjaENyZWF0ZU1vZGFsKFxuICAgICAgdGhpcy5hcHAsXG4gICAgICB0aGlzLnBsdWdpbixcbiAgICAgIHRoaXMucXVpY2tDcmVhdG9yLFxuICAgICAgdW5pdHNXaXRob3V0Q2FyZHMsXG4gICAgICAoKSA9PiB0aGlzLnJlZnJlc2goKVxuICAgICk7XG4gICAgbW9kYWwub3BlbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBpc0FsbFNlbGVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHVuaXRzID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0QWxsQ29udGVudFVuaXRzKCk7XG4gICAgLy8gXHU1RTk0XHU3NTI4XHU2NDFDXHU3RDIyXHU4RkM3XHU2RUU0XG4gICAgbGV0IGZpbHRlcmVkVW5pdHMgPSB1bml0cztcbiAgICBpZiAodGhpcy5zZWFyY2hRdWVyeSkge1xuICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLnNlYXJjaFF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgICBmaWx0ZXJlZFVuaXRzID0gdW5pdHMuZmlsdGVyKHVuaXQgPT5cbiAgICAgICAgdW5pdC5jb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgIHVuaXQuc291cmNlLmZpbGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkgfHxcbiAgICAgICAgdW5pdC5tZXRhZGF0YS50YWdzLnNvbWUodGFnID0+IHRhZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSlcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBmaWx0ZXJlZFVuaXRzLmxlbmd0aCA+IDAgJiYgdGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZSA9PT0gZmlsdGVyZWRVbml0cy5sZW5ndGg7XG4gIH1cblxuICBwcml2YXRlIHRvZ2dsZVNlbGVjdEFsbCgpIHtcbiAgICBjb25zdCB1bml0cyA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldEFsbENvbnRlbnRVbml0cygpO1xuICAgIC8vIFx1NUU5NFx1NzUyOFx1NjQxQ1x1N0QyMlx1OEZDN1x1NkVFNFxuICAgIGxldCBmaWx0ZXJlZFVuaXRzID0gdW5pdHM7XG4gICAgaWYgKHRoaXMuc2VhcmNoUXVlcnkpIHtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5zZWFyY2hRdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgICAgZmlsdGVyZWRVbml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+XG4gICAgICAgIHVuaXQuY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSB8fFxuICAgICAgICB1bml0LnNvdXJjZS5maWxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5zb21lKHRhZyA9PiB0YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkpXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzQWxsU2VsZWN0ZWQoKSkge1xuICAgICAgLy8gXHU1M0Q2XHU2RDg4XHU1MTY4XHU5MDA5XG4gICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5jbGVhcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTUxNjhcdTkwMDlcbiAgICAgIGZpbHRlcmVkVW5pdHMuZm9yRWFjaCh1bml0ID0+IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuYWRkKHVuaXQuaWQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlQmF0Y2hCdXR0b25zKCk7XG4gICAgdGhpcy51cGRhdGVDaGVja2JveGVzKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUNoZWNrYm94ZXMoKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICBjb25zdCBjaGVja2JveGVzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXRjaC1jaGVja2JveCcpIGFzIE5vZGVMaXN0T2Y8SFRNTElucHV0RWxlbWVudD47XG4gICAgXG4gICAgY2hlY2tib3hlcy5mb3JFYWNoKGNoZWNrYm94ID0+IHtcbiAgICAgIGNvbnN0IHVuaXRJZCA9IGNoZWNrYm94LmdldEF0dHJpYnV0ZSgnZGF0YS11bml0LWlkJyk7XG4gICAgICBpZiAodW5pdElkKSB7XG4gICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0aGlzLnNlbGVjdGVkVW5pdElkcy5oYXModW5pdElkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQmF0Y2hCdXR0b25zKCkge1xuICAgIGNvbnN0IHRvb2xiYXIgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy5sZWFybmluZy1zeXN0ZW0tdG9vbGJhcicpIGFzIEhUTUxFbGVtZW50O1xuICAgIGlmICh0b29sYmFyKSB7XG4gICAgICBjb25zdCBiYXRjaEFjdGlvbnMgPSB0b29sYmFyLnF1ZXJ5U2VsZWN0b3IoJy5iYXRjaC1hY3Rpb25zLW92ZXJ2aWV3JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAoYmF0Y2hBY3Rpb25zKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdEFsbEJ0biA9IGJhdGNoQWN0aW9ucy5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0LWFsbC1idG4nKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gYmF0Y2hBY3Rpb25zLnF1ZXJ5U2VsZWN0b3IoJy5iYXRjaC1kZWxldGUtYnRuJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGNyZWF0ZUJ0biA9IGJhdGNoQWN0aW9ucy5xdWVyeVNlbGVjdG9yKCcuYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBcbiAgICAgICAgaWYgKHNlbGVjdEFsbEJ0bikge1xuICAgICAgICAgIHNlbGVjdEFsbEJ0bi50ZXh0Q29udGVudCA9IHRoaXMuaXNBbGxTZWxlY3RlZCgpID8gJ1x1MjYxMSBEZXNlbGVjdCBBbGwnIDogJ1x1MjYxMCBTZWxlY3QgQWxsJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGRlbGV0ZUJ0bikge1xuICAgICAgICAgIGRlbGV0ZUJ0bi50ZXh0Q29udGVudCA9IGBcdUQ4M0RcdURERDFcdUZFMEYgRGVsZXRlICgke3RoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemV9KWA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChjcmVhdGVCdG4pIHtcbiAgICAgICAgICBjcmVhdGVCdG4udGV4dENvbnRlbnQgPSBgXHUyNkExIENyZWF0ZSBDYXJkcyAoJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSlgO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBiYXRjaERlbGV0ZU5vdGVzKCkge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgUGxlYXNlIHNlbGVjdCBub3RlcyB0byBkZWxldGUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWNvbmZpcm0oYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSBzZWxlY3RlZCBub3Rlcz9gKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBzdWNjZXNzID0gMDtcbiAgICBsZXQgZmFpbGVkID0gMDtcblxuICAgIGZvciAoY29uc3QgdW5pdElkIG9mIHRoaXMuc2VsZWN0ZWRVbml0SWRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5kZWxldGVDb250ZW50VW5pdCh1bml0SWQpO1xuICAgICAgICBzdWNjZXNzKys7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBub3RlOicsIGVycm9yKTtcbiAgICAgICAgZmFpbGVkKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICBuZXcgTm90aWNlKGBcdTI3MDUgRGVsZXRlZCAke3N1Y2Nlc3N9IG5vdGVzJHtmYWlsZWQgPiAwID8gYCwgJHtmYWlsZWR9IGZhaWxlZGAgOiAnJ31gKTtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYmF0Y2hDcmVhdGVGbGFzaGNhcmRzKCkge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgUGxlYXNlIHNlbGVjdCBub3RlcyB0byBjcmVhdGUgZmxhc2hjYXJkcycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHVuaXRzID0gQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkVW5pdElkcylcbiAgICAgIC5tYXAoaWQgPT4gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoaWQpKVxuICAgICAgLmZpbHRlcih1ID0+IHUgIT09IHVuZGVmaW5lZCAmJiB1LmZsYXNoY2FyZElkcy5sZW5ndGggPT09IDApIGFzIENvbnRlbnRVbml0W107XG5cbiAgICBpZiAodW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgU2VsZWN0ZWQgbm90ZXMgYWxyZWFkeSBoYXZlIGZsYXNoY2FyZHMnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtb2RhbCA9IG5ldyBCYXRjaENyZWF0ZU1vZGFsKFxuICAgICAgdGhpcy5hcHAsXG4gICAgICB0aGlzLnBsdWdpbixcbiAgICAgIHRoaXMucXVpY2tDcmVhdG9yLFxuICAgICAgdW5pdHMsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgfVxuICAgICk7XG4gICAgbW9kYWwub3BlbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBqdW1wVG9Tb3VyY2UodW5pdDogQ29udGVudFVuaXQpIHtcbiAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHVuaXQuc291cmNlLmZpbGUpO1xuICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcblxuICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XG4gICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcblxuICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShJdGVtVmlldyk7XG4gICAgaWYgKHZpZXcpIHtcbiAgICAgIGNvbnN0IGVkaXRvciA9ICh2aWV3IGFzIGFueSkuZWRpdG9yO1xuICAgICAgaWYgKGVkaXRvcikge1xuICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHsgbGluZTogdW5pdC5zb3VyY2UucG9zaXRpb24ubGluZSwgY2g6IDAgfSk7XG4gICAgICAgIGVkaXRvci5zY3JvbGxJbnRvVmlldyh7XG4gICAgICAgICAgZnJvbTogeyBsaW5lOiB1bml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogMCB9LFxuICAgICAgICAgIHRvOiB7IGxpbmU6IHVuaXQuc291cmNlLnBvc2l0aW9uLmxpbmUsIGNoOiAwIH1cbiAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBlZGl0b3Iuc2V0U2VsZWN0aW9uKFxuICAgICAgICAgICAgeyBsaW5lOiB1bml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogMCB9LFxuICAgICAgICAgICAgeyBsaW5lOiB1bml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogOTk5IH1cbiAgICAgICAgICApO1xuICAgICAgICB9LCAxMDApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGVsZXRlQ29udGVudFVuaXQodW5pdDogQ29udGVudFVuaXQpIHtcbiAgICBjb25zdCBjb25maXJtZWQgPSBhd2FpdCB0aGlzLmNvbmZpcm1EZWxldGUodW5pdCk7XG4gICAgaWYgKCFjb25maXJtZWQpIHJldHVybjtcblxuICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmRlbGV0ZUNvbnRlbnRVbml0KHVuaXQuaWQpO1xuICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBjb25maXJtRGVsZXRlKHVuaXQ6IENvbnRlbnRVbml0KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBjb25zdCBtb2RhbCA9IG5ldyBDb25maXJtTW9kYWwoXG4gICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAnRGVsZXRlIGNvbnRlbnQnLFxuICAgICAgICBgQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIGNvbnRlbnQ/XFxuXFxuXCIke3VuaXQuY29udGVudC5zdWJzdHJpbmcoMCwgNTApfS4uLlwiYCxcbiAgICAgICAgKCkgPT4gcmVzb2x2ZSh0cnVlKSxcbiAgICAgICAgKCkgPT4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICk7XG4gICAgICBtb2RhbC5vcGVuKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHNob3dDb250ZXh0TWVudShlOiBNb3VzZUV2ZW50LCB1bml0OiBDb250ZW50VW5pdCkge1xuICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ0p1bXAgdG8gc291cmNlJylcbiAgICAgICAgLnNldEljb24oJ2Fycm93LXJpZ2h0JylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5qdW1wVG9Tb3VyY2UodW5pdCkpXG4gICAgKTtcblxuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKTtcbiAgICBcbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZShhbm5vdGF0aW9uID8gJ0VkaXQgYW5ub3RhdGlvbicgOiAnQWRkIGFubm90YXRpb24nKVxuICAgICAgICAuc2V0SWNvbigncGVuY2lsJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNhcmQgPSAoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJy5jb250ZW50LWNhcmQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICBpZiAoY2FyZCkge1xuICAgICAgICAgICAgdGhpcy5zaG93QW5ub3RhdGlvbklucHV0KGNhcmQsIHVuaXQsIGFubm90YXRpb24/LmNvbnRlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdTI2QTEgUXVpY2sgY3JlYXRlIGZsYXNoY2FyZCcpXG4gICAgICAgIC5zZXRJY29uKCd6YXAnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5xdWlja0NyZWF0b3IuY3JlYXRlU21hcnRDYXJkKHVuaXQpO1xuICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnQ3JlYXRlIFEmQSBjYXJkJylcbiAgICAgICAgLnNldEljb24oJ21lc3NhZ2Utc3F1YXJlJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMucXVpY2tDcmVhdG9yLmNyZWF0ZVF1aWNrUUFDYXJkKHVuaXQpO1xuICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnQ3JlYXRlIENsb3plIGNhcmQnKVxuICAgICAgICAuc2V0SWNvbignZWRpdCcpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnF1aWNrQ3JlYXRvci5jcmVhdGVRdWlja0Nsb3plQ2FyZCh1bml0KTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ0N1c3RvbSBmbGFzaGNhcmQuLi4nKVxuICAgICAgICAuc2V0SWNvbignc2V0dGluZ3MnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBGbGFzaGNhcmRDcmVhdGVNb2RhbCB9ID0gYXdhaXQgaW1wb3J0KCcuL0ZsYXNoY2FyZENyZWF0ZU1vZGFsJyk7XG4gICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgRmxhc2hjYXJkQ3JlYXRlTW9kYWwoXG4gICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLFxuICAgICAgICAgICAgdW5pdCxcbiAgICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnVmlldyBTdGF0aXN0aWNzJylcbiAgICAgICAgLnNldEljb24oJ2Jhci1jaGFydCcpXG4gICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5hY3RpdmF0ZVN0YXRzKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnRGVsZXRlJylcbiAgICAgICAgLnNldEljb24oJ3RyYXNoJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5kZWxldGVDb250ZW50VW5pdCh1bml0KSlcbiAgICApO1xuXG4gICAgbWVudS5zaG93QXRNb3VzZUV2ZW50KGUpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRUeXBlSWNvbih0eXBlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGljb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ2hpZ2hsaWdodCc6ICdcdTI3MjgnLFxuICAgICAgJ2JvbGQnOiAnKionLFxuICAgICAgJ3RhZyc6ICdcdUQ4M0NcdURGRjcnLFxuICAgICAgJ2N1c3RvbSc6ICdcdTJCNTAnXG4gICAgfTtcbiAgICByZXR1cm4gaWNvbnNbdHlwZV0gfHwgJ1x1MjAyMic7XG4gIH1cblxuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgLyogXHU1REU1XHU1MTc3XHU2ODBGXHU2ODM3XHU1RjBGICovXG4gICAgICAubGVhcm5pbmctc3lzdGVtLXRvb2xiYXIge1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zZWFyY2gtY29udGFpbmVyIHsgZGlzcGxheTogZmxleDsgfVxuXG4gICAgICAuc2VhcmNoLWlucHV0IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgcGFkZGluZzogNnB4IDEwcHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtY29udGFpbmVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC1sYWJlbCB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLXNlbGVjdCB7XG4gICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgfVxuXG4gICAgICAucmVmcmVzaC1idG4ge1xuICAgICAgICBwYWRkaW5nOiA0cHggMTJweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgfVxuXG4gICAgICAucmVmcmVzaC1idG46aG92ZXIgeyBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTsgfVxuXG4gICAgICAuc3RhdHMtY29udGFpbmVyIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTUxODVcdTVCQjlcdTUzM0FcdTU3REZcdTY4MzdcdTVGMEYgKi9cbiAgICAgIC5sZWFybmluZy1zeXN0ZW0tY29udGVudCB7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICB9XG5cbiAgICAgIC5lbXB0eS1zdGF0ZSB7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBwYWRkaW5nOiA0MHB4IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5maWxlLWdyb3VwLCAudGFnLWdyb3VwLCAuZGF0ZS1ncm91cCB7IG1hcmdpbi1ib3R0b206IDIwcHg7IH1cblxuICAgICAgLmdyb3VwLWhlYWRlciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtaGVhZGVyOmhvdmVyIHsgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7IH1cblxuICAgICAgLmdyb3VwLXRpdGxlIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWljb24geyBtYXJnaW4tcmlnaHQ6IDRweDsgfVxuXG4gICAgICAuY291bnQtYmFkZ2Uge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIHBhZGRpbmc6IDJweCA4cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuY29sbGFwc2UtYnRuIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTY1ODdcdTRFRjZcdTYyNzlcdTZDRThcdTY2M0VcdTc5M0EgKi9cbiAgICAgIC5maWxlLWFubm90YXRpb24tZGlzcGxheSB7XG4gICAgICAgIG1hcmdpbjogOHB4IDAgMTJweCAwO1xuICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnktYWx0KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1hbm5vdGF0aW9uLWl0ZW0ge1xuICAgICAgICBwYWRkaW5nOiA0cHggMDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1hbm5vdGF0aW9uLWl0ZW0gc3Ryb25nIHsgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTsgfVxuXG4gICAgICAvKiBcdTUxODVcdTVCQjlcdTUzNjFcdTcyNDdcdTY4MzdcdTVGMEYgKi9cbiAgICAgIC5ncm91cC1jb250ZW50IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIHBhZGRpbmctbGVmdDogOHB4O1xuICAgICAgfVxuXG4gICAgICAuY29udGVudC1jYXJkIHtcbiAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuXG4gICAgICAuY29udGVudC1jYXJkOmhvdmVyIHtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1jb250ZW50IHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgIH1cblxuICAgICAgLnR5cGUtaWNvbiB7IGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsgfVxuXG4gICAgICAuY29udGVudC10ZXh0IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgICAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICAgICAgfVxuXG4gICAgICAuY2xpY2thYmxlLWNvbnRlbnQge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICBwYWRkaW5nOiA0cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIH1cblxuICAgICAgLmNsaWNrYWJsZS1jb250ZW50OmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1iYWRnZSwgLmZsYXNoY2FyZC1iYWRnZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBtYXJnaW4tbGVmdDogNHB4O1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1iYWRnZS5oYXMtYW5ub3RhdGlvbiB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTYyNzlcdTZDRThcdTY2M0VcdTc5M0FcdTY4MzdcdTVGMEYgKi9cbiAgICAgIC5hbm5vdGF0aW9uLWRpc3BsYXkge1xuICAgICAgICBtYXJnaW46IDEwcHggMDtcbiAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnktYWx0KTtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWRpc3BsYXk6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgICAgYm9yZGVyLWxlZnQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWNvbnRlbnQtZGlzcGxheSB7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tY29udGVudC1kaXNwbGF5IHN0cm9uZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tdGltZXN0YW1wIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjhlbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZmFpbnQpO1xuICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tYmFkZ2UtZGlzcGxheSB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgcGFkZGluZzogM3B4IDEwcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC8qIFx1NTE4NVx1ODA1NFx1NjI3OVx1NkNFOFx1OEY5M1x1NTE2NSAqL1xuICAgICAgLmFubm90YXRpb24taW5wdXQtY29udGFpbmVyIHtcbiAgICAgICAgbWFyZ2luOiAxMnB4IDA7XG4gICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYW5pbWF0aW9uOiBzbGlkZURvd24gMC4ycyBlYXNlO1xuICAgICAgfVxuXG4gICAgICBAa2V5ZnJhbWVzIHNsaWRlRG93biB7XG4gICAgICAgIGZyb20ge1xuICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMHB4KTtcbiAgICAgICAgfVxuICAgICAgICB0byB7XG4gICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tdGV4dGFyZWEge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgICAgIHJlc2l6ZTogdmVydGljYWw7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDYwcHg7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLXRleHRhcmVhOmZvY3VzIHtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi10ZXh0YXJlYTo6cGxhY2Vob2xkZXIge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1mYWludCk7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWJ1dHRvbnMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tYnV0dG9ucyBidXR0b24ge1xuICAgICAgICBwYWRkaW5nOiA2cHggMTZweDtcbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWRlbGV0ZS1idG4ge1xuICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1kZWxldGUtYnRuOmhvdmVyIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLXNhdmUtYnRuIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1zYXZlLWJ0bjpob3ZlciB7XG4gICAgICAgIG9wYWNpdHk6IDAuODtcbiAgICAgIH1cblxuICAgICAgLyogXHU1MTQzXHU2NTcwXHU2MzZFXHU1MzNBXHU1N0RGICovXG4gICAgICAuY2FyZC1tZXRhIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC50YWdzLWNvbnRhaW5lciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgZ2FwOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC50YWcge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIHBhZGRpbmc6IDJweCA4cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICB9XG5cbiAgICAgIC5oZWFkaW5nLWluZm8ge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgIH1cblxuICAgICAgLyogXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFICovXG4gICAgICAuY2FyZC1hY3Rpb25zIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC5hY3Rpb24tYnRuIHtcbiAgICAgICAgcGFkZGluZzogNHB4IDEwcHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG5cbiAgICAgIC5hY3Rpb24tYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICB9XG5cbiAgICAgIC5kZWxldGUtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTRFMDBcdTk1MkVcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcdTYzMDlcdTk0QUVcdTdFQzQgKi9cbiAgICAgIC5mbGFzaGNhcmQtYnRuLWdyb3VwIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiAwO1xuICAgICAgfVxuXG4gICAgICAucXVpY2stY2FyZC1idG4ge1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHggMCAwIDRweDtcbiAgICAgICAgYm9yZGVyLXJpZ2h0OiBub25lO1xuICAgICAgfVxuXG4gICAgICAubW9yZS1jYXJkLWJ0biB7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDAgNHB4IDRweCAwO1xuICAgICAgICBwYWRkaW5nOiA0cHggNnB4O1xuICAgICAgICBmb250LXNpemU6IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5xdWljay1jYXJkLWJ0bjpob3ZlciwgLm1vcmUtY2FyZC1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1jcmVhdGUtYnRuIHtcbiAgICAgICAgcGFkZGluZzogNnB4IDEycHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1jcmVhdGUtYnRuOmhvdmVyIHtcbiAgICAgICAgb3BhY2l0eTogMC44O1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtYWN0aW9ucy1vdmVydmlldyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1tb2RlLWJ0bixcbiAgICAgIC5zZWxlY3QtYWxsLWJ0bixcbiAgICAgIC5iYXRjaC1kZWxldGUtYnRuLFxuICAgICAgLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG4ge1xuICAgICAgICBwYWRkaW5nOiA2cHggMTJweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3QtYWxsLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtbW9kZS1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLWRlbGV0ZS1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLWNoZWNrYm94IHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxufVxuXG4vLyBcdTYyNzlcdTkxQ0ZcdTUyMUJcdTVFRkFcdTZBMjFcdTYwMDFcdTY4NDZcbmV4cG9ydCBjbGFzcyBCYXRjaENyZWF0ZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4sXG4gICAgcHJpdmF0ZSBxdWlja0NyZWF0b3I6IFF1aWNrRmxhc2hjYXJkQ3JlYXRvcixcbiAgICBwcml2YXRlIHVuaXRzOiBDb250ZW50VW5pdFtdLFxuICAgIHByaXZhdGUgb25Db21wbGV0ZTogKCkgPT4gdm9pZFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIFxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdTI2QTEgQmF0Y2ggQ3JlYXRlIEZsYXNoY2FyZHMnIH0pO1xuICAgIFxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiBgQ3JlYXRlIGZsYXNoY2FyZHMgZm9yICR7dGhpcy51bml0cy5sZW5ndGh9IGNvbnRlbnQgaXRlbXMgd2l0aG91dCBjYXJkcy5gXG4gICAgfSk7XG5cbiAgICAvLyBcdTkwMDlcdTYyRTlcdTdDN0JcdTU3OEJcbiAgICBjb25zdCB0eXBlQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ3R5cGUtc2VsZWN0LWNvbnRhaW5lcicgfSk7XG4gICAgdHlwZUNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDYXJkIFR5cGUnIH0pO1xuXG4gICAgbGV0IHNlbGVjdGVkVHlwZTogJ3NtYXJ0JyB8ICdxYScgfCAnY2xvemUnID0gJ3NtYXJ0JztcblxuICAgIGNvbnN0IHR5cGVzID0gW1xuICAgICAgeyB2YWx1ZTogJ3NtYXJ0JywgbGFiZWw6ICdcdTI2QTEgU21hcnQgKEF1dG8tZGV0ZWN0KScsIGRlc2M6ICdBdXRvbWF0aWNhbGx5IGNob29zZSB0aGUgYmVzdCB0eXBlJyB9LFxuICAgICAgeyB2YWx1ZTogJ3FhJywgbGFiZWw6ICdcdUQ4M0RcdURDREQgUSZBIENhcmRzJywgZGVzYzogJ1F1ZXN0aW9uIGFuZCBhbnN3ZXIgZm9ybWF0JyB9LFxuICAgICAgeyB2YWx1ZTogJ2Nsb3plJywgbGFiZWw6ICdcdTI3MEZcdUZFMEYgQ2xvemUgQ2FyZHMnLCBkZXNjOiAnRmlsbCBpbiB0aGUgYmxhbmtzJyB9XG4gICAgXTtcblxuICAgIHR5cGVzLmZvckVhY2godHlwZSA9PiB7XG4gICAgICBjb25zdCBvcHRpb24gPSB0eXBlQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3R5cGUtb3B0aW9uJyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmFkaW8gPSBvcHRpb24uY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICB0eXBlOiAncmFkaW8nLFxuICAgICAgICB2YWx1ZTogdHlwZS52YWx1ZSxcbiAgICAgICAgYXR0cjogeyBuYW1lOiAnY2FyZC10eXBlJyB9XG4gICAgICB9KTtcbiAgICAgIGlmICh0eXBlLnZhbHVlID09PSAnc21hcnQnKSByYWRpby5jaGVja2VkID0gdHJ1ZTtcblxuICAgICAgY29uc3QgbGFiZWwgPSBvcHRpb24uY3JlYXRlRGl2KHsgY2xzOiAndHlwZS1sYWJlbCcgfSk7XG4gICAgICBsYWJlbC5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiB0eXBlLmxhYmVsIH0pO1xuICAgICAgbGFiZWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogdHlwZS5kZXNjLCBjbHM6ICd0eXBlLWRlc2MnIH0pO1xuXG4gICAgICBvcHRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHJhZGlvLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICBzZWxlY3RlZFR5cGUgPSB0eXBlLnZhbHVlIGFzIGFueTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gXHU2MzA5XHU5NEFFXG4gICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ21vZGFsLWJ1dHRvbi1jb250YWluZXInIH0pO1xuXG4gICAgY29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG5cbiAgICBjb25zdCBjcmVhdGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiBgQ3JlYXRlICR7dGhpcy51bml0cy5sZW5ndGh9IENhcmRzYCxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgY3JlYXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5iYXRjaENyZWF0ZShzZWxlY3RlZFR5cGUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRTdHlsZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYmF0Y2hDcmVhdGUodHlwZTogJ3NtYXJ0JyB8ICdxYScgfCAnY2xvemUnKSB7XG4gICAgY29uc3QgeyBzdWNjZXNzLCBmYWlsZWQgfSA9IGF3YWl0IHRoaXMucXVpY2tDcmVhdG9yLmNyZWF0ZUJhdGNoQ2FyZHModGhpcy51bml0cywgdHlwZSk7XG4gICAgXG4gICAgbmV3IE5vdGljZShgXHUyNzA1IENyZWF0ZWQgJHtzdWNjZXNzfSBmbGFzaGNhcmRzISAke2ZhaWxlZCA+IDAgPyBgKCR7ZmFpbGVkfSBmYWlsZWQpYCA6ICcnfWApO1xuICAgIFxuICAgIHRoaXMuY2xvc2UoKTtcbiAgICB0aGlzLm9uQ29tcGxldGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAudHlwZS1zZWxlY3QtY29udGFpbmVyIHtcbiAgICAgICAgbWFyZ2luOiAyMHB4IDA7XG4gICAgICB9XG5cbiAgICAgIC50eXBlLW9wdGlvbiB7XG4gICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuXG4gICAgICAudHlwZS1vcHRpb246aG92ZXIge1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAudHlwZS1vcHRpb24gaW5wdXRbdHlwZT1cInJhZGlvXCJdIHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAudHlwZS1sYWJlbCB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgdmVydGljYWwtYWxpZ246IHRvcDtcbiAgICAgIH1cblxuICAgICAgLnR5cGUtZGVzYyB7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgbWFyZ2luLXRvcDogNHB4O1xuICAgICAgfVxuICAgIGA7XG5cbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuXG5jbGFzcyBDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwcDogQXBwLFxuICAgIHByaXZhdGUgdGl0bGU6IHN0cmluZyxcbiAgICBwcml2YXRlIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBwcml2YXRlIG9uQ29uZmlybTogKCkgPT4gdm9pZCxcbiAgICBwcml2YXRlIG9uQ2FuY2VsOiAoKSA9PiB2b2lkXG4gICkge1xuICAgIHN1cGVyKGFwcCk7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdGhpcy50aXRsZSB9KTtcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHRoaXMubWVzc2FnZSB9KTtcblxuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdtb2RhbC1idXR0b24tY29udGFpbmVyJyB9KTtcbiAgICBcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgdGhpcy5vbkNhbmNlbCgpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgY29uZmlybUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdEZWxldGUnLFxuICAgICAgY2xzOiAnbW9kLXdhcm5pbmcnXG4gICAgfSk7XG4gICAgY29uZmlybUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMub25Db25maXJtKCk7XG4gICAgfSk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIExlYXJuaW5nU3lzdGVtUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgQW5ub3RhdGlvbiB9IGZyb20gJy4uL2NvcmUvQW5ub3RhdGlvbk1hbmFnZXInO1xuaW1wb3J0IHsgQ29udGVudFVuaXQgfSBmcm9tICcuLi9jb3JlL0RhdGFNYW5hZ2VyJztcblxuZXhwb3J0IGNsYXNzIEFubm90YXRpb25Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBjb250ZW50VW5pdDogQ29udGVudFVuaXQ7XG4gIHByaXZhdGUgZXhpc3RpbmdBbm5vdGF0aW9uPzogQW5ub3RhdGlvbjtcbiAgcHJpdmF0ZSBhbm5vdGF0aW9uVGV4dDogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgYmFkZ2VUZXh0OiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBiYWRnZUNvbG9yOiBzdHJpbmcgPSAnIzVCOUJENSc7XG4gIHByaXZhdGUgb25TYXZlOiAoYW5ub3RhdGlvbjogQW5ub3RhdGlvbikgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4sXG4gICAgY29udGVudFVuaXQ6IENvbnRlbnRVbml0LFxuICAgIG9uU2F2ZTogKGFubm90YXRpb246IEFubm90YXRpb24pID0+IHZvaWRcbiAgKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLmNvbnRlbnRVbml0ID0gY29udGVudFVuaXQ7XG4gICAgdGhpcy5vblNhdmUgPSBvblNhdmU7XG5cbiAgICAvLyBcdTUyQTBcdThGN0RcdTczQjBcdTY3MDlcdTYyNzlcdTZDRThcbiAgICB0aGlzLmV4aXN0aW5nQW5ub3RhdGlvbiA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldENvbnRlbnRBbm5vdGF0aW9uKFxuICAgICAgY29udGVudFVuaXQuaWRcbiAgICApO1xuXG4gICAgaWYgKHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uKSB7XG4gICAgICB0aGlzLmFubm90YXRpb25UZXh0ID0gdGhpcy5leGlzdGluZ0Fubm90YXRpb24uY29udGVudDtcbiAgICAgIGlmICh0aGlzLmV4aXN0aW5nQW5ub3RhdGlvbi5iYWRnZSkge1xuICAgICAgICB0aGlzLmJhZGdlVGV4dCA9IHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uLmJhZGdlLnRleHQ7XG4gICAgICAgIHRoaXMuYmFkZ2VDb2xvciA9IHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uLmJhZGdlLmNvbG9yO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2Fubm90YXRpb24tbW9kYWwnKTtcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyBcbiAgICAgIHRleHQ6IHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uID8gJ0VkaXQgQW5ub3RhdGlvbicgOiAnQWRkIEFubm90YXRpb24nIFxuICAgIH0pO1xuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU1MzlGXHU2NTg3XHU1MTg1XHU1QkI5XG4gICAgY29uc3QgY29udGVudFByZXZpZXcgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnYW5ub3RhdGlvbi1jb250ZW50LXByZXZpZXcnIH0pO1xuICAgIGNvbnRlbnRQcmV2aWV3LmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0NvbnRlbnQ6JyB9KTtcbiAgICBjb250ZW50UHJldmlldy5jcmVhdGVFbCgnYmxvY2txdW90ZScsIHsgdGV4dDogdGhpcy5jb250ZW50VW5pdC5jb250ZW50IH0pO1xuXG4gICAgLy8gXHU2Mjc5XHU2Q0U4XHU2NTg3XHU2NzJDXHU1MzNBXHU1N0RGXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLnNldE5hbWUoJ0Fubm90YXRpb24nKVxuICAgICAgLnNldERlc2MoJ0FkZCB5b3VyIG5vdGVzIG9yIGNvbW1lbnRzIGFib3V0IHRoaXMgY29udGVudCcpXG4gICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB7XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHlvdXIgYW5ub3RhdGlvbiBoZXJlLi4uJylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5hbm5vdGF0aW9uVGV4dClcbiAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5hbm5vdGF0aW9uVGV4dCA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgdGV4dC5pbnB1dEVsLnJvd3MgPSA2O1xuICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICB9KTtcblxuICAgIC8vIFx1ODlEMlx1NjgwN1x1OEJCRVx1N0Y2RVxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdCYWRnZSAoT3B0aW9uYWwpJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5zZXROYW1lKCdCYWRnZSB0ZXh0JylcbiAgICAgIC5zZXREZXNjKCdTaG9ydCB0ZXh0IHRvIGRpc3BsYXkgYXMgYSBiYWRnZSAoZS5nLiwgXCJcdTkxQ0RcdTg5ODFcIiwgXCJcdTVGODVcdTU5MERcdTRFNjBcIiknKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdCYWRnZSB0ZXh0JylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5iYWRnZVRleHQpXG4gICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuYmFkZ2VUZXh0ID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJhZGdlUHJldmlldygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLnNldE5hbWUoJ0JhZGdlIGNvbG9yJylcbiAgICAgIC5zZXREZXNjKCdDaG9vc2UgYSBjb2xvciBmb3IgdGhlIGJhZGdlJylcbiAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgLmFkZE9wdGlvbignIzVCOUJENScsICdcdUQ4M0RcdUREMzUgQmx1ZScpXG4gICAgICAgICAgLmFkZE9wdGlvbignIzcwQUQ0NycsICdcdUQ4M0RcdURGRTIgR3JlZW4nKVxuICAgICAgICAgIC5hZGRPcHRpb24oJyNGRkMwMDAnLCAnXHVEODNEXHVERkUxIFllbGxvdycpXG4gICAgICAgICAgLmFkZE9wdGlvbignI0ZGNkI2QicsICdcdUQ4M0RcdUREMzQgUmVkJylcbiAgICAgICAgICAuYWRkT3B0aW9uKCcjQzc4QkZGJywgJ1x1RDgzRFx1REZFMyBQdXJwbGUnKVxuICAgICAgICAgIC5hZGRPcHRpb24oJyNGRjlGNDMnLCAnXHVEODNEXHVERkUwIE9yYW5nZScpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuYmFkZ2VDb2xvcilcbiAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5iYWRnZUNvbG9yID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJhZGdlUHJldmlldygpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAvLyBcdTg5RDJcdTY4MDdcdTk4ODRcdTg5QzhcbiAgICBjb25zdCBiYWRnZVByZXZpZXcgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnYmFkZ2UtcHJldmlldy1jb250YWluZXInIH0pO1xuICAgIGJhZGdlUHJldmlldy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ByZXZpZXc6ICcsIGNsczogJ3ByZXZpZXctbGFiZWwnIH0pO1xuICAgIGNvbnN0IGJhZGdlRWwgPSBiYWRnZVByZXZpZXcuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ2JhZGdlLXByZXZpZXcnIH0pO1xuICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwgPSBiYWRnZUVsO1xuICAgIHRoaXMudXBkYXRlQmFkZ2VQcmV2aWV3KCk7XG5cbiAgICAvLyBcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBcdTUyMjBcdTk2NjRcdTYzMDlcdTk0QUVcdUZGMDhcdTU5ODJcdTY3OUNcdTY2MkZcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdUZGMDlcbiAgICBpZiAodGhpcy5leGlzdGluZ0Fubm90YXRpb24pIHtcbiAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgdGV4dDogJ0RlbGV0ZScsXG4gICAgICAgIGNsczogJ21vZC13YXJuaW5nJ1xuICAgICAgfSk7XG4gICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlQW5ub3RhdGlvbigpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAnU2F2ZScsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIHNhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVBbm5vdGF0aW9uKCk7XG4gICAgfSk7XG5cbiAgICAvLyBcdTZERkJcdTUyQTBcdTY4MzdcdTVGMEZcbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBiYWRnZVByZXZpZXdFbDogSFRNTEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSB1cGRhdGVCYWRnZVByZXZpZXcoKSB7XG4gICAgaWYgKCF0aGlzLmJhZGdlUHJldmlld0VsKSByZXR1cm47XG5cbiAgICBpZiAodGhpcy5iYWRnZVRleHQpIHtcbiAgICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwudGV4dENvbnRlbnQgPSB0aGlzLmJhZGdlVGV4dDtcbiAgICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5iYWRnZUNvbG9yO1xuICAgICAgdGhpcy5iYWRnZVByZXZpZXdFbC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwudGV4dENvbnRlbnQgPSAnTm8gYmFkZ2UnO1xuICAgICAgdGhpcy5iYWRnZVByZXZpZXdFbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xuICAgICAgdGhpcy5iYWRnZVByZXZpZXdFbC5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzYXZlQW5ub3RhdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuYW5ub3RhdGlvblRleHQudHJpbSgpKSB7XG4gICAgICBuZXcgTm90aWNlKCdQbGVhc2UgZW50ZXIgYW5ub3RhdGlvbiB0ZXh0Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGxldCBhbm5vdGF0aW9uOiBBbm5vdGF0aW9uO1xuXG4gICAgICBpZiAodGhpcy5leGlzdGluZ0Fubm90YXRpb24pIHtcbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU3M0IwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLnVwZGF0ZUFubm90YXRpb24oXG4gICAgICAgICAgdGhpcy5leGlzdGluZ0Fubm90YXRpb24uaWQsXG4gICAgICAgICAge1xuICAgICAgICAgICAgY29udGVudDogdGhpcy5hbm5vdGF0aW9uVGV4dCxcbiAgICAgICAgICAgIGJhZGdlOiB0aGlzLmJhZGdlVGV4dCA/IHtcbiAgICAgICAgICAgICAgdGV4dDogdGhpcy5iYWRnZVRleHQsXG4gICAgICAgICAgICAgIGNvbG9yOiB0aGlzLmJhZGdlQ29sb3JcbiAgICAgICAgICAgIH0gOiB1bmRlZmluZWRcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRBbm5vdGF0aW9uKFxuICAgICAgICAgIHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uLmlkXG4gICAgICAgICkhO1xuICAgICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIHVwZGF0ZWQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjVCMFx1NjI3OVx1NkNFOFxuICAgICAgICBhbm5vdGF0aW9uID0gYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuYWRkQ29udGVudEFubm90YXRpb24oXG4gICAgICAgICAgdGhpcy5jb250ZW50VW5pdC5pZCxcbiAgICAgICAgICB0aGlzLmFubm90YXRpb25UZXh0LFxuICAgICAgICAgIHRoaXMuYmFkZ2VUZXh0ID8ge1xuICAgICAgICAgICAgdGV4dDogdGhpcy5iYWRnZVRleHQsXG4gICAgICAgICAgICBjb2xvcjogdGhpcy5iYWRnZUNvbG9yXG4gICAgICAgICAgfSA6IHVuZGVmaW5lZFxuICAgICAgICApO1xuICAgICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIGFkZGVkJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMub25TYXZlKGFubm90YXRpb24pO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgYW5ub3RhdGlvbjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdFcnJvciBzYXZpbmcgYW5ub3RhdGlvbicpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGVsZXRlQW5ub3RhdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZGVsZXRlQW5ub3RhdGlvbihcbiAgICAgICAgdGhpcy5leGlzdGluZ0Fubm90YXRpb24uaWRcbiAgICAgICk7XG4gICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIGRlbGV0ZWQnKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMub25TYXZlKG51bGwgYXMgYW55KTsgLy8gXHU5MDFBXHU3N0U1XHU1MjIwXHU5NjY0XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGFubm90YXRpb246JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgnRXJyb3IgZGVsZXRpbmcgYW5ub3RhdGlvbicpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAuYW5ub3RhdGlvbi1tb2RhbCB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWNvbnRlbnQtcHJldmlldyB7XG4gICAgICAgIG1hcmdpbjogMjBweCAwO1xuICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tY29udGVudC1wcmV2aWV3IGgzIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1jb250ZW50LXByZXZpZXcgYmxvY2txdW90ZSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC5iYWRnZS1wcmV2aWV3LWNvbnRhaW5lciB7XG4gICAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIH1cblxuICAgICAgLnByZXZpZXctbGFiZWwge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMTBweDtcbiAgICAgIH1cblxuICAgICAgLmJhZGdlLXByZXZpZXcge1xuICAgICAgICBwYWRkaW5nOiA0cHggMTBweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLm1vZGFsLWJ1dHRvbi1jb250YWluZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5tb2RhbC1idXR0b24tY29udGFpbmVyIGJ1dHRvbiB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cblxuLyoqXG4gKiBcdTY1ODdcdTRFRjZcdTYyNzlcdTZDRThcdTZBMjFcdTYwMDFcdTY4NDZcbiAqL1xuZXhwb3J0IGNsYXNzIEZpbGVBbm5vdGF0aW9uTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgZmlsZVBhdGg6IHN0cmluZztcbiAgcHJpdmF0ZSBleGlzdGluZ0Fubm90YXRpb25zOiBBbm5vdGF0aW9uW10gPSBbXTtcbiAgcHJpdmF0ZSBhbm5vdGF0aW9uVGV4dDogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgb25TYXZlOiAoKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwcDogQXBwLFxuICAgIHByaXZhdGUgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbixcbiAgICBmaWxlUGF0aDogc3RyaW5nLFxuICAgIG9uU2F2ZTogKCkgPT4gdm9pZFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMuZmlsZVBhdGggPSBmaWxlUGF0aDtcbiAgICB0aGlzLm9uU2F2ZSA9IG9uU2F2ZTtcblxuICAgIC8vIFx1NTJBMFx1OEY3RFx1NzNCMFx1NjcwOVx1NjI3OVx1NkNFOFxuICAgIHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9ucyA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldEZpbGVBbm5vdGF0aW9ucyhmaWxlUGF0aCk7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0ZpbGUgQW5ub3RhdGlvbnMnIH0pO1xuXG4gICAgY29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVQYXRoLnNwbGl0KCcvJykucG9wKCk/LnJlcGxhY2UoJy5tZCcsICcnKSB8fCB0aGlzLmZpbGVQYXRoO1xuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiBgRmlsZTogJHtmaWxlTmFtZX1gLFxuICAgICAgY2xzOiAnZmlsZS1uYW1lJ1xuICAgIH0pO1xuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU3M0IwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAgaWYgKHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBleGlzdGluZ1NlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnZXhpc3RpbmctYW5ub3RhdGlvbnMnIH0pO1xuICAgICAgZXhpc3RpbmdTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0V4aXN0aW5nIEFubm90YXRpb25zJyB9KTtcblxuICAgICAgdGhpcy5leGlzdGluZ0Fubm90YXRpb25zLmZvckVhY2goYW5ub3RhdGlvbiA9PiB7XG4gICAgICAgIGNvbnN0IGFubm90YXRpb25DYXJkID0gZXhpc3RpbmdTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ2Fubm90YXRpb24tY2FyZCcgfSk7XG4gICAgICAgIGFubm90YXRpb25DYXJkLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBhbm5vdGF0aW9uLmNvbnRlbnQgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoYW5ub3RhdGlvbi5tZXRhZGF0YS5jcmVhdGVkQXQpLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuICAgICAgICBhbm5vdGF0aW9uQ2FyZC5jcmVhdGVFbCgnc21hbGwnLCB7IFxuICAgICAgICAgIHRleHQ6IGBDcmVhdGVkOiAke2RhdGV9YCxcbiAgICAgICAgICBjbHM6ICdhbm5vdGF0aW9uLWRhdGUnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGFubm90YXRpb25DYXJkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgdGV4dDogJ1x1RDgzRFx1REREMSBEZWxldGUnLFxuICAgICAgICAgIGNsczogJ2RlbGV0ZS1hbm5vdGF0aW9uLWJ0bidcbiAgICAgICAgfSk7XG4gICAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZUFubm90YXRpb24oYW5ub3RhdGlvbi5pZCk7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgIHRoaXMub25TYXZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU2NUIwXHU2Mjc5XHU2Q0U4XHU4RjkzXHU1MTY1XG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FkZCBOZXcgQW5ub3RhdGlvbicgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAuc2V0TmFtZSgnQW5ub3RhdGlvbicpXG4gICAgICAuc2V0RGVzYygnQWRkIG5vdGVzIGFib3V0IHRoaXMgZmlsZScpXG4gICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB7XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIGZpbGUgYW5ub3RhdGlvbi4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuYW5ub3RhdGlvblRleHQpXG4gICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuYW5ub3RhdGlvblRleHQgPSB2YWx1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHRleHQuaW5wdXRFbC5yb3dzID0gNDtcbiAgICAgICAgdGV4dC5pbnB1dEVsLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgfSk7XG5cbiAgICAvLyBcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG5cbiAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdTYXZlJyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgc2F2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZUFubm90YXRpb24oKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2F2ZUFubm90YXRpb24oKSB7XG4gICAgaWYgKCF0aGlzLmFubm90YXRpb25UZXh0LnRyaW0oKSkge1xuICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGVudGVyIGFubm90YXRpb24gdGV4dCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5hZGRGaWxlQW5ub3RhdGlvbihcbiAgICAgICAgdGhpcy5maWxlUGF0aCxcbiAgICAgICAgdGhpcy5hbm5vdGF0aW9uVGV4dFxuICAgICAgKTtcbiAgICAgIG5ldyBOb3RpY2UoJ0ZpbGUgYW5ub3RhdGlvbiBhZGRlZCcpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgdGhpcy5vblNhdmUoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIGZpbGUgYW5ub3RhdGlvbjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdFcnJvciBzYXZpbmcgZmlsZSBhbm5vdGF0aW9uJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkZWxldGVBbm5vdGF0aW9uKGlkOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZGVsZXRlQW5ub3RhdGlvbihpZCk7XG4gICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIGRlbGV0ZWQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgYW5ub3RhdGlvbjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdFcnJvciBkZWxldGluZyBhbm5vdGF0aW9uJyk7XG4gICAgfVxuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufSIsICJpbXBvcnQgeyBQbHVnaW4sIFRGaWxlLCBXb3Jrc3BhY2VMZWFmLCBOb3RpY2UsIE1hcmtkb3duVmlldyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFNldHRpbmdzVGFiIH0gZnJvbSAnLi91aS9TZXR0aW5nc1RhYic7XG5pbXBvcnQgeyBPdmVydmlld1ZpZXcsIFZJRVdfVFlQRV9PVkVSVklFVyB9IGZyb20gJy4vdWkvT3ZlcnZpZXdWaWV3JztcbmltcG9ydCB7IFNpZGViYXJPdmVydmlld1ZpZXcsIFZJRVdfVFlQRV9TSURFQkFSX09WRVJWSUVXLCBWSUVXX1RZUEVfTUFJTl9PVkVSVklFVyAgfSBmcm9tICcuL3VpL1NpZGViYXJPdmVydmlld1ZpZXcnO1xuaW1wb3J0IHsgUmV2aWV3VmlldywgVklFV19UWVBFX1JFVklFVyB9IGZyb20gJy4vdWkvUmV2aWV3Vmlldyc7XG5pbXBvcnQgeyBTdGF0c1ZpZXcsIFZJRVdfVFlQRV9TVEFUUyB9IGZyb20gJy4vdWkvU3RhdHNWaWV3JztcbmltcG9ydCB7IERhdGFNYW5hZ2VyIH0gZnJvbSAnLi9jb3JlL0RhdGFNYW5hZ2VyJztcbmltcG9ydCB7IEV4dHJhY3Rpb25FbmdpbmUgfSBmcm9tICcuL2NvcmUvRXh0cmFjdGlvbkVuZ2luZSc7XG5pbXBvcnQgeyBBbm5vdGF0aW9uTWFuYWdlciB9IGZyb20gJy4vY29yZS9Bbm5vdGF0aW9uTWFuYWdlcic7XG5pbXBvcnQgeyBGbGFzaGNhcmRNYW5hZ2VyIH0gZnJvbSAnLi9jb3JlL0ZsYXNoY2FyZE1hbmFnZXInO1xuXG5pbnRlcmZhY2UgTGVhcm5pbmdTeXN0ZW1TZXR0aW5ncyB7XG4gIGV4dHJhY3Rpb25FbmFibGVkOiBib29sZWFuO1xuICBhdXRvU2NhbjogYm9vbGVhbjtcbiAgZGVmYXVsdERlY2s6IHN0cmluZztcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTGVhcm5pbmdTeXN0ZW1TZXR0aW5ncyA9IHtcbiAgZXh0cmFjdGlvbkVuYWJsZWQ6IHRydWUsXG4gIGF1dG9TY2FuOiBmYWxzZSxcbiAgZGVmYXVsdERlY2s6ICdEZWZhdWx0J1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5nczogTGVhcm5pbmdTeXN0ZW1TZXR0aW5ncztcbiAgZGF0YU1hbmFnZXI6IERhdGFNYW5hZ2VyO1xuICBleHRyYWN0aW9uRW5naW5lOiBFeHRyYWN0aW9uRW5naW5lO1xuICBhbm5vdGF0aW9uTWFuYWdlcjogQW5ub3RhdGlvbk1hbmFnZXI7XG4gIGZsYXNoY2FyZE1hbmFnZXI6IEZsYXNoY2FyZE1hbmFnZXI7XG5cblxuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgY29uc29sZS5sb2coJ0xvYWRpbmcgTGVhcm5pbmcgU3lzdGVtIFBsdWdpbicpO1xuXG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1NjgzOFx1NUZDM1x1NkEyMVx1NTc1N1xuICAgIHRoaXMuZGF0YU1hbmFnZXIgPSBuZXcgRGF0YU1hbmFnZXIodGhpcy5hcHAsIHRoaXMpO1xuICAgIGF3YWl0IHRoaXMuZGF0YU1hbmFnZXIuaW5pdGlhbGl6ZSgpO1xuXG4gICAgdGhpcy5hbm5vdGF0aW9uTWFuYWdlciA9IG5ldyBBbm5vdGF0aW9uTWFuYWdlcih0aGlzLmFwcCwgdGhpcyk7XG4gICAgYXdhaXQgdGhpcy5hbm5vdGF0aW9uTWFuYWdlci5pbml0aWFsaXplKCk7XG5cbiAgICB0aGlzLmZsYXNoY2FyZE1hbmFnZXIgPSBuZXcgRmxhc2hjYXJkTWFuYWdlcihcbiAgICAgIHRoaXMuYXBwLFxuICAgICAgdGhpcy5kYXRhTWFuYWdlcixcbiAgICAgIHRoaXNcbiAgICApO1xuICAgIGF3YWl0IHRoaXMuZmxhc2hjYXJkTWFuYWdlci5pbml0aWFsaXplKCk7XG4gICAgXG5cbiAgICB0aGlzLmV4dHJhY3Rpb25FbmdpbmUgPSBuZXcgRXh0cmFjdGlvbkVuZ2luZShcbiAgICAgIHRoaXMuYXBwLFxuICAgICAgdGhpcy5kYXRhTWFuYWdlcixcbiAgICAgIHRoaXMuZmxhc2hjYXJkTWFuYWdlclxuICAgICk7XG5cbiAgICAvLyBcdTZDRThcdTUxOENcdTg5QzZcdTU2RkVcbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFZJRVdfVFlQRV9PVkVSVklFVyxcbiAgICAgIChsZWFmKSA9PiBuZXcgT3ZlcnZpZXdWaWV3KGxlYWYsIHRoaXMpXG4gICAgKTtcblxuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX1NJREVCQVJfT1ZFUlZJRVcsXG4gICAgICAobGVhZikgPT4gbmV3IFNpZGViYXJPdmVydmlld1ZpZXcobGVhZiwgdGhpcywgZmFsc2UpXG4gICAgKTtcbiAgICBcbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFZJRVdfVFlQRV9NQUlOX09WRVJWSUVXLFxuICAgICAgKGxlYWYpID0+IG5ldyBTaWRlYmFyT3ZlcnZpZXdWaWV3KGxlYWYsIHRoaXMsIHRydWUpXG4gICAgKTtcblxuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX1JFVklFVyxcbiAgICAgIChsZWFmKSA9PiBuZXcgUmV2aWV3VmlldyhsZWFmLCB0aGlzKVxuICAgICk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFZJRVdfVFlQRV9TVEFUUyxcbiAgICAgIChsZWFmKSA9PiBuZXcgU3RhdHNWaWV3KGxlYWYsIHRoaXMpXG4gICAgKTtcblxuICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZWRpdG9yLW1lbnUnLCAobWVudSwgZWRpdG9yLCB2aWV3KSA9PiB7XG4gICAgICAgIGlmICh2aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSB7XG4gICAgICAgICAgY29uc3QgZmlsZSA9IHZpZXcuZmlsZTtcbiAgICAgICAgICBpZiAoZmlsZSkge1xuICAgICAgICAgICAgdGhpcy5leHRyYWN0aW9uRW5naW5lLnJlZ2lzdGVyQ29udGV4dE1lbnUobWVudSwgZWRpdG9yLCBmaWxlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgKTtcbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNldHRpbmdzVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG4gICAgdGhpcy5hZGRDb21tYW5kcygpO1xuXG4gICAgLy8gUmliYm9uIFx1NTZGRVx1NjgwN1xuICAgIHRoaXMuYWRkUmliYm9uSWNvbignbGF5b3V0LWxpc3QnLCAnT3BlbiBMZWFybmluZyBPdmVydmlldycsICgpID0+IHtcbiAgICAgIHRoaXMuYWN0aXZhdGVTaWRlYmFyT3ZlcnZpZXcoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkUmliYm9uSWNvbignbGF5ZXJzJywgJ1N0YXJ0IFJldmlldycsICgpID0+IHtcbiAgICAgIHRoaXMuYWN0aXZhdGVSZXZpZXcoKTtcbiAgICB9KTtcblxuICAgIC8vIFx1NzJCNlx1NjAwMVx1NjgwRiAtIFx1NjYzRVx1NzkzQVx1NUY4NVx1NTkwRFx1NEU2MFx1NjU3MFx1OTFDRlxuICAgIHRoaXMuc2V0dXBTdGF0dXNCYXIoKTtcblxuICAgIGNvbnNvbGUubG9nKCdMZWFybmluZyBTeXN0ZW0gUGx1Z2luIGxvYWRlZCcpO1xuICB9XG5cbiAgb251bmxvYWQoKSB7XG4gICAgY29uc29sZS5sb2coJ1VubG9hZGluZyBMZWFybmluZyBTeXN0ZW0gUGx1Z2luJyk7XG4gICAgXG4gICAgLy8gXHU1M0VBXHU1NzI4XHU2M0QyXHU0RUY2XHU1QjhDXHU1MTY4XHU1Mzc4XHU4RjdEXHU2NUY2XHU2MjREXHU2RTA1XHU3NDA2XHU2MjQwXHU2NzA5XHU4OUM2XHU1NkZFXG4gICAgLy8gXHU2Q0U4XHU2MTBGXHVGRjFBXHU4RkQ5XHU5MUNDXHU0RTBEXHU4OTgxXHU1MjIwXHU5NjY0XHU3Mjc5XHU1QjlBXHU4OUM2XHU1NkZFXHU3QzdCXHU1NzhCXHVGRjBDXHU4QkE5IE9ic2lkaWFuIFx1ODFFQVx1NURGMVx1N0JBMVx1NzQwNlxuICAgIC8vIFx1NTNFQVx1NkUwNVx1NzQwNlx1NjNEMlx1NEVGNlx1N0VBN1x1NTIyQlx1NzY4NFx1OEQ0NFx1NkU5MFxuICAgIFxuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGVhcm5pbmctb3ZlcnZpZXctc3R5bGVzJyk7XG4gICAgaWYgKHN0eWxlRWwpIHtcbiAgICAgIHN0eWxlRWwucmVtb3ZlKCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICB9XG5cbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gIH1cblxuICBwcml2YXRlIGFkZENvbW1hbmRzKCkge1xuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3NjYW4tY3VycmVudC1maWxlJyxcbiAgICAgIG5hbWU6ICdTY2FuIGN1cnJlbnQgZmlsZSBmb3IgY29udGVudCcsXG4gICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKCFhY3RpdmVGaWxlKSByZXR1cm47XG4gICAgICAgIGF3YWl0IHRoaXMuZXh0cmFjdGlvbkVuZ2luZS5zY2FuRmlsZShhY3RpdmVGaWxlKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoT3ZlcnZpZXcoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3NjYW4tdmF1bHQnLFxuICAgICAgbmFtZTogJ1NjYW4gZW50aXJlIHZhdWx0JyxcbiAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZXh0cmFjdGlvbkVuZ2luZS5zY2FuVmF1bHQoKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoT3ZlcnZpZXcoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ29wZW4tb3ZlcnZpZXcnLFxuICAgICAgbmFtZTogJ09wZW4gTGVhcm5pbmcgT3ZlcnZpZXcnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgdGhpcy5hY3RpdmF0ZVNpZGViYXJPdmVydmlldygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnb3Blbi1tYWluLW92ZXJ2aWV3JyxcbiAgICAgIG5hbWU6ICdPcGVuIExlYXJuaW5nIE92ZXJ2aWV3IChNYWluIFZpZXcpJyxcbiAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVNYWluVmlldygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnYWRkLWZpbGUtYW5ub3RhdGlvbicsXG4gICAgICBuYW1lOiAnQWRkIGZpbGUgYW5ub3RhdGlvbicsXG4gICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKCFhY3RpdmVGaWxlKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgeyBGaWxlQW5ub3RhdGlvbk1vZGFsIH0gPSBhd2FpdCBpbXBvcnQoJy4vdWkvQW5ub3RhdGlvbk1vZGFsJyk7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IEZpbGVBbm5vdGF0aW9uTW9kYWwoXG4gICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgdGhpcyxcbiAgICAgICAgICBhY3RpdmVGaWxlLnBhdGgsXG4gICAgICAgICAgKCkgPT4gdGhpcy5yZWZyZXNoT3ZlcnZpZXcoKVxuICAgICAgICApO1xuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdzdGFydC1yZXZpZXcnLFxuICAgICAgbmFtZTogJ1N0YXJ0IGZsYXNoY2FyZCByZXZpZXcnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgdGhpcy5hY3RpdmF0ZVJldmlldygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnc2hvdy1zdGF0cycsXG4gICAgICBuYW1lOiAnU2hvdyBmbGFzaGNhcmQgc3RhdGlzdGljcycsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICB0aGlzLmFjdGl2YXRlU3RhdHMoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBcbiAgYXN5bmMgYWN0aXZhdGVNYWluVmlldygpIHtcbiAgICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG5cbiAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTVERjJcdTdFQ0ZcdTY3MDlcdTRFM0JcdTc1NENcdTk3NjJcdTg5QzZcdTU2RkVcdTYyNTNcdTVGMDBcbiAgICBsZXQgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX01BSU5fT1ZFUlZJRVcpWzBdO1xuICAgIFxuICAgIGlmICghbGVhZikge1xuICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NUIwXHU3Njg0XHU2ODA3XHU3QjdFXHU5ODc1XG4gICAgICBsZWFmID0gd29ya3NwYWNlLmdldExlYWYoJ3RhYicpO1xuICAgICAgYXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICB0eXBlOiBWSUVXX1RZUEVfTUFJTl9PVkVSVklFVyxcbiAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgd29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gIH1cbiAgXG4gIGFzeW5jIGFjdGl2YXRlU2lkZWJhck92ZXJ2aWV3KCkge1xuICAgIGNvbnN0IHsgd29ya3NwYWNlIH0gPSB0aGlzLmFwcDtcbiAgICBcbiAgICBsZXQgbGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xuICAgIGNvbnN0IGxlYXZlcyA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1NJREVCQVJfT1ZFUlZJRVcpO1xuXG4gICAgaWYgKGxlYXZlcy5sZW5ndGggPiAwKSB7XG4gICAgICBsZWFmID0gbGVhdmVzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTU3MjhcdTUzRjNcdTRGQTdcdThGQjlcdTY4MEZcdTUyMUJcdTVFRkFcdTY1QjBcdTc2ODRcdTg5QzZcdTU2RkVcbiAgICAgIGxlYWYgPSB3b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcbiAgICAgIGF3YWl0IGxlYWY/LnNldFZpZXdTdGF0ZSh7XG4gICAgICAgIHR5cGU6IFZJRVdfVFlQRV9TSURFQkFSX09WRVJWSUVXLFxuICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChsZWFmKSB7XG4gICAgICB3b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZU92ZXJ2aWV3KCkge1xuICAgIGNvbnN0IHsgd29ya3NwYWNlIH0gPSB0aGlzLmFwcDtcbiAgICBsZXQgbGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xuICAgIGNvbnN0IGxlYXZlcyA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX09WRVJWSUVXKTtcblxuICAgIGlmIChsZWF2ZXMubGVuZ3RoID4gMCkge1xuICAgICAgbGVhZiA9IGxlYXZlc1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWFmKGB0YWJgKTtcbiAgICAgIGF3YWl0IGxlYWY/LnNldFZpZXdTdGF0ZSh7XG4gICAgICAgIHR5cGU6IFZJRVdfVFlQRV9PVkVSVklFVyxcbiAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAobGVhZikge1xuICAgICAgd29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVSZXZpZXcoKSB7XG4gICAgY29uc3Qgc3RhdHMgPSB0aGlzLmZsYXNoY2FyZE1hbmFnZXIuZ2V0U3RhdHMoKTtcbiAgICBcbiAgICBpZiAoc3RhdHMuZHVlID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdObyBjYXJkcyBkdWUgZm9yIHJldmlldyEnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG4gICAgbGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcbiAgICBjb25zdCBsZWF2ZXMgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9SRVZJRVcpO1xuXG4gICAgaWYgKGxlYXZlcy5sZW5ndGggPiAwKSB7XG4gICAgICBsZWFmID0gbGVhdmVzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZWFmID0gd29ya3NwYWNlLmdldExlYWYodHJ1ZSk7XG4gICAgICBhd2FpdCBsZWFmPy5zZXRWaWV3U3RhdGUoe1xuICAgICAgICB0eXBlOiBWSUVXX1RZUEVfUkVWSUVXLFxuICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChsZWFmKSB7XG4gICAgICB3b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZVN0YXRzKCkge1xuICAgIGNvbnN0IHsgd29ya3NwYWNlIH0gPSB0aGlzLmFwcDtcbiAgICBsZXQgbGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xuICAgIGNvbnN0IGxlYXZlcyA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1NUQVRTKTtcblxuICAgIGlmIChsZWF2ZXMubGVuZ3RoID4gMCkge1xuICAgICAgbGVhZiA9IGxlYXZlc1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWFmKCd0YWInKTtcbiAgICAgIGF3YWl0IGxlYWY/LnNldFZpZXdTdGF0ZSh7XG4gICAgICAgIHR5cGU6IFZJRVdfVFlQRV9TVEFUUyxcbiAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAobGVhZikge1xuICAgICAgd29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gICAgfVxuICB9XG5cbiAgcmVmcmVzaE92ZXJ2aWV3KCkge1xuICAgIFxuICAgIC8vIFx1NTIzN1x1NjVCMFx1NjVFN1x1NzI0OCBPdmVydmlld1xuICAgIGNvbnN0IG92ZXJ2aWV3TGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfT1ZFUlZJRVcpO1xuICAgIG92ZXJ2aWV3TGVhdmVzLmZvckVhY2gobGVhZiA9PiB7XG4gICAgICBjb25zdCB2aWV3ID0gbGVhZi52aWV3IGFzIE92ZXJ2aWV3VmlldztcbiAgICAgIHZpZXcucmVmcmVzaCgpO1xuICAgIH0pO1xuXG4gICAgLy8gXHU1MjM3XHU2NUIwXHU0RkE3XHU4RkI5XHU2ODBGXHU4OUM2XHU1NkZFXG4gICAgY29uc3Qgc2lkZWJhckxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1NJREVCQVJfT1ZFUlZJRVcpO1xuICAgIHNpZGViYXJMZWF2ZXMuZm9yRWFjaChsZWFmID0+IHtcbiAgICAgIGNvbnN0IHZpZXcgPSBsZWFmLnZpZXcgYXMgU2lkZWJhck92ZXJ2aWV3VmlldztcbiAgICAgIHZpZXcucmVmcmVzaCgpO1xuICAgIH0pO1xuXG4gICAgLy8gXHU1MjM3XHU2NUIwXHU0RTNCXHU3NTRDXHU5NzYyXHU4OUM2XHU1NkZFXG4gICAgY29uc3QgbWFpbkxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX01BSU5fT1ZFUlZJRVcpO1xuICAgIG1haW5MZWF2ZXMuZm9yRWFjaChsZWFmID0+IHtcbiAgICAgIGNvbnN0IHZpZXcgPSBsZWFmLnZpZXcgYXMgU2lkZWJhck92ZXJ2aWV3VmlldztcbiAgICAgIHZpZXcucmVmcmVzaCgpO1xuICAgIH0pO1xuICAgIFxuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cFN0YXR1c0JhcigpIHtcbiAgICBjb25zdCBzdGF0dXNCYXJJdGVtID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKCk7XG4gICAgc3RhdHVzQmFySXRlbS5hZGRDbGFzcygnbGVhcm5pbmctc3lzdGVtLXN0YXR1cycpO1xuICAgIFxuICAgIGNvbnN0IHVwZGF0ZVN0YXR1cyA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXRzID0gdGhpcy5mbGFzaGNhcmRNYW5hZ2VyLmdldFN0YXRzKCk7XG4gICAgICBzdGF0dXNCYXJJdGVtLnNldFRleHQoYFx1RDgzQ1x1RENDRiAke3N0YXRzLmR1ZX0gZHVlYCk7XG4gICAgICBzdGF0dXNCYXJJdGVtLnRpdGxlID0gYCR7c3RhdHMuZHVlfSBjYXJkcyBkdWUgZm9yIHJldmlld1xcbiR7c3RhdHMubmV3fSBuZXcgY2FyZHNgO1xuICAgIH07XG5cbiAgICAvLyBcdTUyMURcdTU5Q0JcdTY2RjRcdTY1QjBcbiAgICB1cGRhdGVTdGF0dXMoKTtcblxuICAgIC8vIFx1NkJDRlx1NTIwNlx1OTQ5Rlx1NjZGNFx1NjVCMFx1NEUwMFx1NkIyMVxuICAgIHRoaXMucmVnaXN0ZXJJbnRlcnZhbChcbiAgICAgIHdpbmRvdy5zZXRJbnRlcnZhbCh1cGRhdGVTdGF0dXMsIDYwMDAwKVxuICAgICk7XG5cbiAgICAvLyBcdTcwQjlcdTUxRkJcdTYyNTNcdTVGMDBcdTU5MERcdTRFNjBcbiAgICBzdGF0dXNCYXJJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5hY3RpdmF0ZVJldmlldygpO1xuICAgIH0pO1xuICB9XG59IiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIExlYXJuaW5nU3lzdGVtUGx1Z2luIGZyb20gJy4uL21haW4nO1xuXG5leHBvcnQgY2xhc3MgU2V0dGluZ3NUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbjtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnTGVhcm5pbmcgU3lzdGVtIFNldHRpbmdzJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBleHRyYWN0aW9uJylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgYXV0b21hdGljIGNvbnRlbnQgZXh0cmFjdGlvbicpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZXh0cmFjdGlvbkVuYWJsZWQpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmV4dHJhY3Rpb25FbmFibGVkID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0F1dG8gc2NhbicpXG4gICAgICAuc2V0RGVzYygnQXV0b21hdGljYWxseSBzY2FuIGZpbGVzIHdoZW4gdGhleSBhcmUgb3BlbmVkJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvU2NhbilcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1NjYW4gPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRGVmYXVsdCBkZWNrJylcbiAgICAgIC5zZXREZXNjKCdEZWZhdWx0IGRlY2sgbmFtZSBmb3IgbmV3IGZsYXNoY2FyZHMnKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdEZWZhdWx0JylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdERlY2spXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHREZWNrID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcbiAgfVxufSIsICIvLyBTaWRlYmFyT3ZlcnZpZXdWaWV3LnRzIC0gXHU1QjhDXHU2NTc0XHU1QjlFXHU3M0IwXHU3MjQ4XHU2NzJDXG5pbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgVEZpbGUsIE1lbnUsIE5vdGljZSwgTW9kYWwsIEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIExlYXJuaW5nU3lzdGVtUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgQ29udGVudFVuaXQgfSBmcm9tICcuLi9jb3JlL0RhdGFNYW5hZ2VyJztcbmltcG9ydCB7IEZsYXNoY2FyZCB9IGZyb20gJy4uL2NvcmUvRmxhc2hjYXJkTWFuYWdlcic7XG5pbXBvcnQgeyBRdWlja0ZsYXNoY2FyZENyZWF0b3IgfSBmcm9tICcuLi9jb3JlL1F1aWNrRmxhc2hjYXJkQ3JlYXRvcic7XG5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfU0lERUJBUl9PVkVSVklFVyA9ICdsZWFybmluZy1zeXN0ZW0tc2lkZWJhci1vdmVydmlldyc7XG5leHBvcnQgY29uc3QgVklFV19UWVBFX01BSU5fT1ZFUlZJRVcgPSAnbGVhcm5pbmctc3lzdGVtLW1haW4tb3ZlcnZpZXcnO1xuXG50eXBlIEZpbHRlck1vZGUgPSAnYWxsJyB8ICdhbm5vdGF0ZWQnIHwgJ2ZsYXNoY2FyZHMnO1xudHlwZSBEaXNwbGF5TW9kZSA9ICdzaWRlYmFyJyB8ICdtYWluJztcbnR5cGUgR3JvdXBNb2RlID0gJ2ZpbGUnIHwgICdhbm5vdGF0aW9uJyB8ICd0YWcnIHwgJ2RhdGUnO1xudHlwZSBWaWV3VHlwZSA9ICdub3RlcycgfCAnY2FyZHMnO1xuXG5leHBvcnQgIGNsYXNzIFNpZGViYXJPdmVydmlld1ZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW47XG4gIFxuICAvLyBcdTcyQjZcdTYwMDFcdTdCQTFcdTc0MDZcbiAgcHJpdmF0ZSBmb3JjZU1haW5Nb2RlOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgc2VhcmNoUXVlcnk6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIGZpbHRlck1vZGU6IEZpbHRlck1vZGUgPSAnYWxsJztcbiAgcHJpdmF0ZSBncm91cE1vZGU6IEdyb3VwTW9kZSA9ICdmaWxlJztcbiAgcHJpdmF0ZSBzZWxlY3RlZEZpbGU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGRpc3BsYXlNb2RlOiBEaXNwbGF5TW9kZSA9ICdzaWRlYmFyJzsgXG4gIHByaXZhdGUgdmlld1R5cGU6IFZpZXdUeXBlID0gJ25vdGVzJztcbiAgcHJpdmF0ZSBhY3RpdmVNZW51SWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHNhdmVkU2Nyb2xsUG9zaXRpb246IG51bWJlciA9IDA7XG4gIHByaXZhdGUgc2hvdWxkUmVzdG9yZVNjcm9sbDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIGJhdGNoTW9kZTogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIHNlbGVjdGVkVW5pdElkczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG4gIHByaXZhdGUgc2VsZWN0ZWRDYXJkSWRzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcblxuICBcbiAgLy8gXHU2MDI3XHU4MEZEXHU0RjE4XHU1MzE2XG4gIHByaXZhdGUgc2VhcmNoRGVib3VuY2VUaW1lcjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgaXNSZW5kZXJpbmc6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luLCBmb3JjZU1haW5Nb2RlID0gZmFsc2UpIHtcbiAgICBzdXBlcihsZWFmKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLmZvcmNlTWFpbk1vZGUgPSBmb3JjZU1haW5Nb2RlOyAgXG5cblxuICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgaWYgKGFjdGl2ZUZpbGUpIHtcbiAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IGFjdGl2ZUZpbGUucGF0aDtcbiAgfVxuICAgIC8vICoqXHU0RkVFXHU2NTM5OiBcdTZERkJcdTUyQTBcdTk2MzJcdTYyOTZcdTc2ODQgcmVzaXplIFx1NzZEMVx1NTQyQyoqXG4gICAgbGV0IHJlc2l6ZVRpbWVyOiBudW1iZXI7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dChyZXNpemVUaW1lcik7XG4gICAgICByZXNpemVUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5kZXRlY3REaXNwbGF5TW9kZSgpO1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgfSwgMTUwKTtcbiAgICB9KTtcbiAgICAvLyBcdTc2RDFcdTU0MkNcdTdBOTdcdTUzRTNcdTU5MjdcdTVDMEZcdTUzRDhcdTUzMTZcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuICAgICAgdGhpcy5kZXRlY3REaXNwbGF5TW9kZSgpO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgLy8gcmV0dXJuIHRoaXMuZm9yY2VNYWluTW9kZSA/IFZJRVdfVFlQRV9NQUlOX09WRVJWSUVXIDogVklFV19UWVBFX1NJREVCQVJfT1ZFUlZJRVc7XG4gIC8vICBcdThDMDNcdThCRDVcbiAgICBjb25zdCB2aWV3VHlwZSA9IHRoaXMuZm9yY2VNYWluTW9kZSA/IFZJRVdfVFlQRV9NQUlOX09WRVJWSUVXIDogVklFV19UWVBFX1NJREVCQVJfT1ZFUlZJRVc7XG5cbiAgICByZXR1cm4gdmlld1R5cGU7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnTGVhcm5pbmcgT3ZlcnZpZXcnO1xuICB9XG5cbiAgZ2V0SWNvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiAnYm9vay1tYXJrZWQnO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuXG4gICAgXG4gICAgdGhpcy5kZXRlY3REaXNwbGF5TW9kZSgpO1xuICBcbiAgICBpZiAoIXRoaXMuZm9yY2VNYWluTW9kZSkge1xuICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2FjdGl2ZS1sZWFmLWNoYW5nZScsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgICBpZiAoYWN0aXZlRmlsZSAmJiB0aGlzLmRpc3BsYXlNb2RlID09PSAnc2lkZWJhcicpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gYWN0aXZlRmlsZS5wYXRoO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBcbiAgICB0aGlzLnJlbmRlcigpO1xuICAgIFxuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTY4MzhcdTVGQzNcdTY1QjlcdTZDRDUgPT09PT09PT09PT09PT09PT09PT1cbiAgXG4gIC8qKlxuICAgKiBcdTY4QzBcdTZENEJcdTVGNTNcdTUyNERcdTY2M0VcdTc5M0FcdTZBMjFcdTVGMEZcdUZGMDhcdTRGQTdcdThGQjlcdTY4MEYgdnMgXHU0RTNCXHU3NTRDXHU5NzYyXHVGRjA5XG4gICAqL1xuICBwcml2YXRlIGRldGVjdERpc3BsYXlNb2RlKCkge1xuICAgIGlmICh0aGlzLmZvcmNlTWFpbk1vZGUpIHtcbiAgICAgIHRoaXMuZGlzcGxheU1vZGUgPSAnbWFpbic7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBhcmVudFNwbGl0ID0gKHRoaXMubGVhZiBhcyBhbnkpLnBhcmVudFNwbGl0O1xuICAgIGNvbnN0IGlzTGVmdFNpZGViYXIgPSBwYXJlbnRTcGxpdD8udHlwZSA9PT0gJ3NwbGl0JyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmxlZnRTcGxpdCA9PT0gcGFyZW50U3BsaXQ7XG4gICAgY29uc3QgaXNSaWdodFNpZGViYXIgPSBwYXJlbnRTcGxpdD8udHlwZSA9PT0gJ3NwbGl0JyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yaWdodFNwbGl0ID09PSBwYXJlbnRTcGxpdDtcbiAgICBcbiAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGFpbmVyRWw7XG4gICAgY29uc3Qgd2lkdGggPSBjb250YWluZXJFbC5jbGllbnRXaWR0aDtcbiAgICBjb25zdCBpc05hcnJvdyA9IHdpZHRoIDwgNTAwO1xuICAgIFxuICAgIGNvbnN0IGlzU2lkZWJhciA9IGlzTGVmdFNpZGViYXIgfHwgaXNSaWdodFNpZGViYXIgfHwgaXNOYXJyb3c7XG5cbiAgICB0aGlzLmRpc3BsYXlNb2RlID0gaXNTaWRlYmFyID8gJ3NpZGViYXInIDogJ21haW4nO1xuICAgIFxuICB9XG5cbiAgLyoqXG4gICAqIFx1NTIzN1x1NjVCMFx1ODlDNlx1NTZGRVxuICAgKi9cbiAgcmVmcmVzaCgpIHtcbiAgICBcbiAgICAvLyBcdUQ4M0RcdUREMjcgXHU1OTgyXHU2NzlDXHU2QjYzXHU1NzI4XHU2RTMyXHU2N0QzXHVGRjBDXHU2ODA3XHU4QkIwXHU5NzAwXHU4OTgxXHU1MThEXHU2QjIxXHU1MjM3XHU2NUIwXG4gICAgaWYgKHRoaXMuaXNSZW5kZXJpbmcpIHtcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIFx1RDgzRFx1REQyNyBcdTZFMDVcdTk2NjRcdTY0MUNcdTdEMjJcdTk2MzJcdTYyOTZcdTVCOUFcdTY1RjZcdTU2NjhcbiAgICBpZiAodGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyICE9PSBudWxsKSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc2VhcmNoRGVib3VuY2VUaW1lcik7XG4gICAgICB0aGlzLnNlYXJjaERlYm91bmNlVGltZXIgPSBudWxsO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdUQ4M0RcdUREMjcgXHU2ODA3XHU4QkIwXHU5NzAwXHU4OTgxXHU2MDYyXHU1OTBEXHU2RURBXHU1MkE4XHU0RjREXHU3RjZFXG4gICAgdGhpcy5zaG91bGRSZXN0b3JlU2Nyb2xsID0gdHJ1ZTtcbiAgICBcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NEUzQlx1NkUzMlx1NjdEM1x1NjVCOVx1NkNENVxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXIoKSB7XG5cbiAgICAgIC8vIFx1RDgzRFx1REQyNyBcdTlBOENcdThCQzFcdTY1NzBcdTYzNkVcdTY2MkZcdTU0MjZcdTVERjJcdTUyQTBcdThGN0RcbiAgY29uc3QgYWxsVW5pdHMgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRBbGxDb250ZW50VW5pdHMoKTtcbiAgY29uc3QgdW5pdHNXaXRoQ2FyZHMgPSBhbGxVbml0cy5maWx0ZXIodSA9PiB1LmZsYXNoY2FyZElkcy5sZW5ndGggPiAwKTtcblxuICAgIGlmICh0aGlzLmlzUmVuZGVyaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLnNlYXJjaERlYm91bmNlVGltZXIgIT09IG51bGwpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyKTtcbiAgICAgIHRoaXMuc2VhcmNoRGVib3VuY2VUaW1lciA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuaXNSZW5kZXJpbmcgPSB0cnVlO1xuICAgIFxuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgXG4gICBcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTRGQTdcdThGQjlcdTY4MEZcdTZBMjFcdTVGMEZcdUZGMENcdTYwM0JcdTY2MkZcdTRGRERcdTVCNThcdTVGNTNcdTUyNERcdTZFREFcdTUyQThcdTRGNERcdTdGNkVcbiAgICBpZiAodGhpcy5kaXNwbGF5TW9kZSA9PT0gJ3NpZGViYXInKSB7XG4gICAgICBjb25zdCBjb250ZW50TGlzdCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc2lkZWJhci1jb250ZW50LWxpc3QnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmIChjb250ZW50TGlzdCkge1xuICAgICAgICB0aGlzLnNhdmVkU2Nyb2xsUG9zaXRpb24gPSBjb250ZW50TGlzdC5zY3JvbGxUb3A7XG4gICAgICB9XG4gICAgICBcbiAgICB9XG4gICAgLy8gXHVEODNEXHVERDI3IFx1NkUwNVx1OTY2NFx1NjI0MFx1NjcwOVx1NTNFRlx1ODBGRFx1OTYzQlx1NTg1RVx1NEVBNFx1NEU5Mlx1NzY4NFx1NjgzN1x1NUYwRlxuY29udGFpbmVyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7XG5jb25zdCB0b29sYmFyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyLXRvb2xiYXInKSBhcyBIVE1MRWxlbWVudDtcbmlmICh0b29sYmFyKSB7XG4gIHRvb2xiYXIuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJztcbiAgdG9vbGJhci5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gIHRvb2xiYXIuc3R5bGUuekluZGV4ID0gJzEwMCc7XG59XG4gICAgICAvLyBcdTI3MDUgXHU1OTgyXHU2NzlDXHU2NjJGXHU0RTNCXHU3NTRDXHU5NzYyXHU2QTIxXHU1RjBGXHU0RTE0XHU2Q0ExXHU2NzA5XHU5MDA5XHU0RTJEXHVGRjBDXHU1MjFEXHU1OUNCXHU1MzE2XHU5RUQ4XHU4QkE0XHU5MDA5XHU0RTJEXG4gIGlmICh0aGlzLmRpc3BsYXlNb2RlID09PSAnbWFpbicgJiYgIXRoaXMuc2VsZWN0ZWRGaWxlICYmIHRoaXMudmlld1R5cGUgPT09ICdub3RlcycpIHtcbiAgICBjb25zdCB1bml0cyA9IHRoaXMuZ2V0RmlsdGVyZWRVbml0cygpO1xuICAgIGNvbnN0IGdyb3VwZWQgPSB0aGlzLmdyb3VwVW5pdHModW5pdHMpO1xuICAgIGlmIChncm91cGVkLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gZ3JvdXBlZFswXS5ncm91cEtleTtcbiAgICB9XG4gIH1cbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBjb250YWluZXIuYWRkQ2xhc3MoJ2xlYXJuaW5nLW92ZXJ2aWV3LWNvbnRhaW5lcicpO1xuICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtbW9kZScsIHRoaXMuZGlzcGxheU1vZGUpO1xuICBcbiAgICAvLyBcdTY4MzlcdTYzNkVcdTZBMjFcdTVGMEZcdTZFMzJcdTY3RDNcdTRFMERcdTU0MENcdTVFMDNcdTVDNDBcbiAgICBpZiAodGhpcy5kaXNwbGF5TW9kZSA9PT0gJ3NpZGViYXInKSB7XG4gICAgICB0aGlzLnJlbmRlclNpZGViYXJNb2RlKGNvbnRhaW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVuZGVyTWFpbk1vZGUoY29udGFpbmVyKTtcbiAgICB9XG4gICAgXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU5NzAwXHU4OTgxXHU2MDYyXHU1OTBEXHU2RURBXHU1MkE4XHU0RjREXHU3RjZFXG4gICAgaWYgKHRoaXMuZGlzcGxheU1vZGUgPT09ICdzaWRlYmFyJyAmJiB0aGlzLnNob3VsZFJlc3RvcmVTY3JvbGwpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnRMaXN0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyLWNvbnRlbnQtbGlzdCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgaWYgKGNvbnRlbnRMaXN0KSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgY29udGVudExpc3Quc2Nyb2xsVG9wID0gdGhpcy5zYXZlZFNjcm9sbFBvc2l0aW9uO1xuXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmlzUmVuZGVyaW5nID0gZmFsc2U7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBcdTRFQzVcdTUyMzdcdTY1QjBcdTUxODVcdTVCQjlcdTUzM0FcdTU3REZcdUZGMDhcdTRFMERcdTkxQ0RcdTY1QjBcdTZFMzJcdTY3RDNcdTY1NzRcdTRFMkFcdTg5QzZcdTU2RkVcdUZGMDlcbiAgICovXG4gIHByaXZhdGUgcmVmcmVzaENvbnRlbnQoKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudDtcbiAgICBcbiAgICBpZiAodGhpcy5kaXNwbGF5TW9kZSA9PT0gJ3NpZGViYXInKSB7XG4gICAgICBjb25zdCBjb250ZW50TGlzdCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc2lkZWJhci1jb250ZW50LWxpc3QnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmIChjb250ZW50TGlzdCkge1xuICAgICAgICAvLyBcdTRGRERcdTVCNThcdTZFREFcdTUyQThcdTRGNERcdTdGNkVcbiAgICAgICAgdGhpcy5zYXZlZFNjcm9sbFBvc2l0aW9uID0gY29udGVudExpc3Quc2Nyb2xsVG9wO1xuICAgICAgICBcbiAgICAgICAgY29udGVudExpc3QuZW1wdHkoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJDb21wYWN0Q29udGVudExpc3QoY29udGVudExpc3QpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2MDYyXHU1OTBEXHU2RURBXHU1MkE4XHU0RjREXHU3RjZFXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgY29udGVudExpc3Quc2Nyb2xsVG9wID0gdGhpcy5zYXZlZFNjcm9sbFBvc2l0aW9uO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcmlnaHRQYW5lbCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucmlnaHQtcGFuZWwnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmIChyaWdodFBhbmVsKSB7XG4gICAgICAgIHJpZ2h0UGFuZWwuZW1wdHkoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJSaWdodFBhbmVsKHJpZ2h0UGFuZWwpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFx1NEZBN1x1OEZCOVx1NjgwRlx1NkEyMVx1NUYwRlx1NkUzMlx1NjdEMyA9PT09PT09PT09PT09PT09PT09PVxuICBcbiAgcHJpdmF0ZSByZW5kZXJTaWRlYmFyTW9kZShjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gXHU5ODc2XHU5MEU4XHU1REU1XHU1MTc3XHU2ODBGXG4gICAgdGhpcy5yZW5kZXJTaWRlYmFyVG9vbGJhcihjb250YWluZXIpO1xuICAgIFxuICAgIC8vIFx1NTE4NVx1NUJCOVx1NTIxN1x1ODg2OFx1RkYwOFx1N0QyN1x1NTFEMVx1NkEyMVx1NUYwRlx1RkYwOVxuICAgIGNvbnN0IGNvbnRlbnRMaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3NpZGViYXItY29udGVudC1saXN0JyB9KTtcbiAgICB0aGlzLnJlbmRlckNvbXBhY3RDb250ZW50TGlzdChjb250ZW50TGlzdCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclNpZGViYXJUb29sYmFyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCB0b29sYmFyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3NpZGViYXItdG9vbGJhcicgfSk7XG4gICAgLy8gXHU2NDFDXHU3RDIyXHU2ODQ2XG4gICAgY29uc3Qgc2VhcmNoQ29udGFpbmVyID0gdG9vbGJhci5jcmVhdGVEaXYoeyBjbHM6ICdzZWFyY2gtY29udGFpbmVyJyB9KTtcbiAgICBjb25zdCBzZWFyY2hJbnB1dCA9IHNlYXJjaENvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICBwbGFjZWhvbGRlcjogJ1x1RDgzRFx1REQwRCBcdTY0MUNcdTdEMjJcdTdCMTRcdThCQjAuLi4nLFxuICAgICAgY2xzOiAnc2VhcmNoLWlucHV0J1xuICAgIH0pO1xuICAgIHNlYXJjaElucHV0LnZhbHVlID0gdGhpcy5zZWFyY2hRdWVyeTtcbiAgICBcbiAgICAvLyBcdTRGN0ZcdTc1MjhcdTk2MzJcdTYyOTZcdTRGMThcdTUzMTZcdTY0MUNcdTdEMjJcbiAgICBzZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgIHRoaXMuc2VhcmNoUXVlcnkgPSB2YWx1ZTtcbiAgICAgIFxuICAgICAgLy8gXHU2RTA1XHU5NjY0XHU0RTRCXHU1MjREXHU3Njg0XHU1QjlBXHU2NUY2XHU1NjY4XG4gICAgICBpZiAodGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyICE9PSBudWxsKSB7XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHU4QkJFXHU3RjZFXHU2NUIwXHU3Njg0XHU1QjlBXHU2NUY2XHU1NjY4XG4gICAgICB0aGlzLnNlYXJjaERlYm91bmNlVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMucmVmcmVzaENvbnRlbnQoKTtcbiAgICAgIH0sIDMwMCk7IC8vIDMwMG1zIFx1OTYzMlx1NjI5NlxuICAgIH0pO1xuXG4gICAgLy8gXHU4RkM3XHU2RUU0XHU1NjY4XG4gICAgY29uc3QgZmlsdGVycyA9IHRvb2xiYXIuY3JlYXRlRGl2KHsgY2xzOiAnZmlsdGVyLWNoaXBzJyB9KTtcbiAgICBcbiAgICBjb25zdCBmaWx0ZXJPcHRpb25zID0gW1xuICAgICAgeyBtb2RlOiAnYWxsJyBhcyBGaWx0ZXJNb2RlLCBpY29uOiAnXHVEODNEXHVEQ0REJywgbGFiZWw6ICdcdTUxNjhcdTkwRTgnIH0sXG4gICAgICB7IG1vZGU6ICdhbm5vdGF0ZWQnIGFzIEZpbHRlck1vZGUsIGljb246ICdcdUQ4M0RcdURDQUMnLCBsYWJlbDogJ1x1NjI3OVx1NkNFOCcgfSxcbiAgICAgIHsgbW9kZTogJ2ZsYXNoY2FyZHMnIGFzIEZpbHRlck1vZGUsIGljb246ICdcdUQ4M0NcdURDQ0YnLCBsYWJlbDogJ1x1OTVFQVx1NTM2MScgfVxuICAgIF07XG5cbiAgICBmaWx0ZXJPcHRpb25zLmZvckVhY2goKHsgbW9kZSwgaWNvbiwgbGFiZWwgfSkgPT4ge1xuICAgICAgY29uc3QgY2hpcCA9IGZpbHRlcnMuY3JlYXRlRGl2KHtcbiAgICAgICAgY2xzOiBgZmlsdGVyLWNoaXAgJHt0aGlzLmZpbHRlck1vZGUgPT09IG1vZGUgPyAnYWN0aXZlJyA6ICcnfWAsXG4gICAgICAgIHRleHQ6IGAke2ljb259ICR7bGFiZWx9YCAgXG4gICAgICB9KTtcbiAgICAgIGNoaXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmZpbHRlck1vZGUgIT09IG1vZGUpIHtcbiAgICAgICAgICB0aGlzLmZpbHRlck1vZGUgPSBtb2RlO1xuICAgIHRoaXMuYXV0b1NlbGVjdEFsbCgpO1xuICAgICAgICAgIHRoaXMuc2hvdWxkUmVzdG9yZVNjcm9sbCA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gXHU1MjA2XHU3RUM0XHU2QTIxXHU1RjBGXHU1MjA3XHU2MzYyXG4gICAgY29uc3QgZ3JvdXBTd2l0Y2hlciA9IHRvb2xiYXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtc3dpdGNoZXInIH0pO1xuICAgIFxuICAgIGNvbnN0IGdyb3VwT3B0aW9ucyA9IFtcbiAgICAgIHsgbW9kZTogJ2ZpbGUnIGFzIEdyb3VwTW9kZSwgaWNvbjogJ1x1RDgzRFx1RENDMScsIHRvb2x0aXA6ICdcdTYzMDlcdTY1ODdcdTRFRjYnIH0sXG4gICAgICAvLyB7IG1vZGU6ICdhbm5vdGF0aW9uJyBhcyBHcm91cE1vZGUsIGljb246ICdcdUQ4M0RcdURDQUMnLCB0b29sdGlwOiAnXHU2Mjc5XHU2Q0U4JyB9LFxuICAgICAgeyBtb2RlOiAndGFnJyBhcyBHcm91cE1vZGUsIGljb246ICdcdUQ4M0NcdURGRjdcdUZFMEYnLCB0b29sdGlwOiAnXHU2MzA5XHU2ODA3XHU3QjdFJyB9LFxuICAgICAgeyBtb2RlOiAnZGF0ZScgYXMgR3JvdXBNb2RlLCBpY29uOiAnXHVEODNEXHVEQ0M1JywgdG9vbHRpcDogJ1x1NjMwOVx1NjVFNVx1NjcxRicgfVxuICAgIF07XG5cbiAgICBncm91cE9wdGlvbnMuZm9yRWFjaCgoeyBtb2RlLCBpY29uLCB0b29sdGlwIH0pID0+IHtcbiAgICAgIGNvbnN0IGJ0biA9IGdyb3VwU3dpdGNoZXIuY3JlYXRlRGl2KHtcbiAgICAgICAgY2xzOiBgZ3JvdXAtYnRuICR7dGhpcy5ncm91cE1vZGUgPT09IG1vZGUgPyAnYWN0aXZlJyA6ICcnfWAsXG4gICAgICAgIHRleHQ6IGljb25cbiAgICAgIH0pO1xuICAgICAgYnRuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHRvb2x0aXApO1xuICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5ncm91cE1vZGUgIT09IG1vZGUpIHtcbiAgICAgICAgICB0aGlzLmdyb3VwTW9kZSA9IG1vZGU7XG4gICAgdGhpcy5hdXRvU2VsZWN0QWxsKCk7XG4gICAgICBcbiAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuXG5cbi8vIFx1N0VERlx1OEJBMVx1NEZFMVx1NjA2Rlx1NTQ4Q1x1NTE2OFx1OTAwOVx1NjMwOVx1OTRBRVx1NUJCOVx1NTY2OChcdTVFNzZcdTUyMTdcdTY2M0VcdTc5M0EpXG5jb25zdCBzdGF0c1JvdyA9IHRvb2xiYXIuY3JlYXRlRGl2KHsgY2xzOiAnc3RhdHMtcm93JyB9KTtcblxuLy8gXHU1MTY4XHU5MDA5L1x1NUI4Q1x1NjIxMFx1NjMwOVx1OTRBRVxuY29uc3Qgc2VsZWN0QWxsQnRuID0gc3RhdHNSb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgdGV4dDogdGhpcy5pc0FsbFNlbGVjdGVkKCkgPyAnXHUyNzEzJyA6ICdcdTI2MTAnLFxuICBjbHM6IGBzZWxlY3QtYWxsLWJ0bi1zaWRlYmFyICR7dGhpcy5pc0FsbFNlbGVjdGVkKCkgPyAnY29tcGxldGVkJyA6ICcnfWAsXG4gICB0aXRsZTogdGhpcy5pc0FsbFNlbGVjdGVkKCkgPyAnXHU1M0Q2XHU2RDg4XHU1MTY4XHU5MDA5JyA6ICdcdTUxNjhcdTkwMDknXG59KTtcbmNvbnN0IHNob3VsZERpc2FibGUgPSAhdGhpcy5zZWxlY3RlZEZpbGUgJiYgdGhpcy5ncm91cE1vZGUgIT09ICdmaWxlJztcbmlmIChzaG91bGREaXNhYmxlKSB7XG4gIHNlbGVjdEFsbEJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gIHNlbGVjdEFsbEJ0bi5zdHlsZS5vcGFjaXR5ID0gJzAuNSc7XG4gIHNlbGVjdEFsbEJ0bi5zdHlsZS5jdXJzb3IgPSAnbm90LWFsbG93ZWQnO1xuICBzZWxlY3RBbGxCdG4udGl0bGUgPSAnXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU0RTAwXHU0RTJBXHU1MjA2XHU3RUM0Jztcbn1cbnNlbGVjdEFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgdGhpcy50b2dnbGVTZWxlY3RBbGwoKTtcbn0pO1xuXG5cblxuLy8gXHU2Mjc5XHU5MUNGXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFKFx1NjI3OVx1OTFDRlx1NkEyMVx1NUYwRlx1NEUwQlx1NTlDQlx1N0VDOFx1NjYzRVx1NzkzQSlcbmlmICh0aGlzLmJhdGNoTW9kZSkge1xuICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ25vdGVzJykge1xuICAgIGNvbnN0IGNyZWF0ZUJ0biA9IHN0YXRzUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiBgXHUyNkExKCR7dGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZX0pYCxcbiAgICAgIGNsczogJ2JhdGNoLWNyZWF0ZS1jYXJkcy1idG4tc2lkZWJhcicsXG4gICAgICB0aXRsZTogJ1x1NjI3OVx1OTFDRlx1NTIzNlx1NTM2MSdcbiAgICB9KTtcbiAgICBjcmVhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZSA9PT0gMCkge1xuICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU4OTgxXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXHU3Njg0XHU3QjE0XHU4QkIwJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuYmF0Y2hDcmVhdGVGbGFzaGNhcmRzKCk7XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBkZWxldGVCdG4gPSBzdGF0c1Jvdy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgIHRleHQ6IGBcdUQ4M0RcdURERDFcdUZFMEYoJHt0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnID8gdGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZSA6IHRoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemV9KWAsXG4gICAgY2xzOiAnYmF0Y2gtZGVsZXRlLWJ0bi1zaWRlYmFyJyxcbiAgICB0aXRsZTogJ1x1NjI3OVx1OTFDRlx1NTIyMFx1OTY2NCdcbiAgfSk7XG4gIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zdCBjb3VudCA9IHRoaXMudmlld1R5cGUgPT09ICdjYXJkcycgPyB0aGlzLnNlbGVjdGVkQ2FyZElkcy5zaXplIDogdGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZTtcbiAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTg5ODFcdTUyMjBcdTk2NjRcdTc2ODRcdTk4NzlcdTc2RUUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMudmlld1R5cGUgPT09ICdjYXJkcycpIHtcbiAgICAgIHRoaXMuYmF0Y2hEZWxldGVGbGFzaGNhcmRzKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYmF0Y2hEZWxldGVOb3RlcygpO1xuICAgIH1cbiAgfSk7XG4gIC8vIFx1NTNENlx1NkQ4OFx1NjMwOVx1OTRBRVx1RkYwOFx1NjI3OVx1OTFDRlx1NkEyMVx1NUYwRlx1NEUwQlx1NTlDQlx1N0VDOFx1NjYzRVx1NzkzQVx1RkYwOVxuaWYgKHRoaXMuYmF0Y2hNb2RlKSB7XG4gIGNvbnN0IGNhbmNlbEJ0biA9IHN0YXRzUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgdGV4dDogJ1x1MjcxNScsXG4gICAgY2xzOiAnY2FuY2VsLXNlbGVjdGlvbi1idG4tc2lkZWJhcicsXG4gICAgdGl0bGU6ICdcdTUxNzNcdTk1RUQnXG4gIH0pO1xuICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICB9KTtcbn1cbn1cblxuXG4gIH1cblxuICAvKipcbiAgICogXHU2RTMyXHU2N0QzXHU3RDI3XHU1MUQxXHU1MTg1XHU1QkI5XHU1MjE3XHU4ODY4XHVGRjA4XHU0RkE3XHU4RkI5XHU2ODBGXHU2QTIxXHU1RjBGXHVGRjA5XG4gICAqL1xuICBwcml2YXRlIHJlbmRlckNvbXBhY3RDb250ZW50TGlzdChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgbGV0IHVuaXRzID0gdGhpcy5nZXRGaWx0ZXJlZFVuaXRzKCk7XG5cbiAgLy8gXHU2NUIwXHU1ODlFOlx1NTk4Mlx1Njc5Q1x1NjYyRlx1NEZBN1x1OEZCOVx1NjgwRlx1NkEyMVx1NUYwRlx1NEUxNFx1NjcwOVx1OTAwOVx1NEUyRFx1NjU4N1x1NEVGNixcdTUzRUFcdTY2M0VcdTc5M0FcdThCRTVcdTY1ODdcdTRFRjZcdTc2ODRcdTdCMTRcdThCQjBcbiAgaWYgKHRoaXMuZGlzcGxheU1vZGUgPT09ICdzaWRlYmFyJyAmJiB0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgIHVuaXRzID0gdW5pdHMuZmlsdGVyKHVuaXQgPT4gdW5pdC5zb3VyY2UuZmlsZSA9PT0gdGhpcy5zZWxlY3RlZEZpbGUpO1xuICB9XG5cbiAgaWYgKHVuaXRzLmxlbmd0aCA9PT0gMCkge1xuICAgIC8vIFx1RDgzRFx1REQyNyBcdTZERkJcdTUyQTBcdThGRDlcdTZCQjU6XHU2NjNFXHU3OTNBXHU2M0QwXHU3OTNBXHU0RkUxXHU2MDZGXG4gICAgY29uc3QgZW1wdHlEaXYgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZW1wdHktc3RhdGUnIH0pO1xuICAgIFxuICAgIGlmICh0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgZW1wdHlEaXYuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogMjBweDsgdGV4dC1hbGlnbjogY2VudGVyO1wiPlxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJmb250LXNpemU6IDMycHg7IG1hcmdpbi1ib3R0b206IDEwcHg7XCI+XHVEODNEXHVEQ0VEPC9kaXY+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cImNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcIj5cdTVGNTNcdTUyNERcdTY1ODdcdTY4NjNcdTY2ODJcdTY1RTBcdTdCMTRcdThCQjA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC1zaXplOiAxMnB4OyBjb2xvcjogdmFyKC0tdGV4dC1mYWludCk7IG1hcmdpbi10b3A6IDhweDtcIj5cbiAgICAgICAgICAgICR7dGhpcy5maWx0ZXJNb2RlICE9PSAnYWxsJyA/ICdcdTVDMURcdThCRDVcdTUyMDdcdTYzNjJcdTUxNzZcdTRFRDZcdThGQzdcdTZFRTRcdTU2NjhcdTY3RTVcdTc3MEInIDogJ1x1NUYwMFx1NTlDQlx1OUFEOFx1NEVBRVx1NjU4N1x1NjcyQ1x1Njc2NVx1NTIxQlx1NUVGQVx1N0IxNFx1OEJCMCd9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9IGVsc2Uge1xuICAgICAgZW1wdHlEaXYudGV4dENvbnRlbnQgPSAnXHU2NjgyXHU2NUUwXHU1MTg1XHU1QkI5JztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgICBjb25zdCBncm91cGVkID0gdGhpcy5ncm91cFVuaXRzKHVuaXRzKTtcblxuICAgIGdyb3VwZWQuZm9yRWFjaCgoeyBncm91cEtleSwgdW5pdHM6IGdyb3VwVW5pdHMgfSkgPT4ge1xuICAgICAgY29uc3QgZ3JvdXBFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjb250ZW50LWdyb3VwJyB9KTtcblxuICAgICAgLy8gXHU1MjA2XHU3RUM0XHU2ODA3XHU5ODk4XG4gICAgICBjb25zdCBoZWFkZXIgPSBncm91cEVsLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLWhlYWRlcicgfSk7XG4gICAgICBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6IHRoaXMuZ2V0R3JvdXBJY29uKHRoaXMuZ3JvdXBNb2RlKSwgY2xzOiAnZ3JvdXAtaWNvbicgfSk7XG4gICAgICBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6IGdyb3VwS2V5LCBjbHM6ICdncm91cC10aXRsZScgfSk7XG4gICAgICBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6IGAke2dyb3VwVW5pdHMubGVuZ3RofWAsIGNsczogJ2dyb3VwLWNvdW50JyB9KTtcblxuICAgICAgLy8gXHU1MTg1XHU1QkI5XHU1MzYxXHU3MjQ3XHU1MjE3XHU4ODY4XG4gICAgICBncm91cFVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICAgIHRoaXMucmVuZGVyQ29tcGFjdENhcmQoZ3JvdXBFbCwgdW5pdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTZFMzJcdTY3RDNcdTdEMjdcdTUxRDFcdTUzNjFcdTcyNDdcdUZGMDhcdTRGQTdcdThGQjlcdTY4MEZcdTZBMjFcdTVGMEZcdUZGMDlcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyQ29tcGFjdENhcmQoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgdW5pdDogQ29udGVudFVuaXQpIHtcbiAgICBjb25zdCBjYXJkID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NvbXBhY3QtY2FyZCcgfSk7XG5cbiAgICAvLyBcdTYyNzlcdTkxQ0ZcdTkwMDlcdTYyRTlcdTZBMjFcdTVGMEZcdUZGMUFcdTZERkJcdTUyQTBjaGVja2JveFxuICAgIGlmICh0aGlzLmJhdGNoTW9kZSkge1xuICAgICAgY29uc3QgY2hlY2tib3ggPSBjYXJkLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgdHlwZTogJ2NoZWNrYm94JyxcbiAgICAgICAgY2xzOiAnYmF0Y2gtY2hlY2tib3gnXG4gICAgICB9KTtcbiAgICAgIGNoZWNrYm94LnNldEF0dHJpYnV0ZSgnZGF0YS11bml0LWlkJywgdW5pdC5pZCk7XG4gICAgICBjaGVja2JveC5jaGVja2VkID0gdGhpcy5zZWxlY3RlZFVuaXRJZHMuaGFzKHVuaXQuaWQpO1xuICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgICAgaWYgKChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuYWRkKHVuaXQuaWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmRlbGV0ZSh1bml0LmlkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgfSk7XG4gICAgfVxuXG4vLyBcdTVERTZcdTRGQTdcdTYzMDdcdTc5M0FcdTU2NjhcbmNvbnN0IGluZGljYXRvciA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1pbmRpY2F0b3InIH0pO1xuXG4vLyBcdUQ4M0RcdUREMjcgXHU2ODM5XHU2MzZFIHVuaXQudHlwZSBcdTZERkJcdTUyQTBcdTRFMERcdTU0MENcdTc2ODRcdTdDN0JcbmlmICh1bml0LnR5cGUgPT09ICdRQScpIHtcbiAgaW5kaWNhdG9yLmFkZENsYXNzKCd0eXBlLXFhJyk7XG59IGVsc2UgaWYgKHVuaXQudHlwZSA9PT0gJ2Nsb3plJykge1xuICBpbmRpY2F0b3IuYWRkQ2xhc3MoJ3R5cGUtY2xvemUnKTtcbn0gZWxzZSBpZiAodW5pdC50eXBlID09PSAndGV4dCcpIHtcbiAgaW5kaWNhdG9yLmFkZENsYXNzKCd0eXBlLXRleHQnKTtcbn1cblxuLy8gXHU0RkREXHU3NTU5XHU1MzlGXHU2NzA5XHU3Njg0XHU2Mjc5XHU2Q0U4XHU1NDhDXHU5NUVBXHU1MzYxXHU3MkI2XHU2MDAxXG5pZiAodW5pdC5hbm5vdGF0aW9uSWQpIGluZGljYXRvci5hZGRDbGFzcygnaGFzLWFubm90YXRpb24nKTtcbmlmICh1bml0LmZsYXNoY2FyZElkcy5sZW5ndGggPiAwKSBpbmRpY2F0b3IuYWRkQ2xhc3MoJ2hhcy1mbGFzaGNhcmQnKTtcbiAgICBcblxuLy8gXHU1MTg1XHU1QkI5XHU1MzNBXHU1N0RGXG5jb25zdCBjb250ZW50ID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLWNvbnRlbnQnIH0pO1xuXG4vLyBcdTVERTZcdTRFMEFcdTg5RDJcdUZGMUFcdTYyNzlcdTZDRThcdTU2RkVcdTY4MDdcbmNvbnN0IGhlYWRlciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1oZWFkZXInIH0pO1xuXG4vLyBcdTY1NzRcdTg4NENcdTYyNjdcdTg4NENcdTVERTZcdTRGQTdcdTkwM0JcdThGOTFcbmhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgdGhpcy50b2dnbGVJbmxpbmVBbm5vdGF0aW9uKGNhcmQsIHVuaXQpO1xufSk7XG5cbi8vIFx1NjMwOVx1OTRBRVx1NEUwRFx1OTcwMFx1ODk4MVx1NEVGQlx1NEY1NVx1OTAzQlx1OEY5MVx1RkYwQ1x1NzBCOVx1NTFGQlx1NEYxQVx1ODFFQVx1NzEzNlx1ODlFNlx1NTNEMSBoZWFkZXIgXHU3Njg0XHU5MDNCXHU4RjkxXG5jb25zdCBhbm5vdGF0aW9uQnRuID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ2Fubm90YXRpb24tYnRuJyB9KTtcbmFubm90YXRpb25CdG4uaW5uZXJIVE1MID0gJ1x1RDgzRFx1RENBQyc7XG5cblxuLy8gXHU1M0YzXHU0RTBBXHU4OUQyXHU1REU1XHU1MTc3XHU2MzA5XHU5NEFFXHVGRjA4XHU5NjNCXHU2QjYyXHU1MTkyXHU2Q0UxXHVGRjA5XG5jb25zdCB0b29scyA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLXRvb2xzJyB9KTtcbnRvb2xzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgZS5zdG9wUHJvcGFnYXRpb24oKTsgLy8gXHU1MTczXHU5NTJFXHVGRjAxXHU0RkREXHU4QkMxXHU1M0YzXHU0RkE3XHU2MzA5XHU5NEFFXHU0RTBEXHU4OUU2XHU1M0QxXHU2NTc0XHU4ODRDXHU3MEI5XHU1MUZCXG59KTtcbiAgXG5cblxuLy8gMi4gXHU5NzVFXHU2Mjc5XHU5MUNGXHU2QTIxXHU1RjBGXHU0RTBCXHU3Njg0XHU5NUVBXHU1MzYxXHU2MzA5XHU5NEFFXG5pZiAoIXRoaXMuYmF0Y2hNb2RlKSB7XG4gIGNvbnN0IGZsYXNoY2FyZEJ0biA9IHRvb2xzLmNyZWF0ZURpdih7IGNsczogJ3Rvb2wtYnRuIGZsYXNoY2FyZC1idG4nIH0pO1xuICBmbGFzaGNhcmRCdG4uaW5uZXJIVE1MID0gJ1x1MjZBMSc7XG4gIGZsYXNoY2FyZEJ0bi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnXHU3NTFGXHU2MjEwXHU5NUVBXHU1MzYxJyk7XG4gIGZsYXNoY2FyZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLnF1aWNrR2VuZXJhdGVGbGFzaGNhcmQodW5pdCk7XG4gIH0pO1xufVxuXG4gICAgLy8gXHU2NkY0XHU1OTFBXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFXG4gICAgY29uc3QgbW9yZUJ0biA9IHRvb2xzLmNyZWF0ZURpdih7IGNsczogJ3Rvb2wtYnRuIG1vcmUtYnRuJyB9KTtcbiAgICBtb3JlQnRuLmlubmVySFRNTCA9ICdcdTIyRUUnO1xuICAgIG1vcmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMuc2hvd0NvbnRleHRNZW51KGUsIHVuaXQpO1xuICAgIH0pO1xuXG4vLyBcdTdCMTRcdThCQjBcdTUxODVcdTVCQjlcdUZGMDhcdTcwQjlcdTUxRkJcdThERjNcdThGNkNcdTUyMzBcdTUzOUZcdTY1ODdcdUZGMDlcbmNvbnN0IG5vdGVUZXh0ID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLXRleHQnIH0pO1xuXG5sZXQgZGlzcGxheUhUTUwgPSAnJztcblxuLy8gXHU1OTgyXHU2NzlDXHU2NjJGIFFBIFx1N0M3Qlx1NTc4Qlx1RkYwQ1x1NzUyOFx1NEUwRFx1NTQwQ1x1NjgzN1x1NUYwRlx1NjYzRVx1NzkzQVx1OTVFRVx1OTg5OFx1NTQ4Q1x1N0I1NFx1Njg0OFxuaWYgKHVuaXQudHlwZSA9PT0gJ1FBJyAmJiB1bml0LmFuc3dlcikge1xuICBkaXNwbGF5SFRNTCA9IGA8c3BhbiBjbGFzcz1cInFhLXF1ZXN0aW9uXCI+JHt1bml0LmNvbnRlbnR9PC9zcGFuPiA8c3BhbiBjbGFzcz1cInFhLXNlcGFyYXRvclwiPjo6PC9zcGFuPiA8c3BhbiBjbGFzcz1cInFhLWFuc3dlclwiPiR7dW5pdC5hbnN3ZXJ9PC9zcGFuPmA7XG59XG4vLyBcdTU5ODJcdTY3OUNcdTY2MkYgY2xvemUgXHU3QzdCXHU1NzhCXHVGRjBDXHU5QUQ4XHU0RUFFXHU2NjNFXHU3OTNBXHU3QjU0XHU2ODQ4XG5lbHNlIGlmICh1bml0LnR5cGUgPT09ICdjbG96ZScgJiYgdW5pdC5mdWxsQ29udGV4dCkge1xuICBsZXQgY29udGV4dCA9IHVuaXQuZnVsbENvbnRleHQucmVwbGFjZSgvPT0vZywgJycpO1xuICBjb25zdCBhbnN3ZXIgPSB1bml0LmNvbnRlbnQ7XG4gIGRpc3BsYXlIVE1MID0gY29udGV4dC5yZXBsYWNlKFxuICAgIGFuc3dlciwgXG4gICAgYDxzcGFuIGNsYXNzPVwiY2xvemUtaGlnaGxpZ2h0XCI+JHthbnN3ZXJ9PC9zcGFuPmBcbiAgKTtcbn1cbi8vIFx1N0VBRlx1NjU4N1x1NjcyQ1xuZWxzZSB7XG4gIGRpc3BsYXlIVE1MID0gdW5pdC5jb250ZW50O1xufVxuXG5ub3RlVGV4dC5pbm5lckhUTUwgPSBkaXNwbGF5SFRNTDtcblxubm90ZVRleHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHRoaXMuanVtcFRvU291cmNlKHVuaXQpO1xufSk7XG5cbiAgICAvLyBcdTY2M0VcdTc5M0FcdTYyNzlcdTZDRThcdUZGMDhcdTU5ODJcdTY3OUNcdTY3MDlcdUZGMDlcbiAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk7XG4gICAgaWYgKGFubm90YXRpb24pIHtcbiAgICAgIGNvbnN0IGFubkVsID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdhbm5vdGF0aW9uLXByZXZpZXcnIH0pO1xuICAgICAgY29uc3QgYW5uVGV4dCA9IGFubm90YXRpb24uY29udGVudC5sZW5ndGggPiA2MFxuICAgICAgICA/IGFubm90YXRpb24uY29udGVudC5zdWJzdHJpbmcoMCwgNjApICsgJy4uLidcbiAgICAgICAgOiBhbm5vdGF0aW9uLmNvbnRlbnQ7XG4gICAgICBhbm5FbC50ZXh0Q29udGVudCA9IGBcdUQ4M0RcdURDQUMgJHthbm5UZXh0fWA7XG4gICAgICBcbiAgICAgIC8vIFx1NzBCOVx1NTFGQlx1NjI3OVx1NkNFOFx1OTg4NFx1ODlDOFx1NEU1Rlx1NTNFRlx1NEVFNVx1NUM1NVx1NUYwMFx1N0YxNlx1OEY5MVxuICAgICAgYW5uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLnRvZ2dsZUlubGluZUFubm90YXRpb24oY2FyZCwgdW5pdCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTY4MDdcdTdCN0VcdTU0OENcdTUxNDNcdTRGRTFcdTYwNkZcbiAgICBjb25zdCBtZXRhID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLW1ldGEnIH0pO1xuICAgIFxuICAgIGlmICh1bml0Lm1ldGFkYXRhLnRhZ3MubGVuZ3RoID4gMCkge1xuICAgICAgdW5pdC5tZXRhZGF0YS50YWdzLnNsaWNlKDAsIDIpLmZvckVhY2godGFnID0+IHtcbiAgICAgICAgbWV0YS5jcmVhdGVTcGFuKHsgdGV4dDogYCMke3RhZ31gLCBjbHM6ICd0YWcnIH0pO1xuICAgICAgfSk7XG4gICAgICBpZiAodW5pdC5tZXRhZGF0YS50YWdzLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgbWV0YS5jcmVhdGVTcGFuKHsgdGV4dDogYCske3VuaXQubWV0YWRhdGEudGFncy5sZW5ndGggLSAyfWAsIGNsczogJ3RhZy1tb3JlJyB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodW5pdC5mbGFzaGNhcmRJZHMubGVuZ3RoID4gMCkge1xuICAgICAgbWV0YS5jcmVhdGVTcGFuKHsgdGV4dDogYFx1RDgzQ1x1RENDRiAke3VuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aH1gLCBjbHM6ICdiYWRnZScgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0gXHU0RTNCXHU3NTRDXHU5NzYyXHU2QTIxXHU1RjBGXHU2RTMyXHU2N0QzID09PT09PT09PT09PT09PT09PT09XG4gIFxuICBwcml2YXRlIHJlbmRlck1haW5Nb2RlKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBsYXlvdXQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbWFpbi1sYXlvdXQnIH0pO1xuXG4gICAgLy8gXHU1REU2XHU0RkE3XHU5NzYyXHU2NzdGXG4gICAgY29uc3QgbGVmdFBhbmVsID0gbGF5b3V0LmNyZWF0ZURpdih7IGNsczogJ2xlZnQtcGFuZWwnIH0pO1xuICAgIGlmICghdGhpcy5zZWxlY3RlZEZpbGUgJiYgdGhpcy52aWV3VHlwZSA9PT0gJ25vdGVzJykge1xuICAgICAgY29uc3QgdW5pdHMgPSB0aGlzLmdldEZpbHRlcmVkVW5pdHMoKTtcbiAgICAgIGNvbnN0IGdyb3VwZWQgPSB0aGlzLmdyb3VwVW5pdHModW5pdHMpO1xuICAgICAgaWYgKGdyb3VwZWQubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IGdyb3VwZWRbMF0uZ3JvdXBLZXk7IC8vIFx1ODFFQVx1NTJBOFx1OTAwOVx1NEUyRFx1N0IyQ1x1NEUwMFx1NEUyQVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbmRlckxlZnRQYW5lbChsZWZ0UGFuZWwpO1xuXG4gICAgLy8gXHU1M0YzXHU0RkE3XHU5NzYyXHU2NzdGXG4gICAgY29uc3QgcmlnaHRQYW5lbCA9IGxheW91dC5jcmVhdGVEaXYoeyBjbHM6ICdyaWdodC1wYW5lbCcgfSk7XG4gICAgdGhpcy5yZW5kZXJSaWdodFBhbmVsKHJpZ2h0UGFuZWwpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJMZWZ0UGFuZWwoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICAvLyBcdTY0MUNcdTdEMjJcdTU0OENcdThGQzdcdTZFRTRcbiAgICB0aGlzLnJlbmRlck1haW5Ub29sYmFyKGNvbnRhaW5lcik7XG4gICAgLy8gXHU5ODc2XHU5MEU4XHU1NkZBXHU1QjlBXHU1MTY1XHU1M0UzXG4gICAgdGhpcy5yZW5kZXJGaXhlZEVudHJpZXMoY29udGFpbmVyKTtcblxuXG5cbiAgICAvLyBcdTY1ODdcdTRFRjZcdTUyMTdcdTg4NjhcbiAgICB0aGlzLnJlbmRlckZpbGVMaXN0KGNvbnRhaW5lcik7XG4gIH1cblxuXG5cbiAgcHJpdmF0ZSByZW5kZXJNYWluVG9vbGJhcihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgdG9vbGJhciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdtYWluLXRvb2xiYXInIH0pO1xuICBcbiAgICAvLyBcdTY0MUNcdTdEMjJcdTY4NDZcbiAgICBjb25zdCBzZWFyY2hJbnB1dCA9IHRvb2xiYXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgcGxhY2Vob2xkZXI6ICdcdUQ4M0RcdUREMEQgXHU2NDFDXHU3RDIyLi4uJyxcbiAgICAgIGNsczogJ3NlYXJjaC1pbnB1dC1tYWluJ1xuICAgIH0pO1xuICAgIHNlYXJjaElucHV0LnZhbHVlID0gdGhpcy5zZWFyY2hRdWVyeTtcbiAgICBcbiAgICAvLyBcdTRGN0ZcdTc1MjhcdTk2MzJcdTYyOTZcdTRGMThcdTUzMTZcdTY0MUNcdTdEMjJcbiAgICBzZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgIHRoaXMuc2VhcmNoUXVlcnkgPSB2YWx1ZTtcbiAgICAgIFxuICAgICAgLy8gXHU2RTA1XHU5NjY0XHU0RTRCXHU1MjREXHU3Njg0XHU1QjlBXHU2NUY2XHU1NjY4XG4gICAgICBpZiAodGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyICE9PSBudWxsKSB7XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHU4QkJFXHU3RjZFXHU2NUIwXHU3Njg0XHU1QjlBXHU2NUY2XHU1NjY4XG4gICAgICB0aGlzLnNlYXJjaERlYm91bmNlVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gbnVsbDtcbiAgICAgICAgLy8gXHU1M0VBXHU1MjM3XHU2NUIwXHU1M0YzXHU0RkE3XHU5NzYyXHU2NzdGXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHJpZ2h0UGFuZWwgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnJpZ2h0LXBhbmVsJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGlmIChyaWdodFBhbmVsKSB7XG4gICAgICAgICAgcmlnaHRQYW5lbC5lbXB0eSgpO1xuICAgICAgICAgIHRoaXMucmVuZGVyUmlnaHRQYW5lbChyaWdodFBhbmVsKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU2NTg3XHU0RUY2XHU1MjE3XHU4ODY4XG4gICAgICAgIGNvbnN0IGZpbGVMaXN0Q29udGFpbmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5maWxlLWxpc3QnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgaWYgKGZpbGVMaXN0Q29udGFpbmVyKSB7XG4gICAgICAgICAgZmlsZUxpc3RDb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgICB0aGlzLnJlbmRlckZpbGVMaXN0Q29udGVudChmaWxlTGlzdENvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuY2xlYXIoKTtcbiAgICAgIH0sIDMwMCk7IC8vIDMwMG1zIFx1OTYzMlx1NjI5NlxuICAgIH0pO1xuICBcbiAgICAvLyBcdTUyMDZcdTdFQzRcdTZBMjFcdTVGMEZcdTUyMDdcdTYzNjJcdUZGMDhcdTdCMTRcdThCQjBcdTU0OENcdTUzNjFcdTcyNDdcdTg5QzZcdTU2RkVcdTkwRkRcdTY2M0VcdTc5M0FcdUZGMDktIFx1NzlGQlx1OTY2NFx1Njc2MVx1NEVGNlx1NTIyNFx1NjVBRFxuICAgIGNvbnN0IGdyb3VwU3dpdGNoZXIgPSB0b29sYmFyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLXN3aXRjaGVyLW1haW4nIH0pO1xuICAgIFxuICAgIGNvbnN0IGdyb3VwT3B0aW9ucyA9IFtcbiAgICAgIHsgbW9kZTogJ2ZpbGUnIGFzIEdyb3VwTW9kZSwgaWNvbjogJ1x1RDgzRFx1RENDMScsIGxhYmVsOiAnXHU2NTg3XHU0RUY2JyB9LFxuICAgICAgeyBtb2RlOiAnYW5ub3RhdGlvbicgYXMgR3JvdXBNb2RlLCBpY29uOiAnXHVEODNEXHVEQ0FDJywgbGFiZWw6ICdcdTYyNzlcdTZDRTgnIH0sXG4gICAgICB7IG1vZGU6ICd0YWcnIGFzIEdyb3VwTW9kZSwgaWNvbjogJ1x1RDgzQ1x1REZGN1x1RkUwRicsIGxhYmVsOiAnXHU2ODA3XHU3QjdFJyB9LFxuICAgICAgeyBtb2RlOiAnZGF0ZScgYXMgR3JvdXBNb2RlLCBpY29uOiAnXHVEODNEXHVEQ0M1JywgbGFiZWw6ICdcdTY1RTVcdTY3MUYnIH1cbiAgICBdO1xuICBcbiAgICBncm91cE9wdGlvbnMuZm9yRWFjaCgoeyBtb2RlLCBpY29uLCBsYWJlbCB9KSA9PiB7XG4gICAgICBjb25zdCBidG4gPSBncm91cFN3aXRjaGVyLmNyZWF0ZURpdih7XG4gICAgICAgIGNsczogYGdyb3VwLWJ0bi1tYWluICR7dGhpcy5ncm91cE1vZGUgPT09IG1vZGUgPyAnYWN0aXZlJyA6ICcnfWAsXG4gICAgICB9KTtcbiAgICAgIGJ0bi5pbm5lckhUTUwgPSBgJHtpY29ufSBgO1xuICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5ncm91cE1vZGUgIT09IG1vZGUpIHtcbiAgICAgICAgICB0aGlzLmdyb3VwTW9kZSA9IG1vZGU7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZEZpbGUgPSBudWxsOyAvLyBcdTkxQ0RcdTdGNkVcdTkwMDlcdTRFMkRcbiAgICB0aGlzLmF1dG9TZWxlY3RBbGwoKTtcbiAgICAgIFxuICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gXHU1MjM3XHU2NUIwXHU2NTg3XHU0RUY2XHU1MjE3XHU4ODY4XHU1NDhDXHU1M0YzXHU0RkE3XHU5NzYyXHU2NzdGXG4gICAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICBjb25zdCBmaWxlTGlzdENvbnRhaW5lciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmlsZS1saXN0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgaWYgKGZpbGVMaXN0Q29udGFpbmVyKSB7XG4gICAgICAgICAgICBmaWxlTGlzdENvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJGaWxlTGlzdENvbnRlbnQoZmlsZUxpc3RDb250YWluZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCByaWdodFBhbmVsID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5yaWdodC1wYW5lbCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgIGlmIChyaWdodFBhbmVsKSB7XG4gICAgICAgICAgICByaWdodFBhbmVsLmVtcHR5KCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclJpZ2h0UGFuZWwocmlnaHRQYW5lbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgXG5cbiAgfVxuICBwcml2YXRlIHJlbmRlckZpeGVkRW50cmllcyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgZW50cmllcyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdmaXhlZC1lbnRyaWVzJyB9KTtcblxuICAgIC8vIFx1NTE2OFx1OTBFOFx1N0IxNFx1OEJCMFx1NjMwOVx1OTRBRVxuICAgIGNvbnN0IGFsbE5vdGVzQnRuID0gZW50cmllcy5jcmVhdGVEaXYoe1xuICAgICAgY2xzOiBgZW50cnktYnRuICR7dGhpcy52aWV3VHlwZSA9PT0gJ25vdGVzJyA/ICdhY3RpdmUnIDogJyd9YCxcbiAgICB9KTtcbiAgICBhbGxOb3Rlc0J0bi5pbm5lckhUTUwgPSAnXHVEODNEXHVEQ0REIDxzcGFuPlx1NTE2OFx1OTBFOFx1N0IxNFx1OEJCMDwvc3Bhbj4nO1xuICAgIGFsbE5vdGVzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy52aWV3VHlwZSA9ICdub3Rlcyc7XG4gICAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IG51bGw7XG4gICAgICB0aGlzLmF1dG9TZWxlY3RBbGwoKTtcblxuICBcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICAvLyBDYXJkIExpc3QgXHU2MzA5XHU5NEFFXG4gICAgY29uc3QgY2FyZExpc3RCdG4gPSBlbnRyaWVzLmNyZWF0ZURpdih7XG4gICAgICBjbHM6IGBlbnRyeS1idG4gJHt0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnID8gJ2FjdGl2ZScgOiAnJ31gLFxuICAgIH0pO1xuICAgIGNhcmRMaXN0QnRuLmlubmVySFRNTCA9ICdcdUQ4M0NcdURDQ0YgPHNwYW4+Q2FyZCBMaXN0PC9zcGFuPic7XG4gICAgY2FyZExpc3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLnZpZXdUeXBlID0gJ2NhcmRzJztcbiAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gbnVsbDtcbiAgICAgIHRoaXMuYXV0b1NlbGVjdEFsbCgpO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxuICBwcml2YXRlIHJlbmRlckZpbGVMaXN0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCB0aXRsZVRleHQgPSB0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnID8gJ1x1OTVFQVx1NTM2MVx1NTIwNlx1N0VDNCcgOiAnXHU2NTg3XHU2ODYzXHU1MjE3XHU4ODY4JztcbiAgICAvLyBjb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiB0aXRsZVRleHQsIGNsczogJ3BhbmVsLXRpdGxlJyB9KTtcblxuICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUQ4M0RcdURDQzEgXHU2NTg3XHU2ODYzXHU1MjE3XHU4ODY4JywgY2xzOiAncGFuZWwtdGl0bGUnIH0pO1xuXG4gICAgY29uc3QgZmlsZUxpc3RDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZmlsZS1saXN0JyB9KTtcbiAgICB0aGlzLnJlbmRlckZpbGVMaXN0Q29udGVudChmaWxlTGlzdENvbnRhaW5lcik7XG4gIH1cbiAgXG4gIHByaXZhdGUgcmVuZGVyRmlsZUxpc3RDb250ZW50KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBcbiAgICAvLyBcdTY1MkZcdTYzMDFcdTk1RUFcdTUzNjFcdTU0OENcdTdCMTRcdThCQjBcdTc2ODRcdTdFREZcdTRFMDBcdTUyMDZcdTdFQzRcdTU5MDRcdTc0MDZcbiAgICBsZXQgZ3JvdXBlZDogQXJyYXk8eyBncm91cEtleTogc3RyaW5nOyB1bml0cz86IENvbnRlbnRVbml0W107IGNhcmRzPzogRmxhc2hjYXJkW107IGNvdW50OiBudW1iZXIgfT47XG4gICAgXG4gICAgaWYgKHRoaXMudmlld1R5cGUgPT09ICdjYXJkcycpIHtcbiAgICAgIGNvbnN0IGZsYXNoY2FyZHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldEFsbEZsYXNoY2FyZHMoKTtcbiAgICAgIGNvbnN0IGNhcmRHcm91cHMgPSB0aGlzLmdyb3VwRmxhc2hjYXJkcyhmbGFzaGNhcmRzKTtcbiAgICAgIGdyb3VwZWQgPSBjYXJkR3JvdXBzLm1hcChnID0+ICh7IGdyb3VwS2V5OiBnLmdyb3VwS2V5LCBjYXJkczogZy5jYXJkcywgY291bnQ6IGcuY2FyZHMubGVuZ3RoIH0pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdW5pdHMgPSB0aGlzLmdldEZpbHRlcmVkVW5pdHMoKTtcbiAgICAgIGNvbnN0IHVuaXRHcm91cHMgPSB0aGlzLmdyb3VwVW5pdHModW5pdHMpO1xuICAgICAgZ3JvdXBlZCA9IHVuaXRHcm91cHMubWFwKGcgPT4gKHsgZ3JvdXBLZXk6IGcuZ3JvdXBLZXksIHVuaXRzOiBnLnVuaXRzLCBjb3VudDogZy51bml0cy5sZW5ndGggfSkpO1xuICAgIH1cbiAgXG4gICAgaWYgKGdyb3VwZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb250YWluZXIuY3JlYXRlRGl2KHtcbiAgICAgICAgdGV4dDogJ1x1NjY4Mlx1NjVFMFx1NjU4N1x1Njg2MycsXG4gICAgICAgIGNsczogJ2VtcHR5LWhpbnQnXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgaWYgKCF0aGlzLnNlbGVjdGVkRmlsZSAmJiBncm91cGVkLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gZ3JvdXBlZFswXS5ncm91cEtleTtcbiAgICB9XG4gIFxuICAgIGdyb3VwZWQuZm9yRWFjaCgoeyBncm91cEtleSwgY291bnQgfSkgPT4ge1xuICAgICAgY29uc3QgZmlsZUl0ZW0gPSBjb250YWluZXIuY3JlYXRlRGl2KHtcbiAgICAgICAgY2xzOiBgZmlsZS1pdGVtICR7dGhpcy5zZWxlY3RlZEZpbGUgPT09IGdyb3VwS2V5ID8gJ3NlbGVjdGVkJyA6ICcnfWBcbiAgICAgIH0pO1xuICBcbiAgICAgIGZpbGVJdGVtLmlubmVySFRNTCA9IGBcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLWljb25cIj4ke3RoaXMuZ2V0R3JvdXBJY29uKHRoaXMuZ3JvdXBNb2RlKX08L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1uYW1lXCI+JHtncm91cEtleX08L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1jb3VudFwiPiR7Y291bnR9PC9zcGFuPlxuICAgICAgYDtcbiAgXG4gICAgICBmaWxlSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkRmlsZSAhPT0gZ3JvdXBLZXkpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gZ3JvdXBLZXk7XG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTkwMDlcdTRFMkRcdTcyQjZcdTYwMDFcbiAgICAgICAgICAgIGNvbnN0IGFsbEl0ZW1zID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWxlLWl0ZW0nKTtcbiAgICAgICAgICAgIGFsbEl0ZW1zLmZvckVhY2goaXRlbSA9PiBpdGVtLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpKTtcbiAgICAgICAgICAgIGZpbGVJdGVtLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTUyMzdcdTY1QjBcdTUzRjNcdTRGQTdcdTk3NjJcdTY3N0ZcbiAgICAgICAgICAgIGNvbnN0IG1haW5Db250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgY29uc3QgcmlnaHRQYW5lbCA9IG1haW5Db250YWluZXIucXVlcnlTZWxlY3RvcignLnJpZ2h0LXBhbmVsJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAocmlnaHRQYW5lbCkge1xuXG4gICAgICAgICAgICAgIHJpZ2h0UGFuZWwuZW1wdHkoKTtcbiAgICAgICAgICAgICAgdGhpcy5yZW5kZXJSaWdodFBhbmVsKHJpZ2h0UGFuZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdbZmlsZUl0ZW0gY2xpY2tdIEVycm9yOicsIGVycm9yKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU1MjA3XHU2MzYyXHU1MjA2XHU3RUM0XHU2NUY2XHU1MUZBXHU5NTE5XHVGRjBDXHU4QkY3XHU5MUNEXHU4QkQ1Jyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJSaWdodFBhbmVsKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgICBjb25zdCBmbGFzaGNhcmRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRBbGxGbGFzaGNhcmRzKCk7XG4gICAgICAgIGNvbnN0IGdyb3VwZWQgPSB0aGlzLmdyb3VwRmxhc2hjYXJkcyhmbGFzaGNhcmRzKTtcbiAgICAgICAgaWYgKGdyb3VwZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gZ3JvdXBlZFswXS5ncm91cEtleTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGVtcHR5ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2VtcHR5LXJpZ2h0LXBhbmVsJyB9KTtcbiAgICAgICAgICBlbXB0eS5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW1wdHktaWNvblwiPlx1RDgzRFx1RENFRDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImVtcHR5LXRleHRcIj5cdTY2ODJcdTY1RTBcdTk1RUFcdTUzNjE8L2Rpdj5cbiAgICAgICAgICBgO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBcdTZFMzJcdTY3RDNcdTk1RUFcdTUzNjFcdTdGNTFcdTY4M0NcdUZGMDhcdTRGMUFcdTY4MzlcdTYzNkUgc2VsZWN0ZWRGaWxlIFx1OEZDN1x1NkVFNFx1RkYwOVxuICAgICAgdGhpcy5yZW5kZXJGbGFzaGNhcmRzR3JpZChjb250YWluZXIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbi8vIFx1ODFFQVx1NTJBOFx1OTAwOVx1NEUyRFx1N0IyQ1x1NEUwMFx1NEUyQVxuICAgIGlmICghdGhpcy5zZWxlY3RlZEZpbGUpIHtcbiAgICAgIGNvbnN0IHVuaXRzID0gdGhpcy5nZXRGaWx0ZXJlZFVuaXRzKCk7XG4gICAgICBjb25zdCBncm91cGVkID0gdGhpcy5ncm91cFVuaXRzKHVuaXRzKTtcbiAgICAgIFxuICAgICAgaWYgKGdyb3VwZWQubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IGdyb3VwZWRbMF0uZ3JvdXBLZXk7XG4gICAgICAgIC8vIFx1ODlFNlx1NTNEMVx1NURFNlx1NEZBN1x1NjU4N1x1NEVGNlx1NTIxN1x1ODg2OFx1NjZGNFx1NjVCMFx1OTAwOVx1NEUyRFx1NzJCNlx1NjAwMVxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBjb25zdCBmaWxlTGlzdENvbnRhaW5lciA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmlsZS1saXN0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGlmIChmaWxlTGlzdENvbnRhaW5lcikge1xuICAgICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IGZpbGVMaXN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5maWxlLWl0ZW0nKTtcbiAgICAgICAgICBmaXJzdEl0ZW0/LmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBcdTc3MUZcdTc2ODRcdTZDQTFcdTY3MDlcdTY1NzBcdTYzNkVcbiAgICAgICAgY29uc3QgZW1wdHkgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZW1wdHktcmlnaHQtcGFuZWwnIH0pO1xuICAgICAgICBlbXB0eS5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImVtcHR5LWljb25cIj5cdUQ4M0RcdURDRUQ8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW1wdHktdGV4dFwiPlx1NjY4Mlx1NjVFMFx1NTE4NVx1NUJCOTwvZGl2PlxuICAgICAgICBgO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHU2RTMyXHU2N0QzXHU1MTg1XHU1QkI5XHU3RjUxXHU2ODNDXG4gICAgdGhpcy5yZW5kZXJDb250ZW50R3JpZChjb250YWluZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NkUzMlx1NjdEM1x1NTE4NVx1NUJCOVx1N0Y1MVx1NjgzQ1x1RkYwOFx1NEUzQlx1NzU0Q1x1OTc2Mlx1NkEyMVx1NUYwRlx1RkYwOVxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJDb250ZW50R3JpZChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgaGVhZGVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyaWQtaGVhZGVyJyB9KTtcbiAgICBcbiAgICBjb25zdCB0aXRsZSA9IGhlYWRlci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHRoaXMuc2VsZWN0ZWRGaWxlIHx8ICdcdTUxODVcdTVCQjknIH0pO1xuICAgIFxuICAgIC8vIFx1NjMwOVx1OTRBRVx1NUJCOVx1NTY2OFxuICAgIGNvbnN0IGhlYWRlckFjdGlvbnMgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnaGVhZGVyLWFjdGlvbnMnIH0pO1xuICAgIFxuICAgIC8vIFx1NjI3OVx1OTFDRlx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRShcdTYyNzlcdTkxQ0ZcdTZBMjFcdTVGMEZcdTRFMEJcdTU5Q0JcdTdFQzhcdTY2M0VcdTc5M0EpXG4gICAgaWYgKHRoaXMuYmF0Y2hNb2RlKSB7XG4gICAgICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ25vdGVzJykge1xuICAgICAgICBjb25zdCBjcmVhdGVCdG4gPSBoZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgdGV4dDogYFx1MjZBMSBcdTYyNzlcdTkxQ0ZcdTUyMzZcdTUzNjEgKCR7dGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZX0pYCxcbiAgICAgICAgICBjbHM6ICdiYXRjaC1jcmVhdGUtY2FyZHMtYnRuLWhlYWRlcidcbiAgICAgICAgfSk7XG4gICAgICAgIGNyZWF0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1OEJGN1x1NTE0OFx1OTAwOVx1NjJFOVx1ODk4MVx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1NzY4NFx1N0IxNFx1OEJCMCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmJhdGNoQ3JlYXRlRmxhc2hjYXJkcygpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICBcbiAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGhlYWRlckFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogYFx1RDgzRFx1REREMVx1RkUwRiBcdTUyMjBcdTk2NjQgKCR7dGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJyA/IHRoaXMuc2VsZWN0ZWRDYXJkSWRzLnNpemUgOiB0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSlgLFxuICAgICAgICBjbHM6ICdiYXRjaC1kZWxldGUtYnRuLWhlYWRlcidcbiAgICAgIH0pO1xuICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBjb3VudCA9IHRoaXMudmlld1R5cGUgPT09ICdjYXJkcycgPyB0aGlzLnNlbGVjdGVkQ2FyZElkcy5zaXplIDogdGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZTtcbiAgICAgICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1OEJGN1x1NTE0OFx1OTAwOVx1NjJFOVx1ODk4MVx1NTIyMFx1OTY2NFx1NzY4NFx1OTg3OVx1NzZFRScpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgICAgICAgIHRoaXMuYmF0Y2hEZWxldGVGbGFzaGNhcmRzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5iYXRjaERlbGV0ZU5vdGVzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdTUzRDZcdTZEODhcdTYzMDlcdTk0QUVcdUZGMDhcdTYyNzlcdTkxQ0ZcdTZBMjFcdTVGMEZcdTRFMEJcdTU5Q0JcdTdFQzhcdTY2M0VcdTc5M0FcdUZGMDlcbiAgICBpZiAodGhpcy5iYXRjaE1vZGUpIHtcbiAgICAgIGNvbnN0IGNhbmNlbEJ0biA9IGhlYWRlckFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogJ1x1MjcxNSBcdTUzRDZcdTZEODgnLFxuICAgICAgICBjbHM6ICdjYW5jZWwtc2VsZWN0aW9uLWJ0bi1oZWFkZXInXG4gICAgICB9KTtcbiAgICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFx1NTE2OFx1OTAwOS9cdTVCOENcdTYyMTBcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBzZWxlY3RBbGxCdG4gPSBoZWFkZXJBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiB0aGlzLmlzQWxsU2VsZWN0ZWQoKSA/ICdcdTI3MTMgXHU5MDA5XHU2MkU5JyA6ICdcdTI2MTAgXHU1MTY4XHU5MDA5JyxcbiAgICAgIGNsczogYHNlbGVjdC1hbGwtYnRuLWhlYWRlciAke3RoaXMuaXNBbGxTZWxlY3RlZCgpID8gJ2NvbXBsZXRlZCcgOiAnJ31gXG4gICAgfSk7XG4gICAgc2VsZWN0QWxsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy50b2dnbGVTZWxlY3RBbGwoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGdyaWRDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY29udGVudC1ncmlkJyB9KTtcbiAgICBcbiAgICBjb25zdCB1bml0cyA9IHRoaXMuZ2V0RmlsdGVyZWRVbml0cygpLmZpbHRlcih1bml0ID0+IHtcbiAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgIHJldHVybiB1bml0LnNvdXJjZS5maWxlID09PSB0aGlzLnNlbGVjdGVkRmlsZTtcbiAgICAgIH1lbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2Fubm90YXRpb24nKXtcbiAgICAgICAgY29uc3QgaGFzQW5ub3RhdGlvbiA9IHRoaXMuc2VsZWN0ZWRGaWxlID09PSAnXHU2NzA5XHU2Mjc5XHU2Q0U4JztcbiAgICAgICAgcmV0dXJuIGhhc0Fubm90YXRpb24gPyAhIXVuaXQuYW5ub3RhdGlvbklkIDogIXVuaXQuYW5ub3RhdGlvbklkO1xuICAgICAgfVxuICAgICAgIGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAndGFnJykge1xuICAgICAgICByZXR1cm4gdW5pdC5tZXRhZGF0YS50YWdzLmluY2x1ZGVzKHRoaXMuc2VsZWN0ZWRGaWxlISk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZGF0ZScpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0RGF0ZShuZXcgRGF0ZSh1bml0Lm1ldGFkYXRhLmNyZWF0ZWRBdCkpID09PSB0aGlzLnNlbGVjdGVkRmlsZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIGlmICh1bml0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIGdyaWRDb250YWluZXIuY3JlYXRlRGl2KHtcbiAgICAgICAgdGV4dDogJ1x1RDgzRFx1RENFRCBcdTY2ODJcdTY1RTBcdTUxODVcdTVCQjknLFxuICAgICAgICBjbHM6ICdlbXB0eS1zdGF0ZSdcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICB0aGlzLnJlbmRlckdyaWRDYXJkKGdyaWRDb250YWluZXIsIHVuaXQpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICogXHU2RTMyXHU2N0QzXHU5NUVBXHU1MzYxXHU3RjUxXHU2ODNDXHVGRjA4XHU3QzdCXHU0RjNDIHJlbmRlckNvbnRlbnRHcmlkXHVGRjA5XG4gKi9cbiAgcHJpdmF0ZSByZW5kZXJGbGFzaGNhcmRzR3JpZChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgaGVhZGVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyaWQtaGVhZGVyJyB9KTtcbiAgICBcbiAgICBoZWFkZXIuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiB0aGlzLnNlbGVjdGVkRmlsZSB8fCAnXHU5NUVBXHU1MzYxJyB9KTtcblxuICAvLyBcdTYzMDlcdTk0QUVcdTVCQjlcdTU2NjhcbiAgY29uc3QgaGVhZGVyQWN0aW9ucyA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdoZWFkZXItYWN0aW9ucycgfSk7XG5cbiAgLy8gXHU2Mjc5XHU5MUNGXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFKFx1NjI3OVx1OTFDRlx1NkEyMVx1NUYwRlx1NEUwQlx1NTlDQlx1N0VDOFx1NjYzRVx1NzkzQSlcbiAgaWYgKHRoaXMuYmF0Y2hNb2RlKSB7XG4gICAgY29uc3QgZGVsZXRlQnRuID0gaGVhZGVyQWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogYFx1RDgzRFx1REREMVx1RkUwRiBcdTUyMjBcdTk2NjQgKCR7dGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZX0pYCxcbiAgICAgIGNsczogYGJhdGNoLWRlbGV0ZS1idG4taGVhZGVyICR7dGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZSA9PT0gMCA/ICdkaXNhYmxlZCcgOiAnJ31gXG4gICAgfSk7XG4gICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRDYXJkSWRzLnNpemUgPT09IDApIHtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1OEJGN1x1NTE0OFx1OTAwOVx1NjJFOVx1ODk4MVx1NTIyMFx1OTY2NFx1NzY4NFx1OTVFQVx1NTM2MScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLmJhdGNoRGVsZXRlRmxhc2hjYXJkcygpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gXHU1M0Q2XHU2RDg4XHU2MzA5XHU5NEFFXHVGRjA4XHU2Mjc5XHU5MUNGXHU2QTIxXHU1RjBGXHU0RTBCXHU1OUNCXHU3RUM4XHU2NjNFXHU3OTNBXHVGRjA5XG4gIGlmICh0aGlzLmJhdGNoTW9kZSkge1xuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGhlYWRlckFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdcdTI3MTUgXHU1M0Q2XHU2RDg4JyxcbiAgICAgIGNsczogJ2NhbmNlbC1zZWxlY3Rpb24tYnRuLWhlYWRlcidcbiAgICB9KTtcbiAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBcdTUxNjhcdTkwMDkvXHU1QjhDXHU2MjEwXHU2MzA5XHU5NEFFXG4gIGNvbnN0IHNlbGVjdEFsbEJ0biA9IGhlYWRlckFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICB0ZXh0OiB0aGlzLmlzQWxsU2VsZWN0ZWQoKSA/ICdcdTI3MTMgXHU1QjhDXHU2MjEwJyA6ICdcdTI2MTAgXHU1MTY4XHU5MDA5JyxcbiAgICBjbHM6IGBzZWxlY3QtYWxsLWJ0bi1oZWFkZXIgJHt0aGlzLmlzQWxsU2VsZWN0ZWQoKSA/ICdjb21wbGV0ZWQnIDogJyd9YFxuICB9KTtcbiAgc2VsZWN0QWxsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIHRoaXMudG9nZ2xlU2VsZWN0QWxsKCk7XG4gIH0pO1xuXG5cbiAgICBjb25zdCBncmlkQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NvbnRlbnQtZ3JpZCcgfSk7XG4gICAgXG4gICAgY29uc3QgZmxhc2hjYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgIFxuICAgIC8vIFx1NjUzOVx1OEZEQlx1OEZDN1x1NkVFNFx1OTAzQlx1OEY5MVxuICAgIGNvbnN0IGZpbHRlcmVkQ2FyZHMgPSBmbGFzaGNhcmRzLmZpbHRlcihjYXJkID0+IHtcbiAgICAgIGlmICghdGhpcy5zZWxlY3RlZEZpbGUpIHJldHVybiBmYWxzZTtcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZmlsZScpIHtcbiAgICAgICAgLy8gXHU2MzA5XHU2NTg3XHU0RUY2XHU4RkM3XHU2RUU0XG4gICAgICAgIHJldHVybiBjYXJkLnNvdXJjZUZpbGUgPT09IHRoaXMuc2VsZWN0ZWRGaWxlO1xuICAgICAgfSBcblxuICAgICAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnYW5ub3RhdGlvbicpIHtcbiAgICAgICAgLy8gXHVEODNEXHVERDI3IFx1NjMwOVx1NjI3OVx1NkNFOFx1OEZDN1x1NkVFNFxuICAgICAgICBjb25zdCB1bml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY2FyZC5zb3VyY2VDb250ZW50SWQpO1xuICAgICAgICBjb25zdCBoYXNBbm5vdGF0aW9uID0gdGhpcy5zZWxlY3RlZEZpbGUgPT09ICdcdTY3MDlcdTYyNzlcdTZDRTgnO1xuICAgICAgICBpZiAoaGFzQW5ub3RhdGlvbikge1xuICAgICAgICAgIHJldHVybiB1bml0ICYmICEhdW5pdC5hbm5vdGF0aW9uSWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuICF1bml0IHx8ICF1bml0LmFubm90YXRpb25JZDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5ncm91cE1vZGUgPT09ICd0YWcnKSB7XG4gICAgICAgIC8vIFx1NjMwOVx1NjgwN1x1N0I3RVx1OEZDN1x1NkVFNFxuICAgICAgICBjb25zdCB1bml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY2FyZC5zb3VyY2VDb250ZW50SWQpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU3QjE0XHU4QkIwXHU1MzU1XHU1MTQzXHU3Njg0XHU2ODA3XHU3QjdFXG4gICAgICAgIGlmICh1bml0ICYmIHVuaXQubWV0YWRhdGEudGFncyAmJiB1bml0Lm1ldGFkYXRhLnRhZ3MuaW5jbHVkZXModGhpcy5zZWxlY3RlZEZpbGUpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTM2MVx1NzI0N1x1ODFFQVx1NURGMVx1NzY4NFx1NjgwN1x1N0I3RVxuICAgICAgICBpZiAoY2FyZC50YWdzICYmIGNhcmQudGFncy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1IGRlY2tcbiAgICAgICAgaWYgKGNhcmQuZGVjayA9PT0gdGhpcy5zZWxlY3RlZEZpbGUpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XCJcdTY3MkFcdTUyMDZcdTdDN0JcIlxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEZpbGUgPT09ICdcdTY3MkFcdTUyMDZcdTdDN0InICYmIFxuICAgICAgICAgICAgKCFjYXJkLnRhZ3MgfHwgY2FyZC50YWdzLmxlbmd0aCA9PT0gMCkgJiYgXG4gICAgICAgICAgICAhY2FyZC5kZWNrICYmXG4gICAgICAgICAgICAoIXVuaXQgfHwgIXVuaXQubWV0YWRhdGEudGFncyB8fCB1bml0Lm1ldGFkYXRhLnRhZ3MubGVuZ3RoID09PSAwKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgIC8vIFx1NjMwOVx1NjVFNVx1NjcxRlx1OEZDN1x1NkVFNFxuICAgICAgICBjb25zdCBjYXJkRGF0ZSA9IHRoaXMuZm9ybWF0RGF0ZShuZXcgRGF0ZShjYXJkLm1ldGFkYXRhLmNyZWF0ZWRBdCkpO1xuICAgICAgICByZXR1cm4gY2FyZERhdGUgPT09IHRoaXMuc2VsZWN0ZWRGaWxlO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gIFxuXG4gIFxuICAgIGlmIChmaWx0ZXJlZENhcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZ3JpZENvbnRhaW5lci5jcmVhdGVEaXYoeyB0ZXh0OiAnXHVEODNEXHVEQ0VEIFx1OEJFNVx1NTIwNlx1N0VDNFx1NEUwQlx1NjY4Mlx1NjVFMFx1OTVFQVx1NTM2MScsIGNsczogJ2VtcHR5LXN0YXRlJyB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIFxuICAgIGZpbHRlcmVkQ2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgIHRoaXMucmVuZGVyRmxhc2hjYXJkR3JpZENhcmQoZ3JpZENvbnRhaW5lciwgY2FyZCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogXHU2RTMyXHU2N0QzXHU3RjUxXHU2ODNDXHU1MzYxXHU3MjQ3XHVGRjA4XHU0RTNCXHU3NTRDXHU5NzYyXHU2QTIxXHU1RjBGXHVGRjA5XG4gICAqL1xuICBwcml2YXRlIHJlbmRlckdyaWRDYXJkKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0KSB7XG4gICAgY29uc3QgY2FyZCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLWNhcmQnIH0pO1xuXG4gICAgLy8gXHU2Mjc5XHU5MUNGXHU5MDA5XHU2MkU5XHU2QTIxXHU1RjBGXHVGRjFBXHU2REZCXHU1MkEwY2hlY2tib3hcbiAgICBpZiAodGhpcy5iYXRjaE1vZGUpIHtcbiAgICAgIGNvbnN0IGNoZWNrYm94ID0gY2FyZC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgIGNsczogJ2JhdGNoLWNoZWNrYm94J1xuICAgICAgfSk7XG4gICAgICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdW5pdC1pZCcsIHVuaXQuaWQpO1xuICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRoaXMuc2VsZWN0ZWRVbml0SWRzLmhhcyh1bml0LmlkKTtcbiAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCkge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmFkZCh1bml0LmlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5kZWxldGUodW5pdC5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTk4NzZcdTkwRThcdUZGMUFcdTY1ODdcdTY4NjNcdTU0MERcdTc5RjBcbiAgICBjb25zdCBoZWFkZXIgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ2dyaWQtY2FyZC1oZWFkZXInIH0pO1xuXG5oZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHRoaXMuanVtcFRvU291cmNlKHVuaXQpO1xufSk7XG5cblxuICAgIC8vIFx1RDgzRFx1REQyNyBcdTZERkJcdTUyQTBcdTdDN0JcdTU3OEJcdTYzMDdcdTc5M0FcdTU2NjhcbmNvbnN0IHR5cGVJbmRpY2F0b3IgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAndHlwZS1pbmRpY2F0b3InIH0pO1xuaWYgKHVuaXQudHlwZSA9PT0gJ1FBJykge1xuICB0eXBlSW5kaWNhdG9yLmFkZENsYXNzKCd0eXBlLXFhJyk7XG4gIHR5cGVJbmRpY2F0b3IudGV4dENvbnRlbnQgPSAnUSZBJztcbn0gZWxzZSBpZiAodW5pdC50eXBlID09PSAnY2xvemUnKSB7XG4gIHR5cGVJbmRpY2F0b3IuYWRkQ2xhc3MoJ3R5cGUtY2xvemUnKTtcbiAgdHlwZUluZGljYXRvci50ZXh0Q29udGVudCA9ICdDbG96ZSc7XG59IGVsc2Uge1xuICB0eXBlSW5kaWNhdG9yLmFkZENsYXNzKCd0eXBlLXRleHQnKTtcbiAgdHlwZUluZGljYXRvci50ZXh0Q29udGVudCA9ICdUZXh0Jztcbn1cblxuICAgIGNvbnN0IGZpbGVOYW1lID0gdW5pdC5zb3VyY2UuZmlsZS5zcGxpdCgnLycpLnBvcCgpPy5yZXBsYWNlKCcubWQnLCAnJykgfHwgJyc7XG4gICAgaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBmaWxlTmFtZSwgY2xzOiAnZG9jLW5hbWUnIH0pO1xuXG4gICAgLy8gXHU1M0YzXHU0RTBBXHU4OUQyXHU1REU1XHU1MTc3XHU2MzA5XHU5NEFFXG4gICAgY29uc3QgdG9vbHMgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkLXRvb2xzJyB9KTtcbiAgICBcblxuXG4vLyBcdTk3NUVcdTYyNzlcdTkxQ0ZcdTZBMjFcdTVGMEZcdTRFMEJcdTc2ODRcdTk1RUFcdTUzNjFcdTYzMDlcdTk0QUVcbmlmICghdGhpcy5iYXRjaE1vZGUpIHtcbiAgY29uc3QgZmxhc2hjYXJkQnRuID0gdG9vbHMuY3JlYXRlRGl2KHsgY2xzOiAndG9vbC1idG4tZ3JpZCcgfSk7XG4gIGZsYXNoY2FyZEJ0bi5pbm5lckhUTUwgPSAnXHUyNkExJztcbiAgZmxhc2hjYXJkQnRuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdcdTc1MUZcdTYyMTBcdTk1RUFcdTUzNjEnKTtcbiAgZmxhc2hjYXJkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMucXVpY2tHZW5lcmF0ZUZsYXNoY2FyZCh1bml0KTtcbiAgfSk7XG59XG5cbiAgICBjb25zdCBtb3JlQnRuID0gdG9vbHMuY3JlYXRlRGl2KHsgY2xzOiAndG9vbC1idG4tZ3JpZCcgfSk7XG4gICAgbW9yZUJ0bi5pbm5lckhUTUwgPSAnXHUyMkVFJztcbiAgICBtb3JlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLnNob3dDb250ZXh0TWVudShlLCB1bml0KTtcbiAgICB9KTtcblxuICAgIC8vIFx1N0IxNFx1OEJCMFx1NTE4NVx1NUJCOVx1RkYwOFx1NzBCOVx1NTFGQlx1NUM1NVx1NUYwMFx1NjI3OVx1NkNFOFx1N0YxNlx1OEY5MVx1RkYwOVxuICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ2dyaWQtY2FyZC1jb250ZW50JyB9KTtcbiAgICBjb25zdCBub3RlVGV4dCA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1ub3RlLXRleHQnIH0pO1xuXG4vLyBcdUQ4M0RcdUREMjcgXHU2NjNFXHU3OTNBXHU1QjhDXHU2NTc0XHU1MTg1XHU1QkI5XHVGRjBDXHU0RTBEXHU2MjJBXHU2NUFEXG5sZXQgZGlzcGxheUhUTUwgPSAnJztcblxuLy8gXHU1OTgyXHU2NzlDXHU2NjJGIFFBIFx1N0M3Qlx1NTc4Qlx1RkYwQ1x1NzUyOFx1NEUwRFx1NTQwQ1x1NjgzN1x1NUYwRlx1NjYzRVx1NzkzQVx1OTVFRVx1OTg5OFx1NTQ4Q1x1N0I1NFx1Njg0OFxuaWYgKHVuaXQudHlwZSA9PT0gJ1FBJyAmJiB1bml0LmFuc3dlcikge1xuICBkaXNwbGF5SFRNTCA9IGA8c3Bhbj4ke3VuaXQuY29udGVudH08L3NwYW4+IDxzcGFuID46Ojwvc3Bhbj4gPHNwYW4gPiR7dW5pdC5hbnN3ZXJ9PC9zcGFuPmA7XG59XG4vLyBcdTU5ODJcdTY3OUNcdTY2MkYgY2xvemUgXHU3QzdCXHU1NzhCXHVGRjBDXHU5QUQ4XHU0RUFFXHU2NjNFXHU3OTNBXHU3QjU0XHU2ODQ4XG5lbHNlIGlmICh1bml0LnR5cGUgPT09ICdjbG96ZScgJiYgdW5pdC5mdWxsQ29udGV4dCkge1xuICAvLyBcdUQ4M0RcdUREMjcgXHU1MTQ4XHU1M0JCXHU5NjY0IGZ1bGxDb250ZXh0IFx1NEUyRFx1NzY4NCA9PSBcdTY4MDdcdThCQjBcbiAgY29uc3QgY29udGV4dCA9IHVuaXQuZnVsbENvbnRleHQ7XG4gIGNvbnN0IGFuc3dlciA9IHVuaXQuY29udGVudDtcbiAgXG4gIC8vIFx1NzEzNlx1NTQwRVx1NzUyOCBzcGFuIFx1OUFEOFx1NEVBRVx1N0I1NFx1Njg0OFxuICBkaXNwbGF5SFRNTCA9IGNvbnRleHQucmVwbGFjZShcbiAgICBhbnN3ZXIsIFxuICAgIGA8c3BhbiA+JHthbnN3ZXJ9PC9zcGFuPmBcbiAgKTtcbn1cbi8vIFx1N0VBRlx1NjU4N1x1NjcyQ1xuZWxzZSB7XG4gIGRpc3BsYXlIVE1MID0gdW5pdC5jb250ZW50O1xufVxuXG5ub3RlVGV4dC5pbm5lckhUTUwgPSBkaXNwbGF5SFRNTDtcblxuXG5ub3RlVGV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgdGhpcy50b2dnbGVJbmxpbmVBbm5vdGF0aW9uKGNhcmQsIHVuaXQpO1xufSk7XG5cbiAgICAvLyBcdTY2M0VcdTc5M0FcdTYyNzlcdTZDRThcbiAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk7XG4gICAgaWYgKGFubm90YXRpb24pIHtcbiAgICAgIGNvbnN0IGFubkVsID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLWFubm90YXRpb24nIH0pO1xuICAgICAgYW5uRWwuaW5uZXJIVE1MID0gYDxzdHJvbmc+XHU2Mjc5XHU2Q0U4XHVGRjFBPC9zdHJvbmc+JHthbm5vdGF0aW9uLmNvbnRlbnR9YDtcbiAgICAgIFxuICAgICAgLy8gXHU3MEI5XHU1MUZCXHU2Mjc5XHU2Q0U4XHU0RTVGXHU1M0VGXHU0RUU1XHU1QzU1XHU1RjAwXHU3RjE2XHU4RjkxXG4gICAgICBhbm5FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlSW5saW5lQW5ub3RhdGlvbihjYXJkLCB1bml0KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1NjgwN1x1N0I3RVxuICAgIGlmICh1bml0Lm1ldGFkYXRhLnRhZ3MubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgdGFncyA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC10YWdzJyB9KTtcbiAgICAgIHVuaXQubWV0YWRhdGEudGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgIHRhZ3MuY3JlYXRlU3Bhbih7IHRleHQ6IGAjJHt0YWd9YCwgY2xzOiAndGFnLWdyaWQnIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU1RTk1XHU5MEU4XHU1MTQzXHU0RkUxXHU2MDZGXG4gICAgY29uc3QgbWV0YSA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkLW1ldGEnIH0pO1xuICAgIG1ldGEuY3JlYXRlU3Bhbih7IHRleHQ6IGBMJHt1bml0LnNvdXJjZS5wb3NpdGlvbi5saW5lfWAsIGNsczogJ2xpbmUtaW5mbycgfSk7XG4gICAgXG4gICAgaWYgKHVuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIG1ldGEuY3JlYXRlU3Bhbih7IHRleHQ6IGBcdUQ4M0NcdURDQ0YgJHt1bml0LmZsYXNoY2FyZElkcy5sZW5ndGh9YCwgY2xzOiAnYmFkZ2UtZ3JpZCcgfSk7XG4gICAgfVxuICB9XG4vKipcbiAqIFx1NkUzMlx1NjdEM1x1OTVFQVx1NTM2MVx1N0Y1MVx1NjgzQ1x1NTM2MVx1NzI0N1x1RkYwOFx1NUUyNlx1NEUwQlx1NjJDOVx1ODNEQ1x1NTM1NVx1RkYwOVxuICovXG5wcml2YXRlIHJlbmRlckZsYXNoY2FyZEdyaWRDYXJkKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGNhcmQ6IEZsYXNoY2FyZCkge1xuICBjb25zdCBjYXJkRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkIGZsYXNoY2FyZC1ncmlkLWNhcmQnIH0pO1xuXG4gIC8vIFx1NjI3OVx1OTFDRlx1OTAwOVx1NjJFOVxuICBpZiAodGhpcy5iYXRjaE1vZGUpIHtcbiAgICBjb25zdCBjaGVja2JveCA9IGNhcmRFbC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgY2xzOiAnYmF0Y2gtY2hlY2tib3gnXG4gICAgfSk7XG4gICAgY2hlY2tib3guc2V0QXR0cmlidXRlKCdkYXRhLWNhcmQtaWQnLCBjYXJkLmlkKTtcbiAgICBjaGVja2JveC5jaGVja2VkID0gdGhpcy5zZWxlY3RlZENhcmRJZHMuaGFzKGNhcmQuaWQpO1xuICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICBpZiAoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuYWRkKGNhcmQuaWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuZGVsZXRlKGNhcmQuaWQpO1xuICAgICAgfVxuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFx1OTg3Nlx1OTBFOFxuICBjb25zdCBoZWFkZXIgPSBjYXJkRWwuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkLWhlYWRlcicgfSk7XG4gIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB1bml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY2FyZC5zb3VyY2VDb250ZW50SWQpO1xuICAgIGlmICh1bml0KSB7XG4gICAgICBhd2FpdCB0aGlzLmp1bXBUb1NvdXJjZSh1bml0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2MjdFXHU0RTBEXHU1MjMwXHU3QjE0XHU4QkIwXHU1MzU1XHU1MTQzXHVGRjBDXHU1QzFEXHU4QkQ1XHU3NkY0XHU2M0E1XHU2MjUzXHU1RjAwXHU2NTg3XHU0RUY2XG4gICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGNhcmQuc291cmNlRmlsZSk7XG4gICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKS5vcGVuRmlsZShmaWxlKTtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IFx1NURGMlx1NjI1M1x1NUYwMFx1NkU5MFx1NjU4N1x1NEVGNicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1NjI3RVx1NEUwRFx1NTIzMFx1NTM5Rlx1NTlDQlx1N0IxNFx1OEJCMCcpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgdHlwZUxhYmVsID0gaGVhZGVyLmNyZWF0ZURpdih7XG4gICAgY2xzOiBgZmxhc2hjYXJkLXR5cGUgJHtjYXJkLnR5cGV9YCxcbiAgICB0ZXh0OiBjYXJkLnR5cGUgPT09ICdxYScgPyAnUSZBJyA6ICdcdTU4NkJcdTdBN0EnXG4gIH0pO1xuXG4gIC8vIFx1NTNGM1x1NEUwQVx1ODlEMlx1NEUwQlx1NjJDOVx1ODNEQ1x1NTM1NVx1NjMwOVx1OTRBRVxuICBjb25zdCB0b29scyA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLWNhcmQtdG9vbHMnIH0pO1xuICBjb25zdCBtb3JlQnRuID0gdG9vbHMuY3JlYXRlRGl2KHsgY2xzOiAndG9vbC1idG4tZ3JpZCcgfSk7XG4gIG1vcmVCdG4uaW5uZXJIVE1MID0gJ1x1MjJFRSc7XG4gIG1vcmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy5zaG93Rmxhc2hjYXJkQ29udGV4dE1lbnUoZSwgY2FyZCk7XG4gIH0pO1xuXG4gIC8vIFx1NTM2MVx1NzI0N1x1NTE4NVx1NUJCOVxuICBjb25zdCBjb250ZW50ID0gY2FyZEVsLmNyZWF0ZURpdih7IGNsczogJ2dyaWQtY2FyZC1jb250ZW50JyB9KTtcbiAgXG4gIGNvbnN0IHF1ZXN0aW9uID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdmbGFzaGNhcmQtcXVlc3Rpb24nIH0pO1xuICBxdWVzdGlvbi5pbm5lckhUTUwgPSBgPHN0cm9uZz5cdTk1RUVcdTk4OThcdUZGMUE8L3N0cm9uZz4ke2NhcmQuZnJvbnR9YDtcbiAgXG4gIGNvbnN0IGFuc3dlciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnZmxhc2hjYXJkLWFuc3dlcicgfSk7XG4gIGNvbnN0IGFuc3dlclRleHQgPSBBcnJheS5pc0FycmF5KGNhcmQuYmFjaykgPyBjYXJkLmJhY2suam9pbignLCAnKSA6IGNhcmQuYmFjaztcbiAgYW5zd2VyLmlubmVySFRNTCA9IGA8c3Ryb25nPlx1N0I1NFx1Njg0OFx1RkYxQTwvc3Ryb25nPiR7YW5zd2VyVGV4dH1gO1xuXG4gIC8vIFx1NUU5NVx1OTBFOFx1NTE0M1x1NEZFMVx1NjA2RlxuICBjb25zdCBtZXRhID0gY2FyZEVsLmNyZWF0ZURpdih7IGNsczogJ2dyaWQtY2FyZC1tZXRhJyB9KTtcbiAgbWV0YS5jcmVhdGVTcGFuKHtcbiAgICB0ZXh0OiB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUoY2FyZC5tZXRhZGF0YS5jcmVhdGVkQXQpKSxcbiAgICBjbHM6ICdmbGFzaGNhcmQtZGF0ZSdcbiAgfSk7XG59XG4gIC8qKlxuICAgKiBcdTZFMzJcdTY3RDNcdTk1RUFcdTUzNjFcdTUyMTdcdTg4NjhcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyQ2FyZHNMaXN0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBoZWFkZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZHMtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXIuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVEODNDXHVEQ0NGIFx1NjI0MFx1NjcwOVx1OTVFQVx1NTM2MScgfSk7XG5cbiAgICBjb25zdCBjYXJkc0NvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkcy1ncmlkJyB9KTtcbiAgICBcbiAgICBjb25zdCBmbGFzaGNhcmRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRBbGxGbGFzaGNhcmRzKCk7XG5cbiAgICBcbiAgICBpZiAoZmxhc2hjYXJkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNhcmRzQ29udGFpbmVyLmNyZWF0ZURpdih7XG4gICAgICAgIHRleHQ6ICdcdUQ4M0RcdURDRUQgXHU2NjgyXHU2NUUwXHU5NUVBXHU1MzYxJyxcbiAgICAgICAgY2xzOiAnZW1wdHktc3RhdGUnXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmbGFzaGNhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICBjb25zdCBjYXJkRWwgPSBjYXJkc0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdmbGFzaGNhcmQtaXRlbScgfSk7XG5cbiAgICAgIC8vIFx1NjI3OVx1OTFDRlx1OTAwOVx1NjJFOVx1NkEyMVx1NUYwRlx1RkYxQVx1NkRGQlx1NTJBMGNoZWNrYm94XG4gICAgICBpZiAodGhpcy5iYXRjaE1vZGUpIHtcbiAgICAgICAgY29uc3QgY2hlY2tib3ggPSBjYXJkRWwuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgICAgY2xzOiAnYmF0Y2gtY2hlY2tib3gnXG4gICAgICAgIH0pO1xuICAgICAgICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY2FyZC1pZCcsIGNhcmQuaWQpO1xuICAgICAgICBjaGVja2JveC5jaGVja2VkID0gdGhpcy5zZWxlY3RlZENhcmRJZHMuaGFzKGNhcmQuaWQpO1xuICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuYWRkKGNhcmQuaWQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5kZWxldGUoY2FyZC5pZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjYXJkSGVhZGVyID0gY2FyZEVsLmNyZWF0ZURpdih7IGNsczogJ2ZsYXNoY2FyZC1oZWFkZXInIH0pO1xuICAgICAgY29uc3QgdHlwZUxhYmVsID0gY2FyZEhlYWRlci5jcmVhdGVEaXYoe1xuICAgICAgICBjbHM6IGBmbGFzaGNhcmQtdHlwZSAke2NhcmQudHlwZX1gLFxuICAgICAgICB0ZXh0OiBjYXJkLnR5cGUgPT09ICdxYScgPyAnUSZBJyA6ICdcdTU4NkJcdTdBN0EnXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY2FyZEhlYWRlci5jcmVhdGVTcGFuKHtcbiAgICAgICAgdGV4dDogdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKGNhcmQubWV0YWRhdGEuY3JlYXRlZEF0KSksXG4gICAgICAgIGNsczogJ2ZsYXNoY2FyZC1kYXRlJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTIyMFx1OTY2NFx1NjMwOVx1OTRBRVxuICAgICAgY29uc3QgZGVsZXRlQnRuID0gY2FyZEhlYWRlci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICB0ZXh0OiAnXHVEODNEXHVEREQxXHVGRTBGJyxcbiAgICAgICAgY2xzOiAnZmxhc2hjYXJkLWRlbGV0ZS1idG4nXG4gICAgICB9KTtcbiAgICAgIGRlbGV0ZUJ0bi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnXHU1MjIwXHU5NjY0XHU5NUVBXHU1MzYxJyk7XG4gICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBpZiAoY29uZmlybSgnXHU3ODZFXHU1QjlBXHU4OTgxXHU1MjIwXHU5NjY0XHU4RkQ5XHU1RjIwXHU5NUVBXHU1MzYxXHU1NDE3XHVGRjFGJykpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZUZsYXNoY2FyZChjYXJkLmlkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNhcmRCb2R5ID0gY2FyZEVsLmNyZWF0ZURpdih7IGNsczogJ2ZsYXNoY2FyZC1ib2R5JyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcXVlc3Rpb24gPSBjYXJkQm9keS5jcmVhdGVEaXYoeyBjbHM6ICdmbGFzaGNhcmQtcXVlc3Rpb24nIH0pO1xuICAgICAgcXVlc3Rpb24uaW5uZXJIVE1MID0gYDxzdHJvbmc+XHU5NUVFXHU5ODk4XHVGRjFBPC9zdHJvbmc+JHtjYXJkLmZyb250fWA7XG4gICAgICBcbiAgICAgIGNvbnN0IGFuc3dlciA9IGNhcmRCb2R5LmNyZWF0ZURpdih7IGNsczogJ2ZsYXNoY2FyZC1hbnN3ZXInIH0pO1xuICAgICAgY29uc3QgYW5zd2VyVGV4dCA9IEFycmF5LmlzQXJyYXkoY2FyZC5iYWNrKSA/IGNhcmQuYmFjay5qb2luKCcsICcpIDogY2FyZC5iYWNrO1xuICAgICAgYW5zd2VyLmlubmVySFRNTCA9IGA8c3Ryb25nPlx1N0I1NFx1Njg0OFx1RkYxQTwvc3Ryb25nPiR7YW5zd2VyVGV4dH1gO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0gXHU0RUE0XHU0RTkyXHU2NUI5XHU2Q0Q1ID09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIFx1NTIwN1x1NjM2Mlx1NTE4NVx1ODA1NFx1NjI3OVx1NkNFOFx1N0YxNlx1OEY5MVx1NTY2OFxuICAgKi9cbiAgcHJpdmF0ZSB0b2dnbGVJbmxpbmVBbm5vdGF0aW9uKGNhcmRFbDogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0KSB7XG4gICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU3RUNGXHU1QjU4XHU1NzI4XHU3RjE2XHU4RjkxXHU1NjY4XG4gICAgbGV0IGV4aXN0aW5nRWRpdG9yID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoJy5pbmxpbmUtYW5ub3RhdGlvbi1lZGl0b3InKSBhcyBIVE1MRWxlbWVudDtcbiAgICBcbiAgICBpZiAoZXhpc3RpbmdFZGl0b3IpIHtcbiAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NURGMlx1NUI1OFx1NTcyOFx1RkYwQ1x1NzlGQlx1OTY2NFx1N0YxNlx1OEY5MVx1NTY2OFx1NUU3Nlx1NjA2Mlx1NTkwRFx1NjI3OVx1NkNFOFx1OTg4NFx1ODlDOFxuICAgICAgZXhpc3RpbmdFZGl0b3IucmVtb3ZlKCk7XG4gICAgICBcbiAgICAgIC8vIFx1NjA2Mlx1NTkwRFx1NjI3OVx1NkNFOFx1OTg4NFx1ODlDOFx1NjYzRVx1NzkzQVxuICAgICAgY29uc3QgYW5ub3RhdGlvbiA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldENvbnRlbnRBbm5vdGF0aW9uKHVuaXQuaWQpO1xuICAgICAgaWYgKGFubm90YXRpb24pIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGNhcmRFbC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1jb250ZW50LCAuZ3JpZC1jYXJkLWNvbnRlbnQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdQcmV2aWV3ID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCcuYW5ub3RhdGlvbi1wcmV2aWV3LCAuZ3JpZC1hbm5vdGF0aW9uJyk7XG4gICAgICAgIGlmICghZXhpc3RpbmdQcmV2aWV3KSB7XG4gICAgICAgICAgdGhpcy5yZWNyZWF0ZUFubm90YXRpb25QcmV2aWV3KGNvbnRlbnQsIGNhcmRFbCwgdW5pdCwgYW5ub3RhdGlvbi5jb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFx1ODNCN1x1NTNENlx1NzNCMFx1NjcwOVx1NjI3OVx1NkNFOFxuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKTtcbiAgICBcbiAgICAvLyBcdTYyN0VcdTUyMzBcdTYyNzlcdTZDRThcdTk4ODRcdTg5QzhcdTUxNDNcdTdEMjBcdTYyMTZcdTYzRDJcdTUxNjVcdTRGNERcdTdGNkVcbiAgICBjb25zdCBjb250ZW50ID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvbnRlbnQsIC5ncmlkLWNhcmQtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbnN0IGFubm90YXRpb25QcmV2aWV3ID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCcuYW5ub3RhdGlvbi1wcmV2aWV3LCAuZ3JpZC1hbm5vdGF0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgaXNHcmlkQ2FyZCA9IGNhcmRFbC5jbGFzc0xpc3QuY29udGFpbnMoJ2dyaWQtY2FyZCcpO1xuICAgIFxuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1NjI3OVx1NkNFOFx1OTg4NFx1ODlDOFx1RkYwQ1x1NjZGRlx1NjM2Mlx1NUI4M1x1RkYxQlx1NTQyNlx1NTIxOVx1NTcyOFx1NTQwOFx1OTAwMlx1NEY0RFx1N0Y2RVx1NjNEMlx1NTE2NVxuICAgIGNvbnN0IGVkaXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGVkaXRvci5jbGFzc05hbWUgPSAnaW5saW5lLWFubm90YXRpb24tZWRpdG9yJztcbiAgICBcbiAgICBjb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG4gICAgdGV4dGFyZWEuY2xhc3NOYW1lID0gJ2lubGluZS1hbm5vdGF0aW9uLXRleHRhcmVhJztcbiAgICB0ZXh0YXJlYS5wbGFjZWhvbGRlciA9ICdBZGQgY29tbWVudC4uLic7XG4gICAgdGV4dGFyZWEudmFsdWUgPSBhbm5vdGF0aW9uPy5jb250ZW50IHx8ICcnO1xuICAgIHRleHRhcmVhLnNldEF0dHJpYnV0ZSgnZGF0YS11bml0LWlkJywgdW5pdC5pZCk7XG4gICAgXG4gICAgY29uc3QgaGludCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGhpbnQuY2xhc3NOYW1lID0gJ2lubGluZS1hbm5vdGF0aW9uLWhpbnQnO1xuICAgIGhpbnQudGV4dENvbnRlbnQgPSAnU2hpZnQgKyBFbnRlciBcdTYzNjJcdTg4NEMnO1xuICAgIFxuICAgIGVkaXRvci5hcHBlbmRDaGlsZCh0ZXh0YXJlYSk7XG4gICAgZWRpdG9yLmFwcGVuZENoaWxkKGhpbnQpO1xuICAgIFxuICAgIC8vIFx1NjZGRlx1NjM2Mlx1NjIxNlx1NjNEMlx1NTE2NVx1N0YxNlx1OEY5MVx1NTY2OFxuICAgIGlmIChhbm5vdGF0aW9uUHJldmlldykge1xuICAgICAgLy8gXHU2NkZGXHU2MzYyXHU2Mjc5XHU2Q0U4XHU5ODg0XHU4OUM4XG4gICAgICBhbm5vdGF0aW9uUHJldmlldy5yZXBsYWNlV2l0aChlZGl0b3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTU3MjhcdTdCMTRcdThCQjBcdTY1ODdcdTY3MkNcdTU0MEVcdTk3NjJcdTYzRDJcdTUxNjVcbiAgICAgIGNvbnN0IG5vdGVUZXh0ID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCcubm90ZS10ZXh0LCAuZ3JpZC1ub3RlLXRleHQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmIChub3RlVGV4dCkge1xuICAgICAgICBub3RlVGV4dC5hZnRlcihlZGl0b3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChlZGl0b3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1ODFFQVx1NTJBOFx1ODA1QVx1NzEyNlxuICAgIHRleHRhcmVhLmZvY3VzKCk7XG4gICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UodGV4dGFyZWEudmFsdWUubGVuZ3RoLCB0ZXh0YXJlYS52YWx1ZS5sZW5ndGgpO1xuICAgIFxuXG4gICAgXG4vLyBcdTU5MzFcdTcxMjZcdTY1RjZcdTgxRUFcdTUyQThcdTRGRERcdTVCNThcbnRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBhc3luYyAoZSkgPT4ge1xuICAvLyBcdTU5ODJcdTY3OUNcdTcwQjlcdTUxRkJcdTc2ODRcdTY2MkZcdTUxNzZcdTRFRDZcdTUxNDNcdTdEMjBcdUZGMENcdTgxRUFcdTUyQThcdTRGRERcdTVCNThcbiAgY29uc3QgcmVsYXRlZFRhcmdldCA9IGUucmVsYXRlZFRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgaWYgKCFyZWxhdGVkVGFyZ2V0IHx8ICFlZGl0b3IuY29udGFpbnMocmVsYXRlZFRhcmdldCkpIHtcbiAgICAvLyBcdTVFRjZcdThGREZcdTRGRERcdTVCNThcdUZGMENcdTc4NkVcdTRGRERcdTdGMTZcdThGOTFcdTU2NjhcdThGRDhcdTU3MjggRE9NIFx1NEUyRFxuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKGVkaXRvci5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZUlubGluZUFubm90YXRpb24oZWRpdG9yLCB1bml0LCB0ZXh0YXJlYS52YWx1ZSk7XG4gICAgICB9XG4gICAgfSwgMTAwKTtcbiAgfVxufSk7XG5cbi8vIFRhYiBcdTk1MkVcdTRGRERcdTVCNThcbnRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBhc3luYyAoZSkgPT4ge1xuICBpZiAoZS5rZXkgPT09ICdUYWInKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGF3YWl0IHRoaXMuc2F2ZUlubGluZUFubm90YXRpb24oZWRpdG9yLCB1bml0LCB0ZXh0YXJlYS52YWx1ZSk7XG4gIH1cbn0pO1xuICB9XG4gIFxuICAvKipcbiAgICogXHU0RkREXHU1QjU4XHU1MTg1XHU4MDU0XHU2Mjc5XHU2Q0U4XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHNhdmVJbmxpbmVBbm5vdGF0aW9uKGVkaXRvckVsOiBIVE1MRWxlbWVudCwgdW5pdDogQ29udGVudFVuaXQsIHRleHQ6IHN0cmluZykge1xuICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW3NhdmVJbmxpbmVBbm5vdGF0aW9uXSBcdTVGMDBcdTU5Q0JcdTRGRERcdTVCNTgnLCB7IHVuaXRJZDogdW5pdC5pZCwgdGV4dCB9KTtcbiAgICBcbiAgICBjb25zdCB0cmltbWVkVGV4dCA9IHRleHQudHJpbSgpO1xuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKTtcbiAgICBcbiAgICBpZiAodHJpbW1lZFRleHQpIHtcbiAgICAgIGlmIChhbm5vdGF0aW9uKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLnVwZGF0ZUFubm90YXRpb24oYW5ub3RhdGlvbi5pZCwge1xuICAgICAgICAgIGNvbnRlbnQ6IHRyaW1tZWRUZXh0XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuYWRkQ29udGVudEFubm90YXRpb24odW5pdC5pZCwgdHJpbW1lZFRleHQpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYW5ub3RhdGlvbikge1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZGVsZXRlQW5ub3RhdGlvbihhbm5vdGF0aW9uLmlkKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1RDgzRFx1REREMVx1RkUwRiBcdTYyNzlcdTZDRThcdTVERjJcdTUyMjBcdTk2NjQnKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgY2FyZCA9IGVkaXRvckVsLmNsb3Nlc3QoJy5jb21wYWN0LWNhcmQsIC5ncmlkLWNhcmQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDBEIFtzYXZlSW5saW5lQW5ub3RhdGlvbl0gXHU2MjdFXHU1MjMwIGNhcmQ6JywgISFjYXJkKTtcbiAgICBcbiAgICBlZGl0b3JFbC5yZW1vdmUoKTtcbiAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDBEIFtzYXZlSW5saW5lQW5ub3RhdGlvbl0gXHU3RjE2XHU4RjkxXHU1NjY4XHU1REYyXHU3OUZCXHU5NjY0Jyk7XG4gICAgXG4gICAgaWYgKHRyaW1tZWRUZXh0ICYmIGNhcmQpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvbnRlbnQsIC5ncmlkLWNhcmQtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgY29uc29sZS5sb2coJ1x1RDgzRFx1REQwRCBbc2F2ZUlubGluZUFubm90YXRpb25dIFx1NjI3RVx1NTIzMCBjb250ZW50OicsICEhY29udGVudCk7XG4gICAgICBcbiAgICAgIGlmIChjb250ZW50KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW3NhdmVJbmxpbmVBbm5vdGF0aW9uXSBcdTUxQzZcdTU5MDdcdTkxQ0RcdTVFRkFcdTYyNzlcdTZDRThcdTk4ODRcdTg5QzgnKTtcbiAgICAgICAgdGhpcy5yZWNyZWF0ZUFubm90YXRpb25QcmV2aWV3KGNvbnRlbnQsIGNhcmQsIHVuaXQsIHRyaW1tZWRUZXh0KTtcbiAgICAgICAgY29uc29sZS5sb2coJ1x1RDgzRFx1REQwRCBbc2F2ZUlubGluZUFubm90YXRpb25dIFx1NjI3OVx1NkNFOFx1OTg4NFx1ODlDOFx1NURGMlx1OTFDRFx1NUVGQScpO1xuICAgICAgICAgICAgICAvLyBcdUQ4M0RcdUREMjcgXHU2NUIwXHU1ODlFXHVGRjFBXHU2NkY0XHU2NUIwIGluZGljYXRvclxuICAgICAgY29uc3QgaW5kaWNhdG9yID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1pbmRpY2F0b3InKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmIChpbmRpY2F0b3IgJiYgIWluZGljYXRvci5jbGFzc0xpc3QuY29udGFpbnMoJ2hhcy1hbm5vdGF0aW9uJykpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1x1RDgzRFx1REQwRCBbc2F2ZUlubGluZUFubm90YXRpb25dIFx1NjZGNFx1NjVCMCBpbmRpY2F0b3IgXHU2REZCXHU1MkEwXHU2Mjc5XHU2Q0U4XHU2ODM3XHU1RjBGJyk7XG4gICAgICAgIGluZGljYXRvci5jbGFzc0xpc3QuYWRkKCdoYXMtYW5ub3RhdGlvbicpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmICghdHJpbW1lZFRleHQgJiYgY2FyZCkge1xuICAgIC8vIFx1RDgzRFx1REQyNyBcdTU5ODJcdTY3OUNcdTUyMjBcdTk2NjRcdTRFODZcdTYyNzlcdTZDRThcdUZGMENcdTc5RkJcdTk2NjQgaW5kaWNhdG9yIFx1NzY4NFx1NjI3OVx1NkNFOFx1NjgzN1x1NUYwRlxuICAgIGNvbnN0IGluZGljYXRvciA9IGNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtaW5kaWNhdG9yJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKGluZGljYXRvciAmJiBpbmRpY2F0b3IuY2xhc3NMaXN0LmNvbnRhaW5zKCdoYXMtYW5ub3RhdGlvbicpKSB7XG4gICAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDBEIFtzYXZlSW5saW5lQW5ub3RhdGlvbl0gXHU2NkY0XHU2NUIwIGluZGljYXRvciBcdTc5RkJcdTk2NjRcdTYyNzlcdTZDRThcdTY4MzdcdTVGMEYnKTtcbiAgICAgIGluZGljYXRvci5jbGFzc0xpc3QucmVtb3ZlKCdoYXMtYW5ub3RhdGlvbicpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgLyoqXG4gICAqIFx1NTNENlx1NkQ4OFx1NTE4NVx1ODA1NFx1NjI3OVx1NkNFOFx1N0YxNlx1OEY5MVxuICAgKi9cbiAgcHJpdmF0ZSBjYW5jZWxJbmxpbmVBbm5vdGF0aW9uKGVkaXRvckVsOiBIVE1MRWxlbWVudCwgY2FyZEVsOiBIVE1MRWxlbWVudCwgdW5pdDogQ29udGVudFVuaXQpIHtcbiAgICAvLyBcdTc5RkJcdTk2NjRcdTdGMTZcdThGOTFcdTU2NjhcbiAgICBlZGl0b3JFbC5yZW1vdmUoKTtcbiAgICBcbiAgICAvLyBcdTYwNjJcdTU5MERcdTYyNzlcdTZDRThcdTk4ODRcdTg5QzhcdUZGMDhcdTU5ODJcdTY3OUNcdTY3MDlcdUZGMDlcbiAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk7XG4gICAgaWYgKGFubm90YXRpb24pIHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkRWwucXVlcnlTZWxlY3RvcignLmNhcmQtY29udGVudCwgLmdyaWQtY2FyZC1jb250ZW50JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICB0aGlzLnJlY3JlYXRlQW5ub3RhdGlvblByZXZpZXcoY29udGVudCwgY2FyZEVsLCB1bml0LCBhbm5vdGF0aW9uLmNvbnRlbnQpO1xuICAgIH1cbiAgfVxuICBcbiAgLyoqXG4gICAqIFx1OTFDRFx1NjVCMFx1NTIxQlx1NUVGQVx1NjI3OVx1NkNFOFx1OTg4NFx1ODlDOFxuICAgKi9cbiAgcHJpdmF0ZSByZWNyZWF0ZUFubm90YXRpb25QcmV2aWV3KFxuICAgIGNvbnRlbnRFbDogSFRNTEVsZW1lbnQsIFxuICAgIGNhcmRFbDogSFRNTEVsZW1lbnQsIFxuICAgIHVuaXQ6IENvbnRlbnRVbml0LCBcbiAgICBhbm5vdGF0aW9uVGV4dDogc3RyaW5nXG4gICkge1xuICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW3JlY3JlYXRlQW5ub3RhdGlvblByZXZpZXddIFx1NUYwMFx1NTlDQlx1OTFDRFx1NUVGQScsIHsgdW5pdElkOiB1bml0LmlkIH0pO1xuICAgIFxuICAgIGNvbnN0IGV4aXN0aW5nUHJldmlldyA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcuYW5ub3RhdGlvbi1wcmV2aWV3LCAuZ3JpZC1hbm5vdGF0aW9uJyk7XG4gICAgaWYgKGV4aXN0aW5nUHJldmlldykge1xuICAgICAgY29uc29sZS5sb2coJ1x1RDgzRFx1REQwRCBbcmVjcmVhdGVBbm5vdGF0aW9uUHJldmlld10gXHU3OUZCXHU5NjY0XHU2NUU3XHU5ODg0XHU4OUM4Jyk7XG4gICAgICBleGlzdGluZ1ByZXZpZXcucmVtb3ZlKCk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGlzR3JpZENhcmQgPSBjYXJkRWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdncmlkLWNhcmQnKTtcbiAgICBjb25zdCBhbm5FbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGFubkVsLmNsYXNzTmFtZSA9IGlzR3JpZENhcmQgPyAnZ3JpZC1hbm5vdGF0aW9uJyA6ICdhbm5vdGF0aW9uLXByZXZpZXcnO1xuICAgIFxuICAgIGlmIChpc0dyaWRDYXJkKSB7XG4gICAgICBhbm5FbC5pbm5lckhUTUwgPSBgPHN0cm9uZz5cdTYyNzlcdTZDRThcdUZGMUE8L3N0cm9uZz4ke2Fubm90YXRpb25UZXh0fWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpc3BsYXlUZXh0ID0gYW5ub3RhdGlvblRleHQubGVuZ3RoID4gNjBcbiAgICAgICAgPyBhbm5vdGF0aW9uVGV4dC5zdWJzdHJpbmcoMCwgNjApICsgJy4uLidcbiAgICAgICAgOiBhbm5vdGF0aW9uVGV4dDtcbiAgICAgIGFubkVsLnRleHRDb250ZW50ID0gYFx1RDgzRFx1RENBQyAke2Rpc3BsYXlUZXh0fWA7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW3JlY3JlYXRlQW5ub3RhdGlvblByZXZpZXddIFx1NjI3OVx1NkNFOFx1NTE0M1x1N0QyMFx1NURGMlx1NTIxQlx1NUVGQVx1RkYwQ2NsYXNzTmFtZTonLCBhbm5FbC5jbGFzc05hbWUpO1xuICAgIFxuICAgIC8vIFx1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlxuICAgIGFubkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW1x1NjI3OVx1NkNFOFx1OTg4NFx1ODlDOF0gXHU4OEFCXHU3MEI5XHU1MUZCJyk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy50b2dnbGVJbmxpbmVBbm5vdGF0aW9uKGNhcmRFbCwgdW5pdCk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHVEODNEXHVERDI3IFx1NjVCMFx1NTg5RVx1RkYxQVRhYiBcdTk1MkVcdTRFOEJcdTRFRjZcbiAgICBhbm5FbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ1RhYicpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1x1RDgzRFx1REQwRCBbXHU2Mjc5XHU2Q0U4XHU5ODg0XHU4OUM4XSBUYWIgXHU5NTJFXHU4OEFCXHU2MzA5XHU0RTBCJyk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdGhpcy50b2dnbGVJbmxpbmVBbm5vdGF0aW9uKGNhcmRFbCwgdW5pdCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgY29uc3Qgbm90ZVRleHQgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcignLm5vdGUtdGV4dCwgLmdyaWQtbm90ZS10ZXh0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKG5vdGVUZXh0KSB7XG4gICAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDBEIFtyZWNyZWF0ZUFubm90YXRpb25QcmV2aWV3XSBcdTYzRDJcdTUxNjVcdTUyMzAgbm90ZS10ZXh0IFx1NTQwRVx1OTc2MicpO1xuICAgICAgbm90ZVRleHQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmVuZCcsIGFubkVsKTtcbiAgICAgIFxuICAgICAgY29uc3QgaW5zZXJ0ZWQgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcignLmFubm90YXRpb24tcHJldmlldywgLmdyaWQtYW5ub3RhdGlvbicpO1xuICAgICAgY29uc29sZS5sb2coJ1x1RDgzRFx1REQwRCBbcmVjcmVhdGVBbm5vdGF0aW9uUHJldmlld10gXHU2M0QyXHU1MTY1XHU1NDBFXHU2OEMwXHU2N0U1XHVGRjBDXHU1MTQzXHU3RDIwXHU2NjJGXHU1NDI2XHU1NzI4RE9NXHU0RTJEOicsICEhaW5zZXJ0ZWQsIGluc2VydGVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ1x1RDgzRFx1REQwRCBbcmVjcmVhdGVBbm5vdGF0aW9uUHJldmlld10gXHU3NkY0XHU2M0E1XHU4RkZEXHU1MkEwXHU1MjMwIGNvbnRlbnQnKTtcbiAgICAgIGNvbnRlbnRFbC5hcHBlbmRDaGlsZChhbm5FbCk7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW3JlY3JlYXRlQW5ub3RhdGlvblByZXZpZXddIFx1OTFDRFx1NUVGQVx1NUI4Q1x1NjIxMCcpO1xuICAgIFxuICAgIC8vIFx1RDgzRFx1REQyNyBcdThCQkVcdTdGNkUgdGFiaW5kZXggXHU0RjdGXHU1MTc2XHU1M0VGXHU0RUU1XHU2M0E1XHU2NTM2XHU3MTI2XHU3MEI5XG4gICAgYW5uRWwuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICcwJyk7XG4gICAgYW5uRWwuZm9jdXMoKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDBEIFtyZWNyZWF0ZUFubm90YXRpb25QcmV2aWV3XSBcdTVERjJcdTgwNUFcdTcxMjZcdTUyMzBcdTYyNzlcdTZDRThcdTk4ODRcdTg5QzgnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYyNTNcdTVGMDBcdTYyNzlcdTZDRThcdTdGMTZcdThGOTFcdTU2NjhcdUZGMDhcdTZBMjFcdTYwMDFcdTY4NDZcdTY1QjlcdTVGMEZcdUZGMENcdTRGRERcdTc1NTlcdTc1MjhcdTRFOEVcdTUzRjNcdTk1MkVcdTgzRENcdTUzNTVcdUZGMDlcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgb3BlbkFubm90YXRpb25FZGl0b3IodW5pdDogQ29udGVudFVuaXQpIHtcbiAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk7XG4gICAgY29uc3QgZXhpc3RpbmdUZXh0ID0gYW5ub3RhdGlvbj8uY29udGVudCB8fCAnJztcblxuICAgIGNvbnN0IG1vZGFsID0gbmV3IEFubm90YXRpb25Nb2RhbChcbiAgICAgIHRoaXMuYXBwLFxuICAgICAgZXhpc3RpbmdUZXh0LFxuICAgICAgYXN5bmMgKG5ld1RleHQ6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAobmV3VGV4dC50cmltKCkpIHtcbiAgICAgICAgICBpZiAoYW5ub3RhdGlvbikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIudXBkYXRlQW5ub3RhdGlvbihhbm5vdGF0aW9uLmlkLCB7XG4gICAgICAgICAgICAgIGNvbnRlbnQ6IG5ld1RleHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5hZGRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkLCBuZXdUZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IFx1NjI3OVx1NkNFOFx1NURGMlx1NEZERFx1NUI1OCcpO1xuICAgICAgICB9IGVsc2UgaWYgKGFubm90YXRpb24pIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5kZWxldGVBbm5vdGF0aW9uKGFubm90YXRpb24uaWQpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1RDgzRFx1REREMVx1RkUwRiBcdTYyNzlcdTZDRThcdTVERjJcdTUyMjBcdTk2NjQnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgbW9kYWwub3BlbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1OERGM1x1OEY2Q1x1NTIzMFx1NTM5Rlx1NjU4N1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBqdW1wVG9Tb3VyY2UodW5pdDogQ29udGVudFVuaXQpIHtcblxuICAgIFxuICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodW5pdC5zb3VyY2UuZmlsZSk7XG4gICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1NjU4N1x1NEVGNlx1NEUwRFx1NUI1OFx1NTcyOCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgXG4gICAgLy8gXHU2ODA3XHU4QkIwXHU5NzAwXHU4OTgxXHU2MDYyXHU1OTBEXHU2RURBXHU1MkE4XG4gICAgdGhpcy5zaG91bGRSZXN0b3JlU2Nyb2xsID0gdHJ1ZTtcblxuICAgIFxuICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XG4gICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcbiAgXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoSXRlbVZpZXcpO1xuICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgY29uc3QgZWRpdG9yID0gKHZpZXcgYXMgYW55KS5lZGl0b3I7XG4gICAgICAgIGlmIChlZGl0b3IpIHtcbiAgICAgICAgICBjb25zdCBsaW5lID0gdW5pdC5zb3VyY2UucG9zaXRpb24ubGluZTtcbiAgICAgICAgICBjb25zdCBsaW5lQ291bnQgPSBlZGl0b3IubGluZUNvdW50KCk7XG4gICAgICAgICAgY29uc3QgdmFsaWRMaW5lID0gTWF0aC5taW4obGluZSwgbGluZUNvdW50IC0gMSk7XG4gICAgICAgICAgXG4gICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IHZhbGlkTGluZSwgY2g6IDAgfSk7XG4gICAgICAgICAgZWRpdG9yLnNjcm9sbEludG9WaWV3KFxuICAgICAgICAgICAgeyBmcm9tOiB7IGxpbmU6IHZhbGlkTGluZSwgY2g6IDAgfSwgdG86IHsgbGluZTogdmFsaWRMaW5lLCBjaDogMCB9IH0sXG4gICAgICAgICAgICB0cnVlXG4gICAgICAgICAgKTtcbiAgICAgICAgICBcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpbmVMZW5ndGggPSBlZGl0b3IuZ2V0TGluZSh2YWxpZExpbmUpPy5sZW5ndGggfHwgMDtcbiAgICAgICAgICAgICAgZWRpdG9yLnNldFNlbGVjdGlvbihcbiAgICAgICAgICAgICAgICB7IGxpbmU6IHZhbGlkTGluZSwgY2g6IDAgfSwgXG4gICAgICAgICAgICAgICAgeyBsaW5lOiB2YWxpZExpbmUsIGNoOiBsaW5lTGVuZ3RoIH1cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignU2VsZWN0aW9uIGVycm9yOicsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgIH0sIDIwMCk7XG4gIH1cblxuICAvKipcbiAgICogXHU1RkVCXHU5MDFGXHU3NTFGXHU2MjEwXHU5NUVBXHU1MzYxXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHF1aWNrR2VuZXJhdGVGbGFzaGNhcmQodW5pdDogQ29udGVudFVuaXQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBRdWlja0ZsYXNoY2FyZENyZWF0b3IgfSA9IGF3YWl0IGltcG9ydCgnLi4vY29yZS9RdWlja0ZsYXNoY2FyZENyZWF0b3InKTtcbiAgICAgIGNvbnN0IGNyZWF0b3IgPSBuZXcgUXVpY2tGbGFzaGNhcmRDcmVhdG9yKHRoaXMucGx1Z2luKTtcbiAgICAgIGF3YWl0IGNyZWF0b3IuY3JlYXRlU21hcnRDYXJkKHVuaXQpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkExIFx1OTVFQVx1NTM2MVx1NURGMlx1NzUxRlx1NjIxMCcpO1xuICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBcdTc1MUZcdTYyMTBcdTk1RUFcdTUzNjFcdTU5MzFcdThEMjUnKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuICAvKipcbiAqIFx1NjYzRVx1NzkzQVx1NjI3OVx1OTFDRlx1NjRDRFx1NEY1Q1x1ODNEQ1x1NTM1NVxuICovXG5wcml2YXRlIHNob3dCYXRjaE1lbnUoZXZlbnQ6IE1vdXNlRXZlbnQsIHVuaXQ/OiBDb250ZW50VW5pdCkge1xuICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcblxuXG5cbiAgLy8gXHU1REYyXHU3RUNGXHU1NzI4XHU2Mjc5XHU5MUNGXHU2QTIxXHU1RjBGXHVGRjBDXHU2NjNFXHU3OTNBXHU2Mjc5XHU5MUNGXHU2NENEXHU0RjVDXHU5MDA5XHU5ODc5XG4gIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICBpdGVtXG4gICAgICAuc2V0VGl0bGUodGhpcy5pc0FsbFNlbGVjdGVkKCkgPyAnXHUyNjExIFx1OTAwOVx1NjJFOScgOiAnXHUyNjEwIFx1NTE2OFx1OTAwOScpXG4gICAgICAuc2V0SWNvbignY2hlY2stc3F1YXJlJylcbiAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgdGhpcy50b2dnbGVTZWxlY3RBbGwoKTtcbiAgICAgIH0pXG4gICk7XG5cbiAgbWVudS5hZGRTZXBhcmF0b3IoKTtcblxuICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ25vdGVzJykge1xuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKGBcdTI2QTEgXHU2Mjc5XHU5MUNGXHU1MjM2XHU1MzYxICgke3RoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemV9KWApXG4gICAgICAgIC5zZXRJY29uKCd6YXAnKVxuICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgdGhpcy5iYXRjaENyZWF0ZUZsYXNoY2FyZHMoKTtcbiAgICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgIGl0ZW1cbiAgICAgIC5zZXRUaXRsZShgXHVEODNEXHVEREQxXHVGRTBGIFx1NTIyMFx1OTY2NFx1OTAwOVx1NEUyRCAoJHt0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnID8gdGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZSA6IHRoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemV9KWApXG4gICAgICAuc2V0SWNvbigndHJhc2gnKVxuICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgICAgICAgIHRoaXMuYmF0Y2hEZWxldGVGbGFzaGNhcmRzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5iYXRjaERlbGV0ZU5vdGVzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICk7XG5cbiAgbWVudS5hZGRTZXBhcmF0b3IoKTtcblxuICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgaXRlbVxuICAgICAgLnNldFRpdGxlKCdcdTI3MTMgXHU5MDAwXHU1MUZBXHU2Mjc5XHU5MUNGXHU2QTIxXHU1RjBGJylcbiAgICAgIC5zZXRJY29uKCd4JylcbiAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgdGhpcy5iYXRjaE1vZGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIH0pXG4gICk7XG5cbiAgbWVudS5zaG93QXRNb3VzZUV2ZW50KGV2ZW50KTtcbn1cblxuICAvKipcbiAgICogXHU2NjNFXHU3OTNBXHU0RTBBXHU0RTBCXHU2NTg3XHU4M0RDXHU1MzU1XG4gICAqL1xuICBwcml2YXRlIHNob3dDb250ZXh0TWVudShldmVudDogTW91c2VFdmVudCwgdW5pdDogQ29udGVudFVuaXQpIHtcbiAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdUQ4M0RcdURDRDYgXHU4REYzXHU4RjZDXHU1MjMwXHU1MzlGXHU2NTg3JylcbiAgICAgICAgLnNldEljb24oJ2Fycm93LXVwLXJpZ2h0JylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5qdW1wVG9Tb3VyY2UodW5pdCkpXG4gICAgKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdUQ4M0RcdURDQUMgXHU3RjE2XHU4RjkxXHU2Mjc5XHU2Q0U4JylcbiAgICAgICAgLnNldEljb24oJ21lc3NhZ2Utc3F1YXJlJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5vcGVuQW5ub3RhdGlvbkVkaXRvcih1bml0KSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcbiAgICBpZiAodW5pdC5mbGFzaGNhcmRJZHMubGVuZ3RoID4gMCkge1xuICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICBpdGVtXG4gICAgICAgICAgLnNldFRpdGxlKCdcdTI3MEZcdUZFMEYgXHU3RjE2XHU4RjkxXHU5NUVBXHU1MzYxJylcbiAgICAgICAgICAuc2V0SWNvbignZWRpdCcpXG4gICAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5lZGl0Rmxhc2hjYXJkc0ZvclVuaXQodW5pdCxldmVudCkpXG4gICAgICApO1xuICAgICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcbiAgICB9XG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1MjZBMSBcdTc1MUZcdTYyMTBcdTk1RUFcdTUzNjEnKVxuICAgICAgICAuc2V0SWNvbignemFwJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5xdWlja0dlbmVyYXRlRmxhc2hjYXJkKHVuaXQpKVxuICAgICk7XG4gIFxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdTI3OTUgXHU1MjFCXHU1RUZBIFFBIFx1OTVFQVx1NTM2MScpXG4gICAgICAgIC5zZXRJY29uKCdwbHVzJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRmxhc2hjYXJkKHVuaXQsICdxYScpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHUyNzk1IFx1NTIxQlx1NUVGQVx1NTg2Qlx1N0E3QVx1OTVFQVx1NTM2MScpXG4gICAgICAgIC5zZXRJY29uKCdwbHVzJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRmxhc2hjYXJkKHVuaXQsICdjbG96ZScpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1NjdFNVx1NzcwQlx1N0VERlx1OEJBMScpXG4gICAgICAgIC5zZXRJY29uKCdiYXItY2hhcnQnKVxuICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgdGhpcy5wbHVnaW4uYWN0aXZhdGVTdGF0cygpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1RDgzRFx1REREMVx1RkUwRiBcdTUyMjBcdTk2NjRcdTdCMTRcdThCQjAnKVxuICAgICAgICAuc2V0SWNvbigndHJhc2gnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgaWYgKGNvbmZpcm0oJ1x1Nzg2RVx1NUI5QVx1ODk4MVx1NTIyMFx1OTY2NFx1OEZEOVx1Njc2MVx1N0IxNFx1OEJCMFx1NTQxN1x1RkYxRicpKSB7XG4gICAgICAgICAgICAvLyBcdUQ4M0RcdUREMjcgXHU1MTQ4XHU1MjIwXHU5NjY0XHU1MTczXHU4MDU0XHU3Njg0XHU5NUVBXHU1MzYxXG4gICAgICAgICAgICBpZiAodW5pdC5mbGFzaGNhcmRJZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhcmRJZCBvZiB1bml0LmZsYXNoY2FyZElkcykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZGVsZXRlQ2FyZChjYXJkSWQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NTE4RFx1NTIyMFx1OTY2NFx1N0IxNFx1OEJCMFxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZGVsZXRlQ29udGVudFVuaXQodW5pdC5pZCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdUQ4M0RcdURERDFcdUZFMEYgXHU3QjE0XHU4QkIwXHU1REYyXHU1MjIwXHU5NjY0Jyk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XG4gIH1cbi8qKlxuICogXHU3RjE2XHU4RjkxXHU3QjE0XHU4QkIwXHU1MzU1XHU1MTQzXHU1MTczXHU4MDU0XHU3Njg0XHU5NUVBXHU1MzYxXG4gKi9cbnByaXZhdGUgZWRpdEZsYXNoY2FyZHNGb3JVbml0KHVuaXQ6IENvbnRlbnRVbml0LCBldmVudD86IE1vdXNlRXZlbnQpIHtcbiAgaWYgKHVuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aCA9PT0gMCkge1xuICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdThCRTVcdTdCMTRcdThCQjBcdTZDQTFcdTY3MDlcdTUxNzNcdTgwNTRcdTc2ODRcdTk1RUFcdTUzNjEnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBcdTU5ODJcdTY3OUNcdTUzRUFcdTY3MDlcdTRFMDBcdTVGMjBcdTk1RUFcdTUzNjEsXHU3NkY0XHU2M0E1XHU3RjE2XHU4RjkxXG4gIGlmICh1bml0LmZsYXNoY2FyZElkcy5sZW5ndGggPT09IDEpIHtcbiAgICBjb25zdCBhbGxDYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgIGNvbnN0IGNhcmQgPSBhbGxDYXJkcy5maW5kKGMgPT4gYy5pZCA9PT0gdW5pdC5mbGFzaGNhcmRJZHNbMF0pO1xuICAgIGlmIChjYXJkKSB7XG4gICAgICB0aGlzLmVkaXRGbGFzaGNhcmQoY2FyZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdTYyN0VcdTRFMERcdTUyMzBcdThCRTVcdTk1RUFcdTUzNjEnKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gXHU1OTgyXHU2NzlDXHU2NzA5XHU1OTFBXHU1RjIwXHU5NUVBXHU1MzYxLFx1NjYzRVx1NzkzQVx1OTAwOVx1NjJFOVx1ODNEQ1x1NTM1NVxuICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcbiAgY29uc3QgYWxsQ2FyZHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldEFsbEZsYXNoY2FyZHMoKTtcbiAgXG4gIHVuaXQuZmxhc2hjYXJkSWRzLmZvckVhY2goKGNhcmRJZCwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBjYXJkID0gYWxsQ2FyZHMuZmluZChjID0+IGMuaWQgPT09IGNhcmRJZCk7XG4gICAgaWYgKGNhcmQpIHtcbiAgICAgIGNvbnN0IHR5cGVMYWJlbCA9IGNhcmQudHlwZSA9PT0gJ3FhJyA/ICdRJkEnIDogJ1x1NTg2Qlx1N0E3QSc7XG4gICAgICBjb25zdCBwcmV2aWV3ID0gY2FyZC5mcm9udC5sZW5ndGggPiAzMCBcbiAgICAgICAgPyBjYXJkLmZyb250LnN1YnN0cmluZygwLCAzMCkgKyAnLi4uJyBcbiAgICAgICAgOiBjYXJkLmZyb250O1xuICAgICAgXG4gICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgIGl0ZW1cbiAgICAgICAgICAuc2V0VGl0bGUoYCR7aW5kZXggKyAxfS4gJHt0eXBlTGFiZWx9OiAke3ByZXZpZXd9YClcbiAgICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLmVkaXRGbGFzaGNhcmQoY2FyZCkpXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gXHU1NzI4XHU5RjIwXHU2ODA3XHU0RjREXHU3RjZFXHU2NjNFXHU3OTNBXHU4M0RDXHU1MzU1XG4gIGlmIChldmVudCkge1xuICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XG4gIH0gZWxzZSB7XG4gICAgbWVudS5zaG93QXRQb3NpdGlvbih7IHg6IDEwMCwgeTogMTAwIH0pOyAvLyBcdTlFRDhcdThCQTRcdTRGNERcdTdGNkVcbiAgfVxufVxuLyoqXG4gKiBcdTY2M0VcdTc5M0FcdTk1RUFcdTUzNjFcdTRFMEFcdTRFMEJcdTY1ODdcdTgzRENcdTUzNTVcbiAqL1xucHJpdmF0ZSBzaG93Rmxhc2hjYXJkQ29udGV4dE1lbnUoZXZlbnQ6IE1vdXNlRXZlbnQsIGNhcmQ6IEZsYXNoY2FyZCkge1xuICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcblxuICAvLyBcdThERjNcdThGNkNcdTUyMzBcdTUzOUZcdTY1ODdcbiAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgIGl0ZW1cbiAgICAgIC5zZXRUaXRsZSgnXHVEODNEXHVEQ0Q2IFx1OERGM1x1OEY2Q1x1NTIzMFx1NTM5Rlx1NjU4NycpXG4gICAgICAuc2V0SWNvbignYXJyb3ctdXAtcmlnaHQnKVxuICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAvLyBcdTRGRUVcdTY1MzlcdUZGMUFcdTRGN0ZcdTc1Mjggc291cmNlQ29udGVudElkXG4gICAgICAgIGNvbnN0IHVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjYXJkLnNvdXJjZUNvbnRlbnRJZCk7XG4gICAgICAgIGlmICh1bml0KSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5qdW1wVG9Tb3VyY2UodW5pdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2MjdFXHU0RTBEXHU1MjMwXHU3QjE0XHU4QkIwXHU1MzU1XHU1MTQzXHVGRjBDXHU1QzFEXHU4QkQ1XHU3NkY0XHU2M0E1XHU2MjUzXHU1RjAwXHU2NTg3XHU0RUY2XG4gICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChjYXJkLnNvdXJjZUZpbGUpO1xuICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKS5vcGVuRmlsZShmaWxlKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBcdTVERjJcdTYyNTNcdTVGMDBcdTZFOTBcdTY1ODdcdTRFRjYnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1NjI3RVx1NEUwRFx1NTIzMFx1NTM5Rlx1NTlDQlx1N0IxNFx1OEJCMCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgKTtcbiAgLy8gXHU3RjE2XHU4RjkxXHU1MzYxXHU3MjQ3XG4gIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICBpdGVtXG4gICAgICAuc2V0VGl0bGUoJ1x1MjcwRlx1RkUwRiBcdTdGMTZcdThGOTFcdTUzNjFcdTcyNDcnKVxuICAgICAgLnNldEljb24oJ2VkaXQnKVxuICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICB0aGlzLmVkaXRGbGFzaGNhcmQoY2FyZCk7XG4gICAgICB9KVxuICApO1xuXG4gIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgLy8gXHU2N0U1XHU3NzBCXHU3RURGXHU4QkExXG4gIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICBpdGVtXG4gICAgICAuc2V0VGl0bGUoJ1x1RDgzRFx1RENDQSBcdTY3RTVcdTc3MEJcdTdFREZcdThCQTEnKVxuICAgICAgLnNldEljb24oJ2Jhci1jaGFydCcpXG4gICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFjdGl2YXRlU3RhdHMoKTtcbiAgICAgIH0pXG4gICk7XG5cbiAgbWVudS5hZGRTZXBhcmF0b3IoKTtcblxuICAvLyBcdTUyMjBcdTk2NjRcdTUzNjFcdTcyNDdcbiAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgIGl0ZW1cbiAgICAgIC5zZXRUaXRsZSgnXHVEODNEXHVEREQxXHVGRTBGIFx1NTIyMFx1OTY2NFx1NTM2MVx1NzI0NycpXG4gICAgICAuc2V0SWNvbigndHJhc2gnKVxuICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoY29uZmlybSgnXHU3ODZFXHU1QjlBXHU4OTgxXHU1MjIwXHU5NjY0XHU4RkQ5XHU1RjIwXHU5NUVBXHU1MzYxXHU1NDE3XHVGRjFGJykpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZUZsYXNoY2FyZChjYXJkLmlkKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgKTtcblxuICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xufVxuICAvKipcbiAgICogXHU1MjFCXHU1RUZBXHU3Mjc5XHU1QjlBXHU3QzdCXHU1NzhCXHU3Njg0XHU5NUVBXHU1MzYxXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNyZWF0ZUZsYXNoY2FyZCh1bml0OiBDb250ZW50VW5pdCwgdHlwZTogJ3FhJyB8ICdjbG96ZScpIHtcbiAgICBjb25zdCBtb2RhbCA9IG5ldyBGbGFzaGNhcmRDcmVhdGlvbk1vZGFsKFxuICAgICAgdGhpcy5hcHAsXG4gICAgICB1bml0LFxuICAgICAgdHlwZSxcbiAgICAgIGFzeW5jIChxdWVzdGlvbjogc3RyaW5nLCBhbnN3ZXI6IHN0cmluZykgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh0eXBlID09PSAncWEnKSB7XG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTk1RUVcdTdCNTRcdTUzNjFcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuY3JlYXRlUUFDYXJkKFxuICAgICAgICAgICAgICB1bml0LmlkLFxuICAgICAgICAgICAgICBxdWVzdGlvbixcbiAgICAgICAgICAgICAgYW5zd2VyXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdTUzNjEgLSBcdTdCODBcdTUzNTVcdTU5MDRcdTc0MDZcdUZGMENcdTVDMDZcdTY1NzRcdTRFMkFcdTdCNTRcdTY4NDhcdTRGNUNcdTRFM0FcdTRFMDBcdTRFMkFcdTdBN0FcbiAgICAgICAgICAgIGNvbnN0IGRlbGV0aW9ucyA9IFt7XG4gICAgICAgICAgICAgIGluZGV4OiAwLFxuICAgICAgICAgICAgICBhbnN3ZXI6IGFuc3dlclxuICAgICAgICAgICAgfV07XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmNyZWF0ZUNsb3plQ2FyZChcbiAgICAgICAgICAgICAgdW5pdC5pZCxcbiAgICAgICAgICAgICAgcXVlc3Rpb24sXG4gICAgICAgICAgICAgIGRlbGV0aW9uc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgbmV3IE5vdGljZShgXHUyNzA1ICR7dHlwZSA9PT0gJ3FhJyA/ICdRQScgOiAnXHU1ODZCXHU3QTdBJ31cdTk1RUFcdTUzNjFcdTVERjJcdTUyMUJcdTVFRkFgKTtcbiAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBmbGFzaGNhcmQ6JywgZXJyb3IpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcdTU5MzFcdThEMjUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG5cbiAgICBtb2RhbC5vcGVuKCk7XG4gIH1cblxuICAvKipcbiAgICogXHU1NzI4XHU3RjE2XHU4RjkxXHU1NjY4XHU0RTJEXHU2MjUzXHU1RjAwXHU2NTg3XHU0RUY2XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIG9wZW5GaWxlSW5FZGl0b3IoZmlsZVBhdGg6IHN0cmluZykge1xuICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKS5vcGVuRmlsZShmaWxlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1NjVFMFx1NkNENVx1NjI1M1x1NUYwMFx1NjU4N1x1NEVGNicpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTUyMjBcdTk2NjRcdTk1RUFcdTUzNjFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZGVsZXRlRmxhc2hjYXJkKGNhcmRJZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZGVsZXRlQ2FyZChjYXJkSWQpO1xuICAgICAgbmV3IE5vdGljZSgnXHVEODNEXHVEREQxXHVGRTBGIFx1OTVFQVx1NTM2MVx1NURGMlx1NTIyMFx1OTY2NCcpO1xuICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGZsYXNoY2FyZDonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdcdTI3NEMgXHU1MjIwXHU5NjY0XHU5NUVBXHU1MzYxXHU1OTMxXHU4RDI1Jyk7XG4gICAgfVxuICB9XG4vKipcbiAqIFx1N0YxNlx1OEY5MVx1OTVFQVx1NTM2MVxuICovXG5wcml2YXRlIGVkaXRGbGFzaGNhcmQoY2FyZDogRmxhc2hjYXJkKSB7XG4gIGNvbnN0IG1vZGFsID0gbmV3IEZsYXNoY2FyZEVkaXRNb2RhbChcbiAgICB0aGlzLmFwcCxcbiAgICBjYXJkLFxuICAgIGFzeW5jIChxdWVzdGlvbjogc3RyaW5nLCBhbnN3ZXI6IHN0cmluZykgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NkY0XHU2NUIwXHU1NDBFXHU3Njg0XHU1MzYxXHU3MjQ3XHU1QkY5XHU4QzYxXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRDYXJkOiBGbGFzaGNhcmQgPSB7XG4gICAgICAgICAgLi4uY2FyZCxcbiAgICAgICAgICBmcm9udDogcXVlc3Rpb24sXG4gICAgICAgICAgYmFjazogY2FyZC50eXBlID09PSAnY2xvemUnID8gW2Fuc3dlcl0gOiBhbnN3ZXIsXG4gICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgIC4uLmNhcmQubWV0YWRhdGEsXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KClcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBcdTU5ODJcdTY3OUMgdXBkYXRlQ2FyZCBcdTUzRUFcdTYzQTVcdTUzRDdcdTRFMDBcdTRFMkFcdTUzQzJcdTY1NzBcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci51cGRhdGVDYXJkKHVwZGF0ZWRDYXJkKTtcbiAgICAgICAgXG4gICAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBcdTk1RUFcdTUzNjFcdTVERjJcdTY2RjRcdTY1QjAnKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBmbGFzaGNhcmQ6JywgZXJyb3IpO1xuICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgXHU2NkY0XHU2NUIwXHU5NUVBXHU1MzYxXHU1OTMxXHU4RDI1Jyk7XG4gICAgICB9XG4gICAgfVxuICApO1xuICBtb2RhbC5vcGVuKCk7XG59XG4gIC8qKlxuICAgKiBcdTY2RjRcdTY1QjBcdTYyNzlcdTkxQ0ZcdTY0Q0RcdTRGNUNcdTYzMDlcdTk0QUVcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlQmF0Y2hCdXR0b25zKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgYmF0Y2hBY3Rpb25zID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5iYXRjaC1hY3Rpb25zJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKGJhdGNoQWN0aW9ucykge1xuICAgICAgY29uc3Qgc2VsZWN0QWxsQnRuID0gYmF0Y2hBY3Rpb25zLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3QtYWxsLWJ0bicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgY29uc3QgZGVsZXRlQnRuID0gYmF0Y2hBY3Rpb25zLnF1ZXJ5U2VsZWN0b3IoJy5iYXRjaC1kZWxldGUtYnRuJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBjb25zdCBjcmVhdGVCdG4gPSBiYXRjaEFjdGlvbnMucXVlcnlTZWxlY3RvcignLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG4nKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIFxuICAgICAgaWYgKHNlbGVjdEFsbEJ0bikge1xuICAgICAgICBzZWxlY3RBbGxCdG4udGV4dENvbnRlbnQgPSB0aGlzLmlzQWxsU2VsZWN0ZWQoKSA/ICdcdTI2MTEgXHU5MDA5XHU2MkU5JyA6ICdcdTI2MTAgXHU1MTY4XHU5MDA5JztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGRlbGV0ZUJ0bikge1xuICAgICAgICBjb25zdCBjb3VudCA9IHRoaXMudmlld1R5cGUgPT09ICdjYXJkcycgPyB0aGlzLnNlbGVjdGVkQ2FyZElkcy5zaXplIDogdGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZTtcbiAgICAgICAgZGVsZXRlQnRuLnRleHRDb250ZW50ID0gYFx1RDgzRFx1REREMVx1RkUwRiBcdTUyMjBcdTk2NjRcdTkwMDlcdTRFMkQgKCR7Y291bnR9KWA7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChjcmVhdGVCdG4pIHtcbiAgICAgICAgY3JlYXRlQnRuLnRleHRDb250ZW50ID0gYFx1MjZBMSBcdTYyNzlcdTkxQ0ZcdTUyMzZcdTUzNjEgKCR7dGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZX0pYDtcbiAgICAgIH1cbiAgICB9XG4gICAgICAvLyBcdTY2RjRcdTY1QjAgaGVhZGVyIFx1NEUyRFx1NzY4NFx1NTE2OFx1OTAwOVx1NjMwOVx1OTRBRVxuICBjb25zdCBoZWFkZXJTZWxlY3RCdG4gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnNlbGVjdC1hbGwtYnRuLWhlYWRlcicpIGFzIEhUTUxFbGVtZW50O1xuICBpZiAoaGVhZGVyU2VsZWN0QnRuKSB7XG4gICAgaGVhZGVyU2VsZWN0QnRuLnRleHRDb250ZW50ID0gdGhpcy5pc0FsbFNlbGVjdGVkKCkgPyAnXHUyNjExIFx1OTAwOVx1NjJFOScgOiAnXHUyNjEwIFx1NTE2OFx1OTAwOSc7XG4gIH1cbiAgXG4gIC8vIFx1NjZGNFx1NjVCMFx1NEZBN1x1OEZCOVx1NjgwRlx1NEUyRFx1NzY4NFx1NTE2OFx1OTAwOVx1NjMwOVx1OTRBRVxuICBjb25zdCBzaWRlYmFyU2VsZWN0QnRuID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3QtYWxsLWJ0bi1zaWRlYmFyJykgYXMgSFRNTEVsZW1lbnQ7XG4gIGlmIChzaWRlYmFyU2VsZWN0QnRuKSB7XG4gICAgc2lkZWJhclNlbGVjdEJ0bi50ZXh0Q29udGVudCA9IHRoaXMuaXNBbGxTZWxlY3RlZCgpID8gJ1x1MjYxMSBcdTkwMDlcdTYyRTknIDogJ1x1MjYxMCBcdTUxNjhcdTkwMDknO1xuICB9XG4gIH1cblxuICAvKipcbiAgICogXHU2Mjc5XHU5MUNGXHU1MjIwXHU5NjY0XHU5NUVBXHU1MzYxXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGJhdGNoRGVsZXRlRmxhc2hjYXJkcygpIHtcbiAgICBpZiAodGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZSA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1OEJGN1x1NTE0OFx1OTAwOVx1NjJFOVx1ODk4MVx1NTIyMFx1OTY2NFx1NzY4NFx1OTVFQVx1NTM2MScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghY29uZmlybShgXHU3ODZFXHU1QjlBXHU4OTgxXHU1MjIwXHU5NjY0XHU5MDA5XHU0RTJEXHU3Njg0ICR7dGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZX0gXHU1RjIwXHU5NUVBXHU1MzYxXHU1NDE3XHVGRjFGYCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgc3VjY2VzcyA9IDA7XG4gICAgbGV0IGZhaWxlZCA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IGNhcmRJZCBvZiB0aGlzLnNlbGVjdGVkQ2FyZElkcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5kZWxldGVDYXJkKGNhcmRJZCk7XG4gICAgICAgIHN1Y2Nlc3MrKztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGZsYXNoY2FyZDonLCBlcnJvcik7XG4gICAgICAgIGZhaWxlZCsrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmNsZWFyKCk7XG4gICAgbmV3IE5vdGljZShgXHUyNzA1IFx1NURGMlx1NTIyMFx1OTY2NCAke3N1Y2Nlc3N9IFx1NUYyMFx1OTVFQVx1NTM2MSR7ZmFpbGVkID4gMCA/IGBcdUZGMEMke2ZhaWxlZH0gXHU1RjIwXHU1OTMxXHU4RDI1YCA6ICcnfWApO1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICB9XG5cbi8qKlxuICogXHU2Mjc5XHU5MUNGXHU1MjIwXHU5NjY0XHU3QjE0XHU4QkIwXG4gKi9cbnByaXZhdGUgYXN5bmMgYmF0Y2hEZWxldGVOb3RlcygpIHtcbiAgaWYgKHRoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemUgPT09IDApIHtcbiAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU4OTgxXHU1MjIwXHU5NjY0XHU3Njg0XHU3QjE0XHU4QkIwJyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCFjb25maXJtKGBcdTc4NkVcdTVCOUFcdTg5ODFcdTUyMjBcdTk2NjRcdTkwMDlcdTRFMkRcdTc2ODQgJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSBcdTY3NjFcdTdCMTRcdThCQjBcdTU0MTdcdUZGMUZgKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBzdWNjZXNzID0gMDtcbiAgbGV0IGZhaWxlZCA9IDA7XG5cbiAgZm9yIChjb25zdCB1bml0SWQgb2YgdGhpcy5zZWxlY3RlZFVuaXRJZHMpIHtcbiAgICB0cnkge1xuICAgICAgLy8gXHVEODNEXHVERDI3IFx1ODNCN1x1NTNENlx1N0IxNFx1OEJCMFxuICAgICAgY29uc3QgdW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KHVuaXRJZCk7XG4gICAgICBcbiAgICAgIGlmICh1bml0KSB7XG4gICAgICAgIC8vIFx1RDgzRFx1REQyNyBcdTUxNDhcdTUyMjBcdTk2NjRcdTUxNzNcdTgwNTRcdTc2ODRcdTk1RUFcdTUzNjFcbiAgICAgICAgaWYgKHVuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGNhcmRJZCBvZiB1bml0LmZsYXNoY2FyZElkcykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5kZWxldGVDYXJkKGNhcmRJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1NTE4RFx1NTIyMFx1OTY2NFx1N0IxNFx1OEJCMFxuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZGVsZXRlQ29udGVudFVuaXQodW5pdElkKTtcbiAgICAgIHN1Y2Nlc3MrKztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgbm90ZTonLCBlcnJvcik7XG4gICAgICBmYWlsZWQrKztcbiAgICB9XG4gIH1cblxuICB0aGlzLnNlbGVjdGVkVW5pdElkcy5jbGVhcigpO1xuICB0aGlzLmJhdGNoTW9kZSA9IGZhbHNlO1xuICBuZXcgTm90aWNlKGBcdTI3MDUgXHU1REYyXHU1MjIwXHU5NjY0ICR7c3VjY2Vzc30gXHU2NzYxXHU3QjE0XHU4QkIwJHtmYWlsZWQgPiAwID8gYFx1RkYwQyR7ZmFpbGVkfSBcdTY3NjFcdTU5MzFcdThEMjVgIDogJyd9YCk7XG4gIHRoaXMucmVmcmVzaCgpO1xufVxuXG4gIC8qKlxuICAgKiBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTUxNjhcdTkwMDlcbiAgICovXG4gIHByaXZhdGUgaXNBbGxTZWxlY3RlZCgpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgICAgY29uc3QgZmxhc2hjYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgICAgXG4gICAgICBpZiAodGhpcy5kaXNwbGF5TW9kZSA9PT0gJ21haW4nICYmIHRoaXMuc2VsZWN0ZWRGaWxlKSB7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkQ2FyZHMgPSBmbGFzaGNhcmRzLmZpbHRlcihjYXJkID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdmaWxlJykge1xuICAgICAgICAgICAgcmV0dXJuIGNhcmQuc291cmNlRmlsZSA9PT0gdGhpcy5zZWxlY3RlZEZpbGU7XG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ3RhZycpIHtcbiAgICAgICAgICAgIGNvbnN0IHVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjYXJkLnNvdXJjZUNvbnRlbnRJZCk7XG4gICAgICAgICAgICByZXR1cm4gdW5pdD8ubWV0YWRhdGEudGFncy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSEpIHx8IFxuICAgICAgICAgICAgICAgICAgIGNhcmQudGFncz8uaW5jbHVkZXModGhpcy5zZWxlY3RlZEZpbGUhKSB8fCBcbiAgICAgICAgICAgICAgICAgICBjYXJkLmRlY2sgPT09IHRoaXMuc2VsZWN0ZWRGaWxlO1xuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdkYXRlJykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0RGF0ZShuZXcgRGF0ZShjYXJkLm1ldGFkYXRhLmNyZWF0ZWRBdCkpID09PSB0aGlzLnNlbGVjdGVkRmlsZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkQ2FyZHMubGVuZ3RoID4gMCAmJiB0aGlzLnNlbGVjdGVkQ2FyZElkcy5zaXplID09PSBmaWx0ZXJlZENhcmRzLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGZsYXNoY2FyZHMubGVuZ3RoID4gMCAmJiB0aGlzLnNlbGVjdGVkQ2FyZElkcy5zaXplID09PSBmbGFzaGNhcmRzLmxlbmd0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHZpc2libGVVbml0czogQ29udGVudFVuaXRbXTtcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuZGlzcGxheU1vZGUgPT09ICdzaWRlYmFyJykge1xuICAgICAgICAvLyBcdUQ4M0RcdUREMjcgXHU0RkE3XHU4RkI5XHU2ODBGXHVGRjFBXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU2RTMyXHU2N0QzXHU1MjE3XHU4ODY4XHU0RTJEXHU3Njg0XHU2MjQwXHU2NzA5XHU3QjE0XHU4QkIwXG4gICAgICAgIGxldCB1bml0cyA9IHRoaXMuZ2V0RmlsdGVyZWRVbml0cygpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRGaWxlKSB7XG4gICAgICAgICAgLy8gXHU2NzA5XHU5MDA5XHU0RTJEXHU2NTg3XHU0RUY2Olx1NjgzOVx1NjM2RSBncm91cE1vZGUgXHU4RkM3XHU2RUU0XG4gICAgICAgICAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZmlsZScpIHtcbiAgICAgICAgICAgIHZpc2libGVVbml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+IHVuaXQuc291cmNlLmZpbGUgPT09IHRoaXMuc2VsZWN0ZWRGaWxlKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAndGFnJykge1xuICAgICAgICAgICAgLy8gXHVEODNEXHVERDI3IFx1NTE3M1x1OTUyRVx1NEZFRVx1NjUzOTpcdTYzMDlcdTY4MDdcdTdCN0VcdTdCNUJcdTkwMDlcdTY1RjYsXHU1M0VBXHU5MDA5XHU2MkU5XHU1MzA1XHU1NDJCXHU4QkU1XHU2ODA3XHU3QjdFXHU3Njg0XHU3QjE0XHU4QkIwXG4gICAgICAgICAgICB2aXNpYmxlVW5pdHMgPSB1bml0cy5maWx0ZXIodW5pdCA9PiB1bml0Lm1ldGFkYXRhLnRhZ3MuaW5jbHVkZXModGhpcy5zZWxlY3RlZEZpbGUhKSk7XG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgICB2aXNpYmxlVW5pdHMgPSB1bml0cy5maWx0ZXIodW5pdCA9PiBcbiAgICAgICAgICAgICAgdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKHVuaXQubWV0YWRhdGEuY3JlYXRlZEF0KSkgPT09IHRoaXMuc2VsZWN0ZWRGaWxlXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2aXNpYmxlVW5pdHMgPSB1bml0cztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmlzaWJsZVVuaXRzID0gdW5pdHM7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1NEUzQlx1NzU0Q1x1OTc2MlxuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRGaWxlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCB1bml0cyA9IHRoaXMuZ2V0RmlsdGVyZWRVbml0cygpO1xuICAgICAgICBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdmaWxlJykge1xuICAgICAgICAgIHZpc2libGVVbml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+IHVuaXQuc291cmNlLmZpbGUgPT09IHRoaXMuc2VsZWN0ZWRGaWxlKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ3RhZycpIHtcbiAgICAgICAgICB2aXNpYmxlVW5pdHMgPSB1bml0cy5maWx0ZXIodW5pdCA9PiBcbiAgICAgICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSEpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgdmlzaWJsZVVuaXRzID0gdW5pdHMuZmlsdGVyKHVuaXQgPT4gXG4gICAgICAgICAgICB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUodW5pdC5tZXRhZGF0YS5jcmVhdGVkQXQpKSA9PT0gdGhpcy5zZWxlY3RlZEZpbGVcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZpc2libGVVbml0cyA9IHVuaXRzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB2aXNpYmxlVW5pdHMubGVuZ3RoID4gMCAmJiB0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplID09PSB2aXNpYmxlVW5pdHMubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTUyMDdcdTYzNjJcdTUxNjhcdTkwMDkvXHU1M0Q2XHU2RDg4XG4gICAqL1xuICBwcml2YXRlIHRvZ2dsZVNlbGVjdEFsbCgpIHtcbiAgICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgICAgY29uc3QgZmxhc2hjYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgICAgXG4gICAgICBjb25zdCBmaWx0ZXJlZENhcmRzID0gdGhpcy5zZWxlY3RlZEZpbGUgPyBmbGFzaGNhcmRzLmZpbHRlcihjYXJkID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZmlsZScpIHtcbiAgICAgICAgICByZXR1cm4gY2FyZC5zb3VyY2VGaWxlID09PSB0aGlzLnNlbGVjdGVkRmlsZTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ3RhZycpIHtcbiAgICAgICAgICBjb25zdCB1bml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY2FyZC5zb3VyY2VDb250ZW50SWQpO1xuICAgICAgICAgIHJldHVybiB1bml0Py5tZXRhZGF0YS50YWdzLmluY2x1ZGVzKHRoaXMuc2VsZWN0ZWRGaWxlISkgfHwgXG4gICAgICAgICAgICAgICAgIGNhcmQudGFncz8uaW5jbHVkZXModGhpcy5zZWxlY3RlZEZpbGUhKSB8fCBcbiAgICAgICAgICAgICAgICAgY2FyZC5kZWNrID09PSB0aGlzLnNlbGVjdGVkRmlsZTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0RGF0ZShuZXcgRGF0ZShjYXJkLm1ldGFkYXRhLmNyZWF0ZWRBdCkpID09PSB0aGlzLnNlbGVjdGVkRmlsZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KSA6IGZsYXNoY2FyZHM7XG4gICAgICBcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkQ2FyZElkcy5zaXplID09PSBmaWx0ZXJlZENhcmRzLmxlbmd0aCAmJiBmaWx0ZXJlZENhcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuY2xlYXIoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpbHRlcmVkQ2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5hZGQoY2FyZC5pZCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgdmlzaWJsZVVuaXRzOiBDb250ZW50VW5pdFtdO1xuICAgICAgXG4gICAgICBpZiAodGhpcy5kaXNwbGF5TW9kZSA9PT0gJ3NpZGViYXInKSB7XG4gICAgICAgIGxldCB1bml0cyA9IHRoaXMuZ2V0RmlsdGVyZWRVbml0cygpOyAvLyBcdTVERjJcdTUzMDVcdTU0MkIgZmlsdGVyTW9kZSBcdThGQzdcdTZFRTRcdUZGMDhcdTU5ODIgYW5ub3RhdGVkXHVGRjA5XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEZpbGUpIHtcbiAgICAgICAgICAvLyBcdUQ4M0RcdUREMjcgXHU2ODM5XHU2MzZFXHU1RjUzXHU1MjREXHU1MjA2XHU3RUM0XHU2QTIxXHU1RjBGXHU4RkM3XHU2RUU0XG4gICAgICAgICAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZmlsZScpIHtcbiAgICAgICAgICAgIHZpc2libGVVbml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+IHVuaXQuc291cmNlLmZpbGUgPT09IHRoaXMuc2VsZWN0ZWRGaWxlKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAndGFnJykge1xuICAgICAgICAgICAgLy8gXHVEODNEXHVERDI3IFx1NjMwOVx1NjgwN1x1N0I3RVx1N0I1Qlx1OTAwOVx1RkYxQVx1NTNFQVx1OTAwOVx1NjJFOVx1NTMwNVx1NTQyQlx1OEJFNVx1NjgwN1x1N0I3RVx1NzY4NFx1N0IxNFx1OEJCMFxuICAgICAgICAgICAgdmlzaWJsZVVuaXRzID0gdW5pdHMuZmlsdGVyKHVuaXQgPT4gXG4gICAgICAgICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSEpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdkYXRlJykge1xuICAgICAgICAgICAgdmlzaWJsZVVuaXRzID0gdW5pdHMuZmlsdGVyKHVuaXQgPT4gXG4gICAgICAgICAgICAgIHRoaXMuZm9ybWF0RGF0ZShuZXcgRGF0ZSh1bml0Lm1ldGFkYXRhLmNyZWF0ZWRBdCkpID09PSB0aGlzLnNlbGVjdGVkRmlsZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmlzaWJsZVVuaXRzID0gdW5pdHM7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFx1RDgzRFx1REQyNyBcdTZDQTFcdTY3MDlcdTkwMDlcdTRFMkRcdTUyMDZcdTdFQzRcdUZGMUFcdTY2M0VcdTc5M0FcdTYyNDBcdTY3MDlcdThGQzdcdTZFRTRcdTU0MEVcdTc2ODRcdTdCMTRcdThCQjBcbiAgICAgICAgICB2aXNpYmxlVW5pdHMgPSB1bml0cztcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBcdTRFM0JcdTc1NENcdTk3NjJcdUZGMUFcdTVGQzVcdTk4N0JcdTkwMDlcdTRFMkRcdTVERTZcdTRGQTdcdTUyMDZcdTdFQzRcbiAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTRFMDBcdTRFMkFcdTUyMDZcdTdFQzQnKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHVuaXRzID0gdGhpcy5nZXRGaWx0ZXJlZFVuaXRzKCk7XG4gICAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgICAgdmlzaWJsZVVuaXRzID0gdW5pdHMuZmlsdGVyKHVuaXQgPT4gdW5pdC5zb3VyY2UuZmlsZSA9PT0gdGhpcy5zZWxlY3RlZEZpbGUpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAndGFnJykge1xuICAgICAgICAgIHZpc2libGVVbml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+IFxuICAgICAgICAgICAgdW5pdC5tZXRhZGF0YS50YWdzLmluY2x1ZGVzKHRoaXMuc2VsZWN0ZWRGaWxlISlcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZGF0ZScpIHtcbiAgICAgICAgICB2aXNpYmxlVW5pdHMgPSB1bml0cy5maWx0ZXIodW5pdCA9PiBcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0RGF0ZShuZXcgRGF0ZSh1bml0Lm1ldGFkYXRhLmNyZWF0ZWRBdCkpID09PSB0aGlzLnNlbGVjdGVkRmlsZVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmlzaWJsZVVuaXRzID0gdW5pdHM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemUgPT09IHZpc2libGVVbml0cy5sZW5ndGggJiYgdmlzaWJsZVVuaXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gXHU1M0Q2XHU2RDg4XHU1MTY4XHU5MDA5XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBcdTUxNjhcdTkwMDlcdTVGNTNcdTUyNERcdTUzRUZcdTg5QzFcdTc2ODRcdTYyNDBcdTY3MDlcdTdCMTRcdThCQjBcbiAgICAgICAgdmlzaWJsZVVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuYWRkKHVuaXQuaWQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemUgPiAwIHx8IHRoaXMuc2VsZWN0ZWRDYXJkSWRzLnNpemUgPiAwKSB7XG4gICAgICB0aGlzLmJhdGNoTW9kZSA9IHRydWU7XG4gICAgfVxuICAgIFxuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cbiAgLyoqXG4gKiBcdTgxRUFcdTUyQThcdTUxNjhcdTkwMDlcdTVGNTNcdTUyNERcdTUzRUZcdTg5QzFcdTk4NzlcdTc2RUVcbiAqL1xucHJpdmF0ZSBhdXRvU2VsZWN0QWxsKCkge1xuICAvLyBcdTUxNDhcdTZFMDVcdTdBN0FcbiAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgdGhpcy5zZWxlY3RlZENhcmRJZHMuY2xlYXIoKTtcbiAgXG4gIGlmICh0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnKSB7XG4gICAgLy8gXHU5NUVBXHU1MzYxXHU4OUM2XHU1NkZFXHVGRjFBXHU1MTY4XHU5MDA5XHU2MjQwXHU2NzA5XHU5NUVBXHU1MzYxXG4gICAgY29uc3QgZmxhc2hjYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgIFxuICAgIGNvbnN0IGZpbHRlcmVkQ2FyZHMgPSB0aGlzLnNlbGVjdGVkRmlsZSA/IGZsYXNoY2FyZHMuZmlsdGVyKGNhcmQgPT4ge1xuICAgICAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZmlsZScpIHtcbiAgICAgICAgcmV0dXJuIGNhcmQuc291cmNlRmlsZSA9PT0gdGhpcy5zZWxlY3RlZEZpbGU7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAndGFnJykge1xuICAgICAgICBjb25zdCB1bml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY2FyZC5zb3VyY2VDb250ZW50SWQpO1xuICAgICAgICByZXR1cm4gdW5pdD8ubWV0YWRhdGEudGFncy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSEpIHx8IFxuICAgICAgICAgICAgICAgY2FyZC50YWdzPy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSEpIHx8IFxuICAgICAgICAgICAgICAgY2FyZC5kZWNrID09PSB0aGlzLnNlbGVjdGVkRmlsZTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdkYXRlJykge1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKGNhcmQubWV0YWRhdGEuY3JlYXRlZEF0KSkgPT09IHRoaXMuc2VsZWN0ZWRGaWxlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pIDogZmxhc2hjYXJkcztcbiAgICBcbiAgICBmaWx0ZXJlZENhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5hZGQoY2FyZC5pZCk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gXHU3QjE0XHU4QkIwXHU4OUM2XHU1NkZFXHVGRjFBXHU1MTY4XHU5MDA5XHU1RjUzXHU1MjREXHU1M0VGXHU4OUMxXHU3Njg0XHU3QjE0XHU4QkIwXG4gICAgbGV0IHZpc2libGVVbml0czogQ29udGVudFVuaXRbXTtcbiAgICBcbiAgICBpZiAodGhpcy5kaXNwbGF5TW9kZSA9PT0gJ3NpZGViYXInKSB7XG4gICAgICBsZXQgdW5pdHMgPSB0aGlzLmdldEZpbHRlcmVkVW5pdHMoKTtcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRGaWxlKSB7XG4gICAgICAgIHZpc2libGVVbml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+IHVuaXQuc291cmNlLmZpbGUgPT09IHRoaXMuc2VsZWN0ZWRGaWxlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZpc2libGVVbml0cyA9IHVuaXRzO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTRFM0JcdTc1NENcdTk3NjJcdTZBMjFcdTVGMEZcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgICBjb25zdCB1bml0cyA9IHRoaXMuZ2V0RmlsdGVyZWRVbml0cygpO1xuICAgICAgICBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdmaWxlJykge1xuICAgICAgICAgIHZpc2libGVVbml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+IHVuaXQuc291cmNlLmZpbGUgPT09IHRoaXMuc2VsZWN0ZWRGaWxlKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ3RhZycpIHtcbiAgICAgICAgICB2aXNpYmxlVW5pdHMgPSB1bml0cy5maWx0ZXIodW5pdCA9PiBcbiAgICAgICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSEpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgdmlzaWJsZVVuaXRzID0gdW5pdHMuZmlsdGVyKHVuaXQgPT4gXG4gICAgICAgICAgICB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUodW5pdC5tZXRhZGF0YS5jcmVhdGVkQXQpKSA9PT0gdGhpcy5zZWxlY3RlZEZpbGVcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZpc2libGVVbml0cyA9IHVuaXRzO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2aXNpYmxlVW5pdHMgPSB0aGlzLmdldEZpbHRlcmVkVW5pdHMoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdmlzaWJsZVVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5hZGQodW5pdC5pZCk7XG4gICAgfSk7XG4gIH1cbiAgXG4gIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1OTAwOVx1NEUyRFx1OTg3OVx1RkYwQ1x1NUYwMFx1NTQyRlx1NjI3OVx1OTFDRlx1NkEyMVx1NUYwRlxuICBpZiAodGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZSA+IDAgfHwgdGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZSA+IDApIHtcbiAgICB0aGlzLmJhdGNoTW9kZSA9IHRydWU7XG4gIH1cbn1cbi8qKlxuICogXHU2RTA1XHU5NjY0XHU2MjQwXHU2NzA5XHU5MDA5XHU2MkU5XG4gKi9cbnByaXZhdGUgY2xlYXJTZWxlY3Rpb24oKSB7XG4gIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gIHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmNsZWFyKCk7XG4gIHRoaXMuYmF0Y2hNb2RlID0gZmFsc2U7XG4gIHRoaXMucmVuZGVyKCk7XG59XG4gIC8qKlxuICAgKiBcdTY2RjRcdTY1QjBcdTYyNDBcdTY3MDljaGVja2JveFx1NzJCNlx1NjAwMVxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVDaGVja2JveGVzKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgY2hlY2tib3hlcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuYmF0Y2gtY2hlY2tib3gnKSBhcyBOb2RlTGlzdE9mPEhUTUxJbnB1dEVsZW1lbnQ+O1xuICAgIFxuICAgIGNoZWNrYm94ZXMuZm9yRWFjaChjaGVja2JveCA9PiB7XG4gICAgICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgICAgICBjb25zdCBjYXJkSWQgPSBjaGVja2JveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FyZC1pZCcpO1xuICAgICAgICBpZiAoY2FyZElkKSB7XG4gICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmhhcyhjYXJkSWQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB1bml0SWQgPSBjaGVja2JveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdW5pdC1pZCcpO1xuICAgICAgICBpZiAodW5pdElkKSB7XG4gICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRoaXMuc2VsZWN0ZWRVbml0SWRzLmhhcyh1bml0SWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogXHU2Mjc5XHU5MUNGXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGJhdGNoQ3JlYXRlRmxhc2hjYXJkcygpIHtcbiAgICBpZiAodGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZSA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1OEJGN1x1NTE0OFx1OTAwOVx1NjJFOVx1ODk4MVx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1NzY4NFx1N0IxNFx1OEJCMCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHVuaXRzID0gQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkVW5pdElkcylcbiAgICAgIC5tYXAoaWQgPT4gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoaWQpKVxuICAgICAgLmZpbHRlcih1ID0+IHUgIT09IHVuZGVmaW5lZCAmJiB1LmZsYXNoY2FyZElkcy5sZW5ndGggPT09IDApIGFzIENvbnRlbnRVbml0W107XG5cbiAgICBpZiAodW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU5MDA5XHU0RTJEXHU3Njg0XHU3QjE0XHU4QkIwXHU5MEZEXHU1REYyXHU1MjFCXHU1RUZBXHU4RkM3XHU5NUVBXHU1MzYxJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU5MDA5XHU2MkU5XHU3QzdCXHU1NzhCXHU3Njg0XHU2QTIxXHU2MDAxXHU2ODQ2XG4gICAgY29uc3QgeyBCYXRjaENyZWF0ZU1vZGFsIH0gPSBhd2FpdCBpbXBvcnQoJy4vT3ZlcnZpZXdWaWV3Jyk7XG4gICAgY29uc3QgcXVpY2tDcmVhdG9yID0gbmV3IFF1aWNrRmxhc2hjYXJkQ3JlYXRvcih0aGlzLnBsdWdpbik7XG4gICAgY29uc3QgbW9kYWwgPSBuZXcgQmF0Y2hDcmVhdGVNb2RhbChcbiAgICAgIHRoaXMuYXBwLFxuICAgICAgdGhpcy5wbHVnaW4sXG4gICAgICBxdWlja0NyZWF0b3IsXG4gICAgICB1bml0cyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICB9XG4gICAgKTtcbiAgICBtb2RhbC5vcGVuKCk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTVERTVcdTUxNzdcdTY1QjlcdTZDRDUgPT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU4RkM3XHU2RUU0XHU1NDBFXHU3Njg0XHU1MTg1XHU1QkI5XHU1MzU1XHU1MTQzXG4gICAqL1xuICBwcml2YXRlIGdldEZpbHRlcmVkVW5pdHMoKTogQ29udGVudFVuaXRbXSB7XG4gICAgbGV0IHVuaXRzID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0QWxsQ29udGVudFVuaXRzKCk7XG5cbiAgICAvLyBcdTY0MUNcdTdEMjJcdThGQzdcdTZFRTRcbiAgICBpZiAodGhpcy5zZWFyY2hRdWVyeSkge1xuICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLnNlYXJjaFF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+XG4gICAgICAgIHVuaXQuY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSB8fFxuICAgICAgICB1bml0LnNvdXJjZS5maWxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5zb21lKHRhZyA9PiB0YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkpXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFx1N0M3Qlx1NTc4Qlx1OEZDN1x1NkVFNFxuICAgIGlmICh0aGlzLmZpbHRlck1vZGUgPT09ICdhbm5vdGF0ZWQnKSB7XG4gICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1ID0+IHUuYW5ub3RhdGlvbklkKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZmlsdGVyTW9kZSA9PT0gJ2ZsYXNoY2FyZHMnKSB7XG4gICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1ID0+IHUuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApO1xuICAgIH1cblxuICAgIHJldHVybiB1bml0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTUyMDZcdTdFQzRcdTUxODVcdTVCQjlcdTUzNTVcdTUxNDNcbiAgICovXG4gIHByaXZhdGUgZ3JvdXBVbml0cyh1bml0czogQ29udGVudFVuaXRbXSk6IEFycmF5PHsgZ3JvdXBLZXk6IHN0cmluZzsgdW5pdHM6IENvbnRlbnRVbml0W10gfT4ge1xuICAgIGNvbnN0IGdyb3VwZWQgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudFVuaXRbXT4oKTtcblxuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICBsZXQga2V5OiBzdHJpbmc7XG5cbiAgICAgIHN3aXRjaCAodGhpcy5ncm91cE1vZGUpIHtcbiAgICAgICAgY2FzZSAnZmlsZSc6XG4gICAgICAgICAga2V5ID0gdW5pdC5zb3VyY2UuZmlsZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdhbm5vdGF0aW9uJzpcbiAgLy8gXHU2MzA5XHU2NjJGXHU1NDI2XHU2NzA5XHU2Mjc5XHU2Q0U4XHU1MjA2XHU3RUM0XG4gIGNvbnN0IGhhc0Fubm90YXRpb24gPSB1bml0LmFubm90YXRpb25JZCA/ICdcdTY3MDlcdTYyNzlcdTZDRTgnIDogJ1x1NjVFMFx1NjI3OVx1NkNFOCc7XG4gIGlmICghZ3JvdXBlZC5oYXMoaGFzQW5ub3RhdGlvbikpIGdyb3VwZWQuc2V0KGhhc0Fubm90YXRpb24sIFtdKTtcbiAgZ3JvdXBlZC5nZXQoaGFzQW5ub3RhdGlvbikhLnB1c2godW5pdCk7XG4gIHJldHVybjtcbiAgICAgICAgY2FzZSAndGFnJzpcbiAgICAgICAgICB1bml0Lm1ldGFkYXRhLnRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICAgICAgaWYgKCFncm91cGVkLmhhcyh0YWcpKSBncm91cGVkLnNldCh0YWcsIFtdKTtcbiAgICAgICAgICAgIGdyb3VwZWQuZ2V0KHRhZykhLnB1c2godW5pdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICBrZXkgPSB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUodW5pdC5tZXRhZGF0YS5jcmVhdGVkQXQpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBrZXkgPSAnXHU2NzJBXHU1MjA2XHU3RUM0JztcbiAgICAgIH1cblxuICAgICAgaWYgKCFncm91cGVkLmhhcyhrZXkpKSBncm91cGVkLnNldChrZXksIFtdKTtcbiAgICAgIGdyb3VwZWQuZ2V0KGtleSkhLnB1c2godW5pdCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gQXJyYXkuZnJvbShncm91cGVkLmVudHJpZXMoKSlcbiAgICAubWFwKChbZ3JvdXBLZXksIHVuaXRzXSkgPT4gKHsgZ3JvdXBLZXksIHVuaXRzIH0pKVxuICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRlx1NjI3OVx1NkNFOFx1NTIwNlx1N0VDNFx1RkYwQ1wiXHU2NzA5XHU2Mjc5XHU2Q0U4XCJcdTYzOTJcdTU3MjhcdTUyNERcdTk3NjJcbiAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnYW5ub3RhdGlvbicpIHtcbiAgICBpZiAoYS5ncm91cEtleSA9PT0gJ1x1NjcwOVx1NjI3OVx1NkNFOCcpIHJldHVybiAtMTtcbiAgICBpZiAoYi5ncm91cEtleSA9PT0gJ1x1NjcwOVx1NjI3OVx1NkNFOCcpIHJldHVybiAxO1xuICAgIHJldHVybiAwO1xuICB9XG4gICAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTY1RTVcdTY3MUZcdTUyMDZcdTdFQzRcdUZGMENcdTYzMDlcdTY1RTVcdTY3MUZcdTk2NERcdTVFOEZcdTYzOTJcdTUyMTdcbiAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgIHJldHVybiBiLmdyb3VwS2V5LmxvY2FsZUNvbXBhcmUoYS5ncm91cEtleSk7IC8vIFx1NjVFNVx1NjcxRlx1NUI1N1x1N0IyNlx1NEUzMlx1OTY0RFx1NUU4RlxuICAgICAgfVxuICAgICAgLy8gXHU1MTc2XHU0RUQ2XHU1MjA2XHU3RUM0XHU2MzA5XHU2NTcwXHU5MUNGXHU5NjREXHU1RThGXG4gICAgICByZXR1cm4gYi51bml0cy5sZW5ndGggLSBhLnVuaXRzLmxlbmd0aDtcbiAgICB9KTtcbiAgfVxuLyoqXG4gKiBcdTUyMDZcdTdFQzRcdTk1RUFcdTUzNjFcdUZGMDhcdTdDN0JcdTRGM0MgZ3JvdXBVbml0c1x1RkYwOVxuICovXG5wcml2YXRlIGdyb3VwRmxhc2hjYXJkcyhmbGFzaGNhcmRzOiBGbGFzaGNhcmRbXSk6IEFycmF5PHsgZ3JvdXBLZXk6IHN0cmluZzsgY2FyZHM6IEZsYXNoY2FyZFtdIH0+IHtcbiAgY29uc3QgZ3JvdXBlZCA9IG5ldyBNYXA8c3RyaW5nLCBGbGFzaGNhcmRbXT4oKTtcblxuICBmbGFzaGNhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgbGV0IGtleXM6IHN0cmluZ1tdID0gW107IC8vIFx1NjUzOVx1NEUzQVx1NjU3MFx1N0VDNFx1RkYwQ1x1NjUyRlx1NjMwMVx1NEUwMFx1NEUyQVx1NTM2MVx1NzI0N1x1NUM1RVx1NEU4RVx1NTkxQVx1NEUyQVx1NTIwNlx1N0VDNFxuICAgIFxuICAgIC8vIFx1ODNCN1x1NTNENlx1NTE3M1x1ODA1NFx1NzY4NFx1N0IxNFx1OEJCMFx1NTM1NVx1NTE0M1xuICAgIGNvbnN0IHVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjYXJkLnNvdXJjZUNvbnRlbnRJZCk7XG5cbiAgICBzd2l0Y2ggKHRoaXMuZ3JvdXBNb2RlKSB7XG4gICAgICBjYXNlICdmaWxlJzpcbiAgICAgICAgLy8gXHU2MzA5XHU2NTg3XHU0RUY2XHU1MjA2XHU3RUM0IC0gXHU0RjdGXHU3NTI4XHU1MzYxXHU3MjQ3XHU3Njg0IHNvdXJjZUZpbGVcbiAgICAgICAga2V5cyA9IFtjYXJkLnNvdXJjZUZpbGVdO1xuICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdhbm5vdGF0aW9uJzpcbiAgICAgICAgICBjb25zdCB1bml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY2FyZC5zb3VyY2VDb250ZW50SWQpO1xuICAgICAgICAgIGlmICh1bml0ICYmIHVuaXQuYW5ub3RhdGlvbklkKSB7XG4gICAgICAgICAgICBrZXlzID0gWydcdTY3MDlcdTYyNzlcdTZDRTgnXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAga2V5cyA9IFsnXHU2NUUwXHU2Mjc5XHU2Q0U4J107XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICBjYXNlICd0YWcnOlxuICAgICAgICAvLyBcdTYzMDlcdTY4MDdcdTdCN0VcdTUyMDZcdTdFQzRcbiAgICAgICAgLy8gXHU0RjE4XHU1MTQ4XHU0RjdGXHU3NTI4XHU3QjE0XHU4QkIwXHU1MzU1XHU1MTQzXHU3Njg0XHU2ODA3XHU3QjdFXG4gICAgICAgIGlmICh1bml0ICYmIHVuaXQubWV0YWRhdGEudGFncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAga2V5cyA9IHVuaXQubWV0YWRhdGEudGFncztcbiAgICAgICAgfSAgIFxuICAgICAgICAvLyBcdTUxNzZcdTZCMjFcdTRGN0ZcdTc1MjhcdTUzNjFcdTcyNDdcdTgxRUFcdTVERjFcdTc2ODRcdTY4MDdcdTdCN0VcbiAgICAgICAgZWxzZSBpZiAoY2FyZC50YWdzICYmIGNhcmQudGFncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAga2V5cyA9IGNhcmQudGFncztcbiAgICAgICAgfSBcbiAgICAgICAgLy8gXHU2NzAwXHU1NDBFXHU0RjdGXHU3NTI4IGRlY2sgXHU0RjVDXHU0RTNBXHU2ODA3XHU3QjdFXG4gICAgICAgIGVsc2UgaWYgKGNhcmQuZGVjaykge1xuICAgICAgICAgIGtleXMgPSBbY2FyZC5kZWNrXTtcbiAgICAgICAgfVxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTkwRkRcdTZDQTFcdTY3MDlcdUZGMENcdTY1M0VcdTUxNjVcIlx1NjcyQVx1NTIwNlx1N0M3QlwiXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGtleXMgPSBbJ1x1NjcyQVx1NTIwNlx1N0M3QiddO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgICBcbiAgICAgIGNhc2UgJ2RhdGUnOlxuICAgICAgICAvLyBcdTYzMDlcdTY1RTVcdTY3MUZcdTUyMDZcdTdFQzRcbiAgICAgICAga2V5cyA9IFt0aGlzLmZvcm1hdERhdGUobmV3IERhdGUoY2FyZC5tZXRhZGF0YS5jcmVhdGVkQXQpKV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgICBcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGtleXMgPSBbJ1x1NjcyQVx1NTIwNlx1N0VDNCddO1xuICAgIH1cblxuICAgIC8vIFx1NUMwNlx1NTM2MVx1NzI0N1x1NkRGQlx1NTJBMFx1NTIzMFx1NjI0MFx1NjcwOVx1NTMzOVx1OTE0RFx1NzY4NFx1NTIwNlx1N0VDNFx1NEUyRFxuICAgIGtleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgaWYgKCFncm91cGVkLmhhcyhrZXkpKSB7XG4gICAgICAgIGdyb3VwZWQuc2V0KGtleSwgW10pO1xuICAgICAgfVxuICAgICAgZ3JvdXBlZC5nZXQoa2V5KSEucHVzaChjYXJkKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gXHU4RjZDXHU2MzYyXHU0RTNBXHU2NTcwXHU3RUM0XHU1RTc2XHU2MzkyXHU1RThGXG4gIGNvbnN0IHJlc3VsdCA9IEFycmF5LmZyb20oZ3JvdXBlZC5lbnRyaWVzKCkpXG4gIC5tYXAoKFtncm91cEtleSwgY2FyZHNdKSA9PiAoeyBncm91cEtleSwgY2FyZHMgfSkpXG4gIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAvLyBcdUQ4M0RcdUREMjcgXHU1OTgyXHU2NzlDXHU2NjJGXHU2Mjc5XHU2Q0U4XHU1MjA2XHU3RUM0XHVGRjBDXCJcdTY3MDlcdTYyNzlcdTZDRThcIlx1NjM5Mlx1NTcyOFx1NTI0RFx1OTc2MlxuICBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdhbm5vdGF0aW9uJykge1xuICAgIGlmIChhLmdyb3VwS2V5ID09PSAnXHU2NzA5XHU2Mjc5XHU2Q0U4JykgcmV0dXJuIC0xO1xuICAgIGlmIChiLmdyb3VwS2V5ID09PSAnXHU2NzA5XHU2Mjc5XHU2Q0U4JykgcmV0dXJuIDE7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRlx1NjVFNVx1NjcxRlx1NTIwNlx1N0VDNFx1RkYwQ1x1NjMwOVx1NjVFNVx1NjcxRlx1OTY0RFx1NUU4Rlx1NjM5Mlx1NTIxN1xuICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2RhdGUnKSB7XG4gICAgICByZXR1cm4gYi5ncm91cEtleS5sb2NhbGVDb21wYXJlKGEuZ3JvdXBLZXkpOyAvLyBcdTY1RTVcdTY3MUZcdTVCNTdcdTdCMjZcdTRFMzJcdTk2NERcdTVFOEZcbiAgICB9XG4gICAgLy8gXHU1MTc2XHU0RUQ2XHU1MjA2XHU3RUM0XHU2MzA5XHU2NTcwXHU5MUNGXHU5NjREXHU1RThGXG4gICAgcmV0dXJuIGIuY2FyZHMubGVuZ3RoIC0gYS5jYXJkcy5sZW5ndGg7XG4gIH0pO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTdFREZcdThCQTFcdTRGRTFcdTYwNkZcbiAgICovXG4gIHByaXZhdGUgZ2V0RmlsdGVyZWRTdGF0cygpIHtcbiAgICBjb25zdCB1bml0cyA9IHRoaXMuZ2V0RmlsdGVyZWRVbml0cygpO1xuICAgIHJldHVybiB7XG4gICAgICBjb3VudDogdW5pdHMubGVuZ3RoLFxuICAgICAgd2l0aEFubm90YXRpb25zOiB1bml0cy5maWx0ZXIodSA9PiB1LmFubm90YXRpb25JZCkubGVuZ3RoLFxuICAgICAgd2l0aEZsYXNoY2FyZHM6IHVuaXRzLmZpbHRlcih1ID0+IHUuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApLmxlbmd0aFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogXHU2ODNDXHU1RjBGXHU1MzE2XHU2NUU1XHU2NzFGXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCd6aC1DTicsIHtcbiAgICAgIHllYXI6ICdudW1lcmljJyxcbiAgICAgIG1vbnRoOiAnMi1kaWdpdCcsXG4gICAgICBkYXk6ICcyLWRpZ2l0J1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NTIwNlx1N0VDNFx1NTZGRVx1NjgwN1xuICAgKi9cbiAgcHJpdmF0ZSBnZXRHcm91cEljb24obW9kZTogR3JvdXBNb2RlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgIGNhc2UgJ2ZpbGUnOiByZXR1cm4gJ1x1RDgzRFx1RENDNCc7XG4gICAgICBjYXNlICdhbm5vdGF0aW9uJzogcmV0dXJuICdcdUQ4M0RcdURDQUMnO1xuICAgICAgY2FzZSAndGFnJzogcmV0dXJuICdcdUQ4M0NcdURGRjdcdUZFMEYnO1xuICAgICAgY2FzZSAnZGF0ZSc6IHJldHVybiAnXHVEODNEXHVEQ0M1JztcbiAgICAgIGRlZmF1bHQ6IHJldHVybiAnXHVEODNEXHVEQ0MxJztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU2REZCXHU1MkEwXHU2ODM3XHU1RjBGXG4gICAqL1xuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlYXJuaW5nLW92ZXJ2aWV3LXN0eWxlcycpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWwuaWQgPSAnbGVhcm5pbmctb3ZlcnZpZXctc3R5bGVzJztcbiAgICBcbiAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTVERjJcdTdFQ0ZcdTZERkJcdTUyQTBcbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xlYXJuaW5nLW92ZXJ2aWV3LXN0eWxlcycpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgIC8qID09PT09PT09PT09PT09PT09PT09IFx1NTE2OFx1NUM0MFx1NUJCOVx1NTY2OCA9PT09PT09PT09PT09PT09PT09PSAqL1xuICAgICAgLmxlYXJuaW5nLW92ZXJ2aWV3LWNvbnRhaW5lciB7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgIH1cblxuICAgICAgLyogPT09PT09PT09PT09PT09PT09PT0gXHU0RkE3XHU4RkI5XHU2ODBGXHU2QTIxXHU1RjBGXHU2ODM3XHU1RjBGID09PT09PT09PT09PT09PT09PT09ICovXG4gICAgICAubGVhcm5pbmctb3ZlcnZpZXctY29udGFpbmVyW2RhdGEtbW9kZT1cInNpZGViYXJcIl0ge1xuICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgfVxuXG4gICAgICAuc2lkZWJhci10b29sYmFyIHtcbiAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOyAvKiBcdUQ4M0RcdUREMjcgXHU2REZCXHU1MkEwICovXG4gIHotaW5kZXg6IDEwO1xuICAgICAgfVxuXG4gICAgICAuc2VhcmNoLWNvbnRhaW5lciB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zZWFyY2gtaW5wdXQge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICB9XG5cbiAgICAgIC5zZWFyY2gtaW5wdXQ6Zm9jdXMge1xuICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICB9XG5cbiAgICAgIC5maWx0ZXItY2hpcHMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDZweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgIH1cblxuICAgICAgLmZpbHRlci1jaGlwIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBwYWRkaW5nOiA2cHggOHB4O1xuICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICB9XG5cbiAgICAgIC5maWx0ZXItY2hpcDpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAuZmlsdGVyLWNoaXAuYWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtc3dpdGNoZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDZweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWJ0biB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgcGFkZGluZzogNnB4O1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtYnRuLmFjdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTtcbiAgICAgIH1cbi8qIFx1NTcyOCAuc3RhdHMtYmFkZ2UgXHU2ODM3XHU1RjBGXHU0RTRCXHU1MjREXHU2REZCXHU1MkEwICovXG4uc3RhdHMtcm93IHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBnYXA6IDNweDtcbn1cbi8qIFx1NTkzNFx1OTBFOFx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVx1NUJCOVx1NTY2OCAqL1xuLmhlYWRlci1hY3Rpb25zIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZ2FwOiA4cHg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5cbi8qIFx1NjI3OVx1OTFDRlx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVx1NjgzN1x1NUYwRiAtIFx1NEZBN1x1OEZCOVx1NjgwRiAqL1xuLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG4tc2lkZWJhcixcbi5iYXRjaC1kZWxldGUtYnRuLXNpZGViYXIge1xuICBwYWRkaW5nOiA2cHggNnB4O1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICBmb250LXNpemU6IDExcHg7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG59XG5cbi5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuLXNpZGViYXI6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICBjb2xvcjogd2hpdGU7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbn1cblxuLmJhdGNoLWRlbGV0ZS1idG4tc2lkZWJhcjpob3ZlciB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXJlZCk7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xufVxuXG4vKiBcdTYyNzlcdTkxQ0ZcdTY0Q0RcdTRGNUNcdTYzMDlcdTk0QUVcdTY4MzdcdTVGMEYgLSBcdTRFM0JcdTc1NENcdTk3NjIgKi9cbi5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuLWhlYWRlcixcbi5iYXRjaC1kZWxldGUtYnRuLWhlYWRlciB7XG4gIHBhZGRpbmc6IDhweCAxNnB4O1xuICBmb250LXNpemU6IDEzcHg7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG59XG5cbi5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuLWhlYWRlcjpob3ZlciB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xufVxuXG4uYmF0Y2gtZGVsZXRlLWJ0bi1oZWFkZXI6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1yZWQpO1xuICBjb2xvcjogd2hpdGU7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbn1cbi5zZWxlY3QtYWxsLWJ0bi1zaWRlYmFyIHtcbiAgcGFkZGluZzogNnB4IDEycHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gIGZvbnQtc2l6ZTogMTFweDtcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgZmxleC1zaHJpbms6IDA7IC8qIFx1OTYzMlx1NkI2Mlx1NjMwOVx1OTRBRVx1ODhBQlx1NTM4Qlx1N0YyOSAqL1xufVxuXG4uc2VsZWN0LWFsbC1idG4tc2lkZWJhcjpob3ZlciB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG4uc3RhdHMtYmFkZ2Uge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGZvbnQtc2l6ZTogMTFweDtcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICBwYWRkaW5nOiA0cHg7XG4gIGZsZXg6IDE7IC8qIFx1NTM2MFx1NjM2RVx1NTI2OVx1NEY1OVx1N0E3QVx1OTVGNCAqL1xufVxuICAgICAgLnN0YXRzLWJhZGdlIHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgcGFkZGluZzogNHB4O1xuICAgICAgfVxuLnNlbGVjdC1hbGwtYnRuLWhlYWRlciB7XG4gIHBhZGRpbmc6IDhweCAxNnB4O1xuICBmb250LXNpemU6IDEzcHg7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIGJveC1zaGFkb3c6IDAgMXB4IDNweCByZ2JhKDAsIDAsIDAsIDAuMDgpO1xufVxuXG4uc2VsZWN0LWFsbC1idG4taGVhZGVyOmhvdmVyIHtcbiAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTFweCk7XG4gIGJveC1zaGFkb3c6IDAgMnB4IDZweCByZ2JhKDAsIDAsIDAsIDAuMTUpO1xufVxuXG4vKiBcdTVCOENcdTYyMTBcdTcyQjZcdTYwMDFcdTc2ODRcdTlBRDhcdTRFQUVcdTY4MzdcdTVGMEYgKi9cbi5zZWxlY3QtYWxsLWJ0bi1oZWFkZXIuY29tcGxldGVkIHtcbiAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xufVxuXG4uc2VsZWN0LWFsbC1idG4taGVhZGVyLmNvbXBsZXRlZDpob3ZlciB7XG4gIG9wYWNpdHk6IDAuOTtcbn1cblxuLnNlbGVjdC1hbGwtYnRuLXNpZGViYXIge1xuICBwYWRkaW5nOiA2cHggMTJweDtcblxuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gIGZvbnQtc2l6ZTogMTFweDtcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvOyAvKiBcdTk3NjBcdTVERTZcdTVCRjlcdTlGNTAgKi9cbn1cblxuLnNlbGVjdC1hbGwtYnRuLXNpZGViYXI6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gIGNvbG9yOiB3aGl0ZTtcbn1cbiAgLyogXHU1M0Q2XHU2RDg4XHU5MDA5XHU2MkU5XHU2MzA5XHU5NEFFIC0gXHU0RkE3XHU4RkI5XHU2ODBGICovXG4uY2FuY2VsLXNlbGVjdGlvbi1idG4tc2lkZWJhciB7XG4gIHBhZGRpbmc6IDZweCAxMnB4O1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICBmb250LXNpemU6IDExcHg7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbn1cblxuLmNhbmNlbC1zZWxlY3Rpb24tYnRuLXNpZGViYXI6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbn1cblxuLyogXHU1M0Q2XHU2RDg4XHU5MDA5XHU2MkU5XHU2MzA5XHU5NEFFIC0gXHU0RTNCXHU3NTRDXHU5NzYyICovXG4uY2FuY2VsLXNlbGVjdGlvbi1idG4taGVhZGVyIHtcbiAgcGFkZGluZzogOHB4IDE2cHg7XG4gIGZvbnQtc2l6ZTogMTNweDtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xufVxuXG4uY2FuY2VsLXNlbGVjdGlvbi1idG4taGVhZGVyOmhvdmVyIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG59XG5cbi8qIFx1NUI4Q1x1NjIxMFx1NzJCNlx1NjAwMVx1NzY4NFx1NTE2OFx1OTAwOVx1NjMwOVx1OTRBRVx1OUFEOFx1NEVBRSAqL1xuLnNlbGVjdC1hbGwtYnRuLXNpZGViYXIuY29tcGxldGVkLFxuLnNlbGVjdC1hbGwtYnRuLWhlYWRlci5jb21wbGV0ZWQge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG59XG4gICAgICAuYmF0Y2gtYWN0aW9ucyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogNnB4O1xuICAgICAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1tb2RlLWJ0bixcbiAgICAgIC5zZWxlY3QtYWxsLWJ0bixcbiAgICAgIC5iYXRjaC1kZWxldGUtYnRuLFxuICAgICAgLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG4ge1xuICAgICAgICBwYWRkaW5nOiA2cHggMTJweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuc2VsZWN0LWFsbC1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLW1vZGUtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1kZWxldGUtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1jaGVja2JveCB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5zaWRlYmFyLWNvbnRlbnQtbGlzdCB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7IC8qIFx1RDgzRFx1REQyNyBcdTZERkJcdTUyQTAgKi9cbiAgei1pbmRleDogMTsgLyogXHVEODNEXHVERDI3IFx1NkRGQlx1NTJBMCAqL1xuICAgICAgfVxuXG4gICAgICAuY29udGVudC1ncm91cCB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC1oZWFkZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDZweDtcbiAgICAgICAgcGFkZGluZzogNnB4IDhweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICBwb3NpdGlvbjogc3RpY2t5O1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIHotaW5kZXg6IDEwO1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtaWNvbiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLXRpdGxlIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC1jb3VudCB7XG4gICAgICAgIHBhZGRpbmc6IDJweCA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAuY29tcGFjdC1jYXJkIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIG1hcmdpbjogNHB4IDA7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLmNvbXBhY3QtY2FyZDpob3ZlciB7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgycHgpO1xuICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLDAsMCwwLjEpO1xuICAgICAgfVxuXG4vKiBcdTU3RkFcdTc4NDBcdTYzMDdcdTc5M0FcdTU2NjhcdTY4MzdcdTVGMEYgKi9cbi5jYXJkLWluZGljYXRvciB7XG4gIHdpZHRoOiA0cHg7XG4gIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICBmbGV4LXNocmluazogMDtcbiAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG59XG5cblxuLyogXHVEODNEXHVERDI3IFx1NkNBMVx1NjcwOVx1NjI3OVx1NkNFOFx1NjVGNlx1RkYxQVx1NEUwQVx1NTM0QVx1OTAwRlx1NjYwRVx1RkYwQ1x1NEUwQlx1NTM0QVx1NjYzRVx1NzkzQVx1N0M3Qlx1NTc4Qlx1OTg5Q1x1ODI3MiAqL1xuLmNhcmQtaW5kaWNhdG9yLnR5cGUtcWEge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoXG4gICAgdG8gYm90dG9tLFxuICAgIHRyYW5zcGFyZW50IDAlLFxuICAgIHRyYW5zcGFyZW50IDUwJSxcbiAgICAjMTBiOTgxIDUwJSxcbiAgICAjMTBiOTgxIDEwMCVcbiAgKTtcbn1cblxuLmNhcmQtaW5kaWNhdG9yLnR5cGUtY2xvemUge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoXG4gICAgdG8gYm90dG9tLFxuICAgIHRyYW5zcGFyZW50IDAlLFxuICAgIHRyYW5zcGFyZW50IDUwJSxcbiAgICAgICAgIzkzMzNlYSA1MCUsXG4gICAgIzkzMzNlYSAxMDAlXG5cbiAgKTtcbn1cblxuLmNhcmQtaW5kaWNhdG9yLnR5cGUtdGV4dCB7XG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudChcbiAgICB0byBib3R0b20sXG4gICAgdHJhbnNwYXJlbnQgMCUsXG4gICAgdHJhbnNwYXJlbnQgNTAlLFxuICAgICM2YjcyODAgNTAlLFxuICAgICM2YjcyODAgMTAwJVxuICApO1xufVxuXG4vKiBcdUQ4M0RcdUREMjcgXHU2NzA5XHU2Mjc5XHU2Q0U4XHU2NUY2XHVGRjFBXHU0RTBBXHU1MzRBXHU4NEREXHU4MjcyXHVGRjBDXHU0RTBCXHU1MzRBXHU3QzdCXHU1NzhCXHU5ODlDXHU4MjcyICovXG4uY2FyZC1pbmRpY2F0b3IudHlwZS1xYS5oYXMtYW5ub3RhdGlvbiB7XG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudChcbiAgICB0byBib3R0b20sIFxuICAgICMzYjgyZjYgMCUsIFxuICAgICMzYjgyZjYgNTAlLCBcbiAgICAjMTBiOTgxIDUwJSxcbiAgICAjMTBiOTgxIDEwMCVcbiAgKTtcbn1cblxuLmNhcmQtaW5kaWNhdG9yLnR5cGUtY2xvemUuaGFzLWFubm90YXRpb24ge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoXG4gICAgdG8gYm90dG9tLCBcbiAgICAjM2I4MmY2IDAlLCBcbiAgICAjM2I4MmY2IDUwJSwgXG4gICAgICAgICM5MzMzZWEgNTAlLFxuICAgICM5MzMzZWEgMTAwJVxuXG4gICk7XG59XG5cbi5jYXJkLWluZGljYXRvci50eXBlLXRleHQuaGFzLWFubm90YXRpb24ge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoXG4gICAgdG8gYm90dG9tLCBcbiAgICAjM2I4MmY2IDAlLCBcbiAgICAjM2I4MmY2IDUwJSwgXG4gICAgIzZiNzI4MCA1MCUsXG4gICAgIzZiNzI4MCAxMDAlXG4gICk7XG59XG5cbi8qIFx1RDgzRFx1REQyNyBcdTlFRDhcdThCQTRcdTY4MzdcdTVGMEZcdUZGMDhcdTZDQTFcdTY3MDlcdTdDN0JcdTU3OEJcdTY1RjZcdTc2ODRcdTUxNUNcdTVFOTVcdUZGMDkgKi9cbi5jYXJkLWluZGljYXRvcjpub3QoLnR5cGUtcWEpOm5vdCgudHlwZS1jbG96ZSk6bm90KC50eXBlLXRleHQpIHtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KFxuICAgIHRvIGJvdHRvbSxcbiAgICB0cmFuc3BhcmVudCAwJSxcbiAgICB0cmFuc3BhcmVudCA1MCUsXG4gICAgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpIDUwJSxcbiAgICB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcikgMTAwJVxuICApO1xufVxuXG4uY2FyZC1pbmRpY2F0b3IuaGFzLWFubm90YXRpb246bm90KC50eXBlLXFhKTpub3QoLnR5cGUtY2xvemUpOm5vdCgudHlwZS10ZXh0KSB7XG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudChcbiAgICB0byBib3R0b20sXG4gICAgIzNiODJmNiAwJSxcbiAgICAjM2I4MmY2IDUwJSxcbiAgICB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcikgNTAlLFxuICAgIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSAxMDAlXG4gICk7XG59XG5cblxuXG4udHlwZS1pbmRpY2F0b3Ige1xuICBwYWRkaW5nOiAycHggOHB4O1xuICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICBmb250LXNpemU6IDEwcHg7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG59XG5cbi50eXBlLWluZGljYXRvci50eXBlLXFhIHtcbiAgYmFja2dyb3VuZDogcmdiYSgxNiwgMTg1LCAxMjksIDAuMik7XG5cbiAgY29sb3I6ICMxMGI5ODE7XG59XG5cbi50eXBlLWluZGljYXRvci50eXBlLWNsb3plIHtcbiAgYmFja2dyb3VuZDogcmdiYSgxNDcsIDUxLCAyMzQsIDAuMik7XG4gICAgY29sb3I6ICM5MzMzZWE7XG5cbn1cblxuLnR5cGUtaW5kaWNhdG9yLnR5cGUtdGV4dCB7XG4gIGJhY2tncm91bmQ6IHJnYmEoMTA3LCAxMTQsIDEyOCwgMC4yKTtcbiAgY29sb3I6ICM2YjcyODA7XG59XG5cbiAgICAgIC5jYXJkLWNvbnRlbnQge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBtaW4td2lkdGg6IDA7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkLWhlYWRlciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4O1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1idG4ge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgcGFkZGluZzogNHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjEpO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC10b29scyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogNHB4O1xuICAgICAgfVxuXG4gICAgICAudG9vbC1idG4ge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgcGFkZGluZzogNHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuXG4gICAgICAudG9vbC1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLmZsYXNoY2FyZC1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1MSwgMTkxLCAzNiwgMC4yKTtcbiAgICAgIH1cblxuICAgICAgLm1vcmUtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbi5ub3RlLXRleHQge1xuICBmb250LXNpemU6IDEycHg7XG4gIGxpbmUtaGVpZ2h0OiAxLjY7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xuICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xuICBvdmVyZmxvdy13cmFwOiBicmVhay13b3JkO1xuICBtYXJnaW4tYm90dG9tOiA2cHg7XG59XG5cbi5ub3RlLXRleHQ6aG92ZXIge1xuICBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbn1cblxuLyogXHVEODNEXHVERDI3IFFBIFx1NjgzN1x1NUYwRiAqL1xuLnFhLXF1ZXN0aW9uIHtcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbn1cblxuLnFhLXNlcGFyYXRvciB7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgbWFyZ2luOiAwIDRweDtcbn1cblxuLnFhLWFuc3dlciB7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCk7XG4gIGZvbnQtc3R5bGU6IGl0YWxpYztcbn1cblxuLyogXHVEODNEXHVERDI3IENsb3plIFx1OUFEOFx1NEVBRVx1NjgzN1x1NUYwRiAqL1xuLmNsb3plLWhpZ2hsaWdodCB7XG5cbiAgY29sb3I6ICNmNTllMGI7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIHBhZGRpbmc6IDFweCAzcHg7XG4gIGJvcmRlci1yYWRpdXM6IDNweDtcbn1cblxuICAgICAgLmFubm90YXRpb24tcHJldmlldyB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBwYWRkaW5nOiA2cHggOHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgbWFyZ2luLXRvcDogNnB4O1xuICAgICAgICBib3JkZXItbGVmdDogM3B4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC5hbm5vdGF0aW9uLXByZXZpZXc6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLmNhcmQtbWV0YSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLyogPT09PT09PT09PT09PT09PT09PT0gXHU1MTg1XHU4MDU0XHU2Mjc5XHU2Q0U4XHU3RjE2XHU4RjkxXHU1NjY4ID09PT09PT09PT09PT09PT09PT09ICovXG4gICAgICAuaW5saW5lLWFubm90YXRpb24tZWRpdG9yIHtcbiAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgYW5pbWF0aW9uOiBzbGlkZURvd24gMC4xNXMgZWFzZS1vdXQ7XG4gICAgICB9XG4gICAgICBcbiAgICAgIEBrZXlmcmFtZXMgc2xpZGVEb3duIHtcbiAgICAgICAgZnJvbSB7XG4gICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTVweCk7XG4gICAgICAgIH1cbiAgICAgICAgdG8ge1xuICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC5pbmxpbmUtYW5ub3RhdGlvbi10ZXh0YXJlYSB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBtaW4taGVpZ2h0OiA4MHB4O1xuICAgICAgICBwYWRkaW5nOiAxMnB4IDE0cHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgZm9udC1mYW1pbHk6IHZhcigtLWZvbnQtdGV4dCk7XG4gICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgICAgcmVzaXplOiB2ZXJ0aWNhbDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgMXB4IDNweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC5pbmxpbmUtYW5ub3RhdGlvbi10ZXh0YXJlYTpmb2N1cyB7XG4gICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC5pbmxpbmUtYW5ub3RhdGlvbi10ZXh0YXJlYTo6cGxhY2Vob2xkZXIge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1mYWludCk7XG4gICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLmlubGluZS1hbm5vdGF0aW9uLWhpbnQge1xuICAgICAgICBtYXJnaW4tdG9wOiA2cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZmFpbnQpO1xuICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8qIFx1N0Y1MVx1NjgzQ1x1NTM2MVx1NzI0N1x1NzY4NFx1NTE4NVx1ODA1NFx1N0YxNlx1OEY5MVx1NTY2OFx1NjgzN1x1NUYwRiAqL1xuICAgICAgLmdyaWQtY2FyZCAuaW5saW5lLWFubm90YXRpb24tZWRpdG9yIHtcbiAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgfVxuICAgICAgXG4gICAgICAuZ3JpZC1jYXJkIC5pbmxpbmUtYW5ub3RhdGlvbi10ZXh0YXJlYSB7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDEwMHB4O1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxNHB4O1xuICAgICAgfVxuICAgICAgXG4gICAgICAuZ3JpZC1jYXJkIC5pbmxpbmUtYW5ub3RhdGlvbi1oaW50IHtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC50YWcge1xuICAgICAgICBwYWRkaW5nOiAycHggNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS10YWctYmFja2dyb3VuZCk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10YWctY29sb3IpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLnRhZy1tb3JlIHtcbiAgICAgICAgcGFkZGluZzogMnB4IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAuYmFkZ2Uge1xuICAgICAgICBwYWRkaW5nOiAycHggNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAvKiA9PT09PT09PT09PT09PT09PT09PSBcdTRFM0JcdTc1NENcdTk3NjJcdTZBMjFcdTVGMEZcdTY4MzdcdTVGMEYgPT09PT09PT09PT09PT09PT09PT0gKi9cbiAgICAgIC5tYWluLWxheW91dCB7XG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMjUwcHggMWZyO1xuICAgICAgICBnYXA6IDFweDtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICB9XG5cbiAgICAgIC5sZWZ0LXBhbmVsIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIH1cblxuICAgICAgLnJpZ2h0LXBhbmVsIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgfVxuXG4gICAgICAuZml4ZWQtZW50cmllcyB7XG4gICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGdhcDogNnB4O1xuICAgICAgfVxuXG4gICAgICAuZW50cnktYnRuIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDEwcHggMTJweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgIH1cblxuICAgICAgLmVudHJ5LWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMnB4KTtcbiAgICAgIH1cblxuICAgICAgLmVudHJ5LWJ0bi5hY3RpdmUge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAubWFpbi10b29sYmFyIHtcbiAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLWFjdGlvbnMtbWFpbiB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1hY3Rpb25zLW1haW4gLmJhdGNoLW1vZGUtYnRuLFxuICAgICAgLmJhdGNoLWFjdGlvbnMtbWFpbiAuc2VsZWN0LWFsbC1idG4sXG4gICAgICAuYmF0Y2gtYWN0aW9ucy1tYWluIC5iYXRjaC1kZWxldGUtYnRuLFxuICAgICAgLmJhdGNoLWFjdGlvbnMtbWFpbiAuYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0biB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1hY3Rpb25zLW1haW4gLnNlbGVjdC1hbGwtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICB9XG5cbiAgICAgIC5zZWFyY2gtaW5wdXQtbWFpbiB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgIH1cblxuICAgICAgLnNlYXJjaC1pbnB1dC1tYWluOmZvY3VzIHtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtc3dpdGNoZXItbWFpbiB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogNnB4O1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtYnRuLW1haW4ge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxMHB4O1xuICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtYnRuLW1haW46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xcHgpO1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtYnRuLW1haW4uYWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLnBhbmVsLXRpdGxlIHtcbiAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICBtYXJnaW46MDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1saXN0IHtcbiAgICAgICAgcGFkZGluZzogMCA4cHggOHB4IDhweDtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgIH1cblxuICAgICAgLmZpbGUtaXRlbSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBwYWRkaW5nOiA4cHggMTBweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC5maWxlLWl0ZW06aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLmZpbGUtaXRlbS5zZWxlY3RlZCB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICB9XG5cbiAgICAgIC5maWxlLWljb24ge1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICB9XG5cbiAgICAgIC5maWxlLW5hbWUge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1jb3VudCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgcGFkZGluZzogMnB4IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjEpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1pdGVtLnNlbGVjdGVkIC5maWxlLWNvdW50IHtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjIpO1xuICAgICAgfVxuXG4gICAgICAuZW1wdHktcmlnaHQtcGFuZWwge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5lbXB0eS1pY29uIHtcbiAgICAgICAgZm9udC1zaXplOiA0OHB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgICAgfVxuXG4gICAgICAuZW1wdHktdGV4dCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIH1cblxuICAgICAgLmdyaWQtaGVhZGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTJweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgIH1cblxuICAgICAgLmdyaWQtaGVhZGVyIGgyIHtcbiAgICAgICAgZm9udC1zaXplOiAxOHB4O1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICB9XG5cbiAgICAgIC5vcGVuLWZpbGUtYnRuIHtcbiAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC5vcGVuLWZpbGUtYnRuOmhvdmVyIHtcbiAgICAgICAgb3BhY2l0eTogMC45O1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTFweCk7XG4gICAgICB9XG5cbiAgICAgIC5jb250ZW50LWdyaWQge1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgyNDBweCwgMWZyKSk7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgfVxuXG4gICAgICAuZ3JpZC1jYXJkIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKTtcbiAgICAgICAgYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYmEoMCwwLDAsMC4xKTtcbiAgICAgIH1cblxuICAgICAgLmdyaWQtY2FyZDpob3ZlciB7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsMCwwLDAuMTUpO1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XG4gICAgICB9XG5cbiAgICAgIC5ncmlkLWNhcmQtaGVhZGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xuICAgICAgICBwYWRkaW5nLWJvdHRvbTogOHB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgfVxuXG4gICAgICAuZG9jLW5hbWUge1xuICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDAuNXB4O1xuICAgICAgfVxuXG4gICAgICAuZ3JpZC1jYXJkLXRvb2xzIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC50b29sLWJ0bi1ncmlkIHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIHBhZGRpbmc6IDRweCA2cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG5cbiAgICAgIC50b29sLWJ0bi1ncmlkOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xKTtcbiAgICAgIH1cblxuICAgICAgLmdyaWQtY2FyZC1jb250ZW50IHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDtcbiAgICAgIH1cblxuLmdyaWQtbm90ZS10ZXh0IHtcbiAgZm9udC1zaXplOiAxM3B4OyAgLyogXHVEODNEXHVERDI3IFx1NEVDRSAxNHB4IFx1NjUzOVx1NEUzQSAxM3B4ICovXG4gIGxpbmUtaGVpZ2h0OiAxLjY7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgd29yZC13cmFwOiBicmVhay13b3JkOyAgLyogXHVEODNEXHVERDI3IFx1NTE0MVx1OEJCOFx1NjM2Mlx1ODg0QyAqL1xuICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xuICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xuICBvdmVyZmxvdy13cmFwOiBicmVhay13b3JkO1xufVxuXG4uZ3JpZC1ub3RlLXRleHQ6aG92ZXIge1xuICBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbn1cblxuXG4gICAgICAuZ3JpZC1hbm5vdGF0aW9uIHtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBib3JkZXItbGVmdDogM3B4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC5ncmlkLWFubm90YXRpb246aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLmdyaWQtYW5ub3RhdGlvbiBzdHJvbmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgfVxuXG4gICAgICAuZ3JpZC10YWdzIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICBnYXA6IDZweDtcbiAgICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICAgIH1cblxuICAgICAgLnRhZy1ncmlkIHtcbiAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tdGFnLWJhY2tncm91bmQpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGFnLWNvbG9yKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC5ncmlkLWNhcmQtbWV0YSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgcGFkZGluZy10b3A6IDEwcHg7XG4gICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgIH1cblxuICAgICAgLmxpbmUtaW5mbyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLmJhZGdlLWdyaWQge1xuICAgICAgICBwYWRkaW5nOiAzcHggOHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIH1cblxuICAgICAgLmNhcmRzLWhlYWRlciB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkcy1oZWFkZXIgaDIge1xuICAgICAgICBmb250LXNpemU6IDE4cHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkcy1ncmlkIHtcbiAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoMTYwcHgsIDFmcikpO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgIH1cblxuICAgICAgLmZsYXNoY2FyZC1pdGVtIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuXG4gICAgICAuZmxhc2hjYXJkLWl0ZW06aG92ZXIge1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDEycHggcmdiYSgwLDAsMCwwLjEpO1xuICAgICAgfVxuXG4gICAgICAuZmxhc2hjYXJkLWhlYWRlciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDtcbiAgICAgIH1cblxuICAgICAgLmZsYXNoY2FyZC1kZWxldGUtYnRuIHtcbiAgICAgICAgcGFkZGluZzogNHB4IDhweDtcbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIG9wYWNpdHk6IDAuNjtcbiAgICAgIH1cblxuICAgICAgLmZsYXNoY2FyZC1kZWxldGUtYnRuOmhvdmVyIHtcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgfVxuXG4gICAgICAuZmxhc2hjYXJkLXR5cGUge1xuICAgICAgICBwYWRkaW5nOiA0cHggMTBweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgfVxuXG4gICAgICAuZmxhc2hjYXJkLXR5cGUucWEge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDE2LCAxODUsIDEyOSwgMC4yKTtcblxuICAgICAgICBjb2xvcjogIzEwYjk4MTtcbiAgICAgIH1cblxuICAgICAgLmZsYXNoY2FyZC10eXBlLmNsb3plIHtcblxuICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgxNDcsIDUxLCAyMzQsIDAuMik7XG4gICAgICAgICBjb2xvcjogIzkzMzNlYTtcbiAgICAgIH1cblxuICAgICAgLmZsYXNoY2FyZC1kYXRlIHtcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtYm9keSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGdhcDogMTBweDtcbiAgICAgIH1cblxuICAgICAgLmZsYXNoY2FyZC1xdWVzdGlvbixcbiAgICAgIC5mbGFzaGNhcmQtYW5zd2VyIHtcbiAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgfVxuXG4gICAgICAuZmxhc2hjYXJkLXF1ZXN0aW9uIHN0cm9uZyxcbiAgICAgIC5mbGFzaGNhcmQtYW5zd2VyIHN0cm9uZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgfVxuXG4uZW1wdHktc3RhdGUge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIHBhZGRpbmc6IDQwcHggMjBweDtcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICBmb250LXNpemU6IDE0cHg7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lOyAvKiBcdUQ4M0RcdUREMjcgXHU1MTczXHU5NTJFXHVGRjAxXHU3QTdBXHU3MkI2XHU2MDAxXHU0RTBEXHU2MkU2XHU2MjJBXHU3MEI5XHU1MUZCICovXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgei1pbmRleDogMTsgLyogXHVEODNEXHVERDI3IFx1Nzg2RVx1NEZERFx1NTcyOFx1NURFNVx1NTE3N1x1NjgwRlx1NEUwQlx1NjVCOSAqL1xufVxuXG4gICAgICAuZW1wdHktaGludCB7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICB9XG5cbiAgICAgIC8qID09PT09PT09PT09PT09PT09PT09IFx1NTRDRFx1NUU5NFx1NUYwRiA9PT09PT09PT09PT09PT09PT09PSAqL1xuICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XG4gICAgICAgIC5tYWluLWxheW91dCB7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7XG4gICAgICAgIH1cblxuICAgICAgICAubGVmdC1wYW5lbCB7XG4gICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5jb250ZW50LWdyaWQsXG4gICAgICAgIC5jYXJkcy1ncmlkIHtcbiAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjtcbiAgICAgICAgfVxuICAgICAgICAgIC5iYXRjaC1idG4ge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIH1cblxuICAgICAgLmJhdGNoLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoNTksIDEzMCwgMjQ2LCAwLjIpO1xuICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTYyNzlcdTkxQ0ZcdTZBMjFcdTVGMEZcdTZGQzBcdTZEM0JcdTcyQjZcdTYwMDEgKi9cbiAgICAgIC5jb21wYWN0LWNhcmQuYmF0Y2gtbW9kZSAuYmF0Y2gtYnRuLFxuICAgICAgLmdyaWQtY2FyZC5iYXRjaC1tb2RlIC5iYXRjaC1idG4ge1xuICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDU5LCAxMzAsIDI0NiwgMC4zKTtcbiAgICAgICAgY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1hY3Rpb25zIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZ2FwOiA2cHg7XG4gIG1hcmdpbi10b3A6IDEwcHg7XG4gIGZsZXgtd3JhcDogd3JhcDtcbiAgcGFkZGluZzogOHB4O1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeS1hbHQpO1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIGFuaW1hdGlvbjogc2xpZGVEb3duIDAuMnMgZWFzZTtcbn1cbi8qIFx1NjI3OVx1OTFDRlx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVx1Nzk4MVx1NzUyOFx1NzJCNlx1NjAwMVx1RkYwOFx1NjU3MFx1OTFDRlx1NEUzQTBcdTY1RjZcdTc2ODRcdTg5QzZcdTg5QzlcdTUzQ0RcdTk5ODhcdUZGMDkgKi9cbi5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuLXNpZGViYXI6aGFzLXRleHQoXCIoMClcIiksXG4uYmF0Y2gtZGVsZXRlLWJ0bi1zaWRlYmFyOmhhcy10ZXh0KFwiKDApXCIpLFxuLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG4taGVhZGVyOmhhcy10ZXh0KFwiKDApXCIpLFxuLmJhdGNoLWRlbGV0ZS1idG4taGVhZGVyOmhhcy10ZXh0KFwiKDApXCIpIHtcbiAgb3BhY2l0eTogMC41O1xuICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xufVxuQGtleWZyYW1lcyBzbGlkZURvd24ge1xuICBmcm9tIHtcbiAgICBvcGFjaXR5OiAwO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTBweCk7XG4gIH1cbiAgdG8ge1xuICAgIG9wYWNpdHk6IDE7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xuICAgIFxuICB9XG59XG4gICAgICB9XG4gICAgYDtcblxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gIH1cblxuICBhc3luYyBvbkNsb3NlKCkge1xuICAgIC8vIFx1NkUwNVx1NzQwNlx1NUI5QVx1NjVGNlx1NTY2OFxuICAgIGlmICh0aGlzLnNlYXJjaERlYm91bmNlVGltZXIgIT09IG51bGwpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyKTtcbiAgICB9XG4gICAgXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT0gXHU2Mjc5XHU2Q0U4XHU3RjE2XHU4RjkxXHU2QTIxXHU2MDAxXHU2ODQ2ID09PT09PT09PT09PT09PT09PT09XG5jbGFzcyBBbm5vdGF0aW9uTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgcmVzdWx0OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBvblN1Ym1pdDogKHRleHQ6IHN0cmluZykgPT4gdm9pZDtcbiAgcHJpdmF0ZSBkZWZhdWx0VmFsdWU6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZGVmYXVsdFZhbHVlOiBzdHJpbmcsIG9uU3VibWl0OiAodGV4dDogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLmRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICB0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1MjcwRlx1RkUwRiBcdTdGMTZcdThGOTFcdTYyNzlcdTZDRTgnIH0pO1xuXG4gICAgY29uc3QgdGV4dGFyZWEgPSBjb250ZW50RWwuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgY2xzOiAnYW5ub3RhdGlvbi10ZXh0YXJlYScsXG4gICAgICBwbGFjZWhvbGRlcjogJ1x1OEY5M1x1NTE2NVx1NEY2MFx1NzY4NFx1NjI3OVx1NkNFOC4uLicsXG4gICAgICBcbiAgICAgIFxuICAgIH0pO1xuICAgIHRleHRhcmVhLnZhbHVlID0gdGhpcy5kZWZhdWx0VmFsdWU7XG4gICAgdGV4dGFyZWEuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgdGV4dGFyZWEuc3R5bGUubWluSGVpZ2h0ID0gJzEyMHB4JztcbiAgICB0ZXh0YXJlYS5zdHlsZS5wYWRkaW5nID0gJzEwcHgnO1xuICAgIHRleHRhcmVhLnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpJztcbiAgICB0ZXh0YXJlYS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNnB4JztcbiAgICB0ZXh0YXJlYS5zdHlsZS5mb250RmFtaWx5ID0gJ3ZhcigtLWZvbnQtaW50ZXJmYWNlKSc7XG4gICAgdGV4dGFyZWEuc3R5bGUuZm9udFNpemUgPSAnMTRweCc7XG4gICAgdGV4dGFyZWEuc3R5bGUucmVzaXplID0gJ3ZlcnRpY2FsJztcbiAgICB0ZXh0YXJlYS5zdHlsZS5tYXJnaW5Ub3AgPSAnMTJweCc7XG5cbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG4gICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmdhcCA9ICc4cHgnO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LWVuZCc7XG4gICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICcxNnB4JztcblxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHU1M0Q2XHU2RDg4JyB9KTtcbiAgICBjYW5jZWxCdG4uc3R5bGUucGFkZGluZyA9ICc4cHggMTZweCc7XG4gICAgY2FuY2VsQnRuLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc2cHgnO1xuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdcdTRGRERcdTVCNTgnLFxuICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICB9KTtcbiAgICBzYXZlQnRuLnN0eWxlLnBhZGRpbmcgPSAnOHB4IDE2cHgnO1xuICAgIHNhdmVCdG4uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzZweCc7XG4gICAgc2F2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMucmVzdWx0ID0gdGV4dGFyZWEudmFsdWU7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICB0ZXh0YXJlYS5mb2N1cygpO1xuICAgIFxuICAgIC8vIFx1NUZFQlx1NjM3N1x1OTUyRVx1NjUyRlx1NjMwMVxuICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmIChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSkge1xuICAgICAgICB0aGlzLnJlc3VsdCA9IHRleHRhcmVhLnZhbHVlO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIFxuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIFxuICAgIGlmICh0aGlzLnJlc3VsdCAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5vblN1Ym1pdCh0aGlzLnJlc3VsdCk7XG4gICAgfVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09IFx1OTVFQVx1NTM2MVx1NTIxQlx1NUVGQVx1NkEyMVx1NjAwMVx1Njg0NiA9PT09PT09PT09PT09PT09PT09PVxuY2xhc3MgRmxhc2hjYXJkQ3JlYXRpb25Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSB1bml0OiBDb250ZW50VW5pdDtcbiAgcHJpdmF0ZSB0eXBlOiAncWEnIHwgJ2Nsb3plJztcbiAgcHJpdmF0ZSBvblN1Ym1pdDogKHF1ZXN0aW9uOiBzdHJpbmcsIGFuc3dlcjogc3RyaW5nKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwcDogQXBwLFxuICAgIHVuaXQ6IENvbnRlbnRVbml0LFxuICAgIHR5cGU6ICdxYScgfCAnY2xvemUnLFxuICAgIG9uU3VibWl0OiAocXVlc3Rpb246IHN0cmluZywgYW5zd2VyOiBzdHJpbmcpID0+IHZvaWRcbiAgKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLnVuaXQgPSB1bml0O1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIFxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7XG4gICAgICB0ZXh0OiBgXHVEODNDXHVEQ0NGIFx1NTIxQlx1NUVGQSR7dGhpcy50eXBlID09PSAncWEnID8gJ1EmQScgOiAnXHU1ODZCXHU3QTdBJ31cdTk1RUFcdTUzNjFgXG4gICAgfSk7XG5cbiAgICAvLyBcdTY2M0VcdTc5M0FcdTUzOUZcdTY1ODdcbiAgICBjb25zdCBzb3VyY2VEaXYgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnZmxhc2hjYXJkLXNvdXJjZScgfSk7XG4gICAgc291cmNlRGl2LnN0eWxlLnBhZGRpbmcgPSAnMTBweCc7XG4gICAgc291cmNlRGl2LnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJztcbiAgICBzb3VyY2VEaXYuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzZweCc7XG4gICAgc291cmNlRGl2LnN0eWxlLm1hcmdpblRvcCA9ICcxMnB4JztcbiAgICBzb3VyY2VEaXYuc3R5bGUubWFyZ2luQm90dG9tID0gJzEycHgnO1xuICAgIHNvdXJjZURpdi5zdHlsZS5mb250U2l6ZSA9ICcxM3B4JztcbiAgICBzb3VyY2VEaXYuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xuICAgIHNvdXJjZURpdi5pbm5lckhUTUwgPSBgPHN0cm9uZz5cdTUzOUZcdTY1ODdcdUZGMUE8L3N0cm9uZz4ke3RoaXMudW5pdC5jb250ZW50fWA7XG5cbiAgICAvLyBcdTk1RUVcdTk4OThcdThGOTNcdTUxNjVcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2xhYmVsJywge1xuICAgICAgdGV4dDogdGhpcy50eXBlID09PSAncWEnID8gJ1x1OTVFRVx1OTg5OCcgOiAnXHU1ODZCXHU3QTdBXHU5ODk4XHU1RTcyJyxcbiAgICAgIGNsczogJ2ZsYXNoY2FyZC1sYWJlbCdcbiAgICB9KS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICBcbiAgICBjb25zdCBxdWVzdGlvbklucHV0ID0gY29udGVudEVsLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgIGNsczogJ2ZsYXNoY2FyZC1pbnB1dCcsXG4gICAgICBwbGFjZWhvbGRlcjogdGhpcy50eXBlID09PSAncWEnIFxuICAgICAgICA/ICdcdThGOTNcdTUxNjVcdTk1RUVcdTk4OTguLi4nIFxuICAgICAgICA6ICdcdTc1Mjgge3tjMTo6Li4ufX0gXHU2ODA3XHU4QkIwXHU5NzAwXHU4OTgxXHU1ODZCXHU3QTdBXHU3Njg0XHU1MTg1XHU1QkI5J1xuICAgIH0pO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgcXVlc3Rpb25JbnB1dC5zdHlsZS5taW5IZWlnaHQgPSAnODBweCc7XG4gICAgcXVlc3Rpb25JbnB1dC5zdHlsZS5wYWRkaW5nID0gJzEwcHgnO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzZweCc7XG4gICAgcXVlc3Rpb25JbnB1dC5zdHlsZS5tYXJnaW5Ub3AgPSAnOHB4JztcbiAgICBxdWVzdGlvbklucHV0LnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxMnB4JztcbiAgICBxdWVzdGlvbklucHV0LnN0eWxlLmZvbnRTaXplID0gJzE0cHgnO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUucmVzaXplID0gJ3ZlcnRpY2FsJztcblxuICAgIC8vIFx1N0I1NFx1Njg0OFx1OEY5M1x1NTE2NVxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnbGFiZWwnLCB7XG4gICAgICB0ZXh0OiAnXHU3QjU0XHU2ODQ4JyxcbiAgICAgIGNsczogJ2ZsYXNoY2FyZC1sYWJlbCdcbiAgICB9KS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICBcbiAgICBjb25zdCBhbnN3ZXJJbnB1dCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICBjbHM6ICdmbGFzaGNhcmQtaW5wdXQnLFxuICAgICAgcGxhY2Vob2xkZXI6ICdcdThGOTNcdTUxNjVcdTdCNTRcdTY4NDguLi4nXG4gICAgfSk7XG4gICAgYW5zd2VySW5wdXQudmFsdWUgPSB0aGlzLnVuaXQuY29udGVudDtcbiAgICBhbnN3ZXJJbnB1dC5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICBhbnN3ZXJJbnB1dC5zdHlsZS5taW5IZWlnaHQgPSAnODBweCc7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUucGFkZGluZyA9ICcxMHB4JztcbiAgICBhbnN3ZXJJbnB1dC5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzZweCc7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUubWFyZ2luVG9wID0gJzhweCc7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUuZm9udFNpemUgPSAnMTRweCc7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUucmVzaXplID0gJ3ZlcnRpY2FsJztcblxuICAgIC8vIFx1NjMwOVx1OTRBRVxuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdtb2RhbC1idXR0b24tY29udGFpbmVyJyB9KTtcbiAgICBidXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICBidXR0b25Db250YWluZXIuc3R5bGUuZ2FwID0gJzhweCc7XG4gICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2ZsZXgtZW5kJztcbiAgICBidXR0b25Db250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzE2cHgnO1xuXG4gICAgY29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdTUzRDZcdTZEODgnIH0pO1xuICAgIGNhbmNlbEJ0bi5zdHlsZS5wYWRkaW5nID0gJzhweCAxNnB4JztcbiAgICBjYW5jZWxCdG4uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzZweCc7XG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgY3JlYXRlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnXHU1MjFCXHU1RUZBJyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgY3JlYXRlQnRuLnN0eWxlLnBhZGRpbmcgPSAnOHB4IDE2cHgnO1xuICAgIGNyZWF0ZUJ0bi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNnB4JztcbiAgICBjcmVhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBxdWVzdGlvbiA9IHF1ZXN0aW9uSW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgY29uc3QgYW5zd2VyID0gYW5zd2VySW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgXG4gICAgICBpZiAoIXF1ZXN0aW9uIHx8ICFhbnN3ZXIpIHtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1OEJGN1x1NTg2Qlx1NTE5OVx1NUI4Q1x1NjU3NFx1NEZFMVx1NjA2RicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRoaXMub25TdWJtaXQocXVlc3Rpb24sIGFuc3dlcik7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICBxdWVzdGlvbklucHV0LmZvY3VzKCk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG4vLyA9PT09PT09PT09PT09PT09PT09PSBcdTk1RUFcdTUzNjFcdTdGMTZcdThGOTFcdTZBMjFcdTYwMDFcdTY4NDYgPT09PT09PT09PT09PT09PT09PT1cbmV4cG9ydCBjbGFzcyBGbGFzaGNhcmRFZGl0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgY2FyZDogRmxhc2hjYXJkO1xuICBwcml2YXRlIG9uU3VibWl0OiAocXVlc3Rpb246IHN0cmluZywgYW5zd2VyOiBzdHJpbmcpID0+IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgYXBwOiBBcHAsXG4gICAgY2FyZDogRmxhc2hjYXJkLFxuICAgIG9uU3VibWl0OiAocXVlc3Rpb246IHN0cmluZywgYW5zd2VyOiBzdHJpbmcpID0+IHZvaWRcbiAgKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLmNhcmQgPSBjYXJkO1xuICAgIHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHUyNzBGXHVGRTBGIFx1N0YxNlx1OEY5MVx1OTVFQVx1NTM2MScgfSk7XG5cbiAgICAvLyBcdTk1RUVcdTk4OThcdThGOTNcdTUxNjVcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2xhYmVsJywgeyB0ZXh0OiAnXHU5NUVFXHU5ODk4JyB9KS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICBjb25zdCBxdWVzdGlvbklucHV0ID0gY29udGVudEVsLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgIGNsczogJ2ZsYXNoY2FyZC1pbnB1dCdcbiAgICB9KTtcbiAgICBxdWVzdGlvbklucHV0LnZhbHVlID0gdGhpcy5jYXJkLmZyb250O1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgcXVlc3Rpb25JbnB1dC5zdHlsZS5taW5IZWlnaHQgPSAnODBweCc7XG4gICAgcXVlc3Rpb25JbnB1dC5zdHlsZS5wYWRkaW5nID0gJzEwcHgnO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUubWFyZ2luVG9wID0gJzhweCc7XG4gICAgcXVlc3Rpb25JbnB1dC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMTJweCc7XG5cbiAgICAvLyBcdTdCNTRcdTY4NDhcdThGOTNcdTUxNjVcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2xhYmVsJywgeyB0ZXh0OiAnXHU3QjU0XHU2ODQ4JyB9KS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICBjb25zdCBhbnN3ZXJJbnB1dCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICBjbHM6ICdmbGFzaGNhcmQtaW5wdXQnXG4gICAgfSk7XG4gICAgYW5zd2VySW5wdXQudmFsdWUgPSBBcnJheS5pc0FycmF5KHRoaXMuY2FyZC5iYWNrKSBcbiAgICAgID8gdGhpcy5jYXJkLmJhY2suam9pbignLCAnKSBcbiAgICAgIDogdGhpcy5jYXJkLmJhY2s7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUubWluSGVpZ2h0ID0gJzgwcHgnO1xuICAgIGFuc3dlcklucHV0LnN0eWxlLnBhZGRpbmcgPSAnMTBweCc7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUubWFyZ2luVG9wID0gJzhweCc7XG5cbiAgICAvLyBcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmdhcCA9ICc4cHgnO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LWVuZCc7XG4gICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICcxNnB4JztcblxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHU1M0Q2XHU2RDg4JyB9KTtcbiAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuXG4gICAgY29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1x1NEZERFx1NUI1OCcsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIHNhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBxdWVzdGlvbiA9IHF1ZXN0aW9uSW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgY29uc3QgYW5zd2VyID0gYW5zd2VySW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgaWYgKCFxdWVzdGlvbiB8fCAhYW5zd2VyKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdThCRjdcdTU4NkJcdTUxOTlcdTVCOENcdTY1NzRcdTRGRTFcdTYwNkYnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5vblN1Ym1pdChxdWVzdGlvbiwgYW5zd2VyKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIHF1ZXN0aW9uSW5wdXQuZm9jdXMoKTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufSIsICJpbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgVEZpbGUsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIExlYXJuaW5nU3lzdGVtUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgRmxhc2hjYXJkIH0gZnJvbSAnLi4vY29yZS9GbGFzaGNhcmRNYW5hZ2VyJztcbmltcG9ydCB7IENhcmRTY2hlZHVsZXIsIFJldmlld0Vhc2UgfSBmcm9tICcuLi9jb3JlL0NhcmRTY2hlZHVsZXInO1xuaW1wb3J0IHsgRmxhc2hjYXJkRWRpdE1vZGFsIH0gZnJvbSAnLi9TaWRlYmFyT3ZlcnZpZXdWaWV3JztcblxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9SRVZJRVcgPSAnbGVhcm5pbmctc3lzdGVtLXJldmlldyc7XG5cbmV4cG9ydCBjbGFzcyBSZXZpZXdWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luO1xuICBwcml2YXRlIHNjaGVkdWxlcjogQ2FyZFNjaGVkdWxlcjtcbiAgcHJpdmF0ZSBkdWVDYXJkczogRmxhc2hjYXJkW10gPSBbXTtcbiAgcHJpdmF0ZSBjdXJyZW50Q2FyZEluZGV4OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIGN1cnJlbnRDYXJkOiBGbGFzaGNhcmQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzaG93QW5zd2VyOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgc3RhcnRUaW1lOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIHVzZXJBbnN3ZXJzOiBzdHJpbmdbXSA9IFtdO1xuICBwcml2YXRlIHVzZXJBbnN3ZXI6IHN0cmluZyA9ICcnOyAvLyBRQSBcdTUzNjFcdTcyNDdcdTc2ODRcdTc1MjhcdTYyMzdcdTdCNTRcdTY4NDhcblxuICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luKSB7XG4gICAgc3VwZXIobGVhZik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy5zY2hlZHVsZXIgPSBuZXcgQ2FyZFNjaGVkdWxlcigpO1xuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gVklFV19UWVBFX1JFVklFVztcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdGbGFzaGNhcmQgUmV2aWV3JztcbiAgfVxuXG4gIGdldEljb24oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ2xheWVycyc7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkRHVlQ2FyZHMoKTtcbiAgICB0aGlzLnJlbmRlcigpO1xuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gICAgdGhpcy5yZWdpc3RlcktleWJvYXJkSGFuZGxlcnMoKTtcbiAgfVxuXG4gIGFzeW5jIG9uQ2xvc2UoKSB7fVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZER1ZUNhcmRzKCkge1xuICAgIHRoaXMuZHVlQ2FyZHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldER1ZUNhcmRzKCk7XG4gICAgdGhpcy5jdXJyZW50Q2FyZEluZGV4ID0gMDtcbiAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5rZXlib2FyZEhhbmRsZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXIoKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBjb250YWluZXIuYWRkQ2xhc3MoJ3Jldmlldy1jb250YWluZXInKTtcblxuICAgIGlmICh0aGlzLmR1ZUNhcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5yZW5kZXJOb0R1ZUNhcmRzKGNvbnRhaW5lcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbmV3Q2FyZCA9IHRoaXMuZHVlQ2FyZHNbdGhpcy5jdXJyZW50Q2FyZEluZGV4XTtcbiAgICBcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTUyMDdcdTYzNjJcdTUyMzBcdTY1QjBcdTUzNjFcdTcyNDdcdUZGMENcdTkxQ0RcdTdGNkVcdTcyQjZcdTYwMDFcbiAgICBpZiAodGhpcy5jdXJyZW50Q2FyZD8uaWQgIT09IG5ld0NhcmQ/LmlkKSB7XG4gICAgICB0aGlzLnVzZXJBbnN3ZXJzID0gW107XG4gICAgICB0aGlzLnVzZXJBbnN3ZXIgPSAnJztcbiAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IGZhbHNlO1xuICAgICAgdGhpcy5zdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmN1cnJlbnRDYXJkID0gbmV3Q2FyZDtcbiAgICBcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTY2M0VcdTc5M0FcdTk1RUVcdTk4OThcdTRFMTRcdTVGMDBcdTU5Q0JcdTY1RjZcdTk1RjRcdTRFM0EwXHVGRjBDXHU4QkJFXHU3RjZFXHU1RjAwXHU1OUNCXHU2NUY2XHU5NUY0XG4gICAgaWYgKCF0aGlzLnNob3dBbnN3ZXIgJiYgdGhpcy5zdGFydFRpbWUgPT09IDApIHtcbiAgICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB9XG5cbiAgICAvLyBcdThGREJcdTVFQTZcdTY3NjFcbiAgICB0aGlzLnJlbmRlclByb2dyZXNzKGNvbnRhaW5lcik7XG5cbiAgICAvLyBcdTUzNjFcdTcyNDdcdTUzM0FcdTU3REZcbiAgICBjb25zdCBjYXJkQXJlYSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLWFyZWEnIH0pO1xuXG4gICAgLy8gXHU2REZCXHU1MkEwXHU1M0YzXHU0RTBBXHU4OUQyXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFXG4gICAgdGhpcy5yZW5kZXJUb3BBY3Rpb25zKGNhcmRBcmVhKTtcblxuICAgIGlmICh0aGlzLnNob3dBbnN3ZXIpIHtcbiAgICAgIHRoaXMucmVuZGVyQW5zd2VyKGNhcmRBcmVhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW5kZXJRdWVzdGlvbihjYXJkQXJlYSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJUb3BBY3Rpb25zKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBhY3Rpb25zQmFyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3RvcC1hY3Rpb25zLWJhcicgfSk7XG5cbiAgICAvLyBKdW1wIHRvIHNvdXJjZSBcdTYzMDlcdTk0QUVcdUZGMDhcdTUzRUFcdTY2M0VcdTc5M0FcdTU2RkVcdTY4MDdcdUZGMDlcbiAgICBjb25zdCBqdW1wQnRuID0gYWN0aW9uc0Jhci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgY2xzOiAndG9wLWFjdGlvbi1idG4ganVtcC1pY29uLWJ0bicsXG4gICAgICBhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ0p1bXAgdG8gU291cmNlJyB9XG4gICAgfSk7XG4gICAganVtcEJ0bi5pbm5lckhUTUwgPSAnXHUyMTk3JztcbiAgICBqdW1wQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5qdW1wVG9Tb3VyY2UoKSk7XG5cbiAgICAvLyBNb3JlIFx1ODNEQ1x1NTM1NVxuICAgIGNvbnN0IG1vcmVCdG4gPSBhY3Rpb25zQmFyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICBjbHM6ICd0b3AtYWN0aW9uLWJ0biBtb3JlLWJ0bicsXG4gICAgICBhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ01vcmUgYWN0aW9ucycgfVxuICAgIH0pO1xuICAgIG1vcmVCdG4uaW5uZXJIVE1MID0gJ1x1MjJFRic7XG4gICAgXG4gICAgLy8gXHU1MjFCXHU1RUZBXHU0RTBCXHU2MkM5XHU4M0RDXHU1MzU1XG4gICAgY29uc3QgZHJvcGRvd24gPSBhY3Rpb25zQmFyLmNyZWF0ZURpdih7IGNsczogJ21vcmUtZHJvcGRvd24nIH0pO1xuICAgIGRyb3Bkb3duLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAvLyBcdTZERkJcdTUyQTBcdTdGMTZcdThGOTFcdTkwMDlcdTk4NzlcbmNvbnN0IGVkaXRPcHRpb24gPSBkcm9wZG93bi5jcmVhdGVFbCgnZGl2Jywge1xuICBjbHM6ICdkcm9wZG93bi1pdGVtJ1xufSk7XG5lZGl0T3B0aW9uLmlubmVySFRNTCA9ICdcdTI3MEZcdUZFMEYgRWRpdCBDYXJkJztcbmVkaXRPcHRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGlmICghdGhpcy5jdXJyZW50Q2FyZCkgcmV0dXJuO1xuICB0aGlzLmVkaXRDdXJyZW50Rmxhc2hjYXJkKCk7XG4gIGRyb3Bkb3duLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG59KTtcblxuICAgIGNvbnN0IGRlbGV0ZU9wdGlvbiA9IGRyb3Bkb3duLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbHM6ICdkcm9wZG93bi1pdGVtIGRlbGV0ZS1pdGVtJ1xuICAgIH0pO1xuICAgIGRlbGV0ZU9wdGlvbi5pbm5lckhUTUwgPSAnXHVEODNEXHVEREQxXHVGRTBGIERlbGV0ZSBDYXJkJztcbiAgICBkZWxldGVPcHRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMuY3VycmVudENhcmQpIHJldHVybjtcbiAgICAgIGlmIChjb25maXJtKCdcdTc4NkVcdTVCOUFcdTg5ODFcdTUyMjBcdTk2NjRcdThGRDlcdTVGMjBcdTk1RUFcdTUzNjFcdTU0MTdcdUZGMUZcdTUyMjBcdTk2NjRcdTU0MEVcdTVDMDZcdTRFQ0VcdTU5MERcdTRFNjBcdTk2MUZcdTUyMTdcdTRFMkRcdTc5RkJcdTk2NjRcdTMwMDInKSkge1xuICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZUZsYXNoY2FyZCh0aGlzLmN1cnJlbnRDYXJkLmlkKTtcbiAgICAgIH1cbiAgICAgIGRyb3Bkb3duLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfSk7XG5cbiAgICAvLyBcdTUyMDdcdTYzNjJcdTRFMEJcdTYyQzlcdTgzRENcdTUzNTVcbiAgICBtb3JlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBkcm9wZG93bi5zdHlsZS5kaXNwbGF5ID0gZHJvcGRvd24uc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnID8gJ2Jsb2NrJyA6ICdub25lJztcbiAgICB9KTtcblxuICAgIC8vIFx1NzBCOVx1NTFGQlx1NTkxNlx1OTBFOFx1NTE3M1x1OTVFRFx1ODNEQ1x1NTM1NVxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgZHJvcGRvd24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9KTtcblxuICAgIGRyb3Bkb3duLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck5vRHVlQ2FyZHMoY29udGFpbmVyOiBFbGVtZW50KSB7XG4gICAgY29uc3QgZW1wdHlTdGF0ZSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdlbXB0eS1zdGF0ZScgfSk7XG4gICAgZW1wdHlTdGF0ZS5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUQ4M0NcdURGODkgQWxsIERvbmUhJyB9KTtcbiAgICBlbXB0eVN0YXRlLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnTm8gY2FyZHMgZHVlIGZvciByZXZpZXcgcmlnaHQgbm93LicgfSk7XG5cbiAgICBjb25zdCBzdGF0cyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0U3RhdHMoKTtcbiAgICBjb25zdCBzdGF0c0RpdiA9IGVtcHR5U3RhdGUuY3JlYXRlRGl2KHsgY2xzOiAnc3RhdHMtc3VtbWFyeScgfSk7XG4gICAgc3RhdHNEaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBUb3RhbCBjYXJkczogJHtzdGF0cy50b3RhbH1gIH0pO1xuICAgIHN0YXRzRGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgTmV3IGNhcmRzOiAke3N0YXRzLm5ld31gIH0pO1xuICAgIHN0YXRzRGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgUmV2aWV3ZWQgdG9kYXk6ICR7c3RhdHMucmV2aWV3ZWRUb2RheX1gIH0pO1xuXG4gICAgY29uc3QgY2xvc2VCdG4gPSBlbXB0eVN0YXRlLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnQ2xvc2UgUmV2aWV3JyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmxlYWYuZGV0YWNoKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclByb2dyZXNzKGNvbnRhaW5lcjogRWxlbWVudCkge1xuICAgIGNvbnN0IHByb2dyZXNzQmFyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3Byb2dyZXNzLWJhcicgfSk7XG4gICAgXG4gICAgY29uc3Qgc3RhdHMgPSBwcm9ncmVzc0Jhci5jcmVhdGVEaXYoeyBjbHM6ICdwcm9ncmVzcy1zdGF0cycgfSk7XG4gICAgc3RhdHMuY3JlYXRlU3Bhbih7IFxuICAgICAgdGV4dDogYCR7dGhpcy5jdXJyZW50Q2FyZEluZGV4ICsgMX0gLyAke3RoaXMuZHVlQ2FyZHMubGVuZ3RofWAsXG4gICAgICBjbHM6ICdwcm9ncmVzcy10ZXh0J1xuICAgIH0pO1xuXG5cblxuICAgIGNvbnN0IGJhckNvbnRhaW5lciA9IHByb2dyZXNzQmFyLmNyZWF0ZURpdih7IGNsczogJ2Jhci1jb250YWluZXInIH0pO1xuICAgIGNvbnN0IGJhciA9IGJhckNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdiYXInIH0pO1xuICAgIGNvbnN0IHByb2dyZXNzID0gKCh0aGlzLmN1cnJlbnRDYXJkSW5kZXggKyAxKSAvIHRoaXMuZHVlQ2FyZHMubGVuZ3RoKSAqIDEwMDtcbiAgICBiYXIuc3R5bGUud2lkdGggPSBgJHtwcm9ncmVzc30lYDtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyUXVlc3Rpb24oY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGlmICghdGhpcy5jdXJyZW50Q2FyZCkgcmV0dXJuO1xuXG4gICAgLy8gXHU1MzYxXHU3MjQ3XHU0RkUxXHU2MDZGXG4gICAgY29uc3QgY2FyZEluZm8gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1pbmZvJyB9KTtcbiAgICBjYXJkSW5mby5jcmVhdGVTcGFuKHsgXG4gICAgICB0ZXh0OiB0aGlzLmN1cnJlbnRDYXJkLnR5cGUgPT09ICdxYScgPyAnXHVEODNEXHVEQ0REIFEmQScgOiAnXHUyNzBGXHVGRTBGIENsb3plJyxcbiAgICAgIGNsczogJ2NhcmQtdHlwZSdcbiAgICB9KTtcbiAgICBjYXJkSW5mby5jcmVhdGVTcGFuKHsgXG4gICAgICB0ZXh0OiBgRGVjazogJHt0aGlzLmN1cnJlbnRDYXJkLmRlY2t9YCxcbiAgICAgIGNsczogJ2NhcmQtZGVjaydcbiAgICB9KTtcblxuICAgIC8vIFx1OTVFRVx1OTg5OFx1NTMzQVx1NTdERlxuICAgIGNvbnN0IHF1ZXN0aW9uQXJlYSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdxdWVzdGlvbi1hcmVhJyB9KTtcbiAgICBxdWVzdGlvbkFyZWEuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUXVlc3Rpb24nIH0pO1xuICAgIFxuICAgIGNvbnN0IHF1ZXN0aW9uVGV4dCA9IHF1ZXN0aW9uQXJlYS5jcmVhdGVEaXYoeyBjbHM6ICdxdWVzdGlvbi10ZXh0JyB9KTtcbiAgICBxdWVzdGlvblRleHQudGV4dENvbnRlbnQgPSB0aGlzLmN1cnJlbnRDYXJkLmZyb250O1xuXG4gICAgLy8gXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU4RjkzXHU1MTY1XHU2ODQ2XG4gICAgaWYgKHRoaXMuY3VycmVudENhcmQudHlwZSA9PT0gJ2Nsb3plJyAmJiB0aGlzLmN1cnJlbnRDYXJkLmNsb3plKSB7XG4gICAgICBjb25zdCBpbnB1dEFyZWEgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2xvemUtaW5wdXQtYXJlYScgfSk7XG4gICAgICBpbnB1dEFyZWEuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnRmlsbCBpbiB0aGUgYmxhbmtzOicgfSk7XG5cbiAgICAgIC8vIFx1Nzg2RVx1NEZERCB1c2VyQW5zd2VycyBcdTY1NzBcdTdFQzRcdTY3MDlcdThEQjNcdTU5MUZcdTc2ODRcdTk1N0ZcdTVFQTZcbiAgICAgIGlmICh0aGlzLnVzZXJBbnN3ZXJzLmxlbmd0aCA8IHRoaXMuY3VycmVudENhcmQuY2xvemUuZGVsZXRpb25zLmxlbmd0aCkge1xuICAgICAgICB0aGlzLnVzZXJBbnN3ZXJzID0gbmV3IEFycmF5KHRoaXMuY3VycmVudENhcmQuY2xvemUuZGVsZXRpb25zLmxlbmd0aCkuZmlsbCgnJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY3VycmVudENhcmQuY2xvemUuZGVsZXRpb25zLmZvckVhY2goKGRlbGV0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dEdyb3VwID0gaW5wdXRBcmVhLmNyZWF0ZURpdih7IGNsczogJ2lucHV0LWdyb3VwJyB9KTtcbiAgICAgICAgaW5wdXRHcm91cC5jcmVhdGVTcGFuKHsgdGV4dDogYCR7aW5kZXggKyAxfS4gYCB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGlucHV0ID0gaW5wdXRHcm91cC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIHBsYWNlaG9sZGVyOiAnWW91ciBhbnN3ZXIuLi4nLFxuICAgICAgICAgIGNsczogJ2Nsb3plLWlucHV0JyxcbiAgICAgICAgICB2YWx1ZTogdGhpcy51c2VyQW5zd2Vyc1tpbmRleF0gfHwgJydcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICAgICAgdGhpcy51c2VyQW5zd2Vyc1tpbmRleF0gPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGlucHV0LmZvY3VzKCksIDUwKTtcbiAgICAgICAgfVxuICAgICAgXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBRQSBcdTUzNjFcdTcyNDdcdThGOTNcdTUxNjVcdTY4NDZcbiAgICBpZiAodGhpcy5jdXJyZW50Q2FyZC50eXBlID09PSAncWEnKSB7XG4gICAgICBjb25zdCBpbnB1dEFyZWEgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncWEtaW5wdXQtYXJlYScgfSk7XG4gICAgICBpbnB1dEFyZWEuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnWW91ciBBbnN3ZXI6JyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgdGV4dGFyZWEgPSBpbnB1dEFyZWEuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgICBwbGFjZWhvbGRlcjogJ1R5cGUgeW91ciBhbnN3ZXIgaGVyZS4uLicsXG4gICAgICAgIGNsczogJ3FhLWlucHV0JyxcbiAgICAgICAgdmFsdWU6IHRoaXMudXNlckFuc3dlclxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcbiAgICAgICAgdGhpcy51c2VyQW5zd2VyID0gKGUudGFyZ2V0IGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQpLnZhbHVlO1xuICAgICAgfSk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHRleHRhcmVhLmZvY3VzKCksIDUwKTtcbiAgICB9XG5cbiAgICAvLyBcdTYzMDlcdTk0QUVcdTUzM0FcdTU3REZcbiAgICBjb25zdCBidXR0b25BcmVhID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2J1dHRvbi1hcmVhJyB9KTtcblxuICAgIC8vIFx1NjYzRVx1NzkzQVx1N0I1NFx1Njg0OFx1NjMwOVx1OTRBRVxuICAgIGNvbnN0IHNob3dBbnN3ZXJCdG4gPSBidXR0b25BcmVhLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnU2hvdyBBbnN3ZXInLFxuICAgICAgY2xzOiAnbW9kLWN0YSBzaG93LWFuc3dlci1idG4nLFxuICAgICAgYXR0cjogeyB0aXRsZTogJ1ByZXNzIEVudGVyIG9yIFRhYid9IFxuICAgIH0pO1xuICAgIHNob3dBbnN3ZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLnNob3dBbnN3ZXIgPSB0cnVlO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyQW5zd2VyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAoIXRoaXMuY3VycmVudENhcmQpIHJldHVybjtcblxuICAgIC8vIFx1NTM2MVx1NzI0N1x1NEZFMVx1NjA2RlxuICAgIGNvbnN0IGNhcmRJbmZvID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NhcmQtaW5mbycgfSk7XG4gICAgY2FyZEluZm8uY3JlYXRlU3Bhbih7IFxuICAgICAgdGV4dDogdGhpcy5jdXJyZW50Q2FyZC50eXBlID09PSAncWEnID8gJ1x1RDgzRFx1RENERCBRJkEnIDogJ1x1MjcwRlx1RkUwRiBDbG96ZScsXG4gICAgICBjbHM6ICdjYXJkLXR5cGUnXG4gICAgfSk7XG4gICAgY2FyZEluZm8uY3JlYXRlU3Bhbih7IFxuICAgICAgdGV4dDogYERlY2s6ICR7dGhpcy5jdXJyZW50Q2FyZC5kZWNrfWAsXG4gICAgICBjbHM6ICdjYXJkLWRlY2snXG4gICAgfSk7XG5cbiAgICAvLyBcdTk1RUVcdTk4OThcdTU2REVcdTk4N0VcbiAgICBjb25zdCBxdWVzdGlvblJldmlldyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdxdWVzdGlvbi1yZXZpZXcnIH0pO1xuICAgIHF1ZXN0aW9uUmV2aWV3LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1F1ZXN0aW9uOicgfSk7XG4gICAgcXVlc3Rpb25SZXZpZXcuY3JlYXRlRGl2KHsgXG4gICAgICB0ZXh0OiB0aGlzLmN1cnJlbnRDYXJkLmZyb250LFxuICAgICAgY2xzOiAncmV2aWV3LXRleHQnXG4gICAgfSk7XG5cbiAgICAvLyBcdTdCNTRcdTY4NDhcdTUzM0FcdTU3REZcbiAgICBjb25zdCBhbnN3ZXJBcmVhID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2Fuc3dlci1hcmVhJyB9KTtcblxuICAgIGlmICh0aGlzLmN1cnJlbnRDYXJkLnR5cGUgPT09ICdjbG96ZScgJiYgdGhpcy5jdXJyZW50Q2FyZC5jbG96ZSkge1xuICAgICAgLy8gXHU2NjNFXHU3OTNBXHU1QjhDXHU2NTc0XHU2NTg3XHU2NzJDXG4gICAgICBjb25zdCBmdWxsVGV4dCA9IGFuc3dlckFyZWEuY3JlYXRlRGl2KHsgY2xzOiAnZnVsbC10ZXh0JyB9KTtcbiAgICAgIGZ1bGxUZXh0LnRleHRDb250ZW50ID0gdGhpcy5jdXJyZW50Q2FyZC5jbG96ZS5vcmlnaW5hbDtcblxuICAgICAgLy8gXHU2NjNFXHU3OTNBXHU3NTI4XHU2MjM3XHU3QjU0XHU2ODQ4XHU1QkY5XHU2QkQ0XG4gICAgICBpZiAodGhpcy51c2VyQW5zd2Vycy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGNvbXBhcmlzb24gPSBhbnN3ZXJBcmVhLmNyZWF0ZURpdih7IGNsczogJ2Fuc3dlci1jb21wYXJpc29uJyB9KTtcbiAgICAgICAgY29tcGFyaXNvbi5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdZb3VyIEFuc3dlcnM6JyB9KTtcblxuICAgICAgICB0aGlzLmN1cnJlbnRDYXJkLmNsb3plLmRlbGV0aW9ucy5mb3JFYWNoKChkZWxldGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gY29tcGFyaXNvbi5jcmVhdGVEaXYoeyBjbHM6ICdjb21wYXJpc29uLWl0ZW0nIH0pO1xuICAgICAgICAgIGl0ZW0uY3JlYXRlU3Bhbih7IHRleHQ6IGAke2luZGV4ICsgMX0uIGAgfSk7XG5cbiAgICAgICAgICBjb25zdCB1c2VyQW5zd2VyID0gdGhpcy51c2VyQW5zd2Vyc1tpbmRleF0gfHwgJyc7XG4gICAgICAgICAgY29uc3QgZXZhbHVhdGlvbiA9IHRoaXMuc2NoZWR1bGVyLmV2YWx1YXRlQW5zd2VyKFxuICAgICAgICAgICAgZGVsZXRpb24uYW5zd2VyLFxuICAgICAgICAgICAgdXNlckFuc3dlclxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBjb25zdCB1c2VyU3BhbiA9IGl0ZW0uY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgICB0ZXh0OiB1c2VyQW5zd2VyIHx8ICcoZW1wdHkpJyxcbiAgICAgICAgICAgIGNsczogYHVzZXItYW5zd2VyICR7ZXZhbHVhdGlvbi5jb3JyZWN0bmVzc31gXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gXHU3ODZFXHU0RkREXHU3QzdCXHU1NDBEXHU2QjYzXHU3ODZFXHU4QkJFXHU3RjZFXG4gICAgICAgICAgdXNlclNwYW4uY2xhc3NMaXN0LmFkZCgndXNlci1hbnN3ZXInLCBldmFsdWF0aW9uLmNvcnJlY3RuZXNzKTtcblxuICAgICAgICAgIGl0ZW0uY3JlYXRlU3Bhbih7IHRleHQ6ICcgXHUyMTkyICcgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgaXRlbS5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgICAgIHRleHQ6IGRlbGV0aW9uLmFuc3dlcixcbiAgICAgICAgICAgIGNsczogJ2NvcnJlY3QtYW5zd2VyJ1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKGV2YWx1YXRpb24uY29ycmVjdG5lc3MgPT09ICdwYXJ0aWFsJykge1xuICAgICAgICAgICAgaXRlbS5jcmVhdGVFbCgnc21hbGwnLCB7XG4gICAgICAgICAgICAgIHRleHQ6IGAgKCR7TWF0aC5yb3VuZChldmFsdWF0aW9uLnNpbWlsYXJpdHkgKiAxMDApfSUgbWF0Y2gpYCxcbiAgICAgICAgICAgICAgY2xzOiAnc2ltaWxhcml0eS1pbmZvJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUSZBIFx1N0I1NFx1Njg0OFxuICAgICAgY29uc3QgY29ycmVjdEFuc3dlciA9IHRoaXMuY3VycmVudENhcmQuYmFjayBhcyBzdHJpbmc7XG4gICAgICBcbiAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NEUyNFx1NTIxN1x1NUJCOVx1NTY2OFx1RkYwOFx1NjVFMFx1OEJCQVx1NjYyRlx1NTQyNlx1NjcwOVx1NzUyOFx1NjIzN1x1N0I1NFx1Njg0OFx1OTBGRFx1NjYzRVx1NzkzQVx1RkYwOVxuICAgICAgY29uc3QgY29tcGFyaXNvbiA9IGFuc3dlckFyZWEuY3JlYXRlRGl2KHsgY2xzOiAnYW5zd2VyLWNvbXBhcmlzb24gcWEtY29tcGFyaXNvbicgfSk7XG4gICAgICBcbiAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1NzUyOFx1NjIzN1x1N0I1NFx1Njg0OFx1RkYwQ1x1OEJBMVx1N0I5N1x1OEJDNFx1NEYzMFx1N0VEM1x1Njc5Q1xuICAgICAgY29uc3QgZXZhbHVhdGlvbiA9IHRoaXMudXNlckFuc3dlci50cmltKCkgXG4gICAgICAgID8gdGhpcy5zY2hlZHVsZXIuZXZhbHVhdGVBbnN3ZXIoY29ycmVjdEFuc3dlciwgdGhpcy51c2VyQW5zd2VyKVxuICAgICAgICA6IG51bGw7XG4gICAgXG4gICAgICBjb25zdCBjb2x1bW5zQ29udGFpbmVyID0gY29tcGFyaXNvbi5jcmVhdGVEaXYoeyBjbHM6ICdxYS1jb2x1bW5zLWNvbnRhaW5lcicgfSk7XG4gICAgICBcbiAgICAgIC8vIFx1NURFNlx1NTIxN1x1RkYxQUNvcnJlY3QgQW5zd2VyXHVGRjA4XHU1OUNCXHU3RUM4XHU2NjNFXHU3OTNBXHVGRjA5XG4gICAgICBjb25zdCBjb3JyZWN0Q29sdW1uID0gY29sdW1uc0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdxYS1jb2x1bW4nIH0pO1xuICAgICAgY29ycmVjdENvbHVtbi5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdDb3JyZWN0IEFuc3dlcjonLCBjbHM6ICdjb2x1bW4tbGFiZWwnIH0pO1xuICAgICAgY29uc3QgY29ycmVjdEFuc3dlckRpdiA9IGNvcnJlY3RDb2x1bW4uY3JlYXRlRGl2KHsgY2xzOiAnY29tcGFyaXNvbi1pdGVtJyB9KTtcbiAgICAgIGNvcnJlY3RBbnN3ZXJEaXYuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgdGV4dDogY29ycmVjdEFuc3dlcixcbiAgICAgICAgY2xzOiAnY29ycmVjdC1hbnN3ZXIgcWEtY29ycmVjdC1hbnN3ZXInXG4gICAgICB9KTtcbiAgICBcbiAgICAgIC8vIFx1NTNGM1x1NTIxN1x1RkYxQVlvdXIgQW5zd2VyXHVGRjA4XHU1OUNCXHU3RUM4XHU2NjNFXHU3OTNBXHVGRjBDXHU0RjQ2XHU1M0VGXHU4MEZEXHU0RTNBXHU3QTdBXHVGRjA5XG4gICAgICBjb25zdCB1c2VyQ29sdW1uID0gY29sdW1uc0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdxYS1jb2x1bW4nIH0pO1xuICAgICAgdXNlckNvbHVtbi5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdZb3VyIEFuc3dlcjonLCBjbHM6ICdjb2x1bW4tbGFiZWwnIH0pO1xuICAgICAgY29uc3QgdXNlckFuc3dlckRpdiA9IHVzZXJDb2x1bW4uY3JlYXRlRGl2KHsgY2xzOiAnY29tcGFyaXNvbi1pdGVtJyB9KTtcbiAgICAgIGNvbnN0IHVzZXJBbnN3ZXJFbGVtZW50ID0gdXNlckFuc3dlckRpdi5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICB0ZXh0OiB0aGlzLnVzZXJBbnN3ZXIudHJpbSgpIHx8ICcobm8gYW5zd2VyIHByb3ZpZGVkKScsXG4gICAgICAgIGNsczogJ3FhLXVzZXItYW5zd2VyJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFx1NTNFQVx1NjcwOVx1NTcyOFx1NjcwOVx1NzUyOFx1NjIzN1x1N0I1NFx1Njg0OFx1NjVGNlx1NjI0RFx1NkRGQlx1NTJBMFx1OEJDNFx1NEYzMFx1NjgzN1x1NUYwRlxuICAgICAgaWYgKGV2YWx1YXRpb24pIHtcbiAgICAgICAgdXNlckFuc3dlckVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndXNlci1hbnN3ZXInLCBldmFsdWF0aW9uLmNvcnJlY3RuZXNzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NzZGOFx1NEYzQ1x1NUVBNlx1NEZFMVx1NjA2Rlx1RkYwOFx1NTNFQVx1NTcyOCBwYXJ0aWFsIFx1NjVGNlx1NjYzRVx1NzkzQVx1RkYwOVxuICAgICAgICBpZiAoZXZhbHVhdGlvbi5jb3JyZWN0bmVzcyA9PT0gJ3BhcnRpYWwnKSB7XG4gICAgICAgICAgY29uc3Qgc2ltaWxhcml0eUluZm8gPSBjb21wYXJpc29uLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgICBjbHM6ICdzaW1pbGFyaXR5LWluZm8gcWEtc2ltaWxhcml0eSdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzaW1pbGFyaXR5SW5mby50ZXh0Q29udGVudCA9IGBTaW1pbGFyaXR5OiAke01hdGgucm91bmQoZXZhbHVhdGlvbi5zaW1pbGFyaXR5ICogMTAwKX0lYDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gXHU2Q0ExXHU2NzA5XHU3QjU0XHU2ODQ4XHU2NUY2XHU3Njg0XHU2ODM3XHU1RjBGXG4gICAgICAgIHVzZXJBbnN3ZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ25vLWFuc3dlcicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1OEJDNFx1N0VBN1x1NjMwOVx1OTRBRVxuICAgIGNvbnN0IHJhdGluZ0FyZWEgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncmF0aW5nLWFyZWEnIH0pO1xuXG4gICAgY29uc3QgYnV0dG9uR3JvdXAgPSByYXRpbmdBcmVhLmNyZWF0ZURpdih7IGNsczogJ3JhdGluZy1idXR0b25zJyB9KTtcblxuICAgIGNvbnN0IHJhdGluZ3M6IHsgZWFzZTogUmV2aWV3RWFzZTsgbGFiZWw6IHN0cmluZzsgY29sb3I6IHN0cmluZzsga2V5OiBzdHJpbmd9W10gPSBbXG4gICAgICB7IGVhc2U6ICdhZ2FpbicsIGxhYmVsOiAnQWdhaW5cXG4gPCAxIG1pbicsIGNvbG9yOiAncmVkJyAsIGtleTogJzEnIH0sXG4gICAgICB7IGVhc2U6ICdoYXJkJywgbGFiZWw6ICdIYXJkXFxuIDwgMTAgbWluJywgY29sb3I6ICdvcmFuZ2UnICwga2V5OiAnMicgfSxcbiAgICAgIHsgZWFzZTogJ2dvb2QnLCBsYWJlbDogJ0dvb2RcXG4gMSBkYXknLCBjb2xvcjogJ2JsdWUnICwga2V5OiAnMycgfSxcbiAgICAgIHsgZWFzZTogJ2Vhc3knLCBsYWJlbDogJ0Vhc3lcXG4gNCBkYXlzJywgY29sb3I6ICdncmVlbicsIGtleTogJzQnICB9XG4gICAgXTtcblxuICAgIHJhdGluZ3MuZm9yRWFjaCgoeyBlYXNlLCBsYWJlbCwgY29sb3Isa2V5IH0pID0+IHtcbiAgICAgIGNvbnN0IGJ0biA9IGJ1dHRvbkdyb3VwLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIGNsczogYHJhdGluZy1idG4gcmF0aW5nLSR7Y29sb3J9YCxcbiAgICAgICAgYXR0cjogeyB0aXRsZTogYFByZXNzICR7a2V5fWAgfSBcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBsaW5lcyA9IGxhYmVsLnNwbGl0KCdcXG4nKTtcbiAgICAgIGJ0bi5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBsaW5lc1swXSwgY2xzOiAncmF0aW5nLWxhYmVsJyB9KTtcbiAgICAgIGJ0bi5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBsaW5lc1sxXSwgY2xzOiAncmF0aW5nLWludGVydmFsJyB9KTtcblxuICAgICAgYnRuLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IGAoJHtrZXl9KWAsIGNsczogJ3JhdGluZy1ob3RrZXknIH0pO1xuXG4gICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnN1Ym1pdFJldmlldyhlYXNlKSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHN1Ym1pdFJldmlldyhlYXNlOiBSZXZpZXdFYXNlKSB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRDYXJkKSByZXR1cm47XG5cbiAgICBjb25zdCB0aW1lU3BlbnQgPSAoRGF0ZS5ub3coKSAtIHRoaXMuc3RhcnRUaW1lKSAvIDEwMDA7IC8vIFx1NzlEMlxuXG4gICAgLy8gXHU1QkY5XHU0RThFXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU1NDhDIFFBIFx1NTM2MVx1NzI0N1x1RkYwQ1x1NEY3Rlx1NzUyOFx1NzUyOFx1NjIzN1x1N0I1NFx1Njg0OFxuICAgIGNvbnN0IHVzZXJBbnN3ZXIgPSB0aGlzLmN1cnJlbnRDYXJkLnR5cGUgPT09ICdjbG96ZScgXG4gICAgICA/IHRoaXMudXNlckFuc3dlcnMgXG4gICAgICA6IHRoaXMuY3VycmVudENhcmQudHlwZSA9PT0gJ3FhJ1xuICAgICAgPyB0aGlzLnVzZXJBbnN3ZXJcbiAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgLy8gXHU4QkExXHU3Qjk3XHU2NUIwXHU3Njg0XHU4QzAzXHU1RUE2XG4gICAgY29uc3QgeyB1cGRhdGVkQ2FyZCwgcmV2aWV3TG9nIH0gPSB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShcbiAgICAgIHRoaXMuY3VycmVudENhcmQsXG4gICAgICBlYXNlLFxuICAgICAgdGltZVNwZW50LFxuICAgICAgdXNlckFuc3dlclxuICAgICk7XG5cbiAgICAvLyBcdTY2RjRcdTY1QjBcdTUzNjFcdTcyNDdcbiAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLnVwZGF0ZUNhcmQodXBkYXRlZENhcmQpO1xuXG4gICAgLy8gXHU4QkIwXHU1RjU1XHU2NUU1XHU1RkQ3XG4gICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5sb2dSZXZpZXcoe1xuICAgICAgaWQ6IGBsb2ctJHtEYXRlLm5vdygpfWAsXG4gICAgICAuLi5yZXZpZXdMb2dcbiAgICB9KTtcblxuICAgIC8vIFx1NEUwQlx1NEUwMFx1NUYyMFx1NTM2MVx1NzI0N1xuICAgIHRoaXMuY3VycmVudENhcmRJbmRleCsrO1xuICAgIHRoaXMuc2hvd0Fuc3dlciA9IGZhbHNlO1xuICAgIHRoaXMudXNlckFuc3dlcnMgPSBbXTtcbiAgICB0aGlzLnVzZXJBbnN3ZXIgPSAnJztcblxuICAgIGlmICh0aGlzLmN1cnJlbnRDYXJkSW5kZXggPj0gdGhpcy5kdWVDYXJkcy5sZW5ndGgpIHtcbiAgICAgIC8vIFx1NTkwRFx1NEU2MFx1NUI4Q1x1NjIxMFxuICAgICAgbmV3IE5vdGljZShgXHUyNzA1IFJldmlldyBzZXNzaW9uIGNvbXBsZXRlISBSZXZpZXdlZCAke3RoaXMuZHVlQ2FyZHMubGVuZ3RofSBjYXJkcy5gKTtcbiAgICAgIGF3YWl0IHRoaXMubG9hZER1ZUNhcmRzKCk7XG4gICAgfVxuXG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMganVtcFRvU291cmNlKCkge1xuICAgIGlmICghdGhpcy5jdXJyZW50Q2FyZCkgcmV0dXJuO1xuXG4gICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLmN1cnJlbnRDYXJkLnNvdXJjZUZpbGUpO1xuICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1NvdXJjZSBmaWxlIG5vdCBmb3VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRlbnRVbml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoXG4gICAgICB0aGlzLmN1cnJlbnRDYXJkLnNvdXJjZUNvbnRlbnRJZFxuICAgICk7XG5cbiAgICBpZiAoIWNvbnRlbnRVbml0KSB7XG4gICAgICBuZXcgTm90aWNlKCdTb3VyY2UgY29udGVudCBub3QgZm91bmQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBcdTYyNTNcdTVGMDBcdTY1ODdcdTRFRjZcdTVFNzZcdThERjNcdThGNkNcbiAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpO1xuICAgIGF3YWl0IGxlYWYub3BlbkZpbGUoZmlsZSk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShJdGVtVmlldyk7XG4gICAgICBpZiAodmlldykge1xuICAgICAgICBjb25zdCBlZGl0b3IgPSAodmlldyBhcyBhbnkpLmVkaXRvcjtcbiAgICAgICAgaWYgKGVkaXRvcikge1xuICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3IoeyBsaW5lOiBjb250ZW50VW5pdC5zb3VyY2UucG9zaXRpb24ubGluZSwgY2g6IDAgfSk7XG4gICAgICAgICAgZWRpdG9yLnNjcm9sbEludG9WaWV3KHtcbiAgICAgICAgICAgIGZyb206IHsgbGluZTogY29udGVudFVuaXQuc291cmNlLnBvc2l0aW9uLmxpbmUsIGNoOiAwIH0sXG4gICAgICAgICAgICB0bzogeyBsaW5lOiBjb250ZW50VW5pdC5zb3VyY2UucG9zaXRpb24ubGluZSwgY2g6IDAgfVxuICAgICAgICAgIH0sIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgMTAwKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGVsZXRlRmxhc2hjYXJkKGNhcmRJZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZGVsZXRlQ2FyZChjYXJkSWQpO1xuICAgICAgbmV3IE5vdGljZSgnXHVEODNEXHVEREQxXHVGRTBGIFx1OTVFQVx1NTM2MVx1NURGMlx1NTIyMFx1OTY2NCcpO1xuICAgICAgXG4gICAgICAvLyBcdTRFQ0VcdTVGNTNcdTUyNERcdTU5MERcdTRFNjBcdTk2MUZcdTUyMTdcdTRFMkRcdTc5RkJcdTk2NjRcbiAgICAgIHRoaXMuZHVlQ2FyZHMgPSB0aGlzLmR1ZUNhcmRzLmZpbHRlcihjYXJkID0+IGNhcmQuaWQgIT09IGNhcmRJZCk7XG4gICAgICBcbiAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTIyMFx1OTY2NFx1NzY4NFx1NjYyRlx1NUY1M1x1NTI0RFx1NTM2MVx1NzI0N1x1RkYwQ1x1NzlGQlx1NTJBOFx1NTIzMFx1NEUwQlx1NEUwMFx1NUYyMFxuICAgICAgaWYgKHRoaXMuY3VycmVudENhcmQ/LmlkID09PSBjYXJkSWQpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudENhcmRJbmRleCA+PSB0aGlzLmR1ZUNhcmRzLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuY3VycmVudENhcmRJbmRleCA9IE1hdGgubWF4KDAsIHRoaXMuZHVlQ2FyZHMubGVuZ3RoIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50Q2FyZCA9IG51bGw7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1OTFDRFx1NjVCMFx1NkUzMlx1NjdEM1xuICAgICAgYXdhaXQgdGhpcy5sb2FkRHVlQ2FyZHMoKTtcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGZsYXNoY2FyZDonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdcdTI3NEMgXHU1MjIwXHU5NjY0XHU5NUVBXHU1MzYxXHU1OTMxXHU4RDI1Jyk7XG4gICAgfVxuICB9XG4gIHByaXZhdGUgZWRpdEN1cnJlbnRGbGFzaGNhcmQoKSB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRDYXJkKSByZXR1cm47XG4gIFxuICAgIGNvbnN0IG1vZGFsID0gbmV3IEZsYXNoY2FyZEVkaXRNb2RhbChcbiAgICAgIHRoaXMuYXBwLFxuICAgICAgdGhpcy5jdXJyZW50Q2FyZCxcbiAgICAgIGFzeW5jIChxdWVzdGlvbjogc3RyaW5nLCBhbnN3ZXI6IHN0cmluZykgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRDYXJkOiBGbGFzaGNhcmQgPSB7XG4gICAgICAgICAgICAuLi50aGlzLmN1cnJlbnRDYXJkISxcbiAgICAgICAgICAgIGZyb250OiBxdWVzdGlvbixcbiAgICAgICAgICAgIGJhY2s6IHRoaXMuY3VycmVudENhcmQhLnR5cGUgPT09ICdjbG96ZScgPyBbYW5zd2VyXSA6IGFuc3dlcixcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgIC4uLnRoaXMuY3VycmVudENhcmQhLm1ldGFkYXRhLFxuICAgICAgICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIFxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIudXBkYXRlQ2FyZCh1cGRhdGVkQ2FyZCk7XG4gICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IFx1OTVFQVx1NTM2MVx1NURGMlx1NjZGNFx1NjVCMCcpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFx1NTIzN1x1NjVCMFx1NUY1M1x1NTI0RFx1NTM2MVx1NzI0N1x1NjYzRVx1NzkzQVxuICAgICAgICAgIHRoaXMuY3VycmVudENhcmQgPSB1cGRhdGVkQ2FyZDtcbiAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGZsYXNoY2FyZDonLCBlcnJvcik7XG4gICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIFx1NjZGNFx1NjVCMFx1OTVFQVx1NTM2MVx1NTkzMVx1OEQyNScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgICBtb2RhbC5vcGVuKCk7XG4gIH1cblxuICAvLyBcdTVGRUJcdTYzNzdcdTk1MkVcbiAgcHJpdmF0ZSBrZXlib2FyZEhhbmRsZXIgPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbnN0IGlzSW5JbnB1dCA9IHRhcmdldC50YWdOYW1lID09PSAnSU5QVVQnIHx8IHRhcmdldC50YWdOYW1lID09PSAnVEVYVEFSRUEnO1xuICAgICAgLy8gVGFiIFx1OTUyRVx1NTkwNFx1NzQwNlxuICBpZiAoZS5rZXkgPT09ICdUYWInKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIFxuICAgIGlmIChlLnNoaWZ0S2V5KSB7XG4gICAgICAvLyBTaGlmdCArIFRhYjogXHU1NkRFXHU1MjMwXHU5ODk4XHU5NzYyXG4gICAgICBpZiAodGhpcy5zaG93QW5zd2VyKSB7XG4gICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUYWI6IFx1NjYzRVx1NzkzQVx1N0I1NFx1Njg0OFx1NjIxNlx1NEUwQlx1NEUwMFx1NUYyMFxuICAgICAgaWYgKCF0aGlzLnNob3dBbnN3ZXIpIHtcbiAgICAgICAgdGhpcy5zaG93QW5zd2VyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1NURGMlx1NjYzRVx1NzkzQVx1N0I1NFx1Njg0OCxcdTc2RjRcdTYzQTVcdTYzMDkgXCJHb29kXCIgXHU4QkM0XHU1MjA2XHU4RkRCXHU1MTY1XHU0RTBCXHU0RTAwXHU1RjIwXG4gICAgICAgIHRoaXMuc3VibWl0UmV2aWV3KCdnb29kJyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gICAgXG4gICAgLy8gXHU2NTcwXHU1QjU3XHU5NTJFXHU4QkM0XHU1MjA2XHVGRjA4XHU1M0VBXHU1NzI4XHU2NjNFXHU3OTNBXHU3QjU0XHU2ODQ4XHU0RTE0XHU0RTBEXHU1NzI4XHU4RjkzXHU1MTY1XHU2ODQ2XHU2NUY2XHU2NzA5XHU2NTQ4XHVGRjA5XG4gICAgaWYgKHRoaXMuc2hvd0Fuc3dlcikge1xuICAgICAgY29uc3QgcmF0aW5nTWFwOiB7IFtrZXk6IHN0cmluZ106IFJldmlld0Vhc2UgfSA9IHtcbiAgICAgICAgJzEnOiAnYWdhaW4nLFxuICAgICAgICAnMic6ICdoYXJkJyxcbiAgICAgICAgJzMnOiAnZ29vZCcsXG4gICAgICAgICc0JzogJ2Vhc3knXG4gICAgICB9O1xuICAgICAgXG4gICAgICBpZiAocmF0aW5nTWFwW2Uua2V5XSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuc3VibWl0UmV2aWV3KHJhdGluZ01hcFtlLmtleV0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgXG4gIHByaXZhdGUgcmVnaXN0ZXJLZXlib2FyZEhhbmRsZXJzKCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmtleWJvYXJkSGFuZGxlcik7XG4gIH1cblxuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgIC5yZXZpZXctY29udGFpbmVyIHtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgbWF4LXdpZHRoOiA4MDBweDtcbiAgICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgICB9XG5cbiAgICAgIC8qIFx1N0E3QVx1NzJCNlx1NjAwMSAqL1xuICAgICAgLmVtcHR5LXN0YXRlIHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBwYWRkaW5nOiA0MHB4IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5lbXB0eS1zdGF0ZSBoMiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMS44ZW07XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgIH1cblxuICAgICAgLnN0YXRzLXN1bW1hcnkge1xuICAgICAgICBtYXJnaW46IDIwcHggMDtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICAgIG1heC13aWR0aDogMzAwcHg7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XG4gICAgICB9XG5cbiAgICAgIC8qIFx1OEZEQlx1NUVBNlx1Njc2MSAqL1xuICAgICAgLnByb2dyZXNzLWJhciB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5wcm9ncmVzcy1zdGF0cyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgfVxuXG4gICAgICAucHJvZ3Jlc3MtdGV4dCB7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgICAgfVxuXG4gICAgICAucmVtYWluaW5nLXRleHQge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICB9XG5cbiAgICAgIC5iYXItY29udGFpbmVyIHtcbiAgICAgICAgaGVpZ2h0OiA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgfVxuXG4gICAgICAuYmFyIHtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICB0cmFuc2l0aW9uOiB3aWR0aCAwLjNzIGVhc2U7XG4gICAgICB9XG5cbiAgICAgIC8qIFx1NTM2MVx1NzI0N1x1NTMzQVx1NTdERiAqL1xuICAgICAgLmNhcmQtYXJlYSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgbWluLWhlaWdodDogMzUwcHg7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIH1cblxuICAgICAgLyogXHU1M0YzXHU0RTBBXHU4OUQyXHU2NENEXHU0RjVDXHU2ODBGICovXG4gICAgICAudG9wLWFjdGlvbnMtYmFyIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IDE2cHg7XG4gICAgICAgIHJpZ2h0OiAxNnB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDZweDtcbiAgICAgICAgei1pbmRleDogMTA7XG4gICAgICB9XG5cbiAgICAgIC50b3AtYWN0aW9uLWJ0biB7XG4gICAgICAgIHdpZHRoOiAzMnB4O1xuICAgICAgICBoZWlnaHQ6IDMycHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgfVxuXG4gICAgICAudG9wLWFjdGlvbi1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAuanVtcC1pY29uLWJ0biB7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgfVxuXG4gICAgICAubW9yZS1idG4ge1xuICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDFweDtcbiAgICAgIH1cblxuICAgICAgLyogXHU0RTBCXHU2MkM5XHU4M0RDXHU1MzU1ICovXG4gICAgICAubW9yZS1kcm9wZG93biB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiAzOHB4O1xuICAgICAgICByaWdodDogMDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDEycHggcmdiYSgwLCAwLCAwLCAwLjE1KTtcbiAgICAgICAgbWluLXdpZHRoOiAxNTBweDtcbiAgICAgICAgei1pbmRleDogMTAwO1xuICAgICAgfVxuXG4gICAgICAuZHJvcGRvd24taXRlbSB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxNHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4ycztcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgIH1cblxuICAgICAgLmRyb3Bkb3duLWl0ZW06aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLmRyb3Bkb3duLWl0ZW06Zmlyc3QtY2hpbGQge1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHggNnB4IDAgMDtcbiAgICAgIH1cblxuICAgICAgLmRyb3Bkb3duLWl0ZW06bGFzdC1jaGlsZCB7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDAgMCA2cHggNnB4O1xuICAgICAgfVxuXG4gICAgICAuZGVsZXRlLWl0ZW06aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yLWhvdmVyKTtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkLWluZm8ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XG4gICAgICAgIHBhZGRpbmctYm90dG9tOiAxMnB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBwYWRkaW5nLXJpZ2h0OiA4MHB4O1xuICAgICAgfVxuXG4gICAgICAuY2FyZC10eXBlLCAuY2FyZC1kZWNrIHtcbiAgICAgICAgcGFkZGluZzogM3B4IDEwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICB9XG5cbiAgICAgIC8qIFx1OTVFRVx1OTg5OFx1NTMzQVx1NTdERiAqL1xuICAgICAgLnF1ZXN0aW9uLWFyZWEsIC5hbnN3ZXItYXJlYSB7XG4gICAgICAgIG1hcmdpbjogMTZweCAwO1xuICAgICAgfVxuXG4gICAgICAucXVlc3Rpb24tYXJlYSBoMywgLmFuc3dlci1hcmVhIGgzIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgIH1cblxuICAgICAgLnF1ZXN0aW9uLXRleHQsIC5hbnN3ZXItdGV4dCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMS4yZW07XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgICAgIHBhZGRpbmc6IDE0cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgfVxuXG4gICAgICAvKiBcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdThGOTNcdTUxNjUgKi9cbiAgICAgIC5jbG96ZS1pbnB1dC1hcmVhIHtcbiAgICAgICAgbWFyZ2luOiAxNnB4IDA7XG4gICAgICB9XG5cbiAgICAgIC5jbG96ZS1pbnB1dC1hcmVhIGg0IHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAuaW5wdXQtZ3JvdXAge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtaW5wdXQge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45NWVtO1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtaW5wdXQ6Zm9jdXMge1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIC8qIFFBIFx1NTM2MVx1NzI0N1x1OEY5M1x1NTE2NSAqL1xuICAgICAgLnFhLWlucHV0LWFyZWEge1xuICAgICAgICBtYXJnaW46IDE2cHggMDtcbiAgICAgIH1cblxuICAgICAgLnFhLWlucHV0LWFyZWEgaDQge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICB9XG5cbiAgICAgIC5xYS1pbnB1dCB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBtaW4taGVpZ2h0OiAxMDBweDtcbiAgICAgICAgcGFkZGluZzogMTBweCAxMnB4O1xuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgZm9udC1zaXplOiAwLjk1ZW07XG4gICAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xuICAgICAgICByZXNpemU6IHZlcnRpY2FsO1xuICAgICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgfVxuXG4gICAgICAucWEtaW5wdXQ6Zm9jdXMge1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIC8qIFx1N0I1NFx1Njg0OFx1NUJGOVx1NkJENCAqL1xuICAgICAgLnF1ZXN0aW9uLXJldmlldyB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5LWFsdCk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgIH1cblxuICAgICAgLnF1ZXN0aW9uLXJldmlldyBoNCB7XG4gICAgICAgIG1hcmdpbjogMCAwIDZweCAwO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgfVxuXG4gICAgICAucmV2aWV3LXRleHQge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45NWVtO1xuICAgICAgfVxuXG4gICAgICAuZnVsbC10ZXh0IHtcbiAgICAgICAgZm9udC1zaXplOiAxLjFlbTtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICB9XG5cbiAgICAgIC5hbnN3ZXItY29tcGFyaXNvbiB7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5LWFsdCk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgbWFyZ2luLXRvcDogMTJweDtcbiAgICAgIH1cblxuICAgICAgLmFuc3dlci1jb21wYXJpc29uIGg0IHtcbiAgICAgICAgbWFyZ2luOiAwIDAgOHB4IDA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICB9XG5cbiAgICAgIC5jb21wYXJpc29uLWl0ZW0ge1xuICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgfVxuXG4gICAgICAudXNlci1hbnN3ZXIge1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBwYWRkaW5nOiAycHggNnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgICB9XG5cbiAgICAgIC51c2VyLWFuc3dlci5jb3JyZWN0IHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1zdWNjZXNzLCAjNGNhZjUwKSAhaW1wb3J0YW50O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQsIHdoaXRlKSAhaW1wb3J0YW50O1xuICAgICAgfVxuXG4gICAgICAudXNlci1hbnN3ZXIucGFydGlhbCB7XG4gICAgICAgIGJhY2tncm91bmQ6ICNGRkMwMDAgIWltcG9ydGFudDtcbiAgICAgICAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cbiAgICAgIC51c2VyLWFuc3dlci53cm9uZyB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItZXJyb3IsICNmNDQzMzYpICFpbXBvcnRhbnQ7XG4gICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xuICAgICAgfVxuXG4gICAgICAuY29ycmVjdC1hbnN3ZXIge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuc2ltaWxhcml0eS1pbmZvIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgfVxuXG4gICAgICAvKiBRQSBcdTUzNjFcdTcyNDdcdTVCRjlcdTZCRDRcdTY4MzdcdTVGMEYgKi9cbiAgICAgIC5xYS1jb21wYXJpc29uIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMTJweDtcbiAgICAgIH1cblxuXG4ucWEtY29sdW1ucy1jb250YWluZXIge1xuICBkaXNwbGF5OiBncmlkO1xuICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7XG4gIGdhcDogMTZweDtcbiAgbWFyZ2luLWJvdHRvbTogMTJweDtcbn1cblxuLnFhLWNvbHVtbiB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG59XG5cbi5jb2x1bW4tbGFiZWwge1xuICBtYXJnaW46IDAgMCA4cHggMCAhaW1wb3J0YW50O1xuICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gIGZvbnQtc2l6ZTogMC44NWVtO1xufVxuXG4ucWEtdXNlci1hbnN3ZXIsXG4ucWEtY29ycmVjdC1hbnN3ZXIge1xuICBwYWRkaW5nOiAxMnB4O1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbiAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgZm9udC1zaXplOiAwLjk1ZW07XG4gIGxpbmUtaGVpZ2h0OiAxLjU7XG4gIG1pbi1oZWlnaHQ6IDYwcHg7XG59XG5cbi5xYS1jb3JyZWN0LWFuc3dlciB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbn1cblxuLyogXHU3NkY4XHU0RjNDXHU1RUE2XHU0RkUxXHU2MDZGXHU2NTNFXHU1NzI4XHU0RTI0XHU1MjE3XHU0RTBCXHU2NUI5ICovXG4ucWEtc2ltaWxhcml0eSB7XG4gIG1hcmdpbi10b3A6IDhweDtcbiAgcGFkZGluZzogNnB4O1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBmb250LXNpemU6IDAuODVlbTtcbiAgZ3JpZC1jb2x1bW46IDEgLyAtMTtcbn1cblxuXG5cblxuICAgICAgLnFhLXVzZXItYW5zd2VyLmNvcnJlY3QsXG4gICAgICAudXNlci1hbnN3ZXIuY29ycmVjdC5xYS11c2VyLWFuc3dlcixcbiAgICAgIGRpdi5xYS11c2VyLWFuc3dlci5jb3JyZWN0LFxuICAgICAgZGl2LnVzZXItYW5zd2VyLmNvcnJlY3QucWEtdXNlci1hbnN3ZXIsXG4gICAgICAuY29tcGFyaXNvbi1pdGVtIC5xYS11c2VyLWFuc3dlci5jb3JyZWN0LFxuICAgICAgLmNvbXBhcmlzb24taXRlbSAudXNlci1hbnN3ZXIuY29ycmVjdC5xYS11c2VyLWFuc3dlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItc3VjY2VzcywgIzRjYWY1MCkgIWltcG9ydGFudDtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzRjYWY1MCAhaW1wb3J0YW50O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQsIHdoaXRlKSAhaW1wb3J0YW50O1xuICAgICAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgLnFhLXVzZXItYW5zd2VyLnBhcnRpYWwsXG4gICAgICAudXNlci1hbnN3ZXIucGFydGlhbC5xYS11c2VyLWFuc3dlcixcbiAgICAgIGRpdi5xYS11c2VyLWFuc3dlci5wYXJ0aWFsLFxuICAgICAgZGl2LnVzZXItYW5zd2VyLnBhcnRpYWwucWEtdXNlci1hbnN3ZXIsXG4gICAgICAuY29tcGFyaXNvbi1pdGVtIC5xYS11c2VyLWFuc3dlci5wYXJ0aWFsLFxuICAgICAgLmNvbXBhcmlzb24taXRlbSAudXNlci1hbnN3ZXIucGFydGlhbC5xYS11c2VyLWFuc3dlciB7XG4gICAgICAgIGJhY2tncm91bmQ6ICNGRkMwMDAgIWltcG9ydGFudDtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI0ZGQzAwMCAhaW1wb3J0YW50O1xuICAgICAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgLnFhLXVzZXItYW5zd2VyLndyb25nLFxuICAgICAgLnVzZXItYW5zd2VyLndyb25nLnFhLXVzZXItYW5zd2VyLFxuICAgICAgZGl2LnFhLXVzZXItYW5zd2VyLndyb25nLFxuICAgICAgZGl2LnVzZXItYW5zd2VyLndyb25nLnFhLXVzZXItYW5zd2VyLFxuICAgICAgLmNvbXBhcmlzb24taXRlbSAucWEtdXNlci1hbnN3ZXIud3JvbmcsXG4gICAgICAuY29tcGFyaXNvbi1pdGVtIC51c2VyLWFuc3dlci53cm9uZy5xYS11c2VyLWFuc3dlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItZXJyb3IsICNmNDQzMzYpICFpbXBvcnRhbnQ7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmNDQzMzYgIWltcG9ydGFudDtcbiAgICAgICAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cblxuICAgICAgLmNvcnJlY3QtYW5zd2VyLWxhYmVsIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMTJweCAhaW1wb3J0YW50O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHggIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgLnFhLXNpbWlsYXJpdHkge1xuICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICB9XG5cbiAgICAgIC8qIFx1NjMwOVx1OTRBRVx1NTMzQVx1NTdERiAqL1xuICAgICAgLmJ1dHRvbi1hcmVhIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiAxMnB4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgIH1cblxuICAgICAgLnNob3ctYW5zd2VyLWJ0biB7XG4gICAgICAgIHBhZGRpbmc6IDEwcHggMzJweDtcbiAgICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgICB9XG5cbiAgICAgIC8qIFx1OEJDNFx1N0VBN1x1NTMzQVx1NTdERiAqL1xuICAgICAgLnJhdGluZy1hcmVhIHtcbiAgICAgICAgbWFyZ2luOiAxNXB4IDAgMTBweCAwO1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbmctYXJlYSBoNCB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgIH1cblxuICAgICAgLnJhdGluZy1idXR0b25zIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiAyMHB4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMDtcbiAgICAgIH1cblxuICAgICAgLnJhdGluZy1idG4ge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBtYXgtd2lkdGg6IDEyMHB4O1xuICAgICAgICBoaWdodDoxMDBweDtcbiAgICAgICAgcGFkZGluZzogMTRweCA4cHg7XG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLWJ0bjpob3ZlciB7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTtcbiAgICAgICAgYm94LXNoYWRvdzogMCAzcHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbmctcmVkOmhvdmVyIHsgXG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbmctb3JhbmdlOmhvdmVyIHsgXG4gICAgICAgIGJvcmRlci1jb2xvcjogI0ZGQzAwMDtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDE5MiwgMCwgMC4xKTtcbiAgICAgIH1cblxuICAgICAgLnJhdGluZy1ibHVlOmhvdmVyIHsgXG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbmctZ3JlZW46aG92ZXIgeyBcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1ncmVlbik7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItc3VjY2Vzcy1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbmctbGFiZWwge1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLWludGVydmFsIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cbiAgICAgICAgLyogXHU1RkVCXHU2Mzc3XHU5NTJFXHU2M0QwXHU3OTNBICovXG4ucmF0aW5nLWhvdGtleSB7XG4gIGZvbnQtc2l6ZTogMC43NWVtO1xuICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gIG1hcmdpbi10b3A6IDRweDtcbiAgb3BhY2l0eTogMC43O1xufVxuXG4ucmF0aW5nLWJ0bjpob3ZlciAucmF0aW5nLWhvdGtleSB7XG4gIG9wYWNpdHk6IDE7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG59XG5cbi8qIFNob3cgQW5zd2VyIFx1NjMwOVx1OTRBRSB0b29sdGlwICovXG4uc2hvdy1hbnN3ZXItYnRuIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuICAuY2xvemUtaW5wdXQ6Zm9jdXMsXG4ucWEtaW5wdXQ6Zm9jdXMge1xuICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gIG91dGxpbmU6IG5vbmU7XG4gIGJveC1zaGFkb3c6IDAgMCAwIDJweCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQtaG92ZXIpO1xufVxuICAvKiBcdTY1RTBcdTdCNTRcdTY4NDhcdTcyQjZcdTYwMDEgKi9cbi5xYS11c2VyLWFuc3dlci5uby1hbnN3ZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgZm9udC1zdHlsZTogaXRhbGljO1xuICBib3JkZXI6IDJweCBkYXNoZWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xufVxuICAgIGA7XG5cbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICB9XG59IiwgImltcG9ydCB7IEZsYXNoY2FyZCwgUmV2aWV3TG9nIH0gZnJvbSAnLi9GbGFzaGNhcmRNYW5hZ2VyJztcblxuZXhwb3J0IHR5cGUgUmV2aWV3RWFzZSA9ICdhZ2FpbicgfCAnaGFyZCcgfCAnZ29vZCcgfCAnZWFzeSc7XG5cbmV4cG9ydCBjbGFzcyBDYXJkU2NoZWR1bGVyIHtcbiAgLyoqXG4gICAqIFx1OEJBMVx1N0I5N1x1NEUwQlx1NkIyMVx1NTkwRFx1NEU2MFx1NjVGNlx1OTVGNFx1RkYwOFx1NTdGQVx1NEU4RSBTTS0yIFx1N0I5N1x1NkNENVx1RkYwOVxuICAgKi9cbiAgc2NoZWR1bGUoXG4gICAgY2FyZDogRmxhc2hjYXJkLFxuICAgIGVhc2U6IFJldmlld0Vhc2UsXG4gICAgdGltZVNwZW50OiBudW1iZXIsXG4gICAgdXNlckFuc3dlcj86IHN0cmluZyB8IHN0cmluZ1tdXG4gICk6IHtcbiAgICB1cGRhdGVkQ2FyZDogRmxhc2hjYXJkO1xuICAgIHJldmlld0xvZzogT21pdDxSZXZpZXdMb2csICdpZCc+O1xuICB9IHtcbiAgICBjb25zdCBvbGRTY2hlZHVsaW5nID0geyAuLi5jYXJkLnNjaGVkdWxpbmcgfTtcbiAgICBjb25zdCBuZXdTY2hlZHVsaW5nID0geyAuLi5jYXJkLnNjaGVkdWxpbmcgfTtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU3RURGXHU4QkExXG4gICAgY2FyZC5zdGF0cy50b3RhbFJldmlld3MrKztcbiAgICBjYXJkLnN0YXRzLmxhc3RSZXZpZXcgPSBub3c7XG5cbiAgICAvLyBcdThCQTFcdTdCOTdcdTVFNzNcdTU3NDdcdTY1RjZcdTk1RjRcbiAgICBjb25zdCB0b3RhbFRpbWUgPSBjYXJkLnN0YXRzLmF2ZXJhZ2VUaW1lICogKGNhcmQuc3RhdHMudG90YWxSZXZpZXdzIC0gMSkgKyB0aW1lU3BlbnQ7XG4gICAgY2FyZC5zdGF0cy5hdmVyYWdlVGltZSA9IHRvdGFsVGltZSAvIGNhcmQuc3RhdHMudG90YWxSZXZpZXdzO1xuXG4gICAgLy8gXHU2ODM5XHU2MzZFXHU5NkJFXHU1RUE2XHU4QkM0XHU3RUE3XHU2NkY0XHU2NUIwXHU4QzAzXHU1RUE2XG4gICAgc3dpdGNoIChlYXNlKSB7XG4gICAgICBjYXNlICdhZ2Fpbic6XG4gICAgICAgIHRoaXMuc2NoZWR1bGVBZ2FpbihuZXdTY2hlZHVsaW5nLCBjYXJkLnN0YXRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdoYXJkJzpcbiAgICAgICAgdGhpcy5zY2hlZHVsZUhhcmQobmV3U2NoZWR1bGluZywgY2FyZC5zdGF0cyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZ29vZCc6XG4gICAgICAgIHRoaXMuc2NoZWR1bGVHb29kKG5ld1NjaGVkdWxpbmcsIGNhcmQuc3RhdHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Vhc3knOlxuICAgICAgICB0aGlzLnNjaGVkdWxlRWFzeShuZXdTY2hlZHVsaW5nLCBjYXJkLnN0YXRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgY2FyZC5zY2hlZHVsaW5nID0gbmV3U2NoZWR1bGluZztcbiAgICBjYXJkLm1ldGFkYXRhLnVwZGF0ZWRBdCA9IG5vdztcblxuICAgIC8vIFx1NTIxQlx1NUVGQVx1NTkwRFx1NEU2MFx1NjVFNVx1NUZEN1xuICAgIGNvbnN0IHJldmlld0xvZzogT21pdDxSZXZpZXdMb2csICdpZCc+ID0ge1xuICAgICAgZmxhc2hjYXJkSWQ6IGNhcmQuaWQsXG4gICAgICB0aW1lc3RhbXA6IG5vdyxcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIHVzZXJBbnN3ZXIsXG4gICAgICAgIHRpbWVTcGVudCxcbiAgICAgICAgZWFzZVxuICAgICAgfSxcbiAgICAgIHNjaGVkdWxpbmdDaGFuZ2U6IHtcbiAgICAgICAgb2xkSW50ZXJ2YWw6IG9sZFNjaGVkdWxpbmcuaW50ZXJ2YWwsXG4gICAgICAgIG5ld0ludGVydmFsOiBuZXdTY2hlZHVsaW5nLmludGVydmFsLFxuICAgICAgICBvbGRFYXNlOiBvbGRTY2hlZHVsaW5nLmVhc2UsXG4gICAgICAgIG5ld0Vhc2U6IG5ld1NjaGVkdWxpbmcuZWFzZVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4geyB1cGRhdGVkQ2FyZDogY2FyZCwgcmV2aWV3TG9nIH07XG4gIH1cblxuICAvKipcbiAgICogQWdhaW4gLSBcdTVCOENcdTUxNjhcdTVGRDhcdThCQjBcbiAgICovXG4gIHByaXZhdGUgc2NoZWR1bGVBZ2FpbihcbiAgICBzY2hlZHVsaW5nOiBGbGFzaGNhcmRbJ3NjaGVkdWxpbmcnXSxcbiAgICBzdGF0czogRmxhc2hjYXJkWydzdGF0cyddXG4gICkge1xuICAgIC8vIFx1OTFDRFx1N0Y2RVx1OTVGNFx1OTY5NFxuICAgIHNjaGVkdWxpbmcuaW50ZXJ2YWwgPSAxOyAvLyAxIFx1NTIwNlx1OTQ5RlxuICAgIHNjaGVkdWxpbmcuZWFzZSA9IE1hdGgubWF4KDEuMywgc2NoZWR1bGluZy5lYXNlIC0gMC4yKTtcbiAgICBzY2hlZHVsaW5nLmR1ZSA9IERhdGUubm93KCkgKyBzY2hlZHVsaW5nLmludGVydmFsICogNjAgKiAxMDAwO1xuICAgIHNjaGVkdWxpbmcubGFwc2VzKys7XG4gICAgc2NoZWR1bGluZy5yZXBzKys7XG4gICAgXG4gICAgLy8gXHU3MkI2XHU2MDAxXHU4RjZDXHU2MzYyXG4gICAgaWYgKHNjaGVkdWxpbmcuc3RhdGUgPT09ICduZXcnKSB7XG4gICAgICBzY2hlZHVsaW5nLnN0YXRlID0gJ2xlYXJuaW5nJztcbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdyZWxlYXJuaW5nJztcbiAgICB9XG5cbiAgICAvLyBcdTU4OUVcdTUyQTBcdTk2QkVcdTVFQTZcbiAgICBzdGF0cy5kaWZmaWN1bHR5ID0gTWF0aC5taW4oMS4wLCBzdGF0cy5kaWZmaWN1bHR5ICsgMC4xKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYXJkIC0gXHU1NkYwXHU5NkJFXG4gICAqL1xuICBwcml2YXRlIHNjaGVkdWxlSGFyZChcbiAgICBzY2hlZHVsaW5nOiBGbGFzaGNhcmRbJ3NjaGVkdWxpbmcnXSxcbiAgICBzdGF0czogRmxhc2hjYXJkWydzdGF0cyddXG4gICkge1xuICAgIHNjaGVkdWxpbmcucmVwcysrO1xuXG4gICAgaWYgKHNjaGVkdWxpbmcuc3RhdGUgPT09ICduZXcnIHx8IHNjaGVkdWxpbmcuc3RhdGUgPT09ICdsZWFybmluZycpIHtcbiAgICAgIC8vIFx1NUI2Nlx1NEU2MFx1OTYzNlx1NkJCNVx1RkYxQTEwIFx1NTIwNlx1OTQ5RlxuICAgICAgc2NoZWR1bGluZy5pbnRlcnZhbCA9IDEwO1xuICAgICAgc2NoZWR1bGluZy5kdWUgPSBEYXRlLm5vdygpICsgMTAgKiA2MCAqIDEwMDA7XG4gICAgICBzY2hlZHVsaW5nLnN0YXRlID0gJ2xlYXJuaW5nJztcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU1OTBEXHU0RTYwXHU5NjM2XHU2QkI1XHVGRjFBXHU1RjUzXHU1MjREXHU5NUY0XHU5Njk0ICogMS4yXG4gICAgICBzY2hlZHVsaW5nLmludGVydmFsID0gTWF0aC5tYXgoMSwgc2NoZWR1bGluZy5pbnRlcnZhbCAqIDEuMik7XG4gICAgICBzY2hlZHVsaW5nLmVhc2UgPSBNYXRoLm1heCgxLjMsIHNjaGVkdWxpbmcuZWFzZSAtIDAuMTUpO1xuICAgICAgc2NoZWR1bGluZy5kdWUgPSBEYXRlLm5vdygpICsgc2NoZWR1bGluZy5pbnRlcnZhbCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gICAgICBzY2hlZHVsaW5nLnN0YXRlID0gJ3Jldmlldyc7XG4gICAgfVxuXG4gICAgc3RhdHMuZGlmZmljdWx0eSA9IE1hdGgubWluKDEuMCwgc3RhdHMuZGlmZmljdWx0eSArIDAuMDUpO1xuICAgIHN0YXRzLmNvcnJlY3RDb3VudCArPSAwLjU7IC8vIFx1OTBFOFx1NTIwNlx1NkI2M1x1Nzg2RVxuICB9XG5cbiAgLyoqXG4gICAqIEdvb2QgLSBcdTZCNjNcdTc4NkVcbiAgICovXG4gIHByaXZhdGUgc2NoZWR1bGVHb29kKFxuICAgIHNjaGVkdWxpbmc6IEZsYXNoY2FyZFsnc2NoZWR1bGluZyddLFxuICAgIHN0YXRzOiBGbGFzaGNhcmRbJ3N0YXRzJ11cbiAgKSB7XG4gICAgc2NoZWR1bGluZy5yZXBzKys7XG4gICAgc3RhdHMuY29ycmVjdENvdW50Kys7XG5cbiAgICBpZiAoc2NoZWR1bGluZy5zdGF0ZSA9PT0gJ25ldycpIHtcbiAgICAgIC8vIFx1NjVCMFx1NTM2MVx1NzI0N1x1RkYxQTEgXHU1OTI5XG4gICAgICBzY2hlZHVsaW5nLmludGVydmFsID0gMTtcbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIDEgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdsZWFybmluZyc7XG4gICAgfSBlbHNlIGlmIChzY2hlZHVsaW5nLnN0YXRlID09PSAnbGVhcm5pbmcnKSB7XG4gICAgICAvLyBcdTVCNjZcdTRFNjBcdTRFMkRcdUZGMUFcdThGREJcdTUxNjVcdTU5MERcdTRFNjBcdUZGMENcdTk1RjRcdTk2OTRcdTY4MzlcdTYzNkVcdThCQjBcdTVGQzZcdTVGM0FcdTVFQTZcbiAgICAgIGlmIChzY2hlZHVsaW5nLmludGVydmFsIDwgMSkge1xuICAgICAgICBzY2hlZHVsaW5nLmludGVydmFsID0gMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNjaGVkdWxpbmcuaW50ZXJ2YWwgPSAzO1xuICAgICAgfVxuICAgICAgc2NoZWR1bGluZy5kdWUgPSBEYXRlLm5vdygpICsgc2NoZWR1bGluZy5pbnRlcnZhbCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gICAgICBzY2hlZHVsaW5nLnN0YXRlID0gJ3Jldmlldyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NTkwRFx1NEU2MFx1OTYzNlx1NkJCNVx1RkYxQVx1OTVGNFx1OTY5NCAqIGVhc2VcbiAgICAgIHNjaGVkdWxpbmcuaW50ZXJ2YWwgPSBzY2hlZHVsaW5nLmludGVydmFsICogc2NoZWR1bGluZy5lYXNlO1xuICAgICAgc2NoZWR1bGluZy5kdWUgPSBEYXRlLm5vdygpICsgc2NoZWR1bGluZy5pbnRlcnZhbCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gICAgICBzY2hlZHVsaW5nLmVhc2UgPSBzY2hlZHVsaW5nLmVhc2UgKyAwLjE7XG4gICAgICBzY2hlZHVsaW5nLnN0YXRlID0gJ3Jldmlldyc7XG4gICAgfVxuXG4gICAgLy8gXHU5NjREXHU0RjRFXHU5NkJFXHU1RUE2XG4gICAgc3RhdHMuZGlmZmljdWx0eSA9IE1hdGgubWF4KDAsIHN0YXRzLmRpZmZpY3VsdHkgLSAwLjA1KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFYXN5IC0gXHU5NzVFXHU1RTM4XHU3QjgwXHU1MzU1XG4gICAqL1xuICBwcml2YXRlIHNjaGVkdWxlRWFzeShcbiAgICBzY2hlZHVsaW5nOiBGbGFzaGNhcmRbJ3NjaGVkdWxpbmcnXSxcbiAgICBzdGF0czogRmxhc2hjYXJkWydzdGF0cyddXG4gICkge1xuICAgIHNjaGVkdWxpbmcucmVwcysrO1xuICAgIHN0YXRzLmNvcnJlY3RDb3VudCsrO1xuXG4gICAgaWYgKHNjaGVkdWxpbmcuc3RhdGUgPT09ICduZXcnKSB7XG4gICAgICAvLyBcdTY1QjBcdTUzNjFcdTcyNDdcdUZGMUFcdTc2RjRcdTYzQTUgNCBcdTU5MjlcbiAgICAgIHNjaGVkdWxpbmcuaW50ZXJ2YWwgPSA0O1xuICAgICAgc2NoZWR1bGluZy5kdWUgPSBEYXRlLm5vdygpICsgNCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gICAgICBzY2hlZHVsaW5nLnN0YXRlID0gJ3Jldmlldyc7XG4gICAgfSBlbHNlIGlmIChzY2hlZHVsaW5nLnN0YXRlID09PSAnbGVhcm5pbmcnKSB7XG4gICAgICAvLyBcdTVCNjZcdTRFNjBcdTRFMkRcdUZGMUFcdTc2RjRcdTYzQTVcdThGREJcdTUxNjVcdTU5MERcdTRFNjBcdUZGMEM3IFx1NTkyOVxuICAgICAgc2NoZWR1bGluZy5pbnRlcnZhbCA9IDc7XG4gICAgICBzY2hlZHVsaW5nLmR1ZSA9IERhdGUubm93KCkgKyA3ICogMjQgKiA2MCAqIDYwICogMTAwMDtcbiAgICAgIHNjaGVkdWxpbmcuc3RhdGUgPSAncmV2aWV3JztcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU1OTBEXHU0RTYwXHU5NjM2XHU2QkI1XHVGRjFBXHU5NUY0XHU5Njk0ICogKGVhc2UgKyAwLjMpXG4gICAgICBzY2hlZHVsaW5nLmludGVydmFsID0gc2NoZWR1bGluZy5pbnRlcnZhbCAqIChzY2hlZHVsaW5nLmVhc2UgKyAwLjMpO1xuICAgICAgc2NoZWR1bGluZy5kdWUgPSBEYXRlLm5vdygpICsgc2NoZWR1bGluZy5pbnRlcnZhbCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gICAgICBzY2hlZHVsaW5nLmVhc2UgPSBzY2hlZHVsaW5nLmVhc2UgKyAwLjE1O1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdyZXZpZXcnO1xuICAgIH1cblxuICAgIC8vIFx1NjYzRVx1ODQ1N1x1OTY0RFx1NEY0RVx1OTZCRVx1NUVBNlxuICAgIHN0YXRzLmRpZmZpY3VsdHkgPSBNYXRoLm1heCgwLCBzdGF0cy5kaWZmaWN1bHR5IC0gMC4xKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdThCQzRcdTRGMzBcdTc1MjhcdTYyMzdcdTdCNTRcdTY4NDhcdUZGMDhcdTc1MjhcdTRFOEVcdThGOTNcdTUxNjVcdTdCNTRcdTY4NDhcdTZBMjFcdTVGMEZcdUZGMDlcbiAgICovXG4gIGV2YWx1YXRlQW5zd2VyKFxuICAgIGNvcnJlY3RBbnN3ZXI6IHN0cmluZyB8IHN0cmluZ1tdLFxuICAgIHVzZXJBbnN3ZXI6IHN0cmluZyB8IHN0cmluZ1tdXG4gICk6IHtcbiAgICBjb3JyZWN0bmVzczogJ2NvcnJlY3QnIHwgJ3BhcnRpYWwnIHwgJ3dyb25nJztcbiAgICBzaW1pbGFyaXR5OiBudW1iZXI7XG4gIH0ge1xuICAgIC8vIFx1NTkwNFx1NzQwNlx1NjU3MFx1N0VDNFx1RkYwOFx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1RkYwOVxuICAgIGlmIChBcnJheS5pc0FycmF5KGNvcnJlY3RBbnN3ZXIpICYmIEFycmF5LmlzQXJyYXkodXNlckFuc3dlcikpIHtcbiAgICAgIGxldCBjb3JyZWN0Q291bnQgPSAwO1xuICAgICAgY29uc3QgdG90YWwgPSBjb3JyZWN0QW5zd2VyLmxlbmd0aDtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHNpbWlsYXJpdHkgPSB0aGlzLmNhbGN1bGF0ZVNpbWlsYXJpdHkoXG4gICAgICAgICAgdGhpcy5ub3JtYWxpemUoY29ycmVjdEFuc3dlcltpXSksXG4gICAgICAgICAgdGhpcy5ub3JtYWxpemUodXNlckFuc3dlcltpXSB8fCAnJylcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHNpbWlsYXJpdHkgPj0gMC45KSBjb3JyZWN0Q291bnQrKztcbiAgICAgICAgZWxzZSBpZiAoc2ltaWxhcml0eSA+PSAwLjYpIGNvcnJlY3RDb3VudCArPSAwLjU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG92ZXJhbGxTaW1pbGFyaXR5ID0gY29ycmVjdENvdW50IC8gdG90YWw7XG5cbiAgICAgIGlmIChvdmVyYWxsU2ltaWxhcml0eSA+PSAwLjkpIHtcbiAgICAgICAgcmV0dXJuIHsgY29ycmVjdG5lc3M6ICdjb3JyZWN0Jywgc2ltaWxhcml0eTogb3ZlcmFsbFNpbWlsYXJpdHkgfTtcbiAgICAgIH0gZWxzZSBpZiAob3ZlcmFsbFNpbWlsYXJpdHkgPj0gMC42KSB7XG4gICAgICAgIHJldHVybiB7IGNvcnJlY3RuZXNzOiAncGFydGlhbCcsIHNpbWlsYXJpdHk6IG92ZXJhbGxTaW1pbGFyaXR5IH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4geyBjb3JyZWN0bmVzczogJ3dyb25nJywgc2ltaWxhcml0eTogb3ZlcmFsbFNpbWlsYXJpdHkgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTU5MDRcdTc0MDZcdTVCNTdcdTdCMjZcdTRFMzJcbiAgICBjb25zdCBjb3JyZWN0ID0gdGhpcy5ub3JtYWxpemUoY29ycmVjdEFuc3dlciBhcyBzdHJpbmcpO1xuICAgIGNvbnN0IHVzZXIgPSB0aGlzLm5vcm1hbGl6ZSh1c2VyQW5zd2VyIGFzIHN0cmluZyk7XG5cbiAgICAvLyBcdTdBN0FcdTdCNTRcdTY4NDhcbiAgICBpZiAodXNlci5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB7IGNvcnJlY3RuZXNzOiAnd3JvbmcnLCBzaW1pbGFyaXR5OiAwIH07XG4gICAgfVxuXG4gICAgLy8gXHU5NTdGXHU1RUE2XHU1REVFXHU1RjAyXHU4RkM3XHU1OTI3XHU3NkY0XHU2M0E1XHU1MjI0XHU5NTE5XG4gICAgY29uc3QgbGVuZ3RoUmF0aW8gPSBNYXRoLm1pbih1c2VyLmxlbmd0aCwgY29ycmVjdC5sZW5ndGgpIC8gTWF0aC5tYXgodXNlci5sZW5ndGgsIGNvcnJlY3QubGVuZ3RoKTtcbiAgICBpZiAobGVuZ3RoUmF0aW8gPCAwLjMpIHtcblxuICAgICAgcmV0dXJuIHsgY29ycmVjdG5lc3M6ICd3cm9uZycsIHNpbWlsYXJpdHk6IDAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBzaW1pbGFyaXR5ID0gdGhpcy5jYWxjdWxhdGVTaW1pbGFyaXR5KGNvcnJlY3QsIHVzZXIpO1xuXG5cblxuICAgIGlmIChzaW1pbGFyaXR5ID49IDAuOSkge1xuICAgICAgcmV0dXJuIHsgY29ycmVjdG5lc3M6ICdjb3JyZWN0Jywgc2ltaWxhcml0eSB9O1xuICAgIH0gZWxzZSBpZiAoc2ltaWxhcml0eSA+PSAwLjcpIHtcbiAgICAgIHJldHVybiB7IGNvcnJlY3RuZXNzOiAncGFydGlhbCcsIHNpbWlsYXJpdHkgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHsgY29ycmVjdG5lc3M6ICd3cm9uZycsIHNpbWlsYXJpdHkgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU2ODA3XHU1MUM2XHU1MzE2XHU2NTg3XHU2NzJDXG4gICAqL1xuICBwcml2YXRlIG5vcm1hbGl6ZSh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0ZXh0XG4gICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgLnRyaW0oKVxuICAgICAgLnJlcGxhY2UoL1xccysvZywgJyAnKSAgICAvLyBcdTU0MDhcdTVFNzZcdTU5MUFcdTRFMkFcdTdBN0FcdTY4M0NcdTRFM0FcdTRFMDBcdTRFMkFcbiAgICAgIC5yZXBsYWNlKC9cXG4rL2csICcgJykgICAgLy8gXHU2MzYyXHU4ODRDXHU2NkZGXHU2MzYyXHU0RTNBXHU3QTdBXHU2ODNDXG4gICAgICAucmVwbGFjZSgvW1x1RkYwQ1x1MzAwMlx1RkYwMVx1RkYxRlx1MzAwMVx1RkYxQlx1RkYxQVwiXCInJ1x1RkYwOFx1RkYwOVx1MzAwQVx1MzAwQlx1MzAxMFx1MzAxMVxcLiwhPzs6XCInKClcXFtcXF17fV0vZywgJycpOyAgLy8gXHU3OUZCXHU5NjY0XHU2ODA3XHU3MEI5XHU3QjI2XHU1M0Y3XG4gIH1cblxuICAvKipcbiAgICogXHU4QkExXHU3Qjk3XHU3NkY4XHU0RjNDXHU1RUE2XHVGRjA4TGV2ZW5zaHRlaW4gXHU4REREXHU3OUJCXHVGRjA5XG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZVNpbWlsYXJpdHkoc3RyMTogc3RyaW5nLCBzdHIyOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGlmIChzdHIxID09PSBzdHIyKSByZXR1cm4gMTtcbiAgICBpZiAoc3RyMS5sZW5ndGggPT09IDAgfHwgc3RyMi5sZW5ndGggPT09IDApIHJldHVybiAwO1xuXG4gICAgY29uc3QgbWF0cml4OiBudW1iZXJbXVtdID0gW107XG5cbiAgICAvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdTc3RTlcdTk2MzVcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBzdHIyLmxlbmd0aDsgaSsrKSB7XG4gICAgICBtYXRyaXhbaV0gPSBbaV07XG4gICAgfVxuICAgIGZvciAobGV0IGogPSAwOyBqIDw9IHN0cjEubGVuZ3RoOyBqKyspIHtcbiAgICAgIG1hdHJpeFswXVtqXSA9IGo7XG4gICAgfVxuXG4gICAgLy8gXHU1ODZCXHU1MTQ1XHU3N0U5XHU5NjM1XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gc3RyMi5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDE7IGogPD0gc3RyMS5sZW5ndGg7IGorKykge1xuICAgICAgICBpZiAoc3RyMi5jaGFyQXQoaSAtIDEpID09PSBzdHIxLmNoYXJBdChqIC0gMSkpIHtcbiAgICAgICAgICBtYXRyaXhbaV1bal0gPSBtYXRyaXhbaSAtIDFdW2ogLSAxXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtYXRyaXhbaV1bal0gPSBNYXRoLm1pbihcbiAgICAgICAgICAgIG1hdHJpeFtpIC0gMV1baiAtIDFdICsgMSwgLy8gXHU2NkZGXHU2MzYyXG4gICAgICAgICAgICBtYXRyaXhbaV1baiAtIDFdICsgMSwgICAgIC8vIFx1NjNEMlx1NTE2NVxuICAgICAgICAgICAgbWF0cml4W2kgLSAxXVtqXSArIDEgICAgICAvLyBcdTUyMjBcdTk2NjRcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZGlzdGFuY2UgPSBtYXRyaXhbc3RyMi5sZW5ndGhdW3N0cjEubGVuZ3RoXTtcbiAgICBjb25zdCBtYXhMZW5ndGggPSBNYXRoLm1heChzdHIxLmxlbmd0aCwgc3RyMi5sZW5ndGgpO1xuICAgIFxuICAgIHJldHVybiAxIC0gZGlzdGFuY2UgLyBtYXhMZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogXHU2ODM5XHU2MzZFXHU3NkY4XHU0RjNDXHU1RUE2XHU1RUZBXHU4QkFFXHU5NkJFXHU1RUE2XG4gICAqL1xuICBzdWdnZXN0RWFzZShzaW1pbGFyaXR5OiBudW1iZXIpOiBSZXZpZXdFYXNlIHtcbiAgICBpZiAoc2ltaWxhcml0eSA+PSAwLjkpIHJldHVybiAnZWFzeSc7XG4gICAgaWYgKHNpbWlsYXJpdHkgPj0gMC44KSByZXR1cm4gJ2dvb2QnO1xuICAgIGlmIChzaW1pbGFyaXR5ID49IDAuNSkgcmV0dXJuICdoYXJkJztcbiAgICByZXR1cm4gJ2FnYWluJztcbiAgfVxufSIsICJpbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgVEZpbGUsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIExlYXJuaW5nU3lzdGVtUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgQW5hbHl0aWNzRW5naW5lIH0gZnJvbSAnLi4vY29yZS9BbmFseXRpY3NFbmdpbmUnO1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX1NUQVRTID0gJ2xlYXJuaW5nLXN5c3RlbS1zdGF0cyc7XG5cbmV4cG9ydCBjbGFzcyBTdGF0c1ZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW47XG4gIHByaXZhdGUgYW5hbHl0aWNzOiBBbmFseXRpY3NFbmdpbmU7XG4gIHByaXZhdGUgY3VycmVudFRhYjogJ292ZXJ2aWV3JyB8ICd0cmVuZHMnIHwgJ2RlY2tzJyB8ICdkaWZmaWN1bHQnID0gJ292ZXJ2aWV3JztcblxuICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luKSB7XG4gICAgc3VwZXIobGVhZik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy5hbmFseXRpY3MgPSBuZXcgQW5hbHl0aWNzRW5naW5lKHBsdWdpbik7XG4gIH1cblxuICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBWSUVXX1RZUEVfU1RBVFM7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnTGVhcm5pbmcgU3RhdGlzdGljcyc7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdiYXItY2hhcnQnO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIHRoaXMucmVuZGVyKCk7XG4gICAgdGhpcy5hZGRTdHlsZXMoKTtcbiAgfVxuXG4gIGFzeW5jIG9uQ2xvc2UoKSB7fVxuXG4gIHByaXZhdGUgcmVuZGVyKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgY29udGFpbmVyLmFkZENsYXNzKCdzdGF0cy1jb250YWluZXInKTtcblxuICAgIC8vIFx1NjgwN1x1OTg5OFx1NjgwRlxuICAgIGNvbnN0IGhlYWRlciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzdGF0cy1oZWFkZXInIH0pO1xuICAgIGhlYWRlci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUQ4M0RcdURDQ0EgTGVhcm5pbmcgU3RhdGlzdGljcycgfSk7XG5cbiAgICAvLyBcdTUyMzdcdTY1QjBcdTYzMDlcdTk0QUVcbiAgICBjb25zdCByZWZyZXNoQnRuID0gaGVhZGVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnXHUyN0YzJyxcbiAgICAgIGNsczogJ3JlZnJlc2gtYnRuJ1xuICAgIH0pO1xuICAgIHJlZnJlc2hCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnJlbmRlcigpKTtcblxuICAgIC8vIFx1NjgwN1x1N0I3RVx1OTg3NVxuICAgIHRoaXMucmVuZGVyVGFicyhjb250YWluZXIpO1xuXG4gICAgLy8gXHU1MTg1XHU1QkI5XHU1MzNBXHU1N0RGXG4gICAgY29uc3QgY29udGVudCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzdGF0cy1jb250ZW50JyB9KTtcblxuICAgIHN3aXRjaCAodGhpcy5jdXJyZW50VGFiKSB7XG4gICAgICBjYXNlICdvdmVydmlldyc6XG4gICAgICAgIHRoaXMucmVuZGVyT3ZlcnZpZXcoY29udGVudCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndHJlbmRzJzpcbiAgICAgICAgdGhpcy5yZW5kZXJUcmVuZHMoY29udGVudCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZGVja3MnOlxuICAgICAgICB0aGlzLnJlbmRlckRlY2tzKGNvbnRlbnQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2RpZmZpY3VsdCc6XG4gICAgICAgIHRoaXMucmVuZGVyRGlmZmljdWx0KGNvbnRlbnQpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclRhYnMoY29udGFpbmVyOiBFbGVtZW50KSB7XG4gICAgY29uc3QgdGFicyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzdGF0cy10YWJzJyB9KTtcblxuICAgIGNvbnN0IHRhYkNvbmZpZ3MgPSBbXG4gICAgICB7IGlkOiAnb3ZlcnZpZXcnLCBsYWJlbDogJ1x1RDgzRFx1RENDQSBPdmVydmlldycgfSxcbiAgICAgIHsgaWQ6ICd0cmVuZHMnLCBsYWJlbDogJ1x1RDgzRFx1RENDOCBUcmVuZHMnIH0sXG4gICAgICB7IGlkOiAnZGVja3MnLCBsYWJlbDogJ1x1RDgzRFx1RENEQSBEZWNrcycgfSxcbiAgICAgIHsgaWQ6ICdkaWZmaWN1bHQnLCBsYWJlbDogJ1x1MjZBMFx1RkUwRiBEaWZmaWN1bHQnIH1cbiAgICBdO1xuXG4gICAgdGFiQ29uZmlncy5mb3JFYWNoKGNvbmZpZyA9PiB7XG4gICAgICBjb25zdCB0YWIgPSB0YWJzLmNyZWF0ZURpdih7XG4gICAgICAgIGNsczogYHRhYiAke3RoaXMuY3VycmVudFRhYiA9PT0gY29uZmlnLmlkID8gJ2FjdGl2ZScgOiAnJ31gXG4gICAgICB9KTtcbiAgICAgIHRhYi50ZXh0Q29udGVudCA9IGNvbmZpZy5sYWJlbDtcbiAgICAgIHRhYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5jdXJyZW50VGFiID0gY29uZmlnLmlkIGFzIGFueTtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJPdmVydmlldyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3Qgc3RhdHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldFN0YXRzKCk7XG4gICAgY29uc3QgeyB0aGlzV2VlaywgbGFzdFdlZWsgfSA9IHRoaXMuYW5hbHl0aWNzLmdldFdlZWtseVN0YXRzKCk7XG4gICAgY29uc3QgZGFpbHlTdGF0cyA9IHRoaXMuYW5hbHl0aWNzLmdldERhaWx5U3RhdHMoNyk7XG5cbiAgICAvLyBcdTUxNzNcdTk1MkVcdTYzMDdcdTY4MDdcdTUzNjFcdTcyNDdcbiAgICBjb25zdCBtZXRyaWNzR3JpZCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdtZXRyaWNzLWdyaWQnIH0pO1xuXG4gICAgdGhpcy5jcmVhdGVNZXRyaWNDYXJkKG1ldHJpY3NHcmlkLCB7XG4gICAgICB0aXRsZTogJ1RvdGFsIENhcmRzJyxcbiAgICAgIHZhbHVlOiBzdGF0cy50b3RhbC50b1N0cmluZygpLFxuICAgICAgaWNvbjogJ1x1RDgzQ1x1RENDRidcbiAgICB9KTtcblxuICAgIHRoaXMuY3JlYXRlTWV0cmljQ2FyZChtZXRyaWNzR3JpZCwge1xuICAgICAgdGl0bGU6ICdEdWUgVG9kYXknLFxuICAgICAgdmFsdWU6IHN0YXRzLmR1ZS50b1N0cmluZygpLFxuICAgICAgaWNvbjogJ1x1RDgzRFx1RENDNSdcbiAgICB9KTtcblxuICAgIHRoaXMuY3JlYXRlTWV0cmljQ2FyZChtZXRyaWNzR3JpZCwge1xuICAgICAgdGl0bGU6ICdSZXZpZXdlZCBUb2RheScsXG4gICAgICB2YWx1ZTogc3RhdHMucmV2aWV3ZWRUb2RheS50b1N0cmluZygpLFxuICAgICAgaWNvbjogJ1x1MjcwNSdcbiAgICB9KTtcblxuICAgIGNvbnN0IHN0cmVhayA9IHRoaXMuYW5hbHl0aWNzLmNhbGN1bGF0ZVN0cmVhaygpO1xuICAgIHRoaXMuY3JlYXRlTWV0cmljQ2FyZChtZXRyaWNzR3JpZCwge1xuICAgICAgdGl0bGU6ICdDdXJyZW50IFN0cmVhaycsXG4gICAgICB2YWx1ZTogYCR7c3RyZWFrfSBkYXlzYCxcbiAgICAgIGljb246ICdcdUQ4M0RcdUREMjUnXG4gICAgfSk7XG5cbiAgICAvLyBcdTY3MkNcdTU0NjggdnMgXHU0RTBBXHU1NDY4XG4gICAgY29uc3Qgd2Vla0NvbXBhcmlzb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnd2Vlay1jb21wYXJpc29uJyB9KTtcbiAgICB3ZWVrQ29tcGFyaXNvbi5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdUaGlzIFdlZWsgdnMgTGFzdCBXZWVrJyB9KTtcblxuICAgIGNvbnN0IGNvbXBhcmlzb25HcmlkID0gd2Vla0NvbXBhcmlzb24uY3JlYXRlRGl2KHsgY2xzOiAnY29tcGFyaXNvbi1ncmlkJyB9KTtcblxuICAgIGNvbnN0IHJldmlld0NoYW5nZSA9IHRoaXNXZWVrLnRvdGFsUmV2aWV3cyAtIGxhc3RXZWVrLnRvdGFsUmV2aWV3cztcbiAgICBjb25zdCByZXZpZXdDaGFuZ2VQZXJjZW50ID0gbGFzdFdlZWsudG90YWxSZXZpZXdzID4gMFxuICAgICAgPyAoKHJldmlld0NoYW5nZSAvIGxhc3RXZWVrLnRvdGFsUmV2aWV3cykgKiAxMDApLnRvRml4ZWQoMSlcbiAgICAgIDogJzAnO1xuXG4gICAgdGhpcy5jcmVhdGVDb21wYXJpc29uSXRlbShjb21wYXJpc29uR3JpZCwge1xuICAgICAgbGFiZWw6ICdSZXZpZXdzJyxcbiAgICAgIHRoaXNXZWVrOiB0aGlzV2Vlay50b3RhbFJldmlld3MsXG4gICAgICBsYXN0V2VlazogbGFzdFdlZWsudG90YWxSZXZpZXdzLFxuICAgICAgY2hhbmdlOiByZXZpZXdDaGFuZ2UsXG4gICAgICBjaGFuZ2VQZXJjZW50OiByZXZpZXdDaGFuZ2VQZXJjZW50XG4gICAgfSk7XG5cbiAgICBjb25zdCByYXRlQ2hhbmdlID0gKHRoaXNXZWVrLmF2ZXJhZ2VDb3JyZWN0UmF0ZSAtIGxhc3RXZWVrLmF2ZXJhZ2VDb3JyZWN0UmF0ZSkgKiAxMDA7XG4gICAgdGhpcy5jcmVhdGVDb21wYXJpc29uSXRlbShjb21wYXJpc29uR3JpZCwge1xuICAgICAgbGFiZWw6ICdDb3JyZWN0IFJhdGUnLFxuICAgICAgdGhpc1dlZWs6IGAkeyh0aGlzV2Vlay5hdmVyYWdlQ29ycmVjdFJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JWAsXG4gICAgICBsYXN0V2VlazogYCR7KGxhc3RXZWVrLmF2ZXJhZ2VDb3JyZWN0UmF0ZSAqIDEwMCkudG9GaXhlZCgxKX0lYCxcbiAgICAgIGNoYW5nZTogcmF0ZUNoYW5nZSxcbiAgICAgIGNoYW5nZVBlcmNlbnQ6IHJhdGVDaGFuZ2UudG9GaXhlZCgxKVxuICAgIH0pO1xuXG4gICAgLy8gXHU2NzAwXHU4RkQxN1x1NTkyOVx1NkQzQlx1NTJBOFxuICAgIGNvbnN0IHJlY2VudEFjdGl2aXR5ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3JlY2VudC1hY3Rpdml0eScgfSk7XG4gICAgcmVjZW50QWN0aXZpdHkuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnTGFzdCA3IERheXMgQWN0aXZpdHknIH0pO1xuXG4gICAgY29uc3QgYWN0aXZpdHlDaGFydCA9IHJlY2VudEFjdGl2aXR5LmNyZWF0ZURpdih7IGNsczogJ2FjdGl2aXR5LWNoYXJ0JyB9KTtcbiAgICB0aGlzLnJlbmRlclNpbXBsZUJhckNoYXJ0KGFjdGl2aXR5Q2hhcnQsIGRhaWx5U3RhdHMpO1xuXG4gICAgLy8gXHU3NTFGXHU2MjEwXHU2MkE1XHU1NDRBXHU2MzA5XHU5NEFFXG4gICAgY29uc3QgcmVwb3J0U2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdyZXBvcnQtc2VjdGlvbicgfSk7XG4gICAgY29uc3QgcmVwb3J0QnRuID0gcmVwb3J0U2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1x1RDgzRFx1RENDNCBHZW5lcmF0ZSBGdWxsIFJlcG9ydCcsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIC8vIHJlcG9ydEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuZ2VuZXJhdGVBbmRTaG93UmVwb3J0KCkpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJUcmVuZHMoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdQZXJmb3JtYW5jZSBUcmVuZHMnIH0pO1xuXG4gICAgY29uc3QgZGFpbHlTdGF0cyA9IHRoaXMuYW5hbHl0aWNzLmdldERhaWx5U3RhdHMoMzApO1xuXG4gICAgLy8gXHU2QjYzXHU3ODZFXHU3Mzg3XHU4RDhCXHU1MkJGXG4gICAgY29uc3QgY29ycmVjdFJhdGVTZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NoYXJ0LXNlY3Rpb24nIH0pO1xuICAgIGNvcnJlY3RSYXRlU2VjdGlvbi5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdDb3JyZWN0IFJhdGUgKExhc3QgMzAgRGF5cyknIH0pO1xuICAgIGNvbnN0IGNvcnJlY3RSYXRlQ2hhcnQgPSBjb3JyZWN0UmF0ZVNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAnbGluZS1jaGFydCcgfSk7XG4gICAgdGhpcy5yZW5kZXJMaW5lQ2hhcnQoY29ycmVjdFJhdGVDaGFydCwgZGFpbHlTdGF0cywgJ2NvcnJlY3RSYXRlJyk7XG5cbiAgICAvLyBcdTZCQ0ZcdTY1RTVcdTU5MERcdTRFNjBcdTkxQ0ZcbiAgICBjb25zdCByZXZpZXdzU2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjaGFydC1zZWN0aW9uJyB9KTtcbiAgICByZXZpZXdzU2VjdGlvbi5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdEYWlseSBSZXZpZXdzJyB9KTtcbiAgICBjb25zdCByZXZpZXdzQ2hhcnQgPSByZXZpZXdzU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICdiYXItY2hhcnQnIH0pO1xuICAgIHRoaXMucmVuZGVyQmFyQ2hhcnQocmV2aWV3c0NoYXJ0LCBkYWlseVN0YXRzKTtcblxuICAgIC8vIFx1NzBFRFx1NTI5Qlx1NTZGRVxuICAgIGNvbnN0IGhlYXRtYXBTZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NoYXJ0LXNlY3Rpb24nIH0pO1xuICAgIGhlYXRtYXBTZWN0aW9uLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1N0dWR5IEFjdGl2aXR5IENhbGVuZGFyJyB9KTtcbiAgICBjb25zdCBoZWF0bWFwID0gaGVhdG1hcFNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAnaGVhdG1hcCcgfSk7XG4gICAgdGhpcy5yZW5kZXJIZWF0bWFwKGhlYXRtYXApO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJEZWNrcyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0RlY2sgU3RhdGlzdGljcycgfSk7XG5cbiAgICBjb25zdCBkZWNrU3RhdHMgPSB0aGlzLmFuYWx5dGljcy5nZXREZWNrU3RhdHMoKTtcblxuICAgIGlmIChkZWNrU3RhdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb250YWluZXIuY3JlYXRlRGl2KHsgXG4gICAgICAgIHRleHQ6ICdObyBkZWNrcyB5ZXQuIENyZWF0ZSBzb21lIGZsYXNoY2FyZHMgdG8gc2VlIGRlY2sgc3RhdGlzdGljcyEnLFxuICAgICAgICBjbHM6ICdlbXB0eS1tZXNzYWdlJ1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZGVja3NHcmlkID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2RlY2tzLWdyaWQnIH0pO1xuXG4gICAgZGVja1N0YXRzLmZvckVhY2goZGVjayA9PiB7XG4gICAgICBjb25zdCBkZWNrQ2FyZCA9IGRlY2tzR3JpZC5jcmVhdGVEaXYoeyBjbHM6ICdkZWNrLWNhcmQnIH0pO1xuXG4gICAgICBjb25zdCBoZWFkZXIgPSBkZWNrQ2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdkZWNrLWNhcmQtaGVhZGVyJyB9KTtcbiAgICAgIGhlYWRlci5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6IGRlY2suZGVja05hbWUgfSk7XG4gICAgICBcbiAgICAgIGhlYWRlci5jcmVhdGVTcGFuKHtcbiAgICAgICAgdGV4dDogYCR7ZGVjay50b3RhbENhcmRzfSBjYXJkc2AsXG4gICAgICAgIGNsczogJ2RlY2stYmFkZ2UnXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc3RhdHMgPSBkZWNrQ2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdkZWNrLWNhcmQtc3RhdHMnIH0pO1xuXG4gICAgICB0aGlzLmNyZWF0ZVN0YXRSb3coc3RhdHMsICdEdWUnLCBkZWNrLmR1ZUNhcmRzLnRvU3RyaW5nKCksICdcdUQ4M0RcdURDQzUnKTtcbiAgICAgIHRoaXMuY3JlYXRlU3RhdFJvdyhzdGF0cywgJ05ldycsIGRlY2submV3Q2FyZHMudG9TdHJpbmcoKSwgJ1x1RDgzQ1x1REQ5NScpO1xuICAgICAgdGhpcy5jcmVhdGVTdGF0Um93KFxuICAgICAgICBzdGF0cywgXG4gICAgICAgICdDb3JyZWN0IFJhdGUnLCBcbiAgICAgICAgYCR7KGRlY2suY29ycmVjdFJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JWAsXG4gICAgICAgICdcdTI3MDUnXG4gICAgICApO1xuICAgICAgdGhpcy5jcmVhdGVTdGF0Um93KFxuICAgICAgICBzdGF0cyxcbiAgICAgICAgJ0F2ZyBJbnRlcnZhbCcsXG4gICAgICAgIGAke2RlY2suYXZlcmFnZUludGVydmFsLnRvRml4ZWQoMSl9IGRheXNgLFxuICAgICAgICAnXHVEODNEXHVEQ0NBJ1xuICAgICAgKTtcblxuICAgICAgLy8gXHU4RkRCXHU1RUE2XHU2NzYxXG4gICAgICBjb25zdCBwcm9ncmVzcyA9IGRlY2tDYXJkLmNyZWF0ZURpdih7IGNsczogJ2RlY2stcHJvZ3Jlc3MnIH0pO1xuICAgICAgY29uc3QgbWFzdGVyZWRDb3VudCA9IGRlY2sudG90YWxDYXJkcyAtIGRlY2suZHVlQ2FyZHMgLSBkZWNrLm5ld0NhcmRzO1xuICAgICAgY29uc3QgbWFzdGVyZWRQZXJjZW50ID0gKG1hc3RlcmVkQ291bnQgLyBkZWNrLnRvdGFsQ2FyZHMpICogMTAwO1xuICAgICAgXG4gICAgICBjb25zdCBwcm9ncmVzc0JhciA9IHByb2dyZXNzLmNyZWF0ZURpdih7IGNsczogJ3Byb2dyZXNzLWJhci1jb250YWluZXInIH0pO1xuICAgICAgY29uc3QgYmFyID0gcHJvZ3Jlc3NCYXIuY3JlYXRlRGl2KHsgY2xzOiAncHJvZ3Jlc3MtYmFyLWZpbGwnIH0pO1xuICAgICAgYmFyLnN0eWxlLndpZHRoID0gYCR7bWFzdGVyZWRQZXJjZW50fSVgO1xuICAgICAgXG4gICAgICBwcm9ncmVzcy5jcmVhdGVEaXYoe1xuICAgICAgICB0ZXh0OiBgJHttYXN0ZXJlZFBlcmNlbnQudG9GaXhlZCgwKX0lIG1hc3RlcmVkYCxcbiAgICAgICAgY2xzOiAncHJvZ3Jlc3MtbGFiZWwnXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyRGlmZmljdWx0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQ2FyZHMgTmVlZGluZyBBdHRlbnRpb24nIH0pO1xuXG4gICAgY29uc3QgZGlmZmljdWx0Q2FyZHMgPSB0aGlzLmFuYWx5dGljcy5nZXREaWZmaWN1bHRDYXJkcygxMCk7XG5cbiAgICBpZiAoZGlmZmljdWx0Q2FyZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb250YWluZXIuY3JlYXRlRGl2KHtcbiAgICAgICAgdGV4dDogJ1x1RDgzQ1x1REY4OSBObyBkaWZmaWN1bHQgY2FyZHMhIEdyZWF0IGpvYiEnLFxuICAgICAgICBjbHM6ICdlbXB0eS1tZXNzYWdlJ1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY2FyZHNMaXN0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2RpZmZpY3VsdC1jYXJkcy1saXN0JyB9KTtcblxuICAgIGRpZmZpY3VsdENhcmRzLmZvckVhY2goKGRjLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgY2FyZEl0ZW0gPSBjYXJkc0xpc3QuY3JlYXRlRGl2KHsgY2xzOiAnZGlmZmljdWx0LWNhcmQtaXRlbScgfSk7XG5cbiAgICAgIGNvbnN0IHJhbmsgPSBjYXJkSXRlbS5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLXJhbmsnIH0pO1xuICAgICAgcmFuay50ZXh0Q29udGVudCA9IGAke2luZGV4ICsgMX1gO1xuXG4gICAgICBjb25zdCBjb250ZW50ID0gY2FyZEl0ZW0uY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1jb250ZW50JyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcXVlc3Rpb24gPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ2NhcmQtcXVlc3Rpb24nIH0pO1xuICAgICAgcXVlc3Rpb24udGV4dENvbnRlbnQgPSBkYy5jYXJkLmZyb250LnN1YnN0cmluZygwLCA4MCkgKyBcbiAgICAgICAgKGRjLmNhcmQuZnJvbnQubGVuZ3RoID4gODAgPyAnLi4uJyA6ICcnKTtcblxuICAgICAgY29uc3QgbWV0YSA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1tZXRhJyB9KTtcblxuICAgICAgY29uc3QgcGF0dGVybkVtb2ppOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgICAnY29uY2VwdCc6ICdcdUQ4M0VcdURERTAnLFxuICAgICAgICAnbWVtb3J5JzogJ1x1RDgzRFx1RENBRCcsXG4gICAgICAgICdjYWxjdWxhdGlvbic6ICdcdUQ4M0RcdUREMjInLFxuICAgICAgICAndW5rbm93bic6ICdcdTI3NTMnXG4gICAgICB9O1xuXG4gICAgICBtZXRhLmNyZWF0ZVNwYW4oe1xuICAgICAgICB0ZXh0OiBgJHtwYXR0ZXJuRW1vamlbZGMucGF0dGVybl19ICR7ZGMucGF0dGVybn1gLFxuICAgICAgICBjbHM6ICdwYXR0ZXJuLWJhZGdlJ1xuICAgICAgfSk7XG5cbiAgICAgIG1ldGEuY3JlYXRlU3Bhbih7XG4gICAgICAgIHRleHQ6IGAke2RjLmVycm9yQ291bnR9IGVycm9yc2AsXG4gICAgICAgIGNsczogJ2Vycm9yLWNvdW50J1xuICAgICAgfSk7XG5cbiAgICAgIG1ldGEuY3JlYXRlU3Bhbih7XG4gICAgICAgIHRleHQ6IGAke2RjLmF2ZXJhZ2VUaW1lLnRvRml4ZWQoMSl9cyBhdmdgLFxuICAgICAgICBjbHM6ICdhdmctdGltZSdcbiAgICAgIH0pO1xuXG4gICAgICAvLyBcdTk2QkVcdTVFQTZcdTY3NjFcbiAgICAgIGNvbnN0IGRpZmZpY3VsdHlCYXIgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ2RpZmZpY3VsdHktYmFyLWNvbnRhaW5lcicgfSk7XG4gICAgICBjb25zdCBkaWZmQmFyID0gZGlmZmljdWx0eUJhci5jcmVhdGVEaXYoeyBjbHM6ICdkaWZmaWN1bHR5LWJhcicgfSk7XG4gICAgICBkaWZmQmFyLnN0eWxlLndpZHRoID0gYCR7ZGMuY2FyZC5zdGF0cy5kaWZmaWN1bHR5ICogMTAwfSVgO1xuXG4gICAgICAvLyBcdTY0Q0RcdTRGNUNcdTYzMDlcdTk0QUVcbiAgICAgIGNvbnN0IGFjdGlvbnMgPSBjYXJkSXRlbS5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLWFjdGlvbnMnIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBqdW1wQnRuID0gYWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICB0ZXh0OiAnXHUyMTk3JyxcbiAgICAgICAgY2xzOiAnYWN0aW9uLWJ0bi1zbWFsbCdcbiAgICAgIH0pO1xuICAgICAganVtcEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuanVtcFRvQ2FyZChkYy5jYXJkKSk7XG5cbiAgICAgIGNvbnN0IHJldmlld0J0biA9IGFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogJ1x1RDgzRFx1REQwNCcsXG4gICAgICAgIGNsczogJ2FjdGlvbi1idG4tc21hbGwnXG4gICAgICB9KTtcbiAgICAgIHJldmlld0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWN0aXZhdGVSZXZpZXcoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBkZWxldGVCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIHRleHQ6ICdcdUQ4M0RcdURERDFcdUZFMEYnLFxuICAgICAgICBjbHM6ICdhY3Rpb24tYnRuLXNtYWxsIGRlbGV0ZS1idG4nXG4gICAgICB9KTtcbiAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKGNvbmZpcm0oJ1x1Nzg2RVx1NUI5QVx1ODk4MVx1NTIyMFx1OTY2NFx1OEZEOVx1NUYyMFx1OTVFQVx1NTM2MVx1NTQxN1x1RkYxRicpKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5kZWxldGVGbGFzaGNhcmQoZGMuY2FyZC5pZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVNZXRyaWNDYXJkKFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgY29uZmlnOiB7IHRpdGxlOiBzdHJpbmc7IHZhbHVlOiBzdHJpbmc7IGljb246IHN0cmluZyB9XG4gICkge1xuICAgIGNvbnN0IGNhcmQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbWV0cmljLWNhcmQnIH0pO1xuICAgIFxuICAgIGNhcmQuY3JlYXRlRGl2KHsgdGV4dDogY29uZmlnLmljb24sIGNsczogJ21ldHJpYy1pY29uJyB9KTtcbiAgICBcbiAgICBjb25zdCBjb250ZW50ID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdtZXRyaWMtY29udGVudCcgfSk7XG4gICAgY29udGVudC5jcmVhdGVEaXYoeyB0ZXh0OiBjb25maWcudGl0bGUsIGNsczogJ21ldHJpYy10aXRsZScgfSk7XG4gICAgY29udGVudC5jcmVhdGVEaXYoeyB0ZXh0OiBjb25maWcudmFsdWUsIGNsczogJ21ldHJpYy12YWx1ZScgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUNvbXBhcmlzb25JdGVtKFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgY29uZmlnOiB7XG4gICAgICBsYWJlbDogc3RyaW5nO1xuICAgICAgdGhpc1dlZWs6IG51bWJlciB8IHN0cmluZztcbiAgICAgIGxhc3RXZWVrOiBudW1iZXIgfCBzdHJpbmc7XG4gICAgICBjaGFuZ2U6IG51bWJlcjtcbiAgICAgIGNoYW5nZVBlcmNlbnQ6IHN0cmluZztcbiAgICB9XG4gICkge1xuICAgIGNvbnN0IGl0ZW0gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY29tcGFyaXNvbi1pdGVtJyB9KTtcbiAgICBcbiAgICBpdGVtLmNyZWF0ZURpdih7IHRleHQ6IGNvbmZpZy5sYWJlbCwgY2xzOiAnY29tcGFyaXNvbi1sYWJlbCcgfSk7XG4gICAgXG4gICAgY29uc3QgdmFsdWVzID0gaXRlbS5jcmVhdGVEaXYoeyBjbHM6ICdjb21wYXJpc29uLXZhbHVlcycgfSk7XG4gICAgdmFsdWVzLmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IGAke2NvbmZpZy50aGlzV2Vla31gLFxuICAgICAgY2xzOiAndGhpcy13ZWVrJ1xuICAgIH0pO1xuICAgIHZhbHVlcy5jcmVhdGVTcGFuKHsgdGV4dDogJyB2cyAnLCBjbHM6ICd2cycgfSk7XG4gICAgdmFsdWVzLmNyZWF0ZVNwYW4oe1xuICAgICAgdGV4dDogYCR7Y29uZmlnLmxhc3RXZWVrfWAsXG4gICAgICBjbHM6ICdsYXN0LXdlZWsnXG4gICAgfSk7XG5cbiAgICBjb25zdCBjaGFuZ2VDbGFzcyA9IGNvbmZpZy5jaGFuZ2UgPiAwID8gJ3Bvc2l0aXZlJyA6IGNvbmZpZy5jaGFuZ2UgPCAwID8gJ25lZ2F0aXZlJyA6ICduZXV0cmFsJztcbiAgICBjb25zdCBjaGFuZ2VJY29uID0gY29uZmlnLmNoYW5nZSA+IDAgPyAnXHUyMTk3JyA6IGNvbmZpZy5jaGFuZ2UgPCAwID8gJ1x1MjE5OCcgOiAnXHUyMTkyJztcbiAgICBcbiAgICBpdGVtLmNyZWF0ZURpdih7XG4gICAgICB0ZXh0OiBgJHtjaGFuZ2VJY29ufSAke2NvbmZpZy5jaGFuZ2VQZXJjZW50fSVgLFxuICAgICAgY2xzOiBgY2hhbmdlICR7Y2hhbmdlQ2xhc3N9YFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVTdGF0Um93KFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgbGFiZWw6IHN0cmluZyxcbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIGljb246IHN0cmluZ1xuICApIHtcbiAgICBjb25zdCByb3cgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc3RhdC1yb3cnIH0pO1xuICAgIHJvdy5jcmVhdGVTcGFuKHsgdGV4dDogaWNvbiwgY2xzOiAnc3RhdC1pY29uJyB9KTtcbiAgICByb3cuY3JlYXRlU3Bhbih7IHRleHQ6IGxhYmVsLCBjbHM6ICdzdGF0LWxhYmVsJyB9KTtcbiAgICByb3cuY3JlYXRlU3Bhbih7IHRleHQ6IHZhbHVlLCBjbHM6ICdzdGF0LXZhbHVlJyB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyU2ltcGxlQmFyQ2hhcnQoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZGF0YTogYW55W10pIHtcbiAgICBjb25zdCBtYXhWYWx1ZSA9IE1hdGgubWF4KC4uLmRhdGEubWFwKGQgPT4gZC5yZXZpZXdlZCkpO1xuXG4gICAgZGF0YS5mb3JFYWNoKHN0YXQgPT4ge1xuICAgICAgY29uc3QgYmFyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3NpbXBsZS1iYXInIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoc3RhdC5kYXRlKTtcbiAgICAgIGNvbnN0IGRheU5hbWUgPSBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7IHdlZWtkYXk6ICdzaG9ydCcgfSk7XG4gICAgICBcbiAgICAgIGJhci5jcmVhdGVEaXYoeyB0ZXh0OiBkYXlOYW1lLCBjbHM6ICdiYXItbGFiZWwnIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBiYXJDb250YWluZXIgPSBiYXIuY3JlYXRlRGl2KHsgY2xzOiAnYmFyLWNvbnRhaW5lcicgfSk7XG4gICAgICBjb25zdCBiYXJGaWxsID0gYmFyQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2Jhci1maWxsJyB9KTtcbiAgICAgIGNvbnN0IGhlaWdodCA9IG1heFZhbHVlID4gMCA/IChzdGF0LnJldmlld2VkIC8gbWF4VmFsdWUpICogMTAwIDogMDtcbiAgICAgIGJhckZpbGwuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fSVgO1xuICAgICAgXG4gICAgICBiYXIuY3JlYXRlRGl2KHsgdGV4dDogc3RhdC5yZXZpZXdlZC50b1N0cmluZygpLCBjbHM6ICdiYXItdmFsdWUnIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJCYXJDaGFydChjb250YWluZXI6IEhUTUxFbGVtZW50LCBkYXRhOiBhbnlbXSkge1xuICAgIGNvbnN0IGNoYXJ0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NoYXJ0LWNhbnZhcycgfSk7XG4gICAgY29uc3QgbWF4VmFsdWUgPSBNYXRoLm1heCguLi5kYXRhLm1hcChkID0+IGQucmV2aWV3ZWQpKTtcblxuICAgIGRhdGEuZm9yRWFjaChzdGF0ID0+IHtcbiAgICAgIGNvbnN0IGJhckdyb3VwID0gY2hhcnQuY3JlYXRlRGl2KHsgY2xzOiAnYmFyLWdyb3VwJyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgYmFyQ29udGFpbmVyID0gYmFyR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiAnYmFyJyB9KTtcbiAgICAgIGNvbnN0IGhlaWdodCA9IG1heFZhbHVlID4gMCA/IChzdGF0LnJldmlld2VkIC8gbWF4VmFsdWUpICogMTAwIDogMDtcbiAgICAgIGJhckNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9JWA7XG4gICAgICBiYXJDb250YWluZXIudGl0bGUgPSBgJHtzdGF0LnJldmlld2VkfSByZXZpZXdzYDtcbiAgICAgIFxuICAgICAgY29uc3QgYmFyTGFiZWwgPSBiYXJHcm91cC5jcmVhdGVEaXYoeyBjbHM6ICdiYXItbGFiZWwnIH0pO1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHN0YXQuZGF0ZSk7XG4gICAgICBiYXJMYWJlbC50ZXh0Q29udGVudCA9IGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckxpbmVDaGFydChjb250YWluZXI6IEhUTUxFbGVtZW50LCBkYXRhOiBhbnlbXSwga2V5OiBzdHJpbmcpIHtcbiAgICBjb25zdCBjaGFydCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdsaW5lLWNoYXJ0LWNhbnZhcycgfSk7XG4gICAgXG4gICAgY29uc3QgcG9pbnRzID0gZGF0YS5tYXAoKHN0YXQsIGkpID0+IHtcbiAgICAgIGNvbnN0IHggPSAoaSAvIChkYXRhLmxlbmd0aCAtIDEpKSAqIDEwMDtcbiAgICAgIGNvbnN0IHkgPSAxMDAgLSAoc3RhdFtrZXldICogMTAwKTtcbiAgICAgIHJldHVybiB7IHgsIHksIHZhbHVlOiBzdGF0W2tleV0gfTtcbiAgICB9KTtcblxuICAgIC8vIFx1NTIxQlx1NUVGQVNWR1xuICAgIGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJyk7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZSgndmlld0JveCcsICcwIDAgMTAwIDEwMCcpO1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAnbm9uZScpO1xuICAgIHN2Zy5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICBzdmcuc3R5bGUuaGVpZ2h0ID0gJzIwMHB4JztcblxuICAgIC8vIFx1NTIxQlx1NUVGQVx1NjI5OFx1N0VCRlx1OERFRlx1NUY4NFxuICAgIGNvbnN0IHBhdGhEYXRhID0gcG9pbnRzLm1hcCgocCwgaSkgPT4gXG4gICAgICBgJHtpID09PSAwID8gJ00nIDogJ0wnfSAke3AueH0gJHtwLnl9YFxuICAgICkuam9pbignICcpO1xuXG4gICAgY29uc3QgcGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncGF0aCcpO1xuICAgIHBhdGguc2V0QXR0cmlidXRlKCdkJywgcGF0aERhdGEpO1xuICAgIHBhdGguc2V0QXR0cmlidXRlKCdmaWxsJywgJ25vbmUnKTtcbiAgICBwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJ3ZhcigtLWludGVyYWN0aXZlLWFjY2VudCknKTtcbiAgICBwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzInKTtcblxuICAgIHN2Zy5hcHBlbmRDaGlsZChwYXRoKTtcbiAgICBjaGFydC5hcHBlbmRDaGlsZChzdmcpO1xuXG4gICAgLy8gXHU2REZCXHU1MkEwXHU1MDNDXHU2ODA3XHU3QjdFXG4gICAgY29uc3QgbGFiZWxzQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NoYXJ0LWxhYmVscycgfSk7XG4gICAgZGF0YS5mb3JFYWNoKChzdGF0LCBpKSA9PiB7XG4gICAgICBpZiAoaSAlIE1hdGguY2VpbChkYXRhLmxlbmd0aCAvIDcpID09PSAwKSB7XG4gICAgICAgIGNvbnN0IGNoYXJ0TGFiZWwgPSBsYWJlbHNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2hhcnQtbGFiZWwnIH0pO1xuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoc3RhdC5kYXRlKTtcbiAgICAgICAgY2hhcnRMYWJlbC50ZXh0Q29udGVudCA9IGAke2RhdGUuZ2V0TW9udGgoKSArIDF9LyR7ZGF0ZS5nZXREYXRlKCl9YDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVySGVhdG1hcChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgaGVhdG1hcERhdGEgPSB0aGlzLmFuYWx5dGljcy5nZXRIZWF0bWFwRGF0YSg5MCk7XG4gICAgXG4gICAgLy8gXHU2MzA5XHU1NDY4XHU1MjA2XHU3RUM0XG4gICAgY29uc3Qgd2Vla3M6IGFueVtdW10gPSBbXTtcbiAgICBsZXQgY3VycmVudFdlZWs6IGFueVtdID0gW107XG4gICAgXG4gICAgaGVhdG1hcERhdGEuZm9yRWFjaCgoZGF5LCBpKSA9PiB7XG4gICAgICBjdXJyZW50V2Vlay5wdXNoKGRheSk7XG4gICAgICBpZiAoY3VycmVudFdlZWsubGVuZ3RoID09PSA3IHx8IGkgPT09IGhlYXRtYXBEYXRhLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgd2Vla3MucHVzaChjdXJyZW50V2Vlayk7XG4gICAgICAgIGN1cnJlbnRXZWVrID0gW107XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB3ZWVrcy5mb3JFYWNoKHdlZWsgPT4ge1xuICAgICAgY29uc3Qgd2Vla1JvdyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdoZWF0bWFwLXdlZWsnIH0pO1xuICAgICAgXG4gICAgICB3ZWVrLmZvckVhY2goZGF5ID0+IHtcbiAgICAgICAgY29uc3QgY2VsbCA9IHdlZWtSb3cuY3JlYXRlRGl2KHsgY2xzOiAnaGVhdG1hcC1jZWxsJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NUYzQVx1NUVBNlx1N0I0OVx1N0VBNyAwLTRcbiAgICAgICAgY29uc3QgbGV2ZWwgPSBNYXRoLmNlaWwoZGF5LmludGVuc2l0eSAqIDQpO1xuICAgICAgICBjZWxsLmFkZENsYXNzKGBsZXZlbC0ke2xldmVsfWApO1xuICAgICAgICBcbiAgICAgICAgY2VsbC50aXRsZSA9IGAke2RheS5kYXRlfTogJHtkYXkuY291bnR9IHJldmlld3NgO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuXG5cbiAgcHJpdmF0ZSBhc3luYyBqdW1wVG9DYXJkKGNhcmQ6IGFueSkge1xuICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY2FyZC5zb3VyY2VGaWxlKTtcbiAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSByZXR1cm47XG5cbiAgICBjb25zdCBjb250ZW50VW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNhcmQuc291cmNlQ29udGVudElkKTtcbiAgICBpZiAoIWNvbnRlbnRVbml0KSByZXR1cm47XG5cbiAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpO1xuICAgIGF3YWl0IGxlYWYub3BlbkZpbGUoZmlsZSk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShJdGVtVmlldyk7XG4gICAgICBpZiAodmlldykge1xuICAgICAgICBjb25zdCBlZGl0b3IgPSAodmlldyBhcyBhbnkpLmVkaXRvcjtcbiAgICAgICAgaWYgKGVkaXRvcikge1xuICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3IoeyBsaW5lOiBjb250ZW50VW5pdC5zb3VyY2UucG9zaXRpb24ubGluZSwgY2g6IDAgfSk7XG4gICAgICAgICAgZWRpdG9yLnNjcm9sbEludG9WaWV3KHtcbiAgICAgICAgICAgIGZyb206IHsgbGluZTogY29udGVudFVuaXQuc291cmNlLnBvc2l0aW9uLmxpbmUsIGNoOiAwIH0sXG4gICAgICAgICAgICB0bzogeyBsaW5lOiBjb250ZW50VW5pdC5zb3VyY2UucG9zaXRpb24ubGluZSwgY2g6IDAgfVxuICAgICAgICAgIH0sIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgMTAwKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGVsZXRlRmxhc2hjYXJkKGNhcmRJZDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZGVsZXRlQ2FyZChjYXJkSWQpO1xuICAgICAgbmV3IE5vdGljZSgnXHVEODNEXHVEREQxXHVGRTBGIFx1OTVFQVx1NTM2MVx1NURGMlx1NTIyMFx1OTY2NCcpO1xuICAgICAgdGhpcy5yZW5kZXIoKTsgLy8gXHU5MUNEXHU2NUIwXHU2RTMyXHU2N0QzXHU4OUM2XHU1NkZFXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGZsYXNoY2FyZDonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdcdTI3NEMgXHU1MjIwXHU5NjY0XHU5NUVBXHU1MzYxXHU1OTMxXHU4RDI1Jyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgIC5zdGF0cy1jb250YWluZXIge1xuICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgfVxuXG4gICAgICAuc3RhdHMtaGVhZGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgfVxuXG4gICAgICAuc3RhdHMtaGVhZGVyIGgyIHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgfVxuXG4gICAgICAuc3RhdHMtdGFicyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgfVxuXG4gICAgICAudGFiIHtcbiAgICAgICAgcGFkZGluZzogMTBweCAyMHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgICAgfVxuXG4gICAgICAudGFiOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC50YWIuYWN0aXZlIHtcbiAgICAgICAgYm9yZGVyLWJvdHRvbS1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICB9XG5cbiAgICAgIC5tZXRyaWNzLWdyaWQge1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCwgbWlubWF4KDIwMHB4LCAxZnIpKTtcbiAgICAgICAgZ2FwOiAxNXB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xuICAgICAgfVxuXG4gICAgICAubWV0cmljLWNhcmQge1xuICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiAxNXB4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgfVxuXG4gICAgICAubWV0cmljLWljb24ge1xuICAgICAgICBmb250LXNpemU6IDMycHg7XG4gICAgICB9XG5cbiAgICAgIC5tZXRyaWMtY29udGVudCB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICB9XG5cbiAgICAgIC5tZXRyaWMtdGl0bGUge1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDVweDtcbiAgICAgIH1cblxuICAgICAgLm1ldHJpYy12YWx1ZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMS44ZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICB9XG5cbiAgICAgIC53ZWVrLWNvbXBhcmlzb24ge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xuICAgICAgfVxuXG4gICAgICAuY29tcGFyaXNvbi1ncmlkIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiAxNXB4O1xuICAgICAgICBtYXJnaW4tdG9wOiAxNXB4O1xuICAgICAgfVxuXG4gICAgICAuY29tcGFyaXNvbi1pdGVtIHtcbiAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIH1cblxuICAgICAgLmNvbXBhcmlzb24tbGFiZWwge1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuY29tcGFyaXNvbi12YWx1ZXMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIH1cblxuICAgICAgLnRoaXMtd2VlayB7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gICAgICB9XG5cbiAgICAgIC5sYXN0LXdlZWsge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5jaGFuZ2Uge1xuICAgICAgICBwYWRkaW5nOiA0cHggMTBweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLmNoYW5nZS5wb3NpdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItc3VjY2Vzcyk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICB9XG5cbiAgICAgIC5jaGFuZ2UubmVnYXRpdmUge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yKTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgfVxuXG4gICAgICAuY2hhcnQtc2VjdGlvbiB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDMwcHg7XG4gICAgICB9XG5cbiAgICAgIC5yZWNlbnQtYWN0aXZpdHkgLmFjdGl2aXR5LWNoYXJ0IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcbiAgICAgICAgaGVpZ2h0OiAxNTBweDtcbiAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5zaW1wbGUtYmFyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICB9XG5cbiAgICAgIC5zaW1wbGUtYmFyIC5iYXItY29udGFpbmVyIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogMTAwcHg7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5zaW1wbGUtYmFyIC5iYXItZmlsbCB7XG4gICAgICAgIHdpZHRoOiA2MCU7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweCA0cHggMCAwO1xuICAgICAgICB0cmFuc2l0aW9uOiBoZWlnaHQgMC4zcztcbiAgICAgIH1cblxuICAgICAgLmJhci1sYWJlbCwgLmJhci12YWx1ZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5oZWF0bWFwIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgfVxuXG4gICAgICAuaGVhdG1hcC13ZWVrIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC5oZWF0bWFwLWNlbGwge1xuICAgICAgICB3aWR0aDogMTJweDtcbiAgICAgICAgaGVpZ2h0OiAxMnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cblxuICAgICAgLmhlYXRtYXAtY2VsbC5sZXZlbC0xIHsgYmFja2dyb3VuZDogcmdiYSg5NCwgMTU2LCAyMzUsIDAuMyk7IH1cbiAgICAgIC5oZWF0bWFwLWNlbGwubGV2ZWwtMiB7IGJhY2tncm91bmQ6IHJnYmEoOTQsIDE1NiwgMjM1LCAwLjUpOyB9XG4gICAgICAuaGVhdG1hcC1jZWxsLmxldmVsLTMgeyBiYWNrZ3JvdW5kOiByZ2JhKDk0LCAxNTYsIDIzNSwgMC43KTsgfVxuICAgICAgLmhlYXRtYXAtY2VsbC5sZXZlbC00IHsgYmFja2dyb3VuZDogcmdiYSg5NCwgMTU2LCAyMzUsIDEpOyB9XG5cbiAgICAgIC5kZWNrcy1ncmlkIHtcbiAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoMzAwcHgsIDFmcikpO1xuICAgICAgICBnYXA6IDE1cHg7XG4gICAgICB9XG5cbiAgICAgIC5kZWNrLWNhcmQge1xuICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgfVxuXG4gICAgICAuZGVjay1jYXJkLWhlYWRlciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDEwcHg7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICB9XG5cbiAgICAgIC5kZWNrLWNhcmQtaGVhZGVyIGg0IHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgfVxuXG4gICAgICAuZGVjay1iYWRnZSB7XG4gICAgICAgIHBhZGRpbmc6IDRweCAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgfVxuXG4gICAgICAuZGVjay1jYXJkLXN0YXRzIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICB9XG5cbiAgICAgIC5zdGF0LXJvdyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgfVxuXG4gICAgICAuc3RhdC1pY29uIHtcbiAgICAgICAgd2lkdGg6IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zdGF0LWxhYmVsIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuc3RhdC12YWx1ZSB7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC5kZWNrLXByb2dyZXNzIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMTVweDtcbiAgICAgIH1cblxuICAgICAgLnByb2dyZXNzLWJhci1jb250YWluZXIge1xuICAgICAgICBoZWlnaHQ6IDhweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgICB9XG5cbiAgICAgIC5wcm9ncmVzcy1iYXItZmlsbCB7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgdHJhbnNpdGlvbjogd2lkdGggMC4zcztcbiAgICAgIH1cblxuICAgICAgLnByb2dyZXNzLWxhYmVsIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLmRpZmZpY3VsdC1jYXJkcy1saXN0IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiAxMnB4O1xuICAgICAgfVxuXG4gICAgICAuZGlmZmljdWx0LWNhcmQtaXRlbSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogMTVweDtcbiAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgIH1cblxuICAgICAgLmNhcmQtcmFuayB7XG4gICAgICAgIHdpZHRoOiAzMHB4O1xuICAgICAgICBoZWlnaHQ6IDMwcHg7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkLWNvbnRlbnQge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1xdWVzdGlvbiB7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgIH1cblxuICAgICAgLmNhcmQtbWV0YSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogMTBweDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICBtYXJnaW4tYm90dG9tOjhweDtcbiAgICAgIH0gXG5cbi5wYXR0ZXJuLWJhZGdlLCAuZXJyb3ItY291bnQsIC5hdmctdGltZSB7XG4gICAgcGFkZGluZzogM3B4IDEwcHg7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICB9XG5cbiAgLmRpZmZpY3VsdHktYmFyLWNvbnRhaW5lciB7XG4gICAgaGVpZ2h0OiA2cHg7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgfVxuXG4gIC5kaWZmaWN1bHR5LWJhciB7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgdmFyKC0tY29sb3ItZ3JlZW4pLCB2YXIoLS1jb2xvci15ZWxsb3cpLCB2YXIoLS1jb2xvci1yZWQpKTtcbiAgICB0cmFuc2l0aW9uOiB3aWR0aCAwLjNzO1xuICB9XG5cbiAgLmNhcmQtYWN0aW9ucyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBnYXA6IDhweDtcbiAgfVxuXG4gIC5hY3Rpb24tYnRuLXNtYWxsIHtcbiAgICBwYWRkaW5nOiA2cHggMTJweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICB9XG5cbiAgLmFjdGlvbi1idG4tc21hbGw6aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgfVxuXG4gIC5hY3Rpb24tYnRuLXNtYWxsLmRlbGV0ZS1idG46aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgfVxuXG4gIC5lbXB0eS1tZXNzYWdlIHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgcGFkZGluZzogNDBweDtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgZm9udC1zaXplOiAxLjFlbTtcbiAgfVxuXG4gIC5yZXBvcnQtc2VjdGlvbiB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIG1hcmdpbi10b3A6IDMwcHg7XG4gICAgcGFkZGluZzogMjBweDtcbiAgfVxuXG4gIC5jaGFydC1jYW52YXMge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO1xuICAgIGhlaWdodDogMjAwcHg7XG4gICAgcGFkZGluZzogMjBweDtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gIH1cblxuICAuYmFyLWdyb3VwIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBmbGV4OiAxO1xuICAgIGhlaWdodDogMTAwJTtcbiAgfVxuXG4gIC5iYXItZ3JvdXAgLmJhciB7XG4gICAgd2lkdGg6IDgwJTtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweCA0cHggMCAwO1xuICAgIHRyYW5zaXRpb246IGhlaWdodCAwLjNzO1xuICAgIG1hcmdpbi10b3A6IGF1dG87XG4gIH1cblxuICAubGluZS1jaGFydC1jYW52YXMge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgcGFkZGluZzogMjBweDtcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICB9XG5cbiAgLmNoYXJ0LWxhYmVscyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcbiAgICBwYWRkaW5nOiAxMHB4IDIwcHg7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgfVxuXG4gIC5jaGFydC1sYWJlbCB7XG4gICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICB9XG5gO1xuXG5kb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICB9fSIsICJpbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IEZsYXNoY2FyZCwgUmV2aWV3TG9nIH0gZnJvbSAnLi9GbGFzaGNhcmRNYW5hZ2VyJztcblxuZXhwb3J0IGludGVyZmFjZSBEYWlseVN0YXRzIHtcbiAgZGF0ZTogc3RyaW5nO1xuICByZXZpZXdlZDogbnVtYmVyO1xuICBjb3JyZWN0Q291bnQ6IG51bWJlcjtcbiAgY29ycmVjdFJhdGU6IG51bWJlcjtcbiAgdGltZVNwZW50OiBudW1iZXI7XG4gIG5ld0NhcmRzOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2Vla2x5U3RhdHMge1xuICBzdGFydERhdGU6IHN0cmluZztcbiAgZW5kRGF0ZTogc3RyaW5nO1xuICB0b3RhbFJldmlld3M6IG51bWJlcjtcbiAgYXZlcmFnZUNvcnJlY3RSYXRlOiBudW1iZXI7XG4gIHRvdGFsVGltZVNwZW50OiBudW1iZXI7XG4gIHN0cmVhazogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERlY2tTdGF0cyB7XG4gIGRlY2tOYW1lOiBzdHJpbmc7XG4gIHRvdGFsQ2FyZHM6IG51bWJlcjtcbiAgZHVlQ2FyZHM6IG51bWJlcjtcbiAgbmV3Q2FyZHM6IG51bWJlcjtcbiAgY29ycmVjdFJhdGU6IG51bWJlcjtcbiAgYXZlcmFnZUludGVydmFsOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGlmZmljdWx0Q2FyZCB7XG4gIGNhcmQ6IEZsYXNoY2FyZDtcbiAgZXJyb3JDb3VudDogbnVtYmVyO1xuICBsYXN0RXJyb3I6IG51bWJlcjtcbiAgYXZlcmFnZVRpbWU6IG51bWJlcjtcbiAgcGF0dGVybjogJ2NvbmNlcHQnIHwgJ21lbW9yeScgfCAnY2FsY3VsYXRpb24nIHwgJ3Vua25vd24nO1xufVxuXG5leHBvcnQgY2xhc3MgQW5hbHl0aWNzRW5naW5lIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luKSB7fVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTZCQ0ZcdTY1RTVcdTdFREZcdThCQTFcbiAgICovXG4gIGdldERhaWx5U3RhdHMoZGF5czogbnVtYmVyID0gMzApOiBEYWlseVN0YXRzW10ge1xuICAgIGNvbnN0IGxvZ3MgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyWydyZXZpZXdMb2dzJ10gfHwgW107XG4gICAgY29uc3Qgc3RhdHM6IE1hcDxzdHJpbmcsIERhaWx5U3RhdHM+ID0gbmV3IE1hcCgpO1xuXG4gICAgLy8gXHU1MjFEXHU1OUNCXHU1MzE2XHU2NzAwXHU4RkQxTlx1NTkyOVx1NzY4NFx1NjU3MFx1NjM2RVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF5czsgaSsrKSB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGkpO1xuICAgICAgY29uc3QgZGF0ZUtleSA9IGRhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgXG4gICAgICBzdGF0cy5zZXQoZGF0ZUtleSwge1xuICAgICAgICBkYXRlOiBkYXRlS2V5LFxuICAgICAgICByZXZpZXdlZDogMCxcbiAgICAgICAgY29ycmVjdENvdW50OiAwLFxuICAgICAgICBjb3JyZWN0UmF0ZTogMCxcbiAgICAgICAgdGltZVNwZW50OiAwLFxuICAgICAgICBuZXdDYXJkczogMFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU3RURGXHU4QkExXHU1OTBEXHU0RTYwXHU4QkIwXHU1RjU1XG4gICAgbG9ncy5mb3JFYWNoKGxvZyA9PiB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUobG9nLnRpbWVzdGFtcCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgY29uc3Qgc3RhdCA9IHN0YXRzLmdldChkYXRlKTtcbiAgICAgIGlmICghc3RhdCkgcmV0dXJuO1xuXG4gICAgICBzdGF0LnJldmlld2VkKys7XG4gICAgICBzdGF0LnRpbWVTcGVudCArPSBsb2cucmVzcG9uc2UudGltZVNwZW50O1xuXG4gICAgICAvLyBcdTUyMjRcdTY1QURcdTY2MkZcdTU0MjZcdTZCNjNcdTc4NkVcbiAgICAgIGlmIChsb2cucmVzcG9uc2UuZWFzZSA9PT0gJ2dvb2QnIHx8IGxvZy5yZXNwb25zZS5lYXNlID09PSAnZWFzeScpIHtcbiAgICAgICAgc3RhdC5jb3JyZWN0Q291bnQrKztcbiAgICAgIH0gZWxzZSBpZiAobG9nLnJlc3BvbnNlLmVhc2UgPT09ICdoYXJkJykge1xuICAgICAgICBzdGF0LmNvcnJlY3RDb3VudCArPSAwLjU7XG4gICAgICB9XG5cbiAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjYyRlx1NjVCMFx1NTM2MVx1NzI0N1x1RkYwOFx1N0IyQ1x1NEUwMFx1NkIyMVx1NTkwRFx1NEU2MFx1RkYwOVxuICAgICAgY29uc3QgY2FyZCA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0Rmxhc2hjYXJkKGxvZy5mbGFzaGNhcmRJZCk7XG4gICAgICBpZiAoY2FyZCAmJiBjYXJkLnN0YXRzLnRvdGFsUmV2aWV3cyA9PT0gMSkge1xuICAgICAgICBzdGF0Lm5ld0NhcmRzKys7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBcdThCQTFcdTdCOTdcdTZCNjNcdTc4NkVcdTczODdcbiAgICBzdGF0cy5mb3JFYWNoKHN0YXQgPT4ge1xuICAgICAgaWYgKHN0YXQucmV2aWV3ZWQgPiAwKSB7XG4gICAgICAgIHN0YXQuY29ycmVjdFJhdGUgPSBzdGF0LmNvcnJlY3RDb3VudCAvIHN0YXQucmV2aWV3ZWQ7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gQXJyYXkuZnJvbShzdGF0cy52YWx1ZXMoKSkuc29ydCgoYSwgYikgPT4gXG4gICAgICBhLmRhdGUubG9jYWxlQ29tcGFyZShiLmRhdGUpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTU0NjhcdTdFREZcdThCQTFcbiAgICovXG4gIGdldFdlZWtseVN0YXRzKCk6IHsgdGhpc1dlZWs6IFdlZWtseVN0YXRzOyBsYXN0V2VlazogV2Vla2x5U3RhdHMgfSB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBcbiAgICAvLyBcdTY3MkNcdTU0NjhcbiAgICBjb25zdCB0aGlzV2Vla1N0YXJ0ID0gbmV3IERhdGUobm93KTtcbiAgICB0aGlzV2Vla1N0YXJ0LnNldERhdGUobm93LmdldERhdGUoKSAtIG5vdy5nZXREYXkoKSk7XG4gICAgdGhpc1dlZWtTdGFydC5zZXRIb3VycygwLCAwLCAwLCAwKTtcblxuICAgIC8vIFx1NEUwQVx1NTQ2OFxuICAgIGNvbnN0IGxhc3RXZWVrU3RhcnQgPSBuZXcgRGF0ZSh0aGlzV2Vla1N0YXJ0KTtcbiAgICBsYXN0V2Vla1N0YXJ0LnNldERhdGUobGFzdFdlZWtTdGFydC5nZXREYXRlKCkgLSA3KTtcblxuICAgIGNvbnN0IHRoaXNXZWVrID0gdGhpcy5jYWxjdWxhdGVXZWVrU3RhdHModGhpc1dlZWtTdGFydCk7XG4gICAgY29uc3QgbGFzdFdlZWsgPSB0aGlzLmNhbGN1bGF0ZVdlZWtTdGF0cyhsYXN0V2Vla1N0YXJ0KTtcblxuICAgIHJldHVybiB7IHRoaXNXZWVrLCBsYXN0V2VlayB9O1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVXZWVrU3RhdHMoc3RhcnREYXRlOiBEYXRlKTogV2Vla2x5U3RhdHMge1xuICAgIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZShzdGFydERhdGUpO1xuICAgIGVuZERhdGUuc2V0RGF0ZShlbmREYXRlLmdldERhdGUoKSArIDcpO1xuXG4gICAgY29uc3QgbG9ncyA9ICh0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyWydyZXZpZXdMb2dzJ10gfHwgW10pLmZpbHRlcihcbiAgICAgIGxvZyA9PiBsb2cudGltZXN0YW1wID49IHN0YXJ0RGF0ZS5nZXRUaW1lKCkgJiYgbG9nLnRpbWVzdGFtcCA8IGVuZERhdGUuZ2V0VGltZSgpXG4gICAgKTtcblxuICAgIGxldCB0b3RhbENvcnJlY3QgPSAwO1xuICAgIGxldCB0b3RhbFRpbWVTcGVudCA9IDA7XG5cbiAgICBsb2dzLmZvckVhY2gobG9nID0+IHtcbiAgICAgIHRvdGFsVGltZVNwZW50ICs9IGxvZy5yZXNwb25zZS50aW1lU3BlbnQ7XG4gICAgICBpZiAobG9nLnJlc3BvbnNlLmVhc2UgPT09ICdnb29kJyB8fCBsb2cucmVzcG9uc2UuZWFzZSA9PT0gJ2Vhc3knKSB7XG4gICAgICAgIHRvdGFsQ29ycmVjdCsrO1xuICAgICAgfSBlbHNlIGlmIChsb2cucmVzcG9uc2UuZWFzZSA9PT0gJ2hhcmQnKSB7XG4gICAgICAgIHRvdGFsQ29ycmVjdCArPSAwLjU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBhdmVyYWdlQ29ycmVjdFJhdGUgPSBsb2dzLmxlbmd0aCA+IDAgPyB0b3RhbENvcnJlY3QgLyBsb2dzLmxlbmd0aCA6IDA7XG4gICAgY29uc3Qgc3RyZWFrID0gdGhpcy5jYWxjdWxhdGVTdHJlYWsoKTtcblxuICAgIHJldHVybiB7XG4gICAgICBzdGFydERhdGU6IHN0YXJ0RGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXG4gICAgICBlbmREYXRlOiBlbmREYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcbiAgICAgIHRvdGFsUmV2aWV3czogbG9ncy5sZW5ndGgsXG4gICAgICBhdmVyYWdlQ29ycmVjdFJhdGUsXG4gICAgICB0b3RhbFRpbWVTcGVudCxcbiAgICAgIHN0cmVha1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogXHU4QkExXHU3Qjk3XHU4RkRFXHU3RUVEXHU1QjY2XHU0RTYwXHU1OTI5XHU2NTcwXG4gICAqL1xuICBjYWxjdWxhdGVTdHJlYWsoKTogbnVtYmVyIHtcbiAgICBjb25zdCBsb2dzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlclsncmV2aWV3TG9ncyddIHx8IFtdO1xuICAgIGlmIChsb2dzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDA7XG5cbiAgICBjb25zdCBkYXRlcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGxvZ3MuZm9yRWFjaChsb2cgPT4ge1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGxvZy50aW1lc3RhbXApLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgIGRhdGVzLmFkZChkYXRlKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHNvcnRlZERhdGVzID0gQXJyYXkuZnJvbShkYXRlcykuc29ydCgpLnJldmVyc2UoKTtcbiAgICBsZXQgc3RyZWFrID0gMDtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3J0ZWREYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZXhwZWN0ZWREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgIGV4cGVjdGVkRGF0ZS5zZXREYXRlKGV4cGVjdGVkRGF0ZS5nZXREYXRlKCkgLSBpKTtcbiAgICAgIGNvbnN0IGV4cGVjdGVkID0gZXhwZWN0ZWREYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcblxuICAgICAgaWYgKHNvcnRlZERhdGVzW2ldID09PSBleHBlY3RlZCkge1xuICAgICAgICBzdHJlYWsrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzdHJlYWs7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU1MzYxXHU3RUM0XHU3RURGXHU4QkExXG4gICAqL1xuICBnZXREZWNrU3RhdHMoKTogRGVja1N0YXRzW10ge1xuICAgIGNvbnN0IGNhcmRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRBbGxGbGFzaGNhcmRzKCk7XG4gICAgY29uc3QgZGVja01hcCA9IG5ldyBNYXA8c3RyaW5nLCBGbGFzaGNhcmRbXT4oKTtcblxuICAgIC8vIFx1NjMwOVx1NTM2MVx1N0VDNFx1NTIwNlx1N0VDNFxuICAgIGNhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICBpZiAoIWRlY2tNYXAuaGFzKGNhcmQuZGVjaykpIHtcbiAgICAgICAgZGVja01hcC5zZXQoY2FyZC5kZWNrLCBbXSk7XG4gICAgICB9XG4gICAgICBkZWNrTWFwLmdldChjYXJkLmRlY2spIS5wdXNoKGNhcmQpO1xuICAgIH0pO1xuXG4gICAgLy8gXHU4QkExXHU3Qjk3XHU2QkNGXHU0RTJBXHU1MzYxXHU3RUM0XHU3Njg0XHU3RURGXHU4QkExXG4gICAgY29uc3Qgc3RhdHM6IERlY2tTdGF0c1tdID0gW107XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblxuICAgIGRlY2tNYXAuZm9yRWFjaCgoZGVja0NhcmRzLCBkZWNrTmFtZSkgPT4ge1xuICAgICAgY29uc3QgZHVlQ2FyZHMgPSBkZWNrQ2FyZHMuZmlsdGVyKGMgPT4gYy5zY2hlZHVsaW5nLmR1ZSA8PSBub3cpLmxlbmd0aDtcbiAgICAgIGNvbnN0IG5ld0NhcmRzID0gZGVja0NhcmRzLmZpbHRlcihjID0+IGMuc2NoZWR1bGluZy5zdGF0ZSA9PT0gJ25ldycpLmxlbmd0aDtcbiAgICAgIFxuICAgICAgY29uc3QgdG90YWxDb3JyZWN0ID0gZGVja0NhcmRzLnJlZHVjZShcbiAgICAgICAgKHN1bSwgYykgPT4gc3VtICsgYy5zdGF0cy5jb3JyZWN0Q291bnQsIDBcbiAgICAgICk7XG4gICAgICBjb25zdCB0b3RhbFJldmlld3MgPSBkZWNrQ2FyZHMucmVkdWNlKFxuICAgICAgICAoc3VtLCBjKSA9PiBzdW0gKyBjLnN0YXRzLnRvdGFsUmV2aWV3cywgMFxuICAgICAgKTtcbiAgICAgIGNvbnN0IGNvcnJlY3RSYXRlID0gdG90YWxSZXZpZXdzID4gMCA/IHRvdGFsQ29ycmVjdCAvIHRvdGFsUmV2aWV3cyA6IDA7XG5cbiAgICAgIGNvbnN0IHRvdGFsSW50ZXJ2YWwgPSBkZWNrQ2FyZHMucmVkdWNlKFxuICAgICAgICAoc3VtLCBjKSA9PiBzdW0gKyBjLnNjaGVkdWxpbmcuaW50ZXJ2YWwsIDBcbiAgICAgICk7XG4gICAgICBjb25zdCBhdmVyYWdlSW50ZXJ2YWwgPSBkZWNrQ2FyZHMubGVuZ3RoID4gMCBcbiAgICAgICAgPyB0b3RhbEludGVydmFsIC8gZGVja0NhcmRzLmxlbmd0aCBcbiAgICAgICAgOiAwO1xuXG4gICAgICBzdGF0cy5wdXNoKHtcbiAgICAgICAgZGVja05hbWUsXG4gICAgICAgIHRvdGFsQ2FyZHM6IGRlY2tDYXJkcy5sZW5ndGgsXG4gICAgICAgIGR1ZUNhcmRzLFxuICAgICAgICBuZXdDYXJkcyxcbiAgICAgICAgY29ycmVjdFJhdGUsXG4gICAgICAgIGF2ZXJhZ2VJbnRlcnZhbFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc3RhdHMuc29ydCgoYSwgYikgPT4gYi50b3RhbENhcmRzIC0gYS50b3RhbENhcmRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTk2QkVcdTcwQjlcdTUzNjFcdTcyNDdcbiAgICovXG4gIGdldERpZmZpY3VsdENhcmRzKGxpbWl0OiBudW1iZXIgPSAxMCk6IERpZmZpY3VsdENhcmRbXSB7XG4gICAgY29uc3QgY2FyZHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldEFsbEZsYXNoY2FyZHMoKTtcbiAgICBjb25zdCBsb2dzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlclsncmV2aWV3TG9ncyddIHx8IFtdO1xuXG4gICAgY29uc3QgZGlmZmljdWx0Q2FyZHM6IERpZmZpY3VsdENhcmRbXSA9IFtdO1xuXG4gICAgY2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgIGNvbnN0IGNhcmRMb2dzID0gbG9ncy5maWx0ZXIobG9nID0+IGxvZy5mbGFzaGNhcmRJZCA9PT0gY2FyZC5pZCk7XG4gICAgICBcbiAgICAgIC8vIFx1OEJBMVx1N0I5N1x1OTUxOVx1OEJFRlx1NkIyMVx1NjU3MFxuICAgICAgY29uc3QgZXJyb3JDb3VudCA9IGNhcmRMb2dzLmZpbHRlcihcbiAgICAgICAgbG9nID0+IGxvZy5yZXNwb25zZS5lYXNlID09PSAnYWdhaW4nXG4gICAgICApLmxlbmd0aDtcblxuICAgICAgaWYgKGVycm9yQ291bnQgPT09IDAgJiYgY2FyZC5zdGF0cy5kaWZmaWN1bHR5IDwgMC43KSByZXR1cm47XG5cbiAgICAgIC8vIFx1NjcwMFx1NTQwRVx1NEUwMFx1NkIyMVx1OTUxOVx1OEJFRlxuICAgICAgY29uc3QgZXJyb3JMb2dzID0gY2FyZExvZ3MuZmlsdGVyKGxvZyA9PiBsb2cucmVzcG9uc2UuZWFzZSA9PT0gJ2FnYWluJyk7XG4gICAgICBjb25zdCBsYXN0RXJyb3IgPSBlcnJvckxvZ3MubGVuZ3RoID4gMCBcbiAgICAgICAgPyBlcnJvckxvZ3NbZXJyb3JMb2dzLmxlbmd0aCAtIDFdLnRpbWVzdGFtcCBcbiAgICAgICAgOiAwO1xuXG4gICAgICAvLyBcdTUyMjRcdTY1QURcdTk1MTlcdThCRUZcdTZBMjFcdTVGMEZcbiAgICAgIGNvbnN0IHBhdHRlcm4gPSB0aGlzLmRldGVjdEVycm9yUGF0dGVybihjYXJkLCBjYXJkTG9ncyk7XG5cbiAgICAgIGRpZmZpY3VsdENhcmRzLnB1c2goe1xuICAgICAgICBjYXJkLFxuICAgICAgICBlcnJvckNvdW50LFxuICAgICAgICBsYXN0RXJyb3IsXG4gICAgICAgIGF2ZXJhZ2VUaW1lOiBjYXJkLnN0YXRzLmF2ZXJhZ2VUaW1lLFxuICAgICAgICBwYXR0ZXJuXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIFx1NjM5Mlx1NUU4Rlx1RkYxQVx1OTUxOVx1OEJFRlx1NkIyMVx1NjU3MCA+IFx1OTZCRVx1NUVBNiA+IFx1NjcwMFx1OEZEMVx1OTUxOVx1OEJFRlxuICAgIHJldHVybiBkaWZmaWN1bHRDYXJkc1xuICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgaWYgKGEuZXJyb3JDb3VudCAhPT0gYi5lcnJvckNvdW50KSB7XG4gICAgICAgICAgcmV0dXJuIGIuZXJyb3JDb3VudCAtIGEuZXJyb3JDb3VudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYS5jYXJkLnN0YXRzLmRpZmZpY3VsdHkgIT09IGIuY2FyZC5zdGF0cy5kaWZmaWN1bHR5KSB7XG4gICAgICAgICAgcmV0dXJuIGIuY2FyZC5zdGF0cy5kaWZmaWN1bHR5IC0gYS5jYXJkLnN0YXRzLmRpZmZpY3VsdHk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGIubGFzdEVycm9yIC0gYS5sYXN0RXJyb3I7XG4gICAgICB9KVxuICAgICAgLnNsaWNlKDAsIGxpbWl0KTtcbiAgfVxuXG4gIHByaXZhdGUgZGV0ZWN0RXJyb3JQYXR0ZXJuKFxuICAgIGNhcmQ6IEZsYXNoY2FyZCxcbiAgICBsb2dzOiBSZXZpZXdMb2dbXVxuICApOiBEaWZmaWN1bHRDYXJkWydwYXR0ZXJuJ10ge1xuICAgIGlmIChsb2dzLmxlbmd0aCA8IDMpIHJldHVybiAndW5rbm93bic7XG5cbiAgICAvLyBcdTY1RjZcdTk1RjRcdThGQzdcdTk1N0YgLT4gXHU4QkExXHU3Qjk3XHU5NUVFXHU5ODk4XG4gICAgaWYgKGNhcmQuc3RhdHMuYXZlcmFnZVRpbWUgPiA2MCkge1xuICAgICAgcmV0dXJuICdjYWxjdWxhdGlvbic7XG4gICAgfVxuXG4gICAgLy8gXHU5NUY0XHU5Njk0XHU1Rjg4XHU3N0VEXHU0RUNEXHU3MTM2XHU5NTE5XHU4QkVGIC0+IFx1OEJCMFx1NUZDNlx1OTVFRVx1OTg5OFxuICAgIGlmIChjYXJkLnNjaGVkdWxpbmcuaW50ZXJ2YWwgPCAzICYmIGNhcmQuc2NoZWR1bGluZy5sYXBzZXMgPiAyKSB7XG4gICAgICByZXR1cm4gJ21lbW9yeSc7XG4gICAgfVxuXG4gICAgLy8gXHU2MzAxXHU3RUVEXHU1OTMxXHU4RDI1IC0+IFx1Njk4Mlx1NUZGNVx1NzQwNlx1ODlFM1x1OTVFRVx1OTg5OFxuICAgIGNvbnN0IHJlY2VudExvZ3MgPSBsb2dzLnNsaWNlKC01KTtcbiAgICBjb25zdCByZWNlbnRGYWlsdXJlcyA9IHJlY2VudExvZ3MuZmlsdGVyKFxuICAgICAgbG9nID0+IGxvZy5yZXNwb25zZS5lYXNlID09PSAnYWdhaW4nXG4gICAgKS5sZW5ndGg7XG4gICAgXG4gICAgaWYgKHJlY2VudEZhaWx1cmVzID49IDMpIHtcbiAgICAgIHJldHVybiAnY29uY2VwdCc7XG4gICAgfVxuXG4gICAgcmV0dXJuICd1bmtub3duJztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTY4MDdcdTdCN0VcdTdFREZcdThCQTFcbiAgICovXG4gIGdldFRhZ1N0YXRzKCk6IHsgdGFnOiBzdHJpbmc7IGNvdW50OiBudW1iZXI7IGNvcnJlY3RSYXRlOiBudW1iZXIgfVtdIHtcbiAgICBjb25zdCBjYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgIGNvbnN0IHRhZ01hcCA9IG5ldyBNYXA8c3RyaW5nLCB7IHRvdGFsOiBudW1iZXI7IGNvcnJlY3Q6IG51bWJlcjsgcmV2aWV3czogbnVtYmVyIH0+KCk7XG5cbiAgICBjYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xuICAgICAgY2FyZC50YWdzLmZvckVhY2godGFnID0+IHtcbiAgICAgICAgaWYgKCF0YWdNYXAuaGFzKHRhZykpIHtcbiAgICAgICAgICB0YWdNYXAuc2V0KHRhZywgeyB0b3RhbDogMCwgY29ycmVjdDogMCwgcmV2aWV3czogMCB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0ID0gdGFnTWFwLmdldCh0YWcpITtcbiAgICAgICAgc3RhdC50b3RhbCsrO1xuICAgICAgICBzdGF0LmNvcnJlY3QgKz0gY2FyZC5zdGF0cy5jb3JyZWN0Q291bnQ7XG4gICAgICAgIHN0YXQucmV2aWV3cyArPSBjYXJkLnN0YXRzLnRvdGFsUmV2aWV3cztcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc3RhdHMgPSBBcnJheS5mcm9tKHRhZ01hcC5lbnRyaWVzKCkpLm1hcCgoW3RhZywgZGF0YV0pID0+ICh7XG4gICAgICB0YWcsXG4gICAgICBjb3VudDogZGF0YS50b3RhbCxcbiAgICAgIGNvcnJlY3RSYXRlOiBkYXRhLnJldmlld3MgPiAwID8gZGF0YS5jb3JyZWN0IC8gZGF0YS5yZXZpZXdzIDogMFxuICAgIH0pKTtcblxuICAgIHJldHVybiBzdGF0cy5zb3J0KChhLCBiKSA9PiBiLmNvdW50IC0gYS5jb3VudCk7XG4gIH1cblxuICAvKipcbiAgICogXHU3NTFGXHU2MjEwXHU1QjY2XHU0RTYwXHU2MkE1XHU1NDRBXG4gICAqL1xuICBnZW5lcmF0ZVJlcG9ydChkYXlzOiBudW1iZXIgPSA3KTogc3RyaW5nIHtcbiAgICBjb25zdCBkYWlseVN0YXRzID0gdGhpcy5nZXREYWlseVN0YXRzKGRheXMpO1xuICAgIGNvbnN0IHsgdGhpc1dlZWssIGxhc3RXZWVrIH0gPSB0aGlzLmdldFdlZWtseVN0YXRzKCk7XG4gICAgY29uc3QgZGlmZmljdWx0Q2FyZHMgPSB0aGlzLmdldERpZmZpY3VsdENhcmRzKDUpO1xuICAgIGNvbnN0IGRlY2tTdGF0cyA9IHRoaXMuZ2V0RGVja1N0YXRzKCk7XG5cbiAgICAvLyBcdThCQTFcdTdCOTdcdTYwM0JcdTg5QzhcdTY1NzBcdTYzNkVcbiAgICBjb25zdCB0b3RhbFJldmlld2VkID0gZGFpbHlTdGF0cy5yZWR1Y2UoKHN1bSwgcykgPT4gc3VtICsgcy5yZXZpZXdlZCwgMCk7XG4gICAgY29uc3QgdG90YWxDb3JyZWN0ID0gZGFpbHlTdGF0cy5yZWR1Y2UoKHN1bSwgcykgPT4gc3VtICsgcy5jb3JyZWN0Q291bnQsIDApO1xuICAgIGNvbnN0IGF2ZXJhZ2VDb3JyZWN0UmF0ZSA9IHRvdGFsUmV2aWV3ZWQgPiAwID8gdG90YWxDb3JyZWN0IC8gdG90YWxSZXZpZXdlZCA6IDA7XG4gICAgY29uc3QgdG90YWxUaW1lID0gZGFpbHlTdGF0cy5yZWR1Y2UoKHN1bSwgcykgPT4gc3VtICsgcy50aW1lU3BlbnQsIDApO1xuXG4gICAgLy8gXHU4RDhCXHU1MkJGXHU1MjA2XHU2NzkwXG4gICAgY29uc3QgcmVjZW50RGF5cyA9IGRhaWx5U3RhdHMuc2xpY2UoLTcpO1xuICAgIGNvbnN0IG9sZGVyRGF5cyA9IGRhaWx5U3RhdHMuc2xpY2UoLTE0LCAtNyk7XG4gICAgY29uc3QgcmVjZW50UmF0ZSA9IHRoaXMuY2FsY3VsYXRlQXZlcmFnZVJhdGUocmVjZW50RGF5cyk7XG4gICAgY29uc3Qgb2xkZXJSYXRlID0gdGhpcy5jYWxjdWxhdGVBdmVyYWdlUmF0ZShvbGRlckRheXMpO1xuICAgIGNvbnN0IHRyZW5kID0gcmVjZW50UmF0ZSA+IG9sZGVyUmF0ZSA/ICdcdUQ4M0RcdURDQzggaW1wcm92aW5nJyA6IFxuICAgICAgICAgICAgICAgICAgcmVjZW50UmF0ZSA8IG9sZGVyUmF0ZSA/ICdcdUQ4M0RcdURDQzkgZGVjbGluaW5nJyA6ICdcdTI3QTFcdUZFMEYgc3RhYmxlJztcblxuICAgIGxldCByZXBvcnQgPSBgIyBcdUQ4M0RcdURDQ0EgTGVhcm5pbmcgUmVwb3J0XFxuXFxuYDtcbiAgICByZXBvcnQgKz0gYCoqUGVyaW9kOioqIExhc3QgJHtkYXlzfSBkYXlzXFxuYDtcbiAgICByZXBvcnQgKz0gYCoqR2VuZXJhdGVkOioqICR7bmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygpfVxcblxcbmA7XG5cbiAgICByZXBvcnQgKz0gYCMjIFx1RDgzQ1x1REZBRiBPdmVyYWxsIFBlcmZvcm1hbmNlXFxuXFxuYDtcbiAgICByZXBvcnQgKz0gYC0gKipDYXJkcyBSZXZpZXdlZDoqKiAke3RvdGFsUmV2aWV3ZWR9XFxuYDtcbiAgICByZXBvcnQgKz0gYC0gKipDb3JyZWN0IFJhdGU6KiogJHsoYXZlcmFnZUNvcnJlY3RSYXRlICogMTAwKS50b0ZpeGVkKDEpfSVcXG5gO1xuICAgIHJlcG9ydCArPSBgLSAqKlN0dWR5IFRpbWU6KiogJHt0aGlzLmZvcm1hdFRpbWUodG90YWxUaW1lKX1cXG5gO1xuICAgIHJlcG9ydCArPSBgLSAqKkN1cnJlbnQgU3RyZWFrOioqICR7dGhpc1dlZWsuc3RyZWFrfSBkYXlzIFx1RDgzRFx1REQyNVxcbmA7XG4gICAgcmVwb3J0ICs9IGAtICoqVHJlbmQ6KiogJHt0cmVuZH1cXG5cXG5gO1xuXG4gICAgcmVwb3J0ICs9IGAjIyBcdUQ4M0RcdURDQzggV2VlayBDb21wYXJpc29uXFxuXFxuYDtcbiAgICByZXBvcnQgKz0gYCMjIyBUaGlzIFdlZWtcXG5gO1xuICAgIHJlcG9ydCArPSBgLSBSZXZpZXdzOiAke3RoaXNXZWVrLnRvdGFsUmV2aWV3c31cXG5gO1xuICAgIHJlcG9ydCArPSBgLSBDb3JyZWN0IFJhdGU6ICR7KHRoaXNXZWVrLmF2ZXJhZ2VDb3JyZWN0UmF0ZSAqIDEwMCkudG9GaXhlZCgxKX0lXFxuYDtcbiAgICByZXBvcnQgKz0gYC0gVGltZTogJHt0aGlzLmZvcm1hdFRpbWUodGhpc1dlZWsudG90YWxUaW1lU3BlbnQpfVxcblxcbmA7XG5cbiAgICByZXBvcnQgKz0gYCMjIyBMYXN0IFdlZWtcXG5gO1xuICAgIHJlcG9ydCArPSBgLSBSZXZpZXdzOiAke2xhc3RXZWVrLnRvdGFsUmV2aWV3c31cXG5gO1xuICAgIHJlcG9ydCArPSBgLSBDb3JyZWN0IFJhdGU6ICR7KGxhc3RXZWVrLmF2ZXJhZ2VDb3JyZWN0UmF0ZSAqIDEwMCkudG9GaXhlZCgxKX0lXFxuYDtcbiAgICByZXBvcnQgKz0gYC0gVGltZTogJHt0aGlzLmZvcm1hdFRpbWUobGFzdFdlZWsudG90YWxUaW1lU3BlbnQpfVxcblxcbmA7XG5cbiAgICBjb25zdCByZXZpZXdDaGFuZ2UgPSB0aGlzV2Vlay50b3RhbFJldmlld3MgLSBsYXN0V2Vlay50b3RhbFJldmlld3M7XG4gICAgY29uc3QgcmF0ZUNoYW5nZSA9ICh0aGlzV2Vlay5hdmVyYWdlQ29ycmVjdFJhdGUgLSBsYXN0V2Vlay5hdmVyYWdlQ29ycmVjdFJhdGUpICogMTAwO1xuICAgIFxuICAgIGlmIChyZXZpZXdDaGFuZ2UgPiAwKSB7XG4gICAgICByZXBvcnQgKz0gYFx1RDgzRFx1RENBQSBZb3UgcmV2aWV3ZWQgKioke3Jldmlld0NoYW5nZX0gbW9yZSBjYXJkcyoqIHRoaXMgd2VlayFcXG5gO1xuICAgIH1cbiAgICBpZiAocmF0ZUNoYW5nZSA+IDUpIHtcbiAgICAgIHJlcG9ydCArPSBgXHVEODNDXHVERjg5IFlvdXIgYWNjdXJhY3kgaW1wcm92ZWQgYnkgKioke3JhdGVDaGFuZ2UudG9GaXhlZCgxKX0lKiohXFxuYDtcbiAgICB9XG4gICAgcmVwb3J0ICs9IGBcXG5gO1xuXG4gICAgaWYgKGRpZmZpY3VsdENhcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJlcG9ydCArPSBgIyMgXHUyNkEwXHVGRTBGIENhcmRzIE5lZWRpbmcgQXR0ZW50aW9uXFxuXFxuYDtcbiAgICAgIGRpZmZpY3VsdENhcmRzLmZvckVhY2goKGRjLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhdHRlcm5FbW9qaSA9IHtcbiAgICAgICAgICAnY29uY2VwdCc6ICdcdUQ4M0VcdURERTAnLFxuICAgICAgICAgICdtZW1vcnknOiAnXHVEODNEXHVEQ0FEJyxcbiAgICAgICAgICAnY2FsY3VsYXRpb24nOiAnXHVEODNEXHVERDIyJyxcbiAgICAgICAgICAndW5rbm93bic6ICdcdTI3NTMnXG4gICAgICAgIH07XG4gICAgICAgIHJlcG9ydCArPSBgJHtpICsgMX0uICoqJHtkYy5jYXJkLmZyb250LnN1YnN0cmluZygwLCA1MCl9JHtkYy5jYXJkLmZyb250Lmxlbmd0aCA+IDUwID8gJy4uLicgOiAnJ30qKlxcbmA7XG4gICAgICAgIHJlcG9ydCArPSBgICAgLSBFcnJvcnM6ICR7ZGMuZXJyb3JDb3VudH0gfCBQYXR0ZXJuOiAke3BhdHRlcm5FbW9qaVtkYy5wYXR0ZXJuXX0gJHtkYy5wYXR0ZXJufVxcbmA7XG4gICAgICAgIHJlcG9ydCArPSBgICAgLSBBdmcgVGltZTogJHtkYy5hdmVyYWdlVGltZS50b0ZpeGVkKDEpfXMgfCBEaWZmaWN1bHR5OiAkeyhkYy5jYXJkLnN0YXRzLmRpZmZpY3VsdHkgKiAxMDApLnRvRml4ZWQoMCl9JVxcblxcbmA7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXBvcnQgKz0gYCMjIFx1RDgzRFx1RENEQSBEZWNrIE92ZXJ2aWV3XFxuXFxuYDtcbiAgICBkZWNrU3RhdHMuZm9yRWFjaChkZWNrID0+IHtcbiAgICAgIHJlcG9ydCArPSBgIyMjICR7ZGVjay5kZWNrTmFtZX1cXG5gO1xuICAgICAgcmVwb3J0ICs9IGAtIFRvdGFsOiAke2RlY2sudG90YWxDYXJkc30gfCBEdWU6ICR7ZGVjay5kdWVDYXJkc30gfCBOZXc6ICR7ZGVjay5uZXdDYXJkc31cXG5gO1xuICAgICAgcmVwb3J0ICs9IGAtIENvcnJlY3QgUmF0ZTogJHsoZGVjay5jb3JyZWN0UmF0ZSAqIDEwMCkudG9GaXhlZCgxKX0lXFxuYDtcbiAgICAgIHJlcG9ydCArPSBgLSBBdmcgSW50ZXJ2YWw6ICR7ZGVjay5hdmVyYWdlSW50ZXJ2YWwudG9GaXhlZCgxKX0gZGF5c1xcblxcbmA7XG4gICAgfSk7XG5cbiAgICByZXBvcnQgKz0gYCMjIFx1RDgzRFx1RENBMSBSZWNvbW1lbmRhdGlvbnNcXG5cXG5gO1xuXG4gICAgLy8gXHU3NTFGXHU2MjEwXHU1RUZBXHU4QkFFXG4gICAgaWYgKGF2ZXJhZ2VDb3JyZWN0UmF0ZSA8IDAuNykge1xuICAgICAgcmVwb3J0ICs9IGAtIFx1MjZBMSBZb3VyIGNvcnJlY3QgcmF0ZSBpcyBiZWxvdyA3MCUuIENvbnNpZGVyIHJldmlld2luZyBkaWZmaWN1bHQgY2FyZHMgbW9yZSBmcmVxdWVudGx5LlxcbmA7XG4gICAgfVxuICAgIGlmIChkaWZmaWN1bHRDYXJkcy5sZW5ndGggPiA1KSB7XG4gICAgICByZXBvcnQgKz0gYC0gXHVEODNEXHVEQ0Q2IFlvdSBoYXZlIG1hbnkgZGlmZmljdWx0IGNhcmRzLiBUcnkgYnJlYWtpbmcgY29tcGxleCBjb25jZXB0cyBpbnRvIHNtYWxsZXIgZmxhc2hjYXJkcy5cXG5gO1xuICAgIH1cbiAgICBpZiAodGhpc1dlZWsuc3RyZWFrID4gNykge1xuICAgICAgcmVwb3J0ICs9IGAtIFx1RDgzQ1x1REY4OSBBbWF6aW5nIHN0cmVhayEgS2VlcCB1cCB0aGUgY29uc2lzdGVuY3khXFxuYDtcbiAgICB9XG4gICAgaWYgKHRvdGFsVGltZSAvIHRvdGFsUmV2aWV3ZWQgPiAzMCkge1xuICAgICAgcmVwb3J0ICs9IGAtIFx1MjNGMVx1RkUwRiBBdmVyYWdlIHJldmlldyB0aW1lIGlzIGhpZ2guIENvbnNpZGVyIHNpbXBsaWZ5aW5nIGNhcmQgY29udGVudC5cXG5gO1xuICAgIH1cbiAgICBpZiAoZGVja1N0YXRzLnNvbWUoZCA9PiBkLmR1ZUNhcmRzID4gZC50b3RhbENhcmRzICogMC41KSkge1xuICAgICAgcmVwb3J0ICs9IGAtIFx1RDgzRFx1RENDNSBTb21lIGRlY2tzIGhhdmUgbWFueSBvdmVyZHVlIGNhcmRzLiBGb2N1cyBvbiBjYXRjaGluZyB1cCB3aXRoIHRoZXNlLlxcbmA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcG9ydDtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlQXZlcmFnZVJhdGUoc3RhdHM6IERhaWx5U3RhdHNbXSk6IG51bWJlciB7XG4gICAgY29uc3QgdG90YWwgPSBzdGF0cy5yZWR1Y2UoKHN1bSwgcykgPT4gc3VtICsgcy5yZXZpZXdlZCwgMCk7XG4gICAgY29uc3QgY29ycmVjdCA9IHN0YXRzLnJlZHVjZSgoc3VtLCBzKSA9PiBzdW0gKyBzLmNvcnJlY3RDb3VudCwgMCk7XG4gICAgcmV0dXJuIHRvdGFsID4gMCA/IGNvcnJlY3QgLyB0b3RhbCA6IDA7XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdFRpbWUoc2Vjb25kczogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDM2MDApO1xuICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKChzZWNvbmRzICUgMzYwMCkgLyA2MCk7XG4gICAgXG4gICAgaWYgKGhvdXJzID4gMCkge1xuICAgICAgcmV0dXJuIGAke2hvdXJzfWggJHttaW51dGVzfW1gO1xuICAgIH1cbiAgICByZXR1cm4gYCR7bWludXRlc31tYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTcwRURcdTUyOUJcdTU2RkVcdTY1NzBcdTYzNkVcdUZGMDhcdTc1MjhcdTRFOEVcdTY1RTVcdTUzODZcdTg5QzZcdTU2RkVcdUZGMDlcbiAgICovXG4gIGdldEhlYXRtYXBEYXRhKGRheXM6IG51bWJlciA9IDkwKTogeyBkYXRlOiBzdHJpbmc7IGNvdW50OiBudW1iZXI7IGludGVuc2l0eTogbnVtYmVyIH1bXSB7XG4gICAgY29uc3QgZGFpbHlTdGF0cyA9IHRoaXMuZ2V0RGFpbHlTdGF0cyhkYXlzKTtcbiAgICBjb25zdCBtYXhSZXZpZXdzID0gTWF0aC5tYXgoLi4uZGFpbHlTdGF0cy5tYXAocyA9PiBzLnJldmlld2VkKSk7XG5cbiAgICByZXR1cm4gZGFpbHlTdGF0cy5tYXAoc3RhdCA9PiAoe1xuICAgICAgZGF0ZTogc3RhdC5kYXRlLFxuICAgICAgY291bnQ6IHN0YXQucmV2aWV3ZWQsXG4gICAgICBpbnRlbnNpdHk6IG1heFJldmlld3MgPiAwID8gc3RhdC5yZXZpZXdlZCAvIG1heFJldmlld3MgOiAwXG4gICAgfSkpO1xuICB9XG59IiwgImltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcblxuZXhwb3J0IGludGVyZmFjZSBDb250ZW50VW5pdCB7XG4gIGlkOiBzdHJpbmc7XG4gIHR5cGU6ICdoaWdobGlnaHQnIHwgJ2JvbGQnIHwgJ3RhZycgfCAnY3VzdG9tJyB8ICdRQScgfCAnY2xvemUnfCd0ZXh0JzsgLy8gXHU2REZCXHU1MkEwIHFhIFx1NTQ4QyBjbG96ZSBcdTdDN0JcdTU3OEJcbiAgY29udGVudDogc3RyaW5nO1xuICBhbnN3ZXI/OiBzdHJpbmc7IC8vIFx1NzUyOFx1NEU4RSBRQSBcdTUzNjFcdTcyNDdcdTc2ODRcdTdCNTRcdTY4NDhcbiAgZnVsbENvbnRleHQ/OiBzdHJpbmc7XG4gIHNvdXJjZToge1xuICAgIGZpbGU6IHN0cmluZztcbiAgICBwb3NpdGlvbjoge1xuICAgICAgc3RhcnQ6IG51bWJlcjtcbiAgICAgIGVuZDogbnVtYmVyO1xuICAgICAgbGluZTogbnVtYmVyO1xuICAgIH07XG4gICAgYmxvY2tJZD86IHN0cmluZztcbiAgICBoZWFkaW5nPzogc3RyaW5nO1xuICAgIGFuY2hvckxpbms6IHN0cmluZztcbiAgfTtcbiAgZXh0cmFjdFJ1bGU6IHtcbiAgICBydWxlSWQ6IHN0cmluZztcbiAgICBydWxlTmFtZTogc3RyaW5nO1xuICAgIGV4dHJhY3RlZEJ5OiAnYXV0bycgfCAnbWFudWFsJztcbiAgfTtcbiAgbWV0YWRhdGE6IHtcbiAgICBjcmVhdGVkQXQ6IG51bWJlcjtcbiAgICB1cGRhdGVkQXQ6IG51bWJlcjtcbiAgICB0YWdzOiBzdHJpbmdbXTtcbiAgICBjb2xvcj86IHN0cmluZztcbiAgfTtcbiAgYW5ub3RhdGlvbklkPzogc3RyaW5nO1xuICBmbGFzaGNhcmRJZHM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgY2xhc3MgRGF0YU1hbmFnZXIge1xuICBwcml2YXRlIGRhdGFGb2xkZXI6IHN0cmluZztcbiAgcHJpdmF0ZSBjb250ZW50VW5pdHM6IE1hcDxzdHJpbmcsIENvbnRlbnRVbml0PiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBmaWxlSW5kZXg6IE1hcDxzdHJpbmcsIHN0cmluZ1tdPiA9IG5ldyBNYXAoKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGFwcDogQXBwLFxuICAgIHByaXZhdGUgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpblxuICApIHtcbiAgICB0aGlzLmRhdGFGb2xkZXIgPSBgJHt0aGlzLmFwcC52YXVsdC5jb25maWdEaXJ9L3BsdWdpbnMvbGVhcm5pbmctc3lzdGVtL2RhdGFgO1xuICB9XG5cbiAgYXN5bmMgaW5pdGlhbGl6ZSgpIHtcbiAgICAvLyBcdTc4NkVcdTRGRERcdTY1NzBcdTYzNkVcdTY1ODdcdTRFRjZcdTU5MzlcdTVCNThcdTU3MjhcbiAgICBhd2FpdCB0aGlzLmVuc3VyZURhdGFGb2xkZXIoKTtcbiAgICBcbiAgICAvLyBcdTUyQTBcdThGN0RcdTczQjBcdTY3MDlcdTY1NzBcdTYzNkVcbiAgICBhd2FpdCB0aGlzLmxvYWREYXRhKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGVuc3VyZURhdGFGb2xkZXIoKSB7XG4gICAgY29uc3QgYWRhcHRlciA9IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXI7XG4gICAgXG4gICAgLy8gXHU1MjFCXHU1RUZBXHU0RTNCXHU2NTcwXHU2MzZFXHU2NTg3XHU0RUY2XHU1OTM5XG4gICAgaWYgKCEoYXdhaXQgYWRhcHRlci5leGlzdHModGhpcy5kYXRhRm9sZGVyKSkpIHtcbiAgICAgIGF3YWl0IGFkYXB0ZXIubWtkaXIodGhpcy5kYXRhRm9sZGVyKTtcbiAgICB9XG5cbiAgICAvLyBcdTUyMUJcdTVFRkFcdTVCNTBcdTY1ODdcdTRFRjZcdTU5MzlcbiAgICBjb25zdCBzdWJmb2xkZXJzID0gWydpbmRleGVzJywgJ2NvbmZpZycsICdjYWNoZSddO1xuICAgIGZvciAoY29uc3QgZm9sZGVyIG9mIHN1YmZvbGRlcnMpIHtcbiAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9LyR7Zm9sZGVyfWA7XG4gICAgICBpZiAoIShhd2FpdCBhZGFwdGVyLmV4aXN0cyhwYXRoKSkpIHtcbiAgICAgICAgYXdhaXQgYWRhcHRlci5ta2RpcihwYXRoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGxvYWREYXRhKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250ZW50UGF0aCA9IGAke3RoaXMuZGF0YUZvbGRlcn0vY29udGVudC11bml0cy5qc29uYDtcbiAgICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzLmFwcC52YXVsdC5hZGFwdGVyO1xuXG4gICAgICBpZiAoYXdhaXQgYWRhcHRlci5leGlzdHMoY29udGVudFBhdGgpKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhZGFwdGVyLnJlYWQoY29udGVudFBhdGgpO1xuICAgICAgICBjb25zdCB1bml0czogQ29udGVudFVuaXRbXSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IHVuaXQgb2YgdW5pdHMpIHtcbiAgICAgICAgICB0aGlzLmNvbnRlbnRVbml0cy5zZXQodW5pdC5pZCwgdW5pdCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gXHU2Nzg0XHU1RUZBXHU2NTg3XHU0RUY2XHU3RDIyXHU1RjE1XG4gICAgICAgICAgaWYgKCF0aGlzLmZpbGVJbmRleC5oYXModW5pdC5zb3VyY2UuZmlsZSkpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsZUluZGV4LnNldCh1bml0LnNvdXJjZS5maWxlLCBbXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuZmlsZUluZGV4LmdldCh1bml0LnNvdXJjZS5maWxlKSEucHVzaCh1bml0LmlkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGRhdGE6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNhdmVDb250ZW50VW5pdCh1bml0OiBDb250ZW50VW5pdCkge1xuICAgIHRoaXMuY29udGVudFVuaXRzLnNldCh1bml0LmlkLCB1bml0KTtcbiAgICBcbiAgICAvLyBcdTY2RjRcdTY1QjBcdTY1ODdcdTRFRjZcdTdEMjJcdTVGMTVcbiAgICBpZiAoIXRoaXMuZmlsZUluZGV4Lmhhcyh1bml0LnNvdXJjZS5maWxlKSkge1xuICAgICAgdGhpcy5maWxlSW5kZXguc2V0KHVuaXQuc291cmNlLmZpbGUsIFtdKTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmZpbGVJbmRleC5nZXQodW5pdC5zb3VyY2UuZmlsZSkhLmluY2x1ZGVzKHVuaXQuaWQpKSB7XG4gICAgICB0aGlzLmZpbGVJbmRleC5nZXQodW5pdC5zb3VyY2UuZmlsZSkhLnB1c2godW5pdC5pZCk7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0KCk7XG4gIH1cblxuICBhc3luYyBzYXZlQ29udGVudFVuaXRzKHVuaXRzOiBDb250ZW50VW5pdFtdKSB7XG4gICAgZm9yIChjb25zdCB1bml0IG9mIHVuaXRzKSB7XG4gICAgICB0aGlzLmNvbnRlbnRVbml0cy5zZXQodW5pdC5pZCwgdW5pdCk7XG4gICAgICBcbiAgICAgIGlmICghdGhpcy5maWxlSW5kZXguaGFzKHVuaXQuc291cmNlLmZpbGUpKSB7XG4gICAgICAgIHRoaXMuZmlsZUluZGV4LnNldCh1bml0LnNvdXJjZS5maWxlLCBbXSk7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuZmlsZUluZGV4LmdldCh1bml0LnNvdXJjZS5maWxlKSEuaW5jbHVkZXModW5pdC5pZCkpIHtcbiAgICAgICAgdGhpcy5maWxlSW5kZXguZ2V0KHVuaXQuc291cmNlLmZpbGUpIS5wdXNoKHVuaXQuaWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMucGVyc2lzdCgpO1xuICB9XG5cbiAgZ2V0Q29udGVudFVuaXQoaWQ6IHN0cmluZyk6IENvbnRlbnRVbml0IHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZW50VW5pdHMuZ2V0KGlkKTtcbiAgfVxuXG4gIGdldENvbnRlbnRVbml0c0J5RmlsZShmaWxlUGF0aDogc3RyaW5nKTogQ29udGVudFVuaXRbXSB7XG4gICAgY29uc3QgaWRzID0gdGhpcy5maWxlSW5kZXguZ2V0KGZpbGVQYXRoKSB8fCBbXTtcbiAgICByZXR1cm4gaWRzLm1hcChpZCA9PiB0aGlzLmNvbnRlbnRVbml0cy5nZXQoaWQpKS5maWx0ZXIoQm9vbGVhbikgYXMgQ29udGVudFVuaXRbXTtcbiAgfVxuXG4gIGdldENvbnRlbnRVbml0c0J5VHlwZSh0eXBlOiBDb250ZW50VW5pdFsndHlwZSddKTogQ29udGVudFVuaXRbXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5jb250ZW50VW5pdHMudmFsdWVzKCkpLmZpbHRlcih1bml0ID0+IHVuaXQudHlwZSA9PT0gdHlwZSk7XG4gIH1cblxuICBnZXRBbGxDb250ZW50VW5pdHMoKTogQ29udGVudFVuaXRbXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5jb250ZW50VW5pdHMudmFsdWVzKCkpO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlQ29udGVudFVuaXQoaWQ6IHN0cmluZykge1xuICAgIGNvbnN0IHVuaXQgPSB0aGlzLmNvbnRlbnRVbml0cy5nZXQoaWQpO1xuICAgIGlmICh1bml0KSB7XG4gICAgICB0aGlzLmNvbnRlbnRVbml0cy5kZWxldGUoaWQpO1xuICAgICAgXG4gICAgICAvLyBcdTY2RjRcdTY1QjBcdTY1ODdcdTRFRjZcdTdEMjJcdTVGMTVcbiAgICAgIGNvbnN0IGZpbGVVbml0cyA9IHRoaXMuZmlsZUluZGV4LmdldCh1bml0LnNvdXJjZS5maWxlKTtcbiAgICAgIGlmIChmaWxlVW5pdHMpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBmaWxlVW5pdHMuaW5kZXhPZihpZCk7XG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgZmlsZVVuaXRzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0KCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBwZXJzaXN0KCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250ZW50UGF0aCA9IGAke3RoaXMuZGF0YUZvbGRlcn0vY29udGVudC11bml0cy5qc29uYDtcbiAgICAgIGNvbnN0IHVuaXRzID0gQXJyYXkuZnJvbSh0aGlzLmNvbnRlbnRVbml0cy52YWx1ZXMoKSk7XG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5zdHJpbmdpZnkodW5pdHMsIG51bGwsIDIpO1xuICAgICAgXG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGNvbnRlbnRQYXRoLCBkYXRhKTtcbiAgICAgIFxuICAgICAgLy8gXHU0RkREXHU1QjU4XHU3RDIyXHU1RjE1XG4gICAgICBjb25zdCBpbmRleFBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L2luZGV4ZXMvZmlsZS1pbmRleC5qc29uYDtcbiAgICAgIGNvbnN0IGluZGV4RGF0YSA9IEpTT04uc3RyaW5naWZ5KFxuICAgICAgICBPYmplY3QuZnJvbUVudHJpZXModGhpcy5maWxlSW5kZXgpLFxuICAgICAgICBudWxsLFxuICAgICAgICAyXG4gICAgICApO1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShpbmRleFBhdGgsIGluZGV4RGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBlcnNpc3RpbmcgZGF0YTonLCBlcnJvcik7XG4gICAgfVxuICB9XG59IiwgImltcG9ydCB7IEFwcCwgVEZpbGUsIE5vdGljZSwgRWRpdG9yLCBNZW51IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgRGF0YU1hbmFnZXIsIENvbnRlbnRVbml0IH0gZnJvbSAnLi9EYXRhTWFuYWdlcic7XG5pbXBvcnQgeyBGbGFzaGNhcmRNYW5hZ2VyIH0gZnJvbSAnLi9GbGFzaGNhcmRNYW5hZ2VyJztcblxuZXhwb3J0IGNsYXNzIEV4dHJhY3Rpb25FbmdpbmUge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGFwcDogQXBwLFxuICAgIHByaXZhdGUgZGF0YU1hbmFnZXI6IERhdGFNYW5hZ2VyLFxuICAgIHByaXZhdGUgZmxhc2hjYXJkTWFuYWdlcjogRmxhc2hjYXJkTWFuYWdlciBcbiAgKSB7fVxuXG4gIC8qKlxuICAgKiBcdTZDRThcdTUxOENcdTUzRjNcdTk1MkVcdTgzRENcdTUzNTVcbiAgICovXG4gIHJlZ2lzdGVyQ29udGV4dE1lbnUobWVudTogTWVudSwgZWRpdG9yOiBFZGl0b3IsIGZpbGU6IFRGaWxlKSB7XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgIGlmICghc2VsZWN0aW9uKSByZXR1cm47XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdUQ4M0RcdURDREQgRXh0cmFjdCBhcyB0ZXh0IG9ubHknKVxuICAgICAgICAuc2V0SWNvbignZmlsZS10ZXh0JylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZXh0cmFjdFNlbGVjdGVkVGV4dChlZGl0b3IsIGZpbGUsICd0ZXh0Jyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHUyNzUzIEV4dHJhY3QgYXMgUUEgY2FyZCcpXG4gICAgICAgIC5zZXRJY29uKCdoZWxwLWNpcmNsZScpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmV4dHJhY3RTZWxlY3RlZFRleHQoZWRpdG9yLCBmaWxlLCAnUUEnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdTI3MEZcdUZFMEYgRXh0cmFjdCBhcyBDbG96ZSBjYXJkJylcbiAgICAgICAgLnNldEljb24oJ2hpZ2hsaWdodGVyJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZXh0cmFjdFNlbGVjdGVkVGV4dChlZGl0b3IsIGZpbGUsICdjbG96ZScpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYzRDBcdTUzRDZcdTkwMDlcdTRFMkRcdTc2ODRcdTY1ODdcdTY3MkNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZXh0cmFjdFNlbGVjdGVkVGV4dChcbiAgICBlZGl0b3I6IEVkaXRvciwgXG4gICAgZmlsZTogVEZpbGUsIFxuICAgIGV4dHJhY3RUeXBlOiAndGV4dCcgfCAnUUEnIHwgJ2Nsb3plJ1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgaWYgKCFzZWxlY3Rpb24pIHtcbiAgICAgIG5ldyBOb3RpY2UoJ05vIHRleHQgc2VsZWN0ZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCdmcm9tJyk7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5nZXRPZmZzZXRGcm9tQ3Vyc29yKGNvbnRlbnQsIGN1cnNvci5saW5lLCBjdXJzb3IuY2gpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGxldCB1bml0OiBDb250ZW50VW5pdDtcblxuICAgICAgc3dpdGNoIChleHRyYWN0VHlwZSkge1xuICAgICAgICBjYXNlICd0ZXh0JzpcbiAgICAgICAgICB1bml0ID0gdGhpcy5jcmVhdGVUZXh0VW5pdChmaWxlLCBzZWxlY3Rpb24sIG9mZnNldCwgY29udGVudCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1FBJzpcbiAgICAgICAgICB1bml0ID0gdGhpcy5jcmVhdGVRQVVuaXQoZmlsZSwgc2VsZWN0aW9uLCBvZmZzZXQsIGNvbnRlbnQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdjbG96ZSc6XG4gICAgICAgICAgdW5pdCA9IHRoaXMuY3JlYXRlQ2xvemVVbml0KGZpbGUsIHNlbGVjdGlvbiwgb2Zmc2V0LCBjb250ZW50KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy8gMS4gXHU1MTQ4XHU0RkREXHU1QjU4IENvbnRlbnRVbml0XG4gICAgICBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLnNhdmVDb250ZW50VW5pdHMoW3VuaXRdKTtcbiAgICAgIFxuICAgICAgLy8gMi4gXHU1OTgyXHU2NzlDXHU2NjJGIFFBIFx1NjIxNiBjbG96ZVx1RkYwQ1x1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVxuICAgICAgaWYgKGV4dHJhY3RUeXBlID09PSAnUUEnIHx8IGV4dHJhY3RUeXBlID09PSAnY2xvemUnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgY2FyZFR5cGUgPSBleHRyYWN0VHlwZSA9PT0gJ1FBJyA/ICdxYScgOiAnY2xvemUnO1xuICAgICAgICAgIGNvbnN0IGZsYXNoY2FyZCA9IGF3YWl0IHRoaXMuZmxhc2hjYXJkTWFuYWdlci5jcmVhdGVGbGFzaGNhcmRGcm9tVW5pdCh1bml0LCB7XG4gICAgICAgICAgICBjYXJkVHlwZTogY2FyZFR5cGVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyAzLiBcdTUxOERcdTZCMjFcdTRGRERcdTVCNTggdW5pdFx1RkYwOFx1NjZGNFx1NjVCMCBmbGFzaGNhcmRJZHNcdUZGMDlcbiAgICAgICAgICBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLnNhdmVDb250ZW50VW5pdHMoW3VuaXRdKTtcbiAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdbZXh0cmFjdFNlbGVjdGVkVGV4dF0gXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXHU1OTMxXHU4RDI1OicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB0eXBlTmFtZXMgPSB7XG4gICAgICAgIHRleHQ6ICd0ZXh0JyxcbiAgICAgICAgUUE6ICdRQSBjYXJkJyxcbiAgICAgICAgY2xvemU6ICdjbG96ZSBjYXJkJ1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgbmV3IE5vdGljZShgXHUyNzA1IEV4dHJhY3RlZCBhcyAke3R5cGVOYW1lc1tleHRyYWN0VHlwZV19YCk7XG4gICAgICBcbiAgICAgIC8vIDQuIFx1NTIzN1x1NjVCMFx1NjI0MFx1NjcwOVx1ODlDNlx1NTZGRVxuICAgICAgdGhpcy5yZWZyZXNoQWxsVmlld3MoKTtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBleHRyYWN0aW5nIHNlbGVjdGlvbjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKGBcdTI3NEMgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU1MjFCXHU1RUZBXHU3RUFGXHU2NTg3XHU2NzJDXHU1MzU1XHU1MTQzXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZVRleHRVbml0KFxuICAgIGZpbGU6IFRGaWxlLFxuICAgIHNlbGVjdGlvbjogc3RyaW5nLFxuICAgIG9mZnNldDogbnVtYmVyLFxuICAgIGZpbGVDb250ZW50OiBzdHJpbmdcbiAgKTogQ29udGVudFVuaXQge1xuICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5jYWxjdWxhdGVQb3NpdGlvbihmaWxlQ29udGVudCwgb2Zmc2V0KTtcblxuICAgIHJldHVybiB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICB0eXBlOiAndGV4dCcsXG4gICAgICBjb250ZW50OiBzZWxlY3Rpb24udHJpbSgpLFxuICAgICAgZnVsbENvbnRleHQ6IHNlbGVjdGlvbi50cmltKCksXG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgZmlsZTogZmlsZS5wYXRoLFxuICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgIHN0YXJ0OiBvZmZzZXQsXG4gICAgICAgICAgZW5kOiBvZmZzZXQgKyBzZWxlY3Rpb24ubGVuZ3RoLFxuICAgICAgICAgIGxpbmU6IHBvc2l0aW9uLmxpbmVcbiAgICAgICAgfSxcbiAgICAgICAgaGVhZGluZzogdGhpcy5maW5kSGVhZGluZyhmaWxlQ29udGVudCwgb2Zmc2V0KSxcbiAgICAgICAgYW5jaG9yTGluazogYFtbJHtmaWxlLmJhc2VuYW1lfSNeJHt0aGlzLmdlbmVyYXRlQmxvY2tJZCgpfV1dYFxuICAgICAgfSxcbiAgICAgIGV4dHJhY3RSdWxlOiB7XG4gICAgICAgIHJ1bGVJZDogJ3RleHQtbWFudWFsJyxcbiAgICAgICAgcnVsZU5hbWU6ICdNYW51YWwgVGV4dCBFeHRyYWN0JyxcbiAgICAgICAgZXh0cmFjdGVkQnk6ICdtYW51YWwnXG4gICAgICB9LFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIHRhZ3M6IHRoaXMuZXh0cmFjdFRhZ3MoZmlsZUNvbnRlbnQsIG9mZnNldClcbiAgICAgIH0sXG4gICAgICBmbGFzaGNhcmRJZHM6IFtdXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTUyMUJcdTVFRkEgUUEgXHU1MzYxXHU3MjQ3XHU1MzU1XHU1MTQzXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZVFBVW5pdChcbiAgICBmaWxlOiBURmlsZSxcbiAgICBzZWxlY3Rpb246IHN0cmluZyxcbiAgICBvZmZzZXQ6IG51bWJlcixcbiAgICBmaWxlQ29udGVudDogc3RyaW5nXG4gICk6IENvbnRlbnRVbml0IHtcbiAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuY2FsY3VsYXRlUG9zaXRpb24oZmlsZUNvbnRlbnQsIG9mZnNldCk7XG4gICAgXG4gICAgLy8gXHU1QzFEXHU4QkQ1XHU1MjA2XHU1MjcyXHU2MjEwXHU5NUVFXHU5ODk4XHU1NDhDXHU3QjU0XHU2ODQ4XG4gICAgbGV0IHF1ZXN0aW9uOiBzdHJpbmcsIGFuc3dlcjogc3RyaW5nO1xuICAgIFxuICAgIGlmIChzZWxlY3Rpb24uaW5jbHVkZXMoJzo6JykpIHtcbiAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTMwNVx1NTQyQiA6OiBcdTUyMDZcdTk2OTRcdTdCMjZcbiAgICAgIGNvbnN0IHBhcnRzID0gc2VsZWN0aW9uLnNwbGl0KCc6OicpO1xuICAgICAgcXVlc3Rpb24gPSBwYXJ0c1swXS50cmltKCk7XG4gICAgICBhbnN3ZXIgPSBwYXJ0cy5zbGljZSgxKS5qb2luKCc6OicpLnRyaW0oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU1NDI2XHU1MjE5XHU2NTc0XHU0RTJBXHU5MDA5XHU0RTJEXHU2NTg3XHU2NzJDXHU0RjVDXHU0RTNBXHU5NUVFXHU5ODk4XHVGRjBDXHU3QjU0XHU2ODQ4XHU0RTNBXHU3QTdBXHVGRjA4XHU5NzAwXHU4OTgxXHU3NTI4XHU2MjM3XHU4ODY1XHU1MTQ1XHVGRjA5XG4gICAgICBxdWVzdGlvbiA9IHNlbGVjdGlvbi50cmltKCk7XG4gICAgICBhbnN3ZXIgPSAnW0Fuc3dlciBuZWVkZWRdJztcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVJZCgpLFxuICAgICAgdHlwZTogJ1FBJyxcbiAgICAgIGNvbnRlbnQ6IHF1ZXN0aW9uLFxuICAgICAgYW5zd2VyOiBhbnN3ZXIsXG4gICAgICBmdWxsQ29udGV4dDogc2VsZWN0aW9uLnRyaW0oKSxcbiAgICAgIHNvdXJjZToge1xuICAgICAgICBmaWxlOiBmaWxlLnBhdGgsXG4gICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgc3RhcnQ6IG9mZnNldCxcbiAgICAgICAgICBlbmQ6IG9mZnNldCArIHNlbGVjdGlvbi5sZW5ndGgsXG4gICAgICAgICAgbGluZTogcG9zaXRpb24ubGluZVxuICAgICAgICB9LFxuICAgICAgICBoZWFkaW5nOiB0aGlzLmZpbmRIZWFkaW5nKGZpbGVDb250ZW50LCBvZmZzZXQpLFxuICAgICAgICBhbmNob3JMaW5rOiBgW1ske2ZpbGUuYmFzZW5hbWV9I14ke3RoaXMuZ2VuZXJhdGVCbG9ja0lkKCl9XV1gXG4gICAgICB9LFxuICAgICAgZXh0cmFjdFJ1bGU6IHtcbiAgICAgICAgcnVsZUlkOiAnUUEtbWFudWFsJyxcbiAgICAgICAgcnVsZU5hbWU6ICdNYW51YWwgUUEgQ2FyZCcsXG4gICAgICAgIGV4dHJhY3RlZEJ5OiAnbWFudWFsJ1xuICAgICAgfSxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICB0YWdzOiB0aGlzLmV4dHJhY3RUYWdzKGZpbGVDb250ZW50LCBvZmZzZXQpXG4gICAgICB9LFxuICAgICAgZmxhc2hjYXJkSWRzOiBbXVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogXHU1MjFCXHU1RUZBXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU1MzYxXHU3MjQ3XHU1MzU1XHU1MTQzXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZUNsb3plVW5pdChcbiAgICBmaWxlOiBURmlsZSxcbiAgICBzZWxlY3Rpb246IHN0cmluZyxcbiAgICBvZmZzZXQ6IG51bWJlcixcbiAgICBmaWxlQ29udGVudDogc3RyaW5nXG4gICk6IENvbnRlbnRVbml0IHtcbiAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuY2FsY3VsYXRlUG9zaXRpb24oZmlsZUNvbnRlbnQsIG9mZnNldCk7XG4gICAgY29uc3QgZnVsbFNlbnRlbmNlID0gdGhpcy5leHRyYWN0RnVsbFNlbnRlbmNlKGZpbGVDb250ZW50LCBvZmZzZXQsIHNlbGVjdGlvbi5sZW5ndGgpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgIHR5cGU6ICdjbG96ZScsXG4gICAgICBjb250ZW50OiBzZWxlY3Rpb24udHJpbSgpLFxuICAgICAgZnVsbENvbnRleHQ6IGZ1bGxTZW50ZW5jZSxcbiAgICAgIHNvdXJjZToge1xuICAgICAgICBmaWxlOiBmaWxlLnBhdGgsXG4gICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgc3RhcnQ6IG9mZnNldCxcbiAgICAgICAgICBlbmQ6IG9mZnNldCArIHNlbGVjdGlvbi5sZW5ndGgsXG4gICAgICAgICAgbGluZTogcG9zaXRpb24ubGluZVxuICAgICAgICB9LFxuICAgICAgICBoZWFkaW5nOiB0aGlzLmZpbmRIZWFkaW5nKGZpbGVDb250ZW50LCBvZmZzZXQpLFxuICAgICAgICBhbmNob3JMaW5rOiBgW1ske2ZpbGUuYmFzZW5hbWV9I14ke3RoaXMuZ2VuZXJhdGVCbG9ja0lkKCl9XV1gXG4gICAgICB9LFxuICAgICAgZXh0cmFjdFJ1bGU6IHtcbiAgICAgICAgcnVsZUlkOiAnY2xvemUtbWFudWFsJyxcbiAgICAgICAgcnVsZU5hbWU6ICdNYW51YWwgQ2xvemUgQ2FyZCcsXG4gICAgICAgIGV4dHJhY3RlZEJ5OiAnbWFudWFsJ1xuICAgICAgfSxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICB0YWdzOiB0aGlzLmV4dHJhY3RUYWdzKGZpbGVDb250ZW50LCBvZmZzZXQpXG4gICAgICB9LFxuICAgICAgZmxhc2hjYXJkSWRzOiBbXVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogXHU0RUNFXHU1MTQ5XHU2ODA3XHU0RjREXHU3RjZFXHU4QkExXHU3Qjk3XHU2NTg3XHU0RUY2XHU1MDRGXHU3OUZCXHU5MUNGXG4gICAqL1xuICBwcml2YXRlIGdldE9mZnNldEZyb21DdXJzb3IoY29udGVudDogc3RyaW5nLCBsaW5lOiBudW1iZXIsIGNoOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgbGV0IG9mZnNldCA9IDA7XG4gICAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lOyBpKyspIHtcbiAgICAgIG9mZnNldCArPSBsaW5lc1tpXS5sZW5ndGggKyAxO1xuICAgIH1cbiAgICBcbiAgICBvZmZzZXQgKz0gY2g7XG4gICAgcmV0dXJuIG9mZnNldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYyNkJcdTYzQ0ZcdTUzNTVcdTRFMkFcdTY1ODdcdTRFRjZcbiAgICovXG4gIGFzeW5jIHNjYW5GaWxlKGZpbGU6IFRGaWxlKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICBjb25zdCB1bml0cyA9IGF3YWl0IHRoaXMuZXh0cmFjdENvbnRlbnQoZmlsZSwgY29udGVudCk7XG4gICAgICBcbiAgICAgIGlmICh1bml0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGF0YU1hbmFnZXIuc2F2ZUNvbnRlbnRVbml0cyh1bml0cyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBxYUNvdW50ID0gdW5pdHMuZmlsdGVyKHUgPT4gdS50eXBlID09PSAnUUEnKS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGNsb3plQ291bnQgPSB1bml0cy5maWx0ZXIodSA9PiB1LnR5cGUgPT09ICdjbG96ZScpLmxlbmd0aDtcbiAgICAgICAgbmV3IE5vdGljZShgRXh0cmFjdGVkICR7cWFDb3VudH0gUUEgY2FyZHMgYW5kICR7Y2xvemVDb3VudH0gY2xvemUgY2FyZHMgZnJvbSAke2ZpbGUubmFtZX1gKTtcbiAgICAgICAgXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMucmVmcmVzaEFsbFZpZXdzKCk7XG4gICAgICAgIH0sIDEwMCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB1bml0cy5sZW5ndGg7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tzY2FuRmlsZV0gXHU5NTE5XHU4QkVGOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoYEVycm9yIHNjYW5uaW5nIGZpbGU6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfVxuICBcbiAgLyoqXG4gICAqIFx1NTIzN1x1NjVCMFx1NjI0MFx1NjcwOVx1NzZGOFx1NTE3M1x1ODlDNlx1NTZGRVxuICAgKi9cbiAgcHJpdmF0ZSByZWZyZXNoQWxsVmlld3MoKSB7XG4gICAgdGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMobGVhZiA9PiB7XG4gICAgICBjb25zdCB2aWV3VHlwZSA9IGxlYWYudmlldy5nZXRWaWV3VHlwZSgpO1xuICAgICAgaWYgKHZpZXdUeXBlID09PSAnbGVhcm5pbmctc3lzdGVtLXNpZGViYXItb3ZlcnZpZXcnIHx8IFxuICAgICAgICAgIHZpZXdUeXBlID09PSAnbGVhcm5pbmctc3lzdGVtLW1haW4tb3ZlcnZpZXcnKSB7XG4gICAgICAgIChsZWFmLnZpZXcgYXMgYW55KS5yZWZyZXNoKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogXHU2MjZCXHU2M0NGXHU2NTc0XHU0RTJBIFZhdWx0XG4gICAqL1xuICBhc3luYyBzY2FuVmF1bHQoKTogUHJvbWlzZTx7IHNjYW5uZWQ6IG51bWJlcjsgZXh0cmFjdGVkOiBudW1iZXIgfT4ge1xuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIGxldCBzY2FubmVkID0gMDtcbiAgICBsZXQgZXh0cmFjdGVkID0gMDtcblxuICAgIG5ldyBOb3RpY2UoYFNjYW5uaW5nICR7ZmlsZXMubGVuZ3RofSBmaWxlcy4uLmApO1xuXG4gICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICBjb25zdCBjb3VudCA9IGF3YWl0IHRoaXMuc2NhbkZpbGUoZmlsZSk7XG4gICAgICBzY2FubmVkKys7XG4gICAgICBleHRyYWN0ZWQgKz0gY291bnQ7XG4gICAgfVxuXG4gICAgbmV3IE5vdGljZShgU2NhbiBjb21wbGV0ZSEgRXh0cmFjdGVkICR7ZXh0cmFjdGVkfSBpdGVtcyBmcm9tICR7c2Nhbm5lZH0gZmlsZXMuYCk7XG5cbiAgICByZXR1cm4geyBzY2FubmVkLCBleHRyYWN0ZWQgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdUQ4M0RcdUREMjcgXHU0RkVFXHU2NTM5OiBcdTUxNDhcdTRGRERcdTVCNTggdW5pdHNcdUZGMENcdTUxOERcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZXh0cmFjdENvbnRlbnQoZmlsZTogVEZpbGUsIGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8Q29udGVudFVuaXRbXT4ge1xuICAgIGNvbnN0IHVuaXRzOiBDb250ZW50VW5pdFtdID0gW107XG4gICAgXG4gICAgLy8gMVx1RkUwRlx1MjBFMyBcdTUxNDhcdTYzRDBcdTUzRDZcdTYyNDBcdTY3MDkgdW5pdHNcdUZGMDhcdTRFMERcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcdUZGMDlcbiAgICBjb25zdCBxYVVuaXRzID0gdGhpcy5leHRyYWN0UUFDYXJkcyhmaWxlLCBjb250ZW50KTtcbiAgICB1bml0cy5wdXNoKC4uLnFhVW5pdHMpO1xuICAgIFxuICAgIGNvbnN0IGNsb3plVW5pdHMgPSB0aGlzLmV4dHJhY3RDbG96ZUNhcmRzKGZpbGUsIGNvbnRlbnQpO1xuICAgIHVuaXRzLnB1c2goLi4uY2xvemVVbml0cyk7XG4gICAgXG4gICAgLy8gMlx1RkUwRlx1MjBFMyBcdTUxNDhcdTRGRERcdTVCNThcdTYyNDBcdTY3MDkgdW5pdHMgXHU1MjMwIERhdGFNYW5hZ2VyXG4gICAgaWYgKHVuaXRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGF3YWl0IHRoaXMuZGF0YU1hbmFnZXIuc2F2ZUNvbnRlbnRVbml0cyh1bml0cyk7XG4gICAgfVxuICAgIFxuICAgIC8vIDNcdUZFMEZcdTIwRTMgXHU1MThEXHU0RTNBXHU2QkNGXHU0RTJBIHVuaXQgXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXG4gICAgZm9yIChjb25zdCB1bml0IG9mIHVuaXRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjYXJkVHlwZSA9IHVuaXQudHlwZSA9PT0gJ1FBJyA/ICdxYScgOiAnY2xvemUnO1xuICAgICAgICBjb25zdCBmbGFzaGNhcmQgPSBhd2FpdCB0aGlzLmZsYXNoY2FyZE1hbmFnZXIuY3JlYXRlRmxhc2hjYXJkRnJvbVVuaXQodW5pdCwge1xuICAgICAgICAgIGNhcmRUeXBlOiBjYXJkVHlwZVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tleHRyYWN0Q29udGVudF0gXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXHU1OTMxXHU4RDI1OicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHVuaXRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1MjcwNSBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTRFM0FcdTRFRkJcdTUyQTFcdTVCOENcdTYyMTBcdTY4MDdcdThCQjBcbiAgICogXHU2MzkyXHU5NjY0OiBbY29tcGxldGlvbjo6IGRhdGVdLCBbZHVlOjogZGF0ZV0gXHU3QjQ5XHU0RUZCXHU1MkExXHU3NkY4XHU1MTczXHU3Njg0IDo6IFx1NjgzQ1x1NUYwRlxuICAgKi9cbiAgcHJpdmF0ZSBpc1Rhc2tDb21wbGV0aW9uKGxpbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIC8vIFx1NTMzOVx1OTE0RFx1NEVGQlx1NTJBMVx1NjgwN1x1OEJCMDogLSBbIF0gXHU2MjE2IC0gW3hdIFx1NUYwMFx1NTkzNFx1NzY4NFx1ODg0QyxcdTRFMTRcdTUzMDVcdTU0MkIgOjogXG4gICAgY29uc3QgdGFza1BhdHRlcm4gPSAvXltcXHNdKi1cXHMqXFxbW3hcXHNdXFxdLio6Oi9pO1xuICAgIHJldHVybiB0YXNrUGF0dGVybi50ZXN0KGxpbmUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1MjcwNSBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTRFM0FcdTY1RTVcdTY3MUYvXHU2NUY2XHU5NUY0XHU1QjU3XHU2QkI1XG4gICAqIFx1NjM5Mlx1OTY2NDogZGF0ZTE6OiAyMDIxLTAyLTI2VDE1OjE1LCBkYXRlMjo6IDIwMjEtMDQtMTcgMTg6MDAgXHU3QjQ5XHU2ODNDXHU1RjBGXG4gICAqL1xuICBwcml2YXRlIGlzRGF0ZVRpbWVGaWVsZChxdWVzdGlvbjogc3RyaW5nLCBhbnN3ZXI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIC8vIFx1NjhDMFx1NjdFNVx1OTVFRVx1OTg5OFx1OTBFOFx1NTIwNlx1NjYyRlx1NTQyNlx1NTMwNVx1NTQyQlx1NUUzOFx1ODlDMVx1NzY4NFx1NjVFNVx1NjcxRi9cdTY1RjZcdTk1RjRcdTVCNTdcdTZCQjVcdTU0MERcbiAgICBjb25zdCBkYXRlRmllbGRQYXR0ZXJuID0gL1xcYihkYXRlXFxkKnx0aW1lXFxkKnxjcmVhdGVkfHVwZGF0ZWR8bW9kaWZpZWR8c2NoZWR1bGVkfGR1ZXxjb21wbGV0aW9uKVxcYi9pO1xuICAgIFxuICAgIC8vIFx1NjhDMFx1NjdFNVx1N0I1NFx1Njg0OFx1OTBFOFx1NTIwNlx1NjYyRlx1NTQyNlx1NEUzQVx1NjVFNVx1NjcxRi9cdTY1RjZcdTk1RjRcdTY4M0NcdTVGMEZcbiAgICBjb25zdCBkYXRlVGltZVBhdHRlcm4gPSAvXlxccypcXGR7NH0tXFxkezJ9LVxcZHsyfShUfFxccylcXGR7Mn06XFxkezJ9fFxcZHs0fS1cXGR7Mn0tXFxkezJ9XFxzK1xcZHsyfTpcXGR7Mn0vO1xuICAgIGNvbnN0IGRhdGVPbmx5UGF0dGVybiA9IC9eXFxzKlxcZHs0fS1cXGR7Mn0tXFxkezJ9XFxzKiQvO1xuICAgIFxuICAgIHJldHVybiBkYXRlRmllbGRQYXR0ZXJuLnRlc3QocXVlc3Rpb24pICYmIFxuICAgICAgICAgICAoZGF0ZVRpbWVQYXR0ZXJuLnRlc3QoYW5zd2VyKSB8fCBkYXRlT25seVBhdHRlcm4udGVzdChhbnN3ZXIpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTI3MDUgXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU0RTNBIEV4Y2FsaWRyYXcgXHU5QUQ4XHU0RUFFXG4gICAqIFx1NjM5Mlx1OTY2NDogPT1zd2l0Y2ggdG8gZXhjYWxpZHJhdyB2aWV3Li4uPT0gXHU4RkQ5XHU3QzdCXHU3Mjc5XHU1QjlBXHU5QUQ4XHU0RUFFXG4gICAqL1xuICBwcml2YXRlIGlzRXhjYWxpZHJhd0hpZ2hsaWdodChtYXRjaFRleHQ6IHN0cmluZywgbGluZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgLy8gXHU1OTgyXHU2NzlDXHU5QUQ4XHU0RUFFXHU1MTg1XHU1QkI5XHU1MzA1XHU1NDJCIGV4Y2FsaWRyYXcgXHU3NkY4XHU1MTczXHU1MTczXHU5NTJFXHU4QkNEXG4gICAgY29uc3QgZXhjYWxpZHJhd0tleXdvcmRzID0gL2V4Y2FsaWRyYXd8ZHJhd2luZ3xza2V0Y2gvaTtcbiAgICByZXR1cm4gZXhjYWxpZHJhd0tleXdvcmRzLnRlc3QobWF0Y2hUZXh0KSB8fCBleGNhbGlkcmF3S2V5d29yZHMudGVzdChsaW5lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTI3MDUgXHU2M0QwXHU1M0Q2IFFBIFx1NTM2MVx1NzI0NyAoXHU2ODNDXHU1RjBGOiBRdWVzdGlvbiA6OiBBbnN3ZXIpXG4gICAqIFx1NjVCMFx1NTg5RTogXHU4RkM3XHU2RUU0XHU0RUZCXHU1MkExXHU1QjhDXHU2MjEwXHU2ODA3XHU4QkIwXHU1NDhDXHU2NUU1XHU2NzFGXHU2NUY2XHU5NUY0XHU1QjU3XHU2QkI1XG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RRQUNhcmRzKGZpbGU6IFRGaWxlLCBjb250ZW50OiBzdHJpbmcpOiBDb250ZW50VW5pdFtdIHtcbiAgICBjb25zdCB1bml0czogQ29udGVudFVuaXRbXSA9IFtdO1xuICAgIGNvbnN0IHFhUmVnZXggPSAvXiguKz8pXFxzKjo6XFxzKiguKz8pJC9nbTtcbiAgICBsZXQgbWF0Y2g7XG5cbiAgICB3aGlsZSAoKG1hdGNoID0gcWFSZWdleC5leGVjKGNvbnRlbnQpKSAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgZnVsbE1hdGNoID0gbWF0Y2hbMF07XG4gICAgICBjb25zdCBxdWVzdGlvbiA9IG1hdGNoWzFdLnRyaW0oKTtcbiAgICAgIGNvbnN0IGFuc3dlciA9IG1hdGNoWzJdLnRyaW0oKTtcbiAgICAgIFxuICAgICAgLy8gXHUyNzA1IFx1OERGM1x1OEZDN1x1NEVGQlx1NTJBMVx1NUI4Q1x1NjIxMFx1NjgwN1x1OEJCMFxuICAgICAgaWYgKHRoaXMuaXNUYXNrQ29tcGxldGlvbihmdWxsTWF0Y2gpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbZXh0cmFjdFFBQ2FyZHNdIFx1OERGM1x1OEZDN1x1NEVGQlx1NTJBMVx1NjgwN1x1OEJCMDonLCBmdWxsTWF0Y2gpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHUyNzA1IFx1OERGM1x1OEZDN1x1NjVFNVx1NjcxRlx1NjVGNlx1OTVGNFx1NUI1N1x1NkJCNVxuICAgICAgaWYgKHRoaXMuaXNEYXRlVGltZUZpZWxkKHF1ZXN0aW9uLCBhbnN3ZXIpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbZXh0cmFjdFFBQ2FyZHNdIFx1OERGM1x1OEZDN1x1NjVFNVx1NjcxRlx1NjVGNlx1OTVGNFx1NUI1N1x1NkJCNTonLCBmdWxsTWF0Y2gpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLmNhbGN1bGF0ZVBvc2l0aW9uKGNvbnRlbnQsIG1hdGNoLmluZGV4KTtcblxuICAgICAgY29uc3QgdW5pdDogQ29udGVudFVuaXQgPSB7XG4gICAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgICAgdHlwZTogJ1FBJyxcbiAgICAgICAgY29udGVudDogcXVlc3Rpb24sXG4gICAgICAgIGFuc3dlcjogYW5zd2VyLFxuICAgICAgICBmdWxsQ29udGV4dDogZnVsbE1hdGNoLFxuICAgICAgICBzb3VyY2U6IHtcbiAgICAgICAgICBmaWxlOiBmaWxlLnBhdGgsXG4gICAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICAgIHN0YXJ0OiBtYXRjaC5pbmRleCxcbiAgICAgICAgICAgIGVuZDogbWF0Y2guaW5kZXggKyBmdWxsTWF0Y2gubGVuZ3RoLFxuICAgICAgICAgICAgbGluZTogcG9zaXRpb24ubGluZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgaGVhZGluZzogdGhpcy5maW5kSGVhZGluZyhjb250ZW50LCBtYXRjaC5pbmRleCksXG4gICAgICAgICAgYW5jaG9yTGluazogYFtbJHtmaWxlLmJhc2VuYW1lfSNeJHt0aGlzLmdlbmVyYXRlQmxvY2tJZCgpfV1dYFxuICAgICAgICB9LFxuICAgICAgICBleHRyYWN0UnVsZToge1xuICAgICAgICAgIHJ1bGVJZDogJ1FBJyxcbiAgICAgICAgICBydWxlTmFtZTogJ1FBIENhcmQnLFxuICAgICAgICAgIGV4dHJhY3RlZEJ5OiAnYXV0bydcbiAgICAgICAgfSxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICAgIHRhZ3M6IHRoaXMuZXh0cmFjdFRhZ3MoY29udGVudCwgbWF0Y2guaW5kZXgpXG4gICAgICAgIH0sXG4gICAgICAgIGZsYXNoY2FyZElkczogW11cbiAgICAgIH07XG5cbiAgICAgIHVuaXRzLnB1c2godW5pdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuaXRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1MjcwNSBcdTYzRDBcdTUzRDZcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdTUzNjEgKFx1NjgzQ1x1NUYwRjogPT1oaWdobGlnaHQ9PSlcbiAgICogXHU2NUIwXHU1ODlFOiBcdThGQzdcdTZFRTQgRXhjYWxpZHJhdyBcdTlBRDhcdTRFQUVcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdENsb3plQ2FyZHMoZmlsZTogVEZpbGUsIGNvbnRlbnQ6IHN0cmluZyk6IENvbnRlbnRVbml0W10ge1xuICAgIGNvbnN0IHVuaXRzOiBDb250ZW50VW5pdFtdID0gW107XG4gICAgY29uc3QgaGlnaGxpZ2h0UmVnZXggPSAvPT0oLis/KT09L2c7XG4gICAgbGV0IG1hdGNoO1xuXG4gICAgd2hpbGUgKChtYXRjaCA9IGhpZ2hsaWdodFJlZ2V4LmV4ZWMoY29udGVudCkpICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBleHRyYWN0ZWRUZXh0ID0gbWF0Y2hbMV07XG4gICAgICBjb25zdCBmdWxsTWF0Y2ggPSBtYXRjaFswXTtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5jYWxjdWxhdGVQb3NpdGlvbihjb250ZW50LCBtYXRjaC5pbmRleCk7XG4gICAgICBcbiAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1ODg0Q1x1NTE4NVx1NUJCOVxuICAgICAgY29uc3QgbGluZVN0YXJ0ID0gY29udGVudC5sYXN0SW5kZXhPZignXFxuJywgbWF0Y2guaW5kZXgpICsgMTtcbiAgICAgIGNvbnN0IGxpbmVFbmQgPSBjb250ZW50LmluZGV4T2YoJ1xcbicsIG1hdGNoLmluZGV4KTtcbiAgICAgIGNvbnN0IGN1cnJlbnRMaW5lID0gY29udGVudC5zdWJzdHJpbmcobGluZVN0YXJ0LCBsaW5lRW5kID09PSAtMSA/IGNvbnRlbnQubGVuZ3RoIDogbGluZUVuZCk7XG4gICAgICBcbiAgICAgIC8vIFx1MjcwNSBcdThERjNcdThGQzcgRXhjYWxpZHJhdyBcdTlBRDhcdTRFQUVcbiAgICAgIGlmICh0aGlzLmlzRXhjYWxpZHJhd0hpZ2hsaWdodChleHRyYWN0ZWRUZXh0LCBjdXJyZW50TGluZSkpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tleHRyYWN0Q2xvemVDYXJkc10gXHU4REYzXHU4RkM3IEV4Y2FsaWRyYXcgXHU5QUQ4XHU0RUFFOicsIGV4dHJhY3RlZFRleHQpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgZnVsbFNlbnRlbmNlID0gdGhpcy5leHRyYWN0RnVsbFNlbnRlbmNlKGNvbnRlbnQsIG1hdGNoLmluZGV4LCBmdWxsTWF0Y2gubGVuZ3RoKTtcblxuICAgICAgY29uc3QgdW5pdDogQ29udGVudFVuaXQgPSB7XG4gICAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgICAgdHlwZTogJ2Nsb3plJyxcbiAgICAgICAgY29udGVudDogZXh0cmFjdGVkVGV4dC50cmltKCksXG4gICAgICAgIGZ1bGxDb250ZXh0OiBmdWxsU2VudGVuY2UsXG4gICAgICAgIHNvdXJjZToge1xuICAgICAgICAgIGZpbGU6IGZpbGUucGF0aCxcbiAgICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgc3RhcnQ6IG1hdGNoLmluZGV4LFxuICAgICAgICAgICAgZW5kOiBtYXRjaC5pbmRleCArIGZ1bGxNYXRjaC5sZW5ndGgsXG4gICAgICAgICAgICBsaW5lOiBwb3NpdGlvbi5saW5lXG4gICAgICAgICAgfSxcbiAgICAgICAgICBoZWFkaW5nOiB0aGlzLmZpbmRIZWFkaW5nKGNvbnRlbnQsIG1hdGNoLmluZGV4KSxcbiAgICAgICAgICBhbmNob3JMaW5rOiBgW1ske2ZpbGUuYmFzZW5hbWV9I14ke3RoaXMuZ2VuZXJhdGVCbG9ja0lkKCl9XV1gXG4gICAgICAgIH0sXG4gICAgICAgIGV4dHJhY3RSdWxlOiB7XG4gICAgICAgICAgcnVsZUlkOiAnY2xvemUnLFxuICAgICAgICAgIHJ1bGVOYW1lOiAnQ2xvemUgRGVsZXRpb24nLFxuICAgICAgICAgIGV4dHJhY3RlZEJ5OiAnYXV0bydcbiAgICAgICAgfSxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICAgIHRhZ3M6IHRoaXMuZXh0cmFjdFRhZ3MoY29udGVudCwgbWF0Y2guaW5kZXgpXG4gICAgICAgIH0sXG4gICAgICAgIGZsYXNoY2FyZElkczogW11cbiAgICAgIH07XG5cbiAgICAgIHVuaXRzLnB1c2godW5pdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuaXRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjNEMFx1NTNENlx1NTMwNVx1NTQyQlx1OUFEOFx1NEVBRVx1NzY4NFx1NUI4Q1x1NjU3NFx1NTNFNVx1NUI1MFxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0RnVsbFNlbnRlbmNlKGNvbnRlbnQ6IHN0cmluZywgaGlnaGxpZ2h0U3RhcnQ6IG51bWJlciwgaGlnaGxpZ2h0TGVuZ3RoOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IHNlbnRlbmNlRW5kcyA9IC9bLiE/XHUzMDAyXHVGRjAxP1xcbl0vO1xuICAgIFxuICAgIGxldCBzdGFydCA9IGhpZ2hsaWdodFN0YXJ0O1xuICAgIHdoaWxlIChzdGFydCA+IDApIHtcbiAgICAgIGNvbnN0IGNoYXIgPSBjb250ZW50W3N0YXJ0IC0gMV07XG4gICAgICBpZiAoc2VudGVuY2VFbmRzLnRlc3QoY2hhcikpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBzdGFydC0tO1xuICAgIH1cbiAgICBcbiAgICBsZXQgZW5kID0gaGlnaGxpZ2h0U3RhcnQgKyBoaWdobGlnaHRMZW5ndGg7XG4gICAgd2hpbGUgKGVuZCA8IGNvbnRlbnQubGVuZ3RoKSB7XG4gICAgICBjb25zdCBjaGFyID0gY29udGVudFtlbmRdO1xuICAgICAgaWYgKHNlbnRlbmNlRW5kcy50ZXN0KGNoYXIpKSB7XG4gICAgICAgIGVuZCsrO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGVuZCsrO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY29udGVudC5zdWJzdHJpbmcoc3RhcnQsIGVuZCkudHJpbSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1OEJBMVx1N0I5N1x1NjU4N1x1NjcyQ1x1NEY0RFx1N0Y2RVxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVQb3NpdGlvbihjb250ZW50OiBzdHJpbmcsIG9mZnNldDogbnVtYmVyKTogeyBsaW5lOiBudW1iZXI7IGNvbHVtbjogbnVtYmVyIH0ge1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zdWJzdHJpbmcoMCwgb2Zmc2V0KS5zcGxpdCgnXFxuJyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxpbmU6IGxpbmVzLmxlbmd0aCAtIDEsXG4gICAgICBjb2x1bW46IGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdLmxlbmd0aFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogXHU2N0U1XHU2MjdFXHU2MjQwXHU1NzI4XHU2ODA3XHU5ODk4XG4gICAqL1xuICBwcml2YXRlIGZpbmRIZWFkaW5nKGNvbnRlbnQ6IHN0cmluZywgcG9zaXRpb246IG51bWJlcik6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgYmVmb3JlQ29udGVudCA9IGNvbnRlbnQuc3Vic3RyaW5nKDAsIHBvc2l0aW9uKTtcbiAgICBjb25zdCBoZWFkaW5ncyA9IGJlZm9yZUNvbnRlbnQubWF0Y2goL14jezEsNn0gLiskL2dtKTtcbiAgICByZXR1cm4gaGVhZGluZ3MgPyBoZWFkaW5nc1toZWFkaW5ncy5sZW5ndGggLSAxXSA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYzRDBcdTUzRDZcdTk2NDRcdThGRDFcdTc2ODRcdTY4MDdcdTdCN0VcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdFRhZ3MoY29udGVudDogc3RyaW5nLCBwb3NpdGlvbjogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHRhZ3MgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBcbiAgICAvLyAxLiBcdTYzRDBcdTUzRDYgWUFNTCBmcm9udG1hdHRlciBcdTRFMkRcdTc2ODQgdGFnc1xuICAgIGNvbnN0IHlhbWxNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcbiAgICBpZiAoeWFtbE1hdGNoKSB7XG4gICAgICBjb25zdCB5YW1sQ29udGVudCA9IHlhbWxNYXRjaFsxXTtcbiAgICAgIGNvbnN0IHRhZ3NNYXRjaCA9IHlhbWxDb250ZW50Lm1hdGNoKC9edGFnczpcXHMqKC4rKSQvbSk7XG4gICAgICBpZiAodGFnc01hdGNoKSB7XG4gICAgICAgIGNvbnN0IHRhZ0NvbnRlbnQgPSB0YWdzTWF0Y2hbMV0udHJpbSgpO1xuICAgICAgICBpZiAodGFnQ29udGVudC5zdGFydHNXaXRoKCdbJykpIHtcbiAgICAgICAgICBjb25zdCBhcnJheVRhZ3MgPSB0YWdDb250ZW50Lm1hdGNoKC9bXFx3Ly1dKy9nKTtcbiAgICAgICAgICBhcnJheVRhZ3M/LmZvckVhY2godGFnID0+IHRhZ3MuYWRkKGAjJHt0YWd9YCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRhZ0NvbnRlbnQuc3BsaXQoJywnKS5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgICAgICBjb25zdCBjbGVhbmVkID0gdGFnLnRyaW0oKTtcbiAgICAgICAgICAgIGlmIChjbGVhbmVkKSB0YWdzLmFkZChgIyR7Y2xlYW5lZH1gKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyAyLiBcdTYzRDBcdTUzRDZcdTUzRTVcdTVCNTBcdTY3MkJcdTVDM0VcdTc2ODQgaW5saW5lIHRhZ3NcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3Vic3RyaW5nKDAsIHBvc2l0aW9uKS5zcGxpdCgnXFxuJyk7XG4gICAgY29uc3QgY3VycmVudExpbmUgPSBsaW5lcy5sZW5ndGggLSAxO1xuICAgIGNvbnN0IGxpbmVDb250ZW50ID0gY29udGVudC5zcGxpdCgnXFxuJylbY3VycmVudExpbmVdIHx8ICcnO1xuICAgIFxuICAgIGNvbnN0IGlubGluZVRhZ1JlZ2V4ID0gLyNbXFx3Ly1dKy9nO1xuICAgIGNvbnN0IGlubGluZVRhZ3MgPSBsaW5lQ29udGVudC5tYXRjaChpbmxpbmVUYWdSZWdleCk7XG4gICAgaW5saW5lVGFncz8uZm9yRWFjaCh0YWcgPT4gdGFncy5hZGQodGFnKSk7XG4gICAgXG4gICAgcmV0dXJuIEFycmF5LmZyb20odGFncyk7XG4gIH1cblxuICAvKipcbiAgICogXHU3NTFGXHU2MjEwXHU1NTJGXHU0RTAwIElEXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlSWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTc1MUZcdTYyMTAgQmxvY2sgSURcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVCbG9ja0lkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBleHRyYWN0LSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgNil9YDtcbiAgfVxufSIsICJpbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcblxuZXhwb3J0IGludGVyZmFjZSBBbm5vdGF0aW9uIHtcbiAgaWQ6IHN0cmluZztcbiAgdGFyZ2V0VHlwZTogJ2NvbnRlbnQnIHwgJ2ZpbGUnO1xuICB0YXJnZXRJZDogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIGJhZGdlPzoge1xuICAgIHRleHQ6IHN0cmluZztcbiAgICBjb2xvcjogc3RyaW5nO1xuICAgIGljb24/OiBzdHJpbmc7XG4gIH07XG4gIG1ldGFkYXRhOiB7XG4gICAgY3JlYXRlZEF0OiBudW1iZXI7XG4gICAgdXBkYXRlZEF0OiBudW1iZXI7XG4gICAgaXNQaW5uZWQ/OiBib29sZWFuO1xuICB9O1xufVxuXG5leHBvcnQgY2xhc3MgQW5ub3RhdGlvbk1hbmFnZXIge1xuICBwcml2YXRlIGFubm90YXRpb25zOiBNYXA8c3RyaW5nLCBBbm5vdGF0aW9uPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBkYXRhRm9sZGVyOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW5cbiAgKSB7XG4gICAgdGhpcy5kYXRhRm9sZGVyID0gYCR7dGhpcy5hcHAudmF1bHQuY29uZmlnRGlyfS9wbHVnaW5zL2xlYXJuaW5nLXN5c3RlbS9kYXRhYDtcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUoKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkQW5ub3RhdGlvbnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTUyQTBcdThGN0RcdTYyNDBcdTY3MDlcdTYyNzlcdTZDRThcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbG9hZEFubm90YXRpb25zKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXRoID0gYCR7dGhpcy5kYXRhRm9sZGVyfS9hbm5vdGF0aW9ucy5qc29uYDtcbiAgICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzLmFwcC52YXVsdC5hZGFwdGVyO1xuXG4gICAgICBpZiAoYXdhaXQgYWRhcHRlci5leGlzdHMocGF0aCkpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGFkYXB0ZXIucmVhZChwYXRoKTtcbiAgICAgICAgY29uc3QgYW5ub3RhdGlvbnM6IEFubm90YXRpb25bXSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGFubm90YXRpb24gb2YgYW5ub3RhdGlvbnMpIHtcbiAgICAgICAgICB0aGlzLmFubm90YXRpb25zLnNldChhbm5vdGF0aW9uLmlkLCBhbm5vdGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGFubm90YXRpb25zOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU2REZCXHU1MkEwXHU1MTg1XHU1QkI5XHU2Mjc5XHU2Q0U4XG4gICAqL1xuICBhc3luYyBhZGRDb250ZW50QW5ub3RhdGlvbihcbiAgICBjb250ZW50VW5pdElkOiBzdHJpbmcsXG4gICAgY29udGVudDogc3RyaW5nLFxuICAgIGJhZGdlPzogQW5ub3RhdGlvblsnYmFkZ2UnXVxuICApOiBQcm9taXNlPEFubm90YXRpb24+IHtcbiAgICBjb25zdCBhbm5vdGF0aW9uOiBBbm5vdGF0aW9uID0ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVJZCgpLFxuICAgICAgdGFyZ2V0VHlwZTogJ2NvbnRlbnQnLFxuICAgICAgdGFyZ2V0SWQ6IGNvbnRlbnRVbml0SWQsXG4gICAgICBjb250ZW50LFxuICAgICAgYmFkZ2UsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmFubm90YXRpb25zLnNldChhbm5vdGF0aW9uLmlkLCBhbm5vdGF0aW9uKTtcbiAgICBhd2FpdCB0aGlzLnBlcnNpc3QoKTtcblxuICAgIC8vIFx1NjZGNFx1NjVCMCBDb250ZW50VW5pdCBcdTUxNzNcdTgwNTRcbiAgICBjb25zdCBjb250ZW50VW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNvbnRlbnRVbml0SWQpO1xuICAgIGlmIChjb250ZW50VW5pdCkge1xuICAgICAgY29udGVudFVuaXQuYW5ub3RhdGlvbklkID0gYW5ub3RhdGlvbi5pZDtcbiAgICAgIGNvbnRlbnRVbml0Lm1ldGFkYXRhLnVwZGF0ZWRBdCA9IERhdGUubm93KCk7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5zYXZlQ29udGVudFVuaXQoY29udGVudFVuaXQpO1xuICAgIH1cblxuICAgIHJldHVybiBhbm5vdGF0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NkRGQlx1NTJBMFx1NjU4N1x1NEVGNlx1NjI3OVx1NkNFOFxuICAgKi9cbiAgYXN5bmMgYWRkRmlsZUFubm90YXRpb24oXG4gICAgZmlsZVBhdGg6IHN0cmluZyxcbiAgICBjb250ZW50OiBzdHJpbmdcbiAgKTogUHJvbWlzZTxBbm5vdGF0aW9uPiB7XG4gICAgY29uc3QgYW5ub3RhdGlvbjogQW5ub3RhdGlvbiA9IHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgIHRhcmdldFR5cGU6ICdmaWxlJyxcbiAgICAgIHRhcmdldElkOiBmaWxlUGF0aCxcbiAgICAgIGNvbnRlbnQsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmFubm90YXRpb25zLnNldChhbm5vdGF0aW9uLmlkLCBhbm5vdGF0aW9uKTtcbiAgICBhd2FpdCB0aGlzLnBlcnNpc3QoKTtcblxuICAgIHJldHVybiBhbm5vdGF0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NjI3OVx1NkNFOFxuICAgKi9cbiAgZ2V0QW5ub3RhdGlvbihpZDogc3RyaW5nKTogQW5ub3RhdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuYW5ub3RhdGlvbnMuZ2V0KGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTUxODVcdTVCQjlcdTc2ODRcdTYyNzlcdTZDRThcbiAgICovXG4gIGdldENvbnRlbnRBbm5vdGF0aW9uKGNvbnRlbnRVbml0SWQ6IHN0cmluZyk6IEFubm90YXRpb24gfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGNvbnRlbnRVbml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY29udGVudFVuaXRJZCk7XG4gICAgaWYgKCFjb250ZW50VW5pdD8uYW5ub3RhdGlvbklkKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIFxuICAgIHJldHVybiB0aGlzLmFubm90YXRpb25zLmdldChjb250ZW50VW5pdC5hbm5vdGF0aW9uSWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NjU4N1x1NEVGNlx1NzY4NFx1NjI0MFx1NjcwOVx1NjI3OVx1NkNFOFxuICAgKi9cbiAgZ2V0RmlsZUFubm90YXRpb25zKGZpbGVQYXRoOiBzdHJpbmcpOiBBbm5vdGF0aW9uW10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYW5ub3RhdGlvbnMudmFsdWVzKCkpLmZpbHRlcihcbiAgICAgIGFubiA9PiBhbm4udGFyZ2V0VHlwZSA9PT0gJ2ZpbGUnICYmIGFubi50YXJnZXRJZCA9PT0gZmlsZVBhdGhcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjZGNFx1NjVCMFx1NjI3OVx1NkNFOFxuICAgKi9cbiAgYXN5bmMgdXBkYXRlQW5ub3RhdGlvbihcbiAgICBpZDogc3RyaW5nLFxuICAgIHVwZGF0ZXM6IFBhcnRpYWw8QW5ub3RhdGlvbj5cbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgYW5ub3RhdGlvbiA9IHRoaXMuYW5ub3RhdGlvbnMuZ2V0KGlkKTtcbiAgICBpZiAoIWFubm90YXRpb24pIHJldHVybjtcblxuICAgIE9iamVjdC5hc3NpZ24oYW5ub3RhdGlvbiwgdXBkYXRlcywge1xuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgLi4uYW5ub3RhdGlvbi5tZXRhZGF0YSxcbiAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBhd2FpdCB0aGlzLnBlcnNpc3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTUyMjBcdTk2NjRcdTYyNzlcdTZDRThcbiAgICovXG4gIGFzeW5jIGRlbGV0ZUFubm90YXRpb24oaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLmFubm90YXRpb25zLmdldChpZCk7XG4gICAgaWYgKCFhbm5vdGF0aW9uKSByZXR1cm47XG5cbiAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTUxODVcdTVCQjlcdTYyNzlcdTZDRThcdUZGMENcdTg5RTNcdTk2NjRcdTUxNzNcdTgwNTRcbiAgICBpZiAoYW5ub3RhdGlvbi50YXJnZXRUeXBlID09PSAnY29udGVudCcpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnRVbml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoYW5ub3RhdGlvbi50YXJnZXRJZCk7XG4gICAgICBpZiAoY29udGVudFVuaXQpIHtcbiAgICAgICAgY29udGVudFVuaXQuYW5ub3RhdGlvbklkID0gdW5kZWZpbmVkO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5zYXZlQ29udGVudFVuaXQoY29udGVudFVuaXQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuYW5ub3RhdGlvbnMuZGVsZXRlKGlkKTtcbiAgICBhd2FpdCB0aGlzLnBlcnNpc3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTYyNDBcdTY3MDlcdTYyNzlcdTZDRThcbiAgICovXG4gIGdldEFsbEFubm90YXRpb25zKCk6IEFubm90YXRpb25bXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5hbm5vdGF0aW9ucy52YWx1ZXMoKSk7XG4gIH1cblxuICAvKipcbiAgICogXHU2MzAxXHU0RTQ1XHU1MzE2XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHBlcnNpc3QoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L2Fubm90YXRpb25zLmpzb25gO1xuICAgICAgY29uc3QgYW5ub3RhdGlvbnMgPSBBcnJheS5mcm9tKHRoaXMuYW5ub3RhdGlvbnMudmFsdWVzKCkpO1xuICAgICAgY29uc3QgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGFubm90YXRpb25zLCBudWxsLCAyKTtcbiAgICAgIFxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShwYXRoLCBkYXRhKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGVyc2lzdGluZyBhbm5vdGF0aW9uczonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NzUxRlx1NjIxMFx1NTUyRlx1NEUwMCBJRFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBhbm4tJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xuICB9XG59IiwgImltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERhdGFNYW5hZ2VyLCBDb250ZW50VW5pdCB9IGZyb20gJy4vRGF0YU1hbmFnZXInOyBcbmltcG9ydCB0eXBlIExlYXJuaW5nU3lzdGVtUGx1Z2luIGZyb20gJy4uL21haW4nO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZsYXNoY2FyZCB7XG4gIGlkOiBzdHJpbmc7XG4gIHR5cGU6ICdxYScgfCAnY2xvemUnO1xuICBzb3VyY2VDb250ZW50SWQ6IHN0cmluZztcbiAgc291cmNlRmlsZTogc3RyaW5nO1xuICBhbmNob3JMaW5rOiBzdHJpbmc7XG4gIFxuICAvLyBcdTUzNjFcdTcyNDdcdTUxODVcdTVCQjlcbiAgZnJvbnQ6IHN0cmluZztcbiAgYmFjazogc3RyaW5nIHwgc3RyaW5nW107XG4gIFxuICAvLyBcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdTRFMTNcdTc1MjhcbiAgY2xvemU/OiB7XG4gICAgb3JpZ2luYWw6IHN0cmluZztcbiAgICBkZWxldGlvbnM6IHtcbiAgICAgIGluZGV4OiBudW1iZXI7XG4gICAgICBhbnN3ZXI6IHN0cmluZztcbiAgICAgIGFsdGVybmF0aXZlcz86IHN0cmluZ1tdO1xuICAgIH1bXTtcbiAgfTtcbiAgXG4gIC8vIFx1NTIwNlx1N0VDNFxuICBkZWNrOiBzdHJpbmc7XG4gIHRhZ3M6IHN0cmluZ1tdO1xuICBcbiAgLy8gXHU1OTBEXHU0RTYwXHU2NTcwXHU2MzZFXG4gIHNjaGVkdWxpbmc6IHtcbiAgICBpbnRlcnZhbDogbnVtYmVyO1xuICAgIGVhc2U6IG51bWJlcjtcbiAgICBkdWU6IG51bWJlcjtcbiAgICBsYXBzZXM6IG51bWJlcjtcbiAgICByZXBzOiBudW1iZXI7XG4gICAgc3RhdGU6ICduZXcnIHwgJ2xlYXJuaW5nJyB8ICdyZXZpZXcnIHwgJ3JlbGVhcm5pbmcnO1xuICB9O1xuICBcbiAgLy8gXHU3RURGXHU4QkExXG4gIHN0YXRzOiB7XG4gICAgdG90YWxSZXZpZXdzOiBudW1iZXI7XG4gICAgY29ycmVjdENvdW50OiBudW1iZXI7XG4gICAgYXZlcmFnZVRpbWU6IG51bWJlcjtcbiAgICBsYXN0UmV2aWV3PzogbnVtYmVyO1xuICAgIGRpZmZpY3VsdHk6IG51bWJlcjtcbiAgfTtcbiAgXG4gIG1ldGFkYXRhOiB7XG4gICAgY3JlYXRlZEF0OiBudW1iZXI7XG4gICAgdXBkYXRlZEF0OiBudW1iZXI7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmV2aWV3TG9nIHtcbiAgaWQ6IHN0cmluZztcbiAgZmxhc2hjYXJkSWQ6IHN0cmluZztcbiAgdGltZXN0YW1wOiBudW1iZXI7XG4gIHJlc3BvbnNlOiB7XG4gICAgdXNlckFuc3dlcj86IHN0cmluZyB8IHN0cmluZ1tdO1xuICAgIHRpbWVTcGVudDogbnVtYmVyO1xuICAgIGVhc2U6ICdhZ2FpbicgfCAnaGFyZCcgfCAnZ29vZCcgfCAnZWFzeSc7XG4gIH07XG4gIGdyYWRpbmc/OiB7XG4gICAgY29ycmVjdG5lc3M6ICdjb3JyZWN0JyB8ICdwYXJ0aWFsJyB8ICd3cm9uZyc7XG4gICAgc2ltaWxhcml0eT86IG51bWJlcjtcbiAgfTtcbiAgc2NoZWR1bGluZ0NoYW5nZToge1xuICAgIG9sZEludGVydmFsOiBudW1iZXI7XG4gICAgbmV3SW50ZXJ2YWw6IG51bWJlcjtcbiAgICBvbGRFYXNlOiBudW1iZXI7XG4gICAgbmV3RWFzZTogbnVtYmVyO1xuICB9O1xufVxuXG5leHBvcnQgY2xhc3MgRmxhc2hjYXJkTWFuYWdlciB7XG4gIHByaXZhdGUgZmxhc2hjYXJkczogTWFwPHN0cmluZywgRmxhc2hjYXJkPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSByZXZpZXdMb2dzOiBSZXZpZXdMb2dbXSA9IFtdO1xuICBwcml2YXRlIGRhdGFGb2xkZXI6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGFwcDogQXBwLFxuICAgIHByaXZhdGUgZGF0YU1hbmFnZXI6IERhdGFNYW5hZ2VyLFxuICAgIHByaXZhdGUgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpblxuICApIHtcbiAgICB0aGlzLmRhdGFGb2xkZXIgPSBgJHt0aGlzLmFwcC52YXVsdC5jb25maWdEaXJ9L3BsdWdpbnMvbGVhcm5pbmctc3lzdGVtL2RhdGFgO1xuICB9XG5cbiAgYXN5bmMgaW5pdGlhbGl6ZSgpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRGbGFzaGNhcmRzKCk7XG4gICAgYXdhaXQgdGhpcy5sb2FkUmV2aWV3TG9ncygpO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0gXHU3RURGXHU0RTAwXHU1MjFCXHU1RUZBXHU1MTY1XHU1M0UzID09PT09PT09PT09PT09PT09PT09XG4gIFxuICAvKipcbiAgICogXHVEODNDXHVERDk1IFx1N0VERlx1NEUwMFx1NTE2NVx1NTNFMzogXHU0RUNFIENvbnRlbnRVbml0IFx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVxuICAgKiBcdTkwMDJcdTkxNERcdTYyNDBcdTY3MDlcdTU3M0FcdTY2NkY6IFx1NTNGM1x1OTUyRVx1NjNEMFx1NTNENlx1MzAwMVNjYW5cdTMwMDFcdTYyNzlcdTkxQ0ZcdTUyMUJcdTVFRkFcdTMwMDFcdTVGRUJcdTkwMUZcdTc1MUZcdTYyMTBcbiAgICovXG4gIGFzeW5jIGNyZWF0ZUZsYXNoY2FyZEZyb21Vbml0KFxuICAgIHVuaXQ6IENvbnRlbnRVbml0LFxuICAgIG9wdGlvbnM/OiB7XG4gICAgICBjdXN0b21RdWVzdGlvbj86IHN0cmluZztcbiAgICAgIGN1c3RvbUFuc3dlcj86IHN0cmluZztcbiAgICAgIGNhcmRUeXBlPzogJ3FhJyB8ICdjbG96ZSc7XG4gICAgfVxuICApOiBQcm9taXNlPEZsYXNoY2FyZD4ge1xuICAgIFxuICAgIGNvbnN0IGNhcmRUeXBlID0gb3B0aW9ucz8uY2FyZFR5cGUgfHwgKHVuaXQudHlwZSA9PT0gJ1FBJyA/ICdxYScgOiAnY2xvemUnKTtcbiAgXG4gICAgbGV0IGZsYXNoY2FyZDogRmxhc2hjYXJkO1xuICBcbiAgICBpZiAoY2FyZFR5cGUgPT09ICdxYScgfHwgdW5pdC50eXBlID09PSAnUUEnKSB7XG4gICAgICBjb25zdCBxdWVzdGlvbiA9IG9wdGlvbnM/LmN1c3RvbVF1ZXN0aW9uIHx8IHVuaXQuY29udGVudDtcbiAgICAgIGNvbnN0IGFuc3dlciA9IG9wdGlvbnM/LmN1c3RvbUFuc3dlciB8fCB1bml0LmFuc3dlciB8fCB1bml0LmNvbnRlbnQ7XG4gICAgICBcbiAgICAgIGZsYXNoY2FyZCA9IGF3YWl0IHRoaXMuY3JlYXRlUUFDYXJkKHVuaXQuaWQsIHF1ZXN0aW9uLCBhbnN3ZXIpO1xuICAgICAgXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRleHQgPSB1bml0LmZ1bGxDb250ZXh0IHx8IHVuaXQuY29udGVudDtcbiAgICAgIGNvbnN0IGFuc3dlciA9IG9wdGlvbnM/LmN1c3RvbUFuc3dlciB8fCB1bml0LmNvbnRlbnQ7XG4gICAgICBcbiAgICAgIGNvbnN0IGRlbGV0aW9ucyA9IFt7XG4gICAgICAgIGluZGV4OiB0ZXh0LmluZGV4T2YoYW5zd2VyKSxcbiAgICAgICAgYW5zd2VyOiBhbnN3ZXJcbiAgICAgIH1dO1xuICAgICAgXG5cbiAgICAgIGZsYXNoY2FyZCA9IGF3YWl0IHRoaXMuY3JlYXRlQ2xvemVDYXJkKHVuaXQuaWQsIHRleHQsIGRlbGV0aW9ucyk7XG4gICAgfVxuICBcbiAgICBcbiAgXG4gICAgcmV0dXJuIGZsYXNoY2FyZDtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFx1NjgzOFx1NUZDM1x1NTIxQlx1NUVGQVx1NjVCOVx1NkNENSA9PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBcdTUyMUJcdTVFRkFcdTk1RUVcdTdCNTRcdTUzNjFcdUZGMDhcdTU1MkZcdTRFMDBcdTcyNDhcdTY3MkNcdUZGMENcdTU0MDhcdTVFNzZcdTRFODZcdTYyNDBcdTY3MDlcdTUyOUZcdTgwRkRcdUZGMDlcbiAgICovXG4gIGFzeW5jIGNyZWF0ZVFBQ2FyZChcbiAgICBjb250ZW50VW5pdElkOiBzdHJpbmcsXG4gICAgcXVlc3Rpb246IHN0cmluZyxcbiAgICBhbnN3ZXI6IHN0cmluZyxcbiAgICBkZWNrPzogc3RyaW5nXG4gICk6IFByb21pc2U8Rmxhc2hjYXJkPiB7XG4gICAgY29uc3QgY29udGVudFVuaXQgPSB0aGlzLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNvbnRlbnRVbml0SWQpO1xuICAgIGlmICghY29udGVudFVuaXQpIHRocm93IG5ldyBFcnJvcignQ29udGVudCB1bml0IG5vdCBmb3VuZCcpO1xuXG4gICAgY29uc3QgY2FyZDogRmxhc2hjYXJkID0ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVJZCgpLFxuICAgICAgdHlwZTogJ3FhJyxcbiAgICAgIHNvdXJjZUNvbnRlbnRJZDogY29udGVudFVuaXRJZCxcbiAgICAgIHNvdXJjZUZpbGU6IGNvbnRlbnRVbml0LnNvdXJjZS5maWxlLFxuICAgICAgYW5jaG9yTGluazogY29udGVudFVuaXQuc291cmNlLmFuY2hvckxpbmssXG4gICAgICBmcm9udDogcXVlc3Rpb24sXG4gICAgICBiYWNrOiBhbnN3ZXIsXG4gICAgICBkZWNrOiBkZWNrIHx8IHRoaXMuaW5mZXJEZWNrKGNvbnRlbnRVbml0LnNvdXJjZS5maWxlKSxcbiAgICAgIHRhZ3M6IGNvbnRlbnRVbml0Lm1ldGFkYXRhLnRhZ3MsXG4gICAgICBzY2hlZHVsaW5nOiB0aGlzLmluaXRpYWxpemVTY2hlZHVsaW5nKCksXG4gICAgICBzdGF0czoge1xuICAgICAgICB0b3RhbFJldmlld3M6IDAsXG4gICAgICAgIGNvcnJlY3RDb3VudDogMCxcbiAgICAgICAgYXZlcmFnZVRpbWU6IDAsXG4gICAgICAgIGRpZmZpY3VsdHk6IDAuNVxuICAgICAgfSxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpXG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuZmxhc2hjYXJkcy5zZXQoY2FyZC5pZCwgY2FyZCk7XG4gICAgXG4gICAgLy8gXHU2NkY0XHU2NUIwIENvbnRlbnRVbml0IFx1NTE3M1x1ODA1NFxuICAgIGNvbnRlbnRVbml0LmZsYXNoY2FyZElkcy5wdXNoKGNhcmQuaWQpO1xuICAgIGF3YWl0IHRoaXMuZGF0YU1hbmFnZXIuc2F2ZUNvbnRlbnRVbml0cyhbY29udGVudFVuaXRdKTtcbiAgICBcbiAgICBhd2FpdCB0aGlzLnBlcnNpc3RGbGFzaGNhcmRzKCk7XG4gICAgcmV0dXJuIGNhcmQ7XG4gIH1cblxuICAvKipcbiAgICogXHU1MjFCXHU1RUZBXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU1MzYxXHVGRjA4XHU1NTJGXHU0RTAwXHU3MjQ4XHU2NzJDXHVGRjBDXHU1NDA4XHU1RTc2XHU0RTg2XHU2MjQwXHU2NzA5XHU1MjlGXHU4MEZEXHVGRjA5XG4gICAqL1xuICBhc3luYyBjcmVhdGVDbG96ZUNhcmQoXG4gICAgY29udGVudFVuaXRJZDogc3RyaW5nLFxuICAgIG9yaWdpbmFsOiBzdHJpbmcsXG4gICAgZGVsZXRpb25zOiB7IGluZGV4OiBudW1iZXI7IGFuc3dlcjogc3RyaW5nOyBhbHRlcm5hdGl2ZXM/OiBzdHJpbmdbXSB9W11cbiAgKTogUHJvbWlzZTxGbGFzaGNhcmQ+IHtcbiAgICBjb25zdCBjb250ZW50VW5pdCA9IHRoaXMuZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY29udGVudFVuaXRJZCk7XG4gICAgaWYgKCFjb250ZW50VW5pdCkgdGhyb3cgbmV3IEVycm9yKCdDb250ZW50IHVuaXQgbm90IGZvdW5kJyk7XG5cbiAgICBjb25zdCBmcm9udCA9IHRoaXMuZ2VuZXJhdGVDbG96ZVRleHQob3JpZ2luYWwsIGRlbGV0aW9ucyk7XG4gICAgY29uc3QgYmFjayA9IGRlbGV0aW9ucy5tYXAoZCA9PiBkLmFuc3dlcik7XG5cbiAgICBjb25zdCBjYXJkOiBGbGFzaGNhcmQgPSB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICB0eXBlOiAnY2xvemUnLFxuICAgICAgc291cmNlQ29udGVudElkOiBjb250ZW50VW5pdElkLFxuICAgICAgc291cmNlRmlsZTogY29udGVudFVuaXQuc291cmNlLmZpbGUsXG4gICAgICBhbmNob3JMaW5rOiBjb250ZW50VW5pdC5zb3VyY2UuYW5jaG9yTGluayxcbiAgICAgIGZyb250LFxuICAgICAgYmFjayxcbiAgICAgIGNsb3plOiB7XG4gICAgICAgIG9yaWdpbmFsLFxuICAgICAgICBkZWxldGlvbnNcbiAgICAgIH0sXG4gICAgICBkZWNrOiB0aGlzLmluZmVyRGVjayhjb250ZW50VW5pdC5zb3VyY2UuZmlsZSksXG4gICAgICB0YWdzOiBjb250ZW50VW5pdC5tZXRhZGF0YS50YWdzLFxuICAgICAgc2NoZWR1bGluZzogdGhpcy5pbml0aWFsaXplU2NoZWR1bGluZygpLFxuICAgICAgc3RhdHM6IHtcbiAgICAgICAgdG90YWxSZXZpZXdzOiAwLFxuICAgICAgICBjb3JyZWN0Q291bnQ6IDAsXG4gICAgICAgIGF2ZXJhZ2VUaW1lOiAwLFxuICAgICAgICBkaWZmaWN1bHR5OiAwLjVcbiAgICAgIH0sXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmZsYXNoY2FyZHMuc2V0KGNhcmQuaWQsIGNhcmQpO1xuICAgIFxuICAgIGNvbnRlbnRVbml0LmZsYXNoY2FyZElkcy5wdXNoKGNhcmQuaWQpO1xuICAgIGF3YWl0IHRoaXMuZGF0YU1hbmFnZXIuc2F2ZUNvbnRlbnRVbml0cyhbY29udGVudFVuaXRdKTtcbiAgICBcbiAgICBhd2FpdCB0aGlzLnBlcnNpc3RGbGFzaGNhcmRzKCk7XG4gICAgcmV0dXJuIGNhcmQ7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTY3RTVcdThCRTJcdTY1QjlcdTZDRDUgPT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU5NUVBXHU1MzYxXG4gICAqL1xuICBnZXRGbGFzaGNhcmQoaWQ6IHN0cmluZyk6IEZsYXNoY2FyZCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuZmxhc2hjYXJkcy5nZXQoaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NjI0MFx1NjcwOVx1OTVFQVx1NTM2MVxuICAgKi9cbiAgZ2V0QWxsRmxhc2hjYXJkcygpOiBGbGFzaGNhcmRbXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5mbGFzaGNhcmRzLnZhbHVlcygpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTRFQ0FcdTY1RTVcdTVGODVcdTU5MERcdTRFNjBcdTc2ODRcdTUzNjFcdTcyNDdcbiAgICovXG4gIGdldER1ZUNhcmRzKCk6IEZsYXNoY2FyZFtdIHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZmxhc2hjYXJkcy52YWx1ZXMoKSlcbiAgICAgIC5maWx0ZXIoY2FyZCA9PiBjYXJkLnNjaGVkdWxpbmcuZHVlIDw9IG5vdylcbiAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGNvbnN0IGFQcmlvcml0eSA9IHRoaXMuZ2V0Q2FyZFByaW9yaXR5KGEpO1xuICAgICAgICBjb25zdCBiUHJpb3JpdHkgPSB0aGlzLmdldENhcmRQcmlvcml0eShiKTtcbiAgICAgICAgcmV0dXJuIGJQcmlvcml0eSAtIGFQcmlvcml0eTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NjVCMFx1NTM2MVx1NzI0N1xuICAgKi9cbiAgZ2V0TmV3Q2FyZHMoKTogRmxhc2hjYXJkW10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZmxhc2hjYXJkcy52YWx1ZXMoKSlcbiAgICAgIC5maWx0ZXIoY2FyZCA9PiBjYXJkLnNjaGVkdWxpbmcuc3RhdGUgPT09ICduZXcnKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFx1NjZGNFx1NjVCMFx1NTQ4Q1x1NTIyMFx1OTY2NCA9PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBcdTY2RjRcdTY1QjBcdTUzNjFcdTcyNDdcdUZGMDhcdTU5MERcdTRFNjBcdTU0MEVcdUZGMDlcbiAgICovXG4gIGFzeW5jIHVwZGF0ZUNhcmQoY2FyZDogRmxhc2hjYXJkKSB7XG4gICAgdGhpcy5mbGFzaGNhcmRzLnNldChjYXJkLmlkLCBjYXJkKTtcbiAgICBhd2FpdCB0aGlzLnBlcnNpc3RGbGFzaGNhcmRzKCk7XG4gIH1cblxuLyoqXG4gKiBcdTUyMjBcdTk2NjRcdTUzNjFcdTcyNDdcbiAqL1xuYXN5bmMgZGVsZXRlQ2FyZChpZDogc3RyaW5nKSB7XG4gIGNvbnN0IGNhcmQgPSB0aGlzLmZsYXNoY2FyZHMuZ2V0KGlkKTtcbiAgaWYgKCFjYXJkKSByZXR1cm47XG5cbiAgLy8gXHVEODNEXHVERDI3IFx1ODlFM1x1OTY2NCBDb250ZW50VW5pdCBcdTUxNzNcdTgwNTRcbiAgY29uc3QgY29udGVudFVuaXQgPSB0aGlzLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNhcmQuc291cmNlQ29udGVudElkKTtcbiAgaWYgKGNvbnRlbnRVbml0KSB7XG4gICAgY29uc3QgaW5kZXggPSBjb250ZW50VW5pdC5mbGFzaGNhcmRJZHMuaW5kZXhPZihpZCk7XG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIGNvbnRlbnRVbml0LmZsYXNoY2FyZElkcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgYXdhaXQgdGhpcy5kYXRhTWFuYWdlci5zYXZlQ29udGVudFVuaXRzKFtjb250ZW50VW5pdF0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIFx1NTIyMFx1OTY2NFx1OTVFQVx1NTM2MVxuICB0aGlzLmZsYXNoY2FyZHMuZGVsZXRlKGlkKTtcbiAgYXdhaXQgdGhpcy5wZXJzaXN0Rmxhc2hjYXJkcygpO1xufVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFx1NTkwRFx1NEU2MFx1NjVFNVx1NUZENyA9PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBcdThCQjBcdTVGNTVcdTU5MERcdTRFNjBcdTY1RTVcdTVGRDdcbiAgICovXG4gIGFzeW5jIGxvZ1Jldmlldyhsb2c6IFJldmlld0xvZykge1xuICAgIHRoaXMucmV2aWV3TG9ncy5wdXNoKGxvZyk7XG4gICAgXG4gICAgaWYgKHRoaXMucmV2aWV3TG9ncy5sZW5ndGggPiAxMDAwKSB7XG4gICAgICB0aGlzLnJldmlld0xvZ3MgPSB0aGlzLnJldmlld0xvZ3Muc2xpY2UoLTEwMDApO1xuICAgIH1cbiAgICBcbiAgICBhd2FpdCB0aGlzLnBlcnNpc3RSZXZpZXdMb2dzKCk7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU1MzYxXHU3MjQ3XHU3Njg0XHU1OTBEXHU0RTYwXHU1Mzg2XHU1M0YyXG4gICAqL1xuICBnZXRDYXJkUmV2aWV3SGlzdG9yeShjYXJkSWQ6IHN0cmluZyk6IFJldmlld0xvZ1tdIHtcbiAgICByZXR1cm4gdGhpcy5yZXZpZXdMb2dzLmZpbHRlcihsb2cgPT4gbG9nLmZsYXNoY2FyZElkID09PSBjYXJkSWQpO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0gXHU3RURGXHU4QkExID09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1N0VERlx1OEJBMVx1NjU3MFx1NjM2RVxuICAgKi9cbiAgZ2V0U3RhdHMoKSB7XG4gICAgY29uc3QgYWxsID0gdGhpcy5nZXRBbGxGbGFzaGNhcmRzKCk7XG4gICAgY29uc3QgZHVlID0gdGhpcy5nZXREdWVDYXJkcygpO1xuICAgIGNvbnN0IG5ld0NhcmRzID0gdGhpcy5nZXROZXdDYXJkcygpO1xuICAgIFxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICBjb25zdCByZXZpZXdlZFRvZGF5ID0gdGhpcy5yZXZpZXdMb2dzLmZpbHRlcihcbiAgICAgIGxvZyA9PiBsb2cudGltZXN0YW1wID49IHRvZGF5XG4gICAgKS5sZW5ndGg7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG90YWw6IGFsbC5sZW5ndGgsXG4gICAgICBuZXc6IG5ld0NhcmRzLmxlbmd0aCxcbiAgICAgIGR1ZTogZHVlLmxlbmd0aCxcbiAgICAgIHJldmlld2VkVG9kYXksXG4gICAgICB0b3RhbFJldmlld3M6IHRoaXMucmV2aWV3TG9ncy5sZW5ndGhcbiAgICB9O1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0gXHU3OUMxXHU2NzA5XHU1REU1XHU1MTc3XHU2NUI5XHU2Q0Q1ID09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIFx1NTJBMFx1OEY3RFx1OTVFQVx1NTM2MVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBsb2FkRmxhc2hjYXJkcygpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGF0aCA9IGAke3RoaXMuZGF0YUZvbGRlcn0vZmxhc2hjYXJkcy5qc29uYDtcbiAgICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzLmFwcC52YXVsdC5hZGFwdGVyO1xuXG4gICAgICBpZiAoYXdhaXQgYWRhcHRlci5leGlzdHMocGF0aCkpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGFkYXB0ZXIucmVhZChwYXRoKTtcbiAgICAgICAgY29uc3QgZmxhc2hjYXJkczogRmxhc2hjYXJkW10gPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBjYXJkIG9mIGZsYXNoY2FyZHMpIHtcbiAgICAgICAgICB0aGlzLmZsYXNoY2FyZHMuc2V0KGNhcmQuaWQsIGNhcmQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgZmxhc2hjYXJkczonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NTJBMFx1OEY3RFx1NTkwRFx1NEU2MFx1NjVFNVx1NUZEN1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBsb2FkUmV2aWV3TG9ncygpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGF0aCA9IGAke3RoaXMuZGF0YUZvbGRlcn0vcmV2aWV3LWxvZ3MuanNvbmA7XG4gICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5hcHAudmF1bHQuYWRhcHRlcjtcblxuICAgICAgaWYgKGF3YWl0IGFkYXB0ZXIuZXhpc3RzKHBhdGgpKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhZGFwdGVyLnJlYWQocGF0aCk7XG4gICAgICAgIHRoaXMucmV2aWV3TG9ncyA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgcmV2aWV3IGxvZ3M6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTUyMURcdTU5Q0JcdTUzMTZcdThDMDNcdTVFQTZcdTUzQzJcdTY1NzBcbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZVNjaGVkdWxpbmcoKTogRmxhc2hjYXJkWydzY2hlZHVsaW5nJ10ge1xuICAgIHJldHVybiB7XG4gICAgICBpbnRlcnZhbDogMCxcbiAgICAgIGVhc2U6IDIuNSxcbiAgICAgIGR1ZTogRGF0ZS5ub3coKSxcbiAgICAgIGxhcHNlczogMCxcbiAgICAgIHJlcHM6IDAsXG4gICAgICBzdGF0ZTogJ25ldydcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NzUxRlx1NjIxMFx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1NjU4N1x1NjcyQ1xuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUNsb3plVGV4dChcbiAgICBvcmlnaW5hbDogc3RyaW5nLFxuICAgIGRlbGV0aW9uczogeyBpbmRleDogbnVtYmVyOyBhbnN3ZXI6IHN0cmluZyB9W11cbiAgKTogc3RyaW5nIHtcbiAgICBsZXQgcmVzdWx0ID0gb3JpZ2luYWw7XG4gICAgY29uc3Qgc29ydGVkID0gWy4uLmRlbGV0aW9uc10uc29ydCgoYSwgYikgPT4gYi5pbmRleCAtIGEuaW5kZXgpO1xuICAgIFxuICAgIGZvciAoY29uc3QgZGVsZXRpb24gb2Ygc29ydGVkKSB7XG4gICAgICBjb25zdCBiZWZvcmUgPSByZXN1bHQuc3Vic3RyaW5nKDAsIGRlbGV0aW9uLmluZGV4KTtcbiAgICAgIGNvbnN0IGFmdGVyID0gcmVzdWx0LnN1YnN0cmluZyhkZWxldGlvbi5pbmRleCArIGRlbGV0aW9uLmFuc3dlci5sZW5ndGgpO1xuICAgICAgcmVzdWx0ID0gYCR7YmVmb3JlfVsuLi5dJHthZnRlcn1gO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjNBOFx1NjVBRFx1NTM2MVx1N0VDNFx1NTQwRFx1NzlGMFxuICAgKi9cbiAgcHJpdmF0ZSBpbmZlckRlY2soZmlsZVBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgcGFydHMgPSBmaWxlUGF0aC5zcGxpdCgnLycpO1xuICAgIHJldHVybiBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHNbcGFydHMubGVuZ3RoIC0gMl0gOiAnRGVmYXVsdCc7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU1MzYxXHU3MjQ3XHU0RjE4XHU1MTQ4XHU3RUE3XG4gICAqL1xuICBwcml2YXRlIGdldENhcmRQcmlvcml0eShjYXJkOiBGbGFzaGNhcmQpOiBudW1iZXIge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3Qgb3ZlcmR1ZSA9IE1hdGgubWF4KDAsIG5vdyAtIGNhcmQuc2NoZWR1bGluZy5kdWUpO1xuICAgIGNvbnN0IGRheXNPdmVyZHVlID0gb3ZlcmR1ZSAvICgyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgICBcbiAgICBpZiAoY2FyZC5zY2hlZHVsaW5nLnN0YXRlID09PSAnbmV3JykgcmV0dXJuIDEwMCArIGRheXNPdmVyZHVlO1xuICAgIGlmIChjYXJkLnNjaGVkdWxpbmcuc3RhdGUgPT09ICdyZWxlYXJuaW5nJykgcmV0dXJuIDIwMCArIGRheXNPdmVyZHVlO1xuICAgIHJldHVybiBkYXlzT3ZlcmR1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYzMDFcdTRFNDVcdTUzMTZcdTk1RUFcdTUzNjFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgcGVyc2lzdEZsYXNoY2FyZHMoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L2ZsYXNoY2FyZHMuanNvbmA7XG4gICAgICBjb25zdCBmbGFzaGNhcmRzID0gQXJyYXkuZnJvbSh0aGlzLmZsYXNoY2FyZHMudmFsdWVzKCkpO1xuICAgICAgY29uc3QgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGZsYXNoY2FyZHMsIG51bGwsIDIpO1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShwYXRoLCBkYXRhKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGVyc2lzdGluZyBmbGFzaGNhcmRzOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU2MzAxXHU0RTQ1XHU1MzE2XHU1OTBEXHU0RTYwXHU2NUU1XHU1RkQ3XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHBlcnNpc3RSZXZpZXdMb2dzKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXRoID0gYCR7dGhpcy5kYXRhRm9sZGVyfS9yZXZpZXctbG9ncy5qc29uYDtcbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnJldmlld0xvZ3MsIG51bGwsIDIpO1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShwYXRoLCBkYXRhKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGVyc2lzdGluZyByZXZpZXcgbG9nczonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NzUxRlx1NjIxMFx1NTUyRlx1NEUwMCBJRFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBjYXJkLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcbiAgfVxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxrQkFRYTtBQVJiO0FBQUE7QUFBQSxJQUFBQSxtQkFBdUI7QUFRaEIsSUFBTSx3QkFBTixNQUE0QjtBQUFBLE1BQ2pDLFlB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O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFB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R2IsUUFBSSxTQUFTLGVBQWUsMEJBQTBCLEdBQUc7QUFDdkQ7QUFBQSxJQUNGO0FBRUEsWUFBUSxjQUFjO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFB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QTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFB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QUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtB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QUFPLFVBQVUsUUFBUSxLQUFLO0FBQzlCLGFBQU0sNkJBQU0sYUFBYTtBQUFBLFFBQ3ZCLE1BQU07QUFBQSxRQUNOLFFBQVE7QUFBQSxNQUNWO0FBQUEsSUFDRjtBQUVBLFFBQUksTUFBTTtBQUNSLGdCQUFVLFdBQVcsSUFBSTtBQUFBLElBQzNCO0FBQUEsRUFDRjtBQUFBLEVBRUEsa0JBQWtCO0FBR2hCLFVBQU0saUJBQWlCLEtBQUssSUFBSSxVQUFVLGdCQUFnQixrQkFBa0I7QUFDNUUsbUJBQWUsUUFBUSxVQUFRO0FBQzdCLFlBQU0sT0FBTyxLQUFLO0FBQ2xCLFdBQUssUUFBUTtBQUFBLElBQ2YsQ0FBQztBQUdELFVBQU0sZ0JBQWdCLEtBQUssSUFBSSxVQUFVLGdCQUFnQiwwQkFBMEI7QUFDbkYsa0JBQWMsUUFBUSxVQUFRO0FBQzVCLFlBQU0sT0FBTyxLQUFLO0FBQ2xCLFdBQUssUUFBUTtBQUFBLElBQ2YsQ0FBQztBQUdELFVBQU0sYUFBYSxLQUFLLElBQUksVUFBVSxnQkFBZ0IsdUJBQXVCO0FBQzdFLGVBQVcsUUFBUSxVQUFRO0FBQ3pCLFlBQU0sT0FBTyxLQUFLO0FBQ2xCLFdBQUssUUFBUTtBQUFBLElBQ2YsQ0FBQztBQUFBLEVBRUg7QUFBQSxFQUVRLGlCQUFpQjtBQUN2QixVQUFNLGdCQUFnQixLQUFLLGlCQUFpQjtBQUM1QyxrQkFBYyxTQUFTLHdCQUF3QjtBQUUvQyxVQUFNLGVBQWUsTUFBTTtBQUN6QixZQUFNLFFBQVEsS0FBSyxpQkFBaUIsU0FBUztBQUM3QyxvQkFBYyxRQUFRLGFBQU0sTUFBTSxTQUFTO0FBQzNDLG9CQUFjLFFBQVEsR0FBRyxNQUFNO0FBQUEsRUFBNkIsTUFBTTtBQUFBLElBQ3BFO0FBR0EsaUJBQWE7QUFHYixTQUFLO0FBQUEsTUFDSCxPQUFPLFlBQVksY0FBYyxHQUFLO0FBQUEsSUFDeEM7QUFHQSxrQkFBYyxpQkFBaUIsU0FBUyxNQUFNO0FBQzVDLFdBQUssZUFBZTtBQUFBLElBQ3RCLENBQUM7QUFBQSxFQUNIO0FBQ0Y7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIkZsYXNoY2FyZENyZWF0ZU1vZGFsIiwgIkFubm90YXRpb25Nb2RhbCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJjb250YWluZXIiLCAiYW5ub3RhdGlvbiIsICJjb250ZW50IiwgIlF1aWNrRmxhc2hjYXJkQ3JlYXRvciIsICJhbGxDYXJkcyIsICJCYXRjaENyZWF0ZU1vZGFsIiwgInVuaXRzIiwgInVuaXQiLCAiaW1wb3J0X29ic2lkaWFuIiwgInNpbWlsYXJpdHkiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJGaWxlQW5ub3RhdGlvbk1vZGFsIl0KfQo=
