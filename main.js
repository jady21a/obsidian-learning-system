/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/core/QuickFlashcardCreator.ts
var QuickFlashcardCreator_exports = {};
__export(QuickFlashcardCreator_exports, {
  QuickFlashcardCreator: () => QuickFlashcardCreator
});
var import_obsidian2, QuickFlashcardCreator;
var init_QuickFlashcardCreator = __esm({
  "src/core/QuickFlashcardCreator.ts"() {
    import_obsidian2 = require("obsidian");
    QuickFlashcardCreator = class {
      constructor(plugin) {
        this.plugin = plugin;
      }
      /**
       * 从提取内容一键创建问答卡
       * 如果有批注，使用批注作为答案
       */
      async createQuickQACard(contentUnit) {
        try {
          const annotation = this.plugin.annotationManager.getContentAnnotation(contentUnit.id);
          let question;
          let answer;
          if (annotation && annotation.content) {
            if (this.isQuestion(annotation.content)) {
              question = this.generateDefaultQuestion(contentUnit);
              answer = annotation.content;
            } else {
              question = this.generateDefaultQuestion(contentUnit);
              answer = annotation.content;
            }
          } else {
            question = this.generateDefaultQuestion(contentUnit);
            answer = contentUnit.content;
          }
          const card = await this.plugin.flashcardManager.createQACard(
            contentUnit.id,
            question,
            answer
          );
          new import_obsidian2.Notice(`\u2705 Flashcard created! (Q&A)`);
        } catch (error) {
          console.error("Error creating quick flashcard:", error);
          new import_obsidian2.Notice("\u274C Failed to create flashcard");
        }
      }
      /**
       * 从提取内容一键创建完形填空卡
       * 自动识别关键词
       */
      async createQuickClozeCard(contentUnit) {
        try {
          const keywords = this.extractKeywords(contentUnit.content);
          if (keywords.length === 0) {
            new import_obsidian2.Notice("\u26A0\uFE0F No keywords found for cloze deletion");
            return;
          }
          const deletions = keywords.map((keyword) => {
            const index = contentUnit.content.indexOf(keyword.word);
            return {
              index,
              answer: keyword.word
            };
          }).filter((d) => d.index !== -1);
          if (deletions.length === 0) {
            new import_obsidian2.Notice("\u26A0\uFE0F Could not create cloze deletions");
            return;
          }
          const card = await this.plugin.flashcardManager.createClozeCard(
            contentUnit.id,
            contentUnit.content,
            deletions
          );
          new import_obsidian2.Notice(`\u2705 Flashcard created! (Cloze with ${deletions.length} blanks)`);
        } catch (error) {
          console.error("Error creating quick cloze card:", error);
          new import_obsidian2.Notice("\u274C Failed to create flashcard");
        }
      }
      /**
       * 智能创建闪卡（自动判断类型）
       */
      async createSmartCard(contentUnit) {
        const annotation = this.plugin.annotationManager.getContentAnnotation(contentUnit.id);
        if (annotation && this.isQuestion(annotation.content)) {
          await this.createQuickQACard(contentUnit);
          return;
        }
        if (contentUnit.content.length < 200) {
          await this.createQuickQACard(contentUnit);
          return;
        }
        await this.createQuickClozeCard(contentUnit);
      }
      /**
       * 批量创建闪卡
       */
      async createBatchCards(contentUnits, type = "smart") {
        let success = 0;
        let failed = 0;
        for (const unit of contentUnits) {
          try {
            switch (type) {
              case "qa":
                await this.createQuickQACard(unit);
                break;
              case "cloze":
                await this.createQuickClozeCard(unit);
                break;
              case "smart":
                await this.createSmartCard(unit);
                break;
            }
            success++;
          } catch (error) {
            console.error("Error creating card:", error);
            failed++;
          }
        }
        return { success, failed };
      }
      /**
       * 判断文本是否是问题
       */
      isQuestion(text) {
        const questionWords = ["what", "why", "how", "when", "where", "who", "which"];
        const lowerText = text.toLowerCase().trim();
        if (lowerText.endsWith("?"))
          return true;
        for (const word of questionWords) {
          if (lowerText.startsWith(word + " "))
            return true;
        }
        if (text.includes("\u4EC0\u4E48") || text.includes("\u4E3A\u4EC0\u4E48") || text.includes("\u600E\u4E48") || text.includes("\u5982\u4F55") || text.includes("\u5417\uFF1F") || text.includes("\u5462\uFF1F")) {
          return true;
        }
        return false;
      }
      /**
       * 生成默认问题
       */
      generateDefaultQuestion(contentUnit) {
        if (contentUnit.source.heading) {
          const heading = contentUnit.source.heading.replace(/^#+\s*/, "");
          return `What is the key point about "${heading}"?`;
        }
        if (contentUnit.content.length < 50) {
          return `What does "${contentUnit.content}" mean?`;
        } else if (contentUnit.content.length < 150) {
          const firstWords = contentUnit.content.substring(0, 30) + "...";
          return `Explain: "${firstWords}"`;
        } else {
          return `What are the key points in this content?`;
        }
      }
      /**
       * 提取关键词（用于完形填空）
       */
      extractKeywords(text) {
        const words = text.match(/\b[A-Za-z]{3,}\b/g) || [];
        const stopWords = /* @__PURE__ */ new Set([
          "the",
          "is",
          "at",
          "which",
          "on",
          "a",
          "an",
          "and",
          "or",
          "but",
          "in",
          "with",
          "to",
          "for",
          "of",
          "as",
          "by",
          "this",
          "that",
          "from",
          "they",
          "we",
          "say",
          "her",
          "she",
          "he",
          "will",
          "my",
          "one",
          "all",
          "would",
          "there",
          "their",
          "what",
          "so",
          "up",
          "out",
          "if",
          "about",
          "who",
          "get",
          "which",
          "go",
          "me",
          "when",
          "make",
          "can",
          "like",
          "time",
          "no",
          "just",
          "him",
          "know",
          "take",
          "people",
          "into",
          "year",
          "your",
          "good",
          "some",
          "could",
          "them",
          "see",
          "other"
        ]);
        const wordFreq = /* @__PURE__ */ new Map();
        words.forEach((word) => {
          const lower = word.toLowerCase();
          if (!stopWords.has(lower) && word.length > 3) {
            wordFreq.set(word, (wordFreq.get(word) || 0) + 1);
          }
        });
        const scored = Array.from(wordFreq.entries()).map(([word, freq]) => {
          let score = freq;
          if (word.length > 8)
            score += 2;
          else if (word.length > 6)
            score += 1;
          if (word[0] === word[0].toUpperCase())
            score += 1;
          return { word, score };
        });
        return scored.sort((a, b) => b.score - a.score).slice(0, 3);
      }
    };
  }
});

// src/ui/FlashcardCreateModal.ts
var FlashcardCreateModal_exports = {};
__export(FlashcardCreateModal_exports, {
  FlashcardCreateModal: () => FlashcardCreateModal
});
var import_obsidian3, FlashcardCreateModal;
var init_FlashcardCreateModal = __esm({
  "src/ui/FlashcardCreateModal.ts"() {
    import_obsidian3 = require("obsidian");
    FlashcardCreateModal = class extends import_obsidian3.Modal {
      constructor(app, plugin, contentUnit, onSave) {
        super(app);
        this.plugin = plugin;
        this.cardType = "qa";
        // Q&A 字段
        this.question = "";
        this.answer = "";
        // Cloze 字段
        this.clozeText = "";
        this.selectedRanges = [];
        this.contentUnit = contentUnit;
        this.onSave = onSave;
        this.answer = contentUnit.content;
        this.clozeText = contentUnit.content;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.addClass("flashcard-create-modal");
        contentEl.createEl("h2", { text: "Create Flashcard" });
        const contentPreview = contentEl.createDiv({ cls: "content-preview" });
        contentPreview.createEl("h3", { text: "Source Content:" });
        contentPreview.createEl("blockquote", { text: this.contentUnit.content });
        new import_obsidian3.Setting(contentEl).setName("Card Type").setDesc("Choose the type of flashcard").addDropdown((dropdown) => {
          dropdown.addOption("qa", "\u{1F4DD} Question & Answer").addOption("cloze", "\u270F\uFE0F Cloze Deletion").setValue(this.cardType).onChange((value) => {
            this.cardType = value;
            this.refreshCardInputs();
          });
        });
        this.cardInputContainer = contentEl.createDiv({ cls: "card-input-container" });
        this.refreshCardInputs();
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => this.close());
        const saveBtn = buttonContainer.createEl("button", {
          text: "Create Flashcard",
          cls: "mod-cta"
        });
        saveBtn.addEventListener("click", () => this.saveFlashcard());
        this.addStyles();
      }
      refreshCardInputs() {
        this.cardInputContainer.empty();
        if (this.cardType === "qa") {
          this.renderQAInputs();
        } else {
          this.renderClozeInputs();
        }
      }
      renderQAInputs() {
        new import_obsidian3.Setting(this.cardInputContainer).setName("Question (Front)").setDesc("What question should this card ask?").addTextArea((text) => {
          text.setPlaceholder("Enter your question...").setValue(this.question).onChange((value) => {
            this.question = value;
          });
          text.inputEl.rows = 3;
          text.inputEl.style.width = "100%";
        });
        new import_obsidian3.Setting(this.cardInputContainer).setName("Answer (Back)").setDesc("What is the correct answer?").addTextArea((text) => {
          text.setPlaceholder("Enter the answer...").setValue(this.answer).onChange((value) => {
            this.answer = value;
          });
          text.inputEl.rows = 3;
          text.inputEl.style.width = "100%";
        });
        const hint = this.cardInputContainer.createDiv({ cls: "input-hint" });
        hint.createEl("small", {
          text: "\u{1F4A1} Tip: You can use the source content as the answer, or write your own."
        });
      }
      renderClozeInputs() {
        const container = this.cardInputContainer;
        container.createEl("h3", { text: "Cloze Deletion" });
        container.createEl("p", {
          text: "Select text to hide (cloze deletion). Click on words to toggle selection.",
          cls: "cloze-instruction"
        });
        const textContainer = container.createDiv({ cls: "cloze-text-container" });
        this.renderSelectableText(textContainer);
        if (this.selectedRanges.length > 0) {
          const selectedList = container.createDiv({ cls: "selected-deletions" });
          selectedList.createEl("h4", { text: "Selected Deletions:" });
          this.selectedRanges.forEach((range, index) => {
            const item = selectedList.createDiv({ cls: "deletion-item" });
            item.createSpan({ text: `${index + 1}. ` });
            item.createSpan({
              text: range.text,
              cls: "deletion-text"
            });
            const removeBtn = item.createEl("button", {
              text: "\xD7",
              cls: "remove-deletion-btn"
            });
            removeBtn.addEventListener("click", () => {
              this.selectedRanges.splice(index, 1);
              this.refreshCardInputs();
            });
          });
        }
        const preview = container.createDiv({ cls: "cloze-preview" });
        preview.createEl("h4", { text: "Preview:" });
        preview.createDiv({
          text: this.generateClozePreview(),
          cls: "preview-text"
        });
      }
      renderSelectableText(container) {
        const words = this.clozeText.split(/(\s+)/);
        let currentIndex = 0;
        words.forEach((word) => {
          const wordStart = currentIndex;
          const wordEnd = currentIndex + word.length;
          if (word.trim()) {
            const isSelected = this.selectedRanges.some(
              (range) => range.start === wordStart && range.end === wordEnd
            );
            const span = container.createEl("span", {
              text: word,
              cls: isSelected ? "cloze-word selected" : "cloze-word"
            });
            span.addEventListener("click", () => {
              this.toggleWordSelection(wordStart, wordEnd, word);
            });
          } else {
            container.createEl("span", { text: word });
          }
          currentIndex = wordEnd;
        });
      }
      toggleWordSelection(start, end, text) {
        const index = this.selectedRanges.findIndex(
          (range) => range.start === start && range.end === end
        );
        if (index > -1) {
          this.selectedRanges.splice(index, 1);
        } else {
          this.selectedRanges.push({ start, end, text });
          this.selectedRanges.sort((a, b) => a.start - b.start);
        }
        this.refreshCardInputs();
      }
      generateClozePreview() {
        let preview = this.clozeText;
        const sorted = [...this.selectedRanges].sort((a, b) => b.start - a.start);
        for (const range of sorted) {
          const before = preview.substring(0, range.start);
          const after = preview.substring(range.end);
          preview = `${before}[...]${after}`;
        }
        return preview;
      }
      async saveFlashcard() {
        try {
          if (this.cardType === "qa") {
            if (!this.question.trim()) {
              new import_obsidian3.Notice("Please enter a question");
              return;
            }
            if (!this.answer.trim()) {
              new import_obsidian3.Notice("Please enter an answer");
              return;
            }
            await this.plugin.flashcardManager.createQACard(
              this.contentUnit.id,
              this.question,
              this.answer
            );
            new import_obsidian3.Notice("Q&A flashcard created!");
          } else {
            if (this.selectedRanges.length === 0) {
              new import_obsidian3.Notice("Please select at least one word to hide");
              return;
            }
            const deletions = this.selectedRanges.map((range) => ({
              index: range.start,
              answer: range.text
            }));
            await this.plugin.flashcardManager.createClozeCard(
              this.contentUnit.id,
              this.clozeText,
              deletions
            );
            new import_obsidian3.Notice("Cloze flashcard created!");
          }
          this.close();
          this.onSave();
        } catch (error) {
          console.error("Error creating flashcard:", error);
          new import_obsidian3.Notice("Error creating flashcard");
        }
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      .flashcard-create-modal {
        padding: 20px;
        max-width: 600px;
      }

      .content-preview {
        margin: 20px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .content-preview h3 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .content-preview blockquote {
        margin: 0;
        padding: 10px;
        border-left: 3px solid var(--interactive-accent);
        background: var(--background-primary);
        border-radius: 4px;
      }

      .card-input-container {
        margin: 20px 0;
      }

      .input-hint {
        margin-top: 10px;
        padding: 10px;
        background: var(--background-secondary);
        border-radius: 4px;
        color: var(--text-muted);
      }

      /* Cloze \u6837\u5F0F */
      .cloze-instruction {
        color: var(--text-muted);
        font-size: 0.9em;
        margin-bottom: 15px;
      }

      .cloze-text-container {
        padding: 15px;
        background: var(--background-primary);
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        line-height: 1.8;
        margin-bottom: 15px;
        cursor: default;
      }

      .cloze-word {
        padding: 2px 4px;
        margin: 0 1px;
        border-radius: 3px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .cloze-word:hover {
        background: var(--background-modifier-hover);
      }

      .cloze-word.selected {
        background: var(--interactive-accent);
        color: white;
        font-weight: 500;
      }

      .selected-deletions {
        margin: 15px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .selected-deletions h4 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .deletion-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 6px 10px;
        background: var(--background-primary);
        border-radius: 4px;
        margin-bottom: 6px;
      }

      .deletion-text {
        flex: 1;
        font-weight: 500;
        color: var(--interactive-accent);
      }

      .remove-deletion-btn {
        padding: 2px 8px;
        background: var(--background-modifier-error);
        color: white;
        border: none;
        border-radius: 3px;
        cursor: pointer;
        font-size: 16px;
        line-height: 1;
      }

      .remove-deletion-btn:hover {
        background: var(--color-red);
      }

      .cloze-preview {
        margin: 15px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .cloze-preview h4 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .preview-text {
        padding: 10px;
        background: var(--background-primary);
        border-radius: 4px;
        line-height: 1.6;
      }

      .modal-button-container {
        display: flex;
        gap: 10px;
        justify-content: flex-end;
        margin-top: 20px;
      }

      .modal-button-container button {
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
      }
    `;
        document.head.appendChild(styleEl);
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
  }
});

// src/ui/OverviewView.ts
var OverviewView_exports = {};
__export(OverviewView_exports, {
  BatchCreateModal: () => BatchCreateModal,
  OverviewView: () => OverviewView,
  VIEW_TYPE_OVERVIEW: () => VIEW_TYPE_OVERVIEW
});
var import_obsidian4, VIEW_TYPE_OVERVIEW, OverviewView, BatchCreateModal, ConfirmModal;
var init_OverviewView = __esm({
  "src/ui/OverviewView.ts"() {
    import_obsidian4 = require("obsidian");
    init_QuickFlashcardCreator();
    VIEW_TYPE_OVERVIEW = "learning-system-overview";
    OverviewView = class extends import_obsidian4.ItemView {
      constructor(leaf, plugin) {
        super(leaf);
        //   private contentEl: HTMLElement;
        this.groupBy = "file";
        this.searchQuery = "";
        this.batchMode = false;
        this.selectedUnitIds = /* @__PURE__ */ new Set();
        this.plugin = plugin;
        this.quickCreator = new QuickFlashcardCreator(plugin);
      }
      getViewType() {
        return VIEW_TYPE_OVERVIEW;
      }
      getDisplayText() {
        return "Learning Overview";
      }
      getIcon() {
        return "layout-list";
      }
      async onOpen() {
        const container = this.containerEl.children[1];
        container.empty();
        this.createToolbar(container);
        this.contentEl = container.createDiv({ cls: "learning-system-content" });
        await this.refresh();
        this.addStyles();
      }
      async onClose() {
      }
      // 添加到 OverviewView 类中
      scrollToFile(filePath) {
        setTimeout(() => {
          const fileGroups = this.contentEl.querySelectorAll(".file-group");
          fileGroups.forEach((group) => {
            var _a, _b;
            const header = group.querySelector(".group-header");
            if ((_b = header == null ? void 0 : header.textContent) == null ? void 0 : _b.includes(((_a = filePath.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || "")) {
              group.scrollIntoView({ behavior: "smooth", block: "start" });
            }
          });
        }, 100);
      }
      createToolbar(container) {
        const toolbar = container.createDiv({ cls: "learning-system-toolbar" });
        const searchContainer = toolbar.createDiv({ cls: "search-container" });
        const searchInput = searchContainer.createEl("input", {
          type: "text",
          placeholder: "Search content...",
          cls: "search-input"
        });
        searchInput.addEventListener("input", (e) => {
          this.searchQuery = e.target.value;
          this.refresh();
        });
        const groupContainer = toolbar.createDiv({ cls: "group-container" });
        groupContainer.createSpan({ text: "Group by: ", cls: "group-label" });
        const groupSelect = groupContainer.createEl("select", { cls: "group-select" });
        const options = [
          { value: "file", label: "File" },
          { value: "tag", label: "Tag" },
          { value: "date", label: "Date" }
        ];
        options.forEach((opt) => {
          const option = groupSelect.createEl("option", {
            value: opt.value,
            text: opt.label
          });
          if (opt.value === this.groupBy) {
            option.selected = true;
          }
        });
        groupSelect.addEventListener("change", (e) => {
          this.groupBy = e.target.value;
          this.refresh();
        });
        const batchActions = toolbar.createDiv({ cls: "batch-actions-overview" });
        const batchModeBtn = batchActions.createEl("button", {
          text: this.batchMode ? "\u2713 Done" : "\u2610 Batch Mode",
          cls: "batch-mode-btn"
        });
        batchModeBtn.addEventListener("click", () => {
          this.batchMode = !this.batchMode;
          if (!this.batchMode) {
            this.selectedUnitIds.clear();
          }
          this.refresh();
        });
        if (this.batchMode) {
          const selectAllBtn = batchActions.createEl("button", {
            text: this.isAllSelected() ? "\u2611 Deselect All" : "\u2610 Select All",
            cls: "select-all-btn"
          });
          selectAllBtn.addEventListener("click", () => {
            this.toggleSelectAll();
          });
          const batchDeleteBtn = batchActions.createEl("button", {
            text: `\u{1F5D1}\uFE0F Delete (${this.selectedUnitIds.size})`,
            cls: "batch-delete-btn"
          });
          batchDeleteBtn.addEventListener("click", () => {
            this.batchDeleteNotes();
          });
          const batchCreateBtn = batchActions.createEl("button", {
            text: `\u26A1 Create Cards (${this.selectedUnitIds.size})`,
            cls: "batch-create-cards-btn"
          });
          batchCreateBtn.addEventListener("click", () => {
            this.batchCreateFlashcards();
          });
        } else {
          const batchCreateAllBtn = batchActions.createEl("button", {
            text: "\u26A1 Batch Create Cards",
            cls: "batch-create-btn"
          });
          batchCreateAllBtn.addEventListener("click", () => this.showBatchCreateModal());
        }
        const refreshBtn = toolbar.createEl("button", {
          text: "\u27F3",
          cls: "refresh-btn"
        });
        refreshBtn.addEventListener("click", () => this.refresh());
        const stats = toolbar.createDiv({ cls: "stats-container" });
        const totalCount = this.plugin.dataManager.getAllContentUnits().length;
        stats.createSpan({ text: `Total: ${totalCount}`, cls: "stats-text" });
      }
      async refresh() {
        this.contentEl.empty();
        let units = this.plugin.dataManager.getAllContentUnits();
        if (this.searchQuery) {
          const query = this.searchQuery.toLowerCase();
          units = units.filter(
            (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
          );
        }
        if (units.length === 0) {
          this.contentEl.createDiv({
            text: this.searchQuery ? "No results found" : "No content extracted yet",
            cls: "empty-state"
          });
          return;
        }
        switch (this.groupBy) {
          case "file":
            this.renderByFile(units);
            break;
          case "tag":
            this.renderByTag(units);
            break;
          case "date":
            this.renderByDate(units);
            break;
        }
      }
      renderByFile(units) {
        const grouped = /* @__PURE__ */ new Map();
        units.forEach((unit) => {
          if (!grouped.has(unit.source.file)) {
            grouped.set(unit.source.file, []);
          }
          grouped.get(unit.source.file).push(unit);
        });
        const sortedFiles = Array.from(grouped.keys()).sort();
        sortedFiles.forEach((filePath) => {
          const fileUnits = grouped.get(filePath);
          this.renderFileGroup(filePath, fileUnits);
        });
      }
      renderFileGroup(filePath, units) {
        var _a;
        const groupContainer = this.contentEl.createDiv({ cls: "file-group" });
        const header = groupContainer.createDiv({ cls: "group-header" });
        const fileName = ((_a = filePath.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || filePath;
        const titleEl = header.createDiv({ cls: "group-title" });
        titleEl.createSpan({ text: "\u{1F4C4} ", cls: "group-icon" });
        titleEl.createSpan({ text: fileName, cls: "group-name" });
        header.createSpan({ text: `${units.length}`, cls: "count-badge" });
        const collapseBtn = header.createSpan({ text: "\u25BC", cls: "collapse-btn" });
        const fileAnnotations = this.plugin.annotationManager.getFileAnnotations(filePath);
        if (fileAnnotations.length > 0) {
          const fileAnnotationDisplay = groupContainer.createDiv({
            cls: "file-annotation-display"
          });
          fileAnnotations.forEach((ann) => {
            const annEl = fileAnnotationDisplay.createDiv({ cls: "file-annotation-item" });
            annEl.createEl("strong", { text: "\u{1F4CC} " });
            annEl.createSpan({ text: ann.content });
          });
        }
        const contentContainer = groupContainer.createDiv({ cls: "group-content" });
        units.forEach((unit) => {
          this.renderContentUnit(contentContainer, unit);
        });
        let isCollapsed = false;
        collapseBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          isCollapsed = !isCollapsed;
          contentContainer.style.display = isCollapsed ? "none" : "block";
          collapseBtn.textContent = isCollapsed ? "\u25B6" : "\u25BC";
        });
        header.addEventListener("click", async () => {
          const file = this.app.vault.getAbstractFileByPath(filePath);
          if (file instanceof import_obsidian4.TFile) {
            await this.app.workspace.getLeaf(false).openFile(file);
          }
        });
      }
      renderContentUnit(container, unit) {
        const card = container.createDiv({ cls: "content-card" });
        if (this.batchMode) {
          const checkbox = card.createEl("input", {
            type: "checkbox",
            cls: "batch-checkbox"
          });
          checkbox.setAttribute("data-unit-id", unit.id);
          checkbox.checked = this.selectedUnitIds.has(unit.id);
          checkbox.addEventListener("change", (e) => {
            if (e.target.checked) {
              this.selectedUnitIds.add(unit.id);
            } else {
              this.selectedUnitIds.delete(unit.id);
            }
            this.updateBatchButtons();
          });
        }
        const contentArea = card.createDiv({ cls: "card-content" });
        const typeIcon = this.getTypeIcon(unit.type);
        contentArea.createSpan({ text: typeIcon + " ", cls: "type-icon" });
        const contentText = contentArea.createSpan({
          text: unit.content,
          cls: "content-text clickable-content"
        });
        contentText.addEventListener("click", (e) => {
          var _a;
          e.stopPropagation();
          this.showAnnotationInput(card, unit, (_a = this.plugin.annotationManager.getContentAnnotation(unit.id)) == null ? void 0 : _a.content);
        });
        if (unit.annotationId) {
          contentArea.createSpan({
            text: "\u{1F4DD}",
            cls: "annotation-badge has-annotation",
            attr: { title: "Has annotation" }
          });
        }
        if (unit.flashcardIds.length > 0) {
          contentArea.createSpan({
            text: "\u{1F0CF}",
            cls: "flashcard-badge",
            attr: { title: `${unit.flashcardIds.length} flashcard(s)` }
          });
        }
        const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
        if (annotation) {
          const annotationDisplay = card.createDiv({ cls: "annotation-display" });
          if (annotation.badge) {
            const badge = annotationDisplay.createSpan({
              text: annotation.badge.text,
              cls: "annotation-badge-display"
            });
            badge.style.backgroundColor = annotation.badge.color;
          }
          const annotationContent = annotationDisplay.createDiv({
            cls: "annotation-content-display"
          });
          annotationContent.createEl("strong", { text: "\u{1F4AC} " });
          annotationContent.createSpan({ text: annotation.content });
          const timestamp = annotationDisplay.createDiv({ cls: "annotation-timestamp" });
          const date = new Date(annotation.metadata.createdAt);
          timestamp.textContent = date.toLocaleString();
          annotationDisplay.addEventListener("click", (e) => {
            e.stopPropagation();
            this.showAnnotationInput(card, unit, annotation.content);
          });
        }
        const metaArea = card.createDiv({ cls: "card-meta" });
        if (unit.metadata.tags.length > 0) {
          const tagsContainer = metaArea.createSpan({ cls: "tags-container" });
          unit.metadata.tags.forEach((tag) => {
            tagsContainer.createSpan({ text: tag, cls: "tag" });
          });
        }
        if (unit.source.heading) {
          metaArea.createSpan({
            text: `\u{1F4CD} ${unit.source.heading}`,
            cls: "heading-info"
          });
        }
        const actionsArea = card.createDiv({ cls: "card-actions" });
        const jumpBtn = actionsArea.createEl("button", {
          text: "\u2197",
          cls: "action-btn jump-btn",
          attr: { title: "Jump to source" }
        });
        jumpBtn.addEventListener("click", async (e) => {
          e.stopPropagation();
          await this.jumpToSource(unit);
        });
        const flashcardGroup = actionsArea.createDiv({ cls: "flashcard-btn-group" });
        const quickCardBtn = flashcardGroup.createEl("button", {
          text: "\u26A1",
          cls: "action-btn quick-card-btn",
          attr: { title: "Quick create flashcard (smart)" }
        });
        quickCardBtn.addEventListener("click", async (e) => {
          e.stopPropagation();
          await this.quickCreator.createSmartCard(unit);
          await this.refresh();
        });
        const moreCardBtn = flashcardGroup.createEl("button", {
          text: "\u25BC",
          cls: "action-btn more-card-btn",
          attr: { title: "More flashcard options" }
        });
        moreCardBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          this.showFlashcardMenu(e, unit);
        });
        const deleteBtn = actionsArea.createEl("button", {
          text: "\u{1F5D1}",
          cls: "action-btn delete-btn",
          attr: { title: "Delete" }
        });
        deleteBtn.addEventListener("click", async (e) => {
          e.stopPropagation();
          await this.deleteContentUnit(unit);
        });
        card.addEventListener("contextmenu", (e) => {
          e.preventDefault();
          this.showContextMenu(e, unit);
        });
      }
      renderByTag(units) {
        const grouped = /* @__PURE__ */ new Map();
        units.forEach((unit) => {
          if (unit.metadata.tags.length === 0) {
            if (!grouped.has("Untagged")) {
              grouped.set("Untagged", []);
            }
            grouped.get("Untagged").push(unit);
          } else {
            unit.metadata.tags.forEach((tag) => {
              if (!grouped.has(tag)) {
                grouped.set(tag, []);
              }
              grouped.get(tag).push(unit);
            });
          }
        });
        const sortedTags = Array.from(grouped.keys()).sort();
        sortedTags.forEach((tag) => {
          const tagUnits = grouped.get(tag);
          this.renderTagGroup(tag, tagUnits);
        });
      }
      renderTagGroup(tag, units) {
        const groupContainer = this.contentEl.createDiv({ cls: "tag-group" });
        const header = groupContainer.createDiv({ cls: "group-header" });
        const titleEl = header.createDiv({ cls: "group-title" });
        titleEl.createSpan({ text: "\u{1F3F7}\uFE0F ", cls: "group-icon" });
        titleEl.createSpan({ text: tag, cls: "group-name" });
        header.createSpan({ text: `${units.length}`, cls: "count-badge" });
        const collapseBtn = header.createSpan({ text: "\u25BC", cls: "collapse-btn" });
        const contentContainer = groupContainer.createDiv({ cls: "group-content" });
        units.forEach((unit) => {
          this.renderContentUnit(contentContainer, unit);
        });
        let isCollapsed = false;
        collapseBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          isCollapsed = !isCollapsed;
          contentContainer.style.display = isCollapsed ? "none" : "block";
          collapseBtn.textContent = isCollapsed ? "\u25B6" : "\u25BC";
        });
      }
      renderByDate(units) {
        const grouped = /* @__PURE__ */ new Map();
        units.forEach((unit) => {
          const date = new Date(unit.metadata.createdAt);
          const dateKey = date.toLocaleDateString();
          if (!grouped.has(dateKey)) {
            grouped.set(dateKey, []);
          }
          grouped.get(dateKey).push(unit);
        });
        const sortedDates = Array.from(grouped.keys()).sort((a, b) => {
          return new Date(b).getTime() - new Date(a).getTime();
        });
        sortedDates.forEach((date) => {
          const dateUnits = grouped.get(date);
          this.renderDateGroup(date, dateUnits);
        });
      }
      renderDateGroup(date, units) {
        const groupContainer = this.contentEl.createDiv({ cls: "date-group" });
        const header = groupContainer.createDiv({ cls: "group-header" });
        const titleEl = header.createDiv({ cls: "group-title" });
        titleEl.createSpan({ text: "\u{1F4C5} ", cls: "group-icon" });
        titleEl.createSpan({ text: date, cls: "group-name" });
        header.createSpan({ text: `${units.length}`, cls: "count-badge" });
        const collapseBtn = header.createSpan({ text: "\u25BC", cls: "collapse-btn" });
        const contentContainer = groupContainer.createDiv({ cls: "group-content" });
        units.forEach((unit) => {
          this.renderContentUnit(contentContainer, unit);
        });
        let isCollapsed = false;
        collapseBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          isCollapsed = !isCollapsed;
          contentContainer.style.display = isCollapsed ? "none" : "block";
          collapseBtn.textContent = isCollapsed ? "\u25B6" : "\u25BC";
        });
      }
      showAnnotationInput(card, unit, existingText) {
        let inputContainer = card.querySelector(".annotation-input-container");
        if (inputContainer) {
          inputContainer.remove();
          return;
        }
        inputContainer = card.createDiv({ cls: "annotation-input-container" });
        const textarea = inputContainer.createEl("textarea", {
          cls: "annotation-textarea",
          placeholder: "Add comment..."
        });
        textarea.value = existingText || "";
        textarea.rows = 3;
        const buttonArea = inputContainer.createDiv({ cls: "annotation-buttons" });
        if (existingText) {
          const deleteBtn = buttonArea.createEl("button", {
            text: "Delete",
            cls: "annotation-delete-btn"
          });
          deleteBtn.addEventListener("click", async () => {
            const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
            if (annotation) {
              await this.plugin.annotationManager.deleteAnnotation(annotation.id);
              new import_obsidian4.Notice("Annotation deleted");
              await this.refresh();
            }
          });
        }
        const saveBtn = buttonArea.createEl("button", {
          text: "Save",
          cls: "annotation-save-btn"
        });
        const saveAnnotation = async () => {
          const text = textarea.value.trim();
          if (!text) {
            inputContainer.remove();
            return;
          }
          try {
            const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
            if (annotation) {
              await this.plugin.annotationManager.updateAnnotation(annotation.id, {
                content: text
              });
            } else {
              await this.plugin.annotationManager.addContentAnnotation(
                unit.id,
                text
              );
            }
            await this.refresh();
          } catch (error) {
            console.error("Error saving annotation:", error);
            new import_obsidian4.Notice("Error saving annotation");
          }
        };
        saveBtn.addEventListener("click", saveAnnotation);
        textarea.addEventListener("keydown", (e) => {
          if (e.key === "Enter" && (e.ctrlKey || e.metaKey)) {
            e.preventDefault();
            saveAnnotation();
          }
          if (e.key === "Escape") {
            e.preventDefault();
            inputContainer.remove();
          }
        });
        textarea.focus();
      }
      showFlashcardMenu(e, unit) {
        const menu = new import_obsidian4.Menu();
        menu.addItem(
          (item) => item.setTitle("\u26A1 Smart create").setIcon("zap").onClick(async () => {
            await this.quickCreator.createSmartCard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("\u{1F4DD} Create Q&A card").setIcon("message-square").onClick(async () => {
            await this.quickCreator.createQuickQACard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("\u270F\uFE0F Create Cloze card").setIcon("edit").onClick(async () => {
            await this.quickCreator.createQuickClozeCard(unit);
            await this.refresh();
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("\u{1F3A8} Custom card...").setIcon("settings").onClick(async () => {
            const { FlashcardCreateModal: FlashcardCreateModal2 } = await Promise.resolve().then(() => (init_FlashcardCreateModal(), FlashcardCreateModal_exports));
            const modal = new FlashcardCreateModal2(
              this.app,
              this.plugin,
              unit,
              async () => {
                await this.refresh();
              }
            );
            modal.open();
          })
        );
        menu.showAtMouseEvent(e);
      }
      async showBatchCreateModal() {
        const units = this.plugin.dataManager.getAllContentUnits();
        const unitsWithoutCards = units.filter((u) => u.flashcardIds.length === 0);
        if (unitsWithoutCards.length === 0) {
          new import_obsidian4.Notice("All content already has flashcards!");
          return;
        }
        const modal = new BatchCreateModal(
          this.app,
          this.plugin,
          this.quickCreator,
          unitsWithoutCards,
          () => this.refresh()
        );
        modal.open();
      }
      isAllSelected() {
        const units = this.plugin.dataManager.getAllContentUnits();
        let filteredUnits = units;
        if (this.searchQuery) {
          const query = this.searchQuery.toLowerCase();
          filteredUnits = units.filter(
            (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
          );
        }
        return filteredUnits.length > 0 && this.selectedUnitIds.size === filteredUnits.length;
      }
      toggleSelectAll() {
        const units = this.plugin.dataManager.getAllContentUnits();
        let filteredUnits = units;
        if (this.searchQuery) {
          const query = this.searchQuery.toLowerCase();
          filteredUnits = units.filter(
            (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
          );
        }
        if (this.isAllSelected()) {
          this.selectedUnitIds.clear();
        } else {
          filteredUnits.forEach((unit) => {
            this.selectedUnitIds.add(unit.id);
          });
        }
        this.updateBatchButtons();
        this.updateCheckboxes();
      }
      updateCheckboxes() {
        const container = this.containerEl.children[1];
        const checkboxes = container.querySelectorAll(".batch-checkbox");
        checkboxes.forEach((checkbox) => {
          const unitId = checkbox.getAttribute("data-unit-id");
          if (unitId) {
            checkbox.checked = this.selectedUnitIds.has(unitId);
          }
        });
      }
      updateBatchButtons() {
        const toolbar = this.containerEl.querySelector(".learning-system-toolbar");
        if (toolbar) {
          const batchActions = toolbar.querySelector(".batch-actions-overview");
          if (batchActions) {
            const selectAllBtn = batchActions.querySelector(".select-all-btn");
            const deleteBtn = batchActions.querySelector(".batch-delete-btn");
            const createBtn = batchActions.querySelector(".batch-create-cards-btn");
            if (selectAllBtn) {
              selectAllBtn.textContent = this.isAllSelected() ? "\u2611 Deselect All" : "\u2610 Select All";
            }
            if (deleteBtn) {
              deleteBtn.textContent = `\u{1F5D1}\uFE0F Delete (${this.selectedUnitIds.size})`;
            }
            if (createBtn) {
              createBtn.textContent = `\u26A1 Create Cards (${this.selectedUnitIds.size})`;
            }
          }
        }
      }
      async batchDeleteNotes() {
        if (this.selectedUnitIds.size === 0) {
          new import_obsidian4.Notice("\u26A0\uFE0F Please select notes to delete");
          return;
        }
        if (!confirm(`Are you sure you want to delete ${this.selectedUnitIds.size} selected notes?`)) {
          return;
        }
        let success = 0;
        let failed = 0;
        for (const unitId of this.selectedUnitIds) {
          try {
            await this.plugin.dataManager.deleteContentUnit(unitId);
            success++;
          } catch (error) {
            console.error("Error deleting note:", error);
            failed++;
          }
        }
        this.selectedUnitIds.clear();
        new import_obsidian4.Notice(`\u2705 Deleted ${success} notes${failed > 0 ? `, ${failed} failed` : ""}`);
        this.refresh();
      }
      async batchCreateFlashcards() {
        if (this.selectedUnitIds.size === 0) {
          new import_obsidian4.Notice("\u26A0\uFE0F Please select notes to create flashcards");
          return;
        }
        const units = Array.from(this.selectedUnitIds).map((id) => this.plugin.dataManager.getContentUnit(id)).filter((u) => u !== void 0 && u.flashcardIds.length === 0);
        if (units.length === 0) {
          new import_obsidian4.Notice("\u26A0\uFE0F Selected notes already have flashcards");
          return;
        }
        const modal = new BatchCreateModal(
          this.app,
          this.plugin,
          this.quickCreator,
          units,
          () => {
            this.selectedUnitIds.clear();
            this.refresh();
          }
        );
        modal.open();
      }
      async jumpToSource(unit) {
        const file = this.app.vault.getAbstractFileByPath(unit.source.file);
        if (!(file instanceof import_obsidian4.TFile))
          return;
        const leaf = this.app.workspace.getLeaf(false);
        await leaf.openFile(file);
        const view = this.app.workspace.getActiveViewOfType(import_obsidian4.ItemView);
        if (view) {
          const editor = view.editor;
          if (editor) {
            editor.setCursor({ line: unit.source.position.line, ch: 0 });
            editor.scrollIntoView({
              from: { line: unit.source.position.line, ch: 0 },
              to: { line: unit.source.position.line, ch: 0 }
            }, true);
            setTimeout(() => {
              editor.setSelection(
                { line: unit.source.position.line, ch: 0 },
                { line: unit.source.position.line, ch: 999 }
              );
            }, 100);
          }
        }
      }
      async deleteContentUnit(unit) {
        const confirmed = await this.confirmDelete(unit);
        if (!confirmed)
          return;
        await this.plugin.dataManager.deleteContentUnit(unit.id);
        await this.refresh();
      }
      async confirmDelete(unit) {
        return new Promise((resolve) => {
          const modal = new ConfirmModal(
            this.app,
            "Delete content",
            `Are you sure you want to delete this content?

"${unit.content.substring(0, 50)}..."`,
            () => resolve(true),
            () => resolve(false)
          );
          modal.open();
        });
      }
      showContextMenu(e, unit) {
        const menu = new import_obsidian4.Menu();
        menu.addItem(
          (item) => item.setTitle("Jump to source").setIcon("arrow-right").onClick(() => this.jumpToSource(unit))
        );
        const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
        menu.addItem(
          (item) => item.setTitle(annotation ? "Edit annotation" : "Add annotation").setIcon("pencil").onClick(() => {
            const card = e.target.closest(".content-card");
            if (card) {
              this.showAnnotationInput(card, unit, annotation == null ? void 0 : annotation.content);
            }
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("\u26A1 Quick create flashcard").setIcon("zap").onClick(async () => {
            await this.quickCreator.createSmartCard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("Create Q&A card").setIcon("message-square").onClick(async () => {
            await this.quickCreator.createQuickQACard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("Create Cloze card").setIcon("edit").onClick(async () => {
            await this.quickCreator.createQuickClozeCard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("Custom flashcard...").setIcon("settings").onClick(async () => {
            const { FlashcardCreateModal: FlashcardCreateModal2 } = await Promise.resolve().then(() => (init_FlashcardCreateModal(), FlashcardCreateModal_exports));
            const modal = new FlashcardCreateModal2(
              this.app,
              this.plugin,
              unit,
              async () => {
                await this.refresh();
              }
            );
            modal.open();
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("View Statistics").setIcon("bar-chart").onClick(() => {
            this.plugin.activateStats();
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("Delete").setIcon("trash").onClick(() => this.deleteContentUnit(unit))
        );
        menu.showAtMouseEvent(e);
      }
      getTypeIcon(type) {
        const icons = {
          "highlight": "\u2728",
          "bold": "**",
          "tag": "\u{1F3F7}",
          "custom": "\u2B50"
        };
        return icons[type] || "\u2022";
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      /* \u5DE5\u5177\u680F\u6837\u5F0F */
      .learning-system-toolbar {
        padding: 10px;
        border-bottom: 1px solid var(--background-modifier-border);
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .search-container { display: flex; }

      .search-input {
        flex: 1;
        padding: 6px 10px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
      }

      .group-container {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .group-label {
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .group-select {
        padding: 4px 8px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
      }

      .refresh-btn {
        padding: 4px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
        cursor: pointer;
        font-size: 16px;
      }

      .refresh-btn:hover { background: var(--background-modifier-hover); }

      .stats-container {
        color: var(--text-muted);
        font-size: 0.9em;
      }

      /* \u5185\u5BB9\u533A\u57DF\u6837\u5F0F */
      .learning-system-content {
        padding: 10px;
        overflow-y: auto;
      }

      .empty-state {
        text-align: center;
        color: var(--text-muted);
        padding: 40px 20px;
      }

      .file-group, .tag-group, .date-group { margin-bottom: 20px; }

      .group-header {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        background: var(--background-secondary);
        border-radius: 6px;
        cursor: pointer;
        margin-bottom: 8px;
      }

      .group-header:hover { background: var(--background-modifier-hover); }

      .group-title {
        flex: 1;
        display: flex;
        align-items: center;
        font-weight: 500;
      }

      .group-icon { margin-right: 4px; }

      .count-badge {
        background: var(--interactive-accent);
        color: white;
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 0.85em;
        font-weight: 500;
      }

      .collapse-btn {
        color: var(--text-muted);
        user-select: none;
        cursor: pointer;
      }

      /* \u6587\u4EF6\u6279\u6CE8\u663E\u793A */
      .file-annotation-display {
        margin: 8px 0 12px 0;
        padding: 8px 12px;
        background: var(--background-secondary-alt);
        border-radius: 4px;
        font-size: 0.9em;
      }

      .file-annotation-item {
        padding: 4px 0;
        color: var(--text-muted);
      }

      .file-annotation-item strong { color: var(--text-normal); }

      /* \u5185\u5BB9\u5361\u7247\u6837\u5F0F */
      .group-content {
        display: flex;
        flex-direction: column;
        gap: 8px;
        padding-left: 8px;
      }

      .content-card {
        padding: 12px;
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        transition: all 0.2s;
      }

      .content-card:hover {
        border-color: var(--interactive-accent);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .card-content {
        margin-bottom: 8px;
        display: flex;
        align-items: flex-start;
        gap: 4px;
        flex-wrap: wrap;
      }

      .type-icon { color: var(--text-muted); }

      .content-text {
        flex: 1;
        line-height: 1.5;
        word-wrap: break-word;
      }

      .clickable-content {
        cursor: pointer;
        transition: all 0.2s;
        padding: 4px;
        border-radius: 4px;
      }

      .clickable-content:hover {
        background: var(--background-modifier-hover);
        color: var(--interactive-accent);
      }

      .annotation-badge, .flashcard-badge {
        font-size: 14px;
        cursor: pointer;
        margin-left: 4px;
      }

      .annotation-badge.has-annotation {
        color: var(--interactive-accent);
      }

      /* \u6279\u6CE8\u663E\u793A\u6837\u5F0F */
      .annotation-display {
        margin: 10px 0;
        padding: 12px;
        background: var(--background-secondary-alt);
        border-left: 3px solid var(--interactive-accent);
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .annotation-display:hover {
        background: var(--background-modifier-hover);
        border-left-color: var(--interactive-accent-hover);
      }

      .annotation-content-display {
        line-height: 1.6;
        color: var(--text-normal);
        margin-bottom: 6px;
      }

      .annotation-content-display strong {
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .annotation-timestamp {
        font-size: 0.8em;
        color: var(--text-faint);
        text-align: right;
      }

      .annotation-badge-display {
        display: inline-block;
        padding: 3px 10px;
        border-radius: 12px;
        color: white;
        font-size: 0.85em;
        font-weight: 500;
        margin-right: 8px;
        margin-bottom: 6px;
      }

      /* \u5185\u8054\u6279\u6CE8\u8F93\u5165 */
      .annotation-input-container {
        margin: 12px 0;
        padding: 12px;
        background: var(--background-primary);
        border: 2px solid var(--interactive-accent);
        border-radius: 6px;
        animation: slideDown 0.2s ease;
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .annotation-textarea {
        width: 100%;
        padding: 10px;
        margin-bottom: 8px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-secondary);
        color: var(--text-normal);
        font-family: inherit;
        font-size: 1em;
        resize: vertical;
        min-height: 60px;
      }

      .annotation-textarea:focus {
        outline: none;
        border-color: var(--interactive-accent);
        background: var(--background-primary);
      }

      .annotation-textarea::placeholder {
        color: var(--text-faint);
      }

      .annotation-buttons {
        display: flex;
        gap: 8px;
        justify-content: flex-end;
      }

      .annotation-buttons button {
        padding: 6px 16px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.9em;
      }

      .annotation-delete-btn {
        background: transparent;
        color: var(--text-muted);
      }

      .annotation-delete-btn:hover {
        color: var(--color-red);
      }

      .annotation-save-btn {
        background: var(--interactive-accent);
        color: white;
      }

      .annotation-save-btn:hover {
        opacity: 0.8;
      }

      /* \u5143\u6570\u636E\u533A\u57DF */
      .card-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 8px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .tags-container {
        display: flex;
        flex-wrap: wrap;
        gap: 4px;
      }

      .tag {
        background: var(--background-secondary);
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.85em;
      }

      .heading-info {
        color: var(--text-muted);
        font-style: italic;
      }

      /* \u64CD\u4F5C\u6309\u94AE */
      .card-actions {
        display: flex;
        gap: 6px;
      }

      .action-btn {
        padding: 4px 10px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
        cursor: pointer;
        font-size: 14px;
        transition: all 0.2s;
      }

      .action-btn:hover {
        background: var(--interactive-accent);
        color: white;
        border-color: var(--interactive-accent);
      }

      .delete-btn:hover {
        background: var(--color-red);
        border-color: var(--color-red);
      }

      /* \u4E00\u952E\u521B\u5EFA\u95EA\u5361\u6309\u94AE\u7EC4 */
      .flashcard-btn-group {
        display: flex;
        gap: 0;
      }

      .quick-card-btn {
        border-radius: 4px 0 0 4px;
        border-right: none;
      }

      .more-card-btn {
        border-radius: 0 4px 4px 0;
        padding: 4px 6px;
        font-size: 10px;
      }

      .quick-card-btn:hover, .more-card-btn:hover {
        background: var(--interactive-accent);
        color: white;
      }

      .batch-create-btn {
        padding: 6px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--interactive-accent);
        color: white;
        cursor: pointer;
        font-weight: 500;
        transition: all 0.2s;
      }

      .batch-create-btn:hover {
        opacity: 0.8;
      }

      .batch-actions-overview {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .batch-mode-btn,
      .select-all-btn,
      .batch-delete-btn,
      .batch-create-cards-btn {
        padding: 6px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.9em;
        font-weight: 500;
      }

      .select-all-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .batch-mode-btn:hover {
        background: var(--background-modifier-hover);
      }

      .batch-delete-btn:hover {
        background: var(--color-red);
        border-color: var(--color-red);
        color: white;
      }

      .batch-create-cards-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .batch-checkbox {
        margin-right: 8px;
        cursor: pointer;
      }
    `;
        document.head.appendChild(styleEl);
      }
    };
    BatchCreateModal = class extends import_obsidian4.Modal {
      constructor(app, plugin, quickCreator, units, onComplete) {
        super(app);
        this.plugin = plugin;
        this.quickCreator = quickCreator;
        this.units = units;
        this.onComplete = onComplete;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h2", { text: "\u26A1 Batch Create Flashcards" });
        contentEl.createEl("p", {
          text: `Create flashcards for ${this.units.length} content items without cards.`
        });
        const typeContainer = contentEl.createDiv({ cls: "type-select-container" });
        typeContainer.createEl("h3", { text: "Card Type" });
        let selectedType = "smart";
        const types = [
          { value: "smart", label: "\u26A1 Smart (Auto-detect)", desc: "Automatically choose the best type" },
          { value: "qa", label: "\u{1F4DD} Q&A Cards", desc: "Question and answer format" },
          { value: "cloze", label: "\u270F\uFE0F Cloze Cards", desc: "Fill in the blanks" }
        ];
        types.forEach((type) => {
          const option = typeContainer.createDiv({ cls: "type-option" });
          const radio = option.createEl("input", {
            type: "radio",
            value: type.value,
            attr: { name: "card-type" }
          });
          if (type.value === "smart")
            radio.checked = true;
          const label = option.createDiv({ cls: "type-label" });
          label.createEl("strong", { text: type.label });
          label.createEl("div", { text: type.desc, cls: "type-desc" });
          option.addEventListener("click", () => {
            radio.checked = true;
            selectedType = type.value;
          });
        });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => this.close());
        const createBtn = buttonContainer.createEl("button", {
          text: `Create ${this.units.length} Cards`,
          cls: "mod-cta"
        });
        createBtn.addEventListener("click", async () => {
          await this.batchCreate(selectedType);
        });
        this.addStyles();
      }
      async batchCreate(type) {
        const { success, failed } = await this.quickCreator.createBatchCards(this.units, type);
        new import_obsidian4.Notice(`\u2705 Created ${success} flashcards! ${failed > 0 ? `(${failed} failed)` : ""}`);
        this.close();
        this.onComplete();
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      .type-select-container {
        margin: 20px 0;
      }

      .type-option {
        padding: 15px;
        margin: 10px 0;
        background: var(--background-secondary);
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .type-option:hover {
        border-color: var(--interactive-accent);
        background: var(--background-modifier-hover);
      }

      .type-option input[type="radio"] {
        margin-right: 10px;
      }

      .type-label {
        display: inline-block;
        vertical-align: top;
      }

      .type-desc {
        font-size: 0.9em;
        color: var(--text-muted);
        margin-top: 4px;
      }
    `;
        document.head.appendChild(styleEl);
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
    ConfirmModal = class extends import_obsidian4.Modal {
      constructor(app, title, message, onConfirm, onCancel) {
        super(app);
        this.title = title;
        this.message = message;
        this.onConfirm = onConfirm;
        this.onCancel = onCancel;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h2", { text: this.title });
        contentEl.createEl("p", { text: this.message });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => {
          this.close();
          this.onCancel();
        });
        const confirmBtn = buttonContainer.createEl("button", {
          text: "Delete",
          cls: "mod-warning"
        });
        confirmBtn.addEventListener("click", () => {
          this.close();
          this.onConfirm();
        });
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
  }
});

// src/ui/AnnotationModal.ts
var AnnotationModal_exports = {};
__export(AnnotationModal_exports, {
  AnnotationModal: () => AnnotationModal2,
  FileAnnotationModal: () => FileAnnotationModal
});
var import_obsidian9, AnnotationModal2, FileAnnotationModal;
var init_AnnotationModal = __esm({
  "src/ui/AnnotationModal.ts"() {
    import_obsidian9 = require("obsidian");
    AnnotationModal2 = class extends import_obsidian9.Modal {
      constructor(app, plugin, contentUnit, onSave) {
        super(app);
        this.plugin = plugin;
        this.annotationText = "";
        this.badgeText = "";
        this.badgeColor = "#5B9BD5";
        this.contentUnit = contentUnit;
        this.onSave = onSave;
        this.existingAnnotation = this.plugin.annotationManager.getContentAnnotation(
          contentUnit.id
        );
        if (this.existingAnnotation) {
          this.annotationText = this.existingAnnotation.content;
          if (this.existingAnnotation.badge) {
            this.badgeText = this.existingAnnotation.badge.text;
            this.badgeColor = this.existingAnnotation.badge.color;
          }
        }
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.addClass("annotation-modal");
        contentEl.createEl("h2", {
          text: this.existingAnnotation ? "Edit Annotation" : "Add Annotation"
        });
        const contentPreview = contentEl.createDiv({ cls: "annotation-content-preview" });
        contentPreview.createEl("h3", { text: "Content:" });
        contentPreview.createEl("blockquote", { text: this.contentUnit.content });
        new import_obsidian9.Setting(contentEl).setName("Annotation").setDesc("Add your notes or comments about this content").addTextArea((text) => {
          text.setPlaceholder("Enter your annotation here...").setValue(this.annotationText).onChange((value) => {
            this.annotationText = value;
          });
          text.inputEl.rows = 6;
          text.inputEl.style.width = "100%";
        });
        contentEl.createEl("h3", { text: "Badge (Optional)" });
        new import_obsidian9.Setting(contentEl).setName("Badge text").setDesc('Short text to display as a badge (e.g., "\u91CD\u8981", "\u5F85\u590D\u4E60")').addText(
          (text) => text.setPlaceholder("Badge text").setValue(this.badgeText).onChange((value) => {
            this.badgeText = value;
            this.updateBadgePreview();
          })
        );
        new import_obsidian9.Setting(contentEl).setName("Badge color").setDesc("Choose a color for the badge").addDropdown((dropdown) => {
          dropdown.addOption("#5B9BD5", "\u{1F535} Blue").addOption("#70AD47", "\u{1F7E2} Green").addOption("#FFC000", "\u{1F7E1} Yellow").addOption("#FF6B6B", "\u{1F534} Red").addOption("#C78BFF", "\u{1F7E3} Purple").addOption("#FF9F43", "\u{1F7E0} Orange").setValue(this.badgeColor).onChange((value) => {
            this.badgeColor = value;
            this.updateBadgePreview();
          });
        });
        const badgePreview = contentEl.createDiv({ cls: "badge-preview-container" });
        badgePreview.createEl("span", { text: "Preview: ", cls: "preview-label" });
        const badgeEl = badgePreview.createEl("span", { cls: "badge-preview" });
        this.badgePreviewEl = badgeEl;
        this.updateBadgePreview();
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        if (this.existingAnnotation) {
          const deleteBtn = buttonContainer.createEl("button", {
            text: "Delete",
            cls: "mod-warning"
          });
          deleteBtn.addEventListener("click", async () => {
            await this.deleteAnnotation();
          });
        }
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => {
          this.close();
        });
        const saveBtn = buttonContainer.createEl("button", {
          text: "Save",
          cls: "mod-cta"
        });
        saveBtn.addEventListener("click", async () => {
          await this.saveAnnotation();
        });
        this.addStyles();
      }
      updateBadgePreview() {
        if (!this.badgePreviewEl)
          return;
        if (this.badgeText) {
          this.badgePreviewEl.textContent = this.badgeText;
          this.badgePreviewEl.style.backgroundColor = this.badgeColor;
          this.badgePreviewEl.style.display = "inline-block";
        } else {
          this.badgePreviewEl.textContent = "No badge";
          this.badgePreviewEl.style.backgroundColor = "transparent";
          this.badgePreviewEl.style.color = "var(--text-muted)";
        }
      }
      async saveAnnotation() {
        if (!this.annotationText.trim()) {
          new import_obsidian9.Notice("Please enter annotation text");
          return;
        }
        try {
          let annotation;
          if (this.existingAnnotation) {
            await this.plugin.annotationManager.updateAnnotation(
              this.existingAnnotation.id,
              {
                content: this.annotationText,
                badge: this.badgeText ? {
                  text: this.badgeText,
                  color: this.badgeColor
                } : void 0
              }
            );
            annotation = this.plugin.annotationManager.getAnnotation(
              this.existingAnnotation.id
            );
            new import_obsidian9.Notice("Annotation updated");
          } else {
            annotation = await this.plugin.annotationManager.addContentAnnotation(
              this.contentUnit.id,
              this.annotationText,
              this.badgeText ? {
                text: this.badgeText,
                color: this.badgeColor
              } : void 0
            );
            new import_obsidian9.Notice("Annotation added");
          }
          this.onSave(annotation);
          this.close();
        } catch (error) {
          console.error("Error saving annotation:", error);
          new import_obsidian9.Notice("Error saving annotation");
        }
      }
      async deleteAnnotation() {
        if (!this.existingAnnotation)
          return;
        try {
          await this.plugin.annotationManager.deleteAnnotation(
            this.existingAnnotation.id
          );
          new import_obsidian9.Notice("Annotation deleted");
          this.close();
          this.onSave(null);
        } catch (error) {
          console.error("Error deleting annotation:", error);
          new import_obsidian9.Notice("Error deleting annotation");
        }
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      .annotation-modal {
        padding: 20px;
      }

      .annotation-content-preview {
        margin: 20px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .annotation-content-preview h3 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .annotation-content-preview blockquote {
        margin: 0;
        padding: 10px;
        border-left: 3px solid var(--interactive-accent);
        background: var(--background-primary);
        border-radius: 4px;
      }

      .badge-preview-container {
        margin: 10px 0;
        padding: 10px;
        background: var(--background-secondary);
        border-radius: 4px;
      }

      .preview-label {
        color: var(--text-muted);
        margin-right: 10px;
      }

      .badge-preview {
        padding: 4px 10px;
        border-radius: 12px;
        color: white;
        font-size: 0.85em;
        font-weight: 500;
      }

      .modal-button-container {
        display: flex;
        gap: 10px;
        justify-content: flex-end;
        margin-top: 20px;
      }

      .modal-button-container button {
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
      }
    `;
        document.head.appendChild(styleEl);
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
    FileAnnotationModal = class extends import_obsidian9.Modal {
      constructor(app, plugin, filePath, onSave) {
        super(app);
        this.plugin = plugin;
        this.existingAnnotations = [];
        this.annotationText = "";
        this.filePath = filePath;
        this.onSave = onSave;
        this.existingAnnotations = this.plugin.annotationManager.getFileAnnotations(filePath);
      }
      onOpen() {
        var _a;
        const { contentEl } = this;
        contentEl.createEl("h2", { text: "File Annotations" });
        const fileName = ((_a = this.filePath.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || this.filePath;
        contentEl.createEl("p", {
          text: `File: ${fileName}`,
          cls: "file-name"
        });
        if (this.existingAnnotations.length > 0) {
          const existingSection = contentEl.createDiv({ cls: "existing-annotations" });
          existingSection.createEl("h3", { text: "Existing Annotations" });
          this.existingAnnotations.forEach((annotation) => {
            const annotationCard = existingSection.createDiv({ cls: "annotation-card" });
            annotationCard.createEl("p", { text: annotation.content });
            const date = new Date(annotation.metadata.createdAt).toLocaleDateString();
            annotationCard.createEl("small", {
              text: `Created: ${date}`,
              cls: "annotation-date"
            });
            const deleteBtn = annotationCard.createEl("button", {
              text: "\u{1F5D1} Delete",
              cls: "delete-annotation-btn"
            });
            deleteBtn.addEventListener("click", async () => {
              await this.deleteAnnotation(annotation.id);
              this.close();
              this.onSave();
            });
          });
        }
        contentEl.createEl("h3", { text: "Add New Annotation" });
        new import_obsidian9.Setting(contentEl).setName("Annotation").setDesc("Add notes about this file").addTextArea((text) => {
          text.setPlaceholder("Enter file annotation...").setValue(this.annotationText).onChange((value) => {
            this.annotationText = value;
          });
          text.inputEl.rows = 4;
          text.inputEl.style.width = "100%";
        });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => {
          this.close();
        });
        const saveBtn = buttonContainer.createEl("button", {
          text: "Save",
          cls: "mod-cta"
        });
        saveBtn.addEventListener("click", async () => {
          await this.saveAnnotation();
        });
      }
      async saveAnnotation() {
        if (!this.annotationText.trim()) {
          new import_obsidian9.Notice("Please enter annotation text");
          return;
        }
        try {
          await this.plugin.annotationManager.addFileAnnotation(
            this.filePath,
            this.annotationText
          );
          new import_obsidian9.Notice("File annotation added");
          this.close();
          this.onSave();
        } catch (error) {
          console.error("Error saving file annotation:", error);
          new import_obsidian9.Notice("Error saving file annotation");
        }
      }
      async deleteAnnotation(id) {
        try {
          await this.plugin.annotationManager.deleteAnnotation(id);
          new import_obsidian9.Notice("Annotation deleted");
        } catch (error) {
          console.error("Error deleting annotation:", error);
          new import_obsidian9.Notice("Error deleting annotation");
        }
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => LearningSystemPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian10 = require("obsidian");

// src/ui/SettingsTab.ts
var import_obsidian = require("obsidian");
var SettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Learning System Settings" });
    new import_obsidian.Setting(containerEl).setName("Enable extraction").setDesc("Enable automatic content extraction").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.extractionEnabled).onChange(async (value) => {
        this.plugin.settings.extractionEnabled = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Auto scan").setDesc("Automatically scan files when they are opened").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.autoScan).onChange(async (value) => {
        this.plugin.settings.autoScan = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Default deck").setDesc("Default deck name for new flashcards").addText(
      (text) => text.setPlaceholder("Default").setValue(this.plugin.settings.defaultDeck).onChange(async (value) => {
        this.plugin.settings.defaultDeck = value;
        await this.plugin.saveSettings();
      })
    );
  }
};

// src/main.ts
init_OverviewView();

// src/ui/SidebarOverviewView.ts
var import_obsidian5 = require("obsidian");
init_QuickFlashcardCreator();
var VIEW_TYPE_SIDEBAR_OVERVIEW = "learning-system-sidebar-overview";
var VIEW_TYPE_MAIN_OVERVIEW = "learning-system-main-overview";
var SidebarOverviewView = class extends import_obsidian5.ItemView {
  constructor(leaf, plugin, forceMainMode = false) {
    super(leaf);
    // 状态管理
    this.forceMainMode = false;
    this.searchQuery = "";
    this.filterMode = "all";
    this.groupMode = "file";
    this.selectedFile = null;
    this.displayMode = "sidebar";
    this.viewType = "notes";
    this.activeMenuId = null;
    this.savedScrollPosition = 0;
    this.shouldRestoreScroll = false;
    this.batchMode = false;
    this.selectedUnitIds = /* @__PURE__ */ new Set();
    this.selectedCardIds = /* @__PURE__ */ new Set();
    // 性能优化
    this.searchDebounceTimer = null;
    this.isRendering = false;
    this.plugin = plugin;
    this.forceMainMode = forceMainMode;
    const activeFile = this.app.workspace.getActiveFile();
    if (activeFile) {
      this.selectedFile = activeFile.path;
    }
    let resizeTimer;
    window.addEventListener("resize", () => {
      clearTimeout(resizeTimer);
      resizeTimer = window.setTimeout(() => {
        this.detectDisplayMode();
        this.render();
      }, 150);
    });
    window.addEventListener("resize", () => {
      this.detectDisplayMode();
      this.render();
    });
  }
  getViewType() {
    const viewType = this.forceMainMode ? VIEW_TYPE_MAIN_OVERVIEW : VIEW_TYPE_SIDEBAR_OVERVIEW;
    return viewType;
  }
  getDisplayText() {
    return "Learning Overview";
  }
  getIcon() {
    return "book-marked";
  }
  async onOpen() {
    this.detectDisplayMode();
    if (!this.forceMainMode) {
      this.registerEvent(
        this.app.workspace.on("active-leaf-change", () => {
          const activeFile = this.app.workspace.getActiveFile();
          if (activeFile && this.displayMode === "sidebar") {
            this.selectedFile = activeFile.path;
            this.refresh();
          }
        })
      );
    }
    this.render();
    this.addStyles();
  }
  // ==================== 核心方法 ====================
  /**
   * 检测当前显示模式（侧边栏 vs 主界面）
   */
  detectDisplayMode() {
    if (this.forceMainMode) {
      this.displayMode = "main";
      return;
    }
    const parentSplit = this.leaf.parentSplit;
    const isLeftSidebar = (parentSplit == null ? void 0 : parentSplit.type) === "split" && this.app.workspace.leftSplit === parentSplit;
    const isRightSidebar = (parentSplit == null ? void 0 : parentSplit.type) === "split" && this.app.workspace.rightSplit === parentSplit;
    const containerEl = this.containerEl;
    const width = containerEl.clientWidth;
    const isNarrow = width < 500;
    const isSidebar = isLeftSidebar || isRightSidebar || isNarrow;
    this.displayMode = isSidebar ? "sidebar" : "main";
  }
  /**
   * 刷新视图
   */
  refresh() {
    if (this.isRendering) {
      requestAnimationFrame(() => {
        this.refresh();
      });
      return;
    }
    if (this.searchDebounceTimer !== null) {
      window.clearTimeout(this.searchDebounceTimer);
      this.searchDebounceTimer = null;
    }
    this.shouldRestoreScroll = true;
    this.render();
  }
  //render拆分函数
  resetInteractionState(container) {
    container.style.pointerEvents = "auto";
    const toolbar = container.querySelector(".sidebar-toolbar");
    if (toolbar) {
      toolbar.style.pointerEvents = "auto";
      toolbar.style.position = "relative";
      toolbar.style.zIndex = "100";
    }
  }
  saveScrollPosition(container) {
    if (this.displayMode === "sidebar") {
      const contentList = container.querySelector(".sidebar-content-list");
      if (contentList) {
        this.savedScrollPosition = contentList.scrollTop;
      }
    }
  }
  /**
   * 主渲染方法
   */
  render() {
    const allUnits = this.plugin.dataManager.getAllContentUnits();
    const unitsWithCards = allUnits.filter((u) => u.flashcardIds.length > 0);
    if (this.isRendering) {
      return;
    }
    if (this.searchDebounceTimer !== null) {
      window.clearTimeout(this.searchDebounceTimer);
      this.searchDebounceTimer = null;
    }
    this.isRendering = true;
    const container = this.containerEl.children[1];
    this.saveScrollPosition(container);
    this.resetInteractionState(container);
    if (this.displayMode === "main" && !this.selectedFile && this.viewType === "notes") {
      const units = this.getFilteredUnits();
      const grouped = this.groupUnits(units);
      if (grouped.length > 0) {
        this.selectedFile = grouped[0].groupKey;
      }
    }
    container.empty();
    container.addClass("learning-overview-container");
    container.setAttribute("data-mode", this.displayMode);
    if (this.displayMode === "sidebar") {
      this.renderSidebarMode(container);
    } else {
      this.renderMainMode(container);
    }
    if (this.displayMode === "sidebar" && this.shouldRestoreScroll) {
      const contentList = container.querySelector(".sidebar-content-list");
      if (contentList) {
        requestAnimationFrame(() => {
          contentList.scrollTop = this.savedScrollPosition;
        });
      }
    }
    this.isRendering = false;
  }
  /**
   * 仅刷新内容区域（不重新渲染整个视图）
   */
  refreshContent() {
    const container = this.containerEl.children[1];
    if (this.displayMode === "sidebar") {
      const contentList = container.querySelector(".sidebar-content-list");
      if (contentList) {
        this.savedScrollPosition = contentList.scrollTop;
        contentList.empty();
        this.renderCompactContentList(contentList);
        requestAnimationFrame(() => {
          contentList.scrollTop = this.savedScrollPosition;
        });
      }
    } else {
      const rightPanel = container.querySelector(".right-panel");
      if (rightPanel) {
        rightPanel.empty();
        this.renderRightPanel(rightPanel);
      }
    }
  }
  // ==================== 侧边栏模式渲染 ====================
  renderSidebarMode(container) {
    this.renderSidebarToolbar(container);
    const contentList = container.createDiv({ cls: "sidebar-content-list" });
    this.renderCompactContentList(contentList);
  }
  renderSidebarToolbar(container) {
    const toolbar = container.createDiv({ cls: "sidebar-toolbar" });
    const searchContainer = toolbar.createDiv({ cls: "search-container" });
    const searchInput = searchContainer.createEl("input", {
      type: "text",
      placeholder: "\u{1F50D} \u641C\u7D22\u7B14\u8BB0...",
      cls: "search-input"
    });
    searchInput.value = this.searchQuery;
    searchInput.addEventListener("input", (e) => {
      const value = e.target.value;
      this.searchQuery = value;
      if (this.searchDebounceTimer !== null) {
        window.clearTimeout(this.searchDebounceTimer);
      }
      this.searchDebounceTimer = window.setTimeout(() => {
        this.selectedUnitIds.clear();
        this.selectedCardIds.clear();
        this.refreshContent();
      }, 300);
    });
    const filters = toolbar.createDiv({ cls: "filter-chips" });
    const filterOptions = [
      { mode: "all", icon: "\u{1F4DD}", label: "allnotes" },
      { mode: "annotated", icon: "\u{1F4AC}", label: "comment" },
      { mode: "flashcards", icon: "\u{1F0CF}", label: "flashcards" }
    ];
    filterOptions.forEach(({ mode, icon, label }) => {
      const chip = filters.createDiv({
        cls: `filter-chip ${this.filterMode === mode ? "active" : ""}`,
        text: `${icon} ${label}`
      });
      chip.addEventListener("click", () => {
        if (this.filterMode !== mode) {
          this.filterMode = mode;
          this.selectedUnitIds.clear();
          this.selectedCardIds.clear();
          this.batchMode = false;
          this.shouldRestoreScroll = false;
          this.render();
        }
      });
    });
    const groupSwitcher = toolbar.createDiv({ cls: "group-switcher" });
    const groupOptions = [
      { mode: "file", icon: "\u{1F4C1}", tooltip: "\u6309\u6587\u4EF6" },
      { mode: "tag", icon: "\u{1F3F7}\uFE0F", tooltip: "\u6309\u6807\u7B7E" },
      { mode: "date", icon: "\u{1F4C5}", tooltip: "\u6309\u65E5\u671F" }
    ];
    groupOptions.forEach(({ mode, icon, tooltip }) => {
      const btn = groupSwitcher.createDiv({
        cls: `group-btn ${this.groupMode === mode ? "active" : ""}`,
        text: icon
      });
      btn.addEventListener("click", () => {
        if (this.groupMode !== mode) {
          this.groupMode = mode;
          if (this.displayMode === "sidebar") {
            const activeFile = this.app.workspace.getActiveFile();
            this.selectedFile = activeFile ? activeFile.path : null;
          } else {
            this.selectedFile = null;
          }
          this.selectedUnitIds.clear();
          this.selectedCardIds.clear();
          this.batchMode = false;
          this.render();
        }
      });
    });
    const statsRow = toolbar.createDiv({ cls: "stats-row" });
    this.createSelectAllButton(statsRow, "sidebar");
    this.createBatchActionButtons(statsRow, "sidebar");
  }
  /**
   * 渲染紧凑内容列表（侧边栏模式）
   */
  renderCompactContentList(container) {
    let units = this.getFilteredUnits();
    if (this.displayMode === "sidebar" && this.selectedFile) {
      units = units.filter((unit) => unit.source.file === this.selectedFile);
    }
    if (units.length === 0) {
      const emptyDiv = container.createDiv({ cls: "empty-state" });
      if (this.selectedFile) {
        emptyDiv.innerHTML = `
        <div style="padding: 20px; text-align: center;">
          <div style="font-size: 32px; margin-bottom: 10px;">\u{1F4ED}</div>
          <div style="color: var(--text-muted);">\u5F53\u524D\u6587\u6863\u6682\u65E0\u7B14\u8BB0</div>
          <div style="font-size: 12px; color: var(--text-faint); margin-top: 8px;">
            ${this.filterMode !== "all" ? "\u5C1D\u8BD5\u5207\u6362\u5176\u4ED6\u8FC7\u6EE4\u5668\u67E5\u770B" : "\u5F00\u59CB\u9AD8\u4EAE\u6587\u672C\u6765\u521B\u5EFA\u7B14\u8BB0"}
          </div>
        </div>
      `;
      } else {
        emptyDiv.textContent = "\u6682\u65E0\u5185\u5BB9";
      }
      return;
    }
    const grouped = this.groupUnits(units);
    grouped.forEach(({ groupKey, units: groupUnits }) => {
      const groupEl = container.createDiv({ cls: "content-group" });
      const header = groupEl.createDiv({ cls: "group-header" });
      header.createSpan({ text: this.getGroupIcon(this.groupMode), cls: "group-icon" });
      header.createSpan({ text: groupKey, cls: "group-title" });
      header.createSpan({ text: `${groupUnits.length}`, cls: "group-count" });
      groupUnits.forEach((unit) => {
        this.renderCompactCard(groupEl, unit);
      });
    });
  }
  /**
   * 渲染紧凑卡片（侧边栏模式）
   */
  renderCompactCard(container, unit) {
    const card = container.createDiv({ cls: "compact-card" });
    if (this.batchMode) {
      const checkbox = card.createEl("input", {
        type: "checkbox",
        cls: "batch-checkbox"
      });
      checkbox.setAttribute("data-unit-id", unit.id);
      checkbox.checked = this.selectedUnitIds.has(unit.id);
      checkbox.addEventListener("change", (e) => {
        if (e.target.checked) {
          this.selectedUnitIds.add(unit.id);
        } else {
          this.selectedUnitIds.delete(unit.id);
        }
        this.render();
      });
    }
    const indicator = card.createDiv({ cls: "card-indicator" });
    if (unit.type === "QA") {
      indicator.addClass("type-qa");
    } else if (unit.type === "cloze") {
      indicator.addClass("type-cloze");
    } else if (unit.type === "text") {
      indicator.addClass("type-text");
    }
    if (unit.annotationId)
      indicator.addClass("has-annotation");
    if (unit.flashcardIds.length > 0)
      indicator.addClass("has-flashcard");
    const content = card.createDiv({ cls: "card-content" });
    const header = content.createDiv({ cls: "card-header" });
    header.addEventListener("click", () => {
      this.toggleInlineAnnotation(card, unit);
    });
    const annotationBtn = header.createDiv({ cls: "annotation-btn" });
    annotationBtn.innerHTML = "\u{1F4AC}";
    const tools = header.createDiv({ cls: "card-tools" });
    tools.addEventListener("click", (e) => {
      e.stopPropagation();
    });
    if (!this.batchMode) {
      const flashcardBtn = tools.createDiv({ cls: "tool-btn flashcard-btn" });
      flashcardBtn.innerHTML = "\u26A1";
      flashcardBtn.setAttribute("aria-label", "\u751F\u6210\u95EA\u5361");
      flashcardBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        this.quickGenerateFlashcard(unit);
      });
    }
    const moreBtn = tools.createDiv({ cls: "tool-btn more-btn" });
    moreBtn.innerHTML = "\u22EE";
    moreBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      this.showContextMenu(e, unit);
    });
    const noteText = content.createDiv({ cls: "note-text" });
    let displayHTML = "";
    if (unit.type === "QA" && unit.answer) {
      displayHTML = `<span class="qa-question">${unit.content}</span> <span class="qa-separator">::</span> <span class="qa-answer">${unit.answer}</span>`;
    } else if (unit.type === "cloze" && unit.fullContext) {
      let context = unit.fullContext.replace(/==/g, "");
      const answer = unit.content;
      displayHTML = context.replace(
        answer,
        `<span class="cloze-highlight">${answer}</span>`
      );
    } else {
      displayHTML = unit.content;
    }
    noteText.innerHTML = displayHTML;
    noteText.addEventListener("click", () => {
      this.jumpToSource(unit);
    });
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    if (annotation) {
      const annEl = content.createDiv({ cls: "annotation-preview" });
      const annText = annotation.content.length > 60 ? annotation.content.substring(0, 60) + "..." : annotation.content;
      annEl.textContent = `\u{1F4AC} ${annText}`;
      annEl.addEventListener("click", (e) => {
        e.stopPropagation();
        this.toggleInlineAnnotation(card, unit);
      });
    }
    const meta = content.createDiv({ cls: "card-meta" });
    if (unit.metadata.tags.length > 0) {
      unit.metadata.tags.slice(0, 2).forEach((tag) => {
        meta.createSpan({ text: `#${tag}`, cls: "tag" });
      });
      if (unit.metadata.tags.length > 2) {
        meta.createSpan({ text: `+${unit.metadata.tags.length - 2}`, cls: "tag-more" });
      }
    }
    if (unit.flashcardIds.length > 0) {
      meta.createSpan({ text: `\u{1F0CF} ${unit.flashcardIds.length}`, cls: "badge" });
    }
  }
  // ==================== 主界面模式渲染 ====================
  renderMainMode(container) {
    const layout = container.createDiv({ cls: "main-layout" });
    const leftPanel = layout.createDiv({ cls: "left-panel" });
    if (!this.selectedFile && this.viewType === "notes") {
      const units = this.getFilteredUnits();
      const grouped = this.groupUnits(units);
      if (grouped.length > 0) {
        this.selectedFile = grouped[0].groupKey;
      }
    }
    this.renderLeftPanel(leftPanel);
    const rightPanel = layout.createDiv({ cls: "right-panel" });
    this.renderRightPanel(rightPanel);
  }
  renderLeftPanel(container) {
    this.renderMainToolbar(container);
    this.renderFixedEntries(container);
    this.renderFileList(container);
  }
  renderMainToolbar(container) {
    const toolbar = container.createDiv({ cls: "main-toolbar" });
    const searchInput = toolbar.createEl("input", {
      type: "text",
      placeholder: "\u{1F50D} \u641C\u7D22...",
      cls: "search-input-main"
    });
    searchInput.value = this.searchQuery;
    searchInput.addEventListener("input", (e) => {
      const value = e.target.value;
      this.searchQuery = value;
      if (this.searchDebounceTimer !== null) {
        window.clearTimeout(this.searchDebounceTimer);
      }
      this.searchDebounceTimer = window.setTimeout(() => {
        this.selectedFile = null;
        const container2 = this.containerEl.children[1];
        const rightPanel = container2.querySelector(".right-panel");
        if (rightPanel) {
          rightPanel.empty();
          this.renderRightPanel(rightPanel);
        }
        const fileListContainer = container2.querySelector(".file-list");
        if (fileListContainer) {
          fileListContainer.empty();
          this.renderFileListContent(fileListContainer);
        }
      }, 300);
    });
    const groupSwitcher = toolbar.createDiv({ cls: "group-switcher-main" });
    const groupOptions = [
      { mode: "file", icon: "\u{1F4C1}", label: "\u6587\u4EF6" },
      { mode: "annotation", icon: "\u{1F4AC}", label: "\u6279\u6CE8" },
      { mode: "tag", icon: "\u{1F3F7}\uFE0F", label: "\u6807\u7B7E" },
      { mode: "date", icon: "\u{1F4C5}", label: "\u65E5\u671F" }
    ];
    groupOptions.forEach(({ mode, icon, label }) => {
      const btn = groupSwitcher.createDiv({
        cls: `group-btn-main ${this.groupMode === mode ? "active" : ""}`
      });
      btn.innerHTML = `${icon} `;
      btn.addEventListener("click", () => {
        if (this.groupMode !== mode) {
          this.groupMode = mode;
          this.selectedFile = null;
          this.selectedUnitIds.clear();
          this.selectedCardIds.clear();
          this.batchMode = false;
          this.render();
          const container2 = this.containerEl.children[1];
          const fileListContainer = container2.querySelector(".file-list");
          if (fileListContainer) {
            fileListContainer.empty();
            this.renderFileListContent(fileListContainer);
          }
          const rightPanel = container2.querySelector(".right-panel");
          if (rightPanel) {
            rightPanel.empty();
            this.renderRightPanel(rightPanel);
          }
        }
      });
    });
  }
  renderFixedEntries(container) {
    const entries = container.createDiv({ cls: "fixed-entries" });
    const allNotesBtn = entries.createDiv({
      cls: `entry-btn ${this.viewType === "notes" ? "active" : ""}`
    });
    allNotesBtn.innerHTML = "\u{1F4DD} <span>All Notes</span>";
    allNotesBtn.addEventListener("click", () => {
      this.viewType = "notes";
      this.selectedFile = null;
      this.selectedUnitIds.clear();
      this.selectedCardIds.clear();
      this.batchMode = false;
      this.render();
    });
    const cardListBtn = entries.createDiv({
      cls: `entry-btn ${this.viewType === "cards" ? "active" : ""}`
    });
    cardListBtn.innerHTML = "\u{1F0CF} <span>Card List</span>";
    cardListBtn.addEventListener("click", () => {
      this.viewType = "cards";
      this.selectedFile = null;
      this.selectedUnitIds.clear();
      this.selectedCardIds.clear();
      this.batchMode = false;
      this.render();
    });
  }
  renderFileList(container) {
    const titleText = this.viewType === "cards" ? "\u95EA\u5361\u5206\u7EC4" : "\u6587\u6863\u5217\u8868";
    container.createEl("h3", { text: "\u{1F4C1} \u6587\u6863\u5217\u8868", cls: "panel-title" });
    const fileListContainer = container.createDiv({ cls: "file-list" });
    this.renderFileListContent(fileListContainer);
  }
  renderFileListContent(container) {
    container.empty();
    let grouped;
    if (this.viewType === "cards") {
      const flashcards = this.plugin.flashcardManager.getAllFlashcards();
      const cardGroups = this.groupFlashcards(flashcards);
      grouped = cardGroups.map((g) => ({ groupKey: g.groupKey, cards: g.cards, count: g.cards.length }));
    } else {
      const units = this.getFilteredUnits();
      const unitGroups = this.groupUnits(units);
      grouped = unitGroups.map((g) => ({ groupKey: g.groupKey, units: g.units, count: g.units.length }));
    }
    if (grouped.length === 0) {
      container.createDiv({
        text: "\u6682\u65E0\u6587\u6863",
        cls: "empty-hint"
      });
      return;
    }
    if (!this.selectedFile && grouped.length > 0) {
      this.selectedFile = grouped[0].groupKey;
    }
    grouped.forEach(({ groupKey, count }) => {
      const fileItem = container.createDiv({
        cls: `file-item ${this.selectedFile === groupKey ? "selected" : ""}`
      });
      fileItem.innerHTML = `
        <span class="file-icon">${this.getGroupIcon(this.groupMode)}</span>
        <span class="file-name">${groupKey}</span>
        <span class="file-count">${count}</span>
      `;
      fileItem.addEventListener("click", () => {
        try {
          if (this.selectedFile !== groupKey) {
            this.selectedFile = groupKey;
            const allItems = container.querySelectorAll(".file-item");
            allItems.forEach((item) => item.removeClass("selected"));
            fileItem.addClass("selected");
            const mainContainer = this.containerEl.children[1];
            const rightPanel = mainContainer.querySelector(".right-panel");
            if (rightPanel) {
              rightPanel.empty();
              this.renderRightPanel(rightPanel);
            }
          }
        } catch (error) {
          console.error("[fileItem click] Error:", error);
          new import_obsidian5.Notice("\u26A0\uFE0F \u5207\u6362\u5206\u7EC4\u65F6\u51FA\u9519\uFF0C\u8BF7\u91CD\u8BD5");
        }
      });
    });
  }
  renderRightPanel(container) {
    if (this.viewType === "cards") {
      if (!this.selectedFile) {
        const flashcards = this.plugin.flashcardManager.getAllFlashcards();
        const grouped = this.groupFlashcards(flashcards);
        if (grouped.length > 0) {
          this.selectedFile = grouped[0].groupKey;
        } else {
          const empty = container.createDiv({ cls: "empty-right-panel" });
          empty.innerHTML = `
            <div class="empty-icon">\u{1F4ED}</div>
            <div class="empty-text">\u6682\u65E0\u95EA\u5361</div>
          `;
          return;
        }
      }
      this.renderFlashcardsGrid(container);
      return;
    }
    if (!this.selectedFile) {
      const units = this.getFilteredUnits();
      const grouped = this.groupUnits(units);
      if (grouped.length > 0) {
        this.selectedFile = grouped[0].groupKey;
        const container2 = this.containerEl.children[1];
        const fileListContainer = container2.querySelector(".file-list");
        if (fileListContainer) {
          const firstItem = fileListContainer.querySelector(".file-item");
          firstItem == null ? void 0 : firstItem.addClass("selected");
        }
      } else {
        const empty = container.createDiv({ cls: "empty-right-panel" });
        empty.innerHTML = `
          <div class="empty-icon">\u{1F4ED}</div>
          <div class="empty-text">\u6682\u65E0\u5185\u5BB9</div>
        `;
        return;
      }
    }
    this.renderContentGrid(container);
  }
  /**
   * 渲染内容网格（主界面模式）
   */
  renderContentGrid(container) {
    const header = container.createDiv({ cls: "grid-header" });
    const title = header.createEl("h2", { text: this.selectedFile || "\u5185\u5BB9" });
    const headerActions = header.createDiv({ cls: "header-actions" });
    this.createBatchActionButtons(headerActions, "header");
    this.createSelectAllButton(headerActions, "header");
    const gridContainer = container.createDiv({ cls: "content-grid" });
    const units = this.getFilteredUnits().filter((unit) => {
      if (this.groupMode === "file") {
        return unit.source.file === this.selectedFile;
      } else if (this.groupMode === "annotation") {
        const hasAnnotation = this.selectedFile === "\u6709\u6279\u6CE8";
        return hasAnnotation ? !!unit.annotationId : !unit.annotationId;
      } else if (this.groupMode === "tag") {
        return unit.metadata.tags.includes(this.selectedFile);
      } else if (this.groupMode === "date") {
        return this.formatDate(new Date(unit.metadata.createdAt)) === this.selectedFile;
      }
      return false;
    });
    if (units.length === 0) {
      gridContainer.createDiv({
        text: "\u{1F4ED} \u6682\u65E0\u5185\u5BB9",
        cls: "empty-state"
      });
      return;
    }
    units.forEach((unit) => {
      this.renderGridCard(gridContainer, unit);
    });
  }
  /**
  * 渲染闪卡网格（类似 renderContentGrid）
  */
  renderFlashcardsGrid(container) {
    const header = container.createDiv({ cls: "grid-header" });
    header.createEl("h2", { text: this.selectedFile || "\u95EA\u5361" });
    const headerActions = header.createDiv({ cls: "header-actions" });
    this.createBatchActionButtons(headerActions, "header");
    this.createSelectAllButton(headerActions, "header");
    const gridContainer = container.createDiv({ cls: "content-grid" });
    const flashcards = this.plugin.flashcardManager.getAllFlashcards();
    const filteredCards = flashcards.filter((card) => {
      if (!this.selectedFile)
        return false;
      if (this.groupMode === "file") {
        return card.sourceFile === this.selectedFile;
      }
      if (this.groupMode === "annotation") {
        const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
        const hasAnnotation = this.selectedFile === "\u6709\u6279\u6CE8";
        if (hasAnnotation) {
          return unit && !!unit.annotationId;
        } else {
          return !unit || !unit.annotationId;
        }
      }
      if (this.groupMode === "tag") {
        const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
        if (unit && unit.metadata.tags && unit.metadata.tags.includes(this.selectedFile)) {
          return true;
        }
        if (card.tags && card.tags.includes(this.selectedFile)) {
          return true;
        }
        if (card.deck === this.selectedFile) {
          return true;
        }
        if (this.selectedFile === "\u672A\u5206\u7C7B" && (!card.tags || card.tags.length === 0) && !card.deck && (!unit || !unit.metadata.tags || unit.metadata.tags.length === 0)) {
          return true;
        }
        return false;
      }
      if (this.groupMode === "date") {
        const cardDate = this.formatDate(new Date(card.metadata.createdAt));
        return cardDate === this.selectedFile;
      }
      return false;
    });
    if (filteredCards.length === 0) {
      gridContainer.createDiv({ text: "\u{1F4ED} \u8BE5\u5206\u7EC4\u4E0B\u6682\u65E0\u95EA\u5361", cls: "empty-state" });
      return;
    }
    filteredCards.forEach((card) => {
      this.renderFlashcardGridCard(gridContainer, card);
    });
  }
  /**
   * 渲染网格卡片（主界面模式）
   */
  renderGridCard(container, unit) {
    var _a;
    const card = container.createDiv({ cls: "grid-card" });
    if (this.batchMode) {
      const checkbox = card.createEl("input", {
        type: "checkbox",
        cls: "batch-checkbox"
      });
      checkbox.setAttribute("data-unit-id", unit.id);
      checkbox.checked = this.selectedUnitIds.has(unit.id);
      checkbox.addEventListener("change", (e) => {
        if (e.target.checked) {
          this.selectedUnitIds.add(unit.id);
        } else {
          this.selectedUnitIds.delete(unit.id);
        }
        this.render();
      });
    }
    const header = card.createDiv({ cls: "grid-card-header" });
    header.addEventListener("click", () => {
      this.jumpToSource(unit);
    });
    const typeIndicator = header.createDiv({ cls: "type-indicator" });
    if (unit.type === "QA") {
      typeIndicator.addClass("type-qa");
      typeIndicator.textContent = "Q&A";
    } else if (unit.type === "cloze") {
      typeIndicator.addClass("type-cloze");
      typeIndicator.textContent = "Cloze";
    } else {
      typeIndicator.addClass("type-text");
      typeIndicator.textContent = "Text";
    }
    const fileName = ((_a = unit.source.file.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || "";
    header.createSpan({ text: fileName, cls: "doc-name" });
    const tools = header.createDiv({ cls: "grid-card-tools" });
    if (!this.batchMode) {
      const flashcardBtn = tools.createDiv({ cls: "tool-btn-grid" });
      flashcardBtn.innerHTML = "\u26A1";
      flashcardBtn.setAttribute("aria-label", "\u751F\u6210\u95EA\u5361");
      flashcardBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        this.quickGenerateFlashcard(unit);
      });
    }
    const moreBtn = tools.createDiv({ cls: "tool-btn-grid" });
    moreBtn.innerHTML = "\u22EE";
    moreBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      this.showContextMenu(e, unit);
    });
    const content = card.createDiv({ cls: "grid-card-content" });
    const noteText = content.createDiv({ cls: "grid-note-text" });
    let displayHTML = "";
    if (unit.type === "QA" && unit.answer) {
      displayHTML = `<span>${unit.content}</span> <span >::</span> <span >${unit.answer}</span>`;
    } else if (unit.type === "cloze" && unit.fullContext) {
      const context = unit.fullContext;
      const answer = unit.content;
      displayHTML = context.replace(
        answer,
        `<span >${answer}</span>`
      );
    } else {
      displayHTML = unit.content;
    }
    noteText.innerHTML = displayHTML;
    noteText.addEventListener("click", () => {
      this.toggleInlineAnnotation(card, unit);
    });
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    if (annotation) {
      const annEl = content.createDiv({ cls: "grid-annotation" });
      annEl.innerHTML = `<strong>\u6279\u6CE8\uFF1A</strong>${annotation.content}`;
      annEl.addEventListener("click", (e) => {
        e.stopPropagation();
        this.toggleInlineAnnotation(card, unit);
      });
    }
    if (unit.metadata.tags.length > 0) {
      const tags = content.createDiv({ cls: "grid-tags" });
      unit.metadata.tags.forEach((tag) => {
        tags.createSpan({ text: `#${tag}`, cls: "tag-grid" });
      });
    }
    const meta = card.createDiv({ cls: "grid-card-meta" });
    meta.createSpan({ text: `L${unit.source.position.line}`, cls: "line-info" });
    if (unit.flashcardIds.length > 0) {
      meta.createSpan({ text: `\u{1F0CF} ${unit.flashcardIds.length}`, cls: "badge-grid" });
    }
  }
  /**
   * 渲染闪卡网格卡片（带下拉菜单）
   */
  renderFlashcardGridCard(container, card) {
    const cardEl = container.createDiv({ cls: "grid-card flashcard-grid-card" });
    if (this.batchMode) {
      const checkbox = cardEl.createEl("input", {
        type: "checkbox",
        cls: "batch-checkbox"
      });
      checkbox.setAttribute("data-card-id", card.id);
      checkbox.checked = this.selectedCardIds.has(card.id);
      checkbox.addEventListener("change", (e) => {
        if (e.target.checked) {
          this.selectedCardIds.add(card.id);
        } else {
          this.selectedCardIds.delete(card.id);
        }
        this.render();
      });
    }
    const header = cardEl.createDiv({ cls: "grid-card-header" });
    header.addEventListener("click", async () => {
      const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
      if (unit) {
        await this.jumpToSource(unit);
      } else {
        const file = this.app.vault.getAbstractFileByPath(card.sourceFile);
        if (file instanceof import_obsidian5.TFile) {
          await this.app.workspace.getLeaf(false).openFile(file);
          new import_obsidian5.Notice("\u2705 \u5DF2\u6253\u5F00\u6E90\u6587\u4EF6");
        } else {
          new import_obsidian5.Notice("\u26A0\uFE0F \u627E\u4E0D\u5230\u539F\u59CB\u7B14\u8BB0");
        }
      }
    });
    const typeLabel = header.createDiv({
      cls: `flashcard-type ${card.type}`,
      text: card.type === "qa" ? "Q&A" : "\u586B\u7A7A"
    });
    const tools = header.createDiv({ cls: "grid-card-tools" });
    const moreBtn = tools.createDiv({ cls: "tool-btn-grid" });
    moreBtn.innerHTML = "\u22EE";
    moreBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      this.showFlashcardContextMenu(e, card);
    });
    const content = cardEl.createDiv({ cls: "grid-card-content" });
    const question = content.createDiv({ cls: "flashcard-question" });
    question.innerHTML = `<strong>\u95EE\u9898\uFF1A</strong>${card.front}`;
    const answer = content.createDiv({ cls: "flashcard-answer" });
    const answerText = Array.isArray(card.back) ? card.back.join(", ") : card.back;
    answer.innerHTML = `<strong>\u7B54\u6848\uFF1A</strong>${answerText}`;
    const meta = cardEl.createDiv({ cls: "grid-card-meta" });
    meta.createSpan({
      text: this.formatDate(new Date(card.metadata.createdAt)),
      cls: "flashcard-date"
    });
  }
  /**
   * 渲染闪卡列表
   */
  renderCardsList(container) {
    const header = container.createDiv({ cls: "cards-header" });
    header.createEl("h2", { text: "\u{1F0CF} \u6240\u6709\u95EA\u5361" });
    const cardsContainer = container.createDiv({ cls: "cards-grid" });
    const flashcards = this.plugin.flashcardManager.getAllFlashcards();
    if (flashcards.length === 0) {
      cardsContainer.createDiv({
        text: "\u{1F4ED} \u6682\u65E0\u95EA\u5361",
        cls: "empty-state"
      });
      return;
    }
    flashcards.forEach((card) => {
      const cardEl = cardsContainer.createDiv({ cls: "flashcard-item" });
      if (this.batchMode) {
        const checkbox = cardEl.createEl("input", {
          type: "checkbox",
          cls: "batch-checkbox"
        });
        checkbox.setAttribute("data-card-id", card.id);
        checkbox.checked = this.selectedCardIds.has(card.id);
        checkbox.addEventListener("change", (e) => {
          if (e.target.checked) {
            this.selectedCardIds.add(card.id);
          } else {
            this.selectedCardIds.delete(card.id);
          }
          this.render();
        });
      }
      const cardHeader = cardEl.createDiv({ cls: "flashcard-header" });
      const typeLabel = cardHeader.createDiv({
        cls: `flashcard-type ${card.type}`,
        text: card.type === "qa" ? "Q&A" : "\u586B\u7A7A"
      });
      cardHeader.createSpan({
        text: this.formatDate(new Date(card.metadata.createdAt)),
        cls: "flashcard-date"
      });
      const deleteBtn = cardHeader.createEl("button", {
        text: "\u{1F5D1}\uFE0F",
        cls: "flashcard-delete-btn"
      });
      deleteBtn.setAttribute("aria-label", "\u5220\u9664\u95EA\u5361");
      deleteBtn.addEventListener("click", async (e) => {
        e.stopPropagation();
        if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u5F20\u95EA\u5361\u5417\uFF1F")) {
          await this.deleteFlashcard(card.id);
        }
      });
      const cardBody = cardEl.createDiv({ cls: "flashcard-body" });
      const question = cardBody.createDiv({ cls: "flashcard-question" });
      question.innerHTML = `<strong>\u95EE\u9898\uFF1A</strong>${card.front}`;
      const answer = cardBody.createDiv({ cls: "flashcard-answer" });
      const answerText = Array.isArray(card.back) ? card.back.join(", ") : card.back;
      answer.innerHTML = `<strong>\u7B54\u6848\uFF1A</strong>${answerText}`;
    });
  }
  // ==================== 交互方法 ====================
  /**
   * 切换内联批注编辑器
   */
  toggleInlineAnnotation(cardEl, unit) {
    let existingEditor = cardEl.querySelector(".inline-annotation-editor");
    if (existingEditor) {
      existingEditor.remove();
      const annotation2 = this.plugin.annotationManager.getContentAnnotation(unit.id);
      if (annotation2) {
        const content2 = cardEl.querySelector(".card-content, .grid-card-content");
        const existingPreview = content2.querySelector(".annotation-preview, .grid-annotation");
        if (!existingPreview) {
          this.recreateAnnotationPreview(content2, cardEl, unit, annotation2.content);
        }
      }
      return;
    }
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    const content = cardEl.querySelector(".card-content, .grid-card-content");
    const annotationPreview = content.querySelector(".annotation-preview, .grid-annotation");
    const isGridCard = cardEl.classList.contains("grid-card");
    const editor = document.createElement("div");
    editor.className = "inline-annotation-editor";
    const textarea = document.createElement("textarea");
    textarea.className = "inline-annotation-textarea";
    textarea.placeholder = "Add comment...";
    textarea.value = (annotation == null ? void 0 : annotation.content) || "";
    textarea.setAttribute("data-unit-id", unit.id);
    const hint = document.createElement("div");
    hint.className = "inline-annotation-hint";
    hint.textContent = "Shift + Enter \u6362\u884C";
    editor.appendChild(textarea);
    editor.appendChild(hint);
    if (annotationPreview) {
      annotationPreview.replaceWith(editor);
    } else {
      const noteText = content.querySelector(".note-text, .grid-note-text");
      if (noteText) {
        noteText.after(editor);
      } else {
        content.appendChild(editor);
      }
    }
    textarea.focus();
    textarea.setSelectionRange(textarea.value.length, textarea.value.length);
    textarea.addEventListener("blur", async (e) => {
      const relatedTarget = e.relatedTarget;
      if (!relatedTarget || !editor.contains(relatedTarget)) {
        setTimeout(async () => {
          if (editor.parentElement) {
            await this.saveInlineAnnotation(editor, unit, textarea.value);
          }
        }, 100);
      }
    });
    textarea.addEventListener("keydown", async (e) => {
      if (e.key === "Tab") {
        e.preventDefault();
        await this.saveInlineAnnotation(editor, unit, textarea.value);
      }
    });
  }
  /**
   * 保存内联批注
   */
  async saveInlineAnnotation(editorEl, unit, text) {
    const trimmedText = text.trim();
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    if (trimmedText) {
      if (annotation) {
        await this.plugin.annotationManager.updateAnnotation(annotation.id, {
          content: trimmedText
        });
      } else {
        await this.plugin.annotationManager.addContentAnnotation(unit.id, trimmedText);
      }
    } else if (annotation) {
      await this.plugin.annotationManager.deleteAnnotation(annotation.id);
      new import_obsidian5.Notice("\u{1F5D1}\uFE0F \u6279\u6CE8\u5DF2\u5220\u9664");
    }
    const card = editorEl.closest(".compact-card, .grid-card");
    editorEl.remove();
    if (trimmedText && card) {
      const content = card.querySelector(".card-content, .grid-card-content");
      if (content) {
        this.recreateAnnotationPreview(content, card, unit, trimmedText);
        const indicator = card.querySelector(".card-indicator");
        if (indicator && !indicator.classList.contains("has-annotation")) {
          indicator.classList.add("has-annotation");
        }
      }
    } else if (!trimmedText && card) {
      const indicator = card.querySelector(".card-indicator");
      if (indicator && indicator.classList.contains("has-annotation")) {
        indicator.classList.remove("has-annotation");
      }
    }
  }
  /**
   * 取消内联批注编辑
   */
  cancelInlineAnnotation(editorEl, cardEl, unit) {
    editorEl.remove();
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    if (annotation) {
      const content = cardEl.querySelector(".card-content, .grid-card-content");
      this.recreateAnnotationPreview(content, cardEl, unit, annotation.content);
    }
  }
  /**
   * 重新创建批注预览
   */
  recreateAnnotationPreview(contentEl, cardEl, unit, annotationText) {
    const existingPreview = contentEl.querySelector(".annotation-preview, .grid-annotation");
    if (existingPreview) {
      existingPreview.remove();
    }
    const isGridCard = cardEl.classList.contains("grid-card");
    const annEl = document.createElement("div");
    annEl.className = isGridCard ? "grid-annotation" : "annotation-preview";
    if (isGridCard) {
      annEl.innerHTML = `<strong>\u6279\u6CE8\uFF1A</strong>${annotationText}`;
    } else {
      const displayText = annotationText.length > 60 ? annotationText.substring(0, 60) + "..." : annotationText;
      annEl.textContent = `\u{1F4AC} ${displayText}`;
    }
    annEl.addEventListener("click", (e) => {
      e.stopPropagation();
      this.toggleInlineAnnotation(cardEl, unit);
    });
    annEl.addEventListener("keydown", (e) => {
      if (e.key === "Tab") {
        e.preventDefault();
        e.stopPropagation();
        this.toggleInlineAnnotation(cardEl, unit);
      }
    });
    const noteText = contentEl.querySelector(".note-text, .grid-note-text");
    if (noteText) {
      noteText.insertAdjacentElement("afterend", annEl);
      const inserted = contentEl.querySelector(".annotation-preview, .grid-annotation");
    } else {
      contentEl.appendChild(annEl);
    }
    annEl.setAttribute("tabindex", "0");
    annEl.focus();
  }
  /**
   * 打开批注编辑器（模态框方式，保留用于右键菜单）
   */
  async openAnnotationEditor(unit) {
    const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
    const existingText = (annotation == null ? void 0 : annotation.content) || "";
    const modal = new AnnotationModal(
      this.app,
      existingText,
      async (newText) => {
        if (newText.trim()) {
          if (annotation) {
            await this.plugin.annotationManager.updateAnnotation(annotation.id, {
              content: newText
            });
          } else {
            await this.plugin.annotationManager.addContentAnnotation(unit.id, newText);
          }
          new import_obsidian5.Notice("\u2705 \u6279\u6CE8\u5DF2\u4FDD\u5B58");
        } else if (annotation) {
          await this.plugin.annotationManager.deleteAnnotation(annotation.id);
          new import_obsidian5.Notice("\u{1F5D1}\uFE0F \u6279\u6CE8\u5DF2\u5220\u9664");
        }
        this.refresh();
      }
    );
    modal.open();
  }
  /**
   * 跳转到原文
   */
  async jumpToSource(unit) {
    const file = this.app.vault.getAbstractFileByPath(unit.source.file);
    if (!(file instanceof import_obsidian5.TFile)) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u6587\u4EF6\u4E0D\u5B58\u5728");
      return;
    }
    this.shouldRestoreScroll = true;
    const leaf = this.app.workspace.getLeaf(false);
    await leaf.openFile(file);
    setTimeout(() => {
      const view = this.app.workspace.getActiveViewOfType(import_obsidian5.ItemView);
      if (view) {
        const editor = view.editor;
        if (editor) {
          const line = unit.source.position.line;
          const lineCount = editor.lineCount();
          const validLine = Math.min(line, lineCount - 1);
          editor.setCursor({ line: validLine, ch: 0 });
          editor.scrollIntoView(
            { from: { line: validLine, ch: 0 }, to: { line: validLine, ch: 0 } },
            true
          );
          setTimeout(() => {
            var _a;
            try {
              const lineLength = ((_a = editor.getLine(validLine)) == null ? void 0 : _a.length) || 0;
              editor.setSelection(
                { line: validLine, ch: 0 },
                { line: validLine, ch: lineLength }
              );
            } catch (e) {
              console.error("Selection error:", e);
            }
          }, 100);
        }
      }
    }, 200);
  }
  /**
   * 快速生成闪卡
   */
  async quickGenerateFlashcard(unit) {
    try {
      const { QuickFlashcardCreator: QuickFlashcardCreator2 } = await Promise.resolve().then(() => (init_QuickFlashcardCreator(), QuickFlashcardCreator_exports));
      const creator = new QuickFlashcardCreator2(this.plugin);
      await creator.createSmartCard(unit);
      new import_obsidian5.Notice("\u26A1 \u95EA\u5361\u5DF2\u751F\u6210");
      this.refresh();
    } catch (error) {
      new import_obsidian5.Notice("\u274C \u751F\u6210\u95EA\u5361\u5931\u8D25");
      console.error(error);
    }
  }
  /**
  * 显示批量操作菜单
  */
  showBatchMenu(event, unit) {
    const menu = new import_obsidian5.Menu();
    menu.addItem(
      (item) => item.setTitle(this.isAllSelected() ? "\u2611 select" : "\u2610 AllSelect").setIcon("check-square").onClick(() => {
        this.toggleSelectAll();
      })
    );
    menu.addSeparator();
    if (this.viewType === "notes") {
      menu.addItem(
        (item) => item.setTitle(`\u26A1 \u6279\u91CF\u5236\u5361 (${this.selectedUnitIds.size})`).setIcon("zap").onClick(() => {
          this.batchCreateFlashcards();
        })
      );
    }
    menu.addItem(
      (item) => item.setTitle(`\u{1F5D1}\uFE0F \u5220\u9664\u9009\u4E2D (${this.viewType === "cards" ? this.selectedCardIds.size : this.selectedUnitIds.size})`).setIcon("trash").onClick(() => {
        if (this.viewType === "cards") {
          this.batchDeleteFlashcards();
        } else {
          this.batchDeleteNotes();
        }
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u2713 \u9000\u51FA\u6279\u91CF\u6A21\u5F0F").setIcon("x").onClick(() => {
        this.batchMode = false;
        this.selectedUnitIds.clear();
        this.selectedCardIds.clear();
        this.render();
      })
    );
    menu.showAtMouseEvent(event);
  }
  /**
   * 显示上下文菜单
   */
  showContextMenu(event, unit) {
    const menu = new import_obsidian5.Menu();
    menu.addItem(
      (item) => item.setTitle("\u{1F4D6} \u8DF3\u8F6C\u5230\u539F\u6587").setIcon("arrow-up-right").onClick(() => this.jumpToSource(unit))
    );
    menu.addItem(
      (item) => item.setTitle("\u{1F4AC} \u7F16\u8F91\u6279\u6CE8").setIcon("message-square").onClick(() => this.openAnnotationEditor(unit))
    );
    menu.addSeparator();
    if (unit.flashcardIds.length > 0) {
      menu.addItem(
        (item) => item.setTitle("\u270F\uFE0F \u7F16\u8F91\u95EA\u5361").setIcon("edit").onClick(() => this.editFlashcardsForUnit(unit, event))
      );
      menu.addSeparator();
    }
    menu.addItem(
      (item) => item.setTitle("\u26A1 \u751F\u6210\u95EA\u5361").setIcon("zap").onClick(() => this.quickGenerateFlashcard(unit))
    );
    menu.addItem(
      (item) => item.setTitle("\u2795 \u521B\u5EFA QA \u95EA\u5361").setIcon("plus").onClick(async () => {
        await this.createFlashcard(unit, "qa");
      })
    );
    menu.addItem(
      (item) => item.setTitle("\u2795 \u521B\u5EFA\u586B\u7A7A\u95EA\u5361").setIcon("plus").onClick(async () => {
        await this.createFlashcard(unit, "cloze");
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u67E5\u770B\u7EDF\u8BA1").setIcon("bar-chart").onClick(() => {
        this.plugin.activateStats();
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u{1F5D1}\uFE0F \u5220\u9664\u7B14\u8BB0").setIcon("trash").onClick(async () => {
        if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u6761\u7B14\u8BB0\u5417\uFF1F")) {
          if (unit.flashcardIds.length > 0) {
            for (const cardId of unit.flashcardIds) {
              await this.plugin.flashcardManager.deleteCard(cardId);
            }
          }
          await this.plugin.dataManager.deleteContentUnit(unit.id);
          new import_obsidian5.Notice("\u{1F5D1}\uFE0F \u7B14\u8BB0\u5DF2\u5220\u9664");
          this.refresh();
        }
      })
    );
    menu.showAtMouseEvent(event);
  }
  /**
   * 编辑笔记单元关联的闪卡
   */
  editFlashcardsForUnit(unit, event) {
    if (unit.flashcardIds.length === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u8BE5\u7B14\u8BB0\u6CA1\u6709\u5173\u8054\u7684\u95EA\u5361");
      return;
    }
    if (unit.flashcardIds.length === 1) {
      const allCards2 = this.plugin.flashcardManager.getAllFlashcards();
      const card = allCards2.find((c) => c.id === unit.flashcardIds[0]);
      if (card) {
        this.editFlashcard(card);
      } else {
        new import_obsidian5.Notice("\u26A0\uFE0F \u627E\u4E0D\u5230\u8BE5\u95EA\u5361");
      }
      return;
    }
    const menu = new import_obsidian5.Menu();
    const allCards = this.plugin.flashcardManager.getAllFlashcards();
    unit.flashcardIds.forEach((cardId, index) => {
      const card = allCards.find((c) => c.id === cardId);
      if (card) {
        const typeLabel = card.type === "qa" ? "Q&A" : "\u586B\u7A7A";
        const preview = card.front.length > 30 ? card.front.substring(0, 30) + "..." : card.front;
        menu.addItem(
          (item) => item.setTitle(`${index + 1}. ${typeLabel}: ${preview}`).onClick(() => this.editFlashcard(card))
        );
      }
    });
    if (event) {
      menu.showAtMouseEvent(event);
    } else {
      menu.showAtPosition({ x: 100, y: 100 });
    }
  }
  /**
   * 显示闪卡上下文菜单
   */
  showFlashcardContextMenu(event, card) {
    const menu = new import_obsidian5.Menu();
    menu.addItem(
      (item) => item.setTitle("\u{1F4D6} \u8DF3\u8F6C\u5230\u539F\u6587").setIcon("arrow-up-right").onClick(async () => {
        const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
        if (unit) {
          await this.jumpToSource(unit);
        } else {
          const file = this.app.vault.getAbstractFileByPath(card.sourceFile);
          if (file instanceof import_obsidian5.TFile) {
            await this.app.workspace.getLeaf(false).openFile(file);
            new import_obsidian5.Notice("\u2705 \u5DF2\u6253\u5F00\u6E90\u6587\u4EF6");
          } else {
            new import_obsidian5.Notice("\u26A0\uFE0F \u627E\u4E0D\u5230\u539F\u59CB\u7B14\u8BB0");
          }
        }
      })
    );
    menu.addItem(
      (item) => item.setTitle("\u270F\uFE0F \u7F16\u8F91\u5361\u7247").setIcon("edit").onClick(() => {
        this.editFlashcard(card);
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u{1F4CA} \u67E5\u770B\u7EDF\u8BA1").setIcon("bar-chart").onClick(() => {
        this.plugin.activateStats();
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u{1F5D1}\uFE0F \u5220\u9664\u5361\u7247").setIcon("trash").onClick(async () => {
        if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u5F20\u95EA\u5361\u5417\uFF1F")) {
          await this.deleteFlashcard(card.id);
        }
      })
    );
    menu.showAtMouseEvent(event);
  }
  /**
   * 创建特定类型的闪卡
   */
  async createFlashcard(unit, type) {
    const modal = new FlashcardCreationModal(
      this.app,
      unit,
      type,
      async (question, answer) => {
        try {
          if (type === "qa") {
            await this.plugin.flashcardManager.createQACard(
              unit.id,
              question,
              answer
            );
          } else {
            const deletions = [{
              index: 0,
              answer
            }];
            await this.plugin.flashcardManager.createClozeCard(
              unit.id,
              question,
              deletions
            );
          }
          new import_obsidian5.Notice(`\u2705 ${type === "qa" ? "QA" : "\u586B\u7A7A"}\u95EA\u5361\u5DF2\u521B\u5EFA`);
          this.refresh();
        } catch (error) {
          console.error("Error creating flashcard:", error);
          new import_obsidian5.Notice("\u274C \u521B\u5EFA\u95EA\u5361\u5931\u8D25");
        }
      }
    );
    modal.open();
  }
  /**
   * 在编辑器中打开文件
   */
  async openFileInEditor(filePath) {
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian5.TFile) {
      await this.app.workspace.getLeaf(false).openFile(file);
    } else {
      new import_obsidian5.Notice("\u26A0\uFE0F \u65E0\u6CD5\u6253\u5F00\u6587\u4EF6");
    }
  }
  /**
   * 删除闪卡
   */
  async deleteFlashcard(cardId) {
    try {
      await this.plugin.flashcardManager.deleteCard(cardId);
      new import_obsidian5.Notice("\u{1F5D1}\uFE0F \u95EA\u5361\u5DF2\u5220\u9664");
      this.refresh();
    } catch (error) {
      console.error("Error deleting flashcard:", error);
      new import_obsidian5.Notice("\u274C \u5220\u9664\u95EA\u5361\u5931\u8D25");
    }
  }
  /**
   * 编辑闪卡
   */
  editFlashcard(card) {
    const modal = new FlashcardEditModal(
      this.app,
      card,
      async (question, answer) => {
        try {
          const updatedCard = {
            ...card,
            front: question,
            back: card.type === "cloze" ? [answer] : answer,
            metadata: {
              ...card.metadata,
              updatedAt: Date.now()
            }
          };
          await this.plugin.flashcardManager.updateCard(updatedCard);
          new import_obsidian5.Notice("\u2705 \u95EA\u5361\u5DF2\u66F4\u65B0");
          this.refresh();
        } catch (error) {
          console.error("Error updating flashcard:", error);
          new import_obsidian5.Notice("\u274C \u66F4\u65B0\u95EA\u5361\u5931\u8D25");
        }
      }
    );
    modal.open();
  }
  /**
   * 更新批量操作按钮
   */
  updateBatchButtons() {
    const container = this.containerEl.children[1];
    const batchActions = container.querySelector(".batch-actions");
    if (batchActions) {
      const selectAllBtn = batchActions.querySelector(".select-all-btn");
      const deleteBtn = batchActions.querySelector(".batch-delete-btn");
      const createBtn = batchActions.querySelector(".batch-create-cards-btn");
      if (selectAllBtn) {
        selectAllBtn.textContent = this.isAllSelected() ? "\u2611 \u9009\u62E9" : "\u2610 \u5168\u9009";
      }
      if (deleteBtn) {
        const count = this.viewType === "cards" ? this.selectedCardIds.size : this.selectedUnitIds.size;
        deleteBtn.textContent = `\u{1F5D1}\uFE0F \u5220\u9664\u9009\u4E2D (${count})`;
      }
      if (createBtn) {
        createBtn.textContent = `\u26A1 \u6279\u91CF\u5236\u5361 (${this.selectedUnitIds.size})`;
      }
    }
    const headerSelectBtn = container.querySelector(".select-all-btn-header");
    if (headerSelectBtn) {
      headerSelectBtn.textContent = this.isAllSelected() ? "\u2611 \u9009\u62E9" : "\u2610 \u5168\u9009";
    }
    const sidebarSelectBtn = container.querySelector(".select-all-btn-sidebar");
    if (sidebarSelectBtn) {
      sidebarSelectBtn.textContent = this.isAllSelected() ? "\u2611 \u9009\u62E9" : "\u2610 \u5168\u9009";
    }
  }
  /**
   * 批量删除闪卡
   */
  async batchDeleteFlashcards() {
    if (this.selectedCardIds.size === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u95EA\u5361");
      return;
    }
    if (!confirm(`\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u7684 ${this.selectedCardIds.size} \u5F20\u95EA\u5361\u5417\uFF1F`)) {
      return;
    }
    let success = 0;
    let failed = 0;
    for (const cardId of this.selectedCardIds) {
      try {
        await this.plugin.flashcardManager.deleteCard(cardId);
        success++;
      } catch (error) {
        console.error("Error deleting flashcard:", error);
        failed++;
      }
    }
    this.selectedCardIds.clear();
    new import_obsidian5.Notice(`\u2705 \u5DF2\u5220\u9664 ${success} \u5F20\u95EA\u5361${failed > 0 ? `\uFF0C${failed} \u5F20\u5931\u8D25` : ""}`);
    this.refresh();
  }
  /**
   * 批量删除笔记
   */
  async batchDeleteNotes() {
    if (this.selectedUnitIds.size === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u7B14\u8BB0");
      return;
    }
    if (!confirm(`\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u7684 ${this.selectedUnitIds.size} \u6761\u7B14\u8BB0\u5417\uFF1F`)) {
      return;
    }
    let success = 0;
    let failed = 0;
    for (const unitId of this.selectedUnitIds) {
      try {
        const unit = this.plugin.dataManager.getContentUnit(unitId);
        if (unit) {
          if (unit.flashcardIds.length > 0) {
            for (const cardId of unit.flashcardIds) {
              await this.plugin.flashcardManager.deleteCard(cardId);
            }
          }
        }
        await this.plugin.dataManager.deleteContentUnit(unitId);
        success++;
      } catch (error) {
        console.error("Error deleting note:", error);
        failed++;
      }
    }
    this.selectedUnitIds.clear();
    this.batchMode = false;
    new import_obsidian5.Notice(`\u2705 \u5DF2\u5220\u9664 ${success} \u6761\u7B14\u8BB0${failed > 0 ? `\uFF0C${failed} \u6761\u5931\u8D25` : ""}`);
    this.refresh();
  }
  /**
   * 检查是否全选
   */
  isAllSelected() {
    const visible = this.getVisibleItems();
    if (this.viewType === "cards") {
      const cards = visible.cards || [];
      return cards.length > 0 && this.selectedCardIds.size === cards.length;
    } else {
      const units = visible.units || [];
      return units.length > 0 && this.selectedUnitIds.size === units.length;
    }
  }
  /**
   * 切换全选/取消
   */
  /**
  * 切换全选/取消
  */
  /**
   * 全选当前可见项
   */
  toggleSelectAll() {
    console.log("\u{1F50D} [toggleSelectAll] ========== \u5F00\u59CB\u6267\u884C ==========");
    const visible = this.getVisibleItems();
    if (this.viewType === "cards") {
      const cards = visible.cards || [];
      if (cards.length === 0) {
        new import_obsidian5.Notice("\u26A0\uFE0F \u6CA1\u6709\u53EF\u9009\u62E9\u7684\u95EA\u5361");
        return;
      }
      cards.forEach((card) => this.selectedCardIds.add(card.id));
    } else {
      const units = visible.units || [];
      if (units.length === 0) {
        if (this.displayMode === "sidebar" && (this.groupMode === "tag" || this.groupMode === "date")) {
          new import_obsidian5.Notice("\u26A0\uFE0F \u6CA1\u6709\u53EF\u9009\u62E9\u7684\u7B14\u8BB0");
        } else if (this.groupMode === "annotation" && !this.selectedFile) {
          new import_obsidian5.Notice('\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9"\u6709\u6279\u6CE8"\u6216"\u65E0\u6279\u6CE8"\u5206\u7EC4');
        } else if (this.displayMode === "main" && !this.selectedFile) {
          new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u4E00\u4E2A\u5206\u7EC4");
        } else {
          new import_obsidian5.Notice("\u26A0\uFE0F \u6CA1\u6709\u53EF\u9009\u62E9\u7684\u7B14\u8BB0");
        }
        return;
      }
      units.forEach((unit) => this.selectedUnitIds.add(unit.id));
    }
    this.batchMode = true;
    this.render();
  }
  /**
   * 取消全选（仅取消全选状态，保持批量模式）
   */
  cancelSelectAll() {
    const visible = this.getVisibleItems();
    if (this.viewType === "cards") {
      const cards = visible.cards || [];
      cards.forEach((card) => this.selectedCardIds.delete(card.id));
    } else {
      const units = visible.units || [];
      units.forEach((unit) => this.selectedUnitIds.delete(unit.id));
    }
    this.render();
  }
  /**
  * 自动全选当前可见项目
  */
  autoSelectAll() {
    this.selectedUnitIds.clear();
    this.selectedCardIds.clear();
    const visible = this.getVisibleItems();
    if (this.viewType === "cards") {
      const cards = visible.cards || [];
      cards.forEach((card) => this.selectedCardIds.add(card.id));
    } else {
      const units = visible.units || [];
      units.forEach((unit) => this.selectedUnitIds.add(unit.id));
    }
    if (this.selectedUnitIds.size > 0 || this.selectedCardIds.size > 0) {
      this.batchMode = true;
    }
  }
  /**
   * 清除所有选择
   */
  clearSelection() {
    this.selectedUnitIds.clear();
    this.selectedCardIds.clear();
    this.batchMode = false;
    this.render();
  }
  /**
   * 更新所有checkbox状态
   */
  updateCheckboxes() {
    const container = this.containerEl.children[1];
    const checkboxes = container.querySelectorAll(".batch-checkbox");
    checkboxes.forEach((checkbox) => {
      if (this.viewType === "cards") {
        const cardId = checkbox.getAttribute("data-card-id");
        if (cardId) {
          checkbox.checked = this.selectedCardIds.has(cardId);
        }
      } else {
        const unitId = checkbox.getAttribute("data-unit-id");
        if (unitId) {
          checkbox.checked = this.selectedUnitIds.has(unitId);
        }
      }
    });
  }
  /**
   * 批量创建闪卡
   */
  async batchCreateFlashcards() {
    if (this.selectedUnitIds.size === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u521B\u5EFA\u95EA\u5361\u7684\u7B14\u8BB0");
      return;
    }
    const units = Array.from(this.selectedUnitIds).map((id) => this.plugin.dataManager.getContentUnit(id)).filter((u) => u !== void 0 && u.flashcardIds.length === 0);
    if (units.length === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u9009\u4E2D\u7684\u7B14\u8BB0\u90FD\u5DF2\u521B\u5EFA\u8FC7\u95EA\u5361");
      return;
    }
    const { BatchCreateModal: BatchCreateModal2 } = await Promise.resolve().then(() => (init_OverviewView(), OverviewView_exports));
    const quickCreator = new QuickFlashcardCreator(this.plugin);
    const modal = new BatchCreateModal2(
      this.app,
      this.plugin,
      quickCreator,
      units,
      () => {
        this.selectedUnitIds.clear();
        this.refresh();
      }
    );
    modal.open();
  }
  // ==================== 工具方法 ====================
  /**
   * 获取过滤后的内容单元
   */
  getFilteredUnits() {
    let units = this.plugin.dataManager.getAllContentUnits();
    if (this.searchQuery) {
      const query = this.searchQuery.toLowerCase();
      units = units.filter(
        (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
      );
    }
    if (this.filterMode === "annotated") {
      units = units.filter((u) => u.annotationId);
    } else if (this.filterMode === "flashcards") {
      units = units.filter((u) => u.flashcardIds.length > 0);
    }
    return units;
  }
  /**
   * 分组内容单元
   */
  groupUnits(units) {
    const grouped = /* @__PURE__ */ new Map();
    units.forEach((unit) => {
      let key;
      switch (this.groupMode) {
        case "file":
          key = unit.source.file;
          break;
        case "annotation":
          const hasAnnotation = unit.annotationId ? "\u6709\u6279\u6CE8" : "\u65E0\u6279\u6CE8";
          if (!grouped.has(hasAnnotation))
            grouped.set(hasAnnotation, []);
          grouped.get(hasAnnotation).push(unit);
          return;
        case "tag":
          unit.metadata.tags.forEach((tag) => {
            if (!grouped.has(tag))
              grouped.set(tag, []);
            grouped.get(tag).push(unit);
          });
          return;
        case "date":
          key = this.formatDate(new Date(unit.metadata.createdAt));
          break;
        default:
          key = "\u672A\u5206\u7EC4";
      }
      if (!grouped.has(key))
        grouped.set(key, []);
      grouped.get(key).push(unit);
    });
    return Array.from(grouped.entries()).map(([groupKey, units2]) => ({ groupKey, units: units2 })).sort((a, b) => {
      if (this.groupMode === "annotation") {
        if (a.groupKey === "\u6709\u6279\u6CE8")
          return -1;
        if (b.groupKey === "\u6709\u6279\u6CE8")
          return 1;
        return 0;
      }
      if (this.groupMode === "date") {
        return b.groupKey.localeCompare(a.groupKey);
      }
      return b.units.length - a.units.length;
    });
  }
  /**
   * 分组闪卡（类似 groupUnits）
   */
  groupFlashcards(flashcards) {
    const grouped = /* @__PURE__ */ new Map();
    flashcards.forEach((card) => {
      let keys = [];
      const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
      switch (this.groupMode) {
        case "file":
          keys = [card.sourceFile];
          break;
        case "annotation":
          if (unit && unit.annotationId) {
            keys = ["\u6709\u6279\u6CE8"];
          } else {
            keys = ["\u65E0\u6279\u6CE8"];
          }
          break;
        case "tag":
          if (unit && unit.metadata.tags.length > 0) {
            keys = unit.metadata.tags;
          } else if (card.tags && card.tags.length > 0) {
            keys = card.tags;
          } else if (card.deck) {
            keys = [card.deck];
          } else {
            keys = ["\u672A\u5206\u7C7B"];
          }
          break;
        case "date":
          keys = [this.formatDate(new Date(card.metadata.createdAt))];
          break;
        default:
          keys = ["\u672A\u5206\u7EC4"];
      }
      keys.forEach((key) => {
        if (!grouped.has(key)) {
          grouped.set(key, []);
        }
        grouped.get(key).push(card);
      });
    });
    const result = Array.from(grouped.entries()).map(([groupKey, cards]) => ({ groupKey, cards })).sort((a, b) => {
      if (this.groupMode === "annotation") {
        if (a.groupKey === "\u6709\u6279\u6CE8")
          return -1;
        if (b.groupKey === "\u6709\u6279\u6CE8")
          return 1;
        return 0;
      }
      if (this.groupMode === "date") {
        return b.groupKey.localeCompare(a.groupKey);
      }
      return b.cards.length - a.cards.length;
    });
    return result;
  }
  /**
   * 获取统计信息
   */
  getFilteredStats() {
    const units = this.getFilteredUnits();
    return {
      count: units.length,
      withAnnotations: units.filter((u) => u.annotationId).length,
      withFlashcards: units.filter((u) => u.flashcardIds.length > 0).length
    };
  }
  /**
   * 格式化日期
   */
  formatDate(date) {
    return date.toLocaleDateString("zh-CN", {
      year: "numeric",
      month: "2-digit",
      day: "2-digit"
    });
  }
  /**
   * 获取分组图标
   */
  getGroupIcon(mode) {
    switch (mode) {
      case "file":
        return "\u{1F4C4}";
      case "annotation":
        return "\u{1F4AC}";
      case "tag":
        return "\u{1F3F7}\uFE0F";
      case "date":
        return "\u{1F4C5}";
      default:
        return "\u{1F4C1}";
    }
  }
  /**
  * 创建全选按钮（统一样式和行为）
  */
  createSelectAllButton(container, styleClass) {
    var _a, _b;
    const btnClass = styleClass === "sidebar" ? "select-all-btn-sidebar" : "select-all-btn-header";
    const isAllChecked = this.isAllSelected();
    const visible = this.getVisibleItems();
    const itemCount = this.viewType === "cards" ? ((_a = visible.cards) == null ? void 0 : _a.length) || 0 : ((_b = visible.units) == null ? void 0 : _b.length) || 0;
    const selectAllBtn = container.createEl("button", {
      text: isAllChecked ? "\u2713 \u53D6\u6D88\u5168\u9009" : "\u2610 \u5168\u9009",
      // 改为"取消全选"
      cls: `${btnClass} ${isAllChecked ? "completed" : ""}`,
      title: isAllChecked ? "\u53D6\u6D88\u5F53\u524D\u9875\u9762\u7684\u5168\u9009" : `\u5168\u9009\u5F53\u524D ${itemCount} \u9879`
    });
    const shouldDisable = itemCount === 0 || this.groupMode === "annotation" && this.displayMode === "main" && !this.selectedFile;
    if (shouldDisable) {
      selectAllBtn.disabled = true;
      selectAllBtn.style.opacity = "0.5";
      selectAllBtn.style.cursor = "not-allowed";
      selectAllBtn.title = itemCount === 0 ? "\u6CA1\u6709\u53EF\u9009\u9879" : '\u8BF7\u5148\u9009\u62E9"\u6709\u6279\u6CE8"\u6216"\u65E0\u6279\u6CE8"';
    }
    selectAllBtn.addEventListener("click", () => {
      if (isAllChecked) {
        this.cancelSelectAll();
      } else {
        this.toggleSelectAll();
      }
    });
    return selectAllBtn;
  }
  /**
   * 创建批量操作按钮组（制卡、删除、取消）
   */
  createBatchActionButtons(container, styleClass) {
    if (!this.batchMode)
      return;
    const btnPrefix = styleClass === "sidebar" ? "sidebar" : "header";
    if (this.viewType === "notes") {
      const createBtn = container.createEl("button", {
        text: styleClass === "sidebar" ? `\u26A1(${this.selectedUnitIds.size})` : `\u26A1 \u6279\u91CF\u5236\u5361 (${this.selectedUnitIds.size})`,
        cls: `batch-create-cards-btn-${btnPrefix}`,
        title: "\u6279\u91CF\u5236\u5361"
      });
      createBtn.addEventListener("click", () => {
        if (this.selectedUnitIds.size === 0) {
          new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u521B\u5EFA\u95EA\u5361\u7684\u7B14\u8BB0");
          return;
        }
        this.batchCreateFlashcards();
      });
    }
    const count = this.viewType === "cards" ? this.selectedCardIds.size : this.selectedUnitIds.size;
    const deleteBtn = container.createEl("button", {
      text: styleClass === "sidebar" ? `\u{1F5D1}\uFE0F(${count})` : `\u{1F5D1}\uFE0F \u5220\u9664 (${count})`,
      cls: `batch-delete-btn-${btnPrefix}`,
      title: "\u6279\u91CF\u5220\u9664"
    });
    deleteBtn.addEventListener("click", () => {
      if (count === 0) {
        new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u9879\u76EE");
        return;
      }
      if (this.viewType === "cards") {
        this.batchDeleteFlashcards();
      } else {
        this.batchDeleteNotes();
      }
    });
    const cancelBtn = container.createEl("button", {
      text: styleClass === "sidebar" ? "\u2715" : "\u2715 \u9000\u51FA",
      // 改为更明确的"退出"
      cls: `cancel-selection-btn-${btnPrefix}`,
      title: "\u9000\u51FA\u6279\u91CF\u6A21\u5F0F\u5E76\u6E05\u7A7A\u6240\u6709\u9009\u62E9"
      // 改为更明确的提示
    });
    cancelBtn.addEventListener("click", () => {
      this.clearSelection();
    });
  }
  // 提取全选功能
  /**
   * 获取当前可见的所有项（笔记或闪卡）
   */
  getVisibleItems() {
    console.log("\u{1F50D} [getVisibleItems] ========== \u5F00\u59CB\u6267\u884C ==========");
    console.log("\u{1F50D} [getVisibleItems] viewType:", this.viewType);
    console.log("\u{1F50D} [getVisibleItems] displayMode:", this.displayMode);
    console.log("\u{1F50D} [getVisibleItems] groupMode:", this.groupMode);
    console.log("\u{1F50D} [getVisibleItems] selectedFile:", this.selectedFile);
    if (this.viewType === "cards") {
      const allFlashcards = this.plugin.flashcardManager.getAllFlashcards();
      if (this.displayMode === "sidebar") {
        if (!this.selectedFile) {
          return { cards: allFlashcards };
        }
        const filteredCards = allFlashcards.filter((card) => {
          if (this.groupMode === "file") {
            return card.sourceFile === this.selectedFile;
          } else if (this.groupMode === "annotation") {
            const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
            const hasAnnotation = this.selectedFile === "\u6709\u6279\u6CE8";
            return hasAnnotation ? unit && !!unit.annotationId : !unit || !unit.annotationId;
          } else if (this.groupMode === "tag") {
            const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
            return unit && unit.metadata.tags.includes(this.selectedFile) || card.tags && card.tags.includes(this.selectedFile) || card.deck === this.selectedFile;
          } else if (this.groupMode === "date") {
            return this.formatDate(new Date(card.metadata.createdAt)) === this.selectedFile;
          }
          return false;
        });
        return { cards: filteredCards };
      } else {
        if (!this.selectedFile) {
          return { cards: [] };
        }
        const filteredCards = allFlashcards.filter((card) => {
          if (this.groupMode === "file") {
            return card.sourceFile === this.selectedFile;
          } else if (this.groupMode === "annotation") {
            const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
            const hasAnnotation = this.selectedFile === "\u6709\u6279\u6CE8";
            return hasAnnotation ? unit && !!unit.annotationId : !unit || !unit.annotationId;
          } else if (this.groupMode === "tag") {
            const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
            return unit && unit.metadata.tags.includes(this.selectedFile) || card.tags && card.tags.includes(this.selectedFile) || card.deck === this.selectedFile || this.selectedFile === "\u672A\u5206\u7C7B" && (!card.tags || card.tags.length === 0) && !card.deck && (!unit || !unit.metadata.tags || unit.metadata.tags.length === 0);
          } else if (this.groupMode === "date") {
            return this.formatDate(new Date(card.metadata.createdAt)) === this.selectedFile;
          }
          return false;
        });
        return { cards: filteredCards };
      }
    } else {
      let units = this.getFilteredUnits();
      console.log("\u{1F50D} [getVisibleItems] \u521D\u59CB getFilteredUnits() \u8FD4\u56DE\u6570\u91CF:", units.length);
      if (this.displayMode === "sidebar") {
        console.log("\u{1F50D} [getVisibleItems] \u8FDB\u5165\u4FA7\u8FB9\u680F\u6A21\u5F0F\u5904\u7406");
        if (!this.selectedFile) {
          console.log("\u{1F50D} [getVisibleItems] selectedFile \u4E0D\u5B58\u5728\uFF0C\u8FD4\u56DE\u7A7A\u6570\u7EC4");
          return { units: [] };
        }
        console.log("\u{1F50D} [getVisibleItems] selectedFile \u5B58\u5728:", this.selectedFile);
        units = units.filter((unit) => unit.source.file === this.selectedFile);
        console.log("\u{1F50D} [getVisibleItems] \u6309\u5F53\u524D\u6587\u4EF6\u8FC7\u6EE4\u540E\u6570\u91CF:", units.length);
        if (this.groupMode === "annotation") {
          const hasAnnotation = units.some((u) => !!u.annotationId);
          console.log("\u{1F50D} [getVisibleItems] annotation \u6A21\u5F0F\uFF0C\u4FDD\u6301\u5F53\u524D\u6587\u4EF6\u6240\u6709\u7B14\u8BB0");
        }
        console.log("\u{1F50D} [getVisibleItems] \u4FA7\u8FB9\u680F\u6700\u7EC8\u8FD4\u56DE units \u6570\u91CF:", units.length);
        return { units };
      } else {
        console.log("\u{1F50D} [getVisibleItems] \u8FDB\u5165\u4E3B\u754C\u9762\u6A21\u5F0F\u5904\u7406");
        if (!this.selectedFile) {
          console.log("\u{1F50D} [getVisibleItems] selectedFile \u4E0D\u5B58\u5728\uFF0C\u8FD4\u56DE\u7A7A\u6570\u7EC4");
          return { units: [] };
        }
        if (this.groupMode === "file") {
          units = units.filter((unit) => unit.source.file === this.selectedFile);
        } else if (this.groupMode === "annotation") {
          const hasAnnotation = this.selectedFile === "\u6709\u6279\u6CE8";
          units = units.filter((unit) => hasAnnotation ? !!unit.annotationId : !unit.annotationId);
        } else if (this.groupMode === "tag") {
          units = units.filter((unit) => unit.metadata.tags.includes(this.selectedFile));
        } else if (this.groupMode === "date") {
          units = units.filter(
            (unit) => this.formatDate(new Date(unit.metadata.createdAt)) === this.selectedFile
          );
        }
        console.log("\u{1F50D} [getVisibleItems] \u4E3B\u754C\u9762\u6700\u7EC8\u8FD4\u56DE units \u6570\u91CF:", units.length);
        return { units };
      }
    }
  }
  /**
   * 添加样式
   */
  addStyles() {
    if (document.getElementById("learning-overview-styles")) {
      return;
    }
    const styleEl = document.createElement("style");
    styleEl.id = "learning-overview-styles";
    if (document.getElementById("learning-overview-styles")) {
      return;
    }
    styleEl.textContent = `
      /* ==================== \u5168\u5C40\u5BB9\u5668 ==================== */
      .learning-overview-container {
        height: 100%;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        background: var(--background-primary);
      }

      /* ==================== \u4FA7\u8FB9\u680F\u6A21\u5F0F\u6837\u5F0F ==================== */
      .learning-overview-container[data-mode="sidebar"] {
        padding: 0;
      }

      .sidebar-toolbar {
        padding: 12px;
        border-bottom: 1px solid var(--background-modifier-border);
        background: var(--background-primary);
        flex-shrink: 0;
          position: relative; /* \u{1F527} \u6DFB\u52A0 */
  z-index: 10;
      }

      .search-container {
        margin-bottom: 10px;
      }

      .search-input {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        font-size: 13px;
        background: var(--background-primary);
        color: var(--text-normal);
      }

      .search-input:focus {
        outline: none;
        border-color: var(--interactive-accent);
      }

      .filter-chips {
        display: flex;
        gap: 6px;
        margin-bottom: 10px;
      }

      .filter-chip {
        flex: 1;
        text-align: center;
        padding: 6px 8px;
        font-size: 11px;
        border-radius: 12px;
        background: var(--background-secondary);
        cursor: pointer;
        transition: all 0.2s;
        border: 1px solid transparent;
      }

      .filter-chip:hover {
        background: var(--background-modifier-hover);
      }

      .filter-chip.active {
        background: var(--interactive-accent);
        color: var(--text-on-accent);
        font-weight: 600;
        border-color: var(--interactive-accent);
      }

      .group-switcher {
        display: flex;
        gap: 6px;
        margin-bottom: 10px;
      }

      .group-btn {
        flex: 1;
        text-align: center;
        padding: 6px;
        font-size: 16px;
        border-radius: 6px;
        background: var(--background-secondary);
        cursor: pointer;
        transition: all 0.2s;
        border: 1px solid transparent;
      }

      .group-btn:hover {
        background: var(--background-modifier-hover);
      }

      .group-btn.active {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        transform: scale(1.05);
      }
/* \u5728 .stats-badge \u6837\u5F0F\u4E4B\u524D\u6DFB\u52A0 */
.stats-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 3px;
}
/* \u5934\u90E8\u64CD\u4F5C\u6309\u94AE\u5BB9\u5668 */
.header-actions {
  display: flex;
  gap: 8px;
  align-items: center;
}

/* \u6279\u91CF\u64CD\u4F5C\u6309\u94AE\u6837\u5F0F - \u4FA7\u8FB9\u680F */
.batch-create-cards-btn-sidebar,
.batch-delete-btn-sidebar {
  padding: 6px 6px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 11px;
  font-weight: 500;
  white-space: nowrap;
}

.batch-create-cards-btn-sidebar:hover {
  background: var(--interactive-accent);
  color: white;
  border-color: var(--interactive-accent);
}

.batch-delete-btn-sidebar:hover {
  background: var(--color-red);
  color: white;
  border-color: var(--color-red);
}

/* \u6279\u91CF\u64CD\u4F5C\u6309\u94AE\u6837\u5F0F - \u4E3B\u754C\u9762 */
.batch-create-cards-btn-header,
.batch-delete-btn-header {
  padding: 8px 16px;
  font-size: 13px;
  border-radius: 6px;
  border: 1px solid var(--background-modifier-border);
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-weight: 500;
  white-space: nowrap;
}

.batch-create-cards-btn-header:hover {
  background: var(--interactive-accent);
  color: white;
  border-color: var(--interactive-accent);
}

.batch-delete-btn-header:hover {
  background: var(--color-red);
  color: white;
  border-color: var(--color-red);
}
.select-all-btn-sidebar {
  padding: 6px 12px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 11px;
  font-weight: 500;
  flex-shrink: 0; /* \u9632\u6B62\u6309\u94AE\u88AB\u538B\u7F29 */
}

.select-all-btn-sidebar:hover {
  background: var(--interactive-accent);
  border-color: var(--interactive-accent);
  color: white;
}

.stats-badge {
  text-align: center;
  font-size: 11px;
  color: var(--text-muted);
  padding: 4px;
  flex: 1; /* \u5360\u636E\u5269\u4F59\u7A7A\u95F4 */
}
      .stats-badge {
        text-align: center;
        font-size: 11px;
        color: var(--text-muted);
        padding: 4px;
      }
.select-all-btn-header {
  padding: 8px 16px;
  font-size: 13px;
  border-radius: 6px;
  background: var(--background-secondary);
  color: var(--text-normal);
  border: 1px solid var(--background-modifier-border);
  cursor: pointer;
  transition: all 0.2s;
  font-weight: 500;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.select-all-btn-header:hover {
  background: var(--interactive-accent);
  color: var(--text-on-accent);
  border-color: var(--interactive-accent);
  transform: translateY(-1px);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

/* \u5B8C\u6210\u72B6\u6001\u7684\u9AD8\u4EAE\u6837\u5F0F */
.select-all-btn-header.completed {
  background: var(--interactive-accent);
  border-color: var(--interactive-accent);
  color: var(--text-on-accent);
}

.select-all-btn-header.completed:hover {
  opacity: 0.9;
}

.select-all-btn-sidebar {
  padding: 6px 12px;

  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 11px;
  font-weight: 500;
  margin-right: auto; /* \u9760\u5DE6\u5BF9\u9F50 */
}

.select-all-btn-sidebar:hover {
  background: var(--interactive-accent);
  border-color: var(--interactive-accent);
  color: white;
}
  /* \u53D6\u6D88\u9009\u62E9\u6309\u94AE - \u4FA7\u8FB9\u680F */
.cancel-selection-btn-sidebar {
  padding: 6px 12px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-size: 11px;
  font-weight: 500;
  white-space: nowrap;
  color: var(--text-muted);
}

.cancel-selection-btn-sidebar:hover {
  background: var(--background-modifier-hover);
  color: var(--text-normal);
  border-color: var(--text-muted);
}

/* \u53D6\u6D88\u9009\u62E9\u6309\u94AE - \u4E3B\u754C\u9762 */
.cancel-selection-btn-header {
  padding: 8px 16px;
  font-size: 13px;
  border-radius: 6px;
  border: 1px solid var(--background-modifier-border);
  background: var(--background-secondary);
  cursor: pointer;
  transition: all 0.2s;
  font-weight: 500;
  white-space: nowrap;
  color: var(--text-muted);
}

.cancel-selection-btn-header:hover {
  background: var(--background-modifier-hover);
  color: var(--text-normal);
  border-color: var(--text-muted);
}

/* \u5B8C\u6210\u72B6\u6001\u7684\u5168\u9009\u6309\u94AE\u9AD8\u4EAE */
.select-all-btn-sidebar.completed,
.select-all-btn-header.completed {
  background: var(--interactive-accent);
  color: var(--text-on-accent);
  border-color: var(--interactive-accent);
}
      .batch-actions {
        display: flex;
        gap: 6px;
        margin-top: 10px;
        flex-wrap: wrap;
      }

      .batch-mode-btn,
      .select-all-btn,
      .batch-delete-btn,
      .batch-create-cards-btn {
        padding: 6px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-secondary);
        cursor: pointer;
        transition: all 0.2s;
        font-size: 11px;
        font-weight: 500;
      }

      .select-all-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .batch-mode-btn:hover {
        background: var(--background-modifier-hover);
      }

      .batch-delete-btn:hover {
        background: var(--color-red);
        border-color: var(--color-red);
        color: white;
      }

      .batch-create-cards-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .batch-checkbox {
        margin-right: 8px;
        cursor: pointer;
      }

      .sidebar-content-list {
        flex: 1;
        overflow-y: auto;
        padding: 8px;
          position: relative; /* \u{1F527} \u6DFB\u52A0 */
  z-index: 1; /* \u{1F527} \u6DFB\u52A0 */
      }

      .content-group {
        margin-bottom: 16px;
      }

      .group-header {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 6px 8px;
        background: var(--background-secondary);
        border-radius: 6px;
        margin-bottom: 6px;
        font-size: 12px;
        font-weight: 600;
        position: sticky;
        top: 0;
        z-index: 10;
      }

      .group-icon {
        font-size: 14px;
      }

      .group-title {
        flex: 1;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .group-count {
        padding: 2px 6px;
        background: var(--background-modifier-border);
        border-radius: 10px;
        font-size: 10px;
      }

      .compact-card {
        display: flex;
        gap: 8px;
        padding: 10px;
        margin: 4px 0;
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        transition: all 0.2s;
      }

      .compact-card:hover {
        border-color: var(--interactive-accent);
        background: var(--background-primary-alt);
        transform: translateX(2px);
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      }

/* \u57FA\u7840\u6307\u793A\u5668\u6837\u5F0F */
.card-indicator {
  width: 4px;
  border-radius: 2px;
  background: var(--background-modifier-border);
  flex-shrink: 0;
  transition: all 0.2s;
}


/* \u{1F527} \u6CA1\u6709\u6279\u6CE8\u65F6\uFF1A\u4E0A\u534A\u900F\u660E\uFF0C\u4E0B\u534A\u663E\u793A\u7C7B\u578B\u989C\u8272 */
.card-indicator.type-qa {
  background: linear-gradient(
    to bottom,
    transparent 0%,
    transparent 50%,
    #10b981 50%,
    #10b981 100%
  );
}

.card-indicator.type-cloze {
  background: linear-gradient(
    to bottom,
    transparent 0%,
    transparent 50%,
        #9333ea 50%,
    #9333ea 100%

  );
}

.card-indicator.type-text {
  background: linear-gradient(
    to bottom,
    transparent 0%,
    transparent 50%,
    #6b7280 50%,
    #6b7280 100%
  );
}

/* \u{1F527} \u6709\u6279\u6CE8\u65F6\uFF1A\u4E0A\u534A\u84DD\u8272\uFF0C\u4E0B\u534A\u7C7B\u578B\u989C\u8272 */
.card-indicator.type-qa.has-annotation {
  background: linear-gradient(
    to bottom, 
    #3b82f6 0%, 
    #3b82f6 50%, 
    #10b981 50%,
    #10b981 100%
  );
}

.card-indicator.type-cloze.has-annotation {
  background: linear-gradient(
    to bottom, 
    #3b82f6 0%, 
    #3b82f6 50%, 
        #9333ea 50%,
    #9333ea 100%

  );
}

.card-indicator.type-text.has-annotation {
  background: linear-gradient(
    to bottom, 
    #3b82f6 0%, 
    #3b82f6 50%, 
    #6b7280 50%,
    #6b7280 100%
  );
}

/* \u{1F527} \u9ED8\u8BA4\u6837\u5F0F\uFF08\u6CA1\u6709\u7C7B\u578B\u65F6\u7684\u515C\u5E95\uFF09 */
.card-indicator:not(.type-qa):not(.type-cloze):not(.type-text) {
  background: linear-gradient(
    to bottom,
    transparent 0%,
    transparent 50%,
    var(--background-modifier-border) 50%,
    var(--background-modifier-border) 100%
  );
}

.card-indicator.has-annotation:not(.type-qa):not(.type-cloze):not(.type-text) {
  background: linear-gradient(
    to bottom,
    #3b82f6 0%,
    #3b82f6 50%,
    var(--background-modifier-border) 50%,
    var(--background-modifier-border) 100%
  );
}



.type-indicator {
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
}

.type-indicator.type-qa {
  background: rgba(16, 185, 129, 0.2);

  color: #10b981;
}

.type-indicator.type-cloze {
  background: rgba(147, 51, 234, 0.2);
    color: #9333ea;

}

.type-indicator.type-text {
  background: rgba(107, 114, 128, 0.2);
  color: #6b7280;
}

      .card-content {
        flex: 1;
        min-width: 0;
      }

      .card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 6px;
      }

      .annotation-btn {
        cursor: pointer;
        font-size: 14px;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.2s;
      }

      .annotation-btn:hover {
        background: var(--background-modifier-hover);
        transform: scale(1.1);
      }

      .card-tools {
        display: flex;
        gap: 4px;
      }

      .tool-btn {
        cursor: pointer;
        font-size: 14px;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.2s;
      }

      .tool-btn:hover {
        background: var(--background-modifier-hover);
      }

      .flashcard-btn:hover {
        background: rgba(251, 191, 36, 0.2);
      }

      .more-btn:hover {
        background: var(--background-modifier-hover);
      }

.note-text {
  font-size: 12px;
  line-height: 1.6;
  color: var(--text-normal);
  cursor: pointer;
  word-wrap: break-word;
  word-break: break-word;
  white-space: normal;
  overflow-wrap: break-word;
  margin-bottom: 6px;
}

.note-text:hover {
  color: var(--interactive-accent);
}

/* \u{1F527} QA \u6837\u5F0F */
.qa-question {
  font-weight: 500;
  color: var(--text-normal);
}

.qa-separator {
  color: var(--text-muted);
  margin: 0 4px;
}

.qa-answer {
  color: var(--text-accent);
  font-style: italic;
}

/* \u{1F527} Cloze \u9AD8\u4EAE\u6837\u5F0F */
.cloze-highlight {

  color: #f59e0b;
  font-weight: 500;
  padding: 1px 3px;
  border-radius: 3px;
}

      .annotation-preview {
        font-size: 11px;
        line-height: 1.4;
        color: var(--text-muted);
        padding: 6px 8px;
        background: var(--background-secondary);
        border-radius: 4px;
        margin-top: 6px;
        border-left: 3px solid var(--interactive-accent);
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .annotation-preview:hover {
        background: var(--background-modifier-hover);
      }

      .card-meta {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        gap: 6px;
        margin-top: 8px;
      }
      
      /* ==================== \u5185\u8054\u6279\u6CE8\u7F16\u8F91\u5668 ==================== */
      .inline-annotation-editor {
        margin-top: 8px;
        padding: 0;
        background: transparent;
        animation: slideDown 0.15s ease-out;
      }
      
      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-5px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      .inline-annotation-textarea {
        width: 100%;
        min-height: 80px;
        padding: 12px 14px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-primary-alt);
        color: var(--text-normal);
        font-family: var(--font-text);
        font-size: 13px;
        line-height: 1.5;
        resize: vertical;
        transition: all 0.2s;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }
      
      .inline-annotation-textarea:focus {
        outline: none;
        border-color: var(--interactive-accent);
        background: var(--background-primary);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      }
      
      .inline-annotation-textarea::placeholder {
        color: var(--text-faint);
        font-style: italic;
      }
      
      .inline-annotation-hint {
        margin-top: 6px;
        font-size: 11px;
        color: var(--text-faint);
        font-style: italic;
        text-align: left;
      }
      
      /* \u7F51\u683C\u5361\u7247\u7684\u5185\u8054\u7F16\u8F91\u5668\u6837\u5F0F */
      .grid-card .inline-annotation-editor {
        margin-top: 8px;
      }
      
      .grid-card .inline-annotation-textarea {
        min-height: 100px;
        font-size: 14px;
        padding: 8px 14px;
      }
      
      .grid-card .inline-annotation-hint {
        font-size: 12px;
        margin-top: 8px;
      }

      .tag {
        padding: 2px 6px;
        background: var(--tag-background);
        color: var(--tag-color);
        border-radius: 4px;
        font-size: 10px;
        font-weight: 500;
      }

      .tag-more {
        padding: 2px 6px;
        background: var(--background-modifier-border);
        color: var(--text-muted);
        border-radius: 4px;
        font-size: 10px;
      }

      .badge {
        padding: 2px 6px;
        background: var(--background-modifier-border);
        border-radius: 4px;
        font-size: 10px;
      }

      /* ==================== \u4E3B\u754C\u9762\u6A21\u5F0F\u6837\u5F0F ==================== */
      .main-layout {
        display: grid;
        grid-template-columns: 250px 1fr;
        gap: 1px;
        height: 100%;
        background: var(--background-modifier-border);
      }

      .left-panel {
        background: var(--background-primary);
        overflow-y: auto;
        display: flex;
        flex-direction: column;
      }

      .right-panel {
        background: var(--background-primary);
        overflow-y: auto;
        padding: 8px;
      }

      .fixed-entries {
        padding: 12px;
        border-bottom: 1px solid var(--background-modifier-border);
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .entry-btn {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 12px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 13px;
        font-weight: 500;
        background: var(--background-secondary);
      }

      .entry-btn:hover {
        background: var(--background-modifier-hover);
        transform: translateX(2px);
      }

      .entry-btn.active {
        background: var(--interactive-accent);
        color: var(--text-on-accent);
      }

      .main-toolbar {
        padding: 12px;
        border-bottom: 1px solid var(--background-modifier-border);
      }

      .batch-actions-main {
        display: flex;
        gap: 8px;
        margin-top: 10px;
        flex-wrap: wrap;
      }

      .batch-actions-main .batch-mode-btn,
      .batch-actions-main .select-all-btn,
      .batch-actions-main .batch-delete-btn,
      .batch-actions-main .batch-create-cards-btn {
        padding: 8px 16px;
        font-size: 12px;
      }

      .batch-actions-main .select-all-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .search-input-main {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        font-size: 13px;
        background: var(--background-primary);
        color: var(--text-normal);
        margin-bottom: 10px;
      }

      .search-input-main:focus {
        outline: none;
        border-color: var(--interactive-accent);
      }

      .group-switcher-main {
        display: flex;
        gap: 6px;
      }

      .group-btn-main {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 4px;
        padding: 8px 10px;
        font-size: 12px;
        border-radius: 6px;
        background: var(--background-secondary);
        cursor: pointer;
        transition: all 0.2s;
        font-weight: 500;
      }

      .group-btn-main:hover {
        background: var(--background-modifier-hover);
        transform: translateY(-1px);
      }

      .group-btn-main.active {
        background: var(--interactive-accent);
        color: var(--text-on-accent);
      }

      .panel-title {
        font-size: 13px;
        font-weight: 600;
        padding: 12px;
        margin:0;
        color: var(--text-muted);
      }

      .file-list {
        padding: 0 8px 8px 8px;
        flex: 1;
        overflow-y: auto;
      }

      .file-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 10px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
        margin-bottom: 4px;
      }

      .file-item:hover {
        background: var(--background-modifier-hover);
      }

      .file-item.selected {
        background: var(--interactive-accent);
        color: var(--text-on-accent);
      }

      .file-icon {
        font-size: 14px;
      }

      .file-name {
        flex: 1;
        font-size: 13px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .file-count {
        font-size: 11px;
        padding: 2px 6px;
        background: rgba(255,255,255,0.1);
        border-radius: 10px;
      }

      .file-item.selected .file-count {
        background: rgba(255,255,255,0.2);
      }

      .empty-right-panel {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100%;
        color: var(--text-muted);
      }

      .empty-icon {
        font-size: 48px;
        margin-bottom: 16px;
      }

      .empty-text {
        font-size: 14px;
      }

      .grid-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 12px;
        border-bottom: 2px solid var(--background-modifier-border);
      }

      .grid-header h2 {
        font-size: 18px;
        font-weight: 600;
        margin: 0;
      }

      .open-file-btn {
        padding: 8px 16px;
        font-size: 13px;
        border-radius: 6px;
        background: var(--interactive-accent);
        color: var(--text-on-accent);
        border: none;
        cursor: pointer;
        transition: all 0.2s;
        font-weight: 500;
      }

      .open-file-btn:hover {
        opacity: 0.9;
        transform: translateY(-1px);
      }

      .content-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
        gap: 8px;
      }

      .grid-card {
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 8px;
        padding: 8px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      }

      .grid-card:hover {
        border-color: var(--interactive-accent);
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        transform: translateY(-2px);
      }

      .grid-card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 12px;
        padding-bottom: 8px;
        border-bottom: 1px solid var(--background-modifier-border);
      }

      .doc-name {
        font-size: 11px;
        color: var(--text-muted);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .grid-card-tools {
        display: flex;
        gap: 4px;
      }

      .tool-btn-grid {
        cursor: pointer;
        font-size: 16px;
        padding: 4px 6px;
        border-radius: 4px;
        transition: all 0.2s;
      }

      .tool-btn-grid:hover {
        background: var(--background-modifier-hover);
        transform: scale(1.1);
      }

      .grid-card-content {
        margin-bottom: 12px;
      }

.grid-note-text {
  font-size: 13px;  /* \u{1F527} \u4ECE 14px \u6539\u4E3A 13px */
  line-height: 1.6;
  color: var(--text-normal);
  cursor: pointer;
  margin-bottom: 10px;
  word-wrap: break-word;  /* \u{1F527} \u5141\u8BB8\u6362\u884C */
  word-break: break-word;
  white-space: normal;
  overflow-wrap: break-word;
}

.grid-note-text:hover {
  color: var(--interactive-accent);
}


      .grid-annotation {
        font-size: 12px;
        line-height: 1.5;
        color: var(--text-muted);
        padding: 10px;
        background: var(--background-secondary);
        border-radius: 4px;
        border-left: 3px solid var(--interactive-accent);
        margin-top: 10px;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .grid-annotation:hover {
        background: var(--background-modifier-hover);
      }

      .grid-annotation strong {
        color: var(--text-normal);
      }

      .grid-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin-top: 10px;
      }

      .tag-grid {
        padding: 4px 8px;
        background: var(--tag-background);
        color: var(--tag-color);
        border-radius: 4px;
        font-size: 11px;
        font-weight: 500;
      }

      .grid-card-meta {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding-top: 10px;
        border-top: 1px solid var(--background-modifier-border);
        font-size: 11px;
      }

      .line-info {
        color: var(--text-muted);
      }

      .badge-grid {
        padding: 3px 8px;
        background: var(--background-secondary);
        border-radius: 4px;
      }

      .cards-header {
        margin-bottom: 20px;
      }

      .cards-header h2 {
        font-size: 18px;
        font-weight: 600;
      }

      .cards-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 8px;
      }

      .flashcard-item {
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 8px;
        padding: 16px;
        transition: all 0.2s;
      }

      .flashcard-item:hover {
        border-color: var(--interactive-accent);
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      }

      .flashcard-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }

      .flashcard-delete-btn {
        padding: 4px 8px;
        border: none;
        background: transparent;
        cursor: pointer;
        font-size: 14px;
        border-radius: 4px;
        transition: all 0.2s;
        opacity: 0.6;
      }

      .flashcard-delete-btn:hover {
        opacity: 1;
        background: var(--background-modifier-hover);
        color: var(--color-red);
      }

      .flashcard-type {
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
      }

      .flashcard-type.qa {
              background: rgba(16, 185, 129, 0.2);

        color: #10b981;
      }

      .flashcard-type.cloze {

               background: rgba(147, 51, 234, 0.2);
         color: #9333ea;
      }

      .flashcard-date {
        font-size: 11px;
        color: var(--text-muted);
      }

      .flashcard-body {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .flashcard-question,
      .flashcard-answer {
        font-size: 13px;
        line-height: 1.5;
      }

      .flashcard-question strong,
      .flashcard-answer strong {
        color: var(--text-muted);
        font-size: 11px;
        display: block;
        margin-bottom: 4px;
      }

.empty-state {
  text-align: center;
  padding: 40px 20px;
  color: var(--text-muted);
  font-size: 14px;
  pointer-events: none; /* \u{1F527} \u5173\u952E\uFF01\u7A7A\u72B6\u6001\u4E0D\u62E6\u622A\u70B9\u51FB */
  position: relative;
  z-index: 1; /* \u{1F527} \u786E\u4FDD\u5728\u5DE5\u5177\u680F\u4E0B\u65B9 */
}

      .empty-hint {
        text-align: center;
        padding: 20px;
        color: var(--text-muted);
        font-size: 13px;
      }

      /* ==================== \u54CD\u5E94\u5F0F ==================== */
      @media (max-width: 768px) {
        .main-layout {
          grid-template-columns: 1fr;
        }

        .left-panel {
          display: none;
        }

        .content-grid,
        .cards-grid {
          grid-template-columns: 1fr;
        }
          .batch-btn {
          font-size: 14px;
          position: relative;
        }

      .batch-btn:hover {
        background: rgba(59, 130, 246, 0.2);
        transform: scale(1.05);
      }

      /* \u6279\u91CF\u6A21\u5F0F\u6FC0\u6D3B\u72B6\u6001 */
      .compact-card.batch-mode .batch-btn,
      .grid-card.batch-mode .batch-btn {
        background: rgba(59, 130, 246, 0.3);
        color: var(--interactive-accent);
      }

      .batch-actions {
  display: flex;
  gap: 6px;
  margin-top: 10px;
  flex-wrap: wrap;
  padding: 8px;
  background: var(--background-secondary-alt);
  border-radius: 6px;
  animation: slideDown 0.2s ease;
}
/* \u6279\u91CF\u64CD\u4F5C\u6309\u94AE\u7981\u7528\u72B6\u6001\uFF08\u6570\u91CF\u4E3A0\u65F6\u7684\u89C6\u89C9\u53CD\u9988\uFF09 */
.batch-create-cards-btn-sidebar:has-text("(0)"),
.batch-delete-btn-sidebar:has-text("(0)"),
.batch-create-cards-btn-header:has-text("(0)"),
.batch-delete-btn-header:has-text("(0)") {
  opacity: 0.5;
  cursor: not-allowed;
}
@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
    
  }
}
      }
    `;
    document.head.appendChild(styleEl);
  }
  async onClose() {
    if (this.searchDebounceTimer !== null) {
      window.clearTimeout(this.searchDebounceTimer);
    }
  }
};
var AnnotationModal = class extends import_obsidian5.Modal {
  constructor(app, defaultValue, onSubmit) {
    super(app);
    this.result = null;
    this.defaultValue = defaultValue;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h3", { text: "\u270F\uFE0F \u7F16\u8F91\u6279\u6CE8" });
    const textarea = contentEl.createEl("textarea", {
      cls: "annotation-textarea",
      placeholder: "\u8F93\u5165\u4F60\u7684\u6279\u6CE8..."
    });
    textarea.value = this.defaultValue;
    textarea.style.width = "100%";
    textarea.style.minHeight = "120px";
    textarea.style.padding = "10px";
    textarea.style.border = "1px solid var(--background-modifier-border)";
    textarea.style.borderRadius = "6px";
    textarea.style.fontFamily = "var(--font-interface)";
    textarea.style.fontSize = "14px";
    textarea.style.resize = "vertical";
    textarea.style.marginTop = "12px";
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    buttonContainer.style.display = "flex";
    buttonContainer.style.gap = "8px";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.marginTop = "16px";
    const cancelBtn = buttonContainer.createEl("button", { text: "\u53D6\u6D88" });
    cancelBtn.style.padding = "8px 16px";
    cancelBtn.style.borderRadius = "6px";
    cancelBtn.addEventListener("click", () => {
      this.close();
    });
    const saveBtn = buttonContainer.createEl("button", {
      text: "\u4FDD\u5B58",
      cls: "mod-cta"
    });
    saveBtn.style.padding = "8px 16px";
    saveBtn.style.borderRadius = "6px";
    saveBtn.addEventListener("click", () => {
      this.result = textarea.value;
      this.close();
    });
    textarea.focus();
    textarea.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && (e.ctrlKey || e.metaKey)) {
        this.result = textarea.value;
        this.close();
      }
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    if (this.result !== null) {
      this.onSubmit(this.result);
    }
  }
};
var FlashcardCreationModal = class extends import_obsidian5.Modal {
  constructor(app, unit, type, onSubmit) {
    super(app);
    this.unit = unit;
    this.type = type;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h3", {
      text: `\u{1F0CF} \u521B\u5EFA${this.type === "qa" ? "Q&A" : "\u586B\u7A7A"}\u95EA\u5361`
    });
    const sourceDiv = contentEl.createDiv({ cls: "flashcard-source" });
    sourceDiv.style.padding = "10px";
    sourceDiv.style.background = "var(--background-secondary)";
    sourceDiv.style.borderRadius = "6px";
    sourceDiv.style.marginTop = "12px";
    sourceDiv.style.marginBottom = "12px";
    sourceDiv.style.fontSize = "13px";
    sourceDiv.style.color = "var(--text-muted)";
    sourceDiv.innerHTML = `<strong>\u539F\u6587\uFF1A</strong>${this.unit.content}`;
    contentEl.createEl("label", {
      text: this.type === "qa" ? "\u95EE\u9898" : "\u586B\u7A7A\u9898\u5E72",
      cls: "flashcard-label"
    }).style.display = "block";
    const questionInput = contentEl.createEl("textarea", {
      cls: "flashcard-input",
      placeholder: this.type === "qa" ? "\u8F93\u5165\u95EE\u9898..." : "\u7528 {{c1::...}} \u6807\u8BB0\u9700\u8981\u586B\u7A7A\u7684\u5185\u5BB9"
    });
    questionInput.style.width = "100%";
    questionInput.style.minHeight = "80px";
    questionInput.style.padding = "10px";
    questionInput.style.border = "1px solid var(--background-modifier-border)";
    questionInput.style.borderRadius = "6px";
    questionInput.style.marginTop = "8px";
    questionInput.style.marginBottom = "12px";
    questionInput.style.fontSize = "14px";
    questionInput.style.resize = "vertical";
    contentEl.createEl("label", {
      text: "\u7B54\u6848",
      cls: "flashcard-label"
    }).style.display = "block";
    const answerInput = contentEl.createEl("textarea", {
      cls: "flashcard-input",
      placeholder: "\u8F93\u5165\u7B54\u6848..."
    });
    answerInput.value = this.unit.content;
    answerInput.style.width = "100%";
    answerInput.style.minHeight = "80px";
    answerInput.style.padding = "10px";
    answerInput.style.border = "1px solid var(--background-modifier-border)";
    answerInput.style.borderRadius = "6px";
    answerInput.style.marginTop = "8px";
    answerInput.style.fontSize = "14px";
    answerInput.style.resize = "vertical";
    const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
    buttonContainer.style.display = "flex";
    buttonContainer.style.gap = "8px";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.marginTop = "16px";
    const cancelBtn = buttonContainer.createEl("button", { text: "\u53D6\u6D88" });
    cancelBtn.style.padding = "8px 16px";
    cancelBtn.style.borderRadius = "6px";
    cancelBtn.addEventListener("click", () => {
      this.close();
    });
    const createBtn = buttonContainer.createEl("button", {
      text: "\u521B\u5EFA",
      cls: "mod-cta"
    });
    createBtn.style.padding = "8px 16px";
    createBtn.style.borderRadius = "6px";
    createBtn.addEventListener("click", () => {
      const question = questionInput.value.trim();
      const answer = answerInput.value.trim();
      if (!question || !answer) {
        new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u586B\u5199\u5B8C\u6574\u4FE1\u606F");
        return;
      }
      this.onSubmit(question, answer);
      this.close();
    });
    questionInput.focus();
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var FlashcardEditModal = class extends import_obsidian5.Modal {
  constructor(app, card, onSubmit) {
    super(app);
    this.card = card;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h3", { text: "\u270F\uFE0F \u7F16\u8F91\u95EA\u5361" });
    contentEl.createEl("label", { text: "\u95EE\u9898" }).style.display = "block";
    const questionInput = contentEl.createEl("textarea", {
      cls: "flashcard-input"
    });
    questionInput.value = this.card.front;
    questionInput.style.width = "100%";
    questionInput.style.minHeight = "80px";
    questionInput.style.padding = "10px";
    questionInput.style.marginTop = "8px";
    questionInput.style.marginBottom = "12px";
    contentEl.createEl("label", { text: "\u7B54\u6848" }).style.display = "block";
    const answerInput = contentEl.createEl("textarea", {
      cls: "flashcard-input"
    });
    answerInput.value = Array.isArray(this.card.back) ? this.card.back.join(", ") : this.card.back;
    answerInput.style.width = "100%";
    answerInput.style.minHeight = "80px";
    answerInput.style.padding = "10px";
    answerInput.style.marginTop = "8px";
    const buttonContainer = contentEl.createDiv();
    buttonContainer.style.display = "flex";
    buttonContainer.style.gap = "8px";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.marginTop = "16px";
    const cancelBtn = buttonContainer.createEl("button", { text: "\u53D6\u6D88" });
    cancelBtn.addEventListener("click", () => this.close());
    const saveBtn = buttonContainer.createEl("button", {
      text: "\u4FDD\u5B58",
      cls: "mod-cta"
    });
    saveBtn.addEventListener("click", () => {
      const question = questionInput.value.trim();
      const answer = answerInput.value.trim();
      if (!question || !answer) {
        new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u586B\u5199\u5B8C\u6574\u4FE1\u606F");
        return;
      }
      this.onSubmit(question, answer);
      this.close();
    });
    questionInput.focus();
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/ui/ReviewView.ts
var import_obsidian6 = require("obsidian");

// src/core/CardScheduler.ts
var CardScheduler = class {
  /**
   * 计算下次复习时间（基于 SM-2 算法）
   */
  schedule(card, ease, timeSpent, userAnswer) {
    const oldScheduling = { ...card.scheduling };
    const newScheduling = { ...card.scheduling };
    const now = Date.now();
    card.stats.totalReviews++;
    card.stats.lastReview = now;
    const totalTime = card.stats.averageTime * (card.stats.totalReviews - 1) + timeSpent;
    card.stats.averageTime = totalTime / card.stats.totalReviews;
    switch (ease) {
      case "again":
        this.scheduleAgain(newScheduling, card.stats);
        break;
      case "hard":
        this.scheduleHard(newScheduling, card.stats);
        break;
      case "good":
        this.scheduleGood(newScheduling, card.stats);
        break;
      case "easy":
        this.scheduleEasy(newScheduling, card.stats);
        break;
    }
    card.scheduling = newScheduling;
    card.metadata.updatedAt = now;
    const reviewLog = {
      flashcardId: card.id,
      timestamp: now,
      response: {
        userAnswer,
        timeSpent,
        ease
      },
      schedulingChange: {
        oldInterval: oldScheduling.interval,
        newInterval: newScheduling.interval,
        oldEase: oldScheduling.ease,
        newEase: newScheduling.ease
      }
    };
    return { updatedCard: card, reviewLog };
  }
  /**
   * Again - 完全忘记
   */
  scheduleAgain(scheduling, stats) {
    scheduling.interval = 1;
    scheduling.ease = Math.max(1.3, scheduling.ease - 0.2);
    scheduling.due = Date.now() + scheduling.interval * 60 * 1e3;
    scheduling.lapses++;
    scheduling.reps++;
    if (scheduling.state === "new") {
      scheduling.state = "learning";
    } else {
      scheduling.state = "relearning";
    }
    stats.difficulty = Math.min(1, stats.difficulty + 0.1);
  }
  /**
   * Hard - 困难
   */
  scheduleHard(scheduling, stats) {
    scheduling.reps++;
    if (scheduling.state === "new" || scheduling.state === "learning") {
      scheduling.interval = 10;
      scheduling.due = Date.now() + 10 * 60 * 1e3;
      scheduling.state = "learning";
    } else {
      scheduling.interval = Math.max(1, scheduling.interval * 1.2);
      scheduling.ease = Math.max(1.3, scheduling.ease - 0.15);
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    }
    stats.difficulty = Math.min(1, stats.difficulty + 0.05);
    stats.correctCount += 0.5;
  }
  /**
   * Good - 正确
   */
  scheduleGood(scheduling, stats) {
    scheduling.reps++;
    stats.correctCount++;
    if (scheduling.state === "new") {
      scheduling.interval = 1;
      scheduling.due = Date.now() + 1 * 24 * 60 * 60 * 1e3;
      scheduling.state = "learning";
    } else if (scheduling.state === "learning") {
      if (scheduling.interval < 1) {
        scheduling.interval = 1;
      } else {
        scheduling.interval = 3;
      }
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    } else {
      scheduling.interval = scheduling.interval * scheduling.ease;
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.ease = scheduling.ease + 0.1;
      scheduling.state = "review";
    }
    stats.difficulty = Math.max(0, stats.difficulty - 0.05);
  }
  /**
   * Easy - 非常简单
   */
  scheduleEasy(scheduling, stats) {
    scheduling.reps++;
    stats.correctCount++;
    if (scheduling.state === "new") {
      scheduling.interval = 4;
      scheduling.due = Date.now() + 4 * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    } else if (scheduling.state === "learning") {
      scheduling.interval = 7;
      scheduling.due = Date.now() + 7 * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    } else {
      scheduling.interval = scheduling.interval * (scheduling.ease + 0.3);
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.ease = scheduling.ease + 0.15;
      scheduling.state = "review";
    }
    stats.difficulty = Math.max(0, stats.difficulty - 0.1);
  }
  /**
   * 评估用户答案（用于输入答案模式）
   */
  evaluateAnswer(correctAnswer, userAnswer) {
    if (Array.isArray(correctAnswer) && Array.isArray(userAnswer)) {
      let correctCount = 0;
      const total = correctAnswer.length;
      for (let i = 0; i < total; i++) {
        const similarity2 = this.calculateSimilarity(
          this.normalize(correctAnswer[i]),
          this.normalize(userAnswer[i] || "")
        );
        if (similarity2 >= 0.9)
          correctCount++;
        else if (similarity2 >= 0.6)
          correctCount += 0.5;
      }
      const overallSimilarity = correctCount / total;
      if (overallSimilarity >= 0.9) {
        return { correctness: "correct", similarity: overallSimilarity };
      } else if (overallSimilarity >= 0.6) {
        return { correctness: "partial", similarity: overallSimilarity };
      } else {
        return { correctness: "wrong", similarity: overallSimilarity };
      }
    }
    const correct = this.normalize(correctAnswer);
    const user = this.normalize(userAnswer);
    if (user.length === 0) {
      return { correctness: "wrong", similarity: 0 };
    }
    const lengthRatio = Math.min(user.length, correct.length) / Math.max(user.length, correct.length);
    if (lengthRatio < 0.3) {
      return { correctness: "wrong", similarity: 0 };
    }
    const similarity = this.calculateSimilarity(correct, user);
    if (similarity >= 0.9) {
      return { correctness: "correct", similarity };
    } else if (similarity >= 0.7) {
      return { correctness: "partial", similarity };
    } else {
      return { correctness: "wrong", similarity };
    }
  }
  /**
   * 标准化文本
   */
  normalize(text) {
    return text.toLowerCase().trim().replace(/\s+/g, " ").replace(/\n+/g, " ").replace(/[，。！？、；：""''（）《》【】\.,!?;:"'()\[\]{}]/g, "");
  }
  /**
   * 计算相似度（Levenshtein 距离）
   */
  calculateSimilarity(str1, str2) {
    if (str1 === str2)
      return 1;
    if (str1.length === 0 || str2.length === 0)
      return 0;
    const matrix = [];
    for (let i = 0; i <= str2.length; i++) {
      matrix[i] = [i];
    }
    for (let j = 0; j <= str1.length; j++) {
      matrix[0][j] = j;
    }
    for (let i = 1; i <= str2.length; i++) {
      for (let j = 1; j <= str1.length; j++) {
        if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
          matrix[i][j] = matrix[i - 1][j - 1];
        } else {
          matrix[i][j] = Math.min(
            matrix[i - 1][j - 1] + 1,
            // 替换
            matrix[i][j - 1] + 1,
            // 插入
            matrix[i - 1][j] + 1
            // 删除
          );
        }
      }
    }
    const distance = matrix[str2.length][str1.length];
    const maxLength = Math.max(str1.length, str2.length);
    return 1 - distance / maxLength;
  }
  /**
   * 根据相似度建议难度
   */
  suggestEase(similarity) {
    if (similarity >= 0.9)
      return "easy";
    if (similarity >= 0.8)
      return "good";
    if (similarity >= 0.5)
      return "hard";
    return "again";
  }
};

// src/ui/ReviewView.ts
var VIEW_TYPE_REVIEW = "learning-system-review";
var ReviewView = class extends import_obsidian6.ItemView {
  // QA 卡片的用户答案
  constructor(leaf, plugin) {
    super(leaf);
    this.dueCards = [];
    this.currentCardIndex = 0;
    this.currentCard = null;
    this.showAnswer = false;
    this.startTime = 0;
    this.userAnswers = [];
    this.userAnswer = "";
    // 快捷键
    this.keyboardHandler = (e) => {
      const target = e.target;
      const isInInput = target.tagName === "INPUT" || target.tagName === "TEXTAREA";
      if (e.key === "Tab") {
        e.preventDefault();
        if (e.shiftKey) {
          if (this.showAnswer) {
            this.showAnswer = false;
            this.render();
          }
        } else {
          if (!this.showAnswer) {
            this.showAnswer = true;
            this.render();
          } else {
            this.submitReview("good");
          }
        }
        return;
      }
      if (this.showAnswer) {
        const ratingMap = {
          "1": "again",
          "2": "hard",
          "3": "good",
          "4": "easy"
        };
        if (ratingMap[e.key]) {
          e.preventDefault();
          this.submitReview(ratingMap[e.key]);
        }
      }
    };
    this.plugin = plugin;
    this.scheduler = new CardScheduler();
  }
  getViewType() {
    return VIEW_TYPE_REVIEW;
  }
  getDisplayText() {
    return "Flashcard Review";
  }
  getIcon() {
    return "layers";
  }
  async onOpen() {
    await this.loadDueCards();
    this.render();
    this.addStyles();
    this.registerKeyboardHandlers();
  }
  async onClose() {
  }
  async loadDueCards() {
    this.dueCards = this.plugin.flashcardManager.getDueCards();
    this.currentCardIndex = 0;
    this.showAnswer = false;
    document.removeEventListener("keydown", this.keyboardHandler);
  }
  render() {
    var _a;
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("review-container");
    if (this.dueCards.length === 0) {
      this.renderNoDueCards(container);
      return;
    }
    const newCard = this.dueCards[this.currentCardIndex];
    if (((_a = this.currentCard) == null ? void 0 : _a.id) !== (newCard == null ? void 0 : newCard.id)) {
      this.userAnswers = [];
      this.userAnswer = "";
      this.showAnswer = false;
      this.startTime = Date.now();
    }
    this.currentCard = newCard;
    if (!this.showAnswer && this.startTime === 0) {
      this.startTime = Date.now();
    }
    this.renderProgress(container);
    const cardArea = container.createDiv({ cls: "card-area" });
    this.renderTopActions(cardArea);
    if (this.showAnswer) {
      this.renderAnswer(cardArea);
    } else {
      this.renderQuestion(cardArea);
    }
  }
  renderTopActions(container) {
    const actionsBar = container.createDiv({ cls: "top-actions-bar" });
    const jumpBtn = actionsBar.createEl("button", {
      cls: "top-action-btn jump-icon-btn",
      attr: { "aria-label": "Jump to Source" }
    });
    jumpBtn.innerHTML = "\u2197";
    jumpBtn.addEventListener("click", () => this.jumpToSource());
    const moreBtn = actionsBar.createEl("button", {
      cls: "top-action-btn more-btn",
      attr: { "aria-label": "More actions" }
    });
    moreBtn.innerHTML = "\u22EF";
    const dropdown = actionsBar.createDiv({ cls: "more-dropdown" });
    dropdown.style.display = "none";
    const editOption = dropdown.createEl("div", {
      cls: "dropdown-item"
    });
    editOption.innerHTML = "\u270F\uFE0F Edit Card";
    editOption.addEventListener("click", () => {
      if (!this.currentCard)
        return;
      this.editCurrentFlashcard();
      dropdown.style.display = "none";
    });
    const deleteOption = dropdown.createEl("div", {
      cls: "dropdown-item delete-item"
    });
    deleteOption.innerHTML = "\u{1F5D1}\uFE0F Delete Card";
    deleteOption.addEventListener("click", async () => {
      if (!this.currentCard)
        return;
      if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u5F20\u95EA\u5361\u5417\uFF1F\u5220\u9664\u540E\u5C06\u4ECE\u590D\u4E60\u961F\u5217\u4E2D\u79FB\u9664\u3002")) {
        await this.deleteFlashcard(this.currentCard.id);
      }
      dropdown.style.display = "none";
    });
    moreBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      dropdown.style.display = dropdown.style.display === "none" ? "block" : "none";
    });
    document.addEventListener("click", () => {
      dropdown.style.display = "none";
    });
    dropdown.addEventListener("click", (e) => {
      e.stopPropagation();
    });
  }
  renderNoDueCards(container) {
    const emptyState = container.createDiv({ cls: "empty-state" });
    emptyState.createEl("h2", { text: "\u{1F389} All Done!" });
    emptyState.createEl("p", { text: "No cards due for review right now." });
    const stats = this.plugin.flashcardManager.getStats();
    const statsDiv = emptyState.createDiv({ cls: "stats-summary" });
    statsDiv.createEl("p", { text: `Total cards: ${stats.total}` });
    statsDiv.createEl("p", { text: `New cards: ${stats.new}` });
    statsDiv.createEl("p", { text: `Reviewed today: ${stats.reviewedToday}` });
    const closeBtn = emptyState.createEl("button", {
      text: "Close Review",
      cls: "mod-cta"
    });
    closeBtn.addEventListener("click", () => {
      this.leaf.detach();
    });
  }
  renderProgress(container) {
    const progressBar = container.createDiv({ cls: "progress-bar" });
    const stats = progressBar.createDiv({ cls: "progress-stats" });
    stats.createSpan({
      text: `${this.currentCardIndex + 1} / ${this.dueCards.length}`,
      cls: "progress-text"
    });
    const barContainer = progressBar.createDiv({ cls: "bar-container" });
    const bar = barContainer.createDiv({ cls: "bar" });
    const progress = (this.currentCardIndex + 1) / this.dueCards.length * 100;
    bar.style.width = `${progress}%`;
  }
  renderQuestion(container) {
    if (!this.currentCard)
      return;
    const cardInfo = container.createDiv({ cls: "card-info" });
    cardInfo.createSpan({
      text: this.currentCard.type === "qa" ? "\u{1F4DD} Q&A" : "\u270F\uFE0F Cloze",
      cls: "card-type"
    });
    cardInfo.createSpan({
      text: `Deck: ${this.currentCard.deck}`,
      cls: "card-deck"
    });
    const questionArea = container.createDiv({ cls: "question-area" });
    questionArea.createEl("h3", { text: "Question" });
    const questionText = questionArea.createDiv({ cls: "question-text" });
    questionText.textContent = this.currentCard.front;
    if (this.currentCard.type === "cloze" && this.currentCard.cloze) {
      const inputArea = container.createDiv({ cls: "cloze-input-area" });
      inputArea.createEl("h4", { text: "Fill in the blanks:" });
      if (this.userAnswers.length < this.currentCard.cloze.deletions.length) {
        this.userAnswers = new Array(this.currentCard.cloze.deletions.length).fill("");
      }
      this.currentCard.cloze.deletions.forEach((deletion, index) => {
        const inputGroup = inputArea.createDiv({ cls: "input-group" });
        inputGroup.createSpan({ text: `${index + 1}. ` });
        const input = inputGroup.createEl("input", {
          type: "text",
          placeholder: "Your answer...",
          cls: "cloze-input",
          value: this.userAnswers[index] || ""
        });
        input.addEventListener("input", (e) => {
          this.userAnswers[index] = e.target.value;
        });
        if (index === 0) {
          setTimeout(() => input.focus(), 50);
        }
      });
    }
    if (this.currentCard.type === "qa") {
      const inputArea = container.createDiv({ cls: "qa-input-area" });
      inputArea.createEl("h4", { text: "Your Answer:" });
      const textarea = inputArea.createEl("textarea", {
        placeholder: "Type your answer here...",
        cls: "qa-input",
        value: this.userAnswer
      });
      textarea.addEventListener("input", (e) => {
        this.userAnswer = e.target.value;
      });
      setTimeout(() => textarea.focus(), 50);
    }
    const buttonArea = container.createDiv({ cls: "button-area" });
    const showAnswerBtn = buttonArea.createEl("button", {
      text: "Show Answer",
      cls: "mod-cta show-answer-btn",
      attr: { title: "Press Enter or Tab" }
    });
    showAnswerBtn.addEventListener("click", () => {
      this.showAnswer = true;
      this.render();
    });
  }
  renderAnswer(container) {
    if (!this.currentCard)
      return;
    const cardInfo = container.createDiv({ cls: "card-info" });
    cardInfo.createSpan({
      text: this.currentCard.type === "qa" ? "\u{1F4DD} Q&A" : "\u270F\uFE0F Cloze",
      cls: "card-type"
    });
    cardInfo.createSpan({
      text: `Deck: ${this.currentCard.deck}`,
      cls: "card-deck"
    });
    const questionReview = container.createDiv({ cls: "question-review" });
    questionReview.createEl("h4", { text: "Question:" });
    questionReview.createDiv({
      text: this.currentCard.front,
      cls: "review-text"
    });
    const answerArea = container.createDiv({ cls: "answer-area" });
    if (this.currentCard.type === "cloze" && this.currentCard.cloze) {
      const fullText = answerArea.createDiv({ cls: "full-text" });
      fullText.textContent = this.currentCard.cloze.original;
      if (this.userAnswers.length > 0) {
        const comparison = answerArea.createDiv({ cls: "answer-comparison" });
        comparison.createEl("h4", { text: "Your Answers:" });
        this.currentCard.cloze.deletions.forEach((deletion, index) => {
          const item = comparison.createDiv({ cls: "comparison-item" });
          item.createSpan({ text: `${index + 1}. ` });
          const userAnswer = this.userAnswers[index] || "";
          const evaluation = this.scheduler.evaluateAnswer(
            deletion.answer,
            userAnswer
          );
          const userSpan = item.createEl("span", {
            text: userAnswer || "(empty)",
            cls: `user-answer ${evaluation.correctness}`
          });
          userSpan.classList.add("user-answer", evaluation.correctness);
          item.createSpan({ text: " \u2192 " });
          item.createEl("span", {
            text: deletion.answer,
            cls: "correct-answer"
          });
          if (evaluation.correctness === "partial") {
            item.createEl("small", {
              text: ` (${Math.round(evaluation.similarity * 100)}% match)`,
              cls: "similarity-info"
            });
          }
        });
      }
    } else {
      const correctAnswer = this.currentCard.back;
      const comparison = answerArea.createDiv({ cls: "answer-comparison qa-comparison" });
      const evaluation = this.userAnswer.trim() ? this.scheduler.evaluateAnswer(correctAnswer, this.userAnswer) : null;
      const columnsContainer = comparison.createDiv({ cls: "qa-columns-container" });
      const correctColumn = columnsContainer.createDiv({ cls: "qa-column" });
      correctColumn.createEl("h4", { text: "Correct Answer:", cls: "column-label" });
      const correctAnswerDiv = correctColumn.createDiv({ cls: "comparison-item" });
      correctAnswerDiv.createEl("div", {
        text: correctAnswer,
        cls: "correct-answer qa-correct-answer"
      });
      const userColumn = columnsContainer.createDiv({ cls: "qa-column" });
      userColumn.createEl("h4", { text: "Your Answer:", cls: "column-label" });
      const userAnswerDiv = userColumn.createDiv({ cls: "comparison-item" });
      const userAnswerElement = userAnswerDiv.createEl("div", {
        text: this.userAnswer.trim() || "(no answer provided)",
        cls: "qa-user-answer"
      });
      if (evaluation) {
        userAnswerElement.classList.add("user-answer", evaluation.correctness);
        if (evaluation.correctness === "partial") {
          const similarityInfo = comparison.createEl("div", {
            cls: "similarity-info qa-similarity"
          });
          similarityInfo.textContent = `Similarity: ${Math.round(evaluation.similarity * 100)}%`;
        }
      } else {
        userAnswerElement.classList.add("no-answer");
      }
    }
    const ratingArea = container.createDiv({ cls: "rating-area" });
    const buttonGroup = ratingArea.createDiv({ cls: "rating-buttons" });
    const ratings = [
      { ease: "again", label: "Again\n < 1 min", color: "red", key: "1" },
      { ease: "hard", label: "Hard\n < 10 min", color: "orange", key: "2" },
      { ease: "good", label: "Good\n 1 day", color: "blue", key: "3" },
      { ease: "easy", label: "Easy\n 4 days", color: "green", key: "4" }
    ];
    ratings.forEach(({ ease, label, color, key }) => {
      const btn = buttonGroup.createEl("button", {
        cls: `rating-btn rating-${color}`,
        attr: { title: `Press ${key}` }
      });
      const lines = label.split("\n");
      btn.createEl("div", { text: lines[0], cls: "rating-label" });
      btn.createEl("div", { text: lines[1], cls: "rating-interval" });
      btn.createEl("div", { text: `(${key})`, cls: "rating-hotkey" });
      btn.addEventListener("click", () => this.submitReview(ease));
    });
  }
  async submitReview(ease) {
    if (!this.currentCard)
      return;
    const timeSpent = (Date.now() - this.startTime) / 1e3;
    const userAnswer = this.currentCard.type === "cloze" ? this.userAnswers : this.currentCard.type === "qa" ? this.userAnswer : void 0;
    const { updatedCard, reviewLog } = this.scheduler.schedule(
      this.currentCard,
      ease,
      timeSpent,
      userAnswer
    );
    await this.plugin.flashcardManager.updateCard(updatedCard);
    await this.plugin.flashcardManager.logReview({
      id: `log-${Date.now()}`,
      ...reviewLog
    });
    this.currentCardIndex++;
    this.showAnswer = false;
    this.userAnswers = [];
    this.userAnswer = "";
    if (this.currentCardIndex >= this.dueCards.length) {
      new import_obsidian6.Notice(`\u2705 Review session complete! Reviewed ${this.dueCards.length} cards.`);
      await this.loadDueCards();
    }
    this.render();
  }
  async jumpToSource() {
    if (!this.currentCard)
      return;
    const file = this.app.vault.getAbstractFileByPath(this.currentCard.sourceFile);
    if (!(file instanceof import_obsidian6.TFile)) {
      new import_obsidian6.Notice("Source file not found");
      return;
    }
    const contentUnit = this.plugin.dataManager.getContentUnit(
      this.currentCard.sourceContentId
    );
    if (!contentUnit) {
      new import_obsidian6.Notice("Source content not found");
      return;
    }
    const leaf = this.app.workspace.getLeaf(false);
    await leaf.openFile(file);
    setTimeout(() => {
      const view = this.app.workspace.getActiveViewOfType(import_obsidian6.ItemView);
      if (view) {
        const editor = view.editor;
        if (editor) {
          editor.setCursor({ line: contentUnit.source.position.line, ch: 0 });
          editor.scrollIntoView({
            from: { line: contentUnit.source.position.line, ch: 0 },
            to: { line: contentUnit.source.position.line, ch: 0 }
          }, true);
        }
      }
    }, 100);
  }
  async deleteFlashcard(cardId) {
    var _a;
    try {
      await this.plugin.flashcardManager.deleteCard(cardId);
      new import_obsidian6.Notice("\u{1F5D1}\uFE0F \u95EA\u5361\u5DF2\u5220\u9664");
      this.dueCards = this.dueCards.filter((card) => card.id !== cardId);
      if (((_a = this.currentCard) == null ? void 0 : _a.id) === cardId) {
        if (this.currentCardIndex >= this.dueCards.length) {
          this.currentCardIndex = Math.max(0, this.dueCards.length - 1);
        }
        this.currentCard = null;
      }
      await this.loadDueCards();
      this.render();
    } catch (error) {
      console.error("Error deleting flashcard:", error);
      new import_obsidian6.Notice("\u274C \u5220\u9664\u95EA\u5361\u5931\u8D25");
    }
  }
  editCurrentFlashcard() {
    if (!this.currentCard)
      return;
    const modal = new FlashcardEditModal(
      this.app,
      this.currentCard,
      async (question, answer) => {
        try {
          const updatedCard = {
            ...this.currentCard,
            front: question,
            back: this.currentCard.type === "cloze" ? [answer] : answer,
            metadata: {
              ...this.currentCard.metadata,
              updatedAt: Date.now()
            }
          };
          await this.plugin.flashcardManager.updateCard(updatedCard);
          new import_obsidian6.Notice("\u2705 \u95EA\u5361\u5DF2\u66F4\u65B0");
          this.currentCard = updatedCard;
          this.render();
        } catch (error) {
          console.error("Error updating flashcard:", error);
          new import_obsidian6.Notice("\u274C \u66F4\u65B0\u95EA\u5361\u5931\u8D25");
        }
      }
    );
    modal.open();
  }
  registerKeyboardHandlers() {
    document.addEventListener("keydown", this.keyboardHandler);
  }
  addStyles() {
    const styleEl = document.createElement("style");
    styleEl.textContent = `
    .review-container {
        padding: 16px;
        max-width: 800px;
        margin: 0 auto;
      }

      /* \u7A7A\u72B6\u6001 */
      .empty-state {
        text-align: center;
        padding: 40px 20px;
      }

      .empty-state h2 {
        font-size: 1.8em;
        margin-bottom: 8px;
      }

      .stats-summary {
        margin: 20px 0;
        padding: 16px;
        background: var(--background-secondary);
        border-radius: 8px;
        text-align: left;
        max-width: 300px;
        margin-left: auto;
        margin-right: auto;
      }

      /* \u8FDB\u5EA6\u6761 */
      .progress-bar {
        margin-bottom: 20px;
      }

      .progress-stats {
        display: flex;
        justify-content: space-between;
        margin-bottom: 8px;
      }

      .progress-text {
        font-weight: 600;
        font-size: 1em;
      }

      .remaining-text {
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .bar-container {
        height: 6px;
        background: var(--background-secondary);
        border-radius: 3px;
        overflow: hidden;
      }

      .bar {
        height: 100%;
        background: var(--interactive-accent);
        transition: width 0.3s ease;
      }

      /* \u5361\u7247\u533A\u57DF */
      .card-area {
        background: var(--background-primary);
        border: 2px solid var(--background-modifier-border);
        border-radius: 10px;
        padding: 20px;
        min-height: 350px;
        position: relative;
      }

      /* \u53F3\u4E0A\u89D2\u64CD\u4F5C\u680F */
      .top-actions-bar {
        position: absolute;
        top: 16px;
        right: 16px;
        display: flex;
        gap: 6px;
        z-index: 10;
      }

      .top-action-btn {
        width: 32px;
        height: 32px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-primary);
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        color: var(--text-normal);
        padding: 0;
      }

      .top-action-btn:hover {
        background: var(--background-modifier-hover);
        border-color: var(--interactive-accent);
      }

      .jump-icon-btn {
        font-weight: bold;
      }

      .more-btn {
        font-weight: bold;
        letter-spacing: 1px;
      }

      /* \u4E0B\u62C9\u83DC\u5355 */
      .more-dropdown {
        position: absolute;
        top: 38px;
        right: 0;
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        min-width: 150px;
        z-index: 100;
      }

      .dropdown-item {
        padding: 8px 14px;
        cursor: pointer;
        transition: background 0.2s;
        white-space: nowrap;
        font-size: 0.9em;
      }

      .dropdown-item:hover {
        background: var(--background-modifier-hover);
      }

      .dropdown-item:first-child {
        border-radius: 6px 6px 0 0;
      }

      .dropdown-item:last-child {
        border-radius: 0 0 6px 6px;
      }

      .delete-item:hover {
        background: var(--background-modifier-error-hover);
        color: var(--color-red);
      }

      .card-info {
        display: flex;
        gap: 10px;
        margin-bottom: 16px;
        padding-bottom: 12px;
        border-bottom: 1px solid var(--background-modifier-border);
        padding-right: 80px;
      }

      .card-type, .card-deck {
        padding: 3px 10px;
        background: var(--background-secondary);
        border-radius: 10px;
        font-size: 0.85em;
      }

      /* \u95EE\u9898\u533A\u57DF */
      .question-area, .answer-area {
        margin: 16px 0;
      }

      .question-area h3, .answer-area h3 {
        margin-bottom: 10px;
        color: var(--text-muted);
        font-size: 1em;
      }

      .question-text, .answer-text {
        font-size: 1.2em;
        line-height: 1.5;
        padding: 14px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      /* \u5B8C\u5F62\u586B\u7A7A\u8F93\u5165 */
      .cloze-input-area {
        margin: 16px 0;
      }

      .cloze-input-area h4 {
        margin-bottom: 10px;
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .input-group {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 8px;
      }

      .cloze-input {
        flex: 1;
        padding: 8px 12px;
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-primary);
        font-size: 0.95em;
      }

      .cloze-input:focus {
        border-color: var(--interactive-accent);
        outline: none;
      }

      /* QA \u5361\u7247\u8F93\u5165 */
      .qa-input-area {
        margin: 16px 0;
      }

      .qa-input-area h4 {
        margin-bottom: 10px;
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .qa-input {
        width: 100%;
        min-height: 100px;
        padding: 10px 12px;
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-primary);
        font-size: 0.95em;
        font-family: inherit;
        resize: vertical;
        line-height: 1.5;
      }

      .qa-input:focus {
        border-color: var(--interactive-accent);
        outline: none;
      }

      /* \u7B54\u6848\u5BF9\u6BD4 */
      .question-review {
        margin-bottom: 12px;
        padding: 10px;
        background: var(--background-secondary-alt);
        border-radius: 6px;
      }

      .question-review h4 {
        margin: 0 0 6px 0;
        color: var(--text-muted);
        font-size: 0.85em;
      }

      .review-text {
        color: var(--text-muted);
        font-size: 0.95em;
      }

      .full-text {
        font-size: 1.1em;
        line-height: 1.5;
        padding: 12px;
        background: var(--background-secondary);
        border-radius: 6px;
        margin-bottom: 12px;
      }

      .answer-comparison {
        padding: 10px;
        background: var(--background-secondary-alt);
        border-radius: 6px;
        margin-top: 12px;
      }

      .answer-comparison h4 {
        margin: 0 0 8px 0;
        color: var(--text-muted);
        font-size: 0.85em;
      }

      .comparison-item {
        padding: 8px;
        margin-bottom: 6px;
        background: var(--background-primary);
        border-radius: 4px;
      }

      .user-answer {
        font-weight: 500;
        padding: 2px 6px;
        border-radius: 3px;
      }

      .user-answer.correct {
        background: var(--background-modifier-success, #4caf50) !important;
        color: var(--text-on-accent, white) !important;
      }

      .user-answer.partial {
        background: #FFC000 !important;
        color: white !important;
      }

      .user-answer.wrong {
        background: var(--background-modifier-error, #f44336) !important;
        color: white !important;
      }

      .correct-answer {
        color: var(--text-accent);
        font-weight: 500;
      }

      .similarity-info {
        color: var(--text-muted);
        font-style: italic;
        font-size: 0.85em;
      }

      /* QA \u5361\u7247\u5BF9\u6BD4\u6837\u5F0F */
      .qa-comparison {
        margin-top: 12px;
      }


.qa-columns-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-bottom: 12px;
}

.qa-column {
  display: flex;
  flex-direction: column;
}

.column-label {
  margin: 0 0 8px 0 !important;
  color: var(--text-muted);
  font-size: 0.85em;
}

.qa-user-answer,
.qa-correct-answer {
  padding: 12px;
  border-radius: 6px;
  white-space: pre-wrap;
  word-break: break-word;
  font-size: 0.95em;
  line-height: 1.5;
  min-height: 60px;
}

.qa-correct-answer {
  background: var(--background-secondary);
}

/* \u76F8\u4F3C\u5EA6\u4FE1\u606F\u653E\u5728\u4E24\u5217\u4E0B\u65B9 */
.qa-similarity {
  margin-top: 8px;
  padding: 6px;
  background: var(--background-secondary);
  border-radius: 4px;
  text-align: center;
  font-size: 0.85em;
  grid-column: 1 / -1;
}




      .qa-user-answer.correct,
      .user-answer.correct.qa-user-answer,
      div.qa-user-answer.correct,
      div.user-answer.correct.qa-user-answer,
      .comparison-item .qa-user-answer.correct,
      .comparison-item .user-answer.correct.qa-user-answer {
        background: var(--background-modifier-success, #4caf50) !important;
        background-color: #4caf50 !important;
        color: var(--text-on-accent, white) !important;
        color: white !important;
      }

      .qa-user-answer.partial,
      .user-answer.partial.qa-user-answer,
      div.qa-user-answer.partial,
      div.user-answer.partial.qa-user-answer,
      .comparison-item .qa-user-answer.partial,
      .comparison-item .user-answer.partial.qa-user-answer {
        background: #FFC000 !important;
        background-color: #FFC000 !important;
        color: white !important;
      }

      .qa-user-answer.wrong,
      .user-answer.wrong.qa-user-answer,
      div.qa-user-answer.wrong,
      div.user-answer.wrong.qa-user-answer,
      .comparison-item .qa-user-answer.wrong,
      .comparison-item .user-answer.wrong.qa-user-answer {
        background: var(--background-modifier-error, #f44336) !important;
        background-color: #f44336 !important;
        color: white !important;
      }


      .correct-answer-label {
        margin-top: 12px !important;
        margin-bottom: 6px !important;
      }

      .qa-similarity {
        margin-top: 8px;
        padding: 6px;
        background: var(--background-secondary);
        border-radius: 4px;
        text-align: center;
        font-size: 0.85em;
      }

      /* \u6309\u94AE\u533A\u57DF */
      .button-area {
        display: flex;
        gap: 12px;
        justify-content: center;
        margin-top: 20px;
      }

      .show-answer-btn {
        padding: 10px 32px;
        font-size: 1em;
      }

      /* \u8BC4\u7EA7\u533A\u57DF */
      .rating-area {
        margin: 15px 0 10px 0;
        text-align: center;
      }

      .rating-area h4 {
        margin-bottom: 12px;
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .rating-buttons {
        display: flex;
        gap: 20px;
        justify-content: center;
        margin-bottom: 0;
      }

      .rating-btn {
        flex: 1;
        max-width: 120px;
        hight:100px;
        padding: 14px 8px;
        border: 2px solid var(--background-modifier-border);
        border-radius: 8px;
        background: var(--background-primary);
        cursor: pointer;
        transition: all 0.2s;
      }

      .rating-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      }

      .rating-red:hover { 
        border-color: var(--color-red);
        background: var(--background-modifier-error-hover);
      }

      .rating-orange:hover { 
        border-color: #FFC000;
        background: rgba(255, 192, 0, 0.1);
      }

      .rating-blue:hover { 
        border-color: var(--interactive-accent);
        background: var(--background-modifier-hover);
      }

      .rating-green:hover { 
        border-color: var(--color-green);
        background: var(--background-modifier-success-hover);
      }

      .rating-label {
        font-weight: 600;
        font-size: 1em;
        margin-bottom: 4px;
      }

      .rating-interval {
        font-size: 0.85em;
        color: var(--text-muted);
      }
        /* \u5FEB\u6377\u952E\u63D0\u793A */
.rating-hotkey {
  font-size: 0.75em;
  color: var(--text-muted);
  margin-top: 4px;
  opacity: 0.7;
}

.rating-btn:hover .rating-hotkey {
  opacity: 1;
  color: var(--text-normal);
}

/* Show Answer \u6309\u94AE tooltip */
.show-answer-btn {
  position: relative;
}
  .cloze-input:focus,
.qa-input:focus {
  border-color: var(--interactive-accent);
  outline: none;
  box-shadow: 0 0 0 2px var(--interactive-accent-hover);
}
  /* \u65E0\u7B54\u6848\u72B6\u6001 */
.qa-user-answer.no-answer {
  background: var(--background-secondary);
  color: var(--text-muted);
  font-style: italic;
  border: 2px dashed var(--background-modifier-border);
}
    `;
    document.head.appendChild(styleEl);
  }
};

// src/ui/StatsView.ts
var import_obsidian7 = require("obsidian");

// src/core/AnalyticsEngine.ts
var AnalyticsEngine = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * 获取每日统计
   */
  getDailyStats(days = 30) {
    const logs = this.plugin.flashcardManager["reviewLogs"] || [];
    const stats = /* @__PURE__ */ new Map();
    for (let i = 0; i < days; i++) {
      const date = new Date();
      date.setDate(date.getDate() - i);
      const dateKey = date.toISOString().split("T")[0];
      stats.set(dateKey, {
        date: dateKey,
        reviewed: 0,
        correctCount: 0,
        correctRate: 0,
        timeSpent: 0,
        newCards: 0
      });
    }
    logs.forEach((log) => {
      const date = new Date(log.timestamp).toISOString().split("T")[0];
      const stat = stats.get(date);
      if (!stat)
        return;
      stat.reviewed++;
      stat.timeSpent += log.response.timeSpent;
      if (log.response.ease === "good" || log.response.ease === "easy") {
        stat.correctCount++;
      } else if (log.response.ease === "hard") {
        stat.correctCount += 0.5;
      }
      const card = this.plugin.flashcardManager.getFlashcard(log.flashcardId);
      if (card && card.stats.totalReviews === 1) {
        stat.newCards++;
      }
    });
    stats.forEach((stat) => {
      if (stat.reviewed > 0) {
        stat.correctRate = stat.correctCount / stat.reviewed;
      }
    });
    return Array.from(stats.values()).sort(
      (a, b) => a.date.localeCompare(b.date)
    );
  }
  /**
   * 获取周统计
   */
  getWeeklyStats() {
    const now = new Date();
    const thisWeekStart = new Date(now);
    thisWeekStart.setDate(now.getDate() - now.getDay());
    thisWeekStart.setHours(0, 0, 0, 0);
    const lastWeekStart = new Date(thisWeekStart);
    lastWeekStart.setDate(lastWeekStart.getDate() - 7);
    const thisWeek = this.calculateWeekStats(thisWeekStart);
    const lastWeek = this.calculateWeekStats(lastWeekStart);
    return { thisWeek, lastWeek };
  }
  calculateWeekStats(startDate) {
    const endDate = new Date(startDate);
    endDate.setDate(endDate.getDate() + 7);
    const logs = (this.plugin.flashcardManager["reviewLogs"] || []).filter(
      (log) => log.timestamp >= startDate.getTime() && log.timestamp < endDate.getTime()
    );
    let totalCorrect = 0;
    let totalTimeSpent = 0;
    logs.forEach((log) => {
      totalTimeSpent += log.response.timeSpent;
      if (log.response.ease === "good" || log.response.ease === "easy") {
        totalCorrect++;
      } else if (log.response.ease === "hard") {
        totalCorrect += 0.5;
      }
    });
    const averageCorrectRate = logs.length > 0 ? totalCorrect / logs.length : 0;
    const streak = this.calculateStreak();
    return {
      startDate: startDate.toISOString().split("T")[0],
      endDate: endDate.toISOString().split("T")[0],
      totalReviews: logs.length,
      averageCorrectRate,
      totalTimeSpent,
      streak
    };
  }
  /**
   * 计算连续学习天数
   */
  calculateStreak() {
    const logs = this.plugin.flashcardManager["reviewLogs"] || [];
    if (logs.length === 0)
      return 0;
    const dates = /* @__PURE__ */ new Set();
    logs.forEach((log) => {
      const date = new Date(log.timestamp).toISOString().split("T")[0];
      dates.add(date);
    });
    const sortedDates = Array.from(dates).sort().reverse();
    let streak = 0;
    const today = new Date().toISOString().split("T")[0];
    for (let i = 0; i < sortedDates.length; i++) {
      const expectedDate = new Date();
      expectedDate.setDate(expectedDate.getDate() - i);
      const expected = expectedDate.toISOString().split("T")[0];
      if (sortedDates[i] === expected) {
        streak++;
      } else {
        break;
      }
    }
    return streak;
  }
  /**
   * 获取卡组统计
   */
  getDeckStats() {
    const cards = this.plugin.flashcardManager.getAllFlashcards();
    const deckMap = /* @__PURE__ */ new Map();
    cards.forEach((card) => {
      if (!deckMap.has(card.deck)) {
        deckMap.set(card.deck, []);
      }
      deckMap.get(card.deck).push(card);
    });
    const stats = [];
    const now = Date.now();
    deckMap.forEach((deckCards, deckName) => {
      const dueCards = deckCards.filter((c) => c.scheduling.due <= now).length;
      const newCards = deckCards.filter((c) => c.scheduling.state === "new").length;
      const totalCorrect = deckCards.reduce(
        (sum, c) => sum + c.stats.correctCount,
        0
      );
      const totalReviews = deckCards.reduce(
        (sum, c) => sum + c.stats.totalReviews,
        0
      );
      const correctRate = totalReviews > 0 ? totalCorrect / totalReviews : 0;
      const totalInterval = deckCards.reduce(
        (sum, c) => sum + c.scheduling.interval,
        0
      );
      const averageInterval = deckCards.length > 0 ? totalInterval / deckCards.length : 0;
      stats.push({
        deckName,
        totalCards: deckCards.length,
        dueCards,
        newCards,
        correctRate,
        averageInterval
      });
    });
    return stats.sort((a, b) => b.totalCards - a.totalCards);
  }
  /**
   * 获取难点卡片
   */
  getDifficultCards(limit = 10) {
    const cards = this.plugin.flashcardManager.getAllFlashcards();
    const logs = this.plugin.flashcardManager["reviewLogs"] || [];
    const difficultCards = [];
    cards.forEach((card) => {
      const cardLogs = logs.filter((log) => log.flashcardId === card.id);
      const errorCount = cardLogs.filter(
        (log) => log.response.ease === "again"
      ).length;
      if (errorCount === 0 && card.stats.difficulty < 0.7)
        return;
      const errorLogs = cardLogs.filter((log) => log.response.ease === "again");
      const lastError = errorLogs.length > 0 ? errorLogs[errorLogs.length - 1].timestamp : 0;
      const pattern = this.detectErrorPattern(card, cardLogs);
      difficultCards.push({
        card,
        errorCount,
        lastError,
        averageTime: card.stats.averageTime,
        pattern
      });
    });
    return difficultCards.sort((a, b) => {
      if (a.errorCount !== b.errorCount) {
        return b.errorCount - a.errorCount;
      }
      if (a.card.stats.difficulty !== b.card.stats.difficulty) {
        return b.card.stats.difficulty - a.card.stats.difficulty;
      }
      return b.lastError - a.lastError;
    }).slice(0, limit);
  }
  detectErrorPattern(card, logs) {
    if (logs.length < 3)
      return "unknown";
    if (card.stats.averageTime > 60) {
      return "calculation";
    }
    if (card.scheduling.interval < 3 && card.scheduling.lapses > 2) {
      return "memory";
    }
    const recentLogs = logs.slice(-5);
    const recentFailures = recentLogs.filter(
      (log) => log.response.ease === "again"
    ).length;
    if (recentFailures >= 3) {
      return "concept";
    }
    return "unknown";
  }
  /**
   * 获取标签统计
   */
  getTagStats() {
    const cards = this.plugin.flashcardManager.getAllFlashcards();
    const tagMap = /* @__PURE__ */ new Map();
    cards.forEach((card) => {
      card.tags.forEach((tag) => {
        if (!tagMap.has(tag)) {
          tagMap.set(tag, { total: 0, correct: 0, reviews: 0 });
        }
        const stat = tagMap.get(tag);
        stat.total++;
        stat.correct += card.stats.correctCount;
        stat.reviews += card.stats.totalReviews;
      });
    });
    const stats = Array.from(tagMap.entries()).map(([tag, data]) => ({
      tag,
      count: data.total,
      correctRate: data.reviews > 0 ? data.correct / data.reviews : 0
    }));
    return stats.sort((a, b) => b.count - a.count);
  }
  /**
   * 生成学习报告
   */
  generateReport(days = 7) {
    const dailyStats = this.getDailyStats(days);
    const { thisWeek, lastWeek } = this.getWeeklyStats();
    const difficultCards = this.getDifficultCards(5);
    const deckStats = this.getDeckStats();
    const totalReviewed = dailyStats.reduce((sum, s) => sum + s.reviewed, 0);
    const totalCorrect = dailyStats.reduce((sum, s) => sum + s.correctCount, 0);
    const averageCorrectRate = totalReviewed > 0 ? totalCorrect / totalReviewed : 0;
    const totalTime = dailyStats.reduce((sum, s) => sum + s.timeSpent, 0);
    const recentDays = dailyStats.slice(-7);
    const olderDays = dailyStats.slice(-14, -7);
    const recentRate = this.calculateAverageRate(recentDays);
    const olderRate = this.calculateAverageRate(olderDays);
    const trend = recentRate > olderRate ? "\u{1F4C8} improving" : recentRate < olderRate ? "\u{1F4C9} declining" : "\u27A1\uFE0F stable";
    let report = `# \u{1F4CA} Learning Report

`;
    report += `**Period:** Last ${days} days
`;
    report += `**Generated:** ${new Date().toLocaleString()}

`;
    report += `## \u{1F3AF} Overall Performance

`;
    report += `- **Cards Reviewed:** ${totalReviewed}
`;
    report += `- **Correct Rate:** ${(averageCorrectRate * 100).toFixed(1)}%
`;
    report += `- **Study Time:** ${this.formatTime(totalTime)}
`;
    report += `- **Current Streak:** ${thisWeek.streak} days \u{1F525}
`;
    report += `- **Trend:** ${trend}

`;
    report += `## \u{1F4C8} Week Comparison

`;
    report += `### This Week
`;
    report += `- Reviews: ${thisWeek.totalReviews}
`;
    report += `- Correct Rate: ${(thisWeek.averageCorrectRate * 100).toFixed(1)}%
`;
    report += `- Time: ${this.formatTime(thisWeek.totalTimeSpent)}

`;
    report += `### Last Week
`;
    report += `- Reviews: ${lastWeek.totalReviews}
`;
    report += `- Correct Rate: ${(lastWeek.averageCorrectRate * 100).toFixed(1)}%
`;
    report += `- Time: ${this.formatTime(lastWeek.totalTimeSpent)}

`;
    const reviewChange = thisWeek.totalReviews - lastWeek.totalReviews;
    const rateChange = (thisWeek.averageCorrectRate - lastWeek.averageCorrectRate) * 100;
    if (reviewChange > 0) {
      report += `\u{1F4AA} You reviewed **${reviewChange} more cards** this week!
`;
    }
    if (rateChange > 5) {
      report += `\u{1F389} Your accuracy improved by **${rateChange.toFixed(1)}%**!
`;
    }
    report += `
`;
    if (difficultCards.length > 0) {
      report += `## \u26A0\uFE0F Cards Needing Attention

`;
      difficultCards.forEach((dc, i) => {
        const patternEmoji = {
          "concept": "\u{1F9E0}",
          "memory": "\u{1F4AD}",
          "calculation": "\u{1F522}",
          "unknown": "\u2753"
        };
        report += `${i + 1}. **${dc.card.front.substring(0, 50)}${dc.card.front.length > 50 ? "..." : ""}**
`;
        report += `   - Errors: ${dc.errorCount} | Pattern: ${patternEmoji[dc.pattern]} ${dc.pattern}
`;
        report += `   - Avg Time: ${dc.averageTime.toFixed(1)}s | Difficulty: ${(dc.card.stats.difficulty * 100).toFixed(0)}%

`;
      });
    }
    report += `## \u{1F4DA} Deck Overview

`;
    deckStats.forEach((deck) => {
      report += `### ${deck.deckName}
`;
      report += `- Total: ${deck.totalCards} | Due: ${deck.dueCards} | New: ${deck.newCards}
`;
      report += `- Correct Rate: ${(deck.correctRate * 100).toFixed(1)}%
`;
      report += `- Avg Interval: ${deck.averageInterval.toFixed(1)} days

`;
    });
    report += `## \u{1F4A1} Recommendations

`;
    if (averageCorrectRate < 0.7) {
      report += `- \u26A1 Your correct rate is below 70%. Consider reviewing difficult cards more frequently.
`;
    }
    if (difficultCards.length > 5) {
      report += `- \u{1F4D6} You have many difficult cards. Try breaking complex concepts into smaller flashcards.
`;
    }
    if (thisWeek.streak > 7) {
      report += `- \u{1F389} Amazing streak! Keep up the consistency!
`;
    }
    if (totalTime / totalReviewed > 30) {
      report += `- \u23F1\uFE0F Average review time is high. Consider simplifying card content.
`;
    }
    if (deckStats.some((d) => d.dueCards > d.totalCards * 0.5)) {
      report += `- \u{1F4C5} Some decks have many overdue cards. Focus on catching up with these.
`;
    }
    return report;
  }
  calculateAverageRate(stats) {
    const total = stats.reduce((sum, s) => sum + s.reviewed, 0);
    const correct = stats.reduce((sum, s) => sum + s.correctCount, 0);
    return total > 0 ? correct / total : 0;
  }
  formatTime(seconds) {
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor(seconds % 3600 / 60);
    if (hours > 0) {
      return `${hours}h ${minutes}m`;
    }
    return `${minutes}m`;
  }
  /**
   * 获取热力图数据（用于日历视图）
   */
  getHeatmapData(days = 90) {
    const dailyStats = this.getDailyStats(days);
    const maxReviews = Math.max(...dailyStats.map((s) => s.reviewed));
    return dailyStats.map((stat) => ({
      date: stat.date,
      count: stat.reviewed,
      intensity: maxReviews > 0 ? stat.reviewed / maxReviews : 0
    }));
  }
};

// src/ui/StatsView.ts
var VIEW_TYPE_STATS = "learning-system-stats";
var StatsView = class extends import_obsidian7.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.currentTab = "overview";
    this.plugin = plugin;
    this.analytics = new AnalyticsEngine(plugin);
  }
  getViewType() {
    return VIEW_TYPE_STATS;
  }
  getDisplayText() {
    return "Learning Statistics";
  }
  getIcon() {
    return "bar-chart";
  }
  async onOpen() {
    this.render();
    this.addStyles();
  }
  async onClose() {
  }
  render() {
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("stats-container");
    const header = container.createDiv({ cls: "stats-header" });
    header.createEl("h2", { text: "\u{1F4CA} Learning Statistics" });
    const refreshBtn = header.createEl("button", {
      text: "\u27F3",
      cls: "refresh-btn"
    });
    refreshBtn.addEventListener("click", () => this.render());
    this.renderTabs(container);
    const content = container.createDiv({ cls: "stats-content" });
    switch (this.currentTab) {
      case "overview":
        this.renderOverview(content);
        break;
      case "trends":
        this.renderTrends(content);
        break;
      case "decks":
        this.renderDecks(content);
        break;
      case "difficult":
        this.renderDifficult(content);
        break;
    }
  }
  renderTabs(container) {
    const tabs = container.createDiv({ cls: "stats-tabs" });
    const tabConfigs = [
      { id: "overview", label: "\u{1F4CA} Overview" },
      { id: "trends", label: "\u{1F4C8} Trends" },
      { id: "decks", label: "\u{1F4DA} Decks" },
      { id: "difficult", label: "\u26A0\uFE0F Difficult" }
    ];
    tabConfigs.forEach((config) => {
      const tab = tabs.createDiv({
        cls: `tab ${this.currentTab === config.id ? "active" : ""}`
      });
      tab.textContent = config.label;
      tab.addEventListener("click", () => {
        this.currentTab = config.id;
        this.render();
      });
    });
  }
  renderOverview(container) {
    const stats = this.plugin.flashcardManager.getStats();
    const { thisWeek, lastWeek } = this.analytics.getWeeklyStats();
    const dailyStats = this.analytics.getDailyStats(7);
    const metricsGrid = container.createDiv({ cls: "metrics-grid" });
    this.createMetricCard(metricsGrid, {
      title: "Total Cards",
      value: stats.total.toString(),
      icon: "\u{1F0CF}"
    });
    this.createMetricCard(metricsGrid, {
      title: "Due Today",
      value: stats.due.toString(),
      icon: "\u{1F4C5}"
    });
    this.createMetricCard(metricsGrid, {
      title: "Reviewed Today",
      value: stats.reviewedToday.toString(),
      icon: "\u2705"
    });
    const streak = this.analytics.calculateStreak();
    this.createMetricCard(metricsGrid, {
      title: "Current Streak",
      value: `${streak} days`,
      icon: "\u{1F525}"
    });
    const weekComparison = container.createDiv({ cls: "week-comparison" });
    weekComparison.createEl("h3", { text: "This Week vs Last Week" });
    const comparisonGrid = weekComparison.createDiv({ cls: "comparison-grid" });
    const reviewChange = thisWeek.totalReviews - lastWeek.totalReviews;
    const reviewChangePercent = lastWeek.totalReviews > 0 ? (reviewChange / lastWeek.totalReviews * 100).toFixed(1) : "0";
    this.createComparisonItem(comparisonGrid, {
      label: "Reviews",
      thisWeek: thisWeek.totalReviews,
      lastWeek: lastWeek.totalReviews,
      change: reviewChange,
      changePercent: reviewChangePercent
    });
    const rateChange = (thisWeek.averageCorrectRate - lastWeek.averageCorrectRate) * 100;
    this.createComparisonItem(comparisonGrid, {
      label: "Correct Rate",
      thisWeek: `${(thisWeek.averageCorrectRate * 100).toFixed(1)}%`,
      lastWeek: `${(lastWeek.averageCorrectRate * 100).toFixed(1)}%`,
      change: rateChange,
      changePercent: rateChange.toFixed(1)
    });
    const recentActivity = container.createDiv({ cls: "recent-activity" });
    recentActivity.createEl("h3", { text: "Last 7 Days Activity" });
    const activityChart = recentActivity.createDiv({ cls: "activity-chart" });
    this.renderSimpleBarChart(activityChart, dailyStats);
    const reportSection = container.createDiv({ cls: "report-section" });
    const reportBtn = reportSection.createEl("button", {
      text: "\u{1F4C4} Generate Full Report",
      cls: "mod-cta"
    });
  }
  renderTrends(container) {
    container.createEl("h3", { text: "Performance Trends" });
    const dailyStats = this.analytics.getDailyStats(30);
    const correctRateSection = container.createDiv({ cls: "chart-section" });
    correctRateSection.createEl("h4", { text: "Correct Rate (Last 30 Days)" });
    const correctRateChart = correctRateSection.createDiv({ cls: "line-chart" });
    this.renderLineChart(correctRateChart, dailyStats, "correctRate");
    const reviewsSection = container.createDiv({ cls: "chart-section" });
    reviewsSection.createEl("h4", { text: "Daily Reviews" });
    const reviewsChart = reviewsSection.createDiv({ cls: "bar-chart" });
    this.renderBarChart(reviewsChart, dailyStats);
    const heatmapSection = container.createDiv({ cls: "chart-section" });
    heatmapSection.createEl("h4", { text: "Study Activity Calendar" });
    const heatmap = heatmapSection.createDiv({ cls: "heatmap" });
    this.renderHeatmap(heatmap);
  }
  renderDecks(container) {
    container.createEl("h3", { text: "Deck Statistics" });
    const deckStats = this.analytics.getDeckStats();
    if (deckStats.length === 0) {
      container.createDiv({
        text: "No decks yet. Create some flashcards to see deck statistics!",
        cls: "empty-message"
      });
      return;
    }
    const decksGrid = container.createDiv({ cls: "decks-grid" });
    deckStats.forEach((deck) => {
      const deckCard = decksGrid.createDiv({ cls: "deck-card" });
      const header = deckCard.createDiv({ cls: "deck-card-header" });
      header.createEl("h4", { text: deck.deckName });
      header.createSpan({
        text: `${deck.totalCards} cards`,
        cls: "deck-badge"
      });
      const stats = deckCard.createDiv({ cls: "deck-card-stats" });
      this.createStatRow(stats, "Due", deck.dueCards.toString(), "\u{1F4C5}");
      this.createStatRow(stats, "New", deck.newCards.toString(), "\u{1F195}");
      this.createStatRow(
        stats,
        "Correct Rate",
        `${(deck.correctRate * 100).toFixed(1)}%`,
        "\u2705"
      );
      this.createStatRow(
        stats,
        "Avg Interval",
        `${deck.averageInterval.toFixed(1)} days`,
        "\u{1F4CA}"
      );
      const progress = deckCard.createDiv({ cls: "deck-progress" });
      const masteredCount = deck.totalCards - deck.dueCards - deck.newCards;
      const masteredPercent = masteredCount / deck.totalCards * 100;
      const progressBar = progress.createDiv({ cls: "progress-bar-container" });
      const bar = progressBar.createDiv({ cls: "progress-bar-fill" });
      bar.style.width = `${masteredPercent}%`;
      progress.createDiv({
        text: `${masteredPercent.toFixed(0)}% mastered`,
        cls: "progress-label"
      });
    });
  }
  renderDifficult(container) {
    container.createEl("h3", { text: "Cards Needing Attention" });
    const difficultCards = this.analytics.getDifficultCards(10);
    if (difficultCards.length === 0) {
      container.createDiv({
        text: "\u{1F389} No difficult cards! Great job!",
        cls: "empty-message"
      });
      return;
    }
    const cardsList = container.createDiv({ cls: "difficult-cards-list" });
    difficultCards.forEach((dc, index) => {
      const cardItem = cardsList.createDiv({ cls: "difficult-card-item" });
      const rank = cardItem.createDiv({ cls: "card-rank" });
      rank.textContent = `${index + 1}`;
      const content = cardItem.createDiv({ cls: "card-content" });
      const question = content.createDiv({ cls: "card-question" });
      question.textContent = dc.card.front.substring(0, 80) + (dc.card.front.length > 80 ? "..." : "");
      const meta = content.createDiv({ cls: "card-meta" });
      const patternEmoji = {
        "concept": "\u{1F9E0}",
        "memory": "\u{1F4AD}",
        "calculation": "\u{1F522}",
        "unknown": "\u2753"
      };
      meta.createSpan({
        text: `${patternEmoji[dc.pattern]} ${dc.pattern}`,
        cls: "pattern-badge"
      });
      meta.createSpan({
        text: `${dc.errorCount} errors`,
        cls: "error-count"
      });
      meta.createSpan({
        text: `${dc.averageTime.toFixed(1)}s avg`,
        cls: "avg-time"
      });
      const difficultyBar = content.createDiv({ cls: "difficulty-bar-container" });
      const diffBar = difficultyBar.createDiv({ cls: "difficulty-bar" });
      diffBar.style.width = `${dc.card.stats.difficulty * 100}%`;
      const actions = cardItem.createDiv({ cls: "card-actions" });
      const jumpBtn = actions.createEl("button", {
        text: "\u2197",
        cls: "action-btn-small"
      });
      jumpBtn.addEventListener("click", () => this.jumpToCard(dc.card));
      const reviewBtn = actions.createEl("button", {
        text: "\u{1F504}",
        cls: "action-btn-small"
      });
      reviewBtn.addEventListener("click", () => {
        this.plugin.activateReview();
      });
      const deleteBtn = actions.createEl("button", {
        text: "\u{1F5D1}\uFE0F",
        cls: "action-btn-small delete-btn"
      });
      deleteBtn.addEventListener("click", async () => {
        if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u5F20\u95EA\u5361\u5417\uFF1F")) {
          await this.deleteFlashcard(dc.card.id);
        }
      });
    });
  }
  createMetricCard(container, config) {
    const card = container.createDiv({ cls: "metric-card" });
    card.createDiv({ text: config.icon, cls: "metric-icon" });
    const content = card.createDiv({ cls: "metric-content" });
    content.createDiv({ text: config.title, cls: "metric-title" });
    content.createDiv({ text: config.value, cls: "metric-value" });
  }
  createComparisonItem(container, config) {
    const item = container.createDiv({ cls: "comparison-item" });
    item.createDiv({ text: config.label, cls: "comparison-label" });
    const values = item.createDiv({ cls: "comparison-values" });
    values.createSpan({
      text: `${config.thisWeek}`,
      cls: "this-week"
    });
    values.createSpan({ text: " vs ", cls: "vs" });
    values.createSpan({
      text: `${config.lastWeek}`,
      cls: "last-week"
    });
    const changeClass = config.change > 0 ? "positive" : config.change < 0 ? "negative" : "neutral";
    const changeIcon = config.change > 0 ? "\u2197" : config.change < 0 ? "\u2198" : "\u2192";
    item.createDiv({
      text: `${changeIcon} ${config.changePercent}%`,
      cls: `change ${changeClass}`
    });
  }
  createStatRow(container, label, value, icon) {
    const row = container.createDiv({ cls: "stat-row" });
    row.createSpan({ text: icon, cls: "stat-icon" });
    row.createSpan({ text: label, cls: "stat-label" });
    row.createSpan({ text: value, cls: "stat-value" });
  }
  renderSimpleBarChart(container, data) {
    const maxValue = Math.max(...data.map((d) => d.reviewed));
    data.forEach((stat) => {
      const bar = container.createDiv({ cls: "simple-bar" });
      const date = new Date(stat.date);
      const dayName = date.toLocaleDateString("en-US", { weekday: "short" });
      bar.createDiv({ text: dayName, cls: "bar-label" });
      const barContainer = bar.createDiv({ cls: "bar-container" });
      const barFill = barContainer.createDiv({ cls: "bar-fill" });
      const height = maxValue > 0 ? stat.reviewed / maxValue * 100 : 0;
      barFill.style.height = `${height}%`;
      bar.createDiv({ text: stat.reviewed.toString(), cls: "bar-value" });
    });
  }
  renderBarChart(container, data) {
    const chart = container.createDiv({ cls: "chart-canvas" });
    const maxValue = Math.max(...data.map((d) => d.reviewed));
    data.forEach((stat) => {
      const barGroup = chart.createDiv({ cls: "bar-group" });
      const barContainer = barGroup.createDiv({ cls: "bar" });
      const height = maxValue > 0 ? stat.reviewed / maxValue * 100 : 0;
      barContainer.style.height = `${height}%`;
      barContainer.title = `${stat.reviewed} reviews`;
      const barLabel = barGroup.createDiv({ cls: "bar-label" });
      const date = new Date(stat.date);
      barLabel.textContent = date.getDate().toString();
    });
  }
  renderLineChart(container, data, key) {
    const chart = container.createDiv({ cls: "line-chart-canvas" });
    const points = data.map((stat, i) => {
      const x = i / (data.length - 1) * 100;
      const y = 100 - stat[key] * 100;
      return { x, y, value: stat[key] };
    });
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("viewBox", "0 0 100 100");
    svg.setAttribute("preserveAspectRatio", "none");
    svg.style.width = "100%";
    svg.style.height = "200px";
    const pathData = points.map(
      (p, i) => `${i === 0 ? "M" : "L"} ${p.x} ${p.y}`
    ).join(" ");
    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
    path.setAttribute("d", pathData);
    path.setAttribute("fill", "none");
    path.setAttribute("stroke", "var(--interactive-accent)");
    path.setAttribute("stroke-width", "2");
    svg.appendChild(path);
    chart.appendChild(svg);
    const labelsContainer = container.createDiv({ cls: "chart-labels" });
    data.forEach((stat, i) => {
      if (i % Math.ceil(data.length / 7) === 0) {
        const chartLabel = labelsContainer.createDiv({ cls: "chart-label" });
        const date = new Date(stat.date);
        chartLabel.textContent = `${date.getMonth() + 1}/${date.getDate()}`;
      }
    });
  }
  renderHeatmap(container) {
    const heatmapData = this.analytics.getHeatmapData(90);
    const weeks = [];
    let currentWeek = [];
    heatmapData.forEach((day, i) => {
      currentWeek.push(day);
      if (currentWeek.length === 7 || i === heatmapData.length - 1) {
        weeks.push(currentWeek);
        currentWeek = [];
      }
    });
    weeks.forEach((week) => {
      const weekRow = container.createDiv({ cls: "heatmap-week" });
      week.forEach((day) => {
        const cell = weekRow.createDiv({ cls: "heatmap-cell" });
        const level = Math.ceil(day.intensity * 4);
        cell.addClass(`level-${level}`);
        cell.title = `${day.date}: ${day.count} reviews`;
      });
    });
  }
  async jumpToCard(card) {
    const file = this.app.vault.getAbstractFileByPath(card.sourceFile);
    if (!(file instanceof import_obsidian7.TFile))
      return;
    const contentUnit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
    if (!contentUnit)
      return;
    const leaf = this.app.workspace.getLeaf(false);
    await leaf.openFile(file);
    setTimeout(() => {
      const view = this.app.workspace.getActiveViewOfType(import_obsidian7.ItemView);
      if (view) {
        const editor = view.editor;
        if (editor) {
          editor.setCursor({ line: contentUnit.source.position.line, ch: 0 });
          editor.scrollIntoView({
            from: { line: contentUnit.source.position.line, ch: 0 },
            to: { line: contentUnit.source.position.line, ch: 0 }
          }, true);
        }
      }
    }, 100);
  }
  async deleteFlashcard(cardId) {
    try {
      await this.plugin.flashcardManager.deleteCard(cardId);
      new import_obsidian7.Notice("\u{1F5D1}\uFE0F \u95EA\u5361\u5DF2\u5220\u9664");
      this.render();
    } catch (error) {
      console.error("Error deleting flashcard:", error);
      new import_obsidian7.Notice("\u274C \u5220\u9664\u95EA\u5361\u5931\u8D25");
    }
  }
  addStyles() {
    const styleEl = document.createElement("style");
    styleEl.textContent = `
      .stats-container {
        padding: 20px;
        overflow-y: auto;
      }

      .stats-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .stats-header h2 {
        margin: 0;
      }

      .stats-tabs {
        display: flex;
        gap: 8px;
        margin-bottom: 20px;
        border-bottom: 2px solid var(--background-modifier-border);
      }

      .tab {
        padding: 10px 20px;
        cursor: pointer;
        border-bottom: 3px solid transparent;
        transition: all 0.2s;
        user-select: none;
      }

      .tab:hover {
        background: var(--background-modifier-hover);
      }

      .tab.active {
        border-bottom-color: var(--interactive-accent);
        color: var(--interactive-accent);
        font-weight: 600;
      }

      .metrics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 30px;
      }

      .metric-card {
        padding: 20px;
        background: var(--background-secondary);
        border-radius: 8px;
        display: flex;
        gap: 15px;
        align-items: center;
      }

      .metric-icon {
        font-size: 32px;
      }

      .metric-content {
        flex: 1;
      }

      .metric-title {
        font-size: 0.9em;
        color: var(--text-muted);
        margin-bottom: 5px;
      }

      .metric-value {
        font-size: 1.8em;
        font-weight: 600;
      }

      .week-comparison {
        margin-bottom: 30px;
      }

      .comparison-grid {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-top: 15px;
      }

      .comparison-item {
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .comparison-label {
        font-weight: 500;
      }

      .comparison-values {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .this-week {
        font-weight: 600;
        font-size: 1.1em;
      }

      .last-week {
        color: var(--text-muted);
      }

      .change {
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 0.9em;
        font-weight: 500;
      }

      .change.positive {
        background: var(--background-modifier-success);
        color: var(--text-on-accent);
      }

      .change.negative {
        background: var(--background-modifier-error);
        color: white;
      }

      .chart-section {
        margin-bottom: 30px;
      }

      .recent-activity .activity-chart {
        display: flex;
        justify-content: space-around;
        align-items: flex-end;
        height: 150px;
        padding: 20px;
        background: var(--background-secondary);
        border-radius: 8px;
      }

      .simple-bar {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        flex: 1;
      }

      .simple-bar .bar-container {
        width: 100%;
        height: 100px;
        display: flex;
        align-items: flex-end;
        justify-content: center;
      }

      .simple-bar .bar-fill {
        width: 60%;
        background: var(--interactive-accent);
        border-radius: 4px 4px 0 0;
        transition: height 0.3s;
      }

      .bar-label, .bar-value {
        font-size: 0.85em;
        color: var(--text-muted);
      }

      .heatmap {
        display: flex;
        flex-direction: column;
        gap: 4px;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 8px;
      }

      .heatmap-week {
        display: flex;
        gap: 4px;
      }

      .heatmap-cell {
        width: 12px;
        height: 12px;
        background: var(--background-primary);
        border-radius: 2px;
        cursor: pointer;
      }

      .heatmap-cell.level-1 { background: rgba(94, 156, 235, 0.3); }
      .heatmap-cell.level-2 { background: rgba(94, 156, 235, 0.5); }
      .heatmap-cell.level-3 { background: rgba(94, 156, 235, 0.7); }
      .heatmap-cell.level-4 { background: rgba(94, 156, 235, 1); }

      .decks-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 15px;
      }

      .deck-card {
        padding: 20px;
        background: var(--background-secondary);
        border-radius: 8px;
        border: 1px solid var(--background-modifier-border);
      }

      .deck-card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--background-modifier-border);
      }

      .deck-card-header h4 {
        margin: 0;
      }

      .deck-badge {
        padding: 4px 10px;
        background: var(--interactive-accent);
        color: white;
        border-radius: 12px;
        font-size: 0.85em;
      }

      .deck-card-stats {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-bottom: 15px;
      }

      .stat-row {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .stat-icon {
        width: 20px;
      }

      .stat-label {
        flex: 1;
        color: var(--text-muted);
      }

      .stat-value {
        font-weight: 500;
      }

      .deck-progress {
        margin-top: 15px;
      }

      .progress-bar-container {
        height: 8px;
        background: var(--background-primary);
        border-radius: 4px;
        overflow: hidden;
        margin-bottom: 5px;
      }

      .progress-bar-fill {
        height: 100%;
        background: var(--interactive-accent);
        transition: width 0.3s;
      }

      .progress-label {
        font-size: 0.85em;
        color: var(--text-muted);
      }

      .difficult-cards-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .difficult-card-item {
        display: flex;
        gap: 15px;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 8px;
        border: 1px solid var(--background-modifier-border);
      }

      .card-rank {
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--interactive-accent);
        color: white;
        border-radius: 50%;
        font-weight: 600;
        flex-shrink: 0;
      }

      .card-content {
        flex: 1;
      }

      .card-question {
        font-weight: 500;
        margin-bottom: 8px;
      }

      .card-meta {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-bottom:8px;
      } 

.pattern-badge, .error-count, .avg-time {
    padding: 3px 10px;
    background: var(--background-primary);
    border-radius: 12px;
    font-size: 0.85em;
  }

  .difficulty-bar-container {
    height: 6px;
    background: var(--background-primary);
    border-radius: 3px;
    overflow: hidden;
  }

  .difficulty-bar {
    height: 100%;
    background: linear-gradient(to right, var(--color-green), var(--color-yellow), var(--color-red));
    transition: width 0.3s;
  }

  .card-actions {
    display: flex;
    gap: 8px;
  }

  .action-btn-small {
    padding: 6px 12px;
    border: 1px solid var(--background-modifier-border);
    border-radius: 4px;
    background: var(--background-primary);
    cursor: pointer;
    transition: all 0.2s;
  }

  .action-btn-small:hover {
    background: var(--interactive-accent);
    color: white;
    border-color: var(--interactive-accent);
  }

  .action-btn-small.delete-btn:hover {
    background: var(--color-red);
    border-color: var(--color-red);
    color: white;
  }

  .empty-message {
    text-align: center;
    padding: 40px;
    color: var(--text-muted);
    font-size: 1.1em;
  }

  .report-section {
    text-align: center;
    margin-top: 30px;
    padding: 20px;
  }

  .chart-canvas {
    display: flex;
    align-items: flex-end;
    justify-content: space-around;
    height: 200px;
    padding: 20px;
    background: var(--background-secondary);
    border-radius: 8px;
    margin-bottom: 10px;
  }

  .bar-group {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
    height: 100%;
  }

  .bar-group .bar {
    width: 80%;
    background: var(--interactive-accent);
    border-radius: 4px 4px 0 0;
    transition: height 0.3s;
    margin-top: auto;
  }

  .line-chart-canvas {
    background: var(--background-secondary);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 10px;
  }

  .chart-labels {
    display: flex;
    justify-content: space-around;
    padding: 10px 20px;
    background: var(--background-secondary);
    border-radius: 8px;
  }

  .chart-label {
    font-size: 0.85em;
    color: var(--text-muted);
  }
`;
    document.head.appendChild(styleEl);
  }
};

// src/core/DataManager.ts
var DataManager = class {
  constructor(app, plugin) {
    this.app = app;
    this.plugin = plugin;
    this.contentUnits = /* @__PURE__ */ new Map();
    this.fileIndex = /* @__PURE__ */ new Map();
    this.dataFolder = `${this.app.vault.configDir}/plugins/learning-system/data`;
  }
  async initialize() {
    await this.ensureDataFolder();
    await this.loadData();
  }
  async ensureDataFolder() {
    const adapter = this.app.vault.adapter;
    if (!await adapter.exists(this.dataFolder)) {
      await adapter.mkdir(this.dataFolder);
    }
    const subfolders = ["indexes", "config", "cache"];
    for (const folder of subfolders) {
      const path = `${this.dataFolder}/${folder}`;
      if (!await adapter.exists(path)) {
        await adapter.mkdir(path);
      }
    }
  }
  async loadData() {
    try {
      const contentPath = `${this.dataFolder}/content-units.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(contentPath)) {
        const data = await adapter.read(contentPath);
        const units = JSON.parse(data);
        for (const unit of units) {
          this.contentUnits.set(unit.id, unit);
          if (!this.fileIndex.has(unit.source.file)) {
            this.fileIndex.set(unit.source.file, []);
          }
          this.fileIndex.get(unit.source.file).push(unit.id);
        }
      }
    } catch (error) {
      console.error("Error loading data:", error);
    }
  }
  async saveContentUnit(unit) {
    this.contentUnits.set(unit.id, unit);
    if (!this.fileIndex.has(unit.source.file)) {
      this.fileIndex.set(unit.source.file, []);
    }
    if (!this.fileIndex.get(unit.source.file).includes(unit.id)) {
      this.fileIndex.get(unit.source.file).push(unit.id);
    }
    await this.persist();
  }
  async saveContentUnits(units) {
    for (const unit of units) {
      this.contentUnits.set(unit.id, unit);
      if (!this.fileIndex.has(unit.source.file)) {
        this.fileIndex.set(unit.source.file, []);
      }
      if (!this.fileIndex.get(unit.source.file).includes(unit.id)) {
        this.fileIndex.get(unit.source.file).push(unit.id);
      }
    }
    await this.persist();
  }
  getContentUnit(id) {
    return this.contentUnits.get(id);
  }
  getContentUnitsByFile(filePath) {
    const ids = this.fileIndex.get(filePath) || [];
    return ids.map((id) => this.contentUnits.get(id)).filter(Boolean);
  }
  getContentUnitsByType(type) {
    return Array.from(this.contentUnits.values()).filter((unit) => unit.type === type);
  }
  getAllContentUnits() {
    return Array.from(this.contentUnits.values());
  }
  async deleteContentUnit(id) {
    const unit = this.contentUnits.get(id);
    if (unit) {
      this.contentUnits.delete(id);
      const fileUnits = this.fileIndex.get(unit.source.file);
      if (fileUnits) {
        const index = fileUnits.indexOf(id);
        if (index > -1) {
          fileUnits.splice(index, 1);
        }
      }
      await this.persist();
    }
  }
  async persist() {
    try {
      const contentPath = `${this.dataFolder}/content-units.json`;
      const units = Array.from(this.contentUnits.values());
      const data = JSON.stringify(units, null, 2);
      await this.app.vault.adapter.write(contentPath, data);
      const indexPath = `${this.dataFolder}/indexes/file-index.json`;
      const indexData = JSON.stringify(
        Object.fromEntries(this.fileIndex),
        null,
        2
      );
      await this.app.vault.adapter.write(indexPath, indexData);
    } catch (error) {
      console.error("Error persisting data:", error);
    }
  }
};

// src/core/ExtractionEngine.ts
var import_obsidian8 = require("obsidian");
var ExtractionEngine = class {
  constructor(app, dataManager, flashcardManager) {
    this.app = app;
    this.dataManager = dataManager;
    this.flashcardManager = flashcardManager;
  }
  /**
   * 注册右键菜单
   */
  registerContextMenu(menu, editor, file) {
    const selection = editor.getSelection();
    if (!selection)
      return;
    menu.addItem((item) => {
      item.setTitle("\u{1F4DD} Extract as text only").setIcon("file-text").onClick(async () => {
        await this.extractSelectedText(editor, file, "text");
      });
    });
    menu.addItem((item) => {
      item.setTitle("\u2753 Extract as QA card").setIcon("help-circle").onClick(async () => {
        await this.extractSelectedText(editor, file, "QA");
      });
    });
    menu.addItem((item) => {
      item.setTitle("\u270F\uFE0F Extract as Cloze card").setIcon("highlighter").onClick(async () => {
        await this.extractSelectedText(editor, file, "cloze");
      });
    });
  }
  /**
   * 提取选中的文本
   */
  async extractSelectedText(editor, file, extractType) {
    const selection = editor.getSelection();
    if (!selection) {
      new import_obsidian8.Notice("No text selected");
      return;
    }
    const cursor = editor.getCursor("from");
    const content = await this.app.vault.read(file);
    const offset = this.getOffsetFromCursor(content, cursor.line, cursor.ch);
    try {
      let unit;
      switch (extractType) {
        case "text":
          unit = this.createTextUnit(file, selection, offset, content);
          break;
        case "QA":
          unit = this.createQAUnit(file, selection, offset, content);
          break;
        case "cloze":
          unit = this.createClozeUnit(file, selection, offset, content);
          break;
      }
      await this.dataManager.saveContentUnits([unit]);
      if (extractType === "QA" || extractType === "cloze") {
        try {
          const cardType = extractType === "QA" ? "qa" : "cloze";
          const flashcard = await this.flashcardManager.createFlashcardFromUnit(unit, {
            cardType
          });
          await this.dataManager.saveContentUnits([unit]);
        } catch (error) {
          console.error("[extractSelectedText] \u521B\u5EFA\u95EA\u5361\u5931\u8D25:", error);
        }
      }
      const typeNames = {
        text: "text",
        QA: "QA card",
        cloze: "cloze card"
      };
      new import_obsidian8.Notice(`\u2705 Extracted as ${typeNames[extractType]}`);
      this.refreshAllViews();
    } catch (error) {
      console.error("Error extracting selection:", error);
      new import_obsidian8.Notice(`\u274C Error: ${error.message}`);
    }
  }
  /**
   * 创建纯文本单元
   */
  createTextUnit(file, selection, offset, fileContent) {
    const position = this.calculatePosition(fileContent, offset);
    return {
      id: this.generateId(),
      type: "text",
      content: selection.trim(),
      fullContext: selection.trim(),
      source: {
        file: file.path,
        position: {
          start: offset,
          end: offset + selection.length,
          line: position.line
        },
        heading: this.findHeading(fileContent, offset),
        anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
      },
      extractRule: {
        ruleId: "text-manual",
        ruleName: "Manual Text Extract",
        extractedBy: "manual"
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now(),
        tags: this.extractTags(fileContent, offset)
      },
      flashcardIds: []
    };
  }
  /**
   * 创建 QA 卡片单元
   */
  createQAUnit(file, selection, offset, fileContent) {
    const position = this.calculatePosition(fileContent, offset);
    let question, answer;
    if (selection.includes("::")) {
      const parts = selection.split("::");
      question = parts[0].trim();
      answer = parts.slice(1).join("::").trim();
    } else {
      question = selection.trim();
      answer = "[Answer needed]";
    }
    return {
      id: this.generateId(),
      type: "QA",
      content: question,
      answer,
      fullContext: selection.trim(),
      source: {
        file: file.path,
        position: {
          start: offset,
          end: offset + selection.length,
          line: position.line
        },
        heading: this.findHeading(fileContent, offset),
        anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
      },
      extractRule: {
        ruleId: "QA-manual",
        ruleName: "Manual QA Card",
        extractedBy: "manual"
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now(),
        tags: this.extractTags(fileContent, offset)
      },
      flashcardIds: []
    };
  }
  /**
   * 创建完形填空卡片单元
   */
  createClozeUnit(file, selection, offset, fileContent) {
    const position = this.calculatePosition(fileContent, offset);
    const fullSentence = this.extractFullSentence(fileContent, offset, selection.length);
    return {
      id: this.generateId(),
      type: "cloze",
      content: selection.trim(),
      fullContext: fullSentence,
      source: {
        file: file.path,
        position: {
          start: offset,
          end: offset + selection.length,
          line: position.line
        },
        heading: this.findHeading(fileContent, offset),
        anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
      },
      extractRule: {
        ruleId: "cloze-manual",
        ruleName: "Manual Cloze Card",
        extractedBy: "manual"
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now(),
        tags: this.extractTags(fileContent, offset)
      },
      flashcardIds: []
    };
  }
  /**
   * 从光标位置计算文件偏移量
   */
  getOffsetFromCursor(content, line, ch) {
    const lines = content.split("\n");
    let offset = 0;
    for (let i = 0; i < line; i++) {
      offset += lines[i].length + 1;
    }
    offset += ch;
    return offset;
  }
  /**
   * 扫描单个文件
   */
  async scanFile(file) {
    try {
      const content = await this.app.vault.read(file);
      const units = await this.extractContent(file, content);
      if (units.length > 0) {
        await this.dataManager.saveContentUnits(units);
        const qaCount = units.filter((u) => u.type === "QA").length;
        const clozeCount = units.filter((u) => u.type === "cloze").length;
        new import_obsidian8.Notice(`Extracted ${qaCount} QA cards and ${clozeCount} cloze cards from ${file.name}`);
        setTimeout(() => {
          this.refreshAllViews();
        }, 100);
      }
      return units.length;
    } catch (error) {
      console.error("[scanFile] \u9519\u8BEF:", error);
      new import_obsidian8.Notice(`Error scanning file: ${error.message}`);
      return 0;
    }
  }
  /**
   * 刷新所有相关视图
   */
  refreshAllViews() {
    this.app.workspace.iterateAllLeaves((leaf) => {
      const viewType = leaf.view.getViewType();
      if (viewType === "learning-system-sidebar-overview" || viewType === "learning-system-main-overview") {
        leaf.view.refresh();
      }
    });
  }
  /**
   * 扫描整个 Vault
   */
  async scanVault() {
    const files = this.app.vault.getMarkdownFiles();
    let scanned = 0;
    let extracted = 0;
    new import_obsidian8.Notice(`Scanning ${files.length} files...`);
    for (const file of files) {
      const count = await this.scanFile(file);
      scanned++;
      extracted += count;
    }
    new import_obsidian8.Notice(`Scan complete! Extracted ${extracted} items from ${scanned} files.`);
    return { scanned, extracted };
  }
  /**
   * 🔧 修改: 先保存 units，再创建闪卡
   */
  async extractContent(file, content) {
    const units = [];
    const qaUnits = this.extractQACards(file, content);
    units.push(...qaUnits);
    const clozeUnits = this.extractClozeCards(file, content);
    units.push(...clozeUnits);
    if (units.length > 0) {
      await this.dataManager.saveContentUnits(units);
    }
    for (const unit of units) {
      try {
        const cardType = unit.type === "QA" ? "qa" : "cloze";
        const flashcard = await this.flashcardManager.createFlashcardFromUnit(unit, {
          cardType
        });
      } catch (error) {
        console.error("[extractContent] \u521B\u5EFA\u95EA\u5361\u5931\u8D25:", error);
      }
    }
    return units;
  }
  /**
   * ✅ 检查是否为任务完成标记
   * 排除: [completion:: date], [due:: date] 等任务相关的 :: 格式
   */
  isTaskCompletion(line) {
    const taskPattern = /^[\s]*-\s*\[[x\s]\].*::/i;
    return taskPattern.test(line);
  }
  /**
   * ✅ 检查是否为日期/时间字段
   * 排除: date1:: 2021-02-26T15:15, date2:: 2021-04-17 18:00 等格式
   */
  isDateTimeField(question, answer) {
    const dateFieldPattern = /\b(date\d*|time\d*|created|updated|modified|scheduled|due|completion)\b/i;
    const dateTimePattern = /^\s*\d{4}-\d{2}-\d{2}(T|\s)\d{2}:\d{2}|\d{4}-\d{2}-\d{2}\s+\d{2}:\d{2}/;
    const dateOnlyPattern = /^\s*\d{4}-\d{2}-\d{2}\s*$/;
    return dateFieldPattern.test(question) && (dateTimePattern.test(answer) || dateOnlyPattern.test(answer));
  }
  /**
   * ✅ 检查是否为 Excalidraw 高亮
   * 排除: ==switch to excalidraw view...== 这类特定高亮
   */
  isExcalidrawHighlight(matchText, line) {
    const excalidrawKeywords = /excalidraw|drawing|sketch/i;
    return excalidrawKeywords.test(matchText) || excalidrawKeywords.test(line);
  }
  /**
   * ✅ 提取 QA 卡片 (格式: Question :: Answer)
   * 新增: 过滤任务完成标记和日期时间字段
   */
  extractQACards(file, content) {
    const units = [];
    const qaRegex = /^(.+?)\s*::\s*(.+?)$/gm;
    let match;
    while ((match = qaRegex.exec(content)) !== null) {
      const fullMatch = match[0];
      const question = match[1].trim();
      const answer = match[2].trim();
      if (this.isTaskCompletion(fullMatch)) {
        console.log("[extractQACards] \u8DF3\u8FC7\u4EFB\u52A1\u6807\u8BB0:", fullMatch);
        continue;
      }
      if (this.isDateTimeField(question, answer)) {
        console.log("[extractQACards] \u8DF3\u8FC7\u65E5\u671F\u65F6\u95F4\u5B57\u6BB5:", fullMatch);
        continue;
      }
      const position = this.calculatePosition(content, match.index);
      const unit = {
        id: this.generateId(),
        type: "QA",
        content: question,
        answer,
        fullContext: fullMatch,
        source: {
          file: file.path,
          position: {
            start: match.index,
            end: match.index + fullMatch.length,
            line: position.line
          },
          heading: this.findHeading(content, match.index),
          anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
        },
        extractRule: {
          ruleId: "QA",
          ruleName: "QA Card",
          extractedBy: "auto"
        },
        metadata: {
          createdAt: Date.now(),
          updatedAt: Date.now(),
          tags: this.extractTags(content, match.index)
        },
        flashcardIds: []
      };
      units.push(unit);
    }
    return units;
  }
  /**
   * ✅ 提取完形填空卡 (格式: ==highlight==)
   * 新增: 过滤 Excalidraw 高亮
   */
  extractClozeCards(file, content) {
    const units = [];
    const highlightRegex = /==(.+?)==/g;
    let match;
    while ((match = highlightRegex.exec(content)) !== null) {
      const extractedText = match[1];
      const fullMatch = match[0];
      const position = this.calculatePosition(content, match.index);
      const lineStart = content.lastIndexOf("\n", match.index) + 1;
      const lineEnd = content.indexOf("\n", match.index);
      const currentLine = content.substring(lineStart, lineEnd === -1 ? content.length : lineEnd);
      if (this.isExcalidrawHighlight(extractedText, currentLine)) {
        console.log("[extractClozeCards] \u8DF3\u8FC7 Excalidraw \u9AD8\u4EAE:", extractedText);
        continue;
      }
      const fullSentence = this.extractFullSentence(content, match.index, fullMatch.length);
      const unit = {
        id: this.generateId(),
        type: "cloze",
        content: extractedText.trim(),
        fullContext: fullSentence,
        source: {
          file: file.path,
          position: {
            start: match.index,
            end: match.index + fullMatch.length,
            line: position.line
          },
          heading: this.findHeading(content, match.index),
          anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
        },
        extractRule: {
          ruleId: "cloze",
          ruleName: "Cloze Deletion",
          extractedBy: "auto"
        },
        metadata: {
          createdAt: Date.now(),
          updatedAt: Date.now(),
          tags: this.extractTags(content, match.index)
        },
        flashcardIds: []
      };
      units.push(unit);
    }
    return units;
  }
  /**
   * 提取包含高亮的完整句子
   */
  extractFullSentence(content, highlightStart, highlightLength) {
    const sentenceEnds = /[.!?。！?\n]/;
    let start = highlightStart;
    while (start > 0) {
      const char = content[start - 1];
      if (sentenceEnds.test(char)) {
        break;
      }
      start--;
    }
    let end = highlightStart + highlightLength;
    while (end < content.length) {
      const char = content[end];
      if (sentenceEnds.test(char)) {
        end++;
        break;
      }
      end++;
    }
    return content.substring(start, end).trim();
  }
  /**
   * 计算文本位置
   */
  calculatePosition(content, offset) {
    const lines = content.substring(0, offset).split("\n");
    return {
      line: lines.length - 1,
      column: lines[lines.length - 1].length
    };
  }
  /**
   * 查找所在标题
   */
  findHeading(content, position) {
    const beforeContent = content.substring(0, position);
    const headings = beforeContent.match(/^#{1,6} .+$/gm);
    return headings ? headings[headings.length - 1] : void 0;
  }
  /**
   * 提取附近的标签
   */
  extractTags(content, position) {
    const tags = /* @__PURE__ */ new Set();
    const yamlMatch = content.match(/^---\n([\s\S]*?)\n---/);
    if (yamlMatch) {
      const yamlContent = yamlMatch[1];
      const tagsMatch = yamlContent.match(/^tags:\s*(.+)$/m);
      if (tagsMatch) {
        const tagContent = tagsMatch[1].trim();
        if (tagContent.startsWith("[")) {
          const arrayTags = tagContent.match(/[\w/-]+/g);
          arrayTags == null ? void 0 : arrayTags.forEach((tag) => tags.add(`#${tag}`));
        } else {
          tagContent.split(",").forEach((tag) => {
            const cleaned = tag.trim();
            if (cleaned)
              tags.add(`#${cleaned}`);
          });
        }
      }
    }
    const lines = content.substring(0, position).split("\n");
    const currentLine = lines.length - 1;
    const lineContent = content.split("\n")[currentLine] || "";
    const inlineTagRegex = /#[\w/-]+/g;
    const inlineTags = lineContent.match(inlineTagRegex);
    inlineTags == null ? void 0 : inlineTags.forEach((tag) => tags.add(tag));
    return Array.from(tags);
  }
  /**
   * 生成唯一 ID
   */
  generateId() {
    return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
  }
  /**
   * 生成 Block ID
   */
  generateBlockId() {
    return `extract-${Date.now()}-${Math.random().toString(36).substr(2, 6)}`;
  }
};

// src/core/AnnotationManager.ts
var AnnotationManager = class {
  constructor(app, plugin) {
    this.app = app;
    this.plugin = plugin;
    this.annotations = /* @__PURE__ */ new Map();
    this.dataFolder = `${this.app.vault.configDir}/plugins/learning-system/data`;
  }
  async initialize() {
    await this.loadAnnotations();
  }
  /**
   * 加载所有批注
   */
  async loadAnnotations() {
    try {
      const path = `${this.dataFolder}/annotations.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(path)) {
        const data = await adapter.read(path);
        const annotations = JSON.parse(data);
        for (const annotation of annotations) {
          this.annotations.set(annotation.id, annotation);
        }
      }
    } catch (error) {
      console.error("Error loading annotations:", error);
    }
  }
  /**
   * 添加内容批注
   */
  async addContentAnnotation(contentUnitId, content, badge) {
    const annotation = {
      id: this.generateId(),
      targetType: "content",
      targetId: contentUnitId,
      content,
      badge,
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.annotations.set(annotation.id, annotation);
    await this.persist();
    const contentUnit = this.plugin.dataManager.getContentUnit(contentUnitId);
    if (contentUnit) {
      contentUnit.annotationId = annotation.id;
      contentUnit.metadata.updatedAt = Date.now();
      await this.plugin.dataManager.saveContentUnit(contentUnit);
    }
    return annotation;
  }
  /**
   * 添加文件批注
   */
  async addFileAnnotation(filePath, content) {
    const annotation = {
      id: this.generateId(),
      targetType: "file",
      targetId: filePath,
      content,
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.annotations.set(annotation.id, annotation);
    await this.persist();
    return annotation;
  }
  /**
   * 获取批注
   */
  getAnnotation(id) {
    return this.annotations.get(id);
  }
  /**
   * 获取内容的批注
   */
  getContentAnnotation(contentUnitId) {
    const contentUnit = this.plugin.dataManager.getContentUnit(contentUnitId);
    if (!(contentUnit == null ? void 0 : contentUnit.annotationId))
      return void 0;
    return this.annotations.get(contentUnit.annotationId);
  }
  /**
   * 获取文件的所有批注
   */
  getFileAnnotations(filePath) {
    return Array.from(this.annotations.values()).filter(
      (ann) => ann.targetType === "file" && ann.targetId === filePath
    );
  }
  /**
   * 更新批注
   */
  async updateAnnotation(id, updates) {
    const annotation = this.annotations.get(id);
    if (!annotation)
      return;
    Object.assign(annotation, updates, {
      metadata: {
        ...annotation.metadata,
        updatedAt: Date.now()
      }
    });
    await this.persist();
  }
  /**
   * 删除批注
   */
  async deleteAnnotation(id) {
    const annotation = this.annotations.get(id);
    if (!annotation)
      return;
    if (annotation.targetType === "content") {
      const contentUnit = this.plugin.dataManager.getContentUnit(annotation.targetId);
      if (contentUnit) {
        contentUnit.annotationId = void 0;
        await this.plugin.dataManager.saveContentUnit(contentUnit);
      }
    }
    this.annotations.delete(id);
    await this.persist();
  }
  /**
   * 获取所有批注
   */
  getAllAnnotations() {
    return Array.from(this.annotations.values());
  }
  /**
   * 持久化
   */
  async persist() {
    try {
      const path = `${this.dataFolder}/annotations.json`;
      const annotations = Array.from(this.annotations.values());
      const data = JSON.stringify(annotations, null, 2);
      await this.app.vault.adapter.write(path, data);
    } catch (error) {
      console.error("Error persisting annotations:", error);
    }
  }
  /**
   * 生成唯一 ID
   */
  generateId() {
    return `ann-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
  }
};

// src/core/FlashcardManager.ts
var FlashcardManager = class {
  constructor(app, dataManager, plugin) {
    this.app = app;
    this.dataManager = dataManager;
    this.plugin = plugin;
    this.flashcards = /* @__PURE__ */ new Map();
    this.reviewLogs = [];
    this.dataFolder = `${this.app.vault.configDir}/plugins/learning-system/data`;
  }
  async initialize() {
    await this.loadFlashcards();
    await this.loadReviewLogs();
  }
  // ==================== 统一创建入口 ====================
  /**
   * 🆕 统一入口: 从 ContentUnit 创建闪卡
   * 适配所有场景: 右键提取、Scan、批量创建、快速生成
   */
  async createFlashcardFromUnit(unit, options) {
    const cardType = (options == null ? void 0 : options.cardType) || (unit.type === "QA" ? "qa" : "cloze");
    let flashcard;
    if (cardType === "qa" || unit.type === "QA") {
      const question = (options == null ? void 0 : options.customQuestion) || unit.content;
      const answer = (options == null ? void 0 : options.customAnswer) || unit.answer || unit.content;
      flashcard = await this.createQACard(unit.id, question, answer);
    } else {
      const text = unit.fullContext || unit.content;
      const answer = (options == null ? void 0 : options.customAnswer) || unit.content;
      const deletions = [{
        index: text.indexOf(answer),
        answer
      }];
      flashcard = await this.createClozeCard(unit.id, text, deletions);
    }
    return flashcard;
  }
  // ==================== 核心创建方法 ====================
  /**
   * 创建问答卡（唯一版本，合并了所有功能）
   */
  async createQACard(contentUnitId, question, answer, deck) {
    const contentUnit = this.dataManager.getContentUnit(contentUnitId);
    if (!contentUnit)
      throw new Error("Content unit not found");
    const card = {
      id: this.generateId(),
      type: "qa",
      sourceContentId: contentUnitId,
      sourceFile: contentUnit.source.file,
      anchorLink: contentUnit.source.anchorLink,
      front: question,
      back: answer,
      deck: deck || this.inferDeck(contentUnit.source.file),
      tags: contentUnit.metadata.tags,
      scheduling: this.initializeScheduling(),
      stats: {
        totalReviews: 0,
        correctCount: 0,
        averageTime: 0,
        difficulty: 0.5
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.flashcards.set(card.id, card);
    contentUnit.flashcardIds.push(card.id);
    await this.dataManager.saveContentUnits([contentUnit]);
    await this.persistFlashcards();
    return card;
  }
  /**
   * 创建完形填空卡（唯一版本，合并了所有功能）
   */
  async createClozeCard(contentUnitId, original, deletions) {
    const contentUnit = this.dataManager.getContentUnit(contentUnitId);
    if (!contentUnit)
      throw new Error("Content unit not found");
    const front = this.generateClozeText(original, deletions);
    const back = deletions.map((d) => d.answer);
    const card = {
      id: this.generateId(),
      type: "cloze",
      sourceContentId: contentUnitId,
      sourceFile: contentUnit.source.file,
      anchorLink: contentUnit.source.anchorLink,
      front,
      back,
      cloze: {
        original,
        deletions
      },
      deck: this.inferDeck(contentUnit.source.file),
      tags: contentUnit.metadata.tags,
      scheduling: this.initializeScheduling(),
      stats: {
        totalReviews: 0,
        correctCount: 0,
        averageTime: 0,
        difficulty: 0.5
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.flashcards.set(card.id, card);
    contentUnit.flashcardIds.push(card.id);
    await this.dataManager.saveContentUnits([contentUnit]);
    await this.persistFlashcards();
    return card;
  }
  // ==================== 查询方法 ====================
  /**
   * 获取闪卡
   */
  getFlashcard(id) {
    return this.flashcards.get(id);
  }
  /**
   * 获取所有闪卡
   */
  getAllFlashcards() {
    return Array.from(this.flashcards.values());
  }
  /**
   * 获取今日待复习的卡片
   */
  getDueCards() {
    const now = Date.now();
    return Array.from(this.flashcards.values()).filter((card) => card.scheduling.due <= now).sort((a, b) => {
      const aPriority = this.getCardPriority(a);
      const bPriority = this.getCardPriority(b);
      return bPriority - aPriority;
    });
  }
  /**
   * 获取新卡片
   */
  getNewCards() {
    return Array.from(this.flashcards.values()).filter((card) => card.scheduling.state === "new");
  }
  // ==================== 更新和删除 ====================
  /**
   * 更新卡片（复习后）
   */
  async updateCard(card) {
    this.flashcards.set(card.id, card);
    await this.persistFlashcards();
  }
  /**
   * 删除卡片
   */
  async deleteCard(id) {
    const card = this.flashcards.get(id);
    if (!card)
      return;
    const contentUnit = this.dataManager.getContentUnit(card.sourceContentId);
    if (contentUnit) {
      const index = contentUnit.flashcardIds.indexOf(id);
      if (index > -1) {
        contentUnit.flashcardIds.splice(index, 1);
        await this.dataManager.saveContentUnits([contentUnit]);
      }
    }
    this.flashcards.delete(id);
    await this.persistFlashcards();
  }
  // ==================== 复习日志 ====================
  /**
   * 记录复习日志
   */
  async logReview(log) {
    this.reviewLogs.push(log);
    if (this.reviewLogs.length > 1e3) {
      this.reviewLogs = this.reviewLogs.slice(-1e3);
    }
    await this.persistReviewLogs();
  }
  /**
   * 获取卡片的复习历史
   */
  getCardReviewHistory(cardId) {
    return this.reviewLogs.filter((log) => log.flashcardId === cardId);
  }
  // ==================== 统计 ====================
  /**
   * 获取统计数据
   */
  getStats() {
    const all = this.getAllFlashcards();
    const due = this.getDueCards();
    const newCards = this.getNewCards();
    const today = new Date().setHours(0, 0, 0, 0);
    const reviewedToday = this.reviewLogs.filter(
      (log) => log.timestamp >= today
    ).length;
    return {
      total: all.length,
      new: newCards.length,
      due: due.length,
      reviewedToday,
      totalReviews: this.reviewLogs.length
    };
  }
  // ==================== 私有工具方法 ====================
  /**
   * 加载闪卡
   */
  async loadFlashcards() {
    try {
      const path = `${this.dataFolder}/flashcards.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(path)) {
        const data = await adapter.read(path);
        const flashcards = JSON.parse(data);
        for (const card of flashcards) {
          this.flashcards.set(card.id, card);
        }
      }
    } catch (error) {
      console.error("Error loading flashcards:", error);
    }
  }
  /**
   * 加载复习日志
   */
  async loadReviewLogs() {
    try {
      const path = `${this.dataFolder}/review-logs.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(path)) {
        const data = await adapter.read(path);
        this.reviewLogs = JSON.parse(data);
      }
    } catch (error) {
      console.error("Error loading review logs:", error);
    }
  }
  /**
   * 初始化调度参数
   */
  initializeScheduling() {
    return {
      interval: 0,
      ease: 2.5,
      due: Date.now(),
      lapses: 0,
      reps: 0,
      state: "new"
    };
  }
  /**
   * 生成完形填空文本
   */
  generateClozeText(original, deletions) {
    let result = original;
    const sorted = [...deletions].sort((a, b) => b.index - a.index);
    for (const deletion of sorted) {
      const before = result.substring(0, deletion.index);
      const after = result.substring(deletion.index + deletion.answer.length);
      result = `${before}[...]${after}`;
    }
    return result;
  }
  /**
   * 推断卡组名称
   */
  inferDeck(filePath) {
    const parts = filePath.split("/");
    return parts.length > 1 ? parts[parts.length - 2] : "Default";
  }
  /**
   * 获取卡片优先级
   */
  getCardPriority(card) {
    const now = Date.now();
    const overdue = Math.max(0, now - card.scheduling.due);
    const daysOverdue = overdue / (24 * 60 * 60 * 1e3);
    if (card.scheduling.state === "new")
      return 100 + daysOverdue;
    if (card.scheduling.state === "relearning")
      return 200 + daysOverdue;
    return daysOverdue;
  }
  /**
   * 持久化闪卡
   */
  async persistFlashcards() {
    try {
      const path = `${this.dataFolder}/flashcards.json`;
      const flashcards = Array.from(this.flashcards.values());
      const data = JSON.stringify(flashcards, null, 2);
      await this.app.vault.adapter.write(path, data);
    } catch (error) {
      console.error("Error persisting flashcards:", error);
    }
  }
  /**
   * 持久化复习日志
   */
  async persistReviewLogs() {
    try {
      const path = `${this.dataFolder}/review-logs.json`;
      const data = JSON.stringify(this.reviewLogs, null, 2);
      await this.app.vault.adapter.write(path, data);
    } catch (error) {
      console.error("Error persisting review logs:", error);
    }
  }
  /**
   * 生成唯一 ID
   */
  generateId() {
    return `card-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  extractionEnabled: true,
  autoScan: false,
  defaultDeck: "Default"
};
var LearningSystemPlugin = class extends import_obsidian10.Plugin {
  async onload() {
    console.log("Loading Learning System Plugin");
    await this.loadSettings();
    this.dataManager = new DataManager(this.app, this);
    await this.dataManager.initialize();
    this.annotationManager = new AnnotationManager(this.app, this);
    await this.annotationManager.initialize();
    this.flashcardManager = new FlashcardManager(
      this.app,
      this.dataManager,
      this
    );
    await this.flashcardManager.initialize();
    this.extractionEngine = new ExtractionEngine(
      this.app,
      this.dataManager,
      this.flashcardManager
    );
    this.registerView(
      VIEW_TYPE_OVERVIEW,
      (leaf) => new OverviewView(leaf, this)
    );
    this.registerView(
      VIEW_TYPE_SIDEBAR_OVERVIEW,
      (leaf) => new SidebarOverviewView(leaf, this, false)
    );
    this.registerView(
      VIEW_TYPE_MAIN_OVERVIEW,
      (leaf) => new SidebarOverviewView(leaf, this, true)
    );
    this.registerView(
      VIEW_TYPE_REVIEW,
      (leaf) => new ReviewView(leaf, this)
    );
    this.registerView(
      VIEW_TYPE_STATS,
      (leaf) => new StatsView(leaf, this)
    );
    this.registerEvent(
      this.app.workspace.on("editor-menu", (menu, editor, view) => {
        if (view instanceof import_obsidian10.MarkdownView) {
          const file = view.file;
          if (file) {
            this.extractionEngine.registerContextMenu(menu, editor, file);
          }
        }
      })
    );
    this.addSettingTab(new SettingsTab(this.app, this));
    this.addCommands();
    this.addRibbonIcon("layout-list", "Open Learning Overview(Sidebar)", () => {
      this.activateSidebarOverview();
    });
    this.addRibbonIcon("layers", "Start Review", () => {
      this.activateReview();
    });
    this.setupStatusBar();
    console.log("Learning System Plugin loaded");
  }
  onunload() {
    console.log("Unloading Learning System Plugin");
    const styleEl = document.getElementById("learning-overview-styles");
    if (styleEl) {
      styleEl.remove();
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  addCommands() {
    this.addCommand({
      id: "scan-current-file",
      name: "Scan current file for content",
      callback: async () => {
        const activeFile = this.app.workspace.getActiveFile();
        if (!activeFile)
          return;
        await this.extractionEngine.scanFile(activeFile);
        this.refreshOverview();
      }
    });
    this.addCommand({
      id: "scan-vault",
      name: "Scan entire vault",
      callback: async () => {
        await this.extractionEngine.scanVault();
        this.refreshOverview();
      }
    });
    this.addCommand({
      id: "open-overview",
      name: "Open Learning Overview(Sidebar)",
      callback: () => {
        this.activateSidebarOverview();
      }
    });
    this.addCommand({
      id: "open-main-overview",
      name: "Open Learning Overview (Main View)",
      callback: async () => {
        await this.activateMainView();
      }
    });
    this.addCommand({
      id: "add-file-annotation",
      name: "Add file annotation",
      callback: async () => {
        const activeFile = this.app.workspace.getActiveFile();
        if (!activeFile)
          return;
        const { FileAnnotationModal: FileAnnotationModal2 } = await Promise.resolve().then(() => (init_AnnotationModal(), AnnotationModal_exports));
        const modal = new FileAnnotationModal2(
          this.app,
          this,
          activeFile.path,
          () => this.refreshOverview()
        );
        modal.open();
      }
    });
    this.addCommand({
      id: "start-review",
      name: "Start flashcard review",
      callback: () => {
        this.activateReview();
      }
    });
    this.addCommand({
      id: "show-stats",
      name: "Show flashcard statistics",
      callback: () => {
        this.activateStats();
      }
    });
  }
  async activateMainView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType(VIEW_TYPE_MAIN_OVERVIEW)[0];
    if (!leaf) {
      leaf = workspace.getLeaf("tab");
      await leaf.setViewState({
        type: VIEW_TYPE_MAIN_OVERVIEW,
        active: true
      });
    }
    workspace.revealLeaf(leaf);
  }
  async activateSidebarOverview() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_SIDEBAR_OVERVIEW);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getRightLeaf(false);
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_SIDEBAR_OVERVIEW,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async activateOverview() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_OVERVIEW);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getLeaf(`tab`);
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_OVERVIEW,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async activateReview() {
    const stats = this.flashcardManager.getStats();
    if (stats.due === 0) {
      new import_obsidian10.Notice("No cards due for review!");
      return;
    }
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_REVIEW);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getLeaf(true);
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_REVIEW,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async activateStats() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_STATS);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getLeaf("tab");
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_STATS,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  refreshOverview() {
    const overviewLeaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_OVERVIEW);
    overviewLeaves.forEach((leaf) => {
      const view = leaf.view;
      view.refresh();
    });
    const sidebarLeaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_SIDEBAR_OVERVIEW);
    sidebarLeaves.forEach((leaf) => {
      const view = leaf.view;
      view.refresh();
    });
    const mainLeaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_MAIN_OVERVIEW);
    mainLeaves.forEach((leaf) => {
      const view = leaf.view;
      view.refresh();
    });
  }
  setupStatusBar() {
    const statusBarItem = this.addStatusBarItem();
    statusBarItem.addClass("learning-system-status");
    const updateStatus = () => {
      const stats = this.flashcardManager.getStats();
      statusBarItem.setText(`\u{1F0CF} ${stats.due} due`);
      statusBarItem.title = `${stats.due} cards due for review
${stats.new} new cards`;
    };
    updateStatus();
    this.registerInterval(
      window.setInterval(updateStatus, 6e4)
    );
    statusBarItem.addEventListener("click", () => {
      this.activateReview();
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL2NvcmUvUXVpY2tGbGFzaGNhcmRDcmVhdG9yLnRzIiwgInNyYy91aS9GbGFzaGNhcmRDcmVhdGVNb2RhbC50cyIsICJzcmMvdWkvT3ZlcnZpZXdWaWV3LnRzIiwgInNyYy91aS9Bbm5vdGF0aW9uTW9kYWwudHMiLCAic3JjL21haW4udHMiLCAic3JjL3VpL1NldHRpbmdzVGFiLnRzIiwgInNyYy91aS9TaWRlYmFyT3ZlcnZpZXdWaWV3LnRzIiwgInNyYy91aS9SZXZpZXdWaWV3LnRzIiwgInNyYy9jb3JlL0NhcmRTY2hlZHVsZXIudHMiLCAic3JjL3VpL1N0YXRzVmlldy50cyIsICJzcmMvY29yZS9BbmFseXRpY3NFbmdpbmUudHMiLCAic3JjL2NvcmUvRGF0YU1hbmFnZXIudHMiLCAic3JjL2NvcmUvRXh0cmFjdGlvbkVuZ2luZS50cyIsICJzcmMvY29yZS9Bbm5vdGF0aW9uTWFuYWdlci50cyIsICJzcmMvY29yZS9GbGFzaGNhcmRNYW5hZ2VyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IENvbnRlbnRVbml0IH0gZnJvbSAnLi4vY29yZS9EYXRhTWFuYWdlcic7XG5pbXBvcnQgeyBBbm5vdGF0aW9uIH0gZnJvbSAnLi4vY29yZS9Bbm5vdGF0aW9uTWFuYWdlcic7XG5cbi8qKlxuICogXHU0RTAwXHU5NTJFXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXHU1REU1XHU1MTc3XHU3QzdCXG4gKi9cbmV4cG9ydCBjbGFzcyBRdWlja0ZsYXNoY2FyZENyZWF0b3Ige1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4pIHt9XG5cbiAgLyoqXG4gICAqIFx1NEVDRVx1NjNEMFx1NTNENlx1NTE4NVx1NUJCOVx1NEUwMFx1OTUyRVx1NTIxQlx1NUVGQVx1OTVFRVx1N0I1NFx1NTM2MVxuICAgKiBcdTU5ODJcdTY3OUNcdTY3MDlcdTYyNzlcdTZDRThcdUZGMENcdTRGN0ZcdTc1MjhcdTYyNzlcdTZDRThcdTRGNUNcdTRFM0FcdTdCNTRcdTY4NDhcbiAgICovXG4gIGFzeW5jIGNyZWF0ZVF1aWNrUUFDYXJkKGNvbnRlbnRVbml0OiBDb250ZW50VW5pdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24oY29udGVudFVuaXQuaWQpO1xuICAgICAgXG4gICAgICBsZXQgcXVlc3Rpb246IHN0cmluZztcbiAgICAgIGxldCBhbnN3ZXI6IHN0cmluZztcblxuICAgICAgaWYgKGFubm90YXRpb24gJiYgYW5ub3RhdGlvbi5jb250ZW50KSB7XG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1NjI3OVx1NkNFOFx1RkYwQ1x1NEY3Rlx1NzUyOFx1NjI3OVx1NkNFOFx1NTE4NVx1NUJCOVx1NEY1Q1x1NEUzQVx1N0I1NFx1Njg0OFxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTYyNzlcdTZDRThcdTY2MkZcdTU0MjZcdTY2MkZcdTk1RUVcdTk4OThcdTVGNjJcdTVGMEZcbiAgICAgICAgaWYgKHRoaXMuaXNRdWVzdGlvbihhbm5vdGF0aW9uLmNvbnRlbnQpKSB7XG4gICAgICAgICAgLy8gXHU2Mjc5XHU2Q0U4XHU2NjJGXHU5NUVFXHU5ODk4XHVGRjBDXHU3NTFGXHU2MjEwXHU5RUQ4XHU4QkE0XHU5NUVFXHU5ODk4XHVGRjBDXHU2Mjc5XHU2Q0U4XHU1MTg1XHU1QkI5XHU0RjVDXHU0RTNBXHU3QjU0XHU2ODQ4XG4gICAgICAgICAgcXVlc3Rpb24gPSB0aGlzLmdlbmVyYXRlRGVmYXVsdFF1ZXN0aW9uKGNvbnRlbnRVbml0KTtcbiAgICAgICAgICBhbnN3ZXIgPSBhbm5vdGF0aW9uLmNvbnRlbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gXHU2Mjc5XHU2Q0U4XHU0RTBEXHU2NjJGXHU5NUVFXHU5ODk4XHU1RjYyXHU1RjBGXHVGRjBDXHU3NTFGXHU2MjEwXHU5RUQ4XHU4QkE0XHU5NUVFXHU5ODk4XHVGRjBDXHU2Mjc5XHU2Q0U4XHU1MTg1XHU1QkI5XHU0RjVDXHU0RTNBXHU3QjU0XHU2ODQ4XG4gICAgICAgICAgcXVlc3Rpb24gPSB0aGlzLmdlbmVyYXRlRGVmYXVsdFF1ZXN0aW9uKGNvbnRlbnRVbml0KTtcbiAgICAgICAgICBhbnN3ZXIgPSBhbm5vdGF0aW9uLmNvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1NkNBMVx1NjcwOVx1NjI3OVx1NkNFOFx1RkYwQ1x1NEY3Rlx1NzUyOFx1OUVEOFx1OEJBNFx1NkEyMVx1NUYwRlxuICAgICAgICBxdWVzdGlvbiA9IHRoaXMuZ2VuZXJhdGVEZWZhdWx0UXVlc3Rpb24oY29udGVudFVuaXQpO1xuICAgICAgICBhbnN3ZXIgPSBjb250ZW50VW5pdC5jb250ZW50O1xuICAgICAgfVxuXG4gICAgICAvLyBcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcbiAgICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmNyZWF0ZVFBQ2FyZChcbiAgICAgICAgY29udGVudFVuaXQuaWQsXG4gICAgICAgIHF1ZXN0aW9uLFxuICAgICAgICBhbnN3ZXJcbiAgICAgICk7XG5cbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBGbGFzaGNhcmQgY3JlYXRlZCEgKFEmQSlgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgcXVpY2sgZmxhc2hjYXJkOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBGYWlsZWQgdG8gY3JlYXRlIGZsYXNoY2FyZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTRFQ0VcdTYzRDBcdTUzRDZcdTUxODVcdTVCQjlcdTRFMDBcdTk1MkVcdTUyMUJcdTVFRkFcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdTUzNjFcbiAgICogXHU4MUVBXHU1MkE4XHU4QkM2XHU1MjJCXHU1MTczXHU5NTJFXHU4QkNEXG4gICAqL1xuICBhc3luYyBjcmVhdGVRdWlja0Nsb3plQ2FyZChjb250ZW50VW5pdDogQ29udGVudFVuaXQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qga2V5d29yZHMgPSB0aGlzLmV4dHJhY3RLZXl3b3Jkcyhjb250ZW50VW5pdC5jb250ZW50KTtcbiAgICAgIFxuICAgICAgaWYgKGtleXdvcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgTm8ga2V5d29yZHMgZm91bmQgZm9yIGNsb3plIGRlbGV0aW9uJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gXHU2MjdFXHU1MjMwXHU1MTczXHU5NTJFXHU4QkNEXHU1NzI4XHU2NTg3XHU2NzJDXHU0RTJEXHU3Njg0XHU0RjREXHU3RjZFXG4gICAgICBjb25zdCBkZWxldGlvbnMgPSBrZXl3b3Jkcy5tYXAoa2V5d29yZCA9PiB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gY29udGVudFVuaXQuY29udGVudC5pbmRleE9mKGtleXdvcmQud29yZCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgYW5zd2VyOiBrZXl3b3JkLndvcmRcbiAgICAgICAgfTtcbiAgICAgIH0pLmZpbHRlcihkID0+IGQuaW5kZXggIT09IC0xKTtcblxuICAgICAgaWYgKGRlbGV0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIENvdWxkIG5vdCBjcmVhdGUgY2xvemUgZGVsZXRpb25zJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gXHU1MjFCXHU1RUZBXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU1MzYxXG4gICAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5jcmVhdGVDbG96ZUNhcmQoXG4gICAgICAgIGNvbnRlbnRVbml0LmlkLFxuICAgICAgICBjb250ZW50VW5pdC5jb250ZW50LFxuICAgICAgICBkZWxldGlvbnNcbiAgICAgICk7XG5cbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBGbGFzaGNhcmQgY3JlYXRlZCEgKENsb3plIHdpdGggJHtkZWxldGlvbnMubGVuZ3RofSBibGFua3MpYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHF1aWNrIGNsb3plIGNhcmQ6JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIEZhaWxlZCB0byBjcmVhdGUgZmxhc2hjYXJkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NjY3QVx1ODBGRFx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1RkYwOFx1ODFFQVx1NTJBOFx1NTIyNFx1NjVBRFx1N0M3Qlx1NTc4Qlx1RkYwOVxuICAgKi9cbiAgYXN5bmMgY3JlYXRlU21hcnRDYXJkKGNvbnRlbnRVbml0OiBDb250ZW50VW5pdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbihjb250ZW50VW5pdC5pZCk7XG5cbiAgICAvLyBcdTU5ODJcdTY3OUNcdTY3MDlcdTk1RUVcdTk4OThcdTVGNjJcdTVGMEZcdTc2ODRcdTYyNzlcdTZDRThcdUZGMENcdTUyMUJcdTVFRkFcdTk1RUVcdTdCNTRcdTUzNjFcbiAgICBpZiAoYW5ub3RhdGlvbiAmJiB0aGlzLmlzUXVlc3Rpb24oYW5ub3RhdGlvbi5jb250ZW50KSkge1xuICAgICAgYXdhaXQgdGhpcy5jcmVhdGVRdWlja1FBQ2FyZChjb250ZW50VW5pdCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU1MTg1XHU1QkI5XHU4RjgzXHU3N0VEXHU0RTE0XHU1MzA1XHU1NDJCXHU1MTczXHU5NTJFXHU0RkUxXHU2MDZGXHVGRjBDXHU1MjFCXHU1RUZBXHU5NUVFXHU3QjU0XHU1MzYxXG4gICAgaWYgKGNvbnRlbnRVbml0LmNvbnRlbnQubGVuZ3RoIDwgMjAwKSB7XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZVF1aWNrUUFDYXJkKGNvbnRlbnRVbml0KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBcdTU5ODJcdTY3OUNcdTUxODVcdTVCQjlcdThGODNcdTk1N0ZcdUZGMENcdTUyMUJcdTVFRkFcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdTUzNjFcbiAgICBhd2FpdCB0aGlzLmNyZWF0ZVF1aWNrQ2xvemVDYXJkKGNvbnRlbnRVbml0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYyNzlcdTkxQ0ZcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcbiAgICovXG4gIGFzeW5jIGNyZWF0ZUJhdGNoQ2FyZHMoXG4gICAgY29udGVudFVuaXRzOiBDb250ZW50VW5pdFtdLFxuICAgIHR5cGU6ICdxYScgfCAnY2xvemUnIHwgJ3NtYXJ0JyA9ICdzbWFydCdcbiAgKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IG51bWJlcjsgZmFpbGVkOiBudW1iZXIgfT4ge1xuICAgIGxldCBzdWNjZXNzID0gMDtcbiAgICBsZXQgZmFpbGVkID0gMDtcblxuICAgIGZvciAoY29uc3QgdW5pdCBvZiBjb250ZW50VW5pdHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgIGNhc2UgJ3FhJzpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlUXVpY2tRQUNhcmQodW5pdCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdjbG96ZSc6XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZVF1aWNrQ2xvemVDYXJkKHVuaXQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnc21hcnQnOlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVTbWFydENhcmQodW5pdCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBzdWNjZXNzKys7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjYXJkOicsIGVycm9yKTtcbiAgICAgICAgZmFpbGVkKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzcywgZmFpbGVkIH07XG4gIH1cblxuICAvKipcbiAgICogXHU1MjI0XHU2NUFEXHU2NTg3XHU2NzJDXHU2NjJGXHU1NDI2XHU2NjJGXHU5NUVFXHU5ODk4XG4gICAqL1xuICBwcml2YXRlIGlzUXVlc3Rpb24odGV4dDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcXVlc3Rpb25Xb3JkcyA9IFsnd2hhdCcsICd3aHknLCAnaG93JywgJ3doZW4nLCAnd2hlcmUnLCAnd2hvJywgJ3doaWNoJ107XG4gICAgY29uc3QgbG93ZXJUZXh0ID0gdGV4dC50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICBcbiAgICAvLyBcdTRFRTVcdTk1RUVcdTUzRjdcdTdFRDNcdTVDM0VcbiAgICBpZiAobG93ZXJUZXh0LmVuZHNXaXRoKCc/JykpIHJldHVybiB0cnVlO1xuICAgIFxuICAgIC8vIFx1NEVFNVx1NzU5MVx1OTVFRVx1OEJDRFx1NUYwMFx1NTkzNFxuICAgIGZvciAoY29uc3Qgd29yZCBvZiBxdWVzdGlvbldvcmRzKSB7XG4gICAgICBpZiAobG93ZXJUZXh0LnN0YXJ0c1dpdGgod29yZCArICcgJykpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdTRFMkRcdTY1ODdcdTk1RUVcdTUzRTVcdTcyNzlcdTVGODFcbiAgICBpZiAodGV4dC5pbmNsdWRlcygnXHU0RUMwXHU0RTQ4JykgfHwgdGV4dC5pbmNsdWRlcygnXHU0RTNBXHU0RUMwXHU0RTQ4JykgfHwgXG4gICAgICAgIHRleHQuaW5jbHVkZXMoJ1x1NjAwRVx1NEU0OCcpIHx8IHRleHQuaW5jbHVkZXMoJ1x1NTk4Mlx1NEY1NScpIHx8XG4gICAgICAgIHRleHQuaW5jbHVkZXMoJ1x1NTQxN1x1RkYxRicpIHx8IHRleHQuaW5jbHVkZXMoJ1x1NTQ2Mlx1RkYxRicpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NzUxRlx1NjIxMFx1OUVEOFx1OEJBNFx1OTVFRVx1OTg5OFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZURlZmF1bHRRdWVzdGlvbihjb250ZW50VW5pdDogQ29udGVudFVuaXQpOiBzdHJpbmcge1xuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjcwOVx1NjgwN1x1OTg5OFx1RkYwQ1x1NEY3Rlx1NzUyOFx1NjgwN1x1OTg5OFx1NzUxRlx1NjIxMFx1OTVFRVx1OTg5OFxuICAgIGlmIChjb250ZW50VW5pdC5zb3VyY2UuaGVhZGluZykge1xuICAgICAgY29uc3QgaGVhZGluZyA9IGNvbnRlbnRVbml0LnNvdXJjZS5oZWFkaW5nLnJlcGxhY2UoL14jK1xccyovLCAnJyk7XG4gICAgICByZXR1cm4gYFdoYXQgaXMgdGhlIGtleSBwb2ludCBhYm91dCBcIiR7aGVhZGluZ31cIj9gO1xuICAgIH1cblxuICAgIC8vIFx1NjgzOVx1NjM2RVx1NTE4NVx1NUJCOVx1OTU3Rlx1NUVBNlx1NzUxRlx1NjIxMFx1NEUwRFx1NTQwQ1x1NzY4NFx1OTVFRVx1OTg5OFxuICAgIGlmIChjb250ZW50VW5pdC5jb250ZW50Lmxlbmd0aCA8IDUwKSB7XG4gICAgICByZXR1cm4gYFdoYXQgZG9lcyBcIiR7Y29udGVudFVuaXQuY29udGVudH1cIiBtZWFuP2A7XG4gICAgfSBlbHNlIGlmIChjb250ZW50VW5pdC5jb250ZW50Lmxlbmd0aCA8IDE1MCkge1xuICAgICAgY29uc3QgZmlyc3RXb3JkcyA9IGNvbnRlbnRVbml0LmNvbnRlbnQuc3Vic3RyaW5nKDAsIDMwKSArICcuLi4nO1xuICAgICAgcmV0dXJuIGBFeHBsYWluOiBcIiR7Zmlyc3RXb3Jkc31cImA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBgV2hhdCBhcmUgdGhlIGtleSBwb2ludHMgaW4gdGhpcyBjb250ZW50P2A7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NjNEMFx1NTNENlx1NTE3M1x1OTUyRVx1OEJDRFx1RkYwOFx1NzUyOFx1NEU4RVx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1RkYwOVxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0S2V5d29yZHModGV4dDogc3RyaW5nKTogQXJyYXk8eyB3b3JkOiBzdHJpbmc7IHNjb3JlOiBudW1iZXIgfT4ge1xuICAgIC8vIFx1NTIwNlx1OEJDRFxuICAgIGNvbnN0IHdvcmRzID0gdGV4dC5tYXRjaCgvXFxiW0EtWmEtel17Myx9XFxiL2cpIHx8IFtdO1xuICAgIFxuICAgIC8vIFx1NUUzOFx1ODlDMVx1NTA1Q1x1NzUyOFx1OEJDRFxuICAgIGNvbnN0IHN0b3BXb3JkcyA9IG5ldyBTZXQoW1xuICAgICAgJ3RoZScsICdpcycsICdhdCcsICd3aGljaCcsICdvbicsICdhJywgJ2FuJywgJ2FuZCcsICdvcicsICdidXQnLFxuICAgICAgJ2luJywgJ3dpdGgnLCAndG8nLCAnZm9yJywgJ29mJywgJ2FzJywgJ2J5JywgJ3RoaXMnLCAndGhhdCcsXG4gICAgICAnZnJvbScsICd0aGV5JywgJ3dlJywgJ3NheScsICdoZXInLCAnc2hlJywgJ2hlJywgJ3dpbGwnLCAnbXknLFxuICAgICAgJ29uZScsICdhbGwnLCAnd291bGQnLCAndGhlcmUnLCAndGhlaXInLCAnd2hhdCcsICdzbycsICd1cCcsICdvdXQnLFxuICAgICAgJ2lmJywgJ2Fib3V0JywgJ3dobycsICdnZXQnLCAnd2hpY2gnLCAnZ28nLCAnbWUnLCAnd2hlbicsICdtYWtlJyxcbiAgICAgICdjYW4nLCAnbGlrZScsICd0aW1lJywgJ25vJywgJ2p1c3QnLCAnaGltJywgJ2tub3cnLCAndGFrZScsICdwZW9wbGUnLFxuICAgICAgJ2ludG8nLCAneWVhcicsICd5b3VyJywgJ2dvb2QnLCAnc29tZScsICdjb3VsZCcsICd0aGVtJywgJ3NlZScsICdvdGhlcidcbiAgICBdKTtcblxuICAgIC8vIFx1OEJDRFx1OTg5MVx1N0VERlx1OEJBMVxuICAgIGNvbnN0IHdvcmRGcmVxID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcbiAgICB3b3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xuICAgICAgY29uc3QgbG93ZXIgPSB3b3JkLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoIXN0b3BXb3Jkcy5oYXMobG93ZXIpICYmIHdvcmQubGVuZ3RoID4gMykge1xuICAgICAgICB3b3JkRnJlcS5zZXQod29yZCwgKHdvcmRGcmVxLmdldCh3b3JkKSB8fCAwKSArIDEpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gXHU4QkExXHU3Qjk3XHU1MjA2XHU2NTcwXHVGRjA4XHU4MDAzXHU4NjUxXHU5ODkxXHU3Mzg3XHUzMDAxXHU5NTdGXHU1RUE2XHUzMDAxXHU1OTI3XHU1MTk5XHVGRjA5XG4gICAgY29uc3Qgc2NvcmVkID0gQXJyYXkuZnJvbSh3b3JkRnJlcS5lbnRyaWVzKCkpLm1hcCgoW3dvcmQsIGZyZXFdKSA9PiB7XG4gICAgICBsZXQgc2NvcmUgPSBmcmVxO1xuICAgICAgXG4gICAgICAvLyBcdTk1N0ZcdThCQ0RcdTUyQTBcdTUyMDZcbiAgICAgIGlmICh3b3JkLmxlbmd0aCA+IDgpIHNjb3JlICs9IDI7XG4gICAgICBlbHNlIGlmICh3b3JkLmxlbmd0aCA+IDYpIHNjb3JlICs9IDE7XG4gICAgICBcbiAgICAgIC8vIFx1OTk5Nlx1NUI1N1x1NkJDRFx1NTkyN1x1NTE5OVx1NTJBMFx1NTIwNlx1RkYwOFx1NTNFRlx1ODBGRFx1NjYyRlx1NEUxM1x1NjcwOVx1NTQwRFx1OEJDRFx1RkYwOVxuICAgICAgaWYgKHdvcmRbMF0gPT09IHdvcmRbMF0udG9VcHBlckNhc2UoKSkgc2NvcmUgKz0gMTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHsgd29yZCwgc2NvcmUgfTtcbiAgICB9KTtcblxuICAgIC8vIFx1NjM5Mlx1NUU4Rlx1NUU3Nlx1OEZENFx1NTZERVx1NTI0RDNcdTRFMkFcdTUxNzNcdTk1MkVcdThCQ0RcbiAgICByZXR1cm4gc2NvcmVkXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi5zY29yZSAtIGEuc2NvcmUpXG4gICAgICAuc2xpY2UoMCwgMyk7XG4gIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBDb250ZW50VW5pdCB9IGZyb20gJy4uL2NvcmUvRGF0YU1hbmFnZXInO1xuXG5leHBvcnQgY2xhc3MgRmxhc2hjYXJkQ3JlYXRlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgY29udGVudFVuaXQ6IENvbnRlbnRVbml0O1xuICBwcml2YXRlIGNhcmRUeXBlOiAncWEnIHwgJ2Nsb3plJyA9ICdxYSc7XG4gIFxuICAvLyBRJkEgXHU1QjU3XHU2QkI1XG4gIHByaXZhdGUgcXVlc3Rpb246IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIGFuc3dlcjogc3RyaW5nID0gJyc7XG4gIFxuICAvLyBDbG96ZSBcdTVCNTdcdTZCQjVcbiAgcHJpdmF0ZSBjbG96ZVRleHQ6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIHNlbGVjdGVkUmFuZ2VzOiB7IHN0YXJ0OiBudW1iZXI7IGVuZDogbnVtYmVyOyB0ZXh0OiBzdHJpbmcgfVtdID0gW107XG4gIFxuICBwcml2YXRlIG9uU2F2ZTogKCkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4sXG4gICAgY29udGVudFVuaXQ6IENvbnRlbnRVbml0LFxuICAgIG9uU2F2ZTogKCkgPT4gdm9pZFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMuY29udGVudFVuaXQgPSBjb250ZW50VW5pdDtcbiAgICB0aGlzLm9uU2F2ZSA9IG9uU2F2ZTtcbiAgICBcbiAgICAvLyBcdTlFRDhcdThCQTRcdTRGN0ZcdTc1MjhcdTUxODVcdTVCQjlcdTRGNUNcdTRFM0FcdTdCNTRcdTY4NDgvXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU2NTg3XHU2NzJDXG4gICAgdGhpcy5hbnN3ZXIgPSBjb250ZW50VW5pdC5jb250ZW50O1xuICAgIHRoaXMuY2xvemVUZXh0ID0gY29udGVudFVuaXQuY29udGVudDtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2ZsYXNoY2FyZC1jcmVhdGUtbW9kYWwnKTtcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQ3JlYXRlIEZsYXNoY2FyZCcgfSk7XG5cbiAgICAvLyBcdTY2M0VcdTc5M0FcdTZFOTBcdTUxODVcdTVCQjlcbiAgICBjb25zdCBjb250ZW50UHJldmlldyA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdjb250ZW50LXByZXZpZXcnIH0pO1xuICAgIGNvbnRlbnRQcmV2aWV3LmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1NvdXJjZSBDb250ZW50OicgfSk7XG4gICAgY29udGVudFByZXZpZXcuY3JlYXRlRWwoJ2Jsb2NrcXVvdGUnLCB7IHRleHQ6IHRoaXMuY29udGVudFVuaXQuY29udGVudCB9KTtcblxuICAgIC8vIFx1NTM2MVx1NzI0N1x1N0M3Qlx1NTc4Qlx1OTAwOVx1NjJFOVxuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5zZXROYW1lKCdDYXJkIFR5cGUnKVxuICAgICAgLnNldERlc2MoJ0Nob29zZSB0aGUgdHlwZSBvZiBmbGFzaGNhcmQnKVxuICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAuYWRkT3B0aW9uKCdxYScsICdcdUQ4M0RcdURDREQgUXVlc3Rpb24gJiBBbnN3ZXInKVxuICAgICAgICAgIC5hZGRPcHRpb24oJ2Nsb3plJywgJ1x1MjcwRlx1RkUwRiBDbG96ZSBEZWxldGlvbicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuY2FyZFR5cGUpXG4gICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2FyZFR5cGUgPSB2YWx1ZSBhcyAncWEnIHwgJ2Nsb3plJztcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaENhcmRJbnB1dHMoKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgLy8gXHU1MzYxXHU3MjQ3XHU4RjkzXHU1MTY1XHU1MzNBXHU1N0RGXHU1QkI5XHU1NjY4XG4gICAgdGhpcy5jYXJkSW5wdXRDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1pbnB1dC1jb250YWluZXInIH0pO1xuICAgIHRoaXMucmVmcmVzaENhcmRJbnB1dHMoKTtcblxuICAgIC8vIFx1NjMwOVx1OTRBRVxuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdtb2RhbC1idXR0b24tY29udGFpbmVyJyB9KTtcblxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KTtcbiAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuXG4gICAgY29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdDcmVhdGUgRmxhc2hjYXJkJyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgc2F2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc2F2ZUZsYXNoY2FyZCgpKTtcblxuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIGNhcmRJbnB1dENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSByZWZyZXNoQ2FyZElucHV0cygpIHtcbiAgICB0aGlzLmNhcmRJbnB1dENvbnRhaW5lci5lbXB0eSgpO1xuXG4gICAgaWYgKHRoaXMuY2FyZFR5cGUgPT09ICdxYScpIHtcbiAgICAgIHRoaXMucmVuZGVyUUFJbnB1dHMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW5kZXJDbG96ZUlucHV0cygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyUUFJbnB1dHMoKSB7XG4gICAgLy8gXHU5NUVFXHU5ODk4XHU4RjkzXHU1MTY1XG4gICAgbmV3IFNldHRpbmcodGhpcy5jYXJkSW5wdXRDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnUXVlc3Rpb24gKEZyb250KScpXG4gICAgICAuc2V0RGVzYygnV2hhdCBxdWVzdGlvbiBzaG91bGQgdGhpcyBjYXJkIGFzaz8nKVxuICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4ge1xuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciB5b3VyIHF1ZXN0aW9uLi4uJylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5xdWVzdGlvbilcbiAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5xdWVzdGlvbiA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB0ZXh0LmlucHV0RWwucm93cyA9IDM7XG4gICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgIH0pO1xuXG4gICAgLy8gXHU3QjU0XHU2ODQ4XHU4RjkzXHU1MTY1XG4gICAgbmV3IFNldHRpbmcodGhpcy5jYXJkSW5wdXRDb250YWluZXIpXG4gICAgICAuc2V0TmFtZSgnQW5zd2VyIChCYWNrKScpXG4gICAgICAuc2V0RGVzYygnV2hhdCBpcyB0aGUgY29ycmVjdCBhbnN3ZXI/JylcbiAgICAgIC5hZGRUZXh0QXJlYSh0ZXh0ID0+IHtcbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgdGhlIGFuc3dlci4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuYW5zd2VyKVxuICAgICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFuc3dlciA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB0ZXh0LmlucHV0RWwucm93cyA9IDM7XG4gICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgIH0pO1xuXG4gICAgLy8gXHU2M0QwXHU3OTNBXHVGRjFBXHU1M0VGXHU0RUU1XHU0RjdGXHU3NTI4XHU1MzlGXHU1MTg1XHU1QkI5XG4gICAgY29uc3QgaGludCA9IHRoaXMuY2FyZElucHV0Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2lucHV0LWhpbnQnIH0pO1xuICAgIGhpbnQuY3JlYXRlRWwoJ3NtYWxsJywgeyBcbiAgICAgIHRleHQ6ICdcdUQ4M0RcdURDQTEgVGlwOiBZb3UgY2FuIHVzZSB0aGUgc291cmNlIGNvbnRlbnQgYXMgdGhlIGFuc3dlciwgb3Igd3JpdGUgeW91ciBvd24uJ1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJDbG96ZUlucHV0cygpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNhcmRJbnB1dENvbnRhaW5lcjtcblxuICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDbG96ZSBEZWxldGlvbicgfSk7XG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyBcbiAgICAgIHRleHQ6ICdTZWxlY3QgdGV4dCB0byBoaWRlIChjbG96ZSBkZWxldGlvbikuIENsaWNrIG9uIHdvcmRzIHRvIHRvZ2dsZSBzZWxlY3Rpb24uJyxcbiAgICAgIGNsczogJ2Nsb3plLWluc3RydWN0aW9uJ1xuICAgIH0pO1xuXG4gICAgLy8gXHU1M0VGXHU5MDA5XHU2MkU5XHU3Njg0XHU2NTg3XHU2NzJDXHU1MzNBXHU1N0RGXG4gICAgY29uc3QgdGV4dENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjbG96ZS10ZXh0LWNvbnRhaW5lcicgfSk7XG4gICAgdGhpcy5yZW5kZXJTZWxlY3RhYmxlVGV4dCh0ZXh0Q29udGFpbmVyKTtcblxuICAgIC8vIFx1OTAwOVx1NEUyRFx1NzY4NFx1NTIyMFx1OTY2NFx1OTg3OVx1NTIxN1x1ODg2OFxuICAgIGlmICh0aGlzLnNlbGVjdGVkUmFuZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkTGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzZWxlY3RlZC1kZWxldGlvbnMnIH0pO1xuICAgICAgc2VsZWN0ZWRMaXN0LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1NlbGVjdGVkIERlbGV0aW9uczonIH0pO1xuICAgICAgXG4gICAgICB0aGlzLnNlbGVjdGVkUmFuZ2VzLmZvckVhY2goKHJhbmdlLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBpdGVtID0gc2VsZWN0ZWRMaXN0LmNyZWF0ZURpdih7IGNsczogJ2RlbGV0aW9uLWl0ZW0nIH0pO1xuICAgICAgICBpdGVtLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHtpbmRleCArIDF9LiBgIH0pO1xuICAgICAgICBpdGVtLmNyZWF0ZVNwYW4oeyBcbiAgICAgICAgICB0ZXh0OiByYW5nZS50ZXh0LFxuICAgICAgICAgIGNsczogJ2RlbGV0aW9uLXRleHQnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVtb3ZlQnRuID0gaXRlbS5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgIHRleHQ6ICdcdTAwRDcnLFxuICAgICAgICAgIGNsczogJ3JlbW92ZS1kZWxldGlvbi1idG4nXG4gICAgICAgIH0pO1xuICAgICAgICByZW1vdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFJhbmdlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgIHRoaXMucmVmcmVzaENhcmRJbnB1dHMoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTk4ODRcdTg5QzhcbiAgICBjb25zdCBwcmV2aWV3ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2Nsb3plLXByZXZpZXcnIH0pO1xuICAgIHByZXZpZXcuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnUHJldmlldzonIH0pO1xuICAgIHByZXZpZXcuY3JlYXRlRGl2KHsgXG4gICAgICB0ZXh0OiB0aGlzLmdlbmVyYXRlQ2xvemVQcmV2aWV3KCksXG4gICAgICBjbHM6ICdwcmV2aWV3LXRleHQnXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclNlbGVjdGFibGVUZXh0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCB3b3JkcyA9IHRoaXMuY2xvemVUZXh0LnNwbGl0KC8oXFxzKykvKTsgLy8gXHU0RkREXHU3NTU5XHU3QTdBXHU2ODNDXG4gICAgbGV0IGN1cnJlbnRJbmRleCA9IDA7XG5cbiAgICB3b3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xuICAgICAgY29uc3Qgd29yZFN0YXJ0ID0gY3VycmVudEluZGV4O1xuICAgICAgY29uc3Qgd29yZEVuZCA9IGN1cnJlbnRJbmRleCArIHdvcmQubGVuZ3RoO1xuXG4gICAgICBpZiAod29yZC50cmltKCkpIHtcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU5MDA5XHU0RTJEXG4gICAgICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkUmFuZ2VzLnNvbWUoXG4gICAgICAgICAgcmFuZ2UgPT4gcmFuZ2Uuc3RhcnQgPT09IHdvcmRTdGFydCAmJiByYW5nZS5lbmQgPT09IHdvcmRFbmRcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBzcGFuID0gY29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgIHRleHQ6IHdvcmQsXG4gICAgICAgICAgY2xzOiBpc1NlbGVjdGVkID8gJ2Nsb3plLXdvcmQgc2VsZWN0ZWQnIDogJ2Nsb3plLXdvcmQnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNwYW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy50b2dnbGVXb3JkU2VsZWN0aW9uKHdvcmRTdGFydCwgd29yZEVuZCwgd29yZCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiB3b3JkIH0pO1xuICAgICAgfVxuXG4gICAgICBjdXJyZW50SW5kZXggPSB3b3JkRW5kO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB0b2dnbGVXb3JkU2VsZWN0aW9uKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCB0ZXh0OiBzdHJpbmcpIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuc2VsZWN0ZWRSYW5nZXMuZmluZEluZGV4KFxuICAgICAgcmFuZ2UgPT4gcmFuZ2Uuc3RhcnQgPT09IHN0YXJ0ICYmIHJhbmdlLmVuZCA9PT0gZW5kXG4gICAgKTtcblxuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAvLyBcdTUzRDZcdTZEODhcdTkwMDlcdTYyRTlcbiAgICAgIHRoaXMuc2VsZWN0ZWRSYW5nZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU2REZCXHU1MkEwXHU5MDA5XHU2MkU5XG4gICAgICB0aGlzLnNlbGVjdGVkUmFuZ2VzLnB1c2goeyBzdGFydCwgZW5kLCB0ZXh0IH0pO1xuICAgICAgLy8gXHU2MzA5XHU0RjREXHU3RjZFXHU2MzkyXHU1RThGXG4gICAgICB0aGlzLnNlbGVjdGVkUmFuZ2VzLnNvcnQoKGEsIGIpID0+IGEuc3RhcnQgLSBiLnN0YXJ0KTtcbiAgICB9XG5cbiAgICB0aGlzLnJlZnJlc2hDYXJkSW5wdXRzKCk7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlQ2xvemVQcmV2aWV3KCk6IHN0cmluZyB7XG4gICAgbGV0IHByZXZpZXcgPSB0aGlzLmNsb3plVGV4dDtcbiAgICBjb25zdCBzb3J0ZWQgPSBbLi4udGhpcy5zZWxlY3RlZFJhbmdlc10uc29ydCgoYSwgYikgPT4gYi5zdGFydCAtIGEuc3RhcnQpO1xuXG4gICAgZm9yIChjb25zdCByYW5nZSBvZiBzb3J0ZWQpIHtcbiAgICAgIGNvbnN0IGJlZm9yZSA9IHByZXZpZXcuc3Vic3RyaW5nKDAsIHJhbmdlLnN0YXJ0KTtcbiAgICAgIGNvbnN0IGFmdGVyID0gcHJldmlldy5zdWJzdHJpbmcocmFuZ2UuZW5kKTtcbiAgICAgIHByZXZpZXcgPSBgJHtiZWZvcmV9Wy4uLl0ke2FmdGVyfWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByZXZpZXc7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNhdmVGbGFzaGNhcmQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICh0aGlzLmNhcmRUeXBlID09PSAncWEnKSB7XG4gICAgICAgIC8vIFx1OUE4Q1x1OEJDMVx1OEY5M1x1NTE2NVxuICAgICAgICBpZiAoIXRoaXMucXVlc3Rpb24udHJpbSgpKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGVudGVyIGEgcXVlc3Rpb24nKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmFuc3dlci50cmltKCkpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2UgZW50ZXIgYW4gYW5zd2VyJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU5NUVFXHU3QjU0XHU1MzYxXG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuY3JlYXRlUUFDYXJkKFxuICAgICAgICAgIHRoaXMuY29udGVudFVuaXQuaWQsXG4gICAgICAgICAgdGhpcy5xdWVzdGlvbixcbiAgICAgICAgICB0aGlzLmFuc3dlclxuICAgICAgICApO1xuXG4gICAgICAgIG5ldyBOb3RpY2UoJ1EmQSBmbGFzaGNhcmQgY3JlYXRlZCEnKTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gXHU5QThDXHU4QkMxXHU4RjkzXHU1MTY1XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUmFuZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBzZWxlY3QgYXQgbGVhc3Qgb25lIHdvcmQgdG8gaGlkZScpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1NTM2MVxuICAgICAgICBjb25zdCBkZWxldGlvbnMgPSB0aGlzLnNlbGVjdGVkUmFuZ2VzLm1hcChyYW5nZSA9PiAoe1xuICAgICAgICAgIGluZGV4OiByYW5nZS5zdGFydCxcbiAgICAgICAgICBhbnN3ZXI6IHJhbmdlLnRleHRcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuY3JlYXRlQ2xvemVDYXJkKFxuICAgICAgICAgIHRoaXMuY29udGVudFVuaXQuaWQsXG4gICAgICAgICAgdGhpcy5jbG96ZVRleHQsXG4gICAgICAgICAgZGVsZXRpb25zXG4gICAgICAgICk7XG5cbiAgICAgICAgbmV3IE5vdGljZSgnQ2xvemUgZmxhc2hjYXJkIGNyZWF0ZWQhJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMub25TYXZlKCk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZmxhc2hjYXJkOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ0Vycm9yIGNyZWF0aW5nIGZsYXNoY2FyZCcpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAuZmxhc2hjYXJkLWNyZWF0ZS1tb2RhbCB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIG1heC13aWR0aDogNjAwcHg7XG4gICAgICB9XG5cbiAgICAgIC5jb250ZW50LXByZXZpZXcge1xuICAgICAgICBtYXJnaW46IDIwcHggMDtcbiAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC5jb250ZW50LXByZXZpZXcgaDMge1xuICAgICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5jb250ZW50LXByZXZpZXcgYmxvY2txdW90ZSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkLWlucHV0LWNvbnRhaW5lciB7XG4gICAgICAgIG1hcmdpbjogMjBweCAwO1xuICAgICAgfVxuXG4gICAgICAuaW5wdXQtaGludCB7XG4gICAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC8qIENsb3plIFx1NjgzN1x1NUYwRiAqL1xuICAgICAgLmNsb3plLWluc3RydWN0aW9uIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtdGV4dC1jb250YWluZXIge1xuICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuODtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgY3Vyc29yOiBkZWZhdWx0O1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtd29yZCB7XG4gICAgICAgIHBhZGRpbmc6IDJweCA0cHg7XG4gICAgICAgIG1hcmdpbjogMCAxcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLmNsb3plLXdvcmQ6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLmNsb3plLXdvcmQuc2VsZWN0ZWQge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3RlZC1kZWxldGlvbnMge1xuICAgICAgICBtYXJnaW46IDE1cHggMDtcbiAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3RlZC1kZWxldGlvbnMgaDQge1xuICAgICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5kZWxldGlvbi1pdGVtIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDZweCAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICAgIH1cblxuICAgICAgLmRlbGV0aW9uLXRleHQge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLnJlbW92ZS1kZWxldGlvbi1idG4ge1xuICAgICAgICBwYWRkaW5nOiAycHggOHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yKTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxO1xuICAgICAgfVxuXG4gICAgICAucmVtb3ZlLWRlbGV0aW9uLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICB9XG5cbiAgICAgIC5jbG96ZS1wcmV2aWV3IHtcbiAgICAgICAgbWFyZ2luOiAxNXB4IDA7XG4gICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtcHJldmlldyBoNCB7XG4gICAgICAgIG1hcmdpbi10b3A6IDA7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLnByZXZpZXctdGV4dCB7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjtcbiAgICAgIH1cblxuICAgICAgLm1vZGFsLWJ1dHRvbi1jb250YWluZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5tb2RhbC1idXR0b24tY29udGFpbmVyIGJ1dHRvbiB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn0iLCAiLy8gb3ZlcnZpZXcgVmlldy50c1xuaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlLCBNZW51LCBNb2RhbCwgQXBwLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IENvbnRlbnRVbml0IH0gZnJvbSAnLi4vY29yZS9EYXRhTWFuYWdlcic7XG5pbXBvcnQgeyBRdWlja0ZsYXNoY2FyZENyZWF0b3IgfSBmcm9tICcuLi9jb3JlL1F1aWNrRmxhc2hjYXJkQ3JlYXRvcic7XG5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfT1ZFUlZJRVcgPSAnbGVhcm5pbmctc3lzdGVtLW92ZXJ2aWV3JztcblxuZXhwb3J0IGNsYXNzIE92ZXJ2aWV3VmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbjtcbi8vICAgcHJpdmF0ZSBjb250ZW50RWw6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIGdyb3VwQnk6ICdmaWxlJyB8ICd0YWcnIHwgJ2RhdGUnID0gJ2ZpbGUnO1xuICBwcml2YXRlIHNlYXJjaFF1ZXJ5OiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBxdWlja0NyZWF0b3I6IFF1aWNrRmxhc2hjYXJkQ3JlYXRvcjtcbiAgcHJpdmF0ZSBiYXRjaE1vZGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBzZWxlY3RlZFVuaXRJZHM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4pIHtcbiAgICBzdXBlcihsZWFmKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLnF1aWNrQ3JlYXRvciA9IG5ldyBRdWlja0ZsYXNoY2FyZENyZWF0b3IocGx1Z2luKTtcbiAgfVxuXG4gIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFZJRVdfVFlQRV9PVkVSVklFVztcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdMZWFybmluZyBPdmVydmlldyc7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdsYXlvdXQtbGlzdCc7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgXG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcblxuICAgIHRoaXMuY3JlYXRlVG9vbGJhcihjb250YWluZXIpO1xuICAgIHRoaXMuY29udGVudEVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2xlYXJuaW5nLXN5c3RlbS1jb250ZW50JyB9KTtcbiAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgYXN5bmMgb25DbG9zZSgpIHt9XG5cbiAgLy8gXHU2REZCXHU1MkEwXHU1MjMwIE92ZXJ2aWV3VmlldyBcdTdDN0JcdTRFMkRcbnNjcm9sbFRvRmlsZShmaWxlUGF0aDogc3RyaW5nKSB7XG4gICAgLy8gdGhpcy5zZWxlY3RlZEZpbGUgPSBmaWxlUGF0aDsgLy8gXHU1OTgyXHU2NzlDXHU0RjYwXHU2NzA5XHU4RkQ5XHU0RTJBXHU1QzVFXHU2MDI3XG4gICAgXG4gICAgLy8gXHU2RURBXHU1MkE4XHU1MjMwXHU1QkY5XHU1RTk0XHU3Njg0XHU2NTg3XHU0RUY2XHU3RUM0XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBmaWxlR3JvdXBzID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvckFsbCgnLmZpbGUtZ3JvdXAnKTtcbiAgICAgIGZpbGVHcm91cHMuZm9yRWFjaCgoZ3JvdXApID0+IHtcbiAgICAgICAgY29uc3QgaGVhZGVyID0gZ3JvdXAucXVlcnlTZWxlY3RvcignLmdyb3VwLWhlYWRlcicpO1xuICAgICAgICBpZiAoaGVhZGVyPy50ZXh0Q29udGVudD8uaW5jbHVkZXMoZmlsZVBhdGguc3BsaXQoJy8nKS5wb3AoKT8ucmVwbGFjZSgnLm1kJywgJycpIHx8ICcnKSkge1xuICAgICAgICAgIGdyb3VwLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSwgMTAwKTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlVG9vbGJhcihjb250YWluZXI6IEVsZW1lbnQpIHtcbiAgICBjb25zdCB0b29sYmFyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2xlYXJuaW5nLXN5c3RlbS10b29sYmFyJyB9KTtcblxuICAgIGNvbnN0IHNlYXJjaENvbnRhaW5lciA9IHRvb2xiYXIuY3JlYXRlRGl2KHsgY2xzOiAnc2VhcmNoLWNvbnRhaW5lcicgfSk7XG4gICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzZWFyY2hDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgcGxhY2Vob2xkZXI6ICdTZWFyY2ggY29udGVudC4uLicsXG4gICAgICBjbHM6ICdzZWFyY2gtaW5wdXQnXG4gICAgfSk7XG5cbiAgICBzZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICB0aGlzLnNlYXJjaFF1ZXJ5ID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBncm91cENvbnRhaW5lciA9IHRvb2xiYXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtY29udGFpbmVyJyB9KTtcbiAgICBncm91cENvbnRhaW5lci5jcmVhdGVTcGFuKHsgdGV4dDogJ0dyb3VwIGJ5OiAnLCBjbHM6ICdncm91cC1sYWJlbCcgfSk7XG5cbiAgICBjb25zdCBncm91cFNlbGVjdCA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZUVsKCdzZWxlY3QnLCB7IGNsczogJ2dyb3VwLXNlbGVjdCcgfSk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IFtcbiAgICAgIHsgdmFsdWU6ICdmaWxlJywgbGFiZWw6ICdGaWxlJyB9LFxuICAgICAgeyB2YWx1ZTogJ3RhZycsIGxhYmVsOiAnVGFnJyB9LFxuICAgICAgeyB2YWx1ZTogJ2RhdGUnLCBsYWJlbDogJ0RhdGUnIH1cbiAgICBdO1xuXG4gICAgb3B0aW9ucy5mb3JFYWNoKG9wdCA9PiB7XG4gICAgICBjb25zdCBvcHRpb24gPSBncm91cFNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywge1xuICAgICAgICB2YWx1ZTogb3B0LnZhbHVlLFxuICAgICAgICB0ZXh0OiBvcHQubGFiZWxcbiAgICAgIH0pO1xuICAgICAgaWYgKG9wdC52YWx1ZSA9PT0gdGhpcy5ncm91cEJ5KSB7XG4gICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBncm91cFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgdGhpcy5ncm91cEJ5ID0gKGUudGFyZ2V0IGFzIEhUTUxTZWxlY3RFbGVtZW50KS52YWx1ZSBhcyBhbnk7XG4gICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9KTtcblxuICAgIC8vIFx1NjI3OVx1OTFDRlx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVx1RkYwOFx1NzlGQlx1NTIzMFx1NTI0RFx1OTc2Mlx1RkYwOVxuICAgIGNvbnN0IGJhdGNoQWN0aW9ucyA9IHRvb2xiYXIuY3JlYXRlRGl2KHsgY2xzOiAnYmF0Y2gtYWN0aW9ucy1vdmVydmlldycgfSk7XG4gICAgXG4gICAgY29uc3QgYmF0Y2hNb2RlQnRuID0gYmF0Y2hBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiB0aGlzLmJhdGNoTW9kZSA/ICdcdTI3MTMgRG9uZScgOiAnXHUyNjEwIEJhdGNoIE1vZGUnLFxuICAgICAgY2xzOiAnYmF0Y2gtbW9kZS1idG4nXG4gICAgfSk7XG4gICAgYmF0Y2hNb2RlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5iYXRjaE1vZGUgPSAhdGhpcy5iYXRjaE1vZGU7XG4gICAgICBpZiAoIXRoaXMuYmF0Y2hNb2RlKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLmJhdGNoTW9kZSkge1xuICAgICAgLy8gXHU1MTY4XHU5MDA5L1x1NTNENlx1NkQ4OFx1NTE2OFx1OTAwOVx1NjMwOVx1OTRBRVxuICAgICAgY29uc3Qgc2VsZWN0QWxsQnRuID0gYmF0Y2hBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIHRleHQ6IHRoaXMuaXNBbGxTZWxlY3RlZCgpID8gJ1x1MjYxMSBEZXNlbGVjdCBBbGwnIDogJ1x1MjYxMCBTZWxlY3QgQWxsJyxcbiAgICAgICAgY2xzOiAnc2VsZWN0LWFsbC1idG4nXG4gICAgICB9KTtcbiAgICAgIHNlbGVjdEFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy50b2dnbGVTZWxlY3RBbGwoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBiYXRjaERlbGV0ZUJ0biA9IGJhdGNoQWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICB0ZXh0OiBgXHVEODNEXHVEREQxXHVGRTBGIERlbGV0ZSAoJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSlgLFxuICAgICAgICBjbHM6ICdiYXRjaC1kZWxldGUtYnRuJ1xuICAgICAgfSk7XG4gICAgICBiYXRjaERlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5iYXRjaERlbGV0ZU5vdGVzKCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgYmF0Y2hDcmVhdGVCdG4gPSBiYXRjaEFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogYFx1MjZBMSBDcmVhdGUgQ2FyZHMgKCR7dGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZX0pYCxcbiAgICAgICAgY2xzOiAnYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bidcbiAgICAgIH0pO1xuICAgICAgYmF0Y2hDcmVhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuYmF0Y2hDcmVhdGVGbGFzaGNhcmRzKCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYmF0Y2hDcmVhdGVBbGxCdG4gPSBiYXRjaEFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogJ1x1MjZBMSBCYXRjaCBDcmVhdGUgQ2FyZHMnLFxuICAgICAgICBjbHM6ICdiYXRjaC1jcmVhdGUtYnRuJ1xuICAgICAgfSk7XG4gICAgICBiYXRjaENyZWF0ZUFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc2hvd0JhdGNoQ3JlYXRlTW9kYWwoKSk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVmcmVzaEJ0biA9IHRvb2xiYXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdcdTI3RjMnLFxuICAgICAgY2xzOiAncmVmcmVzaC1idG4nXG4gICAgfSk7XG4gICAgcmVmcmVzaEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMucmVmcmVzaCgpKTtcblxuICAgIGNvbnN0IHN0YXRzID0gdG9vbGJhci5jcmVhdGVEaXYoeyBjbHM6ICdzdGF0cy1jb250YWluZXInIH0pO1xuICAgIGNvbnN0IHRvdGFsQ291bnQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRBbGxDb250ZW50VW5pdHMoKS5sZW5ndGg7XG4gICAgc3RhdHMuY3JlYXRlU3Bhbih7IHRleHQ6IGBUb3RhbDogJHt0b3RhbENvdW50fWAsIGNsczogJ3N0YXRzLXRleHQnIH0pO1xuICB9XG5cbiAgYXN5bmMgcmVmcmVzaCgpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgbGV0IHVuaXRzID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0QWxsQ29udGVudFVuaXRzKCk7XG5cbiAgICBpZiAodGhpcy5zZWFyY2hRdWVyeSkge1xuICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLnNlYXJjaFF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+XG4gICAgICAgIHVuaXQuY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSB8fFxuICAgICAgICB1bml0LnNvdXJjZS5maWxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5zb21lKHRhZyA9PiB0YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkpXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh1bml0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7XG4gICAgICAgIHRleHQ6IHRoaXMuc2VhcmNoUXVlcnkgPyAnTm8gcmVzdWx0cyBmb3VuZCcgOiAnTm8gY29udGVudCBleHRyYWN0ZWQgeWV0JyxcbiAgICAgICAgY2xzOiAnZW1wdHktc3RhdGUnXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRoaXMuZ3JvdXBCeSkge1xuICAgICAgY2FzZSAnZmlsZSc6XG4gICAgICAgIHRoaXMucmVuZGVyQnlGaWxlKHVuaXRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0YWcnOlxuICAgICAgICB0aGlzLnJlbmRlckJ5VGFnKHVuaXRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgdGhpcy5yZW5kZXJCeURhdGUodW5pdHMpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckJ5RmlsZSh1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIGNvbnN0IGdyb3VwZWQgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudFVuaXRbXT4oKTtcblxuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICBpZiAoIWdyb3VwZWQuaGFzKHVuaXQuc291cmNlLmZpbGUpKSB7XG4gICAgICAgIGdyb3VwZWQuc2V0KHVuaXQuc291cmNlLmZpbGUsIFtdKTtcbiAgICAgIH1cbiAgICAgIGdyb3VwZWQuZ2V0KHVuaXQuc291cmNlLmZpbGUpIS5wdXNoKHVuaXQpO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc29ydGVkRmlsZXMgPSBBcnJheS5mcm9tKGdyb3VwZWQua2V5cygpKS5zb3J0KCk7XG4gICAgc29ydGVkRmlsZXMuZm9yRWFjaChmaWxlUGF0aCA9PiB7XG4gICAgICBjb25zdCBmaWxlVW5pdHMgPSBncm91cGVkLmdldChmaWxlUGF0aCkhO1xuICAgICAgdGhpcy5yZW5kZXJGaWxlR3JvdXAoZmlsZVBhdGgsIGZpbGVVbml0cyk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckZpbGVHcm91cChmaWxlUGF0aDogc3RyaW5nLCB1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIGNvbnN0IGdyb3VwQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnZmlsZS1ncm91cCcgfSk7XG5cbiAgICBjb25zdCBoZWFkZXIgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdncm91cC1oZWFkZXInIH0pO1xuICAgIGNvbnN0IGZpbGVOYW1lID0gZmlsZVBhdGguc3BsaXQoJy8nKS5wb3AoKT8ucmVwbGFjZSgnLm1kJywgJycpIHx8IGZpbGVQYXRoO1xuICAgIGNvbnN0IHRpdGxlRWwgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtdGl0bGUnIH0pO1xuICAgIHRpdGxlRWwuY3JlYXRlU3Bhbih7IHRleHQ6ICdcdUQ4M0RcdURDQzQgJywgY2xzOiAnZ3JvdXAtaWNvbicgfSk7XG4gICAgdGl0bGVFbC5jcmVhdGVTcGFuKHsgdGV4dDogZmlsZU5hbWUsIGNsczogJ2dyb3VwLW5hbWUnIH0pO1xuXG4gICAgaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHt1bml0cy5sZW5ndGh9YCwgY2xzOiAnY291bnQtYmFkZ2UnIH0pO1xuXG4gICAgY29uc3QgY29sbGFwc2VCdG4gPSBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6ICdcdTI1QkMnLCBjbHM6ICdjb2xsYXBzZS1idG4nIH0pO1xuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU2NTg3XHU0RUY2XHU2Mjc5XHU2Q0U4XG4gICAgY29uc3QgZmlsZUFubm90YXRpb25zID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0RmlsZUFubm90YXRpb25zKGZpbGVQYXRoKTtcbiAgICBpZiAoZmlsZUFubm90YXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGZpbGVBbm5vdGF0aW9uRGlzcGxheSA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IFxuICAgICAgICBjbHM6ICdmaWxlLWFubm90YXRpb24tZGlzcGxheScgXG4gICAgICB9KTtcbiAgICAgIGZpbGVBbm5vdGF0aW9ucy5mb3JFYWNoKGFubiA9PiB7XG4gICAgICAgIGNvbnN0IGFubkVsID0gZmlsZUFubm90YXRpb25EaXNwbGF5LmNyZWF0ZURpdih7IGNsczogJ2ZpbGUtYW5ub3RhdGlvbi1pdGVtJyB9KTtcbiAgICAgICAgYW5uRWwuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogJ1x1RDgzRFx1RENDQyAnIH0pO1xuICAgICAgICBhbm5FbC5jcmVhdGVTcGFuKHsgdGV4dDogYW5uLmNvbnRlbnQgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50Q29udGFpbmVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtY29udGVudCcgfSk7XG4gICAgdW5pdHMuZm9yRWFjaCh1bml0ID0+IHtcbiAgICAgIHRoaXMucmVuZGVyQ29udGVudFVuaXQoY29udGVudENvbnRhaW5lciwgdW5pdCk7XG4gICAgfSk7XG5cbiAgICBsZXQgaXNDb2xsYXBzZWQgPSBmYWxzZTtcbiAgICBjb2xsYXBzZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgaXNDb2xsYXBzZWQgPSAhaXNDb2xsYXBzZWQ7XG4gICAgICBjb250ZW50Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBpc0NvbGxhcHNlZCA/ICdub25lJyA6ICdibG9jayc7XG4gICAgICBjb2xsYXBzZUJ0bi50ZXh0Q29udGVudCA9IGlzQ29sbGFwc2VkID8gJ1x1MjVCNicgOiAnXHUyNUJDJztcbiAgICB9KTtcblxuICAgIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSkub3BlbkZpbGUoZmlsZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckNvbnRlbnRVbml0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0KSB7XG4gICAgY29uc3QgY2FyZCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjb250ZW50LWNhcmQnIH0pO1xuXG4gICAgLy8gXHU2Mjc5XHU5MUNGXHU5MDA5XHU2MkU5XHU2QTIxXHU1RjBGXHVGRjFBXHU2REZCXHU1MkEwY2hlY2tib3hcbiAgICBpZiAodGhpcy5iYXRjaE1vZGUpIHtcbiAgICAgIGNvbnN0IGNoZWNrYm94ID0gY2FyZC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgIGNsczogJ2JhdGNoLWNoZWNrYm94J1xuICAgICAgfSk7XG4gICAgICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdW5pdC1pZCcsIHVuaXQuaWQpO1xuICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRoaXMuc2VsZWN0ZWRVbml0SWRzLmhhcyh1bml0LmlkKTtcbiAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCkge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmFkZCh1bml0LmlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5kZWxldGUodW5pdC5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVCYXRjaEJ1dHRvbnMoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRlbnRBcmVhID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLWNvbnRlbnQnIH0pO1xuICAgIGNvbnN0IHR5cGVJY29uID0gdGhpcy5nZXRUeXBlSWNvbih1bml0LnR5cGUpO1xuICAgIGNvbnRlbnRBcmVhLmNyZWF0ZVNwYW4oeyB0ZXh0OiB0eXBlSWNvbiArICcgJywgY2xzOiAndHlwZS1pY29uJyB9KTtcbiAgICBcbiAgICBjb25zdCBjb250ZW50VGV4dCA9IGNvbnRlbnRBcmVhLmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IHVuaXQuY29udGVudCwgXG4gICAgICBjbHM6ICdjb250ZW50LXRleHQgY2xpY2thYmxlLWNvbnRlbnQnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHU3MEI5XHU1MUZCXHU1MTg1XHU1QkI5XHU1QzU1XHU1RjAwXHU2Mjc5XHU2Q0U4XHU4RjkzXHU1MTY1XG4gICAgY29udGVudFRleHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMuc2hvd0Fubm90YXRpb25JbnB1dChjYXJkLCB1bml0LCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKT8uY29udGVudCk7XG4gICAgfSk7XG5cbiAgICBpZiAodW5pdC5hbm5vdGF0aW9uSWQpIHtcbiAgICAgIGNvbnRlbnRBcmVhLmNyZWF0ZVNwYW4oe1xuICAgICAgICB0ZXh0OiAnXHVEODNEXHVEQ0REJyxcbiAgICAgICAgY2xzOiAnYW5ub3RhdGlvbi1iYWRnZSBoYXMtYW5ub3RhdGlvbicsXG4gICAgICAgIGF0dHI6IHsgdGl0bGU6ICdIYXMgYW5ub3RhdGlvbicgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHVuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnRlbnRBcmVhLmNyZWF0ZVNwYW4oe1xuICAgICAgICB0ZXh0OiAnXHVEODNDXHVEQ0NGJyxcbiAgICAgICAgY2xzOiAnZmxhc2hjYXJkLWJhZGdlJyxcbiAgICAgICAgYXR0cjogeyB0aXRsZTogYCR7dW5pdC5mbGFzaGNhcmRJZHMubGVuZ3RofSBmbGFzaGNhcmQocylgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1NjYzRVx1NzkzQVx1NjI3OVx1NkNFOFx1NTE4NVx1NUJCOVxuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKTtcbiAgICBpZiAoYW5ub3RhdGlvbikge1xuICAgICAgY29uc3QgYW5ub3RhdGlvbkRpc3BsYXkgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ2Fubm90YXRpb24tZGlzcGxheScgfSk7XG4gICAgICBcbiAgICAgIGlmIChhbm5vdGF0aW9uLmJhZGdlKSB7XG4gICAgICAgIGNvbnN0IGJhZGdlID0gYW5ub3RhdGlvbkRpc3BsYXkuY3JlYXRlU3Bhbih7XG4gICAgICAgICAgdGV4dDogYW5ub3RhdGlvbi5iYWRnZS50ZXh0LFxuICAgICAgICAgIGNsczogJ2Fubm90YXRpb24tYmFkZ2UtZGlzcGxheSdcbiAgICAgICAgfSk7XG4gICAgICAgIGJhZGdlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGFubm90YXRpb24uYmFkZ2UuY29sb3I7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGFubm90YXRpb25Db250ZW50ID0gYW5ub3RhdGlvbkRpc3BsYXkuY3JlYXRlRGl2KHsgXG4gICAgICAgIGNsczogJ2Fubm90YXRpb24tY29udGVudC1kaXNwbGF5J1xuICAgICAgfSk7XG4gICAgICBhbm5vdGF0aW9uQ29udGVudC5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0FDICcgfSk7XG4gICAgICBhbm5vdGF0aW9uQ29udGVudC5jcmVhdGVTcGFuKHsgdGV4dDogYW5ub3RhdGlvbi5jb250ZW50IH0pO1xuICAgICAgXG4gICAgICAvLyBcdTY1RjZcdTk1RjRcdTYyMzNcbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IGFubm90YXRpb25EaXNwbGF5LmNyZWF0ZURpdih7IGNsczogJ2Fubm90YXRpb24tdGltZXN0YW1wJyB9KTtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShhbm5vdGF0aW9uLm1ldGFkYXRhLmNyZWF0ZWRBdCk7XG4gICAgICB0aW1lc3RhbXAudGV4dENvbnRlbnQgPSBkYXRlLnRvTG9jYWxlU3RyaW5nKCk7XG4gICAgICBcbiAgICAgIC8vIFx1NzBCOVx1NTFGQlx1NjI3OVx1NkNFOFx1NEU1Rlx1NTNFRlx1NEVFNVx1N0YxNlx1OEY5MVxuICAgICAgYW5ub3RhdGlvbkRpc3BsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLnNob3dBbm5vdGF0aW9uSW5wdXQoY2FyZCwgdW5pdCwgYW5ub3RhdGlvbi5jb250ZW50KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IG1ldGFBcmVhID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLW1ldGEnIH0pO1xuXG4gICAgaWYgKHVuaXQubWV0YWRhdGEudGFncy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCB0YWdzQ29udGFpbmVyID0gbWV0YUFyZWEuY3JlYXRlU3Bhbih7IGNsczogJ3RhZ3MtY29udGFpbmVyJyB9KTtcbiAgICAgIHVuaXQubWV0YWRhdGEudGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgIHRhZ3NDb250YWluZXIuY3JlYXRlU3Bhbih7IHRleHQ6IHRhZywgY2xzOiAndGFnJyB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh1bml0LnNvdXJjZS5oZWFkaW5nKSB7XG4gICAgICBtZXRhQXJlYS5jcmVhdGVTcGFuKHtcbiAgICAgICAgdGV4dDogYFx1RDgzRFx1RENDRCAke3VuaXQuc291cmNlLmhlYWRpbmd9YCxcbiAgICAgICAgY2xzOiAnaGVhZGluZy1pbmZvJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgYWN0aW9uc0FyZWEgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ2NhcmQtYWN0aW9ucycgfSk7XG5cbiAgICBjb25zdCBqdW1wQnRuID0gYWN0aW9uc0FyZWEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdcdTIxOTcnLFxuICAgICAgY2xzOiAnYWN0aW9uLWJ0biBqdW1wLWJ0bicsXG4gICAgICBhdHRyOiB7IHRpdGxlOiAnSnVtcCB0byBzb3VyY2UnIH1cbiAgICB9KTtcbiAgICBqdW1wQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBhd2FpdCB0aGlzLmp1bXBUb1NvdXJjZSh1bml0KTtcbiAgICB9KTtcblxuICAgIC8vIFx1NEUwMFx1OTUyRVx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1NjMwOVx1OTRBRVx1N0VDNFxuICAgIGNvbnN0IGZsYXNoY2FyZEdyb3VwID0gYWN0aW9uc0FyZWEuY3JlYXRlRGl2KHsgY2xzOiAnZmxhc2hjYXJkLWJ0bi1ncm91cCcgfSk7XG5cbiAgICAvLyBcdTY2N0FcdTgwRkRcdTUyMUJcdTVFRkFcdUZGMDhcdTRFM0JcdTYzMDlcdTk0QUVcdUZGMDlcbiAgICBjb25zdCBxdWlja0NhcmRCdG4gPSBmbGFzaGNhcmRHcm91cC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1x1MjZBMScsXG4gICAgICBjbHM6ICdhY3Rpb24tYnRuIHF1aWNrLWNhcmQtYnRuJyxcbiAgICAgIGF0dHI6IHsgdGl0bGU6ICdRdWljayBjcmVhdGUgZmxhc2hjYXJkIChzbWFydCknIH1cbiAgICB9KTtcbiAgICBxdWlja0NhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGF3YWl0IHRoaXMucXVpY2tDcmVhdG9yLmNyZWF0ZVNtYXJ0Q2FyZCh1bml0KTtcbiAgICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICAgIH0pO1xuXG4gICAgLy8gXHU0RTBCXHU2MkM5XHU4M0RDXHU1MzU1XHU2MzA5XHU5NEFFXG4gICAgY29uc3QgbW9yZUNhcmRCdG4gPSBmbGFzaGNhcmRHcm91cC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1x1MjVCQycsXG4gICAgICBjbHM6ICdhY3Rpb24tYnRuIG1vcmUtY2FyZC1idG4nLFxuICAgICAgYXR0cjogeyB0aXRsZTogJ01vcmUgZmxhc2hjYXJkIG9wdGlvbnMnIH1cbiAgICB9KTtcbiAgICBtb3JlQ2FyZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5zaG93Rmxhc2hjYXJkTWVudShlLCB1bml0KTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGFjdGlvbnNBcmVhLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnXHVEODNEXHVEREQxJyxcbiAgICAgIGNsczogJ2FjdGlvbi1idG4gZGVsZXRlLWJ0bicsXG4gICAgICBhdHRyOiB7IHRpdGxlOiAnRGVsZXRlJyB9XG4gICAgfSk7XG4gICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBhd2FpdCB0aGlzLmRlbGV0ZUNvbnRlbnRVbml0KHVuaXQpO1xuICAgIH0pO1xuXG4gICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnNob3dDb250ZXh0TWVudShlLCB1bml0KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyQnlUYWcodW5pdHM6IENvbnRlbnRVbml0W10pIHtcbiAgICBjb25zdCBncm91cGVkID0gbmV3IE1hcDxzdHJpbmcsIENvbnRlbnRVbml0W10+KCk7XG5cbiAgICB1bml0cy5mb3JFYWNoKHVuaXQgPT4ge1xuICAgICAgaWYgKHVuaXQubWV0YWRhdGEudGFncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKCFncm91cGVkLmhhcygnVW50YWdnZWQnKSkge1xuICAgICAgICAgIGdyb3VwZWQuc2V0KCdVbnRhZ2dlZCcsIFtdKTtcbiAgICAgICAgfVxuICAgICAgICBncm91cGVkLmdldCgnVW50YWdnZWQnKSEucHVzaCh1bml0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgICAgaWYgKCFncm91cGVkLmhhcyh0YWcpKSB7XG4gICAgICAgICAgICBncm91cGVkLnNldCh0YWcsIFtdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZ3JvdXBlZC5nZXQodGFnKSEucHVzaCh1bml0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBzb3J0ZWRUYWdzID0gQXJyYXkuZnJvbShncm91cGVkLmtleXMoKSkuc29ydCgpO1xuICAgIHNvcnRlZFRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgY29uc3QgdGFnVW5pdHMgPSBncm91cGVkLmdldCh0YWcpITtcbiAgICAgIHRoaXMucmVuZGVyVGFnR3JvdXAodGFnLCB0YWdVbml0cyk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclRhZ0dyb3VwKHRhZzogc3RyaW5nLCB1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIGNvbnN0IGdyb3VwQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAndGFnLWdyb3VwJyB9KTtcblxuICAgIGNvbnN0IGhlYWRlciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLWhlYWRlcicgfSk7XG4gICAgY29uc3QgdGl0bGVFbCA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdncm91cC10aXRsZScgfSk7XG4gICAgdGl0bGVFbC5jcmVhdGVTcGFuKHsgdGV4dDogJ1x1RDgzQ1x1REZGN1x1RkUwRiAnLCBjbHM6ICdncm91cC1pY29uJyB9KTtcbiAgICB0aXRsZUVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiB0YWcsIGNsczogJ2dyb3VwLW5hbWUnIH0pO1xuXG4gICAgaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHt1bml0cy5sZW5ndGh9YCwgY2xzOiAnY291bnQtYmFkZ2UnIH0pO1xuXG4gICAgY29uc3QgY29sbGFwc2VCdG4gPSBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6ICdcdTI1QkMnLCBjbHM6ICdjb2xsYXBzZS1idG4nIH0pO1xuXG4gICAgY29uc3QgY29udGVudENvbnRhaW5lciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLWNvbnRlbnQnIH0pO1xuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICB0aGlzLnJlbmRlckNvbnRlbnRVbml0KGNvbnRlbnRDb250YWluZXIsIHVuaXQpO1xuICAgIH0pO1xuXG4gICAgbGV0IGlzQ29sbGFwc2VkID0gZmFsc2U7XG4gICAgY29sbGFwc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGlzQ29sbGFwc2VkID0gIWlzQ29sbGFwc2VkO1xuICAgICAgY29udGVudENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gaXNDb2xsYXBzZWQgPyAnbm9uZScgOiAnYmxvY2snO1xuICAgICAgY29sbGFwc2VCdG4udGV4dENvbnRlbnQgPSBpc0NvbGxhcHNlZCA/ICdcdTI1QjYnIDogJ1x1MjVCQyc7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckJ5RGF0ZSh1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIGNvbnN0IGdyb3VwZWQgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudFVuaXRbXT4oKTtcblxuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodW5pdC5tZXRhZGF0YS5jcmVhdGVkQXQpO1xuICAgICAgY29uc3QgZGF0ZUtleSA9IGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XG4gICAgICBcbiAgICAgIGlmICghZ3JvdXBlZC5oYXMoZGF0ZUtleSkpIHtcbiAgICAgICAgZ3JvdXBlZC5zZXQoZGF0ZUtleSwgW10pO1xuICAgICAgfVxuICAgICAgZ3JvdXBlZC5nZXQoZGF0ZUtleSkhLnB1c2godW5pdCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBzb3J0ZWREYXRlcyA9IEFycmF5LmZyb20oZ3JvdXBlZC5rZXlzKCkpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShiKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhKS5nZXRUaW1lKCk7XG4gICAgfSk7XG5cbiAgICBzb3J0ZWREYXRlcy5mb3JFYWNoKGRhdGUgPT4ge1xuICAgICAgY29uc3QgZGF0ZVVuaXRzID0gZ3JvdXBlZC5nZXQoZGF0ZSkhO1xuICAgICAgdGhpcy5yZW5kZXJEYXRlR3JvdXAoZGF0ZSwgZGF0ZVVuaXRzKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyRGF0ZUdyb3VwKGRhdGU6IHN0cmluZywgdW5pdHM6IENvbnRlbnRVbml0W10pIHtcbiAgICBjb25zdCBncm91cENvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2RhdGUtZ3JvdXAnIH0pO1xuXG4gICAgY29uc3QgaGVhZGVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtaGVhZGVyJyB9KTtcbiAgICBjb25zdCB0aXRsZUVsID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLXRpdGxlJyB9KTtcbiAgICB0aXRsZUVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnXHVEODNEXHVEQ0M1ICcsIGNsczogJ2dyb3VwLWljb24nIH0pO1xuICAgIHRpdGxlRWwuY3JlYXRlU3Bhbih7IHRleHQ6IGRhdGUsIGNsczogJ2dyb3VwLW5hbWUnIH0pO1xuXG4gICAgaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHt1bml0cy5sZW5ndGh9YCwgY2xzOiAnY291bnQtYmFkZ2UnIH0pO1xuXG4gICAgY29uc3QgY29sbGFwc2VCdG4gPSBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6ICdcdTI1QkMnLCBjbHM6ICdjb2xsYXBzZS1idG4nIH0pO1xuXG4gICAgY29uc3QgY29udGVudENvbnRhaW5lciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLWNvbnRlbnQnIH0pO1xuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICB0aGlzLnJlbmRlckNvbnRlbnRVbml0KGNvbnRlbnRDb250YWluZXIsIHVuaXQpO1xuICAgIH0pO1xuXG4gICAgbGV0IGlzQ29sbGFwc2VkID0gZmFsc2U7XG4gICAgY29sbGFwc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGlzQ29sbGFwc2VkID0gIWlzQ29sbGFwc2VkO1xuICAgICAgY29udGVudENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gaXNDb2xsYXBzZWQgPyAnbm9uZScgOiAnYmxvY2snO1xuICAgICAgY29sbGFwc2VCdG4udGV4dENvbnRlbnQgPSBpc0NvbGxhcHNlZCA/ICdcdTI1QjYnIDogJ1x1MjVCQyc7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHNob3dBbm5vdGF0aW9uSW5wdXQoY2FyZDogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0LCBleGlzdGluZ1RleHQ/OiBzdHJpbmcpIHtcbiAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTVERjJcdTdFQ0ZcdTY3MDlcdThGOTNcdTUxNjVcdTY4NDZcdTVDNTVcdTVGMDBcbiAgICBsZXQgaW5wdXRDb250YWluZXIgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5hbm5vdGF0aW9uLWlucHV0LWNvbnRhaW5lcicpIGFzIEhUTUxFbGVtZW50O1xuICAgIFxuICAgIGlmIChpbnB1dENvbnRhaW5lcikge1xuICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1REYyXHU1QzU1XHU1RjAwXHVGRjBDXHU1MjE5XHU2Mjk4XHU1M0UwXG4gICAgICBpbnB1dENvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBcdTUyMUJcdTVFRkFcdThGOTNcdTUxNjVcdTUzM0FcdTU3REZcbiAgICBpbnB1dENvbnRhaW5lciA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnYW5ub3RhdGlvbi1pbnB1dC1jb250YWluZXInIH0pO1xuXG4gICAgY29uc3QgdGV4dGFyZWEgPSBpbnB1dENvbnRhaW5lci5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICBjbHM6ICdhbm5vdGF0aW9uLXRleHRhcmVhJyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnQWRkIGNvbW1lbnQuLi4nXG4gICAgfSk7XG4gICAgdGV4dGFyZWEudmFsdWUgPSBleGlzdGluZ1RleHQgfHwgJyc7XG4gICAgdGV4dGFyZWEucm93cyA9IDM7XG5cbiAgICAvLyBcdTYzMDlcdTk0QUVcdTUzM0FcdTU3REZcdUZGMDhcdTdCODBcdTUzMTZcdTcyNDhcdUZGMDlcbiAgICBjb25zdCBidXR0b25BcmVhID0gaW5wdXRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnYW5ub3RhdGlvbi1idXR0b25zJyB9KTtcblxuICAgIGlmIChleGlzdGluZ1RleHQpIHtcbiAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGJ1dHRvbkFyZWEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogJ0RlbGV0ZScsXG4gICAgICAgIGNsczogJ2Fubm90YXRpb24tZGVsZXRlLWJ0bidcbiAgICAgIH0pO1xuICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk7XG4gICAgICAgIGlmIChhbm5vdGF0aW9uKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZGVsZXRlQW5ub3RhdGlvbihhbm5vdGF0aW9uLmlkKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIGRlbGV0ZWQnKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkFyZWEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdTYXZlJyxcbiAgICAgIGNsczogJ2Fubm90YXRpb24tc2F2ZS1idG4nXG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHU0RkREXHU1QjU4XHU1MUZEXHU2NTcwXG4gICAgY29uc3Qgc2F2ZUFubm90YXRpb24gPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXh0ID0gdGV4dGFyZWEudmFsdWUudHJpbSgpO1xuICAgICAgaWYgKCF0ZXh0KSB7XG4gICAgICAgIGlucHV0Q29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChhbm5vdGF0aW9uKSB7XG4gICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU3M0IwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIudXBkYXRlQW5ub3RhdGlvbihhbm5vdGF0aW9uLmlkLCB7XG4gICAgICAgICAgICBjb250ZW50OiB0ZXh0XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NUIwXHU2Mjc5XHU2Q0U4XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuYWRkQ29udGVudEFubm90YXRpb24oXG4gICAgICAgICAgICB1bml0LmlkLFxuICAgICAgICAgICAgdGV4dFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBhbm5vdGF0aW9uOicsIGVycm9yKTtcbiAgICAgICAgbmV3IE5vdGljZSgnRXJyb3Igc2F2aW5nIGFubm90YXRpb24nKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgc2F2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNhdmVBbm5vdGF0aW9uKTtcblxuICAgIC8vIFx1NjUyRlx1NjMwMSBDdHJsK0VudGVyIFx1NUZFQlx1NjM3N1x1OTUyRVx1NEZERFx1NUI1OFxuICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmIChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHNhdmVBbm5vdGF0aW9uKCk7XG4gICAgICB9XG4gICAgICAvLyBFc2MgXHU5NTJFXHU1MTczXHU5NUVEXG4gICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaW5wdXRDb250YWluZXIucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBcdTgxRUFcdTUyQThcdTgwNUFcdTcxMjZcbiAgICB0ZXh0YXJlYS5mb2N1cygpO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG93Rmxhc2hjYXJkTWVudShlOiBNb3VzZUV2ZW50LCB1bml0OiBDb250ZW50VW5pdCkge1xuICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1MjZBMSBTbWFydCBjcmVhdGUnKVxuICAgICAgICAuc2V0SWNvbignemFwJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMucXVpY2tDcmVhdG9yLmNyZWF0ZVNtYXJ0Q2FyZCh1bml0KTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1RDgzRFx1RENERCBDcmVhdGUgUSZBIGNhcmQnKVxuICAgICAgICAuc2V0SWNvbignbWVzc2FnZS1zcXVhcmUnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5xdWlja0NyZWF0b3IuY3JlYXRlUXVpY2tRQUNhcmQodW5pdCk7XG4gICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdTI3MEZcdUZFMEYgQ3JlYXRlIENsb3plIGNhcmQnKVxuICAgICAgICAuc2V0SWNvbignZWRpdCcpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnF1aWNrQ3JlYXRvci5jcmVhdGVRdWlja0Nsb3plQ2FyZCh1bml0KTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdUQ4M0NcdURGQTggQ3VzdG9tIGNhcmQuLi4nKVxuICAgICAgICAuc2V0SWNvbignc2V0dGluZ3MnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBGbGFzaGNhcmRDcmVhdGVNb2RhbCB9ID0gYXdhaXQgaW1wb3J0KCcuL0ZsYXNoY2FyZENyZWF0ZU1vZGFsJyk7XG4gICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgRmxhc2hjYXJkQ3JlYXRlTW9kYWwoXG4gICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLFxuICAgICAgICAgICAgdW5pdCxcbiAgICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChlKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2hvd0JhdGNoQ3JlYXRlTW9kYWwoKSB7XG4gICAgY29uc3QgdW5pdHMgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRBbGxDb250ZW50VW5pdHMoKTtcbiAgICBcbiAgICAvLyBcdThGQzdcdTZFRTRcdTYzODlcdTVERjJcdTdFQ0ZcdTY3MDlcdTk1RUFcdTUzNjFcdTc2ODRcdTUxODVcdTVCQjlcbiAgICBjb25zdCB1bml0c1dpdGhvdXRDYXJkcyA9IHVuaXRzLmZpbHRlcih1ID0+IHUuZmxhc2hjYXJkSWRzLmxlbmd0aCA9PT0gMCk7XG4gICAgXG4gICAgaWYgKHVuaXRzV2l0aG91dENhcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnQWxsIGNvbnRlbnQgYWxyZWFkeSBoYXMgZmxhc2hjYXJkcyEnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtb2RhbCA9IG5ldyBCYXRjaENyZWF0ZU1vZGFsKFxuICAgICAgdGhpcy5hcHAsXG4gICAgICB0aGlzLnBsdWdpbixcbiAgICAgIHRoaXMucXVpY2tDcmVhdG9yLFxuICAgICAgdW5pdHNXaXRob3V0Q2FyZHMsXG4gICAgICAoKSA9PiB0aGlzLnJlZnJlc2goKVxuICAgICk7XG4gICAgbW9kYWwub3BlbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBpc0FsbFNlbGVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHVuaXRzID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0QWxsQ29udGVudFVuaXRzKCk7XG4gICAgLy8gXHU1RTk0XHU3NTI4XHU2NDFDXHU3RDIyXHU4RkM3XHU2RUU0XG4gICAgbGV0IGZpbHRlcmVkVW5pdHMgPSB1bml0cztcbiAgICBpZiAodGhpcy5zZWFyY2hRdWVyeSkge1xuICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLnNlYXJjaFF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgICBmaWx0ZXJlZFVuaXRzID0gdW5pdHMuZmlsdGVyKHVuaXQgPT5cbiAgICAgICAgdW5pdC5jb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgIHVuaXQuc291cmNlLmZpbGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkgfHxcbiAgICAgICAgdW5pdC5tZXRhZGF0YS50YWdzLnNvbWUodGFnID0+IHRhZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSlcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBmaWx0ZXJlZFVuaXRzLmxlbmd0aCA+IDAgJiYgdGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZSA9PT0gZmlsdGVyZWRVbml0cy5sZW5ndGg7XG4gIH1cblxuICBwcml2YXRlIHRvZ2dsZVNlbGVjdEFsbCgpIHtcbiAgICBjb25zdCB1bml0cyA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldEFsbENvbnRlbnRVbml0cygpO1xuICAgIC8vIFx1NUU5NFx1NzUyOFx1NjQxQ1x1N0QyMlx1OEZDN1x1NkVFNFxuICAgIGxldCBmaWx0ZXJlZFVuaXRzID0gdW5pdHM7XG4gICAgaWYgKHRoaXMuc2VhcmNoUXVlcnkpIHtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5zZWFyY2hRdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgICAgZmlsdGVyZWRVbml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+XG4gICAgICAgIHVuaXQuY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSB8fFxuICAgICAgICB1bml0LnNvdXJjZS5maWxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5zb21lKHRhZyA9PiB0YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkpXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzQWxsU2VsZWN0ZWQoKSkge1xuICAgICAgLy8gXHU1M0Q2XHU2RDg4XHU1MTY4XHU5MDA5XG4gICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5jbGVhcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTUxNjhcdTkwMDlcbiAgICAgIGZpbHRlcmVkVW5pdHMuZm9yRWFjaCh1bml0ID0+IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuYWRkKHVuaXQuaWQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlQmF0Y2hCdXR0b25zKCk7XG4gICAgdGhpcy51cGRhdGVDaGVja2JveGVzKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUNoZWNrYm94ZXMoKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICBjb25zdCBjaGVja2JveGVzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXRjaC1jaGVja2JveCcpIGFzIE5vZGVMaXN0T2Y8SFRNTElucHV0RWxlbWVudD47XG4gICAgXG4gICAgY2hlY2tib3hlcy5mb3JFYWNoKGNoZWNrYm94ID0+IHtcbiAgICAgIGNvbnN0IHVuaXRJZCA9IGNoZWNrYm94LmdldEF0dHJpYnV0ZSgnZGF0YS11bml0LWlkJyk7XG4gICAgICBpZiAodW5pdElkKSB7XG4gICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0aGlzLnNlbGVjdGVkVW5pdElkcy5oYXModW5pdElkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQmF0Y2hCdXR0b25zKCkge1xuICAgIGNvbnN0IHRvb2xiYXIgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy5sZWFybmluZy1zeXN0ZW0tdG9vbGJhcicpIGFzIEhUTUxFbGVtZW50O1xuICAgIGlmICh0b29sYmFyKSB7XG4gICAgICBjb25zdCBiYXRjaEFjdGlvbnMgPSB0b29sYmFyLnF1ZXJ5U2VsZWN0b3IoJy5iYXRjaC1hY3Rpb25zLW92ZXJ2aWV3JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAoYmF0Y2hBY3Rpb25zKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdEFsbEJ0biA9IGJhdGNoQWN0aW9ucy5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0LWFsbC1idG4nKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gYmF0Y2hBY3Rpb25zLnF1ZXJ5U2VsZWN0b3IoJy5iYXRjaC1kZWxldGUtYnRuJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGNyZWF0ZUJ0biA9IGJhdGNoQWN0aW9ucy5xdWVyeVNlbGVjdG9yKCcuYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBcbiAgICAgICAgaWYgKHNlbGVjdEFsbEJ0bikge1xuICAgICAgICAgIHNlbGVjdEFsbEJ0bi50ZXh0Q29udGVudCA9IHRoaXMuaXNBbGxTZWxlY3RlZCgpID8gJ1x1MjYxMSBEZXNlbGVjdCBBbGwnIDogJ1x1MjYxMCBTZWxlY3QgQWxsJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGRlbGV0ZUJ0bikge1xuICAgICAgICAgIGRlbGV0ZUJ0bi50ZXh0Q29udGVudCA9IGBcdUQ4M0RcdURERDFcdUZFMEYgRGVsZXRlICgke3RoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemV9KWA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChjcmVhdGVCdG4pIHtcbiAgICAgICAgICBjcmVhdGVCdG4udGV4dENvbnRlbnQgPSBgXHUyNkExIENyZWF0ZSBDYXJkcyAoJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSlgO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBiYXRjaERlbGV0ZU5vdGVzKCkge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgUGxlYXNlIHNlbGVjdCBub3RlcyB0byBkZWxldGUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWNvbmZpcm0oYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSBzZWxlY3RlZCBub3Rlcz9gKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBzdWNjZXNzID0gMDtcbiAgICBsZXQgZmFpbGVkID0gMDtcblxuICAgIGZvciAoY29uc3QgdW5pdElkIG9mIHRoaXMuc2VsZWN0ZWRVbml0SWRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5kZWxldGVDb250ZW50VW5pdCh1bml0SWQpO1xuICAgICAgICBzdWNjZXNzKys7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBub3RlOicsIGVycm9yKTtcbiAgICAgICAgZmFpbGVkKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICBuZXcgTm90aWNlKGBcdTI3MDUgRGVsZXRlZCAke3N1Y2Nlc3N9IG5vdGVzJHtmYWlsZWQgPiAwID8gYCwgJHtmYWlsZWR9IGZhaWxlZGAgOiAnJ31gKTtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYmF0Y2hDcmVhdGVGbGFzaGNhcmRzKCkge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgUGxlYXNlIHNlbGVjdCBub3RlcyB0byBjcmVhdGUgZmxhc2hjYXJkcycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHVuaXRzID0gQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkVW5pdElkcylcbiAgICAgIC5tYXAoaWQgPT4gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoaWQpKVxuICAgICAgLmZpbHRlcih1ID0+IHUgIT09IHVuZGVmaW5lZCAmJiB1LmZsYXNoY2FyZElkcy5sZW5ndGggPT09IDApIGFzIENvbnRlbnRVbml0W107XG5cbiAgICBpZiAodW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgU2VsZWN0ZWQgbm90ZXMgYWxyZWFkeSBoYXZlIGZsYXNoY2FyZHMnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtb2RhbCA9IG5ldyBCYXRjaENyZWF0ZU1vZGFsKFxuICAgICAgdGhpcy5hcHAsXG4gICAgICB0aGlzLnBsdWdpbixcbiAgICAgIHRoaXMucXVpY2tDcmVhdG9yLFxuICAgICAgdW5pdHMsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgfVxuICAgICk7XG4gICAgbW9kYWwub3BlbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBqdW1wVG9Tb3VyY2UodW5pdDogQ29udGVudFVuaXQpIHtcbiAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHVuaXQuc291cmNlLmZpbGUpO1xuICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcblxuICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XG4gICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcblxuICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShJdGVtVmlldyk7XG4gICAgaWYgKHZpZXcpIHtcbiAgICAgIGNvbnN0IGVkaXRvciA9ICh2aWV3IGFzIGFueSkuZWRpdG9yO1xuICAgICAgaWYgKGVkaXRvcikge1xuICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHsgbGluZTogdW5pdC5zb3VyY2UucG9zaXRpb24ubGluZSwgY2g6IDAgfSk7XG4gICAgICAgIGVkaXRvci5zY3JvbGxJbnRvVmlldyh7XG4gICAgICAgICAgZnJvbTogeyBsaW5lOiB1bml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogMCB9LFxuICAgICAgICAgIHRvOiB7IGxpbmU6IHVuaXQuc291cmNlLnBvc2l0aW9uLmxpbmUsIGNoOiAwIH1cbiAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBlZGl0b3Iuc2V0U2VsZWN0aW9uKFxuICAgICAgICAgICAgeyBsaW5lOiB1bml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogMCB9LFxuICAgICAgICAgICAgeyBsaW5lOiB1bml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogOTk5IH1cbiAgICAgICAgICApO1xuICAgICAgICB9LCAxMDApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGVsZXRlQ29udGVudFVuaXQodW5pdDogQ29udGVudFVuaXQpIHtcbiAgICBjb25zdCBjb25maXJtZWQgPSBhd2FpdCB0aGlzLmNvbmZpcm1EZWxldGUodW5pdCk7XG4gICAgaWYgKCFjb25maXJtZWQpIHJldHVybjtcblxuICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmRlbGV0ZUNvbnRlbnRVbml0KHVuaXQuaWQpO1xuICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBjb25maXJtRGVsZXRlKHVuaXQ6IENvbnRlbnRVbml0KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBjb25zdCBtb2RhbCA9IG5ldyBDb25maXJtTW9kYWwoXG4gICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAnRGVsZXRlIGNvbnRlbnQnLFxuICAgICAgICBgQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIGNvbnRlbnQ/XFxuXFxuXCIke3VuaXQuY29udGVudC5zdWJzdHJpbmcoMCwgNTApfS4uLlwiYCxcbiAgICAgICAgKCkgPT4gcmVzb2x2ZSh0cnVlKSxcbiAgICAgICAgKCkgPT4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICk7XG4gICAgICBtb2RhbC5vcGVuKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHNob3dDb250ZXh0TWVudShlOiBNb3VzZUV2ZW50LCB1bml0OiBDb250ZW50VW5pdCkge1xuICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ0p1bXAgdG8gc291cmNlJylcbiAgICAgICAgLnNldEljb24oJ2Fycm93LXJpZ2h0JylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5qdW1wVG9Tb3VyY2UodW5pdCkpXG4gICAgKTtcblxuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKTtcbiAgICBcbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZShhbm5vdGF0aW9uID8gJ0VkaXQgYW5ub3RhdGlvbicgOiAnQWRkIGFubm90YXRpb24nKVxuICAgICAgICAuc2V0SWNvbigncGVuY2lsJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNhcmQgPSAoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJy5jb250ZW50LWNhcmQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICBpZiAoY2FyZCkge1xuICAgICAgICAgICAgdGhpcy5zaG93QW5ub3RhdGlvbklucHV0KGNhcmQsIHVuaXQsIGFubm90YXRpb24/LmNvbnRlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdTI2QTEgUXVpY2sgY3JlYXRlIGZsYXNoY2FyZCcpXG4gICAgICAgIC5zZXRJY29uKCd6YXAnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5xdWlja0NyZWF0b3IuY3JlYXRlU21hcnRDYXJkKHVuaXQpO1xuICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnQ3JlYXRlIFEmQSBjYXJkJylcbiAgICAgICAgLnNldEljb24oJ21lc3NhZ2Utc3F1YXJlJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMucXVpY2tDcmVhdG9yLmNyZWF0ZVF1aWNrUUFDYXJkKHVuaXQpO1xuICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnQ3JlYXRlIENsb3plIGNhcmQnKVxuICAgICAgICAuc2V0SWNvbignZWRpdCcpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnF1aWNrQ3JlYXRvci5jcmVhdGVRdWlja0Nsb3plQ2FyZCh1bml0KTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ0N1c3RvbSBmbGFzaGNhcmQuLi4nKVxuICAgICAgICAuc2V0SWNvbignc2V0dGluZ3MnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBGbGFzaGNhcmRDcmVhdGVNb2RhbCB9ID0gYXdhaXQgaW1wb3J0KCcuL0ZsYXNoY2FyZENyZWF0ZU1vZGFsJyk7XG4gICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgRmxhc2hjYXJkQ3JlYXRlTW9kYWwoXG4gICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLFxuICAgICAgICAgICAgdW5pdCxcbiAgICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnVmlldyBTdGF0aXN0aWNzJylcbiAgICAgICAgLnNldEljb24oJ2Jhci1jaGFydCcpXG4gICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5hY3RpdmF0ZVN0YXRzKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnRGVsZXRlJylcbiAgICAgICAgLnNldEljb24oJ3RyYXNoJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5kZWxldGVDb250ZW50VW5pdCh1bml0KSlcbiAgICApO1xuXG4gICAgbWVudS5zaG93QXRNb3VzZUV2ZW50KGUpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRUeXBlSWNvbih0eXBlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGljb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ2hpZ2hsaWdodCc6ICdcdTI3MjgnLFxuICAgICAgJ2JvbGQnOiAnKionLFxuICAgICAgJ3RhZyc6ICdcdUQ4M0NcdURGRjcnLFxuICAgICAgJ2N1c3RvbSc6ICdcdTJCNTAnXG4gICAgfTtcbiAgICByZXR1cm4gaWNvbnNbdHlwZV0gfHwgJ1x1MjAyMic7XG4gIH1cblxuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgLyogXHU1REU1XHU1MTc3XHU2ODBGXHU2ODM3XHU1RjBGICovXG4gICAgICAubGVhcm5pbmctc3lzdGVtLXRvb2xiYXIge1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zZWFyY2gtY29udGFpbmVyIHsgZGlzcGxheTogZmxleDsgfVxuXG4gICAgICAuc2VhcmNoLWlucHV0IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgcGFkZGluZzogNnB4IDEwcHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtY29udGFpbmVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC1sYWJlbCB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLXNlbGVjdCB7XG4gICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgfVxuXG4gICAgICAucmVmcmVzaC1idG4ge1xuICAgICAgICBwYWRkaW5nOiA0cHggMTJweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgfVxuXG4gICAgICAucmVmcmVzaC1idG46aG92ZXIgeyBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTsgfVxuXG4gICAgICAuc3RhdHMtY29udGFpbmVyIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTUxODVcdTVCQjlcdTUzM0FcdTU3REZcdTY4MzdcdTVGMEYgKi9cbiAgICAgIC5sZWFybmluZy1zeXN0ZW0tY29udGVudCB7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICB9XG5cbiAgICAgIC5lbXB0eS1zdGF0ZSB7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBwYWRkaW5nOiA0MHB4IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5maWxlLWdyb3VwLCAudGFnLWdyb3VwLCAuZGF0ZS1ncm91cCB7IG1hcmdpbi1ib3R0b206IDIwcHg7IH1cblxuICAgICAgLmdyb3VwLWhlYWRlciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtaGVhZGVyOmhvdmVyIHsgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7IH1cblxuICAgICAgLmdyb3VwLXRpdGxlIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWljb24geyBtYXJnaW4tcmlnaHQ6IDRweDsgfVxuXG4gICAgICAuY291bnQtYmFkZ2Uge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIHBhZGRpbmc6IDJweCA4cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuY29sbGFwc2UtYnRuIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTY1ODdcdTRFRjZcdTYyNzlcdTZDRThcdTY2M0VcdTc5M0EgKi9cbiAgICAgIC5maWxlLWFubm90YXRpb24tZGlzcGxheSB7XG4gICAgICAgIG1hcmdpbjogOHB4IDAgMTJweCAwO1xuICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnktYWx0KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1hbm5vdGF0aW9uLWl0ZW0ge1xuICAgICAgICBwYWRkaW5nOiA0cHggMDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1hbm5vdGF0aW9uLWl0ZW0gc3Ryb25nIHsgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTsgfVxuXG4gICAgICAvKiBcdTUxODVcdTVCQjlcdTUzNjFcdTcyNDdcdTY4MzdcdTVGMEYgKi9cbiAgICAgIC5ncm91cC1jb250ZW50IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIHBhZGRpbmctbGVmdDogOHB4O1xuICAgICAgfVxuXG4gICAgICAuY29udGVudC1jYXJkIHtcbiAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuXG4gICAgICAuY29udGVudC1jYXJkOmhvdmVyIHtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1jb250ZW50IHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgICAgICAgZ2FwOiA0cHg7XG4gICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgIH1cblxuICAgICAgLnR5cGUtaWNvbiB7IGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsgfVxuXG4gICAgICAuY29udGVudC10ZXh0IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgICAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICAgICAgfVxuXG4gICAgICAuY2xpY2thYmxlLWNvbnRlbnQge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICBwYWRkaW5nOiA0cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIH1cblxuICAgICAgLmNsaWNrYWJsZS1jb250ZW50OmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1iYWRnZSwgLmZsYXNoY2FyZC1iYWRnZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBtYXJnaW4tbGVmdDogNHB4O1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1iYWRnZS5oYXMtYW5ub3RhdGlvbiB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTYyNzlcdTZDRThcdTY2M0VcdTc5M0FcdTY4MzdcdTVGMEYgKi9cbiAgICAgIC5hbm5vdGF0aW9uLWRpc3BsYXkge1xuICAgICAgICBtYXJnaW46IDEwcHggMDtcbiAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnktYWx0KTtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWRpc3BsYXk6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgICAgYm9yZGVyLWxlZnQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWNvbnRlbnQtZGlzcGxheSB7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tY29udGVudC1kaXNwbGF5IHN0cm9uZyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tdGltZXN0YW1wIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjhlbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZmFpbnQpO1xuICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tYmFkZ2UtZGlzcGxheSB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgcGFkZGluZzogM3B4IDEwcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC8qIFx1NTE4NVx1ODA1NFx1NjI3OVx1NkNFOFx1OEY5M1x1NTE2NSAqL1xuICAgICAgLmFubm90YXRpb24taW5wdXQtY29udGFpbmVyIHtcbiAgICAgICAgbWFyZ2luOiAxMnB4IDA7XG4gICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYW5pbWF0aW9uOiBzbGlkZURvd24gMC4ycyBlYXNlO1xuICAgICAgfVxuXG4gICAgICBAa2V5ZnJhbWVzIHNsaWRlRG93biB7XG4gICAgICAgIGZyb20ge1xuICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMHB4KTtcbiAgICAgICAgfVxuICAgICAgICB0byB7XG4gICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tdGV4dGFyZWEge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgICAgIHJlc2l6ZTogdmVydGljYWw7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDYwcHg7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLXRleHRhcmVhOmZvY3VzIHtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi10ZXh0YXJlYTo6cGxhY2Vob2xkZXIge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1mYWludCk7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWJ1dHRvbnMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tYnV0dG9ucyBidXR0b24ge1xuICAgICAgICBwYWRkaW5nOiA2cHggMTZweDtcbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWRlbGV0ZS1idG4ge1xuICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1kZWxldGUtYnRuOmhvdmVyIHtcbiAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLXNhdmUtYnRuIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1zYXZlLWJ0bjpob3ZlciB7XG4gICAgICAgIG9wYWNpdHk6IDAuODtcbiAgICAgIH1cblxuICAgICAgLyogXHU1MTQzXHU2NTcwXHU2MzZFXHU1MzNBXHU1N0RGICovXG4gICAgICAuY2FyZC1tZXRhIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC50YWdzLWNvbnRhaW5lciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgZ2FwOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC50YWcge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIHBhZGRpbmc6IDJweCA4cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICB9XG5cbiAgICAgIC5oZWFkaW5nLWluZm8ge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgIH1cblxuICAgICAgLyogXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFICovXG4gICAgICAuY2FyZC1hY3Rpb25zIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC5hY3Rpb24tYnRuIHtcbiAgICAgICAgcGFkZGluZzogNHB4IDEwcHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG5cbiAgICAgIC5hY3Rpb24tYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICB9XG5cbiAgICAgIC5kZWxldGUtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTRFMDBcdTk1MkVcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcdTYzMDlcdTk0QUVcdTdFQzQgKi9cbiAgICAgIC5mbGFzaGNhcmQtYnRuLWdyb3VwIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiAwO1xuICAgICAgfVxuXG4gICAgICAucXVpY2stY2FyZC1idG4ge1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHggMCAwIDRweDtcbiAgICAgICAgYm9yZGVyLXJpZ2h0OiBub25lO1xuICAgICAgfVxuXG4gICAgICAubW9yZS1jYXJkLWJ0biB7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDAgNHB4IDRweCAwO1xuICAgICAgICBwYWRkaW5nOiA0cHggNnB4O1xuICAgICAgICBmb250LXNpemU6IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5xdWljay1jYXJkLWJ0bjpob3ZlciwgLm1vcmUtY2FyZC1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1jcmVhdGUtYnRuIHtcbiAgICAgICAgcGFkZGluZzogNnB4IDEycHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1jcmVhdGUtYnRuOmhvdmVyIHtcbiAgICAgICAgb3BhY2l0eTogMC44O1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtYWN0aW9ucy1vdmVydmlldyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1tb2RlLWJ0bixcbiAgICAgIC5zZWxlY3QtYWxsLWJ0bixcbiAgICAgIC5iYXRjaC1kZWxldGUtYnRuLFxuICAgICAgLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG4ge1xuICAgICAgICBwYWRkaW5nOiA2cHggMTJweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC5zZWxlY3QtYWxsLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtbW9kZS1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLWRlbGV0ZS1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLWNoZWNrYm94IHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxufVxuXG4vLyBcdTYyNzlcdTkxQ0ZcdTUyMUJcdTVFRkFcdTZBMjFcdTYwMDFcdTY4NDZcbmV4cG9ydCBjbGFzcyBCYXRjaENyZWF0ZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4sXG4gICAgcHJpdmF0ZSBxdWlja0NyZWF0b3I6IFF1aWNrRmxhc2hjYXJkQ3JlYXRvcixcbiAgICBwcml2YXRlIHVuaXRzOiBDb250ZW50VW5pdFtdLFxuICAgIHByaXZhdGUgb25Db21wbGV0ZTogKCkgPT4gdm9pZFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIFxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdTI2QTEgQmF0Y2ggQ3JlYXRlIEZsYXNoY2FyZHMnIH0pO1xuICAgIFxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiBgQ3JlYXRlIGZsYXNoY2FyZHMgZm9yICR7dGhpcy51bml0cy5sZW5ndGh9IGNvbnRlbnQgaXRlbXMgd2l0aG91dCBjYXJkcy5gXG4gICAgfSk7XG5cbiAgICAvLyBcdTkwMDlcdTYyRTlcdTdDN0JcdTU3OEJcbiAgICBjb25zdCB0eXBlQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ3R5cGUtc2VsZWN0LWNvbnRhaW5lcicgfSk7XG4gICAgdHlwZUNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDYXJkIFR5cGUnIH0pO1xuXG4gICAgbGV0IHNlbGVjdGVkVHlwZTogJ3NtYXJ0JyB8ICdxYScgfCAnY2xvemUnID0gJ3NtYXJ0JztcblxuICAgIGNvbnN0IHR5cGVzID0gW1xuICAgICAgeyB2YWx1ZTogJ3NtYXJ0JywgbGFiZWw6ICdcdTI2QTEgU21hcnQgKEF1dG8tZGV0ZWN0KScsIGRlc2M6ICdBdXRvbWF0aWNhbGx5IGNob29zZSB0aGUgYmVzdCB0eXBlJyB9LFxuICAgICAgeyB2YWx1ZTogJ3FhJywgbGFiZWw6ICdcdUQ4M0RcdURDREQgUSZBIENhcmRzJywgZGVzYzogJ1F1ZXN0aW9uIGFuZCBhbnN3ZXIgZm9ybWF0JyB9LFxuICAgICAgeyB2YWx1ZTogJ2Nsb3plJywgbGFiZWw6ICdcdTI3MEZcdUZFMEYgQ2xvemUgQ2FyZHMnLCBkZXNjOiAnRmlsbCBpbiB0aGUgYmxhbmtzJyB9XG4gICAgXTtcblxuICAgIHR5cGVzLmZvckVhY2godHlwZSA9PiB7XG4gICAgICBjb25zdCBvcHRpb24gPSB0eXBlQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3R5cGUtb3B0aW9uJyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmFkaW8gPSBvcHRpb24uY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICB0eXBlOiAncmFkaW8nLFxuICAgICAgICB2YWx1ZTogdHlwZS52YWx1ZSxcbiAgICAgICAgYXR0cjogeyBuYW1lOiAnY2FyZC10eXBlJyB9XG4gICAgICB9KTtcbiAgICAgIGlmICh0eXBlLnZhbHVlID09PSAnc21hcnQnKSByYWRpby5jaGVja2VkID0gdHJ1ZTtcblxuICAgICAgY29uc3QgbGFiZWwgPSBvcHRpb24uY3JlYXRlRGl2KHsgY2xzOiAndHlwZS1sYWJlbCcgfSk7XG4gICAgICBsYWJlbC5jcmVhdGVFbCgnc3Ryb25nJywgeyB0ZXh0OiB0eXBlLmxhYmVsIH0pO1xuICAgICAgbGFiZWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogdHlwZS5kZXNjLCBjbHM6ICd0eXBlLWRlc2MnIH0pO1xuXG4gICAgICBvcHRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHJhZGlvLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICBzZWxlY3RlZFR5cGUgPSB0eXBlLnZhbHVlIGFzIGFueTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gXHU2MzA5XHU5NEFFXG4gICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ21vZGFsLWJ1dHRvbi1jb250YWluZXInIH0pO1xuXG4gICAgY29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG5cbiAgICBjb25zdCBjcmVhdGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiBgQ3JlYXRlICR7dGhpcy51bml0cy5sZW5ndGh9IENhcmRzYCxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgY3JlYXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5iYXRjaENyZWF0ZShzZWxlY3RlZFR5cGUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRTdHlsZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYmF0Y2hDcmVhdGUodHlwZTogJ3NtYXJ0JyB8ICdxYScgfCAnY2xvemUnKSB7XG4gICAgY29uc3QgeyBzdWNjZXNzLCBmYWlsZWQgfSA9IGF3YWl0IHRoaXMucXVpY2tDcmVhdG9yLmNyZWF0ZUJhdGNoQ2FyZHModGhpcy51bml0cywgdHlwZSk7XG4gICAgXG4gICAgbmV3IE5vdGljZShgXHUyNzA1IENyZWF0ZWQgJHtzdWNjZXNzfSBmbGFzaGNhcmRzISAke2ZhaWxlZCA+IDAgPyBgKCR7ZmFpbGVkfSBmYWlsZWQpYCA6ICcnfWApO1xuICAgIFxuICAgIHRoaXMuY2xvc2UoKTtcbiAgICB0aGlzLm9uQ29tcGxldGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAudHlwZS1zZWxlY3QtY29udGFpbmVyIHtcbiAgICAgICAgbWFyZ2luOiAyMHB4IDA7XG4gICAgICB9XG5cbiAgICAgIC50eXBlLW9wdGlvbiB7XG4gICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuXG4gICAgICAudHlwZS1vcHRpb246aG92ZXIge1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAudHlwZS1vcHRpb24gaW5wdXRbdHlwZT1cInJhZGlvXCJdIHtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAudHlwZS1sYWJlbCB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgdmVydGljYWwtYWxpZ246IHRvcDtcbiAgICAgIH1cblxuICAgICAgLnR5cGUtZGVzYyB7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgbWFyZ2luLXRvcDogNHB4O1xuICAgICAgfVxuICAgIGA7XG5cbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuXG5jbGFzcyBDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwcDogQXBwLFxuICAgIHByaXZhdGUgdGl0bGU6IHN0cmluZyxcbiAgICBwcml2YXRlIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBwcml2YXRlIG9uQ29uZmlybTogKCkgPT4gdm9pZCxcbiAgICBwcml2YXRlIG9uQ2FuY2VsOiAoKSA9PiB2b2lkXG4gICkge1xuICAgIHN1cGVyKGFwcCk7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdGhpcy50aXRsZSB9KTtcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHRoaXMubWVzc2FnZSB9KTtcblxuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdtb2RhbC1idXR0b24tY29udGFpbmVyJyB9KTtcbiAgICBcbiAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgdGhpcy5vbkNhbmNlbCgpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgY29uZmlybUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdEZWxldGUnLFxuICAgICAgY2xzOiAnbW9kLXdhcm5pbmcnXG4gICAgfSk7XG4gICAgY29uZmlybUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMub25Db25maXJtKCk7XG4gICAgfSk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIExlYXJuaW5nU3lzdGVtUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgQW5ub3RhdGlvbiB9IGZyb20gJy4uL2NvcmUvQW5ub3RhdGlvbk1hbmFnZXInO1xuaW1wb3J0IHsgQ29udGVudFVuaXQgfSBmcm9tICcuLi9jb3JlL0RhdGFNYW5hZ2VyJztcblxuZXhwb3J0IGNsYXNzIEFubm90YXRpb25Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBjb250ZW50VW5pdDogQ29udGVudFVuaXQ7XG4gIHByaXZhdGUgZXhpc3RpbmdBbm5vdGF0aW9uPzogQW5ub3RhdGlvbjtcbiAgcHJpdmF0ZSBhbm5vdGF0aW9uVGV4dDogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgYmFkZ2VUZXh0OiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBiYWRnZUNvbG9yOiBzdHJpbmcgPSAnIzVCOUJENSc7XG4gIHByaXZhdGUgb25TYXZlOiAoYW5ub3RhdGlvbjogQW5ub3RhdGlvbikgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4sXG4gICAgY29udGVudFVuaXQ6IENvbnRlbnRVbml0LFxuICAgIG9uU2F2ZTogKGFubm90YXRpb246IEFubm90YXRpb24pID0+IHZvaWRcbiAgKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLmNvbnRlbnRVbml0ID0gY29udGVudFVuaXQ7XG4gICAgdGhpcy5vblNhdmUgPSBvblNhdmU7XG5cbiAgICAvLyBcdTUyQTBcdThGN0RcdTczQjBcdTY3MDlcdTYyNzlcdTZDRThcbiAgICB0aGlzLmV4aXN0aW5nQW5ub3RhdGlvbiA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldENvbnRlbnRBbm5vdGF0aW9uKFxuICAgICAgY29udGVudFVuaXQuaWRcbiAgICApO1xuXG4gICAgaWYgKHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uKSB7XG4gICAgICB0aGlzLmFubm90YXRpb25UZXh0ID0gdGhpcy5leGlzdGluZ0Fubm90YXRpb24uY29udGVudDtcbiAgICAgIGlmICh0aGlzLmV4aXN0aW5nQW5ub3RhdGlvbi5iYWRnZSkge1xuICAgICAgICB0aGlzLmJhZGdlVGV4dCA9IHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uLmJhZGdlLnRleHQ7XG4gICAgICAgIHRoaXMuYmFkZ2VDb2xvciA9IHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uLmJhZGdlLmNvbG9yO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2Fubm90YXRpb24tbW9kYWwnKTtcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyBcbiAgICAgIHRleHQ6IHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uID8gJ0VkaXQgQW5ub3RhdGlvbicgOiAnQWRkIEFubm90YXRpb24nIFxuICAgIH0pO1xuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU1MzlGXHU2NTg3XHU1MTg1XHU1QkI5XG4gICAgY29uc3QgY29udGVudFByZXZpZXcgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnYW5ub3RhdGlvbi1jb250ZW50LXByZXZpZXcnIH0pO1xuICAgIGNvbnRlbnRQcmV2aWV3LmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0NvbnRlbnQ6JyB9KTtcbiAgICBjb250ZW50UHJldmlldy5jcmVhdGVFbCgnYmxvY2txdW90ZScsIHsgdGV4dDogdGhpcy5jb250ZW50VW5pdC5jb250ZW50IH0pO1xuXG4gICAgLy8gXHU2Mjc5XHU2Q0U4XHU2NTg3XHU2NzJDXHU1MzNBXHU1N0RGXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLnNldE5hbWUoJ0Fubm90YXRpb24nKVxuICAgICAgLnNldERlc2MoJ0FkZCB5b3VyIG5vdGVzIG9yIGNvbW1lbnRzIGFib3V0IHRoaXMgY29udGVudCcpXG4gICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB7XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHlvdXIgYW5ub3RhdGlvbiBoZXJlLi4uJylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5hbm5vdGF0aW9uVGV4dClcbiAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5hbm5vdGF0aW9uVGV4dCA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgdGV4dC5pbnB1dEVsLnJvd3MgPSA2O1xuICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICB9KTtcblxuICAgIC8vIFx1ODlEMlx1NjgwN1x1OEJCRVx1N0Y2RVxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdCYWRnZSAoT3B0aW9uYWwpJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5zZXROYW1lKCdCYWRnZSB0ZXh0JylcbiAgICAgIC5zZXREZXNjKCdTaG9ydCB0ZXh0IHRvIGRpc3BsYXkgYXMgYSBiYWRnZSAoZS5nLiwgXCJcdTkxQ0RcdTg5ODFcIiwgXCJcdTVGODVcdTU5MERcdTRFNjBcIiknKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdCYWRnZSB0ZXh0JylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5iYWRnZVRleHQpXG4gICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuYmFkZ2VUZXh0ID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJhZGdlUHJldmlldygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLnNldE5hbWUoJ0JhZGdlIGNvbG9yJylcbiAgICAgIC5zZXREZXNjKCdDaG9vc2UgYSBjb2xvciBmb3IgdGhlIGJhZGdlJylcbiAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgLmFkZE9wdGlvbignIzVCOUJENScsICdcdUQ4M0RcdUREMzUgQmx1ZScpXG4gICAgICAgICAgLmFkZE9wdGlvbignIzcwQUQ0NycsICdcdUQ4M0RcdURGRTIgR3JlZW4nKVxuICAgICAgICAgIC5hZGRPcHRpb24oJyNGRkMwMDAnLCAnXHVEODNEXHVERkUxIFllbGxvdycpXG4gICAgICAgICAgLmFkZE9wdGlvbignI0ZGNkI2QicsICdcdUQ4M0RcdUREMzQgUmVkJylcbiAgICAgICAgICAuYWRkT3B0aW9uKCcjQzc4QkZGJywgJ1x1RDgzRFx1REZFMyBQdXJwbGUnKVxuICAgICAgICAgIC5hZGRPcHRpb24oJyNGRjlGNDMnLCAnXHVEODNEXHVERkUwIE9yYW5nZScpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuYmFkZ2VDb2xvcilcbiAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5iYWRnZUNvbG9yID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJhZGdlUHJldmlldygpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAvLyBcdTg5RDJcdTY4MDdcdTk4ODRcdTg5QzhcbiAgICBjb25zdCBiYWRnZVByZXZpZXcgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnYmFkZ2UtcHJldmlldy1jb250YWluZXInIH0pO1xuICAgIGJhZGdlUHJldmlldy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ByZXZpZXc6ICcsIGNsczogJ3ByZXZpZXctbGFiZWwnIH0pO1xuICAgIGNvbnN0IGJhZGdlRWwgPSBiYWRnZVByZXZpZXcuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ2JhZGdlLXByZXZpZXcnIH0pO1xuICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwgPSBiYWRnZUVsO1xuICAgIHRoaXMudXBkYXRlQmFkZ2VQcmV2aWV3KCk7XG5cbiAgICAvLyBcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBcdTUyMjBcdTk2NjRcdTYzMDlcdTk0QUVcdUZGMDhcdTU5ODJcdTY3OUNcdTY2MkZcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdUZGMDlcbiAgICBpZiAodGhpcy5leGlzdGluZ0Fubm90YXRpb24pIHtcbiAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgdGV4dDogJ0RlbGV0ZScsXG4gICAgICAgIGNsczogJ21vZC13YXJuaW5nJ1xuICAgICAgfSk7XG4gICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlQW5ub3RhdGlvbigpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAnU2F2ZScsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIHNhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVBbm5vdGF0aW9uKCk7XG4gICAgfSk7XG5cbiAgICAvLyBcdTZERkJcdTUyQTBcdTY4MzdcdTVGMEZcbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBiYWRnZVByZXZpZXdFbDogSFRNTEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSB1cGRhdGVCYWRnZVByZXZpZXcoKSB7XG4gICAgaWYgKCF0aGlzLmJhZGdlUHJldmlld0VsKSByZXR1cm47XG5cbiAgICBpZiAodGhpcy5iYWRnZVRleHQpIHtcbiAgICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwudGV4dENvbnRlbnQgPSB0aGlzLmJhZGdlVGV4dDtcbiAgICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5iYWRnZUNvbG9yO1xuICAgICAgdGhpcy5iYWRnZVByZXZpZXdFbC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwudGV4dENvbnRlbnQgPSAnTm8gYmFkZ2UnO1xuICAgICAgdGhpcy5iYWRnZVByZXZpZXdFbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xuICAgICAgdGhpcy5iYWRnZVByZXZpZXdFbC5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzYXZlQW5ub3RhdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuYW5ub3RhdGlvblRleHQudHJpbSgpKSB7XG4gICAgICBuZXcgTm90aWNlKCdQbGVhc2UgZW50ZXIgYW5ub3RhdGlvbiB0ZXh0Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGxldCBhbm5vdGF0aW9uOiBBbm5vdGF0aW9uO1xuXG4gICAgICBpZiAodGhpcy5leGlzdGluZ0Fubm90YXRpb24pIHtcbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU3M0IwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLnVwZGF0ZUFubm90YXRpb24oXG4gICAgICAgICAgdGhpcy5leGlzdGluZ0Fubm90YXRpb24uaWQsXG4gICAgICAgICAge1xuICAgICAgICAgICAgY29udGVudDogdGhpcy5hbm5vdGF0aW9uVGV4dCxcbiAgICAgICAgICAgIGJhZGdlOiB0aGlzLmJhZGdlVGV4dCA/IHtcbiAgICAgICAgICAgICAgdGV4dDogdGhpcy5iYWRnZVRleHQsXG4gICAgICAgICAgICAgIGNvbG9yOiB0aGlzLmJhZGdlQ29sb3JcbiAgICAgICAgICAgIH0gOiB1bmRlZmluZWRcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRBbm5vdGF0aW9uKFxuICAgICAgICAgIHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uLmlkXG4gICAgICAgICkhO1xuICAgICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIHVwZGF0ZWQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjVCMFx1NjI3OVx1NkNFOFxuICAgICAgICBhbm5vdGF0aW9uID0gYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuYWRkQ29udGVudEFubm90YXRpb24oXG4gICAgICAgICAgdGhpcy5jb250ZW50VW5pdC5pZCxcbiAgICAgICAgICB0aGlzLmFubm90YXRpb25UZXh0LFxuICAgICAgICAgIHRoaXMuYmFkZ2VUZXh0ID8ge1xuICAgICAgICAgICAgdGV4dDogdGhpcy5iYWRnZVRleHQsXG4gICAgICAgICAgICBjb2xvcjogdGhpcy5iYWRnZUNvbG9yXG4gICAgICAgICAgfSA6IHVuZGVmaW5lZFxuICAgICAgICApO1xuICAgICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIGFkZGVkJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMub25TYXZlKGFubm90YXRpb24pO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgYW5ub3RhdGlvbjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdFcnJvciBzYXZpbmcgYW5ub3RhdGlvbicpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGVsZXRlQW5ub3RhdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZGVsZXRlQW5ub3RhdGlvbihcbiAgICAgICAgdGhpcy5leGlzdGluZ0Fubm90YXRpb24uaWRcbiAgICAgICk7XG4gICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIGRlbGV0ZWQnKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMub25TYXZlKG51bGwgYXMgYW55KTsgLy8gXHU5MDFBXHU3N0U1XHU1MjIwXHU5NjY0XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGFubm90YXRpb246JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgnRXJyb3IgZGVsZXRpbmcgYW5ub3RhdGlvbicpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAuYW5ub3RhdGlvbi1tb2RhbCB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWNvbnRlbnQtcHJldmlldyB7XG4gICAgICAgIG1hcmdpbjogMjBweCAwO1xuICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tY29udGVudC1wcmV2aWV3IGgzIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1jb250ZW50LXByZXZpZXcgYmxvY2txdW90ZSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC5iYWRnZS1wcmV2aWV3LWNvbnRhaW5lciB7XG4gICAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIH1cblxuICAgICAgLnByZXZpZXctbGFiZWwge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMTBweDtcbiAgICAgIH1cblxuICAgICAgLmJhZGdlLXByZXZpZXcge1xuICAgICAgICBwYWRkaW5nOiA0cHggMTBweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLm1vZGFsLWJ1dHRvbi1jb250YWluZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5tb2RhbC1idXR0b24tY29udGFpbmVyIGJ1dHRvbiB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cblxuLyoqXG4gKiBcdTY1ODdcdTRFRjZcdTYyNzlcdTZDRThcdTZBMjFcdTYwMDFcdTY4NDZcbiAqL1xuZXhwb3J0IGNsYXNzIEZpbGVBbm5vdGF0aW9uTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgZmlsZVBhdGg6IHN0cmluZztcbiAgcHJpdmF0ZSBleGlzdGluZ0Fubm90YXRpb25zOiBBbm5vdGF0aW9uW10gPSBbXTtcbiAgcHJpdmF0ZSBhbm5vdGF0aW9uVGV4dDogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgb25TYXZlOiAoKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwcDogQXBwLFxuICAgIHByaXZhdGUgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbixcbiAgICBmaWxlUGF0aDogc3RyaW5nLFxuICAgIG9uU2F2ZTogKCkgPT4gdm9pZFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMuZmlsZVBhdGggPSBmaWxlUGF0aDtcbiAgICB0aGlzLm9uU2F2ZSA9IG9uU2F2ZTtcblxuICAgIC8vIFx1NTJBMFx1OEY3RFx1NzNCMFx1NjcwOVx1NjI3OVx1NkNFOFxuICAgIHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9ucyA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldEZpbGVBbm5vdGF0aW9ucyhmaWxlUGF0aCk7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0ZpbGUgQW5ub3RhdGlvbnMnIH0pO1xuXG4gICAgY29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVQYXRoLnNwbGl0KCcvJykucG9wKCk/LnJlcGxhY2UoJy5tZCcsICcnKSB8fCB0aGlzLmZpbGVQYXRoO1xuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiBgRmlsZTogJHtmaWxlTmFtZX1gLFxuICAgICAgY2xzOiAnZmlsZS1uYW1lJ1xuICAgIH0pO1xuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU3M0IwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAgaWYgKHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBleGlzdGluZ1NlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnZXhpc3RpbmctYW5ub3RhdGlvbnMnIH0pO1xuICAgICAgZXhpc3RpbmdTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0V4aXN0aW5nIEFubm90YXRpb25zJyB9KTtcblxuICAgICAgdGhpcy5leGlzdGluZ0Fubm90YXRpb25zLmZvckVhY2goYW5ub3RhdGlvbiA9PiB7XG4gICAgICAgIGNvbnN0IGFubm90YXRpb25DYXJkID0gZXhpc3RpbmdTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ2Fubm90YXRpb24tY2FyZCcgfSk7XG4gICAgICAgIGFubm90YXRpb25DYXJkLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBhbm5vdGF0aW9uLmNvbnRlbnQgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoYW5ub3RhdGlvbi5tZXRhZGF0YS5jcmVhdGVkQXQpLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuICAgICAgICBhbm5vdGF0aW9uQ2FyZC5jcmVhdGVFbCgnc21hbGwnLCB7IFxuICAgICAgICAgIHRleHQ6IGBDcmVhdGVkOiAke2RhdGV9YCxcbiAgICAgICAgICBjbHM6ICdhbm5vdGF0aW9uLWRhdGUnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGFubm90YXRpb25DYXJkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgdGV4dDogJ1x1RDgzRFx1REREMSBEZWxldGUnLFxuICAgICAgICAgIGNsczogJ2RlbGV0ZS1hbm5vdGF0aW9uLWJ0bidcbiAgICAgICAgfSk7XG4gICAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZUFubm90YXRpb24oYW5ub3RhdGlvbi5pZCk7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgIHRoaXMub25TYXZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU2NUIwXHU2Mjc5XHU2Q0U4XHU4RjkzXHU1MTY1XG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FkZCBOZXcgQW5ub3RhdGlvbicgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAuc2V0TmFtZSgnQW5ub3RhdGlvbicpXG4gICAgICAuc2V0RGVzYygnQWRkIG5vdGVzIGFib3V0IHRoaXMgZmlsZScpXG4gICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB7XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIGZpbGUgYW5ub3RhdGlvbi4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuYW5ub3RhdGlvblRleHQpXG4gICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuYW5ub3RhdGlvblRleHQgPSB2YWx1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHRleHQuaW5wdXRFbC5yb3dzID0gNDtcbiAgICAgICAgdGV4dC5pbnB1dEVsLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgfSk7XG5cbiAgICAvLyBcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG5cbiAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdTYXZlJyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgc2F2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZUFubm90YXRpb24oKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2F2ZUFubm90YXRpb24oKSB7XG4gICAgaWYgKCF0aGlzLmFubm90YXRpb25UZXh0LnRyaW0oKSkge1xuICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGVudGVyIGFubm90YXRpb24gdGV4dCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5hZGRGaWxlQW5ub3RhdGlvbihcbiAgICAgICAgdGhpcy5maWxlUGF0aCxcbiAgICAgICAgdGhpcy5hbm5vdGF0aW9uVGV4dFxuICAgICAgKTtcbiAgICAgIG5ldyBOb3RpY2UoJ0ZpbGUgYW5ub3RhdGlvbiBhZGRlZCcpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgdGhpcy5vblNhdmUoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIGZpbGUgYW5ub3RhdGlvbjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdFcnJvciBzYXZpbmcgZmlsZSBhbm5vdGF0aW9uJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkZWxldGVBbm5vdGF0aW9uKGlkOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZGVsZXRlQW5ub3RhdGlvbihpZCk7XG4gICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIGRlbGV0ZWQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgYW5ub3RhdGlvbjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdFcnJvciBkZWxldGluZyBhbm5vdGF0aW9uJyk7XG4gICAgfVxuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufSIsICJpbXBvcnQgeyBQbHVnaW4sIFRGaWxlLCBXb3Jrc3BhY2VMZWFmLCBOb3RpY2UsIE1hcmtkb3duVmlldyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFNldHRpbmdzVGFiIH0gZnJvbSAnLi91aS9TZXR0aW5nc1RhYic7XG5pbXBvcnQgeyBPdmVydmlld1ZpZXcsIFZJRVdfVFlQRV9PVkVSVklFVyB9IGZyb20gJy4vdWkvT3ZlcnZpZXdWaWV3JztcbmltcG9ydCB7IFNpZGViYXJPdmVydmlld1ZpZXcsIFZJRVdfVFlQRV9TSURFQkFSX09WRVJWSUVXLCBWSUVXX1RZUEVfTUFJTl9PVkVSVklFVyAgfSBmcm9tICcuL3VpL1NpZGViYXJPdmVydmlld1ZpZXcnO1xuaW1wb3J0IHsgUmV2aWV3VmlldywgVklFV19UWVBFX1JFVklFVyB9IGZyb20gJy4vdWkvUmV2aWV3Vmlldyc7XG5pbXBvcnQgeyBTdGF0c1ZpZXcsIFZJRVdfVFlQRV9TVEFUUyB9IGZyb20gJy4vdWkvU3RhdHNWaWV3JztcbmltcG9ydCB7IERhdGFNYW5hZ2VyIH0gZnJvbSAnLi9jb3JlL0RhdGFNYW5hZ2VyJztcbmltcG9ydCB7IEV4dHJhY3Rpb25FbmdpbmUgfSBmcm9tICcuL2NvcmUvRXh0cmFjdGlvbkVuZ2luZSc7XG5pbXBvcnQgeyBBbm5vdGF0aW9uTWFuYWdlciB9IGZyb20gJy4vY29yZS9Bbm5vdGF0aW9uTWFuYWdlcic7XG5pbXBvcnQgeyBGbGFzaGNhcmRNYW5hZ2VyIH0gZnJvbSAnLi9jb3JlL0ZsYXNoY2FyZE1hbmFnZXInO1xuXG5pbnRlcmZhY2UgTGVhcm5pbmdTeXN0ZW1TZXR0aW5ncyB7XG4gIGV4dHJhY3Rpb25FbmFibGVkOiBib29sZWFuO1xuICBhdXRvU2NhbjogYm9vbGVhbjtcbiAgZGVmYXVsdERlY2s6IHN0cmluZztcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTGVhcm5pbmdTeXN0ZW1TZXR0aW5ncyA9IHtcbiAgZXh0cmFjdGlvbkVuYWJsZWQ6IHRydWUsXG4gIGF1dG9TY2FuOiBmYWxzZSxcbiAgZGVmYXVsdERlY2s6ICdEZWZhdWx0J1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5nczogTGVhcm5pbmdTeXN0ZW1TZXR0aW5ncztcbiAgZGF0YU1hbmFnZXI6IERhdGFNYW5hZ2VyO1xuICBleHRyYWN0aW9uRW5naW5lOiBFeHRyYWN0aW9uRW5naW5lO1xuICBhbm5vdGF0aW9uTWFuYWdlcjogQW5ub3RhdGlvbk1hbmFnZXI7XG4gIGZsYXNoY2FyZE1hbmFnZXI6IEZsYXNoY2FyZE1hbmFnZXI7XG5cblxuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgY29uc29sZS5sb2coJ0xvYWRpbmcgTGVhcm5pbmcgU3lzdGVtIFBsdWdpbicpO1xuXG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1NjgzOFx1NUZDM1x1NkEyMVx1NTc1N1xuICAgIHRoaXMuZGF0YU1hbmFnZXIgPSBuZXcgRGF0YU1hbmFnZXIodGhpcy5hcHAsIHRoaXMpO1xuICAgIGF3YWl0IHRoaXMuZGF0YU1hbmFnZXIuaW5pdGlhbGl6ZSgpO1xuXG4gICAgdGhpcy5hbm5vdGF0aW9uTWFuYWdlciA9IG5ldyBBbm5vdGF0aW9uTWFuYWdlcih0aGlzLmFwcCwgdGhpcyk7XG4gICAgYXdhaXQgdGhpcy5hbm5vdGF0aW9uTWFuYWdlci5pbml0aWFsaXplKCk7XG5cbiAgICB0aGlzLmZsYXNoY2FyZE1hbmFnZXIgPSBuZXcgRmxhc2hjYXJkTWFuYWdlcihcbiAgICAgIHRoaXMuYXBwLFxuICAgICAgdGhpcy5kYXRhTWFuYWdlcixcbiAgICAgIHRoaXNcbiAgICApO1xuICAgIGF3YWl0IHRoaXMuZmxhc2hjYXJkTWFuYWdlci5pbml0aWFsaXplKCk7XG4gICAgXG5cbiAgICB0aGlzLmV4dHJhY3Rpb25FbmdpbmUgPSBuZXcgRXh0cmFjdGlvbkVuZ2luZShcbiAgICAgIHRoaXMuYXBwLFxuICAgICAgdGhpcy5kYXRhTWFuYWdlcixcbiAgICAgIHRoaXMuZmxhc2hjYXJkTWFuYWdlclxuICAgICk7XG5cbiAgICAvLyBcdTZDRThcdTUxOENcdTg5QzZcdTU2RkVcbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFZJRVdfVFlQRV9PVkVSVklFVyxcbiAgICAgIChsZWFmKSA9PiBuZXcgT3ZlcnZpZXdWaWV3KGxlYWYsIHRoaXMpXG4gICAgKTtcblxuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX1NJREVCQVJfT1ZFUlZJRVcsXG4gICAgICAobGVhZikgPT4gbmV3IFNpZGViYXJPdmVydmlld1ZpZXcobGVhZiwgdGhpcywgZmFsc2UpXG4gICAgKTtcbiAgICBcbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFZJRVdfVFlQRV9NQUlOX09WRVJWSUVXLFxuICAgICAgKGxlYWYpID0+IG5ldyBTaWRlYmFyT3ZlcnZpZXdWaWV3KGxlYWYsIHRoaXMsIHRydWUpXG4gICAgKTtcblxuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX1JFVklFVyxcbiAgICAgIChsZWFmKSA9PiBuZXcgUmV2aWV3VmlldyhsZWFmLCB0aGlzKVxuICAgICk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFZJRVdfVFlQRV9TVEFUUyxcbiAgICAgIChsZWFmKSA9PiBuZXcgU3RhdHNWaWV3KGxlYWYsIHRoaXMpXG4gICAgKTtcblxuICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZWRpdG9yLW1lbnUnLCAobWVudSwgZWRpdG9yLCB2aWV3KSA9PiB7XG4gICAgICAgIGlmICh2aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSB7XG4gICAgICAgICAgY29uc3QgZmlsZSA9IHZpZXcuZmlsZTtcbiAgICAgICAgICBpZiAoZmlsZSkge1xuICAgICAgICAgICAgdGhpcy5leHRyYWN0aW9uRW5naW5lLnJlZ2lzdGVyQ29udGV4dE1lbnUobWVudSwgZWRpdG9yLCBmaWxlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgKTtcbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNldHRpbmdzVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG4gICAgdGhpcy5hZGRDb21tYW5kcygpO1xuXG4gICAgLy8gUmliYm9uIFx1NTZGRVx1NjgwN1xuICAgIHRoaXMuYWRkUmliYm9uSWNvbignbGF5b3V0LWxpc3QnLCAnT3BlbiBMZWFybmluZyBPdmVydmlldyhTaWRlYmFyKScsICgpID0+IHtcbiAgICAgIHRoaXMuYWN0aXZhdGVTaWRlYmFyT3ZlcnZpZXcoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkUmliYm9uSWNvbignbGF5ZXJzJywgJ1N0YXJ0IFJldmlldycsICgpID0+IHtcbiAgICAgIHRoaXMuYWN0aXZhdGVSZXZpZXcoKTtcbiAgICB9KTtcblxuICAgIC8vIFx1NzJCNlx1NjAwMVx1NjgwRiAtIFx1NjYzRVx1NzkzQVx1NUY4NVx1NTkwRFx1NEU2MFx1NjU3MFx1OTFDRlxuICAgIHRoaXMuc2V0dXBTdGF0dXNCYXIoKTtcblxuICAgIGNvbnNvbGUubG9nKCdMZWFybmluZyBTeXN0ZW0gUGx1Z2luIGxvYWRlZCcpO1xuICB9XG5cbiAgb251bmxvYWQoKSB7XG4gICAgY29uc29sZS5sb2coJ1VubG9hZGluZyBMZWFybmluZyBTeXN0ZW0gUGx1Z2luJyk7XG4gICAgXG4gICAgLy8gXHU1M0VBXHU1NzI4XHU2M0QyXHU0RUY2XHU1QjhDXHU1MTY4XHU1Mzc4XHU4RjdEXHU2NUY2XHU2MjREXHU2RTA1XHU3NDA2XHU2MjQwXHU2NzA5XHU4OUM2XHU1NkZFXG4gICAgLy8gXHU2Q0U4XHU2MTBGXHVGRjFBXHU4RkQ5XHU5MUNDXHU0RTBEXHU4OTgxXHU1MjIwXHU5NjY0XHU3Mjc5XHU1QjlBXHU4OUM2XHU1NkZFXHU3QzdCXHU1NzhCXHVGRjBDXHU4QkE5IE9ic2lkaWFuIFx1ODFFQVx1NURGMVx1N0JBMVx1NzQwNlxuICAgIC8vIFx1NTNFQVx1NkUwNVx1NzQwNlx1NjNEMlx1NEVGNlx1N0VBN1x1NTIyQlx1NzY4NFx1OEQ0NFx1NkU5MFxuICAgIFxuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGVhcm5pbmctb3ZlcnZpZXctc3R5bGVzJyk7XG4gICAgaWYgKHN0eWxlRWwpIHtcbiAgICAgIHN0eWxlRWwucmVtb3ZlKCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICB9XG5cbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gIH1cblxuICBwcml2YXRlIGFkZENvbW1hbmRzKCkge1xuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3NjYW4tY3VycmVudC1maWxlJyxcbiAgICAgIG5hbWU6ICdTY2FuIGN1cnJlbnQgZmlsZSBmb3IgY29udGVudCcsXG4gICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKCFhY3RpdmVGaWxlKSByZXR1cm47XG4gICAgICAgIGF3YWl0IHRoaXMuZXh0cmFjdGlvbkVuZ2luZS5zY2FuRmlsZShhY3RpdmVGaWxlKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoT3ZlcnZpZXcoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3NjYW4tdmF1bHQnLFxuICAgICAgbmFtZTogJ1NjYW4gZW50aXJlIHZhdWx0JyxcbiAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZXh0cmFjdGlvbkVuZ2luZS5zY2FuVmF1bHQoKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoT3ZlcnZpZXcoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ29wZW4tb3ZlcnZpZXcnLFxuICAgICAgbmFtZTogJ09wZW4gTGVhcm5pbmcgT3ZlcnZpZXcoU2lkZWJhciknLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgdGhpcy5hY3RpdmF0ZVNpZGViYXJPdmVydmlldygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnb3Blbi1tYWluLW92ZXJ2aWV3JyxcbiAgICAgIG5hbWU6ICdPcGVuIExlYXJuaW5nIE92ZXJ2aWV3IChNYWluIFZpZXcpJyxcbiAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVNYWluVmlldygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnYWRkLWZpbGUtYW5ub3RhdGlvbicsXG4gICAgICBuYW1lOiAnQWRkIGZpbGUgYW5ub3RhdGlvbicsXG4gICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKCFhY3RpdmVGaWxlKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgeyBGaWxlQW5ub3RhdGlvbk1vZGFsIH0gPSBhd2FpdCBpbXBvcnQoJy4vdWkvQW5ub3RhdGlvbk1vZGFsJyk7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IEZpbGVBbm5vdGF0aW9uTW9kYWwoXG4gICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgdGhpcyxcbiAgICAgICAgICBhY3RpdmVGaWxlLnBhdGgsXG4gICAgICAgICAgKCkgPT4gdGhpcy5yZWZyZXNoT3ZlcnZpZXcoKVxuICAgICAgICApO1xuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdzdGFydC1yZXZpZXcnLFxuICAgICAgbmFtZTogJ1N0YXJ0IGZsYXNoY2FyZCByZXZpZXcnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgdGhpcy5hY3RpdmF0ZVJldmlldygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnc2hvdy1zdGF0cycsXG4gICAgICBuYW1lOiAnU2hvdyBmbGFzaGNhcmQgc3RhdGlzdGljcycsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICB0aGlzLmFjdGl2YXRlU3RhdHMoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBcbiAgYXN5bmMgYWN0aXZhdGVNYWluVmlldygpIHtcbiAgICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG5cbiAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTVERjJcdTdFQ0ZcdTY3MDlcdTRFM0JcdTc1NENcdTk3NjJcdTg5QzZcdTU2RkVcdTYyNTNcdTVGMDBcbiAgICBsZXQgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX01BSU5fT1ZFUlZJRVcpWzBdO1xuICAgIFxuICAgIGlmICghbGVhZikge1xuICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NUIwXHU3Njg0XHU2ODA3XHU3QjdFXHU5ODc1XG4gICAgICBsZWFmID0gd29ya3NwYWNlLmdldExlYWYoJ3RhYicpO1xuICAgICAgYXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICB0eXBlOiBWSUVXX1RZUEVfTUFJTl9PVkVSVklFVyxcbiAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgd29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gIH1cbiAgXG4gIGFzeW5jIGFjdGl2YXRlU2lkZWJhck92ZXJ2aWV3KCkge1xuICAgIGNvbnN0IHsgd29ya3NwYWNlIH0gPSB0aGlzLmFwcDtcbiAgICBcbiAgICBsZXQgbGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xuICAgIGNvbnN0IGxlYXZlcyA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1NJREVCQVJfT1ZFUlZJRVcpO1xuXG4gICAgaWYgKGxlYXZlcy5sZW5ndGggPiAwKSB7XG4gICAgICBsZWFmID0gbGVhdmVzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTU3MjhcdTUzRjNcdTRGQTdcdThGQjlcdTY4MEZcdTUyMUJcdTVFRkFcdTY1QjBcdTc2ODRcdTg5QzZcdTU2RkVcbiAgICAgIGxlYWYgPSB3b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcbiAgICAgIGF3YWl0IGxlYWY/LnNldFZpZXdTdGF0ZSh7XG4gICAgICAgIHR5cGU6IFZJRVdfVFlQRV9TSURFQkFSX09WRVJWSUVXLFxuICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChsZWFmKSB7XG4gICAgICB3b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZU92ZXJ2aWV3KCkge1xuICAgIGNvbnN0IHsgd29ya3NwYWNlIH0gPSB0aGlzLmFwcDtcbiAgICBsZXQgbGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xuICAgIGNvbnN0IGxlYXZlcyA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX09WRVJWSUVXKTtcblxuICAgIGlmIChsZWF2ZXMubGVuZ3RoID4gMCkge1xuICAgICAgbGVhZiA9IGxlYXZlc1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWFmKGB0YWJgKTtcbiAgICAgIGF3YWl0IGxlYWY/LnNldFZpZXdTdGF0ZSh7XG4gICAgICAgIHR5cGU6IFZJRVdfVFlQRV9PVkVSVklFVyxcbiAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAobGVhZikge1xuICAgICAgd29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVSZXZpZXcoKSB7XG4gICAgY29uc3Qgc3RhdHMgPSB0aGlzLmZsYXNoY2FyZE1hbmFnZXIuZ2V0U3RhdHMoKTtcbiAgICBcbiAgICBpZiAoc3RhdHMuZHVlID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdObyBjYXJkcyBkdWUgZm9yIHJldmlldyEnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG4gICAgbGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcbiAgICBjb25zdCBsZWF2ZXMgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9SRVZJRVcpO1xuXG4gICAgaWYgKGxlYXZlcy5sZW5ndGggPiAwKSB7XG4gICAgICBsZWFmID0gbGVhdmVzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZWFmID0gd29ya3NwYWNlLmdldExlYWYodHJ1ZSk7XG4gICAgICBhd2FpdCBsZWFmPy5zZXRWaWV3U3RhdGUoe1xuICAgICAgICB0eXBlOiBWSUVXX1RZUEVfUkVWSUVXLFxuICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChsZWFmKSB7XG4gICAgICB3b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZVN0YXRzKCkge1xuICAgIGNvbnN0IHsgd29ya3NwYWNlIH0gPSB0aGlzLmFwcDtcbiAgICBsZXQgbGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xuICAgIGNvbnN0IGxlYXZlcyA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1NUQVRTKTtcblxuICAgIGlmIChsZWF2ZXMubGVuZ3RoID4gMCkge1xuICAgICAgbGVhZiA9IGxlYXZlc1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWFmKCd0YWInKTtcbiAgICAgIGF3YWl0IGxlYWY/LnNldFZpZXdTdGF0ZSh7XG4gICAgICAgIHR5cGU6IFZJRVdfVFlQRV9TVEFUUyxcbiAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAobGVhZikge1xuICAgICAgd29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gICAgfVxuICB9XG5cbiAgcmVmcmVzaE92ZXJ2aWV3KCkge1xuICAgIFxuICAgIC8vIFx1NTIzN1x1NjVCMFx1NjVFN1x1NzI0OCBPdmVydmlld1xuICAgIGNvbnN0IG92ZXJ2aWV3TGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfT1ZFUlZJRVcpO1xuICAgIG92ZXJ2aWV3TGVhdmVzLmZvckVhY2gobGVhZiA9PiB7XG4gICAgICBjb25zdCB2aWV3ID0gbGVhZi52aWV3IGFzIE92ZXJ2aWV3VmlldztcbiAgICAgIHZpZXcucmVmcmVzaCgpO1xuICAgIH0pO1xuXG4gICAgLy8gXHU1MjM3XHU2NUIwXHU0RkE3XHU4RkI5XHU2ODBGXHU4OUM2XHU1NkZFXG4gICAgY29uc3Qgc2lkZWJhckxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1NJREVCQVJfT1ZFUlZJRVcpO1xuICAgIHNpZGViYXJMZWF2ZXMuZm9yRWFjaChsZWFmID0+IHtcbiAgICAgIGNvbnN0IHZpZXcgPSBsZWFmLnZpZXcgYXMgU2lkZWJhck92ZXJ2aWV3VmlldztcbiAgICAgIHZpZXcucmVmcmVzaCgpO1xuICAgIH0pO1xuXG4gICAgLy8gXHU1MjM3XHU2NUIwXHU0RTNCXHU3NTRDXHU5NzYyXHU4OUM2XHU1NkZFXG4gICAgY29uc3QgbWFpbkxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX01BSU5fT1ZFUlZJRVcpO1xuICAgIG1haW5MZWF2ZXMuZm9yRWFjaChsZWFmID0+IHtcbiAgICAgIGNvbnN0IHZpZXcgPSBsZWFmLnZpZXcgYXMgU2lkZWJhck92ZXJ2aWV3VmlldztcbiAgICAgIHZpZXcucmVmcmVzaCgpO1xuICAgIH0pO1xuICAgIFxuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cFN0YXR1c0JhcigpIHtcbiAgICBjb25zdCBzdGF0dXNCYXJJdGVtID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKCk7XG4gICAgc3RhdHVzQmFySXRlbS5hZGRDbGFzcygnbGVhcm5pbmctc3lzdGVtLXN0YXR1cycpO1xuICAgIFxuICAgIGNvbnN0IHVwZGF0ZVN0YXR1cyA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXRzID0gdGhpcy5mbGFzaGNhcmRNYW5hZ2VyLmdldFN0YXRzKCk7XG4gICAgICBzdGF0dXNCYXJJdGVtLnNldFRleHQoYFx1RDgzQ1x1RENDRiAke3N0YXRzLmR1ZX0gZHVlYCk7XG4gICAgICBzdGF0dXNCYXJJdGVtLnRpdGxlID0gYCR7c3RhdHMuZHVlfSBjYXJkcyBkdWUgZm9yIHJldmlld1xcbiR7c3RhdHMubmV3fSBuZXcgY2FyZHNgO1xuICAgIH07XG5cbiAgICAvLyBcdTUyMURcdTU5Q0JcdTY2RjRcdTY1QjBcbiAgICB1cGRhdGVTdGF0dXMoKTtcblxuICAgIC8vIFx1NkJDRlx1NTIwNlx1OTQ5Rlx1NjZGNFx1NjVCMFx1NEUwMFx1NkIyMVxuICAgIHRoaXMucmVnaXN0ZXJJbnRlcnZhbChcbiAgICAgIHdpbmRvdy5zZXRJbnRlcnZhbCh1cGRhdGVTdGF0dXMsIDYwMDAwKVxuICAgICk7XG5cbiAgICAvLyBcdTcwQjlcdTUxRkJcdTYyNTNcdTVGMDBcdTU5MERcdTRFNjBcbiAgICBzdGF0dXNCYXJJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5hY3RpdmF0ZVJldmlldygpO1xuICAgIH0pO1xuICB9XG59IiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIExlYXJuaW5nU3lzdGVtUGx1Z2luIGZyb20gJy4uL21haW4nO1xuXG5leHBvcnQgY2xhc3MgU2V0dGluZ3NUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbjtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnTGVhcm5pbmcgU3lzdGVtIFNldHRpbmdzJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBleHRyYWN0aW9uJylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgYXV0b21hdGljIGNvbnRlbnQgZXh0cmFjdGlvbicpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZXh0cmFjdGlvbkVuYWJsZWQpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmV4dHJhY3Rpb25FbmFibGVkID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0F1dG8gc2NhbicpXG4gICAgICAuc2V0RGVzYygnQXV0b21hdGljYWxseSBzY2FuIGZpbGVzIHdoZW4gdGhleSBhcmUgb3BlbmVkJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvU2NhbilcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1NjYW4gPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRGVmYXVsdCBkZWNrJylcbiAgICAgIC5zZXREZXNjKCdEZWZhdWx0IGRlY2sgbmFtZSBmb3IgbmV3IGZsYXNoY2FyZHMnKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdEZWZhdWx0JylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdERlY2spXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHREZWNrID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcbiAgfVxufSIsICIvLyBTaWRlYmFyT3ZlcnZpZXdWaWV3LnRzIC0gXHU1QjhDXHU2NTc0XHU1QjlFXHU3M0IwXHU3MjQ4XHU2NzJDXG5pbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgVEZpbGUsIE1lbnUsIE5vdGljZSwgTW9kYWwsIEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIExlYXJuaW5nU3lzdGVtUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgQ29udGVudFVuaXQgfSBmcm9tICcuLi9jb3JlL0RhdGFNYW5hZ2VyJztcbmltcG9ydCB7IEZsYXNoY2FyZCB9IGZyb20gJy4uL2NvcmUvRmxhc2hjYXJkTWFuYWdlcic7XG5pbXBvcnQgeyBRdWlja0ZsYXNoY2FyZENyZWF0b3IgfSBmcm9tICcuLi9jb3JlL1F1aWNrRmxhc2hjYXJkQ3JlYXRvcic7XG5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfU0lERUJBUl9PVkVSVklFVyA9ICdsZWFybmluZy1zeXN0ZW0tc2lkZWJhci1vdmVydmlldyc7XG5leHBvcnQgY29uc3QgVklFV19UWVBFX01BSU5fT1ZFUlZJRVcgPSAnbGVhcm5pbmctc3lzdGVtLW1haW4tb3ZlcnZpZXcnO1xuXG50eXBlIEZpbHRlck1vZGUgPSAnYWxsJyB8ICdhbm5vdGF0ZWQnIHwgJ2ZsYXNoY2FyZHMnO1xudHlwZSBEaXNwbGF5TW9kZSA9ICdzaWRlYmFyJyB8ICdtYWluJztcbnR5cGUgR3JvdXBNb2RlID0gJ2ZpbGUnIHwgICdhbm5vdGF0aW9uJyB8ICd0YWcnIHwgJ2RhdGUnO1xudHlwZSBWaWV3VHlwZSA9ICdub3RlcycgfCAnY2FyZHMnO1xuXG5leHBvcnQgIGNsYXNzIFNpZGViYXJPdmVydmlld1ZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW47XG4gIFxuICAvLyBcdTcyQjZcdTYwMDFcdTdCQTFcdTc0MDZcbiAgcHJpdmF0ZSBmb3JjZU1haW5Nb2RlOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgc2VhcmNoUXVlcnk6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIGZpbHRlck1vZGU6IEZpbHRlck1vZGUgPSAnYWxsJztcbiAgcHJpdmF0ZSBncm91cE1vZGU6IEdyb3VwTW9kZSA9ICdmaWxlJztcbiAgcHJpdmF0ZSBzZWxlY3RlZEZpbGU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGRpc3BsYXlNb2RlOiBEaXNwbGF5TW9kZSA9ICdzaWRlYmFyJzsgXG4gIHByaXZhdGUgdmlld1R5cGU6IFZpZXdUeXBlID0gJ25vdGVzJztcbiAgcHJpdmF0ZSBhY3RpdmVNZW51SWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHNhdmVkU2Nyb2xsUG9zaXRpb246IG51bWJlciA9IDA7XG4gIHByaXZhdGUgc2hvdWxkUmVzdG9yZVNjcm9sbDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIGJhdGNoTW9kZTogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIHNlbGVjdGVkVW5pdElkczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG4gIHByaXZhdGUgc2VsZWN0ZWRDYXJkSWRzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcblxuICBcbiAgLy8gXHU2MDI3XHU4MEZEXHU0RjE4XHU1MzE2XG4gIHByaXZhdGUgc2VhcmNoRGVib3VuY2VUaW1lcjogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgaXNSZW5kZXJpbmc6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luLCBmb3JjZU1haW5Nb2RlID0gZmFsc2UpIHtcbiAgICBzdXBlcihsZWFmKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLmZvcmNlTWFpbk1vZGUgPSBmb3JjZU1haW5Nb2RlOyAgXG5cblxuICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgaWYgKGFjdGl2ZUZpbGUpIHtcbiAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IGFjdGl2ZUZpbGUucGF0aDtcbiAgfVxuICAgIC8vICoqXHU0RkVFXHU2NTM5OiBcdTZERkJcdTUyQTBcdTk2MzJcdTYyOTZcdTc2ODQgcmVzaXplIFx1NzZEMVx1NTQyQyoqXG4gICAgbGV0IHJlc2l6ZVRpbWVyOiBudW1iZXI7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dChyZXNpemVUaW1lcik7XG4gICAgICByZXNpemVUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5kZXRlY3REaXNwbGF5TW9kZSgpO1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgfSwgMTUwKTtcbiAgICB9KTtcbiAgICAvLyBcdTc2RDFcdTU0MkNcdTdBOTdcdTUzRTNcdTU5MjdcdTVDMEZcdTUzRDhcdTUzMTZcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuICAgICAgdGhpcy5kZXRlY3REaXNwbGF5TW9kZSgpO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgLy8gcmV0dXJuIHRoaXMuZm9yY2VNYWluTW9kZSA/IFZJRVdfVFlQRV9NQUlOX09WRVJWSUVXIDogVklFV19UWVBFX1NJREVCQVJfT1ZFUlZJRVc7XG4gIC8vICBcdThDMDNcdThCRDVcbiAgICBjb25zdCB2aWV3VHlwZSA9IHRoaXMuZm9yY2VNYWluTW9kZSA/IFZJRVdfVFlQRV9NQUlOX09WRVJWSUVXIDogVklFV19UWVBFX1NJREVCQVJfT1ZFUlZJRVc7XG5cbiAgICByZXR1cm4gdmlld1R5cGU7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnTGVhcm5pbmcgT3ZlcnZpZXcnO1xuICB9XG5cbiAgZ2V0SWNvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiAnYm9vay1tYXJrZWQnO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuXG4gICAgXG4gICAgdGhpcy5kZXRlY3REaXNwbGF5TW9kZSgpO1xuICBcbiAgICBpZiAoIXRoaXMuZm9yY2VNYWluTW9kZSkge1xuICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2FjdGl2ZS1sZWFmLWNoYW5nZScsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgICBpZiAoYWN0aXZlRmlsZSAmJiB0aGlzLmRpc3BsYXlNb2RlID09PSAnc2lkZWJhcicpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gYWN0aXZlRmlsZS5wYXRoO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBcbiAgICB0aGlzLnJlbmRlcigpO1xuICAgIFxuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTY4MzhcdTVGQzNcdTY1QjlcdTZDRDUgPT09PT09PT09PT09PT09PT09PT1cbiAgXG4gIC8qKlxuICAgKiBcdTY4QzBcdTZENEJcdTVGNTNcdTUyNERcdTY2M0VcdTc5M0FcdTZBMjFcdTVGMEZcdUZGMDhcdTRGQTdcdThGQjlcdTY4MEYgdnMgXHU0RTNCXHU3NTRDXHU5NzYyXHVGRjA5XG4gICAqL1xuICBwcml2YXRlIGRldGVjdERpc3BsYXlNb2RlKCkge1xuICAgIGlmICh0aGlzLmZvcmNlTWFpbk1vZGUpIHtcbiAgICAgIHRoaXMuZGlzcGxheU1vZGUgPSAnbWFpbic7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBhcmVudFNwbGl0ID0gKHRoaXMubGVhZiBhcyBhbnkpLnBhcmVudFNwbGl0O1xuICAgIGNvbnN0IGlzTGVmdFNpZGViYXIgPSBwYXJlbnRTcGxpdD8udHlwZSA9PT0gJ3NwbGl0JyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmxlZnRTcGxpdCA9PT0gcGFyZW50U3BsaXQ7XG4gICAgY29uc3QgaXNSaWdodFNpZGViYXIgPSBwYXJlbnRTcGxpdD8udHlwZSA9PT0gJ3NwbGl0JyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yaWdodFNwbGl0ID09PSBwYXJlbnRTcGxpdDtcbiAgICBcbiAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMuY29udGFpbmVyRWw7XG4gICAgY29uc3Qgd2lkdGggPSBjb250YWluZXJFbC5jbGllbnRXaWR0aDtcbiAgICBjb25zdCBpc05hcnJvdyA9IHdpZHRoIDwgNTAwO1xuICAgIFxuICAgIGNvbnN0IGlzU2lkZWJhciA9IGlzTGVmdFNpZGViYXIgfHwgaXNSaWdodFNpZGViYXIgfHwgaXNOYXJyb3c7XG5cbiAgICB0aGlzLmRpc3BsYXlNb2RlID0gaXNTaWRlYmFyID8gJ3NpZGViYXInIDogJ21haW4nO1xuICAgIFxuICB9XG5cbiAgLyoqXG4gICAqIFx1NTIzN1x1NjVCMFx1ODlDNlx1NTZGRVxuICAgKi9cbiAgcmVmcmVzaCgpIHtcbiAgICBcbiAgICAvLyBcdUQ4M0RcdUREMjcgXHU1OTgyXHU2NzlDXHU2QjYzXHU1NzI4XHU2RTMyXHU2N0QzXHVGRjBDXHU2ODA3XHU4QkIwXHU5NzAwXHU4OTgxXHU1MThEXHU2QjIxXHU1MjM3XHU2NUIwXG4gICAgaWYgKHRoaXMuaXNSZW5kZXJpbmcpIHtcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIFx1RDgzRFx1REQyNyBcdTZFMDVcdTk2NjRcdTY0MUNcdTdEMjJcdTk2MzJcdTYyOTZcdTVCOUFcdTY1RjZcdTU2NjhcbiAgICBpZiAodGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyICE9PSBudWxsKSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc2VhcmNoRGVib3VuY2VUaW1lcik7XG4gICAgICB0aGlzLnNlYXJjaERlYm91bmNlVGltZXIgPSBudWxsO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdUQ4M0RcdUREMjcgXHU2ODA3XHU4QkIwXHU5NzAwXHU4OTgxXHU2MDYyXHU1OTBEXHU2RURBXHU1MkE4XHU0RjREXHU3RjZFXG4gICAgdGhpcy5zaG91bGRSZXN0b3JlU2Nyb2xsID0gdHJ1ZTtcbiAgICBcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbi8vcmVuZGVyXHU2MkM2XHU1MjA2XHU1MUZEXHU2NTcwXG5wcml2YXRlIHJlc2V0SW50ZXJhY3Rpb25TdGF0ZShjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gIGNvbnRhaW5lci5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2F1dG8nO1xuICBjb25zdCB0b29sYmFyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyLXRvb2xiYXInKSBhcyBIVE1MRWxlbWVudDtcbiAgaWYgKHRvb2xiYXIpIHtcbiAgICB0b29sYmFyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7XG4gICAgdG9vbGJhci5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgdG9vbGJhci5zdHlsZS56SW5kZXggPSAnMTAwJztcbiAgfVxufVxucHJpdmF0ZSBzYXZlU2Nyb2xsUG9zaXRpb24oY29udGFpbmVyOkhUTUxFbGVtZW50KXtcbiAgaWYgKHRoaXMuZGlzcGxheU1vZGUgPT09ICdzaWRlYmFyJykge1xuICAgIGNvbnN0IGNvbnRlbnRMaXN0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyLWNvbnRlbnQtbGlzdCcpIGFzIEhUTUxFbGVtZW50O1xuICAgIGlmIChjb250ZW50TGlzdCkge1xuICAgICAgdGhpcy5zYXZlZFNjcm9sbFBvc2l0aW9uID0gY29udGVudExpc3Quc2Nyb2xsVG9wO1xuICAgIH1cbiAgfVxuICBcbn1cblxuXG4gIC8qKlxuICAgKiBcdTRFM0JcdTZFMzJcdTY3RDNcdTY1QjlcdTZDRDVcbiAgICovXG4gIFxuICBwcml2YXRlIHJlbmRlcigpIHtcblxuICAgICAgLy8gXHVEODNEXHVERDI3IFx1OUE4Q1x1OEJDMVx1NjU3MFx1NjM2RVx1NjYyRlx1NTQyNlx1NURGMlx1NTJBMFx1OEY3RFxuICBjb25zdCBhbGxVbml0cyA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldEFsbENvbnRlbnRVbml0cygpO1xuICBjb25zdCB1bml0c1dpdGhDYXJkcyA9IGFsbFVuaXRzLmZpbHRlcih1ID0+IHUuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApO1xuXG4gICAgaWYgKHRoaXMuaXNSZW5kZXJpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2VhcmNoRGVib3VuY2VUaW1lciAhPT0gbnVsbCkge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnNlYXJjaERlYm91bmNlVGltZXIpO1xuICAgICAgdGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5pc1JlbmRlcmluZyA9IHRydWU7XG4gICAgXG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudDtcbiAgICBcbiAgIFxuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRlx1NEZBN1x1OEZCOVx1NjgwRlx1NkEyMVx1NUYwRlx1RkYwQ1x1NjAzQlx1NjYyRlx1NEZERFx1NUI1OFx1NUY1M1x1NTI0RFx1NkVEQVx1NTJBOFx1NEY0RFx1N0Y2RVxuICAgIHRoaXMuc2F2ZVNjcm9sbFBvc2l0aW9uKGNvbnRhaW5lcik7XG4gICAgLy8gXHVEODNEXHVERDI3IFx1NkUwNVx1OTY2NFx1NjI0MFx1NjcwOVx1NTNFRlx1ODBGRFx1OTYzQlx1NTg1RVx1NEVBNFx1NEU5Mlx1NzY4NFx1NjgzN1x1NUYwRlxuICAgIHRoaXMucmVzZXRJbnRlcmFjdGlvblN0YXRlKGNvbnRhaW5lcilcbiAgICAgIC8vIFx1MjcwNSBcdTU5ODJcdTY3OUNcdTY2MkZcdTRFM0JcdTc1NENcdTk3NjJcdTZBMjFcdTVGMEZcdTRFMTRcdTZDQTFcdTY3MDlcdTkwMDlcdTRFMkRcdUZGMENcdTUyMURcdTU5Q0JcdTUzMTZcdTlFRDhcdThCQTRcdTkwMDlcdTRFMkRcbiAgaWYgKHRoaXMuZGlzcGxheU1vZGUgPT09ICdtYWluJyAmJiAhdGhpcy5zZWxlY3RlZEZpbGUgJiYgdGhpcy52aWV3VHlwZSA9PT0gJ25vdGVzJykge1xuICAgIGNvbnN0IHVuaXRzID0gdGhpcy5nZXRGaWx0ZXJlZFVuaXRzKCk7XG4gICAgY29uc3QgZ3JvdXBlZCA9IHRoaXMuZ3JvdXBVbml0cyh1bml0cyk7XG4gICAgaWYgKGdyb3VwZWQubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5zZWxlY3RlZEZpbGUgPSBncm91cGVkWzBdLmdyb3VwS2V5O1xuICAgIH1cbiAgfVxuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIGNvbnRhaW5lci5hZGRDbGFzcygnbGVhcm5pbmctb3ZlcnZpZXctY29udGFpbmVyJyk7XG4gICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnZGF0YS1tb2RlJywgdGhpcy5kaXNwbGF5TW9kZSk7XG4gIFxuICAgIC8vIFx1NjgzOVx1NjM2RVx1NkEyMVx1NUYwRlx1NkUzMlx1NjdEM1x1NEUwRFx1NTQwQ1x1NUUwM1x1NUM0MFxuICAgIGlmICh0aGlzLmRpc3BsYXlNb2RlID09PSAnc2lkZWJhcicpIHtcbiAgICAgIHRoaXMucmVuZGVyU2lkZWJhck1vZGUoY29udGFpbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW5kZXJNYWluTW9kZShjb250YWluZXIpO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTk3MDBcdTg5ODFcdTYwNjJcdTU5MERcdTZFREFcdTUyQThcdTRGNERcdTdGNkVcbiAgICBpZiAodGhpcy5kaXNwbGF5TW9kZSA9PT0gJ3NpZGViYXInICYmIHRoaXMuc2hvdWxkUmVzdG9yZVNjcm9sbCkge1xuICAgICAgY29uc3QgY29udGVudExpc3QgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnNpZGViYXItY29udGVudC1saXN0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAoY29udGVudExpc3QpIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBjb250ZW50TGlzdC5zY3JvbGxUb3AgPSB0aGlzLnNhdmVkU2Nyb2xsUG9zaXRpb247XG5cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMuaXNSZW5kZXJpbmcgPSBmYWxzZTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIFx1NEVDNVx1NTIzN1x1NjVCMFx1NTE4NVx1NUJCOVx1NTMzQVx1NTdERlx1RkYwOFx1NEUwRFx1OTFDRFx1NjVCMFx1NkUzMlx1NjdEM1x1NjU3NFx1NEUyQVx1ODlDNlx1NTZGRVx1RkYwOVxuICAgKi9cbiAgcHJpdmF0ZSByZWZyZXNoQ29udGVudCgpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdIGFzIEhUTUxFbGVtZW50O1xuICAgIFxuICAgIGlmICh0aGlzLmRpc3BsYXlNb2RlID09PSAnc2lkZWJhcicpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnRMaXN0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyLWNvbnRlbnQtbGlzdCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgaWYgKGNvbnRlbnRMaXN0KSB7XG4gICAgICAgIC8vIFx1NEZERFx1NUI1OFx1NkVEQVx1NTJBOFx1NEY0RFx1N0Y2RVxuICAgICAgICB0aGlzLnNhdmVkU2Nyb2xsUG9zaXRpb24gPSBjb250ZW50TGlzdC5zY3JvbGxUb3A7XG4gICAgICAgIFxuICAgICAgICBjb250ZW50TGlzdC5lbXB0eSgpO1xuICAgICAgICB0aGlzLnJlbmRlckNvbXBhY3RDb250ZW50TGlzdChjb250ZW50TGlzdCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTYwNjJcdTU5MERcdTZFREFcdTUyQThcdTRGNERcdTdGNkVcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBjb250ZW50TGlzdC5zY3JvbGxUb3AgPSB0aGlzLnNhdmVkU2Nyb2xsUG9zaXRpb247XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByaWdodFBhbmVsID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5yaWdodC1wYW5lbCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgaWYgKHJpZ2h0UGFuZWwpIHtcbiAgICAgICAgcmlnaHRQYW5lbC5lbXB0eSgpO1xuICAgICAgICB0aGlzLnJlbmRlclJpZ2h0UGFuZWwocmlnaHRQYW5lbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0gXHU0RkE3XHU4RkI5XHU2ODBGXHU2QTIxXHU1RjBGXHU2RTMyXHU2N0QzID09PT09PT09PT09PT09PT09PT09XG4gIFxuICBwcml2YXRlIHJlbmRlclNpZGViYXJNb2RlKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBcdTk4NzZcdTkwRThcdTVERTVcdTUxNzdcdTY4MEZcbiAgICB0aGlzLnJlbmRlclNpZGViYXJUb29sYmFyKGNvbnRhaW5lcik7XG4gICAgXG4gICAgLy8gXHU1MTg1XHU1QkI5XHU1MjE3XHU4ODY4XHVGRjA4XHU3RDI3XHU1MUQxXHU2QTIxXHU1RjBGXHVGRjA5XG4gICAgY29uc3QgY29udGVudExpc3QgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc2lkZWJhci1jb250ZW50LWxpc3QnIH0pO1xuICAgIHRoaXMucmVuZGVyQ29tcGFjdENvbnRlbnRMaXN0KGNvbnRlbnRMaXN0KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyU2lkZWJhclRvb2xiYXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHRvb2xiYXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc2lkZWJhci10b29sYmFyJyB9KTtcbiAgICBcbiAgICAvLyBcdTY0MUNcdTdEMjJcdTY4NDZcbiAgICBjb25zdCBzZWFyY2hDb250YWluZXIgPSB0b29sYmFyLmNyZWF0ZURpdih7IGNsczogJ3NlYXJjaC1jb250YWluZXInIH0pO1xuICAgIGNvbnN0IHNlYXJjaElucHV0ID0gc2VhcmNoQ29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnXHVEODNEXHVERDBEIFx1NjQxQ1x1N0QyMlx1N0IxNFx1OEJCMC4uLicsXG4gICAgICBjbHM6ICdzZWFyY2gtaW5wdXQnXG4gICAgfSk7XG4gICAgc2VhcmNoSW5wdXQudmFsdWUgPSB0aGlzLnNlYXJjaFF1ZXJ5O1xuICAgIFxuICAgIHNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgdGhpcy5zZWFyY2hRdWVyeSA9IHZhbHVlO1xuICAgICAgXG4gICAgICBpZiAodGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyICE9PSBudWxsKSB7XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5jbGVhcigpO1xuICAgICAgICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5jbGVhcigpO1xuICAgICAgICB0aGlzLnJlZnJlc2hDb250ZW50KCk7XG4gICAgICB9LCAzMDApO1xuICAgIH0pO1xuICBcbiAgICAvLyBcdThGQzdcdTZFRTRcdTU2NjhcbiAgICBjb25zdCBmaWx0ZXJzID0gdG9vbGJhci5jcmVhdGVEaXYoeyBjbHM6ICdmaWx0ZXItY2hpcHMnIH0pO1xuICAgIFxuICAgIGNvbnN0IGZpbHRlck9wdGlvbnMgPSBbXG4gICAgICB7IG1vZGU6ICdhbGwnIGFzIEZpbHRlck1vZGUsIGljb246ICdcdUQ4M0RcdURDREQnLCBsYWJlbDogJ2FsbG5vdGVzJyB9LFxuICAgICAgeyBtb2RlOiAnYW5ub3RhdGVkJyBhcyBGaWx0ZXJNb2RlLCBpY29uOiAnXHVEODNEXHVEQ0FDJywgbGFiZWw6ICdjb21tZW50JyB9LFxuICAgICAgeyBtb2RlOiAnZmxhc2hjYXJkcycgYXMgRmlsdGVyTW9kZSwgaWNvbjogJ1x1RDgzQ1x1RENDRicsIGxhYmVsOiAnZmxhc2hjYXJkcycgfVxuICAgIF07XG4gIFxuICAgIGZpbHRlck9wdGlvbnMuZm9yRWFjaCgoeyBtb2RlLCBpY29uLCBsYWJlbCB9KSA9PiB7XG4gICAgICBjb25zdCBjaGlwID0gZmlsdGVycy5jcmVhdGVEaXYoe1xuICAgICAgICBjbHM6IGBmaWx0ZXItY2hpcCAke3RoaXMuZmlsdGVyTW9kZSA9PT0gbW9kZSA/ICdhY3RpdmUnIDogJyd9YCxcbiAgICAgICAgdGV4dDogYCR7aWNvbn0gJHtsYWJlbH1gICBcbiAgICAgIH0pO1xuICAgICAgY2hpcC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZmlsdGVyTW9kZSAhPT0gbW9kZSkge1xuICAgICAgICAgIHRoaXMuZmlsdGVyTW9kZSA9IG1vZGU7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5jbGVhcigpO1xuICAgICAgICAgIHRoaXMuYmF0Y2hNb2RlID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5zaG91bGRSZXN0b3JlU2Nyb2xsID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIFxuICAgIC8vIFx1NTIwNlx1N0VDNFx1NkEyMVx1NUYwRlx1NTIwN1x1NjM2MlxuICAgIGNvbnN0IGdyb3VwU3dpdGNoZXIgPSB0b29sYmFyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLXN3aXRjaGVyJyB9KTtcbiAgICBcbiAgICBjb25zdCBncm91cE9wdGlvbnMgPSBbXG4gICAgICB7IG1vZGU6ICdmaWxlJyBhcyBHcm91cE1vZGUsIGljb246ICdcdUQ4M0RcdURDQzEnLCB0b29sdGlwOiAnXHU2MzA5XHU2NTg3XHU0RUY2JyB9LFxuICAgICAgeyBtb2RlOiAndGFnJyBhcyBHcm91cE1vZGUsIGljb246ICdcdUQ4M0NcdURGRjdcdUZFMEYnLCB0b29sdGlwOiAnXHU2MzA5XHU2ODA3XHU3QjdFJyB9LFxuICAgICAgeyBtb2RlOiAnZGF0ZScgYXMgR3JvdXBNb2RlLCBpY29uOiAnXHVEODNEXHVEQ0M1JywgdG9vbHRpcDogJ1x1NjMwOVx1NjVFNVx1NjcxRicgfVxuICAgIF07XG4gIFxuICAgIGdyb3VwT3B0aW9ucy5mb3JFYWNoKCh7IG1vZGUsIGljb24sIHRvb2x0aXAgfSkgPT4ge1xuICAgICAgY29uc3QgYnRuID0gZ3JvdXBTd2l0Y2hlci5jcmVhdGVEaXYoe1xuICAgICAgICBjbHM6IGBncm91cC1idG4gJHt0aGlzLmdyb3VwTW9kZSA9PT0gbW9kZSA/ICdhY3RpdmUnIDogJyd9YCxcbiAgICAgICAgdGV4dDogaWNvblxuICAgICAgfSk7XG4gICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSAhPT0gbW9kZSkge1xuICAgICAgICAgIHRoaXMuZ3JvdXBNb2RlID0gbW9kZTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAodGhpcy5kaXNwbGF5TW9kZSA9PT0gJ3NpZGViYXInKSB7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gYWN0aXZlRmlsZSA/IGFjdGl2ZUZpbGUucGF0aCA6IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5jbGVhcigpO1xuICAgICAgICAgIHRoaXMuYmF0Y2hNb2RlID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIFxuICAgIC8vIFx1N0VERlx1OEJBMVx1NEZFMVx1NjA2Rlx1NTQ4Q1x1NjI3OVx1OTFDRlx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVxuICAgIGNvbnN0IHN0YXRzUm93ID0gdG9vbGJhci5jcmVhdGVEaXYoeyBjbHM6ICdzdGF0cy1yb3cnIH0pO1xuICBcbiAgICAvLyBcdTUxNjhcdTkwMDlcdTYzMDlcdTk0QUVcbiAgICB0aGlzLmNyZWF0ZVNlbGVjdEFsbEJ1dHRvbihzdGF0c1JvdywgJ3NpZGViYXInKTtcbiAgXG4gICAgLy8gXHU2Mjc5XHU5MUNGXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFXG4gICAgdGhpcy5jcmVhdGVCYXRjaEFjdGlvbkJ1dHRvbnMoc3RhdHNSb3csICdzaWRlYmFyJyk7XG4gIFxuICB9XG5cblxuICAvKipcbiAgICogXHU2RTMyXHU2N0QzXHU3RDI3XHU1MUQxXHU1MTg1XHU1QkI5XHU1MjE3XHU4ODY4XHVGRjA4XHU0RkE3XHU4RkI5XHU2ODBGXHU2QTIxXHU1RjBGXHVGRjA5XG4gICAqL1xuICBwcml2YXRlIHJlbmRlckNvbXBhY3RDb250ZW50TGlzdChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgbGV0IHVuaXRzID0gdGhpcy5nZXRGaWx0ZXJlZFVuaXRzKCk7XG5cbiAgLy8gXHU2NUIwXHU1ODlFOlx1NTk4Mlx1Njc5Q1x1NjYyRlx1NEZBN1x1OEZCOVx1NjgwRlx1NkEyMVx1NUYwRlx1NEUxNFx1NjcwOVx1OTAwOVx1NEUyRFx1NjU4N1x1NEVGNixcdTUzRUFcdTY2M0VcdTc5M0FcdThCRTVcdTY1ODdcdTRFRjZcdTc2ODRcdTdCMTRcdThCQjBcbiAgaWYgKHRoaXMuZGlzcGxheU1vZGUgPT09ICdzaWRlYmFyJyAmJiB0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgIHVuaXRzID0gdW5pdHMuZmlsdGVyKHVuaXQgPT4gdW5pdC5zb3VyY2UuZmlsZSA9PT0gdGhpcy5zZWxlY3RlZEZpbGUpO1xuICB9XG5cbiAgaWYgKHVuaXRzLmxlbmd0aCA9PT0gMCkge1xuICAgIC8vIFx1RDgzRFx1REQyNyBcdTZERkJcdTUyQTBcdThGRDlcdTZCQjU6XHU2NjNFXHU3OTNBXHU2M0QwXHU3OTNBXHU0RkUxXHU2MDZGXG4gICAgY29uc3QgZW1wdHlEaXYgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZW1wdHktc3RhdGUnIH0pO1xuICAgIFxuICAgIGlmICh0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgZW1wdHlEaXYuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogMjBweDsgdGV4dC1hbGlnbjogY2VudGVyO1wiPlxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJmb250LXNpemU6IDMycHg7IG1hcmdpbi1ib3R0b206IDEwcHg7XCI+XHVEODNEXHVEQ0VEPC9kaXY+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cImNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcIj5cdTVGNTNcdTUyNERcdTY1ODdcdTY4NjNcdTY2ODJcdTY1RTBcdTdCMTRcdThCQjA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC1zaXplOiAxMnB4OyBjb2xvcjogdmFyKC0tdGV4dC1mYWludCk7IG1hcmdpbi10b3A6IDhweDtcIj5cbiAgICAgICAgICAgICR7dGhpcy5maWx0ZXJNb2RlICE9PSAnYWxsJyA/ICdcdTVDMURcdThCRDVcdTUyMDdcdTYzNjJcdTUxNzZcdTRFRDZcdThGQzdcdTZFRTRcdTU2NjhcdTY3RTVcdTc3MEInIDogJ1x1NUYwMFx1NTlDQlx1OUFEOFx1NEVBRVx1NjU4N1x1NjcyQ1x1Njc2NVx1NTIxQlx1NUVGQVx1N0IxNFx1OEJCMCd9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9IGVsc2Uge1xuICAgICAgZW1wdHlEaXYudGV4dENvbnRlbnQgPSAnXHU2NjgyXHU2NUUwXHU1MTg1XHU1QkI5JztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgICBjb25zdCBncm91cGVkID0gdGhpcy5ncm91cFVuaXRzKHVuaXRzKTtcblxuICAgIGdyb3VwZWQuZm9yRWFjaCgoeyBncm91cEtleSwgdW5pdHM6IGdyb3VwVW5pdHMgfSkgPT4ge1xuICAgICAgY29uc3QgZ3JvdXBFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjb250ZW50LWdyb3VwJyB9KTtcblxuICAgICAgLy8gXHU1MjA2XHU3RUM0XHU2ODA3XHU5ODk4XG4gICAgICBjb25zdCBoZWFkZXIgPSBncm91cEVsLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLWhlYWRlcicgfSk7XG4gICAgICBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6IHRoaXMuZ2V0R3JvdXBJY29uKHRoaXMuZ3JvdXBNb2RlKSwgY2xzOiAnZ3JvdXAtaWNvbicgfSk7XG4gICAgICBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6IGdyb3VwS2V5LCBjbHM6ICdncm91cC10aXRsZScgfSk7XG4gICAgICBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6IGAke2dyb3VwVW5pdHMubGVuZ3RofWAsIGNsczogJ2dyb3VwLWNvdW50JyB9KTtcblxuICAgICAgLy8gXHU1MTg1XHU1QkI5XHU1MzYxXHU3MjQ3XHU1MjE3XHU4ODY4XG4gICAgICBncm91cFVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICAgIHRoaXMucmVuZGVyQ29tcGFjdENhcmQoZ3JvdXBFbCwgdW5pdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTZFMzJcdTY3RDNcdTdEMjdcdTUxRDFcdTUzNjFcdTcyNDdcdUZGMDhcdTRGQTdcdThGQjlcdTY4MEZcdTZBMjFcdTVGMEZcdUZGMDlcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyQ29tcGFjdENhcmQoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgdW5pdDogQ29udGVudFVuaXQpIHtcbiAgICBjb25zdCBjYXJkID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NvbXBhY3QtY2FyZCcgfSk7XG5cbiAgICAvLyBcdTYyNzlcdTkxQ0ZcdTkwMDlcdTYyRTlcdTZBMjFcdTVGMEZcdUZGMUFcdTZERkJcdTUyQTBjaGVja2JveFxuICAgIGlmICh0aGlzLmJhdGNoTW9kZSkge1xuICAgICAgY29uc3QgY2hlY2tib3ggPSBjYXJkLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgdHlwZTogJ2NoZWNrYm94JyxcbiAgICAgICAgY2xzOiAnYmF0Y2gtY2hlY2tib3gnXG4gICAgICB9KTtcbiAgICAgIGNoZWNrYm94LnNldEF0dHJpYnV0ZSgnZGF0YS11bml0LWlkJywgdW5pdC5pZCk7XG4gICAgICBjaGVja2JveC5jaGVja2VkID0gdGhpcy5zZWxlY3RlZFVuaXRJZHMuaGFzKHVuaXQuaWQpO1xuICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgICAgaWYgKChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuYWRkKHVuaXQuaWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmRlbGV0ZSh1bml0LmlkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgfSk7XG4gICAgfVxuXG4vLyBcdTVERTZcdTRGQTdcdTYzMDdcdTc5M0FcdTU2NjhcbmNvbnN0IGluZGljYXRvciA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1pbmRpY2F0b3InIH0pO1xuXG4vLyBcdUQ4M0RcdUREMjcgXHU2ODM5XHU2MzZFIHVuaXQudHlwZSBcdTZERkJcdTUyQTBcdTRFMERcdTU0MENcdTc2ODRcdTdDN0JcbmlmICh1bml0LnR5cGUgPT09ICdRQScpIHtcbiAgaW5kaWNhdG9yLmFkZENsYXNzKCd0eXBlLXFhJyk7XG59IGVsc2UgaWYgKHVuaXQudHlwZSA9PT0gJ2Nsb3plJykge1xuICBpbmRpY2F0b3IuYWRkQ2xhc3MoJ3R5cGUtY2xvemUnKTtcbn0gZWxzZSBpZiAodW5pdC50eXBlID09PSAndGV4dCcpIHtcbiAgaW5kaWNhdG9yLmFkZENsYXNzKCd0eXBlLXRleHQnKTtcbn1cblxuLy8gXHU0RkREXHU3NTU5XHU1MzlGXHU2NzA5XHU3Njg0XHU2Mjc5XHU2Q0U4XHU1NDhDXHU5NUVBXHU1MzYxXHU3MkI2XHU2MDAxXG5pZiAodW5pdC5hbm5vdGF0aW9uSWQpIGluZGljYXRvci5hZGRDbGFzcygnaGFzLWFubm90YXRpb24nKTtcbmlmICh1bml0LmZsYXNoY2FyZElkcy5sZW5ndGggPiAwKSBpbmRpY2F0b3IuYWRkQ2xhc3MoJ2hhcy1mbGFzaGNhcmQnKTtcbiAgICBcblxuLy8gXHU1MTg1XHU1QkI5XHU1MzNBXHU1N0RGXG5jb25zdCBjb250ZW50ID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLWNvbnRlbnQnIH0pO1xuXG4vLyBcdTVERTZcdTRFMEFcdTg5RDJcdUZGMUFcdTYyNzlcdTZDRThcdTU2RkVcdTY4MDdcbmNvbnN0IGhlYWRlciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1oZWFkZXInIH0pO1xuXG4vLyBcdTY1NzRcdTg4NENcdTYyNjdcdTg4NENcdTVERTZcdTRGQTdcdTkwM0JcdThGOTFcbmhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgdGhpcy50b2dnbGVJbmxpbmVBbm5vdGF0aW9uKGNhcmQsIHVuaXQpO1xufSk7XG5cbi8vIFx1NjMwOVx1OTRBRVx1NEUwRFx1OTcwMFx1ODk4MVx1NEVGQlx1NEY1NVx1OTAzQlx1OEY5MVx1RkYwQ1x1NzBCOVx1NTFGQlx1NEYxQVx1ODFFQVx1NzEzNlx1ODlFNlx1NTNEMSBoZWFkZXIgXHU3Njg0XHU5MDNCXHU4RjkxXG5jb25zdCBhbm5vdGF0aW9uQnRuID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ2Fubm90YXRpb24tYnRuJyB9KTtcbmFubm90YXRpb25CdG4uaW5uZXJIVE1MID0gJ1x1RDgzRFx1RENBQyc7XG5cblxuLy8gXHU1M0YzXHU0RTBBXHU4OUQyXHU1REU1XHU1MTc3XHU2MzA5XHU5NEFFXHVGRjA4XHU5NjNCXHU2QjYyXHU1MTkyXHU2Q0UxXHVGRjA5XG5jb25zdCB0b29scyA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLXRvb2xzJyB9KTtcbnRvb2xzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgZS5zdG9wUHJvcGFnYXRpb24oKTsgLy8gXHU1MTczXHU5NTJFXHVGRjAxXHU0RkREXHU4QkMxXHU1M0YzXHU0RkE3XHU2MzA5XHU5NEFFXHU0RTBEXHU4OUU2XHU1M0QxXHU2NTc0XHU4ODRDXHU3MEI5XHU1MUZCXG59KTtcbiAgXG5cblxuLy8gMi4gXHU5NzVFXHU2Mjc5XHU5MUNGXHU2QTIxXHU1RjBGXHU0RTBCXHU3Njg0XHU5NUVBXHU1MzYxXHU2MzA5XHU5NEFFXG5pZiAoIXRoaXMuYmF0Y2hNb2RlKSB7XG4gIGNvbnN0IGZsYXNoY2FyZEJ0biA9IHRvb2xzLmNyZWF0ZURpdih7IGNsczogJ3Rvb2wtYnRuIGZsYXNoY2FyZC1idG4nIH0pO1xuICBmbGFzaGNhcmRCdG4uaW5uZXJIVE1MID0gJ1x1MjZBMSc7XG4gIGZsYXNoY2FyZEJ0bi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnXHU3NTFGXHU2MjEwXHU5NUVBXHU1MzYxJyk7XG4gIGZsYXNoY2FyZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLnF1aWNrR2VuZXJhdGVGbGFzaGNhcmQodW5pdCk7XG4gIH0pO1xufVxuXG4gICAgLy8gXHU2NkY0XHU1OTFBXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFXG4gICAgY29uc3QgbW9yZUJ0biA9IHRvb2xzLmNyZWF0ZURpdih7IGNsczogJ3Rvb2wtYnRuIG1vcmUtYnRuJyB9KTtcbiAgICBtb3JlQnRuLmlubmVySFRNTCA9ICdcdTIyRUUnO1xuICAgIG1vcmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMuc2hvd0NvbnRleHRNZW51KGUsIHVuaXQpO1xuICAgIH0pO1xuXG4vLyBcdTdCMTRcdThCQjBcdTUxODVcdTVCQjlcdUZGMDhcdTcwQjlcdTUxRkJcdThERjNcdThGNkNcdTUyMzBcdTUzOUZcdTY1ODdcdUZGMDlcbmNvbnN0IG5vdGVUZXh0ID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdub3RlLXRleHQnIH0pO1xuXG5sZXQgZGlzcGxheUhUTUwgPSAnJztcblxuLy8gXHU1OTgyXHU2NzlDXHU2NjJGIFFBIFx1N0M3Qlx1NTc4Qlx1RkYwQ1x1NzUyOFx1NEUwRFx1NTQwQ1x1NjgzN1x1NUYwRlx1NjYzRVx1NzkzQVx1OTVFRVx1OTg5OFx1NTQ4Q1x1N0I1NFx1Njg0OFxuaWYgKHVuaXQudHlwZSA9PT0gJ1FBJyAmJiB1bml0LmFuc3dlcikge1xuICBkaXNwbGF5SFRNTCA9IGA8c3BhbiBjbGFzcz1cInFhLXF1ZXN0aW9uXCI+JHt1bml0LmNvbnRlbnR9PC9zcGFuPiA8c3BhbiBjbGFzcz1cInFhLXNlcGFyYXRvclwiPjo6PC9zcGFuPiA8c3BhbiBjbGFzcz1cInFhLWFuc3dlclwiPiR7dW5pdC5hbnN3ZXJ9PC9zcGFuPmA7XG59XG4vLyBcdTU5ODJcdTY3OUNcdTY2MkYgY2xvemUgXHU3QzdCXHU1NzhCXHVGRjBDXHU5QUQ4XHU0RUFFXHU2NjNFXHU3OTNBXHU3QjU0XHU2ODQ4XG5lbHNlIGlmICh1bml0LnR5cGUgPT09ICdjbG96ZScgJiYgdW5pdC5mdWxsQ29udGV4dCkge1xuICBsZXQgY29udGV4dCA9IHVuaXQuZnVsbENvbnRleHQucmVwbGFjZSgvPT0vZywgJycpO1xuICBjb25zdCBhbnN3ZXIgPSB1bml0LmNvbnRlbnQ7XG4gIGRpc3BsYXlIVE1MID0gY29udGV4dC5yZXBsYWNlKFxuICAgIGFuc3dlciwgXG4gICAgYDxzcGFuIGNsYXNzPVwiY2xvemUtaGlnaGxpZ2h0XCI+JHthbnN3ZXJ9PC9zcGFuPmBcbiAgKTtcbn1cbi8vIFx1N0VBRlx1NjU4N1x1NjcyQ1xuZWxzZSB7XG4gIGRpc3BsYXlIVE1MID0gdW5pdC5jb250ZW50O1xufVxuXG5ub3RlVGV4dC5pbm5lckhUTUwgPSBkaXNwbGF5SFRNTDtcblxubm90ZVRleHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHRoaXMuanVtcFRvU291cmNlKHVuaXQpO1xufSk7XG5cbiAgICAvLyBcdTY2M0VcdTc5M0FcdTYyNzlcdTZDRThcdUZGMDhcdTU5ODJcdTY3OUNcdTY3MDlcdUZGMDlcbiAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk7XG4gICAgaWYgKGFubm90YXRpb24pIHtcbiAgICAgIGNvbnN0IGFubkVsID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdhbm5vdGF0aW9uLXByZXZpZXcnIH0pO1xuICAgICAgY29uc3QgYW5uVGV4dCA9IGFubm90YXRpb24uY29udGVudC5sZW5ndGggPiA2MFxuICAgICAgICA/IGFubm90YXRpb24uY29udGVudC5zdWJzdHJpbmcoMCwgNjApICsgJy4uLidcbiAgICAgICAgOiBhbm5vdGF0aW9uLmNvbnRlbnQ7XG4gICAgICBhbm5FbC50ZXh0Q29udGVudCA9IGBcdUQ4M0RcdURDQUMgJHthbm5UZXh0fWA7XG4gICAgICBcbiAgICAgIC8vIFx1NzBCOVx1NTFGQlx1NjI3OVx1NkNFOFx1OTg4NFx1ODlDOFx1NEU1Rlx1NTNFRlx1NEVFNVx1NUM1NVx1NUYwMFx1N0YxNlx1OEY5MVxuICAgICAgYW5uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLnRvZ2dsZUlubGluZUFubm90YXRpb24oY2FyZCwgdW5pdCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTY4MDdcdTdCN0VcdTU0OENcdTUxNDNcdTRGRTFcdTYwNkZcbiAgICBjb25zdCBtZXRhID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLW1ldGEnIH0pO1xuICAgIFxuICAgIGlmICh1bml0Lm1ldGFkYXRhLnRhZ3MubGVuZ3RoID4gMCkge1xuICAgICAgdW5pdC5tZXRhZGF0YS50YWdzLnNsaWNlKDAsIDIpLmZvckVhY2godGFnID0+IHtcbiAgICAgICAgbWV0YS5jcmVhdGVTcGFuKHsgdGV4dDogYCMke3RhZ31gLCBjbHM6ICd0YWcnIH0pO1xuICAgICAgfSk7XG4gICAgICBpZiAodW5pdC5tZXRhZGF0YS50YWdzLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgbWV0YS5jcmVhdGVTcGFuKHsgdGV4dDogYCske3VuaXQubWV0YWRhdGEudGFncy5sZW5ndGggLSAyfWAsIGNsczogJ3RhZy1tb3JlJyB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodW5pdC5mbGFzaGNhcmRJZHMubGVuZ3RoID4gMCkge1xuICAgICAgbWV0YS5jcmVhdGVTcGFuKHsgdGV4dDogYFx1RDgzQ1x1RENDRiAke3VuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aH1gLCBjbHM6ICdiYWRnZScgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0gXHU0RTNCXHU3NTRDXHU5NzYyXHU2QTIxXHU1RjBGXHU2RTMyXHU2N0QzID09PT09PT09PT09PT09PT09PT09XG4gIFxuICBwcml2YXRlIHJlbmRlck1haW5Nb2RlKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBsYXlvdXQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbWFpbi1sYXlvdXQnIH0pO1xuXG4gICAgLy8gXHU1REU2XHU0RkE3XHU5NzYyXHU2NzdGXG4gICAgY29uc3QgbGVmdFBhbmVsID0gbGF5b3V0LmNyZWF0ZURpdih7IGNsczogJ2xlZnQtcGFuZWwnIH0pO1xuICAgIGlmICghdGhpcy5zZWxlY3RlZEZpbGUgJiYgdGhpcy52aWV3VHlwZSA9PT0gJ25vdGVzJykge1xuICAgICAgY29uc3QgdW5pdHMgPSB0aGlzLmdldEZpbHRlcmVkVW5pdHMoKTtcbiAgICAgIGNvbnN0IGdyb3VwZWQgPSB0aGlzLmdyb3VwVW5pdHModW5pdHMpO1xuICAgICAgaWYgKGdyb3VwZWQubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IGdyb3VwZWRbMF0uZ3JvdXBLZXk7IC8vIFx1ODFFQVx1NTJBOFx1OTAwOVx1NEUyRFx1N0IyQ1x1NEUwMFx1NEUyQVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbmRlckxlZnRQYW5lbChsZWZ0UGFuZWwpO1xuXG4gICAgLy8gXHU1M0YzXHU0RkE3XHU5NzYyXHU2NzdGXG4gICAgY29uc3QgcmlnaHRQYW5lbCA9IGxheW91dC5jcmVhdGVEaXYoeyBjbHM6ICdyaWdodC1wYW5lbCcgfSk7XG4gICAgdGhpcy5yZW5kZXJSaWdodFBhbmVsKHJpZ2h0UGFuZWwpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJMZWZ0UGFuZWwoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICAvLyBcdTY0MUNcdTdEMjJcdTU0OENcdThGQzdcdTZFRTRcbiAgICB0aGlzLnJlbmRlck1haW5Ub29sYmFyKGNvbnRhaW5lcik7XG4gICAgLy8gXHU5ODc2XHU5MEU4XHU1NkZBXHU1QjlBXHU1MTY1XHU1M0UzXG4gICAgdGhpcy5yZW5kZXJGaXhlZEVudHJpZXMoY29udGFpbmVyKTtcblxuXG5cbiAgICAvLyBcdTY1ODdcdTRFRjZcdTUyMTdcdTg4NjhcbiAgICB0aGlzLnJlbmRlckZpbGVMaXN0KGNvbnRhaW5lcik7XG4gIH1cblxuXG5cbiAgcHJpdmF0ZSByZW5kZXJNYWluVG9vbGJhcihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgdG9vbGJhciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdtYWluLXRvb2xiYXInIH0pO1xuICBcbiAgICAvLyBcdTY0MUNcdTdEMjJcdTY4NDZcbiAgICBjb25zdCBzZWFyY2hJbnB1dCA9IHRvb2xiYXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgcGxhY2Vob2xkZXI6ICdcdUQ4M0RcdUREMEQgXHU2NDFDXHU3RDIyLi4uJyxcbiAgICAgIGNsczogJ3NlYXJjaC1pbnB1dC1tYWluJ1xuICAgIH0pO1xuICAgIHNlYXJjaElucHV0LnZhbHVlID0gdGhpcy5zZWFyY2hRdWVyeTtcbiAgICBcbiAgICAvLyBcdTRGN0ZcdTc1MjhcdTk2MzJcdTYyOTZcdTRGMThcdTUzMTZcdTY0MUNcdTdEMjJcbiAgICBzZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgIHRoaXMuc2VhcmNoUXVlcnkgPSB2YWx1ZTtcbiAgICAgIFxuICAgICAgLy8gXHU2RTA1XHU5NjY0XHU0RTRCXHU1MjREXHU3Njg0XHU1QjlBXHU2NUY2XHU1NjY4XG4gICAgICBpZiAodGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyICE9PSBudWxsKSB7XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHU4QkJFXHU3RjZFXHU2NUIwXHU3Njg0XHU1QjlBXHU2NUY2XHU1NjY4XG4gICAgICB0aGlzLnNlYXJjaERlYm91bmNlVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gbnVsbDtcbiAgICAgICAgLy8gXHU1M0VBXHU1MjM3XHU2NUIwXHU1M0YzXHU0RkE3XHU5NzYyXHU2NzdGXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHJpZ2h0UGFuZWwgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnJpZ2h0LXBhbmVsJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGlmIChyaWdodFBhbmVsKSB7XG4gICAgICAgICAgcmlnaHRQYW5lbC5lbXB0eSgpO1xuICAgICAgICAgIHRoaXMucmVuZGVyUmlnaHRQYW5lbChyaWdodFBhbmVsKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU2NTg3XHU0RUY2XHU1MjE3XHU4ODY4XG4gICAgICAgIGNvbnN0IGZpbGVMaXN0Q29udGFpbmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5maWxlLWxpc3QnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgaWYgKGZpbGVMaXN0Q29udGFpbmVyKSB7XG4gICAgICAgICAgZmlsZUxpc3RDb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgICB0aGlzLnJlbmRlckZpbGVMaXN0Q29udGVudChmaWxlTGlzdENvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICAgICAgLy8gdGhpcy5zZWxlY3RlZENhcmRJZHMuY2xlYXIoKTtcbiAgICAgIH0sIDMwMCk7IC8vIDMwMG1zIFx1OTYzMlx1NjI5NlxuICAgIH0pO1xuICBcbiAgICAvLyBcdTUyMDZcdTdFQzRcdTZBMjFcdTVGMEZcdTUyMDdcdTYzNjJcdUZGMDhcdTdCMTRcdThCQjBcdTU0OENcdTUzNjFcdTcyNDdcdTg5QzZcdTU2RkVcdTkwRkRcdTY2M0VcdTc5M0FcdUZGMDktIFx1NzlGQlx1OTY2NFx1Njc2MVx1NEVGNlx1NTIyNFx1NjVBRFxuICAgIGNvbnN0IGdyb3VwU3dpdGNoZXIgPSB0b29sYmFyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLXN3aXRjaGVyLW1haW4nIH0pO1xuICAgIFxuICAgIGNvbnN0IGdyb3VwT3B0aW9ucyA9IFtcbiAgICAgIHsgbW9kZTogJ2ZpbGUnIGFzIEdyb3VwTW9kZSwgaWNvbjogJ1x1RDgzRFx1RENDMScsIGxhYmVsOiAnXHU2NTg3XHU0RUY2JyB9LFxuICAgICAgeyBtb2RlOiAnYW5ub3RhdGlvbicgYXMgR3JvdXBNb2RlLCBpY29uOiAnXHVEODNEXHVEQ0FDJywgbGFiZWw6ICdcdTYyNzlcdTZDRTgnIH0sXG4gICAgICB7IG1vZGU6ICd0YWcnIGFzIEdyb3VwTW9kZSwgaWNvbjogJ1x1RDgzQ1x1REZGN1x1RkUwRicsIGxhYmVsOiAnXHU2ODA3XHU3QjdFJyB9LFxuICAgICAgeyBtb2RlOiAnZGF0ZScgYXMgR3JvdXBNb2RlLCBpY29uOiAnXHVEODNEXHVEQ0M1JywgbGFiZWw6ICdcdTY1RTVcdTY3MUYnIH1cbiAgICBdO1xuICBcbiAgICBncm91cE9wdGlvbnMuZm9yRWFjaCgoeyBtb2RlLCBpY29uLCBsYWJlbCB9KSA9PiB7XG4gICAgICBjb25zdCBidG4gPSBncm91cFN3aXRjaGVyLmNyZWF0ZURpdih7XG4gICAgICAgIGNsczogYGdyb3VwLWJ0bi1tYWluICR7dGhpcy5ncm91cE1vZGUgPT09IG1vZGUgPyAnYWN0aXZlJyA6ICcnfWAsXG4gICAgICB9KTtcbiAgICAgIGJ0bi5pbm5lckhUTUwgPSBgJHtpY29ufSBgO1xuICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5ncm91cE1vZGUgIT09IG1vZGUpIHtcbiAgICAgICAgICB0aGlzLmdyb3VwTW9kZSA9IG1vZGU7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZEZpbGUgPSBudWxsOyAvLyBcdUQ4M0RcdUREMjcgXHU2RTA1XHU3QTdBXHU5MDA5XHU2MkU5XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5jbGVhcigpO1xuICAgICAgICAgIHRoaXMuYmF0Y2hNb2RlID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBcdTUyMzdcdTY1QjBcdTY1ODdcdTRFRjZcdTUyMTdcdTg4NjhcdTU0OENcdTUzRjNcdTRGQTdcdTk3NjJcdTY3N0ZcbiAgICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgIGNvbnN0IGZpbGVMaXN0Q29udGFpbmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5maWxlLWxpc3QnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICBpZiAoZmlsZUxpc3RDb250YWluZXIpIHtcbiAgICAgICAgICAgIGZpbGVMaXN0Q29udGFpbmVyLmVtcHR5KCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckZpbGVMaXN0Q29udGVudChmaWxlTGlzdENvbnRhaW5lcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHJpZ2h0UGFuZWwgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnJpZ2h0LXBhbmVsJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgaWYgKHJpZ2h0UGFuZWwpIHtcbiAgICAgICAgICAgIHJpZ2h0UGFuZWwuZW1wdHkoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUmlnaHRQYW5lbChyaWdodFBhbmVsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gIH1cbiAgcHJpdmF0ZSByZW5kZXJGaXhlZEVudHJpZXMoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IGVudHJpZXMgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZml4ZWQtZW50cmllcycgfSk7XG5cbiAgICAvLyBcdTUxNjhcdTkwRThcdTdCMTRcdThCQjBcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBhbGxOb3Rlc0J0biA9IGVudHJpZXMuY3JlYXRlRGl2KHtcbiAgICAgIGNsczogYGVudHJ5LWJ0biAke3RoaXMudmlld1R5cGUgPT09ICdub3RlcycgPyAnYWN0aXZlJyA6ICcnfWAsXG4gICAgfSk7XG4gICAgYWxsTm90ZXNCdG4uaW5uZXJIVE1MID0gJ1x1RDgzRFx1RENERCA8c3Bhbj5BbGwgTm90ZXM8L3NwYW4+JztcbiAgICBhbGxOb3Rlc0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMudmlld1R5cGUgPSAnbm90ZXMnO1xuICAgICAgdGhpcy5zZWxlY3RlZEZpbGUgPSBudWxsO1xuICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICAgIHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmNsZWFyKCk7XG4gICAgICB0aGlzLmJhdGNoTW9kZSA9IGZhbHNlO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9KTtcblxuICAgIC8vIENhcmQgTGlzdCBcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBjYXJkTGlzdEJ0biA9IGVudHJpZXMuY3JlYXRlRGl2KHtcbiAgICAgIGNsczogYGVudHJ5LWJ0biAke3RoaXMudmlld1R5cGUgPT09ICdjYXJkcycgPyAnYWN0aXZlJyA6ICcnfWAsXG4gICAgfSk7XG4gICAgY2FyZExpc3RCdG4uaW5uZXJIVE1MID0gJ1x1RDgzQ1x1RENDRiA8c3Bhbj5DYXJkIExpc3Q8L3NwYW4+JztcbiAgICBjYXJkTGlzdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMudmlld1R5cGUgPSAnY2FyZHMnO1xuICAgICAgdGhpcy5zZWxlY3RlZEZpbGUgPSBudWxsO1xuICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICAgIHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmNsZWFyKCk7XG4gICAgICB0aGlzLmJhdGNoTW9kZSA9IGZhbHNlO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxuICBwcml2YXRlIHJlbmRlckZpbGVMaXN0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCB0aXRsZVRleHQgPSB0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnID8gJ1x1OTVFQVx1NTM2MVx1NTIwNlx1N0VDNCcgOiAnXHU2NTg3XHU2ODYzXHU1MjE3XHU4ODY4JztcbiAgICAvLyBjb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiB0aXRsZVRleHQsIGNsczogJ3BhbmVsLXRpdGxlJyB9KTtcblxuICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdUQ4M0RcdURDQzEgXHU2NTg3XHU2ODYzXHU1MjE3XHU4ODY4JywgY2xzOiAncGFuZWwtdGl0bGUnIH0pO1xuXG4gICAgY29uc3QgZmlsZUxpc3RDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZmlsZS1saXN0JyB9KTtcbiAgICB0aGlzLnJlbmRlckZpbGVMaXN0Q29udGVudChmaWxlTGlzdENvbnRhaW5lcik7XG4gIH1cbiAgXG4gIHByaXZhdGUgcmVuZGVyRmlsZUxpc3RDb250ZW50KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBcbiAgICAvLyBcdTY1MkZcdTYzMDFcdTk1RUFcdTUzNjFcdTU0OENcdTdCMTRcdThCQjBcdTc2ODRcdTdFREZcdTRFMDBcdTUyMDZcdTdFQzRcdTU5MDRcdTc0MDZcbiAgICBsZXQgZ3JvdXBlZDogQXJyYXk8eyBncm91cEtleTogc3RyaW5nOyB1bml0cz86IENvbnRlbnRVbml0W107IGNhcmRzPzogRmxhc2hjYXJkW107IGNvdW50OiBudW1iZXIgfT47XG4gICAgXG4gICAgaWYgKHRoaXMudmlld1R5cGUgPT09ICdjYXJkcycpIHtcbiAgICAgIGNvbnN0IGZsYXNoY2FyZHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldEFsbEZsYXNoY2FyZHMoKTtcbiAgICAgIGNvbnN0IGNhcmRHcm91cHMgPSB0aGlzLmdyb3VwRmxhc2hjYXJkcyhmbGFzaGNhcmRzKTtcbiAgICAgIGdyb3VwZWQgPSBjYXJkR3JvdXBzLm1hcChnID0+ICh7IGdyb3VwS2V5OiBnLmdyb3VwS2V5LCBjYXJkczogZy5jYXJkcywgY291bnQ6IGcuY2FyZHMubGVuZ3RoIH0pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdW5pdHMgPSB0aGlzLmdldEZpbHRlcmVkVW5pdHMoKTtcbiAgICAgIGNvbnN0IHVuaXRHcm91cHMgPSB0aGlzLmdyb3VwVW5pdHModW5pdHMpO1xuICAgICAgZ3JvdXBlZCA9IHVuaXRHcm91cHMubWFwKGcgPT4gKHsgZ3JvdXBLZXk6IGcuZ3JvdXBLZXksIHVuaXRzOiBnLnVuaXRzLCBjb3VudDogZy51bml0cy5sZW5ndGggfSkpO1xuICAgIH1cbiAgXG4gICAgaWYgKGdyb3VwZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb250YWluZXIuY3JlYXRlRGl2KHtcbiAgICAgICAgdGV4dDogJ1x1NjY4Mlx1NjVFMFx1NjU4N1x1Njg2MycsXG4gICAgICAgIGNsczogJ2VtcHR5LWhpbnQnXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgaWYgKCF0aGlzLnNlbGVjdGVkRmlsZSAmJiBncm91cGVkLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gZ3JvdXBlZFswXS5ncm91cEtleTtcbiAgICB9XG4gIFxuICAgIGdyb3VwZWQuZm9yRWFjaCgoeyBncm91cEtleSwgY291bnQgfSkgPT4ge1xuICAgICAgY29uc3QgZmlsZUl0ZW0gPSBjb250YWluZXIuY3JlYXRlRGl2KHtcbiAgICAgICAgY2xzOiBgZmlsZS1pdGVtICR7dGhpcy5zZWxlY3RlZEZpbGUgPT09IGdyb3VwS2V5ID8gJ3NlbGVjdGVkJyA6ICcnfWBcbiAgICAgIH0pO1xuICBcbiAgICAgIGZpbGVJdGVtLmlubmVySFRNTCA9IGBcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLWljb25cIj4ke3RoaXMuZ2V0R3JvdXBJY29uKHRoaXMuZ3JvdXBNb2RlKX08L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1uYW1lXCI+JHtncm91cEtleX08L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1jb3VudFwiPiR7Y291bnR9PC9zcGFuPlxuICAgICAgYDtcbiAgXG4gICAgICBmaWxlSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkRmlsZSAhPT0gZ3JvdXBLZXkpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gZ3JvdXBLZXk7XG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTkwMDlcdTRFMkRcdTcyQjZcdTYwMDFcbiAgICAgICAgICAgIGNvbnN0IGFsbEl0ZW1zID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWxlLWl0ZW0nKTtcbiAgICAgICAgICAgIGFsbEl0ZW1zLmZvckVhY2goaXRlbSA9PiBpdGVtLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpKTtcbiAgICAgICAgICAgIGZpbGVJdGVtLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTUyMzdcdTY1QjBcdTUzRjNcdTRGQTdcdTk3NjJcdTY3N0ZcbiAgICAgICAgICAgIGNvbnN0IG1haW5Db250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgY29uc3QgcmlnaHRQYW5lbCA9IG1haW5Db250YWluZXIucXVlcnlTZWxlY3RvcignLnJpZ2h0LXBhbmVsJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAocmlnaHRQYW5lbCkge1xuXG4gICAgICAgICAgICAgIHJpZ2h0UGFuZWwuZW1wdHkoKTtcbiAgICAgICAgICAgICAgdGhpcy5yZW5kZXJSaWdodFBhbmVsKHJpZ2h0UGFuZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdbZmlsZUl0ZW0gY2xpY2tdIEVycm9yOicsIGVycm9yKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU1MjA3XHU2MzYyXHU1MjA2XHU3RUM0XHU2NUY2XHU1MUZBXHU5NTE5XHVGRjBDXHU4QkY3XHU5MUNEXHU4QkQ1Jyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJSaWdodFBhbmVsKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcblxuICAgIGlmICh0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnKSB7XG4gICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRGaWxlKSB7XG4gICAgICAgIGNvbnN0IGZsYXNoY2FyZHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldEFsbEZsYXNoY2FyZHMoKTtcbiAgICAgICAgY29uc3QgZ3JvdXBlZCA9IHRoaXMuZ3JvdXBGbGFzaGNhcmRzKGZsYXNoY2FyZHMpO1xuICAgICAgICBpZiAoZ3JvdXBlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZEZpbGUgPSBncm91cGVkWzBdLmdyb3VwS2V5O1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgZW1wdHkgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZW1wdHktcmlnaHQtcGFuZWwnIH0pO1xuICAgICAgICAgIGVtcHR5LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJlbXB0eS1pY29uXCI+XHVEODNEXHVEQ0VEPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW1wdHktdGV4dFwiPlx1NjY4Mlx1NjVFMFx1OTVFQVx1NTM2MTwvZGl2PlxuICAgICAgICAgIGA7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1NkUzMlx1NjdEM1x1OTVFQVx1NTM2MVx1N0Y1MVx1NjgzQ1x1RkYwOFx1NEYxQVx1NjgzOVx1NjM2RSBzZWxlY3RlZEZpbGUgXHU4RkM3XHU2RUU0XHVGRjA5XG4gICAgICB0aGlzLnJlbmRlckZsYXNoY2FyZHNHcmlkKGNvbnRhaW5lcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuLy8gXHU4MUVBXHU1MkE4XHU5MDA5XHU0RTJEXHU3QjJDXHU0RTAwXHU0RTJBXG4gICAgaWYgKCF0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgY29uc3QgdW5pdHMgPSB0aGlzLmdldEZpbHRlcmVkVW5pdHMoKTtcbiAgICAgIGNvbnN0IGdyb3VwZWQgPSB0aGlzLmdyb3VwVW5pdHModW5pdHMpO1xuICAgICAgXG4gICAgICBpZiAoZ3JvdXBlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gZ3JvdXBlZFswXS5ncm91cEtleTtcbiAgICAgICAgLy8gXHU4OUU2XHU1M0QxXHU1REU2XHU0RkE3XHU2NTg3XHU0RUY2XHU1MjE3XHU4ODY4XHU2NkY0XHU2NUIwXHU5MDA5XHU0RTJEXHU3MkI2XHU2MDAxXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGZpbGVMaXN0Q29udGFpbmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5maWxlLWxpc3QnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgaWYgKGZpbGVMaXN0Q29udGFpbmVyKSB7XG4gICAgICAgICAgY29uc3QgZmlyc3RJdGVtID0gZmlsZUxpc3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLmZpbGUtaXRlbScpO1xuICAgICAgICAgIGZpcnN0SXRlbT8uYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1NzcxRlx1NzY4NFx1NkNBMVx1NjcwOVx1NjU3MFx1NjM2RVxuICAgICAgICBjb25zdCBlbXB0eSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdlbXB0eS1yaWdodC1wYW5lbCcgfSk7XG4gICAgICAgIGVtcHR5LmlubmVySFRNTCA9IGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZW1wdHktaWNvblwiPlx1RDgzRFx1RENFRDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJlbXB0eS10ZXh0XCI+XHU2NjgyXHU2NUUwXHU1MTg1XHU1QkI5PC9kaXY+XG4gICAgICAgIGA7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTZFMzJcdTY3RDNcdTUxODVcdTVCQjlcdTdGNTFcdTY4M0NcbiAgICB0aGlzLnJlbmRlckNvbnRlbnRHcmlkKGNvbnRhaW5lcik7XG4gIH1cblxuICAvKipcbiAgICogXHU2RTMyXHU2N0QzXHU1MTg1XHU1QkI5XHU3RjUxXHU2ODNDXHVGRjA4XHU0RTNCXHU3NTRDXHU5NzYyXHU2QTIxXHU1RjBGXHVGRjA5XG4gICAqL1xuICBwcml2YXRlIHJlbmRlckNvbnRlbnRHcmlkKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBoZWFkZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1oZWFkZXInIH0pO1xuICAgIFxuICAgIGNvbnN0IHRpdGxlID0gaGVhZGVyLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdGhpcy5zZWxlY3RlZEZpbGUgfHwgJ1x1NTE4NVx1NUJCOScgfSk7XG4gICAgXG4vLyBcdTYzMDlcdTk0QUVcdTVCQjlcdTU2NjhcbmNvbnN0IGhlYWRlckFjdGlvbnMgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnaGVhZGVyLWFjdGlvbnMnIH0pO1xuLy8gXHU2Mjc5XHU5MUNGXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFXG50aGlzLmNyZWF0ZUJhdGNoQWN0aW9uQnV0dG9ucyhoZWFkZXJBY3Rpb25zLCAnaGVhZGVyJyk7XG4vLyBcdTUxNjhcdTkwMDlcdTYzMDlcdTk0QUVcbnRoaXMuY3JlYXRlU2VsZWN0QWxsQnV0dG9uKGhlYWRlckFjdGlvbnMsICdoZWFkZXInKTtcblxuXG5cbiAgICBjb25zdCBncmlkQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NvbnRlbnQtZ3JpZCcgfSk7XG4gICAgXG4gICAgY29uc3QgdW5pdHMgPSB0aGlzLmdldEZpbHRlcmVkVW5pdHMoKS5maWx0ZXIodW5pdCA9PiB7XG4gICAgICBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdmaWxlJykge1xuICAgICAgICByZXR1cm4gdW5pdC5zb3VyY2UuZmlsZSA9PT0gdGhpcy5zZWxlY3RlZEZpbGU7XG4gICAgICB9ZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdhbm5vdGF0aW9uJyl7XG4gICAgICAgIGNvbnN0IGhhc0Fubm90YXRpb24gPSB0aGlzLnNlbGVjdGVkRmlsZSA9PT0gJ1x1NjcwOVx1NjI3OVx1NkNFOCc7XG4gICAgICAgIHJldHVybiBoYXNBbm5vdGF0aW9uID8gISF1bml0LmFubm90YXRpb25JZCA6ICF1bml0LmFubm90YXRpb25JZDtcbiAgICAgIH1cbiAgICAgICBlbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ3RhZycpIHtcbiAgICAgICAgcmV0dXJuIHVuaXQubWV0YWRhdGEudGFncy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSEpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUodW5pdC5tZXRhZGF0YS5jcmVhdGVkQXQpKSA9PT0gdGhpcy5zZWxlY3RlZEZpbGU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICBpZiAodW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBncmlkQ29udGFpbmVyLmNyZWF0ZURpdih7XG4gICAgICAgIHRleHQ6ICdcdUQ4M0RcdURDRUQgXHU2NjgyXHU2NUUwXHU1MTg1XHU1QkI5JyxcbiAgICAgICAgY2xzOiAnZW1wdHktc3RhdGUnXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB1bml0cy5mb3JFYWNoKHVuaXQgPT4ge1xuICAgICAgdGhpcy5yZW5kZXJHcmlkQ2FyZChncmlkQ29udGFpbmVyLCB1bml0KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAqIFx1NkUzMlx1NjdEM1x1OTVFQVx1NTM2MVx1N0Y1MVx1NjgzQ1x1RkYwOFx1N0M3Qlx1NEYzQyByZW5kZXJDb250ZW50R3JpZFx1RkYwOVxuICovXG4gIHByaXZhdGUgcmVuZGVyRmxhc2hjYXJkc0dyaWQoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IGhlYWRlciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLWhlYWRlcicgfSk7XG4gICAgXG4gICAgaGVhZGVyLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdGhpcy5zZWxlY3RlZEZpbGUgfHwgJ1x1OTVFQVx1NTM2MScgfSk7XG5cbi8vIFx1NjMwOVx1OTRBRVx1NUJCOVx1NTY2OFxuY29uc3QgaGVhZGVyQWN0aW9ucyA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdoZWFkZXItYWN0aW9ucycgfSk7XG5cbi8vIFx1NjI3OVx1OTFDRlx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVxudGhpcy5jcmVhdGVCYXRjaEFjdGlvbkJ1dHRvbnMoaGVhZGVyQWN0aW9ucywgJ2hlYWRlcicpO1xuXG4vLyBcdTUxNjhcdTkwMDlcdTYzMDlcdTk0QUVcbnRoaXMuY3JlYXRlU2VsZWN0QWxsQnV0dG9uKGhlYWRlckFjdGlvbnMsICdoZWFkZXInKTtcblxuXG5cblxuICAgIGNvbnN0IGdyaWRDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY29udGVudC1ncmlkJyB9KTtcbiAgICBcbiAgICBjb25zdCBmbGFzaGNhcmRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRBbGxGbGFzaGNhcmRzKCk7XG4gICAgXG4gICAgLy8gXHU2NTM5XHU4RkRCXHU4RkM3XHU2RUU0XHU5MDNCXHU4RjkxXG4gICAgY29uc3QgZmlsdGVyZWRDYXJkcyA9IGZsYXNoY2FyZHMuZmlsdGVyKGNhcmQgPT4ge1xuICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkRmlsZSkgcmV0dXJuIGZhbHNlO1xuICAgICAgXG4gICAgICBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdmaWxlJykge1xuICAgICAgICAvLyBcdTYzMDlcdTY1ODdcdTRFRjZcdThGQzdcdTZFRTRcbiAgICAgICAgcmV0dXJuIGNhcmQuc291cmNlRmlsZSA9PT0gdGhpcy5zZWxlY3RlZEZpbGU7XG4gICAgICB9IFxuXG4gICAgICBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdhbm5vdGF0aW9uJykge1xuICAgICAgICAvLyBcdUQ4M0RcdUREMjcgXHU2MzA5XHU2Mjc5XHU2Q0U4XHU4RkM3XHU2RUU0XG4gICAgICAgIGNvbnN0IHVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjYXJkLnNvdXJjZUNvbnRlbnRJZCk7XG4gICAgICAgIGNvbnN0IGhhc0Fubm90YXRpb24gPSB0aGlzLnNlbGVjdGVkRmlsZSA9PT0gJ1x1NjcwOVx1NjI3OVx1NkNFOCc7XG4gICAgICAgIGlmIChoYXNBbm5vdGF0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIHVuaXQgJiYgISF1bml0LmFubm90YXRpb25JZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gIXVuaXQgfHwgIXVuaXQuYW5ub3RhdGlvbklkO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ3RhZycpIHtcbiAgICAgICAgLy8gXHU2MzA5XHU2ODA3XHU3QjdFXHU4RkM3XHU2RUU0XG4gICAgICAgIGNvbnN0IHVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjYXJkLnNvdXJjZUNvbnRlbnRJZCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTdCMTRcdThCQjBcdTUzNTVcdTUxNDNcdTc2ODRcdTY4MDdcdTdCN0VcbiAgICAgICAgaWYgKHVuaXQgJiYgdW5pdC5tZXRhZGF0YS50YWdzICYmIHVuaXQubWV0YWRhdGEudGFncy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1MzYxXHU3MjQ3XHU4MUVBXHU1REYxXHU3Njg0XHU2ODA3XHU3QjdFXG4gICAgICAgIGlmIChjYXJkLnRhZ3MgJiYgY2FyZC50YWdzLmluY2x1ZGVzKHRoaXMuc2VsZWN0ZWRGaWxlKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBcdTY4QzBcdTY3RTUgZGVja1xuICAgICAgICBpZiAoY2FyZC5kZWNrID09PSB0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcIlx1NjcyQVx1NTIwNlx1N0M3QlwiXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkRmlsZSA9PT0gJ1x1NjcyQVx1NTIwNlx1N0M3QicgJiYgXG4gICAgICAgICAgICAoIWNhcmQudGFncyB8fCBjYXJkLnRhZ3MubGVuZ3RoID09PSAwKSAmJiBcbiAgICAgICAgICAgICFjYXJkLmRlY2sgJiZcbiAgICAgICAgICAgICghdW5pdCB8fCAhdW5pdC5tZXRhZGF0YS50YWdzIHx8IHVuaXQubWV0YWRhdGEudGFncy5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZGF0ZScpIHtcbiAgICAgICAgLy8gXHU2MzA5XHU2NUU1XHU2NzFGXHU4RkM3XHU2RUU0XG4gICAgICAgIGNvbnN0IGNhcmREYXRlID0gdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKGNhcmQubWV0YWRhdGEuY3JlYXRlZEF0KSk7XG4gICAgICAgIHJldHVybiBjYXJkRGF0ZSA9PT0gdGhpcy5zZWxlY3RlZEZpbGU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgXG5cbiAgXG4gICAgaWYgKGZpbHRlcmVkQ2FyZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBncmlkQ29udGFpbmVyLmNyZWF0ZURpdih7IHRleHQ6ICdcdUQ4M0RcdURDRUQgXHU4QkU1XHU1MjA2XHU3RUM0XHU0RTBCXHU2NjgyXHU2NUUwXHU5NUVBXHU1MzYxJywgY2xzOiAnZW1wdHktc3RhdGUnIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgXG4gICAgZmlsdGVyZWRDYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xuICAgICAgdGhpcy5yZW5kZXJGbGFzaGNhcmRHcmlkQ2FyZChncmlkQ29udGFpbmVyLCBjYXJkKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTZFMzJcdTY3RDNcdTdGNTFcdTY4M0NcdTUzNjFcdTcyNDdcdUZGMDhcdTRFM0JcdTc1NENcdTk3NjJcdTZBMjFcdTVGMEZcdUZGMDlcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyR3JpZENhcmQoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgdW5pdDogQ29udGVudFVuaXQpIHtcbiAgICBjb25zdCBjYXJkID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyaWQtY2FyZCcgfSk7XG5cbiAgICAvLyBcdTYyNzlcdTkxQ0ZcdTkwMDlcdTYyRTlcdTZBMjFcdTVGMEZcdUZGMUFcdTZERkJcdTUyQTBjaGVja2JveFxuICAgIGlmICh0aGlzLmJhdGNoTW9kZSkge1xuICAgICAgY29uc3QgY2hlY2tib3ggPSBjYXJkLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgdHlwZTogJ2NoZWNrYm94JyxcbiAgICAgICAgY2xzOiAnYmF0Y2gtY2hlY2tib3gnXG4gICAgICB9KTtcbiAgICAgIGNoZWNrYm94LnNldEF0dHJpYnV0ZSgnZGF0YS11bml0LWlkJywgdW5pdC5pZCk7XG4gICAgICBjaGVja2JveC5jaGVja2VkID0gdGhpcy5zZWxlY3RlZFVuaXRJZHMuaGFzKHVuaXQuaWQpO1xuICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgICAgaWYgKChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkKSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuYWRkKHVuaXQuaWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmRlbGV0ZSh1bml0LmlkKTtcbiAgICAgICAgfVxuICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1OTg3Nlx1OTBFOFx1RkYxQVx1NjU4N1x1Njg2M1x1NTQwRFx1NzlGMFxuICAgIGNvbnN0IGhlYWRlciA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkLWhlYWRlcicgfSk7XG5cbmhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgdGhpcy5qdW1wVG9Tb3VyY2UodW5pdCk7XG59KTtcblxuXG4gICAgLy8gXHVEODNEXHVERDI3IFx1NkRGQlx1NTJBMFx1N0M3Qlx1NTc4Qlx1NjMwN1x1NzkzQVx1NTY2OFxuY29uc3QgdHlwZUluZGljYXRvciA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICd0eXBlLWluZGljYXRvcicgfSk7XG5pZiAodW5pdC50eXBlID09PSAnUUEnKSB7XG4gIHR5cGVJbmRpY2F0b3IuYWRkQ2xhc3MoJ3R5cGUtcWEnKTtcbiAgdHlwZUluZGljYXRvci50ZXh0Q29udGVudCA9ICdRJkEnO1xufSBlbHNlIGlmICh1bml0LnR5cGUgPT09ICdjbG96ZScpIHtcbiAgdHlwZUluZGljYXRvci5hZGRDbGFzcygndHlwZS1jbG96ZScpO1xuICB0eXBlSW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ0Nsb3plJztcbn0gZWxzZSB7XG4gIHR5cGVJbmRpY2F0b3IuYWRkQ2xhc3MoJ3R5cGUtdGV4dCcpO1xuICB0eXBlSW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ1RleHQnO1xufVxuXG4gICAgY29uc3QgZmlsZU5hbWUgPSB1bml0LnNvdXJjZS5maWxlLnNwbGl0KCcvJykucG9wKCk/LnJlcGxhY2UoJy5tZCcsICcnKSB8fCAnJztcbiAgICBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6IGZpbGVOYW1lLCBjbHM6ICdkb2MtbmFtZScgfSk7XG5cbiAgICAvLyBcdTUzRjNcdTRFMEFcdTg5RDJcdTVERTVcdTUxNzdcdTYzMDlcdTk0QUVcbiAgICBjb25zdCB0b29scyA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLWNhcmQtdG9vbHMnIH0pO1xuICAgIFxuXG5cbi8vIFx1OTc1RVx1NjI3OVx1OTFDRlx1NkEyMVx1NUYwRlx1NEUwQlx1NzY4NFx1OTVFQVx1NTM2MVx1NjMwOVx1OTRBRVxuaWYgKCF0aGlzLmJhdGNoTW9kZSkge1xuICBjb25zdCBmbGFzaGNhcmRCdG4gPSB0b29scy5jcmVhdGVEaXYoeyBjbHM6ICd0b29sLWJ0bi1ncmlkJyB9KTtcbiAgZmxhc2hjYXJkQnRuLmlubmVySFRNTCA9ICdcdTI2QTEnO1xuICBmbGFzaGNhcmRCdG4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ1x1NzUxRlx1NjIxMFx1OTVFQVx1NTM2MScpO1xuICBmbGFzaGNhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy5xdWlja0dlbmVyYXRlRmxhc2hjYXJkKHVuaXQpO1xuICB9KTtcbn1cblxuICAgIGNvbnN0IG1vcmVCdG4gPSB0b29scy5jcmVhdGVEaXYoeyBjbHM6ICd0b29sLWJ0bi1ncmlkJyB9KTtcbiAgICBtb3JlQnRuLmlubmVySFRNTCA9ICdcdTIyRUUnO1xuICAgIG1vcmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMuc2hvd0NvbnRleHRNZW51KGUsIHVuaXQpO1xuICAgIH0pO1xuXG4gICAgLy8gXHU3QjE0XHU4QkIwXHU1MTg1XHU1QkI5XHVGRjA4XHU3MEI5XHU1MUZCXHU1QzU1XHU1RjAwXHU2Mjc5XHU2Q0U4XHU3RjE2XHU4RjkxXHVGRjA5XG4gICAgY29uc3QgY29udGVudCA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkLWNvbnRlbnQnIH0pO1xuICAgIGNvbnN0IG5vdGVUZXh0ID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLW5vdGUtdGV4dCcgfSk7XG5cbi8vIFx1RDgzRFx1REQyNyBcdTY2M0VcdTc5M0FcdTVCOENcdTY1NzRcdTUxODVcdTVCQjlcdUZGMENcdTRFMERcdTYyMkFcdTY1QURcbmxldCBkaXNwbGF5SFRNTCA9ICcnO1xuXG4vLyBcdTU5ODJcdTY3OUNcdTY2MkYgUUEgXHU3QzdCXHU1NzhCXHVGRjBDXHU3NTI4XHU0RTBEXHU1NDBDXHU2ODM3XHU1RjBGXHU2NjNFXHU3OTNBXHU5NUVFXHU5ODk4XHU1NDhDXHU3QjU0XHU2ODQ4XG5pZiAodW5pdC50eXBlID09PSAnUUEnICYmIHVuaXQuYW5zd2VyKSB7XG4gIGRpc3BsYXlIVE1MID0gYDxzcGFuPiR7dW5pdC5jb250ZW50fTwvc3Bhbj4gPHNwYW4gPjo6PC9zcGFuPiA8c3BhbiA+JHt1bml0LmFuc3dlcn08L3NwYW4+YDtcbn1cbi8vIFx1NTk4Mlx1Njc5Q1x1NjYyRiBjbG96ZSBcdTdDN0JcdTU3OEJcdUZGMENcdTlBRDhcdTRFQUVcdTY2M0VcdTc5M0FcdTdCNTRcdTY4NDhcbmVsc2UgaWYgKHVuaXQudHlwZSA9PT0gJ2Nsb3plJyAmJiB1bml0LmZ1bGxDb250ZXh0KSB7XG4gIC8vIFx1RDgzRFx1REQyNyBcdTUxNDhcdTUzQkJcdTk2NjQgZnVsbENvbnRleHQgXHU0RTJEXHU3Njg0ID09IFx1NjgwN1x1OEJCMFxuICBjb25zdCBjb250ZXh0ID0gdW5pdC5mdWxsQ29udGV4dDtcbiAgY29uc3QgYW5zd2VyID0gdW5pdC5jb250ZW50O1xuICBcbiAgLy8gXHU3MTM2XHU1NDBFXHU3NTI4IHNwYW4gXHU5QUQ4XHU0RUFFXHU3QjU0XHU2ODQ4XG4gIGRpc3BsYXlIVE1MID0gY29udGV4dC5yZXBsYWNlKFxuICAgIGFuc3dlciwgXG4gICAgYDxzcGFuID4ke2Fuc3dlcn08L3NwYW4+YFxuICApO1xufVxuLy8gXHU3RUFGXHU2NTg3XHU2NzJDXG5lbHNlIHtcbiAgZGlzcGxheUhUTUwgPSB1bml0LmNvbnRlbnQ7XG59XG5cbm5vdGVUZXh0LmlubmVySFRNTCA9IGRpc3BsYXlIVE1MO1xuXG5cbm5vdGVUZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICB0aGlzLnRvZ2dsZUlubGluZUFubm90YXRpb24oY2FyZCwgdW5pdCk7XG59KTtcblxuICAgIC8vIFx1NjYzRVx1NzkzQVx1NjI3OVx1NkNFOFxuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKTtcbiAgICBpZiAoYW5ub3RhdGlvbikge1xuICAgICAgY29uc3QgYW5uRWwgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ2dyaWQtYW5ub3RhdGlvbicgfSk7XG4gICAgICBhbm5FbC5pbm5lckhUTUwgPSBgPHN0cm9uZz5cdTYyNzlcdTZDRThcdUZGMUE8L3N0cm9uZz4ke2Fubm90YXRpb24uY29udGVudH1gO1xuICAgICAgXG4gICAgICAvLyBcdTcwQjlcdTUxRkJcdTYyNzlcdTZDRThcdTRFNUZcdTUzRUZcdTRFRTVcdTVDNTVcdTVGMDBcdTdGMTZcdThGOTFcbiAgICAgIGFubkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdGhpcy50b2dnbGVJbmxpbmVBbm5vdGF0aW9uKGNhcmQsIHVuaXQpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU2ODA3XHU3QjdFXG4gICAgaWYgKHVuaXQubWV0YWRhdGEudGFncy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCB0YWdzID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLXRhZ3MnIH0pO1xuICAgICAgdW5pdC5tZXRhZGF0YS50YWdzLmZvckVhY2godGFnID0+IHtcbiAgICAgICAgdGFncy5jcmVhdGVTcGFuKHsgdGV4dDogYCMke3RhZ31gLCBjbHM6ICd0YWctZ3JpZCcgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTVFOTVcdTkwRThcdTUxNDNcdTRGRTFcdTYwNkZcbiAgICBjb25zdCBtZXRhID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLWNhcmQtbWV0YScgfSk7XG4gICAgbWV0YS5jcmVhdGVTcGFuKHsgdGV4dDogYEwke3VuaXQuc291cmNlLnBvc2l0aW9uLmxpbmV9YCwgY2xzOiAnbGluZS1pbmZvJyB9KTtcbiAgICBcbiAgICBpZiAodW5pdC5mbGFzaGNhcmRJZHMubGVuZ3RoID4gMCkge1xuICAgICAgbWV0YS5jcmVhdGVTcGFuKHsgdGV4dDogYFx1RDgzQ1x1RENDRiAke3VuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aH1gLCBjbHM6ICdiYWRnZS1ncmlkJyB9KTtcbiAgICB9XG4gIH1cbi8qKlxuICogXHU2RTMyXHU2N0QzXHU5NUVBXHU1MzYxXHU3RjUxXHU2ODNDXHU1MzYxXHU3MjQ3XHVGRjA4XHU1RTI2XHU0RTBCXHU2MkM5XHU4M0RDXHU1MzU1XHVGRjA5XG4gKi9cbnByaXZhdGUgcmVuZGVyRmxhc2hjYXJkR3JpZENhcmQoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgY2FyZDogRmxhc2hjYXJkKSB7XG4gIGNvbnN0IGNhcmRFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLWNhcmQgZmxhc2hjYXJkLWdyaWQtY2FyZCcgfSk7XG5cbiAgLy8gXHU2Mjc5XHU5MUNGXHU5MDA5XHU2MkU5XG4gIGlmICh0aGlzLmJhdGNoTW9kZSkge1xuICAgIGNvbnN0IGNoZWNrYm94ID0gY2FyZEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICBjbHM6ICdiYXRjaC1jaGVja2JveCdcbiAgICB9KTtcbiAgICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY2FyZC1pZCcsIGNhcmQuaWQpO1xuICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0aGlzLnNlbGVjdGVkQ2FyZElkcy5oYXMoY2FyZC5pZCk7XG4gICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgIGlmICgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5hZGQoY2FyZC5pZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5kZWxldGUoY2FyZC5pZCk7XG4gICAgICB9XG4gICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gXHU5ODc2XHU5MEU4XG4gIGNvbnN0IGhlYWRlciA9IGNhcmRFbC5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLWNhcmQtaGVhZGVyJyB9KTtcbiAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjYXJkLnNvdXJjZUNvbnRlbnRJZCk7XG4gICAgaWYgKHVuaXQpIHtcbiAgICAgIGF3YWl0IHRoaXMuanVtcFRvU291cmNlKHVuaXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTU5ODJcdTY3OUNcdTYyN0VcdTRFMERcdTUyMzBcdTdCMTRcdThCQjBcdTUzNTVcdTUxNDNcdUZGMENcdTVDMURcdThCRDVcdTc2RjRcdTYzQTVcdTYyNTNcdTVGMDBcdTY1ODdcdTRFRjZcbiAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY2FyZC5zb3VyY2VGaWxlKTtcbiAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgICBuZXcgTm90aWNlKCdcdTI3MDUgXHU1REYyXHU2MjUzXHU1RjAwXHU2RTkwXHU2NTg3XHU0RUY2Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU2MjdFXHU0RTBEXHU1MjMwXHU1MzlGXHU1OUNCXHU3QjE0XHU4QkIwJyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBjb25zdCB0eXBlTGFiZWwgPSBoZWFkZXIuY3JlYXRlRGl2KHtcbiAgICBjbHM6IGBmbGFzaGNhcmQtdHlwZSAke2NhcmQudHlwZX1gLFxuICAgIHRleHQ6IGNhcmQudHlwZSA9PT0gJ3FhJyA/ICdRJkEnIDogJ1x1NTg2Qlx1N0E3QSdcbiAgfSk7XG5cbiAgLy8gXHU1M0YzXHU0RTBBXHU4OUQyXHU0RTBCXHU2MkM5XHU4M0RDXHU1MzU1XHU2MzA5XHU5NEFFXG4gIGNvbnN0IHRvb2xzID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ2dyaWQtY2FyZC10b29scycgfSk7XG4gIGNvbnN0IG1vcmVCdG4gPSB0b29scy5jcmVhdGVEaXYoeyBjbHM6ICd0b29sLWJ0bi1ncmlkJyB9KTtcbiAgbW9yZUJ0bi5pbm5lckhUTUwgPSAnXHUyMkVFJztcbiAgbW9yZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLnNob3dGbGFzaGNhcmRDb250ZXh0TWVudShlLCBjYXJkKTtcbiAgfSk7XG5cbiAgLy8gXHU1MzYxXHU3MjQ3XHU1MTg1XHU1QkI5XG4gIGNvbnN0IGNvbnRlbnQgPSBjYXJkRWwuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkLWNvbnRlbnQnIH0pO1xuICBcbiAgY29uc3QgcXVlc3Rpb24gPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ2ZsYXNoY2FyZC1xdWVzdGlvbicgfSk7XG4gIHF1ZXN0aW9uLmlubmVySFRNTCA9IGA8c3Ryb25nPlx1OTVFRVx1OTg5OFx1RkYxQTwvc3Ryb25nPiR7Y2FyZC5mcm9udH1gO1xuICBcbiAgY29uc3QgYW5zd2VyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdmbGFzaGNhcmQtYW5zd2VyJyB9KTtcbiAgY29uc3QgYW5zd2VyVGV4dCA9IEFycmF5LmlzQXJyYXkoY2FyZC5iYWNrKSA/IGNhcmQuYmFjay5qb2luKCcsICcpIDogY2FyZC5iYWNrO1xuICBhbnN3ZXIuaW5uZXJIVE1MID0gYDxzdHJvbmc+XHU3QjU0XHU2ODQ4XHVGRjFBPC9zdHJvbmc+JHthbnN3ZXJUZXh0fWA7XG5cbiAgLy8gXHU1RTk1XHU5MEU4XHU1MTQzXHU0RkUxXHU2MDZGXG4gIGNvbnN0IG1ldGEgPSBjYXJkRWwuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkLW1ldGEnIH0pO1xuICBtZXRhLmNyZWF0ZVNwYW4oe1xuICAgIHRleHQ6IHRoaXMuZm9ybWF0RGF0ZShuZXcgRGF0ZShjYXJkLm1ldGFkYXRhLmNyZWF0ZWRBdCkpLFxuICAgIGNsczogJ2ZsYXNoY2FyZC1kYXRlJ1xuICB9KTtcbn1cbiAgLyoqXG4gICAqIFx1NkUzMlx1NjdEM1x1OTVFQVx1NTM2MVx1NTIxN1x1ODg2OFxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJDYXJkc0xpc3QoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IGhlYWRlciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkcy1oZWFkZXInIH0pO1xuICAgIGhlYWRlci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUQ4M0NcdURDQ0YgXHU2MjQwXHU2NzA5XHU5NUVBXHU1MzYxJyB9KTtcblxuICAgIGNvbnN0IGNhcmRzQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NhcmRzLWdyaWQnIH0pO1xuICAgIFxuICAgIGNvbnN0IGZsYXNoY2FyZHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldEFsbEZsYXNoY2FyZHMoKTtcblxuICAgIFxuICAgIGlmIChmbGFzaGNhcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY2FyZHNDb250YWluZXIuY3JlYXRlRGl2KHtcbiAgICAgICAgdGV4dDogJ1x1RDgzRFx1RENFRCBcdTY2ODJcdTY1RTBcdTk1RUFcdTUzNjEnLFxuICAgICAgICBjbHM6ICdlbXB0eS1zdGF0ZSdcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZsYXNoY2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbCA9IGNhcmRzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2ZsYXNoY2FyZC1pdGVtJyB9KTtcblxuICAgICAgLy8gXHU2Mjc5XHU5MUNGXHU5MDA5XHU2MkU5XHU2QTIxXHU1RjBGXHVGRjFBXHU2REZCXHU1MkEwY2hlY2tib3hcbiAgICAgIGlmICh0aGlzLmJhdGNoTW9kZSkge1xuICAgICAgICBjb25zdCBjaGVja2JveCA9IGNhcmRFbC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgdHlwZTogJ2NoZWNrYm94JyxcbiAgICAgICAgICBjbHM6ICdiYXRjaC1jaGVja2JveCdcbiAgICAgICAgfSk7XG4gICAgICAgIGNoZWNrYm94LnNldEF0dHJpYnV0ZSgnZGF0YS1jYXJkLWlkJywgY2FyZC5pZCk7XG4gICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0aGlzLnNlbGVjdGVkQ2FyZElkcy5oYXMoY2FyZC5pZCk7XG4gICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgICAgaWYgKChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5hZGQoY2FyZC5pZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmRlbGV0ZShjYXJkLmlkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNhcmRIZWFkZXIgPSBjYXJkRWwuY3JlYXRlRGl2KHsgY2xzOiAnZmxhc2hjYXJkLWhlYWRlcicgfSk7XG4gICAgICBjb25zdCB0eXBlTGFiZWwgPSBjYXJkSGVhZGVyLmNyZWF0ZURpdih7XG4gICAgICAgIGNsczogYGZsYXNoY2FyZC10eXBlICR7Y2FyZC50eXBlfWAsXG4gICAgICAgIHRleHQ6IGNhcmQudHlwZSA9PT0gJ3FhJyA/ICdRJkEnIDogJ1x1NTg2Qlx1N0E3QSdcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjYXJkSGVhZGVyLmNyZWF0ZVNwYW4oe1xuICAgICAgICB0ZXh0OiB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUoY2FyZC5tZXRhZGF0YS5jcmVhdGVkQXQpKSxcbiAgICAgICAgY2xzOiAnZmxhc2hjYXJkLWRhdGUnXG4gICAgICB9KTtcblxuICAgICAgLy8gXHU2REZCXHU1MkEwXHU1MjIwXHU5NjY0XHU2MzA5XHU5NEFFXG4gICAgICBjb25zdCBkZWxldGVCdG4gPSBjYXJkSGVhZGVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIHRleHQ6ICdcdUQ4M0RcdURERDFcdUZFMEYnLFxuICAgICAgICBjbHM6ICdmbGFzaGNhcmQtZGVsZXRlLWJ0bidcbiAgICAgIH0pO1xuICAgICAgZGVsZXRlQnRuLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdcdTUyMjBcdTk2NjRcdTk1RUFcdTUzNjEnKTtcbiAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGlmIChjb25maXJtKCdcdTc4NkVcdTVCOUFcdTg5ODFcdTUyMjBcdTk2NjRcdThGRDlcdTVGMjBcdTk1RUFcdTUzNjFcdTU0MTdcdUZGMUYnKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlRmxhc2hjYXJkKGNhcmQuaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgY2FyZEJvZHkgPSBjYXJkRWwuY3JlYXRlRGl2KHsgY2xzOiAnZmxhc2hjYXJkLWJvZHknIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBxdWVzdGlvbiA9IGNhcmRCb2R5LmNyZWF0ZURpdih7IGNsczogJ2ZsYXNoY2FyZC1xdWVzdGlvbicgfSk7XG4gICAgICBxdWVzdGlvbi5pbm5lckhUTUwgPSBgPHN0cm9uZz5cdTk1RUVcdTk4OThcdUZGMUE8L3N0cm9uZz4ke2NhcmQuZnJvbnR9YDtcbiAgICAgIFxuICAgICAgY29uc3QgYW5zd2VyID0gY2FyZEJvZHkuY3JlYXRlRGl2KHsgY2xzOiAnZmxhc2hjYXJkLWFuc3dlcicgfSk7XG4gICAgICBjb25zdCBhbnN3ZXJUZXh0ID0gQXJyYXkuaXNBcnJheShjYXJkLmJhY2spID8gY2FyZC5iYWNrLmpvaW4oJywgJykgOiBjYXJkLmJhY2s7XG4gICAgICBhbnN3ZXIuaW5uZXJIVE1MID0gYDxzdHJvbmc+XHU3QjU0XHU2ODQ4XHVGRjFBPC9zdHJvbmc+JHthbnN3ZXJUZXh0fWA7XG4gICAgfSk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTRFQTRcdTRFOTJcdTY1QjlcdTZDRDUgPT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogXHU1MjA3XHU2MzYyXHU1MTg1XHU4MDU0XHU2Mjc5XHU2Q0U4XHU3RjE2XHU4RjkxXHU1NjY4XG4gICAqL1xuICBwcml2YXRlIHRvZ2dsZUlubGluZUFubm90YXRpb24oY2FyZEVsOiBIVE1MRWxlbWVudCwgdW5pdDogQ29udGVudFVuaXQpIHtcbiAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTVERjJcdTdFQ0ZcdTVCNThcdTU3MjhcdTdGMTZcdThGOTFcdTU2NjhcbiAgICBsZXQgZXhpc3RpbmdFZGl0b3IgPSBjYXJkRWwucXVlcnlTZWxlY3RvcignLmlubGluZS1hbm5vdGF0aW9uLWVkaXRvcicpIGFzIEhUTUxFbGVtZW50O1xuICAgIFxuICAgIGlmIChleGlzdGluZ0VkaXRvcikge1xuICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1REYyXHU1QjU4XHU1NzI4XHVGRjBDXHU3OUZCXHU5NjY0XHU3RjE2XHU4RjkxXHU1NjY4XHU1RTc2XHU2MDYyXHU1OTBEXHU2Mjc5XHU2Q0U4XHU5ODg0XHU4OUM4XG4gICAgICBleGlzdGluZ0VkaXRvci5yZW1vdmUoKTtcbiAgICAgIFxuICAgICAgLy8gXHU2MDYyXHU1OTBEXHU2Mjc5XHU2Q0U4XHU5ODg0XHU4OUM4XHU2NjNFXHU3OTNBXG4gICAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk7XG4gICAgICBpZiAoYW5ub3RhdGlvbikge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvbnRlbnQsIC5ncmlkLWNhcmQtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBjb25zdCBleGlzdGluZ1ByZXZpZXcgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbm5vdGF0aW9uLXByZXZpZXcsIC5ncmlkLWFubm90YXRpb24nKTtcbiAgICAgICAgaWYgKCFleGlzdGluZ1ByZXZpZXcpIHtcbiAgICAgICAgICB0aGlzLnJlY3JlYXRlQW5ub3RhdGlvblByZXZpZXcoY29udGVudCwgY2FyZEVsLCB1bml0LCBhbm5vdGF0aW9uLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gXHU4M0I3XHU1M0Q2XHU3M0IwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAgY29uc3QgYW5ub3RhdGlvbiA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldENvbnRlbnRBbm5vdGF0aW9uKHVuaXQuaWQpO1xuICAgIFxuICAgIC8vIFx1NjI3RVx1NTIzMFx1NjI3OVx1NkNFOFx1OTg4NFx1ODlDOFx1NTE0M1x1N0QyMFx1NjIxNlx1NjNEMlx1NTE2NVx1NEY0RFx1N0Y2RVxuICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkRWwucXVlcnlTZWxlY3RvcignLmNhcmQtY29udGVudCwgLmdyaWQtY2FyZC1jb250ZW50JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgYW5ub3RhdGlvblByZXZpZXcgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbm5vdGF0aW9uLXByZXZpZXcsIC5ncmlkLWFubm90YXRpb24nKSBhcyBIVE1MRWxlbWVudDtcbiAgICBjb25zdCBpc0dyaWRDYXJkID0gY2FyZEVsLmNsYXNzTGlzdC5jb250YWlucygnZ3JpZC1jYXJkJyk7XG4gICAgXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU2NzA5XHU2Mjc5XHU2Q0U4XHU5ODg0XHU4OUM4XHVGRjBDXHU2NkZGXHU2MzYyXHU1QjgzXHVGRjFCXHU1NDI2XHU1MjE5XHU1NzI4XHU1NDA4XHU5MDAyXHU0RjREXHU3RjZFXHU2M0QyXHU1MTY1XG4gICAgY29uc3QgZWRpdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWRpdG9yLmNsYXNzTmFtZSA9ICdpbmxpbmUtYW5ub3RhdGlvbi1lZGl0b3InO1xuICAgIFxuICAgIGNvbnN0IHRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgICB0ZXh0YXJlYS5jbGFzc05hbWUgPSAnaW5saW5lLWFubm90YXRpb24tdGV4dGFyZWEnO1xuICAgIHRleHRhcmVhLnBsYWNlaG9sZGVyID0gJ0FkZCBjb21tZW50Li4uJztcbiAgICB0ZXh0YXJlYS52YWx1ZSA9IGFubm90YXRpb24/LmNvbnRlbnQgfHwgJyc7XG4gICAgdGV4dGFyZWEuc2V0QXR0cmlidXRlKCdkYXRhLXVuaXQtaWQnLCB1bml0LmlkKTtcbiAgICBcbiAgICBjb25zdCBoaW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgaGludC5jbGFzc05hbWUgPSAnaW5saW5lLWFubm90YXRpb24taGludCc7XG4gICAgaGludC50ZXh0Q29udGVudCA9ICdTaGlmdCArIEVudGVyIFx1NjM2Mlx1ODg0Qyc7XG4gICAgXG4gICAgZWRpdG9yLmFwcGVuZENoaWxkKHRleHRhcmVhKTtcbiAgICBlZGl0b3IuYXBwZW5kQ2hpbGQoaGludCk7XG4gICAgXG4gICAgLy8gXHU2NkZGXHU2MzYyXHU2MjE2XHU2M0QyXHU1MTY1XHU3RjE2XHU4RjkxXHU1NjY4XG4gICAgaWYgKGFubm90YXRpb25QcmV2aWV3KSB7XG4gICAgICAvLyBcdTY2RkZcdTYzNjJcdTYyNzlcdTZDRThcdTk4ODRcdTg5QzhcbiAgICAgIGFubm90YXRpb25QcmV2aWV3LnJlcGxhY2VXaXRoKGVkaXRvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NTcyOFx1N0IxNFx1OEJCMFx1NjU4N1x1NjcyQ1x1NTQwRVx1OTc2Mlx1NjNEMlx1NTE2NVxuICAgICAgY29uc3Qgbm90ZVRleHQgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5ub3RlLXRleHQsIC5ncmlkLW5vdGUtdGV4dCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgaWYgKG5vdGVUZXh0KSB7XG4gICAgICAgIG5vdGVUZXh0LmFmdGVyKGVkaXRvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGVkaXRvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHU4MUVBXHU1MkE4XHU4MDVBXHU3MTI2XG4gICAgdGV4dGFyZWEuZm9jdXMoKTtcbiAgICB0ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZSh0ZXh0YXJlYS52YWx1ZS5sZW5ndGgsIHRleHRhcmVhLnZhbHVlLmxlbmd0aCk7XG4gICAgXG5cbiAgICBcbi8vIFx1NTkzMVx1NzEyNlx1NjVGNlx1ODFFQVx1NTJBOFx1NEZERFx1NUI1OFxudGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGFzeW5jIChlKSA9PiB7XG4gIC8vIFx1NTk4Mlx1Njc5Q1x1NzBCOVx1NTFGQlx1NzY4NFx1NjYyRlx1NTE3Nlx1NEVENlx1NTE0M1x1N0QyMFx1RkYwQ1x1ODFFQVx1NTJBOFx1NEZERFx1NUI1OFxuICBjb25zdCByZWxhdGVkVGFyZ2V0ID0gZS5yZWxhdGVkVGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICBpZiAoIXJlbGF0ZWRUYXJnZXQgfHwgIWVkaXRvci5jb250YWlucyhyZWxhdGVkVGFyZ2V0KSkge1xuICAgIC8vIFx1NUVGNlx1OEZERlx1NEZERFx1NUI1OFx1RkYwQ1x1Nzg2RVx1NEZERFx1N0YxNlx1OEY5MVx1NTY2OFx1OEZEOFx1NTcyOCBET00gXHU0RTJEXG4gICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoZWRpdG9yLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlSW5saW5lQW5ub3RhdGlvbihlZGl0b3IsIHVuaXQsIHRleHRhcmVhLnZhbHVlKTtcbiAgICAgIH1cbiAgICB9LCAxMDApO1xuICB9XG59KTtcblxuLy8gVGFiIFx1OTUyRVx1NEZERFx1NUI1OFxudGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGFzeW5jIChlKSA9PiB7XG4gIGlmIChlLmtleSA9PT0gJ1RhYicpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgYXdhaXQgdGhpcy5zYXZlSW5saW5lQW5ub3RhdGlvbihlZGl0b3IsIHVuaXQsIHRleHRhcmVhLnZhbHVlKTtcbiAgfVxufSk7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBcdTRGRERcdTVCNThcdTUxODVcdTgwNTRcdTYyNzlcdTZDRThcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgc2F2ZUlubGluZUFubm90YXRpb24oZWRpdG9yRWw6IEhUTUxFbGVtZW50LCB1bml0OiBDb250ZW50VW5pdCwgdGV4dDogc3RyaW5nKSB7XG4gICAgXG4gICAgY29uc3QgdHJpbW1lZFRleHQgPSB0ZXh0LnRyaW0oKTtcbiAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk7XG4gICAgXG4gICAgaWYgKHRyaW1tZWRUZXh0KSB7XG4gICAgICBpZiAoYW5ub3RhdGlvbikge1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci51cGRhdGVBbm5vdGF0aW9uKGFubm90YXRpb24uaWQsIHtcbiAgICAgICAgICBjb250ZW50OiB0cmltbWVkVGV4dFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmFkZENvbnRlbnRBbm5vdGF0aW9uKHVuaXQuaWQsIHRyaW1tZWRUZXh0KTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGFubm90YXRpb24pIHtcbiAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmRlbGV0ZUFubm90YXRpb24oYW5ub3RhdGlvbi5pZCk7XG4gICAgICBuZXcgTm90aWNlKCdcdUQ4M0RcdURERDFcdUZFMEYgXHU2Mjc5XHU2Q0U4XHU1REYyXHU1MjIwXHU5NjY0Jyk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGNhcmQgPSBlZGl0b3JFbC5jbG9zZXN0KCcuY29tcGFjdC1jYXJkLCAuZ3JpZC1jYXJkJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgXG4gICAgZWRpdG9yRWwucmVtb3ZlKCk7XG4gICAgXG4gICAgaWYgKHRyaW1tZWRUZXh0ICYmIGNhcmQpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvbnRlbnQsIC5ncmlkLWNhcmQtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgXG4gICAgICBpZiAoY29udGVudCkge1xuICAgICAgICB0aGlzLnJlY3JlYXRlQW5ub3RhdGlvblByZXZpZXcoY29udGVudCwgY2FyZCwgdW5pdCwgdHJpbW1lZFRleHQpO1xuICAgICAgICAgICAgICAvLyBcdUQ4M0RcdUREMjcgXHU2NUIwXHU1ODlFXHVGRjFBXHU2NkY0XHU2NUIwIGluZGljYXRvclxuICAgICAgY29uc3QgaW5kaWNhdG9yID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1pbmRpY2F0b3InKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmIChpbmRpY2F0b3IgJiYgIWluZGljYXRvci5jbGFzc0xpc3QuY29udGFpbnMoJ2hhcy1hbm5vdGF0aW9uJykpIHtcbiAgICAgICAgaW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoJ2hhcy1hbm5vdGF0aW9uJyk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKCF0cmltbWVkVGV4dCAmJiBjYXJkKSB7XG4gICAgLy8gXHVEODNEXHVERDI3IFx1NTk4Mlx1Njc5Q1x1NTIyMFx1OTY2NFx1NEU4Nlx1NjI3OVx1NkNFOFx1RkYwQ1x1NzlGQlx1OTY2NCBpbmRpY2F0b3IgXHU3Njg0XHU2Mjc5XHU2Q0U4XHU2ODM3XHU1RjBGXG4gICAgY29uc3QgaW5kaWNhdG9yID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1pbmRpY2F0b3InKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAoaW5kaWNhdG9yICYmIGluZGljYXRvci5jbGFzc0xpc3QuY29udGFpbnMoJ2hhcy1hbm5vdGF0aW9uJykpIHtcbiAgICAgIGluZGljYXRvci5jbGFzc0xpc3QucmVtb3ZlKCdoYXMtYW5ub3RhdGlvbicpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgLyoqXG4gICAqIFx1NTNENlx1NkQ4OFx1NTE4NVx1ODA1NFx1NjI3OVx1NkNFOFx1N0YxNlx1OEY5MVxuICAgKi9cbiAgcHJpdmF0ZSBjYW5jZWxJbmxpbmVBbm5vdGF0aW9uKGVkaXRvckVsOiBIVE1MRWxlbWVudCwgY2FyZEVsOiBIVE1MRWxlbWVudCwgdW5pdDogQ29udGVudFVuaXQpIHtcbiAgICAvLyBcdTc5RkJcdTk2NjRcdTdGMTZcdThGOTFcdTU2NjhcbiAgICBlZGl0b3JFbC5yZW1vdmUoKTtcbiAgICBcbiAgICAvLyBcdTYwNjJcdTU5MERcdTYyNzlcdTZDRThcdTk4ODRcdTg5QzhcdUZGMDhcdTU5ODJcdTY3OUNcdTY3MDlcdUZGMDlcbiAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk7XG4gICAgaWYgKGFubm90YXRpb24pIHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkRWwucXVlcnlTZWxlY3RvcignLmNhcmQtY29udGVudCwgLmdyaWQtY2FyZC1jb250ZW50JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICB0aGlzLnJlY3JlYXRlQW5ub3RhdGlvblByZXZpZXcoY29udGVudCwgY2FyZEVsLCB1bml0LCBhbm5vdGF0aW9uLmNvbnRlbnQpO1xuICAgIH1cbiAgfVxuICBcbiAgLyoqXG4gICAqIFx1OTFDRFx1NjVCMFx1NTIxQlx1NUVGQVx1NjI3OVx1NkNFOFx1OTg4NFx1ODlDOFxuICAgKi9cbiAgcHJpdmF0ZSByZWNyZWF0ZUFubm90YXRpb25QcmV2aWV3KFxuICAgIGNvbnRlbnRFbDogSFRNTEVsZW1lbnQsIFxuICAgIGNhcmRFbDogSFRNTEVsZW1lbnQsIFxuICAgIHVuaXQ6IENvbnRlbnRVbml0LCBcbiAgICBhbm5vdGF0aW9uVGV4dDogc3RyaW5nXG4gICkge1xuICAgIFxuICAgIGNvbnN0IGV4aXN0aW5nUHJldmlldyA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcuYW5ub3RhdGlvbi1wcmV2aWV3LCAuZ3JpZC1hbm5vdGF0aW9uJyk7XG4gICAgaWYgKGV4aXN0aW5nUHJldmlldykge1xuICAgICAgZXhpc3RpbmdQcmV2aWV3LnJlbW92ZSgpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBpc0dyaWRDYXJkID0gY2FyZEVsLmNsYXNzTGlzdC5jb250YWlucygnZ3JpZC1jYXJkJyk7XG4gICAgY29uc3QgYW5uRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhbm5FbC5jbGFzc05hbWUgPSBpc0dyaWRDYXJkID8gJ2dyaWQtYW5ub3RhdGlvbicgOiAnYW5ub3RhdGlvbi1wcmV2aWV3JztcbiAgICBcbiAgICBpZiAoaXNHcmlkQ2FyZCkge1xuICAgICAgYW5uRWwuaW5uZXJIVE1MID0gYDxzdHJvbmc+XHU2Mjc5XHU2Q0U4XHVGRjFBPC9zdHJvbmc+JHthbm5vdGF0aW9uVGV4dH1gO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXNwbGF5VGV4dCA9IGFubm90YXRpb25UZXh0Lmxlbmd0aCA+IDYwXG4gICAgICAgID8gYW5ub3RhdGlvblRleHQuc3Vic3RyaW5nKDAsIDYwKSArICcuLi4nXG4gICAgICAgIDogYW5ub3RhdGlvblRleHQ7XG4gICAgICBhbm5FbC50ZXh0Q29udGVudCA9IGBcdUQ4M0RcdURDQUMgJHtkaXNwbGF5VGV4dH1gO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcbiAgICBhbm5FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy50b2dnbGVJbmxpbmVBbm5vdGF0aW9uKGNhcmRFbCwgdW5pdCk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gXHVEODNEXHVERDI3IFx1NjVCMFx1NTg5RVx1RkYxQVRhYiBcdTk1MkVcdTRFOEJcdTRFRjZcbiAgICBhbm5FbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ1RhYicpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLnRvZ2dsZUlubGluZUFubm90YXRpb24oY2FyZEVsLCB1bml0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBub3RlVGV4dCA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcubm90ZS10ZXh0LCAuZ3JpZC1ub3RlLXRleHQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAobm90ZVRleHQpIHtcbiAgICAgIG5vdGVUZXh0Lmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJlbmQnLCBhbm5FbCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGluc2VydGVkID0gY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoJy5hbm5vdGF0aW9uLXByZXZpZXcsIC5ncmlkLWFubm90YXRpb24nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGVudEVsLmFwcGVuZENoaWxkKGFubkVsKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gXHVEODNEXHVERDI3IFx1OEJCRVx1N0Y2RSB0YWJpbmRleCBcdTRGN0ZcdTUxNzZcdTUzRUZcdTRFRTVcdTYzQTVcdTY1MzZcdTcxMjZcdTcwQjlcbiAgICBhbm5FbC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICBhbm5FbC5mb2N1cygpO1xuICAgIFxuICB9XG5cbiAgLyoqXG4gICAqIFx1NjI1M1x1NUYwMFx1NjI3OVx1NkNFOFx1N0YxNlx1OEY5MVx1NTY2OFx1RkYwOFx1NkEyMVx1NjAwMVx1Njg0Nlx1NjVCOVx1NUYwRlx1RkYwQ1x1NEZERFx1NzU1OVx1NzUyOFx1NEU4RVx1NTNGM1x1OTUyRVx1ODNEQ1x1NTM1NVx1RkYwOVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBvcGVuQW5ub3RhdGlvbkVkaXRvcih1bml0OiBDb250ZW50VW5pdCkge1xuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRDb250ZW50QW5ub3RhdGlvbih1bml0LmlkKTtcbiAgICBjb25zdCBleGlzdGluZ1RleHQgPSBhbm5vdGF0aW9uPy5jb250ZW50IHx8ICcnO1xuXG4gICAgY29uc3QgbW9kYWwgPSBuZXcgQW5ub3RhdGlvbk1vZGFsKFxuICAgICAgdGhpcy5hcHAsXG4gICAgICBleGlzdGluZ1RleHQsXG4gICAgICBhc3luYyAobmV3VGV4dDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmIChuZXdUZXh0LnRyaW0oKSkge1xuICAgICAgICAgIGlmIChhbm5vdGF0aW9uKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci51cGRhdGVBbm5vdGF0aW9uKGFubm90YXRpb24uaWQsIHtcbiAgICAgICAgICAgICAgY29udGVudDogbmV3VGV4dFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmFkZENvbnRlbnRBbm5vdGF0aW9uKHVuaXQuaWQsIG5ld1RleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3MDUgXHU2Mjc5XHU2Q0U4XHU1REYyXHU0RkREXHU1QjU4Jyk7XG4gICAgICAgIH0gZWxzZSBpZiAoYW5ub3RhdGlvbikge1xuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmRlbGV0ZUFubm90YXRpb24oYW5ub3RhdGlvbi5pZCk7XG4gICAgICAgICAgbmV3IE5vdGljZSgnXHVEODNEXHVEREQxXHVGRTBGIFx1NjI3OVx1NkNFOFx1NURGMlx1NTIyMFx1OTY2NCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgfVxuICAgICk7XG5cbiAgICBtb2RhbC5vcGVuKCk7XG4gIH1cblxuICAvKipcbiAgICogXHU4REYzXHU4RjZDXHU1MjMwXHU1MzlGXHU2NTg3XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGp1bXBUb1NvdXJjZSh1bml0OiBDb250ZW50VW5pdCkge1xuXG4gICAgXG4gICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh1bml0LnNvdXJjZS5maWxlKTtcbiAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU2NTg3XHU0RUY2XHU0RTBEXHU1QjU4XHU1NzI4Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICBcbiAgICAvLyBcdTY4MDdcdThCQjBcdTk3MDBcdTg5ODFcdTYwNjJcdTU5MERcdTZFREFcdTUyQThcbiAgICB0aGlzLnNob3VsZFJlc3RvcmVTY3JvbGwgPSB0cnVlO1xuXG4gICAgXG4gICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKTtcbiAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xuICBcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShJdGVtVmlldyk7XG4gICAgICBpZiAodmlldykge1xuICAgICAgICBjb25zdCBlZGl0b3IgPSAodmlldyBhcyBhbnkpLmVkaXRvcjtcbiAgICAgICAgaWYgKGVkaXRvcikge1xuICAgICAgICAgIGNvbnN0IGxpbmUgPSB1bml0LnNvdXJjZS5wb3NpdGlvbi5saW5lO1xuICAgICAgICAgIGNvbnN0IGxpbmVDb3VudCA9IGVkaXRvci5saW5lQ291bnQoKTtcbiAgICAgICAgICBjb25zdCB2YWxpZExpbmUgPSBNYXRoLm1pbihsaW5lLCBsaW5lQ291bnQgLSAxKTtcbiAgICAgICAgICBcbiAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHsgbGluZTogdmFsaWRMaW5lLCBjaDogMCB9KTtcbiAgICAgICAgICBlZGl0b3Iuc2Nyb2xsSW50b1ZpZXcoXG4gICAgICAgICAgICB7IGZyb206IHsgbGluZTogdmFsaWRMaW5lLCBjaDogMCB9LCB0bzogeyBsaW5lOiB2YWxpZExpbmUsIGNoOiAwIH0gfSxcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3QgbGluZUxlbmd0aCA9IGVkaXRvci5nZXRMaW5lKHZhbGlkTGluZSk/Lmxlbmd0aCB8fCAwO1xuICAgICAgICAgICAgICBlZGl0b3Iuc2V0U2VsZWN0aW9uKFxuICAgICAgICAgICAgICAgIHsgbGluZTogdmFsaWRMaW5lLCBjaDogMCB9LCBcbiAgICAgICAgICAgICAgICB7IGxpbmU6IHZhbGlkTGluZSwgY2g6IGxpbmVMZW5ndGggfVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdTZWxlY3Rpb24gZXJyb3I6JywgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgfSwgMjAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTVGRUJcdTkwMUZcdTc1MUZcdTYyMTBcdTk1RUFcdTUzNjFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgcXVpY2tHZW5lcmF0ZUZsYXNoY2FyZCh1bml0OiBDb250ZW50VW5pdCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IFF1aWNrRmxhc2hjYXJkQ3JlYXRvciB9ID0gYXdhaXQgaW1wb3J0KCcuLi9jb3JlL1F1aWNrRmxhc2hjYXJkQ3JlYXRvcicpO1xuICAgICAgY29uc3QgY3JlYXRvciA9IG5ldyBRdWlja0ZsYXNoY2FyZENyZWF0b3IodGhpcy5wbHVnaW4pO1xuICAgICAgYXdhaXQgY3JlYXRvci5jcmVhdGVTbWFydENhcmQodW5pdCk7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTEgXHU5NUVBXHU1MzYxXHU1REYyXHU3NTFGXHU2MjEwJyk7XG4gICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIFx1NzUxRlx1NjIxMFx1OTVFQVx1NTM2MVx1NTkzMVx1OEQyNScpO1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG4gIC8qKlxuICogXHU2NjNFXHU3OTNBXHU2Mjc5XHU5MUNGXHU2NENEXHU0RjVDXHU4M0RDXHU1MzU1XG4gKi9cbnByaXZhdGUgc2hvd0JhdGNoTWVudShldmVudDogTW91c2VFdmVudCwgdW5pdD86IENvbnRlbnRVbml0KSB7XG4gIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xuXG5cblxuICAvLyBcdTVERjJcdTdFQ0ZcdTU3MjhcdTYyNzlcdTkxQ0ZcdTZBMjFcdTVGMEZcdUZGMENcdTY2M0VcdTc5M0FcdTYyNzlcdTkxQ0ZcdTY0Q0RcdTRGNUNcdTkwMDlcdTk4NzlcbiAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgIGl0ZW1cbiAgICAgIC5zZXRUaXRsZSh0aGlzLmlzQWxsU2VsZWN0ZWQoKSA/ICdcdTI2MTEgc2VsZWN0JyA6ICdcdTI2MTAgQWxsU2VsZWN0JylcbiAgICAgIC5zZXRJY29uKCdjaGVjay1zcXVhcmUnKVxuICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICB0aGlzLnRvZ2dsZVNlbGVjdEFsbCgpO1xuICAgICAgfSlcbiAgKTtcblxuICBtZW51LmFkZFNlcGFyYXRvcigpO1xuXG4gIGlmICh0aGlzLnZpZXdUeXBlID09PSAnbm90ZXMnKSB7XG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoYFx1MjZBMSBcdTYyNzlcdTkxQ0ZcdTUyMzZcdTUzNjEgKCR7dGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZX0pYClcbiAgICAgICAgLnNldEljb24oJ3phcCcpXG4gICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICB0aGlzLmJhdGNoQ3JlYXRlRmxhc2hjYXJkcygpO1xuICAgICAgICB9KVxuICAgICk7XG4gIH1cblxuICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgaXRlbVxuICAgICAgLnNldFRpdGxlKGBcdUQ4M0RcdURERDFcdUZFMEYgXHU1MjIwXHU5NjY0XHU5MDA5XHU0RTJEICgke3RoaXMudmlld1R5cGUgPT09ICdjYXJkcycgPyB0aGlzLnNlbGVjdGVkQ2FyZElkcy5zaXplIDogdGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZX0pYClcbiAgICAgIC5zZXRJY29uKCd0cmFzaCcpXG4gICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnKSB7XG4gICAgICAgICAgdGhpcy5iYXRjaERlbGV0ZUZsYXNoY2FyZHMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmJhdGNoRGVsZXRlTm90ZXMoKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgKTtcblxuICBtZW51LmFkZFNlcGFyYXRvcigpO1xuXG4gIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICBpdGVtXG4gICAgICAuc2V0VGl0bGUoJ1x1MjcxMyBcdTkwMDBcdTUxRkFcdTYyNzlcdTkxQ0ZcdTZBMjFcdTVGMEYnKVxuICAgICAgLnNldEljb24oJ3gnKVxuICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICB0aGlzLmJhdGNoTW9kZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5jbGVhcigpO1xuICAgICAgICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5jbGVhcigpO1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgfSlcbiAgKTtcblxuICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xufVxuXG4gIC8qKlxuICAgKiBcdTY2M0VcdTc5M0FcdTRFMEFcdTRFMEJcdTY1ODdcdTgzRENcdTUzNTVcbiAgICovXG4gIHByaXZhdGUgc2hvd0NvbnRleHRNZW51KGV2ZW50OiBNb3VzZUV2ZW50LCB1bml0OiBDb250ZW50VW5pdCkge1xuICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1RDgzRFx1RENENiBcdThERjNcdThGNkNcdTUyMzBcdTUzOUZcdTY1ODcnKVxuICAgICAgICAuc2V0SWNvbignYXJyb3ctdXAtcmlnaHQnKVxuICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLmp1bXBUb1NvdXJjZSh1bml0KSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1RDgzRFx1RENBQyBcdTdGMTZcdThGOTFcdTYyNzlcdTZDRTgnKVxuICAgICAgICAuc2V0SWNvbignbWVzc2FnZS1zcXVhcmUnKVxuICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLm9wZW5Bbm5vdGF0aW9uRWRpdG9yKHVuaXQpKVxuICAgICk7XG5cbiAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xuICAgIGlmICh1bml0LmZsYXNoY2FyZElkcy5sZW5ndGggPiAwKSB7XG4gICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgIGl0ZW1cbiAgICAgICAgICAuc2V0VGl0bGUoJ1x1MjcwRlx1RkUwRiBcdTdGMTZcdThGOTFcdTk1RUFcdTUzNjEnKVxuICAgICAgICAgIC5zZXRJY29uKCdlZGl0JylcbiAgICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLmVkaXRGbGFzaGNhcmRzRm9yVW5pdCh1bml0LGV2ZW50KSlcbiAgICAgICk7XG4gICAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xuICAgIH1cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHUyNkExIFx1NzUxRlx1NjIxMFx1OTVFQVx1NTM2MScpXG4gICAgICAgIC5zZXRJY29uKCd6YXAnKVxuICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLnF1aWNrR2VuZXJhdGVGbGFzaGNhcmQodW5pdCkpXG4gICAgKTtcbiAgXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1Mjc5NSBcdTUyMUJcdTVFRkEgUUEgXHU5NUVBXHU1MzYxJylcbiAgICAgICAgLnNldEljb24oJ3BsdXMnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVGbGFzaGNhcmQodW5pdCwgJ3FhJyk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdTI3OTUgXHU1MjFCXHU1RUZBXHU1ODZCXHU3QTdBXHU5NUVBXHU1MzYxJylcbiAgICAgICAgLnNldEljb24oJ3BsdXMnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVGbGFzaGNhcmQodW5pdCwgJ2Nsb3plJyk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHU2N0U1XHU3NzBCXHU3RURGXHU4QkExJylcbiAgICAgICAgLnNldEljb24oJ2Jhci1jaGFydCcpXG4gICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnBsdWdpbi5hY3RpdmF0ZVN0YXRzKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHVEODNEXHVEREQxXHVGRTBGIFx1NTIyMFx1OTY2NFx1N0IxNFx1OEJCMCcpXG4gICAgICAgIC5zZXRJY29uKCd0cmFzaCcpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBpZiAoY29uZmlybSgnXHU3ODZFXHU1QjlBXHU4OTgxXHU1MjIwXHU5NjY0XHU4RkQ5XHU2NzYxXHU3QjE0XHU4QkIwXHU1NDE3XHVGRjFGJykpIHtcbiAgICAgICAgICAgIC8vIFx1RDgzRFx1REQyNyBcdTUxNDhcdTUyMjBcdTk2NjRcdTUxNzNcdTgwNTRcdTc2ODRcdTk1RUFcdTUzNjFcbiAgICAgICAgICAgIGlmICh1bml0LmZsYXNoY2FyZElkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgY2FyZElkIG9mIHVuaXQuZmxhc2hjYXJkSWRzKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5kZWxldGVDYXJkKGNhcmRJZCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU1MThEXHU1MjIwXHU5NjY0XHU3QjE0XHU4QkIwXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5kZWxldGVDb250ZW50VW5pdCh1bml0LmlkKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1RDgzRFx1REREMVx1RkUwRiBcdTdCMTRcdThCQjBcdTVERjJcdTUyMjBcdTk2NjQnKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5zaG93QXRNb3VzZUV2ZW50KGV2ZW50KTtcbiAgfVxuLyoqXG4gKiBcdTdGMTZcdThGOTFcdTdCMTRcdThCQjBcdTUzNTVcdTUxNDNcdTUxNzNcdTgwNTRcdTc2ODRcdTk1RUFcdTUzNjFcbiAqL1xucHJpdmF0ZSBlZGl0Rmxhc2hjYXJkc0ZvclVuaXQodW5pdDogQ29udGVudFVuaXQsIGV2ZW50PzogTW91c2VFdmVudCkge1xuICBpZiAodW5pdC5mbGFzaGNhcmRJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1OEJFNVx1N0IxNFx1OEJCMFx1NkNBMVx1NjcwOVx1NTE3M1x1ODA1NFx1NzY4NFx1OTVFQVx1NTM2MScpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIFx1NTk4Mlx1Njc5Q1x1NTNFQVx1NjcwOVx1NEUwMFx1NUYyMFx1OTVFQVx1NTM2MSxcdTc2RjRcdTYzQTVcdTdGMTZcdThGOTFcbiAgaWYgKHVuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aCA9PT0gMSkge1xuICAgIGNvbnN0IGFsbENhcmRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRBbGxGbGFzaGNhcmRzKCk7XG4gICAgY29uc3QgY2FyZCA9IGFsbENhcmRzLmZpbmQoYyA9PiBjLmlkID09PSB1bml0LmZsYXNoY2FyZElkc1swXSk7XG4gICAgaWYgKGNhcmQpIHtcbiAgICAgIHRoaXMuZWRpdEZsYXNoY2FyZChjYXJkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1NjI3RVx1NEUwRFx1NTIzMFx1OEJFNVx1OTVFQVx1NTM2MScpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBcdTU5ODJcdTY3OUNcdTY3MDlcdTU5MUFcdTVGMjBcdTk1RUFcdTUzNjEsXHU2NjNFXHU3OTNBXHU5MDA5XHU2MkU5XHU4M0RDXHU1MzU1XG4gIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xuICBjb25zdCBhbGxDYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICBcbiAgdW5pdC5mbGFzaGNhcmRJZHMuZm9yRWFjaCgoY2FyZElkLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IGNhcmQgPSBhbGxDYXJkcy5maW5kKGMgPT4gYy5pZCA9PT0gY2FyZElkKTtcbiAgICBpZiAoY2FyZCkge1xuICAgICAgY29uc3QgdHlwZUxhYmVsID0gY2FyZC50eXBlID09PSAncWEnID8gJ1EmQScgOiAnXHU1ODZCXHU3QTdBJztcbiAgICAgIGNvbnN0IHByZXZpZXcgPSBjYXJkLmZyb250Lmxlbmd0aCA+IDMwIFxuICAgICAgICA/IGNhcmQuZnJvbnQuc3Vic3RyaW5nKDAsIDMwKSArICcuLi4nIFxuICAgICAgICA6IGNhcmQuZnJvbnQ7XG4gICAgICBcbiAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgaXRlbVxuICAgICAgICAgIC5zZXRUaXRsZShgJHtpbmRleCArIDF9LiAke3R5cGVMYWJlbH06ICR7cHJldmlld31gKVxuICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHRoaXMuZWRpdEZsYXNoY2FyZChjYXJkKSlcbiAgICAgICk7XG4gICAgfVxuICB9KTtcblxuICAvLyBcdTU3MjhcdTlGMjBcdTY4MDdcdTRGNERcdTdGNkVcdTY2M0VcdTc5M0FcdTgzRENcdTUzNTVcbiAgaWYgKGV2ZW50KSB7XG4gICAgbWVudS5zaG93QXRNb3VzZUV2ZW50KGV2ZW50KTtcbiAgfSBlbHNlIHtcbiAgICBtZW51LnNob3dBdFBvc2l0aW9uKHsgeDogMTAwLCB5OiAxMDAgfSk7IC8vIFx1OUVEOFx1OEJBNFx1NEY0RFx1N0Y2RVxuICB9XG59XG4vKipcbiAqIFx1NjYzRVx1NzkzQVx1OTVFQVx1NTM2MVx1NEUwQVx1NEUwQlx1NjU4N1x1ODNEQ1x1NTM1NVxuICovXG5wcml2YXRlIHNob3dGbGFzaGNhcmRDb250ZXh0TWVudShldmVudDogTW91c2VFdmVudCwgY2FyZDogRmxhc2hjYXJkKSB7XG4gIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xuXG4gIC8vIFx1OERGM1x1OEY2Q1x1NTIzMFx1NTM5Rlx1NjU4N1xuICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgaXRlbVxuICAgICAgLnNldFRpdGxlKCdcdUQ4M0RcdURDRDYgXHU4REYzXHU4RjZDXHU1MjMwXHU1MzlGXHU2NTg3JylcbiAgICAgIC5zZXRJY29uKCdhcnJvdy11cC1yaWdodCcpXG4gICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgIC8vIFx1NEZFRVx1NjUzOVx1RkYxQVx1NEY3Rlx1NzUyOCBzb3VyY2VDb250ZW50SWRcbiAgICAgICAgY29uc3QgdW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNhcmQuc291cmNlQ29udGVudElkKTtcbiAgICAgICAgaWYgKHVuaXQpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmp1bXBUb1NvdXJjZSh1bml0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTYyN0VcdTRFMERcdTUyMzBcdTdCMTRcdThCQjBcdTUzNTVcdTUxNDNcdUZGMENcdTVDMURcdThCRDVcdTc2RjRcdTYzQTVcdTYyNTNcdTVGMDBcdTY1ODdcdTRFRjZcbiAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGNhcmQuc291cmNlRmlsZSk7XG4gICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IFx1NURGMlx1NjI1M1x1NUYwMFx1NkU5MFx1NjU4N1x1NEVGNicpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU2MjdFXHU0RTBEXHU1MjMwXHU1MzlGXHU1OUNCXHU3QjE0XHU4QkIwJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICApO1xuICAvLyBcdTdGMTZcdThGOTFcdTUzNjFcdTcyNDdcbiAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgIGl0ZW1cbiAgICAgIC5zZXRUaXRsZSgnXHUyNzBGXHVGRTBGIFx1N0YxNlx1OEY5MVx1NTM2MVx1NzI0NycpXG4gICAgICAuc2V0SWNvbignZWRpdCcpXG4gICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgIHRoaXMuZWRpdEZsYXNoY2FyZChjYXJkKTtcbiAgICAgIH0pXG4gICk7XG5cbiAgbWVudS5hZGRTZXBhcmF0b3IoKTtcblxuICAvLyBcdTY3RTVcdTc3MEJcdTdFREZcdThCQTFcbiAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgIGl0ZW1cbiAgICAgIC5zZXRUaXRsZSgnXHVEODNEXHVEQ0NBIFx1NjdFNVx1NzcwQlx1N0VERlx1OEJBMScpXG4gICAgICAuc2V0SWNvbignYmFyLWNoYXJ0JylcbiAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgdGhpcy5wbHVnaW4uYWN0aXZhdGVTdGF0cygpO1xuICAgICAgfSlcbiAgKTtcblxuICBtZW51LmFkZFNlcGFyYXRvcigpO1xuXG4gIC8vIFx1NTIyMFx1OTY2NFx1NTM2MVx1NzI0N1xuICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgaXRlbVxuICAgICAgLnNldFRpdGxlKCdcdUQ4M0RcdURERDFcdUZFMEYgXHU1MjIwXHU5NjY0XHU1MzYxXHU3MjQ3JylcbiAgICAgIC5zZXRJY29uKCd0cmFzaCcpXG4gICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmIChjb25maXJtKCdcdTc4NkVcdTVCOUFcdTg5ODFcdTUyMjBcdTk2NjRcdThGRDlcdTVGMjBcdTk1RUFcdTUzNjFcdTU0MTdcdUZGMUYnKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlRmxhc2hjYXJkKGNhcmQuaWQpO1xuICAgICAgICB9XG4gICAgICB9KVxuICApO1xuXG4gIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XG59XG4gIC8qKlxuICAgKiBcdTUyMUJcdTVFRkFcdTcyNzlcdTVCOUFcdTdDN0JcdTU3OEJcdTc2ODRcdTk1RUFcdTUzNjFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlRmxhc2hjYXJkKHVuaXQ6IENvbnRlbnRVbml0LCB0eXBlOiAncWEnIHwgJ2Nsb3plJykge1xuICAgIGNvbnN0IG1vZGFsID0gbmV3IEZsYXNoY2FyZENyZWF0aW9uTW9kYWwoXG4gICAgICB0aGlzLmFwcCxcbiAgICAgIHVuaXQsXG4gICAgICB0eXBlLFxuICAgICAgYXN5bmMgKHF1ZXN0aW9uOiBzdHJpbmcsIGFuc3dlcjogc3RyaW5nKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHR5cGUgPT09ICdxYScpIHtcbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1OTVFRVx1N0I1NFx1NTM2MVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5jcmVhdGVRQUNhcmQoXG4gICAgICAgICAgICAgIHVuaXQuaWQsXG4gICAgICAgICAgICAgIHF1ZXN0aW9uLFxuICAgICAgICAgICAgICBhbnN3ZXJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1NTM2MSAtIFx1N0I4MFx1NTM1NVx1NTkwNFx1NzQwNlx1RkYwQ1x1NUMwNlx1NjU3NFx1NEUyQVx1N0I1NFx1Njg0OFx1NEY1Q1x1NEUzQVx1NEUwMFx1NEUyQVx1N0E3QVxuICAgICAgICAgICAgY29uc3QgZGVsZXRpb25zID0gW3tcbiAgICAgICAgICAgICAgaW5kZXg6IDAsXG4gICAgICAgICAgICAgIGFuc3dlcjogYW5zd2VyXG4gICAgICAgICAgICB9XTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuY3JlYXRlQ2xvemVDYXJkKFxuICAgICAgICAgICAgICB1bml0LmlkLFxuICAgICAgICAgICAgICBxdWVzdGlvbixcbiAgICAgICAgICAgICAgZGVsZXRpb25zXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBuZXcgTm90aWNlKGBcdTI3MDUgJHt0eXBlID09PSAncWEnID8gJ1FBJyA6ICdcdTU4NkJcdTdBN0EnfVx1OTVFQVx1NTM2MVx1NURGMlx1NTIxQlx1NUVGQWApO1xuICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGZsYXNoY2FyZDonLCBlcnJvcik7XG4gICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIFx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1NTkzMVx1OEQyNScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcblxuICAgIG1vZGFsLm9wZW4oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTU3MjhcdTdGMTZcdThGOTFcdTU2NjhcdTRFMkRcdTYyNTNcdTVGMDBcdTY1ODdcdTRFRjZcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgb3BlbkZpbGVJbkVkaXRvcihmaWxlUGF0aDogc3RyaW5nKSB7XG4gICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpLm9wZW5GaWxlKGZpbGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU2NUUwXHU2Q0Q1XHU2MjUzXHU1RjAwXHU2NTg3XHU0RUY2Jyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NTIyMFx1OTY2NFx1OTVFQVx1NTM2MVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBkZWxldGVGbGFzaGNhcmQoY2FyZElkOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5kZWxldGVDYXJkKGNhcmRJZCk7XG4gICAgICBuZXcgTm90aWNlKCdcdUQ4M0RcdURERDFcdUZFMEYgXHU5NUVBXHU1MzYxXHU1REYyXHU1MjIwXHU5NjY0Jyk7XG4gICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgZmxhc2hjYXJkOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBcdTUyMjBcdTk2NjRcdTk1RUFcdTUzNjFcdTU5MzFcdThEMjUnKTtcbiAgICB9XG4gIH1cbi8qKlxuICogXHU3RjE2XHU4RjkxXHU5NUVBXHU1MzYxXG4gKi9cbnByaXZhdGUgZWRpdEZsYXNoY2FyZChjYXJkOiBGbGFzaGNhcmQpIHtcbiAgY29uc3QgbW9kYWwgPSBuZXcgRmxhc2hjYXJkRWRpdE1vZGFsKFxuICAgIHRoaXMuYXBwLFxuICAgIGNhcmQsXG4gICAgYXN5bmMgKHF1ZXN0aW9uOiBzdHJpbmcsIGFuc3dlcjogc3RyaW5nKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTY2RjRcdTY1QjBcdTU0MEVcdTc2ODRcdTUzNjFcdTcyNDdcdTVCRjlcdThDNjFcbiAgICAgICAgY29uc3QgdXBkYXRlZENhcmQ6IEZsYXNoY2FyZCA9IHtcbiAgICAgICAgICAuLi5jYXJkLFxuICAgICAgICAgIGZyb250OiBxdWVzdGlvbixcbiAgICAgICAgICBiYWNrOiBjYXJkLnR5cGUgPT09ICdjbG96ZScgPyBbYW5zd2VyXSA6IGFuc3dlcixcbiAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgLi4uY2FyZC5tZXRhZGF0YSxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5QyB1cGRhdGVDYXJkIFx1NTNFQVx1NjNBNVx1NTNEN1x1NEUwMFx1NEUyQVx1NTNDMlx1NjU3MFxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLnVwZGF0ZUNhcmQodXBkYXRlZENhcmQpO1xuICAgICAgICBcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IFx1OTVFQVx1NTM2MVx1NURGMlx1NjZGNFx1NjVCMCcpO1xuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGZsYXNoY2FyZDonLCBlcnJvcik7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBcdTY2RjRcdTY1QjBcdTk1RUFcdTUzNjFcdTU5MzFcdThEMjUnKTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG4gIG1vZGFsLm9wZW4oKTtcbn1cbiAgLyoqXG4gICAqIFx1NjZGNFx1NjVCMFx1NjI3OVx1OTFDRlx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVCYXRjaEJ1dHRvbnMoKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXSBhcyBIVE1MRWxlbWVudDtcbiAgICBjb25zdCBiYXRjaEFjdGlvbnMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmJhdGNoLWFjdGlvbnMnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAoYmF0Y2hBY3Rpb25zKSB7XG4gICAgICBjb25zdCBzZWxlY3RBbGxCdG4gPSBiYXRjaEFjdGlvbnMucXVlcnlTZWxlY3RvcignLnNlbGVjdC1hbGwtYnRuJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBjb25zdCBkZWxldGVCdG4gPSBiYXRjaEFjdGlvbnMucXVlcnlTZWxlY3RvcignLmJhdGNoLWRlbGV0ZS1idG4nKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGNvbnN0IGNyZWF0ZUJ0biA9IGJhdGNoQWN0aW9ucy5xdWVyeVNlbGVjdG9yKCcuYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgXG4gICAgICBpZiAoc2VsZWN0QWxsQnRuKSB7XG4gICAgICAgIHNlbGVjdEFsbEJ0bi50ZXh0Q29udGVudCA9IHRoaXMuaXNBbGxTZWxlY3RlZCgpID8gJ1x1MjYxMSBcdTkwMDlcdTYyRTknIDogJ1x1MjYxMCBcdTUxNjhcdTkwMDknO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoZGVsZXRlQnRuKSB7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gdGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJyA/IHRoaXMuc2VsZWN0ZWRDYXJkSWRzLnNpemUgOiB0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplO1xuICAgICAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSBgXHVEODNEXHVEREQxXHVGRTBGIFx1NTIyMFx1OTY2NFx1OTAwOVx1NEUyRCAoJHtjb3VudH0pYDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGNyZWF0ZUJ0bikge1xuICAgICAgICBjcmVhdGVCdG4udGV4dENvbnRlbnQgPSBgXHUyNkExIFx1NjI3OVx1OTFDRlx1NTIzNlx1NTM2MSAoJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSlgO1xuICAgICAgfVxuICAgIH1cbiAgICAgIC8vIFx1NjZGNFx1NjVCMCBoZWFkZXIgXHU0RTJEXHU3Njg0XHU1MTY4XHU5MDA5XHU2MzA5XHU5NEFFXG4gIGNvbnN0IGhlYWRlclNlbGVjdEJ0biA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0LWFsbC1idG4taGVhZGVyJykgYXMgSFRNTEVsZW1lbnQ7XG4gIGlmIChoZWFkZXJTZWxlY3RCdG4pIHtcbiAgICBoZWFkZXJTZWxlY3RCdG4udGV4dENvbnRlbnQgPSB0aGlzLmlzQWxsU2VsZWN0ZWQoKSA/ICdcdTI2MTEgXHU5MDA5XHU2MkU5JyA6ICdcdTI2MTAgXHU1MTY4XHU5MDA5JztcbiAgfVxuICBcbiAgLy8gXHU2NkY0XHU2NUIwXHU0RkE3XHU4RkI5XHU2ODBGXHU0RTJEXHU3Njg0XHU1MTY4XHU5MDA5XHU2MzA5XHU5NEFFXG4gIGNvbnN0IHNpZGViYXJTZWxlY3RCdG4gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnNlbGVjdC1hbGwtYnRuLXNpZGViYXInKSBhcyBIVE1MRWxlbWVudDtcbiAgaWYgKHNpZGViYXJTZWxlY3RCdG4pIHtcbiAgICBzaWRlYmFyU2VsZWN0QnRuLnRleHRDb250ZW50ID0gdGhpcy5pc0FsbFNlbGVjdGVkKCkgPyAnXHUyNjExIFx1OTAwOVx1NjJFOScgOiAnXHUyNjEwIFx1NTE2OFx1OTAwOSc7XG4gIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYyNzlcdTkxQ0ZcdTUyMjBcdTk2NjRcdTk1RUFcdTUzNjFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgYmF0Y2hEZWxldGVGbGFzaGNhcmRzKCkge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkQ2FyZElkcy5zaXplID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU4OTgxXHU1MjIwXHU5NjY0XHU3Njg0XHU5NUVBXHU1MzYxJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFjb25maXJtKGBcdTc4NkVcdTVCOUFcdTg5ODFcdTUyMjBcdTk2NjRcdTkwMDlcdTRFMkRcdTc2ODQgJHt0aGlzLnNlbGVjdGVkQ2FyZElkcy5zaXplfSBcdTVGMjBcdTk1RUFcdTUzNjFcdTU0MTdcdUZGMUZgKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBzdWNjZXNzID0gMDtcbiAgICBsZXQgZmFpbGVkID0gMDtcblxuICAgIGZvciAoY29uc3QgY2FyZElkIG9mIHRoaXMuc2VsZWN0ZWRDYXJkSWRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmRlbGV0ZUNhcmQoY2FyZElkKTtcbiAgICAgICAgc3VjY2VzcysrO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgZmxhc2hjYXJkOicsIGVycm9yKTtcbiAgICAgICAgZmFpbGVkKys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuY2xlYXIoKTtcbiAgICBuZXcgTm90aWNlKGBcdTI3MDUgXHU1REYyXHU1MjIwXHU5NjY0ICR7c3VjY2Vzc30gXHU1RjIwXHU5NUVBXHU1MzYxJHtmYWlsZWQgPiAwID8gYFx1RkYwQyR7ZmFpbGVkfSBcdTVGMjBcdTU5MzFcdThEMjVgIDogJyd9YCk7XG4gICAgdGhpcy5yZWZyZXNoKCk7XG4gIH1cblxuLyoqXG4gKiBcdTYyNzlcdTkxQ0ZcdTUyMjBcdTk2NjRcdTdCMTRcdThCQjBcbiAqL1xucHJpdmF0ZSBhc3luYyBiYXRjaERlbGV0ZU5vdGVzKCkge1xuICBpZiAodGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZSA9PT0gMCkge1xuICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTg5ODFcdTUyMjBcdTk2NjRcdTc2ODRcdTdCMTRcdThCQjAnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoIWNvbmZpcm0oYFx1Nzg2RVx1NUI5QVx1ODk4MVx1NTIyMFx1OTY2NFx1OTAwOVx1NEUyRFx1NzY4NCAke3RoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemV9IFx1Njc2MVx1N0IxNFx1OEJCMFx1NTQxN1x1RkYxRmApKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IHN1Y2Nlc3MgPSAwO1xuICBsZXQgZmFpbGVkID0gMDtcblxuICBmb3IgKGNvbnN0IHVuaXRJZCBvZiB0aGlzLnNlbGVjdGVkVW5pdElkcykge1xuICAgIHRyeSB7XG4gICAgICAvLyBcdUQ4M0RcdUREMjcgXHU4M0I3XHU1M0Q2XHU3QjE0XHU4QkIwXG4gICAgICBjb25zdCB1bml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQodW5pdElkKTtcbiAgICAgIFxuICAgICAgaWYgKHVuaXQpIHtcbiAgICAgICAgLy8gXHVEODNEXHVERDI3IFx1NTE0OFx1NTIyMFx1OTY2NFx1NTE3M1x1ODA1NFx1NzY4NFx1OTVFQVx1NTM2MVxuICAgICAgICBpZiAodW5pdC5mbGFzaGNhcmRJZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGZvciAoY29uc3QgY2FyZElkIG9mIHVuaXQuZmxhc2hjYXJkSWRzKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmRlbGV0ZUNhcmQoY2FyZElkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHU1MThEXHU1MjIwXHU5NjY0XHU3QjE0XHU4QkIwXG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5kZWxldGVDb250ZW50VW5pdCh1bml0SWQpO1xuICAgICAgc3VjY2VzcysrO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBub3RlOicsIGVycm9yKTtcbiAgICAgIGZhaWxlZCsrO1xuICAgIH1cbiAgfVxuXG4gIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gIHRoaXMuYmF0Y2hNb2RlID0gZmFsc2U7XG4gIG5ldyBOb3RpY2UoYFx1MjcwNSBcdTVERjJcdTUyMjBcdTk2NjQgJHtzdWNjZXNzfSBcdTY3NjFcdTdCMTRcdThCQjAke2ZhaWxlZCA+IDAgPyBgXHVGRjBDJHtmYWlsZWR9IFx1Njc2MVx1NTkzMVx1OEQyNWAgOiAnJ31gKTtcbiAgdGhpcy5yZWZyZXNoKCk7XG59XG5cbiAgLyoqXG4gICAqIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NTE2OFx1OTAwOVxuICAgKi9cbiAgcHJpdmF0ZSBpc0FsbFNlbGVjdGVkKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHZpc2libGUgPSB0aGlzLmdldFZpc2libGVJdGVtcygpO1xuICAgIFxuICAgIGlmICh0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnKSB7XG4gICAgICBjb25zdCBjYXJkcyA9IHZpc2libGUuY2FyZHMgfHwgW107XG4gICAgICByZXR1cm4gY2FyZHMubGVuZ3RoID4gMCAmJiB0aGlzLnNlbGVjdGVkQ2FyZElkcy5zaXplID09PSBjYXJkcy5sZW5ndGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHVuaXRzID0gdmlzaWJsZS51bml0cyB8fCBbXTtcbiAgICAgIHJldHVybiB1bml0cy5sZW5ndGggPiAwICYmIHRoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemUgPT09IHVuaXRzLmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU1MjA3XHU2MzYyXHU1MTY4XHU5MDA5L1x1NTNENlx1NkQ4OFxuICAgKi9cbiAvKipcbiAqIFx1NTIwN1x1NjM2Mlx1NTE2OFx1OTAwOS9cdTUzRDZcdTZEODhcbiAqL1xuLyoqXG4gKiBcdTUxNjhcdTkwMDlcdTVGNTNcdTUyNERcdTUzRUZcdTg5QzFcdTk4NzlcbiAqL1xucHJpdmF0ZSB0b2dnbGVTZWxlY3RBbGwoKSB7XG4gIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW3RvZ2dsZVNlbGVjdEFsbF0gPT09PT09PT09PSBcdTVGMDBcdTU5Q0JcdTYyNjdcdTg4NEMgPT09PT09PT09PScpO1xuICBcbiAgY29uc3QgdmlzaWJsZSA9IHRoaXMuZ2V0VmlzaWJsZUl0ZW1zKCk7XG4gIFxuICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgIGNvbnN0IGNhcmRzID0gdmlzaWJsZS5jYXJkcyB8fCBbXTtcbiAgICBcbiAgICBpZiAoY2FyZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU2Q0ExXHU2NzA5XHU1M0VGXHU5MDA5XHU2MkU5XHU3Njg0XHU5NUVBXHU1MzYxJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIFx1RDgzRFx1REQyNyBcdTY1MzlcdTRFM0FcdUZGMUFcdTUzRUFcdTYyNjdcdTg4NENcdTUxNjhcdTkwMDlcdUZGMENcdTRFMERcdTUwNUFcdTUzRDZcdTZEODhcbiAgICBjYXJkcy5mb3JFYWNoKGNhcmQgPT4gdGhpcy5zZWxlY3RlZENhcmRJZHMuYWRkKGNhcmQuaWQpKTtcbiAgICBcbiAgfSBlbHNlIHtcbiAgICBjb25zdCB1bml0cyA9IHZpc2libGUudW5pdHMgfHwgW107XG4gICAgXG4gICAgaWYgKHVuaXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgaWYgKHRoaXMuZGlzcGxheU1vZGUgPT09ICdzaWRlYmFyJyAmJiAodGhpcy5ncm91cE1vZGUgPT09ICd0YWcnIHx8IHRoaXMuZ3JvdXBNb2RlID09PSAnZGF0ZScpKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdTZDQTFcdTY3MDlcdTUzRUZcdTkwMDlcdTYyRTlcdTc2ODRcdTdCMTRcdThCQjAnKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdhbm5vdGF0aW9uJyAmJiAhdGhpcy5zZWxlY3RlZEZpbGUpIHtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1OEJGN1x1NTE0OFx1OTAwOVx1NjJFOVwiXHU2NzA5XHU2Mjc5XHU2Q0U4XCJcdTYyMTZcIlx1NjVFMFx1NjI3OVx1NkNFOFwiXHU1MjA2XHU3RUM0Jyk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZGlzcGxheU1vZGUgPT09ICdtYWluJyAmJiAhdGhpcy5zZWxlY3RlZEZpbGUpIHtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1OEJGN1x1NTE0OFx1OTAwOVx1NjJFOVx1NEUwMFx1NEUyQVx1NTIwNlx1N0VDNCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1NkNBMVx1NjcwOVx1NTNFRlx1OTAwOVx1NjJFOVx1NzY4NFx1N0IxNFx1OEJCMCcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdUQ4M0RcdUREMjcgXHU2NTM5XHU0RTNBXHVGRjFBXHU1M0VBXHU2MjY3XHU4ODRDXHU1MTY4XHU5MDA5XHVGRjBDXHU0RTBEXHU1MDVBXHU1M0Q2XHU2RDg4XG4gICAgdW5pdHMuZm9yRWFjaCh1bml0ID0+IHRoaXMuc2VsZWN0ZWRVbml0SWRzLmFkZCh1bml0LmlkKSk7XG4gIH1cbiAgXG4gIHRoaXMuYmF0Y2hNb2RlID0gdHJ1ZTtcbiAgdGhpcy5yZW5kZXIoKTtcbn1cblxuLyoqXG4gKiBcdTUzRDZcdTZEODhcdTUxNjhcdTkwMDlcdUZGMDhcdTRFQzVcdTUzRDZcdTZEODhcdTUxNjhcdTkwMDlcdTcyQjZcdTYwMDFcdUZGMENcdTRGRERcdTYzMDFcdTYyNzlcdTkxQ0ZcdTZBMjFcdTVGMEZcdUZGMDlcbiAqL1xucHJpdmF0ZSBjYW5jZWxTZWxlY3RBbGwoKSB7XG4gIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NTNFRlx1ODlDMVx1NzY4NFx1NjI0MFx1NjcwOVx1OTg3OVxuICBjb25zdCB2aXNpYmxlID0gdGhpcy5nZXRWaXNpYmxlSXRlbXMoKTtcbiAgXG4gIGlmICh0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnKSB7XG4gICAgY29uc3QgY2FyZHMgPSB2aXNpYmxlLmNhcmRzIHx8IFtdO1xuICAgIC8vIFx1NEVDRVx1OTAwOVx1NEUyRFx1OTZDNlx1NTQwOFx1NEUyRFx1NzlGQlx1OTY2NFx1NUY1M1x1NTI0RFx1NTNFRlx1ODlDMVx1NzY4NFx1NjI0MFx1NjcwOVx1NTM2MVx1NzI0N1xuICAgIGNhcmRzLmZvckVhY2goY2FyZCA9PiB0aGlzLnNlbGVjdGVkQ2FyZElkcy5kZWxldGUoY2FyZC5pZCkpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHVuaXRzID0gdmlzaWJsZS51bml0cyB8fCBbXTtcbiAgICAvLyBcdTRFQ0VcdTkwMDlcdTRFMkRcdTk2QzZcdTU0MDhcdTRFMkRcdTc5RkJcdTk2NjRcdTVGNTNcdTUyNERcdTUzRUZcdTg5QzFcdTc2ODRcdTYyNDBcdTY3MDlcdTdCMTRcdThCQjBcbiAgICB1bml0cy5mb3JFYWNoKHVuaXQgPT4gdGhpcy5zZWxlY3RlZFVuaXRJZHMuZGVsZXRlKHVuaXQuaWQpKTtcbiAgfVxuICBcbiAgLy8gXHVEODNEXHVERDI3IFx1NTE3M1x1OTUyRVx1NEZFRVx1NjUzOVx1RkYxQVx1NEUwRFx1OTAwMFx1NTFGQVx1NjI3OVx1OTFDRlx1NkEyMVx1NUYwRlx1RkYwQ1x1NTM3M1x1NEY3Rlx1OTAwOVx1NEUyRFx1NjU3MFx1NEUzQTBcbiAgLy8gXHU0RkREXHU2MzAxIGJhdGNoTW9kZSA9IHRydWVcdUZGMENcdThCQTlcdTc1MjhcdTYyMzdcdTUzRUZcdTRFRTVcdTdFRTdcdTdFRURcdTYyNEJcdTUyQThcdTkwMDlcdTYyRTlcbiAgXG4gIHRoaXMucmVuZGVyKCk7XG59XG4gIC8qKlxuICogXHU4MUVBXHU1MkE4XHU1MTY4XHU5MDA5XHU1RjUzXHU1MjREXHU1M0VGXHU4OUMxXHU5ODc5XHU3NkVFXG4gKi9cbiAgcHJpdmF0ZSBhdXRvU2VsZWN0QWxsKCkge1xuICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuY2xlYXIoKTtcbiAgICBcbiAgICBjb25zdCB2aXNpYmxlID0gdGhpcy5nZXRWaXNpYmxlSXRlbXMoKTtcbiAgICBcbiAgICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgICAgY29uc3QgY2FyZHMgPSB2aXNpYmxlLmNhcmRzIHx8IFtdO1xuICAgICAgY2FyZHMuZm9yRWFjaChjYXJkID0+IHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmFkZChjYXJkLmlkKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHVuaXRzID0gdmlzaWJsZS51bml0cyB8fCBbXTtcbiAgICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB0aGlzLnNlbGVjdGVkVW5pdElkcy5hZGQodW5pdC5pZCkpO1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZSA+IDAgfHwgdGhpcy5zZWxlY3RlZENhcmRJZHMuc2l6ZSA+IDApIHtcbiAgICAgIHRoaXMuYmF0Y2hNb2RlID0gdHJ1ZTtcbiAgICB9XG4gIH1cbi8qKlxuICogXHU2RTA1XHU5NjY0XHU2MjQwXHU2NzA5XHU5MDA5XHU2MkU5XG4gKi9cbnByaXZhdGUgY2xlYXJTZWxlY3Rpb24oKSB7XG4gIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gIHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmNsZWFyKCk7XG4gIHRoaXMuYmF0Y2hNb2RlID0gZmFsc2U7XG4gIHRoaXMucmVuZGVyKCk7XG59XG4gIC8qKlxuICAgKiBcdTY2RjRcdTY1QjBcdTYyNDBcdTY3MDljaGVja2JveFx1NzJCNlx1NjAwMVxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVDaGVja2JveGVzKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgY2hlY2tib3hlcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuYmF0Y2gtY2hlY2tib3gnKSBhcyBOb2RlTGlzdE9mPEhUTUxJbnB1dEVsZW1lbnQ+O1xuICAgIFxuICAgIGNoZWNrYm94ZXMuZm9yRWFjaChjaGVja2JveCA9PiB7XG4gICAgICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgICAgICBjb25zdCBjYXJkSWQgPSBjaGVja2JveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FyZC1pZCcpO1xuICAgICAgICBpZiAoY2FyZElkKSB7XG4gICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmhhcyhjYXJkSWQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB1bml0SWQgPSBjaGVja2JveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdW5pdC1pZCcpO1xuICAgICAgICBpZiAodW5pdElkKSB7XG4gICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRoaXMuc2VsZWN0ZWRVbml0SWRzLmhhcyh1bml0SWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogXHU2Mjc5XHU5MUNGXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGJhdGNoQ3JlYXRlRmxhc2hjYXJkcygpIHtcbiAgICBpZiAodGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZSA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1OEJGN1x1NTE0OFx1OTAwOVx1NjJFOVx1ODk4MVx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1NzY4NFx1N0IxNFx1OEJCMCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHVuaXRzID0gQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkVW5pdElkcylcbiAgICAgIC5tYXAoaWQgPT4gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoaWQpKVxuICAgICAgLmZpbHRlcih1ID0+IHUgIT09IHVuZGVmaW5lZCAmJiB1LmZsYXNoY2FyZElkcy5sZW5ndGggPT09IDApIGFzIENvbnRlbnRVbml0W107XG5cbiAgICBpZiAodW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU5MDA5XHU0RTJEXHU3Njg0XHU3QjE0XHU4QkIwXHU5MEZEXHU1REYyXHU1MjFCXHU1RUZBXHU4RkM3XHU5NUVBXHU1MzYxJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU5MDA5XHU2MkU5XHU3QzdCXHU1NzhCXHU3Njg0XHU2QTIxXHU2MDAxXHU2ODQ2XG4gICAgY29uc3QgeyBCYXRjaENyZWF0ZU1vZGFsIH0gPSBhd2FpdCBpbXBvcnQoJy4vT3ZlcnZpZXdWaWV3Jyk7XG4gICAgY29uc3QgcXVpY2tDcmVhdG9yID0gbmV3IFF1aWNrRmxhc2hjYXJkQ3JlYXRvcih0aGlzLnBsdWdpbik7XG4gICAgY29uc3QgbW9kYWwgPSBuZXcgQmF0Y2hDcmVhdGVNb2RhbChcbiAgICAgIHRoaXMuYXBwLFxuICAgICAgdGhpcy5wbHVnaW4sXG4gICAgICBxdWlja0NyZWF0b3IsXG4gICAgICB1bml0cyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICB9XG4gICAgKTtcbiAgICBtb2RhbC5vcGVuKCk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTVERTVcdTUxNzdcdTY1QjlcdTZDRDUgPT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU4RkM3XHU2RUU0XHU1NDBFXHU3Njg0XHU1MTg1XHU1QkI5XHU1MzU1XHU1MTQzXG4gICAqL1xuICBwcml2YXRlIGdldEZpbHRlcmVkVW5pdHMoKTogQ29udGVudFVuaXRbXSB7XG4gICAgbGV0IHVuaXRzID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0QWxsQ29udGVudFVuaXRzKCk7XG5cbiAgICAvLyBcdTY0MUNcdTdEMjJcdThGQzdcdTZFRTRcbiAgICBpZiAodGhpcy5zZWFyY2hRdWVyeSkge1xuICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLnNlYXJjaFF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+XG4gICAgICAgIHVuaXQuY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSB8fFxuICAgICAgICB1bml0LnNvdXJjZS5maWxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5zb21lKHRhZyA9PiB0YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkpXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFx1N0M3Qlx1NTc4Qlx1OEZDN1x1NkVFNFxuICAgIGlmICh0aGlzLmZpbHRlck1vZGUgPT09ICdhbm5vdGF0ZWQnKSB7XG4gICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1ID0+IHUuYW5ub3RhdGlvbklkKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZmlsdGVyTW9kZSA9PT0gJ2ZsYXNoY2FyZHMnKSB7XG4gICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1ID0+IHUuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApO1xuICAgIH1cblxuICAgIHJldHVybiB1bml0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTUyMDZcdTdFQzRcdTUxODVcdTVCQjlcdTUzNTVcdTUxNDNcbiAgICovXG4gIHByaXZhdGUgZ3JvdXBVbml0cyh1bml0czogQ29udGVudFVuaXRbXSk6IEFycmF5PHsgZ3JvdXBLZXk6IHN0cmluZzsgdW5pdHM6IENvbnRlbnRVbml0W10gfT4ge1xuICAgIGNvbnN0IGdyb3VwZWQgPSBuZXcgTWFwPHN0cmluZywgQ29udGVudFVuaXRbXT4oKTtcblxuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICBsZXQga2V5OiBzdHJpbmc7XG5cbiAgICAgIHN3aXRjaCAodGhpcy5ncm91cE1vZGUpIHtcbiAgICAgICAgY2FzZSAnZmlsZSc6XG4gICAgICAgICAga2V5ID0gdW5pdC5zb3VyY2UuZmlsZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdhbm5vdGF0aW9uJzpcbiAgLy8gXHU2MzA5XHU2NjJGXHU1NDI2XHU2NzA5XHU2Mjc5XHU2Q0U4XHU1MjA2XHU3RUM0XG4gIGNvbnN0IGhhc0Fubm90YXRpb24gPSB1bml0LmFubm90YXRpb25JZCA/ICdcdTY3MDlcdTYyNzlcdTZDRTgnIDogJ1x1NjVFMFx1NjI3OVx1NkNFOCc7XG4gIGlmICghZ3JvdXBlZC5oYXMoaGFzQW5ub3RhdGlvbikpIGdyb3VwZWQuc2V0KGhhc0Fubm90YXRpb24sIFtdKTtcbiAgZ3JvdXBlZC5nZXQoaGFzQW5ub3RhdGlvbikhLnB1c2godW5pdCk7XG4gIHJldHVybjtcbiAgICAgICAgY2FzZSAndGFnJzpcbiAgICAgICAgICB1bml0Lm1ldGFkYXRhLnRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICAgICAgaWYgKCFncm91cGVkLmhhcyh0YWcpKSBncm91cGVkLnNldCh0YWcsIFtdKTtcbiAgICAgICAgICAgIGdyb3VwZWQuZ2V0KHRhZykhLnB1c2godW5pdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICBrZXkgPSB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUodW5pdC5tZXRhZGF0YS5jcmVhdGVkQXQpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBrZXkgPSAnXHU2NzJBXHU1MjA2XHU3RUM0JztcbiAgICAgIH1cblxuICAgICAgaWYgKCFncm91cGVkLmhhcyhrZXkpKSBncm91cGVkLnNldChrZXksIFtdKTtcbiAgICAgIGdyb3VwZWQuZ2V0KGtleSkhLnB1c2godW5pdCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gQXJyYXkuZnJvbShncm91cGVkLmVudHJpZXMoKSlcbiAgICAubWFwKChbZ3JvdXBLZXksIHVuaXRzXSkgPT4gKHsgZ3JvdXBLZXksIHVuaXRzIH0pKVxuICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRlx1NjI3OVx1NkNFOFx1NTIwNlx1N0VDNFx1RkYwQ1wiXHU2NzA5XHU2Mjc5XHU2Q0U4XCJcdTYzOTJcdTU3MjhcdTUyNERcdTk3NjJcbiAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnYW5ub3RhdGlvbicpIHtcbiAgICBpZiAoYS5ncm91cEtleSA9PT0gJ1x1NjcwOVx1NjI3OVx1NkNFOCcpIHJldHVybiAtMTtcbiAgICBpZiAoYi5ncm91cEtleSA9PT0gJ1x1NjcwOVx1NjI3OVx1NkNFOCcpIHJldHVybiAxO1xuICAgIHJldHVybiAwO1xuICB9XG4gICAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTY1RTVcdTY3MUZcdTUyMDZcdTdFQzRcdUZGMENcdTYzMDlcdTY1RTVcdTY3MUZcdTk2NERcdTVFOEZcdTYzOTJcdTUyMTdcbiAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgIHJldHVybiBiLmdyb3VwS2V5LmxvY2FsZUNvbXBhcmUoYS5ncm91cEtleSk7IC8vIFx1NjVFNVx1NjcxRlx1NUI1N1x1N0IyNlx1NEUzMlx1OTY0RFx1NUU4RlxuICAgICAgfVxuICAgICAgLy8gXHU1MTc2XHU0RUQ2XHU1MjA2XHU3RUM0XHU2MzA5XHU2NTcwXHU5MUNGXHU5NjREXHU1RThGXG4gICAgICByZXR1cm4gYi51bml0cy5sZW5ndGggLSBhLnVuaXRzLmxlbmd0aDtcbiAgICB9KTtcbiAgfVxuLyoqXG4gKiBcdTUyMDZcdTdFQzRcdTk1RUFcdTUzNjFcdUZGMDhcdTdDN0JcdTRGM0MgZ3JvdXBVbml0c1x1RkYwOVxuICovXG5wcml2YXRlIGdyb3VwRmxhc2hjYXJkcyhmbGFzaGNhcmRzOiBGbGFzaGNhcmRbXSk6IEFycmF5PHsgZ3JvdXBLZXk6IHN0cmluZzsgY2FyZHM6IEZsYXNoY2FyZFtdIH0+IHtcbiAgY29uc3QgZ3JvdXBlZCA9IG5ldyBNYXA8c3RyaW5nLCBGbGFzaGNhcmRbXT4oKTtcblxuICBmbGFzaGNhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgbGV0IGtleXM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgLy8gXHU4M0I3XHU1M0Q2XHU1MTczXHU4MDU0XHU3Njg0XHU3QjE0XHU4QkIwXHU1MzU1XHU1MTQzXG4gICAgY29uc3QgdW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNhcmQuc291cmNlQ29udGVudElkKTtcblxuICAgIHN3aXRjaCAodGhpcy5ncm91cE1vZGUpIHtcbiAgICAgIGNhc2UgJ2ZpbGUnOlxuICAgICAgICBrZXlzID0gW2NhcmQuc291cmNlRmlsZV07XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdhbm5vdGF0aW9uJzpcbiAgICAgICAgLy8gXHUyNzA1IFx1NTIyMFx1OTY2NFx1OEZEOVx1ODg0Q1x1OTFDRFx1NTkwRFx1NThGMFx1NjYwRVxuICAgICAgICAvLyBjb25zdCB1bml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY2FyZC5zb3VyY2VDb250ZW50SWQpO1xuICAgICAgICBpZiAodW5pdCAmJiB1bml0LmFubm90YXRpb25JZCkge1xuICAgICAgICAgIGtleXMgPSBbJ1x1NjcwOVx1NjI3OVx1NkNFOCddO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGtleXMgPSBbJ1x1NjVFMFx1NjI3OVx1NkNFOCddO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgXG4gICAgICBjYXNlICd0YWcnOlxuICAgICAgICAvLyBcdTRGMThcdTUxNDhcdTRGN0ZcdTc1MjhcdTdCMTRcdThCQjBcdTUzNTVcdTUxNDNcdTc2ODRcdTY4MDdcdTdCN0VcbiAgICAgICAgaWYgKHVuaXQgJiYgdW5pdC5tZXRhZGF0YS50YWdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBrZXlzID0gdW5pdC5tZXRhZGF0YS50YWdzO1xuICAgICAgICB9ICAgXG4gICAgICAgIC8vIFx1NTE3Nlx1NkIyMVx1NEY3Rlx1NzUyOFx1NTM2MVx1NzI0N1x1ODFFQVx1NURGMVx1NzY4NFx1NjgwN1x1N0I3RVxuICAgICAgICBlbHNlIGlmIChjYXJkLnRhZ3MgJiYgY2FyZC50YWdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBrZXlzID0gY2FyZC50YWdzO1xuICAgICAgICB9IFxuICAgICAgICAvLyBcdTY3MDBcdTU0MEVcdTRGN0ZcdTc1MjggZGVjayBcdTRGNUNcdTRFM0FcdTY4MDdcdTdCN0VcbiAgICAgICAgZWxzZSBpZiAoY2FyZC5kZWNrKSB7XG4gICAgICAgICAga2V5cyA9IFtjYXJkLmRlY2tdO1xuICAgICAgICB9XG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1OTBGRFx1NkNBMVx1NjcwOVx1RkYwQ1x1NjUzRVx1NTE2NVwiXHU2NzJBXHU1MjA2XHU3QzdCXCJcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAga2V5cyA9IFsnXHU2NzJBXHU1MjA2XHU3QzdCJ107XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgIGtleXMgPSBbdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKGNhcmQubWV0YWRhdGEuY3JlYXRlZEF0KSldO1xuICAgICAgICBicmVhaztcbiAgICAgICAgXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBrZXlzID0gWydcdTY3MkFcdTUyMDZcdTdFQzQnXTtcbiAgICB9XG5cbiAgICAvLyBcdTVDMDZcdTUzNjFcdTcyNDdcdTZERkJcdTUyQTBcdTUyMzBcdTYyNDBcdTY3MDlcdTUzMzlcdTkxNERcdTc2ODRcdTUyMDZcdTdFQzRcdTRFMkRcbiAgICBrZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGlmICghZ3JvdXBlZC5oYXMoa2V5KSkge1xuICAgICAgICBncm91cGVkLnNldChrZXksIFtdKTtcbiAgICAgIH1cbiAgICAgIGdyb3VwZWQuZ2V0KGtleSkhLnB1c2goY2FyZCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIFx1OEY2Q1x1NjM2Mlx1NEUzQVx1NjU3MFx1N0VDNFx1NUU3Nlx1NjM5Mlx1NUU4RlxuICBjb25zdCByZXN1bHQgPSBBcnJheS5mcm9tKGdyb3VwZWQuZW50cmllcygpKVxuICAgIC5tYXAoKFtncm91cEtleSwgY2FyZHNdKSA9PiAoeyBncm91cEtleSwgY2FyZHMgfSkpXG4gICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRlx1NjI3OVx1NkNFOFx1NTIwNlx1N0VDNFx1RkYwQ1wiXHU2NzA5XHU2Mjc5XHU2Q0U4XCJcdTYzOTJcdTU3MjhcdTUyNERcdTk3NjJcbiAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2Fubm90YXRpb24nKSB7XG4gICAgICAgIGlmIChhLmdyb3VwS2V5ID09PSAnXHU2NzA5XHU2Mjc5XHU2Q0U4JykgcmV0dXJuIC0xO1xuICAgICAgICBpZiAoYi5ncm91cEtleSA9PT0gJ1x1NjcwOVx1NjI3OVx1NkNFOCcpIHJldHVybiAxO1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cblxuICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2NjJGXHU2NUU1XHU2NzFGXHU1MjA2XHU3RUM0XHVGRjBDXHU2MzA5XHU2NUU1XHU2NzFGXHU5NjREXHU1RThGXHU2MzkyXHU1MjE3XG4gICAgICBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdkYXRlJykge1xuICAgICAgICByZXR1cm4gYi5ncm91cEtleS5sb2NhbGVDb21wYXJlKGEuZ3JvdXBLZXkpO1xuICAgICAgfVxuICAgICAgLy8gXHU1MTc2XHU0RUQ2XHU1MjA2XHU3RUM0XHU2MzA5XHU2NTcwXHU5MUNGXHU5NjREXHU1RThGXG4gICAgICByZXR1cm4gYi5jYXJkcy5sZW5ndGggLSBhLmNhcmRzLmxlbmd0aDtcbiAgICB9KTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU3RURGXHU4QkExXHU0RkUxXHU2MDZGXG4gICAqL1xuICBwcml2YXRlIGdldEZpbHRlcmVkU3RhdHMoKSB7XG4gICAgY29uc3QgdW5pdHMgPSB0aGlzLmdldEZpbHRlcmVkVW5pdHMoKTtcbiAgICByZXR1cm4ge1xuICAgICAgY291bnQ6IHVuaXRzLmxlbmd0aCxcbiAgICAgIHdpdGhBbm5vdGF0aW9uczogdW5pdHMuZmlsdGVyKHUgPT4gdS5hbm5vdGF0aW9uSWQpLmxlbmd0aCxcbiAgICAgIHdpdGhGbGFzaGNhcmRzOiB1bml0cy5maWx0ZXIodSA9PiB1LmZsYXNoY2FyZElkcy5sZW5ndGggPiAwKS5sZW5ndGhcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjgzQ1x1NUYwRlx1NTMxNlx1NjVFNVx1NjcxRlxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXREYXRlKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnemgtQ04nLCB7XG4gICAgICB5ZWFyOiAnbnVtZXJpYycsXG4gICAgICBtb250aDogJzItZGlnaXQnLFxuICAgICAgZGF5OiAnMi1kaWdpdCdcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTUyMDZcdTdFQzRcdTU2RkVcdTY4MDdcbiAgICovXG4gIHByaXZhdGUgZ2V0R3JvdXBJY29uKG1vZGU6IEdyb3VwTW9kZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICBjYXNlICdmaWxlJzogcmV0dXJuICdcdUQ4M0RcdURDQzQnO1xuICAgICAgY2FzZSAnYW5ub3RhdGlvbic6IHJldHVybiAnXHVEODNEXHVEQ0FDJztcbiAgICAgIGNhc2UgJ3RhZyc6IHJldHVybiAnXHVEODNDXHVERkY3XHVGRTBGJztcbiAgICAgIGNhc2UgJ2RhdGUnOiByZXR1cm4gJ1x1RDgzRFx1RENDNSc7XG4gICAgICBkZWZhdWx0OiByZXR1cm4gJ1x1RDgzRFx1RENDMSc7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gKiBcdTUyMUJcdTVFRkFcdTUxNjhcdTkwMDlcdTYzMDlcdTk0QUVcdUZGMDhcdTdFREZcdTRFMDBcdTY4MzdcdTVGMEZcdTU0OENcdTg4NENcdTRFM0FcdUZGMDlcbiAqL1xuICBwcml2YXRlIGNyZWF0ZVNlbGVjdEFsbEJ1dHRvbihjb250YWluZXI6IEhUTUxFbGVtZW50LCBzdHlsZUNsYXNzOiAnc2lkZWJhcicgfCAnaGVhZGVyJyk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBidG5DbGFzcyA9IHN0eWxlQ2xhc3MgPT09ICdzaWRlYmFyJyBcbiAgICAgID8gJ3NlbGVjdC1hbGwtYnRuLXNpZGViYXInIFxuICAgICAgOiAnc2VsZWN0LWFsbC1idG4taGVhZGVyJztcbiAgICBcbiAgICBjb25zdCBpc0FsbENoZWNrZWQgPSB0aGlzLmlzQWxsU2VsZWN0ZWQoKTtcbiAgICBjb25zdCB2aXNpYmxlID0gdGhpcy5nZXRWaXNpYmxlSXRlbXMoKTtcbiAgICBcbiAgICBjb25zdCBpdGVtQ291bnQgPSB0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnIFxuICAgICAgPyAodmlzaWJsZS5jYXJkcz8ubGVuZ3RoIHx8IDApIFxuICAgICAgOiAodmlzaWJsZS51bml0cz8ubGVuZ3RoIHx8IDApO1xuICAgIFxuICAgIC8vIFx1RDgzRFx1REQyNyBcdTRGRUVcdTY1MzlcdTYzMDlcdTk0QUVcdTY1ODdcdTY3MkNcdTkwM0JcdThGOTFcbiAgICBjb25zdCBzZWxlY3RBbGxCdG4gPSBjb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6IGlzQWxsQ2hlY2tlZCA/ICdcdTI3MTMgXHU1M0Q2XHU2RDg4XHU1MTY4XHU5MDA5JyA6ICdcdTI2MTAgXHU1MTY4XHU5MDA5JywgIC8vIFx1NjUzOVx1NEUzQVwiXHU1M0Q2XHU2RDg4XHU1MTY4XHU5MDA5XCJcbiAgICAgIGNsczogYCR7YnRuQ2xhc3N9ICR7aXNBbGxDaGVja2VkID8gJ2NvbXBsZXRlZCcgOiAnJ31gLFxuICAgICAgdGl0bGU6IGlzQWxsQ2hlY2tlZCA/ICdcdTUzRDZcdTZEODhcdTVGNTNcdTUyNERcdTk4NzVcdTk3NjJcdTc2ODRcdTUxNjhcdTkwMDknIDogYFx1NTE2OFx1OTAwOVx1NUY1M1x1NTI0RCAke2l0ZW1Db3VudH0gXHU5ODc5YFxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IHNob3VsZERpc2FibGUgPSAoXG4gICAgICBpdGVtQ291bnQgPT09IDAgfHxcbiAgICAgICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2Fubm90YXRpb24nICYmIHRoaXMuZGlzcGxheU1vZGUgPT09ICdtYWluJyAmJiAhdGhpcy5zZWxlY3RlZEZpbGUpXG4gICAgKTtcbiAgICBcbiAgICBpZiAoc2hvdWxkRGlzYWJsZSkge1xuICAgICAgc2VsZWN0QWxsQnRuLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHNlbGVjdEFsbEJ0bi5zdHlsZS5vcGFjaXR5ID0gJzAuNSc7XG4gICAgICBzZWxlY3RBbGxCdG4uc3R5bGUuY3Vyc29yID0gJ25vdC1hbGxvd2VkJztcbiAgICAgIHNlbGVjdEFsbEJ0bi50aXRsZSA9IGl0ZW1Db3VudCA9PT0gMCBcbiAgICAgICAgPyAnXHU2Q0ExXHU2NzA5XHU1M0VGXHU5MDA5XHU5ODc5JyBcbiAgICAgICAgOiAnXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XCJcdTY3MDlcdTYyNzlcdTZDRThcIlx1NjIxNlwiXHU2NUUwXHU2Mjc5XHU2Q0U4XCInO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdUQ4M0RcdUREMjcgXHU0RkVFXHU2NTM5XHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XG4gICAgc2VsZWN0QWxsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaWYgKGlzQWxsQ2hlY2tlZCkge1xuICAgICAgICB0aGlzLmNhbmNlbFNlbGVjdEFsbCgpOyAgLy8gXHU1OTgyXHU2NzlDXHU1REYyXHU1MTY4XHU5MDA5XHVGRjBDXHU2MjY3XHU4ODRDXHU1M0Q2XHU2RDg4XHU1MTY4XHU5MDA5XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnRvZ2dsZVNlbGVjdEFsbCgpOyAgLy8gXHU1NDI2XHU1MjE5XHU2MjY3XHU4ODRDXHU1MTY4XHU5MDA5XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHNlbGVjdEFsbEJ0bjtcbiAgfVxuLyoqXG4gKiBcdTUyMUJcdTVFRkFcdTYyNzlcdTkxQ0ZcdTY0Q0RcdTRGNUNcdTYzMDlcdTk0QUVcdTdFQzRcdUZGMDhcdTUyMzZcdTUzNjFcdTMwMDFcdTUyMjBcdTk2NjRcdTMwMDFcdTUzRDZcdTZEODhcdUZGMDlcbiAqL1xucHJpdmF0ZSBjcmVhdGVCYXRjaEFjdGlvbkJ1dHRvbnMoXG4gIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIFxuICBzdHlsZUNsYXNzOiAnc2lkZWJhcicgfCAnaGVhZGVyJ1xuKTogdm9pZCB7XG4gIGlmICghdGhpcy5iYXRjaE1vZGUpIHJldHVybjtcbiAgXG4gIGNvbnN0IGJ0blByZWZpeCA9IHN0eWxlQ2xhc3MgPT09ICdzaWRlYmFyJyA/ICdzaWRlYmFyJyA6ICdoZWFkZXInO1xuICBcbiAgLy8gXHU1MjM2XHU1MzYxXHU2MzA5XHU5NEFFXHVGRjA4XHU0RUM1XHU3QjE0XHU4QkIwXHU4OUM2XHU1NkZFXHVGRjA5XG4gIGlmICh0aGlzLnZpZXdUeXBlID09PSAnbm90ZXMnKSB7XG4gICAgY29uc3QgY3JlYXRlQnRuID0gY29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiBzdHlsZUNsYXNzID09PSAnc2lkZWJhcicgXG4gICAgICAgID8gYFx1MjZBMSgke3RoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemV9KWAgXG4gICAgICAgIDogYFx1MjZBMSBcdTYyNzlcdTkxQ0ZcdTUyMzZcdTUzNjEgKCR7dGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZX0pYCxcbiAgICAgIGNsczogYGJhdGNoLWNyZWF0ZS1jYXJkcy1idG4tJHtidG5QcmVmaXh9YCxcbiAgICAgIHRpdGxlOiAnXHU2Mjc5XHU5MUNGXHU1MjM2XHU1MzYxJ1xuICAgIH0pO1xuICAgIGNyZWF0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplID09PSAwKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTg5ODFcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcdTc2ODRcdTdCMTRcdThCQjAnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5iYXRjaENyZWF0ZUZsYXNoY2FyZHMoKTtcbiAgICB9KTtcbiAgfVxuICBcbiAgLy8gXHU1MjIwXHU5NjY0XHU2MzA5XHU5NEFFXG4gIGNvbnN0IGNvdW50ID0gdGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJyBcbiAgICA/IHRoaXMuc2VsZWN0ZWRDYXJkSWRzLnNpemUgXG4gICAgOiB0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplO1xuICBcbiAgY29uc3QgZGVsZXRlQnRuID0gY29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgdGV4dDogc3R5bGVDbGFzcyA9PT0gJ3NpZGViYXInIFxuICAgICAgPyBgXHVEODNEXHVEREQxXHVGRTBGKCR7Y291bnR9KWAgXG4gICAgICA6IGBcdUQ4M0RcdURERDFcdUZFMEYgXHU1MjIwXHU5NjY0ICgke2NvdW50fSlgLFxuICAgIGNsczogYGJhdGNoLWRlbGV0ZS1idG4tJHtidG5QcmVmaXh9YCxcbiAgICB0aXRsZTogJ1x1NjI3OVx1OTFDRlx1NTIyMFx1OTY2NCdcbiAgfSk7XG4gIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTg5ODFcdTUyMjBcdTk2NjRcdTc2ODRcdTk4NzlcdTc2RUUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMudmlld1R5cGUgPT09ICdjYXJkcycpIHtcbiAgICAgIHRoaXMuYmF0Y2hEZWxldGVGbGFzaGNhcmRzKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYmF0Y2hEZWxldGVOb3RlcygpO1xuICAgIH1cbiAgfSk7XG4gIFxuLy8gXHU1M0Q2XHU2RDg4XHU2MzA5XHU5NEFFXHVGRjA4XHU1QjhDXHU1MTY4XHU5MDAwXHU1MUZBXHU2Mjc5XHU5MUNGXHU2QTIxXHU1RjBGXHVGRjA5XG5jb25zdCBjYW5jZWxCdG4gPSBjb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgdGV4dDogc3R5bGVDbGFzcyA9PT0gJ3NpZGViYXInID8gJ1x1MjcxNScgOiAnXHUyNzE1IFx1OTAwMFx1NTFGQScsICAvLyBcdTY1MzlcdTRFM0FcdTY2RjRcdTY2MEVcdTc4NkVcdTc2ODRcIlx1OTAwMFx1NTFGQVwiXG4gIGNsczogYGNhbmNlbC1zZWxlY3Rpb24tYnRuLSR7YnRuUHJlZml4fWAsXG4gIHRpdGxlOiAnXHU5MDAwXHU1MUZBXHU2Mjc5XHU5MUNGXHU2QTIxXHU1RjBGXHU1RTc2XHU2RTA1XHU3QTdBXHU2MjQwXHU2NzA5XHU5MDA5XHU2MkU5JyAgLy8gXHU2NTM5XHU0RTNBXHU2NkY0XHU2NjBFXHU3ODZFXHU3Njg0XHU2M0QwXHU3OTNBXG59KTtcbmNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgdGhpcy5jbGVhclNlbGVjdGlvbigpOyAgLy8gXHU1QjhDXHU1MTY4XHU2RTA1XHU3QTdBXG59KTtcbn1cblxuLy8gXHU2M0QwXHU1M0Q2XHU1MTY4XHU5MDA5XHU1MjlGXHU4MEZEXG4vKipcbiAqIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NTNFRlx1ODlDMVx1NzY4NFx1NjI0MFx1NjcwOVx1OTg3OVx1RkYwOFx1N0IxNFx1OEJCMFx1NjIxNlx1OTVFQVx1NTM2MVx1RkYwOVxuICovXG5wcml2YXRlIGdldFZpc2libGVJdGVtcygpOiB7IHVuaXRzPzogQ29udGVudFVuaXRbXTsgY2FyZHM/OiBGbGFzaGNhcmRbXSB9IHtcbiAgY29uc29sZS5sb2coJ1x1RDgzRFx1REQwRCBbZ2V0VmlzaWJsZUl0ZW1zXSA9PT09PT09PT09IFx1NUYwMFx1NTlDQlx1NjI2N1x1ODg0QyA9PT09PT09PT09Jyk7XG4gIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW2dldFZpc2libGVJdGVtc10gdmlld1R5cGU6JywgdGhpcy52aWV3VHlwZSk7XG4gIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW2dldFZpc2libGVJdGVtc10gZGlzcGxheU1vZGU6JywgdGhpcy5kaXNwbGF5TW9kZSk7XG4gIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW2dldFZpc2libGVJdGVtc10gZ3JvdXBNb2RlOicsIHRoaXMuZ3JvdXBNb2RlKTtcbiAgY29uc29sZS5sb2coJ1x1RDgzRFx1REQwRCBbZ2V0VmlzaWJsZUl0ZW1zXSBzZWxlY3RlZEZpbGU6JywgdGhpcy5zZWxlY3RlZEZpbGUpO1xuXG4gIGlmICh0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnKSB7XG4gICAgLy8gXHU5NUVBXHU1MzYxXHU4OUM2XHU1NkZFXHU5MDNCXHU4RjkxXG4gICAgY29uc3QgYWxsRmxhc2hjYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgIFxuICAgIGlmICh0aGlzLmRpc3BsYXlNb2RlID09PSAnc2lkZWJhcicpIHtcbiAgICAgIC8vIFx1NEZBN1x1OEZCOVx1NjgwRlx1NkEyMVx1NUYwRlx1RkYxQVx1OEZENFx1NTZERVx1NjI0MFx1NjcwOVx1OTVFQVx1NTM2MVx1NjIxNlx1NUY1M1x1NTI0RFx1NTIwNlx1N0VDNFx1NzY4NFx1OTVFQVx1NTM2MVxuICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgICByZXR1cm4geyBjYXJkczogYWxsRmxhc2hjYXJkcyB9O1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBmaWx0ZXJlZENhcmRzID0gYWxsRmxhc2hjYXJkcy5maWx0ZXIoY2FyZCA9PiB7XG4gICAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgICAgcmV0dXJuIGNhcmQuc291cmNlRmlsZSA9PT0gdGhpcy5zZWxlY3RlZEZpbGU7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdhbm5vdGF0aW9uJykge1xuICAgICAgICAgIGNvbnN0IHVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjYXJkLnNvdXJjZUNvbnRlbnRJZCk7XG4gICAgICAgICAgY29uc3QgaGFzQW5ub3RhdGlvbiA9IHRoaXMuc2VsZWN0ZWRGaWxlID09PSAnXHU2NzA5XHU2Mjc5XHU2Q0U4JztcbiAgICAgICAgICByZXR1cm4gaGFzQW5ub3RhdGlvbiA/ICh1bml0ICYmICEhdW5pdC5hbm5vdGF0aW9uSWQpIDogKCF1bml0IHx8ICF1bml0LmFubm90YXRpb25JZCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICd0YWcnKSB7XG4gICAgICAgICAgY29uc3QgdW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNhcmQuc291cmNlQ29udGVudElkKTtcbiAgICAgICAgICByZXR1cm4gKHVuaXQgJiYgdW5pdC5tZXRhZGF0YS50YWdzLmluY2x1ZGVzKHRoaXMuc2VsZWN0ZWRGaWxlISkpIHx8XG4gICAgICAgICAgICAgICAgIChjYXJkLnRhZ3MgJiYgY2FyZC50YWdzLmluY2x1ZGVzKHRoaXMuc2VsZWN0ZWRGaWxlISkpIHx8XG4gICAgICAgICAgICAgICAgIChjYXJkLmRlY2sgPT09IHRoaXMuc2VsZWN0ZWRGaWxlKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0RGF0ZShuZXcgRGF0ZShjYXJkLm1ldGFkYXRhLmNyZWF0ZWRBdCkpID09PSB0aGlzLnNlbGVjdGVkRmlsZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB7IGNhcmRzOiBmaWx0ZXJlZENhcmRzIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NEUzQlx1NzU0Q1x1OTc2Mlx1NkEyMVx1NUYwRlxuICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgICByZXR1cm4geyBjYXJkczogW10gfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgZmlsdGVyZWRDYXJkcyA9IGFsbEZsYXNoY2FyZHMuZmlsdGVyKGNhcmQgPT4ge1xuICAgICAgICBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdmaWxlJykge1xuICAgICAgICAgIHJldHVybiBjYXJkLnNvdXJjZUZpbGUgPT09IHRoaXMuc2VsZWN0ZWRGaWxlO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnYW5ub3RhdGlvbicpIHtcbiAgICAgICAgICBjb25zdCB1bml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY2FyZC5zb3VyY2VDb250ZW50SWQpO1xuICAgICAgICAgIGNvbnN0IGhhc0Fubm90YXRpb24gPSB0aGlzLnNlbGVjdGVkRmlsZSA9PT0gJ1x1NjcwOVx1NjI3OVx1NkNFOCc7XG4gICAgICAgICAgcmV0dXJuIGhhc0Fubm90YXRpb24gPyAodW5pdCAmJiAhIXVuaXQuYW5ub3RhdGlvbklkKSA6ICghdW5pdCB8fCAhdW5pdC5hbm5vdGF0aW9uSWQpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAndGFnJykge1xuICAgICAgICAgIGNvbnN0IHVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjYXJkLnNvdXJjZUNvbnRlbnRJZCk7XG4gICAgICAgICAgcmV0dXJuICh1bml0ICYmIHVuaXQubWV0YWRhdGEudGFncy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSEpKSB8fFxuICAgICAgICAgICAgICAgICAoY2FyZC50YWdzICYmIGNhcmQudGFncy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSEpKSB8fFxuICAgICAgICAgICAgICAgICAoY2FyZC5kZWNrID09PSB0aGlzLnNlbGVjdGVkRmlsZSkgfHxcbiAgICAgICAgICAgICAgICAgKHRoaXMuc2VsZWN0ZWRGaWxlID09PSAnXHU2NzJBXHU1MjA2XHU3QzdCJyAmJiBcbiAgICAgICAgICAgICAgICAgICghY2FyZC50YWdzIHx8IGNhcmQudGFncy5sZW5ndGggPT09IDApICYmIFxuICAgICAgICAgICAgICAgICAgIWNhcmQuZGVjayAmJlxuICAgICAgICAgICAgICAgICAgKCF1bml0IHx8ICF1bml0Lm1ldGFkYXRhLnRhZ3MgfHwgdW5pdC5tZXRhZGF0YS50YWdzLmxlbmd0aCA9PT0gMCkpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZGF0ZScpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKGNhcmQubWV0YWRhdGEuY3JlYXRlZEF0KSkgPT09IHRoaXMuc2VsZWN0ZWRGaWxlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHsgY2FyZHM6IGZpbHRlcmVkQ2FyZHMgfTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gXHU3QjE0XHU4QkIwXHU4OUM2XHU1NkZFXG4gICAgbGV0IHVuaXRzID0gdGhpcy5nZXRGaWx0ZXJlZFVuaXRzKCk7XG4gICAgY29uc29sZS5sb2coJ1x1RDgzRFx1REQwRCBbZ2V0VmlzaWJsZUl0ZW1zXSBcdTUyMURcdTU5Q0IgZ2V0RmlsdGVyZWRVbml0cygpIFx1OEZENFx1NTZERVx1NjU3MFx1OTFDRjonLCB1bml0cy5sZW5ndGgpO1xuICAgIFxuICAgIGlmICh0aGlzLmRpc3BsYXlNb2RlID09PSAnc2lkZWJhcicpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW2dldFZpc2libGVJdGVtc10gXHU4RkRCXHU1MTY1XHU0RkE3XHU4RkI5XHU2ODBGXHU2QTIxXHU1RjBGXHU1OTA0XHU3NDA2Jyk7XG4gICAgICBcbiAgICAgIGlmICghdGhpcy5zZWxlY3RlZEZpbGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1x1RDgzRFx1REQwRCBbZ2V0VmlzaWJsZUl0ZW1zXSBzZWxlY3RlZEZpbGUgXHU0RTBEXHU1QjU4XHU1NzI4XHVGRjBDXHU4RkQ0XHU1NkRFXHU3QTdBXHU2NTcwXHU3RUM0Jyk7XG4gICAgICAgIHJldHVybiB7IHVuaXRzOiBbXSB9O1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDBEIFtnZXRWaXNpYmxlSXRlbXNdIHNlbGVjdGVkRmlsZSBcdTVCNThcdTU3Mjg6JywgdGhpcy5zZWxlY3RlZEZpbGUpO1xuICAgICAgXG4gICAgICAvLyBcdUQ4M0RcdUREMjcgXHU2MjQwXHU2NzA5XHU2QTIxXHU1RjBGXHU5MEZEXHU1M0VBXHU2NjNFXHU3OTNBXHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XHU3Njg0XHU3QjE0XHU4QkIwXG4gICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+IHVuaXQuc291cmNlLmZpbGUgPT09IHRoaXMuc2VsZWN0ZWRGaWxlKTtcbiAgICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW2dldFZpc2libGVJdGVtc10gXHU2MzA5XHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XHU4RkM3XHU2RUU0XHU1NDBFXHU2NTcwXHU5MUNGOicsIHVuaXRzLmxlbmd0aCk7XG4gICAgICBcbiAgICAgIC8vIFx1RDgzRFx1REQyNyBcdTU5ODJcdTY3OUNcdTY2MkYgYW5ub3RhdGlvbiBcdTZBMjFcdTVGMEZcdUZGMENcdThGRDhcdTk3MDBcdTg5ODFcdTYzMDlcdTYyNzlcdTZDRThcdTcyQjZcdTYwMDFcdTUxOERcdThGQzdcdTZFRTRcdTRFMDBcdTZCMjFcbiAgICAgIGlmICh0aGlzLmdyb3VwTW9kZSA9PT0gJ2Fubm90YXRpb24nKSB7XG4gICAgICAgIGNvbnN0IGhhc0Fubm90YXRpb24gPSB1bml0cy5zb21lKHUgPT4gISF1LmFubm90YXRpb25JZCk7XG4gICAgICAgIC8vIGFubm90YXRpb24gXHU2QTIxXHU1RjBGXHU1NzI4XHU0RkE3XHU4RkI5XHU2ODBGXHU0RTBEXHU0RjdGXHU3NTI4ICdcdTY3MDlcdTYyNzlcdTZDRTgnLydcdTY1RTBcdTYyNzlcdTZDRTgnIFx1OEZEOVx1NjgzN1x1NzY4NCBzZWxlY3RlZEZpbGVcbiAgICAgICAgLy8gXHU4MDBDXHU2NjJGXHU2NjNFXHU3OTNBXHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XHU3Njg0XHU2MjQwXHU2NzA5XHU3QjE0XHU4QkIwXHVGRjBDXHU2MzA5XHU2NjJGXHU1NDI2XHU2NzA5XHU2Mjc5XHU2Q0U4XHU1MjA2XHU3RUM0XG4gICAgICAgIC8vIFx1NjI0MFx1NEVFNVx1OEZEOVx1OTFDQ1x1NEUwRFx1OTcwMFx1ODk4MVx1OTg5RFx1NTkxNlx1OEZDN1x1NkVFNFxuICAgICAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDBEIFtnZXRWaXNpYmxlSXRlbXNdIGFubm90YXRpb24gXHU2QTIxXHU1RjBGXHVGRjBDXHU0RkREXHU2MzAxXHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XHU2MjQwXHU2NzA5XHU3QjE0XHU4QkIwJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW2dldFZpc2libGVJdGVtc10gXHU0RkE3XHU4RkI5XHU2ODBGXHU2NzAwXHU3RUM4XHU4RkQ0XHU1NkRFIHVuaXRzIFx1NjU3MFx1OTFDRjonLCB1bml0cy5sZW5ndGgpO1xuICAgICAgcmV0dXJuIHsgdW5pdHMgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU0RTNCXHU3NTRDXHU5NzYyXHU2QTIxXHU1RjBGXG4gICAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDBEIFtnZXRWaXNpYmxlSXRlbXNdIFx1OEZEQlx1NTE2NVx1NEUzQlx1NzU0Q1x1OTc2Mlx1NkEyMVx1NUYwRlx1NTkwNFx1NzQwNicpO1xuICAgICAgXG4gICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRGaWxlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMEQgW2dldFZpc2libGVJdGVtc10gc2VsZWN0ZWRGaWxlIFx1NEUwRFx1NUI1OFx1NTcyOFx1RkYwQ1x1OEZENFx1NTZERVx1N0E3QVx1NjU3MFx1N0VDNCcpO1xuICAgICAgICByZXR1cm4geyB1bml0czogW10gfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnZmlsZScpIHtcbiAgICAgICAgdW5pdHMgPSB1bml0cy5maWx0ZXIodW5pdCA9PiB1bml0LnNvdXJjZS5maWxlID09PSB0aGlzLnNlbGVjdGVkRmlsZSk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAnYW5ub3RhdGlvbicpIHtcbiAgICAgICAgY29uc3QgaGFzQW5ub3RhdGlvbiA9IHRoaXMuc2VsZWN0ZWRGaWxlID09PSAnXHU2NzA5XHU2Mjc5XHU2Q0U4JztcbiAgICAgICAgdW5pdHMgPSB1bml0cy5maWx0ZXIodW5pdCA9PiBoYXNBbm5vdGF0aW9uID8gISF1bml0LmFubm90YXRpb25JZCA6ICF1bml0LmFubm90YXRpb25JZCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBNb2RlID09PSAndGFnJykge1xuICAgICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+IHVuaXQubWV0YWRhdGEudGFncy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkRmlsZSEpKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5ncm91cE1vZGUgPT09ICdkYXRlJykge1xuICAgICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+IFxuICAgICAgICAgIHRoaXMuZm9ybWF0RGF0ZShuZXcgRGF0ZSh1bml0Lm1ldGFkYXRhLmNyZWF0ZWRBdCkpID09PSB0aGlzLnNlbGVjdGVkRmlsZVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDBEIFtnZXRWaXNpYmxlSXRlbXNdIFx1NEUzQlx1NzU0Q1x1OTc2Mlx1NjcwMFx1N0VDOFx1OEZENFx1NTZERSB1bml0cyBcdTY1NzBcdTkxQ0Y6JywgdW5pdHMubGVuZ3RoKTtcbiAgICAgIHJldHVybiB7IHVuaXRzIH07XG4gICAgfVxuICB9XG59XG5cblxuXG5cbiAgLyoqXG4gICAqIFx1NkRGQlx1NTJBMFx1NjgzN1x1NUYwRlxuICAgKi9cbiAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWFybmluZy1vdmVydmlldy1zdHlsZXMnKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZUVsLmlkID0gJ2xlYXJuaW5nLW92ZXJ2aWV3LXN0eWxlcyc7XG4gICAgXG4gICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU3RUNGXHU2REZCXHU1MkEwXG4gICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWFybmluZy1vdmVydmlldy1zdHlsZXMnKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAvKiA9PT09PT09PT09PT09PT09PT09PSBcdTUxNjhcdTVDNDBcdTVCQjlcdTU2NjggPT09PT09PT09PT09PT09PT09PT0gKi9cbiAgICAgIC5sZWFybmluZy1vdmVydmlldy1jb250YWluZXIge1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICB9XG5cbiAgICAgIC8qID09PT09PT09PT09PT09PT09PT09IFx1NEZBN1x1OEZCOVx1NjgwRlx1NkEyMVx1NUYwRlx1NjgzN1x1NUYwRiA9PT09PT09PT09PT09PT09PT09PSAqL1xuICAgICAgLmxlYXJuaW5nLW92ZXJ2aWV3LWNvbnRhaW5lcltkYXRhLW1vZGU9XCJzaWRlYmFyXCJdIHtcbiAgICAgICAgcGFkZGluZzogMDtcbiAgICAgIH1cblxuICAgICAgLnNpZGViYXItdG9vbGJhciB7XG4gICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsgLyogXHVEODNEXHVERDI3IFx1NkRGQlx1NTJBMCAqL1xuICB6LWluZGV4OiAxMDtcbiAgICAgIH1cblxuICAgICAgLnNlYXJjaC1jb250YWluZXIge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAuc2VhcmNoLWlucHV0IHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxMnB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgfVxuXG4gICAgICAuc2VhcmNoLWlucHV0OmZvY3VzIHtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAuZmlsdGVyLWNoaXBzIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5maWx0ZXItY2hpcCB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgcGFkZGluZzogNnB4IDhweDtcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgICAgfVxuXG4gICAgICAuZmlsdGVyLWNoaXA6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLmZpbHRlci1jaGlwLmFjdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLXN3aXRjaGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC1idG4ge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIHBhZGRpbmc6IDZweDtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWJ0bi5hY3RpdmUge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7XG4gICAgICB9XG4vKiBcdTU3MjggLnN0YXRzLWJhZGdlIFx1NjgzN1x1NUYwRlx1NEU0Qlx1NTI0RFx1NkRGQlx1NTJBMCAqL1xuLnN0YXRzLXJvdyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgZ2FwOiAzcHg7XG59XG4vKiBcdTU5MzRcdTkwRThcdTY0Q0RcdTRGNUNcdTYzMDlcdTk0QUVcdTVCQjlcdTU2NjggKi9cbi5oZWFkZXItYWN0aW9ucyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGdhcDogOHB4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG4vKiBcdTYyNzlcdTkxQ0ZcdTY0Q0RcdTRGNUNcdTYzMDlcdTk0QUVcdTY4MzdcdTVGMEYgLSBcdTRGQTdcdThGQjlcdTY4MEYgKi9cbi5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuLXNpZGViYXIsXG4uYmF0Y2gtZGVsZXRlLWJ0bi1zaWRlYmFyIHtcbiAgcGFkZGluZzogNnB4IDZweDtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgZm9udC1zaXplOiAxMXB4O1xuICBmb250LXdlaWdodDogNTAwO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xufVxuXG4uYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bi1zaWRlYmFyOmhvdmVyIHtcbiAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgY29sb3I6IHdoaXRlO1xuICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG59XG5cbi5iYXRjaC1kZWxldGUtYnRuLXNpZGViYXI6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1yZWQpO1xuICBjb2xvcjogd2hpdGU7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbn1cblxuLyogXHU2Mjc5XHU5MUNGXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFXHU2ODM3XHU1RjBGIC0gXHU0RTNCXHU3NTRDXHU5NzYyICovXG4uYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bi1oZWFkZXIsXG4uYmF0Y2gtZGVsZXRlLWJ0bi1oZWFkZXIge1xuICBwYWRkaW5nOiA4cHggMTZweDtcbiAgZm9udC1zaXplOiAxM3B4O1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICBmb250LXdlaWdodDogNTAwO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xufVxuXG4uYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bi1oZWFkZXI6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICBjb2xvcjogd2hpdGU7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbn1cblxuLmJhdGNoLWRlbGV0ZS1idG4taGVhZGVyOmhvdmVyIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItcmVkKTtcbiAgY29sb3I6IHdoaXRlO1xuICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG59XG4uc2VsZWN0LWFsbC1idG4tc2lkZWJhciB7XG4gIHBhZGRpbmc6IDZweCAxMnB4O1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICBmb250LXNpemU6IDExcHg7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIGZsZXgtc2hyaW5rOiAwOyAvKiBcdTk2MzJcdTZCNjJcdTYzMDlcdTk0QUVcdTg4QUJcdTUzOEJcdTdGMjkgKi9cbn1cblxuLnNlbGVjdC1hbGwtYnRuLXNpZGViYXI6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gIGNvbG9yOiB3aGl0ZTtcbn1cblxuLnN0YXRzLWJhZGdlIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBmb250LXNpemU6IDExcHg7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgcGFkZGluZzogNHB4O1xuICBmbGV4OiAxOyAvKiBcdTUzNjBcdTYzNkVcdTUyNjlcdTRGNTlcdTdBN0FcdTk1RjQgKi9cbn1cbiAgICAgIC5zdGF0cy1iYWRnZSB7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIHBhZGRpbmc6IDRweDtcbiAgICAgIH1cbi5zZWxlY3QtYWxsLWJ0bi1oZWFkZXIge1xuICBwYWRkaW5nOiA4cHggMTZweDtcbiAgZm9udC1zaXplOiAxM3B4O1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICBmb250LXdlaWdodDogNTAwO1xuICBib3gtc2hhZG93OiAwIDFweCAzcHggcmdiYSgwLCAwLCAwLCAwLjA4KTtcbn1cblxuLnNlbGVjdC1hbGwtYnRuLWhlYWRlcjpob3ZlciB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xcHgpO1xuICBib3gtc2hhZG93OiAwIDJweCA2cHggcmdiYSgwLCAwLCAwLCAwLjE1KTtcbn1cblxuLyogXHU1QjhDXHU2MjEwXHU3MkI2XHU2MDAxXHU3Njg0XHU5QUQ4XHU0RUFFXHU2ODM3XHU1RjBGICovXG4uc2VsZWN0LWFsbC1idG4taGVhZGVyLmNvbXBsZXRlZCB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbn1cblxuLnNlbGVjdC1hbGwtYnRuLWhlYWRlci5jb21wbGV0ZWQ6aG92ZXIge1xuICBvcGFjaXR5OiAwLjk7XG59XG5cbi5zZWxlY3QtYWxsLWJ0bi1zaWRlYmFyIHtcbiAgcGFkZGluZzogNnB4IDEycHg7XG5cbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICBmb250LXNpemU6IDExcHg7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIG1hcmdpbi1yaWdodDogYXV0bzsgLyogXHU5NzYwXHU1REU2XHU1QkY5XHU5RjUwICovXG59XG5cbi5zZWxlY3QtYWxsLWJ0bi1zaWRlYmFyOmhvdmVyIHtcbiAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICBjb2xvcjogd2hpdGU7XG59XG4gIC8qIFx1NTNENlx1NkQ4OFx1OTAwOVx1NjJFOVx1NjMwOVx1OTRBRSAtIFx1NEZBN1x1OEZCOVx1NjgwRiAqL1xuLmNhbmNlbC1zZWxlY3Rpb24tYnRuLXNpZGViYXIge1xuICBwYWRkaW5nOiA2cHggMTJweDtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgZm9udC1zaXplOiAxMXB4O1xuICBmb250LXdlaWdodDogNTAwO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG59XG5cbi5jYW5jZWwtc2VsZWN0aW9uLWJ0bi1zaWRlYmFyOmhvdmVyIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gIGJvcmRlci1jb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG59XG5cbi8qIFx1NTNENlx1NkQ4OFx1OTAwOVx1NjJFOVx1NjMwOVx1OTRBRSAtIFx1NEUzQlx1NzU0Q1x1OTc2MiAqL1xuLmNhbmNlbC1zZWxlY3Rpb24tYnRuLWhlYWRlciB7XG4gIHBhZGRpbmc6IDhweCAxNnB4O1xuICBmb250LXNpemU6IDEzcHg7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbn1cblxuLmNhbmNlbC1zZWxlY3Rpb24tYnRuLWhlYWRlcjpob3ZlciB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICBib3JkZXItY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xufVxuXG4vKiBcdTVCOENcdTYyMTBcdTcyQjZcdTYwMDFcdTc2ODRcdTUxNjhcdTkwMDlcdTYzMDlcdTk0QUVcdTlBRDhcdTRFQUUgKi9cbi5zZWxlY3QtYWxsLWJ0bi1zaWRlYmFyLmNvbXBsZXRlZCxcbi5zZWxlY3QtYWxsLWJ0bi1oZWFkZXIuY29tcGxldGVkIHtcbiAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xufVxuICAgICAgLmJhdGNoLWFjdGlvbnMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDZweDtcbiAgICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtbW9kZS1idG4sXG4gICAgICAuc2VsZWN0LWFsbC1idG4sXG4gICAgICAuYmF0Y2gtZGVsZXRlLWJ0bixcbiAgICAgIC5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuIHtcbiAgICAgICAgcGFkZGluZzogNnB4IDEycHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLnNlbGVjdC1hbGwtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1tb2RlLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtZGVsZXRlLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtY2hlY2tib3gge1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICAuc2lkZWJhci1jb250ZW50LWxpc3Qge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOyAvKiBcdUQ4M0RcdUREMjcgXHU2REZCXHU1MkEwICovXG4gIHotaW5kZXg6IDE7IC8qIFx1RDgzRFx1REQyNyBcdTZERkJcdTUyQTAgKi9cbiAgICAgIH1cblxuICAgICAgLmNvbnRlbnQtZ3JvdXAge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtaGVhZGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgIHBhZGRpbmc6IDZweCA4cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgcG9zaXRpb246IHN0aWNreTtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICB6LWluZGV4OiAxMDtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWljb24ge1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC10aXRsZSB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtY291bnQge1xuICAgICAgICBwYWRkaW5nOiAycHggNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICAgIH1cblxuICAgICAgLmNvbXBhY3QtY2FyZCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBtYXJnaW46IDRweCAwO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG5cbiAgICAgIC5jb21wYWN0LWNhcmQ6aG92ZXIge1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMnB4KTtcbiAgICAgICAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwwLDAsMC4xKTtcbiAgICAgIH1cblxuLyogXHU1N0ZBXHU3ODQwXHU2MzA3XHU3OTNBXHU1NjY4XHU2ODM3XHU1RjBGICovXG4uY2FyZC1pbmRpY2F0b3Ige1xuICB3aWR0aDogNHB4O1xuICBib3JkZXItcmFkaXVzOiAycHg7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgZmxleC1zaHJpbms6IDA7XG4gIHRyYW5zaXRpb246IGFsbCAwLjJzO1xufVxuXG5cbi8qIFx1RDgzRFx1REQyNyBcdTZDQTFcdTY3MDlcdTYyNzlcdTZDRThcdTY1RjZcdUZGMUFcdTRFMEFcdTUzNEFcdTkwMEZcdTY2MEVcdUZGMENcdTRFMEJcdTUzNEFcdTY2M0VcdTc5M0FcdTdDN0JcdTU3OEJcdTk4OUNcdTgyNzIgKi9cbi5jYXJkLWluZGljYXRvci50eXBlLXFhIHtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KFxuICAgIHRvIGJvdHRvbSxcbiAgICB0cmFuc3BhcmVudCAwJSxcbiAgICB0cmFuc3BhcmVudCA1MCUsXG4gICAgIzEwYjk4MSA1MCUsXG4gICAgIzEwYjk4MSAxMDAlXG4gICk7XG59XG5cbi5jYXJkLWluZGljYXRvci50eXBlLWNsb3plIHtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KFxuICAgIHRvIGJvdHRvbSxcbiAgICB0cmFuc3BhcmVudCAwJSxcbiAgICB0cmFuc3BhcmVudCA1MCUsXG4gICAgICAgICM5MzMzZWEgNTAlLFxuICAgICM5MzMzZWEgMTAwJVxuXG4gICk7XG59XG5cbi5jYXJkLWluZGljYXRvci50eXBlLXRleHQge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoXG4gICAgdG8gYm90dG9tLFxuICAgIHRyYW5zcGFyZW50IDAlLFxuICAgIHRyYW5zcGFyZW50IDUwJSxcbiAgICAjNmI3MjgwIDUwJSxcbiAgICAjNmI3MjgwIDEwMCVcbiAgKTtcbn1cblxuLyogXHVEODNEXHVERDI3IFx1NjcwOVx1NjI3OVx1NkNFOFx1NjVGNlx1RkYxQVx1NEUwQVx1NTM0QVx1ODRERFx1ODI3Mlx1RkYwQ1x1NEUwQlx1NTM0QVx1N0M3Qlx1NTc4Qlx1OTg5Q1x1ODI3MiAqL1xuLmNhcmQtaW5kaWNhdG9yLnR5cGUtcWEuaGFzLWFubm90YXRpb24ge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoXG4gICAgdG8gYm90dG9tLCBcbiAgICAjM2I4MmY2IDAlLCBcbiAgICAjM2I4MmY2IDUwJSwgXG4gICAgIzEwYjk4MSA1MCUsXG4gICAgIzEwYjk4MSAxMDAlXG4gICk7XG59XG5cbi5jYXJkLWluZGljYXRvci50eXBlLWNsb3plLmhhcy1hbm5vdGF0aW9uIHtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KFxuICAgIHRvIGJvdHRvbSwgXG4gICAgIzNiODJmNiAwJSwgXG4gICAgIzNiODJmNiA1MCUsIFxuICAgICAgICAjOTMzM2VhIDUwJSxcbiAgICAjOTMzM2VhIDEwMCVcblxuICApO1xufVxuXG4uY2FyZC1pbmRpY2F0b3IudHlwZS10ZXh0Lmhhcy1hbm5vdGF0aW9uIHtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KFxuICAgIHRvIGJvdHRvbSwgXG4gICAgIzNiODJmNiAwJSwgXG4gICAgIzNiODJmNiA1MCUsIFxuICAgICM2YjcyODAgNTAlLFxuICAgICM2YjcyODAgMTAwJVxuICApO1xufVxuXG4vKiBcdUQ4M0RcdUREMjcgXHU5RUQ4XHU4QkE0XHU2ODM3XHU1RjBGXHVGRjA4XHU2Q0ExXHU2NzA5XHU3QzdCXHU1NzhCXHU2NUY2XHU3Njg0XHU1MTVDXHU1RTk1XHVGRjA5ICovXG4uY2FyZC1pbmRpY2F0b3I6bm90KC50eXBlLXFhKTpub3QoLnR5cGUtY2xvemUpOm5vdCgudHlwZS10ZXh0KSB7XG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudChcbiAgICB0byBib3R0b20sXG4gICAgdHJhbnNwYXJlbnQgMCUsXG4gICAgdHJhbnNwYXJlbnQgNTAlLFxuICAgIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSA1MCUsXG4gICAgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpIDEwMCVcbiAgKTtcbn1cblxuLmNhcmQtaW5kaWNhdG9yLmhhcy1hbm5vdGF0aW9uOm5vdCgudHlwZS1xYSk6bm90KC50eXBlLWNsb3plKTpub3QoLnR5cGUtdGV4dCkge1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoXG4gICAgdG8gYm90dG9tLFxuICAgICMzYjgyZjYgMCUsXG4gICAgIzNiODJmNiA1MCUsXG4gICAgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpIDUwJSxcbiAgICB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcikgMTAwJVxuICApO1xufVxuXG5cblxuLnR5cGUtaW5kaWNhdG9yIHtcbiAgcGFkZGluZzogMnB4IDhweDtcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgZm9udC1zaXplOiAxMHB4O1xuICBmb250LXdlaWdodDogNjAwO1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xufVxuXG4udHlwZS1pbmRpY2F0b3IudHlwZS1xYSB7XG4gIGJhY2tncm91bmQ6IHJnYmEoMTYsIDE4NSwgMTI5LCAwLjIpO1xuXG4gIGNvbG9yOiAjMTBiOTgxO1xufVxuXG4udHlwZS1pbmRpY2F0b3IudHlwZS1jbG96ZSB7XG4gIGJhY2tncm91bmQ6IHJnYmEoMTQ3LCA1MSwgMjM0LCAwLjIpO1xuICAgIGNvbG9yOiAjOTMzM2VhO1xuXG59XG5cbi50eXBlLWluZGljYXRvci50eXBlLXRleHQge1xuICBiYWNrZ3JvdW5kOiByZ2JhKDEwNywgMTE0LCAxMjgsIDAuMik7XG4gIGNvbG9yOiAjNmI3MjgwO1xufVxuXG4gICAgICAuY2FyZC1jb250ZW50IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgbWluLXdpZHRoOiAwO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1oZWFkZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tYnRuIHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIHBhZGRpbmc6IDRweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xKTtcbiAgICAgIH1cblxuICAgICAgLmNhcmQtdG9vbHMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDRweDtcbiAgICAgIH1cblxuICAgICAgLnRvb2wtYnRuIHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIHBhZGRpbmc6IDRweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLnRvb2wtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgyNTEsIDE5MSwgMzYsIDAuMik7XG4gICAgICB9XG5cbiAgICAgIC5tb3JlLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4ubm90ZS10ZXh0IHtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBsaW5lLWhlaWdodDogMS42O1xuICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgd2hpdGUtc3BhY2U6IG5vcm1hbDtcbiAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDtcbiAgbWFyZ2luLWJvdHRvbTogNnB4O1xufVxuXG4ubm90ZS10ZXh0OmhvdmVyIHtcbiAgY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG59XG5cbi8qIFx1RDgzRFx1REQyNyBRQSBcdTY4MzdcdTVGMEYgKi9cbi5xYS1xdWVzdGlvbiB7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG59XG5cbi5xYS1zZXBhcmF0b3Ige1xuICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gIG1hcmdpbjogMCA0cHg7XG59XG5cbi5xYS1hbnN3ZXIge1xuICBjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xuICBmb250LXN0eWxlOiBpdGFsaWM7XG59XG5cbi8qIFx1RDgzRFx1REQyNyBDbG96ZSBcdTlBRDhcdTRFQUVcdTY4MzdcdTVGMEYgKi9cbi5jbG96ZS1oaWdobGlnaHQge1xuXG4gIGNvbG9yOiAjZjU5ZTBiO1xuICBmb250LXdlaWdodDogNTAwO1xuICBwYWRkaW5nOiAxcHggM3B4O1xuICBib3JkZXItcmFkaXVzOiAzcHg7XG59XG5cbiAgICAgIC5hbm5vdGF0aW9uLXByZXZpZXcge1xuICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgcGFkZGluZzogNnB4IDhweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIG1hcmdpbi10b3A6IDZweDtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuICAgICAgXG4gICAgICAuYW5ub3RhdGlvbi1wcmV2aWV3OmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkLW1ldGEge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgIGdhcDogNnB4O1xuICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8qID09PT09PT09PT09PT09PT09PT09IFx1NTE4NVx1ODA1NFx1NjI3OVx1NkNFOFx1N0YxNlx1OEY5MVx1NTY2OCA9PT09PT09PT09PT09PT09PT09PSAqL1xuICAgICAgLmlubGluZS1hbm5vdGF0aW9uLWVkaXRvciB7XG4gICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgIGFuaW1hdGlvbjogc2xpZGVEb3duIDAuMTVzIGVhc2Utb3V0O1xuICAgICAgfVxuICAgICAgXG4gICAgICBAa2V5ZnJhbWVzIHNsaWRlRG93biB7XG4gICAgICAgIGZyb20ge1xuICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01cHgpO1xuICAgICAgICB9XG4gICAgICAgIHRvIHtcbiAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAuaW5saW5lLWFubm90YXRpb24tdGV4dGFyZWEge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgbWluLWhlaWdodDogODBweDtcbiAgICAgICAgcGFkZGluZzogMTJweCAxNHB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LXRleHQpO1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgICAgIHJlc2l6ZTogdmVydGljYWw7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICBib3gtc2hhZG93OiAwIDFweCAzcHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAuaW5saW5lLWFubm90YXRpb24tdGV4dGFyZWE6Zm9jdXMge1xuICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMTUpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAuaW5saW5lLWFubm90YXRpb24tdGV4dGFyZWE6OnBsYWNlaG9sZGVyIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZmFpbnQpO1xuICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC5pbmxpbmUtYW5ub3RhdGlvbi1oaW50IHtcbiAgICAgICAgbWFyZ2luLXRvcDogNnB4O1xuICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWZhaW50KTtcbiAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgICAgfVxuICAgICAgXG4gICAgICAvKiBcdTdGNTFcdTY4M0NcdTUzNjFcdTcyNDdcdTc2ODRcdTUxODVcdTgwNTRcdTdGMTZcdThGOTFcdTU2NjhcdTY4MzdcdTVGMEYgKi9cbiAgICAgIC5ncmlkLWNhcmQgLmlubGluZS1hbm5vdGF0aW9uLWVkaXRvciB7XG4gICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLmdyaWQtY2FyZCAuaW5saW5lLWFubm90YXRpb24tdGV4dGFyZWEge1xuICAgICAgICBtaW4taGVpZ2h0OiAxMDBweDtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBwYWRkaW5nOiA4cHggMTRweDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLmdyaWQtY2FyZCAuaW5saW5lLWFubm90YXRpb24taGludCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgfVxuXG4gICAgICAudGFnIHtcbiAgICAgICAgcGFkZGluZzogMnB4IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tdGFnLWJhY2tncm91bmQpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGFnLWNvbG9yKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBmb250LXNpemU6IDEwcHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC50YWctbW9yZSB7XG4gICAgICAgIHBhZGRpbmc6IDJweCA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICAgIH1cblxuICAgICAgLmJhZGdlIHtcbiAgICAgICAgcGFkZGluZzogMnB4IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICAgIH1cblxuICAgICAgLyogPT09PT09PT09PT09PT09PT09PT0gXHU0RTNCXHU3NTRDXHU5NzYyXHU2QTIxXHU1RjBGXHU2ODM3XHU1RjBGID09PT09PT09PT09PT09PT09PT09ICovXG4gICAgICAubWFpbi1sYXlvdXQge1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDI1MHB4IDFmcjtcbiAgICAgICAgZ2FwOiAxcHg7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgfVxuXG4gICAgICAubGVmdC1wYW5lbCB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICB9XG5cbiAgICAgIC5yaWdodC1wYW5lbCB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgIH1cblxuICAgICAgLmZpeGVkLWVudHJpZXMge1xuICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDZweDtcbiAgICAgIH1cblxuICAgICAgLmVudHJ5LWJ0biB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBwYWRkaW5nOiAxMHB4IDEycHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICB9XG5cbiAgICAgIC5lbnRyeS1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDJweCk7XG4gICAgICB9XG5cbiAgICAgIC5lbnRyeS1idG4uYWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLm1haW4tdG9vbGJhciB7XG4gICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1hY3Rpb25zLW1haW4ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtYWN0aW9ucy1tYWluIC5iYXRjaC1tb2RlLWJ0bixcbiAgICAgIC5iYXRjaC1hY3Rpb25zLW1haW4gLnNlbGVjdC1hbGwtYnRuLFxuICAgICAgLmJhdGNoLWFjdGlvbnMtbWFpbiAuYmF0Y2gtZGVsZXRlLWJ0bixcbiAgICAgIC5iYXRjaC1hY3Rpb25zLW1haW4gLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG4ge1xuICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtYWN0aW9ucy1tYWluIC5zZWxlY3QtYWxsLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgfVxuXG4gICAgICAuc2VhcmNoLWlucHV0LW1haW4ge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zZWFyY2gtaW5wdXQtbWFpbjpmb2N1cyB7XG4gICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLXN3aXRjaGVyLW1haW4ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDZweDtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWJ0bi1tYWluIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGdhcDogNHB4O1xuICAgICAgICBwYWRkaW5nOiA4cHggMTBweDtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWJ0bi1tYWluOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWJ0bi1tYWluLmFjdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICB9XG5cbiAgICAgIC5wYW5lbC10aXRsZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgbWFyZ2luOjA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLmZpbGUtbGlzdCB7XG4gICAgICAgIHBhZGRpbmc6IDAgOHB4IDhweCA4cHg7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICB9XG5cbiAgICAgIC5maWxlLWl0ZW0ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgcGFkZGluZzogOHB4IDEwcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1pdGVtOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5maWxlLWl0ZW0uc2VsZWN0ZWQge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1pY29uIHtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1uYW1lIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgIH1cblxuICAgICAgLmZpbGUtY291bnQge1xuICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgIHBhZGRpbmc6IDJweCA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4xKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgICAgIH1cblxuICAgICAgLmZpbGUtaXRlbS5zZWxlY3RlZCAuZmlsZS1jb3VudCB7XG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4yKTtcbiAgICAgIH1cblxuICAgICAgLmVtcHR5LXJpZ2h0LXBhbmVsIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuZW1wdHktaWNvbiB7XG4gICAgICAgIGZvbnQtc2l6ZTogNDhweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTZweDtcbiAgICAgIH1cblxuICAgICAgLmVtcHR5LXRleHQge1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICB9XG5cbiAgICAgIC5ncmlkLWhlYWRlciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDEycHg7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICB9XG5cbiAgICAgIC5ncmlkLWhlYWRlciBoMiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgfVxuXG4gICAgICAub3Blbi1maWxlLWJ0biB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAub3Blbi1maWxlLWJ0bjpob3ZlciB7XG4gICAgICAgIG9wYWNpdHk6IDAuOTtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xcHgpO1xuICAgICAgfVxuXG4gICAgICAuY29udGVudC1ncmlkIHtcbiAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoMjQwcHgsIDFmcikpO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgIH1cblxuICAgICAgLmdyaWQtY2FyZCB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgMXB4IDNweCByZ2JhKDAsMCwwLDAuMSk7XG4gICAgICB9XG5cbiAgICAgIC5ncmlkLWNhcmQ6aG92ZXIge1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDEycHggcmdiYSgwLDAsMCwwLjE1KTtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpO1xuICAgICAgfVxuXG4gICAgICAuZ3JpZC1jYXJkLWhlYWRlciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDhweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgIH1cblxuICAgICAgLmRvYy1uYW1lIHtcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjVweDtcbiAgICAgIH1cblxuICAgICAgLmdyaWQtY2FyZC10b29scyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogNHB4O1xuICAgICAgfVxuXG4gICAgICAudG9vbC1idG4tZ3JpZCB7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICBwYWRkaW5nOiA0cHggNnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuXG4gICAgICAudG9vbC1idG4tZ3JpZDpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7XG4gICAgICB9XG5cbiAgICAgIC5ncmlkLWNhcmQtY29udGVudCB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICB9XG5cbi5ncmlkLW5vdGUtdGV4dCB7XG4gIGZvbnQtc2l6ZTogMTNweDsgIC8qIFx1RDgzRFx1REQyNyBcdTRFQ0UgMTRweCBcdTY1MzlcdTRFM0EgMTNweCAqL1xuICBsaW5lLWhlaWdodDogMS42O1xuICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gIHdvcmQtd3JhcDogYnJlYWstd29yZDsgIC8qIFx1RDgzRFx1REQyNyBcdTUxNDFcdThCQjhcdTYzNjJcdTg4NEMgKi9cbiAgd29yZC1icmVhazogYnJlYWstd29yZDtcbiAgd2hpdGUtc3BhY2U6IG5vcm1hbDtcbiAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDtcbn1cblxuLmdyaWQtbm90ZS10ZXh0OmhvdmVyIHtcbiAgY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG59XG5cblxuICAgICAgLmdyaWQtYW5ub3RhdGlvbiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuICAgICAgXG4gICAgICAuZ3JpZC1hbm5vdGF0aW9uOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5ncmlkLWFubm90YXRpb24gc3Ryb25nIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgIH1cblxuICAgICAgLmdyaWQtdGFncyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC50YWctZ3JpZCB7XG4gICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXRhZy1iYWNrZ3JvdW5kKTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRhZy1jb2xvcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgZm9udC1zaXplOiAxMXB4O1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuZ3JpZC1jYXJkLW1ldGEge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIHBhZGRpbmctdG9wOiAxMHB4O1xuICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICB9XG5cbiAgICAgIC5saW5lLWluZm8ge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5iYWRnZS1ncmlkIHtcbiAgICAgICAgcGFkZGluZzogM3B4IDhweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkcy1oZWFkZXIge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgfVxuXG4gICAgICAuY2FyZHMtaGVhZGVyIGgyIHtcbiAgICAgICAgZm9udC1zaXplOiAxOHB4O1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgfVxuXG4gICAgICAuY2FyZHMtZ3JpZCB7XG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDE2MHB4LCAxZnIpKTtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtaXRlbSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLmZsYXNoY2FyZC1pdGVtOmhvdmVyIHtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxMnB4IHJnYmEoMCwwLDAsMC4xKTtcbiAgICAgIH1cblxuICAgICAgLmZsYXNoY2FyZC1oZWFkZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtZGVsZXRlLWJ0biB7XG4gICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICBvcGFjaXR5OiAwLjY7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtZGVsZXRlLWJ0bjpob3ZlciB7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgIH1cblxuICAgICAgLmZsYXNoY2FyZC10eXBlIHtcbiAgICAgICAgcGFkZGluZzogNHB4IDEwcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgIH1cblxuICAgICAgLmZsYXNoY2FyZC10eXBlLnFhIHtcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgxNiwgMTg1LCAxMjksIDAuMik7XG5cbiAgICAgICAgY29sb3I6ICMxMGI5ODE7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtdHlwZS5jbG96ZSB7XG5cbiAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMTQ3LCA1MSwgMjM0LCAwLjIpO1xuICAgICAgICAgY29sb3I6ICM5MzMzZWE7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtZGF0ZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuZmxhc2hjYXJkLWJvZHkge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5mbGFzaGNhcmQtcXVlc3Rpb24sXG4gICAgICAuZmxhc2hjYXJkLWFuc3dlciB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgIH1cblxuICAgICAgLmZsYXNoY2FyZC1xdWVzdGlvbiBzdHJvbmcsXG4gICAgICAuZmxhc2hjYXJkLWFuc3dlciBzdHJvbmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgIH1cblxuLmVtcHR5LXN0YXRlIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBwYWRkaW5nOiA0MHB4IDIwcHg7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBwb2ludGVyLWV2ZW50czogbm9uZTsgLyogXHVEODNEXHVERDI3IFx1NTE3M1x1OTUyRVx1RkYwMVx1N0E3QVx1NzJCNlx1NjAwMVx1NEUwRFx1NjJFNlx1NjIyQVx1NzBCOVx1NTFGQiAqL1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHotaW5kZXg6IDE7IC8qIFx1RDgzRFx1REQyNyBcdTc4NkVcdTRGRERcdTU3MjhcdTVERTVcdTUxNzdcdTY4MEZcdTRFMEJcdTY1QjkgKi9cbn1cblxuICAgICAgLmVtcHR5LWhpbnQge1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgfVxuXG4gICAgICAvKiA9PT09PT09PT09PT09PT09PT09PSBcdTU0Q0RcdTVFOTRcdTVGMEYgPT09PT09PT09PT09PT09PT09PT0gKi9cbiAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkge1xuICAgICAgICAubWFpbi1sYXlvdXQge1xuICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyO1xuICAgICAgICB9XG5cbiAgICAgICAgLmxlZnQtcGFuZWwge1xuICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIH1cblxuICAgICAgICAuY29udGVudC1ncmlkLFxuICAgICAgICAuY2FyZHMtZ3JpZCB7XG4gICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7XG4gICAgICAgIH1cbiAgICAgICAgICAuYmF0Y2gtYnRuIHtcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICB9XG5cbiAgICAgIC5iYXRjaC1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDU5LCAxMzAsIDI0NiwgMC4yKTtcbiAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTtcbiAgICAgIH1cblxuICAgICAgLyogXHU2Mjc5XHU5MUNGXHU2QTIxXHU1RjBGXHU2RkMwXHU2RDNCXHU3MkI2XHU2MDAxICovXG4gICAgICAuY29tcGFjdC1jYXJkLmJhdGNoLW1vZGUgLmJhdGNoLWJ0bixcbiAgICAgIC5ncmlkLWNhcmQuYmF0Y2gtbW9kZSAuYmF0Y2gtYnRuIHtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSg1OSwgMTMwLCAyNDYsIDAuMyk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtYWN0aW9ucyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGdhcDogNnB4O1xuICBtYXJnaW4tdG9wOiAxMHB4O1xuICBmbGV4LXdyYXA6IHdyYXA7XG4gIHBhZGRpbmc6IDhweDtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnktYWx0KTtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICBhbmltYXRpb246IHNsaWRlRG93biAwLjJzIGVhc2U7XG59XG4vKiBcdTYyNzlcdTkxQ0ZcdTY0Q0RcdTRGNUNcdTYzMDlcdTk0QUVcdTc5ODFcdTc1MjhcdTcyQjZcdTYwMDFcdUZGMDhcdTY1NzBcdTkxQ0ZcdTRFM0EwXHU2NUY2XHU3Njg0XHU4OUM2XHU4OUM5XHU1M0NEXHU5OTg4XHVGRjA5ICovXG4uYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bi1zaWRlYmFyOmhhcy10ZXh0KFwiKDApXCIpLFxuLmJhdGNoLWRlbGV0ZS1idG4tc2lkZWJhcjpoYXMtdGV4dChcIigwKVwiKSxcbi5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuLWhlYWRlcjpoYXMtdGV4dChcIigwKVwiKSxcbi5iYXRjaC1kZWxldGUtYnRuLWhlYWRlcjpoYXMtdGV4dChcIigwKVwiKSB7XG4gIG9wYWNpdHk6IDAuNTtcbiAgY3Vyc29yOiBub3QtYWxsb3dlZDtcbn1cbkBrZXlmcmFtZXMgc2xpZGVEb3duIHtcbiAgZnJvbSB7XG4gICAgb3BhY2l0eTogMDtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwcHgpO1xuICB9XG4gIHRvIHtcbiAgICBvcGFjaXR5OiAxO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTtcbiAgICBcbiAgfVxufVxuICAgICAgfVxuICAgIGA7XG5cbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICB9XG5cbiAgYXN5bmMgb25DbG9zZSgpIHtcbiAgICAvLyBcdTZFMDVcdTc0MDZcdTVCOUFcdTY1RjZcdTU2NjhcbiAgICBpZiAodGhpcy5zZWFyY2hEZWJvdW5jZVRpbWVyICE9PSBudWxsKSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc2VhcmNoRGVib3VuY2VUaW1lcik7XG4gICAgfVxuICAgIFxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09IFx1NjI3OVx1NkNFOFx1N0YxNlx1OEY5MVx1NkEyMVx1NjAwMVx1Njg0NiA9PT09PT09PT09PT09PT09PT09PVxuY2xhc3MgQW5ub3RhdGlvbk1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIHJlc3VsdDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgb25TdWJtaXQ6ICh0ZXh0OiBzdHJpbmcpID0+IHZvaWQ7XG4gIHByaXZhdGUgZGVmYXVsdFZhbHVlOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGRlZmF1bHRWYWx1ZTogc3RyaW5nLCBvblN1Ym1pdDogKHRleHQ6IHN0cmluZykgPT4gdm9pZCkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5kZWZhdWx0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIFxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdTI3MEZcdUZFMEYgXHU3RjE2XHU4RjkxXHU2Mjc5XHU2Q0U4JyB9KTtcblxuICAgIGNvbnN0IHRleHRhcmVhID0gY29udGVudEVsLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgIGNsczogJ2Fubm90YXRpb24tdGV4dGFyZWEnLFxuICAgICAgcGxhY2Vob2xkZXI6ICdcdThGOTNcdTUxNjVcdTRGNjBcdTc2ODRcdTYyNzlcdTZDRTguLi4nLFxuICAgICAgXG4gICAgICBcbiAgICB9KTtcbiAgICB0ZXh0YXJlYS52YWx1ZSA9IHRoaXMuZGVmYXVsdFZhbHVlO1xuICAgIHRleHRhcmVhLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRleHRhcmVhLnN0eWxlLm1pbkhlaWdodCA9ICcxMjBweCc7XG4gICAgdGV4dGFyZWEuc3R5bGUucGFkZGluZyA9ICcxMHB4JztcbiAgICB0ZXh0YXJlYS5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XG4gICAgdGV4dGFyZWEuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzZweCc7XG4gICAgdGV4dGFyZWEuc3R5bGUuZm9udEZhbWlseSA9ICd2YXIoLS1mb250LWludGVyZmFjZSknO1xuICAgIHRleHRhcmVhLnN0eWxlLmZvbnRTaXplID0gJzE0cHgnO1xuICAgIHRleHRhcmVhLnN0eWxlLnJlc2l6ZSA9ICd2ZXJ0aWNhbCc7XG4gICAgdGV4dGFyZWEuc3R5bGUubWFyZ2luVG9wID0gJzEycHgnO1xuXG4gICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ21vZGFsLWJ1dHRvbi1jb250YWluZXInIH0pO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5nYXAgPSAnOHB4JztcbiAgICBidXR0b25Db250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnZmxleC1lbmQnO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSAnMTZweCc7XG5cbiAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1NTNENlx1NkQ4OCcgfSk7XG4gICAgY2FuY2VsQnRuLnN0eWxlLnBhZGRpbmcgPSAnOHB4IDE2cHgnO1xuICAgIGNhbmNlbEJ0bi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNnB4JztcbiAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBzYXZlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnXHU0RkREXHU1QjU4JyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgc2F2ZUJ0bi5zdHlsZS5wYWRkaW5nID0gJzhweCAxNnB4JztcbiAgICBzYXZlQnRuLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc2cHgnO1xuICAgIHNhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLnJlc3VsdCA9IHRleHRhcmVhLnZhbHVlO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgdGV4dGFyZWEuZm9jdXMoKTtcbiAgICBcbiAgICAvLyBcdTVGRUJcdTYzNzdcdTk1MkVcdTY1MkZcdTYzMDFcbiAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAoZS5jdHJsS2V5IHx8IGUubWV0YUtleSkpIHtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSB0ZXh0YXJlYS52YWx1ZTtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICBcbiAgICBpZiAodGhpcy5yZXN1bHQgIT09IG51bGwpIHtcbiAgICAgIHRoaXMub25TdWJtaXQodGhpcy5yZXN1bHQpO1xuICAgIH1cbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PSBcdTk1RUFcdTUzNjFcdTUyMUJcdTVFRkFcdTZBMjFcdTYwMDFcdTY4NDYgPT09PT09PT09PT09PT09PT09PT1cbmNsYXNzIEZsYXNoY2FyZENyZWF0aW9uTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgdW5pdDogQ29udGVudFVuaXQ7XG4gIHByaXZhdGUgdHlwZTogJ3FhJyB8ICdjbG96ZSc7XG4gIHByaXZhdGUgb25TdWJtaXQ6IChxdWVzdGlvbjogc3RyaW5nLCBhbnN3ZXI6IHN0cmluZykgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICB1bml0OiBDb250ZW50VW5pdCxcbiAgICB0eXBlOiAncWEnIHwgJ2Nsb3plJyxcbiAgICBvblN1Ym1pdDogKHF1ZXN0aW9uOiBzdHJpbmcsIGFuc3dlcjogc3RyaW5nKSA9PiB2b2lkXG4gICkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy51bml0ID0gdW5pdDtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gzJywge1xuICAgICAgdGV4dDogYFx1RDgzQ1x1RENDRiBcdTUyMUJcdTVFRkEke3RoaXMudHlwZSA9PT0gJ3FhJyA/ICdRJkEnIDogJ1x1NTg2Qlx1N0E3QSd9XHU5NUVBXHU1MzYxYFxuICAgIH0pO1xuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU1MzlGXHU2NTg3XG4gICAgY29uc3Qgc291cmNlRGl2ID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2ZsYXNoY2FyZC1zb3VyY2UnIH0pO1xuICAgIHNvdXJjZURpdi5zdHlsZS5wYWRkaW5nID0gJzEwcHgnO1xuICAgIHNvdXJjZURpdi5zdHlsZS5iYWNrZ3JvdW5kID0gJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KSc7XG4gICAgc291cmNlRGl2LnN0eWxlLmJvcmRlclJhZGl1cyA9ICc2cHgnO1xuICAgIHNvdXJjZURpdi5zdHlsZS5tYXJnaW5Ub3AgPSAnMTJweCc7XG4gICAgc291cmNlRGl2LnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxMnB4JztcbiAgICBzb3VyY2VEaXYuc3R5bGUuZm9udFNpemUgPSAnMTNweCc7XG4gICAgc291cmNlRGl2LnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcbiAgICBzb3VyY2VEaXYuaW5uZXJIVE1MID0gYDxzdHJvbmc+XHU1MzlGXHU2NTg3XHVGRjFBPC9zdHJvbmc+JHt0aGlzLnVuaXQuY29udGVudH1gO1xuXG4gICAgLy8gXHU5NUVFXHU5ODk4XHU4RjkzXHU1MTY1XG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdsYWJlbCcsIHtcbiAgICAgIHRleHQ6IHRoaXMudHlwZSA9PT0gJ3FhJyA/ICdcdTk1RUVcdTk4OTgnIDogJ1x1NTg2Qlx1N0E3QVx1OTg5OFx1NUU3MicsXG4gICAgICBjbHM6ICdmbGFzaGNhcmQtbGFiZWwnXG4gICAgfSkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgXG4gICAgY29uc3QgcXVlc3Rpb25JbnB1dCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICBjbHM6ICdmbGFzaGNhcmQtaW5wdXQnLFxuICAgICAgcGxhY2Vob2xkZXI6IHRoaXMudHlwZSA9PT0gJ3FhJyBcbiAgICAgICAgPyAnXHU4RjkzXHU1MTY1XHU5NUVFXHU5ODk4Li4uJyBcbiAgICAgICAgOiAnXHU3NTI4IHt7YzE6Oi4uLn19IFx1NjgwN1x1OEJCMFx1OTcwMFx1ODk4MVx1NTg2Qlx1N0E3QVx1NzY4NFx1NTE4NVx1NUJCOSdcbiAgICB9KTtcbiAgICBxdWVzdGlvbklucHV0LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUubWluSGVpZ2h0ID0gJzgwcHgnO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUucGFkZGluZyA9ICcxMHB4JztcbiAgICBxdWVzdGlvbklucHV0LnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpJztcbiAgICBxdWVzdGlvbklucHV0LnN0eWxlLmJvcmRlclJhZGl1cyA9ICc2cHgnO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUubWFyZ2luVG9wID0gJzhweCc7XG4gICAgcXVlc3Rpb25JbnB1dC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMTJweCc7XG4gICAgcXVlc3Rpb25JbnB1dC5zdHlsZS5mb250U2l6ZSA9ICcxNHB4JztcbiAgICBxdWVzdGlvbklucHV0LnN0eWxlLnJlc2l6ZSA9ICd2ZXJ0aWNhbCc7XG5cbiAgICAvLyBcdTdCNTRcdTY4NDhcdThGOTNcdTUxNjVcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2xhYmVsJywge1xuICAgICAgdGV4dDogJ1x1N0I1NFx1Njg0OCcsXG4gICAgICBjbHM6ICdmbGFzaGNhcmQtbGFiZWwnXG4gICAgfSkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgXG4gICAgY29uc3QgYW5zd2VySW5wdXQgPSBjb250ZW50RWwuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgY2xzOiAnZmxhc2hjYXJkLWlucHV0JyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnXHU4RjkzXHU1MTY1XHU3QjU0XHU2ODQ4Li4uJ1xuICAgIH0pO1xuICAgIGFuc3dlcklucHV0LnZhbHVlID0gdGhpcy51bml0LmNvbnRlbnQ7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUubWluSGVpZ2h0ID0gJzgwcHgnO1xuICAgIGFuc3dlcklucHV0LnN0eWxlLnBhZGRpbmcgPSAnMTBweCc7XG4gICAgYW5zd2VySW5wdXQuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xuICAgIGFuc3dlcklucHV0LnN0eWxlLmJvcmRlclJhZGl1cyA9ICc2cHgnO1xuICAgIGFuc3dlcklucHV0LnN0eWxlLm1hcmdpblRvcCA9ICc4cHgnO1xuICAgIGFuc3dlcklucHV0LnN0eWxlLmZvbnRTaXplID0gJzE0cHgnO1xuICAgIGFuc3dlcklucHV0LnN0eWxlLnJlc2l6ZSA9ICd2ZXJ0aWNhbCc7XG5cbiAgICAvLyBcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG4gICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmdhcCA9ICc4cHgnO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LWVuZCc7XG4gICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICcxNnB4JztcblxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHU1M0Q2XHU2RDg4JyB9KTtcbiAgICBjYW5jZWxCdG4uc3R5bGUucGFkZGluZyA9ICc4cHggMTZweCc7XG4gICAgY2FuY2VsQnRuLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc2cHgnO1xuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGNyZWF0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1x1NTIxQlx1NUVGQScsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIGNyZWF0ZUJ0bi5zdHlsZS5wYWRkaW5nID0gJzhweCAxNnB4JztcbiAgICBjcmVhdGVCdG4uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzZweCc7XG4gICAgY3JlYXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgcXVlc3Rpb24gPSBxdWVzdGlvbklucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgIGNvbnN0IGFuc3dlciA9IGFuc3dlcklucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgIFxuICAgICAgaWYgKCFxdWVzdGlvbiB8fCAhYW5zd2VyKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdThCRjdcdTU4NkJcdTUxOTlcdTVCOENcdTY1NzRcdTRGRTFcdTYwNkYnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0aGlzLm9uU3VibWl0KHF1ZXN0aW9uLCBhbnN3ZXIpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgcXVlc3Rpb25JbnB1dC5mb2N1cygpO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuLy8gPT09PT09PT09PT09PT09PT09PT0gXHU5NUVBXHU1MzYxXHU3RjE2XHU4RjkxXHU2QTIxXHU2MDAxXHU2ODQ2ID09PT09PT09PT09PT09PT09PT09XG5leHBvcnQgY2xhc3MgRmxhc2hjYXJkRWRpdE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIGNhcmQ6IEZsYXNoY2FyZDtcbiAgcHJpdmF0ZSBvblN1Ym1pdDogKHF1ZXN0aW9uOiBzdHJpbmcsIGFuc3dlcjogc3RyaW5nKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwcDogQXBwLFxuICAgIGNhcmQ6IEZsYXNoY2FyZCxcbiAgICBvblN1Ym1pdDogKHF1ZXN0aW9uOiBzdHJpbmcsIGFuc3dlcjogc3RyaW5nKSA9PiB2b2lkXG4gICkge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5jYXJkID0gY2FyZDtcbiAgICB0aGlzLm9uU3VibWl0ID0gb25TdWJtaXQ7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1MjcwRlx1RkUwRiBcdTdGMTZcdThGOTFcdTk1RUFcdTUzNjEnIH0pO1xuXG4gICAgLy8gXHU5NUVFXHU5ODk4XHU4RjkzXHU1MTY1XG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdsYWJlbCcsIHsgdGV4dDogJ1x1OTVFRVx1OTg5OCcgfSkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgY29uc3QgcXVlc3Rpb25JbnB1dCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICBjbHM6ICdmbGFzaGNhcmQtaW5wdXQnXG4gICAgfSk7XG4gICAgcXVlc3Rpb25JbnB1dC52YWx1ZSA9IHRoaXMuY2FyZC5mcm9udDtcbiAgICBxdWVzdGlvbklucHV0LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUubWluSGVpZ2h0ID0gJzgwcHgnO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUucGFkZGluZyA9ICcxMHB4JztcbiAgICBxdWVzdGlvbklucHV0LnN0eWxlLm1hcmdpblRvcCA9ICc4cHgnO1xuICAgIHF1ZXN0aW9uSW5wdXQuc3R5bGUubWFyZ2luQm90dG9tID0gJzEycHgnO1xuXG4gICAgLy8gXHU3QjU0XHU2ODQ4XHU4RjkzXHU1MTY1XG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdsYWJlbCcsIHsgdGV4dDogJ1x1N0I1NFx1Njg0OCcgfSkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgY29uc3QgYW5zd2VySW5wdXQgPSBjb250ZW50RWwuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgY2xzOiAnZmxhc2hjYXJkLWlucHV0J1xuICAgIH0pO1xuICAgIGFuc3dlcklucHV0LnZhbHVlID0gQXJyYXkuaXNBcnJheSh0aGlzLmNhcmQuYmFjaykgXG4gICAgICA/IHRoaXMuY2FyZC5iYWNrLmpvaW4oJywgJykgXG4gICAgICA6IHRoaXMuY2FyZC5iYWNrO1xuICAgIGFuc3dlcklucHV0LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIGFuc3dlcklucHV0LnN0eWxlLm1pbkhlaWdodCA9ICc4MHB4JztcbiAgICBhbnN3ZXJJbnB1dC5zdHlsZS5wYWRkaW5nID0gJzEwcHgnO1xuICAgIGFuc3dlcklucHV0LnN0eWxlLm1hcmdpblRvcCA9ICc4cHgnO1xuXG4gICAgLy8gXHU2MzA5XHU5NEFFXG4gICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5nYXAgPSAnOHB4JztcbiAgICBidXR0b25Db250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnZmxleC1lbmQnO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSAnMTZweCc7XG5cbiAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1NTNENlx1NkQ4OCcgfSk7XG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblxuICAgIGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdcdTRGRERcdTVCNTgnLFxuICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICB9KTtcbiAgICBzYXZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgcXVlc3Rpb24gPSBxdWVzdGlvbklucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgIGNvbnN0IGFuc3dlciA9IGFuc3dlcklucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgIGlmICghcXVlc3Rpb24gfHwgIWFuc3dlcikge1xuICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU4QkY3XHU1ODZCXHU1MTk5XHU1QjhDXHU2NTc0XHU0RkUxXHU2MDZGJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMub25TdWJtaXQocXVlc3Rpb24sIGFuc3dlcik7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICBxdWVzdGlvbklucHV0LmZvY3VzKCk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn0iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IEZsYXNoY2FyZCB9IGZyb20gJy4uL2NvcmUvRmxhc2hjYXJkTWFuYWdlcic7XG5pbXBvcnQgeyBDYXJkU2NoZWR1bGVyLCBSZXZpZXdFYXNlIH0gZnJvbSAnLi4vY29yZS9DYXJkU2NoZWR1bGVyJztcbmltcG9ydCB7IEZsYXNoY2FyZEVkaXRNb2RhbCB9IGZyb20gJy4vU2lkZWJhck92ZXJ2aWV3Vmlldyc7XG5cbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfUkVWSUVXID0gJ2xlYXJuaW5nLXN5c3RlbS1yZXZpZXcnO1xuXG5leHBvcnQgY2xhc3MgUmV2aWV3VmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbjtcbiAgcHJpdmF0ZSBzY2hlZHVsZXI6IENhcmRTY2hlZHVsZXI7XG4gIHByaXZhdGUgZHVlQ2FyZHM6IEZsYXNoY2FyZFtdID0gW107XG4gIHByaXZhdGUgY3VycmVudENhcmRJbmRleDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBjdXJyZW50Q2FyZDogRmxhc2hjYXJkIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc2hvd0Fuc3dlcjogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIHN0YXJ0VGltZTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSB1c2VyQW5zd2Vyczogc3RyaW5nW10gPSBbXTtcbiAgcHJpdmF0ZSB1c2VyQW5zd2VyOiBzdHJpbmcgPSAnJzsgLy8gUUEgXHU1MzYxXHU3MjQ3XHU3Njg0XHU3NTI4XHU2MjM3XHU3QjU0XHU2ODQ4XG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbikge1xuICAgIHN1cGVyKGxlYWYpO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMuc2NoZWR1bGVyID0gbmV3IENhcmRTY2hlZHVsZXIoKTtcbiAgfVxuXG4gIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFZJRVdfVFlQRV9SRVZJRVc7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnRmxhc2hjYXJkIFJldmlldyc7XG4gIH1cblxuICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdsYXllcnMnO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZER1ZUNhcmRzKCk7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICAgIHRoaXMucmVnaXN0ZXJLZXlib2FyZEhhbmRsZXJzKCk7XG4gIH1cblxuICBhc3luYyBvbkNsb3NlKCkge31cblxuICBwcml2YXRlIGFzeW5jIGxvYWREdWVDYXJkcygpIHtcbiAgICB0aGlzLmR1ZUNhcmRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXREdWVDYXJkcygpO1xuICAgIHRoaXMuY3VycmVudENhcmRJbmRleCA9IDA7XG4gICAgdGhpcy5zaG93QW5zd2VyID0gZmFsc2U7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMua2V5Ym9hcmRIYW5kbGVyKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgY29udGFpbmVyLmFkZENsYXNzKCdyZXZpZXctY29udGFpbmVyJyk7XG5cbiAgICBpZiAodGhpcy5kdWVDYXJkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMucmVuZGVyTm9EdWVDYXJkcyhjb250YWluZXIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5ld0NhcmQgPSB0aGlzLmR1ZUNhcmRzW3RoaXMuY3VycmVudENhcmRJbmRleF07XG4gICAgXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU1MjA3XHU2MzYyXHU1MjMwXHU2NUIwXHU1MzYxXHU3MjQ3XHVGRjBDXHU5MUNEXHU3RjZFXHU3MkI2XHU2MDAxXG4gICAgaWYgKHRoaXMuY3VycmVudENhcmQ/LmlkICE9PSBuZXdDYXJkPy5pZCkge1xuICAgICAgdGhpcy51c2VyQW5zd2VycyA9IFtdO1xuICAgICAgdGhpcy51c2VyQW5zd2VyID0gJyc7XG4gICAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcbiAgICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5jdXJyZW50Q2FyZCA9IG5ld0NhcmQ7XG4gICAgXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU2NjNFXHU3OTNBXHU5NUVFXHU5ODk4XHU0RTE0XHU1RjAwXHU1OUNCXHU2NUY2XHU5NUY0XHU0RTNBMFx1RkYwQ1x1OEJCRVx1N0Y2RVx1NUYwMFx1NTlDQlx1NjVGNlx1OTVGNFxuICAgIGlmICghdGhpcy5zaG93QW5zd2VyICYmIHRoaXMuc3RhcnRUaW1lID09PSAwKSB7XG4gICAgICB0aGlzLnN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgfVxuXG4gICAgLy8gXHU4RkRCXHU1RUE2XHU2NzYxXG4gICAgdGhpcy5yZW5kZXJQcm9ncmVzcyhjb250YWluZXIpO1xuXG4gICAgLy8gXHU1MzYxXHU3MjQ3XHU1MzNBXHU1N0RGXG4gICAgY29uc3QgY2FyZEFyZWEgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1hcmVhJyB9KTtcblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NTNGM1x1NEUwQVx1ODlEMlx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVxuICAgIHRoaXMucmVuZGVyVG9wQWN0aW9ucyhjYXJkQXJlYSk7XG5cbiAgICBpZiAodGhpcy5zaG93QW5zd2VyKSB7XG4gICAgICB0aGlzLnJlbmRlckFuc3dlcihjYXJkQXJlYSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVuZGVyUXVlc3Rpb24oY2FyZEFyZWEpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyVG9wQWN0aW9ucyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgYWN0aW9uc0JhciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd0b3AtYWN0aW9ucy1iYXInIH0pO1xuXG4gICAgLy8gSnVtcCB0byBzb3VyY2UgXHU2MzA5XHU5NEFFXHVGRjA4XHU1M0VBXHU2NjNFXHU3OTNBXHU1NkZFXHU2ODA3XHVGRjA5XG4gICAgY29uc3QganVtcEJ0biA9IGFjdGlvbnNCYXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIGNsczogJ3RvcC1hY3Rpb24tYnRuIGp1bXAtaWNvbi1idG4nLFxuICAgICAgYXR0cjogeyAnYXJpYS1sYWJlbCc6ICdKdW1wIHRvIFNvdXJjZScgfVxuICAgIH0pO1xuICAgIGp1bXBCdG4uaW5uZXJIVE1MID0gJ1x1MjE5Nyc7XG4gICAganVtcEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuanVtcFRvU291cmNlKCkpO1xuXG4gICAgLy8gTW9yZSBcdTgzRENcdTUzNTVcbiAgICBjb25zdCBtb3JlQnRuID0gYWN0aW9uc0Jhci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgY2xzOiAndG9wLWFjdGlvbi1idG4gbW9yZS1idG4nLFxuICAgICAgYXR0cjogeyAnYXJpYS1sYWJlbCc6ICdNb3JlIGFjdGlvbnMnIH1cbiAgICB9KTtcbiAgICBtb3JlQnRuLmlubmVySFRNTCA9ICdcdTIyRUYnO1xuICAgIFxuICAgIC8vIFx1NTIxQlx1NUVGQVx1NEUwQlx1NjJDOVx1ODNEQ1x1NTM1NVxuICAgIGNvbnN0IGRyb3Bkb3duID0gYWN0aW9uc0Jhci5jcmVhdGVEaXYoeyBjbHM6ICdtb3JlLWRyb3Bkb3duJyB9KTtcbiAgICBkcm9wZG93bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgLy8gXHU2REZCXHU1MkEwXHU3RjE2XHU4RjkxXHU5MDA5XHU5ODc5XG5jb25zdCBlZGl0T3B0aW9uID0gZHJvcGRvd24uY3JlYXRlRWwoJ2RpdicsIHtcbiAgY2xzOiAnZHJvcGRvd24taXRlbSdcbn0pO1xuZWRpdE9wdGlvbi5pbm5lckhUTUwgPSAnXHUyNzBGXHVGRTBGIEVkaXQgQ2FyZCc7XG5lZGl0T3B0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBpZiAoIXRoaXMuY3VycmVudENhcmQpIHJldHVybjtcbiAgdGhpcy5lZGl0Q3VycmVudEZsYXNoY2FyZCgpO1xuICBkcm9wZG93bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xufSk7XG5cbiAgICBjb25zdCBkZWxldGVPcHRpb24gPSBkcm9wZG93bi5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgY2xzOiAnZHJvcGRvd24taXRlbSBkZWxldGUtaXRlbSdcbiAgICB9KTtcbiAgICBkZWxldGVPcHRpb24uaW5uZXJIVE1MID0gJ1x1RDgzRFx1REREMVx1RkUwRiBEZWxldGUgQ2FyZCc7XG4gICAgZGVsZXRlT3B0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLmN1cnJlbnRDYXJkKSByZXR1cm47XG4gICAgICBpZiAoY29uZmlybSgnXHU3ODZFXHU1QjlBXHU4OTgxXHU1MjIwXHU5NjY0XHU4RkQ5XHU1RjIwXHU5NUVBXHU1MzYxXHU1NDE3XHVGRjFGXHU1MjIwXHU5NjY0XHU1NDBFXHU1QzA2XHU0RUNFXHU1OTBEXHU0RTYwXHU5NjFGXHU1MjE3XHU0RTJEXHU3OUZCXHU5NjY0XHUzMDAyJykpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5kZWxldGVGbGFzaGNhcmQodGhpcy5jdXJyZW50Q2FyZC5pZCk7XG4gICAgICB9XG4gICAgICBkcm9wZG93bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH0pO1xuXG4gICAgLy8gXHU1MjA3XHU2MzYyXHU0RTBCXHU2MkM5XHU4M0RDXHU1MzU1XG4gICAgbW9yZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgZHJvcGRvd24uc3R5bGUuZGlzcGxheSA9IGRyb3Bkb3duLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJyA/ICdibG9jaycgOiAnbm9uZSc7XG4gICAgfSk7XG5cbiAgICAvLyBcdTcwQjlcdTUxRkJcdTU5MTZcdTkwRThcdTUxNzNcdTk1RURcdTgzRENcdTUzNTVcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGRyb3Bkb3duLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfSk7XG5cbiAgICBkcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJOb0R1ZUNhcmRzKGNvbnRhaW5lcjogRWxlbWVudCkge1xuICAgIGNvbnN0IGVtcHR5U3RhdGUgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZW1wdHktc3RhdGUnIH0pO1xuICAgIGVtcHR5U3RhdGUuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVEODNDXHVERjg5IEFsbCBEb25lIScgfSk7XG4gICAgZW1wdHlTdGF0ZS5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ05vIGNhcmRzIGR1ZSBmb3IgcmV2aWV3IHJpZ2h0IG5vdy4nIH0pO1xuXG4gICAgY29uc3Qgc3RhdHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldFN0YXRzKCk7XG4gICAgY29uc3Qgc3RhdHNEaXYgPSBlbXB0eVN0YXRlLmNyZWF0ZURpdih7IGNsczogJ3N0YXRzLXN1bW1hcnknIH0pO1xuICAgIHN0YXRzRGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgVG90YWwgY2FyZHM6ICR7c3RhdHMudG90YWx9YCB9KTtcbiAgICBzdGF0c0Rpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogYE5ldyBjYXJkczogJHtzdGF0cy5uZXd9YCB9KTtcbiAgICBzdGF0c0Rpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogYFJldmlld2VkIHRvZGF5OiAke3N0YXRzLnJldmlld2VkVG9kYXl9YCB9KTtcblxuICAgIGNvbnN0IGNsb3NlQnRuID0gZW1wdHlTdGF0ZS5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ0Nsb3NlIFJldmlldycsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5sZWFmLmRldGFjaCgpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJQcm9ncmVzcyhjb250YWluZXI6IEVsZW1lbnQpIHtcbiAgICBjb25zdCBwcm9ncmVzc0JhciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdwcm9ncmVzcy1iYXInIH0pO1xuICAgIFxuICAgIGNvbnN0IHN0YXRzID0gcHJvZ3Jlc3NCYXIuY3JlYXRlRGl2KHsgY2xzOiAncHJvZ3Jlc3Mtc3RhdHMnIH0pO1xuICAgIHN0YXRzLmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IGAke3RoaXMuY3VycmVudENhcmRJbmRleCArIDF9IC8gJHt0aGlzLmR1ZUNhcmRzLmxlbmd0aH1gLFxuICAgICAgY2xzOiAncHJvZ3Jlc3MtdGV4dCdcbiAgICB9KTtcblxuXG5cbiAgICBjb25zdCBiYXJDb250YWluZXIgPSBwcm9ncmVzc0Jhci5jcmVhdGVEaXYoeyBjbHM6ICdiYXItY29udGFpbmVyJyB9KTtcbiAgICBjb25zdCBiYXIgPSBiYXJDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnYmFyJyB9KTtcbiAgICBjb25zdCBwcm9ncmVzcyA9ICgodGhpcy5jdXJyZW50Q2FyZEluZGV4ICsgMSkgLyB0aGlzLmR1ZUNhcmRzLmxlbmd0aCkgKiAxMDA7XG4gICAgYmFyLnN0eWxlLndpZHRoID0gYCR7cHJvZ3Jlc3N9JWA7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclF1ZXN0aW9uKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAoIXRoaXMuY3VycmVudENhcmQpIHJldHVybjtcblxuICAgIC8vIFx1NTM2MVx1NzI0N1x1NEZFMVx1NjA2RlxuICAgIGNvbnN0IGNhcmRJbmZvID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NhcmQtaW5mbycgfSk7XG4gICAgY2FyZEluZm8uY3JlYXRlU3Bhbih7IFxuICAgICAgdGV4dDogdGhpcy5jdXJyZW50Q2FyZC50eXBlID09PSAncWEnID8gJ1x1RDgzRFx1RENERCBRJkEnIDogJ1x1MjcwRlx1RkUwRiBDbG96ZScsXG4gICAgICBjbHM6ICdjYXJkLXR5cGUnXG4gICAgfSk7XG4gICAgY2FyZEluZm8uY3JlYXRlU3Bhbih7IFxuICAgICAgdGV4dDogYERlY2s6ICR7dGhpcy5jdXJyZW50Q2FyZC5kZWNrfWAsXG4gICAgICBjbHM6ICdjYXJkLWRlY2snXG4gICAgfSk7XG5cbiAgICAvLyBcdTk1RUVcdTk4OThcdTUzM0FcdTU3REZcbiAgICBjb25zdCBxdWVzdGlvbkFyZWEgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncXVlc3Rpb24tYXJlYScgfSk7XG4gICAgcXVlc3Rpb25BcmVhLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1F1ZXN0aW9uJyB9KTtcbiAgICBcbiAgICBjb25zdCBxdWVzdGlvblRleHQgPSBxdWVzdGlvbkFyZWEuY3JlYXRlRGl2KHsgY2xzOiAncXVlc3Rpb24tdGV4dCcgfSk7XG4gICAgcXVlc3Rpb25UZXh0LnRleHRDb250ZW50ID0gdGhpcy5jdXJyZW50Q2FyZC5mcm9udDtcblxuICAgIC8vIFx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1OEY5M1x1NTE2NVx1Njg0NlxuICAgIGlmICh0aGlzLmN1cnJlbnRDYXJkLnR5cGUgPT09ICdjbG96ZScgJiYgdGhpcy5jdXJyZW50Q2FyZC5jbG96ZSkge1xuICAgICAgY29uc3QgaW5wdXRBcmVhID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2Nsb3plLWlucHV0LWFyZWEnIH0pO1xuICAgICAgaW5wdXRBcmVhLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0ZpbGwgaW4gdGhlIGJsYW5rczonIH0pO1xuXG4gICAgICAvLyBcdTc4NkVcdTRGREQgdXNlckFuc3dlcnMgXHU2NTcwXHU3RUM0XHU2NzA5XHU4REIzXHU1OTFGXHU3Njg0XHU5NTdGXHU1RUE2XG4gICAgICBpZiAodGhpcy51c2VyQW5zd2Vycy5sZW5ndGggPCB0aGlzLmN1cnJlbnRDYXJkLmNsb3plLmRlbGV0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy51c2VyQW5zd2VycyA9IG5ldyBBcnJheSh0aGlzLmN1cnJlbnRDYXJkLmNsb3plLmRlbGV0aW9ucy5sZW5ndGgpLmZpbGwoJycpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmN1cnJlbnRDYXJkLmNsb3plLmRlbGV0aW9ucy5mb3JFYWNoKChkZWxldGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXRHcm91cCA9IGlucHV0QXJlYS5jcmVhdGVEaXYoeyBjbHM6ICdpbnB1dC1ncm91cCcgfSk7XG4gICAgICAgIGlucHV0R3JvdXAuY3JlYXRlU3Bhbih7IHRleHQ6IGAke2luZGV4ICsgMX0uIGAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBpbnB1dCA9IGlucHV0R3JvdXAuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICBwbGFjZWhvbGRlcjogJ1lvdXIgYW5zd2VyLi4uJyxcbiAgICAgICAgICBjbHM6ICdjbG96ZS1pbnB1dCcsXG4gICAgICAgICAgdmFsdWU6IHRoaXMudXNlckFuc3dlcnNbaW5kZXhdIHx8ICcnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgICAgIHRoaXMudXNlckFuc3dlcnNbaW5kZXhdID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBpbnB1dC5mb2N1cygpLCA1MCk7XG4gICAgICAgIH1cbiAgICAgIFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUUEgXHU1MzYxXHU3MjQ3XHU4RjkzXHU1MTY1XHU2ODQ2XG4gICAgaWYgKHRoaXMuY3VycmVudENhcmQudHlwZSA9PT0gJ3FhJykge1xuICAgICAgY29uc3QgaW5wdXRBcmVhID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3FhLWlucHV0LWFyZWEnIH0pO1xuICAgICAgaW5wdXRBcmVhLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1lvdXIgQW5zd2VyOicgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHRleHRhcmVhID0gaW5wdXRBcmVhLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgICAgcGxhY2Vob2xkZXI6ICdUeXBlIHlvdXIgYW5zd2VyIGhlcmUuLi4nLFxuICAgICAgICBjbHM6ICdxYS1pbnB1dCcsXG4gICAgICAgIHZhbHVlOiB0aGlzLnVzZXJBbnN3ZXJcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICAgIHRoaXMudXNlckFuc3dlciA9IChlLnRhcmdldCBhcyBIVE1MVGV4dEFyZWFFbGVtZW50KS52YWx1ZTtcbiAgICAgIH0pO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB0ZXh0YXJlYS5mb2N1cygpLCA1MCk7XG4gICAgfVxuXG4gICAgLy8gXHU2MzA5XHU5NEFFXHU1MzNBXHU1N0RGXG4gICAgY29uc3QgYnV0dG9uQXJlYSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdidXR0b24tYXJlYScgfSk7XG5cbiAgICAvLyBcdTY2M0VcdTc5M0FcdTdCNTRcdTY4NDhcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBzaG93QW5zd2VyQnRuID0gYnV0dG9uQXJlYS5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1Nob3cgQW5zd2VyJyxcbiAgICAgIGNsczogJ21vZC1jdGEgc2hvdy1hbnN3ZXItYnRuJyxcbiAgICAgIGF0dHI6IHsgdGl0bGU6ICdQcmVzcyBFbnRlciBvciBUYWInfSBcbiAgICB9KTtcbiAgICBzaG93QW5zd2VyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5zaG93QW5zd2VyID0gdHJ1ZTtcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckFuc3dlcihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRDYXJkKSByZXR1cm47XG5cbiAgICAvLyBcdTUzNjFcdTcyNDdcdTRGRTFcdTYwNkZcbiAgICBjb25zdCBjYXJkSW5mbyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLWluZm8nIH0pO1xuICAgIGNhcmRJbmZvLmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IHRoaXMuY3VycmVudENhcmQudHlwZSA9PT0gJ3FhJyA/ICdcdUQ4M0RcdURDREQgUSZBJyA6ICdcdTI3MEZcdUZFMEYgQ2xvemUnLFxuICAgICAgY2xzOiAnY2FyZC10eXBlJ1xuICAgIH0pO1xuICAgIGNhcmRJbmZvLmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IGBEZWNrOiAke3RoaXMuY3VycmVudENhcmQuZGVja31gLFxuICAgICAgY2xzOiAnY2FyZC1kZWNrJ1xuICAgIH0pO1xuXG4gICAgLy8gXHU5NUVFXHU5ODk4XHU1NkRFXHU5ODdFXG4gICAgY29uc3QgcXVlc3Rpb25SZXZpZXcgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncXVlc3Rpb24tcmV2aWV3JyB9KTtcbiAgICBxdWVzdGlvblJldmlldy5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdRdWVzdGlvbjonIH0pO1xuICAgIHF1ZXN0aW9uUmV2aWV3LmNyZWF0ZURpdih7IFxuICAgICAgdGV4dDogdGhpcy5jdXJyZW50Q2FyZC5mcm9udCxcbiAgICAgIGNsczogJ3Jldmlldy10ZXh0J1xuICAgIH0pO1xuXG4gICAgLy8gXHU3QjU0XHU2ODQ4XHU1MzNBXHU1N0RGXG4gICAgY29uc3QgYW5zd2VyQXJlYSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdhbnN3ZXItYXJlYScgfSk7XG5cbiAgICBpZiAodGhpcy5jdXJyZW50Q2FyZC50eXBlID09PSAnY2xvemUnICYmIHRoaXMuY3VycmVudENhcmQuY2xvemUpIHtcbiAgICAgIC8vIFx1NjYzRVx1NzkzQVx1NUI4Q1x1NjU3NFx1NjU4N1x1NjcyQ1xuICAgICAgY29uc3QgZnVsbFRleHQgPSBhbnN3ZXJBcmVhLmNyZWF0ZURpdih7IGNsczogJ2Z1bGwtdGV4dCcgfSk7XG4gICAgICBmdWxsVGV4dC50ZXh0Q29udGVudCA9IHRoaXMuY3VycmVudENhcmQuY2xvemUub3JpZ2luYWw7XG5cbiAgICAgIC8vIFx1NjYzRVx1NzkzQVx1NzUyOFx1NjIzN1x1N0I1NFx1Njg0OFx1NUJGOVx1NkJENFxuICAgICAgaWYgKHRoaXMudXNlckFuc3dlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBjb21wYXJpc29uID0gYW5zd2VyQXJlYS5jcmVhdGVEaXYoeyBjbHM6ICdhbnN3ZXItY29tcGFyaXNvbicgfSk7XG4gICAgICAgIGNvbXBhcmlzb24uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnWW91ciBBbnN3ZXJzOicgfSk7XG5cbiAgICAgICAgdGhpcy5jdXJyZW50Q2FyZC5jbG96ZS5kZWxldGlvbnMuZm9yRWFjaCgoZGVsZXRpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGNvbXBhcmlzb24uY3JlYXRlRGl2KHsgY2xzOiAnY29tcGFyaXNvbi1pdGVtJyB9KTtcbiAgICAgICAgICBpdGVtLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHtpbmRleCArIDF9LiBgIH0pO1xuXG4gICAgICAgICAgY29uc3QgdXNlckFuc3dlciA9IHRoaXMudXNlckFuc3dlcnNbaW5kZXhdIHx8ICcnO1xuICAgICAgICAgIGNvbnN0IGV2YWx1YXRpb24gPSB0aGlzLnNjaGVkdWxlci5ldmFsdWF0ZUFuc3dlcihcbiAgICAgICAgICAgIGRlbGV0aW9uLmFuc3dlcixcbiAgICAgICAgICAgIHVzZXJBbnN3ZXJcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgY29uc3QgdXNlclNwYW4gPSBpdGVtLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgICAgdGV4dDogdXNlckFuc3dlciB8fCAnKGVtcHR5KScsXG4gICAgICAgICAgICBjbHM6IGB1c2VyLWFuc3dlciAke2V2YWx1YXRpb24uY29ycmVjdG5lc3N9YFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFx1Nzg2RVx1NEZERFx1N0M3Qlx1NTQwRFx1NkI2M1x1Nzg2RVx1OEJCRVx1N0Y2RVxuICAgICAgICAgIHVzZXJTcGFuLmNsYXNzTGlzdC5hZGQoJ3VzZXItYW5zd2VyJywgZXZhbHVhdGlvbi5jb3JyZWN0bmVzcyk7XG5cbiAgICAgICAgICBpdGVtLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnIFx1MjE5MiAnIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGl0ZW0uY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgICB0ZXh0OiBkZWxldGlvbi5hbnN3ZXIsXG4gICAgICAgICAgICBjbHM6ICdjb3JyZWN0LWFuc3dlcidcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChldmFsdWF0aW9uLmNvcnJlY3RuZXNzID09PSAncGFydGlhbCcpIHtcbiAgICAgICAgICAgIGl0ZW0uY3JlYXRlRWwoJ3NtYWxsJywge1xuICAgICAgICAgICAgICB0ZXh0OiBgICgke01hdGgucm91bmQoZXZhbHVhdGlvbi5zaW1pbGFyaXR5ICogMTAwKX0lIG1hdGNoKWAsXG4gICAgICAgICAgICAgIGNsczogJ3NpbWlsYXJpdHktaW5mbydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFEmQSBcdTdCNTRcdTY4NDhcbiAgICAgIGNvbnN0IGNvcnJlY3RBbnN3ZXIgPSB0aGlzLmN1cnJlbnRDYXJkLmJhY2sgYXMgc3RyaW5nO1xuICAgICAgXG4gICAgICAvLyBcdTUyMUJcdTVFRkFcdTRFMjRcdTUyMTdcdTVCQjlcdTU2NjhcdUZGMDhcdTY1RTBcdThCQkFcdTY2MkZcdTU0MjZcdTY3MDlcdTc1MjhcdTYyMzdcdTdCNTRcdTY4NDhcdTkwRkRcdTY2M0VcdTc5M0FcdUZGMDlcbiAgICAgIGNvbnN0IGNvbXBhcmlzb24gPSBhbnN3ZXJBcmVhLmNyZWF0ZURpdih7IGNsczogJ2Fuc3dlci1jb21wYXJpc29uIHFhLWNvbXBhcmlzb24nIH0pO1xuICAgICAgXG4gICAgICAvLyBcdTU5ODJcdTY3OUNcdTY3MDlcdTc1MjhcdTYyMzdcdTdCNTRcdTY4NDhcdUZGMENcdThCQTFcdTdCOTdcdThCQzRcdTRGMzBcdTdFRDNcdTY3OUNcbiAgICAgIGNvbnN0IGV2YWx1YXRpb24gPSB0aGlzLnVzZXJBbnN3ZXIudHJpbSgpIFxuICAgICAgICA/IHRoaXMuc2NoZWR1bGVyLmV2YWx1YXRlQW5zd2VyKGNvcnJlY3RBbnN3ZXIsIHRoaXMudXNlckFuc3dlcilcbiAgICAgICAgOiBudWxsO1xuICAgIFxuICAgICAgY29uc3QgY29sdW1uc0NvbnRhaW5lciA9IGNvbXBhcmlzb24uY3JlYXRlRGl2KHsgY2xzOiAncWEtY29sdW1ucy1jb250YWluZXInIH0pO1xuICAgICAgXG4gICAgICAvLyBcdTVERTZcdTUyMTdcdUZGMUFDb3JyZWN0IEFuc3dlclx1RkYwOFx1NTlDQlx1N0VDOFx1NjYzRVx1NzkzQVx1RkYwOVxuICAgICAgY29uc3QgY29ycmVjdENvbHVtbiA9IGNvbHVtbnNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncWEtY29sdW1uJyB9KTtcbiAgICAgIGNvcnJlY3RDb2x1bW4uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnQ29ycmVjdCBBbnN3ZXI6JywgY2xzOiAnY29sdW1uLWxhYmVsJyB9KTtcbiAgICAgIGNvbnN0IGNvcnJlY3RBbnN3ZXJEaXYgPSBjb3JyZWN0Q29sdW1uLmNyZWF0ZURpdih7IGNsczogJ2NvbXBhcmlzb24taXRlbScgfSk7XG4gICAgICBjb3JyZWN0QW5zd2VyRGl2LmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgIHRleHQ6IGNvcnJlY3RBbnN3ZXIsXG4gICAgICAgIGNsczogJ2NvcnJlY3QtYW5zd2VyIHFhLWNvcnJlY3QtYW5zd2VyJ1xuICAgICAgfSk7XG4gICAgXG4gICAgICAvLyBcdTUzRjNcdTUyMTdcdUZGMUFZb3VyIEFuc3dlclx1RkYwOFx1NTlDQlx1N0VDOFx1NjYzRVx1NzkzQVx1RkYwQ1x1NEY0Nlx1NTNFRlx1ODBGRFx1NEUzQVx1N0E3QVx1RkYwOVxuICAgICAgY29uc3QgdXNlckNvbHVtbiA9IGNvbHVtbnNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncWEtY29sdW1uJyB9KTtcbiAgICAgIHVzZXJDb2x1bW4uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnWW91ciBBbnN3ZXI6JywgY2xzOiAnY29sdW1uLWxhYmVsJyB9KTtcbiAgICAgIGNvbnN0IHVzZXJBbnN3ZXJEaXYgPSB1c2VyQ29sdW1uLmNyZWF0ZURpdih7IGNsczogJ2NvbXBhcmlzb24taXRlbScgfSk7XG4gICAgICBjb25zdCB1c2VyQW5zd2VyRWxlbWVudCA9IHVzZXJBbnN3ZXJEaXYuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgdGV4dDogdGhpcy51c2VyQW5zd2VyLnRyaW0oKSB8fCAnKG5vIGFuc3dlciBwcm92aWRlZCknLFxuICAgICAgICBjbHM6ICdxYS11c2VyLWFuc3dlcidcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBcdTUzRUFcdTY3MDlcdTU3MjhcdTY3MDlcdTc1MjhcdTYyMzdcdTdCNTRcdTY4NDhcdTY1RjZcdTYyNERcdTZERkJcdTUyQTBcdThCQzRcdTRGMzBcdTY4MzdcdTVGMEZcbiAgICAgIGlmIChldmFsdWF0aW9uKSB7XG4gICAgICAgIHVzZXJBbnN3ZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3VzZXItYW5zd2VyJywgZXZhbHVhdGlvbi5jb3JyZWN0bmVzcyk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTc2RjhcdTRGM0NcdTVFQTZcdTRGRTFcdTYwNkZcdUZGMDhcdTUzRUFcdTU3MjggcGFydGlhbCBcdTY1RjZcdTY2M0VcdTc5M0FcdUZGMDlcbiAgICAgICAgaWYgKGV2YWx1YXRpb24uY29ycmVjdG5lc3MgPT09ICdwYXJ0aWFsJykge1xuICAgICAgICAgIGNvbnN0IHNpbWlsYXJpdHlJbmZvID0gY29tcGFyaXNvbi5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgY2xzOiAnc2ltaWxhcml0eS1pbmZvIHFhLXNpbWlsYXJpdHknXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2ltaWxhcml0eUluZm8udGV4dENvbnRlbnQgPSBgU2ltaWxhcml0eTogJHtNYXRoLnJvdW5kKGV2YWx1YXRpb24uc2ltaWxhcml0eSAqIDEwMCl9JWA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1NkNBMVx1NjcwOVx1N0I1NFx1Njg0OFx1NjVGNlx1NzY4NFx1NjgzN1x1NUYwRlxuICAgICAgICB1c2VyQW5zd2VyRWxlbWVudC5jbGFzc0xpc3QuYWRkKCduby1hbnN3ZXInKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdThCQzRcdTdFQTdcdTYzMDlcdTk0QUVcbiAgICBjb25zdCByYXRpbmdBcmVhID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3JhdGluZy1hcmVhJyB9KTtcblxuICAgIGNvbnN0IGJ1dHRvbkdyb3VwID0gcmF0aW5nQXJlYS5jcmVhdGVEaXYoeyBjbHM6ICdyYXRpbmctYnV0dG9ucycgfSk7XG5cbiAgICBjb25zdCByYXRpbmdzOiB7IGVhc2U6IFJldmlld0Vhc2U7IGxhYmVsOiBzdHJpbmc7IGNvbG9yOiBzdHJpbmc7IGtleTogc3RyaW5nfVtdID0gW1xuICAgICAgeyBlYXNlOiAnYWdhaW4nLCBsYWJlbDogJ0FnYWluXFxuIDwgMSBtaW4nLCBjb2xvcjogJ3JlZCcgLCBrZXk6ICcxJyB9LFxuICAgICAgeyBlYXNlOiAnaGFyZCcsIGxhYmVsOiAnSGFyZFxcbiA8IDEwIG1pbicsIGNvbG9yOiAnb3JhbmdlJyAsIGtleTogJzInIH0sXG4gICAgICB7IGVhc2U6ICdnb29kJywgbGFiZWw6ICdHb29kXFxuIDEgZGF5JywgY29sb3I6ICdibHVlJyAsIGtleTogJzMnIH0sXG4gICAgICB7IGVhc2U6ICdlYXN5JywgbGFiZWw6ICdFYXN5XFxuIDQgZGF5cycsIGNvbG9yOiAnZ3JlZW4nLCBrZXk6ICc0JyAgfVxuICAgIF07XG5cbiAgICByYXRpbmdzLmZvckVhY2goKHsgZWFzZSwgbGFiZWwsIGNvbG9yLGtleSB9KSA9PiB7XG4gICAgICBjb25zdCBidG4gPSBidXR0b25Hcm91cC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICBjbHM6IGByYXRpbmctYnRuIHJhdGluZy0ke2NvbG9yfWAsXG4gICAgICAgIGF0dHI6IHsgdGl0bGU6IGBQcmVzcyAke2tleX1gIH0gXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgbGluZXMgPSBsYWJlbC5zcGxpdCgnXFxuJyk7XG4gICAgICBidG4uY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogbGluZXNbMF0sIGNsczogJ3JhdGluZy1sYWJlbCcgfSk7XG4gICAgICBidG4uY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogbGluZXNbMV0sIGNsczogJ3JhdGluZy1pbnRlcnZhbCcgfSk7XG5cbiAgICAgIGJ0bi5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBgKCR7a2V5fSlgLCBjbHM6ICdyYXRpbmctaG90a2V5JyB9KTtcblxuICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5zdWJtaXRSZXZpZXcoZWFzZSkpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzdWJtaXRSZXZpZXcoZWFzZTogUmV2aWV3RWFzZSkge1xuICAgIGlmICghdGhpcy5jdXJyZW50Q2FyZCkgcmV0dXJuO1xuXG4gICAgY29uc3QgdGltZVNwZW50ID0gKERhdGUubm93KCkgLSB0aGlzLnN0YXJ0VGltZSkgLyAxMDAwOyAvLyBcdTc5RDJcblxuICAgIC8vIFx1NUJGOVx1NEU4RVx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1NTQ4QyBRQSBcdTUzNjFcdTcyNDdcdUZGMENcdTRGN0ZcdTc1MjhcdTc1MjhcdTYyMzdcdTdCNTRcdTY4NDhcbiAgICBjb25zdCB1c2VyQW5zd2VyID0gdGhpcy5jdXJyZW50Q2FyZC50eXBlID09PSAnY2xvemUnIFxuICAgICAgPyB0aGlzLnVzZXJBbnN3ZXJzIFxuICAgICAgOiB0aGlzLmN1cnJlbnRDYXJkLnR5cGUgPT09ICdxYSdcbiAgICAgID8gdGhpcy51c2VyQW5zd2VyXG4gICAgICA6IHVuZGVmaW5lZDtcblxuICAgIC8vIFx1OEJBMVx1N0I5N1x1NjVCMFx1NzY4NFx1OEMwM1x1NUVBNlxuICAgIGNvbnN0IHsgdXBkYXRlZENhcmQsIHJldmlld0xvZyB9ID0gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoXG4gICAgICB0aGlzLmN1cnJlbnRDYXJkLFxuICAgICAgZWFzZSxcbiAgICAgIHRpbWVTcGVudCxcbiAgICAgIHVzZXJBbnN3ZXJcbiAgICApO1xuXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU1MzYxXHU3MjQ3XG4gICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci51cGRhdGVDYXJkKHVwZGF0ZWRDYXJkKTtcblxuICAgIC8vIFx1OEJCMFx1NUY1NVx1NjVFNVx1NUZEN1xuICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIubG9nUmV2aWV3KHtcbiAgICAgIGlkOiBgbG9nLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgLi4ucmV2aWV3TG9nXG4gICAgfSk7XG5cbiAgICAvLyBcdTRFMEJcdTRFMDBcdTVGMjBcdTUzNjFcdTcyNDdcbiAgICB0aGlzLmN1cnJlbnRDYXJkSW5kZXgrKztcbiAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcbiAgICB0aGlzLnVzZXJBbnN3ZXJzID0gW107XG4gICAgdGhpcy51c2VyQW5zd2VyID0gJyc7XG5cbiAgICBpZiAodGhpcy5jdXJyZW50Q2FyZEluZGV4ID49IHRoaXMuZHVlQ2FyZHMubGVuZ3RoKSB7XG4gICAgICAvLyBcdTU5MERcdTRFNjBcdTVCOENcdTYyMTBcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBSZXZpZXcgc2Vzc2lvbiBjb21wbGV0ZSEgUmV2aWV3ZWQgJHt0aGlzLmR1ZUNhcmRzLmxlbmd0aH0gY2FyZHMuYCk7XG4gICAgICBhd2FpdCB0aGlzLmxvYWREdWVDYXJkcygpO1xuICAgIH1cblxuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGp1bXBUb1NvdXJjZSgpIHtcbiAgICBpZiAoIXRoaXMuY3VycmVudENhcmQpIHJldHVybjtcblxuICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5jdXJyZW50Q2FyZC5zb3VyY2VGaWxlKTtcbiAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG4gICAgICBuZXcgTm90aWNlKCdTb3VyY2UgZmlsZSBub3QgZm91bmQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50VW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KFxuICAgICAgdGhpcy5jdXJyZW50Q2FyZC5zb3VyY2VDb250ZW50SWRcbiAgICApO1xuXG4gICAgaWYgKCFjb250ZW50VW5pdCkge1xuICAgICAgbmV3IE5vdGljZSgnU291cmNlIGNvbnRlbnQgbm90IGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gXHU2MjUzXHU1RjAwXHU2NTg3XHU0RUY2XHU1RTc2XHU4REYzXHU4RjZDXG4gICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKTtcbiAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoSXRlbVZpZXcpO1xuICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgY29uc3QgZWRpdG9yID0gKHZpZXcgYXMgYW55KS5lZGl0b3I7XG4gICAgICAgIGlmIChlZGl0b3IpIHtcbiAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHsgbGluZTogY29udGVudFVuaXQuc291cmNlLnBvc2l0aW9uLmxpbmUsIGNoOiAwIH0pO1xuICAgICAgICAgIGVkaXRvci5zY3JvbGxJbnRvVmlldyh7XG4gICAgICAgICAgICBmcm9tOiB7IGxpbmU6IGNvbnRlbnRVbml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogMCB9LFxuICAgICAgICAgICAgdG86IHsgbGluZTogY29udGVudFVuaXQuc291cmNlLnBvc2l0aW9uLmxpbmUsIGNoOiAwIH1cbiAgICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIDEwMCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGRlbGV0ZUZsYXNoY2FyZChjYXJkSWQ6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmRlbGV0ZUNhcmQoY2FyZElkKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1RDgzRFx1REREMVx1RkUwRiBcdTk1RUFcdTUzNjFcdTVERjJcdTUyMjBcdTk2NjQnKTtcbiAgICAgIFxuICAgICAgLy8gXHU0RUNFXHU1RjUzXHU1MjREXHU1OTBEXHU0RTYwXHU5NjFGXHU1MjE3XHU0RTJEXHU3OUZCXHU5NjY0XG4gICAgICB0aGlzLmR1ZUNhcmRzID0gdGhpcy5kdWVDYXJkcy5maWx0ZXIoY2FyZCA9PiBjYXJkLmlkICE9PSBjYXJkSWQpO1xuICAgICAgXG4gICAgICAvLyBcdTU5ODJcdTY3OUNcdTUyMjBcdTk2NjRcdTc2ODRcdTY2MkZcdTVGNTNcdTUyNERcdTUzNjFcdTcyNDdcdUZGMENcdTc5RkJcdTUyQThcdTUyMzBcdTRFMEJcdTRFMDBcdTVGMjBcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRDYXJkPy5pZCA9PT0gY2FyZElkKSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRDYXJkSW5kZXggPj0gdGhpcy5kdWVDYXJkcy5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDYXJkSW5kZXggPSBNYXRoLm1heCgwLCB0aGlzLmR1ZUNhcmRzLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudENhcmQgPSBudWxsO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBcdTkxQ0RcdTY1QjBcdTZFMzJcdTY3RDNcbiAgICAgIGF3YWl0IHRoaXMubG9hZER1ZUNhcmRzKCk7XG4gICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBmbGFzaGNhcmQ6JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIFx1NTIyMFx1OTY2NFx1OTVFQVx1NTM2MVx1NTkzMVx1OEQyNScpO1xuICAgIH1cbiAgfVxuICBwcml2YXRlIGVkaXRDdXJyZW50Rmxhc2hjYXJkKCkge1xuICAgIGlmICghdGhpcy5jdXJyZW50Q2FyZCkgcmV0dXJuO1xuICBcbiAgICBjb25zdCBtb2RhbCA9IG5ldyBGbGFzaGNhcmRFZGl0TW9kYWwoXG4gICAgICB0aGlzLmFwcCxcbiAgICAgIHRoaXMuY3VycmVudENhcmQsXG4gICAgICBhc3luYyAocXVlc3Rpb246IHN0cmluZywgYW5zd2VyOiBzdHJpbmcpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB1cGRhdGVkQ2FyZDogRmxhc2hjYXJkID0ge1xuICAgICAgICAgICAgLi4udGhpcy5jdXJyZW50Q2FyZCEsXG4gICAgICAgICAgICBmcm9udDogcXVlc3Rpb24sXG4gICAgICAgICAgICBiYWNrOiB0aGlzLmN1cnJlbnRDYXJkIS50eXBlID09PSAnY2xvemUnID8gW2Fuc3dlcl0gOiBhbnN3ZXIsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAuLi50aGlzLmN1cnJlbnRDYXJkIS5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLnVwZGF0ZUNhcmQodXBkYXRlZENhcmQpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBcdTk1RUFcdTUzNjFcdTVERjJcdTY2RjRcdTY1QjAnKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBcdTUyMzdcdTY1QjBcdTVGNTNcdTUyNERcdTUzNjFcdTcyNDdcdTY2M0VcdTc5M0FcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDYXJkID0gdXBkYXRlZENhcmQ7XG4gICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBmbGFzaGNhcmQ6JywgZXJyb3IpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBcdTY2RjRcdTY1QjBcdTk1RUFcdTUzNjFcdTU5MzFcdThEMjUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gICAgbW9kYWwub3BlbigpO1xuICB9XG5cbiAgLy8gXHU1RkVCXHU2Mzc3XHU5NTJFXG4gIHByaXZhdGUga2V5Ym9hcmRIYW5kbGVyID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICBjb25zdCBpc0luSW5wdXQgPSB0YXJnZXQudGFnTmFtZSA9PT0gJ0lOUFVUJyB8fCB0YXJnZXQudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJztcbiAgICAgIC8vIFRhYiBcdTk1MkVcdTU5MDRcdTc0MDZcbiAgaWYgKGUua2V5ID09PSAnVGFiJykge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBcbiAgICBpZiAoZS5zaGlmdEtleSkge1xuICAgICAgLy8gU2hpZnQgKyBUYWI6IFx1NTZERVx1NTIzMFx1OTg5OFx1OTc2MlxuICAgICAgaWYgKHRoaXMuc2hvd0Fuc3dlcikge1xuICAgICAgICB0aGlzLnNob3dBbnN3ZXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGFiOiBcdTY2M0VcdTc5M0FcdTdCNTRcdTY4NDhcdTYyMTZcdTRFMEJcdTRFMDBcdTVGMjBcbiAgICAgIGlmICghdGhpcy5zaG93QW5zd2VyKSB7XG4gICAgICAgIHRoaXMuc2hvd0Fuc3dlciA9IHRydWU7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBcdTVERjJcdTY2M0VcdTc5M0FcdTdCNTRcdTY4NDgsXHU3NkY0XHU2M0E1XHU2MzA5IFwiR29vZFwiIFx1OEJDNFx1NTIwNlx1OEZEQlx1NTE2NVx1NEUwQlx1NEUwMFx1NUYyMFxuICAgICAgICB0aGlzLnN1Ym1pdFJldmlldygnZ29vZCcpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICAgIFxuICAgIC8vIFx1NjU3MFx1NUI1N1x1OTUyRVx1OEJDNFx1NTIwNlx1RkYwOFx1NTNFQVx1NTcyOFx1NjYzRVx1NzkzQVx1N0I1NFx1Njg0OFx1NEUxNFx1NEUwRFx1NTcyOFx1OEY5M1x1NTE2NVx1Njg0Nlx1NjVGNlx1NjcwOVx1NjU0OFx1RkYwOVxuICAgIGlmICh0aGlzLnNob3dBbnN3ZXIpIHtcbiAgICAgIGNvbnN0IHJhdGluZ01hcDogeyBba2V5OiBzdHJpbmddOiBSZXZpZXdFYXNlIH0gPSB7XG4gICAgICAgICcxJzogJ2FnYWluJyxcbiAgICAgICAgJzInOiAnaGFyZCcsXG4gICAgICAgICczJzogJ2dvb2QnLFxuICAgICAgICAnNCc6ICdlYXN5J1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgaWYgKHJhdGluZ01hcFtlLmtleV0pIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnN1Ym1pdFJldmlldyhyYXRpbmdNYXBbZS5rZXldKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIFxuICBwcml2YXRlIHJlZ2lzdGVyS2V5Ym9hcmRIYW5kbGVycygpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5rZXlib2FyZEhhbmRsZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAucmV2aWV3LWNvbnRhaW5lciB7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIG1heC13aWR0aDogODAwcHg7XG4gICAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTdBN0FcdTcyQjZcdTYwMDEgKi9cbiAgICAgIC5lbXB0eS1zdGF0ZSB7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgcGFkZGluZzogNDBweCAyMHB4O1xuICAgICAgfVxuXG4gICAgICAuZW1wdHktc3RhdGUgaDIge1xuICAgICAgICBmb250LXNpemU6IDEuOGVtO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5zdGF0cy1zdW1tYXJ5IHtcbiAgICAgICAgbWFyZ2luOiAyMHB4IDA7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgICAgICBtYXgtd2lkdGg6IDMwMHB4O1xuICAgICAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICAgICAgfVxuXG4gICAgICAvKiBcdThGREJcdTVFQTZcdTY3NjEgKi9cbiAgICAgIC5wcm9ncmVzcy1iYXIge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgfVxuXG4gICAgICAucHJvZ3Jlc3Mtc3RhdHMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgIH1cblxuICAgICAgLnByb2dyZXNzLXRleHQge1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgIH1cblxuICAgICAgLnJlbWFpbmluZy10ZXh0IHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAuYmFyLWNvbnRhaW5lciB7XG4gICAgICAgIGhlaWdodDogNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIH1cblxuICAgICAgLmJhciB7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgdHJhbnNpdGlvbjogd2lkdGggMC4zcyBlYXNlO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTUzNjFcdTcyNDdcdTUzM0FcdTU3REYgKi9cbiAgICAgIC5jYXJkLWFyZWEge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDM1MHB4O1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICB9XG5cbiAgICAgIC8qIFx1NTNGM1x1NEUwQVx1ODlEMlx1NjRDRFx1NEY1Q1x1NjgwRiAqL1xuICAgICAgLnRvcC1hY3Rpb25zLWJhciB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiAxNnB4O1xuICAgICAgICByaWdodDogMTZweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgIHotaW5kZXg6IDEwO1xuICAgICAgfVxuXG4gICAgICAudG9wLWFjdGlvbi1idG4ge1xuICAgICAgICB3aWR0aDogMzJweDtcbiAgICAgICAgaGVpZ2h0OiAzMnB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgcGFkZGluZzogMDtcbiAgICAgIH1cblxuICAgICAgLnRvcC1hY3Rpb24tYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLmp1bXAtaWNvbi1idG4ge1xuICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgIH1cblxuICAgICAgLm1vcmUtYnRuIHtcbiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgIGxldHRlci1zcGFjaW5nOiAxcHg7XG4gICAgICB9XG5cbiAgICAgIC8qIFx1NEUwQlx1NjJDOVx1ODNEQ1x1NTM1NSAqL1xuICAgICAgLm1vcmUtZHJvcGRvd24ge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogMzhweDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxMnB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG4gICAgICAgIG1pbi13aWR0aDogMTUwcHg7XG4gICAgICAgIHotaW5kZXg6IDEwMDtcbiAgICAgIH1cblxuICAgICAgLmRyb3Bkb3duLWl0ZW0ge1xuICAgICAgICBwYWRkaW5nOiA4cHggMTRweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuMnM7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICB9XG5cbiAgICAgIC5kcm9wZG93bi1pdGVtOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5kcm9wZG93bi1pdGVtOmZpcnN0LWNoaWxkIHtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4IDZweCAwIDA7XG4gICAgICB9XG5cbiAgICAgIC5kcm9wZG93bi1pdGVtOmxhc3QtY2hpbGQge1xuICAgICAgICBib3JkZXItcmFkaXVzOiAwIDAgNnB4IDZweDtcbiAgICAgIH1cblxuICAgICAgLmRlbGV0ZS1pdGVtOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvci1ob3Zlcik7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1pbmZvIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTJweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgcGFkZGluZy1yaWdodDogODBweDtcbiAgICAgIH1cblxuICAgICAgLmNhcmQtdHlwZSwgLmNhcmQtZGVjayB7XG4gICAgICAgIHBhZGRpbmc6IDNweCAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTk1RUVcdTk4OThcdTUzM0FcdTU3REYgKi9cbiAgICAgIC5xdWVzdGlvbi1hcmVhLCAuYW5zd2VyLWFyZWEge1xuICAgICAgICBtYXJnaW46IDE2cHggMDtcbiAgICAgIH1cblxuICAgICAgLnF1ZXN0aW9uLWFyZWEgaDMsIC5hbnN3ZXItYXJlYSBoMyB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgICB9XG5cbiAgICAgIC5xdWVzdGlvbi10ZXh0LCAuYW5zd2VyLXRleHQge1xuICAgICAgICBmb250LXNpemU6IDEuMmVtO1xuICAgICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgICBwYWRkaW5nOiAxNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgIH1cblxuICAgICAgLyogXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU4RjkzXHU1MTY1ICovXG4gICAgICAuY2xvemUtaW5wdXQtYXJlYSB7XG4gICAgICAgIG1hcmdpbjogMTZweCAwO1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtaW5wdXQtYXJlYSBoNCB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgIH1cblxuICAgICAgLmlucHV0LWdyb3VwIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgIH1cblxuICAgICAgLmNsb3plLWlucHV0IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBmb250LXNpemU6IDAuOTVlbTtcbiAgICAgIH1cblxuICAgICAgLmNsb3plLWlucHV0OmZvY3VzIHtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgfVxuXG4gICAgICAvKiBRQSBcdTUzNjFcdTcyNDdcdThGOTNcdTUxNjUgKi9cbiAgICAgIC5xYS1pbnB1dC1hcmVhIHtcbiAgICAgICAgbWFyZ2luOiAxNnB4IDA7XG4gICAgICB9XG5cbiAgICAgIC5xYS1pbnB1dC1hcmVhIGg0IHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAucWEtaW5wdXQge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgbWluLWhlaWdodDogMTAwcHg7XG4gICAgICAgIHBhZGRpbmc6IDEwcHggMTJweDtcbiAgICAgICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45NWVtO1xuICAgICAgICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgICAgICAgcmVzaXplOiB2ZXJ0aWNhbDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgIH1cblxuICAgICAgLnFhLWlucHV0OmZvY3VzIHtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTdCNTRcdTY4NDhcdTVCRjlcdTZCRDQgKi9cbiAgICAgIC5xdWVzdGlvbi1yZXZpZXcge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeS1hbHQpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC5xdWVzdGlvbi1yZXZpZXcgaDQge1xuICAgICAgICBtYXJnaW46IDAgMCA2cHggMDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgIH1cblxuICAgICAgLnJldmlldy10ZXh0IHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuOTVlbTtcbiAgICAgIH1cblxuICAgICAgLmZ1bGwtdGV4dCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xuICAgICAgfVxuXG4gICAgICAuYW5zd2VyLWNvbXBhcmlzb24ge1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeS1hbHQpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIG1hcmdpbi10b3A6IDEycHg7XG4gICAgICB9XG5cbiAgICAgIC5hbnN3ZXItY29tcGFyaXNvbiBoNCB7XG4gICAgICAgIG1hcmdpbjogMCAwIDhweCAwO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgfVxuXG4gICAgICAuY29tcGFyaXNvbi1pdGVtIHtcbiAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIH1cblxuICAgICAgLnVzZXItYW5zd2VyIHtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgcGFkZGluZzogMnB4IDZweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICAgICAgfVxuXG4gICAgICAudXNlci1hbnN3ZXIuY29ycmVjdCB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItc3VjY2VzcywgIzRjYWY1MCkgIWltcG9ydGFudDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50LCB3aGl0ZSkgIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgLnVzZXItYW5zd2VyLnBhcnRpYWwge1xuICAgICAgICBiYWNrZ3JvdW5kOiAjRkZDMDAwICFpbXBvcnRhbnQ7XG4gICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xuICAgICAgfVxuXG4gICAgICAudXNlci1hbnN3ZXIud3Jvbmcge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yLCAjZjQ0MzM2KSAhaW1wb3J0YW50O1xuICAgICAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgLmNvcnJlY3QtYW5zd2VyIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLnNpbWlsYXJpdHktaW5mbyB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgIH1cblxuICAgICAgLyogUUEgXHU1MzYxXHU3MjQ3XHU1QkY5XHU2QkQ0XHU2ODM3XHU1RjBGICovXG4gICAgICAucWEtY29tcGFyaXNvbiB7XG4gICAgICAgIG1hcmdpbi10b3A6IDEycHg7XG4gICAgICB9XG5cblxuLnFhLWNvbHVtbnMtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZ3JpZDtcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyO1xuICBnYXA6IDE2cHg7XG4gIG1hcmdpbi1ib3R0b206IDEycHg7XG59XG5cbi5xYS1jb2x1bW4ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xufVxuXG4uY29sdW1uLWxhYmVsIHtcbiAgbWFyZ2luOiAwIDAgOHB4IDAgIWltcG9ydGFudDtcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICBmb250LXNpemU6IDAuODVlbTtcbn1cblxuLnFhLXVzZXItYW5zd2VyLFxuLnFhLWNvcnJlY3QtYW5zd2VyIHtcbiAgcGFkZGluZzogMTJweDtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gIHdvcmQtYnJlYWs6IGJyZWFrLXdvcmQ7XG4gIGZvbnQtc2l6ZTogMC45NWVtO1xuICBsaW5lLWhlaWdodDogMS41O1xuICBtaW4taGVpZ2h0OiA2MHB4O1xufVxuXG4ucWEtY29ycmVjdC1hbnN3ZXIge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG59XG5cbi8qIFx1NzZGOFx1NEYzQ1x1NUVBNlx1NEZFMVx1NjA2Rlx1NjUzRVx1NTcyOFx1NEUyNFx1NTIxN1x1NEUwQlx1NjVCOSAqL1xuLnFhLXNpbWlsYXJpdHkge1xuICBtYXJnaW4tdG9wOiA4cHg7XG4gIHBhZGRpbmc6IDZweDtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgZm9udC1zaXplOiAwLjg1ZW07XG4gIGdyaWQtY29sdW1uOiAxIC8gLTE7XG59XG5cblxuXG5cbiAgICAgIC5xYS11c2VyLWFuc3dlci5jb3JyZWN0LFxuICAgICAgLnVzZXItYW5zd2VyLmNvcnJlY3QucWEtdXNlci1hbnN3ZXIsXG4gICAgICBkaXYucWEtdXNlci1hbnN3ZXIuY29ycmVjdCxcbiAgICAgIGRpdi51c2VyLWFuc3dlci5jb3JyZWN0LnFhLXVzZXItYW5zd2VyLFxuICAgICAgLmNvbXBhcmlzb24taXRlbSAucWEtdXNlci1hbnN3ZXIuY29ycmVjdCxcbiAgICAgIC5jb21wYXJpc29uLWl0ZW0gLnVzZXItYW5zd2VyLmNvcnJlY3QucWEtdXNlci1hbnN3ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLXN1Y2Nlc3MsICM0Y2FmNTApICFpbXBvcnRhbnQ7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM0Y2FmNTAgIWltcG9ydGFudDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50LCB3aGl0ZSkgIWltcG9ydGFudDtcbiAgICAgICAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cbiAgICAgIC5xYS11c2VyLWFuc3dlci5wYXJ0aWFsLFxuICAgICAgLnVzZXItYW5zd2VyLnBhcnRpYWwucWEtdXNlci1hbnN3ZXIsXG4gICAgICBkaXYucWEtdXNlci1hbnN3ZXIucGFydGlhbCxcbiAgICAgIGRpdi51c2VyLWFuc3dlci5wYXJ0aWFsLnFhLXVzZXItYW5zd2VyLFxuICAgICAgLmNvbXBhcmlzb24taXRlbSAucWEtdXNlci1hbnN3ZXIucGFydGlhbCxcbiAgICAgIC5jb21wYXJpc29uLWl0ZW0gLnVzZXItYW5zd2VyLnBhcnRpYWwucWEtdXNlci1hbnN3ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiAjRkZDMDAwICFpbXBvcnRhbnQ7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGRkMwMDAgIWltcG9ydGFudDtcbiAgICAgICAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cbiAgICAgIC5xYS11c2VyLWFuc3dlci53cm9uZyxcbiAgICAgIC51c2VyLWFuc3dlci53cm9uZy5xYS11c2VyLWFuc3dlcixcbiAgICAgIGRpdi5xYS11c2VyLWFuc3dlci53cm9uZyxcbiAgICAgIGRpdi51c2VyLWFuc3dlci53cm9uZy5xYS11c2VyLWFuc3dlcixcbiAgICAgIC5jb21wYXJpc29uLWl0ZW0gLnFhLXVzZXItYW5zd2VyLndyb25nLFxuICAgICAgLmNvbXBhcmlzb24taXRlbSAudXNlci1hbnN3ZXIud3JvbmcucWEtdXNlci1hbnN3ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yLCAjZjQ0MzM2KSAhaW1wb3J0YW50O1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjQ0MzM2ICFpbXBvcnRhbnQ7XG4gICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xuICAgICAgfVxuXG5cbiAgICAgIC5jb3JyZWN0LWFuc3dlci1sYWJlbCB7XG4gICAgICAgIG1hcmdpbi10b3A6IDEycHggIWltcG9ydGFudDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4ICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cbiAgICAgIC5xYS1zaW1pbGFyaXR5IHtcbiAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgICBwYWRkaW5nOiA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgfVxuXG4gICAgICAvKiBcdTYzMDlcdTk0QUVcdTUzM0FcdTU3REYgKi9cbiAgICAgIC5idXR0b24tYXJlYSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogMTJweDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zaG93LWFuc3dlci1idG4ge1xuICAgICAgICBwYWRkaW5nOiAxMHB4IDMycHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgICAgfVxuXG4gICAgICAvKiBcdThCQzRcdTdFQTdcdTUzM0FcdTU3REYgKi9cbiAgICAgIC5yYXRpbmctYXJlYSB7XG4gICAgICAgIG1hcmdpbjogMTVweCAwIDEwcHggMDtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLWFyZWEgaDQge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbmctYnV0dG9ucyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogMjBweDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDA7XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbmctYnRuIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgbWF4LXdpZHRoOiAxMjBweDtcbiAgICAgICAgaGlnaHQ6MTAwcHg7XG4gICAgICAgIHBhZGRpbmc6IDE0cHggOHB4O1xuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLnJhdGluZy1idG46aG92ZXIge1xuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgM3B4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLXJlZDpob3ZlciB7IFxuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItZXJyb3ItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLW9yYW5nZTpob3ZlciB7IFxuICAgICAgICBib3JkZXItY29sb3I6ICNGRkMwMDA7XG4gICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAxOTIsIDAsIDAuMSk7XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbmctYmx1ZTpob3ZlciB7IFxuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLWdyZWVuOmhvdmVyIHsgXG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItZ3JlZW4pO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLXN1Y2Nlc3MtaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLWxhYmVsIHtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICAgIH1cblxuICAgICAgLnJhdGluZy1pbnRlcnZhbCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG4gICAgICAgIC8qIFx1NUZFQlx1NjM3N1x1OTUyRVx1NjNEMFx1NzkzQSAqL1xuLnJhdGluZy1ob3RrZXkge1xuICBmb250LXNpemU6IDAuNzVlbTtcbiAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICBtYXJnaW4tdG9wOiA0cHg7XG4gIG9wYWNpdHk6IDAuNztcbn1cblxuLnJhdGluZy1idG46aG92ZXIgLnJhdGluZy1ob3RrZXkge1xuICBvcGFjaXR5OiAxO1xuICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xufVxuXG4vKiBTaG93IEFuc3dlciBcdTYzMDlcdTk0QUUgdG9vbHRpcCAqL1xuLnNob3ctYW5zd2VyLWJ0biB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cbiAgLmNsb3plLWlucHV0OmZvY3VzLFxuLnFhLWlucHV0OmZvY3VzIHtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICBvdXRsaW5lOiBub25lO1xuICBib3gtc2hhZG93OiAwIDAgMCAycHggdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50LWhvdmVyKTtcbn1cbiAgLyogXHU2NUUwXHU3QjU0XHU2ODQ4XHU3MkI2XHU2MDAxICovXG4ucWEtdXNlci1hbnN3ZXIubm8tYW5zd2VyIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgYm9yZGVyOiAycHggZGFzaGVkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbn1cbiAgICBgO1xuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxufSIsICJpbXBvcnQgeyBGbGFzaGNhcmQsIFJldmlld0xvZyB9IGZyb20gJy4vRmxhc2hjYXJkTWFuYWdlcic7XG5cbmV4cG9ydCB0eXBlIFJldmlld0Vhc2UgPSAnYWdhaW4nIHwgJ2hhcmQnIHwgJ2dvb2QnIHwgJ2Vhc3knO1xuXG5leHBvcnQgY2xhc3MgQ2FyZFNjaGVkdWxlciB7XG4gIC8qKlxuICAgKiBcdThCQTFcdTdCOTdcdTRFMEJcdTZCMjFcdTU5MERcdTRFNjBcdTY1RjZcdTk1RjRcdUZGMDhcdTU3RkFcdTRFOEUgU00tMiBcdTdCOTdcdTZDRDVcdUZGMDlcbiAgICovXG4gIHNjaGVkdWxlKFxuICAgIGNhcmQ6IEZsYXNoY2FyZCxcbiAgICBlYXNlOiBSZXZpZXdFYXNlLFxuICAgIHRpbWVTcGVudDogbnVtYmVyLFxuICAgIHVzZXJBbnN3ZXI/OiBzdHJpbmcgfCBzdHJpbmdbXVxuICApOiB7XG4gICAgdXBkYXRlZENhcmQ6IEZsYXNoY2FyZDtcbiAgICByZXZpZXdMb2c6IE9taXQ8UmV2aWV3TG9nLCAnaWQnPjtcbiAgfSB7XG4gICAgY29uc3Qgb2xkU2NoZWR1bGluZyA9IHsgLi4uY2FyZC5zY2hlZHVsaW5nIH07XG4gICAgY29uc3QgbmV3U2NoZWR1bGluZyA9IHsgLi4uY2FyZC5zY2hlZHVsaW5nIH07XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblxuICAgIC8vIFx1NjZGNFx1NjVCMFx1N0VERlx1OEJBMVxuICAgIGNhcmQuc3RhdHMudG90YWxSZXZpZXdzKys7XG4gICAgY2FyZC5zdGF0cy5sYXN0UmV2aWV3ID0gbm93O1xuXG4gICAgLy8gXHU4QkExXHU3Qjk3XHU1RTczXHU1NzQ3XHU2NUY2XHU5NUY0XG4gICAgY29uc3QgdG90YWxUaW1lID0gY2FyZC5zdGF0cy5hdmVyYWdlVGltZSAqIChjYXJkLnN0YXRzLnRvdGFsUmV2aWV3cyAtIDEpICsgdGltZVNwZW50O1xuICAgIGNhcmQuc3RhdHMuYXZlcmFnZVRpbWUgPSB0b3RhbFRpbWUgLyBjYXJkLnN0YXRzLnRvdGFsUmV2aWV3cztcblxuICAgIC8vIFx1NjgzOVx1NjM2RVx1OTZCRVx1NUVBNlx1OEJDNFx1N0VBN1x1NjZGNFx1NjVCMFx1OEMwM1x1NUVBNlxuICAgIHN3aXRjaCAoZWFzZSkge1xuICAgICAgY2FzZSAnYWdhaW4nOlxuICAgICAgICB0aGlzLnNjaGVkdWxlQWdhaW4obmV3U2NoZWR1bGluZywgY2FyZC5zdGF0cyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaGFyZCc6XG4gICAgICAgIHRoaXMuc2NoZWR1bGVIYXJkKG5ld1NjaGVkdWxpbmcsIGNhcmQuc3RhdHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2dvb2QnOlxuICAgICAgICB0aGlzLnNjaGVkdWxlR29vZChuZXdTY2hlZHVsaW5nLCBjYXJkLnN0YXRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdlYXN5JzpcbiAgICAgICAgdGhpcy5zY2hlZHVsZUVhc3kobmV3U2NoZWR1bGluZywgY2FyZC5zdGF0cyk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGNhcmQuc2NoZWR1bGluZyA9IG5ld1NjaGVkdWxpbmc7XG4gICAgY2FyZC5tZXRhZGF0YS51cGRhdGVkQXQgPSBub3c7XG5cbiAgICAvLyBcdTUyMUJcdTVFRkFcdTU5MERcdTRFNjBcdTY1RTVcdTVGRDdcbiAgICBjb25zdCByZXZpZXdMb2c6IE9taXQ8UmV2aWV3TG9nLCAnaWQnPiA9IHtcbiAgICAgIGZsYXNoY2FyZElkOiBjYXJkLmlkLFxuICAgICAgdGltZXN0YW1wOiBub3csXG4gICAgICByZXNwb25zZToge1xuICAgICAgICB1c2VyQW5zd2VyLFxuICAgICAgICB0aW1lU3BlbnQsXG4gICAgICAgIGVhc2VcbiAgICAgIH0sXG4gICAgICBzY2hlZHVsaW5nQ2hhbmdlOiB7XG4gICAgICAgIG9sZEludGVydmFsOiBvbGRTY2hlZHVsaW5nLmludGVydmFsLFxuICAgICAgICBuZXdJbnRlcnZhbDogbmV3U2NoZWR1bGluZy5pbnRlcnZhbCxcbiAgICAgICAgb2xkRWFzZTogb2xkU2NoZWR1bGluZy5lYXNlLFxuICAgICAgICBuZXdFYXNlOiBuZXdTY2hlZHVsaW5nLmVhc2VcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHsgdXBkYXRlZENhcmQ6IGNhcmQsIHJldmlld0xvZyB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEFnYWluIC0gXHU1QjhDXHU1MTY4XHU1RkQ4XHU4QkIwXG4gICAqL1xuICBwcml2YXRlIHNjaGVkdWxlQWdhaW4oXG4gICAgc2NoZWR1bGluZzogRmxhc2hjYXJkWydzY2hlZHVsaW5nJ10sXG4gICAgc3RhdHM6IEZsYXNoY2FyZFsnc3RhdHMnXVxuICApIHtcbiAgICAvLyBcdTkxQ0RcdTdGNkVcdTk1RjRcdTk2OTRcbiAgICBzY2hlZHVsaW5nLmludGVydmFsID0gMTsgLy8gMSBcdTUyMDZcdTk0OUZcbiAgICBzY2hlZHVsaW5nLmVhc2UgPSBNYXRoLm1heCgxLjMsIHNjaGVkdWxpbmcuZWFzZSAtIDAuMik7XG4gICAgc2NoZWR1bGluZy5kdWUgPSBEYXRlLm5vdygpICsgc2NoZWR1bGluZy5pbnRlcnZhbCAqIDYwICogMTAwMDtcbiAgICBzY2hlZHVsaW5nLmxhcHNlcysrO1xuICAgIHNjaGVkdWxpbmcucmVwcysrO1xuICAgIFxuICAgIC8vIFx1NzJCNlx1NjAwMVx1OEY2Q1x1NjM2MlxuICAgIGlmIChzY2hlZHVsaW5nLnN0YXRlID09PSAnbmV3Jykge1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdsZWFybmluZyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjaGVkdWxpbmcuc3RhdGUgPSAncmVsZWFybmluZyc7XG4gICAgfVxuXG4gICAgLy8gXHU1ODlFXHU1MkEwXHU5NkJFXHU1RUE2XG4gICAgc3RhdHMuZGlmZmljdWx0eSA9IE1hdGgubWluKDEuMCwgc3RhdHMuZGlmZmljdWx0eSArIDAuMSk7XG4gIH1cblxuICAvKipcbiAgICogSGFyZCAtIFx1NTZGMFx1OTZCRVxuICAgKi9cbiAgcHJpdmF0ZSBzY2hlZHVsZUhhcmQoXG4gICAgc2NoZWR1bGluZzogRmxhc2hjYXJkWydzY2hlZHVsaW5nJ10sXG4gICAgc3RhdHM6IEZsYXNoY2FyZFsnc3RhdHMnXVxuICApIHtcbiAgICBzY2hlZHVsaW5nLnJlcHMrKztcblxuICAgIGlmIChzY2hlZHVsaW5nLnN0YXRlID09PSAnbmV3JyB8fCBzY2hlZHVsaW5nLnN0YXRlID09PSAnbGVhcm5pbmcnKSB7XG4gICAgICAvLyBcdTVCNjZcdTRFNjBcdTk2MzZcdTZCQjVcdUZGMUExMCBcdTUyMDZcdTk0OUZcbiAgICAgIHNjaGVkdWxpbmcuaW50ZXJ2YWwgPSAxMDtcbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIDEwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdsZWFybmluZyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NTkwRFx1NEU2MFx1OTYzNlx1NkJCNVx1RkYxQVx1NUY1M1x1NTI0RFx1OTVGNFx1OTY5NCAqIDEuMlxuICAgICAgc2NoZWR1bGluZy5pbnRlcnZhbCA9IE1hdGgubWF4KDEsIHNjaGVkdWxpbmcuaW50ZXJ2YWwgKiAxLjIpO1xuICAgICAgc2NoZWR1bGluZy5lYXNlID0gTWF0aC5tYXgoMS4zLCBzY2hlZHVsaW5nLmVhc2UgLSAwLjE1KTtcbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIHNjaGVkdWxpbmcuaW50ZXJ2YWwgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdyZXZpZXcnO1xuICAgIH1cblxuICAgIHN0YXRzLmRpZmZpY3VsdHkgPSBNYXRoLm1pbigxLjAsIHN0YXRzLmRpZmZpY3VsdHkgKyAwLjA1KTtcbiAgICBzdGF0cy5jb3JyZWN0Q291bnQgKz0gMC41OyAvLyBcdTkwRThcdTUyMDZcdTZCNjNcdTc4NkVcbiAgfVxuXG4gIC8qKlxuICAgKiBHb29kIC0gXHU2QjYzXHU3ODZFXG4gICAqL1xuICBwcml2YXRlIHNjaGVkdWxlR29vZChcbiAgICBzY2hlZHVsaW5nOiBGbGFzaGNhcmRbJ3NjaGVkdWxpbmcnXSxcbiAgICBzdGF0czogRmxhc2hjYXJkWydzdGF0cyddXG4gICkge1xuICAgIHNjaGVkdWxpbmcucmVwcysrO1xuICAgIHN0YXRzLmNvcnJlY3RDb3VudCsrO1xuXG4gICAgaWYgKHNjaGVkdWxpbmcuc3RhdGUgPT09ICduZXcnKSB7XG4gICAgICAvLyBcdTY1QjBcdTUzNjFcdTcyNDdcdUZGMUExIFx1NTkyOVxuICAgICAgc2NoZWR1bGluZy5pbnRlcnZhbCA9IDE7XG4gICAgICBzY2hlZHVsaW5nLmR1ZSA9IERhdGUubm93KCkgKyAxICogMjQgKiA2MCAqIDYwICogMTAwMDtcbiAgICAgIHNjaGVkdWxpbmcuc3RhdGUgPSAnbGVhcm5pbmcnO1xuICAgIH0gZWxzZSBpZiAoc2NoZWR1bGluZy5zdGF0ZSA9PT0gJ2xlYXJuaW5nJykge1xuICAgICAgLy8gXHU1QjY2XHU0RTYwXHU0RTJEXHVGRjFBXHU4RkRCXHU1MTY1XHU1OTBEXHU0RTYwXHVGRjBDXHU5NUY0XHU5Njk0XHU2ODM5XHU2MzZFXHU4QkIwXHU1RkM2XHU1RjNBXHU1RUE2XG4gICAgICBpZiAoc2NoZWR1bGluZy5pbnRlcnZhbCA8IDEpIHtcbiAgICAgICAgc2NoZWR1bGluZy5pbnRlcnZhbCA9IDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzY2hlZHVsaW5nLmludGVydmFsID0gMztcbiAgICAgIH1cbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIHNjaGVkdWxpbmcuaW50ZXJ2YWwgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdyZXZpZXcnO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTU5MERcdTRFNjBcdTk2MzZcdTZCQjVcdUZGMUFcdTk1RjRcdTk2OTQgKiBlYXNlXG4gICAgICBzY2hlZHVsaW5nLmludGVydmFsID0gc2NoZWR1bGluZy5pbnRlcnZhbCAqIHNjaGVkdWxpbmcuZWFzZTtcbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIHNjaGVkdWxpbmcuaW50ZXJ2YWwgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5lYXNlID0gc2NoZWR1bGluZy5lYXNlICsgMC4xO1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdyZXZpZXcnO1xuICAgIH1cblxuICAgIC8vIFx1OTY0RFx1NEY0RVx1OTZCRVx1NUVBNlxuICAgIHN0YXRzLmRpZmZpY3VsdHkgPSBNYXRoLm1heCgwLCBzdGF0cy5kaWZmaWN1bHR5IC0gMC4wNSk7XG4gIH1cblxuICAvKipcbiAgICogRWFzeSAtIFx1OTc1RVx1NUUzOFx1N0I4MFx1NTM1NVxuICAgKi9cbiAgcHJpdmF0ZSBzY2hlZHVsZUVhc3koXG4gICAgc2NoZWR1bGluZzogRmxhc2hjYXJkWydzY2hlZHVsaW5nJ10sXG4gICAgc3RhdHM6IEZsYXNoY2FyZFsnc3RhdHMnXVxuICApIHtcbiAgICBzY2hlZHVsaW5nLnJlcHMrKztcbiAgICBzdGF0cy5jb3JyZWN0Q291bnQrKztcblxuICAgIGlmIChzY2hlZHVsaW5nLnN0YXRlID09PSAnbmV3Jykge1xuICAgICAgLy8gXHU2NUIwXHU1MzYxXHU3MjQ3XHVGRjFBXHU3NkY0XHU2M0E1IDQgXHU1OTI5XG4gICAgICBzY2hlZHVsaW5nLmludGVydmFsID0gNDtcbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIDQgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdyZXZpZXcnO1xuICAgIH0gZWxzZSBpZiAoc2NoZWR1bGluZy5zdGF0ZSA9PT0gJ2xlYXJuaW5nJykge1xuICAgICAgLy8gXHU1QjY2XHU0RTYwXHU0RTJEXHVGRjFBXHU3NkY0XHU2M0E1XHU4RkRCXHU1MTY1XHU1OTBEXHU0RTYwXHVGRjBDNyBcdTU5MjlcbiAgICAgIHNjaGVkdWxpbmcuaW50ZXJ2YWwgPSA3O1xuICAgICAgc2NoZWR1bGluZy5kdWUgPSBEYXRlLm5vdygpICsgNyAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gICAgICBzY2hlZHVsaW5nLnN0YXRlID0gJ3Jldmlldyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NTkwRFx1NEU2MFx1OTYzNlx1NkJCNVx1RkYxQVx1OTVGNFx1OTY5NCAqIChlYXNlICsgMC4zKVxuICAgICAgc2NoZWR1bGluZy5pbnRlcnZhbCA9IHNjaGVkdWxpbmcuaW50ZXJ2YWwgKiAoc2NoZWR1bGluZy5lYXNlICsgMC4zKTtcbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIHNjaGVkdWxpbmcuaW50ZXJ2YWwgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5lYXNlID0gc2NoZWR1bGluZy5lYXNlICsgMC4xNTtcbiAgICAgIHNjaGVkdWxpbmcuc3RhdGUgPSAncmV2aWV3JztcbiAgICB9XG5cbiAgICAvLyBcdTY2M0VcdTg0NTdcdTk2NERcdTRGNEVcdTk2QkVcdTVFQTZcbiAgICBzdGF0cy5kaWZmaWN1bHR5ID0gTWF0aC5tYXgoMCwgc3RhdHMuZGlmZmljdWx0eSAtIDAuMSk7XG4gIH1cblxuICAvKipcbiAgICogXHU4QkM0XHU0RjMwXHU3NTI4XHU2MjM3XHU3QjU0XHU2ODQ4XHVGRjA4XHU3NTI4XHU0RThFXHU4RjkzXHU1MTY1XHU3QjU0XHU2ODQ4XHU2QTIxXHU1RjBGXHVGRjA5XG4gICAqL1xuICBldmFsdWF0ZUFuc3dlcihcbiAgICBjb3JyZWN0QW5zd2VyOiBzdHJpbmcgfCBzdHJpbmdbXSxcbiAgICB1c2VyQW5zd2VyOiBzdHJpbmcgfCBzdHJpbmdbXVxuICApOiB7XG4gICAgY29ycmVjdG5lc3M6ICdjb3JyZWN0JyB8ICdwYXJ0aWFsJyB8ICd3cm9uZyc7XG4gICAgc2ltaWxhcml0eTogbnVtYmVyO1xuICB9IHtcbiAgICAvLyBcdTU5MDRcdTc0MDZcdTY1NzBcdTdFQzRcdUZGMDhcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdUZGMDlcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjb3JyZWN0QW5zd2VyKSAmJiBBcnJheS5pc0FycmF5KHVzZXJBbnN3ZXIpKSB7XG4gICAgICBsZXQgY29ycmVjdENvdW50ID0gMDtcbiAgICAgIGNvbnN0IHRvdGFsID0gY29ycmVjdEFuc3dlci5sZW5ndGg7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWw7IGkrKykge1xuICAgICAgICBjb25zdCBzaW1pbGFyaXR5ID0gdGhpcy5jYWxjdWxhdGVTaW1pbGFyaXR5KFxuICAgICAgICAgIHRoaXMubm9ybWFsaXplKGNvcnJlY3RBbnN3ZXJbaV0pLFxuICAgICAgICAgIHRoaXMubm9ybWFsaXplKHVzZXJBbnN3ZXJbaV0gfHwgJycpXG4gICAgICAgICk7XG4gICAgICAgIGlmIChzaW1pbGFyaXR5ID49IDAuOSkgY29ycmVjdENvdW50Kys7XG4gICAgICAgIGVsc2UgaWYgKHNpbWlsYXJpdHkgPj0gMC42KSBjb3JyZWN0Q291bnQgKz0gMC41O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBvdmVyYWxsU2ltaWxhcml0eSA9IGNvcnJlY3RDb3VudCAvIHRvdGFsO1xuXG4gICAgICBpZiAob3ZlcmFsbFNpbWlsYXJpdHkgPj0gMC45KSB7XG4gICAgICAgIHJldHVybiB7IGNvcnJlY3RuZXNzOiAnY29ycmVjdCcsIHNpbWlsYXJpdHk6IG92ZXJhbGxTaW1pbGFyaXR5IH07XG4gICAgICB9IGVsc2UgaWYgKG92ZXJhbGxTaW1pbGFyaXR5ID49IDAuNikge1xuICAgICAgICByZXR1cm4geyBjb3JyZWN0bmVzczogJ3BhcnRpYWwnLCBzaW1pbGFyaXR5OiBvdmVyYWxsU2ltaWxhcml0eSB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgY29ycmVjdG5lc3M6ICd3cm9uZycsIHNpbWlsYXJpdHk6IG92ZXJhbGxTaW1pbGFyaXR5IH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHU1OTA0XHU3NDA2XHU1QjU3XHU3QjI2XHU0RTMyXG4gICAgY29uc3QgY29ycmVjdCA9IHRoaXMubm9ybWFsaXplKGNvcnJlY3RBbnN3ZXIgYXMgc3RyaW5nKTtcbiAgICBjb25zdCB1c2VyID0gdGhpcy5ub3JtYWxpemUodXNlckFuc3dlciBhcyBzdHJpbmcpO1xuXG4gICAgLy8gXHU3QTdBXHU3QjU0XHU2ODQ4XG4gICAgaWYgKHVzZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4geyBjb3JyZWN0bmVzczogJ3dyb25nJywgc2ltaWxhcml0eTogMCB9O1xuICAgIH1cblxuICAgIC8vIFx1OTU3Rlx1NUVBNlx1NURFRVx1NUYwMlx1OEZDN1x1NTkyN1x1NzZGNFx1NjNBNVx1NTIyNFx1OTUxOVxuICAgIGNvbnN0IGxlbmd0aFJhdGlvID0gTWF0aC5taW4odXNlci5sZW5ndGgsIGNvcnJlY3QubGVuZ3RoKSAvIE1hdGgubWF4KHVzZXIubGVuZ3RoLCBjb3JyZWN0Lmxlbmd0aCk7XG4gICAgaWYgKGxlbmd0aFJhdGlvIDwgMC4zKSB7XG5cbiAgICAgIHJldHVybiB7IGNvcnJlY3RuZXNzOiAnd3JvbmcnLCBzaW1pbGFyaXR5OiAwIH07XG4gICAgfVxuXG4gICAgY29uc3Qgc2ltaWxhcml0eSA9IHRoaXMuY2FsY3VsYXRlU2ltaWxhcml0eShjb3JyZWN0LCB1c2VyKTtcblxuXG5cbiAgICBpZiAoc2ltaWxhcml0eSA+PSAwLjkpIHtcbiAgICAgIHJldHVybiB7IGNvcnJlY3RuZXNzOiAnY29ycmVjdCcsIHNpbWlsYXJpdHkgfTtcbiAgICB9IGVsc2UgaWYgKHNpbWlsYXJpdHkgPj0gMC43KSB7XG4gICAgICByZXR1cm4geyBjb3JyZWN0bmVzczogJ3BhcnRpYWwnLCBzaW1pbGFyaXR5IH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB7IGNvcnJlY3RuZXNzOiAnd3JvbmcnLCBzaW1pbGFyaXR5IH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NjgwN1x1NTFDNlx1NTMxNlx1NjU4N1x1NjcyQ1xuICAgKi9cbiAgcHJpdmF0ZSBub3JtYWxpemUodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGV4dFxuICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgIC50cmltKClcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csICcgJykgICAgLy8gXHU1NDA4XHU1RTc2XHU1OTFBXHU0RTJBXHU3QTdBXHU2ODNDXHU0RTNBXHU0RTAwXHU0RTJBXG4gICAgICAucmVwbGFjZSgvXFxuKy9nLCAnICcpICAgIC8vIFx1NjM2Mlx1ODg0Q1x1NjZGRlx1NjM2Mlx1NEUzQVx1N0E3QVx1NjgzQ1xuICAgICAgLnJlcGxhY2UoL1tcdUZGMENcdTMwMDJcdUZGMDFcdUZGMUZcdTMwMDFcdUZGMUJcdUZGMUFcIlwiJydcdUZGMDhcdUZGMDlcdTMwMEFcdTMwMEJcdTMwMTBcdTMwMTFcXC4sIT87OlwiJygpXFxbXFxde31dL2csICcnKTsgIC8vIFx1NzlGQlx1OTY2NFx1NjgwN1x1NzBCOVx1N0IyNlx1NTNGN1xuICB9XG5cbiAgLyoqXG4gICAqIFx1OEJBMVx1N0I5N1x1NzZGOFx1NEYzQ1x1NUVBNlx1RkYwOExldmVuc2h0ZWluIFx1OERERFx1NzlCQlx1RkYwOVxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVTaW1pbGFyaXR5KHN0cjE6IHN0cmluZywgc3RyMjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBpZiAoc3RyMSA9PT0gc3RyMikgcmV0dXJuIDE7XG4gICAgaWYgKHN0cjEubGVuZ3RoID09PSAwIHx8IHN0cjIubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IG1hdHJpeDogbnVtYmVyW11bXSA9IFtdO1xuXG4gICAgLy8gXHU1MjFEXHU1OUNCXHU1MzE2XHU3N0U5XHU5NjM1XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gc3RyMi5sZW5ndGg7IGkrKykge1xuICAgICAgbWF0cml4W2ldID0gW2ldO1xuICAgIH1cbiAgICBmb3IgKGxldCBqID0gMDsgaiA8PSBzdHIxLmxlbmd0aDsgaisrKSB7XG4gICAgICBtYXRyaXhbMF1bal0gPSBqO1xuICAgIH1cblxuICAgIC8vIFx1NTg2Qlx1NTE0NVx1NzdFOVx1OTYzNVxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHN0cjIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSAxOyBqIDw9IHN0cjEubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHN0cjIuY2hhckF0KGkgLSAxKSA9PT0gc3RyMS5jaGFyQXQoaiAtIDEpKSB7XG4gICAgICAgICAgbWF0cml4W2ldW2pdID0gbWF0cml4W2kgLSAxXVtqIC0gMV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWF0cml4W2ldW2pdID0gTWF0aC5taW4oXG4gICAgICAgICAgICBtYXRyaXhbaSAtIDFdW2ogLSAxXSArIDEsIC8vIFx1NjZGRlx1NjM2MlxuICAgICAgICAgICAgbWF0cml4W2ldW2ogLSAxXSArIDEsICAgICAvLyBcdTYzRDJcdTUxNjVcbiAgICAgICAgICAgIG1hdHJpeFtpIC0gMV1bal0gKyAxICAgICAgLy8gXHU1MjIwXHU5NjY0XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGRpc3RhbmNlID0gbWF0cml4W3N0cjIubGVuZ3RoXVtzdHIxLmxlbmd0aF07XG4gICAgY29uc3QgbWF4TGVuZ3RoID0gTWF0aC5tYXgoc3RyMS5sZW5ndGgsIHN0cjIubGVuZ3RoKTtcbiAgICBcbiAgICByZXR1cm4gMSAtIGRpc3RhbmNlIC8gbWF4TGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjgzOVx1NjM2RVx1NzZGOFx1NEYzQ1x1NUVBNlx1NUVGQVx1OEJBRVx1OTZCRVx1NUVBNlxuICAgKi9cbiAgc3VnZ2VzdEVhc2Uoc2ltaWxhcml0eTogbnVtYmVyKTogUmV2aWV3RWFzZSB7XG4gICAgaWYgKHNpbWlsYXJpdHkgPj0gMC45KSByZXR1cm4gJ2Vhc3knO1xuICAgIGlmIChzaW1pbGFyaXR5ID49IDAuOCkgcmV0dXJuICdnb29kJztcbiAgICBpZiAoc2ltaWxhcml0eSA+PSAwLjUpIHJldHVybiAnaGFyZCc7XG4gICAgcmV0dXJuICdhZ2Fpbic7XG4gIH1cbn0iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IEFuYWx5dGljc0VuZ2luZSB9IGZyb20gJy4uL2NvcmUvQW5hbHl0aWNzRW5naW5lJztcblxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9TVEFUUyA9ICdsZWFybmluZy1zeXN0ZW0tc3RhdHMnO1xuXG5leHBvcnQgY2xhc3MgU3RhdHNWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luO1xuICBwcml2YXRlIGFuYWx5dGljczogQW5hbHl0aWNzRW5naW5lO1xuICBwcml2YXRlIGN1cnJlbnRUYWI6ICdvdmVydmlldycgfCAndHJlbmRzJyB8ICdkZWNrcycgfCAnZGlmZmljdWx0JyA9ICdvdmVydmlldyc7XG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbikge1xuICAgIHN1cGVyKGxlYWYpO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMuYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljc0VuZ2luZShwbHVnaW4pO1xuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gVklFV19UWVBFX1NUQVRTO1xuICB9XG5cbiAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ0xlYXJuaW5nIFN0YXRpc3RpY3MnO1xuICB9XG5cbiAgZ2V0SWNvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiAnYmFyLWNoYXJ0JztcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICB0aGlzLnJlbmRlcigpO1xuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBhc3luYyBvbkNsb3NlKCkge31cblxuICBwcml2YXRlIHJlbmRlcigpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdO1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIGNvbnRhaW5lci5hZGRDbGFzcygnc3RhdHMtY29udGFpbmVyJyk7XG5cbiAgICAvLyBcdTY4MDdcdTk4OThcdTY4MEZcbiAgICBjb25zdCBoZWFkZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc3RhdHMtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXIuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0NBIExlYXJuaW5nIFN0YXRpc3RpY3MnIH0pO1xuXG4gICAgLy8gXHU1MjM3XHU2NUIwXHU2MzA5XHU5NEFFXG4gICAgY29uc3QgcmVmcmVzaEJ0biA9IGhlYWRlci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1x1MjdGMycsXG4gICAgICBjbHM6ICdyZWZyZXNoLWJ0bidcbiAgICB9KTtcbiAgICByZWZyZXNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5yZW5kZXIoKSk7XG5cbiAgICAvLyBcdTY4MDdcdTdCN0VcdTk4NzVcbiAgICB0aGlzLnJlbmRlclRhYnMoY29udGFpbmVyKTtcblxuICAgIC8vIFx1NTE4NVx1NUJCOVx1NTMzQVx1NTdERlxuICAgIGNvbnN0IGNvbnRlbnQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc3RhdHMtY29udGVudCcgfSk7XG5cbiAgICBzd2l0Y2ggKHRoaXMuY3VycmVudFRhYikge1xuICAgICAgY2FzZSAnb3ZlcnZpZXcnOlxuICAgICAgICB0aGlzLnJlbmRlck92ZXJ2aWV3KGNvbnRlbnQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RyZW5kcyc6XG4gICAgICAgIHRoaXMucmVuZGVyVHJlbmRzKGNvbnRlbnQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2RlY2tzJzpcbiAgICAgICAgdGhpcy5yZW5kZXJEZWNrcyhjb250ZW50KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkaWZmaWN1bHQnOlxuICAgICAgICB0aGlzLnJlbmRlckRpZmZpY3VsdChjb250ZW50KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJUYWJzKGNvbnRhaW5lcjogRWxlbWVudCkge1xuICAgIGNvbnN0IHRhYnMgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc3RhdHMtdGFicycgfSk7XG5cbiAgICBjb25zdCB0YWJDb25maWdzID0gW1xuICAgICAgeyBpZDogJ292ZXJ2aWV3JywgbGFiZWw6ICdcdUQ4M0RcdURDQ0EgT3ZlcnZpZXcnIH0sXG4gICAgICB7IGlkOiAndHJlbmRzJywgbGFiZWw6ICdcdUQ4M0RcdURDQzggVHJlbmRzJyB9LFxuICAgICAgeyBpZDogJ2RlY2tzJywgbGFiZWw6ICdcdUQ4M0RcdURDREEgRGVja3MnIH0sXG4gICAgICB7IGlkOiAnZGlmZmljdWx0JywgbGFiZWw6ICdcdTI2QTBcdUZFMEYgRGlmZmljdWx0JyB9XG4gICAgXTtcblxuICAgIHRhYkNvbmZpZ3MuZm9yRWFjaChjb25maWcgPT4ge1xuICAgICAgY29uc3QgdGFiID0gdGFicy5jcmVhdGVEaXYoe1xuICAgICAgICBjbHM6IGB0YWIgJHt0aGlzLmN1cnJlbnRUYWIgPT09IGNvbmZpZy5pZCA/ICdhY3RpdmUnIDogJyd9YFxuICAgICAgfSk7XG4gICAgICB0YWIudGV4dENvbnRlbnQgPSBjb25maWcubGFiZWw7XG4gICAgICB0YWIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY3VycmVudFRhYiA9IGNvbmZpZy5pZCBhcyBhbnk7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyT3ZlcnZpZXcoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHN0YXRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRTdGF0cygpO1xuICAgIGNvbnN0IHsgdGhpc1dlZWssIGxhc3RXZWVrIH0gPSB0aGlzLmFuYWx5dGljcy5nZXRXZWVrbHlTdGF0cygpO1xuICAgIGNvbnN0IGRhaWx5U3RhdHMgPSB0aGlzLmFuYWx5dGljcy5nZXREYWlseVN0YXRzKDcpO1xuXG4gICAgLy8gXHU1MTczXHU5NTJFXHU2MzA3XHU2ODA3XHU1MzYxXHU3MjQ3XG4gICAgY29uc3QgbWV0cmljc0dyaWQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbWV0cmljcy1ncmlkJyB9KTtcblxuICAgIHRoaXMuY3JlYXRlTWV0cmljQ2FyZChtZXRyaWNzR3JpZCwge1xuICAgICAgdGl0bGU6ICdUb3RhbCBDYXJkcycsXG4gICAgICB2YWx1ZTogc3RhdHMudG90YWwudG9TdHJpbmcoKSxcbiAgICAgIGljb246ICdcdUQ4M0NcdURDQ0YnXG4gICAgfSk7XG5cbiAgICB0aGlzLmNyZWF0ZU1ldHJpY0NhcmQobWV0cmljc0dyaWQsIHtcbiAgICAgIHRpdGxlOiAnRHVlIFRvZGF5JyxcbiAgICAgIHZhbHVlOiBzdGF0cy5kdWUudG9TdHJpbmcoKSxcbiAgICAgIGljb246ICdcdUQ4M0RcdURDQzUnXG4gICAgfSk7XG5cbiAgICB0aGlzLmNyZWF0ZU1ldHJpY0NhcmQobWV0cmljc0dyaWQsIHtcbiAgICAgIHRpdGxlOiAnUmV2aWV3ZWQgVG9kYXknLFxuICAgICAgdmFsdWU6IHN0YXRzLnJldmlld2VkVG9kYXkudG9TdHJpbmcoKSxcbiAgICAgIGljb246ICdcdTI3MDUnXG4gICAgfSk7XG5cbiAgICBjb25zdCBzdHJlYWsgPSB0aGlzLmFuYWx5dGljcy5jYWxjdWxhdGVTdHJlYWsoKTtcbiAgICB0aGlzLmNyZWF0ZU1ldHJpY0NhcmQobWV0cmljc0dyaWQsIHtcbiAgICAgIHRpdGxlOiAnQ3VycmVudCBTdHJlYWsnLFxuICAgICAgdmFsdWU6IGAke3N0cmVha30gZGF5c2AsXG4gICAgICBpY29uOiAnXHVEODNEXHVERDI1J1xuICAgIH0pO1xuXG4gICAgLy8gXHU2NzJDXHU1NDY4IHZzIFx1NEUwQVx1NTQ2OFxuICAgIGNvbnN0IHdlZWtDb21wYXJpc29uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3dlZWstY29tcGFyaXNvbicgfSk7XG4gICAgd2Vla0NvbXBhcmlzb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVGhpcyBXZWVrIHZzIExhc3QgV2VlaycgfSk7XG5cbiAgICBjb25zdCBjb21wYXJpc29uR3JpZCA9IHdlZWtDb21wYXJpc29uLmNyZWF0ZURpdih7IGNsczogJ2NvbXBhcmlzb24tZ3JpZCcgfSk7XG5cbiAgICBjb25zdCByZXZpZXdDaGFuZ2UgPSB0aGlzV2Vlay50b3RhbFJldmlld3MgLSBsYXN0V2Vlay50b3RhbFJldmlld3M7XG4gICAgY29uc3QgcmV2aWV3Q2hhbmdlUGVyY2VudCA9IGxhc3RXZWVrLnRvdGFsUmV2aWV3cyA+IDBcbiAgICAgID8gKChyZXZpZXdDaGFuZ2UgLyBsYXN0V2Vlay50b3RhbFJldmlld3MpICogMTAwKS50b0ZpeGVkKDEpXG4gICAgICA6ICcwJztcblxuICAgIHRoaXMuY3JlYXRlQ29tcGFyaXNvbkl0ZW0oY29tcGFyaXNvbkdyaWQsIHtcbiAgICAgIGxhYmVsOiAnUmV2aWV3cycsXG4gICAgICB0aGlzV2VlazogdGhpc1dlZWsudG90YWxSZXZpZXdzLFxuICAgICAgbGFzdFdlZWs6IGxhc3RXZWVrLnRvdGFsUmV2aWV3cyxcbiAgICAgIGNoYW5nZTogcmV2aWV3Q2hhbmdlLFxuICAgICAgY2hhbmdlUGVyY2VudDogcmV2aWV3Q2hhbmdlUGVyY2VudFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmF0ZUNoYW5nZSA9ICh0aGlzV2Vlay5hdmVyYWdlQ29ycmVjdFJhdGUgLSBsYXN0V2Vlay5hdmVyYWdlQ29ycmVjdFJhdGUpICogMTAwO1xuICAgIHRoaXMuY3JlYXRlQ29tcGFyaXNvbkl0ZW0oY29tcGFyaXNvbkdyaWQsIHtcbiAgICAgIGxhYmVsOiAnQ29ycmVjdCBSYXRlJyxcbiAgICAgIHRoaXNXZWVrOiBgJHsodGhpc1dlZWsuYXZlcmFnZUNvcnJlY3RSYXRlICogMTAwKS50b0ZpeGVkKDEpfSVgLFxuICAgICAgbGFzdFdlZWs6IGAkeyhsYXN0V2Vlay5hdmVyYWdlQ29ycmVjdFJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JWAsXG4gICAgICBjaGFuZ2U6IHJhdGVDaGFuZ2UsXG4gICAgICBjaGFuZ2VQZXJjZW50OiByYXRlQ2hhbmdlLnRvRml4ZWQoMSlcbiAgICB9KTtcblxuICAgIC8vIFx1NjcwMFx1OEZEMTdcdTU5MjlcdTZEM0JcdTUyQThcbiAgICBjb25zdCByZWNlbnRBY3Rpdml0eSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdyZWNlbnQtYWN0aXZpdHknIH0pO1xuICAgIHJlY2VudEFjdGl2aXR5LmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0xhc3QgNyBEYXlzIEFjdGl2aXR5JyB9KTtcblxuICAgIGNvbnN0IGFjdGl2aXR5Q2hhcnQgPSByZWNlbnRBY3Rpdml0eS5jcmVhdGVEaXYoeyBjbHM6ICdhY3Rpdml0eS1jaGFydCcgfSk7XG4gICAgdGhpcy5yZW5kZXJTaW1wbGVCYXJDaGFydChhY3Rpdml0eUNoYXJ0LCBkYWlseVN0YXRzKTtcblxuICAgIC8vIFx1NzUxRlx1NjIxMFx1NjJBNVx1NTQ0QVx1NjMwOVx1OTRBRVxuICAgIGNvbnN0IHJlcG9ydFNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncmVwb3J0LXNlY3Rpb24nIH0pO1xuICAgIGNvbnN0IHJlcG9ydEJ0biA9IHJlcG9ydFNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdcdUQ4M0RcdURDQzQgR2VuZXJhdGUgRnVsbCBSZXBvcnQnLFxuICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICB9KTtcbiAgICAvLyByZXBvcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmdlbmVyYXRlQW5kU2hvd1JlcG9ydCgpKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyVHJlbmRzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUGVyZm9ybWFuY2UgVHJlbmRzJyB9KTtcblxuICAgIGNvbnN0IGRhaWx5U3RhdHMgPSB0aGlzLmFuYWx5dGljcy5nZXREYWlseVN0YXRzKDMwKTtcblxuICAgIC8vIFx1NkI2M1x1Nzg2RVx1NzM4N1x1OEQ4Qlx1NTJCRlxuICAgIGNvbnN0IGNvcnJlY3RSYXRlU2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjaGFydC1zZWN0aW9uJyB9KTtcbiAgICBjb3JyZWN0UmF0ZVNlY3Rpb24uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnQ29ycmVjdCBSYXRlIChMYXN0IDMwIERheXMpJyB9KTtcbiAgICBjb25zdCBjb3JyZWN0UmF0ZUNoYXJ0ID0gY29ycmVjdFJhdGVTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ2xpbmUtY2hhcnQnIH0pO1xuICAgIHRoaXMucmVuZGVyTGluZUNoYXJ0KGNvcnJlY3RSYXRlQ2hhcnQsIGRhaWx5U3RhdHMsICdjb3JyZWN0UmF0ZScpO1xuXG4gICAgLy8gXHU2QkNGXHU2NUU1XHU1OTBEXHU0RTYwXHU5MUNGXG4gICAgY29uc3QgcmV2aWV3c1NlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2hhcnQtc2VjdGlvbicgfSk7XG4gICAgcmV2aWV3c1NlY3Rpb24uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnRGFpbHkgUmV2aWV3cycgfSk7XG4gICAgY29uc3QgcmV2aWV3c0NoYXJ0ID0gcmV2aWV3c1NlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAnYmFyLWNoYXJ0JyB9KTtcbiAgICB0aGlzLnJlbmRlckJhckNoYXJ0KHJldmlld3NDaGFydCwgZGFpbHlTdGF0cyk7XG5cbiAgICAvLyBcdTcwRURcdTUyOUJcdTU2RkVcbiAgICBjb25zdCBoZWF0bWFwU2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjaGFydC1zZWN0aW9uJyB9KTtcbiAgICBoZWF0bWFwU2VjdGlvbi5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdTdHVkeSBBY3Rpdml0eSBDYWxlbmRhcicgfSk7XG4gICAgY29uc3QgaGVhdG1hcCA9IGhlYXRtYXBTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ2hlYXRtYXAnIH0pO1xuICAgIHRoaXMucmVuZGVySGVhdG1hcChoZWF0bWFwKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyRGVja3MoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdEZWNrIFN0YXRpc3RpY3MnIH0pO1xuXG4gICAgY29uc3QgZGVja1N0YXRzID0gdGhpcy5hbmFseXRpY3MuZ2V0RGVja1N0YXRzKCk7XG5cbiAgICBpZiAoZGVja1N0YXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29udGFpbmVyLmNyZWF0ZURpdih7IFxuICAgICAgICB0ZXh0OiAnTm8gZGVja3MgeWV0LiBDcmVhdGUgc29tZSBmbGFzaGNhcmRzIHRvIHNlZSBkZWNrIHN0YXRpc3RpY3MhJyxcbiAgICAgICAgY2xzOiAnZW1wdHktbWVzc2FnZSdcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGRlY2tzR3JpZCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdkZWNrcy1ncmlkJyB9KTtcblxuICAgIGRlY2tTdGF0cy5mb3JFYWNoKGRlY2sgPT4ge1xuICAgICAgY29uc3QgZGVja0NhcmQgPSBkZWNrc0dyaWQuY3JlYXRlRGl2KHsgY2xzOiAnZGVjay1jYXJkJyB9KTtcblxuICAgICAgY29uc3QgaGVhZGVyID0gZGVja0NhcmQuY3JlYXRlRGl2KHsgY2xzOiAnZGVjay1jYXJkLWhlYWRlcicgfSk7XG4gICAgICBoZWFkZXIuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiBkZWNrLmRlY2tOYW1lIH0pO1xuICAgICAgXG4gICAgICBoZWFkZXIuY3JlYXRlU3Bhbih7XG4gICAgICAgIHRleHQ6IGAke2RlY2sudG90YWxDYXJkc30gY2FyZHNgLFxuICAgICAgICBjbHM6ICdkZWNrLWJhZGdlJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHN0YXRzID0gZGVja0NhcmQuY3JlYXRlRGl2KHsgY2xzOiAnZGVjay1jYXJkLXN0YXRzJyB9KTtcblxuICAgICAgdGhpcy5jcmVhdGVTdGF0Um93KHN0YXRzLCAnRHVlJywgZGVjay5kdWVDYXJkcy50b1N0cmluZygpLCAnXHVEODNEXHVEQ0M1Jyk7XG4gICAgICB0aGlzLmNyZWF0ZVN0YXRSb3coc3RhdHMsICdOZXcnLCBkZWNrLm5ld0NhcmRzLnRvU3RyaW5nKCksICdcdUQ4M0NcdUREOTUnKTtcbiAgICAgIHRoaXMuY3JlYXRlU3RhdFJvdyhcbiAgICAgICAgc3RhdHMsIFxuICAgICAgICAnQ29ycmVjdCBSYXRlJywgXG4gICAgICAgIGAkeyhkZWNrLmNvcnJlY3RSYXRlICogMTAwKS50b0ZpeGVkKDEpfSVgLFxuICAgICAgICAnXHUyNzA1J1xuICAgICAgKTtcbiAgICAgIHRoaXMuY3JlYXRlU3RhdFJvdyhcbiAgICAgICAgc3RhdHMsXG4gICAgICAgICdBdmcgSW50ZXJ2YWwnLFxuICAgICAgICBgJHtkZWNrLmF2ZXJhZ2VJbnRlcnZhbC50b0ZpeGVkKDEpfSBkYXlzYCxcbiAgICAgICAgJ1x1RDgzRFx1RENDQSdcbiAgICAgICk7XG5cbiAgICAgIC8vIFx1OEZEQlx1NUVBNlx1Njc2MVxuICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBkZWNrQ2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdkZWNrLXByb2dyZXNzJyB9KTtcbiAgICAgIGNvbnN0IG1hc3RlcmVkQ291bnQgPSBkZWNrLnRvdGFsQ2FyZHMgLSBkZWNrLmR1ZUNhcmRzIC0gZGVjay5uZXdDYXJkcztcbiAgICAgIGNvbnN0IG1hc3RlcmVkUGVyY2VudCA9IChtYXN0ZXJlZENvdW50IC8gZGVjay50b3RhbENhcmRzKSAqIDEwMDtcbiAgICAgIFxuICAgICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSBwcm9ncmVzcy5jcmVhdGVEaXYoeyBjbHM6ICdwcm9ncmVzcy1iYXItY29udGFpbmVyJyB9KTtcbiAgICAgIGNvbnN0IGJhciA9IHByb2dyZXNzQmFyLmNyZWF0ZURpdih7IGNsczogJ3Byb2dyZXNzLWJhci1maWxsJyB9KTtcbiAgICAgIGJhci5zdHlsZS53aWR0aCA9IGAke21hc3RlcmVkUGVyY2VudH0lYDtcbiAgICAgIFxuICAgICAgcHJvZ3Jlc3MuY3JlYXRlRGl2KHtcbiAgICAgICAgdGV4dDogYCR7bWFzdGVyZWRQZXJjZW50LnRvRml4ZWQoMCl9JSBtYXN0ZXJlZGAsXG4gICAgICAgIGNsczogJ3Byb2dyZXNzLWxhYmVsJ1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckRpZmZpY3VsdChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0NhcmRzIE5lZWRpbmcgQXR0ZW50aW9uJyB9KTtcblxuICAgIGNvbnN0IGRpZmZpY3VsdENhcmRzID0gdGhpcy5hbmFseXRpY3MuZ2V0RGlmZmljdWx0Q2FyZHMoMTApO1xuXG4gICAgaWYgKGRpZmZpY3VsdENhcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29udGFpbmVyLmNyZWF0ZURpdih7XG4gICAgICAgIHRleHQ6ICdcdUQ4M0NcdURGODkgTm8gZGlmZmljdWx0IGNhcmRzISBHcmVhdCBqb2IhJyxcbiAgICAgICAgY2xzOiAnZW1wdHktbWVzc2FnZSdcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNhcmRzTGlzdCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdkaWZmaWN1bHQtY2FyZHMtbGlzdCcgfSk7XG5cbiAgICBkaWZmaWN1bHRDYXJkcy5mb3JFYWNoKChkYywgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGNhcmRJdGVtID0gY2FyZHNMaXN0LmNyZWF0ZURpdih7IGNsczogJ2RpZmZpY3VsdC1jYXJkLWl0ZW0nIH0pO1xuXG4gICAgICBjb25zdCByYW5rID0gY2FyZEl0ZW0uY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1yYW5rJyB9KTtcbiAgICAgIHJhbmsudGV4dENvbnRlbnQgPSBgJHtpbmRleCArIDF9YDtcblxuICAgICAgY29uc3QgY29udGVudCA9IGNhcmRJdGVtLmNyZWF0ZURpdih7IGNsczogJ2NhcmQtY29udGVudCcgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHF1ZXN0aW9uID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLXF1ZXN0aW9uJyB9KTtcbiAgICAgIHF1ZXN0aW9uLnRleHRDb250ZW50ID0gZGMuY2FyZC5mcm9udC5zdWJzdHJpbmcoMCwgODApICsgXG4gICAgICAgIChkYy5jYXJkLmZyb250Lmxlbmd0aCA+IDgwID8gJy4uLicgOiAnJyk7XG5cbiAgICAgIGNvbnN0IG1ldGEgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ2NhcmQtbWV0YScgfSk7XG5cbiAgICAgIGNvbnN0IHBhdHRlcm5FbW9qaTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICAgJ2NvbmNlcHQnOiAnXHVEODNFXHVEREUwJyxcbiAgICAgICAgJ21lbW9yeSc6ICdcdUQ4M0RcdURDQUQnLFxuICAgICAgICAnY2FsY3VsYXRpb24nOiAnXHVEODNEXHVERDIyJyxcbiAgICAgICAgJ3Vua25vd24nOiAnXHUyNzUzJ1xuICAgICAgfTtcblxuICAgICAgbWV0YS5jcmVhdGVTcGFuKHtcbiAgICAgICAgdGV4dDogYCR7cGF0dGVybkVtb2ppW2RjLnBhdHRlcm5dfSAke2RjLnBhdHRlcm59YCxcbiAgICAgICAgY2xzOiAncGF0dGVybi1iYWRnZSdcbiAgICAgIH0pO1xuXG4gICAgICBtZXRhLmNyZWF0ZVNwYW4oe1xuICAgICAgICB0ZXh0OiBgJHtkYy5lcnJvckNvdW50fSBlcnJvcnNgLFxuICAgICAgICBjbHM6ICdlcnJvci1jb3VudCdcbiAgICAgIH0pO1xuXG4gICAgICBtZXRhLmNyZWF0ZVNwYW4oe1xuICAgICAgICB0ZXh0OiBgJHtkYy5hdmVyYWdlVGltZS50b0ZpeGVkKDEpfXMgYXZnYCxcbiAgICAgICAgY2xzOiAnYXZnLXRpbWUnXG4gICAgICB9KTtcblxuICAgICAgLy8gXHU5NkJFXHU1RUE2XHU2NzYxXG4gICAgICBjb25zdCBkaWZmaWN1bHR5QmFyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdkaWZmaWN1bHR5LWJhci1jb250YWluZXInIH0pO1xuICAgICAgY29uc3QgZGlmZkJhciA9IGRpZmZpY3VsdHlCYXIuY3JlYXRlRGl2KHsgY2xzOiAnZGlmZmljdWx0eS1iYXInIH0pO1xuICAgICAgZGlmZkJhci5zdHlsZS53aWR0aCA9IGAke2RjLmNhcmQuc3RhdHMuZGlmZmljdWx0eSAqIDEwMH0lYDtcblxuICAgICAgLy8gXHU2NENEXHU0RjVDXHU2MzA5XHU5NEFFXG4gICAgICBjb25zdCBhY3Rpb25zID0gY2FyZEl0ZW0uY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1hY3Rpb25zJyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QganVtcEJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogJ1x1MjE5NycsXG4gICAgICAgIGNsczogJ2FjdGlvbi1idG4tc21hbGwnXG4gICAgICB9KTtcbiAgICAgIGp1bXBCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmp1bXBUb0NhcmQoZGMuY2FyZCkpO1xuXG4gICAgICBjb25zdCByZXZpZXdCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIHRleHQ6ICdcdUQ4M0RcdUREMDQnLFxuICAgICAgICBjbHM6ICdhY3Rpb24tYnRuLXNtYWxsJ1xuICAgICAgfSk7XG4gICAgICByZXZpZXdCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMucGx1Z2luLmFjdGl2YXRlUmV2aWV3KCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZGVsZXRlQnRuID0gYWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICB0ZXh0OiAnXHVEODNEXHVEREQxXHVGRTBGJyxcbiAgICAgICAgY2xzOiAnYWN0aW9uLWJ0bi1zbWFsbCBkZWxldGUtYnRuJ1xuICAgICAgfSk7XG4gICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGlmIChjb25maXJtKCdcdTc4NkVcdTVCOUFcdTg5ODFcdTUyMjBcdTk2NjRcdThGRDlcdTVGMjBcdTk1RUFcdTUzNjFcdTU0MTdcdUZGMUYnKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlRmxhc2hjYXJkKGRjLmNhcmQuaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlTWV0cmljQ2FyZChcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIGNvbmZpZzogeyB0aXRsZTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nOyBpY29uOiBzdHJpbmcgfVxuICApIHtcbiAgICBjb25zdCBjYXJkID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ21ldHJpYy1jYXJkJyB9KTtcbiAgICBcbiAgICBjYXJkLmNyZWF0ZURpdih7IHRleHQ6IGNvbmZpZy5pY29uLCBjbHM6ICdtZXRyaWMtaWNvbicgfSk7XG4gICAgXG4gICAgY29uc3QgY29udGVudCA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnbWV0cmljLWNvbnRlbnQnIH0pO1xuICAgIGNvbnRlbnQuY3JlYXRlRGl2KHsgdGV4dDogY29uZmlnLnRpdGxlLCBjbHM6ICdtZXRyaWMtdGl0bGUnIH0pO1xuICAgIGNvbnRlbnQuY3JlYXRlRGl2KHsgdGV4dDogY29uZmlnLnZhbHVlLCBjbHM6ICdtZXRyaWMtdmFsdWUnIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVDb21wYXJpc29uSXRlbShcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIGNvbmZpZzoge1xuICAgICAgbGFiZWw6IHN0cmluZztcbiAgICAgIHRoaXNXZWVrOiBudW1iZXIgfCBzdHJpbmc7XG4gICAgICBsYXN0V2VlazogbnVtYmVyIHwgc3RyaW5nO1xuICAgICAgY2hhbmdlOiBudW1iZXI7XG4gICAgICBjaGFuZ2VQZXJjZW50OiBzdHJpbmc7XG4gICAgfVxuICApIHtcbiAgICBjb25zdCBpdGVtID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NvbXBhcmlzb24taXRlbScgfSk7XG4gICAgXG4gICAgaXRlbS5jcmVhdGVEaXYoeyB0ZXh0OiBjb25maWcubGFiZWwsIGNsczogJ2NvbXBhcmlzb24tbGFiZWwnIH0pO1xuICAgIFxuICAgIGNvbnN0IHZhbHVlcyA9IGl0ZW0uY3JlYXRlRGl2KHsgY2xzOiAnY29tcGFyaXNvbi12YWx1ZXMnIH0pO1xuICAgIHZhbHVlcy5jcmVhdGVTcGFuKHsgXG4gICAgICB0ZXh0OiBgJHtjb25maWcudGhpc1dlZWt9YCxcbiAgICAgIGNsczogJ3RoaXMtd2VlaydcbiAgICB9KTtcbiAgICB2YWx1ZXMuY3JlYXRlU3Bhbih7IHRleHQ6ICcgdnMgJywgY2xzOiAndnMnIH0pO1xuICAgIHZhbHVlcy5jcmVhdGVTcGFuKHtcbiAgICAgIHRleHQ6IGAke2NvbmZpZy5sYXN0V2Vla31gLFxuICAgICAgY2xzOiAnbGFzdC13ZWVrJ1xuICAgIH0pO1xuXG4gICAgY29uc3QgY2hhbmdlQ2xhc3MgPSBjb25maWcuY2hhbmdlID4gMCA/ICdwb3NpdGl2ZScgOiBjb25maWcuY2hhbmdlIDwgMCA/ICduZWdhdGl2ZScgOiAnbmV1dHJhbCc7XG4gICAgY29uc3QgY2hhbmdlSWNvbiA9IGNvbmZpZy5jaGFuZ2UgPiAwID8gJ1x1MjE5NycgOiBjb25maWcuY2hhbmdlIDwgMCA/ICdcdTIxOTgnIDogJ1x1MjE5Mic7XG4gICAgXG4gICAgaXRlbS5jcmVhdGVEaXYoe1xuICAgICAgdGV4dDogYCR7Y2hhbmdlSWNvbn0gJHtjb25maWcuY2hhbmdlUGVyY2VudH0lYCxcbiAgICAgIGNsczogYGNoYW5nZSAke2NoYW5nZUNsYXNzfWBcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlU3RhdFJvdyhcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIGxhYmVsOiBzdHJpbmcsXG4gICAgdmFsdWU6IHN0cmluZyxcbiAgICBpY29uOiBzdHJpbmdcbiAgKSB7XG4gICAgY29uc3Qgcm93ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3N0YXQtcm93JyB9KTtcbiAgICByb3cuY3JlYXRlU3Bhbih7IHRleHQ6IGljb24sIGNsczogJ3N0YXQtaWNvbicgfSk7XG4gICAgcm93LmNyZWF0ZVNwYW4oeyB0ZXh0OiBsYWJlbCwgY2xzOiAnc3RhdC1sYWJlbCcgfSk7XG4gICAgcm93LmNyZWF0ZVNwYW4oeyB0ZXh0OiB2YWx1ZSwgY2xzOiAnc3RhdC12YWx1ZScgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclNpbXBsZUJhckNoYXJ0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGRhdGE6IGFueVtdKSB7XG4gICAgY29uc3QgbWF4VmFsdWUgPSBNYXRoLm1heCguLi5kYXRhLm1hcChkID0+IGQucmV2aWV3ZWQpKTtcblxuICAgIGRhdGEuZm9yRWFjaChzdGF0ID0+IHtcbiAgICAgIGNvbnN0IGJhciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzaW1wbGUtYmFyJyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHN0YXQuZGF0ZSk7XG4gICAgICBjb25zdCBkYXlOYW1lID0gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLVVTJywgeyB3ZWVrZGF5OiAnc2hvcnQnIH0pO1xuICAgICAgXG4gICAgICBiYXIuY3JlYXRlRGl2KHsgdGV4dDogZGF5TmFtZSwgY2xzOiAnYmFyLWxhYmVsJyB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgYmFyQ29udGFpbmVyID0gYmFyLmNyZWF0ZURpdih7IGNsczogJ2Jhci1jb250YWluZXInIH0pO1xuICAgICAgY29uc3QgYmFyRmlsbCA9IGJhckNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdiYXItZmlsbCcgfSk7XG4gICAgICBjb25zdCBoZWlnaHQgPSBtYXhWYWx1ZSA+IDAgPyAoc3RhdC5yZXZpZXdlZCAvIG1heFZhbHVlKSAqIDEwMCA6IDA7XG4gICAgICBiYXJGaWxsLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH0lYDtcbiAgICAgIFxuICAgICAgYmFyLmNyZWF0ZURpdih7IHRleHQ6IHN0YXQucmV2aWV3ZWQudG9TdHJpbmcoKSwgY2xzOiAnYmFyLXZhbHVlJyB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyQmFyQ2hhcnQoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZGF0YTogYW55W10pIHtcbiAgICBjb25zdCBjaGFydCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjaGFydC1jYW52YXMnIH0pO1xuICAgIGNvbnN0IG1heFZhbHVlID0gTWF0aC5tYXgoLi4uZGF0YS5tYXAoZCA9PiBkLnJldmlld2VkKSk7XG5cbiAgICBkYXRhLmZvckVhY2goc3RhdCA9PiB7XG4gICAgICBjb25zdCBiYXJHcm91cCA9IGNoYXJ0LmNyZWF0ZURpdih7IGNsczogJ2Jhci1ncm91cCcgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGJhckNvbnRhaW5lciA9IGJhckdyb3VwLmNyZWF0ZURpdih7IGNsczogJ2JhcicgfSk7XG4gICAgICBjb25zdCBoZWlnaHQgPSBtYXhWYWx1ZSA+IDAgPyAoc3RhdC5yZXZpZXdlZCAvIG1heFZhbHVlKSAqIDEwMCA6IDA7XG4gICAgICBiYXJDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fSVgO1xuICAgICAgYmFyQ29udGFpbmVyLnRpdGxlID0gYCR7c3RhdC5yZXZpZXdlZH0gcmV2aWV3c2A7XG4gICAgICBcbiAgICAgIGNvbnN0IGJhckxhYmVsID0gYmFyR3JvdXAuY3JlYXRlRGl2KHsgY2xzOiAnYmFyLWxhYmVsJyB9KTtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShzdGF0LmRhdGUpO1xuICAgICAgYmFyTGFiZWwudGV4dENvbnRlbnQgPSBkYXRlLmdldERhdGUoKS50b1N0cmluZygpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJMaW5lQ2hhcnQoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZGF0YTogYW55W10sIGtleTogc3RyaW5nKSB7XG4gICAgY29uc3QgY2hhcnQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbGluZS1jaGFydC1jYW52YXMnIH0pO1xuICAgIFxuICAgIGNvbnN0IHBvaW50cyA9IGRhdGEubWFwKChzdGF0LCBpKSA9PiB7XG4gICAgICBjb25zdCB4ID0gKGkgLyAoZGF0YS5sZW5ndGggLSAxKSkgKiAxMDA7XG4gICAgICBjb25zdCB5ID0gMTAwIC0gKHN0YXRba2V5XSAqIDEwMCk7XG4gICAgICByZXR1cm4geyB4LCB5LCB2YWx1ZTogc3RhdFtrZXldIH07XG4gICAgfSk7XG5cbiAgICAvLyBcdTUyMUJcdTVFRkFTVkdcbiAgICBjb25zdCBzdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3N2ZycpO1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCAnMCAwIDEwMCAxMDAnKTtcbiAgICBzdmcuc2V0QXR0cmlidXRlKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ25vbmUnKTtcbiAgICBzdmcuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgc3ZnLnN0eWxlLmhlaWdodCA9ICcyMDBweCc7XG5cbiAgICAvLyBcdTUyMUJcdTVFRkFcdTYyOThcdTdFQkZcdThERUZcdTVGODRcbiAgICBjb25zdCBwYXRoRGF0YSA9IHBvaW50cy5tYXAoKHAsIGkpID0+IFxuICAgICAgYCR7aSA9PT0gMCA/ICdNJyA6ICdMJ30gJHtwLnh9ICR7cC55fWBcbiAgICApLmpvaW4oJyAnKTtcblxuICAgIGNvbnN0IHBhdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdGgnKTtcbiAgICBwYXRoLnNldEF0dHJpYnV0ZSgnZCcsIHBhdGhEYXRhKTtcbiAgICBwYXRoLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdub25lJyk7XG4gICAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICd2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpJyk7XG4gICAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcyJyk7XG5cbiAgICBzdmcuYXBwZW5kQ2hpbGQocGF0aCk7XG4gICAgY2hhcnQuYXBwZW5kQ2hpbGQoc3ZnKTtcblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NTAzQ1x1NjgwN1x1N0I3RVxuICAgIGNvbnN0IGxhYmVsc0NvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjaGFydC1sYWJlbHMnIH0pO1xuICAgIGRhdGEuZm9yRWFjaCgoc3RhdCwgaSkgPT4ge1xuICAgICAgaWYgKGkgJSBNYXRoLmNlaWwoZGF0YS5sZW5ndGggLyA3KSA9PT0gMCkge1xuICAgICAgICBjb25zdCBjaGFydExhYmVsID0gbGFiZWxzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NoYXJ0LWxhYmVsJyB9KTtcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHN0YXQuZGF0ZSk7XG4gICAgICAgIGNoYXJ0TGFiZWwudGV4dENvbnRlbnQgPSBgJHtkYXRlLmdldE1vbnRoKCkgKyAxfS8ke2RhdGUuZ2V0RGF0ZSgpfWA7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckhlYXRtYXAoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IGhlYXRtYXBEYXRhID0gdGhpcy5hbmFseXRpY3MuZ2V0SGVhdG1hcERhdGEoOTApO1xuICAgIFxuICAgIC8vIFx1NjMwOVx1NTQ2OFx1NTIwNlx1N0VDNFxuICAgIGNvbnN0IHdlZWtzOiBhbnlbXVtdID0gW107XG4gICAgbGV0IGN1cnJlbnRXZWVrOiBhbnlbXSA9IFtdO1xuICAgIFxuICAgIGhlYXRtYXBEYXRhLmZvckVhY2goKGRheSwgaSkgPT4ge1xuICAgICAgY3VycmVudFdlZWsucHVzaChkYXkpO1xuICAgICAgaWYgKGN1cnJlbnRXZWVrLmxlbmd0aCA9PT0gNyB8fCBpID09PSBoZWF0bWFwRGF0YS5sZW5ndGggLSAxKSB7XG4gICAgICAgIHdlZWtzLnB1c2goY3VycmVudFdlZWspO1xuICAgICAgICBjdXJyZW50V2VlayA9IFtdO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgd2Vla3MuZm9yRWFjaCh3ZWVrID0+IHtcbiAgICAgIGNvbnN0IHdlZWtSb3cgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnaGVhdG1hcC13ZWVrJyB9KTtcbiAgICAgIFxuICAgICAgd2Vlay5mb3JFYWNoKGRheSA9PiB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSB3ZWVrUm93LmNyZWF0ZURpdih7IGNsczogJ2hlYXRtYXAtY2VsbCcgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTVGM0FcdTVFQTZcdTdCNDlcdTdFQTcgMC00XG4gICAgICAgIGNvbnN0IGxldmVsID0gTWF0aC5jZWlsKGRheS5pbnRlbnNpdHkgKiA0KTtcbiAgICAgICAgY2VsbC5hZGRDbGFzcyhgbGV2ZWwtJHtsZXZlbH1gKTtcbiAgICAgICAgXG4gICAgICAgIGNlbGwudGl0bGUgPSBgJHtkYXkuZGF0ZX06ICR7ZGF5LmNvdW50fSByZXZpZXdzYDtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cblxuXG4gIHByaXZhdGUgYXN5bmMganVtcFRvQ2FyZChjYXJkOiBhbnkpIHtcbiAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGNhcmQuc291cmNlRmlsZSk7XG4gICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuO1xuXG4gICAgY29uc3QgY29udGVudFVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjYXJkLnNvdXJjZUNvbnRlbnRJZCk7XG4gICAgaWYgKCFjb250ZW50VW5pdCkgcmV0dXJuO1xuXG4gICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKTtcbiAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoSXRlbVZpZXcpO1xuICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgY29uc3QgZWRpdG9yID0gKHZpZXcgYXMgYW55KS5lZGl0b3I7XG4gICAgICAgIGlmIChlZGl0b3IpIHtcbiAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHsgbGluZTogY29udGVudFVuaXQuc291cmNlLnBvc2l0aW9uLmxpbmUsIGNoOiAwIH0pO1xuICAgICAgICAgIGVkaXRvci5zY3JvbGxJbnRvVmlldyh7XG4gICAgICAgICAgICBmcm9tOiB7IGxpbmU6IGNvbnRlbnRVbml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogMCB9LFxuICAgICAgICAgICAgdG86IHsgbGluZTogY29udGVudFVuaXQuc291cmNlLnBvc2l0aW9uLmxpbmUsIGNoOiAwIH1cbiAgICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIDEwMCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGRlbGV0ZUZsYXNoY2FyZChjYXJkSWQ6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmRlbGV0ZUNhcmQoY2FyZElkKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1RDgzRFx1REREMVx1RkUwRiBcdTk1RUFcdTUzNjFcdTVERjJcdTUyMjBcdTk2NjQnKTtcbiAgICAgIHRoaXMucmVuZGVyKCk7IC8vIFx1OTFDRFx1NjVCMFx1NkUzMlx1NjdEM1x1ODlDNlx1NTZGRVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBmbGFzaGNhcmQ6JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIFx1NTIyMFx1OTY2NFx1OTVFQVx1NTM2MVx1NTkzMVx1OEQyNScpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAuc3RhdHMtY29udGFpbmVyIHtcbiAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgIH1cblxuICAgICAgLnN0YXRzLWhlYWRlciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgIH1cblxuICAgICAgLnN0YXRzLWhlYWRlciBoMiB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgIH1cblxuICAgICAgLnN0YXRzLXRhYnMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgIH1cblxuICAgICAgLnRhYiB7XG4gICAgICAgIHBhZGRpbmc6IDEwcHggMjBweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgIH1cblxuICAgICAgLnRhYjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAudGFiLmFjdGl2ZSB7XG4gICAgICAgIGJvcmRlci1ib3R0b20tY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgfVxuXG4gICAgICAubWV0cmljcy1ncmlkIHtcbiAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maXQsIG1pbm1heCgyMDBweCwgMWZyKSk7XG4gICAgICAgIGdhcDogMTVweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDtcbiAgICAgIH1cblxuICAgICAgLm1ldHJpYy1jYXJkIHtcbiAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogMTVweDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIH1cblxuICAgICAgLm1ldHJpYy1pY29uIHtcbiAgICAgICAgZm9udC1zaXplOiAzMnB4O1xuICAgICAgfVxuXG4gICAgICAubWV0cmljLWNvbnRlbnQge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgfVxuXG4gICAgICAubWV0cmljLXRpdGxlIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgICB9XG5cbiAgICAgIC5tZXRyaWMtdmFsdWUge1xuICAgICAgICBmb250LXNpemU6IDEuOGVtO1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgfVxuXG4gICAgICAud2Vlay1jb21wYXJpc29uIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDtcbiAgICAgIH1cblxuICAgICAgLmNvbXBhcmlzb24tZ3JpZCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGdhcDogMTVweDtcbiAgICAgICAgbWFyZ2luLXRvcDogMTVweDtcbiAgICAgIH1cblxuICAgICAgLmNvbXBhcmlzb24taXRlbSB7XG4gICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5jb21wYXJpc29uLWxhYmVsIHtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLmNvbXBhcmlzb24tdmFsdWVzIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC50aGlzLXdlZWsge1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICBmb250LXNpemU6IDEuMWVtO1xuICAgICAgfVxuXG4gICAgICAubGFzdC13ZWVrIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuY2hhbmdlIHtcbiAgICAgICAgcGFkZGluZzogNHB4IDEwcHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC5jaGFuZ2UucG9zaXRpdmUge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLXN1Y2Nlc3MpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAuY2hhbmdlLm5lZ2F0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvcik7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLmNoYXJ0LXNlY3Rpb24ge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xuICAgICAgfVxuXG4gICAgICAucmVjZW50LWFjdGl2aXR5IC5hY3Rpdml0eS1jaGFydCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO1xuICAgICAgICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XG4gICAgICAgIGhlaWdodDogMTUwcHg7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgfVxuXG4gICAgICAuc2ltcGxlLWJhciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgfVxuXG4gICAgICAuc2ltcGxlLWJhciAuYmFyLWNvbnRhaW5lciB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMHB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgfVxuXG4gICAgICAuc2ltcGxlLWJhciAuYmFyLWZpbGwge1xuICAgICAgICB3aWR0aDogNjAlO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHggNHB4IDAgMDtcbiAgICAgICAgdHJhbnNpdGlvbjogaGVpZ2h0IDAuM3M7XG4gICAgICB9XG5cbiAgICAgIC5iYXItbGFiZWwsIC5iYXItdmFsdWUge1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuaGVhdG1hcCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGdhcDogNHB4O1xuICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgIH1cblxuICAgICAgLmhlYXRtYXAtd2VlayB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogNHB4O1xuICAgICAgfVxuXG4gICAgICAuaGVhdG1hcC1jZWxsIHtcbiAgICAgICAgd2lkdGg6IDEycHg7XG4gICAgICAgIGhlaWdodDogMTJweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMnB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5oZWF0bWFwLWNlbGwubGV2ZWwtMSB7IGJhY2tncm91bmQ6IHJnYmEoOTQsIDE1NiwgMjM1LCAwLjMpOyB9XG4gICAgICAuaGVhdG1hcC1jZWxsLmxldmVsLTIgeyBiYWNrZ3JvdW5kOiByZ2JhKDk0LCAxNTYsIDIzNSwgMC41KTsgfVxuICAgICAgLmhlYXRtYXAtY2VsbC5sZXZlbC0zIHsgYmFja2dyb3VuZDogcmdiYSg5NCwgMTU2LCAyMzUsIDAuNyk7IH1cbiAgICAgIC5oZWF0bWFwLWNlbGwubGV2ZWwtNCB7IGJhY2tncm91bmQ6IHJnYmEoOTQsIDE1NiwgMjM1LCAxKTsgfVxuXG4gICAgICAuZGVja3MtZ3JpZCB7XG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDMwMHB4LCAxZnIpKTtcbiAgICAgICAgZ2FwOiAxNXB4O1xuICAgICAgfVxuXG4gICAgICAuZGVjay1jYXJkIHtcbiAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgIH1cblxuICAgICAgLmRlY2stY2FyZC1oZWFkZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4O1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgfVxuXG4gICAgICAuZGVjay1jYXJkLWhlYWRlciBoNCB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgIH1cblxuICAgICAgLmRlY2stYmFkZ2Uge1xuICAgICAgICBwYWRkaW5nOiA0cHggMTBweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgIH1cblxuICAgICAgLmRlY2stY2FyZC1zdGF0cyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgfVxuXG4gICAgICAuc3RhdC1yb3cge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgIH1cblxuICAgICAgLnN0YXQtaWNvbiB7XG4gICAgICAgIHdpZHRoOiAyMHB4O1xuICAgICAgfVxuXG4gICAgICAuc3RhdC1sYWJlbCB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLnN0YXQtdmFsdWUge1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuZGVjay1wcm9ncmVzcyB7XG4gICAgICAgIG1hcmdpbi10b3A6IDE1cHg7XG4gICAgICB9XG5cbiAgICAgIC5wcm9ncmVzcy1iYXItY29udGFpbmVyIHtcbiAgICAgICAgaGVpZ2h0OiA4cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICAgICAgfVxuXG4gICAgICAucHJvZ3Jlc3MtYmFyLWZpbGwge1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIHRyYW5zaXRpb246IHdpZHRoIDAuM3M7XG4gICAgICB9XG5cbiAgICAgIC5wcm9ncmVzcy1sYWJlbCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5kaWZmaWN1bHQtY2FyZHMtbGlzdCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGdhcDogMTJweDtcbiAgICAgIH1cblxuICAgICAgLmRpZmZpY3VsdC1jYXJkLWl0ZW0ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDE1cHg7XG4gICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkLXJhbmsge1xuICAgICAgICB3aWR0aDogMzBweDtcbiAgICAgICAgaGVpZ2h0OiAzMHB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1jb250ZW50IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgIH1cblxuICAgICAgLmNhcmQtcXVlc3Rpb24ge1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkLW1ldGEge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTo4cHg7XG4gICAgICB9IFxuXG4ucGF0dGVybi1iYWRnZSwgLmVycm9yLWNvdW50LCAuYXZnLXRpbWUge1xuICAgIHBhZGRpbmc6IDNweCAxMHB4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICBmb250LXNpemU6IDAuODVlbTtcbiAgfVxuXG4gIC5kaWZmaWN1bHR5LWJhci1jb250YWluZXIge1xuICAgIGhlaWdodDogNnB4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gIH1cblxuICAuZGlmZmljdWx0eS1iYXIge1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsIHZhcigtLWNvbG9yLWdyZWVuKSwgdmFyKC0tY29sb3IteWVsbG93KSwgdmFyKC0tY29sb3ItcmVkKSk7XG4gICAgdHJhbnNpdGlvbjogd2lkdGggMC4zcztcbiAgfVxuXG4gIC5jYXJkLWFjdGlvbnMge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZ2FwOiA4cHg7XG4gIH1cblxuICAuYWN0aW9uLWJ0bi1zbWFsbCB7XG4gICAgcGFkZGluZzogNnB4IDEycHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgfVxuXG4gIC5hY3Rpb24tYnRuLXNtYWxsOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gIH1cblxuICAuYWN0aW9uLWJ0bi1zbWFsbC5kZWxldGUtYnRuOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbiAgICBjb2xvcjogd2hpdGU7XG4gIH1cblxuICAuZW1wdHktbWVzc2FnZSB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIHBhZGRpbmc6IDQwcHg7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gIH1cblxuICAucmVwb3J0LXNlY3Rpb24ge1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBtYXJnaW4tdG9wOiAzMHB4O1xuICAgIHBhZGRpbmc6IDIwcHg7XG4gIH1cblxuICAuY2hhcnQtY2FudmFzIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcbiAgICBoZWlnaHQ6IDIwMHB4O1xuICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICB9XG5cbiAgLmJhci1ncm91cCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgZmxleDogMTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gIH1cblxuICAuYmFyLWdyb3VwIC5iYXIge1xuICAgIHdpZHRoOiA4MCU7XG4gICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBib3JkZXItcmFkaXVzOiA0cHggNHB4IDAgMDtcbiAgICB0cmFuc2l0aW9uOiBoZWlnaHQgMC4zcztcbiAgICBtYXJnaW4tdG9wOiBhdXRvO1xuICB9XG5cbiAgLmxpbmUtY2hhcnQtY2FudmFzIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgfVxuXG4gIC5jaGFydC1sYWJlbHMge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XG4gICAgcGFkZGluZzogMTBweCAyMHB4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIH1cblxuICAuY2hhcnQtbGFiZWwge1xuICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgfVxuYDtcblxuZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfX0iLCAiaW1wb3J0IHR5cGUgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBGbGFzaGNhcmQsIFJldmlld0xvZyB9IGZyb20gJy4vRmxhc2hjYXJkTWFuYWdlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGFpbHlTdGF0cyB7XG4gIGRhdGU6IHN0cmluZztcbiAgcmV2aWV3ZWQ6IG51bWJlcjtcbiAgY29ycmVjdENvdW50OiBudW1iZXI7XG4gIGNvcnJlY3RSYXRlOiBudW1iZXI7XG4gIHRpbWVTcGVudDogbnVtYmVyO1xuICBuZXdDYXJkczogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdlZWtseVN0YXRzIHtcbiAgc3RhcnREYXRlOiBzdHJpbmc7XG4gIGVuZERhdGU6IHN0cmluZztcbiAgdG90YWxSZXZpZXdzOiBudW1iZXI7XG4gIGF2ZXJhZ2VDb3JyZWN0UmF0ZTogbnVtYmVyO1xuICB0b3RhbFRpbWVTcGVudDogbnVtYmVyO1xuICBzdHJlYWs6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZWNrU3RhdHMge1xuICBkZWNrTmFtZTogc3RyaW5nO1xuICB0b3RhbENhcmRzOiBudW1iZXI7XG4gIGR1ZUNhcmRzOiBudW1iZXI7XG4gIG5ld0NhcmRzOiBudW1iZXI7XG4gIGNvcnJlY3RSYXRlOiBudW1iZXI7XG4gIGF2ZXJhZ2VJbnRlcnZhbDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERpZmZpY3VsdENhcmQge1xuICBjYXJkOiBGbGFzaGNhcmQ7XG4gIGVycm9yQ291bnQ6IG51bWJlcjtcbiAgbGFzdEVycm9yOiBudW1iZXI7XG4gIGF2ZXJhZ2VUaW1lOiBudW1iZXI7XG4gIHBhdHRlcm46ICdjb25jZXB0JyB8ICdtZW1vcnknIHwgJ2NhbGN1bGF0aW9uJyB8ICd1bmtub3duJztcbn1cblxuZXhwb3J0IGNsYXNzIEFuYWx5dGljc0VuZ2luZSB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbikge31cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU2QkNGXHU2NUU1XHU3RURGXHU4QkExXG4gICAqL1xuICBnZXREYWlseVN0YXRzKGRheXM6IG51bWJlciA9IDMwKTogRGFpbHlTdGF0c1tdIHtcbiAgICBjb25zdCBsb2dzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlclsncmV2aWV3TG9ncyddIHx8IFtdO1xuICAgIGNvbnN0IHN0YXRzOiBNYXA8c3RyaW5nLCBEYWlseVN0YXRzPiA9IG5ldyBNYXAoKTtcblxuICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1NjcwMFx1OEZEMU5cdTU5MjlcdTc2ODRcdTY1NzBcdTYzNkVcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRheXM7IGkrKykge1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSBpKTtcbiAgICAgIGNvbnN0IGRhdGVLZXkgPSBkYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgIFxuICAgICAgc3RhdHMuc2V0KGRhdGVLZXksIHtcbiAgICAgICAgZGF0ZTogZGF0ZUtleSxcbiAgICAgICAgcmV2aWV3ZWQ6IDAsXG4gICAgICAgIGNvcnJlY3RDb3VudDogMCxcbiAgICAgICAgY29ycmVjdFJhdGU6IDAsXG4gICAgICAgIHRpbWVTcGVudDogMCxcbiAgICAgICAgbmV3Q2FyZHM6IDBcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1N0VERlx1OEJBMVx1NTkwRFx1NEU2MFx1OEJCMFx1NUY1NVxuICAgIGxvZ3MuZm9yRWFjaChsb2cgPT4ge1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGxvZy50aW1lc3RhbXApLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgIGNvbnN0IHN0YXQgPSBzdGF0cy5nZXQoZGF0ZSk7XG4gICAgICBpZiAoIXN0YXQpIHJldHVybjtcblxuICAgICAgc3RhdC5yZXZpZXdlZCsrO1xuICAgICAgc3RhdC50aW1lU3BlbnQgKz0gbG9nLnJlc3BvbnNlLnRpbWVTcGVudDtcblxuICAgICAgLy8gXHU1MjI0XHU2NUFEXHU2NjJGXHU1NDI2XHU2QjYzXHU3ODZFXG4gICAgICBpZiAobG9nLnJlc3BvbnNlLmVhc2UgPT09ICdnb29kJyB8fCBsb2cucmVzcG9uc2UuZWFzZSA9PT0gJ2Vhc3knKSB7XG4gICAgICAgIHN0YXQuY29ycmVjdENvdW50Kys7XG4gICAgICB9IGVsc2UgaWYgKGxvZy5yZXNwb25zZS5lYXNlID09PSAnaGFyZCcpIHtcbiAgICAgICAgc3RhdC5jb3JyZWN0Q291bnQgKz0gMC41O1xuICAgICAgfVxuXG4gICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY2MkZcdTY1QjBcdTUzNjFcdTcyNDdcdUZGMDhcdTdCMkNcdTRFMDBcdTZCMjFcdTU5MERcdTRFNjBcdUZGMDlcbiAgICAgIGNvbnN0IGNhcmQgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldEZsYXNoY2FyZChsb2cuZmxhc2hjYXJkSWQpO1xuICAgICAgaWYgKGNhcmQgJiYgY2FyZC5zdGF0cy50b3RhbFJldmlld3MgPT09IDEpIHtcbiAgICAgICAgc3RhdC5uZXdDYXJkcysrO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gXHU4QkExXHU3Qjk3XHU2QjYzXHU3ODZFXHU3Mzg3XG4gICAgc3RhdHMuZm9yRWFjaChzdGF0ID0+IHtcbiAgICAgIGlmIChzdGF0LnJldmlld2VkID4gMCkge1xuICAgICAgICBzdGF0LmNvcnJlY3RSYXRlID0gc3RhdC5jb3JyZWN0Q291bnQgLyBzdGF0LnJldmlld2VkO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIEFycmF5LmZyb20oc3RhdHMudmFsdWVzKCkpLnNvcnQoKGEsIGIpID0+IFxuICAgICAgYS5kYXRlLmxvY2FsZUNvbXBhcmUoYi5kYXRlKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU1NDY4XHU3RURGXHU4QkExXG4gICAqL1xuICBnZXRXZWVrbHlTdGF0cygpOiB7IHRoaXNXZWVrOiBXZWVrbHlTdGF0czsgbGFzdFdlZWs6IFdlZWtseVN0YXRzIH0ge1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgXG4gICAgLy8gXHU2NzJDXHU1NDY4XG4gICAgY29uc3QgdGhpc1dlZWtTdGFydCA9IG5ldyBEYXRlKG5vdyk7XG4gICAgdGhpc1dlZWtTdGFydC5zZXREYXRlKG5vdy5nZXREYXRlKCkgLSBub3cuZ2V0RGF5KCkpO1xuICAgIHRoaXNXZWVrU3RhcnQuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG5cbiAgICAvLyBcdTRFMEFcdTU0NjhcbiAgICBjb25zdCBsYXN0V2Vla1N0YXJ0ID0gbmV3IERhdGUodGhpc1dlZWtTdGFydCk7XG4gICAgbGFzdFdlZWtTdGFydC5zZXREYXRlKGxhc3RXZWVrU3RhcnQuZ2V0RGF0ZSgpIC0gNyk7XG5cbiAgICBjb25zdCB0aGlzV2VlayA9IHRoaXMuY2FsY3VsYXRlV2Vla1N0YXRzKHRoaXNXZWVrU3RhcnQpO1xuICAgIGNvbnN0IGxhc3RXZWVrID0gdGhpcy5jYWxjdWxhdGVXZWVrU3RhdHMobGFzdFdlZWtTdGFydCk7XG5cbiAgICByZXR1cm4geyB0aGlzV2VlaywgbGFzdFdlZWsgfTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlV2Vla1N0YXRzKHN0YXJ0RGF0ZTogRGF0ZSk6IFdlZWtseVN0YXRzIHtcbiAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUoc3RhcnREYXRlKTtcbiAgICBlbmREYXRlLnNldERhdGUoZW5kRGF0ZS5nZXREYXRlKCkgKyA3KTtcblxuICAgIGNvbnN0IGxvZ3MgPSAodGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlclsncmV2aWV3TG9ncyddIHx8IFtdKS5maWx0ZXIoXG4gICAgICBsb2cgPT4gbG9nLnRpbWVzdGFtcCA+PSBzdGFydERhdGUuZ2V0VGltZSgpICYmIGxvZy50aW1lc3RhbXAgPCBlbmREYXRlLmdldFRpbWUoKVxuICAgICk7XG5cbiAgICBsZXQgdG90YWxDb3JyZWN0ID0gMDtcbiAgICBsZXQgdG90YWxUaW1lU3BlbnQgPSAwO1xuXG4gICAgbG9ncy5mb3JFYWNoKGxvZyA9PiB7XG4gICAgICB0b3RhbFRpbWVTcGVudCArPSBsb2cucmVzcG9uc2UudGltZVNwZW50O1xuICAgICAgaWYgKGxvZy5yZXNwb25zZS5lYXNlID09PSAnZ29vZCcgfHwgbG9nLnJlc3BvbnNlLmVhc2UgPT09ICdlYXN5Jykge1xuICAgICAgICB0b3RhbENvcnJlY3QrKztcbiAgICAgIH0gZWxzZSBpZiAobG9nLnJlc3BvbnNlLmVhc2UgPT09ICdoYXJkJykge1xuICAgICAgICB0b3RhbENvcnJlY3QgKz0gMC41O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgYXZlcmFnZUNvcnJlY3RSYXRlID0gbG9ncy5sZW5ndGggPiAwID8gdG90YWxDb3JyZWN0IC8gbG9ncy5sZW5ndGggOiAwO1xuICAgIGNvbnN0IHN0cmVhayA9IHRoaXMuY2FsY3VsYXRlU3RyZWFrKCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnREYXRlOiBzdGFydERhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxuICAgICAgZW5kRGF0ZTogZW5kRGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXG4gICAgICB0b3RhbFJldmlld3M6IGxvZ3MubGVuZ3RoLFxuICAgICAgYXZlcmFnZUNvcnJlY3RSYXRlLFxuICAgICAgdG90YWxUaW1lU3BlbnQsXG4gICAgICBzdHJlYWtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1OEJBMVx1N0I5N1x1OEZERVx1N0VFRFx1NUI2Nlx1NEU2MFx1NTkyOVx1NjU3MFxuICAgKi9cbiAgY2FsY3VsYXRlU3RyZWFrKCk6IG51bWJlciB7XG4gICAgY29uc3QgbG9ncyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXJbJ3Jldmlld0xvZ3MnXSB8fCBbXTtcbiAgICBpZiAobG9ncy5sZW5ndGggPT09IDApIHJldHVybiAwO1xuXG4gICAgY29uc3QgZGF0ZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBsb2dzLmZvckVhY2gobG9nID0+IHtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShsb2cudGltZXN0YW1wKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICBkYXRlcy5hZGQoZGF0ZSk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBzb3J0ZWREYXRlcyA9IEFycmF5LmZyb20oZGF0ZXMpLnNvcnQoKS5yZXZlcnNlKCk7XG4gICAgbGV0IHN0cmVhayA9IDA7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc29ydGVkRGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGV4cGVjdGVkRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICBleHBlY3RlZERhdGUuc2V0RGF0ZShleHBlY3RlZERhdGUuZ2V0RGF0ZSgpIC0gaSk7XG4gICAgICBjb25zdCBleHBlY3RlZCA9IGV4cGVjdGVkRGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG5cbiAgICAgIGlmIChzb3J0ZWREYXRlc1tpXSA9PT0gZXhwZWN0ZWQpIHtcbiAgICAgICAgc3RyZWFrKys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3RyZWFrO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NTM2MVx1N0VDNFx1N0VERlx1OEJBMVxuICAgKi9cbiAgZ2V0RGVja1N0YXRzKCk6IERlY2tTdGF0c1tdIHtcbiAgICBjb25zdCBjYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgIGNvbnN0IGRlY2tNYXAgPSBuZXcgTWFwPHN0cmluZywgRmxhc2hjYXJkW10+KCk7XG5cbiAgICAvLyBcdTYzMDlcdTUzNjFcdTdFQzRcdTUyMDZcdTdFQzRcbiAgICBjYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xuICAgICAgaWYgKCFkZWNrTWFwLmhhcyhjYXJkLmRlY2spKSB7XG4gICAgICAgIGRlY2tNYXAuc2V0KGNhcmQuZGVjaywgW10pO1xuICAgICAgfVxuICAgICAgZGVja01hcC5nZXQoY2FyZC5kZWNrKSEucHVzaChjYXJkKTtcbiAgICB9KTtcblxuICAgIC8vIFx1OEJBMVx1N0I5N1x1NkJDRlx1NEUyQVx1NTM2MVx1N0VDNFx1NzY4NFx1N0VERlx1OEJBMVxuICAgIGNvbnN0IHN0YXRzOiBEZWNrU3RhdHNbXSA9IFtdO1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cbiAgICBkZWNrTWFwLmZvckVhY2goKGRlY2tDYXJkcywgZGVja05hbWUpID0+IHtcbiAgICAgIGNvbnN0IGR1ZUNhcmRzID0gZGVja0NhcmRzLmZpbHRlcihjID0+IGMuc2NoZWR1bGluZy5kdWUgPD0gbm93KS5sZW5ndGg7XG4gICAgICBjb25zdCBuZXdDYXJkcyA9IGRlY2tDYXJkcy5maWx0ZXIoYyA9PiBjLnNjaGVkdWxpbmcuc3RhdGUgPT09ICduZXcnKS5sZW5ndGg7XG4gICAgICBcbiAgICAgIGNvbnN0IHRvdGFsQ29ycmVjdCA9IGRlY2tDYXJkcy5yZWR1Y2UoXG4gICAgICAgIChzdW0sIGMpID0+IHN1bSArIGMuc3RhdHMuY29ycmVjdENvdW50LCAwXG4gICAgICApO1xuICAgICAgY29uc3QgdG90YWxSZXZpZXdzID0gZGVja0NhcmRzLnJlZHVjZShcbiAgICAgICAgKHN1bSwgYykgPT4gc3VtICsgYy5zdGF0cy50b3RhbFJldmlld3MsIDBcbiAgICAgICk7XG4gICAgICBjb25zdCBjb3JyZWN0UmF0ZSA9IHRvdGFsUmV2aWV3cyA+IDAgPyB0b3RhbENvcnJlY3QgLyB0b3RhbFJldmlld3MgOiAwO1xuXG4gICAgICBjb25zdCB0b3RhbEludGVydmFsID0gZGVja0NhcmRzLnJlZHVjZShcbiAgICAgICAgKHN1bSwgYykgPT4gc3VtICsgYy5zY2hlZHVsaW5nLmludGVydmFsLCAwXG4gICAgICApO1xuICAgICAgY29uc3QgYXZlcmFnZUludGVydmFsID0gZGVja0NhcmRzLmxlbmd0aCA+IDAgXG4gICAgICAgID8gdG90YWxJbnRlcnZhbCAvIGRlY2tDYXJkcy5sZW5ndGggXG4gICAgICAgIDogMDtcblxuICAgICAgc3RhdHMucHVzaCh7XG4gICAgICAgIGRlY2tOYW1lLFxuICAgICAgICB0b3RhbENhcmRzOiBkZWNrQ2FyZHMubGVuZ3RoLFxuICAgICAgICBkdWVDYXJkcyxcbiAgICAgICAgbmV3Q2FyZHMsXG4gICAgICAgIGNvcnJlY3RSYXRlLFxuICAgICAgICBhdmVyYWdlSW50ZXJ2YWxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHN0YXRzLnNvcnQoKGEsIGIpID0+IGIudG90YWxDYXJkcyAtIGEudG90YWxDYXJkcyk7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU5NkJFXHU3MEI5XHU1MzYxXHU3MjQ3XG4gICAqL1xuICBnZXREaWZmaWN1bHRDYXJkcyhsaW1pdDogbnVtYmVyID0gMTApOiBEaWZmaWN1bHRDYXJkW10ge1xuICAgIGNvbnN0IGNhcmRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRBbGxGbGFzaGNhcmRzKCk7XG4gICAgY29uc3QgbG9ncyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXJbJ3Jldmlld0xvZ3MnXSB8fCBbXTtcblxuICAgIGNvbnN0IGRpZmZpY3VsdENhcmRzOiBEaWZmaWN1bHRDYXJkW10gPSBbXTtcblxuICAgIGNhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICBjb25zdCBjYXJkTG9ncyA9IGxvZ3MuZmlsdGVyKGxvZyA9PiBsb2cuZmxhc2hjYXJkSWQgPT09IGNhcmQuaWQpO1xuICAgICAgXG4gICAgICAvLyBcdThCQTFcdTdCOTdcdTk1MTlcdThCRUZcdTZCMjFcdTY1NzBcbiAgICAgIGNvbnN0IGVycm9yQ291bnQgPSBjYXJkTG9ncy5maWx0ZXIoXG4gICAgICAgIGxvZyA9PiBsb2cucmVzcG9uc2UuZWFzZSA9PT0gJ2FnYWluJ1xuICAgICAgKS5sZW5ndGg7XG5cbiAgICAgIGlmIChlcnJvckNvdW50ID09PSAwICYmIGNhcmQuc3RhdHMuZGlmZmljdWx0eSA8IDAuNykgcmV0dXJuO1xuXG4gICAgICAvLyBcdTY3MDBcdTU0MEVcdTRFMDBcdTZCMjFcdTk1MTlcdThCRUZcbiAgICAgIGNvbnN0IGVycm9yTG9ncyA9IGNhcmRMb2dzLmZpbHRlcihsb2cgPT4gbG9nLnJlc3BvbnNlLmVhc2UgPT09ICdhZ2FpbicpO1xuICAgICAgY29uc3QgbGFzdEVycm9yID0gZXJyb3JMb2dzLmxlbmd0aCA+IDAgXG4gICAgICAgID8gZXJyb3JMb2dzW2Vycm9yTG9ncy5sZW5ndGggLSAxXS50aW1lc3RhbXAgXG4gICAgICAgIDogMDtcblxuICAgICAgLy8gXHU1MjI0XHU2NUFEXHU5NTE5XHU4QkVGXHU2QTIxXHU1RjBGXG4gICAgICBjb25zdCBwYXR0ZXJuID0gdGhpcy5kZXRlY3RFcnJvclBhdHRlcm4oY2FyZCwgY2FyZExvZ3MpO1xuXG4gICAgICBkaWZmaWN1bHRDYXJkcy5wdXNoKHtcbiAgICAgICAgY2FyZCxcbiAgICAgICAgZXJyb3JDb3VudCxcbiAgICAgICAgbGFzdEVycm9yLFxuICAgICAgICBhdmVyYWdlVGltZTogY2FyZC5zdGF0cy5hdmVyYWdlVGltZSxcbiAgICAgICAgcGF0dGVyblxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBcdTYzOTJcdTVFOEZcdUZGMUFcdTk1MTlcdThCRUZcdTZCMjFcdTY1NzAgPiBcdTk2QkVcdTVFQTYgPiBcdTY3MDBcdThGRDFcdTk1MTlcdThCRUZcbiAgICByZXR1cm4gZGlmZmljdWx0Q2FyZHNcbiAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGlmIChhLmVycm9yQ291bnQgIT09IGIuZXJyb3JDb3VudCkge1xuICAgICAgICAgIHJldHVybiBiLmVycm9yQ291bnQgLSBhLmVycm9yQ291bnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGEuY2FyZC5zdGF0cy5kaWZmaWN1bHR5ICE9PSBiLmNhcmQuc3RhdHMuZGlmZmljdWx0eSkge1xuICAgICAgICAgIHJldHVybiBiLmNhcmQuc3RhdHMuZGlmZmljdWx0eSAtIGEuY2FyZC5zdGF0cy5kaWZmaWN1bHR5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiLmxhc3RFcnJvciAtIGEubGFzdEVycm9yO1xuICAgICAgfSlcbiAgICAgIC5zbGljZSgwLCBsaW1pdCk7XG4gIH1cblxuICBwcml2YXRlIGRldGVjdEVycm9yUGF0dGVybihcbiAgICBjYXJkOiBGbGFzaGNhcmQsXG4gICAgbG9nczogUmV2aWV3TG9nW11cbiAgKTogRGlmZmljdWx0Q2FyZFsncGF0dGVybiddIHtcbiAgICBpZiAobG9ncy5sZW5ndGggPCAzKSByZXR1cm4gJ3Vua25vd24nO1xuXG4gICAgLy8gXHU2NUY2XHU5NUY0XHU4RkM3XHU5NTdGIC0+IFx1OEJBMVx1N0I5N1x1OTVFRVx1OTg5OFxuICAgIGlmIChjYXJkLnN0YXRzLmF2ZXJhZ2VUaW1lID4gNjApIHtcbiAgICAgIHJldHVybiAnY2FsY3VsYXRpb24nO1xuICAgIH1cblxuICAgIC8vIFx1OTVGNFx1OTY5NFx1NUY4OFx1NzdFRFx1NEVDRFx1NzEzNlx1OTUxOVx1OEJFRiAtPiBcdThCQjBcdTVGQzZcdTk1RUVcdTk4OThcbiAgICBpZiAoY2FyZC5zY2hlZHVsaW5nLmludGVydmFsIDwgMyAmJiBjYXJkLnNjaGVkdWxpbmcubGFwc2VzID4gMikge1xuICAgICAgcmV0dXJuICdtZW1vcnknO1xuICAgIH1cblxuICAgIC8vIFx1NjMwMVx1N0VFRFx1NTkzMVx1OEQyNSAtPiBcdTY5ODJcdTVGRjVcdTc0MDZcdTg5RTNcdTk1RUVcdTk4OThcbiAgICBjb25zdCByZWNlbnRMb2dzID0gbG9ncy5zbGljZSgtNSk7XG4gICAgY29uc3QgcmVjZW50RmFpbHVyZXMgPSByZWNlbnRMb2dzLmZpbHRlcihcbiAgICAgIGxvZyA9PiBsb2cucmVzcG9uc2UuZWFzZSA9PT0gJ2FnYWluJ1xuICAgICkubGVuZ3RoO1xuICAgIFxuICAgIGlmIChyZWNlbnRGYWlsdXJlcyA+PSAzKSB7XG4gICAgICByZXR1cm4gJ2NvbmNlcHQnO1xuICAgIH1cblxuICAgIHJldHVybiAndW5rbm93bic7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU2ODA3XHU3QjdFXHU3RURGXHU4QkExXG4gICAqL1xuICBnZXRUYWdTdGF0cygpOiB7IHRhZzogc3RyaW5nOyBjb3VudDogbnVtYmVyOyBjb3JyZWN0UmF0ZTogbnVtYmVyIH1bXSB7XG4gICAgY29uc3QgY2FyZHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldEFsbEZsYXNoY2FyZHMoKTtcbiAgICBjb25zdCB0YWdNYXAgPSBuZXcgTWFwPHN0cmluZywgeyB0b3RhbDogbnVtYmVyOyBjb3JyZWN0OiBudW1iZXI7IHJldmlld3M6IG51bWJlciB9PigpO1xuXG4gICAgY2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgIGNhcmQudGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgIGlmICghdGFnTWFwLmhhcyh0YWcpKSB7XG4gICAgICAgICAgdGFnTWFwLnNldCh0YWcsIHsgdG90YWw6IDAsIGNvcnJlY3Q6IDAsIHJldmlld3M6IDAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdCA9IHRhZ01hcC5nZXQodGFnKSE7XG4gICAgICAgIHN0YXQudG90YWwrKztcbiAgICAgICAgc3RhdC5jb3JyZWN0ICs9IGNhcmQuc3RhdHMuY29ycmVjdENvdW50O1xuICAgICAgICBzdGF0LnJldmlld3MgKz0gY2FyZC5zdGF0cy50b3RhbFJldmlld3M7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHN0YXRzID0gQXJyYXkuZnJvbSh0YWdNYXAuZW50cmllcygpKS5tYXAoKFt0YWcsIGRhdGFdKSA9PiAoe1xuICAgICAgdGFnLFxuICAgICAgY291bnQ6IGRhdGEudG90YWwsXG4gICAgICBjb3JyZWN0UmF0ZTogZGF0YS5yZXZpZXdzID4gMCA/IGRhdGEuY29ycmVjdCAvIGRhdGEucmV2aWV3cyA6IDBcbiAgICB9KSk7XG5cbiAgICByZXR1cm4gc3RhdHMuc29ydCgoYSwgYikgPT4gYi5jb3VudCAtIGEuY291bnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NzUxRlx1NjIxMFx1NUI2Nlx1NEU2MFx1NjJBNVx1NTQ0QVxuICAgKi9cbiAgZ2VuZXJhdGVSZXBvcnQoZGF5czogbnVtYmVyID0gNyk6IHN0cmluZyB7XG4gICAgY29uc3QgZGFpbHlTdGF0cyA9IHRoaXMuZ2V0RGFpbHlTdGF0cyhkYXlzKTtcbiAgICBjb25zdCB7IHRoaXNXZWVrLCBsYXN0V2VlayB9ID0gdGhpcy5nZXRXZWVrbHlTdGF0cygpO1xuICAgIGNvbnN0IGRpZmZpY3VsdENhcmRzID0gdGhpcy5nZXREaWZmaWN1bHRDYXJkcyg1KTtcbiAgICBjb25zdCBkZWNrU3RhdHMgPSB0aGlzLmdldERlY2tTdGF0cygpO1xuXG4gICAgLy8gXHU4QkExXHU3Qjk3XHU2MDNCXHU4OUM4XHU2NTcwXHU2MzZFXG4gICAgY29uc3QgdG90YWxSZXZpZXdlZCA9IGRhaWx5U3RhdHMucmVkdWNlKChzdW0sIHMpID0+IHN1bSArIHMucmV2aWV3ZWQsIDApO1xuICAgIGNvbnN0IHRvdGFsQ29ycmVjdCA9IGRhaWx5U3RhdHMucmVkdWNlKChzdW0sIHMpID0+IHN1bSArIHMuY29ycmVjdENvdW50LCAwKTtcbiAgICBjb25zdCBhdmVyYWdlQ29ycmVjdFJhdGUgPSB0b3RhbFJldmlld2VkID4gMCA/IHRvdGFsQ29ycmVjdCAvIHRvdGFsUmV2aWV3ZWQgOiAwO1xuICAgIGNvbnN0IHRvdGFsVGltZSA9IGRhaWx5U3RhdHMucmVkdWNlKChzdW0sIHMpID0+IHN1bSArIHMudGltZVNwZW50LCAwKTtcblxuICAgIC8vIFx1OEQ4Qlx1NTJCRlx1NTIwNlx1Njc5MFxuICAgIGNvbnN0IHJlY2VudERheXMgPSBkYWlseVN0YXRzLnNsaWNlKC03KTtcbiAgICBjb25zdCBvbGRlckRheXMgPSBkYWlseVN0YXRzLnNsaWNlKC0xNCwgLTcpO1xuICAgIGNvbnN0IHJlY2VudFJhdGUgPSB0aGlzLmNhbGN1bGF0ZUF2ZXJhZ2VSYXRlKHJlY2VudERheXMpO1xuICAgIGNvbnN0IG9sZGVyUmF0ZSA9IHRoaXMuY2FsY3VsYXRlQXZlcmFnZVJhdGUob2xkZXJEYXlzKTtcbiAgICBjb25zdCB0cmVuZCA9IHJlY2VudFJhdGUgPiBvbGRlclJhdGUgPyAnXHVEODNEXHVEQ0M4IGltcHJvdmluZycgOiBcbiAgICAgICAgICAgICAgICAgIHJlY2VudFJhdGUgPCBvbGRlclJhdGUgPyAnXHVEODNEXHVEQ0M5IGRlY2xpbmluZycgOiAnXHUyN0ExXHVGRTBGIHN0YWJsZSc7XG5cbiAgICBsZXQgcmVwb3J0ID0gYCMgXHVEODNEXHVEQ0NBIExlYXJuaW5nIFJlcG9ydFxcblxcbmA7XG4gICAgcmVwb3J0ICs9IGAqKlBlcmlvZDoqKiBMYXN0ICR7ZGF5c30gZGF5c1xcbmA7XG4gICAgcmVwb3J0ICs9IGAqKkdlbmVyYXRlZDoqKiAke25ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKX1cXG5cXG5gO1xuXG4gICAgcmVwb3J0ICs9IGAjIyBcdUQ4M0NcdURGQUYgT3ZlcmFsbCBQZXJmb3JtYW5jZVxcblxcbmA7XG4gICAgcmVwb3J0ICs9IGAtICoqQ2FyZHMgUmV2aWV3ZWQ6KiogJHt0b3RhbFJldmlld2VkfVxcbmA7XG4gICAgcmVwb3J0ICs9IGAtICoqQ29ycmVjdCBSYXRlOioqICR7KGF2ZXJhZ2VDb3JyZWN0UmF0ZSAqIDEwMCkudG9GaXhlZCgxKX0lXFxuYDtcbiAgICByZXBvcnQgKz0gYC0gKipTdHVkeSBUaW1lOioqICR7dGhpcy5mb3JtYXRUaW1lKHRvdGFsVGltZSl9XFxuYDtcbiAgICByZXBvcnQgKz0gYC0gKipDdXJyZW50IFN0cmVhazoqKiAke3RoaXNXZWVrLnN0cmVha30gZGF5cyBcdUQ4M0RcdUREMjVcXG5gO1xuICAgIHJlcG9ydCArPSBgLSAqKlRyZW5kOioqICR7dHJlbmR9XFxuXFxuYDtcblxuICAgIHJlcG9ydCArPSBgIyMgXHVEODNEXHVEQ0M4IFdlZWsgQ29tcGFyaXNvblxcblxcbmA7XG4gICAgcmVwb3J0ICs9IGAjIyMgVGhpcyBXZWVrXFxuYDtcbiAgICByZXBvcnQgKz0gYC0gUmV2aWV3czogJHt0aGlzV2Vlay50b3RhbFJldmlld3N9XFxuYDtcbiAgICByZXBvcnQgKz0gYC0gQ29ycmVjdCBSYXRlOiAkeyh0aGlzV2Vlay5hdmVyYWdlQ29ycmVjdFJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JVxcbmA7XG4gICAgcmVwb3J0ICs9IGAtIFRpbWU6ICR7dGhpcy5mb3JtYXRUaW1lKHRoaXNXZWVrLnRvdGFsVGltZVNwZW50KX1cXG5cXG5gO1xuXG4gICAgcmVwb3J0ICs9IGAjIyMgTGFzdCBXZWVrXFxuYDtcbiAgICByZXBvcnQgKz0gYC0gUmV2aWV3czogJHtsYXN0V2Vlay50b3RhbFJldmlld3N9XFxuYDtcbiAgICByZXBvcnQgKz0gYC0gQ29ycmVjdCBSYXRlOiAkeyhsYXN0V2Vlay5hdmVyYWdlQ29ycmVjdFJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JVxcbmA7XG4gICAgcmVwb3J0ICs9IGAtIFRpbWU6ICR7dGhpcy5mb3JtYXRUaW1lKGxhc3RXZWVrLnRvdGFsVGltZVNwZW50KX1cXG5cXG5gO1xuXG4gICAgY29uc3QgcmV2aWV3Q2hhbmdlID0gdGhpc1dlZWsudG90YWxSZXZpZXdzIC0gbGFzdFdlZWsudG90YWxSZXZpZXdzO1xuICAgIGNvbnN0IHJhdGVDaGFuZ2UgPSAodGhpc1dlZWsuYXZlcmFnZUNvcnJlY3RSYXRlIC0gbGFzdFdlZWsuYXZlcmFnZUNvcnJlY3RSYXRlKSAqIDEwMDtcbiAgICBcbiAgICBpZiAocmV2aWV3Q2hhbmdlID4gMCkge1xuICAgICAgcmVwb3J0ICs9IGBcdUQ4M0RcdURDQUEgWW91IHJldmlld2VkICoqJHtyZXZpZXdDaGFuZ2V9IG1vcmUgY2FyZHMqKiB0aGlzIHdlZWshXFxuYDtcbiAgICB9XG4gICAgaWYgKHJhdGVDaGFuZ2UgPiA1KSB7XG4gICAgICByZXBvcnQgKz0gYFx1RDgzQ1x1REY4OSBZb3VyIGFjY3VyYWN5IGltcHJvdmVkIGJ5ICoqJHtyYXRlQ2hhbmdlLnRvRml4ZWQoMSl9JSoqIVxcbmA7XG4gICAgfVxuICAgIHJlcG9ydCArPSBgXFxuYDtcblxuICAgIGlmIChkaWZmaWN1bHRDYXJkcy5sZW5ndGggPiAwKSB7XG4gICAgICByZXBvcnQgKz0gYCMjIFx1MjZBMFx1RkUwRiBDYXJkcyBOZWVkaW5nIEF0dGVudGlvblxcblxcbmA7XG4gICAgICBkaWZmaWN1bHRDYXJkcy5mb3JFYWNoKChkYywgaSkgPT4ge1xuICAgICAgICBjb25zdCBwYXR0ZXJuRW1vamkgPSB7XG4gICAgICAgICAgJ2NvbmNlcHQnOiAnXHVEODNFXHVEREUwJyxcbiAgICAgICAgICAnbWVtb3J5JzogJ1x1RDgzRFx1RENBRCcsXG4gICAgICAgICAgJ2NhbGN1bGF0aW9uJzogJ1x1RDgzRFx1REQyMicsXG4gICAgICAgICAgJ3Vua25vd24nOiAnXHUyNzUzJ1xuICAgICAgICB9O1xuICAgICAgICByZXBvcnQgKz0gYCR7aSArIDF9LiAqKiR7ZGMuY2FyZC5mcm9udC5zdWJzdHJpbmcoMCwgNTApfSR7ZGMuY2FyZC5mcm9udC5sZW5ndGggPiA1MCA/ICcuLi4nIDogJyd9KipcXG5gO1xuICAgICAgICByZXBvcnQgKz0gYCAgIC0gRXJyb3JzOiAke2RjLmVycm9yQ291bnR9IHwgUGF0dGVybjogJHtwYXR0ZXJuRW1vamlbZGMucGF0dGVybl19ICR7ZGMucGF0dGVybn1cXG5gO1xuICAgICAgICByZXBvcnQgKz0gYCAgIC0gQXZnIFRpbWU6ICR7ZGMuYXZlcmFnZVRpbWUudG9GaXhlZCgxKX1zIHwgRGlmZmljdWx0eTogJHsoZGMuY2FyZC5zdGF0cy5kaWZmaWN1bHR5ICogMTAwKS50b0ZpeGVkKDApfSVcXG5cXG5gO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVwb3J0ICs9IGAjIyBcdUQ4M0RcdURDREEgRGVjayBPdmVydmlld1xcblxcbmA7XG4gICAgZGVja1N0YXRzLmZvckVhY2goZGVjayA9PiB7XG4gICAgICByZXBvcnQgKz0gYCMjIyAke2RlY2suZGVja05hbWV9XFxuYDtcbiAgICAgIHJlcG9ydCArPSBgLSBUb3RhbDogJHtkZWNrLnRvdGFsQ2FyZHN9IHwgRHVlOiAke2RlY2suZHVlQ2FyZHN9IHwgTmV3OiAke2RlY2submV3Q2FyZHN9XFxuYDtcbiAgICAgIHJlcG9ydCArPSBgLSBDb3JyZWN0IFJhdGU6ICR7KGRlY2suY29ycmVjdFJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JVxcbmA7XG4gICAgICByZXBvcnQgKz0gYC0gQXZnIEludGVydmFsOiAke2RlY2suYXZlcmFnZUludGVydmFsLnRvRml4ZWQoMSl9IGRheXNcXG5cXG5gO1xuICAgIH0pO1xuXG4gICAgcmVwb3J0ICs9IGAjIyBcdUQ4M0RcdURDQTEgUmVjb21tZW5kYXRpb25zXFxuXFxuYDtcblxuICAgIC8vIFx1NzUxRlx1NjIxMFx1NUVGQVx1OEJBRVxuICAgIGlmIChhdmVyYWdlQ29ycmVjdFJhdGUgPCAwLjcpIHtcbiAgICAgIHJlcG9ydCArPSBgLSBcdTI2QTEgWW91ciBjb3JyZWN0IHJhdGUgaXMgYmVsb3cgNzAlLiBDb25zaWRlciByZXZpZXdpbmcgZGlmZmljdWx0IGNhcmRzIG1vcmUgZnJlcXVlbnRseS5cXG5gO1xuICAgIH1cbiAgICBpZiAoZGlmZmljdWx0Q2FyZHMubGVuZ3RoID4gNSkge1xuICAgICAgcmVwb3J0ICs9IGAtIFx1RDgzRFx1RENENiBZb3UgaGF2ZSBtYW55IGRpZmZpY3VsdCBjYXJkcy4gVHJ5IGJyZWFraW5nIGNvbXBsZXggY29uY2VwdHMgaW50byBzbWFsbGVyIGZsYXNoY2FyZHMuXFxuYDtcbiAgICB9XG4gICAgaWYgKHRoaXNXZWVrLnN0cmVhayA+IDcpIHtcbiAgICAgIHJlcG9ydCArPSBgLSBcdUQ4M0NcdURGODkgQW1hemluZyBzdHJlYWshIEtlZXAgdXAgdGhlIGNvbnNpc3RlbmN5IVxcbmA7XG4gICAgfVxuICAgIGlmICh0b3RhbFRpbWUgLyB0b3RhbFJldmlld2VkID4gMzApIHtcbiAgICAgIHJlcG9ydCArPSBgLSBcdTIzRjFcdUZFMEYgQXZlcmFnZSByZXZpZXcgdGltZSBpcyBoaWdoLiBDb25zaWRlciBzaW1wbGlmeWluZyBjYXJkIGNvbnRlbnQuXFxuYDtcbiAgICB9XG4gICAgaWYgKGRlY2tTdGF0cy5zb21lKGQgPT4gZC5kdWVDYXJkcyA+IGQudG90YWxDYXJkcyAqIDAuNSkpIHtcbiAgICAgIHJlcG9ydCArPSBgLSBcdUQ4M0RcdURDQzUgU29tZSBkZWNrcyBoYXZlIG1hbnkgb3ZlcmR1ZSBjYXJkcy4gRm9jdXMgb24gY2F0Y2hpbmcgdXAgd2l0aCB0aGVzZS5cXG5gO1xuICAgIH1cblxuICAgIHJldHVybiByZXBvcnQ7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZUF2ZXJhZ2VSYXRlKHN0YXRzOiBEYWlseVN0YXRzW10pOiBudW1iZXIge1xuICAgIGNvbnN0IHRvdGFsID0gc3RhdHMucmVkdWNlKChzdW0sIHMpID0+IHN1bSArIHMucmV2aWV3ZWQsIDApO1xuICAgIGNvbnN0IGNvcnJlY3QgPSBzdGF0cy5yZWR1Y2UoKHN1bSwgcykgPT4gc3VtICsgcy5jb3JyZWN0Q291bnQsIDApO1xuICAgIHJldHVybiB0b3RhbCA+IDAgPyBjb3JyZWN0IC8gdG90YWwgOiAwO1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRUaW1lKHNlY29uZHM6IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3QgaG91cnMgPSBNYXRoLmZsb29yKHNlY29uZHMgLyAzNjAwKTtcbiAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcigoc2Vjb25kcyAlIDM2MDApIC8gNjApO1xuICAgIFxuICAgIGlmIChob3VycyA+IDApIHtcbiAgICAgIHJldHVybiBgJHtob3Vyc31oICR7bWludXRlc31tYDtcbiAgICB9XG4gICAgcmV0dXJuIGAke21pbnV0ZXN9bWA7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU3MEVEXHU1MjlCXHU1NkZFXHU2NTcwXHU2MzZFXHVGRjA4XHU3NTI4XHU0RThFXHU2NUU1XHU1Mzg2XHU4OUM2XHU1NkZFXHVGRjA5XG4gICAqL1xuICBnZXRIZWF0bWFwRGF0YShkYXlzOiBudW1iZXIgPSA5MCk6IHsgZGF0ZTogc3RyaW5nOyBjb3VudDogbnVtYmVyOyBpbnRlbnNpdHk6IG51bWJlciB9W10ge1xuICAgIGNvbnN0IGRhaWx5U3RhdHMgPSB0aGlzLmdldERhaWx5U3RhdHMoZGF5cyk7XG4gICAgY29uc3QgbWF4UmV2aWV3cyA9IE1hdGgubWF4KC4uLmRhaWx5U3RhdHMubWFwKHMgPT4gcy5yZXZpZXdlZCkpO1xuXG4gICAgcmV0dXJuIGRhaWx5U3RhdHMubWFwKHN0YXQgPT4gKHtcbiAgICAgIGRhdGU6IHN0YXQuZGF0ZSxcbiAgICAgIGNvdW50OiBzdGF0LnJldmlld2VkLFxuICAgICAgaW50ZW5zaXR5OiBtYXhSZXZpZXdzID4gMCA/IHN0YXQucmV2aWV3ZWQgLyBtYXhSZXZpZXdzIDogMFxuICAgIH0pKTtcbiAgfVxufSIsICJpbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29udGVudFVuaXQge1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiAnaGlnaGxpZ2h0JyB8ICdib2xkJyB8ICd0YWcnIHwgJ2N1c3RvbScgfCAnUUEnIHwgJ2Nsb3plJ3wndGV4dCc7IC8vIFx1NkRGQlx1NTJBMCBxYSBcdTU0OEMgY2xvemUgXHU3QzdCXHU1NzhCXG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgYW5zd2VyPzogc3RyaW5nOyAvLyBcdTc1MjhcdTRFOEUgUUEgXHU1MzYxXHU3MjQ3XHU3Njg0XHU3QjU0XHU2ODQ4XG4gIGZ1bGxDb250ZXh0Pzogc3RyaW5nO1xuICBzb3VyY2U6IHtcbiAgICBmaWxlOiBzdHJpbmc7XG4gICAgcG9zaXRpb246IHtcbiAgICAgIHN0YXJ0OiBudW1iZXI7XG4gICAgICBlbmQ6IG51bWJlcjtcbiAgICAgIGxpbmU6IG51bWJlcjtcbiAgICB9O1xuICAgIGJsb2NrSWQ/OiBzdHJpbmc7XG4gICAgaGVhZGluZz86IHN0cmluZztcbiAgICBhbmNob3JMaW5rOiBzdHJpbmc7XG4gIH07XG4gIGV4dHJhY3RSdWxlOiB7XG4gICAgcnVsZUlkOiBzdHJpbmc7XG4gICAgcnVsZU5hbWU6IHN0cmluZztcbiAgICBleHRyYWN0ZWRCeTogJ2F1dG8nIHwgJ21hbnVhbCc7XG4gIH07XG4gIG1ldGFkYXRhOiB7XG4gICAgY3JlYXRlZEF0OiBudW1iZXI7XG4gICAgdXBkYXRlZEF0OiBudW1iZXI7XG4gICAgdGFnczogc3RyaW5nW107XG4gICAgY29sb3I/OiBzdHJpbmc7XG4gIH07XG4gIGFubm90YXRpb25JZD86IHN0cmluZztcbiAgZmxhc2hjYXJkSWRzOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGNsYXNzIERhdGFNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBkYXRhRm9sZGVyOiBzdHJpbmc7XG4gIHByaXZhdGUgY29udGVudFVuaXRzOiBNYXA8c3RyaW5nLCBDb250ZW50VW5pdD4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgZmlsZUluZGV4OiBNYXA8c3RyaW5nLCBzdHJpbmdbXT4gPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW5cbiAgKSB7XG4gICAgdGhpcy5kYXRhRm9sZGVyID0gYCR7dGhpcy5hcHAudmF1bHQuY29uZmlnRGlyfS9wbHVnaW5zL2xlYXJuaW5nLXN5c3RlbS9kYXRhYDtcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUoKSB7XG4gICAgLy8gXHU3ODZFXHU0RkREXHU2NTcwXHU2MzZFXHU2NTg3XHU0RUY2XHU1OTM5XHU1QjU4XHU1NzI4XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVEYXRhRm9sZGVyKCk7XG4gICAgXG4gICAgLy8gXHU1MkEwXHU4RjdEXHU3M0IwXHU2NzA5XHU2NTcwXHU2MzZFXG4gICAgYXdhaXQgdGhpcy5sb2FkRGF0YSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBlbnN1cmVEYXRhRm9sZGVyKCkge1xuICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzLmFwcC52YXVsdC5hZGFwdGVyO1xuICAgIFxuICAgIC8vIFx1NTIxQlx1NUVGQVx1NEUzQlx1NjU3MFx1NjM2RVx1NjU4N1x1NEVGNlx1NTkzOVxuICAgIGlmICghKGF3YWl0IGFkYXB0ZXIuZXhpc3RzKHRoaXMuZGF0YUZvbGRlcikpKSB7XG4gICAgICBhd2FpdCBhZGFwdGVyLm1rZGlyKHRoaXMuZGF0YUZvbGRlcik7XG4gICAgfVxuXG4gICAgLy8gXHU1MjFCXHU1RUZBXHU1QjUwXHU2NTg3XHU0RUY2XHU1OTM5XG4gICAgY29uc3Qgc3ViZm9sZGVycyA9IFsnaW5kZXhlcycsICdjb25maWcnLCAnY2FjaGUnXTtcbiAgICBmb3IgKGNvbnN0IGZvbGRlciBvZiBzdWJmb2xkZXJzKSB7XG4gICAgICBjb25zdCBwYXRoID0gYCR7dGhpcy5kYXRhRm9sZGVyfS8ke2ZvbGRlcn1gO1xuICAgICAgaWYgKCEoYXdhaXQgYWRhcHRlci5leGlzdHMocGF0aCkpKSB7XG4gICAgICAgIGF3YWl0IGFkYXB0ZXIubWtkaXIocGF0aCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkRGF0YSgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGVudFBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L2NvbnRlbnQtdW5pdHMuanNvbmA7XG4gICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5hcHAudmF1bHQuYWRhcHRlcjtcblxuICAgICAgaWYgKGF3YWl0IGFkYXB0ZXIuZXhpc3RzKGNvbnRlbnRQYXRoKSkge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgYWRhcHRlci5yZWFkKGNvbnRlbnRQYXRoKTtcbiAgICAgICAgY29uc3QgdW5pdHM6IENvbnRlbnRVbml0W10gPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCB1bml0IG9mIHVuaXRzKSB7XG4gICAgICAgICAgdGhpcy5jb250ZW50VW5pdHMuc2V0KHVuaXQuaWQsIHVuaXQpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFx1Njc4NFx1NUVGQVx1NjU4N1x1NEVGNlx1N0QyMlx1NUYxNVxuICAgICAgICAgIGlmICghdGhpcy5maWxlSW5kZXguaGFzKHVuaXQuc291cmNlLmZpbGUpKSB7XG4gICAgICAgICAgICB0aGlzLmZpbGVJbmRleC5zZXQodW5pdC5zb3VyY2UuZmlsZSwgW10pO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmZpbGVJbmRleC5nZXQodW5pdC5zb3VyY2UuZmlsZSkhLnB1c2godW5pdC5pZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBkYXRhOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzYXZlQ29udGVudFVuaXQodW5pdDogQ29udGVudFVuaXQpIHtcbiAgICB0aGlzLmNvbnRlbnRVbml0cy5zZXQodW5pdC5pZCwgdW5pdCk7XG4gICAgXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU2NTg3XHU0RUY2XHU3RDIyXHU1RjE1XG4gICAgaWYgKCF0aGlzLmZpbGVJbmRleC5oYXModW5pdC5zb3VyY2UuZmlsZSkpIHtcbiAgICAgIHRoaXMuZmlsZUluZGV4LnNldCh1bml0LnNvdXJjZS5maWxlLCBbXSk7XG4gICAgfVxuICAgIGlmICghdGhpcy5maWxlSW5kZXguZ2V0KHVuaXQuc291cmNlLmZpbGUpIS5pbmNsdWRlcyh1bml0LmlkKSkge1xuICAgICAgdGhpcy5maWxlSW5kZXguZ2V0KHVuaXQuc291cmNlLmZpbGUpIS5wdXNoKHVuaXQuaWQpO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMucGVyc2lzdCgpO1xuICB9XG5cbiAgYXN5bmMgc2F2ZUNvbnRlbnRVbml0cyh1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIGZvciAoY29uc3QgdW5pdCBvZiB1bml0cykge1xuICAgICAgdGhpcy5jb250ZW50VW5pdHMuc2V0KHVuaXQuaWQsIHVuaXQpO1xuICAgICAgXG4gICAgICBpZiAoIXRoaXMuZmlsZUluZGV4Lmhhcyh1bml0LnNvdXJjZS5maWxlKSkge1xuICAgICAgICB0aGlzLmZpbGVJbmRleC5zZXQodW5pdC5zb3VyY2UuZmlsZSwgW10pO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmZpbGVJbmRleC5nZXQodW5pdC5zb3VyY2UuZmlsZSkhLmluY2x1ZGVzKHVuaXQuaWQpKSB7XG4gICAgICAgIHRoaXMuZmlsZUluZGV4LmdldCh1bml0LnNvdXJjZS5maWxlKSEucHVzaCh1bml0LmlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnBlcnNpc3QoKTtcbiAgfVxuXG4gIGdldENvbnRlbnRVbml0KGlkOiBzdHJpbmcpOiBDb250ZW50VW5pdCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuY29udGVudFVuaXRzLmdldChpZCk7XG4gIH1cblxuICBnZXRDb250ZW50VW5pdHNCeUZpbGUoZmlsZVBhdGg6IHN0cmluZyk6IENvbnRlbnRVbml0W10ge1xuICAgIGNvbnN0IGlkcyA9IHRoaXMuZmlsZUluZGV4LmdldChmaWxlUGF0aCkgfHwgW107XG4gICAgcmV0dXJuIGlkcy5tYXAoaWQgPT4gdGhpcy5jb250ZW50VW5pdHMuZ2V0KGlkKSkuZmlsdGVyKEJvb2xlYW4pIGFzIENvbnRlbnRVbml0W107XG4gIH1cblxuICBnZXRDb250ZW50VW5pdHNCeVR5cGUodHlwZTogQ29udGVudFVuaXRbJ3R5cGUnXSk6IENvbnRlbnRVbml0W10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuY29udGVudFVuaXRzLnZhbHVlcygpKS5maWx0ZXIodW5pdCA9PiB1bml0LnR5cGUgPT09IHR5cGUpO1xuICB9XG5cbiAgZ2V0QWxsQ29udGVudFVuaXRzKCk6IENvbnRlbnRVbml0W10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuY29udGVudFVuaXRzLnZhbHVlcygpKTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZUNvbnRlbnRVbml0KGlkOiBzdHJpbmcpIHtcbiAgICBjb25zdCB1bml0ID0gdGhpcy5jb250ZW50VW5pdHMuZ2V0KGlkKTtcbiAgICBpZiAodW5pdCkge1xuICAgICAgdGhpcy5jb250ZW50VW5pdHMuZGVsZXRlKGlkKTtcbiAgICAgIFxuICAgICAgLy8gXHU2NkY0XHU2NUIwXHU2NTg3XHU0RUY2XHU3RDIyXHU1RjE1XG4gICAgICBjb25zdCBmaWxlVW5pdHMgPSB0aGlzLmZpbGVJbmRleC5nZXQodW5pdC5zb3VyY2UuZmlsZSk7XG4gICAgICBpZiAoZmlsZVVuaXRzKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZmlsZVVuaXRzLmluZGV4T2YoaWQpO1xuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgIGZpbGVVbml0cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMucGVyc2lzdCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcGVyc2lzdCgpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGVudFBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L2NvbnRlbnQtdW5pdHMuanNvbmA7XG4gICAgICBjb25zdCB1bml0cyA9IEFycmF5LmZyb20odGhpcy5jb250ZW50VW5pdHMudmFsdWVzKCkpO1xuICAgICAgY29uc3QgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHVuaXRzLCBudWxsLCAyKTtcbiAgICAgIFxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShjb250ZW50UGF0aCwgZGF0YSk7XG4gICAgICBcbiAgICAgIC8vIFx1NEZERFx1NUI1OFx1N0QyMlx1NUYxNVxuICAgICAgY29uc3QgaW5kZXhQYXRoID0gYCR7dGhpcy5kYXRhRm9sZGVyfS9pbmRleGVzL2ZpbGUtaW5kZXguanNvbmA7XG4gICAgICBjb25zdCBpbmRleERhdGEgPSBKU09OLnN0cmluZ2lmeShcbiAgICAgICAgT2JqZWN0LmZyb21FbnRyaWVzKHRoaXMuZmlsZUluZGV4KSxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgMlxuICAgICAgKTtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoaW5kZXhQYXRoLCBpbmRleERhdGEpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwZXJzaXN0aW5nIGRhdGE6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxufSIsICJpbXBvcnQgeyBBcHAsIFRGaWxlLCBOb3RpY2UsIEVkaXRvciwgTWVudSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERhdGFNYW5hZ2VyLCBDb250ZW50VW5pdCB9IGZyb20gJy4vRGF0YU1hbmFnZXInO1xuaW1wb3J0IHsgRmxhc2hjYXJkTWFuYWdlciB9IGZyb20gJy4vRmxhc2hjYXJkTWFuYWdlcic7XG5cbmV4cG9ydCBjbGFzcyBFeHRyYWN0aW9uRW5naW5lIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBhcHA6IEFwcCxcbiAgICBwcml2YXRlIGRhdGFNYW5hZ2VyOiBEYXRhTWFuYWdlcixcbiAgICBwcml2YXRlIGZsYXNoY2FyZE1hbmFnZXI6IEZsYXNoY2FyZE1hbmFnZXIgXG4gICkge31cblxuICAvKipcbiAgICogXHU2Q0U4XHU1MThDXHU1M0YzXHU5NTJFXHU4M0RDXHU1MzU1XG4gICAqL1xuICByZWdpc3RlckNvbnRleHRNZW51KG1lbnU6IE1lbnUsIGVkaXRvcjogRWRpdG9yLCBmaWxlOiBURmlsZSkge1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICBpZiAoIXNlbGVjdGlvbikgcmV0dXJuO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHVEODNEXHVEQ0REIEV4dHJhY3QgYXMgdGV4dCBvbmx5JylcbiAgICAgICAgLnNldEljb24oJ2ZpbGUtdGV4dCcpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmV4dHJhY3RTZWxlY3RlZFRleHQoZWRpdG9yLCBmaWxlLCAndGV4dCcpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1Mjc1MyBFeHRyYWN0IGFzIFFBIGNhcmQnKVxuICAgICAgICAuc2V0SWNvbignaGVscC1jaXJjbGUnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5leHRyYWN0U2VsZWN0ZWRUZXh0KGVkaXRvciwgZmlsZSwgJ1FBJyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHUyNzBGXHVGRTBGIEV4dHJhY3QgYXMgQ2xvemUgY2FyZCcpXG4gICAgICAgIC5zZXRJY29uKCdoaWdobGlnaHRlcicpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmV4dHJhY3RTZWxlY3RlZFRleHQoZWRpdG9yLCBmaWxlLCAnY2xvemUnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogXHU2M0QwXHU1M0Q2XHU5MDA5XHU0RTJEXHU3Njg0XHU2NTg3XHU2NzJDXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGV4dHJhY3RTZWxlY3RlZFRleHQoXG4gICAgZWRpdG9yOiBFZGl0b3IsIFxuICAgIGZpbGU6IFRGaWxlLCBcbiAgICBleHRyYWN0VHlwZTogJ3RleHQnIHwgJ1FBJyB8ICdjbG96ZSdcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgIGlmICghc2VsZWN0aW9uKSB7XG4gICAgICBuZXcgTm90aWNlKCdObyB0ZXh0IHNlbGVjdGVkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcignZnJvbScpO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgIGNvbnN0IG9mZnNldCA9IHRoaXMuZ2V0T2Zmc2V0RnJvbUN1cnNvcihjb250ZW50LCBjdXJzb3IubGluZSwgY3Vyc29yLmNoKTtcblxuICAgIHRyeSB7XG4gICAgICBsZXQgdW5pdDogQ29udGVudFVuaXQ7XG5cbiAgICAgIHN3aXRjaCAoZXh0cmFjdFR5cGUpIHtcbiAgICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgICAgdW5pdCA9IHRoaXMuY3JlYXRlVGV4dFVuaXQoZmlsZSwgc2VsZWN0aW9uLCBvZmZzZXQsIGNvbnRlbnQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdRQSc6XG4gICAgICAgICAgdW5pdCA9IHRoaXMuY3JlYXRlUUFVbml0KGZpbGUsIHNlbGVjdGlvbiwgb2Zmc2V0LCBjb250ZW50KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnY2xvemUnOlxuICAgICAgICAgIHVuaXQgPSB0aGlzLmNyZWF0ZUNsb3plVW5pdChmaWxlLCBzZWxlY3Rpb24sIG9mZnNldCwgY29udGVudCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIC8vIDEuIFx1NTE0OFx1NEZERFx1NUI1OCBDb250ZW50VW5pdFxuICAgICAgYXdhaXQgdGhpcy5kYXRhTWFuYWdlci5zYXZlQ29udGVudFVuaXRzKFt1bml0XSk7XG4gICAgICBcbiAgICAgIC8vIDIuIFx1NTk4Mlx1Njc5Q1x1NjYyRiBRQSBcdTYyMTYgY2xvemVcdUZGMENcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcbiAgICAgIGlmIChleHRyYWN0VHlwZSA9PT0gJ1FBJyB8fCBleHRyYWN0VHlwZSA9PT0gJ2Nsb3plJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGNhcmRUeXBlID0gZXh0cmFjdFR5cGUgPT09ICdRQScgPyAncWEnIDogJ2Nsb3plJztcbiAgICAgICAgICBjb25zdCBmbGFzaGNhcmQgPSBhd2FpdCB0aGlzLmZsYXNoY2FyZE1hbmFnZXIuY3JlYXRlRmxhc2hjYXJkRnJvbVVuaXQodW5pdCwge1xuICAgICAgICAgICAgY2FyZFR5cGU6IGNhcmRUeXBlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gMy4gXHU1MThEXHU2QjIxXHU0RkREXHU1QjU4IHVuaXRcdUZGMDhcdTY2RjRcdTY1QjAgZmxhc2hjYXJkSWRzXHVGRjA5XG4gICAgICAgICAgYXdhaXQgdGhpcy5kYXRhTWFuYWdlci5zYXZlQ29udGVudFVuaXRzKFt1bml0XSk7XG4gICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignW2V4dHJhY3RTZWxlY3RlZFRleHRdIFx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1NTkzMVx1OEQyNTonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgdHlwZU5hbWVzID0ge1xuICAgICAgICB0ZXh0OiAndGV4dCcsXG4gICAgICAgIFFBOiAnUUEgY2FyZCcsXG4gICAgICAgIGNsb3plOiAnY2xvemUgY2FyZCdcbiAgICAgIH07XG4gICAgICBcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBFeHRyYWN0ZWQgYXMgJHt0eXBlTmFtZXNbZXh0cmFjdFR5cGVdfWApO1xuICAgICAgXG4gICAgICAvLyA0LiBcdTUyMzdcdTY1QjBcdTYyNDBcdTY3MDlcdTg5QzZcdTU2RkVcbiAgICAgIHRoaXMucmVmcmVzaEFsbFZpZXdzKCk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZXh0cmFjdGluZyBzZWxlY3Rpb246JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShgXHUyNzRDIEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NTIxQlx1NUVGQVx1N0VBRlx1NjU4N1x1NjcyQ1x1NTM1NVx1NTE0M1xuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVUZXh0VW5pdChcbiAgICBmaWxlOiBURmlsZSxcbiAgICBzZWxlY3Rpb246IHN0cmluZyxcbiAgICBvZmZzZXQ6IG51bWJlcixcbiAgICBmaWxlQ29udGVudDogc3RyaW5nXG4gICk6IENvbnRlbnRVbml0IHtcbiAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuY2FsY3VsYXRlUG9zaXRpb24oZmlsZUNvbnRlbnQsIG9mZnNldCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVJZCgpLFxuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgY29udGVudDogc2VsZWN0aW9uLnRyaW0oKSxcbiAgICAgIGZ1bGxDb250ZXh0OiBzZWxlY3Rpb24udHJpbSgpLFxuICAgICAgc291cmNlOiB7XG4gICAgICAgIGZpbGU6IGZpbGUucGF0aCxcbiAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICBzdGFydDogb2Zmc2V0LFxuICAgICAgICAgIGVuZDogb2Zmc2V0ICsgc2VsZWN0aW9uLmxlbmd0aCxcbiAgICAgICAgICBsaW5lOiBwb3NpdGlvbi5saW5lXG4gICAgICAgIH0sXG4gICAgICAgIGhlYWRpbmc6IHRoaXMuZmluZEhlYWRpbmcoZmlsZUNvbnRlbnQsIG9mZnNldCksXG4gICAgICAgIGFuY2hvckxpbms6IGBbWyR7ZmlsZS5iYXNlbmFtZX0jXiR7dGhpcy5nZW5lcmF0ZUJsb2NrSWQoKX1dXWBcbiAgICAgIH0sXG4gICAgICBleHRyYWN0UnVsZToge1xuICAgICAgICBydWxlSWQ6ICd0ZXh0LW1hbnVhbCcsXG4gICAgICAgIHJ1bGVOYW1lOiAnTWFudWFsIFRleHQgRXh0cmFjdCcsXG4gICAgICAgIGV4dHJhY3RlZEJ5OiAnbWFudWFsJ1xuICAgICAgfSxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICB0YWdzOiB0aGlzLmV4dHJhY3RUYWdzKGZpbGVDb250ZW50LCBvZmZzZXQpXG4gICAgICB9LFxuICAgICAgZmxhc2hjYXJkSWRzOiBbXVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogXHU1MjFCXHU1RUZBIFFBIFx1NTM2MVx1NzI0N1x1NTM1NVx1NTE0M1xuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVRQVVuaXQoXG4gICAgZmlsZTogVEZpbGUsXG4gICAgc2VsZWN0aW9uOiBzdHJpbmcsXG4gICAgb2Zmc2V0OiBudW1iZXIsXG4gICAgZmlsZUNvbnRlbnQ6IHN0cmluZ1xuICApOiBDb250ZW50VW5pdCB7XG4gICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLmNhbGN1bGF0ZVBvc2l0aW9uKGZpbGVDb250ZW50LCBvZmZzZXQpO1xuICAgIFxuICAgIC8vIFx1NUMxRFx1OEJENVx1NTIwNlx1NTI3Mlx1NjIxMFx1OTVFRVx1OTg5OFx1NTQ4Q1x1N0I1NFx1Njg0OFxuICAgIGxldCBxdWVzdGlvbjogc3RyaW5nLCBhbnN3ZXI6IHN0cmluZztcbiAgICBcbiAgICBpZiAoc2VsZWN0aW9uLmluY2x1ZGVzKCc6OicpKSB7XG4gICAgICAvLyBcdTU5ODJcdTY3OUNcdTUzMDVcdTU0MkIgOjogXHU1MjA2XHU5Njk0XHU3QjI2XG4gICAgICBjb25zdCBwYXJ0cyA9IHNlbGVjdGlvbi5zcGxpdCgnOjonKTtcbiAgICAgIHF1ZXN0aW9uID0gcGFydHNbMF0udHJpbSgpO1xuICAgICAgYW5zd2VyID0gcGFydHMuc2xpY2UoMSkuam9pbignOjonKS50cmltKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NTQyNlx1NTIxOVx1NjU3NFx1NEUyQVx1OTAwOVx1NEUyRFx1NjU4N1x1NjcyQ1x1NEY1Q1x1NEUzQVx1OTVFRVx1OTg5OFx1RkYwQ1x1N0I1NFx1Njg0OFx1NEUzQVx1N0E3QVx1RkYwOFx1OTcwMFx1ODk4MVx1NzUyOFx1NjIzN1x1ODg2NVx1NTE0NVx1RkYwOVxuICAgICAgcXVlc3Rpb24gPSBzZWxlY3Rpb24udHJpbSgpO1xuICAgICAgYW5zd2VyID0gJ1tBbnN3ZXIgbmVlZGVkXSc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgIHR5cGU6ICdRQScsXG4gICAgICBjb250ZW50OiBxdWVzdGlvbixcbiAgICAgIGFuc3dlcjogYW5zd2VyLFxuICAgICAgZnVsbENvbnRleHQ6IHNlbGVjdGlvbi50cmltKCksXG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgZmlsZTogZmlsZS5wYXRoLFxuICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgIHN0YXJ0OiBvZmZzZXQsXG4gICAgICAgICAgZW5kOiBvZmZzZXQgKyBzZWxlY3Rpb24ubGVuZ3RoLFxuICAgICAgICAgIGxpbmU6IHBvc2l0aW9uLmxpbmVcbiAgICAgICAgfSxcbiAgICAgICAgaGVhZGluZzogdGhpcy5maW5kSGVhZGluZyhmaWxlQ29udGVudCwgb2Zmc2V0KSxcbiAgICAgICAgYW5jaG9yTGluazogYFtbJHtmaWxlLmJhc2VuYW1lfSNeJHt0aGlzLmdlbmVyYXRlQmxvY2tJZCgpfV1dYFxuICAgICAgfSxcbiAgICAgIGV4dHJhY3RSdWxlOiB7XG4gICAgICAgIHJ1bGVJZDogJ1FBLW1hbnVhbCcsXG4gICAgICAgIHJ1bGVOYW1lOiAnTWFudWFsIFFBIENhcmQnLFxuICAgICAgICBleHRyYWN0ZWRCeTogJ21hbnVhbCdcbiAgICAgIH0sXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgdGFnczogdGhpcy5leHRyYWN0VGFncyhmaWxlQ29udGVudCwgb2Zmc2V0KVxuICAgICAgfSxcbiAgICAgIGZsYXNoY2FyZElkczogW11cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NTIxQlx1NUVGQVx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1NTM2MVx1NzI0N1x1NTM1NVx1NTE0M1xuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVDbG96ZVVuaXQoXG4gICAgZmlsZTogVEZpbGUsXG4gICAgc2VsZWN0aW9uOiBzdHJpbmcsXG4gICAgb2Zmc2V0OiBudW1iZXIsXG4gICAgZmlsZUNvbnRlbnQ6IHN0cmluZ1xuICApOiBDb250ZW50VW5pdCB7XG4gICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLmNhbGN1bGF0ZVBvc2l0aW9uKGZpbGVDb250ZW50LCBvZmZzZXQpO1xuICAgIGNvbnN0IGZ1bGxTZW50ZW5jZSA9IHRoaXMuZXh0cmFjdEZ1bGxTZW50ZW5jZShmaWxlQ29udGVudCwgb2Zmc2V0LCBzZWxlY3Rpb24ubGVuZ3RoKTtcblxuICAgIHJldHVybiB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICB0eXBlOiAnY2xvemUnLFxuICAgICAgY29udGVudDogc2VsZWN0aW9uLnRyaW0oKSxcbiAgICAgIGZ1bGxDb250ZXh0OiBmdWxsU2VudGVuY2UsXG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgZmlsZTogZmlsZS5wYXRoLFxuICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgIHN0YXJ0OiBvZmZzZXQsXG4gICAgICAgICAgZW5kOiBvZmZzZXQgKyBzZWxlY3Rpb24ubGVuZ3RoLFxuICAgICAgICAgIGxpbmU6IHBvc2l0aW9uLmxpbmVcbiAgICAgICAgfSxcbiAgICAgICAgaGVhZGluZzogdGhpcy5maW5kSGVhZGluZyhmaWxlQ29udGVudCwgb2Zmc2V0KSxcbiAgICAgICAgYW5jaG9yTGluazogYFtbJHtmaWxlLmJhc2VuYW1lfSNeJHt0aGlzLmdlbmVyYXRlQmxvY2tJZCgpfV1dYFxuICAgICAgfSxcbiAgICAgIGV4dHJhY3RSdWxlOiB7XG4gICAgICAgIHJ1bGVJZDogJ2Nsb3plLW1hbnVhbCcsXG4gICAgICAgIHJ1bGVOYW1lOiAnTWFudWFsIENsb3plIENhcmQnLFxuICAgICAgICBleHRyYWN0ZWRCeTogJ21hbnVhbCdcbiAgICAgIH0sXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgdGFnczogdGhpcy5leHRyYWN0VGFncyhmaWxlQ29udGVudCwgb2Zmc2V0KVxuICAgICAgfSxcbiAgICAgIGZsYXNoY2FyZElkczogW11cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NEVDRVx1NTE0OVx1NjgwN1x1NEY0RFx1N0Y2RVx1OEJBMVx1N0I5N1x1NjU4N1x1NEVGNlx1NTA0Rlx1NzlGQlx1OTFDRlxuICAgKi9cbiAgcHJpdmF0ZSBnZXRPZmZzZXRGcm9tQ3Vyc29yKGNvbnRlbnQ6IHN0cmluZywgbGluZTogbnVtYmVyLCBjaDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgIGxldCBvZmZzZXQgPSAwO1xuICAgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZTsgaSsrKSB7XG4gICAgICBvZmZzZXQgKz0gbGluZXNbaV0ubGVuZ3RoICsgMTtcbiAgICB9XG4gICAgXG4gICAgb2Zmc2V0ICs9IGNoO1xuICAgIHJldHVybiBvZmZzZXQ7XG4gIH1cblxuICAvKipcbiAgICogXHU2MjZCXHU2M0NGXHU1MzU1XHU0RTJBXHU2NTg3XHU0RUY2XG4gICAqL1xuICBhc3luYyBzY2FuRmlsZShmaWxlOiBURmlsZSk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgY29uc3QgdW5pdHMgPSBhd2FpdCB0aGlzLmV4dHJhY3RDb250ZW50KGZpbGUsIGNvbnRlbnQpO1xuICAgICAgXG4gICAgICBpZiAodW5pdHMubGVuZ3RoID4gMCkge1xuICAgICAgICBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLnNhdmVDb250ZW50VW5pdHModW5pdHMpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcWFDb3VudCA9IHVuaXRzLmZpbHRlcih1ID0+IHUudHlwZSA9PT0gJ1FBJykubGVuZ3RoO1xuICAgICAgICBjb25zdCBjbG96ZUNvdW50ID0gdW5pdHMuZmlsdGVyKHUgPT4gdS50eXBlID09PSAnY2xvemUnKS5sZW5ndGg7XG4gICAgICAgIG5ldyBOb3RpY2UoYEV4dHJhY3RlZCAke3FhQ291bnR9IFFBIGNhcmRzIGFuZCAke2Nsb3plQ291bnR9IGNsb3plIGNhcmRzIGZyb20gJHtmaWxlLm5hbWV9YCk7XG4gICAgICAgIFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnJlZnJlc2hBbGxWaWV3cygpO1xuICAgICAgICB9LCAxMDApO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gdW5pdHMubGVuZ3RoO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbc2NhbkZpbGVdIFx1OTUxOVx1OEJFRjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKGBFcnJvciBzY2FubmluZyBmaWxlOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBcdTUyMzdcdTY1QjBcdTYyNDBcdTY3MDlcdTc2RjhcdTUxNzNcdTg5QzZcdTU2RkVcbiAgICovXG4gIHByaXZhdGUgcmVmcmVzaEFsbFZpZXdzKCkge1xuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKGxlYWYgPT4ge1xuICAgICAgY29uc3Qgdmlld1R5cGUgPSBsZWFmLnZpZXcuZ2V0Vmlld1R5cGUoKTtcbiAgICAgIGlmICh2aWV3VHlwZSA9PT0gJ2xlYXJuaW5nLXN5c3RlbS1zaWRlYmFyLW92ZXJ2aWV3JyB8fCBcbiAgICAgICAgICB2aWV3VHlwZSA9PT0gJ2xlYXJuaW5nLXN5c3RlbS1tYWluLW92ZXJ2aWV3Jykge1xuICAgICAgICAobGVhZi52aWV3IGFzIGFueSkucmVmcmVzaCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjI2Qlx1NjNDRlx1NjU3NFx1NEUyQSBWYXVsdFxuICAgKi9cbiAgYXN5bmMgc2NhblZhdWx0KCk6IFByb21pc2U8eyBzY2FubmVkOiBudW1iZXI7IGV4dHJhY3RlZDogbnVtYmVyIH0+IHtcbiAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBsZXQgc2Nhbm5lZCA9IDA7XG4gICAgbGV0IGV4dHJhY3RlZCA9IDA7XG5cbiAgICBuZXcgTm90aWNlKGBTY2FubmluZyAke2ZpbGVzLmxlbmd0aH0gZmlsZXMuLi5gKTtcblxuICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgY29uc3QgY291bnQgPSBhd2FpdCB0aGlzLnNjYW5GaWxlKGZpbGUpO1xuICAgICAgc2Nhbm5lZCsrO1xuICAgICAgZXh0cmFjdGVkICs9IGNvdW50O1xuICAgIH1cblxuICAgIG5ldyBOb3RpY2UoYFNjYW4gY29tcGxldGUhIEV4dHJhY3RlZCAke2V4dHJhY3RlZH0gaXRlbXMgZnJvbSAke3NjYW5uZWR9IGZpbGVzLmApO1xuXG4gICAgcmV0dXJuIHsgc2Nhbm5lZCwgZXh0cmFjdGVkIH07XG4gIH1cblxuICAvKipcbiAgICogXHVEODNEXHVERDI3IFx1NEZFRVx1NjUzOTogXHU1MTQ4XHU0RkREXHU1QjU4IHVuaXRzXHVGRjBDXHU1MThEXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGV4dHJhY3RDb250ZW50KGZpbGU6IFRGaWxlLCBjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPENvbnRlbnRVbml0W10+IHtcbiAgICBjb25zdCB1bml0czogQ29udGVudFVuaXRbXSA9IFtdO1xuICAgIFxuICAgIC8vIDFcdUZFMEZcdTIwRTMgXHU1MTQ4XHU2M0QwXHU1M0Q2XHU2MjQwXHU2NzA5IHVuaXRzXHVGRjA4XHU0RTBEXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXHVGRjA5XG4gICAgY29uc3QgcWFVbml0cyA9IHRoaXMuZXh0cmFjdFFBQ2FyZHMoZmlsZSwgY29udGVudCk7XG4gICAgdW5pdHMucHVzaCguLi5xYVVuaXRzKTtcbiAgICBcbiAgICBjb25zdCBjbG96ZVVuaXRzID0gdGhpcy5leHRyYWN0Q2xvemVDYXJkcyhmaWxlLCBjb250ZW50KTtcbiAgICB1bml0cy5wdXNoKC4uLmNsb3plVW5pdHMpO1xuICAgIFxuICAgIC8vIDJcdUZFMEZcdTIwRTMgXHU1MTQ4XHU0RkREXHU1QjU4XHU2MjQwXHU2NzA5IHVuaXRzIFx1NTIzMCBEYXRhTWFuYWdlclxuICAgIGlmICh1bml0cy5sZW5ndGggPiAwKSB7XG4gICAgICBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLnNhdmVDb250ZW50VW5pdHModW5pdHMpO1xuICAgIH1cbiAgICBcbiAgICAvLyAzXHVGRTBGXHUyMEUzIFx1NTE4RFx1NEUzQVx1NkJDRlx1NEUyQSB1bml0IFx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVxuICAgIGZvciAoY29uc3QgdW5pdCBvZiB1bml0cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY2FyZFR5cGUgPSB1bml0LnR5cGUgPT09ICdRQScgPyAncWEnIDogJ2Nsb3plJztcbiAgICAgICAgY29uc3QgZmxhc2hjYXJkID0gYXdhaXQgdGhpcy5mbGFzaGNhcmRNYW5hZ2VyLmNyZWF0ZUZsYXNoY2FyZEZyb21Vbml0KHVuaXQsIHtcbiAgICAgICAgICBjYXJkVHlwZTogY2FyZFR5cGVcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbZXh0cmFjdENvbnRlbnRdIFx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1NTkzMVx1OEQyNTonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB1bml0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTI3MDUgXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU0RTNBXHU0RUZCXHU1MkExXHU1QjhDXHU2MjEwXHU2ODA3XHU4QkIwXG4gICAqIFx1NjM5Mlx1OTY2NDogW2NvbXBsZXRpb246OiBkYXRlXSwgW2R1ZTo6IGRhdGVdIFx1N0I0OVx1NEVGQlx1NTJBMVx1NzZGOFx1NTE3M1x1NzY4NCA6OiBcdTY4M0NcdTVGMEZcbiAgICovXG4gIHByaXZhdGUgaXNUYXNrQ29tcGxldGlvbihsaW5lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAvLyBcdTUzMzlcdTkxNERcdTRFRkJcdTUyQTFcdTY4MDdcdThCQjA6IC0gWyBdIFx1NjIxNiAtIFt4XSBcdTVGMDBcdTU5MzRcdTc2ODRcdTg4NEMsXHU0RTE0XHU1MzA1XHU1NDJCIDo6IFxuICAgIGNvbnN0IHRhc2tQYXR0ZXJuID0gL15bXFxzXSotXFxzKlxcW1t4XFxzXVxcXS4qOjovaTtcbiAgICByZXR1cm4gdGFza1BhdHRlcm4udGVzdChsaW5lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTI3MDUgXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU0RTNBXHU2NUU1XHU2NzFGL1x1NjVGNlx1OTVGNFx1NUI1N1x1NkJCNVxuICAgKiBcdTYzOTJcdTk2NjQ6IGRhdGUxOjogMjAyMS0wMi0yNlQxNToxNSwgZGF0ZTI6OiAyMDIxLTA0LTE3IDE4OjAwIFx1N0I0OVx1NjgzQ1x1NUYwRlxuICAgKi9cbiAgcHJpdmF0ZSBpc0RhdGVUaW1lRmllbGQocXVlc3Rpb246IHN0cmluZywgYW5zd2VyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAvLyBcdTY4QzBcdTY3RTVcdTk1RUVcdTk4OThcdTkwRThcdTUyMDZcdTY2MkZcdTU0MjZcdTUzMDVcdTU0MkJcdTVFMzhcdTg5QzFcdTc2ODRcdTY1RTVcdTY3MUYvXHU2NUY2XHU5NUY0XHU1QjU3XHU2QkI1XHU1NDBEXG4gICAgY29uc3QgZGF0ZUZpZWxkUGF0dGVybiA9IC9cXGIoZGF0ZVxcZCp8dGltZVxcZCp8Y3JlYXRlZHx1cGRhdGVkfG1vZGlmaWVkfHNjaGVkdWxlZHxkdWV8Y29tcGxldGlvbilcXGIvaTtcbiAgICBcbiAgICAvLyBcdTY4QzBcdTY3RTVcdTdCNTRcdTY4NDhcdTkwRThcdTUyMDZcdTY2MkZcdTU0MjZcdTRFM0FcdTY1RTVcdTY3MUYvXHU2NUY2XHU5NUY0XHU2ODNDXHU1RjBGXG4gICAgY29uc3QgZGF0ZVRpbWVQYXR0ZXJuID0gL15cXHMqXFxkezR9LVxcZHsyfS1cXGR7Mn0oVHxcXHMpXFxkezJ9OlxcZHsyfXxcXGR7NH0tXFxkezJ9LVxcZHsyfVxccytcXGR7Mn06XFxkezJ9LztcbiAgICBjb25zdCBkYXRlT25seVBhdHRlcm4gPSAvXlxccypcXGR7NH0tXFxkezJ9LVxcZHsyfVxccyokLztcbiAgICBcbiAgICByZXR1cm4gZGF0ZUZpZWxkUGF0dGVybi50ZXN0KHF1ZXN0aW9uKSAmJiBcbiAgICAgICAgICAgKGRhdGVUaW1lUGF0dGVybi50ZXN0KGFuc3dlcikgfHwgZGF0ZU9ubHlQYXR0ZXJuLnRlc3QoYW5zd2VyKSk7XG4gIH1cblxuICAvKipcbiAgICogXHUyNzA1IFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NEUzQSBFeGNhbGlkcmF3IFx1OUFEOFx1NEVBRVxuICAgKiBcdTYzOTJcdTk2NjQ6ID09c3dpdGNoIHRvIGV4Y2FsaWRyYXcgdmlldy4uLj09IFx1OEZEOVx1N0M3Qlx1NzI3OVx1NUI5QVx1OUFEOFx1NEVBRVxuICAgKi9cbiAgcHJpdmF0ZSBpc0V4Y2FsaWRyYXdIaWdobGlnaHQobWF0Y2hUZXh0OiBzdHJpbmcsIGxpbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1OUFEOFx1NEVBRVx1NTE4NVx1NUJCOVx1NTMwNVx1NTQyQiBleGNhbGlkcmF3IFx1NzZGOFx1NTE3M1x1NTE3M1x1OTUyRVx1OEJDRFxuICAgIGNvbnN0IGV4Y2FsaWRyYXdLZXl3b3JkcyA9IC9leGNhbGlkcmF3fGRyYXdpbmd8c2tldGNoL2k7XG4gICAgcmV0dXJuIGV4Y2FsaWRyYXdLZXl3b3Jkcy50ZXN0KG1hdGNoVGV4dCkgfHwgZXhjYWxpZHJhd0tleXdvcmRzLnRlc3QobGluZSk7XG4gIH1cblxuICAvKipcbiAgICogXHUyNzA1IFx1NjNEMFx1NTNENiBRQSBcdTUzNjFcdTcyNDcgKFx1NjgzQ1x1NUYwRjogUXVlc3Rpb24gOjogQW5zd2VyKVxuICAgKiBcdTY1QjBcdTU4OUU6IFx1OEZDN1x1NkVFNFx1NEVGQlx1NTJBMVx1NUI4Q1x1NjIxMFx1NjgwN1x1OEJCMFx1NTQ4Q1x1NjVFNVx1NjcxRlx1NjVGNlx1OTVGNFx1NUI1N1x1NkJCNVxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0UUFDYXJkcyhmaWxlOiBURmlsZSwgY29udGVudDogc3RyaW5nKTogQ29udGVudFVuaXRbXSB7XG4gICAgY29uc3QgdW5pdHM6IENvbnRlbnRVbml0W10gPSBbXTtcbiAgICBjb25zdCBxYVJlZ2V4ID0gL14oLis/KVxccyo6OlxccyooLis/KSQvZ207XG4gICAgbGV0IG1hdGNoO1xuXG4gICAgd2hpbGUgKChtYXRjaCA9IHFhUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IGZ1bGxNYXRjaCA9IG1hdGNoWzBdO1xuICAgICAgY29uc3QgcXVlc3Rpb24gPSBtYXRjaFsxXS50cmltKCk7XG4gICAgICBjb25zdCBhbnN3ZXIgPSBtYXRjaFsyXS50cmltKCk7XG4gICAgICBcbiAgICAgIC8vIFx1MjcwNSBcdThERjNcdThGQzdcdTRFRkJcdTUyQTFcdTVCOENcdTYyMTBcdTY4MDdcdThCQjBcbiAgICAgIGlmICh0aGlzLmlzVGFza0NvbXBsZXRpb24oZnVsbE1hdGNoKSkge1xuICAgICAgICBjb25zb2xlLmxvZygnW2V4dHJhY3RRQUNhcmRzXSBcdThERjNcdThGQzdcdTRFRkJcdTUyQTFcdTY4MDdcdThCQjA6JywgZnVsbE1hdGNoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1MjcwNSBcdThERjNcdThGQzdcdTY1RTVcdTY3MUZcdTY1RjZcdTk1RjRcdTVCNTdcdTZCQjVcbiAgICAgIGlmICh0aGlzLmlzRGF0ZVRpbWVGaWVsZChxdWVzdGlvbiwgYW5zd2VyKSkge1xuICAgICAgICBjb25zb2xlLmxvZygnW2V4dHJhY3RRQUNhcmRzXSBcdThERjNcdThGQzdcdTY1RTVcdTY3MUZcdTY1RjZcdTk1RjRcdTVCNTdcdTZCQjU6JywgZnVsbE1hdGNoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5jYWxjdWxhdGVQb3NpdGlvbihjb250ZW50LCBtYXRjaC5pbmRleCk7XG5cbiAgICAgIGNvbnN0IHVuaXQ6IENvbnRlbnRVbml0ID0ge1xuICAgICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICAgIHR5cGU6ICdRQScsXG4gICAgICAgIGNvbnRlbnQ6IHF1ZXN0aW9uLFxuICAgICAgICBhbnN3ZXI6IGFuc3dlcixcbiAgICAgICAgZnVsbENvbnRleHQ6IGZ1bGxNYXRjaCxcbiAgICAgICAgc291cmNlOiB7XG4gICAgICAgICAgZmlsZTogZmlsZS5wYXRoLFxuICAgICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgICBzdGFydDogbWF0Y2guaW5kZXgsXG4gICAgICAgICAgICBlbmQ6IG1hdGNoLmluZGV4ICsgZnVsbE1hdGNoLmxlbmd0aCxcbiAgICAgICAgICAgIGxpbmU6IHBvc2l0aW9uLmxpbmVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGhlYWRpbmc6IHRoaXMuZmluZEhlYWRpbmcoY29udGVudCwgbWF0Y2guaW5kZXgpLFxuICAgICAgICAgIGFuY2hvckxpbms6IGBbWyR7ZmlsZS5iYXNlbmFtZX0jXiR7dGhpcy5nZW5lcmF0ZUJsb2NrSWQoKX1dXWBcbiAgICAgICAgfSxcbiAgICAgICAgZXh0cmFjdFJ1bGU6IHtcbiAgICAgICAgICBydWxlSWQ6ICdRQScsXG4gICAgICAgICAgcnVsZU5hbWU6ICdRQSBDYXJkJyxcbiAgICAgICAgICBleHRyYWN0ZWRCeTogJ2F1dG8nXG4gICAgICAgIH0sXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgICB0YWdzOiB0aGlzLmV4dHJhY3RUYWdzKGNvbnRlbnQsIG1hdGNoLmluZGV4KVxuICAgICAgICB9LFxuICAgICAgICBmbGFzaGNhcmRJZHM6IFtdXG4gICAgICB9O1xuXG4gICAgICB1bml0cy5wdXNoKHVuaXQpO1xuICAgIH1cblxuICAgIHJldHVybiB1bml0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTI3MDUgXHU2M0QwXHU1M0Q2XHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU1MzYxIChcdTY4M0NcdTVGMEY6ID09aGlnaGxpZ2h0PT0pXG4gICAqIFx1NjVCMFx1NTg5RTogXHU4RkM3XHU2RUU0IEV4Y2FsaWRyYXcgXHU5QUQ4XHU0RUFFXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RDbG96ZUNhcmRzKGZpbGU6IFRGaWxlLCBjb250ZW50OiBzdHJpbmcpOiBDb250ZW50VW5pdFtdIHtcbiAgICBjb25zdCB1bml0czogQ29udGVudFVuaXRbXSA9IFtdO1xuICAgIGNvbnN0IGhpZ2hsaWdodFJlZ2V4ID0gLz09KC4rPyk9PS9nO1xuICAgIGxldCBtYXRjaDtcblxuICAgIHdoaWxlICgobWF0Y2ggPSBoaWdobGlnaHRSZWdleC5leGVjKGNvbnRlbnQpKSAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgZXh0cmFjdGVkVGV4dCA9IG1hdGNoWzFdO1xuICAgICAgY29uc3QgZnVsbE1hdGNoID0gbWF0Y2hbMF07XG4gICAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuY2FsY3VsYXRlUG9zaXRpb24oY29udGVudCwgbWF0Y2guaW5kZXgpO1xuICAgICAgXG4gICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTg4NENcdTUxODVcdTVCQjlcbiAgICAgIGNvbnN0IGxpbmVTdGFydCA9IGNvbnRlbnQubGFzdEluZGV4T2YoJ1xcbicsIG1hdGNoLmluZGV4KSArIDE7XG4gICAgICBjb25zdCBsaW5lRW5kID0gY29udGVudC5pbmRleE9mKCdcXG4nLCBtYXRjaC5pbmRleCk7XG4gICAgICBjb25zdCBjdXJyZW50TGluZSA9IGNvbnRlbnQuc3Vic3RyaW5nKGxpbmVTdGFydCwgbGluZUVuZCA9PT0gLTEgPyBjb250ZW50Lmxlbmd0aCA6IGxpbmVFbmQpO1xuICAgICAgXG4gICAgICAvLyBcdTI3MDUgXHU4REYzXHU4RkM3IEV4Y2FsaWRyYXcgXHU5QUQ4XHU0RUFFXG4gICAgICBpZiAodGhpcy5pc0V4Y2FsaWRyYXdIaWdobGlnaHQoZXh0cmFjdGVkVGV4dCwgY3VycmVudExpbmUpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbZXh0cmFjdENsb3plQ2FyZHNdIFx1OERGM1x1OEZDNyBFeGNhbGlkcmF3IFx1OUFEOFx1NEVBRTonLCBleHRyYWN0ZWRUZXh0KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGZ1bGxTZW50ZW5jZSA9IHRoaXMuZXh0cmFjdEZ1bGxTZW50ZW5jZShjb250ZW50LCBtYXRjaC5pbmRleCwgZnVsbE1hdGNoLmxlbmd0aCk7XG5cbiAgICAgIGNvbnN0IHVuaXQ6IENvbnRlbnRVbml0ID0ge1xuICAgICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICAgIHR5cGU6ICdjbG96ZScsXG4gICAgICAgIGNvbnRlbnQ6IGV4dHJhY3RlZFRleHQudHJpbSgpLFxuICAgICAgICBmdWxsQ29udGV4dDogZnVsbFNlbnRlbmNlLFxuICAgICAgICBzb3VyY2U6IHtcbiAgICAgICAgICBmaWxlOiBmaWxlLnBhdGgsXG4gICAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICAgIHN0YXJ0OiBtYXRjaC5pbmRleCxcbiAgICAgICAgICAgIGVuZDogbWF0Y2guaW5kZXggKyBmdWxsTWF0Y2gubGVuZ3RoLFxuICAgICAgICAgICAgbGluZTogcG9zaXRpb24ubGluZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgaGVhZGluZzogdGhpcy5maW5kSGVhZGluZyhjb250ZW50LCBtYXRjaC5pbmRleCksXG4gICAgICAgICAgYW5jaG9yTGluazogYFtbJHtmaWxlLmJhc2VuYW1lfSNeJHt0aGlzLmdlbmVyYXRlQmxvY2tJZCgpfV1dYFxuICAgICAgICB9LFxuICAgICAgICBleHRyYWN0UnVsZToge1xuICAgICAgICAgIHJ1bGVJZDogJ2Nsb3plJyxcbiAgICAgICAgICBydWxlTmFtZTogJ0Nsb3plIERlbGV0aW9uJyxcbiAgICAgICAgICBleHRyYWN0ZWRCeTogJ2F1dG8nXG4gICAgICAgIH0sXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgICB0YWdzOiB0aGlzLmV4dHJhY3RUYWdzKGNvbnRlbnQsIG1hdGNoLmluZGV4KVxuICAgICAgICB9LFxuICAgICAgICBmbGFzaGNhcmRJZHM6IFtdXG4gICAgICB9O1xuXG4gICAgICB1bml0cy5wdXNoKHVuaXQpO1xuICAgIH1cblxuICAgIHJldHVybiB1bml0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYzRDBcdTUzRDZcdTUzMDVcdTU0MkJcdTlBRDhcdTRFQUVcdTc2ODRcdTVCOENcdTY1NzRcdTUzRTVcdTVCNTBcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdEZ1bGxTZW50ZW5jZShjb250ZW50OiBzdHJpbmcsIGhpZ2hsaWdodFN0YXJ0OiBudW1iZXIsIGhpZ2hsaWdodExlbmd0aDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCBzZW50ZW5jZUVuZHMgPSAvWy4hP1x1MzAwMlx1RkYwMT9cXG5dLztcbiAgICBcbiAgICBsZXQgc3RhcnQgPSBoaWdobGlnaHRTdGFydDtcbiAgICB3aGlsZSAoc3RhcnQgPiAwKSB7XG4gICAgICBjb25zdCBjaGFyID0gY29udGVudFtzdGFydCAtIDFdO1xuICAgICAgaWYgKHNlbnRlbmNlRW5kcy50ZXN0KGNoYXIpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhcnQtLTtcbiAgICB9XG4gICAgXG4gICAgbGV0IGVuZCA9IGhpZ2hsaWdodFN0YXJ0ICsgaGlnaGxpZ2h0TGVuZ3RoO1xuICAgIHdoaWxlIChlbmQgPCBjb250ZW50Lmxlbmd0aCkge1xuICAgICAgY29uc3QgY2hhciA9IGNvbnRlbnRbZW5kXTtcbiAgICAgIGlmIChzZW50ZW5jZUVuZHMudGVzdChjaGFyKSkge1xuICAgICAgICBlbmQrKztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBlbmQrKztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGNvbnRlbnQuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpLnRyaW0oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdThCQTFcdTdCOTdcdTY1ODdcdTY3MkNcdTRGNERcdTdGNkVcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlUG9zaXRpb24oY29udGVudDogc3RyaW5nLCBvZmZzZXQ6IG51bWJlcik6IHsgbGluZTogbnVtYmVyOyBjb2x1bW46IG51bWJlciB9IHtcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3Vic3RyaW5nKDAsIG9mZnNldCkuc3BsaXQoJ1xcbicpO1xuICAgIHJldHVybiB7XG4gICAgICBsaW5lOiBsaW5lcy5sZW5ndGggLSAxLFxuICAgICAgY29sdW1uOiBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXS5sZW5ndGhcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjdFNVx1NjI3RVx1NjI0MFx1NTcyOFx1NjgwN1x1OTg5OFxuICAgKi9cbiAgcHJpdmF0ZSBmaW5kSGVhZGluZyhjb250ZW50OiBzdHJpbmcsIHBvc2l0aW9uOiBudW1iZXIpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGJlZm9yZUNvbnRlbnQgPSBjb250ZW50LnN1YnN0cmluZygwLCBwb3NpdGlvbik7XG4gICAgY29uc3QgaGVhZGluZ3MgPSBiZWZvcmVDb250ZW50Lm1hdGNoKC9eI3sxLDZ9IC4rJC9nbSk7XG4gICAgcmV0dXJuIGhlYWRpbmdzID8gaGVhZGluZ3NbaGVhZGluZ3MubGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogXHU2M0QwXHU1M0Q2XHU5NjQ0XHU4RkQxXHU3Njg0XHU2ODA3XHU3QjdFXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RUYWdzKGNvbnRlbnQ6IHN0cmluZywgcG9zaXRpb246IG51bWJlcik6IHN0cmluZ1tdIHtcbiAgICBjb25zdCB0YWdzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgXG4gICAgLy8gMS4gXHU2M0QwXHU1M0Q2IFlBTUwgZnJvbnRtYXR0ZXIgXHU0RTJEXHU3Njg0IHRhZ3NcbiAgICBjb25zdCB5YW1sTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XG4gICAgaWYgKHlhbWxNYXRjaCkge1xuICAgICAgY29uc3QgeWFtbENvbnRlbnQgPSB5YW1sTWF0Y2hbMV07XG4gICAgICBjb25zdCB0YWdzTWF0Y2ggPSB5YW1sQ29udGVudC5tYXRjaCgvXnRhZ3M6XFxzKiguKykkL20pO1xuICAgICAgaWYgKHRhZ3NNYXRjaCkge1xuICAgICAgICBjb25zdCB0YWdDb250ZW50ID0gdGFnc01hdGNoWzFdLnRyaW0oKTtcbiAgICAgICAgaWYgKHRhZ0NvbnRlbnQuc3RhcnRzV2l0aCgnWycpKSB7XG4gICAgICAgICAgY29uc3QgYXJyYXlUYWdzID0gdGFnQ29udGVudC5tYXRjaCgvW1xcdy8tXSsvZyk7XG4gICAgICAgICAgYXJyYXlUYWdzPy5mb3JFYWNoKHRhZyA9PiB0YWdzLmFkZChgIyR7dGFnfWApKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0YWdDb250ZW50LnNwbGl0KCcsJykuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2xlYW5lZCA9IHRhZy50cmltKCk7XG4gICAgICAgICAgICBpZiAoY2xlYW5lZCkgdGFncy5hZGQoYCMke2NsZWFuZWR9YCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gMi4gXHU2M0QwXHU1M0Q2XHU1M0U1XHU1QjUwXHU2NzJCXHU1QzNFXHU3Njg0IGlubGluZSB0YWdzXG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnN1YnN0cmluZygwLCBwb3NpdGlvbikuc3BsaXQoJ1xcbicpO1xuICAgIGNvbnN0IGN1cnJlbnRMaW5lID0gbGluZXMubGVuZ3RoIC0gMTtcbiAgICBjb25zdCBsaW5lQ29udGVudCA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpW2N1cnJlbnRMaW5lXSB8fCAnJztcbiAgICBcbiAgICBjb25zdCBpbmxpbmVUYWdSZWdleCA9IC8jW1xcdy8tXSsvZztcbiAgICBjb25zdCBpbmxpbmVUYWdzID0gbGluZUNvbnRlbnQubWF0Y2goaW5saW5lVGFnUmVnZXgpO1xuICAgIGlubGluZVRhZ3M/LmZvckVhY2godGFnID0+IHRhZ3MuYWRkKHRhZykpO1xuICAgIFxuICAgIHJldHVybiBBcnJheS5mcm9tKHRhZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NzUxRlx1NjIxMFx1NTUyRlx1NEUwMCBJRFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gIH1cblxuICAvKipcbiAgICogXHU3NTFGXHU2MjEwIEJsb2NrIElEXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlQmxvY2tJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgZXh0cmFjdC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDYpfWA7XG4gIH1cbn0iLCAiaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW5ub3RhdGlvbiB7XG4gIGlkOiBzdHJpbmc7XG4gIHRhcmdldFR5cGU6ICdjb250ZW50JyB8ICdmaWxlJztcbiAgdGFyZ2V0SWQ6IHN0cmluZztcbiAgY29udGVudDogc3RyaW5nO1xuICBiYWRnZT86IHtcbiAgICB0ZXh0OiBzdHJpbmc7XG4gICAgY29sb3I6IHN0cmluZztcbiAgICBpY29uPzogc3RyaW5nO1xuICB9O1xuICBtZXRhZGF0YToge1xuICAgIGNyZWF0ZWRBdDogbnVtYmVyO1xuICAgIHVwZGF0ZWRBdDogbnVtYmVyO1xuICAgIGlzUGlubmVkPzogYm9vbGVhbjtcbiAgfTtcbn1cblxuZXhwb3J0IGNsYXNzIEFubm90YXRpb25NYW5hZ2VyIHtcbiAgcHJpdmF0ZSBhbm5vdGF0aW9uczogTWFwPHN0cmluZywgQW5ub3RhdGlvbj4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgZGF0YUZvbGRlcjogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgYXBwOiBBcHAsXG4gICAgcHJpdmF0ZSBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luXG4gICkge1xuICAgIHRoaXMuZGF0YUZvbGRlciA9IGAke3RoaXMuYXBwLnZhdWx0LmNvbmZpZ0Rpcn0vcGx1Z2lucy9sZWFybmluZy1zeXN0ZW0vZGF0YWA7XG4gIH1cblxuICBhc3luYyBpbml0aWFsaXplKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZEFubm90YXRpb25zKCk7XG4gIH1cblxuICAvKipcbiAgICogXHU1MkEwXHU4RjdEXHU2MjQwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGxvYWRBbm5vdGF0aW9ucygpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGF0aCA9IGAke3RoaXMuZGF0YUZvbGRlcn0vYW5ub3RhdGlvbnMuanNvbmA7XG4gICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5hcHAudmF1bHQuYWRhcHRlcjtcblxuICAgICAgaWYgKGF3YWl0IGFkYXB0ZXIuZXhpc3RzKHBhdGgpKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhZGFwdGVyLnJlYWQocGF0aCk7XG4gICAgICAgIGNvbnN0IGFubm90YXRpb25zOiBBbm5vdGF0aW9uW10gPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBhbm5vdGF0aW9uIG9mIGFubm90YXRpb25zKSB7XG4gICAgICAgICAgdGhpcy5hbm5vdGF0aW9ucy5zZXQoYW5ub3RhdGlvbi5pZCwgYW5ub3RhdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBhbm5vdGF0aW9uczonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NkRGQlx1NTJBMFx1NTE4NVx1NUJCOVx1NjI3OVx1NkNFOFxuICAgKi9cbiAgYXN5bmMgYWRkQ29udGVudEFubm90YXRpb24oXG4gICAgY29udGVudFVuaXRJZDogc3RyaW5nLFxuICAgIGNvbnRlbnQ6IHN0cmluZyxcbiAgICBiYWRnZT86IEFubm90YXRpb25bJ2JhZGdlJ11cbiAgKTogUHJvbWlzZTxBbm5vdGF0aW9uPiB7XG4gICAgY29uc3QgYW5ub3RhdGlvbjogQW5ub3RhdGlvbiA9IHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgIHRhcmdldFR5cGU6ICdjb250ZW50JyxcbiAgICAgIHRhcmdldElkOiBjb250ZW50VW5pdElkLFxuICAgICAgY29udGVudCxcbiAgICAgIGJhZGdlLFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KClcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5hbm5vdGF0aW9ucy5zZXQoYW5ub3RhdGlvbi5pZCwgYW5ub3RhdGlvbik7XG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0KCk7XG5cbiAgICAvLyBcdTY2RjRcdTY1QjAgQ29udGVudFVuaXQgXHU1MTczXHU4MDU0XG4gICAgY29uc3QgY29udGVudFVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjb250ZW50VW5pdElkKTtcbiAgICBpZiAoY29udGVudFVuaXQpIHtcbiAgICAgIGNvbnRlbnRVbml0LmFubm90YXRpb25JZCA9IGFubm90YXRpb24uaWQ7XG4gICAgICBjb250ZW50VW5pdC5tZXRhZGF0YS51cGRhdGVkQXQgPSBEYXRlLm5vdygpO1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuc2F2ZUNvbnRlbnRVbml0KGNvbnRlbnRVbml0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gYW5ub3RhdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTZERkJcdTUyQTBcdTY1ODdcdTRFRjZcdTYyNzlcdTZDRThcbiAgICovXG4gIGFzeW5jIGFkZEZpbGVBbm5vdGF0aW9uKFxuICAgIGZpbGVQYXRoOiBzdHJpbmcsXG4gICAgY29udGVudDogc3RyaW5nXG4gICk6IFByb21pc2U8QW5ub3RhdGlvbj4ge1xuICAgIGNvbnN0IGFubm90YXRpb246IEFubm90YXRpb24gPSB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICB0YXJnZXRUeXBlOiAnZmlsZScsXG4gICAgICB0YXJnZXRJZDogZmlsZVBhdGgsXG4gICAgICBjb250ZW50LFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KClcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5hbm5vdGF0aW9ucy5zZXQoYW5ub3RhdGlvbi5pZCwgYW5ub3RhdGlvbik7XG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0KCk7XG5cbiAgICByZXR1cm4gYW5ub3RhdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTYyNzlcdTZDRThcbiAgICovXG4gIGdldEFubm90YXRpb24oaWQ6IHN0cmluZyk6IEFubm90YXRpb24gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmFubm90YXRpb25zLmdldChpZCk7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU1MTg1XHU1QkI5XHU3Njg0XHU2Mjc5XHU2Q0U4XG4gICAqL1xuICBnZXRDb250ZW50QW5ub3RhdGlvbihjb250ZW50VW5pdElkOiBzdHJpbmcpOiBBbm5vdGF0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBjb250ZW50VW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNvbnRlbnRVbml0SWQpO1xuICAgIGlmICghY29udGVudFVuaXQ/LmFubm90YXRpb25JZCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBcbiAgICByZXR1cm4gdGhpcy5hbm5vdGF0aW9ucy5nZXQoY29udGVudFVuaXQuYW5ub3RhdGlvbklkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTY1ODdcdTRFRjZcdTc2ODRcdTYyNDBcdTY3MDlcdTYyNzlcdTZDRThcbiAgICovXG4gIGdldEZpbGVBbm5vdGF0aW9ucyhmaWxlUGF0aDogc3RyaW5nKTogQW5ub3RhdGlvbltdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmFubm90YXRpb25zLnZhbHVlcygpKS5maWx0ZXIoXG4gICAgICBhbm4gPT4gYW5uLnRhcmdldFR5cGUgPT09ICdmaWxlJyAmJiBhbm4udGFyZ2V0SWQgPT09IGZpbGVQYXRoXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTY2RjRcdTY1QjBcdTYyNzlcdTZDRThcbiAgICovXG4gIGFzeW5jIHVwZGF0ZUFubm90YXRpb24oXG4gICAgaWQ6IHN0cmluZyxcbiAgICB1cGRhdGVzOiBQYXJ0aWFsPEFubm90YXRpb24+XG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLmFubm90YXRpb25zLmdldChpZCk7XG4gICAgaWYgKCFhbm5vdGF0aW9uKSByZXR1cm47XG5cbiAgICBPYmplY3QuYXNzaWduKGFubm90YXRpb24sIHVwZGF0ZXMsIHtcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIC4uLmFubm90YXRpb24ubWV0YWRhdGEsXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0KCk7XG4gIH1cblxuICAvKipcbiAgICogXHU1MjIwXHU5NjY0XHU2Mjc5XHU2Q0U4XG4gICAqL1xuICBhc3luYyBkZWxldGVBbm5vdGF0aW9uKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5hbm5vdGF0aW9ucy5nZXQoaWQpO1xuICAgIGlmICghYW5ub3RhdGlvbikgcmV0dXJuO1xuXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU2NjJGXHU1MTg1XHU1QkI5XHU2Mjc5XHU2Q0U4XHVGRjBDXHU4OUUzXHU5NjY0XHU1MTczXHU4MDU0XG4gICAgaWYgKGFubm90YXRpb24udGFyZ2V0VHlwZSA9PT0gJ2NvbnRlbnQnKSB7XG4gICAgICBjb25zdCBjb250ZW50VW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGFubm90YXRpb24udGFyZ2V0SWQpO1xuICAgICAgaWYgKGNvbnRlbnRVbml0KSB7XG4gICAgICAgIGNvbnRlbnRVbml0LmFubm90YXRpb25JZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuc2F2ZUNvbnRlbnRVbml0KGNvbnRlbnRVbml0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmFubm90YXRpb25zLmRlbGV0ZShpZCk7XG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0KCk7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU2MjQwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAqL1xuICBnZXRBbGxBbm5vdGF0aW9ucygpOiBBbm5vdGF0aW9uW10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYW5ub3RhdGlvbnMudmFsdWVzKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjMwMVx1NEU0NVx1NTMxNlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwZXJzaXN0KCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXRoID0gYCR7dGhpcy5kYXRhRm9sZGVyfS9hbm5vdGF0aW9ucy5qc29uYDtcbiAgICAgIGNvbnN0IGFubm90YXRpb25zID0gQXJyYXkuZnJvbSh0aGlzLmFubm90YXRpb25zLnZhbHVlcygpKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnN0cmluZ2lmeShhbm5vdGF0aW9ucywgbnVsbCwgMik7XG4gICAgICBcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUocGF0aCwgZGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBlcnNpc3RpbmcgYW5ub3RhdGlvbnM6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTc1MUZcdTYyMTBcdTU1MkZcdTRFMDAgSURcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgYW5uLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcbiAgfVxufSIsICJpbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBEYXRhTWFuYWdlciwgQ29udGVudFVuaXQgfSBmcm9tICcuL0RhdGFNYW5hZ2VyJzsgXG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcblxuZXhwb3J0IGludGVyZmFjZSBGbGFzaGNhcmQge1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiAncWEnIHwgJ2Nsb3plJztcbiAgc291cmNlQ29udGVudElkOiBzdHJpbmc7XG4gIHNvdXJjZUZpbGU6IHN0cmluZztcbiAgYW5jaG9yTGluazogc3RyaW5nO1xuICBcbiAgLy8gXHU1MzYxXHU3MjQ3XHU1MTg1XHU1QkI5XG4gIGZyb250OiBzdHJpbmc7XG4gIGJhY2s6IHN0cmluZyB8IHN0cmluZ1tdO1xuICBcbiAgLy8gXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU0RTEzXHU3NTI4XG4gIGNsb3plPzoge1xuICAgIG9yaWdpbmFsOiBzdHJpbmc7XG4gICAgZGVsZXRpb25zOiB7XG4gICAgICBpbmRleDogbnVtYmVyO1xuICAgICAgYW5zd2VyOiBzdHJpbmc7XG4gICAgICBhbHRlcm5hdGl2ZXM/OiBzdHJpbmdbXTtcbiAgICB9W107XG4gIH07XG4gIFxuICAvLyBcdTUyMDZcdTdFQzRcbiAgZGVjazogc3RyaW5nO1xuICB0YWdzOiBzdHJpbmdbXTtcbiAgXG4gIC8vIFx1NTkwRFx1NEU2MFx1NjU3MFx1NjM2RVxuICBzY2hlZHVsaW5nOiB7XG4gICAgaW50ZXJ2YWw6IG51bWJlcjtcbiAgICBlYXNlOiBudW1iZXI7XG4gICAgZHVlOiBudW1iZXI7XG4gICAgbGFwc2VzOiBudW1iZXI7XG4gICAgcmVwczogbnVtYmVyO1xuICAgIHN0YXRlOiAnbmV3JyB8ICdsZWFybmluZycgfCAncmV2aWV3JyB8ICdyZWxlYXJuaW5nJztcbiAgfTtcbiAgXG4gIC8vIFx1N0VERlx1OEJBMVxuICBzdGF0czoge1xuICAgIHRvdGFsUmV2aWV3czogbnVtYmVyO1xuICAgIGNvcnJlY3RDb3VudDogbnVtYmVyO1xuICAgIGF2ZXJhZ2VUaW1lOiBudW1iZXI7XG4gICAgbGFzdFJldmlldz86IG51bWJlcjtcbiAgICBkaWZmaWN1bHR5OiBudW1iZXI7XG4gIH07XG4gIFxuICBtZXRhZGF0YToge1xuICAgIGNyZWF0ZWRBdDogbnVtYmVyO1xuICAgIHVwZGF0ZWRBdDogbnVtYmVyO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJldmlld0xvZyB7XG4gIGlkOiBzdHJpbmc7XG4gIGZsYXNoY2FyZElkOiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xuICByZXNwb25zZToge1xuICAgIHVzZXJBbnN3ZXI/OiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgICB0aW1lU3BlbnQ6IG51bWJlcjtcbiAgICBlYXNlOiAnYWdhaW4nIHwgJ2hhcmQnIHwgJ2dvb2QnIHwgJ2Vhc3knO1xuICB9O1xuICBncmFkaW5nPzoge1xuICAgIGNvcnJlY3RuZXNzOiAnY29ycmVjdCcgfCAncGFydGlhbCcgfCAnd3JvbmcnO1xuICAgIHNpbWlsYXJpdHk/OiBudW1iZXI7XG4gIH07XG4gIHNjaGVkdWxpbmdDaGFuZ2U6IHtcbiAgICBvbGRJbnRlcnZhbDogbnVtYmVyO1xuICAgIG5ld0ludGVydmFsOiBudW1iZXI7XG4gICAgb2xkRWFzZTogbnVtYmVyO1xuICAgIG5ld0Vhc2U6IG51bWJlcjtcbiAgfTtcbn1cblxuZXhwb3J0IGNsYXNzIEZsYXNoY2FyZE1hbmFnZXIge1xuICBwcml2YXRlIGZsYXNoY2FyZHM6IE1hcDxzdHJpbmcsIEZsYXNoY2FyZD4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgcmV2aWV3TG9nczogUmV2aWV3TG9nW10gPSBbXTtcbiAgcHJpdmF0ZSBkYXRhRm9sZGVyOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBhcHA6IEFwcCxcbiAgICBwcml2YXRlIGRhdGFNYW5hZ2VyOiBEYXRhTWFuYWdlcixcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW5cbiAgKSB7XG4gICAgdGhpcy5kYXRhRm9sZGVyID0gYCR7dGhpcy5hcHAudmF1bHQuY29uZmlnRGlyfS9wbHVnaW5zL2xlYXJuaW5nLXN5c3RlbS9kYXRhYDtcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUoKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkRmxhc2hjYXJkcygpO1xuICAgIGF3YWl0IHRoaXMubG9hZFJldmlld0xvZ3MoKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFx1N0VERlx1NEUwMFx1NTIxQlx1NUVGQVx1NTE2NVx1NTNFMyA9PT09PT09PT09PT09PT09PT09PVxuICBcbiAgLyoqXG4gICAqIFx1RDgzQ1x1REQ5NSBcdTdFREZcdTRFMDBcdTUxNjVcdTUzRTM6IFx1NEVDRSBDb250ZW50VW5pdCBcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcbiAgICogXHU5MDAyXHU5MTREXHU2MjQwXHU2NzA5XHU1NzNBXHU2NjZGOiBcdTUzRjNcdTk1MkVcdTYzRDBcdTUzRDZcdTMwMDFTY2FuXHUzMDAxXHU2Mjc5XHU5MUNGXHU1MjFCXHU1RUZBXHUzMDAxXHU1RkVCXHU5MDFGXHU3NTFGXHU2MjEwXG4gICAqL1xuICBhc3luYyBjcmVhdGVGbGFzaGNhcmRGcm9tVW5pdChcbiAgICB1bml0OiBDb250ZW50VW5pdCxcbiAgICBvcHRpb25zPzoge1xuICAgICAgY3VzdG9tUXVlc3Rpb24/OiBzdHJpbmc7XG4gICAgICBjdXN0b21BbnN3ZXI/OiBzdHJpbmc7XG4gICAgICBjYXJkVHlwZT86ICdxYScgfCAnY2xvemUnO1xuICAgIH1cbiAgKTogUHJvbWlzZTxGbGFzaGNhcmQ+IHtcbiAgICBcbiAgICBjb25zdCBjYXJkVHlwZSA9IG9wdGlvbnM/LmNhcmRUeXBlIHx8ICh1bml0LnR5cGUgPT09ICdRQScgPyAncWEnIDogJ2Nsb3plJyk7XG4gIFxuICAgIGxldCBmbGFzaGNhcmQ6IEZsYXNoY2FyZDtcbiAgXG4gICAgaWYgKGNhcmRUeXBlID09PSAncWEnIHx8IHVuaXQudHlwZSA9PT0gJ1FBJykge1xuICAgICAgY29uc3QgcXVlc3Rpb24gPSBvcHRpb25zPy5jdXN0b21RdWVzdGlvbiB8fCB1bml0LmNvbnRlbnQ7XG4gICAgICBjb25zdCBhbnN3ZXIgPSBvcHRpb25zPy5jdXN0b21BbnN3ZXIgfHwgdW5pdC5hbnN3ZXIgfHwgdW5pdC5jb250ZW50O1xuICAgICAgXG4gICAgICBmbGFzaGNhcmQgPSBhd2FpdCB0aGlzLmNyZWF0ZVFBQ2FyZCh1bml0LmlkLCBxdWVzdGlvbiwgYW5zd2VyKTtcbiAgICAgIFxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0ZXh0ID0gdW5pdC5mdWxsQ29udGV4dCB8fCB1bml0LmNvbnRlbnQ7XG4gICAgICBjb25zdCBhbnN3ZXIgPSBvcHRpb25zPy5jdXN0b21BbnN3ZXIgfHwgdW5pdC5jb250ZW50O1xuICAgICAgXG4gICAgICBjb25zdCBkZWxldGlvbnMgPSBbe1xuICAgICAgICBpbmRleDogdGV4dC5pbmRleE9mKGFuc3dlciksXG4gICAgICAgIGFuc3dlcjogYW5zd2VyXG4gICAgICB9XTtcbiAgICAgIFxuXG4gICAgICBmbGFzaGNhcmQgPSBhd2FpdCB0aGlzLmNyZWF0ZUNsb3plQ2FyZCh1bml0LmlkLCB0ZXh0LCBkZWxldGlvbnMpO1xuICAgIH1cbiAgXG4gICAgXG4gIFxuICAgIHJldHVybiBmbGFzaGNhcmQ7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTY4MzhcdTVGQzNcdTUyMUJcdTVFRkFcdTY1QjlcdTZDRDUgPT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogXHU1MjFCXHU1RUZBXHU5NUVFXHU3QjU0XHU1MzYxXHVGRjA4XHU1NTJGXHU0RTAwXHU3MjQ4XHU2NzJDXHVGRjBDXHU1NDA4XHU1RTc2XHU0RTg2XHU2MjQwXHU2NzA5XHU1MjlGXHU4MEZEXHVGRjA5XG4gICAqL1xuICBhc3luYyBjcmVhdGVRQUNhcmQoXG4gICAgY29udGVudFVuaXRJZDogc3RyaW5nLFxuICAgIHF1ZXN0aW9uOiBzdHJpbmcsXG4gICAgYW5zd2VyOiBzdHJpbmcsXG4gICAgZGVjaz86IHN0cmluZ1xuICApOiBQcm9taXNlPEZsYXNoY2FyZD4ge1xuICAgIGNvbnN0IGNvbnRlbnRVbml0ID0gdGhpcy5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjb250ZW50VW5pdElkKTtcbiAgICBpZiAoIWNvbnRlbnRVbml0KSB0aHJvdyBuZXcgRXJyb3IoJ0NvbnRlbnQgdW5pdCBub3QgZm91bmQnKTtcblxuICAgIGNvbnN0IGNhcmQ6IEZsYXNoY2FyZCA9IHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgIHR5cGU6ICdxYScsXG4gICAgICBzb3VyY2VDb250ZW50SWQ6IGNvbnRlbnRVbml0SWQsXG4gICAgICBzb3VyY2VGaWxlOiBjb250ZW50VW5pdC5zb3VyY2UuZmlsZSxcbiAgICAgIGFuY2hvckxpbms6IGNvbnRlbnRVbml0LnNvdXJjZS5hbmNob3JMaW5rLFxuICAgICAgZnJvbnQ6IHF1ZXN0aW9uLFxuICAgICAgYmFjazogYW5zd2VyLFxuICAgICAgZGVjazogZGVjayB8fCB0aGlzLmluZmVyRGVjayhjb250ZW50VW5pdC5zb3VyY2UuZmlsZSksXG4gICAgICB0YWdzOiBjb250ZW50VW5pdC5tZXRhZGF0YS50YWdzLFxuICAgICAgc2NoZWR1bGluZzogdGhpcy5pbml0aWFsaXplU2NoZWR1bGluZygpLFxuICAgICAgc3RhdHM6IHtcbiAgICAgICAgdG90YWxSZXZpZXdzOiAwLFxuICAgICAgICBjb3JyZWN0Q291bnQ6IDAsXG4gICAgICAgIGF2ZXJhZ2VUaW1lOiAwLFxuICAgICAgICBkaWZmaWN1bHR5OiAwLjVcbiAgICAgIH0sXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmZsYXNoY2FyZHMuc2V0KGNhcmQuaWQsIGNhcmQpO1xuICAgIFxuICAgIC8vIFx1NjZGNFx1NjVCMCBDb250ZW50VW5pdCBcdTUxNzNcdTgwNTRcbiAgICBjb250ZW50VW5pdC5mbGFzaGNhcmRJZHMucHVzaChjYXJkLmlkKTtcbiAgICBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLnNhdmVDb250ZW50VW5pdHMoW2NvbnRlbnRVbml0XSk7XG4gICAgXG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0Rmxhc2hjYXJkcygpO1xuICAgIHJldHVybiBjYXJkO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NTIxQlx1NUVGQVx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1NTM2MVx1RkYwOFx1NTUyRlx1NEUwMFx1NzI0OFx1NjcyQ1x1RkYwQ1x1NTQwOFx1NUU3Nlx1NEU4Nlx1NjI0MFx1NjcwOVx1NTI5Rlx1ODBGRFx1RkYwOVxuICAgKi9cbiAgYXN5bmMgY3JlYXRlQ2xvemVDYXJkKFxuICAgIGNvbnRlbnRVbml0SWQ6IHN0cmluZyxcbiAgICBvcmlnaW5hbDogc3RyaW5nLFxuICAgIGRlbGV0aW9uczogeyBpbmRleDogbnVtYmVyOyBhbnN3ZXI6IHN0cmluZzsgYWx0ZXJuYXRpdmVzPzogc3RyaW5nW10gfVtdXG4gICk6IFByb21pc2U8Rmxhc2hjYXJkPiB7XG4gICAgY29uc3QgY29udGVudFVuaXQgPSB0aGlzLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNvbnRlbnRVbml0SWQpO1xuICAgIGlmICghY29udGVudFVuaXQpIHRocm93IG5ldyBFcnJvcignQ29udGVudCB1bml0IG5vdCBmb3VuZCcpO1xuXG4gICAgY29uc3QgZnJvbnQgPSB0aGlzLmdlbmVyYXRlQ2xvemVUZXh0KG9yaWdpbmFsLCBkZWxldGlvbnMpO1xuICAgIGNvbnN0IGJhY2sgPSBkZWxldGlvbnMubWFwKGQgPT4gZC5hbnN3ZXIpO1xuXG4gICAgY29uc3QgY2FyZDogRmxhc2hjYXJkID0ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVJZCgpLFxuICAgICAgdHlwZTogJ2Nsb3plJyxcbiAgICAgIHNvdXJjZUNvbnRlbnRJZDogY29udGVudFVuaXRJZCxcbiAgICAgIHNvdXJjZUZpbGU6IGNvbnRlbnRVbml0LnNvdXJjZS5maWxlLFxuICAgICAgYW5jaG9yTGluazogY29udGVudFVuaXQuc291cmNlLmFuY2hvckxpbmssXG4gICAgICBmcm9udCxcbiAgICAgIGJhY2ssXG4gICAgICBjbG96ZToge1xuICAgICAgICBvcmlnaW5hbCxcbiAgICAgICAgZGVsZXRpb25zXG4gICAgICB9LFxuICAgICAgZGVjazogdGhpcy5pbmZlckRlY2soY29udGVudFVuaXQuc291cmNlLmZpbGUpLFxuICAgICAgdGFnczogY29udGVudFVuaXQubWV0YWRhdGEudGFncyxcbiAgICAgIHNjaGVkdWxpbmc6IHRoaXMuaW5pdGlhbGl6ZVNjaGVkdWxpbmcoKSxcbiAgICAgIHN0YXRzOiB7XG4gICAgICAgIHRvdGFsUmV2aWV3czogMCxcbiAgICAgICAgY29ycmVjdENvdW50OiAwLFxuICAgICAgICBhdmVyYWdlVGltZTogMCxcbiAgICAgICAgZGlmZmljdWx0eTogMC41XG4gICAgICB9LFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KClcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5mbGFzaGNhcmRzLnNldChjYXJkLmlkLCBjYXJkKTtcbiAgICBcbiAgICBjb250ZW50VW5pdC5mbGFzaGNhcmRJZHMucHVzaChjYXJkLmlkKTtcbiAgICBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLnNhdmVDb250ZW50VW5pdHMoW2NvbnRlbnRVbml0XSk7XG4gICAgXG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0Rmxhc2hjYXJkcygpO1xuICAgIHJldHVybiBjYXJkO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0gXHU2N0U1XHU4QkUyXHU2NUI5XHU2Q0Q1ID09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1OTVFQVx1NTM2MVxuICAgKi9cbiAgZ2V0Rmxhc2hjYXJkKGlkOiBzdHJpbmcpOiBGbGFzaGNhcmQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmZsYXNoY2FyZHMuZ2V0KGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTYyNDBcdTY3MDlcdTk1RUFcdTUzNjFcbiAgICovXG4gIGdldEFsbEZsYXNoY2FyZHMoKTogRmxhc2hjYXJkW10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZmxhc2hjYXJkcy52YWx1ZXMoKSk7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU0RUNBXHU2NUU1XHU1Rjg1XHU1OTBEXHU0RTYwXHU3Njg0XHU1MzYxXHU3MjQ3XG4gICAqL1xuICBnZXREdWVDYXJkcygpOiBGbGFzaGNhcmRbXSB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmZsYXNoY2FyZHMudmFsdWVzKCkpXG4gICAgICAuZmlsdGVyKGNhcmQgPT4gY2FyZC5zY2hlZHVsaW5nLmR1ZSA8PSBub3cpXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBjb25zdCBhUHJpb3JpdHkgPSB0aGlzLmdldENhcmRQcmlvcml0eShhKTtcbiAgICAgICAgY29uc3QgYlByaW9yaXR5ID0gdGhpcy5nZXRDYXJkUHJpb3JpdHkoYik7XG4gICAgICAgIHJldHVybiBiUHJpb3JpdHkgLSBhUHJpb3JpdHk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTY1QjBcdTUzNjFcdTcyNDdcbiAgICovXG4gIGdldE5ld0NhcmRzKCk6IEZsYXNoY2FyZFtdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmZsYXNoY2FyZHMudmFsdWVzKCkpXG4gICAgICAuZmlsdGVyKGNhcmQgPT4gY2FyZC5zY2hlZHVsaW5nLnN0YXRlID09PSAnbmV3Jyk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTY2RjRcdTY1QjBcdTU0OENcdTUyMjBcdTk2NjQgPT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogXHU2NkY0XHU2NUIwXHU1MzYxXHU3MjQ3XHVGRjA4XHU1OTBEXHU0RTYwXHU1NDBFXHVGRjA5XG4gICAqL1xuICBhc3luYyB1cGRhdGVDYXJkKGNhcmQ6IEZsYXNoY2FyZCkge1xuICAgIHRoaXMuZmxhc2hjYXJkcy5zZXQoY2FyZC5pZCwgY2FyZCk7XG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0Rmxhc2hjYXJkcygpO1xuICB9XG5cbi8qKlxuICogXHU1MjIwXHU5NjY0XHU1MzYxXHU3MjQ3XG4gKi9cbmFzeW5jIGRlbGV0ZUNhcmQoaWQ6IHN0cmluZykge1xuICBjb25zdCBjYXJkID0gdGhpcy5mbGFzaGNhcmRzLmdldChpZCk7XG4gIGlmICghY2FyZCkgcmV0dXJuO1xuXG4gIC8vIFx1RDgzRFx1REQyNyBcdTg5RTNcdTk2NjQgQ29udGVudFVuaXQgXHU1MTczXHU4MDU0XG4gIGNvbnN0IGNvbnRlbnRVbml0ID0gdGhpcy5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjYXJkLnNvdXJjZUNvbnRlbnRJZCk7XG4gIGlmIChjb250ZW50VW5pdCkge1xuICAgIGNvbnN0IGluZGV4ID0gY29udGVudFVuaXQuZmxhc2hjYXJkSWRzLmluZGV4T2YoaWQpO1xuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICBjb250ZW50VW5pdC5mbGFzaGNhcmRJZHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIGF3YWl0IHRoaXMuZGF0YU1hbmFnZXIuc2F2ZUNvbnRlbnRVbml0cyhbY29udGVudFVuaXRdKTtcbiAgICB9XG4gIH1cblxuICAvLyBcdTUyMjBcdTk2NjRcdTk1RUFcdTUzNjFcbiAgdGhpcy5mbGFzaGNhcmRzLmRlbGV0ZShpZCk7XG4gIGF3YWl0IHRoaXMucGVyc2lzdEZsYXNoY2FyZHMoKTtcbn1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTU5MERcdTRFNjBcdTY1RTVcdTVGRDcgPT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogXHU4QkIwXHU1RjU1XHU1OTBEXHU0RTYwXHU2NUU1XHU1RkQ3XG4gICAqL1xuICBhc3luYyBsb2dSZXZpZXcobG9nOiBSZXZpZXdMb2cpIHtcbiAgICB0aGlzLnJldmlld0xvZ3MucHVzaChsb2cpO1xuICAgIFxuICAgIGlmICh0aGlzLnJldmlld0xvZ3MubGVuZ3RoID4gMTAwMCkge1xuICAgICAgdGhpcy5yZXZpZXdMb2dzID0gdGhpcy5yZXZpZXdMb2dzLnNsaWNlKC0xMDAwKTtcbiAgICB9XG4gICAgXG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0UmV2aWV3TG9ncygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NTM2MVx1NzI0N1x1NzY4NFx1NTkwRFx1NEU2MFx1NTM4Nlx1NTNGMlxuICAgKi9cbiAgZ2V0Q2FyZFJldmlld0hpc3RvcnkoY2FyZElkOiBzdHJpbmcpOiBSZXZpZXdMb2dbXSB7XG4gICAgcmV0dXJuIHRoaXMucmV2aWV3TG9ncy5maWx0ZXIobG9nID0+IGxvZy5mbGFzaGNhcmRJZCA9PT0gY2FyZElkKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFx1N0VERlx1OEJBMSA9PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTdFREZcdThCQTFcdTY1NzBcdTYzNkVcbiAgICovXG4gIGdldFN0YXRzKCkge1xuICAgIGNvbnN0IGFsbCA9IHRoaXMuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgIGNvbnN0IGR1ZSA9IHRoaXMuZ2V0RHVlQ2FyZHMoKTtcbiAgICBjb25zdCBuZXdDYXJkcyA9IHRoaXMuZ2V0TmV3Q2FyZHMoKTtcbiAgICBcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgY29uc3QgcmV2aWV3ZWRUb2RheSA9IHRoaXMucmV2aWV3TG9ncy5maWx0ZXIoXG4gICAgICBsb2cgPT4gbG9nLnRpbWVzdGFtcCA+PSB0b2RheVxuICAgICkubGVuZ3RoO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsOiBhbGwubGVuZ3RoLFxuICAgICAgbmV3OiBuZXdDYXJkcy5sZW5ndGgsXG4gICAgICBkdWU6IGR1ZS5sZW5ndGgsXG4gICAgICByZXZpZXdlZFRvZGF5LFxuICAgICAgdG90YWxSZXZpZXdzOiB0aGlzLnJldmlld0xvZ3MubGVuZ3RoXG4gICAgfTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFx1NzlDMVx1NjcwOVx1NURFNVx1NTE3N1x1NjVCOVx1NkNENSA9PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBcdTUyQTBcdThGN0RcdTk1RUFcdTUzNjFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbG9hZEZsYXNoY2FyZHMoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L2ZsYXNoY2FyZHMuanNvbmA7XG4gICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5hcHAudmF1bHQuYWRhcHRlcjtcblxuICAgICAgaWYgKGF3YWl0IGFkYXB0ZXIuZXhpc3RzKHBhdGgpKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhZGFwdGVyLnJlYWQocGF0aCk7XG4gICAgICAgIGNvbnN0IGZsYXNoY2FyZHM6IEZsYXNoY2FyZFtdID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgY2FyZCBvZiBmbGFzaGNhcmRzKSB7XG4gICAgICAgICAgdGhpcy5mbGFzaGNhcmRzLnNldChjYXJkLmlkLCBjYXJkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGZsYXNoY2FyZHM6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTUyQTBcdThGN0RcdTU5MERcdTRFNjBcdTY1RTVcdTVGRDdcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbG9hZFJldmlld0xvZ3MoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L3Jldmlldy1sb2dzLmpzb25gO1xuICAgICAgY29uc3QgYWRhcHRlciA9IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXI7XG5cbiAgICAgIGlmIChhd2FpdCBhZGFwdGVyLmV4aXN0cyhwYXRoKSkge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgYWRhcHRlci5yZWFkKHBhdGgpO1xuICAgICAgICB0aGlzLnJldmlld0xvZ3MgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIHJldmlldyBsb2dzOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU1MjFEXHU1OUNCXHU1MzE2XHU4QzAzXHU1RUE2XHU1M0MyXHU2NTcwXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVTY2hlZHVsaW5nKCk6IEZsYXNoY2FyZFsnc2NoZWR1bGluZyddIHtcbiAgICByZXR1cm4ge1xuICAgICAgaW50ZXJ2YWw6IDAsXG4gICAgICBlYXNlOiAyLjUsXG4gICAgICBkdWU6IERhdGUubm93KCksXG4gICAgICBsYXBzZXM6IDAsXG4gICAgICByZXBzOiAwLFxuICAgICAgc3RhdGU6ICduZXcnXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTc1MUZcdTYyMTBcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdTY1ODdcdTY3MkNcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVDbG96ZVRleHQoXG4gICAgb3JpZ2luYWw6IHN0cmluZyxcbiAgICBkZWxldGlvbnM6IHsgaW5kZXg6IG51bWJlcjsgYW5zd2VyOiBzdHJpbmcgfVtdXG4gICk6IHN0cmluZyB7XG4gICAgbGV0IHJlc3VsdCA9IG9yaWdpbmFsO1xuICAgIGNvbnN0IHNvcnRlZCA9IFsuLi5kZWxldGlvbnNdLnNvcnQoKGEsIGIpID0+IGIuaW5kZXggLSBhLmluZGV4KTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IGRlbGV0aW9uIG9mIHNvcnRlZCkge1xuICAgICAgY29uc3QgYmVmb3JlID0gcmVzdWx0LnN1YnN0cmluZygwLCBkZWxldGlvbi5pbmRleCk7XG4gICAgICBjb25zdCBhZnRlciA9IHJlc3VsdC5zdWJzdHJpbmcoZGVsZXRpb24uaW5kZXggKyBkZWxldGlvbi5hbnN3ZXIubGVuZ3RoKTtcbiAgICAgIHJlc3VsdCA9IGAke2JlZm9yZX1bLi4uXSR7YWZ0ZXJ9YDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYzQThcdTY1QURcdTUzNjFcdTdFQzRcdTU0MERcdTc5RjBcbiAgICovXG4gIHByaXZhdGUgaW5mZXJEZWNrKGZpbGVQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHBhcnRzID0gZmlsZVBhdGguc3BsaXQoJy8nKTtcbiAgICByZXR1cm4gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDJdIDogJ0RlZmF1bHQnO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NTM2MVx1NzI0N1x1NEYxOFx1NTE0OFx1N0VBN1xuICAgKi9cbiAgcHJpdmF0ZSBnZXRDYXJkUHJpb3JpdHkoY2FyZDogRmxhc2hjYXJkKTogbnVtYmVyIHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IG92ZXJkdWUgPSBNYXRoLm1heCgwLCBub3cgLSBjYXJkLnNjaGVkdWxpbmcuZHVlKTtcbiAgICBjb25zdCBkYXlzT3ZlcmR1ZSA9IG92ZXJkdWUgLyAoMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gICAgXG4gICAgaWYgKGNhcmQuc2NoZWR1bGluZy5zdGF0ZSA9PT0gJ25ldycpIHJldHVybiAxMDAgKyBkYXlzT3ZlcmR1ZTtcbiAgICBpZiAoY2FyZC5zY2hlZHVsaW5nLnN0YXRlID09PSAncmVsZWFybmluZycpIHJldHVybiAyMDAgKyBkYXlzT3ZlcmR1ZTtcbiAgICByZXR1cm4gZGF5c092ZXJkdWU7XG4gIH1cblxuICAvKipcbiAgICogXHU2MzAxXHU0RTQ1XHU1MzE2XHU5NUVBXHU1MzYxXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHBlcnNpc3RGbGFzaGNhcmRzKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXRoID0gYCR7dGhpcy5kYXRhRm9sZGVyfS9mbGFzaGNhcmRzLmpzb25gO1xuICAgICAgY29uc3QgZmxhc2hjYXJkcyA9IEFycmF5LmZyb20odGhpcy5mbGFzaGNhcmRzLnZhbHVlcygpKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnN0cmluZ2lmeShmbGFzaGNhcmRzLCBudWxsLCAyKTtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUocGF0aCwgZGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBlcnNpc3RpbmcgZmxhc2hjYXJkczonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NjMwMVx1NEU0NVx1NTMxNlx1NTkwRFx1NEU2MFx1NjVFNVx1NUZEN1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwZXJzaXN0UmV2aWV3TG9ncygpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGF0aCA9IGAke3RoaXMuZGF0YUZvbGRlcn0vcmV2aWV3LWxvZ3MuanNvbmA7XG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5zdHJpbmdpZnkodGhpcy5yZXZpZXdMb2dzLCBudWxsLCAyKTtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUocGF0aCwgZGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBlcnNpc3RpbmcgcmV2aWV3IGxvZ3M6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTc1MUZcdTYyMTBcdTU1MkZcdTRFMDAgSURcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgY2FyZC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gIH1cbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFB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QUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FB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QUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FB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QUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtB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O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFB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LGlCQUFpQjtBQUN2QixVQUFNLGdCQUFnQixLQUFLLGlCQUFpQjtBQUM1QyxrQkFBYyxTQUFTLHdCQUF3QjtBQUUvQyxVQUFNLGVBQWUsTUFBTTtBQUN6QixZQUFNLFFBQVEsS0FBSyxpQkFBaUIsU0FBUztBQUM3QyxvQkFBYyxRQUFRLGFBQU0sTUFBTSxTQUFTO0FBQzNDLG9CQUFjLFFBQVEsR0FBRyxNQUFNO0FBQUEsRUFBNkIsTUFBTTtBQUFBLElBQ3BFO0FBR0EsaUJBQWE7QUFHYixTQUFLO0FBQUEsTUFDSCxPQUFPLFlBQVksY0FBYyxHQUFLO0FBQUEsSUFDeEM7QUFHQSxrQkFBYyxpQkFBaUIsU0FBUyxNQUFNO0FBQzVDLFdBQUssZUFBZTtBQUFBLElBQ3RCLENBQUM7QUFBQSxFQUNIO0FBQ0Y7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIkZsYXNoY2FyZENyZWF0ZU1vZGFsIiwgIkFubm90YXRpb25Nb2RhbCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJjb250YWluZXIiLCAiYW5ub3RhdGlvbiIsICJjb250ZW50IiwgIlF1aWNrRmxhc2hjYXJkQ3JlYXRvciIsICJhbGxDYXJkcyIsICJCYXRjaENyZWF0ZU1vZGFsIiwgInVuaXRzIiwgImltcG9ydF9vYnNpZGlhbiIsICJzaW1pbGFyaXR5IiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiRmlsZUFubm90YXRpb25Nb2RhbCJdCn0K
