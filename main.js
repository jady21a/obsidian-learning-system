/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/core/QuickFlashcardCreator.ts
var QuickFlashcardCreator_exports = {};
__export(QuickFlashcardCreator_exports, {
  QuickFlashcardCreator: () => QuickFlashcardCreator
});
var import_obsidian2, QuickFlashcardCreator;
var init_QuickFlashcardCreator = __esm({
  "src/core/QuickFlashcardCreator.ts"() {
    import_obsidian2 = require("obsidian");
    QuickFlashcardCreator = class {
      constructor(plugin) {
        this.plugin = plugin;
      }
      /**
       * 从提取内容一键创建问答卡
       * 如果有批注，使用批注作为答案
       */
      async createQuickQACard(contentUnit) {
        try {
          const annotation = this.plugin.annotationManager.getContentAnnotation(contentUnit.id);
          let question;
          let answer;
          if (annotation && annotation.content) {
            if (this.isQuestion(annotation.content)) {
              question = this.generateDefaultQuestion(contentUnit);
              answer = annotation.content;
            } else {
              question = this.generateDefaultQuestion(contentUnit);
              answer = annotation.content;
            }
          } else {
            question = this.generateDefaultQuestion(contentUnit);
            answer = contentUnit.content;
          }
          const card = await this.plugin.flashcardManager.createQACard(
            contentUnit.id,
            question,
            answer
          );
          new import_obsidian2.Notice(`\u2705 Flashcard created! (Q&A)`);
        } catch (error) {
          console.error("Error creating quick flashcard:", error);
          new import_obsidian2.Notice("\u274C Failed to create flashcard");
        }
      }
      /**
       * 从提取内容一键创建完形填空卡
       * 自动识别关键词
       */
      async createQuickClozeCard(contentUnit) {
        try {
          const keywords = this.extractKeywords(contentUnit.content);
          if (keywords.length === 0) {
            new import_obsidian2.Notice("\u26A0\uFE0F No keywords found for cloze deletion");
            return;
          }
          const deletions = keywords.map((keyword) => {
            const index = contentUnit.content.indexOf(keyword.word);
            return {
              index,
              answer: keyword.word
            };
          }).filter((d) => d.index !== -1);
          if (deletions.length === 0) {
            new import_obsidian2.Notice("\u26A0\uFE0F Could not create cloze deletions");
            return;
          }
          const card = await this.plugin.flashcardManager.createClozeCard(
            contentUnit.id,
            contentUnit.content,
            deletions
          );
          new import_obsidian2.Notice(`\u2705 Flashcard created! (Cloze with ${deletions.length} blanks)`);
        } catch (error) {
          console.error("Error creating quick cloze card:", error);
          new import_obsidian2.Notice("\u274C Failed to create flashcard");
        }
      }
      /**
       * 智能创建闪卡（自动判断类型）
       */
      async createSmartCard(contentUnit) {
        const annotation = this.plugin.annotationManager.getContentAnnotation(contentUnit.id);
        if (annotation && this.isQuestion(annotation.content)) {
          await this.createQuickQACard(contentUnit);
          return;
        }
        if (contentUnit.content.length < 200) {
          await this.createQuickQACard(contentUnit);
          return;
        }
        await this.createQuickClozeCard(contentUnit);
      }
      /**
       * 批量创建闪卡
       */
      async createBatchCards(contentUnits, type = "smart") {
        let success = 0;
        let failed = 0;
        for (const unit of contentUnits) {
          try {
            switch (type) {
              case "qa":
                await this.createQuickQACard(unit);
                break;
              case "cloze":
                await this.createQuickClozeCard(unit);
                break;
              case "smart":
                await this.createSmartCard(unit);
                break;
            }
            success++;
          } catch (error) {
            console.error("Error creating card:", error);
            failed++;
          }
        }
        return { success, failed };
      }
      /**
       * 判断文本是否是问题
       */
      isQuestion(text) {
        const questionWords = ["what", "why", "how", "when", "where", "who", "which"];
        const lowerText = text.toLowerCase().trim();
        if (lowerText.endsWith("?"))
          return true;
        for (const word of questionWords) {
          if (lowerText.startsWith(word + " "))
            return true;
        }
        if (text.includes("\u4EC0\u4E48") || text.includes("\u4E3A\u4EC0\u4E48") || text.includes("\u600E\u4E48") || text.includes("\u5982\u4F55") || text.includes("\u5417\uFF1F") || text.includes("\u5462\uFF1F")) {
          return true;
        }
        return false;
      }
      /**
       * 生成默认问题
       */
      generateDefaultQuestion(contentUnit) {
        if (contentUnit.source.heading) {
          const heading = contentUnit.source.heading.replace(/^#+\s*/, "");
          return `What is the key point about "${heading}"?`;
        }
        if (contentUnit.content.length < 50) {
          return `What does "${contentUnit.content}" mean?`;
        } else if (contentUnit.content.length < 150) {
          const firstWords = contentUnit.content.substring(0, 30) + "...";
          return `Explain: "${firstWords}"`;
        } else {
          return `What are the key points in this content?`;
        }
      }
      /**
       * 提取关键词（用于完形填空）
       */
      extractKeywords(text) {
        const words = text.match(/\b[A-Za-z]{3,}\b/g) || [];
        const stopWords = /* @__PURE__ */ new Set([
          "the",
          "is",
          "at",
          "which",
          "on",
          "a",
          "an",
          "and",
          "or",
          "but",
          "in",
          "with",
          "to",
          "for",
          "of",
          "as",
          "by",
          "this",
          "that",
          "from",
          "they",
          "we",
          "say",
          "her",
          "she",
          "he",
          "will",
          "my",
          "one",
          "all",
          "would",
          "there",
          "their",
          "what",
          "so",
          "up",
          "out",
          "if",
          "about",
          "who",
          "get",
          "which",
          "go",
          "me",
          "when",
          "make",
          "can",
          "like",
          "time",
          "no",
          "just",
          "him",
          "know",
          "take",
          "people",
          "into",
          "year",
          "your",
          "good",
          "some",
          "could",
          "them",
          "see",
          "other"
        ]);
        const wordFreq = /* @__PURE__ */ new Map();
        words.forEach((word) => {
          const lower = word.toLowerCase();
          if (!stopWords.has(lower) && word.length > 3) {
            wordFreq.set(word, (wordFreq.get(word) || 0) + 1);
          }
        });
        const scored = Array.from(wordFreq.entries()).map(([word, freq]) => {
          let score = freq;
          if (word.length > 8)
            score += 2;
          else if (word.length > 6)
            score += 1;
          if (word[0] === word[0].toUpperCase())
            score += 1;
          return { word, score };
        });
        return scored.sort((a, b) => b.score - a.score).slice(0, 3);
      }
    };
  }
});

// src/ui/view/FlashcardCreateModal.ts
var FlashcardCreateModal_exports = {};
__export(FlashcardCreateModal_exports, {
  FlashcardCreateModal: () => FlashcardCreateModal
});
var import_obsidian3, FlashcardCreateModal;
var init_FlashcardCreateModal = __esm({
  "src/ui/view/FlashcardCreateModal.ts"() {
    import_obsidian3 = require("obsidian");
    FlashcardCreateModal = class extends import_obsidian3.Modal {
      constructor(app, plugin, contentUnit, onSave) {
        super(app);
        this.plugin = plugin;
        this.cardType = "qa";
        // Q&A 字段
        this.question = "";
        this.answer = "";
        // Cloze 字段
        this.clozeText = "";
        this.selectedRanges = [];
        this.contentUnit = contentUnit;
        this.onSave = onSave;
        this.answer = contentUnit.content;
        this.clozeText = contentUnit.content;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.addClass("flashcard-create-modal");
        contentEl.createEl("h2", { text: "Create Flashcard" });
        const contentPreview = contentEl.createDiv({ cls: "content-preview" });
        contentPreview.createEl("h3", { text: "Source Content:" });
        contentPreview.createEl("blockquote", { text: this.contentUnit.content });
        new import_obsidian3.Setting(contentEl).setName("Card Type").setDesc("Choose the type of flashcard").addDropdown((dropdown) => {
          dropdown.addOption("qa", "\u{1F4DD} Question & Answer").addOption("cloze", "\u270F\uFE0F Cloze Deletion").setValue(this.cardType).onChange((value) => {
            this.cardType = value;
            this.refreshCardInputs();
          });
        });
        this.cardInputContainer = contentEl.createDiv({ cls: "card-input-container" });
        this.refreshCardInputs();
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => this.close());
        const saveBtn = buttonContainer.createEl("button", {
          text: "Create Flashcard",
          cls: "mod-cta"
        });
        saveBtn.addEventListener("click", () => this.saveFlashcard());
        this.addStyles();
      }
      refreshCardInputs() {
        this.cardInputContainer.empty();
        if (this.cardType === "qa") {
          this.renderQAInputs();
        } else {
          this.renderClozeInputs();
        }
      }
      renderQAInputs() {
        new import_obsidian3.Setting(this.cardInputContainer).setName("Question (Front)").setDesc("What question should this card ask?").addTextArea((text) => {
          text.setPlaceholder("Enter your question...").setValue(this.question).onChange((value) => {
            this.question = value;
          });
          text.inputEl.rows = 3;
          text.inputEl.style.width = "100%";
        });
        new import_obsidian3.Setting(this.cardInputContainer).setName("Answer (Back)").setDesc("What is the correct answer?").addTextArea((text) => {
          text.setPlaceholder("Enter the answer...").setValue(this.answer).onChange((value) => {
            this.answer = value;
          });
          text.inputEl.rows = 3;
          text.inputEl.style.width = "100%";
        });
        const hint = this.cardInputContainer.createDiv({ cls: "input-hint" });
        hint.createEl("small", {
          text: "\u{1F4A1} Tip: You can use the source content as the answer, or write your own."
        });
      }
      renderClozeInputs() {
        const container = this.cardInputContainer;
        container.createEl("h3", { text: "Cloze Deletion" });
        container.createEl("p", {
          text: "Select text to hide (cloze deletion). Click on words to toggle selection.",
          cls: "cloze-instruction"
        });
        const textContainer = container.createDiv({ cls: "cloze-text-container" });
        this.renderSelectableText(textContainer);
        if (this.selectedRanges.length > 0) {
          const selectedList = container.createDiv({ cls: "selected-deletions" });
          selectedList.createEl("h4", { text: "Selected Deletions:" });
          this.selectedRanges.forEach((range, index) => {
            const item = selectedList.createDiv({ cls: "deletion-item" });
            item.createSpan({ text: `${index + 1}. ` });
            item.createSpan({
              text: range.text,
              cls: "deletion-text"
            });
            const removeBtn = item.createEl("button", {
              text: "\xD7",
              cls: "remove-deletion-btn"
            });
            removeBtn.addEventListener("click", () => {
              this.selectedRanges.splice(index, 1);
              this.refreshCardInputs();
            });
          });
        }
        const preview = container.createDiv({ cls: "cloze-preview" });
        preview.createEl("h4", { text: "Preview:" });
        preview.createDiv({
          text: this.generateClozePreview(),
          cls: "preview-text"
        });
      }
      renderSelectableText(container) {
        const words = this.clozeText.split(/(\s+)/);
        let currentIndex = 0;
        words.forEach((word) => {
          const wordStart = currentIndex;
          const wordEnd = currentIndex + word.length;
          if (word.trim()) {
            const isSelected = this.selectedRanges.some(
              (range) => range.start === wordStart && range.end === wordEnd
            );
            const span = container.createEl("span", {
              text: word,
              cls: isSelected ? "cloze-word selected" : "cloze-word"
            });
            span.addEventListener("click", () => {
              this.toggleWordSelection(wordStart, wordEnd, word);
            });
          } else {
            container.createEl("span", { text: word });
          }
          currentIndex = wordEnd;
        });
      }
      toggleWordSelection(start, end, text) {
        const index = this.selectedRanges.findIndex(
          (range) => range.start === start && range.end === end
        );
        if (index > -1) {
          this.selectedRanges.splice(index, 1);
        } else {
          this.selectedRanges.push({ start, end, text });
          this.selectedRanges.sort((a, b) => a.start - b.start);
        }
        this.refreshCardInputs();
      }
      generateClozePreview() {
        let preview = this.clozeText;
        const sorted = [...this.selectedRanges].sort((a, b) => b.start - a.start);
        for (const range of sorted) {
          const before = preview.substring(0, range.start);
          const after = preview.substring(range.end);
          preview = `${before}[...]${after}`;
        }
        return preview;
      }
      async saveFlashcard() {
        try {
          if (this.cardType === "qa") {
            if (!this.question.trim()) {
              new import_obsidian3.Notice("Please enter a question");
              return;
            }
            if (!this.answer.trim()) {
              new import_obsidian3.Notice("Please enter an answer");
              return;
            }
            await this.plugin.flashcardManager.createQACard(
              this.contentUnit.id,
              this.question,
              this.answer
            );
            new import_obsidian3.Notice("Q&A flashcard created!");
          } else {
            if (this.selectedRanges.length === 0) {
              new import_obsidian3.Notice("Please select at least one word to hide");
              return;
            }
            const deletions = this.selectedRanges.map((range) => ({
              index: range.start,
              answer: range.text
            }));
            await this.plugin.flashcardManager.createClozeCard(
              this.contentUnit.id,
              this.clozeText,
              deletions
            );
            new import_obsidian3.Notice("Cloze flashcard created!");
          }
          this.close();
          this.onSave();
        } catch (error) {
          console.error("Error creating flashcard:", error);
          new import_obsidian3.Notice("Error creating flashcard");
        }
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      .flashcard-create-modal {
        padding: 20px;
        max-width: 600px;
      }

      .content-preview {
        margin: 20px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .content-preview h3 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .content-preview blockquote {
        margin: 0;
        padding: 10px;
        border-left: 3px solid var(--interactive-accent);
        background: var(--background-primary);
        border-radius: 4px;
      }

      .card-input-container {
        margin: 20px 0;
      }

      .input-hint {
        margin-top: 10px;
        padding: 10px;
        background: var(--background-secondary);
        border-radius: 4px;
        color: var(--text-muted);
      }

      /* Cloze \u6837\u5F0F */
      .cloze-instruction {
        color: var(--text-muted);
        font-size: 0.9em;
        margin-bottom: 15px;
      }

      .cloze-text-container {
        padding: 15px;
        background: var(--background-primary);
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        line-height: 1.8;
        margin-bottom: 15px;
        cursor: default;
      }

      .cloze-word {
        padding: 2px 4px;
        margin: 0 1px;
        border-radius: 3px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .cloze-word:hover {
        background: var(--background-modifier-hover);
      }

      .cloze-word.selected {
        background: var(--interactive-accent);
        color: white;
        font-weight: 500;
      }

      .selected-deletions {
        margin: 15px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .selected-deletions h4 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .deletion-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 6px 10px;
        background: var(--background-primary);
        border-radius: 4px;
        margin-bottom: 6px;
      }

      .deletion-text {
        flex: 1;
        font-weight: 500;
        color: var(--interactive-accent);
      }

      .remove-deletion-btn {
        padding: 2px 8px;
        background: var(--background-modifier-error);
        color: white;
        border: none;
        border-radius: 3px;
        cursor: pointer;
        font-size: 16px;
        line-height: 1;
      }

      .remove-deletion-btn:hover {
        background: var(--color-red);
      }

      .cloze-preview {
        margin: 15px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .cloze-preview h4 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .preview-text {
        padding: 10px;
        background: var(--background-primary);
        border-radius: 4px;
        line-height: 1.6;
      }

      .modal-button-container {
        display: flex;
        gap: 10px;
        justify-content: flex-end;
        margin-top: 20px;
      }

      .modal-button-container button {
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
      }
    `;
        document.head.appendChild(styleEl);
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
  }
});

// src/ui/view/OverviewView.ts
var OverviewView_exports = {};
__export(OverviewView_exports, {
  BatchCreateModal: () => BatchCreateModal,
  OverviewView: () => OverviewView,
  VIEW_TYPE_OVERVIEW: () => VIEW_TYPE_OVERVIEW
});
var import_obsidian4, VIEW_TYPE_OVERVIEW, OverviewView, BatchCreateModal, ConfirmModal;
var init_OverviewView = __esm({
  "src/ui/view/OverviewView.ts"() {
    import_obsidian4 = require("obsidian");
    init_QuickFlashcardCreator();
    VIEW_TYPE_OVERVIEW = "learning-system-overview";
    OverviewView = class extends import_obsidian4.ItemView {
      constructor(leaf, plugin) {
        super(leaf);
        //   private contentEl: HTMLElement;
        this.groupBy = "file";
        this.searchQuery = "";
        this.batchMode = false;
        this.selectedUnitIds = /* @__PURE__ */ new Set();
        this.plugin = plugin;
        this.quickCreator = new QuickFlashcardCreator(plugin);
      }
      getViewType() {
        return VIEW_TYPE_OVERVIEW;
      }
      getDisplayText() {
        return "Learning Overview";
      }
      getIcon() {
        return "layout-list";
      }
      async onOpen() {
        const container = this.containerEl.children[1];
        container.empty();
        this.createToolbar(container);
        this.contentEl = container.createDiv({ cls: "learning-system-content" });
        await this.refresh();
        this.addStyles();
      }
      async onClose() {
      }
      // 添加到 OverviewView 类中
      scrollToFile(filePath) {
        setTimeout(() => {
          const fileGroups = this.contentEl.querySelectorAll(".file-group");
          fileGroups.forEach((group) => {
            var _a, _b;
            const header = group.querySelector(".group-header");
            if ((_b = header == null ? void 0 : header.textContent) == null ? void 0 : _b.includes(((_a = filePath.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || "")) {
              group.scrollIntoView({ behavior: "smooth", block: "start" });
            }
          });
        }, 100);
      }
      createToolbar(container) {
        const toolbar = container.createDiv({ cls: "learning-system-toolbar" });
        const searchContainer = toolbar.createDiv({ cls: "search-container" });
        const searchInput = searchContainer.createEl("input", {
          type: "text",
          placeholder: "Search content...",
          cls: "search-input"
        });
        searchInput.addEventListener("input", (e) => {
          this.searchQuery = e.target.value;
          this.refresh();
        });
        const groupContainer = toolbar.createDiv({ cls: "group-container" });
        groupContainer.createSpan({ text: "Group by: ", cls: "group-label" });
        const groupSelect = groupContainer.createEl("select", { cls: "group-select" });
        const options = [
          { value: "file", label: "File" },
          { value: "tag", label: "Tag" },
          { value: "date", label: "Date" }
        ];
        options.forEach((opt) => {
          const option = groupSelect.createEl("option", {
            value: opt.value,
            text: opt.label
          });
          if (opt.value === this.groupBy) {
            option.selected = true;
          }
        });
        groupSelect.addEventListener("change", (e) => {
          this.groupBy = e.target.value;
          this.refresh();
        });
        const batchActions = toolbar.createDiv({ cls: "batch-actions-overview" });
        const batchModeBtn = batchActions.createEl("button", {
          text: this.batchMode ? "\u2713 Done" : "\u2610 Batch Mode",
          cls: "batch-mode-btn"
        });
        batchModeBtn.addEventListener("click", () => {
          this.batchMode = !this.batchMode;
          if (!this.batchMode) {
            this.selectedUnitIds.clear();
          }
          this.refresh();
        });
        if (this.batchMode) {
          const selectAllBtn = batchActions.createEl("button", {
            text: this.isAllSelected() ? "\u2611 Deselect All" : "\u2610 Select All",
            cls: "select-all-btn"
          });
          selectAllBtn.addEventListener("click", () => {
            this.toggleSelectAll();
          });
          const batchDeleteBtn = batchActions.createEl("button", {
            text: `\u{1F5D1}\uFE0F Delete (${this.selectedUnitIds.size})`,
            cls: "batch-delete-btn"
          });
          batchDeleteBtn.addEventListener("click", () => {
            this.batchDeleteNotes();
          });
          const batchCreateBtn = batchActions.createEl("button", {
            text: `\u26A1 Create Cards (${this.selectedUnitIds.size})`,
            cls: "batch-create-cards-btn"
          });
          batchCreateBtn.addEventListener("click", () => {
            this.batchCreateFlashcards();
          });
        } else {
          const batchCreateAllBtn = batchActions.createEl("button", {
            text: "\u26A1 Batch Create Cards",
            cls: "batch-create-btn"
          });
          batchCreateAllBtn.addEventListener("click", () => this.showBatchCreateModal());
        }
        const refreshBtn = toolbar.createEl("button", {
          text: "\u27F3",
          cls: "refresh-btn"
        });
        refreshBtn.addEventListener("click", () => this.refresh());
        const stats = toolbar.createDiv({ cls: "stats-container" });
        const totalCount = this.plugin.dataManager.getAllContentUnits().length;
        stats.createSpan({ text: `Total: ${totalCount}`, cls: "stats-text" });
      }
      async refresh() {
        this.contentEl.empty();
        let units = this.plugin.dataManager.getAllContentUnits();
        if (this.searchQuery) {
          const query = this.searchQuery.toLowerCase();
          units = units.filter(
            (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
          );
        }
        if (units.length === 0) {
          this.contentEl.createDiv({
            text: this.searchQuery ? "No results found" : "No content extracted yet",
            cls: "empty-state"
          });
          return;
        }
        switch (this.groupBy) {
          case "file":
            this.renderByFile(units);
            break;
          case "tag":
            this.renderByTag(units);
            break;
          case "date":
            this.renderByDate(units);
            break;
        }
      }
      renderByFile(units) {
        const grouped = /* @__PURE__ */ new Map();
        units.forEach((unit) => {
          if (!grouped.has(unit.source.file)) {
            grouped.set(unit.source.file, []);
          }
          grouped.get(unit.source.file).push(unit);
        });
        const sortedFiles = Array.from(grouped.keys()).sort();
        sortedFiles.forEach((filePath) => {
          const fileUnits = grouped.get(filePath);
          this.renderFileGroup(filePath, fileUnits);
        });
      }
      renderFileGroup(filePath, units) {
        var _a;
        const groupContainer = this.contentEl.createDiv({ cls: "file-group" });
        const header = groupContainer.createDiv({ cls: "group-header" });
        const fileName = ((_a = filePath.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || filePath;
        const titleEl = header.createDiv({ cls: "group-title" });
        titleEl.createSpan({ text: "\u{1F4C4} ", cls: "group-icon" });
        titleEl.createSpan({ text: fileName, cls: "group-name" });
        header.createSpan({ text: `${units.length}`, cls: "count-badge" });
        const collapseBtn = header.createSpan({ text: "\u25BC", cls: "collapse-btn" });
        const fileAnnotations = this.plugin.annotationManager.getFileAnnotations(filePath);
        if (fileAnnotations.length > 0) {
          const fileAnnotationDisplay = groupContainer.createDiv({
            cls: "file-annotation-display"
          });
          fileAnnotations.forEach((ann) => {
            const annEl = fileAnnotationDisplay.createDiv({ cls: "file-annotation-item" });
            annEl.createEl("strong", { text: "\u{1F4CC} " });
            annEl.createSpan({ text: ann.content });
          });
        }
        const contentContainer = groupContainer.createDiv({ cls: "group-content" });
        units.forEach((unit) => {
          this.renderContentUnit(contentContainer, unit);
        });
        let isCollapsed = false;
        collapseBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          isCollapsed = !isCollapsed;
          contentContainer.style.display = isCollapsed ? "none" : "block";
          collapseBtn.textContent = isCollapsed ? "\u25B6" : "\u25BC";
        });
        header.addEventListener("click", async () => {
          const file = this.app.vault.getAbstractFileByPath(filePath);
          if (file instanceof import_obsidian4.TFile) {
            await this.app.workspace.getLeaf(false).openFile(file);
          }
        });
      }
      renderContentUnit(container, unit) {
        const card = container.createDiv({ cls: "content-card" });
        if (this.batchMode) {
          const checkbox = card.createEl("input", {
            type: "checkbox",
            cls: "batch-checkbox"
          });
          checkbox.setAttribute("data-unit-id", unit.id);
          checkbox.checked = this.selectedUnitIds.has(unit.id);
          checkbox.addEventListener("change", (e) => {
            if (e.target.checked) {
              this.selectedUnitIds.add(unit.id);
            } else {
              this.selectedUnitIds.delete(unit.id);
            }
            this.updateBatchButtons();
          });
        }
        const contentArea = card.createDiv({ cls: "card-content" });
        const typeIcon = this.getTypeIcon(unit.type);
        contentArea.createSpan({ text: typeIcon + " ", cls: "type-icon" });
        const contentText = contentArea.createSpan({
          text: unit.content,
          cls: "content-text clickable-content"
        });
        contentText.addEventListener("click", (e) => {
          var _a;
          e.stopPropagation();
          this.showAnnotationInput(card, unit, (_a = this.plugin.annotationManager.getContentAnnotation(unit.id)) == null ? void 0 : _a.content);
        });
        if (unit.annotationId) {
          contentArea.createSpan({
            text: "\u{1F4DD}",
            cls: "annotation-badge has-annotation",
            attr: { title: "Has annotation" }
          });
        }
        if (unit.flashcardIds.length > 0) {
          contentArea.createSpan({
            text: "\u{1F0CF}",
            cls: "flashcard-badge",
            attr: { title: `${unit.flashcardIds.length} flashcard(s)` }
          });
        }
        const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
        if (annotation) {
          const annotationDisplay = card.createDiv({ cls: "annotation-display" });
          if (annotation.badge) {
            const badge = annotationDisplay.createSpan({
              text: annotation.badge.text,
              cls: "annotation-badge-display"
            });
            badge.style.backgroundColor = annotation.badge.color;
          }
          const annotationContent = annotationDisplay.createDiv({
            cls: "annotation-content-display"
          });
          annotationContent.createEl("strong", { text: "\u{1F4AC} " });
          annotationContent.createSpan({ text: annotation.content });
          const timestamp = annotationDisplay.createDiv({ cls: "annotation-timestamp" });
          const date = new Date(annotation.metadata.createdAt);
          timestamp.textContent = date.toLocaleString();
          annotationDisplay.addEventListener("click", (e) => {
            e.stopPropagation();
            this.showAnnotationInput(card, unit, annotation.content);
          });
        }
        const metaArea = card.createDiv({ cls: "card-meta" });
        if (unit.metadata.tags.length > 0) {
          const tagsContainer = metaArea.createSpan({ cls: "tags-container" });
          unit.metadata.tags.forEach((tag) => {
            tagsContainer.createSpan({ text: tag, cls: "tag" });
          });
        }
        if (unit.source.heading) {
          metaArea.createSpan({
            text: `\u{1F4CD} ${unit.source.heading}`,
            cls: "heading-info"
          });
        }
        const actionsArea = card.createDiv({ cls: "card-actions" });
        const jumpBtn = actionsArea.createEl("button", {
          text: "\u2197",
          cls: "action-btn jump-btn",
          attr: { title: "Jump to source" }
        });
        jumpBtn.addEventListener("click", async (e) => {
          e.stopPropagation();
          await this.jumpToSource(unit);
        });
        const flashcardGroup = actionsArea.createDiv({ cls: "flashcard-btn-group" });
        const quickCardBtn = flashcardGroup.createEl("button", {
          text: "\u26A1",
          cls: "action-btn quick-card-btn",
          attr: { title: "Quick create flashcard (smart)" }
        });
        quickCardBtn.addEventListener("click", async (e) => {
          e.stopPropagation();
          await this.quickCreator.createSmartCard(unit);
          await this.refresh();
        });
        const moreCardBtn = flashcardGroup.createEl("button", {
          text: "\u25BC",
          cls: "action-btn more-card-btn",
          attr: { title: "More flashcard options" }
        });
        moreCardBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          this.showFlashcardMenu(e, unit);
        });
        const deleteBtn = actionsArea.createEl("button", {
          text: "\u{1F5D1}",
          cls: "action-btn delete-btn",
          attr: { title: "Delete" }
        });
        deleteBtn.addEventListener("click", async (e) => {
          e.stopPropagation();
          await this.deleteContentUnit(unit);
        });
        card.addEventListener("contextmenu", (e) => {
          e.preventDefault();
          this.showContextMenu(e, unit);
        });
      }
      renderByTag(units) {
        const grouped = /* @__PURE__ */ new Map();
        units.forEach((unit) => {
          if (unit.metadata.tags.length === 0) {
            if (!grouped.has("Untagged")) {
              grouped.set("Untagged", []);
            }
            grouped.get("Untagged").push(unit);
          } else {
            unit.metadata.tags.forEach((tag) => {
              if (!grouped.has(tag)) {
                grouped.set(tag, []);
              }
              grouped.get(tag).push(unit);
            });
          }
        });
        const sortedTags = Array.from(grouped.keys()).sort();
        sortedTags.forEach((tag) => {
          const tagUnits = grouped.get(tag);
          this.renderTagGroup(tag, tagUnits);
        });
      }
      renderTagGroup(tag, units) {
        const groupContainer = this.contentEl.createDiv({ cls: "tag-group" });
        const header = groupContainer.createDiv({ cls: "group-header" });
        const titleEl = header.createDiv({ cls: "group-title" });
        titleEl.createSpan({ text: "\u{1F3F7}\uFE0F ", cls: "group-icon" });
        titleEl.createSpan({ text: tag, cls: "group-name" });
        header.createSpan({ text: `${units.length}`, cls: "count-badge" });
        const collapseBtn = header.createSpan({ text: "\u25BC", cls: "collapse-btn" });
        const contentContainer = groupContainer.createDiv({ cls: "group-content" });
        units.forEach((unit) => {
          this.renderContentUnit(contentContainer, unit);
        });
        let isCollapsed = false;
        collapseBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          isCollapsed = !isCollapsed;
          contentContainer.style.display = isCollapsed ? "none" : "block";
          collapseBtn.textContent = isCollapsed ? "\u25B6" : "\u25BC";
        });
      }
      renderByDate(units) {
        const grouped = /* @__PURE__ */ new Map();
        units.forEach((unit) => {
          const date = new Date(unit.metadata.createdAt);
          const dateKey = date.toLocaleDateString();
          if (!grouped.has(dateKey)) {
            grouped.set(dateKey, []);
          }
          grouped.get(dateKey).push(unit);
        });
        const sortedDates = Array.from(grouped.keys()).sort((a, b) => {
          return new Date(b).getTime() - new Date(a).getTime();
        });
        sortedDates.forEach((date) => {
          const dateUnits = grouped.get(date);
          this.renderDateGroup(date, dateUnits);
        });
      }
      renderDateGroup(date, units) {
        const groupContainer = this.contentEl.createDiv({ cls: "date-group" });
        const header = groupContainer.createDiv({ cls: "group-header" });
        const titleEl = header.createDiv({ cls: "group-title" });
        titleEl.createSpan({ text: "\u{1F4C5} ", cls: "group-icon" });
        titleEl.createSpan({ text: date, cls: "group-name" });
        header.createSpan({ text: `${units.length}`, cls: "count-badge" });
        const collapseBtn = header.createSpan({ text: "\u25BC", cls: "collapse-btn" });
        const contentContainer = groupContainer.createDiv({ cls: "group-content" });
        units.forEach((unit) => {
          this.renderContentUnit(contentContainer, unit);
        });
        let isCollapsed = false;
        collapseBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          isCollapsed = !isCollapsed;
          contentContainer.style.display = isCollapsed ? "none" : "block";
          collapseBtn.textContent = isCollapsed ? "\u25B6" : "\u25BC";
        });
      }
      showAnnotationInput(card, unit, existingText) {
        let inputContainer = card.querySelector(".annotation-input-container");
        if (inputContainer) {
          inputContainer.remove();
          return;
        }
        inputContainer = card.createDiv({ cls: "annotation-input-container" });
        const textarea = inputContainer.createEl("textarea", {
          cls: "annotation-textarea",
          placeholder: "Add comment..."
        });
        textarea.value = existingText || "";
        textarea.rows = 3;
        const buttonArea = inputContainer.createDiv({ cls: "annotation-buttons" });
        if (existingText) {
          const deleteBtn = buttonArea.createEl("button", {
            text: "Delete",
            cls: "annotation-delete-btn"
          });
          deleteBtn.addEventListener("click", async () => {
            const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
            if (annotation) {
              await this.plugin.annotationManager.deleteAnnotation(annotation.id);
              new import_obsidian4.Notice("Annotation deleted");
              await this.refresh();
            }
          });
        }
        const saveBtn = buttonArea.createEl("button", {
          text: "Save",
          cls: "annotation-save-btn"
        });
        const saveAnnotation = async () => {
          const text = textarea.value.trim();
          if (!text) {
            inputContainer.remove();
            return;
          }
          try {
            const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
            if (annotation) {
              await this.plugin.annotationManager.updateAnnotation(annotation.id, {
                content: text
              });
            } else {
              await this.plugin.annotationManager.addContentAnnotation(
                unit.id,
                text
              );
            }
            await this.refresh();
          } catch (error) {
            console.error("Error saving annotation:", error);
            new import_obsidian4.Notice("Error saving annotation");
          }
        };
        saveBtn.addEventListener("click", saveAnnotation);
        textarea.addEventListener("keydown", (e) => {
          if (e.key === "Enter" && (e.ctrlKey || e.metaKey)) {
            e.preventDefault();
            saveAnnotation();
          }
          if (e.key === "Escape") {
            e.preventDefault();
            inputContainer.remove();
          }
        });
        textarea.focus();
      }
      showFlashcardMenu(e, unit) {
        const menu = new import_obsidian4.Menu();
        menu.addItem(
          (item) => item.setTitle("\u26A1 Smart create").setIcon("zap").onClick(async () => {
            await this.quickCreator.createSmartCard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("\u{1F4DD} Create Q&A card").setIcon("message-square").onClick(async () => {
            await this.quickCreator.createQuickQACard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("\u270F\uFE0F Create Cloze card").setIcon("edit").onClick(async () => {
            await this.quickCreator.createQuickClozeCard(unit);
            await this.refresh();
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("\u{1F3A8} Custom card...").setIcon("settings").onClick(async () => {
            const { FlashcardCreateModal: FlashcardCreateModal2 } = await Promise.resolve().then(() => (init_FlashcardCreateModal(), FlashcardCreateModal_exports));
            const modal = new FlashcardCreateModal2(
              this.app,
              this.plugin,
              unit,
              async () => {
                await this.refresh();
              }
            );
            modal.open();
          })
        );
        menu.showAtMouseEvent(e);
      }
      async showBatchCreateModal() {
        const units = this.plugin.dataManager.getAllContentUnits();
        const unitsWithoutCards = units.filter((u) => u.flashcardIds.length === 0);
        if (unitsWithoutCards.length === 0) {
          new import_obsidian4.Notice("All content already has flashcards!");
          return;
        }
        const modal = new BatchCreateModal(
          this.app,
          this.plugin,
          this.quickCreator,
          unitsWithoutCards,
          () => this.refresh()
        );
        modal.open();
      }
      isAllSelected() {
        const units = this.plugin.dataManager.getAllContentUnits();
        let filteredUnits = units;
        if (this.searchQuery) {
          const query = this.searchQuery.toLowerCase();
          filteredUnits = units.filter(
            (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
          );
        }
        return filteredUnits.length > 0 && this.selectedUnitIds.size === filteredUnits.length;
      }
      toggleSelectAll() {
        const units = this.plugin.dataManager.getAllContentUnits();
        let filteredUnits = units;
        if (this.searchQuery) {
          const query = this.searchQuery.toLowerCase();
          filteredUnits = units.filter(
            (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
          );
        }
        if (this.isAllSelected()) {
          this.selectedUnitIds.clear();
        } else {
          filteredUnits.forEach((unit) => {
            this.selectedUnitIds.add(unit.id);
          });
        }
        this.updateBatchButtons();
        this.updateCheckboxes();
      }
      updateCheckboxes() {
        const container = this.containerEl.children[1];
        const checkboxes = container.querySelectorAll(".batch-checkbox");
        checkboxes.forEach((checkbox) => {
          const unitId = checkbox.getAttribute("data-unit-id");
          if (unitId) {
            checkbox.checked = this.selectedUnitIds.has(unitId);
          }
        });
      }
      updateBatchButtons() {
        const toolbar = this.containerEl.querySelector(".learning-system-toolbar");
        if (toolbar) {
          const batchActions = toolbar.querySelector(".batch-actions-overview");
          if (batchActions) {
            const selectAllBtn = batchActions.querySelector(".select-all-btn");
            const deleteBtn = batchActions.querySelector(".batch-delete-btn");
            const createBtn = batchActions.querySelector(".batch-create-cards-btn");
            if (selectAllBtn) {
              selectAllBtn.textContent = this.isAllSelected() ? "\u2611 Deselect All" : "\u2610 Select All";
            }
            if (deleteBtn) {
              deleteBtn.textContent = `\u{1F5D1}\uFE0F Delete (${this.selectedUnitIds.size})`;
            }
            if (createBtn) {
              createBtn.textContent = `\u26A1 Create Cards (${this.selectedUnitIds.size})`;
            }
          }
        }
      }
      async batchDeleteNotes() {
        if (this.selectedUnitIds.size === 0) {
          new import_obsidian4.Notice("\u26A0\uFE0F Please select notes to delete");
          return;
        }
        if (!confirm(`Are you sure you want to delete ${this.selectedUnitIds.size} selected notes?`)) {
          return;
        }
        let success = 0;
        let failed = 0;
        for (const unitId of this.selectedUnitIds) {
          try {
            await this.plugin.dataManager.deleteContentUnit(unitId);
            success++;
          } catch (error) {
            console.error("Error deleting note:", error);
            failed++;
          }
        }
        this.selectedUnitIds.clear();
        new import_obsidian4.Notice(`\u2705 Deleted ${success} notes${failed > 0 ? `, ${failed} failed` : ""}`);
        this.refresh();
      }
      async batchCreateFlashcards() {
        if (this.selectedUnitIds.size === 0) {
          new import_obsidian4.Notice("\u26A0\uFE0F Please select notes to create flashcards");
          return;
        }
        const units = Array.from(this.selectedUnitIds).map((id) => this.plugin.dataManager.getContentUnit(id)).filter((u) => u !== void 0 && u.flashcardIds.length === 0);
        if (units.length === 0) {
          new import_obsidian4.Notice("\u26A0\uFE0F Selected notes already have flashcards");
          return;
        }
        const modal = new BatchCreateModal(
          this.app,
          this.plugin,
          this.quickCreator,
          units,
          () => {
            this.selectedUnitIds.clear();
            this.refresh();
          }
        );
        modal.open();
      }
      async jumpToSource(unit) {
        const file = this.app.vault.getAbstractFileByPath(unit.source.file);
        if (!(file instanceof import_obsidian4.TFile))
          return;
        const leaf = this.app.workspace.getLeaf(false);
        await leaf.openFile(file);
        const view = this.app.workspace.getActiveViewOfType(import_obsidian4.ItemView);
        if (view) {
          const editor = view.editor;
          if (editor) {
            editor.setCursor({ line: unit.source.position.line, ch: 0 });
            editor.scrollIntoView({
              from: { line: unit.source.position.line, ch: 0 },
              to: { line: unit.source.position.line, ch: 0 }
            }, true);
            setTimeout(() => {
              editor.setSelection(
                { line: unit.source.position.line, ch: 0 },
                { line: unit.source.position.line, ch: 999 }
              );
            }, 100);
          }
        }
      }
      async deleteContentUnit(unit) {
        const confirmed = await this.confirmDelete(unit);
        if (!confirmed)
          return;
        await this.plugin.dataManager.deleteContentUnit(unit.id);
        await this.refresh();
      }
      async confirmDelete(unit) {
        return new Promise((resolve) => {
          const modal = new ConfirmModal(
            this.app,
            "Delete content",
            `Are you sure you want to delete this content?

"${unit.content.substring(0, 50)}..."`,
            () => resolve(true),
            () => resolve(false)
          );
          modal.open();
        });
      }
      showContextMenu(e, unit) {
        const menu = new import_obsidian4.Menu();
        menu.addItem(
          (item) => item.setTitle("Jump to source").setIcon("arrow-right").onClick(() => this.jumpToSource(unit))
        );
        const annotation = this.plugin.annotationManager.getContentAnnotation(unit.id);
        menu.addItem(
          (item) => item.setTitle(annotation ? "Edit annotation" : "Add annotation").setIcon("pencil").onClick(() => {
            const card = e.target.closest(".content-card");
            if (card) {
              this.showAnnotationInput(card, unit, annotation == null ? void 0 : annotation.content);
            }
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("\u26A1 Quick create flashcard").setIcon("zap").onClick(async () => {
            await this.quickCreator.createSmartCard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("Create Q&A card").setIcon("message-square").onClick(async () => {
            await this.quickCreator.createQuickQACard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("Create Cloze card").setIcon("edit").onClick(async () => {
            await this.quickCreator.createQuickClozeCard(unit);
            await this.refresh();
          })
        );
        menu.addItem(
          (item) => item.setTitle("Custom flashcard...").setIcon("settings").onClick(async () => {
            const { FlashcardCreateModal: FlashcardCreateModal2 } = await Promise.resolve().then(() => (init_FlashcardCreateModal(), FlashcardCreateModal_exports));
            const modal = new FlashcardCreateModal2(
              this.app,
              this.plugin,
              unit,
              async () => {
                await this.refresh();
              }
            );
            modal.open();
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("View Statistics").setIcon("bar-chart").onClick(() => {
            this.plugin.activateStats();
          })
        );
        menu.addSeparator();
        menu.addItem(
          (item) => item.setTitle("Delete").setIcon("trash").onClick(() => this.deleteContentUnit(unit))
        );
        menu.showAtMouseEvent(e);
      }
      getTypeIcon(type) {
        const icons = {
          "highlight": "\u2728",
          "bold": "**",
          "tag": "\u{1F3F7}",
          "custom": "\u2B50"
        };
        return icons[type] || "\u2022";
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      /* \u5DE5\u5177\u680F\u6837\u5F0F */
      .learning-system-toolbar {
        padding: 10px;
        border-bottom: 1px solid var(--background-modifier-border);
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .search-container { display: flex; }

      .search-input {
        flex: 1;
        padding: 6px 10px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
      }

      .group-container {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .group-label {
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .group-select {
        padding: 4px 8px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
      }

      .refresh-btn {
        padding: 4px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
        cursor: pointer;
        font-size: 16px;
      }

      .refresh-btn:hover { background: var(--background-modifier-hover); }

      .stats-container {
        color: var(--text-muted);
        font-size: 0.9em;
      }

      /* \u5185\u5BB9\u533A\u57DF\u6837\u5F0F */
      .learning-system-content {
        padding: 10px;
        overflow-y: auto;
      }

      .empty-state {
        text-align: center;
        color: var(--text-muted);
        padding: 40px 20px;
      }

      .file-group, .tag-group, .date-group { margin-bottom: 20px; }

      .group-header {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        background: var(--background-secondary);
        border-radius: 6px;
        cursor: pointer;
        margin-bottom: 8px;
      }

      .group-header:hover { background: var(--background-modifier-hover); }

      .group-title {
        flex: 1;
        display: flex;
        align-items: center;
        font-weight: 500;
      }

      .group-icon { margin-right: 4px; }

      .count-badge {
        background: var(--interactive-accent);
        color: white;
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 0.85em;
        font-weight: 500;
      }

      .collapse-btn {
        color: var(--text-muted);
        user-select: none;
        cursor: pointer;
      }

      /* \u6587\u4EF6\u6279\u6CE8\u663E\u793A */
      .file-annotation-display {
        margin: 8px 0 12px 0;
        padding: 8px 12px;
        background: var(--background-secondary-alt);
        border-radius: 4px;
        font-size: 0.9em;
      }

      .file-annotation-item {
        padding: 4px 0;
        color: var(--text-muted);
      }

      .file-annotation-item strong { color: var(--text-normal); }

      /* \u5185\u5BB9\u5361\u7247\u6837\u5F0F */
      .group-content {
        display: flex;
        flex-direction: column;
        gap: 8px;
        padding-left: 8px;
      }

      .content-card {
        padding: 12px;
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        transition: all 0.2s;
      }

      .content-card:hover {
        border-color: var(--interactive-accent);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .card-content {
        margin-bottom: 8px;
        display: flex;
        align-items: flex-start;
        gap: 4px;
        flex-wrap: wrap;
      }

      .type-icon { color: var(--text-muted); }

      .content-text {
        flex: 1;
        line-height: 1.5;
        word-wrap: break-word;
      }

      .clickable-content {
        cursor: pointer;
        transition: all 0.2s;
        padding: 4px;
        border-radius: 4px;
      }

      .clickable-content:hover {
        background: var(--background-modifier-hover);
        color: var(--interactive-accent);
      }

      .annotation-badge, .flashcard-badge {
        font-size: 14px;
        cursor: pointer;
        margin-left: 4px;
      }

      .annotation-badge.has-annotation {
        color: var(--interactive-accent);
      }

      /* \u6279\u6CE8\u663E\u793A\u6837\u5F0F */
      .annotation-display {
        margin: 10px 0;
        padding: 12px;
        background: var(--background-secondary-alt);
        border-left: 3px solid var(--interactive-accent);
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .annotation-display:hover {
        background: var(--background-modifier-hover);
        border-left-color: var(--interactive-accent-hover);
      }

      .annotation-content-display {
        line-height: 1.6;
        color: var(--text-normal);
        margin-bottom: 6px;
      }

      .annotation-content-display strong {
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .annotation-timestamp {
        font-size: 0.8em;
        color: var(--text-faint);
        text-align: right;
      }

      .annotation-badge-display {
        display: inline-block;
        padding: 3px 10px;
        border-radius: 12px;
        color: white;
        font-size: 0.85em;
        font-weight: 500;
        margin-right: 8px;
        margin-bottom: 6px;
      }

      /* \u5185\u8054\u6279\u6CE8\u8F93\u5165 */
      .annotation-input-container {
        margin: 12px 0;
        padding: 12px;
        background: var(--background-primary);
        border: 2px solid var(--interactive-accent);
        border-radius: 6px;
        animation: slideDown 0.2s ease;
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .annotation-textarea {
        width: 100%;
        padding: 10px;
        margin-bottom: 8px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-secondary);
        color: var(--text-normal);
        font-family: inherit;
        font-size: 1em;
        resize: vertical;
        min-height: 60px;
      }

      .annotation-textarea:focus {
        outline: none;
        border-color: var(--interactive-accent);
        background: var(--background-primary);
      }

      .annotation-textarea::placeholder {
        color: var(--text-faint);
      }

      .annotation-buttons {
        display: flex;
        gap: 8px;
        justify-content: flex-end;
      }

      .annotation-buttons button {
        padding: 6px 16px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.9em;
      }

      .annotation-delete-btn {
        background: transparent;
        color: var(--text-muted);
      }

      .annotation-delete-btn:hover {
        color: var(--color-red);
      }

      .annotation-save-btn {
        background: var(--interactive-accent);
        color: white;
      }

      .annotation-save-btn:hover {
        opacity: 0.8;
      }

      /* \u5143\u6570\u636E\u533A\u57DF */
      .card-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 8px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .tags-container {
        display: flex;
        flex-wrap: wrap;
        gap: 4px;
      }

      .tag {
        background: var(--background-secondary);
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.85em;
      }

      .heading-info {
        color: var(--text-muted);
        font-style: italic;
      }

      /* \u64CD\u4F5C\u6309\u94AE */
      .card-actions {
        display: flex;
        gap: 6px;
      }

      .action-btn {
        padding: 4px 10px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
        cursor: pointer;
        font-size: 14px;
        transition: all 0.2s;
      }

      .action-btn:hover {
        background: var(--interactive-accent);
        color: white;
        border-color: var(--interactive-accent);
      }

      .delete-btn:hover {
        background: var(--color-red);
        border-color: var(--color-red);
      }

      /* \u4E00\u952E\u521B\u5EFA\u95EA\u5361\u6309\u94AE\u7EC4 */
      .flashcard-btn-group {
        display: flex;
        gap: 0;
      }

      .quick-card-btn {
        border-radius: 4px 0 0 4px;
        border-right: none;
      }

      .more-card-btn {
        border-radius: 0 4px 4px 0;
        padding: 4px 6px;
        font-size: 10px;
      }

      .quick-card-btn:hover, .more-card-btn:hover {
        background: var(--interactive-accent);
        color: white;
      }

      .batch-create-btn {
        padding: 6px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--interactive-accent);
        color: white;
        cursor: pointer;
        font-weight: 500;
        transition: all 0.2s;
      }

      .batch-create-btn:hover {
        opacity: 0.8;
      }

      .batch-actions-overview {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .batch-mode-btn,
      .select-all-btn,
      .batch-delete-btn,
      .batch-create-cards-btn {
        padding: 6px 12px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        background: var(--background-primary);
        color: var(--text-normal);
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.9em;
        font-weight: 500;
      }

      .select-all-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .batch-mode-btn:hover {
        background: var(--background-modifier-hover);
      }

      .batch-delete-btn:hover {
        background: var(--color-red);
        border-color: var(--color-red);
        color: white;
      }

      .batch-create-cards-btn:hover {
        background: var(--interactive-accent);
        border-color: var(--interactive-accent);
        color: white;
      }

      .batch-checkbox {
        margin-right: 8px;
        cursor: pointer;
      }
    `;
        document.head.appendChild(styleEl);
      }
    };
    BatchCreateModal = class extends import_obsidian4.Modal {
      constructor(app, plugin, quickCreator, units, onComplete) {
        super(app);
        this.plugin = plugin;
        this.quickCreator = quickCreator;
        this.units = units;
        this.onComplete = onComplete;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h2", { text: "\u26A1 Batch Create Flashcards" });
        contentEl.createEl("p", {
          text: `Create flashcards for ${this.units.length} content items without cards.`
        });
        const typeContainer = contentEl.createDiv({ cls: "type-select-container" });
        typeContainer.createEl("h3", { text: "Card Type" });
        let selectedType = "smart";
        const types = [
          { value: "smart", label: "\u26A1 Smart (Auto-detect)", desc: "Automatically choose the best type" },
          { value: "qa", label: "\u{1F4DD} Q&A Cards", desc: "Question and answer format" },
          { value: "cloze", label: "\u270F\uFE0F Cloze Cards", desc: "Fill in the blanks" }
        ];
        types.forEach((type) => {
          const option = typeContainer.createDiv({ cls: "type-option" });
          const radio = option.createEl("input", {
            type: "radio",
            value: type.value,
            attr: { name: "card-type" }
          });
          if (type.value === "smart")
            radio.checked = true;
          const label = option.createDiv({ cls: "type-label" });
          label.createEl("strong", { text: type.label });
          label.createEl("div", { text: type.desc, cls: "type-desc" });
          option.addEventListener("click", () => {
            radio.checked = true;
            selectedType = type.value;
          });
        });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => this.close());
        const createBtn = buttonContainer.createEl("button", {
          text: `Create ${this.units.length} Cards`,
          cls: "mod-cta"
        });
        createBtn.addEventListener("click", async () => {
          await this.batchCreate(selectedType);
        });
        this.addStyles();
      }
      async batchCreate(type) {
        const { success, failed } = await this.quickCreator.createBatchCards(this.units, type);
        new import_obsidian4.Notice(`\u2705 Created ${success} flashcards! ${failed > 0 ? `(${failed} failed)` : ""}`);
        this.close();
        this.onComplete();
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      .type-select-container {
        margin: 20px 0;
      }

      .type-option {
        padding: 15px;
        margin: 10px 0;
        background: var(--background-secondary);
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .type-option:hover {
        border-color: var(--interactive-accent);
        background: var(--background-modifier-hover);
      }

      .type-option input[type="radio"] {
        margin-right: 10px;
      }

      .type-label {
        display: inline-block;
        vertical-align: top;
      }

      .type-desc {
        font-size: 0.9em;
        color: var(--text-muted);
        margin-top: 4px;
      }
    `;
        document.head.appendChild(styleEl);
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
    ConfirmModal = class extends import_obsidian4.Modal {
      constructor(app, title, message, onConfirm, onCancel) {
        super(app);
        this.title = title;
        this.message = message;
        this.onConfirm = onConfirm;
        this.onCancel = onCancel;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h2", { text: this.title });
        contentEl.createEl("p", { text: this.message });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => {
          this.close();
          this.onCancel();
        });
        const confirmBtn = buttonContainer.createEl("button", {
          text: "Delete",
          cls: "mod-warning"
        });
        confirmBtn.addEventListener("click", () => {
          this.close();
          this.onConfirm();
        });
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
  }
});

// src/ui/view/AnnotationModal.ts
var AnnotationModal_exports = {};
__export(AnnotationModal_exports, {
  AnnotationModal: () => AnnotationModal,
  FileAnnotationModal: () => FileAnnotationModal
});
var import_obsidian10, AnnotationModal, FileAnnotationModal;
var init_AnnotationModal = __esm({
  "src/ui/view/AnnotationModal.ts"() {
    import_obsidian10 = require("obsidian");
    AnnotationModal = class extends import_obsidian10.Modal {
      constructor(app, plugin, contentUnit, onSave) {
        super(app);
        this.plugin = plugin;
        this.annotationText = "";
        this.badgeText = "";
        this.badgeColor = "#5B9BD5";
        this.contentUnit = contentUnit;
        this.onSave = onSave;
        this.existingAnnotation = this.plugin.annotationManager.getContentAnnotation(
          contentUnit.id
        );
        if (this.existingAnnotation) {
          this.annotationText = this.existingAnnotation.content;
          if (this.existingAnnotation.badge) {
            this.badgeText = this.existingAnnotation.badge.text;
            this.badgeColor = this.existingAnnotation.badge.color;
          }
        }
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.addClass("annotation-modal");
        contentEl.createEl("h2", {
          text: this.existingAnnotation ? "Edit Annotation" : "Add Annotation"
        });
        const contentPreview = contentEl.createDiv({ cls: "annotation-content-preview" });
        contentPreview.createEl("h3", { text: "Content:" });
        contentPreview.createEl("blockquote", { text: this.contentUnit.content });
        new import_obsidian10.Setting(contentEl).setName("Annotation").setDesc("Add your notes or comments about this content").addTextArea((text) => {
          text.setPlaceholder("Enter your annotation here...").setValue(this.annotationText).onChange((value) => {
            this.annotationText = value;
          });
          text.inputEl.rows = 6;
          text.inputEl.style.width = "100%";
        });
        contentEl.createEl("h3", { text: "Badge (Optional)" });
        new import_obsidian10.Setting(contentEl).setName("Badge text").setDesc('Short text to display as a badge (e.g., "\u91CD\u8981", "\u5F85\u590D\u4E60")').addText(
          (text) => text.setPlaceholder("Badge text").setValue(this.badgeText).onChange((value) => {
            this.badgeText = value;
            this.updateBadgePreview();
          })
        );
        new import_obsidian10.Setting(contentEl).setName("Badge color").setDesc("Choose a color for the badge").addDropdown((dropdown) => {
          dropdown.addOption("#5B9BD5", "\u{1F535} Blue").addOption("#70AD47", "\u{1F7E2} Green").addOption("#FFC000", "\u{1F7E1} Yellow").addOption("#FF6B6B", "\u{1F534} Red").addOption("#C78BFF", "\u{1F7E3} Purple").addOption("#FF9F43", "\u{1F7E0} Orange").setValue(this.badgeColor).onChange((value) => {
            this.badgeColor = value;
            this.updateBadgePreview();
          });
        });
        const badgePreview = contentEl.createDiv({ cls: "badge-preview-container" });
        badgePreview.createEl("span", { text: "Preview: ", cls: "preview-label" });
        const badgeEl = badgePreview.createEl("span", { cls: "badge-preview" });
        this.badgePreviewEl = badgeEl;
        this.updateBadgePreview();
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        if (this.existingAnnotation) {
          const deleteBtn = buttonContainer.createEl("button", {
            text: "Delete",
            cls: "mod-warning"
          });
          deleteBtn.addEventListener("click", async () => {
            await this.deleteAnnotation();
          });
        }
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => {
          this.close();
        });
        const saveBtn = buttonContainer.createEl("button", {
          text: "Save",
          cls: "mod-cta"
        });
        saveBtn.addEventListener("click", async () => {
          await this.saveAnnotation();
        });
        this.addStyles();
      }
      updateBadgePreview() {
        if (!this.badgePreviewEl)
          return;
        if (this.badgeText) {
          this.badgePreviewEl.textContent = this.badgeText;
          this.badgePreviewEl.style.backgroundColor = this.badgeColor;
          this.badgePreviewEl.style.display = "inline-block";
        } else {
          this.badgePreviewEl.textContent = "No badge";
          this.badgePreviewEl.style.backgroundColor = "transparent";
          this.badgePreviewEl.style.color = "var(--text-muted)";
        }
      }
      async saveAnnotation() {
        if (!this.annotationText.trim()) {
          new import_obsidian10.Notice("Please enter annotation text");
          return;
        }
        try {
          let annotation;
          if (this.existingAnnotation) {
            await this.plugin.annotationManager.updateAnnotation(
              this.existingAnnotation.id,
              {
                content: this.annotationText,
                badge: this.badgeText ? {
                  text: this.badgeText,
                  color: this.badgeColor
                } : void 0
              }
            );
            annotation = this.plugin.annotationManager.getAnnotation(
              this.existingAnnotation.id
            );
            new import_obsidian10.Notice("Annotation updated");
          } else {
            annotation = await this.plugin.annotationManager.addContentAnnotation(
              this.contentUnit.id,
              this.annotationText,
              this.badgeText ? {
                text: this.badgeText,
                color: this.badgeColor
              } : void 0
            );
            new import_obsidian10.Notice("Annotation added");
          }
          this.onSave(annotation);
          this.close();
        } catch (error) {
          console.error("Error saving annotation:", error);
          new import_obsidian10.Notice("Error saving annotation");
        }
      }
      async deleteAnnotation() {
        if (!this.existingAnnotation)
          return;
        try {
          await this.plugin.annotationManager.deleteAnnotation(
            this.existingAnnotation.id
          );
          new import_obsidian10.Notice("Annotation deleted");
          this.close();
          this.onSave(null);
        } catch (error) {
          console.error("Error deleting annotation:", error);
          new import_obsidian10.Notice("Error deleting annotation");
        }
      }
      addStyles() {
        const styleEl = document.createElement("style");
        styleEl.textContent = `
      .annotation-modal {
        padding: 20px;
      }

      .annotation-content-preview {
        margin: 20px 0;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .annotation-content-preview h3 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: var(--text-muted);
      }

      .annotation-content-preview blockquote {
        margin: 0;
        padding: 10px;
        border-left: 3px solid var(--interactive-accent);
        background: var(--background-primary);
        border-radius: 4px;
      }

      .badge-preview-container {
        margin: 10px 0;
        padding: 10px;
        background: var(--background-secondary);
        border-radius: 4px;
      }

      .preview-label {
        color: var(--text-muted);
        margin-right: 10px;
      }

      .badge-preview {
        padding: 4px 10px;
        border-radius: 12px;
        color: white;
        font-size: 0.85em;
        font-weight: 500;
      }

      .modal-button-container {
        display: flex;
        gap: 10px;
        justify-content: flex-end;
        margin-top: 20px;
      }

      .modal-button-container button {
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
      }
    `;
        document.head.appendChild(styleEl);
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
    FileAnnotationModal = class extends import_obsidian10.Modal {
      constructor(app, plugin, filePath, onSave) {
        super(app);
        this.plugin = plugin;
        this.existingAnnotations = [];
        this.annotationText = "";
        this.filePath = filePath;
        this.onSave = onSave;
        this.existingAnnotations = this.plugin.annotationManager.getFileAnnotations(filePath);
      }
      onOpen() {
        var _a;
        const { contentEl } = this;
        contentEl.createEl("h2", { text: "File Annotations" });
        const fileName = ((_a = this.filePath.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || this.filePath;
        contentEl.createEl("p", {
          text: `File: ${fileName}`,
          cls: "file-name"
        });
        if (this.existingAnnotations.length > 0) {
          const existingSection = contentEl.createDiv({ cls: "existing-annotations" });
          existingSection.createEl("h3", { text: "Existing Annotations" });
          this.existingAnnotations.forEach((annotation) => {
            const annotationCard = existingSection.createDiv({ cls: "annotation-card" });
            annotationCard.createEl("p", { text: annotation.content });
            const date = new Date(annotation.metadata.createdAt).toLocaleDateString();
            annotationCard.createEl("small", {
              text: `Created: ${date}`,
              cls: "annotation-date"
            });
            const deleteBtn = annotationCard.createEl("button", {
              text: "\u{1F5D1} Delete",
              cls: "delete-annotation-btn"
            });
            deleteBtn.addEventListener("click", async () => {
              await this.deleteAnnotation(annotation.id);
              this.close();
              this.onSave();
            });
          });
        }
        contentEl.createEl("h3", { text: "Add New Annotation" });
        new import_obsidian10.Setting(contentEl).setName("Annotation").setDesc("Add notes about this file").addTextArea((text) => {
          text.setPlaceholder("Enter file annotation...").setValue(this.annotationText).onChange((value) => {
            this.annotationText = value;
          });
          text.inputEl.rows = 4;
          text.inputEl.style.width = "100%";
        });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
        cancelBtn.addEventListener("click", () => {
          this.close();
        });
        const saveBtn = buttonContainer.createEl("button", {
          text: "Save",
          cls: "mod-cta"
        });
        saveBtn.addEventListener("click", async () => {
          await this.saveAnnotation();
        });
      }
      async saveAnnotation() {
        if (!this.annotationText.trim()) {
          new import_obsidian10.Notice("Please enter annotation text");
          return;
        }
        try {
          await this.plugin.annotationManager.addFileAnnotation(
            this.filePath,
            this.annotationText
          );
          new import_obsidian10.Notice("File annotation added");
          this.close();
          this.onSave();
        } catch (error) {
          console.error("Error saving file annotation:", error);
          new import_obsidian10.Notice("Error saving file annotation");
        }
      }
      async deleteAnnotation(id) {
        try {
          await this.plugin.annotationManager.deleteAnnotation(id);
          new import_obsidian10.Notice("Annotation deleted");
        } catch (error) {
          console.error("Error deleting annotation:", error);
          new import_obsidian10.Notice("Error deleting annotation");
        }
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => LearningSystemPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian11 = require("obsidian");

// src/ui/view/SettingsTab.ts
var import_obsidian = require("obsidian");
var SettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Learning System Settings" });
    new import_obsidian.Setting(containerEl).setName("Enable extraction").setDesc("Enable automatic content extraction").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.extractionEnabled).onChange(async (value) => {
        this.plugin.settings.extractionEnabled = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Auto scan").setDesc("Automatically scan files when they are opened").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.autoScan).onChange(async (value) => {
        this.plugin.settings.autoScan = value;
        await this.plugin.saveSettings();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Default deck").setDesc("Default deck name for new flashcards").addText(
      (text) => text.setPlaceholder("Default").setValue(this.plugin.settings.defaultDeck).onChange(async (value) => {
        this.plugin.settings.defaultDeck = value;
        await this.plugin.saveSettings();
      })
    );
  }
};

// src/main.ts
init_OverviewView();

// src/ui/style/sidebarStyle.ts
var StyleLoader = class {
  /**
   * 注入样式到页面
   */
  static inject() {
    if (this.isInjected || document.getElementById(this.styleId)) {
      return;
    }
    const styleEl = document.createElement("style");
    styleEl.id = this.styleId;
    styleEl.textContent = this.getStyles();
    document.head.appendChild(styleEl);
    this.isInjected = true;
  }
  /**
   * 移除样式
   */
  static remove() {
    const styleEl = document.getElementById(this.styleId);
    if (styleEl) {
      styleEl.remove();
      this.isInjected = false;
    }
  }
  /**
   * 获取所有样式（从这里统一管理）
   */
  static getStyles() {
    return `
  /* ==================== CSS \u53D8\u91CF\u914D\u7F6E ==================== */
  .learning-overview-container {
    --overview-sidebar-width: 250px;
    --overview-card-gap: 8px;
    --overview-border-radius: 6px;
    --overview-transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* ==================== \u5168\u5C40\u5BB9\u5668 ==================== */
  .learning-overview-container {
    height: 100%;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    background: var(--background-primary);
  }
  
  /* ==================== \u4FA7\u8FB9\u680F\u6A21\u5F0F ==================== */
  .learning-overview-container[data-mode="sidebar"] {
    padding: 0;
  }
  
  .sidebar-toolbar {
    padding: 12px;
    border-bottom: 1px solid var(--background-modifier-border);
    background: var(--background-primary);
    flex-shrink: 0;
    position: relative;
    z-index: 10;
  }
  
  .sidebar-content-list {
    flex: 1;
    overflow-y: auto;
    padding: var(--overview-card-gap);
    position: relative;
    z-index: 1;
  }
  
  /* ==================== \u5DE5\u5177\u680F\u7EC4\u4EF6 ==================== */
  .search-container {
    margin-bottom: 10px;
  }
  
  .search-input {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid var(--background-modifier-border);
    border-radius: var(--overview-border-radius);
    font-size: 13px;
    background: var(--background-primary);
    color: var(--text-normal);
    transition: var(--overview-transition);
  }
  
  .search-input:focus {
    outline: none;
    border-color: var(--interactive-accent);
  }
  
  .filter-chips {
    display: flex;
    gap: 6px;
    margin-bottom: 10px;
  }
  
  .filter-chip {
    flex: 1;
    text-align: center;
    padding: 6px 8px;
    font-size: 11px;
    border-radius: 12px;
    background: var(--background-secondary);
    cursor: pointer;
    transition: var(--overview-transition);
    border: 1px solid transparent;
  }
  
  .filter-chip:hover {
    background: var(--background-modifier-hover);
  }
  
  .filter-chip.active {
    background: var(--interactive-accent);
    color: var(--text-on-accent);
    font-weight: 600;
    border-color: var(--interactive-accent);
  }
  
  .group-switcher {
    display: flex;
    gap: 6px;
    margin-bottom: 10px;
  }
  
  .group-btn {
    flex: 1;
    text-align: center;
    padding: 6px;
    font-size: 16px;
    border-radius: var(--overview-border-radius);
    background: var(--background-secondary);
    cursor: pointer;
    transition: var(--overview-transition);
    border: 1px solid transparent;
  }
  
  .group-btn:hover {
    background: var(--background-modifier-hover);
  }
  
  .group-btn.active {
    background: var(--interactive-accent);
    border-color: var(--interactive-accent);
    transform: scale(1.05);
  }
  
  /* ==================== \u6279\u91CF\u64CD\u4F5C ==================== */
  .stats-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 3px;
  }
  
  .header-actions {
    display: flex;
    gap: 8px;
    align-items: center;
  }
  
  .batch-create-cards-btn-sidebar,
  .batch-delete-btn-sidebar,
  .cancel-selection-btn-sidebar {
    padding: 6px;
    border: 1px solid var(--background-modifier-border);
    border-radius: var(--overview-border-radius);
    background: var(--background-secondary);
    cursor: pointer;
    transition: var(--overview-transition);
    font-size: 11px;
    font-weight: 500;
    white-space: nowrap;
  }
  
  .batch-create-cards-btn-sidebar:hover {
    background: var(--interactive-accent);
    color: white;
    border-color: var(--interactive-accent);
  }
  
  .batch-delete-btn-sidebar:hover {
    background: var(--color-red);
    color: white;
    border-color: var(--color-red);
  }
  
  .cancel-selection-btn-sidebar:hover {
    background: var(--background-modifier-hover);
    color: var(--text-normal);
    border-color: var(--text-muted);
  }
  
  .batch-create-cards-btn-header,
  .batch-delete-btn-header,
  .cancel-selection-btn-header {
    padding: 8px 16px;
    font-size: 13px;
    border-radius: var(--overview-border-radius);
    border: 1px solid var(--background-modifier-border);
    background: var(--background-secondary);
    cursor: pointer;
    transition: var(--overview-transition);
    font-weight: 500;
    white-space: nowrap;
  }
  
  .batch-create-cards-btn-header:hover {
    background: var(--interactive-accent);
    color: white;
    border-color: var(--interactive-accent);
  }
  
  .batch-delete-btn-header:hover {
    background: var(--color-red);
    color: white;
    border-color: var(--color-red);
  }
  
  .cancel-selection-btn-header:hover {
    background: var(--background-modifier-hover);
    color: var(--text-normal);
    border-color: var(--text-muted);
  }
  
  .select-all-btn-sidebar {
    padding: 6px 12px;
    border: 1px solid var(--background-modifier-border);
    border-radius: var(--overview-border-radius);
    background: var(--background-secondary);
    cursor: pointer;
    transition: var(--overview-transition);
    font-size: 11px;
    font-weight: 500;
    flex-shrink: 0;
  }
  
  .select-all-btn-sidebar:hover,
  .select-all-btn-sidebar.completed {
    background: var(--interactive-accent);
    border-color: var(--interactive-accent);
    color: white;
  }
  
  .select-all-btn-header {
    padding: 8px 16px;
    font-size: 13px;
    border-radius: var(--overview-border-radius);
    background: var(--background-secondary);
    color: var(--text-normal);
    border: 1px solid var(--background-modifier-border);
    cursor: pointer;
    transition: var(--overview-transition);
    font-weight: 500;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  }
  
  .select-all-btn-header:hover,
  .select-all-btn-header.completed {
    background: var(--interactive-accent);
    color: var(--text-on-accent);
    border-color: var(--interactive-accent);
    transform: translateY(-1px);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  }
  
  .stats-badge {
    text-align: center;
    font-size: 11px;
    color: var(--text-muted);
    padding: 4px;
    flex: 1;
  }
  
  .batch-actions {
    display: flex;
    gap: 6px;
    margin-top: 10px;
    flex-wrap: wrap;
    padding: 8px;
    background: var(--background-secondary-alt);
    border-radius: var(--overview-border-radius);
    animation: slideDown 0.2s ease;
  }
  
  /* ==================== \u5361\u7247\u6837\u5F0F ==================== */
  .compact-card {
    display: flex;
    gap: 8px;
    padding: 10px;
    margin: 4px 0;
    background: var(--background-primary);
    border: 1px solid var(--background-modifier-border);
    border-radius: var(--overview-border-radius);
    transition: var(--overview-transition);
  }
  
  .compact-card:hover {
    border-color: var(--interactive-accent);
    background: var(--background-primary-alt);
    transform: translateX(2px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  
  .card-indicator {
    width: 4px;
    border-radius: 2px;
    background: var(--background-modifier-border);
    flex-shrink: 0;
    transition: var(--overview-transition);
  }
  
  .card-indicator.type-qa {
    background: linear-gradient(to bottom, transparent 0%, transparent 50%, #10b981 50%, #10b981 100%);
  }
  
  .card-indicator.type-cloze {
    background: linear-gradient(to bottom, transparent 0%, transparent 50%, #FFF176 50%, #FFF176 100%);
  }
  
  .card-indicator.type-text {
    background: linear-gradient(to bottom, transparent 0%, transparent 50%, #6b7280 50%, #6b7280 100%);
  }
  
  .card-indicator.type-qa.has-annotation {
    background: linear-gradient(to bottom, #3b82f6 0%, #3b82f6 50%, #10b981 50%, #10b981 100%);
  }
  
  .card-indicator.type-cloze.has-annotation {
    background: linear-gradient(to bottom, #3b82f6 0%, #3b82f6 50%, #FFF176 50%, #FFF176 100%);
  }
  
  .card-indicator.type-text.has-annotation {
    background: linear-gradient(to bottom, #3b82f6 0%, #3b82f6 50%, #6b7280 50%, #6b7280 100%);
  }
  
  .type-indicator {
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
  }
  
  .type-indicator.type-qa {
    background: rgba(16, 185, 129, 0.2);
    color: #10b981;
  }
  
  .type-indicator.type-cloze {
    background: rgba(255, 241, 118, 0.2);
    color: #FFF176;
  }
  
  .type-indicator.type-text {
    background: rgba(107, 114, 128, 0.2);
    color: #6b7280;
  }
  
  .card-content {
    flex: 1;
    min-width: 0;
  }
  
  .card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 6px;
  }
  
  .card-tools {
    display: flex;
    gap: 4px;
  }
  
  .tool-btn {
    cursor: pointer;
    font-size: 14px;
    padding: 4px;
    border-radius: 4px;
    transition: var(--overview-transition);
  }
  
  .tool-btn:hover {
    background: var(--background-modifier-hover);
  }
  
  .annotation-btn {
    cursor: pointer;
    font-size: 14px;
    padding: 4px;
    border-radius: 4px;
    transition: var(--overview-transition);
  }
  
  .annotation-btn:hover {
    background: var(--background-modifier-hover);
    transform: scale(1.1);
  }
  
  .note-text {
    font-size: 12px;
    line-height: 1.6;
    color: var(--text-normal);
    cursor: pointer;
    word-wrap: break-word;
    word-break: break-word;
    white-space: normal;
    overflow-wrap: break-word;
    margin-bottom: 6px;
  }
  
  .note-text:hover {
    color: var(--interactive-accent);
  }
  
  .qa-question {
    font-weight: 500;
    color: var(--text-normal);
  }
  
  .qa-separator {
    color: var(--text-muted);
    margin: 0 4px;
  }
  
  .qa-answer {
    color: var(--text-accent);
    font-style: italic;
  }
  
  .cloze-highlight {
    color: #f59e0b;
    font-weight: 500;
    padding: 1px 3px;
    border-radius: 3px;
  }
  
  .annotation-preview {
    font-size: 11px;
    line-height: 1.4;
    color: var(--text-muted);
    padding: 6px 8px;
    background: var(--background-secondary);
    border-radius: 4px;
    margin-top: 6px;
    border-left: 3px solid var(--interactive-accent);
    cursor: pointer;
    transition: var(--overview-transition);
  }
  
  .annotation-preview:hover {
    background: var(--background-modifier-hover);
  }
  
  .card-meta {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 8px;
  }
  
  .tag {
    padding: 2px 6px;
    background: var(--tag-background);
    color: var(--tag-color);
    border-radius: 4px;
    font-size: 10px;
    font-weight: 500;
  }
  
  .badge {
    padding: 2px 6px;
    background: var(--background-modifier-border);
    border-radius: 4px;
    font-size: 10px;
  }
  
  .group-header {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 8px;
    background: var(--background-secondary);
    border-radius: var(--overview-border-radius);
    margin-bottom: 6px;
    font-size: 12px;
    font-weight: 600;
    position: sticky;
    top: 0;
    z-index: 10;
  }
  
  /* ==================== \u6279\u6CE8\u7F16\u8F91\u5668 ==================== */
  .inline-annotation-editor {
    margin-top: 8px;
    padding: 0;
    background: transparent;
    animation: slideDown 0.15s ease-out;
  }
  
  .inline-annotation-textarea {
    width: 100%;
    min-height: 80px;
    padding: 12px 14px;
    border: 1px solid var(--background-modifier-border);
    border-radius: var(--overview-border-radius);
    background: var(--background-primary-alt);
    color: var(--text-normal);
    font-family: var(--font-text);
    font-size: 13px;
    line-height: 1.5;
    resize: vertical;
    transition: var(--overview-transition);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }
  
  .inline-annotation-textarea:focus {
    outline: none;
    border-color: var(--interactive-accent);
    background: var(--background-primary);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  }
  
  .inline-annotation-textarea::placeholder {
    color: var(--text-faint);
    font-style: italic;
  }
  
  .inline-annotation-hint {
    margin-top: 6px;
    font-size: 11px;
    color: var(--text-faint);
    font-style: italic;
    text-align: left;
  }
  
  .grid-card .inline-annotation-editor {
    margin-top: 8px;
  }
  
  .grid-card .inline-annotation-textarea {
    min-height: 100px;
    font-size: 14px;
    padding: 8px 14px;
  }
  
  /* ==================== \u4E3B\u754C\u9762\u5E03\u5C40 ==================== */
  .main-layout {
    display: grid;
    grid-template-columns: var(--overview-sidebar-width) 1fr;
    gap: 1px;
    height: 100%;
    background: var(--background-modifier-border);
  }
  
  .left-panel {
    background: var(--background-primary);
    overflow-y: auto;
    display: flex;
    flex-direction: column;
  }
  
  .right-panel {
    background: var(--background-primary);
    overflow-y: auto;
    padding: var(--overview-card-gap);
  }
  
  .fixed-entries {
    padding: 12px;
    border-bottom: 1px solid var(--background-modifier-border);
    display: flex;
    flex-direction: column;
    gap: 6px;
  }
  
  .entry-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 12px;
    border-radius: var(--overview-border-radius);
    cursor: pointer;
    transition: var(--overview-transition);
    font-size: 13px;
    font-weight: 500;
    background: var(--background-secondary);
  }
  
  .entry-btn:hover {
    background: var(--background-modifier-hover);
    transform: translateX(2px);
  }
  
  .entry-btn.active {
    background: var(--interactive-accent);
    color: var(--text-on-accent);
  }
  
  /* ==================== \u4E3B\u754C\u9762\u5DE5\u5177\u680F ==================== */
  .main-toolbar {
    padding: 12px;
    border-bottom: 1px solid var(--background-modifier-border);
    background: var(--background-primary);
  }
  
  .search-input-main {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid var(--background-modifier-border);
    border-radius: var(--overview-border-radius);
    font-size: 13px;
    background: var(--background-primary);
    color: var(--text-normal);
    margin-bottom: 10px;
    transition: var(--overview-transition);
  }
  
  .search-input-main:focus {
    outline: none;
    border-color: var(--interactive-accent);
  }
  
  .group-switcher-main {
    display: flex;
    gap: 6px;
  }
  
  .group-btn-main {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    padding: 8px 10px;
    font-size: 12px;
    border-radius: var(--overview-border-radius);
    background: var(--background-secondary);
    cursor: pointer;
    transition: var(--overview-transition);
    font-weight: 500;
  }
  
  .group-btn-main:hover {
    background: var(--background-modifier-hover);
    transform: translateY(-1px);
  }
  
  .group-btn-main.active {
    background: var(--interactive-accent);
    color: var(--text-on-accent);
  }
  
  .batch-actions-main {
    display: flex;
    gap: 8px;
    margin-top: 10px;
    flex-wrap: wrap;
  }
  
  .batch-actions-main .batch-mode-btn,
  .batch-actions-main .select-all-btn,
  .batch-actions-main .batch-delete-btn,
  .batch-actions-main .batch-create-cards-btn {
    padding: 8px 16px;
    font-size: 12px;
  }
  
  .batch-actions-main .select-all-btn:hover {
    background: var(--interactive-accent);
    border-color: var(--interactive-accent);
    color: white;
  }
  
  .panel-title {
    font-size: 13px;
    font-weight: 600;
    padding: 12px;
    margin: 0;
    color: var(--text-muted);
  }
  
  .file-list {
    padding: 0 8px 8px 8px;
    flex: 1;
    overflow-y: auto;
  }
  
  .file-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 10px;
    border-radius: var(--overview-border-radius);
    cursor: pointer;
    transition: var(--overview-transition);
    margin-bottom: 4px;
  }
  
  .file-item:hover {
    background: var(--background-modifier-hover);
  }
  
  .file-item.selected {
    background: var(--interactive-accent);
    color: var(--text-on-accent);
  }
  
  .file-icon {
    font-size: 14px;
  }
  
  .file-name {
    flex: 1;
    font-size: 13px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  
  .file-count {
    font-size: 11px;
    padding: 2px 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
  }
  
  .file-item.selected .file-count {
    background: rgba(255, 255, 255, 0.2);
  }
  
  /* ==================== \u7F51\u683C\u5E03\u5C40 ==================== */
  .grid-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 12px;
    border-bottom: 2px solid var(--background-modifier-border);
  }
  
  .grid-header h2 {
    font-size: 18px;
    font-weight: 600;
    margin: 0;
  }
  
  .content-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: var(--overview-card-gap);
  }
  
  .grid-card {
    background: var(--background-primary);
    border: 1px solid var(--background-modifier-border);
    border-radius: 8px;
    padding: var(--overview-card-gap);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }
  
  .grid-card:hover {
    border-color: var(--interactive-accent);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    transform: translateY(-2px);
  }
  
  .grid-card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--background-modifier-border);
  }
  
  .grid-card-tools {
    display: flex;
    gap: 4px;
  }
  
  .tool-btn-grid {
    cursor: pointer;
    font-size: 16px;
    padding: 4px 6px;
    border-radius: 4px;
    transition: var(--overview-transition);
  }
  
  .tool-btn-grid:hover {
    background: var(--background-modifier-hover);
    transform: scale(1.1);
  }
  
  .grid-note-text {
    font-size: 13px;
    line-height: 1.6;
    color: var(--text-normal);
    cursor: pointer;
    margin-bottom: 10px;
    word-wrap: break-word;
    word-break: break-word;
    white-space: normal;
    overflow-wrap: break-word;
  }
  
  .grid-note-text:hover {
    color: var(--interactive-accent);
  }
  
  .grid-annotation {
    font-size: 12px;
    line-height: 1.5;
    color: var(--text-muted);
    padding: 10px;
    background: var(--background-secondary);
    border-radius: 4px;
    border-left: 3px solid var(--interactive-accent);
    margin-top: 10px;
    cursor: pointer;
    transition: var(--overview-transition);
  }
  
  .grid-annotation:hover {
    background: var(--background-modifier-hover);
  }
  
  .grid-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 10px;
  }
  
  .tag-grid {
    padding: 4px 8px;
    background: var(--tag-background);
    color: var(--tag-color);
    border-radius: 4px;
    font-size: 11px;
    font-weight: 500;
  }
  
  .grid-card-meta {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-top: 10px;
    border-top: 1px solid var(--background-modifier-border);
    font-size: 11px;
  }
  
  .doc-name {
    font-size: 11px;
    color: var(--text-muted);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  .line-info {
    color: var(--text-muted);
  }
  
  .badge-grid {
    padding: 3px 8px;
    background: var(--background-secondary);
    border-radius: 4px;
  }
  
  /* ==================== \u95EA\u5361\u6837\u5F0F ==================== */
  .flashcard-item {
    background: var(--background-primary);
    border: 1px solid var(--background-modifier-border);
    border-radius: 8px;
    padding: 16px;
    transition: var(--overview-transition);
  }
  
  .flashcard-item:hover {
    border-color: var(--interactive-accent);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
  
  .flashcard-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
  }
  
  .flashcard-type {
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
  }
  
  .flashcard-type.qa {
    background: rgba(16, 185, 129, 0.2);
    color: #10b981;
  }
  
  .flashcard-type.cloze {
    background: rgba(255, 241, 118, 0.2);
    color: #FFF176;
  }
  
  .flashcard-body {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  
  .flashcard-question,
  .flashcard-answer {
    font-size: 13px;
    line-height: 1.5;
  }
  
  /* ==================== \u7A7A\u72B6\u6001 ==================== */
  .empty-state {
    text-align: center;
    padding: 40px 20px;
    color: var(--text-muted);
    font-size: 14px;
    // pointer-events: none;
    position: relative;
    z-index: 1;
  }
  
  .empty-hint {
    text-align: center;
    padding: 20px;
    color: var(--text-muted);
    font-size: 13px;
  }
  
  .empty-right-panel {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: var(--text-muted);
  }
  
  .empty-icon {
    font-size: 48px;
    margin-bottom: 16px;
  }
  
  .empty-text {
    font-size: 14px;
  }
  
  /* ==================== \u52A8\u753B ==================== */
  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* ==================== \u54CD\u5E94\u5F0F ==================== */
  @media (max-width: 768px) {
    .main-layout {
      grid-template-columns: 1fr;
    }
  
    .left-panel {
      display: none;
    }
  
    .content-grid {
      grid-template-columns: 1fr;
    }
  }
      `;
  }
};
StyleLoader.styleId = "learning-overview-styles";
StyleLoader.isInjected = false;

// src/ui/view/SidebarOverviewView.ts
var import_obsidian5 = require("obsidian");

// src/ui/state/ViewState.ts
var ViewState = class {
  constructor(forceMainMode = false) {
    // 显示状态
    this.forceMainMode = false;
    this.displayMode = "sidebar";
    this.viewType = "notes";
    // 过滤和分组
    this.searchQuery = "";
    this.filterMode = "all";
    this.groupMode = "file";
    this.selectedFile = null;
    // 批量操作
    this.batchMode = false;
    this.selectedUnitIds = /* @__PURE__ */ new Set();
    this.selectedCardIds = /* @__PURE__ */ new Set();
    // UI状态
    this.activeMenuId = null;
    this.savedScrollPosition = 0;
    this.shouldRestoreScroll = false;
    // 性能优化
    this.searchDebounceTimer = null;
    this.isRendering = false;
    this.forceMainMode = forceMainMode;
    this.displayMode = forceMainMode ? "main" : "sidebar";
  }
  // 状态重置方法
  clearSelection() {
    this.selectedUnitIds.clear();
    this.selectedCardIds.clear();
    this.batchMode = false;
  }
  // 切换批量模式
  toggleBatchMode() {
    this.batchMode = !this.batchMode;
    if (!this.batchMode) {
      this.clearSelection();
    }
  }
  // 搜索相关
  setSearchQuery(query) {
    this.searchQuery = query;
  }
  // 过滤器切换
  setFilterMode(mode) {
    if (this.filterMode !== mode) {
      this.filterMode = mode;
      this.clearSelection();
      return true;
    }
    return false;
  }
  // 分组模式切换
  setGroupMode(mode) {
    if (this.groupMode !== mode) {
      this.groupMode = mode;
      this.selectedFile = null;
      this.clearSelection();
      return true;
    }
    return false;
  }
  // 视图类型切换
  setViewType(type) {
    if (this.viewType !== type) {
      this.viewType = type;
      this.selectedFile = null;
      this.clearSelection();
      return true;
    }
    return false;
  }
  // 批量选择
  toggleUnitSelection(unitId) {
    if (this.selectedUnitIds.has(unitId)) {
      this.selectedUnitIds.delete(unitId);
    } else {
      this.selectedUnitIds.add(unitId);
    }
  }
  toggleCardSelection(cardId) {
    if (this.selectedCardIds.has(cardId)) {
      this.selectedCardIds.delete(cardId);
    } else {
      this.selectedCardIds.add(cardId);
    }
  }
  // 全选逻辑
  selectAllUnits(units) {
    units.forEach((unit) => this.selectedUnitIds.add(unit.id));
    this.batchMode = true;
  }
  selectAllCards(cards) {
    cards.forEach((card) => this.selectedCardIds.add(card.id));
    this.batchMode = true;
  }
  // 取消全选
  deselectAllUnits(units) {
    units.forEach((unit) => this.selectedUnitIds.delete(unit.id));
  }
  deselectAllCards(cards) {
    cards.forEach((card) => this.selectedCardIds.delete(card.id));
  }
  // 判断是否全选
  isAllSelected(items) {
    if (items.length === 0)
      return false;
    if (this.viewType === "cards") {
      return items.every(
        (card) => this.selectedCardIds.has(card.id)
      );
    } else {
      return items.every(
        (unit) => this.selectedUnitIds.has(unit.id)
      );
    }
  }
  // 获取选中数量
  getSelectedCount() {
    return this.viewType === "cards" ? this.selectedCardIds.size : this.selectedUnitIds.size;
  }
};

// src/ui/components/Toolbar.ts
var Toolbar = class {
  constructor(state, callbacks) {
    this.state = state;
    this.onSearchChange = callbacks.onSearchChange;
    this.onFilterChange = callbacks.onFilterChange;
    this.onGroupChange = callbacks.onGroupChange;
  }
  /**
   * 渲染侧边栏工具栏
   */
  renderSidebarToolbar(container) {
    const toolbar = container.createDiv({ cls: "sidebar-toolbar" });
    this.renderSearchBox(toolbar);
    this.renderFilterChips(toolbar);
    this.renderGroupSwitcher(toolbar);
    this.renderStatsRow(toolbar);
    return toolbar;
  }
  /**
   * 渲染主界面工具栏
   */
  renderMainToolbar(container) {
    const toolbar = container.createDiv({ cls: "main-toolbar" });
    this.renderSearchBox(toolbar, true);
    this.renderGroupSwitcher(toolbar, true);
    return toolbar;
  }
  renderSearchBox(container, isMain = false) {
    const searchContainer = container.createDiv({ cls: "search-container" });
    const searchInput = searchContainer.createEl("input", {
      type: "text",
      placeholder: isMain ? "\u{1F50D} \u641C\u7D22..." : "\u{1F50D} \u641C\u7D22\u7B14\u8BB0...",
      cls: isMain ? "search-input-main" : "search-input"
    });
    searchInput.value = this.state.searchQuery;
    searchInput.addEventListener("input", (e) => {
      const value = e.target.value;
      this.onSearchChange(value);
    });
  }
  renderFilterChips(container) {
    const filters = container.createDiv({ cls: "filter-chips" });
    const filterOptions = [
      { mode: "all", icon: "\u{1F4DD}", label: "allnotes" },
      { mode: "annotated", icon: "\u{1F4AC}", label: "comment" },
      { mode: "flashcards", icon: "\u{1F0CF}", label: "flashcards" }
    ];
    filterOptions.forEach(({ mode, icon, label }) => {
      const chip = filters.createDiv({
        cls: `filter-chip ${this.state.filterMode === mode ? "active" : ""}`,
        text: `${icon} ${label}`
      });
      chip.addEventListener("click", () => {
        this.onFilterChange(mode);
      });
    });
  }
  renderGroupSwitcher(container, isMain = false) {
    const groupSwitcher = container.createDiv({
      cls: isMain ? "group-switcher-main" : "group-switcher"
    });
    const groupOptions = isMain ? [
      { mode: "file", icon: "\u{1F4C1}", label: "\u6587\u4EF6", tooltip: "\u6309\u6587\u4EF6" },
      { mode: "annotation", icon: "\u{1F4AC}", label: "\u6279\u6CE8", tooltip: "\u6309\u6279\u6CE8" },
      { mode: "tag", icon: "\u{1F3F7}\uFE0F", label: "\u6807\u7B7E", tooltip: "\u6309\u6807\u7B7E" },
      { mode: "date", icon: "\u{1F4C5}", label: "\u65E5\u671F", tooltip: "\u6309\u65E5\u671F" }
    ] : [
      { mode: "file", icon: "\u{1F4C1}", tooltip: "\u6309\u6587\u4EF6" },
      { mode: "tag", icon: "\u{1F3F7}\uFE0F", tooltip: "\u6309\u6807\u7B7E" },
      { mode: "date", icon: "\u{1F4C5}", tooltip: "\u6309\u65E5\u671F" }
    ];
    groupOptions.forEach(({ mode, icon, label, tooltip }) => {
      const btn = groupSwitcher.createDiv({
        cls: `${isMain ? "group-btn-main" : "group-btn"} ${this.state.groupMode === mode ? "active" : ""}`
      });
      btn.innerHTML = isMain ? `${icon} ` : icon;
      btn.setAttribute("title", tooltip);
      btn.addEventListener("click", () => {
        this.onGroupChange(mode);
      });
    });
  }
  renderStatsRow(container) {
    const statsRow = container.createDiv({ cls: "stats-row" });
    statsRow.setAttribute("data-stats-container", "true");
  }
};

// src/ui/components/BatchActions.ts
var BatchActions = class {
  constructor(state, callbacks) {
    this.state = state;
    this.callbacks = callbacks;
  }
  /**
   * 渲染全选按钮
   */
  renderSelectAllButton(container, visibleItems, styleClass) {
    const btnClass = styleClass === "sidebar" ? "select-all-btn-sidebar" : "select-all-btn-header";
    const isAllChecked = this.state.isAllSelected(visibleItems);
    const itemCount = visibleItems.length;
    const selectAllBtn = container.createEl("button", {
      text: isAllChecked ? "\u2713 \u53D6\u6D88\u5168\u9009" : "\u2610 \u5168\u9009",
      cls: `${btnClass} ${isAllChecked ? "completed" : ""}`,
      title: isAllChecked ? "\u53D6\u6D88\u5F53\u524D\u9875\u9762\u7684\u5168\u9009" : `\u5168\u9009\u5F53\u524D ${itemCount} \u9879`
    });
    const shouldDisable = itemCount === 0 || this.state.groupMode === "annotation" && this.state.displayMode === "main" && !this.state.selectedFile;
    if (shouldDisable) {
      selectAllBtn.disabled = true;
      selectAllBtn.style.opacity = "0.5";
      selectAllBtn.style.cursor = "not-allowed";
      selectAllBtn.title = itemCount === 0 ? "\u6CA1\u6709\u53EF\u9009\u9879" : '\u8BF7\u5148\u9009\u62E9"\u6709\u6279\u6CE8"\u6216"\u65E0\u6279\u6CE8"';
    }
    selectAllBtn.addEventListener("click", () => {
      if (isAllChecked) {
        this.callbacks.onDeselectAll();
      } else {
        this.callbacks.onSelectAll();
      }
    });
    return selectAllBtn;
  }
  /**
   * 渲染批量操作按钮组
   */
  renderActionButtons(container, styleClass) {
    if (!this.state.batchMode)
      return;
    const btnPrefix = styleClass === "sidebar" ? "sidebar" : "header";
    if (this.state.viewType === "notes") {
      const createBtn = this.createButton(
        container,
        styleClass === "sidebar" ? `\u26A1(${this.state.selectedUnitIds.size})` : `\u26A1 \u6279\u91CF\u5236\u5361 (${this.state.selectedUnitIds.size})`,
        `batch-create-cards-btn-${btnPrefix}`,
        "\u6279\u91CF\u5236\u5361",
        () => {
          if (this.state.selectedUnitIds.size === 0) {
            this.callbacks.onBatchCreate();
          } else {
            this.callbacks.onBatchCreate();
          }
        }
      );
      createBtn.addEventListener("mouseenter", () => {
        createBtn.style.background = "var(--interactive-accent)";
        createBtn.style.color = "white";
      });
      createBtn.addEventListener("mouseleave", () => {
        createBtn.style.background = "var(--background-secondary)";
        createBtn.style.color = "";
      });
    }
    const count = this.state.getSelectedCount();
    const deleteBtn = this.createButton(
      container,
      styleClass === "sidebar" ? `\u{1F5D1}\uFE0F(${count})` : `\u{1F5D1}\uFE0F \u5220\u9664 (${count})`,
      `batch-delete-btn-${btnPrefix}`,
      "\u6279\u91CF\u5220\u9664",
      () => this.callbacks.onBatchDelete()
    );
    deleteBtn.addEventListener("mouseenter", () => {
      deleteBtn.style.background = "var(--color-red)";
      deleteBtn.style.color = "white";
    });
    deleteBtn.addEventListener("mouseleave", () => {
      deleteBtn.style.background = "var(--background-secondary)";
      deleteBtn.style.color = "";
    });
    const cancelBtn = this.createButton(
      container,
      styleClass === "sidebar" ? "\u2715" : "\u2715 \u9000\u51FA",
      `cancel-selection-btn-${btnPrefix}`,
      "\u9000\u51FA\u6279\u91CF\u6A21\u5F0F\u5E76\u6E05\u7A7A\u6240\u6709\u9009\u62E9",
      () => this.callbacks.onCancel()
    );
  }
  createButton(container, text, className, title, onClick) {
    const btn = container.createEl("button", {
      text,
      cls: className,
      title
    });
    btn.addEventListener("click", onClick);
    return btn;
  }
  /**
   * 渲染批量选择 Checkbox
   */
  renderCheckbox(container, itemId, isSelected, onChange) {
    const checkbox = container.createEl("input", {
      type: "checkbox",
      cls: "batch-checkbox"
    });
    checkbox.setAttribute("data-item-id", itemId);
    checkbox.checked = isSelected;
    checkbox.addEventListener("change", (e) => {
      onChange(e.target.checked);
    });
    return checkbox;
  }
};

// src/ui/components/ContentCard.ts
var ContentCard = class {
  constructor(state, callbacks) {
    this.state = state;
    this.callbacks = callbacks;
  }
  /**
   * 渲染紧凑卡片（侧边栏模式）
   */
  renderCompact(container, unit) {
    const card = container.createDiv({ cls: "compact-card" });
    if (this.state.batchMode) {
      this.renderCheckbox(card, unit.id, this.state.selectedUnitIds.has(unit.id));
    }
    this.renderIndicator(card, unit);
    const content = card.createDiv({ cls: "card-content" });
    this.renderCardHeader(content, card, unit);
    this.renderCardContent(content, unit);
    this.renderAnnotationPreview(content, card, unit);
    this.renderCardMeta(content, unit);
  }
  /**
   * 渲染网格卡片（主界面模式）
   */
  renderGrid(container, unit) {
    const card = container.createDiv({ cls: "grid-card" });
    if (this.state.batchMode) {
      this.renderCheckbox(card, unit.id, this.state.selectedUnitIds.has(unit.id));
    }
    const header = card.createDiv({ cls: "grid-card-header" });
    header.addEventListener("click", () => {
      this.callbacks.onJumpToSource(unit);
    });
    this.renderTypeIndicator(header, unit);
    this.renderFileName(header, unit);
    this.renderGridTools(header, unit);
    const content = card.createDiv({ cls: "grid-card-content" });
    this.renderGridContent(content, card, unit);
    this.renderGridAnnotation(content, card, unit);
    this.renderGridTags(content, unit);
    const meta = card.createDiv({ cls: "grid-card-meta" });
    this.renderGridMeta(meta, unit);
  }
  /**
   * 渲染闪卡网格
   */
  renderFlashcardGrid(container, card) {
    const cardEl = container.createDiv({ cls: "grid-card flashcard-grid-card" });
    if (this.state.batchMode) {
      this.renderCheckbox(cardEl, card.id, this.state.selectedCardIds.has(card.id));
    }
    const header = cardEl.createDiv({ cls: "grid-card-header" });
    header.addEventListener("click", () => {
      if (this.callbacks.onFlashcardContextMenu) {
      }
    });
    const typeLabel = header.createDiv({
      cls: `flashcard-type ${card.type}`,
      text: card.type === "qa" ? "Q&A" : "\u586B\u7A7A"
    });
    const tools = header.createDiv({ cls: "grid-card-tools" });
    const moreBtn = tools.createDiv({ cls: "tool-btn-grid" });
    moreBtn.innerHTML = "\u22EE";
    moreBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      if (this.callbacks.onFlashcardContextMenu) {
        this.callbacks.onFlashcardContextMenu(e, card);
      }
    });
    const content = cardEl.createDiv({ cls: "grid-card-content" });
    this.renderFlashcardContent(content, card);
    const meta = cardEl.createDiv({ cls: "grid-card-meta" });
    this.renderFlashcardMeta(meta, card);
  }
  // ========== 私有渲染方法 ==========
  renderCheckbox(card, itemId, isChecked) {
    const checkbox = card.createEl("input", {
      type: "checkbox",
      cls: "batch-checkbox"
    });
    checkbox.setAttribute("data-item-id", itemId);
    checkbox.checked = isChecked;
    checkbox.addEventListener("change", (e) => {
      if (e.target.checked) {
        if (this.state.viewType === "cards") {
          this.state.selectedCardIds.add(itemId);
        } else {
          this.state.selectedUnitIds.add(itemId);
        }
      } else {
        if (this.state.viewType === "cards") {
          this.state.selectedCardIds.delete(itemId);
        } else {
          this.state.selectedUnitIds.delete(itemId);
        }
      }
    });
  }
  renderIndicator(card, unit) {
    const indicator = card.createDiv({ cls: "card-indicator" });
    if (unit.type === "QA") {
      indicator.addClass("type-qa");
    } else if (unit.type === "cloze") {
      indicator.addClass("type-cloze");
    } else if (unit.type === "text") {
      indicator.addClass("type-text");
    }
    if (unit.annotationId)
      indicator.addClass("has-annotation");
    if (unit.flashcardIds.length > 0)
      indicator.addClass("has-flashcard");
  }
  renderCardHeader(content, card, unit) {
    const header = content.createDiv({ cls: "card-header" });
    header.addEventListener("click", () => {
      this.callbacks.onToggleAnnotation(card, unit);
    });
    const annotationBtn = header.createDiv({ cls: "annotation-btn" });
    annotationBtn.innerHTML = "\u{1F4AC}";
    const tools = header.createDiv({ cls: "card-tools" });
    tools.addEventListener("click", (e) => {
      e.stopPropagation();
    });
    if (!this.state.batchMode) {
      const flashcardBtn = tools.createDiv({ cls: "tool-btn flashcard-btn" });
      flashcardBtn.innerHTML = "\u26A1";
      flashcardBtn.setAttribute("aria-label", "\u751F\u6210\u95EA\u5361");
      flashcardBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        this.callbacks.onQuickFlashcard(unit);
      });
    }
    const moreBtn = tools.createDiv({ cls: "tool-btn more-btn" });
    moreBtn.innerHTML = "\u22EE";
    moreBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      this.callbacks.onShowContextMenu(e, unit);
    });
  }
  renderCardContent(content, unit) {
    const noteText = content.createDiv({ cls: "note-text" });
    if (this.isTableContent(unit.fullContext || unit.content)) {
      this.renderMarkdownContent(noteText, unit);
    } else {
      let displayHTML = this.formatContent(unit);
      noteText.innerHTML = displayHTML;
    }
    noteText.addEventListener("click", () => {
      this.callbacks.onJumpToSource(unit);
    });
  }
  formatContent(unit) {
    if (unit.type === "QA" && unit.answer) {
      return `<span class="qa-question">${unit.content}</span> <span class="qa-separator">::</span> <span class="qa-answer">${unit.answer}</span>`;
    } else if (unit.type === "cloze" && unit.fullContext) {
      let context = unit.fullContext.replace(/==/g, "");
      const answer = unit.content;
      return context.replace(
        answer,
        `<span class="cloze-highlight">${answer}</span>`
      );
    } else {
      return unit.content;
    }
  }
  renderAnnotationPreview(content, card, unit) {
    if (!this.callbacks.getAnnotationContent)
      return;
    const annotationContent = this.callbacks.getAnnotationContent(unit.id);
    if (annotationContent) {
      const annEl = content.createDiv({ cls: "annotation-preview" });
      const annText = annotationContent.length > 60 ? annotationContent.substring(0, 60) + "..." : annotationContent;
      annEl.textContent = `\u{1F4AC} ${annText}`;
      annEl.addEventListener("click", (e) => {
        e.stopPropagation();
        this.callbacks.onToggleAnnotation(card, unit);
      });
    }
  }
  renderCardMeta(content, unit) {
    const meta = content.createDiv({ cls: "card-meta" });
    if (unit.metadata.tags.length > 0) {
      unit.metadata.tags.slice(0, 2).forEach((tag) => {
        meta.createSpan({ text: `#${tag}`, cls: "tag" });
      });
      if (unit.metadata.tags.length > 2) {
        meta.createSpan({
          text: `+${unit.metadata.tags.length - 2}`,
          cls: "tag-more"
        });
      }
    }
    if (unit.flashcardIds.length > 0) {
      meta.createSpan({
        text: `\u{1F0CF} ${unit.flashcardIds.length}`,
        cls: "badge"
      });
    }
  }
  renderTypeIndicator(header, unit) {
    const typeIndicator = header.createDiv({ cls: "type-indicator" });
    if (unit.type === "QA") {
      typeIndicator.addClass("type-qa");
      typeIndicator.textContent = "Q&A";
    } else if (unit.type === "cloze") {
      typeIndicator.addClass("type-cloze");
      typeIndicator.textContent = "Cloze";
    } else {
      typeIndicator.addClass("type-text");
      typeIndicator.textContent = "Text";
    }
  }
  renderFileName(header, unit) {
    var _a;
    const fileName = ((_a = unit.source.file.split("/").pop()) == null ? void 0 : _a.replace(".md", "")) || "";
    header.createSpan({ text: fileName, cls: "doc-name" });
  }
  renderGridTools(header, unit) {
    const tools = header.createDiv({ cls: "grid-card-tools" });
    if (!this.state.batchMode) {
      const flashcardBtn = tools.createDiv({ cls: "tool-btn-grid" });
      flashcardBtn.innerHTML = "\u26A1";
      flashcardBtn.setAttribute("aria-label", "\u751F\u6210\u95EA\u5361");
      flashcardBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        this.callbacks.onQuickFlashcard(unit);
      });
    }
    const moreBtn = tools.createDiv({ cls: "tool-btn-grid" });
    moreBtn.innerHTML = "\u22EE";
    moreBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      this.callbacks.onShowContextMenu(e, unit);
    });
  }
  renderGridContent(content, card, unit) {
    const noteText = content.createDiv({ cls: "grid-note-text" });
    if (this.isTableContent(unit.fullContext || unit.content)) {
      this.renderMarkdownContent(noteText, unit);
    } else {
      noteText.innerHTML = this.formatContent(unit);
    }
    noteText.addEventListener("click", () => {
      this.callbacks.onToggleAnnotation(card, unit);
    });
  }
  renderGridAnnotation(content, card, unit) {
    if (!this.callbacks.getAnnotationContent)
      return;
    const annotationContent = this.callbacks.getAnnotationContent(unit.id);
    if (annotationContent) {
      const annEl = content.createDiv({ cls: "grid-annotation" });
      annEl.innerHTML = `<strong>\u6279\u6CE8\uFF1A</strong>${annotationContent}`;
      annEl.addEventListener("click", (e) => {
        e.stopPropagation();
        this.callbacks.onToggleAnnotation(card, unit);
      });
    }
  }
  renderGridTags(content, unit) {
    if (unit.metadata.tags.length > 0) {
      const tags = content.createDiv({ cls: "grid-tags" });
      unit.metadata.tags.forEach((tag) => {
        tags.createSpan({ text: `#${tag}`, cls: "tag-grid" });
      });
    }
  }
  renderGridMeta(meta, unit) {
    meta.createSpan({ text: `L${unit.source.position.line}`, cls: "line-info" });
    if (unit.flashcardIds.length > 0) {
      meta.createSpan({
        text: `\u{1F0CF} ${unit.flashcardIds.length}`,
        cls: "badge-grid"
      });
    }
  }
  renderFlashcardContent(content, card) {
    const question = content.createDiv({ cls: "flashcard-question" });
    question.innerHTML = `<strong>\u95EE\u9898\uFF1A</strong>${card.front}`;
    const answer = content.createDiv({ cls: "flashcard-answer" });
    const answerText = Array.isArray(card.back) ? card.back.join(", ") : card.back;
    answer.innerHTML = `<strong>\u7B54\u6848\uFF1A</strong>${answerText}`;
  }
  renderFlashcardMeta(meta, card) {
    meta.createSpan({
      text: this.formatDate(new Date(card.metadata.createdAt)),
      cls: "flashcard-date"
    });
  }
  formatDate(date) {
    return date.toLocaleDateString("zh-CN", {
      year: "numeric",
      month: "2-digit",
      day: "2-digit"
    });
  }
  // 🆕 添加表格检测方法
  isTableContent(content) {
    var _a;
    if (!content)
      return false;
    const lines = content.trim().split("\n");
    return lines.length >= 2 && lines.every((line) => line.includes("|")) && !!((_a = lines[1]) == null ? void 0 : _a.match(/^\s*\|[\s:-]+\|/));
  }
  // 🆕 添加 Markdown 渲染方法
  renderMarkdownContent(container, unit) {
    container.empty();
    let content = unit.fullContext || unit.content;
    if (this.isTableContent(content)) {
      this.renderTableWithHighlights(container, content);
    } else {
      const { MarkdownRenderer } = require("obsidian");
      content = content.replace(/==([^=]+)==/g, '<span class="highlight">$1</span>');
      MarkdownRenderer.renderMarkdown(content, container, unit.source.file, null);
    }
  }
  // 🆕 添加手动表格渲染方法
  renderTableWithHighlights(container, markdown) {
    const lines = markdown.trim().split("\n");
    const table = container.createEl("table", { cls: "learning-system-table" });
    const headerCells = lines[0].split("|").map((c) => c.trim()).filter((c) => c);
    const thead = table.createEl("thead");
    const headerRow = thead.createEl("tr");
    headerCells.forEach((cell, index) => {
      const th = headerRow.createEl("th");
      if (cell.includes("==")) {
        const processed = cell.replace(/==([^=]+)==/g, "<mark>$1</mark>");
        th.innerHTML = processed;
      } else {
        th.textContent = cell;
      }
    });
    const tbody = table.createEl("tbody");
    for (let i = 2; i < lines.length; i++) {
      const cells = lines[i].split("|").map((c) => c.trim()).filter((c) => c);
      if (cells.length === 0)
        continue;
      const row = tbody.createEl("tr");
      cells.forEach((cell, index) => {
        const td = row.createEl("td");
        if (cell.includes("==")) {
          const processed = cell.replace(/==([^=]+)==/g, "<mark>$1</mark>");
          td.innerHTML = processed;
        } else {
          td.textContent = cell;
        }
      });
    }
  }
};

// src/ui/components/ContentList.ts
var ContentList = class {
  constructor(state, cardCallbacks) {
    this.state = state;
    this.cardRenderer = new ContentCard(state, cardCallbacks);
  }
  /**
   * 渲染紧凑列表（侧边栏模式）
   */
  renderCompactList(container, units) {
    container.empty();
    if (units.length === 0) {
      this.renderEmptyState(container);
      return;
    }
    const grouped = this.groupUnits(units);
    grouped.forEach(({ groupKey, units: groupUnits }) => {
      const groupEl = container.createDiv({ cls: "content-group" });
      this.renderGroupHeader(groupEl, groupKey, groupUnits.length);
      groupUnits.forEach((unit) => {
        this.cardRenderer.renderCompact(groupEl, unit);
      });
    });
  }
  /**
   * 渲染内容网格（主界面模式）
   */
  renderContentGrid(container, units) {
    container.empty();
    if (units.length === 0) {
      this.renderEmptyState(container);
      return;
    }
    units.forEach((unit) => {
      this.cardRenderer.renderGrid(container, unit);
    });
  }
  /**
   * 渲染闪卡网格
   */
  renderFlashcardsGrid(container, cards) {
    container.empty();
    if (cards.length === 0) {
      container.createDiv({
        text: "\u{1F4ED} \u8BE5\u5206\u7EC4\u4E0B\u6682\u65E0\u95EA\u5361",
        cls: "empty-state"
      });
      return;
    }
    cards.forEach((card) => {
      this.cardRenderer.renderFlashcardGrid(container, card);
    });
  }
  /**
   * 分组笔记单元
   */
  groupUnits(units) {
    const grouped = /* @__PURE__ */ new Map();
    units.forEach((unit) => {
      const keys = this.getGroupKeys(unit);
      keys.forEach((key) => {
        if (!grouped.has(key)) {
          grouped.set(key, []);
        }
        grouped.get(key).push(unit);
      });
    });
    return this.sortGroups(grouped);
  }
  /**
   * 分组闪卡
   */
  groupFlashcards(cards, getUnit) {
    const grouped = /* @__PURE__ */ new Map();
    cards.forEach((card) => {
      const unit = getUnit(card.sourceContentId);
      const keys = this.getFlashcardGroupKeys(card, unit);
      keys.forEach((key) => {
        if (!grouped.has(key)) {
          grouped.set(key, []);
        }
        grouped.get(key).push(card);
      });
    });
    return Array.from(grouped.entries()).map(([groupKey, cards2]) => ({ groupKey, cards: cards2 })).sort((a, b) => {
      if (this.state.groupMode === "annotation") {
        if (a.groupKey === "\u6709\u6279\u6CE8")
          return -1;
        if (b.groupKey === "\u6709\u6279\u6CE8")
          return 1;
        return 0;
      }
      if (this.state.groupMode === "date") {
        return b.groupKey.localeCompare(a.groupKey);
      }
      return b.cards.length - a.cards.length;
    });
  }
  /**
   * 获取单元的分组键
   */
  getGroupKeys(unit) {
    switch (this.state.groupMode) {
      case "file":
        return [unit.source.file];
      case "annotation":
        return [unit.annotationId ? "\u6709\u6279\u6CE8" : "\u65E0\u6279\u6CE8"];
      case "tag":
        return unit.metadata.tags.length > 0 ? unit.metadata.tags : ["\u672A\u5206\u7C7B"];
      case "date":
        return [this.formatDate(new Date(unit.metadata.createdAt))];
      default:
        return ["\u672A\u5206\u7EC4"];
    }
  }
  /**
   * 获取闪卡的分组键
   */
  getFlashcardGroupKeys(card, unit) {
    switch (this.state.groupMode) {
      case "file":
        return [card.sourceFile];
      case "annotation":
        if (unit && unit.annotationId) {
          return ["\u6709\u6279\u6CE8"];
        } else {
          return ["\u65E0\u6279\u6CE8"];
        }
      case "tag":
        if (unit && unit.metadata.tags.length > 0) {
          return unit.metadata.tags;
        } else if (card.tags && card.tags.length > 0) {
          return card.tags;
        } else if (card.deck) {
          return [card.deck];
        } else {
          return ["\u672A\u5206\u7C7B"];
        }
      case "date":
        return [this.formatDate(new Date(card.metadata.createdAt))];
      default:
        return ["\u672A\u5206\u7EC4"];
    }
  }
  /**
   * 排序分组
   */
  sortGroups(grouped) {
    return Array.from(grouped.entries()).map(([groupKey, units]) => ({ groupKey, units })).sort((a, b) => {
      if (this.state.groupMode === "annotation") {
        if (a.groupKey === "\u6709\u6279\u6CE8")
          return -1;
        if (b.groupKey === "\u6709\u6279\u6CE8")
          return 1;
        return 0;
      }
      if (this.state.groupMode === "date") {
        return b.groupKey.localeCompare(a.groupKey);
      }
      return b.units.length - a.units.length;
    });
  }
  /**
   * 渲染分组头部
   */
  renderGroupHeader(container, groupKey, count) {
    const header = container.createDiv({ cls: "group-header" });
    header.createSpan({
      text: this.getGroupIcon(this.state.groupMode),
      cls: "group-icon"
    });
    header.createSpan({ text: groupKey, cls: "group-title" });
    header.createSpan({ text: `${count}`, cls: "group-count" });
  }
  /**
   * 渲染空状态
   */
  renderEmptyState(container) {
    const emptyDiv = container.createDiv({ cls: "empty-state" });
    if (this.state.selectedFile && this.state.displayMode === "sidebar") {
      emptyDiv.innerHTML = `
        <div style="padding: 20px; text-align: center;">
          <div style="font-size: 32px; margin-bottom: 10px;">\u{1F4ED}</div>
          <div style="color: var(--text-muted);">\u5F53\u524D\u6587\u6863\u6682\u65E0\u7B14\u8BB0</div>
          <div style="font-size: 12px; color: var(--text-faint); margin-top: 8px;">
            ${this.state.filterMode !== "all" ? "\u5C1D\u8BD5\u5207\u6362\u5176\u4ED6\u8FC7\u6EE4\u5668\u67E5\u770B" : "\u5F00\u59CB\u9AD8\u4EAE\u6587\u672C\u6765\u521B\u5EFA\u7B14\u8BB0"}
          </div>
        </div>
      `;
    } else {
      emptyDiv.textContent = "\u6682\u65E0\u5185\u5BB9";
    }
  }
  /**
   * 获取分组图标
   */
  getGroupIcon(mode) {
    switch (mode) {
      case "file":
        return "\u{1F4C4}";
      case "annotation":
        return "\u{1F4AC}";
      case "tag":
        return "\u{1F3F7}\uFE0F";
      case "date":
        return "\u{1F4C5}";
      default:
        return "\u{1F4C1}";
    }
  }
  /**
   * 格式化日期
   */
  formatDate(date) {
    return date.toLocaleDateString("zh-CN", {
      year: "numeric",
      month: "2-digit",
      day: "2-digit"
    });
  }
};

// src/ui/components/AnnotationEditor.ts
var AnnotationEditor = class {
  constructor(callbacks) {
    this.activeEditors = /* @__PURE__ */ new Map();
    this.callbacks = callbacks;
  }
  /**
   * 切换内联批注编辑器
   */
  toggle(cardEl, unit) {
    const existingEditor = cardEl.querySelector(".inline-annotation-editor");
    if (existingEditor) {
      this.close(cardEl, unit);
      return;
    }
    this.open(cardEl, unit);
  }
  /**
   * 打开编辑器
   */
  open(cardEl, unit) {
    const annotationContent = this.callbacks.getAnnotationContent(unit.id);
    const content = cardEl.querySelector(".card-content, .grid-card-content");
    const annotationPreview = content.querySelector(".annotation-preview, .grid-annotation");
    const editor = this.createEditor(unit.id, annotationContent || "");
    if (annotationPreview) {
      annotationPreview.replaceWith(editor);
    } else {
      const noteText = content.querySelector(".note-text, .grid-note-text");
      if (noteText) {
        noteText.after(editor);
      } else {
        content.appendChild(editor);
      }
    }
    const textarea = editor.querySelector("textarea");
    textarea.focus();
    textarea.setSelectionRange(textarea.value.length, textarea.value.length);
    this.activeEditors.set(unit.id, editor);
  }
  /**
   * 关闭编辑器
   */
  close(cardEl, unit) {
    const editor = cardEl.querySelector(".inline-annotation-editor");
    if (!editor)
      return;
    editor.remove();
    this.activeEditors.delete(unit.id);
    const annotationContent = this.callbacks.getAnnotationContent(unit.id);
    if (annotationContent) {
      const content = cardEl.querySelector(".card-content, .grid-card-content");
      this.recreatePreview(content, cardEl, unit, annotationContent);
    }
  }
  /**
   * 创建编辑器元素
   */
  createEditor(unitId, defaultValue) {
    const editor = document.createElement("div");
    editor.className = "inline-annotation-editor";
    const textarea = document.createElement("textarea");
    textarea.className = "inline-annotation-textarea";
    textarea.placeholder = "Add comment...";
    textarea.value = defaultValue;
    textarea.setAttribute("data-unit-id", unitId);
    const hint = document.createElement("div");
    hint.className = "inline-annotation-hint";
    hint.textContent = "Shift + Enter \u6362\u884C";
    editor.appendChild(textarea);
    editor.appendChild(hint);
    this.bindEditorEvents(textarea, unitId);
    return editor;
  }
  /**
   * 绑定编辑器事件
   */
  bindEditorEvents(textarea, unitId) {
    textarea.addEventListener("blur", async (e) => {
      const relatedTarget = e.relatedTarget;
      const editor = textarea.closest(".inline-annotation-editor");
      if (!relatedTarget || !editor.contains(relatedTarget)) {
        setTimeout(async () => {
          if (editor.parentElement) {
            await this.save(editor, unitId, textarea.value);
          }
        }, 100);
      }
    });
    textarea.addEventListener("keydown", async (e) => {
      if (e.key === "Tab") {
        e.preventDefault();
        const editor = textarea.closest(".inline-annotation-editor");
        await this.save(editor, unitId, textarea.value);
      }
    });
  }
  /**
   * 保存批注
   */
  async save(editorEl, unitId, text) {
    const trimmedText = text.trim();
    await this.callbacks.onSave(unitId, trimmedText);
    const card = editorEl.closest(".compact-card, .grid-card");
    editorEl.remove();
    this.activeEditors.delete(unitId);
    if (trimmedText && card) {
      const content = card.querySelector(".card-content, .grid-card-content");
      if (content) {
        const latestContent = this.callbacks.getAnnotationContent(unitId);
        if (latestContent) {
          this.recreatePreview(content, card, { id: unitId }, latestContent);
        }
        const indicator = card.querySelector(".card-indicator");
        if (indicator && !indicator.classList.contains("has-annotation")) {
          indicator.classList.add("has-annotation");
        }
      }
    } else if (!trimmedText && card) {
      const indicator = card.querySelector(".card-indicator");
      if (indicator && indicator.classList.contains("has-annotation")) {
        indicator.classList.remove("has-annotation");
      }
    }
  }
  /**
   * 重新创建批注预览
   */
  recreatePreview(contentEl, cardEl, unit, annotationText) {
    const existingPreview = contentEl.querySelector(".annotation-preview, .grid-annotation");
    if (existingPreview) {
      existingPreview.remove();
    }
    const isGridCard = cardEl.classList.contains("grid-card");
    const annEl = document.createElement("div");
    annEl.className = isGridCard ? "grid-annotation" : "annotation-preview";
    if (isGridCard) {
      annEl.innerHTML = `<strong>\u6279\u6CE8\uFF1A</strong>${annotationText}`;
    } else {
      const displayText = annotationText.length > 60 ? annotationText.substring(0, 60) + "..." : annotationText;
      annEl.textContent = `\u{1F4AC} ${displayText}`;
    }
    annEl.addEventListener("click", (e) => {
      e.stopPropagation();
      this.toggle(cardEl, unit);
    });
    annEl.addEventListener("keydown", (e) => {
      if (e.key === "Tab") {
        e.preventDefault();
        e.stopPropagation();
        this.toggle(cardEl, unit);
      }
    });
    const noteText = contentEl.querySelector(".note-text, .grid-note-text");
    if (noteText) {
      noteText.insertAdjacentElement("afterend", annEl);
    } else {
      contentEl.appendChild(annEl);
    }
    annEl.setAttribute("tabindex", "0");
    annEl.focus();
  }
  /**
   * 关闭所有活动的编辑器
   */
  closeAll() {
    this.activeEditors.forEach((editor) => {
      editor.remove();
    });
    this.activeEditors.clear();
  }
};

// src/ui/view/SidebarOverviewView.ts
var VIEW_TYPE_SIDEBAR_OVERVIEW = "learning-system-sidebar-overview";
var VIEW_TYPE_MAIN_OVERVIEW = "learning-system-main-overview";
var SidebarOverviewView = class extends import_obsidian5.ItemView {
  constructor(leaf, plugin, forceMainMode = false) {
    super(leaf);
    this.plugin = plugin;
    this._forceMainMode = forceMainMode;
    this.state = new ViewState(forceMainMode);
    this.initializeComponents();
    const activeFile = this.app.workspace.getActiveFile();
    if (activeFile) {
      this.state.selectedFile = activeFile.path;
    }
    this.setupResizeListener();
  }
  // ==================== 生命周期方法 ====================
  getViewType() {
    const forceMainMode = this._forceMainMode || false;
    return forceMainMode ? VIEW_TYPE_MAIN_OVERVIEW : VIEW_TYPE_SIDEBAR_OVERVIEW;
  }
  getDisplayText() {
    return "Learning Overview";
  }
  getIcon() {
    return "book-marked";
  }
  async onOpen() {
    this.detectDisplayMode();
    if (!this.state.forceMainMode) {
      this.registerActiveLeafChange();
    }
    this.render();
    StyleLoader.inject();
  }
  async onClose() {
    if (this.state.searchDebounceTimer !== null) {
      window.clearTimeout(this.state.searchDebounceTimer);
    }
    this.annotationEditor.closeAll();
  }
  // ==================== 初始化方法 ====================
  initializeComponents() {
    this.toolbar = new Toolbar(this.state, {
      onSearchChange: (query) => this.handleSearchChange(query),
      onFilterChange: (mode) => this.handleFilterChange(mode),
      onGroupChange: (mode) => this.handleGroupChange(mode)
    });
    const batchCallbacks = {
      onSelectAll: () => this.handleSelectAll(),
      onDeselectAll: () => this.handleDeselectAll(),
      onBatchCreate: () => this.handleBatchCreate(),
      onBatchDelete: () => this.handleBatchDelete(),
      onCancel: () => this.handleBatchCancel()
    };
    this.batchActions = new BatchActions(this.state, batchCallbacks);
    const cardCallbacks = {
      onJumpToSource: (unit) => this.jumpToSource(unit),
      onToggleAnnotation: (card, unit) => this.annotationEditor.toggle(card, unit),
      onQuickFlashcard: (unit) => this.quickGenerateFlashcard(unit),
      onShowContextMenu: (event, unit) => this.showContextMenu(event, unit),
      onFlashcardContextMenu: (event, card) => this.showFlashcardContextMenu(event, card),
      getAnnotationContent: (unitId) => {
        const ann = this.plugin.annotationManager.getContentAnnotation(unitId);
        return ann == null ? void 0 : ann.content;
      }
    };
    this.contentList = new ContentList(this.state, cardCallbacks);
    const annotationCallbacks = {
      onSave: async (unitId, content) => {
        await this.saveAnnotation(unitId, content);
      },
      onCancel: (unitId) => {
      },
      getAnnotationContent: (unitId) => {
        const ann = this.plugin.annotationManager.getContentAnnotation(unitId);
        return ann == null ? void 0 : ann.content;
      }
    };
    this.annotationEditor = new AnnotationEditor(annotationCallbacks);
  }
  setupResizeListener() {
    let resizeTimer;
    window.addEventListener("resize", () => {
      clearTimeout(resizeTimer);
      resizeTimer = window.setTimeout(() => {
        this.detectDisplayMode();
        this.render();
      }, 150);
    });
  }
  registerActiveLeafChange() {
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", () => {
        const activeFile = this.app.workspace.getActiveFile();
        if (activeFile && this.state.displayMode === "sidebar") {
          this.state.selectedFile = activeFile.path;
          this.refresh();
        }
      })
    );
  }
  // ==================== 显示模式检测 ====================
  detectDisplayMode() {
    if (this.state.forceMainMode) {
      this.state.displayMode = "main";
      return;
    }
    const parentSplit = this.leaf.parentSplit;
    const isLeftSidebar = (parentSplit == null ? void 0 : parentSplit.type) === "split" && this.app.workspace.leftSplit === parentSplit;
    const isRightSidebar = (parentSplit == null ? void 0 : parentSplit.type) === "split" && this.app.workspace.rightSplit === parentSplit;
    const width = this.containerEl.clientWidth;
    const isNarrow = width < 500;
    const isSidebar = isLeftSidebar || isRightSidebar || isNarrow;
    this.state.displayMode = isSidebar ? "sidebar" : "main";
  }
  // ==================== 渲染方法 ====================
  refresh() {
    if (this.state.isRendering) {
      requestAnimationFrame(() => this.refresh());
      return;
    }
    if (this.state.searchDebounceTimer !== null) {
      window.clearTimeout(this.state.searchDebounceTimer);
      this.state.searchDebounceTimer = null;
    }
    this.state.shouldRestoreScroll = true;
    this.render();
  }
  render() {
    if (this.state.isRendering)
      return;
    this.state.isRendering = true;
    const container = this.containerEl.children[1];
    if (this.state.displayMode === "sidebar") {
      const contentList = container.querySelector(".sidebar-content-list");
      if (contentList) {
        this.state.savedScrollPosition = contentList.scrollTop;
      }
    }
    container.empty();
    container.addClass("learning-overview-container");
    container.setAttribute("data-mode", this.state.displayMode);
    if (this.state.displayMode === "sidebar") {
      this.renderSidebarMode(container);
    } else {
      this.renderMainMode(container);
    }
    if (this.state.displayMode === "sidebar" && this.state.shouldRestoreScroll) {
      const contentList = container.querySelector(".sidebar-content-list");
      if (contentList) {
        requestAnimationFrame(() => {
          contentList.scrollTop = this.state.savedScrollPosition;
        });
      }
    }
    this.state.isRendering = false;
  }
  renderSidebarMode(container) {
    const toolbarEl = this.toolbar.renderSidebarToolbar(container);
    let statsRow = toolbarEl.querySelector(".stats-row");
    if (!statsRow) {
      statsRow = toolbarEl.createDiv({ cls: "stats-row" });
      statsRow.setAttribute("data-stats-container", "true");
    }
    const visibleItems = this.getVisibleItems();
    const items = this.state.viewType === "cards" ? visibleItems.cards || [] : visibleItems.units || [];
    this.batchActions.renderSelectAllButton(statsRow, items, "sidebar");
    this.batchActions.renderActionButtons(statsRow, "sidebar");
    const contentListEl = container.createDiv({ cls: "sidebar-content-list" });
    const units = this.getFilteredUnits();
    this.contentList.renderCompactList(contentListEl, units);
  }
  renderMainMode(container) {
    const layout = container.createDiv({ cls: "main-layout" });
    const leftPanel = layout.createDiv({ cls: "left-panel" });
    this.renderLeftPanel(leftPanel);
    const rightPanel = layout.createDiv({ cls: "right-panel" });
    this.renderRightPanel(rightPanel);
  }
  renderLeftPanel(container) {
    this.toolbar.renderMainToolbar(container);
    this.renderFixedEntries(container);
    this.renderFileList(container);
  }
  renderRightPanel(container) {
    if (this.state.viewType === "cards") {
      this.renderFlashcardsView(container);
      return;
    }
    if (!this.state.selectedFile) {
      const units = this.getFilteredUnits();
      const grouped = this.contentList.groupUnits(units);
      if (grouped.length > 0) {
        this.state.selectedFile = grouped[0].groupKey;
      }
    }
    if (!this.state.selectedFile) {
      this.renderEmptyRightPanel(container);
      return;
    }
    const header = container.createDiv({ cls: "grid-header" });
    header.createEl("h2", { text: this.state.selectedFile || "\u5185\u5BB9" });
    const headerActions = header.createDiv({ cls: "header-actions" });
    const visibleItems = this.getVisibleItems();
    const items = visibleItems.units || [];
    this.batchActions.renderActionButtons(headerActions, "header");
    this.batchActions.renderSelectAllButton(headerActions, items, "header");
    const gridContainer = container.createDiv({ cls: "content-grid" });
    const filteredUnits = this.getFilteredUnitsForSelectedGroup();
    this.contentList.renderContentGrid(gridContainer, filteredUnits);
  }
  renderFlashcardsView(container) {
    const flashcards = this.plugin.flashcardManager.getAllFlashcards();
    if (!this.state.selectedFile) {
      const grouped = this.contentList.groupFlashcards(
        flashcards,
        (id) => this.plugin.dataManager.getContentUnit(id)
      );
      if (grouped.length > 0) {
        this.state.selectedFile = grouped[0].groupKey;
      }
    }
    if (!this.state.selectedFile) {
      this.renderEmptyRightPanel(container);
      return;
    }
    const header = container.createDiv({ cls: "grid-header" });
    header.createEl("h2", { text: this.state.selectedFile || "\u95EA\u5361" });
    const headerActions = header.createDiv({ cls: "header-actions" });
    const visibleItems = this.getVisibleItems();
    const items = visibleItems.cards || [];
    this.batchActions.renderActionButtons(headerActions, "header");
    this.batchActions.renderSelectAllButton(headerActions, items, "header");
    const gridContainer = container.createDiv({ cls: "content-grid" });
    const filteredCards = this.getFilteredCardsForSelectedGroup();
    this.contentList.renderFlashcardsGrid(gridContainer, filteredCards);
  }
  renderFixedEntries(container) {
    const entries = container.createDiv({ cls: "fixed-entries" });
    const allNotesBtn = entries.createDiv({
      cls: `entry-btn ${this.state.viewType === "notes" ? "active" : ""}`
    });
    allNotesBtn.innerHTML = "\u{1F4DD} <span>All Notes</span>";
    allNotesBtn.addEventListener("click", () => {
      if (this.state.setViewType("notes")) {
        this.render();
      }
    });
    const cardListBtn = entries.createDiv({
      cls: `entry-btn ${this.state.viewType === "cards" ? "active" : ""}`
    });
    cardListBtn.innerHTML = "\u{1F0CF} <span>Card List</span>";
    cardListBtn.addEventListener("click", () => {
      if (this.state.setViewType("cards")) {
        this.render();
      }
    });
  }
  renderFileList(container) {
    container.createEl("h3", { text: "\u{1F4C1} \u6587\u6863\u5217\u8868", cls: "panel-title" });
    const fileListContainer = container.createDiv({ cls: "file-list" });
    this.renderFileListContent(fileListContainer);
  }
  renderFileListContent(container) {
    container.empty();
    let grouped;
    if (this.state.viewType === "cards") {
      const flashcards = this.plugin.flashcardManager.getAllFlashcards();
      const cardGroups = this.contentList.groupFlashcards(
        flashcards,
        (id) => this.plugin.dataManager.getContentUnit(id)
      );
      grouped = cardGroups.map((g) => ({
        groupKey: g.groupKey,
        count: g.cards.length
      }));
    } else {
      const units = this.getFilteredUnits();
      const unitGroups = this.contentList.groupUnits(units);
      grouped = unitGroups.map((g) => ({
        groupKey: g.groupKey,
        count: g.units.length
      }));
    }
    if (grouped.length === 0) {
      container.createDiv({ text: "\u6682\u65E0\u6587\u6863", cls: "empty-hint" });
      return;
    }
    if (!this.state.selectedFile && grouped.length > 0) {
      this.state.selectedFile = grouped[0].groupKey;
    }
    grouped.forEach(({ groupKey, count }) => {
      const fileItem = container.createDiv({
        cls: `file-item ${this.state.selectedFile === groupKey ? "selected" : ""}`
      });
      fileItem.innerHTML = `
        <span class="file-icon">${this.getGroupIcon()}</span>
        <span class="file-name">${groupKey}</span>
        <span class="file-count">${count}</span>
      `;
      fileItem.addEventListener("click", () => {
        if (this.state.selectedFile !== groupKey) {
          this.state.selectedFile = groupKey;
          const allItems = container.querySelectorAll(".file-item");
          allItems.forEach((item) => item.removeClass("selected"));
          fileItem.addClass("selected");
          this.refreshRightPanel();
        }
      });
    });
  }
  renderEmptyRightPanel(container) {
    const empty = container.createDiv({ cls: "empty-right-panel" });
    empty.innerHTML = `
      <div class="empty-icon">\u{1F4ED}</div>
      <div class="empty-text">\u6682\u65E0\u5185\u5BB9</div>
    `;
  }
  // ==================== 事件处理方法 ====================
  handleSearchChange(query) {
    this.state.setSearchQuery(query);
    if (this.state.searchDebounceTimer !== null) {
      window.clearTimeout(this.state.searchDebounceTimer);
    }
    this.state.searchDebounceTimer = window.setTimeout(() => {
      this.state.clearSelection();
      this.refresh();
    }, 300);
  }
  handleFilterChange(mode) {
    if (this.state.setFilterMode(mode)) {
      this.state.shouldRestoreScroll = false;
      this.render();
    }
  }
  handleGroupChange(mode) {
    if (this.state.setGroupMode(mode)) {
      this.render();
    }
  }
  handleSelectAll() {
    const visible = this.getVisibleItems();
    if (this.state.viewType === "cards") {
      const cards = visible.cards || [];
      if (cards.length === 0) {
        new import_obsidian5.Notice("\u26A0\uFE0F \u6CA1\u6709\u53EF\u9009\u62E9\u7684\u95EA\u5361");
        return;
      }
      this.state.selectAllCards(cards);
    } else {
      const units = visible.units || [];
      if (units.length === 0) {
        new import_obsidian5.Notice("\u26A0\uFE0F \u6CA1\u6709\u53EF\u9009\u62E9\u7684\u7B14\u8BB0");
        return;
      }
      this.state.selectAllUnits(units);
    }
    this.render();
  }
  handleDeselectAll() {
    const visible = this.getVisibleItems();
    if (this.state.viewType === "cards") {
      this.state.deselectAllCards(visible.cards || []);
    } else {
      this.state.deselectAllUnits(visible.units || []);
    }
    this.render();
  }
  handleBatchCreate() {
    if (this.state.selectedUnitIds.size === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u521B\u5EFA\u95EA\u5361\u7684\u7B14\u8BB0");
      return;
    }
    this.batchCreateFlashcards();
  }
  handleBatchDelete() {
    if (this.state.getSelectedCount() === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u9879\u76EE");
      return;
    }
    if (this.state.viewType === "cards") {
      this.batchDeleteFlashcards();
    } else {
      this.batchDeleteNotes();
    }
  }
  handleBatchCancel() {
    this.state.clearSelection();
    this.render();
  }
  // ==================== 数据获取方法 ====================
  getFilteredUnits() {
    let units = this.plugin.dataManager.getAllContentUnits();
    if (this.state.searchQuery) {
      const query = this.state.searchQuery.toLowerCase();
      units = units.filter(
        (unit) => unit.content.toLowerCase().includes(query) || unit.source.file.toLowerCase().includes(query) || unit.metadata.tags.some((tag) => tag.toLowerCase().includes(query))
      );
    }
    if (this.state.filterMode === "annotated") {
      units = units.filter((u) => u.annotationId);
    } else if (this.state.filterMode === "flashcards") {
      units = units.filter((u) => u.flashcardIds.length > 0);
    }
    if (this.state.displayMode === "sidebar" && this.state.selectedFile) {
      units = units.filter((unit) => unit.source.file === this.state.selectedFile);
    }
    return units;
  }
  getFilteredUnitsForSelectedGroup() {
    const units = this.getFilteredUnits();
    const selected = this.state.selectedFile;
    if (!selected)
      return [];
    return units.filter((unit) => {
      if (this.state.groupMode === "file") {
        return unit.source.file === selected;
      } else if (this.state.groupMode === "annotation") {
        const hasAnnotation = selected === "\u6709\u6279\u6CE8";
        return hasAnnotation ? !!unit.annotationId : !unit.annotationId;
      } else if (this.state.groupMode === "tag") {
        return unit.metadata.tags.includes(selected);
      } else if (this.state.groupMode === "date") {
        return this.formatDate(new Date(unit.metadata.createdAt)) === selected;
      }
      return false;
    });
  }
  getFilteredCardsForSelectedGroup() {
    const flashcards = this.plugin.flashcardManager.getAllFlashcards();
    const selected = this.state.selectedFile;
    if (!selected)
      return [];
    return flashcards.filter((card) => {
      if (this.state.groupMode === "file") {
        return card.sourceFile === this.state.selectedFile;
      } else if (this.state.groupMode === "annotation") {
        const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
        const hasAnnotation = this.state.selectedFile === "\u6709\u6279\u6CE8";
        return hasAnnotation ? unit && !!unit.annotationId : !unit || !unit.annotationId;
      } else if (this.state.groupMode === "tag") {
        const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
        return unit && unit.metadata.tags.includes(selected) || card.tags && card.tags.includes(selected) || card.deck === this.state.selectedFile || this.state.selectedFile === "\u672A\u5206\u7C7B" && (!card.tags || card.tags.length === 0) && !card.deck && (!unit || !unit.metadata.tags || unit.metadata.tags.length === 0);
      } else if (this.state.groupMode === "date") {
        return this.formatDate(new Date(card.metadata.createdAt)) === this.state.selectedFile;
      }
      return false;
    });
  }
  getVisibleItems() {
    if (this.state.viewType === "cards") {
      const cards = this.getFilteredCardsForSelectedGroup();
      return { cards };
    } else {
      const units = this.state.displayMode === "sidebar" ? this.getFilteredUnits() : this.getFilteredUnitsForSelectedGroup();
      return { units };
    }
  }
  // ==================== 业务逻辑方法 ====================
  async jumpToSource(unit) {
    const file = this.app.vault.getAbstractFileByPath(unit.source.file);
    if (!(file instanceof import_obsidian5.TFile)) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u6587\u4EF6\u4E0D\u5B58\u5728");
      return;
    }
    this.state.shouldRestoreScroll = true;
    const leaf = this.app.workspace.getLeaf(false);
    await leaf.openFile(file);
    setTimeout(() => {
      const view = this.app.workspace.getActiveViewOfType(import_obsidian5.ItemView);
      if (view) {
        const editor = view.editor;
        if (editor) {
          const line = unit.source.position.line;
          const lineCount = editor.lineCount();
          const validLine = Math.min(line, lineCount - 1);
          editor.setCursor({ line: validLine, ch: 0 });
          editor.scrollIntoView(
            { from: { line: validLine, ch: 0 }, to: { line: validLine, ch: 0 } },
            true
          );
          setTimeout(() => {
            var _a;
            try {
              const lineLength = ((_a = editor.getLine(validLine)) == null ? void 0 : _a.length) || 0;
              editor.setSelection(
                { line: validLine, ch: 0 },
                { line: validLine, ch: lineLength }
              );
            } catch (e) {
              console.error("Selection error:", e);
            }
          }, 100);
        }
      }
    }, 200);
  }
  async saveAnnotation(unitId, content) {
    const trimmedText = content.trim();
    const annotation = this.plugin.annotationManager.getContentAnnotation(unitId);
    if (trimmedText) {
      if (annotation) {
        await this.plugin.annotationManager.updateAnnotation(annotation.id, {
          content: trimmedText
        });
      } else {
        await this.plugin.annotationManager.addContentAnnotation(unitId, trimmedText);
      }
    } else if (annotation) {
      await this.plugin.annotationManager.deleteAnnotation(annotation.id);
      new import_obsidian5.Notice("\u{1F5D1}\uFE0F \u6279\u6CE8\u5DF2\u5220\u9664");
    }
  }
  async quickGenerateFlashcard(unit) {
    try {
      const { QuickFlashcardCreator: QuickFlashcardCreator2 } = await Promise.resolve().then(() => (init_QuickFlashcardCreator(), QuickFlashcardCreator_exports));
      const creator = new QuickFlashcardCreator2(this.plugin);
      await creator.createSmartCard(unit);
      new import_obsidian5.Notice("\u26A1 \u95EA\u5361\u5DF2\u751F\u6210");
      this.refresh();
    } catch (error) {
      new import_obsidian5.Notice("\u274C \u751F\u6210\u95EA\u5361\u5931\u8D25");
      console.error(error);
    }
  }
  showContextMenu(event, unit) {
    const menu = new import_obsidian5.Menu();
    menu.addItem(
      (item) => item.setTitle("\u{1F4D6} \u8DF3\u8F6C\u5230\u539F\u6587").setIcon("arrow-up-right").onClick(() => this.jumpToSource(unit))
    );
    menu.addItem(
      (item) => item.setTitle("\u{1F4AC} \u7F16\u8F91\u6279\u6CE8").setIcon("message-square").onClick(() => {
        const card = event.target;
        const cardEl = card.closest(".compact-card, .grid-card");
        if (cardEl) {
          this.annotationEditor.toggle(cardEl, unit);
        }
      })
    );
    menu.addSeparator();
    if (unit.flashcardIds.length > 0) {
      menu.addItem(
        (item) => item.setTitle("\u270F\uFE0F \u7F16\u8F91\u95EA\u5361").setIcon("pencil").onClick(() => {
          const cardId = unit.flashcardIds[0];
          const card = this.plugin.flashcardManager.getFlashcard(cardId);
          if (card) {
            this.openEditFlashcardModal(card);
          } else {
            new import_obsidian5.Notice("\u26A0\uFE0F \u627E\u4E0D\u5230\u5BF9\u5E94\u7684\u95EA\u5361");
          }
        })
      );
    }
    menu.addItem(
      (item) => item.setTitle("\u26A1 \u751F\u6210\u95EA\u5361").setIcon("zap").onClick(() => this.quickGenerateFlashcard(unit))
    );
    menu.addItem(
      (item) => item.setTitle("\u2795 \u521B\u5EFA QA \u95EA\u5361").setIcon("plus").onClick(() => {
        this.openManualFlashcardModal(unit, "qa");
      })
    );
    menu.addItem(
      (item) => item.setTitle("\u2795 \u521B\u5EFA\u586B\u7A7A\u95EA\u5361").setIcon("plus").onClick(() => {
        this.openManualFlashcardModal(unit, "cloze");
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u{1F4CA} \u67E5\u770B\u7EDF\u8BA1").setIcon("bar-chart").onClick(() => {
        this.plugin.activateStats();
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u{1F5D1}\uFE0F \u5220\u9664\u7B14\u8BB0").setIcon("trash").onClick(async () => {
        if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u6761\u7B14\u8BB0\u5417\uFF1F")) {
          if (unit.flashcardIds.length > 0) {
            for (const cardId of unit.flashcardIds) {
              await this.plugin.flashcardManager.deleteCard(cardId);
            }
          }
          await this.plugin.dataManager.deleteContentUnit(unit.id);
          new import_obsidian5.Notice("\u{1F5D1}\uFE0F \u7B14\u8BB0\u5DF2\u5220\u9664");
          this.refresh();
        }
      })
    );
    menu.showAtMouseEvent(event);
  }
  openManualFlashcardModal(unit, type) {
    class ManualFlashcardModal extends import_obsidian5.Modal {
      constructor(app, plugin, unit2, type2) {
        super(app);
        this.question = "";
        this.answer = "";
        this.plugin = plugin;
        this.unit = unit2;
        this.type = type2;
        if (type2 === "qa") {
          this.question = unit2.type === "QA" ? unit2.content : unit2.content;
          this.answer = unit2.type === "QA" && unit2.answer ? unit2.answer : "";
        } else {
          this.question = unit2.fullContext || unit2.content;
          this.answer = unit2.content;
        }
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.empty();
        contentEl.addClass("manual-flashcard-modal");
        contentEl.createEl("h2", {
          text: this.type === "qa" ? "\u270F\uFE0F \u521B\u5EFA QA \u95EA\u5361" : "\u270F\uFE0F \u521B\u5EFA\u586B\u7A7A\u95EA\u5361"
        });
        contentEl.createEl("p", {
          text: this.type === "qa" ? "\u521B\u5EFA\u4E00\u5F20\u95EE\u7B54\u5361\u7247\uFF0C\u53EF\u4EE5\u81EA\u5B9A\u4E49\u95EE\u9898\u548C\u7B54\u6848" : "\u521B\u5EFA\u4E00\u5F20\u586B\u7A7A\u5361\u7247\uFF0C\u5728\u5B8C\u6574\u6587\u672C\u4E2D\u6807\u8BB0\u8981\u6316\u7A7A\u7684\u5185\u5BB9",
          cls: "modal-description"
        });
        new import_obsidian5.Setting(contentEl).setName(this.type === "qa" ? "\u95EE\u9898 (Front)" : "\u5B8C\u6574\u6587\u672C").setDesc(this.type === "qa" ? "\u5361\u7247\u6B63\u9762\u663E\u793A\u7684\u95EE\u9898" : "\u5305\u542B\u7B54\u6848\u7684\u5B8C\u6574\u53E5\u5B50\u6216\u6BB5\u843D").addTextArea((text) => {
          text.setValue(this.question).setPlaceholder(
            this.type === "qa" ? "\u4F8B\u5982: \u4EC0\u4E48\u662F\u95F4\u9694\u91CD\u590D?" : "\u4F8B\u5982: \u95F4\u9694\u91CD\u590D\u662F\u4E00\u79CD\u5B66\u4E60\u6280\u672F"
          ).onChange((value) => this.question = value);
          text.inputEl.rows = 4;
          text.inputEl.style.width = "100%";
        });
        new import_obsidian5.Setting(contentEl).setName(this.type === "qa" ? "\u7B54\u6848 (Back)" : "\u6316\u7A7A\u5185\u5BB9").setDesc(this.type === "qa" ? "\u5361\u7247\u80CC\u9762\u663E\u793A\u7684\u7B54\u6848" : "\u8981\u88AB\u6316\u7A7A\u7684\u5173\u952E\u8BCD\u6216\u77ED\u8BED").addTextArea((text) => {
          text.setValue(this.answer).setPlaceholder(
            this.type === "qa" ? "\u4F8B\u5982: \u95F4\u9694\u91CD\u590D\u662F\u4E00\u79CD\u5B66\u4E60\u6280\u672F..." : "\u4F8B\u5982: \u95F4\u9694\u91CD\u590D"
          ).onChange((value) => this.answer = value);
          text.inputEl.rows = 3;
          text.inputEl.style.width = "100%";
        });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        new import_obsidian5.Setting(buttonContainer).addButton(
          (btn) => btn.setButtonText("\u53D6\u6D88").onClick(() => this.close())
        ).addButton(
          (btn) => btn.setButtonText("\u521B\u5EFA\u95EA\u5361").setCta().onClick(async () => await this.createFlashcard())
        );
      }
      async createFlashcard() {
        var _a, _b;
        if (!this.question.trim()) {
          new import_obsidian5.Notice("\u26A0\uFE0F \u95EE\u9898/\u6587\u672C\u4E0D\u80FD\u4E3A\u7A7A");
          return;
        }
        if (!this.answer.trim()) {
          new import_obsidian5.Notice("\u26A0\uFE0F \u7B54\u6848\u4E0D\u80FD\u4E3A\u7A7A");
          return;
        }
        try {
          await this.plugin.flashcardManager.createFlashcardFromUnit(
            this.unit,
            {
              customQuestion: this.question.trim(),
              customAnswer: this.answer.trim(),
              cardType: this.type
            }
          );
          new import_obsidian5.Notice(
            this.type === "qa" ? "\u2705 QA \u95EA\u5361\u5DF2\u521B\u5EFA" : "\u2705 \u586B\u7A7A\u95EA\u5361\u5DF2\u521B\u5EFA"
          );
          this.close();
          const view = ((_a = this.app.workspace.getLeavesOfType(VIEW_TYPE_SIDEBAR_OVERVIEW)[0]) == null ? void 0 : _a.view) || ((_b = this.app.workspace.getLeavesOfType(VIEW_TYPE_MAIN_OVERVIEW)[0]) == null ? void 0 : _b.view);
          if (view && "refresh" in view) {
            view.refresh();
          }
        } catch (error) {
          new import_obsidian5.Notice("\u274C \u521B\u5EFA\u95EA\u5361\u5931\u8D25");
          console.error("Error creating flashcard:", error);
        }
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    }
    new ManualFlashcardModal(this.app, this.plugin, unit, type).open();
  }
  showFlashcardContextMenu(event, card) {
    const menu = new import_obsidian5.Menu();
    menu.addItem(
      (item) => item.setTitle("\u{1F4D6} \u8DF3\u8F6C\u5230\u539F\u6587").setIcon("arrow-up-right").onClick(async () => {
        const unit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
        if (unit) {
          await this.jumpToSource(unit);
        } else {
          const file = this.app.vault.getAbstractFileByPath(card.sourceFile);
          if (file instanceof import_obsidian5.TFile) {
            await this.app.workspace.getLeaf(false).openFile(file);
            new import_obsidian5.Notice("\u2705 \u5DF2\u6253\u5F00\u6E90\u6587\u4EF6");
          } else {
            new import_obsidian5.Notice("\u26A0\uFE0F \u627E\u4E0D\u5230\u539F\u59CB\u7B14\u8BB0");
          }
        }
      })
    );
    menu.addItem(
      (item) => item.setTitle("\u270F\uFE0F \u7F16\u8F91\u5361\u7247").setIcon("pencil").onClick(() => {
        this.openEditFlashcardModal(card);
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u{1F4CA} \u67E5\u770B\u7EDF\u8BA1").setIcon("bar-chart").onClick(() => {
        var _a;
        const createdDate = new Date(card.metadata.createdAt).toLocaleString("zh-CN");
        const lastReview = card.stats.lastReview ? new Date(card.stats.lastReview).toLocaleString("zh-CN") : "\u672A\u590D\u4E60";
        const nextReview = new Date(card.scheduling.due).toLocaleString("zh-CN");
        const accuracy = card.stats.totalReviews > 0 ? (card.stats.correctCount / card.stats.totalReviews * 100).toFixed(1) : "0";
        new import_obsidian5.Notice(
          `\u{1F4CA} \u95EA\u5361\u7EDF\u8BA1
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u{1F4C1} \u6587\u4EF6: ${card.sourceFile.split("/").pop()}
\u{1F0CF} \u7C7B\u578B: ${card.type === "qa" ? "Q&A" : "\u586B\u7A7A"}
\u{1F4DA} \u5361\u7EC4: ${card.deck}
\u{1F3F7}\uFE0F \u6807\u7B7E: ${((_a = card.tags) == null ? void 0 : _a.length) > 0 ? card.tags.join(", ") : "\u65E0"}
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u{1F4C8} \u590D\u4E60\u6B21\u6570: ${card.stats.totalReviews}
\u2705 \u6B63\u786E\u6B21\u6570: ${card.stats.correctCount}
\u{1F4CA} \u6B63\u786E\u7387: ${accuracy}%
\u23F1\uFE0F \u5E73\u5747\u7528\u65F6: ${card.stats.averageTime.toFixed(1)}\u79D2
\u{1F3AF} \u96BE\u5EA6: ${(card.stats.difficulty * 100).toFixed(0)}%
\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
\u{1F4C5} \u521B\u5EFA\u65F6\u95F4: ${createdDate}
\u{1F504} \u4E0A\u6B21\u590D\u4E60: ${lastReview}
\u23F0 \u4E0B\u6B21\u590D\u4E60: ${nextReview}
\u{1F4CF} \u95F4\u9694: ${card.scheduling.interval}\u5929
\u{1F4AA} \u719F\u7EC3\u5EA6: ${card.scheduling.ease.toFixed(2)}`,
          1e4
        );
      })
    );
    menu.addSeparator();
    menu.addItem(
      (item) => item.setTitle("\u{1F5D1}\uFE0F \u5220\u9664\u5361\u7247").setIcon("trash").onClick(async () => {
        if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u5F20\u95EA\u5361\u5417\uFF1F")) {
          await this.plugin.flashcardManager.deleteCard(card.id);
          new import_obsidian5.Notice("\u{1F5D1}\uFE0F \u95EA\u5361\u5DF2\u5220\u9664");
          this.refresh();
        }
      })
    );
    menu.showAtMouseEvent(event);
  }
  openEditFlashcardModal(card) {
    class EditFlashcardModal extends import_obsidian5.Modal {
      constructor(app, plugin, card2) {
        super(app);
        this.plugin = plugin;
        this.card = card2;
        this.front = card2.front;
        this.back = Array.isArray(card2.back) ? card2.back.join(", ") : card2.back;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.empty();
        contentEl.addClass("edit-flashcard-modal");
        contentEl.createEl("h2", {
          text: "\u270F\uFE0F \u7F16\u8F91\u95EA\u5361"
        });
        contentEl.createEl("p", {
          text: `\u7F16\u8F91 ${this.card.type === "qa" ? "Q&A" : "\u586B\u7A7A"}\u5361\u7247\u5185\u5BB9`,
          cls: "modal-description"
        });
        const infoDiv = contentEl.createDiv({ cls: "card-info" });
        infoDiv.innerHTML = `
          <div style="background: var(--background-secondary); padding: 10px; border-radius: 6px; margin-bottom: 15px;">
            <div style="font-size: 0.9em; color: var(--text-muted);">
              \u{1F4C1} ${this.card.sourceFile.split("/").pop()}<br>
              \u{1F4DA} \u5361\u7EC4: ${this.card.deck}<br>
              \u{1F4CA} \u590D\u4E60: ${this.card.stats.totalReviews}\u6B21 | \u6B63\u786E: ${this.card.stats.correctCount}\u6B21
            </div>
          </div>
        `;
        new import_obsidian5.Setting(contentEl).setName(this.card.type === "qa" ? "\u95EE\u9898 (Front)" : "\u5B8C\u6574\u6587\u672C").setDesc("\u5361\u7247\u6B63\u9762\u663E\u793A\u7684\u5185\u5BB9").addTextArea((text) => {
          text.setValue(this.front).onChange((value) => this.front = value);
          text.inputEl.rows = 4;
          text.inputEl.style.width = "100%";
        });
        new import_obsidian5.Setting(contentEl).setName(this.card.type === "qa" ? "\u7B54\u6848 (Back)" : "\u6316\u7A7A\u7B54\u6848").setDesc(this.card.type === "qa" ? "\u5361\u7247\u80CC\u9762\u663E\u793A\u7684\u7B54\u6848" : "\u591A\u4E2A\u7B54\u6848\u7528\u9017\u53F7\u5206\u9694").addTextArea((text) => {
          text.setValue(this.back).onChange((value) => this.back = value);
          text.inputEl.rows = 3;
          text.inputEl.style.width = "100%";
        });
        const buttonContainer = contentEl.createDiv({ cls: "modal-button-container" });
        new import_obsidian5.Setting(buttonContainer).addButton(
          (btn) => btn.setButtonText("\u53D6\u6D88").onClick(() => this.close())
        ).addButton(
          (btn) => btn.setButtonText("\u4FDD\u5B58").setCta().onClick(async () => await this.saveFlashcard())
        );
      }
      async saveFlashcard() {
        var _a, _b;
        if (!this.front.trim()) {
          new import_obsidian5.Notice("\u26A0\uFE0F \u95EE\u9898/\u6587\u672C\u4E0D\u80FD\u4E3A\u7A7A");
          return;
        }
        if (!this.back.trim()) {
          new import_obsidian5.Notice("\u26A0\uFE0F \u7B54\u6848\u4E0D\u80FD\u4E3A\u7A7A");
          return;
        }
        try {
          this.card.front = this.front.trim();
          if (this.card.type === "cloze") {
            this.card.back = this.back.split(",").map((s) => s.trim()).filter((s) => s);
          } else {
            this.card.back = this.back.trim();
          }
          this.card.metadata.updatedAt = Date.now();
          await this.plugin.flashcardManager.updateCard(this.card);
          new import_obsidian5.Notice("\u2705 \u95EA\u5361\u5DF2\u66F4\u65B0");
          this.close();
          const view = ((_a = this.app.workspace.getLeavesOfType(VIEW_TYPE_SIDEBAR_OVERVIEW)[0]) == null ? void 0 : _a.view) || ((_b = this.app.workspace.getLeavesOfType(VIEW_TYPE_MAIN_OVERVIEW)[0]) == null ? void 0 : _b.view);
          if (view && "refresh" in view) {
            view.refresh();
          }
        } catch (error) {
          new import_obsidian5.Notice("\u274C \u4FDD\u5B58\u5931\u8D25");
          console.error("Error updating flashcard:", error);
        }
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    }
    new EditFlashcardModal(this.app, this.plugin, card).open();
  }
  async batchCreateFlashcards() {
    const units = Array.from(this.state.selectedUnitIds).map((id) => this.plugin.dataManager.getContentUnit(id)).filter((u) => u !== void 0 && u.flashcardIds.length === 0);
    if (units.length === 0) {
      new import_obsidian5.Notice("\u26A0\uFE0F \u9009\u4E2D\u7684\u7B14\u8BB0\u90FD\u5DF2\u521B\u5EFA\u8FC7\u95EA\u5361");
      return;
    }
    const { BatchCreateModal: BatchCreateModal2 } = await Promise.resolve().then(() => (init_OverviewView(), OverviewView_exports));
    const { QuickFlashcardCreator: QuickFlashcardCreator2 } = await Promise.resolve().then(() => (init_QuickFlashcardCreator(), QuickFlashcardCreator_exports));
    const quickCreator = new QuickFlashcardCreator2(this.plugin);
    const modal = new BatchCreateModal2(
      this.app,
      this.plugin,
      quickCreator,
      units,
      () => {
        this.state.clearSelection();
        this.refresh();
      }
    );
    modal.open();
  }
  async batchDeleteNotes() {
    if (!confirm(`\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u7684 ${this.state.selectedUnitIds.size} \u6761\u7B14\u8BB0\u5417\uFF1F`)) {
      return;
    }
    let success = 0;
    let failed = 0;
    for (const unitId of this.state.selectedUnitIds) {
      try {
        const unit = this.plugin.dataManager.getContentUnit(unitId);
        if (unit) {
          if (unit.flashcardIds.length > 0) {
            for (const cardId of unit.flashcardIds) {
              await this.plugin.flashcardManager.deleteCard(cardId);
            }
          }
        }
        await this.plugin.dataManager.deleteContentUnit(unitId);
        success++;
      } catch (error) {
        console.error("Error deleting note:", error);
        failed++;
      }
    }
    this.state.clearSelection();
    new import_obsidian5.Notice(`\u2705 \u5DF2\u5220\u9664 ${success} \u6761\u7B14\u8BB0${failed > 0 ? `\uFF0C${failed} \u6761\u5931\u8D25` : ""}`);
    this.refresh();
  }
  async batchDeleteFlashcards() {
    if (!confirm(`\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u7684 ${this.state.selectedCardIds.size} \u5F20\u95EA\u5361\u5417\uFF1F`)) {
      return;
    }
    let success = 0;
    let failed = 0;
    for (const cardId of this.state.selectedCardIds) {
      try {
        await this.plugin.flashcardManager.deleteCard(cardId);
        success++;
      } catch (error) {
        console.error("Error deleting flashcard:", error);
        failed++;
      }
    }
    this.state.clearSelection();
    new import_obsidian5.Notice(`\u2705 \u5DF2\u5220\u9664 ${success} \u5F20\u95EA\u5361${failed > 0 ? `\uFF0C${failed} \u5F20\u5931\u8D25` : ""}`);
    this.refresh();
  }
  // ==================== 工具方法 ====================
  refreshRightPanel() {
    const container = this.containerEl.children[1];
    const rightPanel = container.querySelector(".right-panel");
    if (rightPanel) {
      rightPanel.empty();
      this.renderRightPanel(rightPanel);
    }
  }
  getGroupIcon() {
    switch (this.state.groupMode) {
      case "file":
        return "\u{1F4C4}";
      case "annotation":
        return "\u{1F4AC}";
      case "tag":
        return "\u{1F3F7}\uFE0F";
      case "date":
        return "\u{1F4C5}";
      default:
        return "\u{1F4C1}";
    }
  }
  formatDate(date) {
    if (!date)
      return "";
    return date.toLocaleDateString("zh-CN", {
      year: "numeric",
      month: "2-digit",
      day: "2-digit"
    });
  }
  // ==================== 样式添加 ====================
};

// src/ui/view/ReviewView.ts
var import_obsidian7 = require("obsidian");

// src/core/CardScheduler.ts
var CardScheduler = class {
  /**
   * 计算下次复习时间（基于 SM-2 算法）
   */
  schedule(card, ease, timeSpent, userAnswer) {
    const oldScheduling = { ...card.scheduling };
    const newScheduling = { ...card.scheduling };
    const now = Date.now();
    card.stats.totalReviews++;
    card.stats.lastReview = now;
    const totalTime = card.stats.averageTime * (card.stats.totalReviews - 1) + timeSpent;
    card.stats.averageTime = totalTime / card.stats.totalReviews;
    switch (ease) {
      case "again":
        this.scheduleAgain(newScheduling, card.stats);
        break;
      case "hard":
        this.scheduleHard(newScheduling, card.stats);
        break;
      case "good":
        this.scheduleGood(newScheduling, card.stats);
        break;
      case "easy":
        this.scheduleEasy(newScheduling, card.stats);
        break;
    }
    card.scheduling = newScheduling;
    card.metadata.updatedAt = now;
    const reviewLog = {
      flashcardId: card.id,
      timestamp: now,
      response: {
        userAnswer,
        timeSpent,
        ease
      },
      schedulingChange: {
        oldInterval: oldScheduling.interval,
        newInterval: newScheduling.interval,
        oldEase: oldScheduling.ease,
        newEase: newScheduling.ease
      }
    };
    return { updatedCard: card, reviewLog };
  }
  /**
   * Again - 完全忘记
   */
  scheduleAgain(scheduling, stats) {
    scheduling.interval = 1;
    scheduling.ease = Math.max(1.3, scheduling.ease - 0.2);
    scheduling.due = Date.now() + scheduling.interval * 60 * 1e3;
    scheduling.lapses++;
    scheduling.reps++;
    if (scheduling.state === "new") {
      scheduling.state = "learning";
    } else {
      scheduling.state = "relearning";
    }
    stats.difficulty = Math.min(1, stats.difficulty + 0.1);
  }
  /**
   * Hard - 困难
   */
  scheduleHard(scheduling, stats) {
    scheduling.reps++;
    if (scheduling.state === "new" || scheduling.state === "learning") {
      scheduling.interval = 10;
      scheduling.due = Date.now() + 10 * 60 * 1e3;
      scheduling.state = "learning";
    } else {
      scheduling.interval = Math.max(1, scheduling.interval * 1.2);
      scheduling.ease = Math.max(1.3, scheduling.ease - 0.15);
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    }
    stats.difficulty = Math.min(1, stats.difficulty + 0.05);
    stats.correctCount += 0.5;
  }
  /**
   * Good - 正确
   */
  scheduleGood(scheduling, stats) {
    scheduling.reps++;
    stats.correctCount++;
    if (scheduling.state === "new") {
      scheduling.interval = 1;
      scheduling.due = Date.now() + 1 * 24 * 60 * 60 * 1e3;
      scheduling.state = "learning";
    } else if (scheduling.state === "learning") {
      if (scheduling.interval < 1) {
        scheduling.interval = 1;
      } else {
        scheduling.interval = 3;
      }
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    } else {
      scheduling.interval = scheduling.interval * scheduling.ease;
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.ease = scheduling.ease + 0.1;
      scheduling.state = "review";
    }
    stats.difficulty = Math.max(0, stats.difficulty - 0.05);
  }
  /**
   * Easy - 非常简单
   */
  scheduleEasy(scheduling, stats) {
    scheduling.reps++;
    stats.correctCount++;
    if (scheduling.state === "new") {
      scheduling.interval = 4;
      scheduling.due = Date.now() + 4 * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    } else if (scheduling.state === "learning") {
      scheduling.interval = 7;
      scheduling.due = Date.now() + 7 * 24 * 60 * 60 * 1e3;
      scheduling.state = "review";
    } else {
      scheduling.interval = scheduling.interval * (scheduling.ease + 0.3);
      scheduling.due = Date.now() + scheduling.interval * 24 * 60 * 60 * 1e3;
      scheduling.ease = scheduling.ease + 0.15;
      scheduling.state = "review";
    }
    stats.difficulty = Math.max(0, stats.difficulty - 0.1);
  }
  /**
   * 评估用户答案（用于输入答案模式）
   */
  /**
   * 评估用户答案(用于输入答案模式)
   */
  evaluateAnswer(correctAnswer, userAnswer) {
    if (Array.isArray(correctAnswer) && Array.isArray(userAnswer)) {
      let correctCount = 0;
      const total = correctAnswer.length;
      for (let i = 0; i < total; i++) {
        const evaluation = this.evaluateSingleAnswer(
          correctAnswer[i],
          userAnswer[i] || ""
        );
        if (evaluation.similarity >= 0.9)
          correctCount++;
        else if (evaluation.similarity >= 0.6)
          correctCount += 0.5;
      }
      const overallSimilarity = correctCount / total;
      if (overallSimilarity >= 0.9) {
        return { correctness: "correct", similarity: overallSimilarity };
      } else if (overallSimilarity >= 0.6) {
        return { correctness: "partial", similarity: overallSimilarity };
      } else {
        return { correctness: "wrong", similarity: overallSimilarity };
      }
    }
    return this.evaluateSingleAnswer(
      correctAnswer,
      userAnswer
    );
  }
  /**
   * 🆕 评估单个答案(支持 "/" 分隔的多个正确答案)
   */
  evaluateSingleAnswer(correctAnswer, userAnswer) {
    const correct = this.normalize(correctAnswer);
    const user = this.normalize(userAnswer);
    if (user.length === 0) {
      return { correctness: "wrong", similarity: 0 };
    }
    if (correctAnswer.includes("/") || correctAnswer.includes("|")) {
      const alternatives = correctAnswer.split(/[\/|]/).map((alt) => this.normalize(alt.trim())).filter((alt) => alt.length > 0);
      let maxSimilarity = 0;
      for (const alternative of alternatives) {
        if (user === alternative) {
          return { correctness: "correct", similarity: 1 };
        }
        const similarity2 = this.calculateSimilarity(alternative, user);
        maxSimilarity = Math.max(maxSimilarity, similarity2);
      }
      if (maxSimilarity >= 0.9) {
        return { correctness: "correct", similarity: maxSimilarity };
      } else if (maxSimilarity >= 0.7) {
        return { correctness: "partial", similarity: maxSimilarity };
      } else {
        return { correctness: "wrong", similarity: maxSimilarity };
      }
    }
    const lengthRatio = Math.min(user.length, correct.length) / Math.max(user.length, correct.length);
    if (lengthRatio < 0.3 && user.length < 6) {
      return { correctness: "wrong", similarity: 0 };
    }
    const similarity = this.calculateSimilarity(correct, user);
    const coverage = this.calculateTokenCoverage(correct, user);
    if (similarity >= 0.9) {
      return { correctness: "correct", similarity };
    }
    if (similarity < 0.7 && coverage >= 0.6) {
      return { correctness: "partial", similarity };
    }
    if (similarity >= 0.7) {
      return { correctness: "partial", similarity };
    }
    return { correctness: "wrong", similarity };
  }
  /**
   * 标准化文本
   */
  normalize(text) {
    return text.toLowerCase().trim().replace(/\s+/g, " ").replace(/\n+/g, " ").replace(/[，。！？、；：""''（）《》【】\.,!?;:"'()\[\]{}]/g, "");
  }
  /**
   * 计算相似度（Levenshtein 距离）
   */
  calculateSimilarity(str1, str2) {
    if (str1 === str2)
      return 1;
    if (str1.length === 0 || str2.length === 0)
      return 0;
    const matrix = [];
    for (let i = 0; i <= str2.length; i++) {
      matrix[i] = [i];
    }
    for (let j = 0; j <= str1.length; j++) {
      matrix[0][j] = j;
    }
    for (let i = 1; i <= str2.length; i++) {
      for (let j = 1; j <= str1.length; j++) {
        if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
          matrix[i][j] = matrix[i - 1][j - 1];
        } else {
          matrix[i][j] = Math.min(
            matrix[i - 1][j - 1] + 1,
            // 替换
            matrix[i][j - 1] + 1,
            // 插入
            matrix[i - 1][j] + 1
            // 删除
          );
        }
      }
    }
    const distance = matrix[str2.length][str1.length];
    const maxLength = Math.max(str1.length, str2.length);
    return 1 - distance / maxLength;
  }
  /**
   * 计算关键词覆盖率
   * 用户答案中命中了多少标准答案的词
   */
  calculateTokenCoverage(correct, user) {
    const correctTokens = correct.split(" ").filter((t) => t.length > 1);
    const userTokens = new Set(user.split(" "));
    if (correctTokens.length === 0)
      return 0;
    let hit = 0;
    for (const token of correctTokens) {
      if (userTokens.has(token))
        hit++;
    }
    return hit / correctTokens.length;
  }
  /**
   * 根据相似度建议难度
   */
  suggestEase(similarity) {
    if (similarity >= 0.8)
      return "easy";
    if (similarity >= 0.7)
      return "good";
    if (similarity >= 0.5)
      return "hard";
    return "again";
  }
};

// src/ui/components/modals/FlashcardEditModal.ts
var import_obsidian6 = require("obsidian");
var FlashcardEditModal = class extends import_obsidian6.Modal {
  constructor(app, card, onSubmit) {
    super(app);
    this.card = card;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    var _a, _b;
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h3", { text: "\u7F16\u8F91\u95EA\u5361" });
    contentEl.createEl("label", { text: "\u95EE\u9898" });
    const questionInput = contentEl.createEl("textarea");
    questionInput.value = this.card.front;
    contentEl.createEl("label", { text: "\u7B54\u6848" });
    const answerInput = contentEl.createEl("textarea");
    answerInput.value = this.card.type === "cloze" ? (_b = (_a = this.card.back) == null ? void 0 : _a[0]) != null ? _b : "" : this.card.back;
    const saveBtn = contentEl.createEl("button", { text: "\u4FDD\u5B58" });
    saveBtn.onclick = () => {
      this.onSubmit(
        questionInput.value.trim(),
        answerInput.value.trim()
      );
      this.close();
    };
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/ui/state/reviewStateManager.ts
var ReviewStateManager = class {
  constructor() {
    this.state = this.createInitialState();
  }
  createInitialState() {
    return {
      showAnswer: false,
      startTime: 0,
      userAnswers: [],
      userAnswer: ""
    };
  }
  getState() {
    return this.state;
  }
  reset() {
    this.state = this.createInitialState();
  }
  updateForNewCard(card, isSameCard) {
    if (!isSameCard) {
      this.reset();
    }
    if (!this.state.showAnswer && this.state.startTime === 0) {
      this.state.startTime = Date.now();
    }
  }
  setShowAnswer(show) {
    this.state.showAnswer = show;
  }
  setUserAnswer(answer) {
    this.state.userAnswer = answer;
  }
  setUserAnswers(answers) {
    this.state.userAnswers = answers;
  }
  updateUserAnswerAtIndex(index, value) {
    this.state.userAnswers[index] = value;
  }
  ensureUserAnswersLength(length) {
    if (this.state.userAnswers.length < length) {
      this.state.userAnswers = new Array(length).fill("");
    }
  }
  getTimeSpent() {
    return (Date.now() - this.state.startTime) / 1e3;
  }
};

// src/ui/components/TableRenderer.ts
var TableRenderer = class {
  // 检测是否为表格格式
  static isTableFormat(text) {
    const lines = text.trim().split("\n");
    if (lines.length < 2)
      return false;
    const hasSeparator = lines.some((line) => /^\|?[\s-:|]+\|?$/.test(line.trim()));
    const pipeLines = lines.filter((line) => line.includes("|")).length;
    return hasSeparator || pipeLines >= lines.length * 0.7;
  }
  // 渲染表格
  static renderTable(markdown, showAnswer = false) {
    const container = document.createElement("div");
    if (!(markdown == null ? void 0 : markdown.trim())) {
      container.textContent = "(empty table)";
      return container;
    }
    const lines = markdown.trim().split("\n");
    if (lines.length < 2) {
      container.textContent = markdown;
      return container;
    }
    const table = container.createEl("table", {
      cls: "learning-system-table flashcard-review-table"
    });
    const separatorIndex = this.findSeparatorIndex(lines);
    if (separatorIndex > 0) {
      this.renderTableWithHeader(table, lines, separatorIndex, showAnswer);
    } else {
      this.renderTableWithoutHeader(table, lines, showAnswer);
    }
    return container;
  }
  // 查找分隔符位置
  static findSeparatorIndex(lines) {
    return lines.findIndex((line) => {
      const cleaned = line.replace(/[\s|]/g, "");
      return cleaned.length >= 3 && /^[-:]+$/.test(cleaned);
    });
  }
  // 渲染带表头的表格
  static renderTableWithHeader(table, lines, separatorIndex, showAnswer) {
    const headerCells = this.parseCells(lines[separatorIndex - 1]);
    const thead = table.createEl("thead");
    const headerRow = thead.createEl("tr");
    headerCells.forEach((cell) => {
      const th = headerRow.createEl("th");
      th.innerHTML = this.processCellContent(cell, showAnswer);
    });
    const tbody = table.createEl("tbody");
    for (let i = separatorIndex + 1; i < lines.length; i++) {
      this.renderTableRow(tbody, lines[i], showAnswer);
    }
  }
  // 渲染无表头的表格
  static renderTableWithoutHeader(table, lines, showAnswer) {
    const tbody = table.createEl("tbody");
    lines.forEach((line) => this.renderTableRow(tbody, line, showAnswer));
  }
  // 渲染单行
  static renderTableRow(tbody, line, showAnswer) {
    if (!line.trim())
      return;
    const cells = this.parseCells(line);
    if (cells.length === 0)
      return;
    const row = tbody.createEl("tr");
    cells.forEach((cell) => {
      const td = row.createEl("td");
      td.innerHTML = this.processCellContent(cell, showAnswer);
    });
  }
  // 解析单元格
  static parseCells(line) {
    let trimmed = line.trim();
    if (trimmed.startsWith("|"))
      trimmed = trimmed.slice(1);
    if (trimmed.endsWith("|"))
      trimmed = trimmed.slice(0, -1);
    return trimmed.split("|").map((c) => c.trim()).filter((c) => c.length > 0);
  }
  // 处理单元格内容
  static processCellContent(cell, showAnswer) {
    if (!cell.includes("=="))
      return cell;
    if (showAnswer) {
      return cell.replace(/==([^=]+)==/g, '<mark class="revealed">$1</mark>');
    } else {
      return cell.replace(/==([^=]+)==/g, '<span class="cloze-blank">[___]</span>');
    }
  }
  // 渲染带用户答案的表格（完形填空用）
  static renderTableWithUserAnswers(originalMarkdown, deletions, userAnswers, scheduler) {
    const container = document.createElement("div");
    const lines = originalMarkdown.trim().split("\n");
    if (lines.length < 2) {
      container.textContent = originalMarkdown;
      return container;
    }
    const table = container.createEl("table", {
      cls: "learning-system-table flashcard-review-table user-answer-table"
    });
    const separatorIndex = this.findSeparatorIndex(lines);
    let deletionIndex = 0;
    if (separatorIndex > 0) {
      const headerCells = this.parseCells(lines[separatorIndex - 1]);
      const thead = table.createEl("thead");
      const headerRow = thead.createEl("tr");
      headerCells.forEach((cell) => {
        const th = headerRow.createEl("th");
        th.innerHTML = this.processCellWithUserAnswer(
          cell,
          deletions,
          userAnswers,
          deletionIndex,
          scheduler
        );
        if (cell.includes("=="))
          deletionIndex++;
      });
    }
    const tbody = table.createEl("tbody");
    const startRow = separatorIndex > 0 ? separatorIndex + 1 : 0;
    for (let i = startRow; i < lines.length; i++) {
      const line = lines[i];
      if (!line.trim())
        continue;
      const cells = this.parseCells(line);
      if (cells.length === 0)
        continue;
      const row = tbody.createEl("tr");
      cells.forEach((cell) => {
        const td = row.createEl("td");
        td.innerHTML = this.processCellWithUserAnswer(
          cell,
          deletions,
          userAnswers,
          deletionIndex,
          scheduler
        );
        if (cell.includes("=="))
          deletionIndex++;
      });
    }
    return container;
  }
  // 处理带用户答案的单元格
  static processCellWithUserAnswer(cell, deletions, userAnswers, deletionIndex, scheduler) {
    if (!cell.includes("=="))
      return cell;
    const match = cell.match(/==([^=]+)==/);
    if (!match || deletionIndex >= deletions.length) {
      return cell.replace(/==([^=]+)==/g, '<span class="cloze-blank">[___]</span>');
    }
    const correctAnswer = deletions[deletionIndex].answer;
    const userAnswer = userAnswers[deletionIndex] || "";
    const evaluation = scheduler.evaluateAnswer(correctAnswer, userAnswer);
    const displayText = userAnswer || "(empty)";
    const correctnessClass = evaluation.correctness;
    return cell.replace(
      /==([^=]+)==/g,
      `<span class="user-answer-cell ${correctnessClass}">${displayText}</span>`
    );
  }
};

// src/ui/components/reviewCardRender.ts
var ClozeCardRenderer = class {
  renderQuestion(container, card, state) {
    const questionText = container.createDiv({ cls: "question-text" });
    const isTable = TableRenderer.isTableFormat(card.front);
    if (isTable) {
      const tableEl = TableRenderer.renderTable(card.front, false);
      questionText.appendChild(tableEl);
      questionText.classList.add("table-question");
    } else {
      questionText.textContent = card.front;
    }
    if (card.cloze) {
      const inputArea = container.createDiv({ cls: "cloze-input-area" });
      inputArea.createEl("h4", { text: "Fill in the blanks:" });
      if (state.userAnswers.length < card.cloze.deletions.length) {
        state.userAnswers = new Array(card.cloze.deletions.length).fill("");
      }
      card.cloze.deletions.forEach((deletion, index) => {
        const inputGroup = inputArea.createDiv({ cls: "input-group" });
        inputGroup.createSpan({ text: `${index + 1}. ` });
        const input = inputGroup.createEl("input", {
          type: "text",
          placeholder: "Your answer...",
          cls: "cloze-input",
          value: state.userAnswers[index] || ""
        });
        input.addEventListener("input", (e) => {
          state.userAnswers[index] = e.target.value;
        });
        if (index === 0) {
          setTimeout(() => input.focus(), 50);
        }
      });
    }
  }
  renderAnswer(container, card, state, scheduler) {
    if (!card.cloze)
      return;
    const answerArea = container.createDiv({ cls: "answer-area" });
    const isOriginalTable = TableRenderer.isTableFormat(card.cloze.original);
    if (isOriginalTable) {
      this.renderTableAnswer(answerArea, card, state, scheduler);
    } else {
      this.renderTextAnswer(answerArea, card, state, scheduler);
    }
  }
  renderTableAnswer(answerArea, card, state, scheduler) {
    const columnsContainer = answerArea.createDiv({ cls: "cloze-table-columns" });
    const correctColumn = columnsContainer.createDiv({ cls: "qa-column" });
    correctColumn.createEl("h4", { text: "Correct Answer:", cls: "column-label" });
    const correctDiv = correctColumn.createDiv({ cls: "comparison-item" });
    const tableEl = TableRenderer.renderTable(card.cloze.original, true);
    correctDiv.appendChild(tableEl);
    correctDiv.classList.add("table-answer");
    const userColumn = columnsContainer.createDiv({ cls: "qa-column" });
    userColumn.createEl("h4", { text: "Your Answer:", cls: "column-label" });
    const userDiv = userColumn.createDiv({ cls: "comparison-item" });
    if (state.userAnswers.length > 0 && state.userAnswers.some((a) => a.trim())) {
      const userTableEl = TableRenderer.renderTableWithUserAnswers(
        card.cloze.original,
        card.cloze.deletions,
        state.userAnswers,
        scheduler
      );
      userDiv.appendChild(userTableEl);
      userDiv.classList.add("table-answer");
    } else {
      const emptyTableEl = TableRenderer.renderTable(card.front, false);
      userDiv.appendChild(emptyTableEl);
      userDiv.classList.add("table-answer", "no-answer");
    }
    this.renderDetailedComparison(answerArea, card, state, scheduler);
  }
  renderTextAnswer(answerArea, card, state, scheduler) {
    const fullText = answerArea.createDiv({ cls: "full-text" });
    fullText.textContent = card.cloze.original;
    this.renderDetailedComparison(answerArea, card, state, scheduler);
  }
  renderDetailedComparison(answerArea, card, state, scheduler) {
    if (state.userAnswers.length === 0)
      return;
    const comparison = answerArea.createDiv({ cls: "answer-comparison" });
    comparison.createEl("h4", { text: "Answer Details:" });
    card.cloze.deletions.forEach((deletion, index) => {
      const item = comparison.createDiv({ cls: "comparison-item" });
      item.createSpan({ text: `${index + 1}. ` });
      const userAnswer = state.userAnswers[index] || "";
      const evaluation = scheduler.evaluateAnswer(deletion.answer, userAnswer);
      item.createEl("span", {
        text: userAnswer || "(empty)",
        cls: `user-answer ${evaluation.correctness}`
      });
      item.createSpan({ text: " \u2192 " });
      item.createEl("span", {
        text: deletion.answer,
        cls: "correct-answer"
      });
      if (evaluation.correctness === "partial") {
        item.createEl("small", {
          text: ` (${Math.round(evaluation.similarity * 100)}% match)`,
          cls: "similarity-info"
        });
      }
    });
  }
};
var QACardRenderer = class {
  renderQuestion(container, card, state) {
    const questionText = container.createDiv({ cls: "question-text" });
    const isTable = TableRenderer.isTableFormat(card.front);
    if (isTable) {
      const tableEl = TableRenderer.renderTable(card.front, false);
      questionText.appendChild(tableEl);
      questionText.classList.add("table-question");
    } else {
      questionText.textContent = card.front;
    }
    const inputArea = container.createDiv({ cls: "qa-input-area" });
    inputArea.createEl("h4", { text: "Your Answer:" });
    const textarea = inputArea.createEl("textarea", {
      placeholder: "Type your answer here...",
      cls: "qa-input",
      value: state.userAnswer
    });
    textarea.addEventListener("input", (e) => {
      state.userAnswer = e.target.value;
    });
    setTimeout(() => textarea.focus(), 50);
  }
  renderAnswer(container, card, state, scheduler) {
    const answerArea = container.createDiv({ cls: "answer-area" });
    const correctAnswer = Array.isArray(card.back) ? card.back[0] || card.back.join("\n") : card.back;
    const isTable = TableRenderer.isTableFormat(correctAnswer);
    const evaluation = state.userAnswer.trim() ? scheduler.evaluateAnswer(correctAnswer, state.userAnswer) : null;
    const comparison = answerArea.createDiv({
      cls: "answer-comparison qa-comparison"
    });
    const columnsContainer = comparison.createDiv({ cls: "qa-columns-container" });
    this.renderCorrectAnswerColumn(columnsContainer, correctAnswer, isTable);
    this.renderUserAnswerColumn(
      columnsContainer,
      state.userAnswer,
      isTable,
      evaluation
    );
    if ((evaluation == null ? void 0 : evaluation.correctness) === "partial") {
      const similarityInfo = comparison.createEl("div", {
        cls: "similarity-info qa-similarity"
      });
      similarityInfo.textContent = `Similarity: ${Math.round(evaluation.similarity * 100)}%`;
    }
  }
  renderCorrectAnswerColumn(container, correctAnswer, isTable) {
    const correctColumn = container.createDiv({ cls: "qa-column" });
    correctColumn.createEl("h4", { text: "Correct Answer:", cls: "column-label" });
    const correctAnswerDiv = correctColumn.createDiv({ cls: "comparison-item" });
    if (isTable) {
      const tableEl = TableRenderer.renderTable(correctAnswer, true);
      correctAnswerDiv.appendChild(tableEl);
      correctAnswerDiv.classList.add("table-answer");
    } else {
      correctAnswerDiv.createEl("div", {
        text: correctAnswer,
        cls: "correct-answer qa-correct-answer"
      });
    }
  }
  renderUserAnswerColumn(container, userAnswer, isTable, evaluation) {
    const userColumn = container.createDiv({ cls: "qa-column" });
    userColumn.createEl("h4", { text: "Your Answer:", cls: "column-label" });
    const userAnswerDiv = userColumn.createDiv({ cls: "comparison-item" });
    const isUserAnswerTable = TableRenderer.isTableFormat(userAnswer.trim());
    const shouldRenderAsTable = isUserAnswerTable || isTable && userAnswer.trim();
    if (shouldRenderAsTable && userAnswer.trim()) {
      try {
        const userTableEl = TableRenderer.renderTable(userAnswer, true);
        userAnswerDiv.appendChild(userTableEl);
        userAnswerDiv.classList.add("table-answer");
        if (evaluation) {
          userAnswerDiv.classList.add("user-answer", evaluation.correctness);
        }
      } catch (error) {
        this.renderTextUserAnswer(userAnswerDiv, userAnswer, evaluation);
      }
    } else {
      this.renderTextUserAnswer(userAnswerDiv, userAnswer, evaluation);
    }
  }
  renderTextUserAnswer(container, userAnswer, evaluation) {
    const userAnswerElement = container.createEl("div", {
      text: userAnswer.trim() || "(no answer provided)",
      cls: "qa-user-answer"
    });
    if (evaluation) {
      userAnswerElement.classList.add("user-answer", evaluation.correctness);
    } else {
      userAnswerElement.classList.add("no-answer");
    }
  }
};
var CardRendererFactory = class {
  static getRenderer(cardType) {
    const renderer = this.renderers.get(cardType);
    if (!renderer) {
      throw new Error(`Unknown card type: ${cardType}`);
    }
    return renderer;
  }
};
CardRendererFactory.renderers = /* @__PURE__ */ new Map([
  ["cloze", new ClozeCardRenderer()],
  ["qa", new QACardRenderer()]
]);

// src/ui/style/reviewStyle.ts
var reviewStyle = class {
  /**
   * 注入样式到页面
   */
  static inject() {
    if (this.isInjected || document.getElementById(this.styleId)) {
      return;
    }
    const styleEl = document.createElement("style");
    styleEl.id = this.styleId;
    styleEl.textContent = this.getStyles();
    document.head.appendChild(styleEl);
    this.isInjected = true;
  }
  /**
   * 移除样式
   */
  static remove() {
    const styleEl = document.getElementById(this.styleId);
    if (styleEl) {
      styleEl.remove();
      this.isInjected = false;
    }
  }
  /**
   * 获取所有样式（从这里统一管理）
   */
  static getStyles() {
    return `
       .review-container {
        padding: 16px;
        max-width: 800px;
        margin: 0 auto;
      }

      .empty-state {
        text-align: center;
        padding: 40px 20px;
      }

      .empty-state h2 {
        font-size: 1.8em;
        margin-bottom: 8px;
      }

      .stats-summary {
        margin: 20px 0;
        padding: 16px;
        background: var(--background-secondary);
        border-radius: 8px;
        text-align: left;
        max-width: 300px;
        margin-left: auto;
        margin-right: auto;
      }

      .progress-bar {
        margin-bottom: 20px;
      }

      .progress-stats {
        display: flex;
        justify-content: space-between;
        margin-bottom: 8px;
      }

      .progress-text {
        font-weight: 600;
        font-size: 1em;
      }

      .bar-container {
        height: 6px;
        background: var(--background-secondary);
        border-radius: 3px;
        overflow: hidden;
      }

      .bar {
        height: 100%;
        background: var(--interactive-accent);
        transition: width 0.3s ease;
      }

      .card-area {
        background: var(--background-primary);
        border: 2px solid var(--background-modifier-border);
        border-radius: 10px;
        padding: 20px;
        min-height: 350px;
        position: relative;
      }

      .top-actions-bar {
        position: absolute;
        top: 16px;
        right: 16px;
        display: flex;
        gap: 6px;
        z-index: 10;
      }

      .top-action-btn {
        width: 32px;
        height: 32px;
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-primary);
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        color: var(--text-normal);
        padding: 0;
      }

      .top-action-btn:hover {
        background: var(--background-modifier-hover);
        border-color: var(--interactive-accent);
      }

      .more-dropdown {
        position: absolute;
        top: 38px;
        right: 0;
        background: var(--background-primary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 6px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        min-width: 150px;
        z-index: 100;
      }

      .dropdown-item {
        padding: 8px 14px;
        cursor: pointer;
        transition: background 0.2s;
        white-space: nowrap;
        font-size: 0.9em;
      }

      .dropdown-item:hover {
        background: var(--background-modifier-hover);
      }

      .delete-item:hover {
        background: var(--background-modifier-error-hover);
        color: var(--color-red);
      }

      .card-info {
        display: flex;
        gap: 10px;
        margin-bottom: 16px;
        padding-bottom: 12px;
        border-bottom: 1px solid var(--background-modifier-border);
        padding-right: 80px;
      }

      .card-type, .card-deck {
        padding: 3px 10px;
        background: var(--background-secondary);
        border-radius: 10px;
        font-size: 0.85em;
      }

      .question-area, .answer-area {
        margin: 16px 0;
      }

      .question-text {
        font-size: 1.2em;
        line-height: 1.5;
        padding: 14px;
        background: var(--background-secondary);
        border-radius: 6px;
      }

      .cloze-input-area, .qa-input-area {
        margin: 16px 0;
      }

      .cloze-input-area h4, .qa-input-area h4 {
        margin-bottom: 10px;
        color: var(--text-muted);
        font-size: 0.9em;
      }

      .input-group {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 8px;
      }

      .cloze-input {
        flex: 1;
        padding: 8px 12px;
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-primary);
        font-size: 0.95em;
      }

      .cloze-input:focus, .qa-input:focus {
        border-color: var(--interactive-accent);
        outline: none;
        box-shadow: 0 0 0 2px var(--interactive-accent-hover);
      }

      .qa-input {
        width: 100%;
        min-height: 100px;
        padding: 10px 12px;
        border: 2px solid var(--background-modifier-border);
        border-radius: 6px;
        background: var(--background-primary);
        font-size: 0.95em;
        font-family: inherit;
        resize: vertical;
        line-height: 1.5;
      }

      .question-review {
        margin-bottom: 12px;
        padding: 10px;
        background: var(--background-secondary-alt);
        border-radius: 6px;
      }

      .question-review h4 {
        margin: 0 0 6px 0;
        color: var(--text-muted);
        font-size: 0.85em;
      }

      .review-text {
        color: var(--text-muted);
        font-size: 0.95em;
      }

      .full-text {
        font-size: 1.1em;
        line-height: 1.5;
        padding: 12px;
        background: var(--background-secondary);
        border-radius: 6px;
        margin-bottom: 12px;
      }

      .answer-comparison {
        padding: 10px;
        background: var(--background-secondary-alt);
        border-radius: 6px;
        margin-top: 12px;
      }

      .answer-comparison h4 {
        margin: 0 0 8px 0;
        color: var(--text-muted);
        font-size: 0.85em;
      }

      .comparison-item {
        padding: 8px;
        margin-bottom: 6px;
        background: var(--background-primary);
        border-radius: 4px;
      }

      .user-answer {
        font-weight: 500;
        padding: 2px 6px;
        border-radius: 3px;
      }

      .user-answer.correct {
        background: var(--background-modifier-success, #4caf50) !important;
        color: white !important;
      }

      .user-answer.partial {
        background: #FFC000 !important;
        color: white !important;
      }

      .user-answer.wrong {
        background: var(--background-modifier-error, #f44336) !important;
        color: white !important;
      }

      .correct-answer {
        color: var(--text-accent);
        font-weight: 500;
      }

      .similarity-info {
        color: var(--text-muted);
        font-style: italic;
        font-size: 0.85em;
      }

      .qa-columns-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
        margin-bottom: 12px;
      }

      .qa-column {
        display: flex;
        flex-direction: column;
      }

      .column-label {
        margin: 0 0 8px 0 !important;
        color: var(--text-muted);
        font-size: 0.85em;
      }

      .qa-user-answer, .qa-correct-answer {
        padding: 12px;
        border-radius: 6px;
        white-space: pre-wrap;
        word-break: break-word;
        font-size: 0.95em;
        line-height: 1.5;
        min-height: 60px;
      }

      .qa-correct-answer {
        background: var(--background-secondary);
      }

      .qa-user-answer.correct {
        background: #4caf50 !important;
        color: white !important;
      }

      .qa-user-answer.partial {
        background: #FFC000 !important;
        color: white !important;
      }

      .qa-user-answer.wrong {
        background: #f44336 !important;
        color: white !important;
      }

      .qa-user-answer.no-answer {
        background: var(--background-secondary);
        color: var(--text-muted);
        font-style: italic;
        border: 2px dashed var(--background-modifier-border);
      }

      .button-area {
        display: flex;
        gap: 12px;
        justify-content: center;
        margin-top: 20px;
      }

      .show-answer-btn {
        padding: 10px 32px;
        font-size: 1em;
      }

      .rating-area {
        margin: 15px 0 10px 0;
        text-align: center;
      }

      .rating-buttons {
        display: flex;
        gap: 20px;
        justify-content: center;
      }

      .rating-btn {
        flex: 1;
        max-width: 120px;
        padding: 14px 8px;
        border: 2px solid var(--background-modifier-border);
        border-radius: 8px;
        background: var(--background-primary);
        cursor: pointer;
        transition: all 0.2s;
      }

      .rating-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      }

      .rating-red:hover { 
        border-color: var(--color-red);
        background: var(--background-modifier-error-hover);
      }

      .rating-orange:hover { 
        border-color: #FFC000;
        background: rgba(255, 192, 0, 0.1);
      }

      .rating-blue:hover { 
        border-color: var(--interactive-accent);
        background: var(--background-modifier-hover);
      }

      .rating-green:hover { 
        border-color: var(--color-green);
        background: var(--background-modifier-success-hover);
      }

      .rating-label {
        font-weight: 600;
        font-size: 1em;
        margin-bottom: 4px;
      }

      .rating-interval {
        font-size: 0.85em;
        color: var(--text-muted);
      }

      .rating-hotkey {
        font-size: 0.75em;
        color: var(--text-muted);
        margin-top: 4px;
        opacity: 0.7;
      }

      .rating-btn:hover .rating-hotkey {
        opacity: 1;
        color: var(--text-normal);
      }

      .learning-system-table, .flashcard-review-table {
        width: 100%;
        border-collapse: collapse;
        margin: 8px 0;
        background: var(--background-primary);
      }

      .learning-system-table th, .learning-system-table td,
      .flashcard-review-table th, .flashcard-review-table td {
        padding: 10px 12px;
        text-align: left;
        border: 1px solid var(--background-modifier-border);
      }

      .learning-system-table th, .flashcard-review-table th {
        background: var(--background-secondary);
        font-weight: 600;
        color: var(--text-normal);
      }

      .learning-system-table tr:hover, .flashcard-review-table tr:hover {
        background: var(--background-modifier-hover);
      }

      .cloze-blank {
        display: inline-block;
        min-width: 60px;
        padding: 2px 8px;
        background: var(--background-secondary);
        border: 2px dashed var(--text-muted);
        border-radius: 4px;
        color: var(--text-muted);
        font-family: monospace;
        font-size: 0.9em;
      }

      mark.revealed {
        background: var(--text-highlight-bg);
        color: var(--text-normal);
        padding: 2px 4px;
        border-radius: 3px;
        font-weight: 600;
      }

      .table-answer, .table-question {
        padding: 0 !important;
      }

      .cloze-table-columns {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
        margin-bottom: 16px;
      }

      .user-answer-cell {
        display: inline-block;
        padding: 2px 6px;
        border-radius: 3px;
        font-weight: 600;
      }

      .user-answer-cell.correct {
        background: #4caf50 !important;
        color: white !important;
      }

      .user-answer-cell.partial {
        background: #FFC000 !important;
        color: white !important;
      }

      .user-answer-cell.wrong {
        background: #f44336 !important;
        color: white !important;
      }

      `;
  }
};
reviewStyle.styleId = "learning-review-styles";
reviewStyle.isInjected = false;

// src/ui/view/ReviewView.ts
var VIEW_TYPE_REVIEW = "learning-system-review";
var ReviewView = class extends import_obsidian7.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.dueCards = [];
    this.currentCardIndex = 0;
    this.currentCard = null;
    this.stateManager = new ReviewStateManager();
    // ============================================================================
    // 键盘处理
    // ============================================================================
    this.keyboardHandler = (e) => {
      const target = e.target;
      const isInInput = target.tagName === "INPUT" || target.tagName === "TEXTAREA";
      if (e.key === "Tab") {
        e.preventDefault();
        if (e.shiftKey) {
          if (this.stateManager.getState().showAnswer) {
            this.resetReviewState();
            this.render();
          }
        } else {
          if (!this.stateManager.getState().showAnswer) {
            this.stateManager.getState().showAnswer = true;
            this.render();
          } else {
            this.submitReview("good");
          }
        }
        return;
      }
      if (this.stateManager.getState().showAnswer && !isInInput) {
        const ratingMap = {
          "1": "again",
          "2": "hard",
          "3": "good",
          "4": "easy"
        };
        if (ratingMap[e.key]) {
          e.preventDefault();
          this.submitReview(ratingMap[e.key]);
        }
      }
    };
    this.plugin = plugin;
    this.scheduler = new CardScheduler();
  }
  getViewType() {
    return VIEW_TYPE_REVIEW;
  }
  getDisplayText() {
    return "Flashcard Review";
  }
  getIcon() {
    return "layers";
  }
  async onOpen() {
    await this.loadDueCards();
    reviewStyle.inject();
    this.render();
    this.registerKeyboardHandlers();
  }
  async onClose() {
    document.removeEventListener("keydown", this.keyboardHandler);
  }
  // ============================================================================
  // 状态管理
  // ============================================================================
  resetReviewState() {
    this.stateManager.reset();
  }
  updateCurrentCard() {
    var _a;
    const newCard = this.dueCards[this.currentCardIndex];
    const isSameCard = ((_a = this.currentCard) == null ? void 0 : _a.id) === (newCard == null ? void 0 : newCard.id);
    this.stateManager.updateForNewCard(newCard, isSameCard);
    this.currentCard = newCard;
  }
  // ============================================================================
  // 数据加载
  // ============================================================================
  async loadDueCards() {
    this.dueCards = this.plugin.flashcardManager.getDueCards();
    this.currentCardIndex = 0;
    this.resetReviewState();
  }
  // ============================================================================
  // 渲染逻辑
  // ============================================================================
  render() {
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("review-container");
    if (this.dueCards.length === 0) {
      this.renderNoDueCards(container);
      return;
    }
    this.updateCurrentCard();
    this.renderProgress(container);
    const cardArea = container.createDiv({ cls: "card-area" });
    this.renderTopActions(cardArea);
    if (this.stateManager.getState().showAnswer) {
      this.renderAnswerView(cardArea);
    } else {
      this.renderQuestionView(cardArea);
    }
  }
  renderNoDueCards(container) {
    const emptyState = container.createDiv({ cls: "empty-state" });
    emptyState.createEl("h2", { text: "\u{1F389} All Done!" });
    emptyState.createEl("p", { text: "No cards due for review right now." });
    const stats = this.plugin.flashcardManager.getStats();
    const statsDiv = emptyState.createDiv({ cls: "stats-summary" });
    statsDiv.createEl("p", { text: `Total cards: ${stats.total}` });
    statsDiv.createEl("p", { text: `New cards: ${stats.new}` });
    statsDiv.createEl("p", { text: `Reviewed today: ${stats.reviewedToday}` });
    const closeBtn = emptyState.createEl("button", {
      text: "Close Review",
      cls: "mod-cta"
    });
    closeBtn.onclick = () => {
      var _a;
      (_a = this.leaf) == null ? void 0 : _a.detach();
    };
  }
  renderProgress(container) {
    const progressBar = container.createDiv({ cls: "progress-bar" });
    const stats = progressBar.createDiv({ cls: "progress-stats" });
    stats.createSpan({
      text: `${this.currentCardIndex + 1} / ${this.dueCards.length}`,
      cls: "progress-text"
    });
    const barContainer = progressBar.createDiv({ cls: "bar-container" });
    const bar = barContainer.createDiv({ cls: "bar" });
    const progress = (this.currentCardIndex + 1) / this.dueCards.length * 100;
    bar.style.width = `${progress}%`;
  }
  renderTopActions(container) {
    const actionsBar = container.createDiv({ cls: "top-actions-bar" });
    const jumpBtn = actionsBar.createEl("button", {
      cls: "top-action-btn jump-icon-btn",
      attr: { "aria-label": "Jump to Source" }
    });
    jumpBtn.innerHTML = "\u2197";
    jumpBtn.addEventListener("click", () => this.jumpToSource());
    this.renderMoreMenu(actionsBar);
  }
  renderMoreMenu(actionsBar) {
    const moreBtn = actionsBar.createEl("button", {
      cls: "top-action-btn more-btn",
      attr: { "aria-label": "More actions" }
    });
    moreBtn.innerHTML = "\u22EF";
    const dropdown = actionsBar.createDiv({ cls: "more-dropdown" });
    dropdown.style.display = "none";
    const menuItems = [
      {
        label: "\u270F\uFE0F Edit Card",
        onClick: () => this.editCurrentFlashcard()
      },
      {
        label: "\u{1F504} Reset Card Stats",
        onClick: async () => {
          if (this.currentCard && confirm("\u786E\u5B9A\u8981\u91CD\u7F6E\u8FD9\u5F20\u5361\u7247\u7684\u5B66\u4E60\u8FDB\u5EA6\u5417\uFF1F")) {
            await this.resetCardStats(this.currentCard.id);
          }
        }
      },
      {
        label: "\u{1F4DA} Reset Deck Stats",
        onClick: async () => {
          if (this.currentCard) {
            const deckName = this.currentCard.deck;
            if (confirm(`\u786E\u5B9A\u8981\u91CD\u7F6E\u5361\u7EC4"${deckName}"\u7684\u6240\u6709\u5B66\u4E60\u8FDB\u5EA6\u5417\uFF1F`)) {
              await this.plugin.analyticsEngine.clearDeckStats(deckName);
              new import_obsidian7.Notice(`\u2705 \u5361\u7EC4"${deckName}"\u7684\u7EDF\u8BA1\u5DF2\u91CD\u7F6E`);
              await this.loadDueCards();
              this.render();
            }
          }
        }
      },
      {
        label: "\u{1F5D1}\uFE0F Delete Card",
        onClick: async () => {
          if (this.currentCard && confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u5F20\u95EA\u5361\u5417\uFF1F")) {
            await this.deleteFlashcard(this.currentCard.id);
          }
        },
        className: "delete-item"
      }
    ];
    menuItems.forEach((item) => {
      const menuItem = dropdown.createEl("div", {
        cls: `dropdown-item ${item.className || ""}`
      });
      menuItem.innerHTML = item.label;
      menuItem.addEventListener("click", () => {
        item.onClick();
        dropdown.style.display = "none";
      });
    });
    moreBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      dropdown.style.display = dropdown.style.display === "none" ? "block" : "none";
    });
    document.addEventListener("click", () => {
      dropdown.style.display = "none";
    });
    dropdown.addEventListener("click", (e) => {
      e.stopPropagation();
    });
  }
  renderQuestionView(container) {
    if (!this.currentCard)
      return;
    this.renderCardInfo(container);
    const questionArea = container.createDiv({ cls: "question-area" });
    questionArea.createEl("h3", { text: "Question" });
    const renderer = CardRendererFactory.getRenderer(this.currentCard.type);
    renderer.renderQuestion(questionArea, this.currentCard, this.stateManager.getState());
    this.renderShowAnswerButton(container);
  }
  renderAnswerView(container) {
    if (!this.currentCard)
      return;
    this.renderCardInfo(container);
    this.renderQuestionReview(container);
    const renderer = CardRendererFactory.getRenderer(this.currentCard.type);
    renderer.renderAnswer(container, this.currentCard, this.stateManager.getState(), this.scheduler);
    this.renderRatingButtons(container);
  }
  renderCardInfo(container) {
    if (!this.currentCard)
      return;
    const cardInfo = container.createDiv({ cls: "card-info" });
    cardInfo.createSpan({
      text: this.currentCard.type === "qa" ? "\u{1F4DD} Q&A" : "\u270F\uFE0F Cloze",
      cls: "card-type"
    });
    cardInfo.createSpan({
      text: `Deck: ${this.currentCard.deck}`,
      cls: "card-deck"
    });
  }
  renderQuestionReview(container) {
    if (!this.currentCard)
      return;
    const questionReview = container.createDiv({ cls: "question-review" });
    questionReview.createEl("h4", { text: "Question:" });
    const reviewTextDiv = questionReview.createDiv({ cls: "review-text" });
    const isQuestionTable = TableRenderer.isTableFormat(this.currentCard.front);
    if (isQuestionTable) {
      const tableEl = TableRenderer.renderTable(this.currentCard.front, false);
      reviewTextDiv.appendChild(tableEl);
      reviewTextDiv.classList.add("table-question");
    } else {
      reviewTextDiv.textContent = this.currentCard.front;
    }
  }
  renderShowAnswerButton(container) {
    const buttonArea = container.createDiv({ cls: "button-area" });
    const showAnswerBtn = buttonArea.createEl("button", {
      text: "Show Answer",
      cls: "mod-cta show-answer-btn",
      attr: { title: "Press Enter or Tab" }
    });
    showAnswerBtn.addEventListener("click", () => {
      this.stateManager.setShowAnswer(true);
      this.render();
    });
  }
  renderRatingButtons(container) {
    const ratingArea = container.createDiv({ cls: "rating-area" });
    const buttonGroup = ratingArea.createDiv({ cls: "rating-buttons" });
    const ratings = [
      { ease: "again", label: "Again\n < 1 min", color: "red", key: "1" },
      { ease: "hard", label: "Hard\n < 10 min", color: "orange", key: "2" },
      { ease: "good", label: "Good\n 1 day", color: "blue", key: "3" },
      { ease: "easy", label: "Easy\n 4 days", color: "green", key: "4" }
    ];
    ratings.forEach(({ ease, label, color, key }) => {
      const btn = buttonGroup.createEl("button", {
        cls: `rating-btn rating-${color}`,
        attr: { title: `Press ${key}` }
      });
      const lines = label.split("\n");
      btn.createEl("div", { text: lines[0], cls: "rating-label" });
      btn.createEl("div", { text: lines[1], cls: "rating-interval" });
      btn.createEl("div", { text: `(${key})`, cls: "rating-hotkey" });
      btn.addEventListener("click", () => this.submitReview(ease));
    });
  }
  // ============================================================================
  // 交互处理
  // ============================================================================
  async submitReview(ease) {
    if (!this.currentCard)
      return;
    const timeSpent = (Date.now() - this.stateManager.getState().startTime) / 1e3;
    const userAnswer = this.currentCard.type === "cloze" ? this.stateManager.getState().userAnswers : this.currentCard.type === "qa" ? this.stateManager.getState().userAnswer : void 0;
    const { updatedCard, reviewLog } = this.scheduler.schedule(
      this.currentCard,
      ease,
      timeSpent,
      userAnswer
    );
    await this.plugin.flashcardManager.updateCard(updatedCard);
    await this.plugin.flashcardManager.logReview({
      id: `log-${Date.now()}`,
      ...reviewLog
    });
    this.currentCardIndex++;
    this.resetReviewState();
    if (this.currentCardIndex >= this.dueCards.length) {
      new import_obsidian7.Notice(`\u2705 Review session complete! Reviewed ${this.dueCards.length} cards.`);
      await this.loadDueCards();
    }
    this.render();
  }
  async jumpToSource() {
    if (!this.currentCard)
      return;
    const file = this.app.vault.getAbstractFileByPath(this.currentCard.sourceFile);
    if (!(file instanceof import_obsidian7.TFile)) {
      new import_obsidian7.Notice("Source file not found");
      return;
    }
    const contentUnit = this.plugin.dataManager.getContentUnit(
      this.currentCard.sourceContentId
    );
    if (!contentUnit) {
      new import_obsidian7.Notice("Source content not found");
      return;
    }
    const leaf = this.app.workspace.getLeaf(false);
    await leaf.openFile(file);
    setTimeout(() => {
      const view = this.app.workspace.getActiveViewOfType(import_obsidian7.ItemView);
      if (view) {
        const editor = view.editor;
        if (editor) {
          editor.setCursor({ line: contentUnit.source.position.line, ch: 0 });
          editor.scrollIntoView({
            from: { line: contentUnit.source.position.line, ch: 0 },
            to: { line: contentUnit.source.position.line, ch: 0 }
          }, true);
        }
      }
    }, 100);
  }
  async deleteFlashcard(cardId) {
    var _a;
    try {
      await this.plugin.flashcardManager.deleteCard(cardId);
      new import_obsidian7.Notice("\u{1F5D1}\uFE0F \u95EA\u5361\u5DF2\u5220\u9664");
      this.dueCards = this.dueCards.filter((card) => card.id !== cardId);
      if (((_a = this.currentCard) == null ? void 0 : _a.id) === cardId) {
        if (this.currentCardIndex >= this.dueCards.length) {
          this.currentCardIndex = Math.max(0, this.dueCards.length - 1);
        }
        this.currentCard = null;
      }
      await this.loadDueCards();
      this.render();
    } catch (error) {
      console.error("Error deleting flashcard:", error);
      new import_obsidian7.Notice("\u274C \u5220\u9664\u95EA\u5361\u5931\u8D25");
    }
  }
  editCurrentFlashcard() {
    if (!this.currentCard)
      return;
    const modal = new FlashcardEditModal(
      this.app,
      this.currentCard,
      async (question, answer) => {
        try {
          const updatedCard = {
            ...this.currentCard,
            front: question,
            back: this.currentCard.type === "cloze" ? [answer] : answer,
            metadata: {
              ...this.currentCard.metadata,
              updatedAt: Date.now()
            }
          };
          await this.plugin.flashcardManager.updateCard(updatedCard);
          new import_obsidian7.Notice("\u2705 \u95EA\u5361\u5DF2\u66F4\u65B0");
          this.currentCard = updatedCard;
          this.render();
        } catch (error) {
          console.error("Error updating flashcard:", error);
          new import_obsidian7.Notice("\u274C \u66F4\u65B0\u95EA\u5361\u5931\u8D25");
        }
      }
    );
    modal.open();
  }
  async resetCardStats(cardId) {
    try {
      const card = this.plugin.flashcardManager.getFlashcard(cardId);
      if (!card)
        return;
      card.stats = {
        totalReviews: 0,
        correctCount: 0,
        averageTime: 0,
        lastReview: 0,
        difficulty: 0.3
      };
      card.scheduling = {
        interval: 0,
        ease: 2.5,
        due: Date.now(),
        lapses: 0,
        reps: 0,
        state: "new"
      };
      await this.plugin.flashcardManager.updateCard(card);
      const logs = this.plugin.flashcardManager["reviewLogs"] || [];
      this.plugin.flashcardManager["reviewLogs"] = logs.filter(
        (log) => log.flashcardId !== cardId
      );
      await this.plugin.dataManager.save();
      new import_obsidian7.Notice("\u2705 \u5361\u7247\u7EDF\u8BA1\u5DF2\u91CD\u7F6E");
      this.currentCard = card;
      this.render();
    } catch (error) {
      console.error("Error resetting card stats:", error);
      new import_obsidian7.Notice("\u274C \u91CD\u7F6E\u7EDF\u8BA1\u5931\u8D25");
    }
  }
  registerKeyboardHandlers() {
    document.addEventListener("keydown", this.keyboardHandler);
  }
  // ============================================================================
  // 样式
  // ============================================================================
};

// src/ui/view/StatsView.ts
var import_obsidian8 = require("obsidian");

// src/core/AnalyticsEngine.ts
var AnalyticsEngine = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * 获取每日统计
   */
  getDailyStats(days = 30) {
    const logs = this.plugin.flashcardManager["reviewLogs"] || [];
    const stats = /* @__PURE__ */ new Map();
    for (let i = 0; i < days; i++) {
      const date = new Date();
      date.setDate(date.getDate() - i);
      const dateKey = date.toISOString().split("T")[0];
      stats.set(dateKey, {
        date: dateKey,
        reviewed: 0,
        correctCount: 0,
        correctRate: 0,
        timeSpent: 0,
        newCards: 0
      });
    }
    logs.forEach((log) => {
      const date = new Date(log.timestamp).toISOString().split("T")[0];
      const stat = stats.get(date);
      if (!stat)
        return;
      stat.reviewed++;
      stat.timeSpent += log.response.timeSpent;
      if (log.response.ease === "good" || log.response.ease === "easy") {
        stat.correctCount++;
      } else if (log.response.ease === "hard") {
        stat.correctCount += 0.5;
      }
      const card = this.plugin.flashcardManager.getFlashcard(log.flashcardId);
      if (card && card.stats.totalReviews === 1) {
        stat.newCards++;
      }
    });
    stats.forEach((stat) => {
      if (stat.reviewed > 0) {
        stat.correctRate = stat.correctCount / stat.reviewed;
      }
    });
    return Array.from(stats.values()).sort(
      (a, b) => a.date.localeCompare(b.date)
    );
  }
  /**
   * 获取周统计
   */
  getWeeklyStats() {
    const now = new Date();
    const thisWeekStart = new Date(now);
    thisWeekStart.setDate(now.getDate() - now.getDay());
    thisWeekStart.setHours(0, 0, 0, 0);
    const lastWeekStart = new Date(thisWeekStart);
    lastWeekStart.setDate(lastWeekStart.getDate() - 7);
    const thisWeek = this.calculateWeekStats(thisWeekStart);
    const lastWeek = this.calculateWeekStats(lastWeekStart);
    return { thisWeek, lastWeek };
  }
  calculateWeekStats(startDate) {
    const endDate = new Date(startDate);
    endDate.setDate(endDate.getDate() + 7);
    const logs = (this.plugin.flashcardManager["reviewLogs"] || []).filter(
      (log) => log.timestamp >= startDate.getTime() && log.timestamp < endDate.getTime()
    );
    let totalCorrect = 0;
    let totalTimeSpent = 0;
    logs.forEach((log) => {
      totalTimeSpent += log.response.timeSpent;
      if (log.response.ease === "good" || log.response.ease === "easy") {
        totalCorrect++;
      } else if (log.response.ease === "hard") {
        totalCorrect += 0.5;
      }
    });
    const averageCorrectRate = logs.length > 0 ? totalCorrect / logs.length : 0;
    const streak = this.calculateStreak();
    return {
      startDate: startDate.toISOString().split("T")[0],
      endDate: endDate.toISOString().split("T")[0],
      totalReviews: logs.length,
      averageCorrectRate,
      totalTimeSpent,
      streak
    };
  }
  /**
   * 计算连续学习天数
   */
  calculateStreak() {
    const logs = this.plugin.flashcardManager["reviewLogs"] || [];
    if (logs.length === 0)
      return 0;
    const dates = /* @__PURE__ */ new Set();
    logs.forEach((log) => {
      const date = new Date(log.timestamp).toISOString().split("T")[0];
      dates.add(date);
    });
    const sortedDates = Array.from(dates).sort().reverse();
    let streak = 0;
    const today = new Date().toISOString().split("T")[0];
    for (let i = 0; i < sortedDates.length; i++) {
      const expectedDate = new Date();
      expectedDate.setDate(expectedDate.getDate() - i);
      const expected = expectedDate.toISOString().split("T")[0];
      if (sortedDates[i] === expected) {
        streak++;
      } else {
        break;
      }
    }
    return streak;
  }
  /**
   * 获取卡组统计
   */
  getDeckStats() {
    const cards = this.plugin.flashcardManager.getAllFlashcards();
    const deckMap = /* @__PURE__ */ new Map();
    cards.forEach((card) => {
      if (!deckMap.has(card.deck)) {
        deckMap.set(card.deck, []);
      }
      deckMap.get(card.deck).push(card);
    });
    const stats = [];
    const now = Date.now();
    deckMap.forEach((deckCards, deckName) => {
      const dueCards = deckCards.filter((c) => c.scheduling.due <= now).length;
      const newCards = deckCards.filter((c) => c.scheduling.state === "new").length;
      const totalCorrect = deckCards.reduce(
        (sum, c) => sum + c.stats.correctCount,
        0
      );
      const totalReviews = deckCards.reduce(
        (sum, c) => sum + c.stats.totalReviews,
        0
      );
      const correctRate = totalReviews > 0 ? totalCorrect / totalReviews : 0;
      const totalInterval = deckCards.reduce(
        (sum, c) => sum + c.scheduling.interval,
        0
      );
      const averageInterval = deckCards.length > 0 ? totalInterval / deckCards.length : 0;
      stats.push({
        deckName,
        totalCards: deckCards.length,
        dueCards,
        newCards,
        correctRate,
        averageInterval
      });
    });
    return stats.sort((a, b) => b.totalCards - a.totalCards);
  }
  /**
   * 获取难点卡片
   */
  getDifficultCards(limit = 10) {
    const cards = this.plugin.flashcardManager.getAllFlashcards();
    const logs = this.plugin.flashcardManager["reviewLogs"] || [];
    const difficultCards = [];
    cards.forEach((card) => {
      const cardLogs = logs.filter((log) => log.flashcardId === card.id);
      const errorCount = cardLogs.filter(
        (log) => log.response.ease === "again"
      ).length;
      if (errorCount === 0 && card.stats.difficulty < 0.7)
        return;
      const errorLogs = cardLogs.filter((log) => log.response.ease === "again");
      const lastError = errorLogs.length > 0 ? errorLogs[errorLogs.length - 1].timestamp : 0;
      const pattern = this.detectErrorPattern(card, cardLogs);
      difficultCards.push({
        card,
        errorCount,
        lastError,
        averageTime: card.stats.averageTime,
        pattern
      });
    });
    return difficultCards.sort((a, b) => {
      if (a.errorCount !== b.errorCount) {
        return b.errorCount - a.errorCount;
      }
      if (a.card.stats.difficulty !== b.card.stats.difficulty) {
        return b.card.stats.difficulty - a.card.stats.difficulty;
      }
      return b.lastError - a.lastError;
    }).slice(0, limit);
  }
  detectErrorPattern(card, logs) {
    if (logs.length < 3)
      return "unknown";
    if (card.stats.averageTime > 60) {
      return "calculation";
    }
    if (card.scheduling.interval < 3 && card.scheduling.lapses > 2) {
      return "memory";
    }
    const recentLogs = logs.slice(-5);
    const recentFailures = recentLogs.filter(
      (log) => log.response.ease === "again"
    ).length;
    if (recentFailures >= 3) {
      return "concept";
    }
    return "unknown";
  }
  /**
   * 获取标签统计
   */
  getTagStats() {
    const cards = this.plugin.flashcardManager.getAllFlashcards();
    const tagMap = /* @__PURE__ */ new Map();
    cards.forEach((card) => {
      card.tags.forEach((tag) => {
        if (!tagMap.has(tag)) {
          tagMap.set(tag, { total: 0, correct: 0, reviews: 0 });
        }
        const stat = tagMap.get(tag);
        stat.total++;
        stat.correct += card.stats.correctCount;
        stat.reviews += card.stats.totalReviews;
      });
    });
    const stats = Array.from(tagMap.entries()).map(([tag, data]) => ({
      tag,
      count: data.total,
      correctRate: data.reviews > 0 ? data.correct / data.reviews : 0
    }));
    return stats.sort((a, b) => b.count - a.count);
  }
  /**
   * 生成学习报告
   */
  generateReport(days = 7) {
    const dailyStats = this.getDailyStats(days);
    const { thisWeek, lastWeek } = this.getWeeklyStats();
    const difficultCards = this.getDifficultCards(5);
    const deckStats = this.getDeckStats();
    const totalReviewed = dailyStats.reduce((sum, s) => sum + s.reviewed, 0);
    const totalCorrect = dailyStats.reduce((sum, s) => sum + s.correctCount, 0);
    const averageCorrectRate = totalReviewed > 0 ? totalCorrect / totalReviewed : 0;
    const totalTime = dailyStats.reduce((sum, s) => sum + s.timeSpent, 0);
    const recentDays = dailyStats.slice(-7);
    const olderDays = dailyStats.slice(-14, -7);
    const recentRate = this.calculateAverageRate(recentDays);
    const olderRate = this.calculateAverageRate(olderDays);
    const trend = recentRate > olderRate ? "\u{1F4C8} improving" : recentRate < olderRate ? "\u{1F4C9} declining" : "\u27A1\uFE0F stable";
    let report = `# \u{1F4CA} Learning Report

`;
    report += `**Period:** Last ${days} days
`;
    report += `**Generated:** ${new Date().toLocaleString()}

`;
    report += `## \u{1F3AF} Overall Performance

`;
    report += `- **Cards Reviewed:** ${totalReviewed}
`;
    report += `- **Correct Rate:** ${(averageCorrectRate * 100).toFixed(1)}%
`;
    report += `- **Study Time:** ${this.formatTime(totalTime)}
`;
    report += `- **Current Streak:** ${thisWeek.streak} days \u{1F525}
`;
    report += `- **Trend:** ${trend}

`;
    report += `## \u{1F4C8} Week Comparison

`;
    report += `### This Week
`;
    report += `- Reviews: ${thisWeek.totalReviews}
`;
    report += `- Correct Rate: ${(thisWeek.averageCorrectRate * 100).toFixed(1)}%
`;
    report += `- Time: ${this.formatTime(thisWeek.totalTimeSpent)}

`;
    report += `### Last Week
`;
    report += `- Reviews: ${lastWeek.totalReviews}
`;
    report += `- Correct Rate: ${(lastWeek.averageCorrectRate * 100).toFixed(1)}%
`;
    report += `- Time: ${this.formatTime(lastWeek.totalTimeSpent)}

`;
    const reviewChange = thisWeek.totalReviews - lastWeek.totalReviews;
    const rateChange = (thisWeek.averageCorrectRate - lastWeek.averageCorrectRate) * 100;
    if (reviewChange > 0) {
      report += `\u{1F4AA} You reviewed **${reviewChange} more cards** this week!
`;
    }
    if (rateChange > 5) {
      report += `\u{1F389} Your accuracy improved by **${rateChange.toFixed(1)}%**!
`;
    }
    report += `
`;
    if (difficultCards.length > 0) {
      report += `## \u26A0\uFE0F Cards Needing Attention

`;
      difficultCards.forEach((dc, i) => {
        const patternEmoji = {
          "concept": "\u{1F9E0}",
          "memory": "\u{1F4AD}",
          "calculation": "\u{1F522}",
          "unknown": "\u2753"
        };
        report += `${i + 1}. **${dc.card.front.substring(0, 50)}${dc.card.front.length > 50 ? "..." : ""}**
`;
        report += `   - Errors: ${dc.errorCount} | Pattern: ${patternEmoji[dc.pattern]} ${dc.pattern}
`;
        report += `   - Avg Time: ${dc.averageTime.toFixed(1)}s | Difficulty: ${(dc.card.stats.difficulty * 100).toFixed(0)}%

`;
      });
    }
    report += `## \u{1F4DA} Deck Overview

`;
    deckStats.forEach((deck) => {
      report += `### ${deck.deckName}
`;
      report += `- Total: ${deck.totalCards} | Due: ${deck.dueCards} | New: ${deck.newCards}
`;
      report += `- Correct Rate: ${(deck.correctRate * 100).toFixed(1)}%
`;
      report += `- Avg Interval: ${deck.averageInterval.toFixed(1)} days

`;
    });
    report += `## \u{1F4A1} Recommendations

`;
    if (averageCorrectRate < 0.7) {
      report += `- \u26A1 Your correct rate is below 70%. Consider reviewing difficult cards more frequently.
`;
    }
    if (difficultCards.length > 5) {
      report += `- \u{1F4D6} You have many difficult cards. Try breaking complex concepts into smaller flashcards.
`;
    }
    if (thisWeek.streak > 7) {
      report += `- \u{1F389} Amazing streak! Keep up the consistency!
`;
    }
    if (totalTime / totalReviewed > 30) {
      report += `- \u23F1\uFE0F Average review time is high. Consider simplifying card content.
`;
    }
    if (deckStats.some((d) => d.dueCards > d.totalCards * 0.5)) {
      report += `- \u{1F4C5} Some decks have many overdue cards. Focus on catching up with these.
`;
    }
    return report;
  }
  calculateAverageRate(stats) {
    const total = stats.reduce((sum, s) => sum + s.reviewed, 0);
    const correct = stats.reduce((sum, s) => sum + s.correctCount, 0);
    return total > 0 ? correct / total : 0;
  }
  formatTime(seconds) {
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor(seconds % 3600 / 60);
    if (hours > 0) {
      return `${hours}h ${minutes}m`;
    }
    return `${minutes}m`;
  }
  /**
   * 获取热力图数据（用于日历视图）
   */
  getHeatmapData(days = 90) {
    const dailyStats = this.getDailyStats(days);
    const maxReviews = Math.max(...dailyStats.map((s) => s.reviewed));
    return dailyStats.map((stat) => ({
      date: stat.date,
      count: stat.reviewed,
      intensity: maxReviews > 0 ? stat.reviewed / maxReviews : 0
    }));
  }
  /**
  * 清除所有统计数据
  */
  async clearAllStats() {
    this.plugin.flashcardManager["reviewLogs"] = [];
    const cards = this.plugin.flashcardManager.getAllFlashcards();
    for (const card of cards) {
      card.stats = {
        totalReviews: 0,
        correctCount: 0,
        averageTime: 0,
        lastReview: 0,
        difficulty: 0.3
      };
      card.scheduling = {
        interval: 0,
        ease: 2.5,
        // 使用 ease 而不是 easeFactor
        due: Date.now(),
        lapses: 0,
        reps: 0,
        state: "new"
      };
      await this.plugin.flashcardManager.updateCard(card);
    }
    await this.plugin.dataManager.save();
  }
  /**
   * 清除指定天数之前的统计数据
   */
  async clearStatsBeforeDate(daysAgo) {
    const cutoffDate = new Date();
    cutoffDate.setDate(cutoffDate.getDate() - daysAgo);
    const cutoffTimestamp = cutoffDate.getTime();
    const logs = this.plugin.flashcardManager["reviewLogs"] || [];
    this.plugin.flashcardManager["reviewLogs"] = logs.filter(
      (log) => log.timestamp >= cutoffTimestamp
    );
    await this.plugin.dataManager.save();
  }
  /**
   * 清除特定卡组的统计数据
   */
  async clearDeckStats(deckName) {
    const cards = this.plugin.flashcardManager.getAllFlashcards().filter((card) => card.deck === deckName);
    for (const card of cards) {
      card.stats = {
        totalReviews: 0,
        correctCount: 0,
        averageTime: 0,
        lastReview: 0,
        difficulty: 0.3
      };
      card.scheduling = {
        interval: 0,
        ease: 2.5,
        // 使用 ease
        due: Date.now(),
        lapses: 0,
        reps: 0,
        state: "new"
      };
      await this.plugin.flashcardManager.updateCard(card);
    }
    const cardIds = new Set(cards.map((c) => c.id));
    const logs = this.plugin.flashcardManager["reviewLogs"] || [];
    this.plugin.flashcardManager["reviewLogs"] = logs.filter(
      (log) => !cardIds.has(log.flashcardId)
    );
    await this.plugin.dataManager.save();
  }
};

// src/ui/view/StatsView.ts
var VIEW_TYPE_STATS = "learning-system-stats";
var StatsView = class extends import_obsidian8.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.currentTab = "overview";
    this.plugin = plugin;
    this.analytics = new AnalyticsEngine(plugin);
  }
  getViewType() {
    return VIEW_TYPE_STATS;
  }
  getDisplayText() {
    return "Learning Statistics";
  }
  getIcon() {
    return "bar-chart";
  }
  async onOpen() {
    this.render();
    this.addStyles();
  }
  async onClose() {
  }
  render() {
    const container = this.containerEl.children[1];
    container.empty();
    container.addClass("stats-container");
    const header = container.createDiv({ cls: "stats-header" });
    header.createEl("h2", { text: "\u{1F4CA} Learning Statistics" });
    const refreshBtn = header.createEl("button", {
      text: "\u27F3",
      cls: "refresh-btn"
    });
    refreshBtn.addEventListener("click", () => this.render());
    this.renderTabs(container);
    const content = container.createDiv({ cls: "stats-content" });
    switch (this.currentTab) {
      case "overview":
        this.renderOverview(content);
        break;
      case "trends":
        this.renderTrends(content);
        break;
      case "decks":
        this.renderDecks(content);
        break;
      case "difficult":
        this.renderDifficult(content);
        break;
    }
  }
  renderTabs(container) {
    const tabs = container.createDiv({ cls: "stats-tabs" });
    const tabConfigs = [
      { id: "overview", label: "\u{1F4CA} Overview" },
      { id: "trends", label: "\u{1F4C8} Trends" },
      { id: "decks", label: "\u{1F4DA} Decks" },
      { id: "difficult", label: "\u26A0\uFE0F Difficult" }
    ];
    tabConfigs.forEach((config) => {
      const tab = tabs.createDiv({
        cls: `tab ${this.currentTab === config.id ? "active" : ""}`
      });
      tab.textContent = config.label;
      tab.addEventListener("click", () => {
        this.currentTab = config.id;
        this.render();
      });
    });
  }
  renderOverview(container) {
    const stats = this.plugin.flashcardManager.getStats();
    const { thisWeek, lastWeek } = this.analytics.getWeeklyStats();
    const dailyStats = this.analytics.getDailyStats(7);
    const metricsGrid = container.createDiv({ cls: "metrics-grid" });
    this.createMetricCard(metricsGrid, {
      title: "Total Cards",
      value: stats.total.toString(),
      icon: "\u{1F0CF}"
    });
    this.createMetricCard(metricsGrid, {
      title: "Due Today",
      value: stats.due.toString(),
      icon: "\u{1F4C5}"
    });
    this.createMetricCard(metricsGrid, {
      title: "Reviewed Today",
      value: stats.reviewedToday.toString(),
      icon: "\u2705"
    });
    const streak = this.analytics.calculateStreak();
    this.createMetricCard(metricsGrid, {
      title: "Current Streak",
      value: `${streak} days`,
      icon: "\u{1F525}"
    });
    const weekComparison = container.createDiv({ cls: "week-comparison" });
    weekComparison.createEl("h3", { text: "This Week vs Last Week" });
    const comparisonGrid = weekComparison.createDiv({ cls: "comparison-grid" });
    const reviewChange = thisWeek.totalReviews - lastWeek.totalReviews;
    const reviewChangePercent = lastWeek.totalReviews > 0 ? (reviewChange / lastWeek.totalReviews * 100).toFixed(1) : "0";
    this.createComparisonItem(comparisonGrid, {
      label: "Reviews",
      thisWeek: thisWeek.totalReviews,
      lastWeek: lastWeek.totalReviews,
      change: reviewChange,
      changePercent: reviewChangePercent
    });
    const rateChange = (thisWeek.averageCorrectRate - lastWeek.averageCorrectRate) * 100;
    this.createComparisonItem(comparisonGrid, {
      label: "Correct Rate",
      thisWeek: `${(thisWeek.averageCorrectRate * 100).toFixed(1)}%`,
      lastWeek: `${(lastWeek.averageCorrectRate * 100).toFixed(1)}%`,
      change: rateChange,
      changePercent: rateChange.toFixed(1)
    });
    const recentActivity = container.createDiv({ cls: "recent-activity" });
    recentActivity.createEl("h3", { text: "Last 7 Days Activity" });
    const activityChart = recentActivity.createDiv({ cls: "activity-chart" });
    this.renderSimpleBarChart(activityChart, dailyStats);
    const reportSection = container.createDiv({ cls: "report-section" });
    const reportBtn = reportSection.createEl("button", {
      text: "\u{1F4C4} Generate Full Report",
      cls: "mod-cta"
    });
    reportBtn.addEventListener("click", () => this.generateAndShowReport());
    const clearBtn = reportSection.createEl("button", {
      text: "\u{1F5D1}\uFE0F Clear Statistics",
      cls: "mod-warning"
    });
    clearBtn.style.marginLeft = "10px";
    clearBtn.addEventListener("click", () => this.showClearStatsModal());
  }
  renderTrends(container) {
    container.createEl("h3", { text: "Performance Trends" });
    const dailyStats = this.analytics.getDailyStats(30);
    const correctRateSection = container.createDiv({ cls: "chart-section" });
    correctRateSection.createEl("h4", { text: "Correct Rate (Last 30 Days)" });
    const correctRateChart = correctRateSection.createDiv({ cls: "line-chart" });
    this.renderLineChart(correctRateChart, dailyStats, "correctRate");
    const reviewsSection = container.createDiv({ cls: "chart-section" });
    reviewsSection.createEl("h4", { text: "Daily Reviews" });
    const reviewsChart = reviewsSection.createDiv({ cls: "bar-chart" });
    this.renderBarChart(reviewsChart, dailyStats);
    const heatmapSection = container.createDiv({ cls: "chart-section" });
    heatmapSection.createEl("h4", { text: "Study Activity Calendar" });
    const heatmap = heatmapSection.createDiv({ cls: "heatmap" });
    this.renderHeatmap(heatmap);
  }
  renderDecks(container) {
    container.createEl("h3", { text: "Deck Statistics" });
    const deckStats = this.analytics.getDeckStats();
    if (deckStats.length === 0) {
      container.createDiv({
        text: "No decks yet. Create some flashcards to see deck statistics!",
        cls: "empty-message"
      });
      return;
    }
    const decksGrid = container.createDiv({ cls: "decks-grid" });
    deckStats.forEach((deck) => {
      const deckCard = decksGrid.createDiv({ cls: "deck-card" });
      const header = deckCard.createDiv({ cls: "deck-card-header" });
      header.createEl("h4", { text: deck.deckName });
      header.createSpan({
        text: `${deck.totalCards} cards`,
        cls: "deck-badge"
      });
      const stats = deckCard.createDiv({ cls: "deck-card-stats" });
      this.createStatRow(stats, "Due", deck.dueCards.toString(), "\u{1F4C5}");
      this.createStatRow(stats, "New", deck.newCards.toString(), "\u{1F195}");
      this.createStatRow(
        stats,
        "Correct Rate",
        `${(deck.correctRate * 100).toFixed(1)}%`,
        "\u2705"
      );
      this.createStatRow(
        stats,
        "Avg Interval",
        `${deck.averageInterval.toFixed(1)} days`,
        "\u{1F4CA}"
      );
      const progress = deckCard.createDiv({ cls: "deck-progress" });
      const masteredCount = deck.totalCards - deck.dueCards - deck.newCards;
      const masteredPercent = masteredCount / deck.totalCards * 100;
      const progressBar = progress.createDiv({ cls: "progress-bar-container" });
      const bar = progressBar.createDiv({ cls: "progress-bar-fill" });
      bar.style.width = `${masteredPercent}%`;
      progress.createDiv({
        text: `${masteredPercent.toFixed(0)}% mastered`,
        cls: "progress-label"
      });
    });
  }
  renderDifficult(container) {
    container.createEl("h3", { text: "Cards Needing Attention" });
    const difficultCards = this.analytics.getDifficultCards(10);
    if (difficultCards.length === 0) {
      container.createDiv({
        text: "\u{1F389} No difficult cards! Great job!",
        cls: "empty-message"
      });
      return;
    }
    const cardsList = container.createDiv({ cls: "difficult-cards-list" });
    difficultCards.forEach((dc, index) => {
      const cardItem = cardsList.createDiv({ cls: "difficult-card-item" });
      const rank = cardItem.createDiv({ cls: "card-rank" });
      rank.textContent = `${index + 1}`;
      const content = cardItem.createDiv({ cls: "card-content" });
      const question = content.createDiv({ cls: "card-question" });
      question.textContent = dc.card.front.substring(0, 80) + (dc.card.front.length > 80 ? "..." : "");
      const meta = content.createDiv({ cls: "card-meta" });
      const patternEmoji = {
        "concept": "\u{1F9E0}",
        "memory": "\u{1F4AD}",
        "calculation": "\u{1F522}",
        "unknown": "\u2753"
      };
      meta.createSpan({
        text: `${patternEmoji[dc.pattern]} ${dc.pattern}`,
        cls: "pattern-badge"
      });
      meta.createSpan({
        text: `${dc.errorCount} errors`,
        cls: "error-count"
      });
      meta.createSpan({
        text: `${dc.averageTime.toFixed(1)}s avg`,
        cls: "avg-time"
      });
      const difficultyBar = content.createDiv({ cls: "difficulty-bar-container" });
      const diffBar = difficultyBar.createDiv({ cls: "difficulty-bar" });
      diffBar.style.width = `${dc.card.stats.difficulty * 100}%`;
      const actions = cardItem.createDiv({ cls: "card-actions" });
      const jumpBtn = actions.createEl("button", {
        text: "\u2197",
        cls: "action-btn-small"
      });
      jumpBtn.addEventListener("click", () => this.jumpToCard(dc.card));
      const reviewBtn = actions.createEl("button", {
        text: "\u{1F504}",
        cls: "action-btn-small"
      });
      reviewBtn.addEventListener("click", () => {
        this.plugin.activateReview();
      });
      const deleteBtn = actions.createEl("button", {
        text: "\u{1F5D1}\uFE0F",
        cls: "action-btn-small delete-btn"
      });
      deleteBtn.addEventListener("click", async () => {
        if (confirm("\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u5F20\u95EA\u5361\u5417\uFF1F")) {
          await this.deleteFlashcard(dc.card.id);
        }
      });
    });
  }
  createMetricCard(container, config) {
    const card = container.createDiv({ cls: "metric-card" });
    card.createDiv({ text: config.icon, cls: "metric-icon" });
    const content = card.createDiv({ cls: "metric-content" });
    content.createDiv({ text: config.title, cls: "metric-title" });
    content.createDiv({ text: config.value, cls: "metric-value" });
  }
  createComparisonItem(container, config) {
    const item = container.createDiv({ cls: "comparison-item" });
    item.createDiv({ text: config.label, cls: "comparison-label" });
    const values = item.createDiv({ cls: "comparison-values" });
    values.createSpan({
      text: `${config.thisWeek}`,
      cls: "this-week"
    });
    values.createSpan({ text: " vs ", cls: "vs" });
    values.createSpan({
      text: `${config.lastWeek}`,
      cls: "last-week"
    });
    const changeClass = config.change > 0 ? "positive" : config.change < 0 ? "negative" : "neutral";
    const changeIcon = config.change > 0 ? "\u2197" : config.change < 0 ? "\u2198" : "\u2192";
    item.createDiv({
      text: `${changeIcon} ${config.changePercent}%`,
      cls: `change ${changeClass}`
    });
  }
  createStatRow(container, label, value, icon) {
    const row = container.createDiv({ cls: "stat-row" });
    row.createSpan({ text: icon, cls: "stat-icon" });
    row.createSpan({ text: label, cls: "stat-label" });
    row.createSpan({ text: value, cls: "stat-value" });
  }
  renderSimpleBarChart(container, data) {
    const maxValue = Math.max(...data.map((d) => d.reviewed));
    data.forEach((stat) => {
      const bar = container.createDiv({ cls: "simple-bar" });
      const date = new Date(stat.date);
      const dayName = date.toLocaleDateString("en-US", { weekday: "short" });
      bar.createDiv({ text: dayName, cls: "bar-label" });
      const barContainer = bar.createDiv({ cls: "bar-container" });
      const barFill = barContainer.createDiv({ cls: "bar-fill" });
      const height = maxValue > 0 ? stat.reviewed / maxValue * 100 : 0;
      barFill.style.height = `${height}%`;
      bar.createDiv({ text: stat.reviewed.toString(), cls: "bar-value" });
    });
  }
  renderBarChart(container, data) {
    const chart = container.createDiv({ cls: "chart-canvas" });
    const maxValue = Math.max(...data.map((d) => d.reviewed));
    data.forEach((stat) => {
      const barGroup = chart.createDiv({ cls: "bar-group" });
      const barContainer = barGroup.createDiv({ cls: "bar" });
      const height = maxValue > 0 ? stat.reviewed / maxValue * 100 : 0;
      barContainer.style.height = `${height}%`;
      barContainer.title = `${stat.reviewed} reviews`;
      const barLabel = barGroup.createDiv({ cls: "bar-label" });
      const date = new Date(stat.date);
      barLabel.textContent = date.getDate().toString();
    });
  }
  renderLineChart(container, data, key) {
    const chart = container.createDiv({ cls: "line-chart-canvas" });
    const points = data.map((stat, i) => {
      const x = i / (data.length - 1) * 100;
      const y = 100 - stat[key] * 100;
      return { x, y, value: stat[key] };
    });
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("viewBox", "0 0 100 100");
    svg.setAttribute("preserveAspectRatio", "none");
    svg.style.width = "100%";
    svg.style.height = "200px";
    const pathData = points.map(
      (p, i) => `${i === 0 ? "M" : "L"} ${p.x} ${p.y}`
    ).join(" ");
    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
    path.setAttribute("d", pathData);
    path.setAttribute("fill", "none");
    path.setAttribute("stroke", "var(--interactive-accent)");
    path.setAttribute("stroke-width", "2");
    svg.appendChild(path);
    chart.appendChild(svg);
    const labelsContainer = container.createDiv({ cls: "chart-labels" });
    data.forEach((stat, i) => {
      if (i % Math.ceil(data.length / 7) === 0) {
        const chartLabel = labelsContainer.createDiv({ cls: "chart-label" });
        const date = new Date(stat.date);
        chartLabel.textContent = `${date.getMonth() + 1}/${date.getDate()}`;
      }
    });
  }
  renderHeatmap(container) {
    const heatmapData = this.analytics.getHeatmapData(90);
    const weeks = [];
    let currentWeek = [];
    heatmapData.forEach((day, i) => {
      currentWeek.push(day);
      if (currentWeek.length === 7 || i === heatmapData.length - 1) {
        weeks.push(currentWeek);
        currentWeek = [];
      }
    });
    weeks.forEach((week) => {
      const weekRow = container.createDiv({ cls: "heatmap-week" });
      week.forEach((day) => {
        const cell = weekRow.createDiv({ cls: "heatmap-cell" });
        const level = Math.ceil(day.intensity * 4);
        cell.addClass(`level-${level}`);
        cell.title = `${day.date}: ${day.count} reviews`;
      });
    });
  }
  async jumpToCard(card) {
    const file = this.app.vault.getAbstractFileByPath(card.sourceFile);
    if (!(file instanceof import_obsidian8.TFile))
      return;
    const contentUnit = this.plugin.dataManager.getContentUnit(card.sourceContentId);
    if (!contentUnit)
      return;
    const leaf = this.app.workspace.getLeaf(false);
    await leaf.openFile(file);
    setTimeout(() => {
      const view = this.app.workspace.getActiveViewOfType(import_obsidian8.ItemView);
      if (view) {
        const editor = view.editor;
        if (editor) {
          editor.setCursor({ line: contentUnit.source.position.line, ch: 0 });
          editor.scrollIntoView({
            from: { line: contentUnit.source.position.line, ch: 0 },
            to: { line: contentUnit.source.position.line, ch: 0 }
          }, true);
        }
      }
    }, 100);
  }
  async deleteFlashcard(cardId) {
    try {
      await this.plugin.flashcardManager.deleteCard(cardId);
      new import_obsidian8.Notice("\u{1F5D1}\uFE0F \u95EA\u5361\u5DF2\u5220\u9664");
      this.render();
    } catch (error) {
      console.error("Error deleting flashcard:", error);
      new import_obsidian8.Notice("\u274C \u5220\u9664\u95EA\u5361\u5931\u8D25");
    }
  }
  showClearStatsModal() {
    var _a, _b, _c, _d, _e;
    const modal = document.createElement("div");
    modal.className = "modal-container";
    modal.innerHTML = `
      <div class="modal-bg"></div>
      <div class="modal">
        <div class="modal-title">Clear Statistics</div>
        <div class="modal-content">
          <p>Choose what statistics to clear:</p>
          <div class="clear-options">
            <button class="clear-option-btn" data-action="all">
              \u{1F5D1}\uFE0F Clear All Statistics
              <span class="option-desc">Reset all cards and review logs</span>
            </button>
            <button class="clear-option-btn" data-action="old">
              \u{1F4C5} Clear Old Data (30+ days)
              <span class="option-desc">Keep recent 30 days only</span>
            </button>
            <button class="clear-option-btn" data-action="deck">
              \u{1F4DA} Clear Specific Deck
              <span class="option-desc">Choose a deck to reset</span>
            </button>
          </div>
        </div>
        <div class="modal-button-container">
          <button class="mod-cta cancel-btn">Cancel</button>
        </div>
      </div>
    `;
    document.body.appendChild(modal);
    (_a = modal.querySelector(".cancel-btn")) == null ? void 0 : _a.addEventListener("click", () => {
      modal.remove();
    });
    (_b = modal.querySelector('[data-action="all"]')) == null ? void 0 : _b.addEventListener("click", async () => {
      if (confirm("\u26A0\uFE0F This will reset ALL statistics and card progress. Are you sure?")) {
        await this.analytics.clearAllStats();
        new import_obsidian8.Notice("\u2705 All statistics cleared");
        modal.remove();
        this.render();
      }
    });
    (_c = modal.querySelector('[data-action="old"]')) == null ? void 0 : _c.addEventListener("click", async () => {
      if (confirm("Clear statistics older than 30 days?")) {
        await this.analytics.clearStatsBeforeDate(30);
        new import_obsidian8.Notice("\u2705 Old statistics cleared");
        modal.remove();
        this.render();
      }
    });
    (_d = modal.querySelector('[data-action="deck"]')) == null ? void 0 : _d.addEventListener("click", () => {
      modal.remove();
      this.showDeckSelectionModal();
    });
    (_e = modal.querySelector(".modal-bg")) == null ? void 0 : _e.addEventListener("click", () => {
      modal.remove();
    });
  }
  showDeckSelectionModal() {
    var _a, _b;
    const deckStats = this.analytics.getDeckStats();
    if (deckStats.length === 0) {
      new import_obsidian8.Notice("No decks available");
      return;
    }
    const modal = document.createElement("div");
    modal.className = "modal-container";
    let optionsHtml = "";
    deckStats.forEach((deck) => {
      optionsHtml += `
        <button class="clear-option-btn deck-option" data-deck="${deck.deckName}">
          \u{1F4DA} ${deck.deckName}
          <span class="option-desc">${deck.totalCards} cards</span>
        </button>
      `;
    });
    modal.innerHTML = `
      <div class="modal-bg"></div>
      <div class="modal">
        <div class="modal-title">Select Deck to Clear</div>
        <div class="modal-content">
          <div class="clear-options">
            ${optionsHtml}
          </div>
        </div>
        <div class="modal-button-container">
          <button class="mod-cta cancel-btn">Cancel</button>
        </div>
      </div>
    `;
    document.body.appendChild(modal);
    (_a = modal.querySelector(".cancel-btn")) == null ? void 0 : _a.addEventListener("click", () => {
      modal.remove();
    });
    modal.querySelectorAll(".deck-option").forEach((btn) => {
      btn.addEventListener("click", async () => {
        const deckName = btn.dataset.deck;
        if (deckName && confirm(`Clear statistics for deck "${deckName}"?`)) {
          await this.analytics.clearDeckStats(deckName);
          new import_obsidian8.Notice(`\u2705 Statistics cleared for ${deckName}`);
          modal.remove();
          this.render();
        }
      });
    });
    (_b = modal.querySelector(".modal-bg")) == null ? void 0 : _b.addEventListener("click", () => {
      modal.remove();
    });
  }
  async generateAndShowReport() {
    const report = this.analytics.generateReport(30);
    const fileName = `Learning Report ${new Date().toISOString().split("T")[0]}.md`;
    try {
      let file = this.app.vault.getAbstractFileByPath(fileName);
      if (file instanceof import_obsidian8.TFile) {
        if (!confirm(`Report "${fileName}" already exists. Overwrite?`)) {
          return;
        }
        await this.app.vault.modify(file, report);
      } else {
        file = await this.app.vault.create(fileName, report);
      }
      const leaf = this.app.workspace.getLeaf(false);
      await leaf.openFile(file);
      new import_obsidian8.Notice("\u{1F4CA} Report generated!");
    } catch (error) {
      console.error("Error generating report:", error);
      new import_obsidian8.Notice("\u274C Failed to generate report");
    }
  }
  addStyles() {
    const styleEl = document.createElement("style");
    styleEl.textContent = `
      .stats-container {
        padding: 20px;
        overflow-y: auto;
      }

      .stats-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .stats-header h2 {
        margin: 0;
      }

      .stats-tabs {
        display: flex;
        gap: 8px;
        margin-bottom: 20px;
        border-bottom: 2px solid var(--background-modifier-border);
      }

      .tab {
        padding: 10px 20px;
        cursor: pointer;
        border-bottom: 3px solid transparent;
        transition: all 0.2s;
        user-select: none;
      }

      .tab:hover {
        background: var(--background-modifier-hover);
      }

      .tab.active {
        border-bottom-color: var(--interactive-accent);
        color: var(--interactive-accent);
        font-weight: 600;
      }

      .metrics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 30px;
      }

      .metric-card {
        padding: 20px;
        background: var(--background-secondary);
        border-radius: 8px;
        display: flex;
        gap: 15px;
        align-items: center;
      }

      .metric-icon {
        font-size: 32px;
      }

      .metric-content {
        flex: 1;
      }

      .metric-title {
        font-size: 0.9em;
        color: var(--text-muted);
        margin-bottom: 5px;
      }

      .metric-value {
        font-size: 1.8em;
        font-weight: 600;
      }

      .week-comparison {
        margin-bottom: 30px;
      }

      .comparison-grid {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-top: 15px;
      }

      .comparison-item {
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 6px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .comparison-label {
        font-weight: 500;
      }

      .comparison-values {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .this-week {
        font-weight: 600;
        font-size: 1.1em;
      }

      .last-week {
        color: var(--text-muted);
      }

      .change {
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 0.9em;
        font-weight: 500;
      }

      .change.positive {
        background: var(--background-modifier-success);
        color: var(--text-on-accent);
      }

      .change.negative {
        background: var(--background-modifier-error);
        color: white;
      }

      .chart-section {
        margin-bottom: 30px;
      }

      .recent-activity .activity-chart {
        display: flex;
        justify-content: space-around;
        align-items: flex-end;
        height: 150px;
        padding: 20px;
        background: var(--background-secondary);
        border-radius: 8px;
      }

      .simple-bar {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        flex: 1;
      }

      .simple-bar .bar-container {
        width: 100%;
        height: 100px;
        display: flex;
        align-items: flex-end;
        justify-content: center;
      }

      .simple-bar .bar-fill {
        width: 60%;
        background: var(--interactive-accent);
        border-radius: 4px 4px 0 0;
        transition: height 0.3s;
      }

      .bar-label, .bar-value {
        font-size: 0.85em;
        color: var(--text-muted);
      }

      .heatmap {
        display: flex;
        flex-direction: column;
        gap: 4px;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 8px;
      }

      .heatmap-week {
        display: flex;
        gap: 4px;
      }

      .heatmap-cell {
        width: 12px;
        height: 12px;
        background: var(--background-primary);
        border-radius: 2px;
        cursor: pointer;
      }

      .heatmap-cell.level-1 { background: rgba(94, 156, 235, 0.3); }
      .heatmap-cell.level-2 { background: rgba(94, 156, 235, 0.5); }
      .heatmap-cell.level-3 { background: rgba(94, 156, 235, 0.7); }
      .heatmap-cell.level-4 { background: rgba(94, 156, 235, 1); }

      .decks-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 15px;
      }

      .deck-card {
        padding: 20px;
        background: var(--background-secondary);
        border-radius: 8px;
        border: 1px solid var(--background-modifier-border);
      }

      .deck-card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--background-modifier-border);
      }

      .deck-card-header h4 {
        margin: 0;
      }

      .deck-badge {
        padding: 4px 10px;
        background: var(--interactive-accent);
        color: white;
        border-radius: 12px;
        font-size: 0.85em;
      }

      .deck-card-stats {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-bottom: 15px;
      }

      .stat-row {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .stat-icon {
        width: 20px;
      }

      .stat-label {
        flex: 1;
        color: var(--text-muted);
      }

      .stat-value {
        font-weight: 500;
      }

      .deck-progress {
        margin-top: 15px;
      }

      .progress-bar-container {
        height: 8px;
        background: var(--background-primary);
        border-radius: 4px;
        overflow: hidden;
        margin-bottom: 5px;
      }

      .progress-bar-fill {
        height: 100%;
        background: var(--interactive-accent);
        transition: width 0.3s;
      }

      .progress-label {
        font-size: 0.85em;
        color: var(--text-muted);
      }

      .difficult-cards-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .difficult-card-item {
        display: flex;
        gap: 15px;
        padding: 15px;
        background: var(--background-secondary);
        border-radius: 8px;
        border: 1px solid var(--background-modifier-border);
      }

      .card-rank {
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--interactive-accent);
        color: white;
        border-radius: 50%;
        font-weight: 600;
        flex-shrink: 0;
      }

      .card-content {
        flex: 1;
      }

      .card-question {
        font-weight: 500;
        margin-bottom: 8px;
      }

      .card-meta {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-bottom:8px;
      } 

.pattern-badge, .error-count, .avg-time {
    padding: 3px 10px;
    background: var(--background-primary);
    border-radius: 12px;
    font-size: 0.85em;
  }

  .difficulty-bar-container {
    height: 6px;
    background: var(--background-primary);
    border-radius: 3px;
    overflow: hidden;
  }

  .difficulty-bar {
    height: 100%;
    background: linear-gradient(to right, var(--color-green), var(--color-yellow), var(--color-red));
    transition: width 0.3s;
  }

  .card-actions {
    display: flex;
    gap: 8px;
  }

  .action-btn-small {
    padding: 6px 12px;
    border: 1px solid var(--background-modifier-border);
    border-radius: 4px;
    background: var(--background-primary);
    cursor: pointer;
    transition: all 0.2s;
  }

  .action-btn-small:hover {
    background: var(--interactive-accent);
    color: white;
    border-color: var(--interactive-accent);
  }

  .action-btn-small.delete-btn:hover {
    background: var(--color-red);
    border-color: var(--color-red);
    color: white;
  }

  .empty-message {
    text-align: center;
    padding: 40px;
    color: var(--text-muted);
    font-size: 1.1em;
  }

  .report-section {
    text-align: center;
    margin-top: 30px;
    padding: 20px;
  }

  .chart-canvas {
    display: flex;
    align-items: flex-end;
    justify-content: space-around;
    height: 200px;
    padding: 20px;
    background: var(--background-secondary);
    border-radius: 8px;
    margin-bottom: 10px;
  }

  .bar-group {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
    height: 100%;
  }

  .bar-group .bar {
    width: 80%;
    background: var(--interactive-accent);
    border-radius: 4px 4px 0 0;
    transition: height 0.3s;
    margin-top: auto;
  }

  .line-chart-canvas {
    background: var(--background-secondary);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 10px;
  }

  .chart-labels {
    display: flex;
    justify-content: space-around;
    padding: 10px 20px;
    background: var(--background-secondary);
    border-radius: 8px;
  }

  .chart-label {
    font-size: 0.85em;
    color: var(--text-muted);
  }
    .modal-container {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal-bg {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
}

.modal {
  position: relative;
  background: var(--background-primary);
  border-radius: 8px;
  padding: 20px;
  max-width: 500px;
  width: 90%;
  max-height: 80vh;
  overflow-y: auto;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.modal-title {
  font-size: 1.5em;
  font-weight: 600;
  margin-bottom: 15px;
}

.modal-content {
  margin-bottom: 20px;
}

.clear-options {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 15px;
}

.clear-option-btn {
  padding: 15px;
  background: var(--background-secondary);
  border: 2px solid var(--background-modifier-border);
  border-radius: 6px;
  cursor: pointer;
  text-align: left;
  transition: all 0.2s;
  display: flex;
  flex-direction: column;
  gap: 5px;
}

.clear-option-btn:hover {
  border-color: var(--interactive-accent);
  background: var(--background-modifier-hover);
}

.option-desc {
  font-size: 0.85em;
  color: var(--text-muted);
}

.modal-button-container {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}
`;
    document.head.appendChild(styleEl);
  }
};

// src/core/DataManager.ts
var DataManager = class {
  // 5分钟
  constructor(app, plugin) {
    this.app = app;
    this.plugin = plugin;
    this.contentUnits = /* @__PURE__ */ new Map();
    this.fileIndex = /* @__PURE__ */ new Map();
    this.CACHE_TTL = 5 * 60 * 1e3;
    this.dataFolder = `${this.app.vault.configDir}/plugins/learning-system/data`;
  }
  async initialize() {
    await this.ensureDataFolder();
    await this.loadData();
  }
  async ensureDataFolder() {
    const adapter = this.app.vault.adapter;
    if (!await adapter.exists(this.dataFolder)) {
      await adapter.mkdir(this.dataFolder);
    }
    const subfolders = ["indexes", "config", "cache"];
    for (const folder of subfolders) {
      const path = `${this.dataFolder}/${folder}`;
      if (!await adapter.exists(path)) {
        await adapter.mkdir(path);
      }
    }
  }
  async loadData() {
    try {
      const contentPath = `${this.dataFolder}/content-units.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(contentPath)) {
        const data = await adapter.read(contentPath);
        const units = JSON.parse(data);
        for (const unit of units) {
          this.contentUnits.set(unit.id, unit);
          if (!this.fileIndex.has(unit.source.file)) {
            this.fileIndex.set(unit.source.file, []);
          }
          this.fileIndex.get(unit.source.file).push(unit.id);
        }
      }
    } catch (error) {
      console.error("Error loading data:", error);
    }
  }
  async saveContentUnit(unit) {
    this.contentUnits.set(unit.id, unit);
    if (!this.fileIndex.has(unit.source.file)) {
      this.fileIndex.set(unit.source.file, []);
    }
    if (!this.fileIndex.get(unit.source.file).includes(unit.id)) {
      this.fileIndex.get(unit.source.file).push(unit.id);
    }
    await this.persist();
  }
  async saveContentUnits(units) {
    for (const unit of units) {
      this.contentUnits.set(unit.id, unit);
      if (!this.fileIndex.has(unit.source.file)) {
        this.fileIndex.set(unit.source.file, []);
      }
      if (!this.fileIndex.get(unit.source.file).includes(unit.id)) {
        this.fileIndex.get(unit.source.file).push(unit.id);
      }
    }
    await this.persist();
  }
  getContentUnit(id) {
    return this.contentUnits.get(id);
  }
  getContentUnitsByFile(filePath) {
    const ids = this.fileIndex.get(filePath) || [];
    return ids.map((id) => this.contentUnits.get(id)).filter(Boolean);
  }
  getContentUnitsByType(type) {
    return Array.from(this.contentUnits.values()).filter((unit) => unit.type === type);
  }
  getAllContentUnits(page, size) {
    const all = Array.from(this.contentUnits.values());
    if (!page || !size)
      return all;
    return all.slice(page * size, (page + 1) * size);
  }
  async deleteContentUnit(id) {
    const unit = this.contentUnits.get(id);
    if (unit) {
      this.contentUnits.delete(id);
      const fileUnits = this.fileIndex.get(unit.source.file);
      if (fileUnits) {
        const index = fileUnits.indexOf(id);
        if (index > -1) {
          fileUnits.splice(index, 1);
        }
      }
      await this.persist();
    }
  }
  /** 对外统一保存入口 */
  async save() {
    await this.persist();
  }
  async persist() {
    try {
      const contentPath = `${this.dataFolder}/content-units.json`;
      const units = Array.from(this.contentUnits.values());
      const data = JSON.stringify(units, null, 2);
      await this.app.vault.adapter.write(contentPath, data);
      const indexPath = `${this.dataFolder}/indexes/file-index.json`;
      const indexData = JSON.stringify(
        Object.fromEntries(this.fileIndex),
        null,
        2
      );
      await this.app.vault.adapter.write(indexPath, indexData);
    } catch (error) {
      console.error("Error persisting data:", error);
    }
  }
  // 🔧 优化 : 批量操作使用事务
  async transaction(operations) {
    try {
      await operations();
      await this.persist();
    } catch (error) {
      await this.loadData();
      throw error;
    }
  }
};

// src/core/ExtractionEngine.ts
var import_obsidian9 = require("obsidian");
var ExtractionEngine = class {
  constructor(app, dataManager, flashcardManager) {
    this.app = app;
    this.dataManager = dataManager;
    this.flashcardManager = flashcardManager;
  }
  /**
   * 注册右键菜单
   */
  registerContextMenu(menu, editor, file) {
    const selection = editor.getSelection();
    if (!selection)
      return;
    menu.addItem((item) => {
      item.setTitle("\u{1F4DD} Extract as text only").setIcon("file-text").onClick(async () => {
        await this.extractSelectedText(editor, file, "text");
      });
    });
    menu.addItem((item) => {
      item.setTitle("\u2753 Extract as QA card").setIcon("help-circle").onClick(async () => {
        await this.extractSelectedText(editor, file, "QA");
      });
    });
    menu.addItem((item) => {
      item.setTitle("\u270F\uFE0F Extract as Cloze card").setIcon("highlighter").onClick(async () => {
        await this.extractSelectedText(editor, file, "cloze");
      });
    });
  }
  /**
   * 提取选中的文本
   */
  async extractSelectedText(editor, file, extractType) {
    const selection = editor.getSelection();
    if (!selection) {
      new import_obsidian9.Notice("No text selected");
      return;
    }
    const cursor = editor.getCursor("from");
    const content = await this.app.vault.read(file);
    const offset = this.getOffsetFromCursor(content, cursor.line, cursor.ch);
    try {
      let unit;
      switch (extractType) {
        case "text":
          unit = this.createTextUnit(file, selection, offset, content);
          break;
        case "QA":
          unit = this.createQAUnit(file, selection, offset, content);
          break;
        case "cloze":
          unit = this.createClozeUnit(file, selection, offset, content);
          break;
      }
      const existingUnit = await this.findDuplicateUnit(unit);
      if (existingUnit) {
        new import_obsidian9.Notice(`\u26A0\uFE0F This content was already extracted`);
        return;
      }
      await this.dataManager.saveContentUnits([unit]);
      if (extractType === "QA" || extractType === "cloze") {
        try {
          const cardType = extractType === "QA" ? "qa" : "cloze";
          const flashcard = await this.flashcardManager.createFlashcardFromUnit(unit, {
            cardType
          });
          await this.dataManager.saveContentUnits([unit]);
        } catch (error) {
          console.error("[extractSelectedText] \u521B\u5EFA\u95EA\u5361\u5931\u8D25:", error);
        }
      }
      const typeNames = {
        text: "text",
        QA: "QA card",
        cloze: "cloze card"
      };
      new import_obsidian9.Notice(`\u2705 Extracted as ${typeNames[extractType]}`);
      this.refreshAllViews();
    } catch (error) {
      console.error("Error extracting selection:", error);
      new import_obsidian9.Notice(`\u274C Error: ${error.message}`);
    }
  }
  /**
   * 🆕 查找重复的 ContentUnit
   * 根据文件路径和位置判断是否已存在
   */
  async findDuplicateUnit(unit) {
    const allUnits = await this.dataManager.getAllContentUnits();
    const duplicate = allUnits.find(
      (existing) => existing.source.file === unit.source.file && existing.source.position.start === unit.source.position.start && existing.source.position.end === unit.source.position.end && existing.type === unit.type
    );
    return duplicate || null;
  }
  /**
   * 🆕 检查内容是否重复（基于内容相似度）
   */
  isContentDuplicate(content1, content2) {
    const normalized1 = content1.trim().toLowerCase();
    const normalized2 = content2.trim().toLowerCase();
    return normalized1 === normalized2;
  }
  /**
   * 创建纯文本单元
   */
  createTextUnit(file, selection, offset, fileContent) {
    const position = this.calculatePosition(fileContent, offset);
    return {
      id: this.generateId(),
      type: "text",
      content: selection.trim(),
      fullContext: selection.trim(),
      source: {
        file: file.path,
        position: {
          start: offset,
          end: offset + selection.length,
          line: position.line
        },
        heading: this.findHeading(fileContent, offset),
        anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
      },
      extractRule: {
        ruleId: "text-manual",
        ruleName: "Manual Text Extract",
        extractedBy: "manual"
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now(),
        tags: this.extractTags(fileContent, offset)
      },
      flashcardIds: []
    };
  }
  /**
   * 创建 QA 卡片单元
   */
  createQAUnit(file, selection, offset, fileContent) {
    const position = this.calculatePosition(fileContent, offset);
    let question, answer;
    if (selection.includes("::")) {
      const parts = selection.split("::");
      question = parts[0].trim();
      answer = parts.slice(1).join("::").trim();
    } else {
      question = selection.trim();
      answer = "[Answer needed]";
    }
    return {
      id: this.generateId(),
      type: "QA",
      content: question,
      answer,
      fullContext: selection.trim(),
      source: {
        file: file.path,
        position: {
          start: offset,
          end: offset + selection.length,
          line: position.line
        },
        heading: this.findHeading(fileContent, offset),
        anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
      },
      extractRule: {
        ruleId: "QA-manual",
        ruleName: "Manual QA Card",
        extractedBy: "manual"
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now(),
        tags: this.extractTags(fileContent, offset)
      },
      flashcardIds: []
    };
  }
  /**
   * 创建完形填空卡片单元
   */
  createClozeUnit(file, selection, offset, fileContent) {
    const position = this.calculatePosition(fileContent, offset);
    const fullSentence = this.extractFullSentence(fileContent, offset, selection.length);
    return {
      id: this.generateId(),
      type: "cloze",
      content: selection.trim(),
      fullContext: fullSentence,
      source: {
        file: file.path,
        position: {
          start: offset,
          end: offset + selection.length,
          line: position.line
        },
        heading: this.findHeading(fileContent, offset),
        anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
      },
      extractRule: {
        ruleId: "cloze-manual",
        ruleName: "Manual Cloze Card",
        extractedBy: "manual"
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now(),
        tags: this.extractTags(fileContent, offset)
      },
      flashcardIds: []
    };
  }
  /**
   * 从光标位置计算文件偏移量
   */
  getOffsetFromCursor(content, line, ch) {
    const lines = content.split("\n");
    let offset = 0;
    for (let i = 0; i < line; i++) {
      offset += lines[i].length + 1;
    }
    offset += ch;
    return offset;
  }
  /**
   * 扫描单个文件
   */
  async scanFile(file) {
    try {
      const content = await this.app.vault.read(file);
      const units = await this.extractContent(file, content);
      if (units.length > 0) {
        await this.dataManager.saveContentUnits(units);
        const qaCount = units.filter((u) => u.type === "QA").length;
        const clozeCount = units.filter((u) => u.type === "cloze").length;
        new import_obsidian9.Notice(`Extracted ${qaCount} QA cards and ${clozeCount} cloze cards from ${file.name}`);
        setTimeout(() => {
          this.refreshAllViews();
        }, 100);
      }
      return units.length;
    } catch (error) {
      console.error("[scanFile] \u9519\u8BEF:", error);
      new import_obsidian9.Notice(`Error scanning file: ${error.message}`);
      return 0;
    }
  }
  /**
   * 刷新所有相关视图
   */
  refreshAllViews() {
    this.app.workspace.iterateAllLeaves((leaf) => {
      const viewType = leaf.view.getViewType();
      if (viewType === "learning-system-sidebar-overview" || viewType === "learning-system-main-overview") {
        const view = leaf.view;
        if (view && typeof view.refresh === "function") {
          view.refresh();
        }
      }
    });
  }
  /**
   * 扫描整个 Vault
   */
  async scanVault() {
    const files = this.app.vault.getMarkdownFiles();
    let scanned = 0;
    let extracted = 0;
    new import_obsidian9.Notice(`Scanning ${files.length} files...`);
    for (const file of files) {
      const count = await this.scanFile(file);
      scanned++;
      extracted += count;
    }
    new import_obsidian9.Notice(`Scan complete! Extracted ${extracted} items from ${scanned} files.`);
    return { scanned, extracted };
  }
  /**
   * 🔧 修改: 先保存 units，再创建闪卡，同时过滤重复项
   */
  async extractContent(file, content) {
    const units = [];
    const qaUnits = this.extractQACards(file, content);
    const clozeUnits = this.extractClozeCards(file, content);
    const allExtractedUnits = [...qaUnits, ...clozeUnits];
    const existingUnits = await this.dataManager.getAllContentUnits();
    const newUnits = await this.filterDuplicateUnits(allExtractedUnits, existingUnits);
    if (newUnits.length === 0) {
      new import_obsidian9.Notice(` ${file.name}: \u6CA1\u6709\u65B0\u5185\u5BB9\u9700\u8981\u63D0\u53D6`);
      return [];
    }
    if (newUnits.length < allExtractedUnits.length) {
      const skipped = allExtractedUnits.length - newUnits.length;
      new import_obsidian9.Notice(` ${file.name}: \u8DF3\u8FC7 ${skipped} \u4E2A\u91CD\u590D\u9879`);
    }
    units.push(...newUnits);
    if (units.length > 0) {
      await this.dataManager.saveContentUnits(units);
    }
    for (const unit of units) {
      try {
        const cardType = unit.type === "QA" ? "qa" : "cloze";
        const flashcard = await this.flashcardManager.createFlashcardFromUnit(unit, {
          cardType
        });
      } catch (error) {
        console.error("[extractContent] \u521B\u5EFA\u95EA\u5361\u5931\u8D25:", error);
      }
    }
    return units;
  }
  /**
   * 🆕 过滤重复的 units
   * 根据文件路径、位置和内容判断是否重复
   */
  async filterDuplicateUnits(newUnits, existingUnits) {
    const filtered = [];
    for (const newUnit of newUnits) {
      const isDuplicate = existingUnits.some((existing) => {
        const sameLocation = existing.source.file === newUnit.source.file && existing.source.position.start === newUnit.source.position.start && existing.source.position.end === newUnit.source.position.end && existing.type === newUnit.type;
        const sameContent = existing.source.file === newUnit.source.file && existing.type === newUnit.type && this.isContentDuplicate(existing.content, newUnit.content) && this.isContentDuplicate(existing.fullContext || "", newUnit.fullContext || "");
        const sameQA = existing.type === "QA" && newUnit.type === "QA" && existing.source.file === newUnit.source.file && this.isContentDuplicate(existing.content, newUnit.content) && this.isContentDuplicate(existing.answer || "", newUnit.answer || "");
        return sameLocation || sameContent || sameQA;
      });
      if (!isDuplicate) {
        filtered.push(newUnit);
      }
    }
    return filtered;
  }
  /**
   * ✅ 检查是否为任务完成标记
   * 排除: [completion:: date], [due:: date] 等任务相关的 :: 格式
   */
  isTaskCompletion(line) {
    const taskPattern = /^[\s]*-\s*\[[x\s]\].*::/i;
    return taskPattern.test(line);
  }
  /**
   * ✅ 检查是否为日期/时间字段
   * 排除: date1:: 2021-02-26T15:15, date2:: 2021-04-17 18:00 等格式
   */
  isDateTimeField(question, answer) {
    const dateFieldPattern = /\b(date\d*|time\d*|created|updated|modified|scheduled|due|completion)\b/i;
    const dateTimePattern = /^\s*\d{4}-\d{2}-\d{2}(T|\s)\d{2}:\d{2}|\d{4}-\d{2}-\d{2}\s+\d{2}:\d{2}/;
    const dateOnlyPattern = /^\s*\d{4}-\d{2}-\d{2}\s*$/;
    return dateFieldPattern.test(question) && (dateTimePattern.test(answer) || dateOnlyPattern.test(answer));
  }
  /**
   * ✅ 检查是否为 Excalidraw 高亮
   * 排除: ==switch to excalidraw view...== 这类特定高亮
   */
  isExcalidrawHighlight(matchText, line) {
    const excalidrawKeywords = /excalidraw|drawing|sketch/i;
    return excalidrawKeywords.test(matchText) || excalidrawKeywords.test(line);
  }
  /**
   * ✅ 提取 QA 卡片 (格式: Question :: Answer)
   * 新增: 过滤任务完成标记和日期时间字段
   */
  extractQACards(file, content) {
    const units = [];
    const qaRegex = /^(.+?)\s*::\s*(.+?)$/gm;
    let match;
    while ((match = qaRegex.exec(content)) !== null) {
      const fullMatch = match[0];
      const question = match[1].trim();
      const answer = match[2].trim();
      if (this.isTaskCompletion(fullMatch)) {
        console.log("[extractQACards] \u8DF3\u8FC7\u4EFB\u52A1\u6807\u8BB0:", fullMatch);
        continue;
      }
      if (this.isDateTimeField(question, answer)) {
        console.log("[extractQACards] \u8DF3\u8FC7\u65E5\u671F\u65F6\u95F4\u5B57\u6BB5:", fullMatch);
        continue;
      }
      const position = this.calculatePosition(content, match.index);
      const unit = {
        id: this.generateId(),
        type: "QA",
        content: question,
        answer,
        fullContext: fullMatch,
        source: {
          file: file.path,
          position: {
            start: match.index,
            end: match.index + fullMatch.length,
            line: position.line
          },
          heading: this.findHeading(content, match.index),
          anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
        },
        extractRule: {
          ruleId: "QA",
          ruleName: "QA Card",
          extractedBy: "auto"
        },
        metadata: {
          createdAt: Date.now(),
          updatedAt: Date.now(),
          tags: this.extractTags(content, match.index)
        },
        flashcardIds: []
      };
      units.push(unit);
    }
    return units;
  }
  /**
   * ✅ 提取完形填空卡 (格式: ==highlight==)
   * 新增: 过滤 Excalidraw 高亮
   */
  // private extractClozeCards(file: TFile, content: string): ContentUnit[] {
  //   const units: ContentUnit[] = [];
  //   const highlightRegex = /==(.+?)==/g;
  //   let match;
  //   while ((match = highlightRegex.exec(content)) !== null) {
  //     const extractedText = match[1];
  //     const fullMatch = match[0];
  //     const position = this.calculatePosition(content, match.index);
  //     // 获取当前行内容
  //     const lineStart = content.lastIndexOf('\n', match.index) + 1;
  //     const lineEnd = content.indexOf('\n', match.index);
  //     const currentLine = content.substring(lineStart, lineEnd === -1 ? content.length : lineEnd);
  //     // ✅ 跳过 Excalidraw 高亮
  //     if (this.isExcalidrawHighlight(extractedText, currentLine)) {
  //       console.log('[extractClozeCards] 跳过 Excalidraw 高亮:', extractedText);
  //       continue;
  //     }
  //     const fullSentence = this.extractFullSentence(content, match.index, fullMatch.length);
  //     const unit: ContentUnit = {
  //       id: this.generateId(),
  //       type: 'cloze',
  //       content: extractedText.trim(),
  //       fullContext: fullSentence,
  //       source: {
  //         file: file.path,
  //         position: {
  //           start: match.index,
  //           end: match.index + fullMatch.length,
  //           line: position.line
  //         },
  //         heading: this.findHeading(content, match.index),
  //         anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
  //       },
  //       extractRule: {
  //         ruleId: 'cloze',
  //         ruleName: 'Cloze Deletion',
  //         extractedBy: 'auto'
  //       },
  //       metadata: {
  //         createdAt: Date.now(),
  //         updatedAt: Date.now(),
  //         tags: this.extractTags(content, match.index)
  //       },
  //       flashcardIds: []
  //     };
  //     units.push(unit);
  //   }
  //   return units;
  // }
  /**
   * 提取包含高亮的完整句子
   */
  extractFullSentence(content, highlightStart, highlightLength) {
    const sentenceEnds = /[.!?。！?\n]/;
    let start = highlightStart;
    while (start > 0) {
      const char = content[start - 1];
      if (sentenceEnds.test(char)) {
        break;
      }
      start--;
    }
    let end = highlightStart + highlightLength;
    while (end < content.length) {
      const char = content[end];
      if (sentenceEnds.test(char)) {
        end++;
        break;
      }
      end++;
    }
    return content.substring(start, end).trim();
  }
  /**
   * 计算文本位置
   */
  calculatePosition(content, offset) {
    const lines = content.substring(0, offset).split("\n");
    return {
      line: lines.length - 1,
      column: lines[lines.length - 1].length
    };
  }
  /**
   * 查找所在标题
   */
  findHeading(content, position) {
    const beforeContent = content.substring(0, position);
    const headings = beforeContent.match(/^#{1,6} .+$/gm);
    return headings ? headings[headings.length - 1] : void 0;
  }
  /**
   * 提取附近的标签
   */
  extractTags(content, position) {
    const tags = /* @__PURE__ */ new Set();
    const yamlMatch = content.match(/^---\n([\s\S]*?)\n---/);
    if (yamlMatch) {
      const yamlContent = yamlMatch[1];
      const tagsMatch = yamlContent.match(/^tags:\s*(.+)$/m);
      if (tagsMatch) {
        const tagContent = tagsMatch[1].trim();
        if (tagContent.startsWith("[")) {
          const arrayTags = tagContent.match(/[\w/-]+/g);
          arrayTags == null ? void 0 : arrayTags.forEach((tag) => tags.add(`#${tag}`));
        } else {
          tagContent.split(",").forEach((tag) => {
            const cleaned = tag.trim();
            if (cleaned)
              tags.add(`#${cleaned}`);
          });
        }
      }
    }
    const lines = content.substring(0, position).split("\n");
    const currentLine = lines.length - 1;
    const lineContent = content.split("\n")[currentLine] || "";
    const inlineTagRegex = /#[\w/-]+/g;
    const inlineTags = lineContent.match(inlineTagRegex);
    inlineTags == null ? void 0 : inlineTags.forEach((tag) => tags.add(tag));
    return Array.from(tags);
  }
  /**
   * 生成唯一 ID
   */
  generateId() {
    return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
  }
  /**
   * 生成 Block ID
   */
  generateBlockId() {
    return `extract-${Date.now()}-${Math.random().toString(36).substr(2, 6)}`;
  }
  // 表格提取方法
  /**
   * 🆕 检测高亮是否在表格中
   */
  isInTable(content, position) {
    var _a, _b, _c;
    const lines = content.split("\n");
    const { line } = this.calculatePosition(content, position);
    if (!((_a = lines[line]) == null ? void 0 : _a.includes("|"))) {
      return false;
    }
    const hasPrevTableLine = line > 0 && ((_b = lines[line - 1]) == null ? void 0 : _b.includes("|"));
    const hasNextTableLine = line < lines.length - 1 && ((_c = lines[line + 1]) == null ? void 0 : _c.includes("|"));
    return hasPrevTableLine || hasNextTableLine;
  }
  /**
   * 🆕 提取表格及其高亮信息
   */
  extractTableWithHighlights(content, highlightPosition) {
    var _a, _b;
    const lines = content.split("\n");
    const { line: currentLine } = this.calculatePosition(content, highlightPosition);
    let tableStart = currentLine;
    let tableEnd = currentLine;
    while (tableStart > 0 && ((_a = lines[tableStart - 1]) == null ? void 0 : _a.includes("|"))) {
      tableStart--;
    }
    while (tableEnd < lines.length - 1 && ((_b = lines[tableEnd + 1]) == null ? void 0 : _b.includes("|"))) {
      tableEnd++;
    }
    const tableLines = lines.slice(tableStart, tableEnd + 1);
    const tableContent = tableLines.join("\n");
    const highlightRegex = /==(.+?)==/g;
    const highlightRows = /* @__PURE__ */ new Set();
    const highlightColumns = /* @__PURE__ */ new Set();
    let highlightCount = 0;
    tableLines.forEach((line, rowIndex) => {
      const cells = line.split("|").map((c) => c.trim()).filter((c) => c);
      if (cells.length > 0 && cells.every((cell) => /^[-:\s]+$/.test(cell))) {
        return;
      }
      cells.forEach((cell, colIndex) => {
        if (highlightRegex.test(cell)) {
          highlightRows.add(rowIndex);
          highlightColumns.add(colIndex);
          highlightCount++;
        }
      });
    });
    return {
      tableContent,
      highlightCount,
      highlightRows,
      highlightColumns
    };
  }
  /**
   * 🆕 根据高亮位置提取表格的特定部分
   */
  extractTablePortion(tableLines, highlightRows, highlightColumns, highlightCount) {
    const totalRows = tableLines.length;
    const separatorIndex = tableLines.findIndex((line, idx) => {
      if (idx === 0)
        return false;
      const cells = line.split("|").map((c) => c.trim()).filter((c) => c);
      return cells.length > 0 && cells.every((cell) => /^[-:\s]+$/.test(cell));
    });
    const actualSeparatorIndex = separatorIndex !== -1 ? separatorIndex : 1;
    const firstDataRow = tableLines[separatorIndex + 1] || tableLines[1];
    const columnCount = firstDataRow.split("|").filter((c) => c.trim()).length;
    if (highlightColumns.size === columnCount || highlightCount >= totalRows - 1) {
      return tableLines.join("\n");
    }
    if (highlightRows.size === 1) {
      const highlightRow = Array.from(highlightRows)[0];
      const result2 = [
        tableLines[0],
        // 表头
        tableLines[separatorIndex],
        // 分隔符
        tableLines[highlightRow]
        // 高亮行
      ];
      return result2.join("\n");
    }
    const result = [tableLines[0], tableLines[separatorIndex]];
    highlightRows.forEach((rowIndex) => {
      if (rowIndex !== 0 && rowIndex !== separatorIndex) {
        result.push(tableLines[rowIndex]);
      }
    });
    return result.join("\n");
  }
  extractClozeCards(file, content) {
    var _a;
    const units = [];
    const highlightRegex = /==(.+?)==/g;
    const processedTables = /* @__PURE__ */ new Set();
    const processedHighlights = /* @__PURE__ */ new Set();
    let match;
    while ((match = highlightRegex.exec(content)) !== null) {
      const extractedText = match[1];
      const fullMatch = match[0];
      const position = this.calculatePosition(content, match.index);
      if (processedHighlights.has(match.index)) {
        continue;
      }
      const lineStart = content.lastIndexOf("\n", match.index) + 1;
      const lineEnd = content.indexOf("\n", match.index);
      const currentLine = content.substring(lineStart, lineEnd === -1 ? content.length : lineEnd);
      if (this.isExcalidrawHighlight(extractedText, currentLine)) {
        console.log("[extractClozeCards] \u8DF3\u8FC7 Excalidraw \u9AD8\u4EAE:", extractedText);
        continue;
      }
      if (this.isInTable(content, match.index)) {
        const tableInfo = this.extractTableWithHighlights(content, match.index);
        if (tableInfo) {
          const tableKey = `${file.path}-${tableInfo.tableContent.substring(0, 50)}`;
          if (processedTables.has(tableKey)) {
            continue;
          }
          processedTables.add(tableKey);
          const tableHighlights = this.findAllHighlightsInTable(content, tableInfo.tableContent, match.index);
          tableHighlights.forEach((pos) => processedHighlights.add(pos));
          const lines = content.split("\n");
          const { line: currentLine2 } = this.calculatePosition(content, match.index);
          let tableStart = currentLine2;
          while (tableStart > 0 && ((_a = lines[tableStart - 1]) == null ? void 0 : _a.includes("|"))) {
            tableStart--;
          }
          const tableLines = tableInfo.tableContent.split("\n");
          const extractedTable = this.extractTablePortion(
            tableLines,
            tableInfo.highlightRows,
            tableInfo.highlightColumns,
            tableInfo.highlightCount
          );
          const extractedLines = extractedTable.split("\n");
          const hasSeparator = extractedLines.some((line) => {
            const cells = line.split("|").map((c) => c.trim()).filter((c) => c);
            return cells.length > 0 && cells.every((cell) => /^[-:\s]+$/.test(cell));
          });
          if (!hasSeparator && extractedLines.length >= 2) {
            const headerCells = extractedLines[0].split("|").map((c) => c.trim()).filter((c) => c);
            const separator = "| " + headerCells.map(() => "---").join(" | ") + " |";
            extractedLines.splice(1, 0, separator);
            const extractedTable2 = extractedLines.join("\n");
          }
          let tableStartOffset = 0;
          for (let i = 0; i < tableStart; i++) {
            tableStartOffset += lines[i].length + 1;
          }
          const allHighlights = this.extractAllHighlightsFromTable(tableInfo.tableContent);
          const unit2 = {
            id: this.generateId(),
            type: "cloze",
            content: allHighlights.join(", "),
            // 🆕 包含所有高亮
            fullContext: extractedTable,
            // 显示提取的表格部分
            source: {
              file: file.path,
              position: {
                start: tableStartOffset,
                end: tableStartOffset + tableInfo.tableContent.length,
                line: tableStart
              },
              heading: this.findHeading(content, match.index),
              anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
            },
            extractRule: {
              ruleId: "cloze-table",
              ruleName: "Table Cloze Deletion",
              extractedBy: "auto"
            },
            metadata: {
              createdAt: Date.now(),
              updatedAt: Date.now(),
              tags: [...this.extractTags(content, match.index), "#table"],
              customData: {
                tableType: "partial",
                highlightCount: tableInfo.highlightCount,
                rowCount: tableInfo.highlightRows.size,
                columnCount: tableInfo.highlightColumns.size,
                allHighlights
                // 🆕 保存所有高亮
              }
            },
            flashcardIds: []
          };
          units.push(unit2);
          console.log(`[extractClozeCards] \u63D0\u53D6\u8868\u683C: ${tableInfo.highlightCount} \u4E2A\u9AD8\u4EAE`);
          continue;
        }
      }
      const fullSentence = this.extractFullSentence(content, match.index, fullMatch.length);
      const unit = {
        id: this.generateId(),
        type: "cloze",
        content: extractedText.trim(),
        fullContext: fullSentence,
        source: {
          file: file.path,
          position: {
            start: match.index,
            end: match.index + fullMatch.length,
            line: position.line
          },
          heading: this.findHeading(content, match.index),
          anchorLink: `[[${file.basename}#^${this.generateBlockId()}]]`
        },
        extractRule: {
          ruleId: "cloze",
          ruleName: "Cloze Deletion",
          extractedBy: "auto"
        },
        metadata: {
          createdAt: Date.now(),
          updatedAt: Date.now(),
          tags: this.extractTags(content, match.index)
        },
        flashcardIds: []
      };
      units.push(unit);
    }
    return units;
  }
  // 🆕 添加辅助方法:找到表格内所有高亮的位置
  findAllHighlightsInTable(content, tableContent, currentHighlightPos) {
    var _a, _b;
    const positions = [];
    const lines = content.split("\n");
    const { line: currentLine } = this.calculatePosition(content, currentHighlightPos);
    let tableStart = currentLine;
    let tableEnd = currentLine;
    while (tableStart > 0 && ((_a = lines[tableStart - 1]) == null ? void 0 : _a.includes("|"))) {
      tableStart--;
    }
    while (tableEnd < lines.length - 1 && ((_b = lines[tableEnd + 1]) == null ? void 0 : _b.includes("|"))) {
      tableEnd++;
    }
    let offset = 0;
    for (let i = 0; i < tableStart; i++) {
      offset += lines[i].length + 1;
    }
    const highlightRegex = /==(.+?)==/g;
    let match;
    const tableEndOffset = offset + tableContent.length;
    while ((match = highlightRegex.exec(content)) !== null) {
      if (match.index >= offset && match.index < tableEndOffset) {
        positions.push(match.index);
      }
    }
    return positions;
  }
  // 🆕 添加辅助方法:提取表格中所有高亮内容
  extractAllHighlightsFromTable(tableContent) {
    const highlights = [];
    const highlightRegex = /==(.+?)==/g;
    let match;
    while ((match = highlightRegex.exec(tableContent)) !== null) {
      highlights.push(match[1].trim());
    }
    return highlights;
  }
};

// src/core/AnnotationManager.ts
var AnnotationManager = class {
  constructor(app, plugin) {
    this.app = app;
    this.plugin = plugin;
    this.annotations = /* @__PURE__ */ new Map();
    this.dataFolder = `${this.app.vault.configDir}/plugins/learning-system/data`;
  }
  async initialize() {
    await this.loadAnnotations();
  }
  /**
   * 加载所有批注
   */
  async loadAnnotations() {
    try {
      const path = `${this.dataFolder}/annotations.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(path)) {
        const data = await adapter.read(path);
        const annotations = JSON.parse(data);
        for (const annotation of annotations) {
          this.annotations.set(annotation.id, annotation);
        }
      }
    } catch (error) {
      console.error("Error loading annotations:", error);
    }
  }
  /**
   * 添加内容批注
   */
  async addContentAnnotation(contentUnitId, content, badge) {
    const annotation = {
      id: this.generateId(),
      targetType: "content",
      targetId: contentUnitId,
      content,
      badge,
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.annotations.set(annotation.id, annotation);
    await this.persist();
    const contentUnit = this.plugin.dataManager.getContentUnit(contentUnitId);
    if (contentUnit) {
      contentUnit.annotationId = annotation.id;
      contentUnit.metadata.updatedAt = Date.now();
      await this.plugin.dataManager.saveContentUnit(contentUnit);
    }
    return annotation;
  }
  /**
   * 添加文件批注
   */
  async addFileAnnotation(filePath, content) {
    const annotation = {
      id: this.generateId(),
      targetType: "file",
      targetId: filePath,
      content,
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.annotations.set(annotation.id, annotation);
    await this.persist();
    return annotation;
  }
  /**
   * 获取批注
   */
  getAnnotation(id) {
    return this.annotations.get(id);
  }
  /**
   * 获取内容的批注
   */
  getContentAnnotation(contentUnitId) {
    const contentUnit = this.plugin.dataManager.getContentUnit(contentUnitId);
    if (!(contentUnit == null ? void 0 : contentUnit.annotationId))
      return void 0;
    return this.annotations.get(contentUnit.annotationId);
  }
  /**
   * 获取文件的所有批注
   */
  getFileAnnotations(filePath) {
    return Array.from(this.annotations.values()).filter(
      (ann) => ann.targetType === "file" && ann.targetId === filePath
    );
  }
  /**
   * 更新批注
   */
  async updateAnnotation(id, updates) {
    const annotation = this.annotations.get(id);
    if (!annotation)
      return;
    Object.assign(annotation, updates, {
      metadata: {
        ...annotation.metadata,
        updatedAt: Date.now()
      }
    });
    await this.persist();
  }
  /**
   * 删除批注
   */
  async deleteAnnotation(id) {
    const annotation = this.annotations.get(id);
    if (!annotation)
      return;
    if (annotation.targetType === "content") {
      const contentUnit = this.plugin.dataManager.getContentUnit(annotation.targetId);
      if (contentUnit) {
        contentUnit.annotationId = void 0;
        await this.plugin.dataManager.saveContentUnit(contentUnit);
      }
    }
    this.annotations.delete(id);
    await this.persist();
  }
  /**
   * 获取所有批注
   */
  getAllAnnotations() {
    return Array.from(this.annotations.values());
  }
  /**
   * 持久化
   */
  async persist() {
    try {
      const path = `${this.dataFolder}/annotations.json`;
      const annotations = Array.from(this.annotations.values());
      const data = JSON.stringify(annotations, null, 2);
      await this.app.vault.adapter.write(path, data);
    } catch (error) {
      console.error("Error persisting annotations:", error);
    }
  }
  /**
   * 生成唯一 ID
   */
  generateId() {
    return `ann-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
  }
};

// src/core/FlashcardManager.ts
var FlashcardManager = class {
  constructor(app, dataManager, plugin) {
    this.app = app;
    this.dataManager = dataManager;
    this.plugin = plugin;
    this.flashcards = /* @__PURE__ */ new Map();
    this.reviewLogs = [];
    this.dataFolder = `${this.app.vault.configDir}/plugins/learning-system/data`;
  }
  async initialize() {
    await this.loadFlashcards();
    await this.loadReviewLogs();
  }
  // ==================== 统一创建入口 ====================
  /**
   * 🆕 统一入口: 从 ContentUnit 创建闪卡
   * 适配所有场景: 右键提取、Scan、批量创建、快速生成
   */
  async createFlashcardFromUnit(unit, options) {
    const cardType = (options == null ? void 0 : options.cardType) || (unit.type === "QA" ? "qa" : "cloze");
    let flashcard;
    if (cardType === "qa" || unit.type === "QA") {
      const question = (options == null ? void 0 : options.customQuestion) || unit.content;
      const answer = (options == null ? void 0 : options.customAnswer) || unit.answer || unit.content;
      flashcard = await this.createQACard(unit.id, question, answer);
    } else {
      const text = unit.fullContext || unit.content;
      const answer = (options == null ? void 0 : options.customAnswer) || unit.content;
      const deletions = [{
        index: text.indexOf(answer),
        answer
      }];
      flashcard = await this.createClozeCard(unit.id, text, deletions);
    }
    return flashcard;
  }
  // ==================== 核心创建方法 ====================
  /**
   * 创建问答卡（唯一版本，合并了所有功能）
   */
  async createQACard(contentUnitId, question, answer, deck) {
    const contentUnit = this.dataManager.getContentUnit(contentUnitId);
    if (!contentUnit)
      throw new Error("Content unit not found");
    const card = {
      id: this.generateId(),
      type: "qa",
      sourceContentId: contentUnitId,
      sourceFile: contentUnit.source.file,
      anchorLink: contentUnit.source.anchorLink,
      front: question,
      back: answer,
      deck: deck || this.inferDeck(contentUnit.source.file),
      tags: contentUnit.metadata.tags,
      scheduling: this.initializeScheduling(),
      stats: {
        totalReviews: 0,
        correctCount: 0,
        averageTime: 0,
        difficulty: 0.5
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.flashcards.set(card.id, card);
    contentUnit.flashcardIds.push(card.id);
    await this.dataManager.saveContentUnits([contentUnit]);
    await this.persistFlashcards();
    return card;
  }
  /**
   * 创建完形填空卡（唯一版本，合并了所有功能）
   */
  async createClozeCard(contentUnitId, original, deletions) {
    const contentUnit = this.dataManager.getContentUnit(contentUnitId);
    if (!contentUnit)
      throw new Error("Content unit not found");
    const front = this.generateClozeText(original, deletions);
    const back = deletions.map((d) => d.answer);
    const card = {
      id: this.generateId(),
      type: "cloze",
      sourceContentId: contentUnitId,
      sourceFile: contentUnit.source.file,
      anchorLink: contentUnit.source.anchorLink,
      front,
      back,
      cloze: {
        original,
        deletions
      },
      deck: this.inferDeck(contentUnit.source.file),
      tags: contentUnit.metadata.tags,
      scheduling: this.initializeScheduling(),
      stats: {
        totalReviews: 0,
        correctCount: 0,
        averageTime: 0,
        difficulty: 0.5
      },
      metadata: {
        createdAt: Date.now(),
        updatedAt: Date.now()
      }
    };
    this.flashcards.set(card.id, card);
    contentUnit.flashcardIds.push(card.id);
    await this.dataManager.saveContentUnits([contentUnit]);
    await this.persistFlashcards();
    return card;
  }
  // ==================== 查询方法 ====================
  /**
   * 获取闪卡
   */
  getFlashcard(id) {
    return this.flashcards.get(id);
  }
  /**
   * 获取所有闪卡
   */
  getAllFlashcards() {
    return Array.from(this.flashcards.values());
  }
  /**
   * 获取今日待复习的卡片
   */
  getDueCards() {
    const now = Date.now();
    return Array.from(this.flashcards.values()).filter((card) => card.scheduling.due <= now).sort((a, b) => {
      const aPriority = this.getCardPriority(a);
      const bPriority = this.getCardPriority(b);
      return bPriority - aPriority;
    });
  }
  /**
   * 获取新卡片
   */
  getNewCards() {
    return Array.from(this.flashcards.values()).filter((card) => card.scheduling.state === "new");
  }
  // ==================== 更新和删除 ====================
  /**
   * 更新卡片（复习后）
   */
  async updateCard(card) {
    this.flashcards.set(card.id, card);
    await this.persistFlashcards();
  }
  /**
   * 删除卡片
   */
  async deleteCard(id) {
    const card = this.flashcards.get(id);
    if (!card)
      return;
    const contentUnit = this.dataManager.getContentUnit(card.sourceContentId);
    if (contentUnit) {
      const index = contentUnit.flashcardIds.indexOf(id);
      if (index > -1) {
        contentUnit.flashcardIds.splice(index, 1);
        await this.dataManager.saveContentUnits([contentUnit]);
      }
    }
    this.flashcards.delete(id);
    await this.persistFlashcards();
  }
  // ==================== 复习日志 ====================
  /**
   * 记录复习日志
   */
  async logReview(log) {
    this.reviewLogs.push(log);
    if (this.reviewLogs.length > 1e3) {
      this.reviewLogs = this.reviewLogs.slice(-1e3);
    }
    await this.persistReviewLogs();
  }
  /**
   * 获取卡片的复习历史
   */
  getCardReviewHistory(cardId) {
    return this.reviewLogs.filter((log) => log.flashcardId === cardId);
  }
  // ==================== 统计 ====================
  /**
   * 获取统计数据
   */
  getStats() {
    const all = this.getAllFlashcards();
    const due = this.getDueCards();
    const newCards = this.getNewCards();
    const today = new Date().setHours(0, 0, 0, 0);
    const reviewedToday = this.reviewLogs.filter(
      (log) => log.timestamp >= today
    ).length;
    return {
      total: all.length,
      new: newCards.length,
      due: due.length,
      reviewedToday,
      totalReviews: this.reviewLogs.length
    };
  }
  // ==================== 私有工具方法 ====================
  /**
   * 加载闪卡
   */
  async loadFlashcards() {
    try {
      const path = `${this.dataFolder}/flashcards.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(path)) {
        const data = await adapter.read(path);
        const flashcards = JSON.parse(data);
        for (const card of flashcards) {
          this.flashcards.set(card.id, card);
        }
      }
    } catch (error) {
      console.error("Error loading flashcards:", error);
    }
  }
  /**
   * 加载复习日志
   */
  async loadReviewLogs() {
    try {
      const path = `${this.dataFolder}/review-logs.json`;
      const adapter = this.app.vault.adapter;
      if (await adapter.exists(path)) {
        const data = await adapter.read(path);
        this.reviewLogs = JSON.parse(data);
      }
    } catch (error) {
      console.error("Error loading review logs:", error);
    }
  }
  /**
   * 初始化调度参数
   */
  initializeScheduling() {
    return {
      interval: 0,
      ease: 2.5,
      due: Date.now(),
      lapses: 0,
      reps: 0,
      state: "new"
    };
  }
  /**
   * 生成完形填空文本
   */
  generateClozeText(original, deletions) {
    let result = original;
    const sorted = [...deletions].sort((a, b) => b.index - a.index);
    for (const deletion of sorted) {
      const before = result.substring(0, deletion.index);
      const after = result.substring(deletion.index + deletion.answer.length);
      result = `${before}[...]${after}`;
    }
    return result;
  }
  /**
   * 推断卡组名称
   */
  inferDeck(filePath) {
    const parts = filePath.split("/");
    return parts.length > 1 ? parts[parts.length - 2] : "Default";
  }
  /**
   * 获取卡片优先级
   */
  getCardPriority(card) {
    const now = Date.now();
    const overdue = Math.max(0, now - card.scheduling.due);
    const daysOverdue = overdue / (24 * 60 * 60 * 1e3);
    if (card.scheduling.state === "new")
      return 100 + daysOverdue;
    if (card.scheduling.state === "relearning")
      return 200 + daysOverdue;
    return daysOverdue;
  }
  /**
   * 持久化闪卡
   */
  async persistFlashcards() {
    try {
      const path = `${this.dataFolder}/flashcards.json`;
      const flashcards = Array.from(this.flashcards.values());
      const data = JSON.stringify(flashcards, null, 2);
      await this.app.vault.adapter.write(path, data);
    } catch (error) {
      console.error("Error persisting flashcards:", error);
    }
  }
  /**
   * 持久化复习日志
   */
  async persistReviewLogs() {
    try {
      const path = `${this.dataFolder}/review-logs.json`;
      const data = JSON.stringify(this.reviewLogs, null, 2);
      await this.app.vault.adapter.write(path, data);
    } catch (error) {
      console.error("Error persisting review logs:", error);
    }
  }
  /**
   * 生成唯一 ID
   */
  generateId() {
    return `card-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  extractionEnabled: true,
  autoScan: false,
  defaultDeck: "Default"
};
var LearningSystemPlugin = class extends import_obsidian11.Plugin {
  async onload() {
    console.log("Loading Learning System Plugin");
    await this.loadSettings();
    this.dataManager = new DataManager(this.app, this);
    await this.dataManager.initialize();
    this.annotationManager = new AnnotationManager(this.app, this);
    await this.annotationManager.initialize();
    this.flashcardManager = new FlashcardManager(
      this.app,
      this.dataManager,
      this
    );
    await this.flashcardManager.initialize();
    this.extractionEngine = new ExtractionEngine(
      this.app,
      this.dataManager,
      this.flashcardManager
    );
    this.registerView(
      VIEW_TYPE_OVERVIEW,
      (leaf) => new OverviewView(leaf, this)
    );
    this.registerView(
      VIEW_TYPE_SIDEBAR_OVERVIEW,
      (leaf) => new SidebarOverviewView(leaf, this, false)
    );
    this.registerView(
      VIEW_TYPE_MAIN_OVERVIEW,
      (leaf) => new SidebarOverviewView(leaf, this, true)
    );
    this.registerView(
      VIEW_TYPE_REVIEW,
      (leaf) => new ReviewView(leaf, this)
    );
    this.registerView(
      VIEW_TYPE_STATS,
      (leaf) => new StatsView(leaf, this)
    );
    this.registerEvent(
      this.app.workspace.on("editor-menu", (menu, editor, view) => {
        if (view instanceof import_obsidian11.MarkdownView) {
          const file = view.file;
          if (file) {
            this.extractionEngine.registerContextMenu(menu, editor, file);
          }
        }
      })
    );
    this.addSettingTab(new SettingsTab(this.app, this));
    this.addCommands();
    this.addRibbonIcon("layout-list", "Open Learning Overview(Sidebar)", () => {
      this.activateSidebarOverview();
    });
    this.addRibbonIcon("layers", "Start Review", () => {
      this.activateReview();
    });
    this.setupStatusBar();
    this.analyticsEngine = new AnalyticsEngine(this);
    console.log("Learning System Plugin loaded");
  }
  onunload() {
    console.log("Unloading Learning System Plugin");
    const styleEl = document.getElementById("learning-overview-styles");
    if (styleEl) {
      styleEl.remove();
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  addCommands() {
    this.addCommand({
      id: "scan-current-file",
      name: "Scan current file for content",
      callback: async () => {
        const activeFile = this.app.workspace.getActiveFile();
        if (!activeFile)
          return;
        await this.extractionEngine.scanFile(activeFile);
        this.refreshOverview();
      }
    });
    this.addCommand({
      id: "scan-vault",
      name: "Scan entire vault",
      callback: async () => {
        await this.extractionEngine.scanVault();
        this.refreshOverview();
      }
    });
    this.addCommand({
      id: "open-overview",
      name: "Open Learning Overview(Sidebar)",
      callback: () => {
        this.activateSidebarOverview();
      }
    });
    this.addCommand({
      id: "open-main-overview",
      name: "Toggle Learning Overview (Main View)",
      callback: async () => {
        await this.toggleMainView();
      }
    });
    this.addCommand({
      id: "add-file-annotation",
      name: "Add file annotation",
      callback: async () => {
        const activeFile = this.app.workspace.getActiveFile();
        if (!activeFile)
          return;
        const { FileAnnotationModal: FileAnnotationModal2 } = await Promise.resolve().then(() => (init_AnnotationModal(), AnnotationModal_exports));
        const modal = new FileAnnotationModal2(
          this.app,
          this,
          activeFile.path,
          () => this.refreshOverview()
        );
        modal.open();
      }
    });
    this.addCommand({
      id: "start-review",
      name: "Start flashcard review",
      callback: () => {
        this.activateReview();
      }
    });
    this.addCommand({
      id: "show-stats",
      name: "Show flashcard statistics",
      callback: () => {
        this.activateStats();
      }
    });
  }
  async activateMainView() {
    const { workspace } = this.app;
    let leaf = workspace.getLeavesOfType(VIEW_TYPE_MAIN_OVERVIEW)[0];
    if (!leaf) {
      leaf = workspace.getLeaf("tab");
      await leaf.setViewState({
        type: VIEW_TYPE_MAIN_OVERVIEW,
        active: true
      });
    }
    workspace.revealLeaf(leaf);
  }
  async toggleMainView() {
    const { workspace } = this.app;
    const existingLeaves = workspace.getLeavesOfType(VIEW_TYPE_MAIN_OVERVIEW);
    const activeLeaf = workspace.activeLeaf;
    const isMainOverviewActive = activeLeaf && activeLeaf.view.getViewType() === VIEW_TYPE_MAIN_OVERVIEW;
    if (existingLeaves.length > 0 && isMainOverviewActive) {
      existingLeaves.forEach((leaf) => {
        leaf.detach();
      });
    } else if (existingLeaves.length > 0 && !isMainOverviewActive) {
      workspace.revealLeaf(existingLeaves[0]);
    } else {
      const leaf = workspace.getLeaf("tab");
      await leaf.setViewState({
        type: VIEW_TYPE_MAIN_OVERVIEW,
        active: true
      });
      workspace.revealLeaf(leaf);
    }
  }
  async activateSidebarOverview() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_SIDEBAR_OVERVIEW);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getRightLeaf(false);
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_SIDEBAR_OVERVIEW,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async activateOverview() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_OVERVIEW);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getLeaf(`tab`);
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_OVERVIEW,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async activateReview() {
    const stats = this.flashcardManager.getStats();
    if (stats.due === 0) {
      new import_obsidian11.Notice("No cards due for review!");
      return;
    }
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_REVIEW);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getLeaf(true);
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_REVIEW,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  async activateStats() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_STATS);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getLeaf("tab");
      await (leaf == null ? void 0 : leaf.setViewState({
        type: VIEW_TYPE_STATS,
        active: true
      }));
    }
    if (leaf) {
      workspace.revealLeaf(leaf);
    }
  }
  refreshOverview() {
    const overviewLeaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_OVERVIEW);
    overviewLeaves.forEach((leaf) => {
      const view = leaf.view;
      if (view && typeof view.refresh === "function") {
        view.refresh();
      }
    });
    const sidebarLeaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_SIDEBAR_OVERVIEW);
    sidebarLeaves.forEach((leaf) => {
      const view = leaf.view;
      if (view && typeof view.refresh === "function") {
        view.refresh();
      }
    });
    const mainLeaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_MAIN_OVERVIEW);
    mainLeaves.forEach((leaf) => {
      const view = leaf.view;
      if (view && typeof view.refresh === "function") {
        view.refresh();
      }
    });
  }
  setupStatusBar() {
    const statusBarItem = this.addStatusBarItem();
    statusBarItem.addClass("learning-system-status");
    const updateStatus = () => {
      const stats = this.flashcardManager.getStats();
      statusBarItem.setText(`\u{1F0CF} ${stats.due} due`);
      statusBarItem.title = `${stats.due} cards due for review
${stats.new} new cards`;
    };
    updateStatus();
    this.registerInterval(
      window.setInterval(updateStatus, 6e4)
    );
    statusBarItem.addEventListener("click", () => {
      this.activateReview();
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL2NvcmUvUXVpY2tGbGFzaGNhcmRDcmVhdG9yLnRzIiwgInNyYy91aS92aWV3L0ZsYXNoY2FyZENyZWF0ZU1vZGFsLnRzIiwgInNyYy91aS92aWV3L092ZXJ2aWV3Vmlldy50cyIsICJzcmMvdWkvdmlldy9Bbm5vdGF0aW9uTW9kYWwudHMiLCAic3JjL21haW4udHMiLCAic3JjL3VpL3ZpZXcvU2V0dGluZ3NUYWIudHMiLCAic3JjL3VpL3N0eWxlL3NpZGViYXJTdHlsZS50cyIsICJzcmMvdWkvdmlldy9TaWRlYmFyT3ZlcnZpZXdWaWV3LnRzIiwgInNyYy91aS9zdGF0ZS9WaWV3U3RhdGUudHMiLCAic3JjL3VpL2NvbXBvbmVudHMvVG9vbGJhci50cyIsICJzcmMvdWkvY29tcG9uZW50cy9CYXRjaEFjdGlvbnMudHMiLCAic3JjL3VpL2NvbXBvbmVudHMvQ29udGVudENhcmQudHMiLCAic3JjL3VpL2NvbXBvbmVudHMvQ29udGVudExpc3QudHMiLCAic3JjL3VpL2NvbXBvbmVudHMvQW5ub3RhdGlvbkVkaXRvci50cyIsICJzcmMvdWkvdmlldy9SZXZpZXdWaWV3LnRzIiwgInNyYy9jb3JlL0NhcmRTY2hlZHVsZXIudHMiLCAic3JjL3VpL2NvbXBvbmVudHMvbW9kYWxzL0ZsYXNoY2FyZEVkaXRNb2RhbC50cyIsICJzcmMvdWkvc3RhdGUvcmV2aWV3U3RhdGVNYW5hZ2VyLnRzIiwgInNyYy91aS9jb21wb25lbnRzL1RhYmxlUmVuZGVyZXIudHMiLCAic3JjL3VpL2NvbXBvbmVudHMvcmV2aWV3Q2FyZFJlbmRlci50cyIsICJzcmMvdWkvc3R5bGUvcmV2aWV3U3R5bGUudHMiLCAic3JjL3VpL3ZpZXcvU3RhdHNWaWV3LnRzIiwgInNyYy9jb3JlL0FuYWx5dGljc0VuZ2luZS50cyIsICJzcmMvY29yZS9EYXRhTWFuYWdlci50cyIsICJzcmMvY29yZS9FeHRyYWN0aW9uRW5naW5lLnRzIiwgInNyYy9jb3JlL0Fubm90YXRpb25NYW5hZ2VyLnRzIiwgInNyYy9jb3JlL0ZsYXNoY2FyZE1hbmFnZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8vIHF1aWNrIGZsYXNoY2FyZCAgY3JlYXRvclxuaW1wb3J0IHsgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBDb250ZW50VW5pdCB9IGZyb20gJy4uL2NvcmUvRGF0YU1hbmFnZXInO1xuaW1wb3J0IHsgQW5ub3RhdGlvbiB9IGZyb20gJy4uL2NvcmUvQW5ub3RhdGlvbk1hbmFnZXInO1xuXG4vKipcbiAqIFx1NEUwMFx1OTUyRVx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1NURFNVx1NTE3N1x1N0M3QlxuICovXG5leHBvcnQgY2xhc3MgUXVpY2tGbGFzaGNhcmRDcmVhdG9yIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luKSB7fVxuXG4gIC8qKlxuICAgKiBcdTRFQ0VcdTYzRDBcdTUzRDZcdTUxODVcdTVCQjlcdTRFMDBcdTk1MkVcdTUyMUJcdTVFRkFcdTk1RUVcdTdCNTRcdTUzNjFcbiAgICogXHU1OTgyXHU2NzlDXHU2NzA5XHU2Mjc5XHU2Q0U4XHVGRjBDXHU0RjdGXHU3NTI4XHU2Mjc5XHU2Q0U4XHU0RjVDXHU0RTNBXHU3QjU0XHU2ODQ4XG4gICAqL1xuICBhc3luYyBjcmVhdGVRdWlja1FBQ2FyZChjb250ZW50VW5pdDogQ29udGVudFVuaXQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYW5ub3RhdGlvbiA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldENvbnRlbnRBbm5vdGF0aW9uKGNvbnRlbnRVbml0LmlkKTtcbiAgICAgIFxuICAgICAgbGV0IHF1ZXN0aW9uOiBzdHJpbmc7XG4gICAgICBsZXQgYW5zd2VyOiBzdHJpbmc7XG5cbiAgICAgIGlmIChhbm5vdGF0aW9uICYmIGFubm90YXRpb24uY29udGVudCkge1xuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY3MDlcdTYyNzlcdTZDRThcdUZGMENcdTRGN0ZcdTc1MjhcdTYyNzlcdTZDRThcdTUxODVcdTVCQjlcdTRGNUNcdTRFM0FcdTdCNTRcdTY4NDhcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2Mjc5XHU2Q0U4XHU2NjJGXHU1NDI2XHU2NjJGXHU5NUVFXHU5ODk4XHU1RjYyXHU1RjBGXG4gICAgICAgIGlmICh0aGlzLmlzUXVlc3Rpb24oYW5ub3RhdGlvbi5jb250ZW50KSkge1xuICAgICAgICAgIC8vIFx1NjI3OVx1NkNFOFx1NjYyRlx1OTVFRVx1OTg5OFx1RkYwQ1x1NzUxRlx1NjIxMFx1OUVEOFx1OEJBNFx1OTVFRVx1OTg5OFx1RkYwQ1x1NjI3OVx1NkNFOFx1NTE4NVx1NUJCOVx1NEY1Q1x1NEUzQVx1N0I1NFx1Njg0OFxuICAgICAgICAgIHF1ZXN0aW9uID0gdGhpcy5nZW5lcmF0ZURlZmF1bHRRdWVzdGlvbihjb250ZW50VW5pdCk7XG4gICAgICAgICAgYW5zd2VyID0gYW5ub3RhdGlvbi5jb250ZW50O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFx1NjI3OVx1NkNFOFx1NEUwRFx1NjYyRlx1OTVFRVx1OTg5OFx1NUY2Mlx1NUYwRlx1RkYwQ1x1NzUxRlx1NjIxMFx1OUVEOFx1OEJBNFx1OTVFRVx1OTg5OFx1RkYwQ1x1NjI3OVx1NkNFOFx1NTE4NVx1NUJCOVx1NEY1Q1x1NEUzQVx1N0I1NFx1Njg0OFxuICAgICAgICAgIHF1ZXN0aW9uID0gdGhpcy5nZW5lcmF0ZURlZmF1bHRRdWVzdGlvbihjb250ZW50VW5pdCk7XG4gICAgICAgICAgYW5zd2VyID0gYW5ub3RhdGlvbi5jb250ZW50O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBcdTZDQTFcdTY3MDlcdTYyNzlcdTZDRThcdUZGMENcdTRGN0ZcdTc1MjhcdTlFRDhcdThCQTRcdTZBMjFcdTVGMEZcbiAgICAgICAgcXVlc3Rpb24gPSB0aGlzLmdlbmVyYXRlRGVmYXVsdFF1ZXN0aW9uKGNvbnRlbnRVbml0KTtcbiAgICAgICAgYW5zd2VyID0gY29udGVudFVuaXQuY29udGVudDtcbiAgICAgIH1cblxuICAgICAgLy8gXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXG4gICAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5jcmVhdGVRQUNhcmQoXG4gICAgICAgIGNvbnRlbnRVbml0LmlkLFxuICAgICAgICBxdWVzdGlvbixcbiAgICAgICAgYW5zd2VyXG4gICAgICApO1xuXG4gICAgICBuZXcgTm90aWNlKGBcdTI3MDUgRmxhc2hjYXJkIGNyZWF0ZWQhIChRJkEpYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHF1aWNrIGZsYXNoY2FyZDonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdcdTI3NEMgRmFpbGVkIHRvIGNyZWF0ZSBmbGFzaGNhcmQnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU0RUNFXHU2M0QwXHU1M0Q2XHU1MTg1XHU1QkI5XHU0RTAwXHU5NTJFXHU1MjFCXHU1RUZBXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU1MzYxXG4gICAqIFx1ODFFQVx1NTJBOFx1OEJDNlx1NTIyQlx1NTE3M1x1OTUyRVx1OEJDRFxuICAgKi9cbiAgYXN5bmMgY3JlYXRlUXVpY2tDbG96ZUNhcmQoY29udGVudFVuaXQ6IENvbnRlbnRVbml0KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGtleXdvcmRzID0gdGhpcy5leHRyYWN0S2V5d29yZHMoY29udGVudFVuaXQuY29udGVudCk7XG4gICAgICBcbiAgICAgIGlmIChrZXl3b3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIE5vIGtleXdvcmRzIGZvdW5kIGZvciBjbG96ZSBkZWxldGlvbicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFx1NjI3RVx1NTIzMFx1NTE3M1x1OTUyRVx1OEJDRFx1NTcyOFx1NjU4N1x1NjcyQ1x1NEUyRFx1NzY4NFx1NEY0RFx1N0Y2RVxuICAgICAgY29uc3QgZGVsZXRpb25zID0ga2V5d29yZHMubWFwKGtleXdvcmQgPT4ge1xuICAgICAgICBjb25zdCBpbmRleCA9IGNvbnRlbnRVbml0LmNvbnRlbnQuaW5kZXhPZihrZXl3b3JkLndvcmQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGluZGV4LFxuICAgICAgICAgIGFuc3dlcjoga2V5d29yZC53b3JkXG4gICAgICAgIH07XG4gICAgICB9KS5maWx0ZXIoZCA9PiBkLmluZGV4ICE9PSAtMSk7XG5cbiAgICAgIGlmIChkZWxldGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBDb3VsZCBub3QgY3JlYXRlIGNsb3plIGRlbGV0aW9ucycpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1NTM2MVxuICAgICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuY3JlYXRlQ2xvemVDYXJkKFxuICAgICAgICBjb250ZW50VW5pdC5pZCxcbiAgICAgICAgY29udGVudFVuaXQuY29udGVudCxcbiAgICAgICAgZGVsZXRpb25zXG4gICAgICApO1xuXG4gICAgICBuZXcgTm90aWNlKGBcdTI3MDUgRmxhc2hjYXJkIGNyZWF0ZWQhIChDbG96ZSB3aXRoICR7ZGVsZXRpb25zLmxlbmd0aH0gYmxhbmtzKWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBxdWljayBjbG96ZSBjYXJkOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBGYWlsZWQgdG8gY3JlYXRlIGZsYXNoY2FyZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTY2N0FcdTgwRkRcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcdUZGMDhcdTgxRUFcdTUyQThcdTUyMjRcdTY1QURcdTdDN0JcdTU3OEJcdUZGMDlcbiAgICovXG4gIGFzeW5jIGNyZWF0ZVNtYXJ0Q2FyZChjb250ZW50VW5pdDogQ29udGVudFVuaXQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24oY29udGVudFVuaXQuaWQpO1xuXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU2NzA5XHU5NUVFXHU5ODk4XHU1RjYyXHU1RjBGXHU3Njg0XHU2Mjc5XHU2Q0U4XHVGRjBDXHU1MjFCXHU1RUZBXHU5NUVFXHU3QjU0XHU1MzYxXG4gICAgaWYgKGFubm90YXRpb24gJiYgdGhpcy5pc1F1ZXN0aW9uKGFubm90YXRpb24uY29udGVudCkpIHtcbiAgICAgIGF3YWl0IHRoaXMuY3JlYXRlUXVpY2tRQUNhcmQoY29udGVudFVuaXQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTE4NVx1NUJCOVx1OEY4M1x1NzdFRFx1NEUxNFx1NTMwNVx1NTQyQlx1NTE3M1x1OTUyRVx1NEZFMVx1NjA2Rlx1RkYwQ1x1NTIxQlx1NUVGQVx1OTVFRVx1N0I1NFx1NTM2MVxuICAgIGlmIChjb250ZW50VW5pdC5jb250ZW50Lmxlbmd0aCA8IDIwMCkge1xuICAgICAgYXdhaXQgdGhpcy5jcmVhdGVRdWlja1FBQ2FyZChjb250ZW50VW5pdCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU1MTg1XHU1QkI5XHU4RjgzXHU5NTdGXHVGRjBDXHU1MjFCXHU1RUZBXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU1MzYxXG4gICAgYXdhaXQgdGhpcy5jcmVhdGVRdWlja0Nsb3plQ2FyZChjb250ZW50VW5pdCk7XG4gIH1cblxuICAvKipcbiAgICogXHU2Mjc5XHU5MUNGXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXG4gICAqL1xuICBhc3luYyBjcmVhdGVCYXRjaENhcmRzKFxuICAgIGNvbnRlbnRVbml0czogQ29udGVudFVuaXRbXSxcbiAgICB0eXBlOiAncWEnIHwgJ2Nsb3plJyB8ICdzbWFydCcgPSAnc21hcnQnXG4gICk6IFByb21pc2U8eyBzdWNjZXNzOiBudW1iZXI7IGZhaWxlZDogbnVtYmVyIH0+IHtcbiAgICBsZXQgc3VjY2VzcyA9IDA7XG4gICAgbGV0IGZhaWxlZCA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IHVuaXQgb2YgY29udGVudFVuaXRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICBjYXNlICdxYSc6XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZVF1aWNrUUFDYXJkKHVuaXQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnY2xvemUnOlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVRdWlja0Nsb3plQ2FyZCh1bml0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3NtYXJ0JzpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlU21hcnRDYXJkKHVuaXQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgc3VjY2VzcysrO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgY2FyZDonLCBlcnJvcik7XG4gICAgICAgIGZhaWxlZCsrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3MsIGZhaWxlZCB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NTIyNFx1NjVBRFx1NjU4N1x1NjcyQ1x1NjYyRlx1NTQyNlx1NjYyRlx1OTVFRVx1OTg5OFxuICAgKi9cbiAgcHJpdmF0ZSBpc1F1ZXN0aW9uKHRleHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHF1ZXN0aW9uV29yZHMgPSBbJ3doYXQnLCAnd2h5JywgJ2hvdycsICd3aGVuJywgJ3doZXJlJywgJ3dobycsICd3aGljaCddO1xuICAgIGNvbnN0IGxvd2VyVGV4dCA9IHRleHQudG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgXG4gICAgLy8gXHU0RUU1XHU5NUVFXHU1M0Y3XHU3RUQzXHU1QzNFXG4gICAgaWYgKGxvd2VyVGV4dC5lbmRzV2l0aCgnPycpKSByZXR1cm4gdHJ1ZTtcbiAgICBcbiAgICAvLyBcdTRFRTVcdTc1OTFcdTk1RUVcdThCQ0RcdTVGMDBcdTU5MzRcbiAgICBmb3IgKGNvbnN0IHdvcmQgb2YgcXVlc3Rpb25Xb3Jkcykge1xuICAgICAgaWYgKGxvd2VyVGV4dC5zdGFydHNXaXRoKHdvcmQgKyAnICcpKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgLy8gXHU0RTJEXHU2NTg3XHU5NUVFXHU1M0U1XHU3Mjc5XHU1RjgxXG4gICAgaWYgKHRleHQuaW5jbHVkZXMoJ1x1NEVDMFx1NEU0OCcpIHx8IHRleHQuaW5jbHVkZXMoJ1x1NEUzQVx1NEVDMFx1NEU0OCcpIHx8IFxuICAgICAgICB0ZXh0LmluY2x1ZGVzKCdcdTYwMEVcdTRFNDgnKSB8fCB0ZXh0LmluY2x1ZGVzKCdcdTU5ODJcdTRGNTUnKSB8fFxuICAgICAgICB0ZXh0LmluY2x1ZGVzKCdcdTU0MTdcdUZGMUYnKSB8fCB0ZXh0LmluY2x1ZGVzKCdcdTU0NjJcdUZGMUYnKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTc1MUZcdTYyMTBcdTlFRDhcdThCQTRcdTk1RUVcdTk4OThcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVEZWZhdWx0UXVlc3Rpb24oY29udGVudFVuaXQ6IENvbnRlbnRVbml0KTogc3RyaW5nIHtcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTY3MDlcdTY4MDdcdTk4OThcdUZGMENcdTRGN0ZcdTc1MjhcdTY4MDdcdTk4OThcdTc1MUZcdTYyMTBcdTk1RUVcdTk4OThcbiAgICBpZiAoY29udGVudFVuaXQuc291cmNlLmhlYWRpbmcpIHtcbiAgICAgIGNvbnN0IGhlYWRpbmcgPSBjb250ZW50VW5pdC5zb3VyY2UuaGVhZGluZy5yZXBsYWNlKC9eIytcXHMqLywgJycpO1xuICAgICAgcmV0dXJuIGBXaGF0IGlzIHRoZSBrZXkgcG9pbnQgYWJvdXQgXCIke2hlYWRpbmd9XCI/YDtcbiAgICB9XG5cbiAgICAvLyBcdTY4MzlcdTYzNkVcdTUxODVcdTVCQjlcdTk1N0ZcdTVFQTZcdTc1MUZcdTYyMTBcdTRFMERcdTU0MENcdTc2ODRcdTk1RUVcdTk4OThcbiAgICBpZiAoY29udGVudFVuaXQuY29udGVudC5sZW5ndGggPCA1MCkge1xuICAgICAgcmV0dXJuIGBXaGF0IGRvZXMgXCIke2NvbnRlbnRVbml0LmNvbnRlbnR9XCIgbWVhbj9gO1xuICAgIH0gZWxzZSBpZiAoY29udGVudFVuaXQuY29udGVudC5sZW5ndGggPCAxNTApIHtcbiAgICAgIGNvbnN0IGZpcnN0V29yZHMgPSBjb250ZW50VW5pdC5jb250ZW50LnN1YnN0cmluZygwLCAzMCkgKyAnLi4uJztcbiAgICAgIHJldHVybiBgRXhwbGFpbjogXCIke2ZpcnN0V29yZHN9XCJgO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYFdoYXQgYXJlIHRoZSBrZXkgcG9pbnRzIGluIHRoaXMgY29udGVudD9gO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYzRDBcdTUzRDZcdTUxNzNcdTk1MkVcdThCQ0RcdUZGMDhcdTc1MjhcdTRFOEVcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdUZGMDlcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdEtleXdvcmRzKHRleHQ6IHN0cmluZyk6IEFycmF5PHsgd29yZDogc3RyaW5nOyBzY29yZTogbnVtYmVyIH0+IHtcbiAgICAvLyBcdTUyMDZcdThCQ0RcbiAgICBjb25zdCB3b3JkcyA9IHRleHQubWF0Y2goL1xcYltBLVphLXpdezMsfVxcYi9nKSB8fCBbXTtcbiAgICBcbiAgICAvLyBcdTVFMzhcdTg5QzFcdTUwNUNcdTc1MjhcdThCQ0RcbiAgICBjb25zdCBzdG9wV29yZHMgPSBuZXcgU2V0KFtcbiAgICAgICd0aGUnLCAnaXMnLCAnYXQnLCAnd2hpY2gnLCAnb24nLCAnYScsICdhbicsICdhbmQnLCAnb3InLCAnYnV0JyxcbiAgICAgICdpbicsICd3aXRoJywgJ3RvJywgJ2ZvcicsICdvZicsICdhcycsICdieScsICd0aGlzJywgJ3RoYXQnLFxuICAgICAgJ2Zyb20nLCAndGhleScsICd3ZScsICdzYXknLCAnaGVyJywgJ3NoZScsICdoZScsICd3aWxsJywgJ215JyxcbiAgICAgICdvbmUnLCAnYWxsJywgJ3dvdWxkJywgJ3RoZXJlJywgJ3RoZWlyJywgJ3doYXQnLCAnc28nLCAndXAnLCAnb3V0JyxcbiAgICAgICdpZicsICdhYm91dCcsICd3aG8nLCAnZ2V0JywgJ3doaWNoJywgJ2dvJywgJ21lJywgJ3doZW4nLCAnbWFrZScsXG4gICAgICAnY2FuJywgJ2xpa2UnLCAndGltZScsICdubycsICdqdXN0JywgJ2hpbScsICdrbm93JywgJ3Rha2UnLCAncGVvcGxlJyxcbiAgICAgICdpbnRvJywgJ3llYXInLCAneW91cicsICdnb29kJywgJ3NvbWUnLCAnY291bGQnLCAndGhlbScsICdzZWUnLCAnb3RoZXInXG4gICAgXSk7XG5cbiAgICAvLyBcdThCQ0RcdTk4OTFcdTdFREZcdThCQTFcbiAgICBjb25zdCB3b3JkRnJlcSA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gICAgd29yZHMuZm9yRWFjaCh3b3JkID0+IHtcbiAgICAgIGNvbnN0IGxvd2VyID0gd29yZC50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKCFzdG9wV29yZHMuaGFzKGxvd2VyKSAmJiB3b3JkLmxlbmd0aCA+IDMpIHtcbiAgICAgICAgd29yZEZyZXEuc2V0KHdvcmQsICh3b3JkRnJlcS5nZXQod29yZCkgfHwgMCkgKyAxKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFx1OEJBMVx1N0I5N1x1NTIwNlx1NjU3MFx1RkYwOFx1ODAwM1x1ODY1MVx1OTg5MVx1NzM4N1x1MzAwMVx1OTU3Rlx1NUVBNlx1MzAwMVx1NTkyN1x1NTE5OVx1RkYwOVxuICAgIGNvbnN0IHNjb3JlZCA9IEFycmF5LmZyb20od29yZEZyZXEuZW50cmllcygpKS5tYXAoKFt3b3JkLCBmcmVxXSkgPT4ge1xuICAgICAgbGV0IHNjb3JlID0gZnJlcTtcbiAgICAgIFxuICAgICAgLy8gXHU5NTdGXHU4QkNEXHU1MkEwXHU1MjA2XG4gICAgICBpZiAod29yZC5sZW5ndGggPiA4KSBzY29yZSArPSAyO1xuICAgICAgZWxzZSBpZiAod29yZC5sZW5ndGggPiA2KSBzY29yZSArPSAxO1xuICAgICAgXG4gICAgICAvLyBcdTk5OTZcdTVCNTdcdTZCQ0RcdTU5MjdcdTUxOTlcdTUyQTBcdTUyMDZcdUZGMDhcdTUzRUZcdTgwRkRcdTY2MkZcdTRFMTNcdTY3MDlcdTU0MERcdThCQ0RcdUZGMDlcbiAgICAgIGlmICh3b3JkWzBdID09PSB3b3JkWzBdLnRvVXBwZXJDYXNlKCkpIHNjb3JlICs9IDE7XG4gICAgICBcbiAgICAgIHJldHVybiB7IHdvcmQsIHNjb3JlIH07XG4gICAgfSk7XG5cbiAgICAvLyBcdTYzOTJcdTVFOEZcdTVFNzZcdThGRDRcdTU2REVcdTUyNEQzXHU0RTJBXHU1MTczXHU5NTJFXHU4QkNEXG4gICAgcmV0dXJuIHNjb3JlZFxuICAgICAgLnNvcnQoKGEsIGIpID0+IGIuc2NvcmUgLSBhLnNjb3JlKVxuICAgICAgLnNsaWNlKDAsIDMpO1xuICB9XG59IiwgIi8vIGZsYXNoY2FyZENyZWF0TW9kYWwudHNcbmltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIExlYXJuaW5nU3lzdGVtUGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xuaW1wb3J0IHsgQ29udGVudFVuaXQgfSBmcm9tICcuLi8uLi9jb3JlL0RhdGFNYW5hZ2VyJztcblxuZXhwb3J0IGNsYXNzIEZsYXNoY2FyZENyZWF0ZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIGNvbnRlbnRVbml0OiBDb250ZW50VW5pdDtcbiAgcHJpdmF0ZSBjYXJkVHlwZTogJ3FhJyB8ICdjbG96ZScgPSAncWEnO1xuICBcbiAgLy8gUSZBIFx1NUI1N1x1NkJCNVxuICBwcml2YXRlIHF1ZXN0aW9uOiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBhbnN3ZXI6IHN0cmluZyA9ICcnO1xuICBcbiAgLy8gQ2xvemUgXHU1QjU3XHU2QkI1XG4gIHByaXZhdGUgY2xvemVUZXh0OiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBzZWxlY3RlZFJhbmdlczogeyBzdGFydDogbnVtYmVyOyBlbmQ6IG51bWJlcjsgdGV4dDogc3RyaW5nIH1bXSA9IFtdO1xuICBcbiAgcHJpdmF0ZSBvblNhdmU6ICgpID0+IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgYXBwOiBBcHAsXG4gICAgcHJpdmF0ZSBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luLFxuICAgIGNvbnRlbnRVbml0OiBDb250ZW50VW5pdCxcbiAgICBvblNhdmU6ICgpID0+IHZvaWRcbiAgKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLmNvbnRlbnRVbml0ID0gY29udGVudFVuaXQ7XG4gICAgdGhpcy5vblNhdmUgPSBvblNhdmU7XG4gICAgXG4gICAgLy8gXHU5RUQ4XHU4QkE0XHU0RjdGXHU3NTI4XHU1MTg1XHU1QkI5XHU0RjVDXHU0RTNBXHU3QjU0XHU2ODQ4L1x1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1NjU4N1x1NjcyQ1xuICAgIHRoaXMuYW5zd2VyID0gY29udGVudFVuaXQuY29udGVudDtcbiAgICB0aGlzLmNsb3plVGV4dCA9IGNvbnRlbnRVbml0LmNvbnRlbnQ7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgXG4gICAgY29udGVudEVsLmFkZENsYXNzKCdmbGFzaGNhcmQtY3JlYXRlLW1vZGFsJyk7XG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0NyZWF0ZSBGbGFzaGNhcmQnIH0pO1xuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU2RTkwXHU1MTg1XHU1QkI5XG4gICAgY29uc3QgY29udGVudFByZXZpZXcgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnY29udGVudC1wcmV2aWV3JyB9KTtcbiAgICBjb250ZW50UHJldmlldy5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdTb3VyY2UgQ29udGVudDonIH0pO1xuICAgIGNvbnRlbnRQcmV2aWV3LmNyZWF0ZUVsKCdibG9ja3F1b3RlJywgeyB0ZXh0OiB0aGlzLmNvbnRlbnRVbml0LmNvbnRlbnQgfSk7XG5cbiAgICAvLyBcdTUzNjFcdTcyNDdcdTdDN0JcdTU3OEJcdTkwMDlcdTYyRTlcbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAuc2V0TmFtZSgnQ2FyZCBUeXBlJylcbiAgICAgIC5zZXREZXNjKCdDaG9vc2UgdGhlIHR5cGUgb2YgZmxhc2hjYXJkJylcbiAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgLmFkZE9wdGlvbigncWEnLCAnXHVEODNEXHVEQ0REIFF1ZXN0aW9uICYgQW5zd2VyJylcbiAgICAgICAgICAuYWRkT3B0aW9uKCdjbG96ZScsICdcdTI3MEZcdUZFMEYgQ2xvemUgRGVsZXRpb24nKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLmNhcmRUeXBlKVxuICAgICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNhcmRUeXBlID0gdmFsdWUgYXMgJ3FhJyB8ICdjbG96ZSc7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hDYXJkSW5wdXRzKCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIC8vIFx1NTM2MVx1NzI0N1x1OEY5M1x1NTE2NVx1NTMzQVx1NTdERlx1NUJCOVx1NTY2OFxuICAgIHRoaXMuY2FyZElucHV0Q29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2NhcmQtaW5wdXQtY29udGFpbmVyJyB9KTtcbiAgICB0aGlzLnJlZnJlc2hDYXJkSW5wdXRzKCk7XG5cbiAgICAvLyBcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG5cbiAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblxuICAgIGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAnQ3JlYXRlIEZsYXNoY2FyZCcsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIHNhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnNhdmVGbGFzaGNhcmQoKSk7XG5cbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBjYXJkSW5wdXRDb250YWluZXI6IEhUTUxFbGVtZW50O1xuXG4gIHByaXZhdGUgcmVmcmVzaENhcmRJbnB1dHMoKSB7XG4gICAgdGhpcy5jYXJkSW5wdXRDb250YWluZXIuZW1wdHkoKTtcblxuICAgIGlmICh0aGlzLmNhcmRUeXBlID09PSAncWEnKSB7XG4gICAgICB0aGlzLnJlbmRlclFBSW5wdXRzKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVuZGVyQ2xvemVJbnB1dHMoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclFBSW5wdXRzKCkge1xuICAgIC8vIFx1OTVFRVx1OTg5OFx1OEY5M1x1NTE2NVxuICAgIG5ldyBTZXR0aW5nKHRoaXMuY2FyZElucHV0Q29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ1F1ZXN0aW9uIChGcm9udCknKVxuICAgICAgLnNldERlc2MoJ1doYXQgcXVlc3Rpb24gc2hvdWxkIHRoaXMgY2FyZCBhc2s/JylcbiAgICAgIC5hZGRUZXh0QXJlYSh0ZXh0ID0+IHtcbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgeW91ciBxdWVzdGlvbi4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMucXVlc3Rpb24pXG4gICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucXVlc3Rpb24gPSB2YWx1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgdGV4dC5pbnB1dEVsLnJvd3MgPSAzO1xuICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICB9KTtcblxuICAgIC8vIFx1N0I1NFx1Njg0OFx1OEY5M1x1NTE2NVxuICAgIG5ldyBTZXR0aW5nKHRoaXMuY2FyZElucHV0Q29udGFpbmVyKVxuICAgICAgLnNldE5hbWUoJ0Fuc3dlciAoQmFjayknKVxuICAgICAgLnNldERlc2MoJ1doYXQgaXMgdGhlIGNvcnJlY3QgYW5zd2VyPycpXG4gICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB7XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHRoZSBhbnN3ZXIuLi4nKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLmFuc3dlcilcbiAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5hbnN3ZXIgPSB2YWx1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgdGV4dC5pbnB1dEVsLnJvd3MgPSAzO1xuICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICB9KTtcblxuICAgIC8vIFx1NjNEMFx1NzkzQVx1RkYxQVx1NTNFRlx1NEVFNVx1NEY3Rlx1NzUyOFx1NTM5Rlx1NTE4NVx1NUJCOVxuICAgIGNvbnN0IGhpbnQgPSB0aGlzLmNhcmRJbnB1dENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdpbnB1dC1oaW50JyB9KTtcbiAgICBoaW50LmNyZWF0ZUVsKCdzbWFsbCcsIHsgXG4gICAgICB0ZXh0OiAnXHVEODNEXHVEQ0ExIFRpcDogWW91IGNhbiB1c2UgdGhlIHNvdXJjZSBjb250ZW50IGFzIHRoZSBhbnN3ZXIsIG9yIHdyaXRlIHlvdXIgb3duLidcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyQ2xvemVJbnB1dHMoKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jYXJkSW5wdXRDb250YWluZXI7XG5cbiAgICBjb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQ2xvemUgRGVsZXRpb24nIH0pO1xuICAgIGNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiAnU2VsZWN0IHRleHQgdG8gaGlkZSAoY2xvemUgZGVsZXRpb24pLiBDbGljayBvbiB3b3JkcyB0byB0b2dnbGUgc2VsZWN0aW9uLicsXG4gICAgICBjbHM6ICdjbG96ZS1pbnN0cnVjdGlvbidcbiAgICB9KTtcblxuICAgIC8vIFx1NTNFRlx1OTAwOVx1NjJFOVx1NzY4NFx1NjU4N1x1NjcyQ1x1NTMzQVx1NTdERlxuICAgIGNvbnN0IHRleHRDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2xvemUtdGV4dC1jb250YWluZXInIH0pO1xuICAgIHRoaXMucmVuZGVyU2VsZWN0YWJsZVRleHQodGV4dENvbnRhaW5lcik7XG5cbiAgICAvLyBcdTkwMDlcdTRFMkRcdTc2ODRcdTUyMjBcdTk2NjRcdTk4NzlcdTUyMTdcdTg4NjhcbiAgICBpZiAodGhpcy5zZWxlY3RlZFJhbmdlcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBzZWxlY3RlZExpc3QgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc2VsZWN0ZWQtZGVsZXRpb25zJyB9KTtcbiAgICAgIHNlbGVjdGVkTGlzdC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdTZWxlY3RlZCBEZWxldGlvbnM6JyB9KTtcbiAgICAgIFxuICAgICAgdGhpcy5zZWxlY3RlZFJhbmdlcy5mb3JFYWNoKChyYW5nZSwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHNlbGVjdGVkTGlzdC5jcmVhdGVEaXYoeyBjbHM6ICdkZWxldGlvbi1pdGVtJyB9KTtcbiAgICAgICAgaXRlbS5jcmVhdGVTcGFuKHsgdGV4dDogYCR7aW5kZXggKyAxfS4gYCB9KTtcbiAgICAgICAgaXRlbS5jcmVhdGVTcGFuKHsgXG4gICAgICAgICAgdGV4dDogcmFuZ2UudGV4dCxcbiAgICAgICAgICBjbHM6ICdkZWxldGlvbi10ZXh0J1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlbW92ZUJ0biA9IGl0ZW0uY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICB0ZXh0OiAnXHUwMEQ3JyxcbiAgICAgICAgICBjbHM6ICdyZW1vdmUtZGVsZXRpb24tYnRuJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmVtb3ZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSYW5nZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICB0aGlzLnJlZnJlc2hDYXJkSW5wdXRzKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU5ODg0XHU4OUM4XG4gICAgY29uc3QgcHJldmlldyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjbG96ZS1wcmV2aWV3JyB9KTtcbiAgICBwcmV2aWV3LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1ByZXZpZXc6JyB9KTtcbiAgICBwcmV2aWV3LmNyZWF0ZURpdih7IFxuICAgICAgdGV4dDogdGhpcy5nZW5lcmF0ZUNsb3plUHJldmlldygpLFxuICAgICAgY2xzOiAncHJldmlldy10ZXh0J1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTZWxlY3RhYmxlVGV4dChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3Qgd29yZHMgPSB0aGlzLmNsb3plVGV4dC5zcGxpdCgvKFxccyspLyk7IC8vIFx1NEZERFx1NzU1OVx1N0E3QVx1NjgzQ1xuICAgIGxldCBjdXJyZW50SW5kZXggPSAwO1xuXG4gICAgd29yZHMuZm9yRWFjaCh3b3JkID0+IHtcbiAgICAgIGNvbnN0IHdvcmRTdGFydCA9IGN1cnJlbnRJbmRleDtcbiAgICAgIGNvbnN0IHdvcmRFbmQgPSBjdXJyZW50SW5kZXggKyB3b3JkLmxlbmd0aDtcblxuICAgICAgaWYgKHdvcmQudHJpbSgpKSB7XG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NURGMlx1OTAwOVx1NEUyRFxuICAgICAgICBjb25zdCBpc1NlbGVjdGVkID0gdGhpcy5zZWxlY3RlZFJhbmdlcy5zb21lKFxuICAgICAgICAgIHJhbmdlID0+IHJhbmdlLnN0YXJ0ID09PSB3b3JkU3RhcnQgJiYgcmFuZ2UuZW5kID09PSB3b3JkRW5kXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3Qgc3BhbiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgICB0ZXh0OiB3b3JkLFxuICAgICAgICAgIGNsczogaXNTZWxlY3RlZCA/ICdjbG96ZS13b3JkIHNlbGVjdGVkJyA6ICdjbG96ZS13b3JkJ1xuICAgICAgICB9KTtcblxuICAgICAgICBzcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgIHRoaXMudG9nZ2xlV29yZFNlbGVjdGlvbih3b3JkU3RhcnQsIHdvcmRFbmQsIHdvcmQpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogd29yZCB9KTtcbiAgICAgIH1cblxuICAgICAgY3VycmVudEluZGV4ID0gd29yZEVuZDtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgdG9nZ2xlV29yZFNlbGVjdGlvbihzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciwgdGV4dDogc3RyaW5nKSB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLnNlbGVjdGVkUmFuZ2VzLmZpbmRJbmRleChcbiAgICAgIHJhbmdlID0+IHJhbmdlLnN0YXJ0ID09PSBzdGFydCAmJiByYW5nZS5lbmQgPT09IGVuZFxuICAgICk7XG5cbiAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgLy8gXHU1M0Q2XHU2RDg4XHU5MDA5XHU2MkU5XG4gICAgICB0aGlzLnNlbGVjdGVkUmFuZ2VzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OTAwOVx1NjJFOVxuICAgICAgdGhpcy5zZWxlY3RlZFJhbmdlcy5wdXNoKHsgc3RhcnQsIGVuZCwgdGV4dCB9KTtcbiAgICAgIC8vIFx1NjMwOVx1NEY0RFx1N0Y2RVx1NjM5Mlx1NUU4RlxuICAgICAgdGhpcy5zZWxlY3RlZFJhbmdlcy5zb3J0KChhLCBiKSA9PiBhLnN0YXJ0IC0gYi5zdGFydCk7XG4gICAgfVxuXG4gICAgdGhpcy5yZWZyZXNoQ2FyZElucHV0cygpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUNsb3plUHJldmlldygpOiBzdHJpbmcge1xuICAgIGxldCBwcmV2aWV3ID0gdGhpcy5jbG96ZVRleHQ7XG4gICAgY29uc3Qgc29ydGVkID0gWy4uLnRoaXMuc2VsZWN0ZWRSYW5nZXNdLnNvcnQoKGEsIGIpID0+IGIuc3RhcnQgLSBhLnN0YXJ0KTtcblxuICAgIGZvciAoY29uc3QgcmFuZ2Ugb2Ygc29ydGVkKSB7XG4gICAgICBjb25zdCBiZWZvcmUgPSBwcmV2aWV3LnN1YnN0cmluZygwLCByYW5nZS5zdGFydCk7XG4gICAgICBjb25zdCBhZnRlciA9IHByZXZpZXcuc3Vic3RyaW5nKHJhbmdlLmVuZCk7XG4gICAgICBwcmV2aWV3ID0gYCR7YmVmb3JlfVsuLi5dJHthZnRlcn1gO1xuICAgIH1cblxuICAgIHJldHVybiBwcmV2aWV3O1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzYXZlRmxhc2hjYXJkKCkge1xuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy5jYXJkVHlwZSA9PT0gJ3FhJykge1xuICAgICAgICAvLyBcdTlBOENcdThCQzFcdThGOTNcdTUxNjVcbiAgICAgICAgaWYgKCF0aGlzLnF1ZXN0aW9uLnRyaW0oKSkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBlbnRlciBhIHF1ZXN0aW9uJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5hbnN3ZXIudHJpbSgpKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGVudGVyIGFuIGFuc3dlcicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1OTVFRVx1N0I1NFx1NTM2MVxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmNyZWF0ZVFBQ2FyZChcbiAgICAgICAgICB0aGlzLmNvbnRlbnRVbml0LmlkLFxuICAgICAgICAgIHRoaXMucXVlc3Rpb24sXG4gICAgICAgICAgdGhpcy5hbnN3ZXJcbiAgICAgICAgKTtcblxuICAgICAgICBuZXcgTm90aWNlKCdRJkEgZmxhc2hjYXJkIGNyZWF0ZWQhJyk7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1OUE4Q1x1OEJDMVx1OEY5M1x1NTE2NVxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFJhbmdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2Ugc2VsZWN0IGF0IGxlYXN0IG9uZSB3b3JkIHRvIGhpZGUnKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdTUzNjFcbiAgICAgICAgY29uc3QgZGVsZXRpb25zID0gdGhpcy5zZWxlY3RlZFJhbmdlcy5tYXAocmFuZ2UgPT4gKHtcbiAgICAgICAgICBpbmRleDogcmFuZ2Uuc3RhcnQsXG4gICAgICAgICAgYW5zd2VyOiByYW5nZS50ZXh0XG4gICAgICAgIH0pKTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmNyZWF0ZUNsb3plQ2FyZChcbiAgICAgICAgICB0aGlzLmNvbnRlbnRVbml0LmlkLFxuICAgICAgICAgIHRoaXMuY2xvemVUZXh0LFxuICAgICAgICAgIGRlbGV0aW9uc1xuICAgICAgICApO1xuXG4gICAgICAgIG5ldyBOb3RpY2UoJ0Nsb3plIGZsYXNoY2FyZCBjcmVhdGVkIScpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB0aGlzLm9uU2F2ZSgpO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGZsYXNoY2FyZDonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdFcnJvciBjcmVhdGluZyBmbGFzaGNhcmQnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgLmZsYXNoY2FyZC1jcmVhdGUtbW9kYWwge1xuICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICBtYXgtd2lkdGg6IDYwMHB4O1xuICAgICAgfVxuXG4gICAgICAuY29udGVudC1wcmV2aWV3IHtcbiAgICAgICAgbWFyZ2luOiAyMHB4IDA7XG4gICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgfVxuXG4gICAgICAuY29udGVudC1wcmV2aWV3IGgzIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuY29udGVudC1wcmV2aWV3IGJsb2NrcXVvdGUge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIGJvcmRlci1sZWZ0OiAzcHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1pbnB1dC1jb250YWluZXIge1xuICAgICAgICBtYXJnaW46IDIwcHggMDtcbiAgICAgIH1cblxuICAgICAgLmlucHV0LWhpbnQge1xuICAgICAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAvKiBDbG96ZSBcdTY4MzdcdTVGMEYgKi9cbiAgICAgIC5jbG96ZS1pbnN0cnVjdGlvbiB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgIH1cblxuICAgICAgLmNsb3plLXRleHQtY29udGFpbmVyIHtcbiAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgIGN1cnNvcjogZGVmYXVsdDtcbiAgICAgIH1cblxuICAgICAgLmNsb3plLXdvcmQge1xuICAgICAgICBwYWRkaW5nOiAycHggNHB4O1xuICAgICAgICBtYXJnaW46IDAgMXB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG5cbiAgICAgIC5jbG96ZS13b3JkOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5jbG96ZS13b3JkLnNlbGVjdGVkIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuc2VsZWN0ZWQtZGVsZXRpb25zIHtcbiAgICAgICAgbWFyZ2luOiAxNXB4IDA7XG4gICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgfVxuXG4gICAgICAuc2VsZWN0ZWQtZGVsZXRpb25zIGg0IHtcbiAgICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuZGVsZXRpb24taXRlbSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBwYWRkaW5nOiA2cHggMTBweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC5kZWxldGlvbi10ZXh0IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICB9XG5cbiAgICAgIC5yZW1vdmUtZGVsZXRpb24tYnRuIHtcbiAgICAgICAgcGFkZGluZzogMnB4IDhweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvcik7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICBsaW5lLWhlaWdodDogMTtcbiAgICAgIH1cblxuICAgICAgLnJlbW92ZS1kZWxldGlvbi1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtcHJldmlldyB7XG4gICAgICAgIG1hcmdpbjogMTVweCAwO1xuICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgIH1cblxuICAgICAgLmNsb3plLXByZXZpZXcgaDQge1xuICAgICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5wcmV2aWV3LXRleHQge1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjY7XG4gICAgICB9XG5cbiAgICAgIC5tb2RhbC1idXR0b24tY29udGFpbmVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgfVxuXG4gICAgICAubW9kYWwtYnV0dG9uLWNvbnRhaW5lciBidXR0b24ge1xuICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG4gICAgYDtcblxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59IiwgIi8vIG92ZXJ2aWV3IFZpZXcudHNcbmltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBURmlsZSwgTWVudSwgTW9kYWwsIEFwcCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZnJvbSAnLi4vLi4vbWFpbic7XG5pbXBvcnQgeyBDb250ZW50VW5pdCB9IGZyb20gJy4uLy4uL2NvcmUvRGF0YU1hbmFnZXInO1xuaW1wb3J0IHsgUXVpY2tGbGFzaGNhcmRDcmVhdG9yIH0gZnJvbSAnLi4vLi4vY29yZS9RdWlja0ZsYXNoY2FyZENyZWF0b3InO1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX09WRVJWSUVXID0gJ2xlYXJuaW5nLXN5c3RlbS1vdmVydmlldyc7XG5cbmV4cG9ydCBjbGFzcyBPdmVydmlld1ZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW47XG4vLyAgIHByaXZhdGUgY29udGVudEVsOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSBncm91cEJ5OiAnZmlsZScgfCAndGFnJyB8ICdkYXRlJyA9ICdmaWxlJztcbiAgcHJpdmF0ZSBzZWFyY2hRdWVyeTogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgcXVpY2tDcmVhdG9yOiBRdWlja0ZsYXNoY2FyZENyZWF0b3I7XG4gIHByaXZhdGUgYmF0Y2hNb2RlOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgc2VsZWN0ZWRVbml0SWRzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcblxuICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luKSB7XG4gICAgc3VwZXIobGVhZik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy5xdWlja0NyZWF0b3IgPSBuZXcgUXVpY2tGbGFzaGNhcmRDcmVhdG9yKHBsdWdpbik7XG4gIH1cblxuICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBWSUVXX1RZUEVfT1ZFUlZJRVc7XG4gIH1cblxuICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnTGVhcm5pbmcgT3ZlcnZpZXcnO1xuICB9XG5cbiAgZ2V0SWNvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiAnbGF5b3V0LWxpc3QnO1xuICB9XG5cbiAgYXN5bmMgb25PcGVuKCkge1xuICAgIFxuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICB0aGlzLmNyZWF0ZVRvb2xiYXIoY29udGFpbmVyKTtcbiAgICB0aGlzLmNvbnRlbnRFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdsZWFybmluZy1zeXN0ZW0tY29udGVudCcgfSk7XG4gICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gICAgdGhpcy5hZGRTdHlsZXMoKTtcbiAgfVxuXG4gIGFzeW5jIG9uQ2xvc2UoKSB7fVxuXG4gIC8vIFx1NkRGQlx1NTJBMFx1NTIzMCBPdmVydmlld1ZpZXcgXHU3QzdCXHU0RTJEXG5zY3JvbGxUb0ZpbGUoZmlsZVBhdGg6IHN0cmluZykge1xuICAgIC8vIHRoaXMuc2VsZWN0ZWRGaWxlID0gZmlsZVBhdGg7IC8vIFx1NTk4Mlx1Njc5Q1x1NEY2MFx1NjcwOVx1OEZEOVx1NEUyQVx1NUM1RVx1NjAyN1xuICAgIFxuICAgIC8vIFx1NkVEQVx1NTJBOFx1NTIzMFx1NUJGOVx1NUU5NFx1NzY4NFx1NjU4N1x1NEVGNlx1N0VDNFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgZmlsZUdyb3VwcyA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWxlLWdyb3VwJyk7XG4gICAgICBmaWxlR3JvdXBzLmZvckVhY2goKGdyb3VwKSA9PiB7XG4gICAgICAgIGNvbnN0IGhlYWRlciA9IGdyb3VwLnF1ZXJ5U2VsZWN0b3IoJy5ncm91cC1oZWFkZXInKTtcbiAgICAgICAgaWYgKGhlYWRlcj8udGV4dENvbnRlbnQ/LmluY2x1ZGVzKGZpbGVQYXRoLnNwbGl0KCcvJykucG9wKCk/LnJlcGxhY2UoJy5tZCcsICcnKSB8fCAnJykpIHtcbiAgICAgICAgICBncm91cC5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sIDEwMCk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVRvb2xiYXIoY29udGFpbmVyOiBFbGVtZW50KSB7XG4gICAgY29uc3QgdG9vbGJhciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdsZWFybmluZy1zeXN0ZW0tdG9vbGJhcicgfSk7XG5cbiAgICBjb25zdCBzZWFyY2hDb250YWluZXIgPSB0b29sYmFyLmNyZWF0ZURpdih7IGNsczogJ3NlYXJjaC1jb250YWluZXInIH0pO1xuICAgIGNvbnN0IHNlYXJjaElucHV0ID0gc2VhcmNoQ29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIHBsYWNlaG9sZGVyOiAnU2VhcmNoIGNvbnRlbnQuLi4nLFxuICAgICAgY2xzOiAnc2VhcmNoLWlucHV0J1xuICAgIH0pO1xuXG4gICAgc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgdGhpcy5zZWFyY2hRdWVyeSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgZ3JvdXBDb250YWluZXIgPSB0b29sYmFyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLWNvbnRhaW5lcicgfSk7XG4gICAgZ3JvdXBDb250YWluZXIuY3JlYXRlU3Bhbih7IHRleHQ6ICdHcm91cCBieTogJywgY2xzOiAnZ3JvdXAtbGFiZWwnIH0pO1xuXG4gICAgY29uc3QgZ3JvdXBTZWxlY3QgPSBncm91cENvbnRhaW5lci5jcmVhdGVFbCgnc2VsZWN0JywgeyBjbHM6ICdncm91cC1zZWxlY3QnIH0pO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBbXG4gICAgICB7IHZhbHVlOiAnZmlsZScsIGxhYmVsOiAnRmlsZScgfSxcbiAgICAgIHsgdmFsdWU6ICd0YWcnLCBsYWJlbDogJ1RhZycgfSxcbiAgICAgIHsgdmFsdWU6ICdkYXRlJywgbGFiZWw6ICdEYXRlJyB9XG4gICAgXTtcblxuICAgIG9wdGlvbnMuZm9yRWFjaChvcHQgPT4ge1xuICAgICAgY29uc3Qgb3B0aW9uID0gZ3JvdXBTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHtcbiAgICAgICAgdmFsdWU6IG9wdC52YWx1ZSxcbiAgICAgICAgdGV4dDogb3B0LmxhYmVsXG4gICAgICB9KTtcbiAgICAgIGlmIChvcHQudmFsdWUgPT09IHRoaXMuZ3JvdXBCeSkge1xuICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZ3JvdXBTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgIHRoaXMuZ3JvdXBCeSA9IChlLnRhcmdldCBhcyBIVE1MU2VsZWN0RWxlbWVudCkudmFsdWUgYXMgYW55O1xuICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfSk7XG5cbiAgICAvLyBcdTYyNzlcdTkxQ0ZcdTY0Q0RcdTRGNUNcdTYzMDlcdTk0QUVcdUZGMDhcdTc5RkJcdTUyMzBcdTUyNERcdTk3NjJcdUZGMDlcbiAgICBjb25zdCBiYXRjaEFjdGlvbnMgPSB0b29sYmFyLmNyZWF0ZURpdih7IGNsczogJ2JhdGNoLWFjdGlvbnMtb3ZlcnZpZXcnIH0pO1xuICAgIFxuICAgIGNvbnN0IGJhdGNoTW9kZUJ0biA9IGJhdGNoQWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogdGhpcy5iYXRjaE1vZGUgPyAnXHUyNzEzIERvbmUnIDogJ1x1MjYxMCBCYXRjaCBNb2RlJyxcbiAgICAgIGNsczogJ2JhdGNoLW1vZGUtYnRuJ1xuICAgIH0pO1xuICAgIGJhdGNoTW9kZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuYmF0Y2hNb2RlID0gIXRoaXMuYmF0Y2hNb2RlO1xuICAgICAgaWYgKCF0aGlzLmJhdGNoTW9kZSkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5jbGVhcigpO1xuICAgICAgfVxuICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5iYXRjaE1vZGUpIHtcbiAgICAgIC8vIFx1NTE2OFx1OTAwOS9cdTUzRDZcdTZEODhcdTUxNjhcdTkwMDlcdTYzMDlcdTk0QUVcbiAgICAgIGNvbnN0IHNlbGVjdEFsbEJ0biA9IGJhdGNoQWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICB0ZXh0OiB0aGlzLmlzQWxsU2VsZWN0ZWQoKSA/ICdcdTI2MTEgRGVzZWxlY3QgQWxsJyA6ICdcdTI2MTAgU2VsZWN0IEFsbCcsXG4gICAgICAgIGNsczogJ3NlbGVjdC1hbGwtYnRuJ1xuICAgICAgfSk7XG4gICAgICBzZWxlY3RBbGxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMudG9nZ2xlU2VsZWN0QWxsKCk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgYmF0Y2hEZWxldGVCdG4gPSBiYXRjaEFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogYFx1RDgzRFx1REREMVx1RkUwRiBEZWxldGUgKCR7dGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZX0pYCxcbiAgICAgICAgY2xzOiAnYmF0Y2gtZGVsZXRlLWJ0bidcbiAgICAgIH0pO1xuICAgICAgYmF0Y2hEZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuYmF0Y2hEZWxldGVOb3RlcygpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGJhdGNoQ3JlYXRlQnRuID0gYmF0Y2hBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIHRleHQ6IGBcdTI2QTEgQ3JlYXRlIENhcmRzICgke3RoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemV9KWAsXG4gICAgICAgIGNsczogJ2JhdGNoLWNyZWF0ZS1jYXJkcy1idG4nXG4gICAgICB9KTtcbiAgICAgIGJhdGNoQ3JlYXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLmJhdGNoQ3JlYXRlRmxhc2hjYXJkcygpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGJhdGNoQ3JlYXRlQWxsQnRuID0gYmF0Y2hBY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIHRleHQ6ICdcdTI2QTEgQmF0Y2ggQ3JlYXRlIENhcmRzJyxcbiAgICAgICAgY2xzOiAnYmF0Y2gtY3JlYXRlLWJ0bidcbiAgICAgIH0pO1xuICAgICAgYmF0Y2hDcmVhdGVBbGxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnNob3dCYXRjaENyZWF0ZU1vZGFsKCkpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlZnJlc2hCdG4gPSB0b29sYmFyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnXHUyN0YzJyxcbiAgICAgIGNsczogJ3JlZnJlc2gtYnRuJ1xuICAgIH0pO1xuICAgIHJlZnJlc2hCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnJlZnJlc2goKSk7XG5cbiAgICBjb25zdCBzdGF0cyA9IHRvb2xiYXIuY3JlYXRlRGl2KHsgY2xzOiAnc3RhdHMtY29udGFpbmVyJyB9KTtcbiAgICBjb25zdCB0b3RhbENvdW50ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0QWxsQ29udGVudFVuaXRzKCkubGVuZ3RoO1xuICAgIHN0YXRzLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgVG90YWw6ICR7dG90YWxDb3VudH1gLCBjbHM6ICdzdGF0cy10ZXh0JyB9KTtcbiAgfVxuXG4gIGFzeW5jIHJlZnJlc2goKSB7XG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblxuICAgIGxldCB1bml0cyA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldEFsbENvbnRlbnRVbml0cygpO1xuXG4gICAgaWYgKHRoaXMuc2VhcmNoUXVlcnkpIHtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5zZWFyY2hRdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgICAgdW5pdHMgPSB1bml0cy5maWx0ZXIodW5pdCA9PlxuICAgICAgICB1bml0LmNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkgfHxcbiAgICAgICAgdW5pdC5zb3VyY2UuZmlsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSB8fFxuICAgICAgICB1bml0Lm1ldGFkYXRhLnRhZ3Muc29tZSh0YWcgPT4gdGFnLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoe1xuICAgICAgICB0ZXh0OiB0aGlzLnNlYXJjaFF1ZXJ5ID8gJ05vIHJlc3VsdHMgZm91bmQnIDogJ05vIGNvbnRlbnQgZXh0cmFjdGVkIHlldCcsXG4gICAgICAgIGNsczogJ2VtcHR5LXN0YXRlJ1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3dpdGNoICh0aGlzLmdyb3VwQnkpIHtcbiAgICAgIGNhc2UgJ2ZpbGUnOlxuICAgICAgICB0aGlzLnJlbmRlckJ5RmlsZSh1bml0cyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndGFnJzpcbiAgICAgICAgdGhpcy5yZW5kZXJCeVRhZyh1bml0cyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgIHRoaXMucmVuZGVyQnlEYXRlKHVuaXRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJCeUZpbGUodW5pdHM6IENvbnRlbnRVbml0W10pIHtcbiAgICBjb25zdCBncm91cGVkID0gbmV3IE1hcDxzdHJpbmcsIENvbnRlbnRVbml0W10+KCk7XG5cbiAgICB1bml0cy5mb3JFYWNoKHVuaXQgPT4ge1xuICAgICAgaWYgKCFncm91cGVkLmhhcyh1bml0LnNvdXJjZS5maWxlKSkge1xuICAgICAgICBncm91cGVkLnNldCh1bml0LnNvdXJjZS5maWxlLCBbXSk7XG4gICAgICB9XG4gICAgICBncm91cGVkLmdldCh1bml0LnNvdXJjZS5maWxlKSEucHVzaCh1bml0KTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHNvcnRlZEZpbGVzID0gQXJyYXkuZnJvbShncm91cGVkLmtleXMoKSkuc29ydCgpO1xuICAgIHNvcnRlZEZpbGVzLmZvckVhY2goZmlsZVBhdGggPT4ge1xuICAgICAgY29uc3QgZmlsZVVuaXRzID0gZ3JvdXBlZC5nZXQoZmlsZVBhdGgpITtcbiAgICAgIHRoaXMucmVuZGVyRmlsZUdyb3VwKGZpbGVQYXRoLCBmaWxlVW5pdHMpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJGaWxlR3JvdXAoZmlsZVBhdGg6IHN0cmluZywgdW5pdHM6IENvbnRlbnRVbml0W10pIHtcbiAgICBjb25zdCBncm91cENvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2ZpbGUtZ3JvdXAnIH0pO1xuXG4gICAgY29uc3QgaGVhZGVyID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtaGVhZGVyJyB9KTtcbiAgICBjb25zdCBmaWxlTmFtZSA9IGZpbGVQYXRoLnNwbGl0KCcvJykucG9wKCk/LnJlcGxhY2UoJy5tZCcsICcnKSB8fCBmaWxlUGF0aDtcbiAgICBjb25zdCB0aXRsZUVsID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLXRpdGxlJyB9KTtcbiAgICB0aXRsZUVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnXHVEODNEXHVEQ0M0ICcsIGNsczogJ2dyb3VwLWljb24nIH0pO1xuICAgIHRpdGxlRWwuY3JlYXRlU3Bhbih7IHRleHQ6IGZpbGVOYW1lLCBjbHM6ICdncm91cC1uYW1lJyB9KTtcblxuICAgIGhlYWRlci5jcmVhdGVTcGFuKHsgdGV4dDogYCR7dW5pdHMubGVuZ3RofWAsIGNsczogJ2NvdW50LWJhZGdlJyB9KTtcblxuICAgIGNvbnN0IGNvbGxhcHNlQnRuID0gaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnXHUyNUJDJywgY2xzOiAnY29sbGFwc2UtYnRuJyB9KTtcblxuICAgIC8vIFx1NjYzRVx1NzkzQVx1NjU4N1x1NEVGNlx1NjI3OVx1NkNFOFxuICAgIGNvbnN0IGZpbGVBbm5vdGF0aW9ucyA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldEZpbGVBbm5vdGF0aW9ucyhmaWxlUGF0aCk7XG4gICAgaWYgKGZpbGVBbm5vdGF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBmaWxlQW5ub3RhdGlvbkRpc3BsYXkgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoeyBcbiAgICAgICAgY2xzOiAnZmlsZS1hbm5vdGF0aW9uLWRpc3BsYXknIFxuICAgICAgfSk7XG4gICAgICBmaWxlQW5ub3RhdGlvbnMuZm9yRWFjaChhbm4gPT4ge1xuICAgICAgICBjb25zdCBhbm5FbCA9IGZpbGVBbm5vdGF0aW9uRGlzcGxheS5jcmVhdGVEaXYoeyBjbHM6ICdmaWxlLWFubm90YXRpb24taXRlbScgfSk7XG4gICAgICAgIGFubkVsLmNyZWF0ZUVsKCdzdHJvbmcnLCB7IHRleHQ6ICdcdUQ4M0RcdURDQ0MgJyB9KTtcbiAgICAgICAgYW5uRWwuY3JlYXRlU3Bhbih7IHRleHQ6IGFubi5jb250ZW50IH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgY29udGVudENvbnRhaW5lciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLWNvbnRlbnQnIH0pO1xuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICB0aGlzLnJlbmRlckNvbnRlbnRVbml0KGNvbnRlbnRDb250YWluZXIsIHVuaXQpO1xuICAgIH0pO1xuXG4gICAgbGV0IGlzQ29sbGFwc2VkID0gZmFsc2U7XG4gICAgY29sbGFwc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGlzQ29sbGFwc2VkID0gIWlzQ29sbGFwc2VkO1xuICAgICAgY29udGVudENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gaXNDb2xsYXBzZWQgPyAnbm9uZScgOiAnYmxvY2snO1xuICAgICAgY29sbGFwc2VCdG4udGV4dENvbnRlbnQgPSBpc0NvbGxhcHNlZCA/ICdcdTI1QjYnIDogJ1x1MjVCQyc7XG4gICAgfSk7XG5cbiAgICBoZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJDb250ZW50VW5pdChjb250YWluZXI6IEhUTUxFbGVtZW50LCB1bml0OiBDb250ZW50VW5pdCkge1xuICAgIGNvbnN0IGNhcmQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY29udGVudC1jYXJkJyB9KTtcblxuICAgIC8vIFx1NjI3OVx1OTFDRlx1OTAwOVx1NjJFOVx1NkEyMVx1NUYwRlx1RkYxQVx1NkRGQlx1NTJBMGNoZWNrYm94XG4gICAgaWYgKHRoaXMuYmF0Y2hNb2RlKSB7XG4gICAgICBjb25zdCBjaGVja2JveCA9IGNhcmQuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgICBjbHM6ICdiYXRjaC1jaGVja2JveCdcbiAgICAgIH0pO1xuICAgICAgY2hlY2tib3guc2V0QXR0cmlidXRlKCdkYXRhLXVuaXQtaWQnLCB1bml0LmlkKTtcbiAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0aGlzLnNlbGVjdGVkVW5pdElkcy5oYXModW5pdC5pZCk7XG4gICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgICBpZiAoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQpIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5hZGQodW5pdC5pZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuZGVsZXRlKHVuaXQuaWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlQmF0Y2hCdXR0b25zKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50QXJlYSA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1jb250ZW50JyB9KTtcbiAgICBjb25zdCB0eXBlSWNvbiA9IHRoaXMuZ2V0VHlwZUljb24odW5pdC50eXBlKTtcbiAgICBjb250ZW50QXJlYS5jcmVhdGVTcGFuKHsgdGV4dDogdHlwZUljb24gKyAnICcsIGNsczogJ3R5cGUtaWNvbicgfSk7XG4gICAgXG4gICAgY29uc3QgY29udGVudFRleHQgPSBjb250ZW50QXJlYS5jcmVhdGVTcGFuKHsgXG4gICAgICB0ZXh0OiB1bml0LmNvbnRlbnQsIFxuICAgICAgY2xzOiAnY29udGVudC10ZXh0IGNsaWNrYWJsZS1jb250ZW50J1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFx1NzBCOVx1NTFGQlx1NTE4NVx1NUJCOVx1NUM1NVx1NUYwMFx1NjI3OVx1NkNFOFx1OEY5M1x1NTE2NVxuICAgIGNvbnRlbnRUZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLnNob3dBbm5vdGF0aW9uSW5wdXQoY2FyZCwgdW5pdCwgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk/LmNvbnRlbnQpO1xuICAgIH0pO1xuXG4gICAgaWYgKHVuaXQuYW5ub3RhdGlvbklkKSB7XG4gICAgICBjb250ZW50QXJlYS5jcmVhdGVTcGFuKHtcbiAgICAgICAgdGV4dDogJ1x1RDgzRFx1RENERCcsXG4gICAgICAgIGNsczogJ2Fubm90YXRpb24tYmFkZ2UgaGFzLWFubm90YXRpb24nLFxuICAgICAgICBhdHRyOiB7IHRpdGxlOiAnSGFzIGFubm90YXRpb24nIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh1bml0LmZsYXNoY2FyZElkcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb250ZW50QXJlYS5jcmVhdGVTcGFuKHtcbiAgICAgICAgdGV4dDogJ1x1RDgzQ1x1RENDRicsXG4gICAgICAgIGNsczogJ2ZsYXNoY2FyZC1iYWRnZScsXG4gICAgICAgIGF0dHI6IHsgdGl0bGU6IGAke3VuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aH0gZmxhc2hjYXJkKHMpYCB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTY2M0VcdTc5M0FcdTYyNzlcdTZDRThcdTUxODVcdTVCQjlcbiAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk7XG4gICAgaWYgKGFubm90YXRpb24pIHtcbiAgICAgIGNvbnN0IGFubm90YXRpb25EaXNwbGF5ID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdhbm5vdGF0aW9uLWRpc3BsYXknIH0pO1xuICAgICAgXG4gICAgICBpZiAoYW5ub3RhdGlvbi5iYWRnZSkge1xuICAgICAgICBjb25zdCBiYWRnZSA9IGFubm90YXRpb25EaXNwbGF5LmNyZWF0ZVNwYW4oe1xuICAgICAgICAgIHRleHQ6IGFubm90YXRpb24uYmFkZ2UudGV4dCxcbiAgICAgICAgICBjbHM6ICdhbm5vdGF0aW9uLWJhZGdlLWRpc3BsYXknXG4gICAgICAgIH0pO1xuICAgICAgICBiYWRnZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBhbm5vdGF0aW9uLmJhZGdlLmNvbG9yO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBhbm5vdGF0aW9uQ29udGVudCA9IGFubm90YXRpb25EaXNwbGF5LmNyZWF0ZURpdih7IFxuICAgICAgICBjbHM6ICdhbm5vdGF0aW9uLWNvbnRlbnQtZGlzcGxheSdcbiAgICAgIH0pO1xuICAgICAgYW5ub3RhdGlvbkNvbnRlbnQuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogJ1x1RDgzRFx1RENBQyAnIH0pO1xuICAgICAgYW5ub3RhdGlvbkNvbnRlbnQuY3JlYXRlU3Bhbih7IHRleHQ6IGFubm90YXRpb24uY29udGVudCB9KTtcbiAgICAgIFxuICAgICAgLy8gXHU2NUY2XHU5NUY0XHU2MjMzXG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBhbm5vdGF0aW9uRGlzcGxheS5jcmVhdGVEaXYoeyBjbHM6ICdhbm5vdGF0aW9uLXRpbWVzdGFtcCcgfSk7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoYW5ub3RhdGlvbi5tZXRhZGF0YS5jcmVhdGVkQXQpO1xuICAgICAgdGltZXN0YW1wLnRleHRDb250ZW50ID0gZGF0ZS50b0xvY2FsZVN0cmluZygpO1xuICAgICAgXG4gICAgICAvLyBcdTcwQjlcdTUxRkJcdTYyNzlcdTZDRThcdTRFNUZcdTUzRUZcdTRFRTVcdTdGMTZcdThGOTFcbiAgICAgIGFubm90YXRpb25EaXNwbGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdGhpcy5zaG93QW5ub3RhdGlvbklucHV0KGNhcmQsIHVuaXQsIGFubm90YXRpb24uY29udGVudCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBtZXRhQXJlYSA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1tZXRhJyB9KTtcblxuICAgIGlmICh1bml0Lm1ldGFkYXRhLnRhZ3MubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgdGFnc0NvbnRhaW5lciA9IG1ldGFBcmVhLmNyZWF0ZVNwYW4oeyBjbHM6ICd0YWdzLWNvbnRhaW5lcicgfSk7XG4gICAgICB1bml0Lm1ldGFkYXRhLnRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICB0YWdzQ29udGFpbmVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiB0YWcsIGNsczogJ3RhZycgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodW5pdC5zb3VyY2UuaGVhZGluZykge1xuICAgICAgbWV0YUFyZWEuY3JlYXRlU3Bhbih7XG4gICAgICAgIHRleHQ6IGBcdUQ4M0RcdURDQ0QgJHt1bml0LnNvdXJjZS5oZWFkaW5nfWAsXG4gICAgICAgIGNsczogJ2hlYWRpbmctaW5mbydcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGFjdGlvbnNBcmVhID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLWFjdGlvbnMnIH0pO1xuXG4gICAgY29uc3QganVtcEJ0biA9IGFjdGlvbnNBcmVhLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnXHUyMTk3JyxcbiAgICAgIGNsczogJ2FjdGlvbi1idG4ganVtcC1idG4nLFxuICAgICAgYXR0cjogeyB0aXRsZTogJ0p1bXAgdG8gc291cmNlJyB9XG4gICAgfSk7XG4gICAganVtcEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgYXdhaXQgdGhpcy5qdW1wVG9Tb3VyY2UodW5pdCk7XG4gICAgfSk7XG5cbiAgICAvLyBcdTRFMDBcdTk1MkVcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcdTYzMDlcdTk0QUVcdTdFQzRcbiAgICBjb25zdCBmbGFzaGNhcmRHcm91cCA9IGFjdGlvbnNBcmVhLmNyZWF0ZURpdih7IGNsczogJ2ZsYXNoY2FyZC1idG4tZ3JvdXAnIH0pO1xuXG4gICAgLy8gXHU2NjdBXHU4MEZEXHU1MjFCXHU1RUZBXHVGRjA4XHU0RTNCXHU2MzA5XHU5NEFFXHVGRjA5XG4gICAgY29uc3QgcXVpY2tDYXJkQnRuID0gZmxhc2hjYXJkR3JvdXAuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdcdTI2QTEnLFxuICAgICAgY2xzOiAnYWN0aW9uLWJ0biBxdWljay1jYXJkLWJ0bicsXG4gICAgICBhdHRyOiB7IHRpdGxlOiAnUXVpY2sgY3JlYXRlIGZsYXNoY2FyZCAoc21hcnQpJyB9XG4gICAgfSk7XG4gICAgcXVpY2tDYXJkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBhd2FpdCB0aGlzLnF1aWNrQ3JlYXRvci5jcmVhdGVTbWFydENhcmQodW5pdCk7XG4gICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICB9KTtcblxuICAgIC8vIFx1NEUwQlx1NjJDOVx1ODNEQ1x1NTM1NVx1NjMwOVx1OTRBRVxuICAgIGNvbnN0IG1vcmVDYXJkQnRuID0gZmxhc2hjYXJkR3JvdXAuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdcdTI1QkMnLFxuICAgICAgY2xzOiAnYWN0aW9uLWJ0biBtb3JlLWNhcmQtYnRuJyxcbiAgICAgIGF0dHI6IHsgdGl0bGU6ICdNb3JlIGZsYXNoY2FyZCBvcHRpb25zJyB9XG4gICAgfSk7XG4gICAgbW9yZUNhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMuc2hvd0ZsYXNoY2FyZE1lbnUoZSwgdW5pdCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBkZWxldGVCdG4gPSBhY3Rpb25zQXJlYS5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1x1RDgzRFx1REREMScsXG4gICAgICBjbHM6ICdhY3Rpb24tYnRuIGRlbGV0ZS1idG4nLFxuICAgICAgYXR0cjogeyB0aXRsZTogJ0RlbGV0ZScgfVxuICAgIH0pO1xuICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgYXdhaXQgdGhpcy5kZWxldGVDb250ZW50VW5pdCh1bml0KTtcbiAgICB9KTtcblxuICAgIGNhcmQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5zaG93Q29udGV4dE1lbnUoZSwgdW5pdCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckJ5VGFnKHVuaXRzOiBDb250ZW50VW5pdFtdKSB7XG4gICAgY29uc3QgZ3JvdXBlZCA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50VW5pdFtdPigpO1xuXG4gICAgdW5pdHMuZm9yRWFjaCh1bml0ID0+IHtcbiAgICAgIGlmICh1bml0Lm1ldGFkYXRhLnRhZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGlmICghZ3JvdXBlZC5oYXMoJ1VudGFnZ2VkJykpIHtcbiAgICAgICAgICBncm91cGVkLnNldCgnVW50YWdnZWQnLCBbXSk7XG4gICAgICAgIH1cbiAgICAgICAgZ3JvdXBlZC5nZXQoJ1VudGFnZ2VkJykhLnB1c2godW5pdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1bml0Lm1ldGFkYXRhLnRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICAgIGlmICghZ3JvdXBlZC5oYXModGFnKSkge1xuICAgICAgICAgICAgZ3JvdXBlZC5zZXQodGFnLCBbXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGdyb3VwZWQuZ2V0KHRhZykhLnB1c2godW5pdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3Qgc29ydGVkVGFncyA9IEFycmF5LmZyb20oZ3JvdXBlZC5rZXlzKCkpLnNvcnQoKTtcbiAgICBzb3J0ZWRUYWdzLmZvckVhY2godGFnID0+IHtcbiAgICAgIGNvbnN0IHRhZ1VuaXRzID0gZ3JvdXBlZC5nZXQodGFnKSE7XG4gICAgICB0aGlzLnJlbmRlclRhZ0dyb3VwKHRhZywgdGFnVW5pdHMpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJUYWdHcm91cCh0YWc6IHN0cmluZywgdW5pdHM6IENvbnRlbnRVbml0W10pIHtcbiAgICBjb25zdCBncm91cENvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ3RhZy1ncm91cCcgfSk7XG5cbiAgICBjb25zdCBoZWFkZXIgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdncm91cC1oZWFkZXInIH0pO1xuICAgIGNvbnN0IHRpdGxlRWwgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtdGl0bGUnIH0pO1xuICAgIHRpdGxlRWwuY3JlYXRlU3Bhbih7IHRleHQ6ICdcdUQ4M0NcdURGRjdcdUZFMEYgJywgY2xzOiAnZ3JvdXAtaWNvbicgfSk7XG4gICAgdGl0bGVFbC5jcmVhdGVTcGFuKHsgdGV4dDogdGFnLCBjbHM6ICdncm91cC1uYW1lJyB9KTtcblxuICAgIGhlYWRlci5jcmVhdGVTcGFuKHsgdGV4dDogYCR7dW5pdHMubGVuZ3RofWAsIGNsczogJ2NvdW50LWJhZGdlJyB9KTtcblxuICAgIGNvbnN0IGNvbGxhcHNlQnRuID0gaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnXHUyNUJDJywgY2xzOiAnY29sbGFwc2UtYnRuJyB9KTtcblxuICAgIGNvbnN0IGNvbnRlbnRDb250YWluZXIgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdncm91cC1jb250ZW50JyB9KTtcbiAgICB1bml0cy5mb3JFYWNoKHVuaXQgPT4ge1xuICAgICAgdGhpcy5yZW5kZXJDb250ZW50VW5pdChjb250ZW50Q29udGFpbmVyLCB1bml0KTtcbiAgICB9KTtcblxuICAgIGxldCBpc0NvbGxhcHNlZCA9IGZhbHNlO1xuICAgIGNvbGxhcHNlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBpc0NvbGxhcHNlZCA9ICFpc0NvbGxhcHNlZDtcbiAgICAgIGNvbnRlbnRDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IGlzQ29sbGFwc2VkID8gJ25vbmUnIDogJ2Jsb2NrJztcbiAgICAgIGNvbGxhcHNlQnRuLnRleHRDb250ZW50ID0gaXNDb2xsYXBzZWQgPyAnXHUyNUI2JyA6ICdcdTI1QkMnO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJCeURhdGUodW5pdHM6IENvbnRlbnRVbml0W10pIHtcbiAgICBjb25zdCBncm91cGVkID0gbmV3IE1hcDxzdHJpbmcsIENvbnRlbnRVbml0W10+KCk7XG5cbiAgICB1bml0cy5mb3JFYWNoKHVuaXQgPT4ge1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHVuaXQubWV0YWRhdGEuY3JlYXRlZEF0KTtcbiAgICAgIGNvbnN0IGRhdGVLZXkgPSBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuICAgICAgXG4gICAgICBpZiAoIWdyb3VwZWQuaGFzKGRhdGVLZXkpKSB7XG4gICAgICAgIGdyb3VwZWQuc2V0KGRhdGVLZXksIFtdKTtcbiAgICAgIH1cbiAgICAgIGdyb3VwZWQuZ2V0KGRhdGVLZXkpIS5wdXNoKHVuaXQpO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc29ydGVkRGF0ZXMgPSBBcnJheS5mcm9tKGdyb3VwZWQua2V5cygpKS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoYikuZ2V0VGltZSgpIC0gbmV3IERhdGUoYSkuZ2V0VGltZSgpO1xuICAgIH0pO1xuXG4gICAgc29ydGVkRGF0ZXMuZm9yRWFjaChkYXRlID0+IHtcbiAgICAgIGNvbnN0IGRhdGVVbml0cyA9IGdyb3VwZWQuZ2V0KGRhdGUpITtcbiAgICAgIHRoaXMucmVuZGVyRGF0ZUdyb3VwKGRhdGUsIGRhdGVVbml0cyk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckRhdGVHcm91cChkYXRlOiBzdHJpbmcsIHVuaXRzOiBDb250ZW50VW5pdFtdKSB7XG4gICAgY29uc3QgZ3JvdXBDb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdkYXRlLWdyb3VwJyB9KTtcblxuICAgIGNvbnN0IGhlYWRlciA9IGdyb3VwQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyb3VwLWhlYWRlcicgfSk7XG4gICAgY29uc3QgdGl0bGVFbCA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdncm91cC10aXRsZScgfSk7XG4gICAgdGl0bGVFbC5jcmVhdGVTcGFuKHsgdGV4dDogJ1x1RDgzRFx1RENDNSAnLCBjbHM6ICdncm91cC1pY29uJyB9KTtcbiAgICB0aXRsZUVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiBkYXRlLCBjbHM6ICdncm91cC1uYW1lJyB9KTtcblxuICAgIGhlYWRlci5jcmVhdGVTcGFuKHsgdGV4dDogYCR7dW5pdHMubGVuZ3RofWAsIGNsczogJ2NvdW50LWJhZGdlJyB9KTtcblxuICAgIGNvbnN0IGNvbGxhcHNlQnRuID0gaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnXHUyNUJDJywgY2xzOiAnY29sbGFwc2UtYnRuJyB9KTtcblxuICAgIGNvbnN0IGNvbnRlbnRDb250YWluZXIgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdncm91cC1jb250ZW50JyB9KTtcbiAgICB1bml0cy5mb3JFYWNoKHVuaXQgPT4ge1xuICAgICAgdGhpcy5yZW5kZXJDb250ZW50VW5pdChjb250ZW50Q29udGFpbmVyLCB1bml0KTtcbiAgICB9KTtcblxuICAgIGxldCBpc0NvbGxhcHNlZCA9IGZhbHNlO1xuICAgIGNvbGxhcHNlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBpc0NvbGxhcHNlZCA9ICFpc0NvbGxhcHNlZDtcbiAgICAgIGNvbnRlbnRDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IGlzQ29sbGFwc2VkID8gJ25vbmUnIDogJ2Jsb2NrJztcbiAgICAgIGNvbGxhcHNlQnRuLnRleHRDb250ZW50ID0gaXNDb2xsYXBzZWQgPyAnXHUyNUI2JyA6ICdcdTI1QkMnO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG93QW5ub3RhdGlvbklucHV0KGNhcmQ6IEhUTUxFbGVtZW50LCB1bml0OiBDb250ZW50VW5pdCwgZXhpc3RpbmdUZXh0Pzogc3RyaW5nKSB7XG4gICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU3RUNGXHU2NzA5XHU4RjkzXHU1MTY1XHU2ODQ2XHU1QzU1XHU1RjAwXG4gICAgbGV0IGlucHV0Q29udGFpbmVyID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuYW5ub3RhdGlvbi1pbnB1dC1jb250YWluZXInKSBhcyBIVE1MRWxlbWVudDtcbiAgICBcbiAgICBpZiAoaW5wdXRDb250YWluZXIpIHtcbiAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NURGMlx1NUM1NVx1NUYwMFx1RkYwQ1x1NTIxOVx1NjI5OFx1NTNFMFxuICAgICAgaW5wdXRDb250YWluZXIucmVtb3ZlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gXHU1MjFCXHU1RUZBXHU4RjkzXHU1MTY1XHU1MzNBXHU1N0RGXG4gICAgaW5wdXRDb250YWluZXIgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ2Fubm90YXRpb24taW5wdXQtY29udGFpbmVyJyB9KTtcblxuICAgIGNvbnN0IHRleHRhcmVhID0gaW5wdXRDb250YWluZXIuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgY2xzOiAnYW5ub3RhdGlvbi10ZXh0YXJlYScsXG4gICAgICBwbGFjZWhvbGRlcjogJ0FkZCBjb21tZW50Li4uJ1xuICAgIH0pO1xuICAgIHRleHRhcmVhLnZhbHVlID0gZXhpc3RpbmdUZXh0IHx8ICcnO1xuICAgIHRleHRhcmVhLnJvd3MgPSAzO1xuXG4gICAgLy8gXHU2MzA5XHU5NEFFXHU1MzNBXHU1N0RGXHVGRjA4XHU3QjgwXHU1MzE2XHU3MjQ4XHVGRjA5XG4gICAgY29uc3QgYnV0dG9uQXJlYSA9IGlucHV0Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2Fubm90YXRpb24tYnV0dG9ucycgfSk7XG5cbiAgICBpZiAoZXhpc3RpbmdUZXh0KSB7XG4gICAgICBjb25zdCBkZWxldGVCdG4gPSBidXR0b25BcmVhLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIHRleHQ6ICdEZWxldGUnLFxuICAgICAgICBjbHM6ICdhbm5vdGF0aW9uLWRlbGV0ZS1idG4nXG4gICAgICB9KTtcbiAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgYW5ub3RhdGlvbiA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldENvbnRlbnRBbm5vdGF0aW9uKHVuaXQuaWQpO1xuICAgICAgICBpZiAoYW5ub3RhdGlvbikge1xuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmRlbGV0ZUFubm90YXRpb24oYW5ub3RhdGlvbi5pZCk7XG4gICAgICAgICAgbmV3IE5vdGljZSgnQW5ub3RhdGlvbiBkZWxldGVkJyk7XG4gICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHNhdmVCdG4gPSBidXR0b25BcmVhLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnU2F2ZScsXG4gICAgICBjbHM6ICdhbm5vdGF0aW9uLXNhdmUtYnRuJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFx1NEZERFx1NUI1OFx1NTFGRFx1NjU3MFxuICAgIGNvbnN0IHNhdmVBbm5vdGF0aW9uID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGV4dCA9IHRleHRhcmVhLnZhbHVlLnRyaW0oKTtcbiAgICAgIGlmICghdGV4dCkge1xuICAgICAgICBpbnB1dENvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoYW5ub3RhdGlvbikge1xuICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NzNCMFx1NjcwOVx1NjI3OVx1NkNFOFxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLnVwZGF0ZUFubm90YXRpb24oYW5ub3RhdGlvbi5pZCwge1xuICAgICAgICAgICAgY29udGVudDogdGV4dFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjVCMFx1NjI3OVx1NkNFOFxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmFkZENvbnRlbnRBbm5vdGF0aW9uKFxuICAgICAgICAgICAgdW5pdC5pZCxcbiAgICAgICAgICAgIHRleHRcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgYW5ub3RhdGlvbjonLCBlcnJvcik7XG4gICAgICAgIG5ldyBOb3RpY2UoJ0Vycm9yIHNhdmluZyBhbm5vdGF0aW9uJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHNhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzYXZlQW5ub3RhdGlvbik7XG5cbiAgICAvLyBcdTY1MkZcdTYzMDEgQ3RybCtFbnRlciBcdTVGRUJcdTYzNzdcdTk1MkVcdTRGRERcdTVCNThcbiAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAoZS5jdHJsS2V5IHx8IGUubWV0YUtleSkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBzYXZlQW5ub3RhdGlvbigpO1xuICAgICAgfVxuICAgICAgLy8gRXNjIFx1OTUyRVx1NTE3M1x1OTVFRFxuICAgICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlucHV0Q29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gXHU4MUVBXHU1MkE4XHU4MDVBXHU3MTI2XG4gICAgdGV4dGFyZWEuZm9jdXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvd0ZsYXNoY2FyZE1lbnUoZTogTW91c2VFdmVudCwgdW5pdDogQ29udGVudFVuaXQpIHtcbiAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdTI2QTEgU21hcnQgY3JlYXRlJylcbiAgICAgICAgLnNldEljb24oJ3phcCcpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnF1aWNrQ3JlYXRvci5jcmVhdGVTbWFydENhcmQodW5pdCk7XG4gICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdUQ4M0RcdURDREQgQ3JlYXRlIFEmQSBjYXJkJylcbiAgICAgICAgLnNldEljb24oJ21lc3NhZ2Utc3F1YXJlJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMucXVpY2tDcmVhdG9yLmNyZWF0ZVF1aWNrUUFDYXJkKHVuaXQpO1xuICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHUyNzBGXHVGRTBGIENyZWF0ZSBDbG96ZSBjYXJkJylcbiAgICAgICAgLnNldEljb24oJ2VkaXQnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5xdWlja0NyZWF0b3IuY3JlYXRlUXVpY2tDbG96ZUNhcmQodW5pdCk7XG4gICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHVEODNDXHVERkE4IEN1c3RvbSBjYXJkLi4uJylcbiAgICAgICAgLnNldEljb24oJ3NldHRpbmdzJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgRmxhc2hjYXJkQ3JlYXRlTW9kYWwgfSA9IGF3YWl0IGltcG9ydCgnLi9GbGFzaGNhcmRDcmVhdGVNb2RhbCcpO1xuICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IEZsYXNoY2FyZENyZWF0ZU1vZGFsKFxuICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICB0aGlzLnBsdWdpbixcbiAgICAgICAgICAgIHVuaXQsXG4gICAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNob3dCYXRjaENyZWF0ZU1vZGFsKCkge1xuICAgIGNvbnN0IHVuaXRzID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0QWxsQ29udGVudFVuaXRzKCk7XG4gICAgXG4gICAgLy8gXHU4RkM3XHU2RUU0XHU2Mzg5XHU1REYyXHU3RUNGXHU2NzA5XHU5NUVBXHU1MzYxXHU3Njg0XHU1MTg1XHU1QkI5XG4gICAgY29uc3QgdW5pdHNXaXRob3V0Q2FyZHMgPSB1bml0cy5maWx0ZXIodSA9PiB1LmZsYXNoY2FyZElkcy5sZW5ndGggPT09IDApO1xuICAgIFxuICAgIGlmICh1bml0c1dpdGhvdXRDYXJkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIG5ldyBOb3RpY2UoJ0FsbCBjb250ZW50IGFscmVhZHkgaGFzIGZsYXNoY2FyZHMhJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbW9kYWwgPSBuZXcgQmF0Y2hDcmVhdGVNb2RhbChcbiAgICAgIHRoaXMuYXBwLFxuICAgICAgdGhpcy5wbHVnaW4sXG4gICAgICB0aGlzLnF1aWNrQ3JlYXRvcixcbiAgICAgIHVuaXRzV2l0aG91dENhcmRzLFxuICAgICAgKCkgPT4gdGhpcy5yZWZyZXNoKClcbiAgICApO1xuICAgIG1vZGFsLm9wZW4oKTtcbiAgfVxuXG4gIHByaXZhdGUgaXNBbGxTZWxlY3RlZCgpOiBib29sZWFuIHtcbiAgICBjb25zdCB1bml0cyA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldEFsbENvbnRlbnRVbml0cygpO1xuICAgIC8vIFx1NUU5NFx1NzUyOFx1NjQxQ1x1N0QyMlx1OEZDN1x1NkVFNFxuICAgIGxldCBmaWx0ZXJlZFVuaXRzID0gdW5pdHM7XG4gICAgaWYgKHRoaXMuc2VhcmNoUXVlcnkpIHtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5zZWFyY2hRdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgICAgZmlsdGVyZWRVbml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+XG4gICAgICAgIHVuaXQuY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSB8fFxuICAgICAgICB1bml0LnNvdXJjZS5maWxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5zb21lKHRhZyA9PiB0YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkpXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gZmlsdGVyZWRVbml0cy5sZW5ndGggPiAwICYmIHRoaXMuc2VsZWN0ZWRVbml0SWRzLnNpemUgPT09IGZpbHRlcmVkVW5pdHMubGVuZ3RoO1xuICB9XG5cbiAgcHJpdmF0ZSB0b2dnbGVTZWxlY3RBbGwoKSB7XG4gICAgY29uc3QgdW5pdHMgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRBbGxDb250ZW50VW5pdHMoKTtcbiAgICAvLyBcdTVFOTRcdTc1MjhcdTY0MUNcdTdEMjJcdThGQzdcdTZFRTRcbiAgICBsZXQgZmlsdGVyZWRVbml0cyA9IHVuaXRzO1xuICAgIGlmICh0aGlzLnNlYXJjaFF1ZXJ5KSB7XG4gICAgICBjb25zdCBxdWVyeSA9IHRoaXMuc2VhcmNoUXVlcnkudG9Mb3dlckNhc2UoKTtcbiAgICAgIGZpbHRlcmVkVW5pdHMgPSB1bml0cy5maWx0ZXIodW5pdCA9PlxuICAgICAgICB1bml0LmNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkgfHxcbiAgICAgICAgdW5pdC5zb3VyY2UuZmlsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSB8fFxuICAgICAgICB1bml0Lm1ldGFkYXRhLnRhZ3Muc29tZSh0YWcgPT4gdGFnLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc0FsbFNlbGVjdGVkKCkpIHtcbiAgICAgIC8vIFx1NTNENlx1NkQ4OFx1NTE2OFx1OTAwOVxuICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU1MTY4XHU5MDA5XG4gICAgICBmaWx0ZXJlZFVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmFkZCh1bml0LmlkKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZUJhdGNoQnV0dG9ucygpO1xuICAgIHRoaXMudXBkYXRlQ2hlY2tib3hlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVDaGVja2JveGVzKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG4gICAgY29uc3QgY2hlY2tib3hlcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuYmF0Y2gtY2hlY2tib3gnKSBhcyBOb2RlTGlzdE9mPEhUTUxJbnB1dEVsZW1lbnQ+O1xuICAgIFxuICAgIGNoZWNrYm94ZXMuZm9yRWFjaChjaGVja2JveCA9PiB7XG4gICAgICBjb25zdCB1bml0SWQgPSBjaGVja2JveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdW5pdC1pZCcpO1xuICAgICAgaWYgKHVuaXRJZCkge1xuICAgICAgICBjaGVja2JveC5jaGVja2VkID0gdGhpcy5zZWxlY3RlZFVuaXRJZHMuaGFzKHVuaXRJZCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZUJhdGNoQnV0dG9ucygpIHtcbiAgICBjb25zdCB0b29sYmFyID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcubGVhcm5pbmctc3lzdGVtLXRvb2xiYXInKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAodG9vbGJhcikge1xuICAgICAgY29uc3QgYmF0Y2hBY3Rpb25zID0gdG9vbGJhci5xdWVyeVNlbGVjdG9yKCcuYmF0Y2gtYWN0aW9ucy1vdmVydmlldycpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgaWYgKGJhdGNoQWN0aW9ucykge1xuICAgICAgICBjb25zdCBzZWxlY3RBbGxCdG4gPSBiYXRjaEFjdGlvbnMucXVlcnlTZWxlY3RvcignLnNlbGVjdC1hbGwtYnRuJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGJhdGNoQWN0aW9ucy5xdWVyeVNlbGVjdG9yKCcuYmF0Y2gtZGVsZXRlLWJ0bicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBjb25zdCBjcmVhdGVCdG4gPSBiYXRjaEFjdGlvbnMucXVlcnlTZWxlY3RvcignLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG4nKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgXG4gICAgICAgIGlmIChzZWxlY3RBbGxCdG4pIHtcbiAgICAgICAgICBzZWxlY3RBbGxCdG4udGV4dENvbnRlbnQgPSB0aGlzLmlzQWxsU2VsZWN0ZWQoKSA/ICdcdTI2MTEgRGVzZWxlY3QgQWxsJyA6ICdcdTI2MTAgU2VsZWN0IEFsbCc7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChkZWxldGVCdG4pIHtcbiAgICAgICAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSBgXHVEODNEXHVEREQxXHVGRTBGIERlbGV0ZSAoJHt0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplfSlgO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoY3JlYXRlQnRuKSB7XG4gICAgICAgICAgY3JlYXRlQnRuLnRleHRDb250ZW50ID0gYFx1MjZBMSBDcmVhdGUgQ2FyZHMgKCR7dGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZX0pYDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYmF0Y2hEZWxldGVOb3RlcygpIHtcbiAgICBpZiAodGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZSA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFBsZWFzZSBzZWxlY3Qgbm90ZXMgdG8gZGVsZXRlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFjb25maXJtKGBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlICR7dGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZX0gc2VsZWN0ZWQgbm90ZXM/YCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgc3VjY2VzcyA9IDA7XG4gICAgbGV0IGZhaWxlZCA9IDA7XG5cbiAgICBmb3IgKGNvbnN0IHVuaXRJZCBvZiB0aGlzLnNlbGVjdGVkVW5pdElkcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZGVsZXRlQ29udGVudFVuaXQodW5pdElkKTtcbiAgICAgICAgc3VjY2VzcysrO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgbm90ZTonLCBlcnJvcik7XG4gICAgICAgIGZhaWxlZCsrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmNsZWFyKCk7XG4gICAgbmV3IE5vdGljZShgXHUyNzA1IERlbGV0ZWQgJHtzdWNjZXNzfSBub3RlcyR7ZmFpbGVkID4gMCA/IGAsICR7ZmFpbGVkfSBmYWlsZWRgIDogJyd9YCk7XG4gICAgdGhpcy5yZWZyZXNoKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGJhdGNoQ3JlYXRlRmxhc2hjYXJkcygpIHtcbiAgICBpZiAodGhpcy5zZWxlY3RlZFVuaXRJZHMuc2l6ZSA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFBsZWFzZSBzZWxlY3Qgbm90ZXMgdG8gY3JlYXRlIGZsYXNoY2FyZHMnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB1bml0cyA9IEFycmF5LmZyb20odGhpcy5zZWxlY3RlZFVuaXRJZHMpXG4gICAgICAubWFwKGlkID0+IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGlkKSlcbiAgICAgIC5maWx0ZXIodSA9PiB1ICE9PSB1bmRlZmluZWQgJiYgdS5mbGFzaGNhcmRJZHMubGVuZ3RoID09PSAwKSBhcyBDb250ZW50VW5pdFtdO1xuXG4gICAgaWYgKHVuaXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFNlbGVjdGVkIG5vdGVzIGFscmVhZHkgaGF2ZSBmbGFzaGNhcmRzJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbW9kYWwgPSBuZXcgQmF0Y2hDcmVhdGVNb2RhbChcbiAgICAgIHRoaXMuYXBwLFxuICAgICAgdGhpcy5wbHVnaW4sXG4gICAgICB0aGlzLnF1aWNrQ3JlYXRvcixcbiAgICAgIHVuaXRzLFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5jbGVhcigpO1xuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgIH1cbiAgICApO1xuICAgIG1vZGFsLm9wZW4oKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMganVtcFRvU291cmNlKHVuaXQ6IENvbnRlbnRVbml0KSB7XG4gICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh1bml0LnNvdXJjZS5maWxlKTtcbiAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSByZXR1cm47XG5cbiAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpO1xuICAgIGF3YWl0IGxlYWYub3BlbkZpbGUoZmlsZSk7XG5cbiAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoSXRlbVZpZXcpO1xuICAgIGlmICh2aWV3KSB7XG4gICAgICBjb25zdCBlZGl0b3IgPSAodmlldyBhcyBhbnkpLmVkaXRvcjtcbiAgICAgIGlmIChlZGl0b3IpIHtcbiAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IHVuaXQuc291cmNlLnBvc2l0aW9uLmxpbmUsIGNoOiAwIH0pO1xuICAgICAgICBlZGl0b3Iuc2Nyb2xsSW50b1ZpZXcoe1xuICAgICAgICAgIGZyb206IHsgbGluZTogdW5pdC5zb3VyY2UucG9zaXRpb24ubGluZSwgY2g6IDAgfSxcbiAgICAgICAgICB0bzogeyBsaW5lOiB1bml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogMCB9XG4gICAgICAgIH0sIHRydWUpO1xuICAgICAgICBcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgZWRpdG9yLnNldFNlbGVjdGlvbihcbiAgICAgICAgICAgIHsgbGluZTogdW5pdC5zb3VyY2UucG9zaXRpb24ubGluZSwgY2g6IDAgfSxcbiAgICAgICAgICAgIHsgbGluZTogdW5pdC5zb3VyY2UucG9zaXRpb24ubGluZSwgY2g6IDk5OSB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfSwgMTAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGRlbGV0ZUNvbnRlbnRVbml0KHVuaXQ6IENvbnRlbnRVbml0KSB7XG4gICAgY29uc3QgY29uZmlybWVkID0gYXdhaXQgdGhpcy5jb25maXJtRGVsZXRlKHVuaXQpO1xuICAgIGlmICghY29uZmlybWVkKSByZXR1cm47XG5cbiAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5kZWxldGVDb250ZW50VW5pdCh1bml0LmlkKTtcbiAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgY29uZmlybURlbGV0ZSh1bml0OiBDb250ZW50VW5pdCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgY29uc3QgbW9kYWwgPSBuZXcgQ29uZmlybU1vZGFsKFxuICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgJ0RlbGV0ZSBjb250ZW50JyxcbiAgICAgICAgYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBjb250ZW50P1xcblxcblwiJHt1bml0LmNvbnRlbnQuc3Vic3RyaW5nKDAsIDUwKX0uLi5cImAsXG4gICAgICAgICgpID0+IHJlc29sdmUodHJ1ZSksXG4gICAgICAgICgpID0+IHJlc29sdmUoZmFsc2UpXG4gICAgICApO1xuICAgICAgbW9kYWwub3BlbigpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG93Q29udGV4dE1lbnUoZTogTW91c2VFdmVudCwgdW5pdDogQ29udGVudFVuaXQpIHtcbiAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdKdW1wIHRvIHNvdXJjZScpXG4gICAgICAgIC5zZXRJY29uKCdhcnJvdy1yaWdodCcpXG4gICAgICAgIC5vbkNsaWNrKCgpID0+IHRoaXMuanVtcFRvU291cmNlKHVuaXQpKVxuICAgICk7XG5cbiAgICBjb25zdCBhbm5vdGF0aW9uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdC5pZCk7XG4gICAgXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoYW5ub3RhdGlvbiA/ICdFZGl0IGFubm90YXRpb24nIDogJ0FkZCBhbm5vdGF0aW9uJylcbiAgICAgICAgLnNldEljb24oJ3BlbmNpbCcpXG4gICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICBjb25zdCBjYXJkID0gKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCcuY29udGVudC1jYXJkJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgaWYgKGNhcmQpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0Fubm90YXRpb25JbnB1dChjYXJkLCB1bml0LCBhbm5vdGF0aW9uPy5jb250ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHUyNkExIFF1aWNrIGNyZWF0ZSBmbGFzaGNhcmQnKVxuICAgICAgICAuc2V0SWNvbignemFwJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMucXVpY2tDcmVhdG9yLmNyZWF0ZVNtYXJ0Q2FyZCh1bml0KTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ0NyZWF0ZSBRJkEgY2FyZCcpXG4gICAgICAgIC5zZXRJY29uKCdtZXNzYWdlLXNxdWFyZScpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnF1aWNrQ3JlYXRvci5jcmVhdGVRdWlja1FBQ2FyZCh1bml0KTtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ0NyZWF0ZSBDbG96ZSBjYXJkJylcbiAgICAgICAgLnNldEljb24oJ2VkaXQnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5xdWlja0NyZWF0b3IuY3JlYXRlUXVpY2tDbG96ZUNhcmQodW5pdCk7XG4gICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdDdXN0b20gZmxhc2hjYXJkLi4uJylcbiAgICAgICAgLnNldEljb24oJ3NldHRpbmdzJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgRmxhc2hjYXJkQ3JlYXRlTW9kYWwgfSA9IGF3YWl0IGltcG9ydCgnLi9GbGFzaGNhcmRDcmVhdGVNb2RhbCcpO1xuICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IEZsYXNoY2FyZENyZWF0ZU1vZGFsKFxuICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICB0aGlzLnBsdWdpbixcbiAgICAgICAgICAgIHVuaXQsXG4gICAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1ZpZXcgU3RhdGlzdGljcycpXG4gICAgICAgIC5zZXRJY29uKCdiYXItY2hhcnQnKVxuICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgdGhpcy5wbHVnaW4uYWN0aXZhdGVTdGF0cygpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xuXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ0RlbGV0ZScpXG4gICAgICAgIC5zZXRJY29uKCd0cmFzaCcpXG4gICAgICAgIC5vbkNsaWNrKCgpID0+IHRoaXMuZGVsZXRlQ29udGVudFVuaXQodW5pdCkpXG4gICAgKTtcblxuICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChlKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VHlwZUljb24odHlwZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBpY29uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICdoaWdobGlnaHQnOiAnXHUyNzI4JyxcbiAgICAgICdib2xkJzogJyoqJyxcbiAgICAgICd0YWcnOiAnXHVEODNDXHVERkY3JyxcbiAgICAgICdjdXN0b20nOiAnXHUyQjUwJ1xuICAgIH07XG4gICAgcmV0dXJuIGljb25zW3R5cGVdIHx8ICdcdTIwMjInO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRTdHlsZXMoKSB7XG4gICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgIC8qIFx1NURFNVx1NTE3N1x1NjgwRlx1NjgzN1x1NUYwRiAqL1xuICAgICAgLmxlYXJuaW5nLXN5c3RlbS10b29sYmFyIHtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAuc2VhcmNoLWNvbnRhaW5lciB7IGRpc3BsYXk6IGZsZXg7IH1cblxuICAgICAgLnNlYXJjaC1pbnB1dCB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIHBhZGRpbmc6IDZweCAxMHB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWNvbnRhaW5lciB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgfVxuXG4gICAgICAuZ3JvdXAtbGFiZWwge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC1zZWxlY3Qge1xuICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgIH1cblxuICAgICAgLnJlZnJlc2gtYnRuIHtcbiAgICAgICAgcGFkZGluZzogNHB4IDEycHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgIH1cblxuICAgICAgLnJlZnJlc2gtYnRuOmhvdmVyIHsgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7IH1cblxuICAgICAgLnN0YXRzLWNvbnRhaW5lciB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgIH1cblxuICAgICAgLyogXHU1MTg1XHU1QkI5XHU1MzNBXHU1N0RGXHU2ODM3XHU1RjBGICovXG4gICAgICAubGVhcm5pbmctc3lzdGVtLWNvbnRlbnQge1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgfVxuXG4gICAgICAuZW1wdHktc3RhdGUge1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgcGFkZGluZzogNDBweCAyMHB4O1xuICAgICAgfVxuXG4gICAgICAuZmlsZS1ncm91cCwgLnRhZy1ncm91cCwgLmRhdGUtZ3JvdXAgeyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9XG5cbiAgICAgIC5ncm91cC1oZWFkZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgIH1cblxuICAgICAgLmdyb3VwLWhlYWRlcjpob3ZlciB7IGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpOyB9XG5cbiAgICAgIC5ncm91cC10aXRsZSB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC5ncm91cC1pY29uIHsgbWFyZ2luLXJpZ2h0OiA0cHg7IH1cblxuICAgICAgLmNvdW50LWJhZGdlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBwYWRkaW5nOiAycHggOHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLmNvbGxhcHNlLWJ0biB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cblxuICAgICAgLyogXHU2NTg3XHU0RUY2XHU2Mjc5XHU2Q0U4XHU2NjNFXHU3OTNBICovXG4gICAgICAuZmlsZS1hbm5vdGF0aW9uLWRpc3BsYXkge1xuICAgICAgICBtYXJnaW46IDhweCAwIDEycHggMDtcbiAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5LWFsdCk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgIH1cblxuICAgICAgLmZpbGUtYW5ub3RhdGlvbi1pdGVtIHtcbiAgICAgICAgcGFkZGluZzogNHB4IDA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLmZpbGUtYW5ub3RhdGlvbi1pdGVtIHN0cm9uZyB7IGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7IH1cblxuICAgICAgLyogXHU1MTg1XHU1QkI5XHU1MzYxXHU3MjQ3XHU2ODM3XHU1RjBGICovXG4gICAgICAuZ3JvdXAtY29udGVudCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBwYWRkaW5nLWxlZnQ6IDhweDtcbiAgICAgIH1cblxuICAgICAgLmNvbnRlbnQtY2FyZCB7XG4gICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLmNvbnRlbnQtY2FyZDpob3ZlciB7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgIH1cblxuICAgICAgLmNhcmQtY29udGVudCB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XG4gICAgICAgIGdhcDogNHB4O1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICB9XG5cbiAgICAgIC50eXBlLWljb24geyBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7IH1cblxuICAgICAgLmNvbnRlbnQtdGV4dCB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgICAgIH1cblxuICAgICAgLmNsaWNrYWJsZS1jb250ZW50IHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgcGFkZGluZzogNHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC5jbGlja2FibGUtY29udGVudDpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgICBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tYmFkZ2UsIC5mbGFzaGNhcmQtYmFkZ2Uge1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDRweDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tYmFkZ2UuaGFzLWFubm90YXRpb24ge1xuICAgICAgICBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLyogXHU2Mjc5XHU2Q0U4XHU2NjNFXHU3OTNBXHU2ODM3XHU1RjBGICovXG4gICAgICAuYW5ub3RhdGlvbi1kaXNwbGF5IHtcbiAgICAgICAgbWFyZ2luOiAxMHB4IDA7XG4gICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5LWFsdCk7XG4gICAgICAgIGJvcmRlci1sZWZ0OiAzcHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1kaXNwbGF5OmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIGJvcmRlci1sZWZ0LWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQtaG92ZXIpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1jb250ZW50LWRpc3BsYXkge1xuICAgICAgICBsaW5lLWhlaWdodDogMS42O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWNvbnRlbnQtZGlzcGxheSBzdHJvbmcge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLXRpbWVzdGFtcCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWZhaW50KTtcbiAgICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWJhZGdlLWRpc3BsYXkge1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgIHBhZGRpbmc6IDNweCAxMHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4O1xuICAgICAgfVxuXG4gICAgICAvKiBcdTUxODVcdTgwNTRcdTYyNzlcdTZDRThcdThGOTNcdTUxNjUgKi9cbiAgICAgIC5hbm5vdGF0aW9uLWlucHV0LWNvbnRhaW5lciB7XG4gICAgICAgIG1hcmdpbjogMTJweCAwO1xuICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGFuaW1hdGlvbjogc2xpZGVEb3duIDAuMnMgZWFzZTtcbiAgICAgIH1cblxuICAgICAgQGtleWZyYW1lcyBzbGlkZURvd24ge1xuICAgICAgICBmcm9tIHtcbiAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTBweCk7XG4gICAgICAgIH1cbiAgICAgICAgdG8ge1xuICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLXRleHRhcmVhIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7XG4gICAgICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgICAgICByZXNpemU6IHZlcnRpY2FsO1xuICAgICAgICBtaW4taGVpZ2h0OiA2MHB4O1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi10ZXh0YXJlYTpmb2N1cyB7XG4gICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tdGV4dGFyZWE6OnBsYWNlaG9sZGVyIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZmFpbnQpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1idXR0b25zIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWJ1dHRvbnMgYnV0dG9uIHtcbiAgICAgICAgcGFkZGluZzogNnB4IDE2cHg7XG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1kZWxldGUtYnRuIHtcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tZGVsZXRlLWJ0bjpob3ZlciB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1zYXZlLWJ0biB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tc2F2ZS1idG46aG92ZXIge1xuICAgICAgICBvcGFjaXR5OiAwLjg7XG4gICAgICB9XG5cbiAgICAgIC8qIFx1NTE0M1x1NjU3MFx1NjM2RVx1NTMzQVx1NTdERiAqL1xuICAgICAgLmNhcmQtbWV0YSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAudGFncy1jb250YWluZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgIGdhcDogNHB4O1xuICAgICAgfVxuXG4gICAgICAudGFnIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBwYWRkaW5nOiAycHggOHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgfVxuXG4gICAgICAuaGVhZGluZy1pbmZvIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgICB9XG5cbiAgICAgIC8qIFx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRSAqL1xuICAgICAgLmNhcmQtYWN0aW9ucyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogNnB4O1xuICAgICAgfVxuXG4gICAgICAuYWN0aW9uLWJ0biB7XG4gICAgICAgIHBhZGRpbmc6IDRweCAxMHB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuXG4gICAgICAuYWN0aW9uLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgfVxuXG4gICAgICAuZGVsZXRlLWJ0bjpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgIH1cblxuICAgICAgLyogXHU0RTAwXHU5NTJFXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXHU2MzA5XHU5NEFFXHU3RUM0ICovXG4gICAgICAuZmxhc2hjYXJkLWJ0bi1ncm91cCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogMDtcbiAgICAgIH1cblxuICAgICAgLnF1aWNrLWNhcmQtYnRuIHtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4IDAgMCA0cHg7XG4gICAgICAgIGJvcmRlci1yaWdodDogbm9uZTtcbiAgICAgIH1cblxuICAgICAgLm1vcmUtY2FyZC1idG4ge1xuICAgICAgICBib3JkZXItcmFkaXVzOiAwIDRweCA0cHggMDtcbiAgICAgICAgcGFkZGluZzogNHB4IDZweDtcbiAgICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgfVxuXG4gICAgICAucXVpY2stY2FyZC1idG46aG92ZXIsIC5tb3JlLWNhcmQtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtY3JlYXRlLWJ0biB7XG4gICAgICAgIHBhZGRpbmc6IDZweCAxMnB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtY3JlYXRlLWJ0bjpob3ZlciB7XG4gICAgICAgIG9wYWNpdHk6IDAuODtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLWFjdGlvbnMtb3ZlcnZpZXcge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgfVxuXG4gICAgICAuYmF0Y2gtbW9kZS1idG4sXG4gICAgICAuc2VsZWN0LWFsbC1idG4sXG4gICAgICAuYmF0Y2gtZGVsZXRlLWJ0bixcbiAgICAgIC5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuIHtcbiAgICAgICAgcGFkZGluZzogNnB4IDEycHg7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuc2VsZWN0LWFsbC1idG46aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIH1cblxuICAgICAgLmJhdGNoLW1vZGUtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1kZWxldGUtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICB9XG5cbiAgICAgIC5iYXRjaC1jaGVja2JveCB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICB9XG4gICAgYDtcblxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gIH1cbn1cblxuLy8gXHU2Mjc5XHU5MUNGXHU1MjFCXHU1RUZBXHU2QTIxXHU2MDAxXHU2ODQ2XG5leHBvcnQgY2xhc3MgQmF0Y2hDcmVhdGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgY29uc3RydWN0b3IoXG4gICAgYXBwOiBBcHAsXG4gICAgcHJpdmF0ZSBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luLFxuICAgIHByaXZhdGUgcXVpY2tDcmVhdG9yOiBRdWlja0ZsYXNoY2FyZENyZWF0b3IsXG4gICAgcHJpdmF0ZSB1bml0czogQ29udGVudFVuaXRbXSxcbiAgICBwcml2YXRlIG9uQ29tcGxldGU6ICgpID0+IHZvaWRcbiAgKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHUyNkExIEJhdGNoIENyZWF0ZSBGbGFzaGNhcmRzJyB9KTtcbiAgICBcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgdGV4dDogYENyZWF0ZSBmbGFzaGNhcmRzIGZvciAke3RoaXMudW5pdHMubGVuZ3RofSBjb250ZW50IGl0ZW1zIHdpdGhvdXQgY2FyZHMuYFxuICAgIH0pO1xuXG4gICAgLy8gXHU5MDA5XHU2MkU5XHU3QzdCXHU1NzhCXG4gICAgY29uc3QgdHlwZUNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICd0eXBlLXNlbGVjdC1jb250YWluZXInIH0pO1xuICAgIHR5cGVDb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQ2FyZCBUeXBlJyB9KTtcblxuICAgIGxldCBzZWxlY3RlZFR5cGU6ICdzbWFydCcgfCAncWEnIHwgJ2Nsb3plJyA9ICdzbWFydCc7XG5cbiAgICBjb25zdCB0eXBlcyA9IFtcbiAgICAgIHsgdmFsdWU6ICdzbWFydCcsIGxhYmVsOiAnXHUyNkExIFNtYXJ0IChBdXRvLWRldGVjdCknLCBkZXNjOiAnQXV0b21hdGljYWxseSBjaG9vc2UgdGhlIGJlc3QgdHlwZScgfSxcbiAgICAgIHsgdmFsdWU6ICdxYScsIGxhYmVsOiAnXHVEODNEXHVEQ0REIFEmQSBDYXJkcycsIGRlc2M6ICdRdWVzdGlvbiBhbmQgYW5zd2VyIGZvcm1hdCcgfSxcbiAgICAgIHsgdmFsdWU6ICdjbG96ZScsIGxhYmVsOiAnXHUyNzBGXHVGRTBGIENsb3plIENhcmRzJywgZGVzYzogJ0ZpbGwgaW4gdGhlIGJsYW5rcycgfVxuICAgIF07XG5cbiAgICB0eXBlcy5mb3JFYWNoKHR5cGUgPT4ge1xuICAgICAgY29uc3Qgb3B0aW9uID0gdHlwZUNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd0eXBlLW9wdGlvbicgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJhZGlvID0gb3B0aW9uLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgdHlwZTogJ3JhZGlvJyxcbiAgICAgICAgdmFsdWU6IHR5cGUudmFsdWUsXG4gICAgICAgIGF0dHI6IHsgbmFtZTogJ2NhcmQtdHlwZScgfVxuICAgICAgfSk7XG4gICAgICBpZiAodHlwZS52YWx1ZSA9PT0gJ3NtYXJ0JykgcmFkaW8uY2hlY2tlZCA9IHRydWU7XG5cbiAgICAgIGNvbnN0IGxhYmVsID0gb3B0aW9uLmNyZWF0ZURpdih7IGNsczogJ3R5cGUtbGFiZWwnIH0pO1xuICAgICAgbGFiZWwuY3JlYXRlRWwoJ3N0cm9uZycsIHsgdGV4dDogdHlwZS5sYWJlbCB9KTtcbiAgICAgIGxhYmVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IHR5cGUuZGVzYywgY2xzOiAndHlwZS1kZXNjJyB9KTtcblxuICAgICAgb3B0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICByYWRpby5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgc2VsZWN0ZWRUeXBlID0gdHlwZS52YWx1ZSBhcyBhbnk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIFx1NjMwOVx1OTRBRVxuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdtb2RhbC1idXR0b24tY29udGFpbmVyJyB9KTtcblxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KTtcbiAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuXG4gICAgY29uc3QgY3JlYXRlQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgdGV4dDogYENyZWF0ZSAke3RoaXMudW5pdHMubGVuZ3RofSBDYXJkc2AsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIGNyZWF0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMuYmF0Y2hDcmVhdGUoc2VsZWN0ZWRUeXBlKTtcbiAgICB9KTtcblxuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGJhdGNoQ3JlYXRlKHR5cGU6ICdzbWFydCcgfCAncWEnIHwgJ2Nsb3plJykge1xuICAgIGNvbnN0IHsgc3VjY2VzcywgZmFpbGVkIH0gPSBhd2FpdCB0aGlzLnF1aWNrQ3JlYXRvci5jcmVhdGVCYXRjaENhcmRzKHRoaXMudW5pdHMsIHR5cGUpO1xuICAgIFxuICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBDcmVhdGVkICR7c3VjY2Vzc30gZmxhc2hjYXJkcyEgJHtmYWlsZWQgPiAwID8gYCgke2ZhaWxlZH0gZmFpbGVkKWAgOiAnJ31gKTtcbiAgICBcbiAgICB0aGlzLmNsb3NlKCk7XG4gICAgdGhpcy5vbkNvbXBsZXRlKCk7XG4gIH1cblxuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgLnR5cGUtc2VsZWN0LWNvbnRhaW5lciB7XG4gICAgICAgIG1hcmdpbjogMjBweCAwO1xuICAgICAgfVxuXG4gICAgICAudHlwZS1vcHRpb24ge1xuICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICBtYXJnaW46IDEwcHggMDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgIH1cblxuICAgICAgLnR5cGUtb3B0aW9uOmhvdmVyIHtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLnR5cGUtb3B0aW9uIGlucHV0W3R5cGU9XCJyYWRpb1wiXSB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMTBweDtcbiAgICAgIH1cblxuICAgICAgLnR5cGUtbGFiZWwge1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7XG4gICAgICB9XG5cbiAgICAgIC50eXBlLWRlc2Mge1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIG1hcmdpbi10b3A6IDRweDtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cblxuY2xhc3MgQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHRpdGxlOiBzdHJpbmcsXG4gICAgcHJpdmF0ZSBtZXNzYWdlOiBzdHJpbmcsXG4gICAgcHJpdmF0ZSBvbkNvbmZpcm06ICgpID0+IHZvaWQsXG4gICAgcHJpdmF0ZSBvbkNhbmNlbDogKCkgPT4gdm9pZFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIFxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHRoaXMudGl0bGUgfSk7XG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiB0aGlzLm1lc3NhZ2UgfSk7XG5cbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG4gICAgXG4gICAgY29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMub25DYW5jZWwoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGNvbmZpcm1CdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAnRGVsZXRlJyxcbiAgICAgIGNsczogJ21vZC13YXJuaW5nJ1xuICAgIH0pO1xuICAgIGNvbmZpcm1CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB0aGlzLm9uQ29uZmlybSgpO1xuICAgIH0pO1xuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufSIsICIvLyBhbm5vdGF0aW9uTW9kYWwudHNcbmltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIExlYXJuaW5nU3lzdGVtUGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xuaW1wb3J0IHsgQW5ub3RhdGlvbiB9IGZyb20gJy4uLy4uL2NvcmUvQW5ub3RhdGlvbk1hbmFnZXInO1xuaW1wb3J0IHsgQ29udGVudFVuaXQgfSBmcm9tICcuLi8uLi9jb3JlL0RhdGFNYW5hZ2VyJztcblxuZXhwb3J0IGNsYXNzIEFubm90YXRpb25Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBjb250ZW50VW5pdDogQ29udGVudFVuaXQ7XG4gIHByaXZhdGUgZXhpc3RpbmdBbm5vdGF0aW9uPzogQW5ub3RhdGlvbjtcbiAgcHJpdmF0ZSBhbm5vdGF0aW9uVGV4dDogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgYmFkZ2VUZXh0OiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBiYWRnZUNvbG9yOiBzdHJpbmcgPSAnIzVCOUJENSc7XG4gIHByaXZhdGUgb25TYXZlOiAoYW5ub3RhdGlvbjogQW5ub3RhdGlvbikgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4sXG4gICAgY29udGVudFVuaXQ6IENvbnRlbnRVbml0LFxuICAgIG9uU2F2ZTogKGFubm90YXRpb246IEFubm90YXRpb24pID0+IHZvaWRcbiAgKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLmNvbnRlbnRVbml0ID0gY29udGVudFVuaXQ7XG4gICAgdGhpcy5vblNhdmUgPSBvblNhdmU7XG5cbiAgICAvLyBcdTUyQTBcdThGN0RcdTczQjBcdTY3MDlcdTYyNzlcdTZDRThcbiAgICB0aGlzLmV4aXN0aW5nQW5ub3RhdGlvbiA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldENvbnRlbnRBbm5vdGF0aW9uKFxuICAgICAgY29udGVudFVuaXQuaWRcbiAgICApO1xuXG4gICAgaWYgKHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uKSB7XG4gICAgICB0aGlzLmFubm90YXRpb25UZXh0ID0gdGhpcy5leGlzdGluZ0Fubm90YXRpb24uY29udGVudDtcbiAgICAgIGlmICh0aGlzLmV4aXN0aW5nQW5ub3RhdGlvbi5iYWRnZSkge1xuICAgICAgICB0aGlzLmJhZGdlVGV4dCA9IHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uLmJhZGdlLnRleHQ7XG4gICAgICAgIHRoaXMuYmFkZ2VDb2xvciA9IHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uLmJhZGdlLmNvbG9yO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBcbiAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2Fubm90YXRpb24tbW9kYWwnKTtcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyBcbiAgICAgIHRleHQ6IHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uID8gJ0VkaXQgQW5ub3RhdGlvbicgOiAnQWRkIEFubm90YXRpb24nIFxuICAgIH0pO1xuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU1MzlGXHU2NTg3XHU1MTg1XHU1QkI5XG4gICAgY29uc3QgY29udGVudFByZXZpZXcgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnYW5ub3RhdGlvbi1jb250ZW50LXByZXZpZXcnIH0pO1xuICAgIGNvbnRlbnRQcmV2aWV3LmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0NvbnRlbnQ6JyB9KTtcbiAgICBjb250ZW50UHJldmlldy5jcmVhdGVFbCgnYmxvY2txdW90ZScsIHsgdGV4dDogdGhpcy5jb250ZW50VW5pdC5jb250ZW50IH0pO1xuXG4gICAgLy8gXHU2Mjc5XHU2Q0U4XHU2NTg3XHU2NzJDXHU1MzNBXHU1N0RGXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLnNldE5hbWUoJ0Fubm90YXRpb24nKVxuICAgICAgLnNldERlc2MoJ0FkZCB5b3VyIG5vdGVzIG9yIGNvbW1lbnRzIGFib3V0IHRoaXMgY29udGVudCcpXG4gICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB7XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHlvdXIgYW5ub3RhdGlvbiBoZXJlLi4uJylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5hbm5vdGF0aW9uVGV4dClcbiAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5hbm5vdGF0aW9uVGV4dCA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgdGV4dC5pbnB1dEVsLnJvd3MgPSA2O1xuICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICB9KTtcblxuICAgIC8vIFx1ODlEMlx1NjgwN1x1OEJCRVx1N0Y2RVxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdCYWRnZSAoT3B0aW9uYWwpJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5zZXROYW1lKCdCYWRnZSB0ZXh0JylcbiAgICAgIC5zZXREZXNjKCdTaG9ydCB0ZXh0IHRvIGRpc3BsYXkgYXMgYSBiYWRnZSAoZS5nLiwgXCJcdTkxQ0RcdTg5ODFcIiwgXCJcdTVGODVcdTU5MERcdTRFNjBcIiknKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdCYWRnZSB0ZXh0JylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5iYWRnZVRleHQpXG4gICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuYmFkZ2VUZXh0ID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJhZGdlUHJldmlldygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLnNldE5hbWUoJ0JhZGdlIGNvbG9yJylcbiAgICAgIC5zZXREZXNjKCdDaG9vc2UgYSBjb2xvciBmb3IgdGhlIGJhZGdlJylcbiAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgLmFkZE9wdGlvbignIzVCOUJENScsICdcdUQ4M0RcdUREMzUgQmx1ZScpXG4gICAgICAgICAgLmFkZE9wdGlvbignIzcwQUQ0NycsICdcdUQ4M0RcdURGRTIgR3JlZW4nKVxuICAgICAgICAgIC5hZGRPcHRpb24oJyNGRkMwMDAnLCAnXHVEODNEXHVERkUxIFllbGxvdycpXG4gICAgICAgICAgLmFkZE9wdGlvbignI0ZGNkI2QicsICdcdUQ4M0RcdUREMzQgUmVkJylcbiAgICAgICAgICAuYWRkT3B0aW9uKCcjQzc4QkZGJywgJ1x1RDgzRFx1REZFMyBQdXJwbGUnKVxuICAgICAgICAgIC5hZGRPcHRpb24oJyNGRjlGNDMnLCAnXHVEODNEXHVERkUwIE9yYW5nZScpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuYmFkZ2VDb2xvcilcbiAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5iYWRnZUNvbG9yID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJhZGdlUHJldmlldygpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAvLyBcdTg5RDJcdTY4MDdcdTk4ODRcdTg5QzhcbiAgICBjb25zdCBiYWRnZVByZXZpZXcgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnYmFkZ2UtcHJldmlldy1jb250YWluZXInIH0pO1xuICAgIGJhZGdlUHJldmlldy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ByZXZpZXc6ICcsIGNsczogJ3ByZXZpZXctbGFiZWwnIH0pO1xuICAgIGNvbnN0IGJhZGdlRWwgPSBiYWRnZVByZXZpZXcuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ2JhZGdlLXByZXZpZXcnIH0pO1xuICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwgPSBiYWRnZUVsO1xuICAgIHRoaXMudXBkYXRlQmFkZ2VQcmV2aWV3KCk7XG5cbiAgICAvLyBcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG5cbiAgICAvLyBcdTUyMjBcdTk2NjRcdTYzMDlcdTk0QUVcdUZGMDhcdTU5ODJcdTY3OUNcdTY2MkZcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdUZGMDlcbiAgICBpZiAodGhpcy5leGlzdGluZ0Fubm90YXRpb24pIHtcbiAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgdGV4dDogJ0RlbGV0ZScsXG4gICAgICAgIGNsczogJ21vZC13YXJuaW5nJ1xuICAgICAgfSk7XG4gICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlQW5ub3RhdGlvbigpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICB0ZXh0OiAnU2F2ZScsXG4gICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgIH0pO1xuICAgIHNhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVBbm5vdGF0aW9uKCk7XG4gICAgfSk7XG5cbiAgICAvLyBcdTZERkJcdTUyQTBcdTY4MzdcdTVGMEZcbiAgICB0aGlzLmFkZFN0eWxlcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBiYWRnZVByZXZpZXdFbDogSFRNTEVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSB1cGRhdGVCYWRnZVByZXZpZXcoKSB7XG4gICAgaWYgKCF0aGlzLmJhZGdlUHJldmlld0VsKSByZXR1cm47XG5cbiAgICBpZiAodGhpcy5iYWRnZVRleHQpIHtcbiAgICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwudGV4dENvbnRlbnQgPSB0aGlzLmJhZGdlVGV4dDtcbiAgICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5iYWRnZUNvbG9yO1xuICAgICAgdGhpcy5iYWRnZVByZXZpZXdFbC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYmFkZ2VQcmV2aWV3RWwudGV4dENvbnRlbnQgPSAnTm8gYmFkZ2UnO1xuICAgICAgdGhpcy5iYWRnZVByZXZpZXdFbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xuICAgICAgdGhpcy5iYWRnZVByZXZpZXdFbC5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzYXZlQW5ub3RhdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuYW5ub3RhdGlvblRleHQudHJpbSgpKSB7XG4gICAgICBuZXcgTm90aWNlKCdQbGVhc2UgZW50ZXIgYW5ub3RhdGlvbiB0ZXh0Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGxldCBhbm5vdGF0aW9uOiBBbm5vdGF0aW9uO1xuXG4gICAgICBpZiAodGhpcy5leGlzdGluZ0Fubm90YXRpb24pIHtcbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU3M0IwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLnVwZGF0ZUFubm90YXRpb24oXG4gICAgICAgICAgdGhpcy5leGlzdGluZ0Fubm90YXRpb24uaWQsXG4gICAgICAgICAge1xuICAgICAgICAgICAgY29udGVudDogdGhpcy5hbm5vdGF0aW9uVGV4dCxcbiAgICAgICAgICAgIGJhZGdlOiB0aGlzLmJhZGdlVGV4dCA/IHtcbiAgICAgICAgICAgICAgdGV4dDogdGhpcy5iYWRnZVRleHQsXG4gICAgICAgICAgICAgIGNvbG9yOiB0aGlzLmJhZGdlQ29sb3JcbiAgICAgICAgICAgIH0gOiB1bmRlZmluZWRcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIGFubm90YXRpb24gPSB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5nZXRBbm5vdGF0aW9uKFxuICAgICAgICAgIHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uLmlkXG4gICAgICAgICkhO1xuICAgICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIHVwZGF0ZWQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjVCMFx1NjI3OVx1NkNFOFxuICAgICAgICBhbm5vdGF0aW9uID0gYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuYWRkQ29udGVudEFubm90YXRpb24oXG4gICAgICAgICAgdGhpcy5jb250ZW50VW5pdC5pZCxcbiAgICAgICAgICB0aGlzLmFubm90YXRpb25UZXh0LFxuICAgICAgICAgIHRoaXMuYmFkZ2VUZXh0ID8ge1xuICAgICAgICAgICAgdGV4dDogdGhpcy5iYWRnZVRleHQsXG4gICAgICAgICAgICBjb2xvcjogdGhpcy5iYWRnZUNvbG9yXG4gICAgICAgICAgfSA6IHVuZGVmaW5lZFxuICAgICAgICApO1xuICAgICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIGFkZGVkJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMub25TYXZlKGFubm90YXRpb24pO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgYW5ub3RhdGlvbjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdFcnJvciBzYXZpbmcgYW5ub3RhdGlvbicpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZGVsZXRlQW5ub3RhdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuZXhpc3RpbmdBbm5vdGF0aW9uKSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZGVsZXRlQW5ub3RhdGlvbihcbiAgICAgICAgdGhpcy5leGlzdGluZ0Fubm90YXRpb24uaWRcbiAgICAgICk7XG4gICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIGRlbGV0ZWQnKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMub25TYXZlKG51bGwgYXMgYW55KTsgLy8gXHU5MDFBXHU3N0U1XHU1MjIwXHU5NjY0XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGFubm90YXRpb246JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgnRXJyb3IgZGVsZXRpbmcgYW5ub3RhdGlvbicpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkU3R5bGVzKCkge1xuICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAuYW5ub3RhdGlvbi1tb2RhbCB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5hbm5vdGF0aW9uLWNvbnRlbnQtcHJldmlldyB7XG4gICAgICAgIG1hcmdpbjogMjBweCAwO1xuICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgIH1cblxuICAgICAgLmFubm90YXRpb24tY29udGVudC1wcmV2aWV3IGgzIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuYW5ub3RhdGlvbi1jb250ZW50LXByZXZpZXcgYmxvY2txdW90ZSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC5iYWRnZS1wcmV2aWV3LWNvbnRhaW5lciB7XG4gICAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgIH1cblxuICAgICAgLnByZXZpZXctbGFiZWwge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMTBweDtcbiAgICAgIH1cblxuICAgICAgLmJhZGdlLXByZXZpZXcge1xuICAgICAgICBwYWRkaW5nOiA0cHggMTBweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLm1vZGFsLWJ1dHRvbi1jb250YWluZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5tb2RhbC1idXR0b24tY29udGFpbmVyIGJ1dHRvbiB7XG4gICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cblxuLyoqXG4gKiBcdTY1ODdcdTRFRjZcdTYyNzlcdTZDRThcdTZBMjFcdTYwMDFcdTY4NDZcbiAqL1xuZXhwb3J0IGNsYXNzIEZpbGVBbm5vdGF0aW9uTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgZmlsZVBhdGg6IHN0cmluZztcbiAgcHJpdmF0ZSBleGlzdGluZ0Fubm90YXRpb25zOiBBbm5vdGF0aW9uW10gPSBbXTtcbiAgcHJpdmF0ZSBhbm5vdGF0aW9uVGV4dDogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgb25TYXZlOiAoKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGFwcDogQXBwLFxuICAgIHByaXZhdGUgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbixcbiAgICBmaWxlUGF0aDogc3RyaW5nLFxuICAgIG9uU2F2ZTogKCkgPT4gdm9pZFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMuZmlsZVBhdGggPSBmaWxlUGF0aDtcbiAgICB0aGlzLm9uU2F2ZSA9IG9uU2F2ZTtcblxuICAgIC8vIFx1NTJBMFx1OEY3RFx1NzNCMFx1NjcwOVx1NjI3OVx1NkNFOFxuICAgIHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9ucyA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldEZpbGVBbm5vdGF0aW9ucyhmaWxlUGF0aCk7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0ZpbGUgQW5ub3RhdGlvbnMnIH0pO1xuXG4gICAgY29uc3QgZmlsZU5hbWUgPSB0aGlzLmZpbGVQYXRoLnNwbGl0KCcvJykucG9wKCk/LnJlcGxhY2UoJy5tZCcsICcnKSB8fCB0aGlzLmZpbGVQYXRoO1xuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgXG4gICAgICB0ZXh0OiBgRmlsZTogJHtmaWxlTmFtZX1gLFxuICAgICAgY2xzOiAnZmlsZS1uYW1lJ1xuICAgIH0pO1xuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU3M0IwXHU2NzA5XHU2Mjc5XHU2Q0U4XG4gICAgaWYgKHRoaXMuZXhpc3RpbmdBbm5vdGF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBleGlzdGluZ1NlY3Rpb24gPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnZXhpc3RpbmctYW5ub3RhdGlvbnMnIH0pO1xuICAgICAgZXhpc3RpbmdTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0V4aXN0aW5nIEFubm90YXRpb25zJyB9KTtcblxuICAgICAgdGhpcy5leGlzdGluZ0Fubm90YXRpb25zLmZvckVhY2goYW5ub3RhdGlvbiA9PiB7XG4gICAgICAgIGNvbnN0IGFubm90YXRpb25DYXJkID0gZXhpc3RpbmdTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ2Fubm90YXRpb24tY2FyZCcgfSk7XG4gICAgICAgIGFubm90YXRpb25DYXJkLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBhbm5vdGF0aW9uLmNvbnRlbnQgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoYW5ub3RhdGlvbi5tZXRhZGF0YS5jcmVhdGVkQXQpLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuICAgICAgICBhbm5vdGF0aW9uQ2FyZC5jcmVhdGVFbCgnc21hbGwnLCB7IFxuICAgICAgICAgIHRleHQ6IGBDcmVhdGVkOiAke2RhdGV9YCxcbiAgICAgICAgICBjbHM6ICdhbm5vdGF0aW9uLWRhdGUnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGFubm90YXRpb25DYXJkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgdGV4dDogJ1x1RDgzRFx1REREMSBEZWxldGUnLFxuICAgICAgICAgIGNsczogJ2RlbGV0ZS1hbm5vdGF0aW9uLWJ0bidcbiAgICAgICAgfSk7XG4gICAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZUFubm90YXRpb24oYW5ub3RhdGlvbi5pZCk7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgIHRoaXMub25TYXZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU2NUIwXHU2Mjc5XHU2Q0U4XHU4RjkzXHU1MTY1XG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FkZCBOZXcgQW5ub3RhdGlvbicgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAuc2V0TmFtZSgnQW5ub3RhdGlvbicpXG4gICAgICAuc2V0RGVzYygnQWRkIG5vdGVzIGFib3V0IHRoaXMgZmlsZScpXG4gICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB7XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIGZpbGUgYW5ub3RhdGlvbi4uLicpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuYW5ub3RhdGlvblRleHQpXG4gICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuYW5ub3RhdGlvblRleHQgPSB2YWx1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHRleHQuaW5wdXRFbC5yb3dzID0gNDtcbiAgICAgICAgdGV4dC5pbnB1dEVsLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgfSk7XG5cbiAgICAvLyBcdTYzMDlcdTk0QUVcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG5cbiAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc2F2ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgIHRleHQ6ICdTYXZlJyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgc2F2ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZUFubm90YXRpb24oKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2F2ZUFubm90YXRpb24oKSB7XG4gICAgaWYgKCF0aGlzLmFubm90YXRpb25UZXh0LnRyaW0oKSkge1xuICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGVudGVyIGFubm90YXRpb24gdGV4dCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci5hZGRGaWxlQW5ub3RhdGlvbihcbiAgICAgICAgdGhpcy5maWxlUGF0aCxcbiAgICAgICAgdGhpcy5hbm5vdGF0aW9uVGV4dFxuICAgICAgKTtcbiAgICAgIG5ldyBOb3RpY2UoJ0ZpbGUgYW5ub3RhdGlvbiBhZGRlZCcpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgdGhpcy5vblNhdmUoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIGZpbGUgYW5ub3RhdGlvbjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdFcnJvciBzYXZpbmcgZmlsZSBhbm5vdGF0aW9uJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkZWxldGVBbm5vdGF0aW9uKGlkOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZGVsZXRlQW5ub3RhdGlvbihpZCk7XG4gICAgICBuZXcgTm90aWNlKCdBbm5vdGF0aW9uIGRlbGV0ZWQnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgYW5ub3RhdGlvbjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdFcnJvciBkZWxldGluZyBhbm5vdGF0aW9uJyk7XG4gICAgfVxuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufSIsICJpbXBvcnQgeyBQbHVnaW4sIFRGaWxlLCBXb3Jrc3BhY2VMZWFmLCBOb3RpY2UsIE1hcmtkb3duVmlldyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFNldHRpbmdzVGFiIH0gZnJvbSAnLi91aS92aWV3L1NldHRpbmdzVGFiJztcbmltcG9ydCB7IE92ZXJ2aWV3VmlldywgVklFV19UWVBFX09WRVJWSUVXIH0gZnJvbSAnLi91aS92aWV3L092ZXJ2aWV3Vmlldyc7XG5pbXBvcnQgeyBTaWRlYmFyT3ZlcnZpZXdWaWV3LCBWSUVXX1RZUEVfU0lERUJBUl9PVkVSVklFVywgVklFV19UWVBFX01BSU5fT1ZFUlZJRVcgIH0gZnJvbSAnLi91aS92aWV3L1NpZGViYXJPdmVydmlld1ZpZXcnO1xuaW1wb3J0IHsgUmV2aWV3VmlldywgVklFV19UWVBFX1JFVklFVyB9IGZyb20gJy4vdWkvdmlldy9SZXZpZXdWaWV3JztcbmltcG9ydCB7IFN0YXRzVmlldywgVklFV19UWVBFX1NUQVRTIH0gZnJvbSAnLi91aS92aWV3L1N0YXRzVmlldyc7XG5pbXBvcnQgeyBEYXRhTWFuYWdlciB9IGZyb20gJy4vY29yZS9EYXRhTWFuYWdlcic7XG5pbXBvcnQgeyBFeHRyYWN0aW9uRW5naW5lIH0gZnJvbSAnLi9jb3JlL0V4dHJhY3Rpb25FbmdpbmUnO1xuaW1wb3J0IHsgQW5ub3RhdGlvbk1hbmFnZXIgfSBmcm9tICcuL2NvcmUvQW5ub3RhdGlvbk1hbmFnZXInO1xuaW1wb3J0IHsgRmxhc2hjYXJkTWFuYWdlciB9IGZyb20gJy4vY29yZS9GbGFzaGNhcmRNYW5hZ2VyJztcbmltcG9ydCB7IEFuYWx5dGljc0VuZ2luZSB9IGZyb20gJy4vY29yZS9BbmFseXRpY3NFbmdpbmUnO1xuXG5pbnRlcmZhY2UgTGVhcm5pbmdTeXN0ZW1TZXR0aW5ncyB7XG4gIGV4dHJhY3Rpb25FbmFibGVkOiBib29sZWFuO1xuICBhdXRvU2NhbjogYm9vbGVhbjtcbiAgZGVmYXVsdERlY2s6IHN0cmluZztcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTGVhcm5pbmdTeXN0ZW1TZXR0aW5ncyA9IHtcbiAgZXh0cmFjdGlvbkVuYWJsZWQ6IHRydWUsXG4gIGF1dG9TY2FuOiBmYWxzZSxcbiAgZGVmYXVsdERlY2s6ICdEZWZhdWx0J1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5nczogTGVhcm5pbmdTeXN0ZW1TZXR0aW5ncztcbiAgZGF0YU1hbmFnZXI6IERhdGFNYW5hZ2VyO1xuICBleHRyYWN0aW9uRW5naW5lOiBFeHRyYWN0aW9uRW5naW5lO1xuICBhbm5vdGF0aW9uTWFuYWdlcjogQW5ub3RhdGlvbk1hbmFnZXI7XG4gIGZsYXNoY2FyZE1hbmFnZXI6IEZsYXNoY2FyZE1hbmFnZXI7XG4gIGFuYWx5dGljc0VuZ2luZTogQW5hbHl0aWNzRW5naW5lO1xuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICBjb25zb2xlLmxvZygnTG9hZGluZyBMZWFybmluZyBTeXN0ZW0gUGx1Z2luJyk7XG5cbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgLy8gXHU1MjFEXHU1OUNCXHU1MzE2XHU2ODM4XHU1RkMzXHU2QTIxXHU1NzU3XG4gICAgdGhpcy5kYXRhTWFuYWdlciA9IG5ldyBEYXRhTWFuYWdlcih0aGlzLmFwcCwgdGhpcyk7XG4gICAgYXdhaXQgdGhpcy5kYXRhTWFuYWdlci5pbml0aWFsaXplKCk7XG5cbiAgICB0aGlzLmFubm90YXRpb25NYW5hZ2VyID0gbmV3IEFubm90YXRpb25NYW5hZ2VyKHRoaXMuYXBwLCB0aGlzKTtcbiAgICBhd2FpdCB0aGlzLmFubm90YXRpb25NYW5hZ2VyLmluaXRpYWxpemUoKTtcblxuICAgIHRoaXMuZmxhc2hjYXJkTWFuYWdlciA9IG5ldyBGbGFzaGNhcmRNYW5hZ2VyKFxuICAgICAgdGhpcy5hcHAsXG4gICAgICB0aGlzLmRhdGFNYW5hZ2VyLFxuICAgICAgdGhpc1xuICAgICk7XG4gICAgYXdhaXQgdGhpcy5mbGFzaGNhcmRNYW5hZ2VyLmluaXRpYWxpemUoKTtcbiAgICBcblxuICAgIHRoaXMuZXh0cmFjdGlvbkVuZ2luZSA9IG5ldyBFeHRyYWN0aW9uRW5naW5lKFxuICAgICAgdGhpcy5hcHAsXG4gICAgICB0aGlzLmRhdGFNYW5hZ2VyLFxuICAgICAgdGhpcy5mbGFzaGNhcmRNYW5hZ2VyXG4gICAgKTtcblxuICAgIC8vIFx1NkNFOFx1NTE4Q1x1ODlDNlx1NTZGRVxuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX09WRVJWSUVXLFxuICAgICAgKGxlYWYpID0+IG5ldyBPdmVydmlld1ZpZXcobGVhZiwgdGhpcylcbiAgICApO1xuXG4gICAgdGhpcy5yZWdpc3RlclZpZXcoXG4gICAgICBWSUVXX1RZUEVfU0lERUJBUl9PVkVSVklFVyxcbiAgICAgIChsZWFmKSA9PiBuZXcgU2lkZWJhck92ZXJ2aWV3VmlldyhsZWFmLCB0aGlzLCBmYWxzZSlcbiAgICApO1xuICAgIFxuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX01BSU5fT1ZFUlZJRVcsXG4gICAgICAobGVhZikgPT4gbmV3IFNpZGViYXJPdmVydmlld1ZpZXcobGVhZiwgdGhpcywgdHJ1ZSlcbiAgICApO1xuXG4gICAgdGhpcy5yZWdpc3RlclZpZXcoXG4gICAgICBWSUVXX1RZUEVfUkVWSUVXLFxuICAgICAgKGxlYWYpID0+IG5ldyBSZXZpZXdWaWV3KGxlYWYsIHRoaXMpXG4gICAgKTtcblxuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgVklFV19UWVBFX1NUQVRTLFxuICAgICAgKGxlYWYpID0+IG5ldyBTdGF0c1ZpZXcobGVhZiwgdGhpcylcbiAgICApO1xuXG4gICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKCdlZGl0b3ItbWVudScsIChtZW51LCBlZGl0b3IsIHZpZXcpID0+IHtcbiAgICAgICAgaWYgKHZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcpIHtcbiAgICAgICAgICBjb25zdCBmaWxlID0gdmlldy5maWxlO1xuICAgICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICB0aGlzLmV4dHJhY3Rpb25FbmdpbmUucmVnaXN0ZXJDb250ZXh0TWVudShtZW51LCBlZGl0b3IsIGZpbGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICApO1xuICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2V0dGluZ3NUYWIodGhpcy5hcHAsIHRoaXMpKTtcbiAgICB0aGlzLmFkZENvbW1hbmRzKCk7XG5cbiAgICAvLyBSaWJib24gXHU1NkZFXHU2ODA3XG4gICAgdGhpcy5hZGRSaWJib25JY29uKCdsYXlvdXQtbGlzdCcsICdPcGVuIExlYXJuaW5nIE92ZXJ2aWV3KFNpZGViYXIpJywgKCkgPT4ge1xuICAgICAgdGhpcy5hY3RpdmF0ZVNpZGViYXJPdmVydmlldygpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRSaWJib25JY29uKCdsYXllcnMnLCAnU3RhcnQgUmV2aWV3JywgKCkgPT4ge1xuICAgICAgdGhpcy5hY3RpdmF0ZVJldmlldygpO1xuICAgIH0pO1xuXG4gICAgLy8gXHU3MkI2XHU2MDAxXHU2ODBGIC0gXHU2NjNFXHU3OTNBXHU1Rjg1XHU1OTBEXHU0RTYwXHU2NTcwXHU5MUNGXG4gICAgdGhpcy5zZXR1cFN0YXR1c0JhcigpO1xuICAgIFxuICAgIHRoaXMuYW5hbHl0aWNzRW5naW5lID0gbmV3IEFuYWx5dGljc0VuZ2luZSh0aGlzKTtcblxuXG4gICAgY29uc29sZS5sb2coJ0xlYXJuaW5nIFN5c3RlbSBQbHVnaW4gbG9hZGVkJyk7XG4gIH1cblxuICBvbnVubG9hZCgpIHtcbiAgICBjb25zb2xlLmxvZygnVW5sb2FkaW5nIExlYXJuaW5nIFN5c3RlbSBQbHVnaW4nKTtcbiAgICBcbiAgICAvLyBcdTUzRUFcdTU3MjhcdTYzRDJcdTRFRjZcdTVCOENcdTUxNjhcdTUzNzhcdThGN0RcdTY1RjZcdTYyNERcdTZFMDVcdTc0MDZcdTYyNDBcdTY3MDlcdTg5QzZcdTU2RkVcbiAgICAvLyBcdTZDRThcdTYxMEZcdUZGMUFcdThGRDlcdTkxQ0NcdTRFMERcdTg5ODFcdTUyMjBcdTk2NjRcdTcyNzlcdTVCOUFcdTg5QzZcdTU2RkVcdTdDN0JcdTU3OEJcdUZGMENcdThCQTkgT2JzaWRpYW4gXHU4MUVBXHU1REYxXHU3QkExXHU3NDA2XG4gICAgLy8gXHU1M0VBXHU2RTA1XHU3NDA2XHU2M0QyXHU0RUY2XHU3RUE3XHU1MjJCXHU3Njg0XHU4RDQ0XHU2RTkwXG4gICAgXG4gICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWFybmluZy1vdmVydmlldy1zdHlsZXMnKTtcbiAgICBpZiAoc3R5bGVFbCkge1xuICAgICAgc3R5bGVFbC5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gIH1cblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkQ29tbWFuZHMoKSB7XG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnc2Nhbi1jdXJyZW50LWZpbGUnLFxuICAgICAgbmFtZTogJ1NjYW4gY3VycmVudCBmaWxlIGZvciBjb250ZW50JyxcbiAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoIWFjdGl2ZUZpbGUpIHJldHVybjtcbiAgICAgICAgYXdhaXQgdGhpcy5leHRyYWN0aW9uRW5naW5lLnNjYW5GaWxlKGFjdGl2ZUZpbGUpO1xuICAgICAgICB0aGlzLnJlZnJlc2hPdmVydmlldygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnc2Nhbi12YXVsdCcsXG4gICAgICBuYW1lOiAnU2NhbiBlbnRpcmUgdmF1bHQnLFxuICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5leHRyYWN0aW9uRW5naW5lLnNjYW5WYXVsdCgpO1xuICAgICAgICB0aGlzLnJlZnJlc2hPdmVydmlldygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnb3Blbi1vdmVydmlldycsXG4gICAgICBuYW1lOiAnT3BlbiBMZWFybmluZyBPdmVydmlldyhTaWRlYmFyKScsXG4gICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICB0aGlzLmFjdGl2YXRlU2lkZWJhck92ZXJ2aWV3KCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdvcGVuLW1haW4tb3ZlcnZpZXcnLFxuICAgICAgbmFtZTogJ1RvZ2dsZSBMZWFybmluZyBPdmVydmlldyAoTWFpbiBWaWV3KScsXG4gICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCB0aGlzLnRvZ2dsZU1haW5WaWV3KCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdhZGQtZmlsZS1hbm5vdGF0aW9uJyxcbiAgICAgIG5hbWU6ICdBZGQgZmlsZSBhbm5vdGF0aW9uJyxcbiAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoIWFjdGl2ZUZpbGUpIHJldHVybjtcblxuICAgICAgICBjb25zdCB7IEZpbGVBbm5vdGF0aW9uTW9kYWwgfSA9IGF3YWl0IGltcG9ydCgnLi91aS92aWV3L0Fubm90YXRpb25Nb2RhbCcpO1xuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBGaWxlQW5ub3RhdGlvbk1vZGFsKFxuICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgYWN0aXZlRmlsZS5wYXRoLFxuICAgICAgICAgICgpID0+IHRoaXMucmVmcmVzaE92ZXJ2aWV3KClcbiAgICAgICAgKTtcbiAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgIGlkOiAnc3RhcnQtcmV2aWV3JyxcbiAgICAgIG5hbWU6ICdTdGFydCBmbGFzaGNhcmQgcmV2aWV3JyxcbiAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuYWN0aXZhdGVSZXZpZXcoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICBpZDogJ3Nob3ctc3RhdHMnLFxuICAgICAgbmFtZTogJ1Nob3cgZmxhc2hjYXJkIHN0YXRpc3RpY3MnLFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgdGhpcy5hY3RpdmF0ZVN0YXRzKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgXG4gIGFzeW5jIGFjdGl2YXRlTWFpblZpZXcoKSB7XG4gICAgY29uc3QgeyB3b3Jrc3BhY2UgfSA9IHRoaXMuYXBwO1xuXG4gICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU3RUNGXHU2NzA5XHU0RTNCXHU3NTRDXHU5NzYyXHU4OUM2XHU1NkZFXHU2MjUzXHU1RjAwXG4gICAgbGV0IGxlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9NQUlOX09WRVJWSUVXKVswXTtcbiAgICBcbiAgICBpZiAoIWxlYWYpIHtcbiAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjVCMFx1NzY4NFx1NjgwN1x1N0I3RVx1OTg3NVxuICAgICAgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWFmKCd0YWInKTtcbiAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgdHlwZTogVklFV19UWVBFX01BSU5fT1ZFUlZJRVcsXG4gICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHdvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuICB9XG4gIGFzeW5jIHRvZ2dsZU1haW5WaWV3KCkge1xuICAgIGNvbnN0IHsgd29ya3NwYWNlIH0gPSB0aGlzLmFwcDtcbiAgICBjb25zdCBleGlzdGluZ0xlYXZlcyA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX01BSU5fT1ZFUlZJRVcpO1xuICAgIFxuICAgIC8vIFx1NjhDMFx1NjdFNVx1NUY1M1x1NTI0RFx1NkZDMFx1NkQzQlx1NzY4NFx1OTg3NVx1OTc2Mlx1NjYyRlx1NTQyNlx1NjYyRlx1NEUzQlx1NzU0Q1x1OTc2Mlx1NkEyMVx1NUYwRlxuICAgIGNvbnN0IGFjdGl2ZUxlYWYgPSB3b3Jrc3BhY2UuYWN0aXZlTGVhZjtcbiAgICBjb25zdCBpc01haW5PdmVydmlld0FjdGl2ZSA9IGFjdGl2ZUxlYWYgJiYgXG4gICAgICBhY3RpdmVMZWFmLnZpZXcuZ2V0Vmlld1R5cGUoKSA9PT0gVklFV19UWVBFX01BSU5fT1ZFUlZJRVc7XG4gICAgXG4gICAgaWYgKGV4aXN0aW5nTGVhdmVzLmxlbmd0aCA+IDAgJiYgaXNNYWluT3ZlcnZpZXdBY3RpdmUpIHtcbiAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NEUzQlx1NzU0Q1x1OTc2Mlx1NkEyMVx1NUYwRlx1NkI2M1x1NTcyOFx1NjYzRVx1NzkzQVx1NEUxNFx1NjYyRlx1NUY1M1x1NTI0RFx1NkZDMFx1NkQzQlx1OTg3NVx1OTc2Mlx1RkYwQ1x1NTIxOVx1NTE3M1x1OTVFRFx1NUI4M1xuICAgICAgZXhpc3RpbmdMZWF2ZXMuZm9yRWFjaChsZWFmID0+IHtcbiAgICAgICAgbGVhZi5kZXRhY2goKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoZXhpc3RpbmdMZWF2ZXMubGVuZ3RoID4gMCAmJiAhaXNNYWluT3ZlcnZpZXdBY3RpdmUpIHtcbiAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NEUzQlx1NzU0Q1x1OTc2Mlx1NkEyMVx1NUYwRlx1NUI1OFx1NTcyOFx1NEY0Nlx1NEUwRFx1NjYyRlx1NUY1M1x1NTI0RFx1NkZDMFx1NkQzQlx1OTg3NVx1OTc2Mlx1RkYwQ1x1NTIxOVx1NkZDMFx1NkQzQlx1NUI4M1xuICAgICAgd29ya3NwYWNlLnJldmVhbExlYWYoZXhpc3RpbmdMZWF2ZXNbMF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTU5ODJcdTY3OUNcdTRFM0JcdTc1NENcdTk3NjJcdTZBMjFcdTVGMEZcdTRFMERcdTVCNThcdTU3MjhcdUZGMENcdTUyMTlcdTUyMUJcdTVFRkFcdTVFNzZcdTY2M0VcdTc5M0FcbiAgICAgIGNvbnN0IGxlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhZigndGFiJyk7XG4gICAgICBhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgIHR5cGU6IFZJRVdfVFlQRV9NQUlOX09WRVJWSUVXLFxuICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICB9KTtcbiAgICAgIHdvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuICAgIH1cbiAgfVxuICBhc3luYyBhY3RpdmF0ZVNpZGViYXJPdmVydmlldygpIHtcbiAgICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG4gICAgXG4gICAgbGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcbiAgICBjb25zdCBsZWF2ZXMgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9TSURFQkFSX09WRVJWSUVXKTtcblxuICAgIGlmIChsZWF2ZXMubGVuZ3RoID4gMCkge1xuICAgICAgbGVhZiA9IGxlYXZlc1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU1NzI4XHU1M0YzXHU0RkE3XHU4RkI5XHU2ODBGXHU1MjFCXHU1RUZBXHU2NUIwXHU3Njg0XHU4OUM2XHU1NkZFXG4gICAgICBsZWFmID0gd29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG4gICAgICBhd2FpdCBsZWFmPy5zZXRWaWV3U3RhdGUoe1xuICAgICAgICB0eXBlOiBWSUVXX1RZUEVfU0lERUJBUl9PVkVSVklFVyxcbiAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAobGVhZikge1xuICAgICAgd29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVPdmVydmlldygpIHtcbiAgICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG4gICAgbGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcbiAgICBjb25zdCBsZWF2ZXMgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9PVkVSVklFVyk7XG5cbiAgICBpZiAobGVhdmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGxlYWYgPSBsZWF2ZXNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhZihgdGFiYCk7XG4gICAgICBhd2FpdCBsZWFmPy5zZXRWaWV3U3RhdGUoe1xuICAgICAgICB0eXBlOiBWSUVXX1RZUEVfT1ZFUlZJRVcsXG4gICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGxlYWYpIHtcbiAgICAgIHdvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlUmV2aWV3KCkge1xuICAgIGNvbnN0IHN0YXRzID0gdGhpcy5mbGFzaGNhcmRNYW5hZ2VyLmdldFN0YXRzKCk7XG4gICAgXG4gICAgaWYgKHN0YXRzLmR1ZSA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnTm8gY2FyZHMgZHVlIGZvciByZXZpZXchJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgeyB3b3Jrc3BhY2UgfSA9IHRoaXMuYXBwO1xuICAgIGxldCBsZWFmOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCA9IG51bGw7XG4gICAgY29uc3QgbGVhdmVzID0gd29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfUkVWSUVXKTtcblxuICAgIGlmIChsZWF2ZXMubGVuZ3RoID4gMCkge1xuICAgICAgbGVhZiA9IGxlYXZlc1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGVhZiA9IHdvcmtzcGFjZS5nZXRMZWFmKHRydWUpO1xuICAgICAgYXdhaXQgbGVhZj8uc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgdHlwZTogVklFV19UWVBFX1JFVklFVyxcbiAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAobGVhZikge1xuICAgICAgd29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVTdGF0cygpIHtcbiAgICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG4gICAgbGV0IGxlYWY6IFdvcmtzcGFjZUxlYWYgfCBudWxsID0gbnVsbDtcbiAgICBjb25zdCBsZWF2ZXMgPSB3b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9TVEFUUyk7XG5cbiAgICBpZiAobGVhdmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGxlYWYgPSBsZWF2ZXNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxlYWYgPSB3b3Jrc3BhY2UuZ2V0TGVhZigndGFiJyk7XG4gICAgICBhd2FpdCBsZWFmPy5zZXRWaWV3U3RhdGUoe1xuICAgICAgICB0eXBlOiBWSUVXX1RZUEVfU1RBVFMsXG4gICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGxlYWYpIHtcbiAgICAgIHdvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuICAgIH1cbiAgfVxuXG4gIHJlZnJlc2hPdmVydmlldygpIHtcbiAgICAvLyBcdTUyMzdcdTY1QjBcdTY1RTdcdTcyNDggT3ZlcnZpZXdcbiAgICBjb25zdCBvdmVydmlld0xlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX09WRVJWSUVXKTtcbiAgICBvdmVydmlld0xlYXZlcy5mb3JFYWNoKGxlYWYgPT4ge1xuICAgICAgY29uc3QgdmlldyA9IGxlYWYudmlldyBhcyBPdmVydmlld1ZpZXc7XG4gICAgICBpZiAodmlldyAmJiB0eXBlb2Ygdmlldy5yZWZyZXNoID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHZpZXcucmVmcmVzaCgpO1xuICAgICAgfVxuICAgIH0pO1xuICBcbiAgICAvLyBcdTUyMzdcdTY1QjBcdTRGQTdcdThGQjlcdTY4MEZcdTg5QzZcdTU2RkVcbiAgICBjb25zdCBzaWRlYmFyTGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfU0lERUJBUl9PVkVSVklFVyk7XG4gICAgc2lkZWJhckxlYXZlcy5mb3JFYWNoKGxlYWYgPT4ge1xuICAgICAgY29uc3QgdmlldyA9IGxlYWYudmlldyBhcyBTaWRlYmFyT3ZlcnZpZXdWaWV3O1xuICAgICAgaWYgKHZpZXcgJiYgdHlwZW9mIHZpZXcucmVmcmVzaCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2aWV3LnJlZnJlc2goKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgXG4gICAgLy8gXHU1MjM3XHU2NUIwXHU0RTNCXHU3NTRDXHU5NzYyXHU4OUM2XHU1NkZFXG4gICAgY29uc3QgbWFpbkxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX01BSU5fT1ZFUlZJRVcpO1xuICAgIG1haW5MZWF2ZXMuZm9yRWFjaChsZWFmID0+IHtcbiAgICAgIGNvbnN0IHZpZXcgPSBsZWFmLnZpZXcgYXMgU2lkZWJhck92ZXJ2aWV3VmlldztcbiAgICAgIGlmICh2aWV3ICYmIHR5cGVvZiB2aWV3LnJlZnJlc2ggPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmlldy5yZWZyZXNoKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwU3RhdHVzQmFyKCkge1xuICAgIGNvbnN0IHN0YXR1c0Jhckl0ZW0gPSB0aGlzLmFkZFN0YXR1c0Jhckl0ZW0oKTtcbiAgICBzdGF0dXNCYXJJdGVtLmFkZENsYXNzKCdsZWFybmluZy1zeXN0ZW0tc3RhdHVzJyk7XG4gICAgXG4gICAgY29uc3QgdXBkYXRlU3RhdHVzID0gKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhdHMgPSB0aGlzLmZsYXNoY2FyZE1hbmFnZXIuZ2V0U3RhdHMoKTtcbiAgICAgIHN0YXR1c0Jhckl0ZW0uc2V0VGV4dChgXHVEODNDXHVEQ0NGICR7c3RhdHMuZHVlfSBkdWVgKTtcbiAgICAgIHN0YXR1c0Jhckl0ZW0udGl0bGUgPSBgJHtzdGF0cy5kdWV9IGNhcmRzIGR1ZSBmb3IgcmV2aWV3XFxuJHtzdGF0cy5uZXd9IG5ldyBjYXJkc2A7XG4gICAgfTtcblxuICAgIC8vIFx1NTIxRFx1NTlDQlx1NjZGNFx1NjVCMFxuICAgIHVwZGF0ZVN0YXR1cygpO1xuXG4gICAgLy8gXHU2QkNGXHU1MjA2XHU5NDlGXHU2NkY0XHU2NUIwXHU0RTAwXHU2QjIxXG4gICAgdGhpcy5yZWdpc3RlckludGVydmFsKFxuICAgICAgd2luZG93LnNldEludGVydmFsKHVwZGF0ZVN0YXR1cywgNjAwMDApXG4gICAgKTtcblxuICAgIC8vIFx1NzBCOVx1NTFGQlx1NjI1M1x1NUYwMFx1NTkwRFx1NEU2MFxuICAgIHN0YXR1c0Jhckl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmFjdGl2YXRlUmV2aWV3KCk7XG4gICAgfSk7XG4gIH1cbn0iLCAiLy8gU2V0dGluZ3NUYWIudHNcbmltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIExlYXJuaW5nU3lzdGVtUGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xuXG5leHBvcnQgY2xhc3MgU2V0dGluZ3NUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbjtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnTGVhcm5pbmcgU3lzdGVtIFNldHRpbmdzJyB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0VuYWJsZSBleHRyYWN0aW9uJylcbiAgICAgIC5zZXREZXNjKCdFbmFibGUgYXV0b21hdGljIGNvbnRlbnQgZXh0cmFjdGlvbicpXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PlxuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZXh0cmFjdGlvbkVuYWJsZWQpXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmV4dHJhY3Rpb25FbmFibGVkID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoJ0F1dG8gc2NhbicpXG4gICAgICAuc2V0RGVzYygnQXV0b21hdGljYWxseSBzY2FuIGZpbGVzIHdoZW4gdGhleSBhcmUgb3BlbmVkJylcbiAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvU2NhbilcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1NjYW4gPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZSgnRGVmYXVsdCBkZWNrJylcbiAgICAgIC5zZXREZXNjKCdEZWZhdWx0IGRlY2sgbmFtZSBmb3IgbmV3IGZsYXNoY2FyZHMnKVxuICAgICAgLmFkZFRleHQodGV4dCA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdEZWZhdWx0JylcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdERlY2spXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHREZWNrID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KVxuICAgICAgKTtcbiAgfVxufSIsICIvLyBzcmMvdWkvc3R5bGVzL1N0eWxlTG9hZGVyLnRzXG5cbi8qKlxuICogXHU2ODM3XHU1RjBGXHU1MkEwXHU4RjdEXHU1NjY4IC0gXHU4RDFGXHU4RDIzXHU2Q0U4XHU1MTY1XHU1NDhDXHU3QkExXHU3NDA2IENTU1xuICovXG5leHBvcnQgY2xhc3MgU3R5bGVMb2FkZXIge1xuICAgIHByaXZhdGUgc3RhdGljIHN0eWxlSWQgPSAnbGVhcm5pbmctb3ZlcnZpZXctc3R5bGVzJztcbiAgICBwcml2YXRlIHN0YXRpYyBpc0luamVjdGVkID0gZmFsc2U7XG4gIFxuICAgIC8qKlxuICAgICAqIFx1NkNFOFx1NTE2NVx1NjgzN1x1NUYwRlx1NTIzMFx1OTg3NVx1OTc2MlxuICAgICAqL1xuICAgIHN0YXRpYyBpbmplY3QoKTogdm9pZCB7XG4gICAgICBpZiAodGhpcy5pc0luamVjdGVkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc3R5bGVJZCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICBcbiAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgc3R5bGVFbC5pZCA9IHRoaXMuc3R5bGVJZDtcbiAgICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSB0aGlzLmdldFN0eWxlcygpO1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICAgIFxuICAgICAgdGhpcy5pc0luamVjdGVkID0gdHJ1ZTtcbiAgICB9XG4gIFxuICAgIC8qKlxuICAgICAqIFx1NzlGQlx1OTY2NFx1NjgzN1x1NUYwRlxuICAgICAqL1xuICAgIHN0YXRpYyByZW1vdmUoKTogdm9pZCB7XG4gICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zdHlsZUlkKTtcbiAgICAgIGlmIChzdHlsZUVsKSB7XG4gICAgICAgIHN0eWxlRWwucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuaXNJbmplY3RlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgXG4gICAgLyoqXG4gICAgICogXHU4M0I3XHU1M0Q2XHU2MjQwXHU2NzA5XHU2ODM3XHU1RjBGXHVGRjA4XHU0RUNFXHU4RkQ5XHU5MUNDXHU3RURGXHU0RTAwXHU3QkExXHU3NDA2XHVGRjA5XG4gICAgICovXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0U3R5bGVzKCk6IHN0cmluZyB7XG4gICAgICByZXR1cm4gYFxuICAvKiA9PT09PT09PT09PT09PT09PT09PSBDU1MgXHU1M0Q4XHU5MUNGXHU5MTREXHU3RjZFID09PT09PT09PT09PT09PT09PT09ICovXG4gIC5sZWFybmluZy1vdmVydmlldy1jb250YWluZXIge1xuICAgIC0tb3ZlcnZpZXctc2lkZWJhci13aWR0aDogMjUwcHg7XG4gICAgLS1vdmVydmlldy1jYXJkLWdhcDogOHB4O1xuICAgIC0tb3ZlcnZpZXctYm9yZGVyLXJhZGl1czogNnB4O1xuICAgIC0tb3ZlcnZpZXctdHJhbnNpdGlvbjogYWxsIDAuMnMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKTtcbiAgfVxuICBcbiAgLyogPT09PT09PT09PT09PT09PT09PT0gXHU1MTY4XHU1QzQwXHU1QkI5XHU1NjY4ID09PT09PT09PT09PT09PT09PT09ICovXG4gIC5sZWFybmluZy1vdmVydmlldy1jb250YWluZXIge1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICB9XG4gIFxuICAvKiA9PT09PT09PT09PT09PT09PT09PSBcdTRGQTdcdThGQjlcdTY4MEZcdTZBMjFcdTVGMEYgPT09PT09PT09PT09PT09PT09PT0gKi9cbiAgLmxlYXJuaW5nLW92ZXJ2aWV3LWNvbnRhaW5lcltkYXRhLW1vZGU9XCJzaWRlYmFyXCJdIHtcbiAgICBwYWRkaW5nOiAwO1xuICB9XG4gIFxuICAuc2lkZWJhci10b29sYmFyIHtcbiAgICBwYWRkaW5nOiAxMnB4O1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICBmbGV4LXNocmluazogMDtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgei1pbmRleDogMTA7XG4gIH1cbiAgXG4gIC5zaWRlYmFyLWNvbnRlbnQtbGlzdCB7XG4gICAgZmxleDogMTtcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgIHBhZGRpbmc6IHZhcigtLW92ZXJ2aWV3LWNhcmQtZ2FwKTtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgei1pbmRleDogMTtcbiAgfVxuICBcbiAgLyogPT09PT09PT09PT09PT09PT09PT0gXHU1REU1XHU1MTc3XHU2ODBGXHU3RUM0XHU0RUY2ID09PT09PT09PT09PT09PT09PT09ICovXG4gIC5zZWFyY2gtY29udGFpbmVyIHtcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICB9XG4gIFxuICAuc2VhcmNoLWlucHV0IHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tb3ZlcnZpZXctYm9yZGVyLXJhZGl1cyk7XG4gICAgZm9udC1zaXplOiAxM3B4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICB0cmFuc2l0aW9uOiB2YXIoLS1vdmVydmlldy10cmFuc2l0aW9uKTtcbiAgfVxuICBcbiAgLnNlYXJjaC1pbnB1dDpmb2N1cyB7XG4gICAgb3V0bGluZTogbm9uZTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gIH1cbiAgXG4gIC5maWx0ZXItY2hpcHMge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZ2FwOiA2cHg7XG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgfVxuICBcbiAgLmZpbHRlci1jaGlwIHtcbiAgICBmbGV4OiAxO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBwYWRkaW5nOiA2cHggOHB4O1xuICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgdHJhbnNpdGlvbjogdmFyKC0tb3ZlcnZpZXctdHJhbnNpdGlvbik7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XG4gIH1cbiAgXG4gIC5maWx0ZXItY2hpcDpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gIH1cbiAgXG4gIC5maWx0ZXItY2hpcC5hY3RpdmUge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICBmb250LXdlaWdodDogNjAwO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgfVxuICBcbiAgLmdyb3VwLXN3aXRjaGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGdhcDogNnB4O1xuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gIH1cbiAgXG4gIC5ncm91cC1idG4ge1xuICAgIGZsZXg6IDE7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIHBhZGRpbmc6IDZweDtcbiAgICBmb250LXNpemU6IDE2cHg7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tb3ZlcnZpZXctYm9yZGVyLXJhZGl1cyk7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB0cmFuc2l0aW9uOiB2YXIoLS1vdmVydmlldy10cmFuc2l0aW9uKTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgfVxuICBcbiAgLmdyb3VwLWJ0bjpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gIH1cbiAgXG4gIC5ncm91cC1idG4uYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpO1xuICB9XG4gIFxuICAvKiA9PT09PT09PT09PT09PT09PT09PSBcdTYyNzlcdTkxQ0ZcdTY0Q0RcdTRGNUMgPT09PT09PT09PT09PT09PT09PT0gKi9cbiAgLnN0YXRzLXJvdyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICBnYXA6IDNweDtcbiAgfVxuICBcbiAgLmhlYWRlci1hY3Rpb25zIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGdhcDogOHB4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIH1cbiAgXG4gIC5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuLXNpZGViYXIsXG4gIC5iYXRjaC1kZWxldGUtYnRuLXNpZGViYXIsXG4gIC5jYW5jZWwtc2VsZWN0aW9uLWJ0bi1zaWRlYmFyIHtcbiAgICBwYWRkaW5nOiA2cHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLW92ZXJ2aWV3LWJvcmRlci1yYWRpdXMpO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgdHJhbnNpdGlvbjogdmFyKC0tb3ZlcnZpZXctdHJhbnNpdGlvbik7XG4gICAgZm9udC1zaXplOiAxMXB4O1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgfVxuICBcbiAgLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG4tc2lkZWJhcjpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICB9XG4gIFxuICAuYmF0Y2gtZGVsZXRlLWJ0bi1zaWRlYmFyOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gIH1cbiAgXG4gIC5jYW5jZWwtc2VsZWN0aW9uLWJ0bi1zaWRlYmFyOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gIH1cbiAgXG4gIC5iYXRjaC1jcmVhdGUtY2FyZHMtYnRuLWhlYWRlcixcbiAgLmJhdGNoLWRlbGV0ZS1idG4taGVhZGVyLFxuICAuY2FuY2VsLXNlbGVjdGlvbi1idG4taGVhZGVyIHtcbiAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICBmb250LXNpemU6IDEzcHg7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tb3ZlcnZpZXctYm9yZGVyLXJhZGl1cyk7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgdHJhbnNpdGlvbjogdmFyKC0tb3ZlcnZpZXctdHJhbnNpdGlvbik7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICB9XG4gIFxuICAuYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bi1oZWFkZXI6aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgfVxuICBcbiAgLmJhdGNoLWRlbGV0ZS1idG4taGVhZGVyOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gIH1cbiAgXG4gIC5jYW5jZWwtc2VsZWN0aW9uLWJ0bi1oZWFkZXI6aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgfVxuICBcbiAgLnNlbGVjdC1hbGwtYnRuLXNpZGViYXIge1xuICAgIHBhZGRpbmc6IDZweCAxMnB4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1vdmVydmlldy1ib3JkZXItcmFkaXVzKTtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHRyYW5zaXRpb246IHZhcigtLW92ZXJ2aWV3LXRyYW5zaXRpb24pO1xuICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGZsZXgtc2hyaW5rOiAwO1xuICB9XG4gIFxuICAuc2VsZWN0LWFsbC1idG4tc2lkZWJhcjpob3ZlcixcbiAgLnNlbGVjdC1hbGwtYnRuLXNpZGViYXIuY29tcGxldGVkIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBjb2xvcjogd2hpdGU7XG4gIH1cbiAgXG4gIC5zZWxlY3QtYWxsLWJ0bi1oZWFkZXIge1xuICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1vdmVydmlldy1ib3JkZXItcmFkaXVzKTtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHRyYW5zaXRpb246IHZhcigtLW92ZXJ2aWV3LXRyYW5zaXRpb24pO1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYmEoMCwgMCwgMCwgMC4wOCk7XG4gIH1cbiAgXG4gIC5zZWxlY3QtYWxsLWJ0bi1oZWFkZXI6aG92ZXIsXG4gIC5zZWxlY3QtYWxsLWJ0bi1oZWFkZXIuY29tcGxldGVkIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTtcbiAgICBib3gtc2hhZG93OiAwIDJweCA2cHggcmdiYSgwLCAwLCAwLCAwLjE1KTtcbiAgfVxuICBcbiAgLnN0YXRzLWJhZGdlIHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgZm9udC1zaXplOiAxMXB4O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICBwYWRkaW5nOiA0cHg7XG4gICAgZmxleDogMTtcbiAgfVxuICBcbiAgLmJhdGNoLWFjdGlvbnMge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZ2FwOiA2cHg7XG4gICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgcGFkZGluZzogOHB4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5LWFsdCk7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tb3ZlcnZpZXctYm9yZGVyLXJhZGl1cyk7XG4gICAgYW5pbWF0aW9uOiBzbGlkZURvd24gMC4ycyBlYXNlO1xuICB9XG4gIFxuICAvKiA9PT09PT09PT09PT09PT09PT09PSBcdTUzNjFcdTcyNDdcdTY4MzdcdTVGMEYgPT09PT09PT09PT09PT09PT09PT0gKi9cbiAgLmNvbXBhY3QtY2FyZCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBnYXA6IDhweDtcbiAgICBwYWRkaW5nOiAxMHB4O1xuICAgIG1hcmdpbjogNHB4IDA7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tb3ZlcnZpZXctYm9yZGVyLXJhZGl1cyk7XG4gICAgdHJhbnNpdGlvbjogdmFyKC0tb3ZlcnZpZXctdHJhbnNpdGlvbik7XG4gIH1cbiAgXG4gIC5jb21wYWN0LWNhcmQ6aG92ZXIge1xuICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMnB4KTtcbiAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICB9XG4gIFxuICAuY2FyZC1pbmRpY2F0b3Ige1xuICAgIHdpZHRoOiA0cHg7XG4gICAgYm9yZGVyLXJhZGl1czogMnB4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBmbGV4LXNocmluazogMDtcbiAgICB0cmFuc2l0aW9uOiB2YXIoLS1vdmVydmlldy10cmFuc2l0aW9uKTtcbiAgfVxuICBcbiAgLmNhcmQtaW5kaWNhdG9yLnR5cGUtcWEge1xuICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sIHRyYW5zcGFyZW50IDAlLCB0cmFuc3BhcmVudCA1MCUsICMxMGI5ODEgNTAlLCAjMTBiOTgxIDEwMCUpO1xuICB9XG4gIFxuICAuY2FyZC1pbmRpY2F0b3IudHlwZS1jbG96ZSB7XG4gICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgdHJhbnNwYXJlbnQgMCUsIHRyYW5zcGFyZW50IDUwJSwgI0ZGRjE3NiA1MCUsICNGRkYxNzYgMTAwJSk7XG4gIH1cbiAgXG4gIC5jYXJkLWluZGljYXRvci50eXBlLXRleHQge1xuICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sIHRyYW5zcGFyZW50IDAlLCB0cmFuc3BhcmVudCA1MCUsICM2YjcyODAgNTAlLCAjNmI3MjgwIDEwMCUpO1xuICB9XG4gIFxuICAuY2FyZC1pbmRpY2F0b3IudHlwZS1xYS5oYXMtYW5ub3RhdGlvbiB7XG4gICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgIzNiODJmNiAwJSwgIzNiODJmNiA1MCUsICMxMGI5ODEgNTAlLCAjMTBiOTgxIDEwMCUpO1xuICB9XG4gIFxuICAuY2FyZC1pbmRpY2F0b3IudHlwZS1jbG96ZS5oYXMtYW5ub3RhdGlvbiB7XG4gICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgIzNiODJmNiAwJSwgIzNiODJmNiA1MCUsICNGRkYxNzYgNTAlLCAjRkZGMTc2IDEwMCUpO1xuICB9XG4gIFxuICAuY2FyZC1pbmRpY2F0b3IudHlwZS10ZXh0Lmhhcy1hbm5vdGF0aW9uIHtcbiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjM2I4MmY2IDAlLCAjM2I4MmY2IDUwJSwgIzZiNzI4MCA1MCUsICM2YjcyODAgMTAwJSk7XG4gIH1cbiAgXG4gIC50eXBlLWluZGljYXRvciB7XG4gICAgcGFkZGluZzogMnB4IDhweDtcbiAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICBmb250LXdlaWdodDogNjAwO1xuICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gIH1cbiAgXG4gIC50eXBlLWluZGljYXRvci50eXBlLXFhIHtcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDE2LCAxODUsIDEyOSwgMC4yKTtcbiAgICBjb2xvcjogIzEwYjk4MTtcbiAgfVxuICBcbiAgLnR5cGUtaW5kaWNhdG9yLnR5cGUtY2xvemUge1xuICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNDEsIDExOCwgMC4yKTtcbiAgICBjb2xvcjogI0ZGRjE3NjtcbiAgfVxuICBcbiAgLnR5cGUtaW5kaWNhdG9yLnR5cGUtdGV4dCB7XG4gICAgYmFja2dyb3VuZDogcmdiYSgxMDcsIDExNCwgMTI4LCAwLjIpO1xuICAgIGNvbG9yOiAjNmI3MjgwO1xuICB9XG4gIFxuICAuY2FyZC1jb250ZW50IHtcbiAgICBmbGV4OiAxO1xuICAgIG1pbi13aWR0aDogMDtcbiAgfVxuICBcbiAgLmNhcmQtaGVhZGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgfVxuICBcbiAgLmNhcmQtdG9vbHMge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZ2FwOiA0cHg7XG4gIH1cbiAgXG4gIC50b29sLWJ0biB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBwYWRkaW5nOiA0cHg7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIHRyYW5zaXRpb246IHZhcigtLW92ZXJ2aWV3LXRyYW5zaXRpb24pO1xuICB9XG4gIFxuICAudG9vbC1idG46aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICB9XG4gIFxuICAuYW5ub3RhdGlvbi1idG4ge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgcGFkZGluZzogNHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICB0cmFuc2l0aW9uOiB2YXIoLS1vdmVydmlldy10cmFuc2l0aW9uKTtcbiAgfVxuICBcbiAgLmFubm90YXRpb24tYnRuOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7XG4gIH1cbiAgXG4gIC5ub3RlLXRleHQge1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICBsaW5lLWhlaWdodDogMS42O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xuICAgIHdoaXRlLXNwYWNlOiBub3JtYWw7XG4gICAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDtcbiAgICBtYXJnaW4tYm90dG9tOiA2cHg7XG4gIH1cbiAgXG4gIC5ub3RlLXRleHQ6aG92ZXIge1xuICAgIGNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICB9XG4gIFxuICAucWEtcXVlc3Rpb24ge1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgfVxuICBcbiAgLnFhLXNlcGFyYXRvciB7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIG1hcmdpbjogMCA0cHg7XG4gIH1cbiAgXG4gIC5xYS1hbnN3ZXIge1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCk7XG4gICAgZm9udC1zdHlsZTogaXRhbGljO1xuICB9XG4gIFxuICAuY2xvemUtaGlnaGxpZ2h0IHtcbiAgICBjb2xvcjogI2Y1OWUwYjtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIHBhZGRpbmc6IDFweCAzcHg7XG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICB9XG4gIFxuICAuYW5ub3RhdGlvbi1wcmV2aWV3IHtcbiAgICBmb250LXNpemU6IDExcHg7XG4gICAgbGluZS1oZWlnaHQ6IDEuNDtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgcGFkZGluZzogNnB4IDhweDtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIG1hcmdpbi10b3A6IDZweDtcbiAgICBib3JkZXItbGVmdDogM3B4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHRyYW5zaXRpb246IHZhcigtLW92ZXJ2aWV3LXRyYW5zaXRpb24pO1xuICB9XG4gIFxuICAuYW5ub3RhdGlvbi1wcmV2aWV3OmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgfVxuICBcbiAgLmNhcmQtbWV0YSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICBnYXA6IDZweDtcbiAgICBtYXJnaW4tdG9wOiA4cHg7XG4gIH1cbiAgXG4gIC50YWcge1xuICAgIHBhZGRpbmc6IDJweCA2cHg7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tdGFnLWJhY2tncm91bmQpO1xuICAgIGNvbG9yOiB2YXIoLS10YWctY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBmb250LXNpemU6IDEwcHg7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgfVxuICBcbiAgLmJhZGdlIHtcbiAgICBwYWRkaW5nOiAycHggNnB4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgZm9udC1zaXplOiAxMHB4O1xuICB9XG4gIFxuICAuZ3JvdXAtaGVhZGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgZ2FwOiA2cHg7XG4gICAgcGFkZGluZzogNnB4IDhweDtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tb3ZlcnZpZXctYm9yZGVyLXJhZGl1cyk7XG4gICAgbWFyZ2luLWJvdHRvbTogNnB4O1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICBmb250LXdlaWdodDogNjAwO1xuICAgIHBvc2l0aW9uOiBzdGlja3k7XG4gICAgdG9wOiAwO1xuICAgIHotaW5kZXg6IDEwO1xuICB9XG4gIFxuICAvKiA9PT09PT09PT09PT09PT09PT09PSBcdTYyNzlcdTZDRThcdTdGMTZcdThGOTFcdTU2NjggPT09PT09PT09PT09PT09PT09PT0gKi9cbiAgLmlubGluZS1hbm5vdGF0aW9uLWVkaXRvciB7XG4gICAgbWFyZ2luLXRvcDogOHB4O1xuICAgIHBhZGRpbmc6IDA7XG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgYW5pbWF0aW9uOiBzbGlkZURvd24gMC4xNXMgZWFzZS1vdXQ7XG4gIH1cbiAgXG4gIC5pbmxpbmUtYW5ub3RhdGlvbi10ZXh0YXJlYSB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgbWluLWhlaWdodDogODBweDtcbiAgICBwYWRkaW5nOiAxMnB4IDE0cHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLW92ZXJ2aWV3LWJvcmRlci1yYWRpdXMpO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeS1hbHQpO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgZm9udC1mYW1pbHk6IHZhcigtLWZvbnQtdGV4dCk7XG4gICAgZm9udC1zaXplOiAxM3B4O1xuICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgcmVzaXplOiB2ZXJ0aWNhbDtcbiAgICB0cmFuc2l0aW9uOiB2YXIoLS1vdmVydmlldy10cmFuc2l0aW9uKTtcbiAgICBib3gtc2hhZG93OiAwIDFweCAzcHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICB9XG4gIFxuICAuaW5saW5lLWFubm90YXRpb24tdGV4dGFyZWE6Zm9jdXMge1xuICAgIG91dGxpbmU6IG5vbmU7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG4gIH1cbiAgXG4gIC5pbmxpbmUtYW5ub3RhdGlvbi10ZXh0YXJlYTo6cGxhY2Vob2xkZXIge1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LWZhaW50KTtcbiAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gIH1cbiAgXG4gIC5pbmxpbmUtYW5ub3RhdGlvbi1oaW50IHtcbiAgICBtYXJnaW4tdG9wOiA2cHg7XG4gICAgZm9udC1zaXplOiAxMXB4O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LWZhaW50KTtcbiAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgfVxuICBcbiAgLmdyaWQtY2FyZCAuaW5saW5lLWFubm90YXRpb24tZWRpdG9yIHtcbiAgICBtYXJnaW4tdG9wOiA4cHg7XG4gIH1cbiAgXG4gIC5ncmlkLWNhcmQgLmlubGluZS1hbm5vdGF0aW9uLXRleHRhcmVhIHtcbiAgICBtaW4taGVpZ2h0OiAxMDBweDtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgcGFkZGluZzogOHB4IDE0cHg7XG4gIH1cbiAgXG4gIC8qID09PT09PT09PT09PT09PT09PT09IFx1NEUzQlx1NzU0Q1x1OTc2Mlx1NUUwM1x1NUM0MCA9PT09PT09PT09PT09PT09PT09PSAqL1xuICAubWFpbi1sYXlvdXQge1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiB2YXIoLS1vdmVydmlldy1zaWRlYmFyLXdpZHRoKSAxZnI7XG4gICAgZ2FwOiAxcHg7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgfVxuICBcbiAgLmxlZnQtcGFuZWwge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIH1cbiAgXG4gIC5yaWdodC1wYW5lbCB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgIHBhZGRpbmc6IHZhcigtLW92ZXJ2aWV3LWNhcmQtZ2FwKTtcbiAgfVxuICBcbiAgLmZpeGVkLWVudHJpZXMge1xuICAgIHBhZGRpbmc6IDEycHg7XG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgZ2FwOiA2cHg7XG4gIH1cbiAgXG4gIC5lbnRyeS1idG4ge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBnYXA6IDhweDtcbiAgICBwYWRkaW5nOiAxMHB4IDEycHg7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tb3ZlcnZpZXctYm9yZGVyLXJhZGl1cyk7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHRyYW5zaXRpb246IHZhcigtLW92ZXJ2aWV3LXRyYW5zaXRpb24pO1xuICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgfVxuICBcbiAgLmVudHJ5LWJ0bjpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDJweCk7XG4gIH1cbiAgXG4gIC5lbnRyeS1idG4uYWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gIH1cbiAgXG4gIC8qID09PT09PT09PT09PT09PT09PT09IFx1NEUzQlx1NzU0Q1x1OTc2Mlx1NURFNVx1NTE3N1x1NjgwRiA9PT09PT09PT09PT09PT09PT09PSAqL1xuICAubWFpbi10b29sYmFyIHtcbiAgICBwYWRkaW5nOiAxMnB4O1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgfVxuICBcbiAgLnNlYXJjaC1pbnB1dC1tYWluIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tb3ZlcnZpZXctYm9yZGVyLXJhZGl1cyk7XG4gICAgZm9udC1zaXplOiAxM3B4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgIHRyYW5zaXRpb246IHZhcigtLW92ZXJ2aWV3LXRyYW5zaXRpb24pO1xuICB9XG4gIFxuICAuc2VhcmNoLWlucHV0LW1haW46Zm9jdXMge1xuICAgIG91dGxpbmU6IG5vbmU7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICB9XG4gIFxuICAuZ3JvdXAtc3dpdGNoZXItbWFpbiB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBnYXA6IDZweDtcbiAgfVxuICBcbiAgLmdyb3VwLWJ0bi1tYWluIHtcbiAgICBmbGV4OiAxO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBnYXA6IDRweDtcbiAgICBwYWRkaW5nOiA4cHggMTBweDtcbiAgICBmb250LXNpemU6IDEycHg7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tb3ZlcnZpZXctYm9yZGVyLXJhZGl1cyk7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB0cmFuc2l0aW9uOiB2YXIoLS1vdmVydmlldy10cmFuc2l0aW9uKTtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICB9XG4gIFxuICAuZ3JvdXAtYnRuLW1haW46aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTtcbiAgfVxuICBcbiAgLmdyb3VwLWJ0bi1tYWluLmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuICB9XG4gIFxuICAuYmF0Y2gtYWN0aW9ucy1tYWluIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGdhcDogOHB4O1xuICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgZmxleC13cmFwOiB3cmFwO1xuICB9XG4gIFxuICAuYmF0Y2gtYWN0aW9ucy1tYWluIC5iYXRjaC1tb2RlLWJ0bixcbiAgLmJhdGNoLWFjdGlvbnMtbWFpbiAuc2VsZWN0LWFsbC1idG4sXG4gIC5iYXRjaC1hY3Rpb25zLW1haW4gLmJhdGNoLWRlbGV0ZS1idG4sXG4gIC5iYXRjaC1hY3Rpb25zLW1haW4gLmJhdGNoLWNyZWF0ZS1jYXJkcy1idG4ge1xuICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgfVxuICBcbiAgLmJhdGNoLWFjdGlvbnMtbWFpbiAuc2VsZWN0LWFsbC1idG46aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgfVxuICBcbiAgLnBhbmVsLXRpdGxlIHtcbiAgICBmb250LXNpemU6IDEzcHg7XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICBwYWRkaW5nOiAxMnB4O1xuICAgIG1hcmdpbjogMDtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gIH1cbiAgXG4gIC5maWxlLWxpc3Qge1xuICAgIHBhZGRpbmc6IDAgOHB4IDhweCA4cHg7XG4gICAgZmxleDogMTtcbiAgICBvdmVyZmxvdy15OiBhdXRvO1xuICB9XG4gIFxuICAuZmlsZS1pdGVtIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgZ2FwOiA4cHg7XG4gICAgcGFkZGluZzogOHB4IDEwcHg7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tb3ZlcnZpZXctYm9yZGVyLXJhZGl1cyk7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHRyYW5zaXRpb246IHZhcigtLW92ZXJ2aWV3LXRyYW5zaXRpb24pO1xuICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgfVxuICBcbiAgLmZpbGUtaXRlbTpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gIH1cbiAgXG4gIC5maWxlLWl0ZW0uc2VsZWN0ZWQge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgfVxuICBcbiAgLmZpbGUtaWNvbiB7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICB9XG4gIFxuICAuZmlsZS1uYW1lIHtcbiAgICBmbGV4OiAxO1xuICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIH1cbiAgXG4gIC5maWxlLWNvdW50IHtcbiAgICBmb250LXNpemU6IDExcHg7XG4gICAgcGFkZGluZzogMnB4IDZweDtcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7XG4gICAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgfVxuICBcbiAgLmZpbGUtaXRlbS5zZWxlY3RlZCAuZmlsZS1jb3VudCB7XG4gICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpO1xuICB9XG4gIFxuICAvKiA9PT09PT09PT09PT09PT09PT09PSBcdTdGNTFcdTY4M0NcdTVFMDNcdTVDNDAgPT09PT09PT09PT09PT09PT09PT0gKi9cbiAgLmdyaWQtaGVhZGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgcGFkZGluZy1ib3R0b206IDEycHg7XG4gICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgfVxuICBcbiAgLmdyaWQtaGVhZGVyIGgyIHtcbiAgICBmb250LXNpemU6IDE4cHg7XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICBtYXJnaW46IDA7XG4gIH1cbiAgXG4gIC5jb250ZW50LWdyaWQge1xuICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoMjQwcHgsIDFmcikpO1xuICAgIGdhcDogdmFyKC0tb3ZlcnZpZXctY2FyZC1nYXApO1xuICB9XG4gIFxuICAuZ3JpZC1jYXJkIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgcGFkZGluZzogdmFyKC0tb3ZlcnZpZXctY2FyZC1nYXApO1xuICAgIHRyYW5zaXRpb246IGFsbCAwLjNzIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7XG4gICAgYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgfVxuICBcbiAgLmdyaWQtY2FyZDpob3ZlciB7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgIGJveC1zaGFkb3c6IDAgNHB4IDEycHggcmdiYSgwLCAwLCAwLCAwLjE1KTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7XG4gIH1cbiAgXG4gIC5ncmlkLWNhcmQtaGVhZGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgcGFkZGluZy1ib3R0b206IDhweDtcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICB9XG4gIFxuICAuZ3JpZC1jYXJkLXRvb2xzIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGdhcDogNHB4O1xuICB9XG4gIFxuICAudG9vbC1idG4tZ3JpZCB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICBwYWRkaW5nOiA0cHggNnB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICB0cmFuc2l0aW9uOiB2YXIoLS1vdmVydmlldy10cmFuc2l0aW9uKTtcbiAgfVxuICBcbiAgLnRvb2wtYnRuLWdyaWQ6aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xKTtcbiAgfVxuICBcbiAgLmdyaWQtbm90ZS10ZXh0IHtcbiAgICBmb250LXNpemU6IDEzcHg7XG4gICAgbGluZS1oZWlnaHQ6IDEuNjtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDtcbiAgICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xuICAgIHdoaXRlLXNwYWNlOiBub3JtYWw7XG4gICAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDtcbiAgfVxuICBcbiAgLmdyaWQtbm90ZS10ZXh0OmhvdmVyIHtcbiAgICBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgfVxuICBcbiAgLmdyaWQtYW5ub3RhdGlvbiB7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBib3JkZXItbGVmdDogM3B4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgdHJhbnNpdGlvbjogdmFyKC0tb3ZlcnZpZXctdHJhbnNpdGlvbik7XG4gIH1cbiAgXG4gIC5ncmlkLWFubm90YXRpb246aG92ZXIge1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICB9XG4gIFxuICAuZ3JpZC10YWdzIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICBnYXA6IDZweDtcbiAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICB9XG4gIFxuICAudGFnLWdyaWQge1xuICAgIHBhZGRpbmc6IDRweCA4cHg7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tdGFnLWJhY2tncm91bmQpO1xuICAgIGNvbG9yOiB2YXIoLS10YWctY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICBmb250LXNpemU6IDExcHg7XG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgfVxuICBcbiAgLmdyaWQtY2FyZC1tZXRhIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgIHBhZGRpbmctdG9wOiAxMHB4O1xuICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgZm9udC1zaXplOiAxMXB4O1xuICB9XG4gIFxuICAuZG9jLW5hbWUge1xuICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgIGxldHRlci1zcGFjaW5nOiAwLjVweDtcbiAgfVxuICBcbiAgLmxpbmUtaW5mbyB7XG4gICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICB9XG4gIFxuICAuYmFkZ2UtZ3JpZCB7XG4gICAgcGFkZGluZzogM3B4IDhweDtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICB9XG4gIFxuICAvKiA9PT09PT09PT09PT09PT09PT09PSBcdTk1RUFcdTUzNjFcdTY4MzdcdTVGMEYgPT09PT09PT09PT09PT09PT09PT0gKi9cbiAgLmZsYXNoY2FyZC1pdGVtIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgcGFkZGluZzogMTZweDtcbiAgICB0cmFuc2l0aW9uOiB2YXIoLS1vdmVydmlldy10cmFuc2l0aW9uKTtcbiAgfVxuICBcbiAgLmZsYXNoY2FyZC1pdGVtOmhvdmVyIHtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gIH1cbiAgXG4gIC5mbGFzaGNhcmQtaGVhZGVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gIH1cbiAgXG4gIC5mbGFzaGNhcmQtdHlwZSB7XG4gICAgcGFkZGluZzogNHB4IDEwcHg7XG4gICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICBmb250LXNpemU6IDExcHg7XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgfVxuICBcbiAgLmZsYXNoY2FyZC10eXBlLnFhIHtcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDE2LCAxODUsIDEyOSwgMC4yKTtcbiAgICBjb2xvcjogIzEwYjk4MTtcbiAgfVxuICBcbiAgLmZsYXNoY2FyZC10eXBlLmNsb3plIHtcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjQxLCAxMTgsIDAuMik7XG4gICAgY29sb3I6ICNGRkYxNzY7XG4gIH1cbiAgXG4gIC5mbGFzaGNhcmQtYm9keSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGdhcDogMTBweDtcbiAgfVxuICBcbiAgLmZsYXNoY2FyZC1xdWVzdGlvbixcbiAgLmZsYXNoY2FyZC1hbnN3ZXIge1xuICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICBsaW5lLWhlaWdodDogMS41O1xuICB9XG4gIFxuICAvKiA9PT09PT09PT09PT09PT09PT09PSBcdTdBN0FcdTcyQjZcdTYwMDEgPT09PT09PT09PT09PT09PT09PT0gKi9cbiAgLmVtcHR5LXN0YXRlIHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgcGFkZGluZzogNDBweCAyMHB4O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgLy8gcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHotaW5kZXg6IDE7XG4gIH1cbiAgXG4gIC5lbXB0eS1oaW50IHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgcGFkZGluZzogMjBweDtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgZm9udC1zaXplOiAxM3B4O1xuICB9XG4gIFxuICAuZW1wdHktcmlnaHQtcGFuZWwge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gIH1cbiAgXG4gIC5lbXB0eS1pY29uIHtcbiAgICBmb250LXNpemU6IDQ4cHg7XG4gICAgbWFyZ2luLWJvdHRvbTogMTZweDtcbiAgfVxuICBcbiAgLmVtcHR5LXRleHQge1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgfVxuICBcbiAgLyogPT09PT09PT09PT09PT09PT09PT0gXHU1MkE4XHU3NTNCID09PT09PT09PT09PT09PT09PT09ICovXG4gIEBrZXlmcmFtZXMgc2xpZGVEb3duIHtcbiAgICBmcm9tIHtcbiAgICAgIG9wYWNpdHk6IDA7XG4gICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwcHgpO1xuICAgIH1cbiAgICB0byB7XG4gICAgICBvcGFjaXR5OiAxO1xuICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xuICAgIH1cbiAgfVxuICBcbiAgLyogPT09PT09PT09PT09PT09PT09PT0gXHU1NENEXHU1RTk0XHU1RjBGID09PT09PT09PT09PT09PT09PT09ICovXG4gIEBtZWRpYSAobWF4LXdpZHRoOiA3NjhweCkge1xuICAgIC5tYWluLWxheW91dCB7XG4gICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmcjtcbiAgICB9XG4gIFxuICAgIC5sZWZ0LXBhbmVsIHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuICBcbiAgICAuY29udGVudC1ncmlkIHtcbiAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyO1xuICAgIH1cbiAgfVxuICAgICAgYDtcbiAgICB9XG4gIH0iLCAiLy8gc3JjL3VpL1NpZGViYXJPdmVydmlld1ZpZXcudHMgLSBcdTkxQ0RcdTY3ODRcdTU0MEVcdTcyNDhcdTY3MkNcbmltcG9ydCB7IFN0eWxlTG9hZGVyIH0gZnJvbSAnLi4vc3R5bGUvc2lkZWJhclN0eWxlJ1xuXG5pbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgVEZpbGUsIE1lbnUsIE5vdGljZSwgTW9kYWwsIFNldHRpbmcsIFRleHRBcmVhQ29tcG9uZW50LCBCdXR0b25Db21wb25lbnQsQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgTGVhcm5pbmdTeXN0ZW1QbHVnaW4gZnJvbSAnLi4vLi4vbWFpbic7XG5pbXBvcnQgeyBDb250ZW50VW5pdCB9IGZyb20gJy4uLy4uL2NvcmUvRGF0YU1hbmFnZXInO1xuaW1wb3J0IHsgRmxhc2hjYXJkIH0gZnJvbSAnLi4vLi4vY29yZS9GbGFzaGNhcmRNYW5hZ2VyJztcblxuLy8gXHU1QkZDXHU1MTY1XHU2NUIwXHU3Njg0XHU3RUM0XHU0RUY2XHU1NDhDXHU3MkI2XHU2MDAxXHU3QkExXHU3NDA2XG5pbXBvcnQgeyBGaWx0ZXJNb2RlLCBHcm91cE1vZGUsIFZpZXdTdGF0ZSB9IGZyb20gJy4uL3N0YXRlL1ZpZXdTdGF0ZSc7XG5pbXBvcnQgeyBUb29sYmFyIH0gIGZyb20gJy4uL2NvbXBvbmVudHMvVG9vbGJhcic7XG5pbXBvcnQgeyBCYXRjaEFjdGlvbnMsIEJhdGNoQWN0aW9uQ2FsbGJhY2tzIH0gZnJvbSAnLi4vY29tcG9uZW50cy9CYXRjaEFjdGlvbnMnO1xuaW1wb3J0IHsgQ29udGVudExpc3QgfSBmcm9tICcuLi9jb21wb25lbnRzL0NvbnRlbnRMaXN0JztcbmltcG9ydCB7IENvbnRlbnRDYXJkLCBDYXJkQ2FsbGJhY2tzIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Db250ZW50Q2FyZCc7XG5pbXBvcnQgeyBBbm5vdGF0aW9uRWRpdG9yLCBBbm5vdGF0aW9uRWRpdG9yQ2FsbGJhY2tzIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Bbm5vdGF0aW9uRWRpdG9yJztcblxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9TSURFQkFSX09WRVJWSUVXID0gJ2xlYXJuaW5nLXN5c3RlbS1zaWRlYmFyLW92ZXJ2aWV3JztcbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfTUFJTl9PVkVSVklFVyA9ICdsZWFybmluZy1zeXN0ZW0tbWFpbi1vdmVydmlldyc7XG5cbmV4cG9ydCBjbGFzcyBTaWRlYmFyT3ZlcnZpZXdWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luO1xuICBcbiAgLy8gXHU0RjdGXHU3NTI4XHU3MkI2XHU2MDAxXHU3QkExXHU3NDA2XHU1NjY4XG4gIHByaXZhdGUgc3RhdGU6IFZpZXdTdGF0ZTtcbiAgXG4gIC8vIFx1NEY3Rlx1NzUyOFx1N0VDNFx1NEVGNlxuICBwcml2YXRlIHRvb2xiYXI6IFRvb2xiYXI7XG4gIHByaXZhdGUgYmF0Y2hBY3Rpb25zOiBCYXRjaEFjdGlvbnM7XG4gIHByaXZhdGUgY29udGVudExpc3Q6IENvbnRlbnRMaXN0O1xuICBwcml2YXRlIGFubm90YXRpb25FZGl0b3I6IEFubm90YXRpb25FZGl0b3I7XG4gIFxuXG4gIHByaXZhdGUgX2ZvcmNlTWFpbk1vZGU6IGJvb2xlYW47XG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4sIGZvcmNlTWFpbk1vZGUgPSBmYWxzZSkge1xuICAgIHN1cGVyKGxlYWYpO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIFxuICAgIHRoaXMuX2ZvcmNlTWFpbk1vZGUgPSBmb3JjZU1haW5Nb2RlO1xuICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1NzJCNlx1NjAwMVxuICAgIHRoaXMuc3RhdGUgPSBuZXcgVmlld1N0YXRlKGZvcmNlTWFpbk1vZGUpO1xuICAgIFxuICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1N0VDNFx1NEVGNlxuICAgIHRoaXMuaW5pdGlhbGl6ZUNvbXBvbmVudHMoKTtcbiAgICBcbiAgICAvLyBcdThCQkVcdTdGNkVcdTUyMURcdTU5Q0JcdTkwMDlcdTRFMkRcdTY1ODdcdTRFRjZcbiAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICBpZiAoYWN0aXZlRmlsZSkge1xuICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZEZpbGUgPSBhY3RpdmVGaWxlLnBhdGg7XG4gICAgfVxuICAgIFxuICAgIC8vIFx1NzZEMVx1NTQyQ1x1N0E5N1x1NTNFM1x1NTkyN1x1NUMwRlx1NTNEOFx1NTMxNlx1RkYwOFx1OTYzMlx1NjI5Nlx1RkYwOVxuICAgIHRoaXMuc2V0dXBSZXNpemVMaXN0ZW5lcigpO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0gXHU3NTFGXHU1NDdEXHU1NDY4XHU2NzFGXHU2NUI5XHU2Q0Q1ID09PT09PT09PT09PT09PT09PT09XG5cbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCBmb3JjZU1haW5Nb2RlID0gdGhpcy5fZm9yY2VNYWluTW9kZSB8fCBmYWxzZTtcbiAgICByZXR1cm4gZm9yY2VNYWluTW9kZSBcbiAgICAgID8gVklFV19UWVBFX01BSU5fT1ZFUlZJRVcgXG4gICAgICA6IFZJRVdfVFlQRV9TSURFQkFSX09WRVJWSUVXO1xuICB9XG5cbiAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ0xlYXJuaW5nIE92ZXJ2aWV3JztcbiAgfVxuXG4gIGdldEljb24oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ2Jvb2stbWFya2VkJztcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICB0aGlzLmRldGVjdERpc3BsYXlNb2RlKCk7XG4gICAgXG4gICAgLy8gXHU2Q0U4XHU1MThDXHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXG4gICAgaWYgKCF0aGlzLnN0YXRlLmZvcmNlTWFpbk1vZGUpIHtcbiAgICAgIHRoaXMucmVnaXN0ZXJBY3RpdmVMZWFmQ2hhbmdlKCk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMucmVuZGVyKCk7XG4gICAgU3R5bGVMb2FkZXIuaW5qZWN0KCk7IFxuICB9XG5cbiAgYXN5bmMgb25DbG9zZSgpIHtcbiAgICAvLyBcdTZFMDVcdTc0MDZcdTVCOUFcdTY1RjZcdTU2NjhcbiAgICBpZiAodGhpcy5zdGF0ZS5zZWFyY2hEZWJvdW5jZVRpbWVyICE9PSBudWxsKSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc3RhdGUuc2VhcmNoRGVib3VuY2VUaW1lcik7XG4gICAgfVxuICAgIFxuICAgIC8vIFx1NTE3M1x1OTVFRFx1NjI0MFx1NjcwOVx1NkQzQlx1NTJBOFx1NzY4NFx1N0YxNlx1OEY5MVx1NTY2OFxuICAgIHRoaXMuYW5ub3RhdGlvbkVkaXRvci5jbG9zZUFsbCgpO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0gXHU1MjFEXHU1OUNCXHU1MzE2XHU2NUI5XHU2Q0Q1ID09PT09PT09PT09PT09PT09PT09XG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplQ29tcG9uZW50cygpOiB2b2lkIHtcbiAgICAvLyBcdTVERTVcdTUxNzdcdTY4MEZcdTU2REVcdThDMDNcbiAgICB0aGlzLnRvb2xiYXIgPSBuZXcgVG9vbGJhcih0aGlzLnN0YXRlLCB7XG4gICAgICBvblNlYXJjaENoYW5nZTogKHF1ZXJ5KSA9PiB0aGlzLmhhbmRsZVNlYXJjaENoYW5nZShxdWVyeSksXG4gICAgICBvbkZpbHRlckNoYW5nZTogKG1vZGUpID0+IHRoaXMuaGFuZGxlRmlsdGVyQ2hhbmdlKG1vZGUpLFxuICAgICAgb25Hcm91cENoYW5nZTogKG1vZGUpID0+IHRoaXMuaGFuZGxlR3JvdXBDaGFuZ2UobW9kZSlcbiAgICB9KTtcbiAgICBcbiAgICBcbiAgICAvLyBcdTYyNzlcdTkxQ0ZcdTY0Q0RcdTRGNUNcdTU2REVcdThDMDNcbiAgICBjb25zdCBiYXRjaENhbGxiYWNrczogQmF0Y2hBY3Rpb25DYWxsYmFja3MgPSB7XG4gICAgICBvblNlbGVjdEFsbDogKCkgPT4gdGhpcy5oYW5kbGVTZWxlY3RBbGwoKSxcbiAgICAgIG9uRGVzZWxlY3RBbGw6ICgpID0+IHRoaXMuaGFuZGxlRGVzZWxlY3RBbGwoKSxcbiAgICAgIG9uQmF0Y2hDcmVhdGU6ICgpID0+IHRoaXMuaGFuZGxlQmF0Y2hDcmVhdGUoKSxcbiAgICAgIG9uQmF0Y2hEZWxldGU6ICgpID0+IHRoaXMuaGFuZGxlQmF0Y2hEZWxldGUoKSxcbiAgICAgIG9uQ2FuY2VsOiAoKSA9PiB0aGlzLmhhbmRsZUJhdGNoQ2FuY2VsKClcbiAgICB9O1xuICAgIHRoaXMuYmF0Y2hBY3Rpb25zID0gbmV3IEJhdGNoQWN0aW9ucyh0aGlzLnN0YXRlLCBiYXRjaENhbGxiYWNrcyk7XG4gICAgXG4gICAgLy8gXHU1MzYxXHU3MjQ3XHU1NkRFXHU4QzAzXG4gICAgY29uc3QgY2FyZENhbGxiYWNrczogQ2FyZENhbGxiYWNrcyA9IHtcbiAgICAgIG9uSnVtcFRvU291cmNlOiAodW5pdCkgPT4gdGhpcy5qdW1wVG9Tb3VyY2UodW5pdCksXG4gICAgICBvblRvZ2dsZUFubm90YXRpb246IChjYXJkLCB1bml0KSA9PiB0aGlzLmFubm90YXRpb25FZGl0b3IudG9nZ2xlKGNhcmQsIHVuaXQpLFxuICAgICAgb25RdWlja0ZsYXNoY2FyZDogKHVuaXQpID0+IHRoaXMucXVpY2tHZW5lcmF0ZUZsYXNoY2FyZCh1bml0KSxcbiAgICAgIG9uU2hvd0NvbnRleHRNZW51OiAoZXZlbnQsIHVuaXQpID0+IHRoaXMuc2hvd0NvbnRleHRNZW51KGV2ZW50LCB1bml0KSxcbiAgICAgIG9uRmxhc2hjYXJkQ29udGV4dE1lbnU6IChldmVudCwgY2FyZCkgPT4gdGhpcy5zaG93Rmxhc2hjYXJkQ29udGV4dE1lbnUoZXZlbnQsIGNhcmQpLFxuICAgICAgZ2V0QW5ub3RhdGlvbkNvbnRlbnQ6ICh1bml0SWQpID0+IHtcbiAgICAgICAgY29uc3QgYW5uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdElkKTtcbiAgICAgICAgcmV0dXJuIGFubj8uY29udGVudDtcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIHRoaXMuY29udGVudExpc3QgPSBuZXcgQ29udGVudExpc3QodGhpcy5zdGF0ZSwgY2FyZENhbGxiYWNrcyk7XG4gICAgXG4gICAgLy8gXHU2Mjc5XHU2Q0U4XHU3RjE2XHU4RjkxXHU1NjY4XHU1NkRFXHU4QzAzXG4gICAgY29uc3QgYW5ub3RhdGlvbkNhbGxiYWNrczogQW5ub3RhdGlvbkVkaXRvckNhbGxiYWNrcyA9IHtcbiAgICAgIG9uU2F2ZTogYXN5bmMgKHVuaXRJZCwgY29udGVudCkgPT4ge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVBbm5vdGF0aW9uKHVuaXRJZCwgY29udGVudCk7XG4gICAgICB9LFxuICAgICAgb25DYW5jZWw6ICh1bml0SWQpID0+IHtcbiAgICAgICAgLy8gXHU1M0Q2XHU2RDg4XHU3RjE2XHU4RjkxXHVGRjBDXHU0RTBEXHU1MDVBXHU0RUZCXHU0RjU1XHU2NENEXHU0RjVDXG4gICAgICB9LFxuICAgICAgZ2V0QW5ub3RhdGlvbkNvbnRlbnQ6ICh1bml0SWQpID0+IHtcbiAgICAgICAgY29uc3QgYW5uID0gdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZ2V0Q29udGVudEFubm90YXRpb24odW5pdElkKTtcbiAgICAgICAgcmV0dXJuIGFubj8uY29udGVudDtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuYW5ub3RhdGlvbkVkaXRvciA9IG5ldyBBbm5vdGF0aW9uRWRpdG9yKGFubm90YXRpb25DYWxsYmFja3MpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cFJlc2l6ZUxpc3RlbmVyKCk6IHZvaWQge1xuICAgIGxldCByZXNpemVUaW1lcjogbnVtYmVyO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgICBjbGVhclRpbWVvdXQocmVzaXplVGltZXIpO1xuICAgICAgcmVzaXplVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuZGV0ZWN0RGlzcGxheU1vZGUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIH0sIDE1MCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlZ2lzdGVyQWN0aXZlTGVhZkNoYW5nZSgpOiB2b2lkIHtcbiAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2FjdGl2ZS1sZWFmLWNoYW5nZScsICgpID0+IHtcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGlmIChhY3RpdmVGaWxlICYmIHRoaXMuc3RhdGUuZGlzcGxheU1vZGUgPT09ICdzaWRlYmFyJykge1xuICAgICAgICAgIHRoaXMuc3RhdGUuc2VsZWN0ZWRGaWxlID0gYWN0aXZlRmlsZS5wYXRoO1xuICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTY2M0VcdTc5M0FcdTZBMjFcdTVGMEZcdTY4QzBcdTZENEIgPT09PT09PT09PT09PT09PT09PT1cblxuICBwcml2YXRlIGRldGVjdERpc3BsYXlNb2RlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnN0YXRlLmZvcmNlTWFpbk1vZGUpIHtcbiAgICAgIHRoaXMuc3RhdGUuZGlzcGxheU1vZGUgPSAnbWFpbic7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHBhcmVudFNwbGl0ID0gKHRoaXMubGVhZiBhcyBhbnkpLnBhcmVudFNwbGl0O1xuICAgIGNvbnN0IGlzTGVmdFNpZGViYXIgPSBwYXJlbnRTcGxpdD8udHlwZSA9PT0gJ3NwbGl0JyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmxlZnRTcGxpdCA9PT0gcGFyZW50U3BsaXQ7XG4gICAgY29uc3QgaXNSaWdodFNpZGViYXIgPSBwYXJlbnRTcGxpdD8udHlwZSA9PT0gJ3NwbGl0JyAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yaWdodFNwbGl0ID09PSBwYXJlbnRTcGxpdDtcbiAgICBcbiAgICBjb25zdCB3aWR0aCA9IHRoaXMuY29udGFpbmVyRWwuY2xpZW50V2lkdGg7XG4gICAgY29uc3QgaXNOYXJyb3cgPSB3aWR0aCA8IDUwMDtcbiAgICBcbiAgICBjb25zdCBpc1NpZGViYXIgPSBpc0xlZnRTaWRlYmFyIHx8IGlzUmlnaHRTaWRlYmFyIHx8IGlzTmFycm93O1xuICAgIHRoaXMuc3RhdGUuZGlzcGxheU1vZGUgPSBpc1NpZGViYXIgPyAnc2lkZWJhcicgOiAnbWFpbic7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTZFMzJcdTY3RDNcdTY1QjlcdTZDRDUgPT09PT09PT09PT09PT09PT09PT1cblxuICByZWZyZXNoKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnN0YXRlLmlzUmVuZGVyaW5nKSB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5yZWZyZXNoKCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5zdGF0ZS5zZWFyY2hEZWJvdW5jZVRpbWVyICE9PSBudWxsKSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc3RhdGUuc2VhcmNoRGVib3VuY2VUaW1lcik7XG4gICAgICB0aGlzLnN0YXRlLnNlYXJjaERlYm91bmNlVGltZXIgPSBudWxsO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnN0YXRlLnNob3VsZFJlc3RvcmVTY3JvbGwgPSB0cnVlO1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlcigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5pc1JlbmRlcmluZykgcmV0dXJuO1xuICAgIFxuICAgIHRoaXMuc3RhdGUuaXNSZW5kZXJpbmcgPSB0cnVlO1xuICAgIFxuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgXG4gICAgLy8gXHU0RkREXHU1QjU4XHU2RURBXHU1MkE4XHU0RjREXHU3RjZFXG4gICAgaWYgKHRoaXMuc3RhdGUuZGlzcGxheU1vZGUgPT09ICdzaWRlYmFyJykge1xuICAgICAgY29uc3QgY29udGVudExpc3QgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnNpZGViYXItY29udGVudC1saXN0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAoY29udGVudExpc3QpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5zYXZlZFNjcm9sbFBvc2l0aW9uID0gY29udGVudExpc3Quc2Nyb2xsVG9wO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBcdTZFMDVcdTdBN0FcdTVCQjlcdTU2NjhcbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBjb250YWluZXIuYWRkQ2xhc3MoJ2xlYXJuaW5nLW92ZXJ2aWV3LWNvbnRhaW5lcicpO1xuICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtbW9kZScsIHRoaXMuc3RhdGUuZGlzcGxheU1vZGUpO1xuICAgIFxuICAgIC8vIFx1NjgzOVx1NjM2RVx1NkEyMVx1NUYwRlx1NkUzMlx1NjdEM1xuICAgIGlmICh0aGlzLnN0YXRlLmRpc3BsYXlNb2RlID09PSAnc2lkZWJhcicpIHtcbiAgICAgIHRoaXMucmVuZGVyU2lkZWJhck1vZGUoY29udGFpbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW5kZXJNYWluTW9kZShjb250YWluZXIpO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdTYwNjJcdTU5MERcdTZFREFcdTUyQThcdTRGNERcdTdGNkVcbiAgICBpZiAodGhpcy5zdGF0ZS5kaXNwbGF5TW9kZSA9PT0gJ3NpZGViYXInICYmIHRoaXMuc3RhdGUuc2hvdWxkUmVzdG9yZVNjcm9sbCkge1xuICAgICAgY29uc3QgY29udGVudExpc3QgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnNpZGViYXItY29udGVudC1saXN0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAoY29udGVudExpc3QpIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBjb250ZW50TGlzdC5zY3JvbGxUb3AgPSB0aGlzLnN0YXRlLnNhdmVkU2Nyb2xsUG9zaXRpb247XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLnN0YXRlLmlzUmVuZGVyaW5nID0gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclNpZGViYXJNb2RlKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcblxuICAgIC8vIDEuIFx1NkUzMlx1NjdEM1x1NURFNVx1NTE3N1x1NjgwRlxuICAgIGNvbnN0IHRvb2xiYXJFbCA9IHRoaXMudG9vbGJhci5yZW5kZXJTaWRlYmFyVG9vbGJhcihjb250YWluZXIpO1xuXG4gICAgLy8gMi4gXHU1MjFCXHU1RUZBXHU3RURGXHU4QkExXHU4ODRDKFx1NTk4Mlx1Njc5QyBUb29sYmFyIFx1NkNBMVx1NjcwOVx1NTIxQlx1NUVGQSlcbiAgICBsZXQgc3RhdHNSb3cgPSB0b29sYmFyRWwucXVlcnlTZWxlY3RvcignLnN0YXRzLXJvdycpIGFzIEhUTUxFbGVtZW50O1xuXG4gICAgaWYgKCFzdGF0c1Jvdykge1xuICAgICAgc3RhdHNSb3cgPSB0b29sYmFyRWwuY3JlYXRlRGl2KHsgY2xzOiAnc3RhdHMtcm93JyB9KTtcbiAgICAgIHN0YXRzUm93LnNldEF0dHJpYnV0ZSgnZGF0YS1zdGF0cy1jb250YWluZXInLCAndHJ1ZScpO1xuICAgIH1cbiAgICBcbiAgICAvLyAzLiBcdTgzQjdcdTUzRDZcdTUzRUZcdTg5QzFcdTk4NzlcdTc2RUVcbiAgICBjb25zdCB2aXNpYmxlSXRlbXMgPSB0aGlzLmdldFZpc2libGVJdGVtcygpO1xuICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5zdGF0ZS52aWV3VHlwZSA9PT0gJ2NhcmRzJyBcbiAgICAgID8gKHZpc2libGVJdGVtcy5jYXJkcyB8fCBbXSkgXG4gICAgICA6ICh2aXNpYmxlSXRlbXMudW5pdHMgfHwgW10pO1xuICAgIFxuICAgIC8vIDQuIFx1NkUzMlx1NjdEM1x1NjI3OVx1OTFDRlx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVxuICAgIHRoaXMuYmF0Y2hBY3Rpb25zLnJlbmRlclNlbGVjdEFsbEJ1dHRvbihzdGF0c1JvdywgaXRlbXMsICdzaWRlYmFyJyk7XG4gICAgdGhpcy5iYXRjaEFjdGlvbnMucmVuZGVyQWN0aW9uQnV0dG9ucyhzdGF0c1JvdywgJ3NpZGViYXInKTtcbiAgICBcbiAgICAvLyA1LiBcdTZFMzJcdTY3RDNcdTUxODVcdTVCQjlcdTUyMTdcdTg4NjhcbiAgICBjb25zdCBjb250ZW50TGlzdEVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3NpZGViYXItY29udGVudC1saXN0JyB9KTtcbiAgICBjb25zdCB1bml0cyA9IHRoaXMuZ2V0RmlsdGVyZWRVbml0cygpO1xuICAgIHRoaXMuY29udGVudExpc3QucmVuZGVyQ29tcGFjdExpc3QoY29udGVudExpc3RFbCwgdW5pdHMpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJNYWluTW9kZShjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XG5cbiAgICBjb25zdCBsYXlvdXQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbWFpbi1sYXlvdXQnIH0pO1xuXG4gICAgLy8gXHU1REU2XHU0RkE3XHU5NzYyXHU2NzdGXG4gICAgY29uc3QgbGVmdFBhbmVsID0gbGF5b3V0LmNyZWF0ZURpdih7IGNsczogJ2xlZnQtcGFuZWwnIH0pO1xuICAgIHRoaXMucmVuZGVyTGVmdFBhbmVsKGxlZnRQYW5lbCk7XG4gICAgXG4gICAgLy8gXHU1M0YzXHU0RkE3XHU5NzYyXHU2NzdGXG4gICAgY29uc3QgcmlnaHRQYW5lbCA9IGxheW91dC5jcmVhdGVEaXYoeyBjbHM6ICdyaWdodC1wYW5lbCcgfSk7XG4gICAgdGhpcy5yZW5kZXJSaWdodFBhbmVsKHJpZ2h0UGFuZWwpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJMZWZ0UGFuZWwoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIC8vIFx1NURFNVx1NTE3N1x1NjgwRlxuICAgIHRoaXMudG9vbGJhci5yZW5kZXJNYWluVG9vbGJhcihjb250YWluZXIpO1xuICAgIFxuICAgIC8vIFx1NTZGQVx1NUI5QVx1NTE2NVx1NTNFM1x1RkYwOEFsbCBOb3RlcywgQ2FyZCBMaXN0XHVGRjA5XG4gICAgdGhpcy5yZW5kZXJGaXhlZEVudHJpZXMoY29udGFpbmVyKTtcbiAgICBcbiAgICAvLyBcdTY1ODdcdTRFRjZcdTUyMTdcdTg4NjhcbiAgICB0aGlzLnJlbmRlckZpbGVMaXN0KGNvbnRhaW5lcik7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclJpZ2h0UGFuZWwoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnN0YXRlLnZpZXdUeXBlID09PSAnY2FyZHMnKSB7XG4gICAgICB0aGlzLnJlbmRlckZsYXNoY2FyZHNWaWV3KGNvbnRhaW5lcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIFx1ODFFQVx1NTJBOFx1OTAwOVx1NEUyRFx1N0IyQ1x1NEUwMFx1NEUyQVx1NTIwNlx1N0VDNFxuICAgIGlmICghdGhpcy5zdGF0ZS5zZWxlY3RlZEZpbGUpIHtcbiAgICAgIGNvbnN0IHVuaXRzID0gdGhpcy5nZXRGaWx0ZXJlZFVuaXRzKCk7XG4gICAgICBjb25zdCBncm91cGVkID0gdGhpcy5jb250ZW50TGlzdC5ncm91cFVuaXRzKHVuaXRzKTtcbiAgICAgIGlmIChncm91cGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZEZpbGUgPSBncm91cGVkWzBdLmdyb3VwS2V5O1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAoIXRoaXMuc3RhdGUuc2VsZWN0ZWRGaWxlKSB7XG4gICAgICB0aGlzLnJlbmRlckVtcHR5UmlnaHRQYW5lbChjb250YWluZXIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdTZFMzJcdTY3RDNcdTU5MzRcdTkwRThcbiAgICBjb25zdCBoZWFkZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1oZWFkZXInIH0pO1xuICAgIGhlYWRlci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IHRoaXMuc3RhdGUuc2VsZWN0ZWRGaWxlIHx8ICdcdTUxODVcdTVCQjknIH0pO1xuICAgIFxuICAgIGNvbnN0IGhlYWRlckFjdGlvbnMgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnaGVhZGVyLWFjdGlvbnMnIH0pO1xuICAgIGNvbnN0IHZpc2libGVJdGVtcyA9IHRoaXMuZ2V0VmlzaWJsZUl0ZW1zKCk7XG4gICAgY29uc3QgaXRlbXMgPSAodmlzaWJsZUl0ZW1zLnVuaXRzIHx8IFtdKTtcbiAgICBcbiAgICB0aGlzLmJhdGNoQWN0aW9ucy5yZW5kZXJBY3Rpb25CdXR0b25zKGhlYWRlckFjdGlvbnMsICdoZWFkZXInKTtcbiAgICB0aGlzLmJhdGNoQWN0aW9ucy5yZW5kZXJTZWxlY3RBbGxCdXR0b24oaGVhZGVyQWN0aW9ucywgaXRlbXMsICdoZWFkZXInKTtcbiAgICBcbiAgICAvLyBcdTZFMzJcdTY3RDNcdTdGNTFcdTY4M0NcbiAgICBjb25zdCBncmlkQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NvbnRlbnQtZ3JpZCcgfSk7XG4gICAgY29uc3QgZmlsdGVyZWRVbml0cyA9IHRoaXMuZ2V0RmlsdGVyZWRVbml0c0ZvclNlbGVjdGVkR3JvdXAoKTtcbiAgICB0aGlzLmNvbnRlbnRMaXN0LnJlbmRlckNvbnRlbnRHcmlkKGdyaWRDb250YWluZXIsIGZpbHRlcmVkVW5pdHMpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJGbGFzaGNhcmRzVmlldyhjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgY29uc3QgZmxhc2hjYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgIFxuICAgIGlmICghdGhpcy5zdGF0ZS5zZWxlY3RlZEZpbGUpIHtcbiAgICAgIGNvbnN0IGdyb3VwZWQgPSB0aGlzLmNvbnRlbnRMaXN0Lmdyb3VwRmxhc2hjYXJkcyhcbiAgICAgICAgZmxhc2hjYXJkcyxcbiAgICAgICAgKGlkKSA9PiB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChpZClcbiAgICAgICk7XG4gICAgICBpZiAoZ3JvdXBlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuc2VsZWN0ZWRGaWxlID0gZ3JvdXBlZFswXS5ncm91cEtleTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKCF0aGlzLnN0YXRlLnNlbGVjdGVkRmlsZSkge1xuICAgICAgdGhpcy5yZW5kZXJFbXB0eVJpZ2h0UGFuZWwoY29udGFpbmVyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgLy8gXHU2RTMyXHU2N0QzXHU1OTM0XHU5MEU4XG4gICAgY29uc3QgaGVhZGVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2dyaWQtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXIuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiB0aGlzLnN0YXRlLnNlbGVjdGVkRmlsZSB8fCAnXHU5NUVBXHU1MzYxJyB9KTtcbiAgICBcbiAgICBjb25zdCBoZWFkZXJBY3Rpb25zID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ2hlYWRlci1hY3Rpb25zJyB9KTtcbiAgICBjb25zdCB2aXNpYmxlSXRlbXMgPSB0aGlzLmdldFZpc2libGVJdGVtcygpO1xuICAgIGNvbnN0IGl0ZW1zID0gKHZpc2libGVJdGVtcy5jYXJkcyB8fCBbXSk7XG4gICAgXG4gICAgdGhpcy5iYXRjaEFjdGlvbnMucmVuZGVyQWN0aW9uQnV0dG9ucyhoZWFkZXJBY3Rpb25zLCAnaGVhZGVyJyk7XG4gICAgdGhpcy5iYXRjaEFjdGlvbnMucmVuZGVyU2VsZWN0QWxsQnV0dG9uKGhlYWRlckFjdGlvbnMsIGl0ZW1zLCAnaGVhZGVyJyk7XG4gICAgXG4gICAgLy8gXHU2RTMyXHU2N0QzXHU5NUVBXHU1MzYxXHU3RjUxXHU2ODNDXG4gICAgY29uc3QgZ3JpZENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjb250ZW50LWdyaWQnIH0pO1xuICAgIGNvbnN0IGZpbHRlcmVkQ2FyZHMgPSB0aGlzLmdldEZpbHRlcmVkQ2FyZHNGb3JTZWxlY3RlZEdyb3VwKCk7XG4gICAgdGhpcy5jb250ZW50TGlzdC5yZW5kZXJGbGFzaGNhcmRzR3JpZChncmlkQ29udGFpbmVyLCBmaWx0ZXJlZENhcmRzKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyRml4ZWRFbnRyaWVzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCBlbnRyaWVzID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2ZpeGVkLWVudHJpZXMnIH0pO1xuICAgIFxuICAgIGNvbnN0IGFsbE5vdGVzQnRuID0gZW50cmllcy5jcmVhdGVEaXYoe1xuICAgICAgY2xzOiBgZW50cnktYnRuICR7dGhpcy5zdGF0ZS52aWV3VHlwZSA9PT0gJ25vdGVzJyA/ICdhY3RpdmUnIDogJyd9YFxuICAgIH0pO1xuICAgIGFsbE5vdGVzQnRuLmlubmVySFRNTCA9ICdcdUQ4M0RcdURDREQgPHNwYW4+QWxsIE5vdGVzPC9zcGFuPic7XG4gICAgYWxsTm90ZXNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5zdGF0ZS5zZXRWaWV3VHlwZSgnbm90ZXMnKSkge1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IGNhcmRMaXN0QnRuID0gZW50cmllcy5jcmVhdGVEaXYoe1xuICAgICAgY2xzOiBgZW50cnktYnRuICR7dGhpcy5zdGF0ZS52aWV3VHlwZSA9PT0gJ2NhcmRzJyA/ICdhY3RpdmUnIDogJyd9YFxuICAgIH0pO1xuICAgIGNhcmRMaXN0QnRuLmlubmVySFRNTCA9ICdcdUQ4M0NcdURDQ0YgPHNwYW4+Q2FyZCBMaXN0PC9zcGFuPic7XG4gICAgY2FyZExpc3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5zdGF0ZS5zZXRWaWV3VHlwZSgnY2FyZHMnKSkge1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJGaWxlTGlzdChjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1RDgzRFx1RENDMSBcdTY1ODdcdTY4NjNcdTUyMTdcdTg4NjgnLCBjbHM6ICdwYW5lbC10aXRsZScgfSk7XG4gICAgXG4gICAgY29uc3QgZmlsZUxpc3RDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZmlsZS1saXN0JyB9KTtcbiAgICB0aGlzLnJlbmRlckZpbGVMaXN0Q29udGVudChmaWxlTGlzdENvbnRhaW5lcik7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckZpbGVMaXN0Q29udGVudChjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgXG4gICAgbGV0IGdyb3VwZWQ6IEFycmF5PHsgZ3JvdXBLZXk6IHN0cmluZzsgY291bnQ6IG51bWJlciB9PjtcbiAgICBcbiAgICBpZiAodGhpcy5zdGF0ZS52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgICAgY29uc3QgZmxhc2hjYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgICAgY29uc3QgY2FyZEdyb3VwcyA9IHRoaXMuY29udGVudExpc3QuZ3JvdXBGbGFzaGNhcmRzKFxuICAgICAgICBmbGFzaGNhcmRzLFxuICAgICAgICAoaWQpID0+IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGlkKVxuICAgICAgKTtcbiAgICAgIGdyb3VwZWQgPSBjYXJkR3JvdXBzLm1hcChnID0+ICh7IFxuICAgICAgICBncm91cEtleTogZy5ncm91cEtleSwgXG4gICAgICAgIGNvdW50OiBnLmNhcmRzLmxlbmd0aCBcbiAgICAgIH0pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdW5pdHMgPSB0aGlzLmdldEZpbHRlcmVkVW5pdHMoKTtcbiAgICAgIGNvbnN0IHVuaXRHcm91cHMgPSB0aGlzLmNvbnRlbnRMaXN0Lmdyb3VwVW5pdHModW5pdHMpO1xuICAgICAgZ3JvdXBlZCA9IHVuaXRHcm91cHMubWFwKGcgPT4gKHsgXG4gICAgICAgIGdyb3VwS2V5OiBnLmdyb3VwS2V5LCBcbiAgICAgICAgY291bnQ6IGcudW5pdHMubGVuZ3RoIFxuICAgICAgfSkpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoZ3JvdXBlZC5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnRhaW5lci5jcmVhdGVEaXYoeyB0ZXh0OiAnXHU2NjgyXHU2NUUwXHU2NTg3XHU2ODYzJywgY2xzOiAnZW1wdHktaGludCcgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGlmICghdGhpcy5zdGF0ZS5zZWxlY3RlZEZpbGUgJiYgZ3JvdXBlZC5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnN0YXRlLnNlbGVjdGVkRmlsZSA9IGdyb3VwZWRbMF0uZ3JvdXBLZXk7XG4gICAgfVxuICAgIFxuICAgIGdyb3VwZWQuZm9yRWFjaCgoeyBncm91cEtleSwgY291bnQgfSkgPT4ge1xuICAgICAgY29uc3QgZmlsZUl0ZW0gPSBjb250YWluZXIuY3JlYXRlRGl2KHtcbiAgICAgICAgY2xzOiBgZmlsZS1pdGVtICR7dGhpcy5zdGF0ZS5zZWxlY3RlZEZpbGUgPT09IGdyb3VwS2V5ID8gJ3NlbGVjdGVkJyA6ICcnfWBcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBmaWxlSXRlbS5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1pY29uXCI+JHt0aGlzLmdldEdyb3VwSWNvbigpfTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLW5hbWVcIj4ke2dyb3VwS2V5fTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJmaWxlLWNvdW50XCI+JHtjb3VudH08L3NwYW4+XG4gICAgICBgO1xuICAgICAgXG4gICAgICBmaWxlSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2VsZWN0ZWRGaWxlICE9PSBncm91cEtleSkge1xuICAgICAgICAgIHRoaXMuc3RhdGUuc2VsZWN0ZWRGaWxlID0gZ3JvdXBLZXk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgYWxsSXRlbXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmZpbGUtaXRlbScpO1xuICAgICAgICAgIGFsbEl0ZW1zLmZvckVhY2goaXRlbSA9PiBpdGVtLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpKTtcbiAgICAgICAgICBmaWxlSXRlbS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICBcbiAgICAgICAgICB0aGlzLnJlZnJlc2hSaWdodFBhbmVsKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJFbXB0eVJpZ2h0UGFuZWwoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGNvbnN0IGVtcHR5ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2VtcHR5LXJpZ2h0LXBhbmVsJyB9KTtcbiAgICBlbXB0eS5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwiZW1wdHktaWNvblwiPlx1RDgzRFx1RENFRDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImVtcHR5LXRleHRcIj5cdTY2ODJcdTY1RTBcdTUxODVcdTVCQjk8L2Rpdj5cbiAgICBgO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0gXHU0RThCXHU0RUY2XHU1OTA0XHU3NDA2XHU2NUI5XHU2Q0Q1ID09PT09PT09PT09PT09PT09PT09XG5cbiAgcHJpdmF0ZSBoYW5kbGVTZWFyY2hDaGFuZ2UocXVlcnk6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuc3RhdGUuc2V0U2VhcmNoUXVlcnkocXVlcnkpO1xuICAgIFxuICAgIGlmICh0aGlzLnN0YXRlLnNlYXJjaERlYm91bmNlVGltZXIgIT09IG51bGwpIHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5zdGF0ZS5zZWFyY2hEZWJvdW5jZVRpbWVyKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5zdGF0ZS5zZWFyY2hEZWJvdW5jZVRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5zdGF0ZS5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfSwgMzAwKTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlRmlsdGVyQ2hhbmdlKG1vZGU6IHR5cGVvZiB0aGlzLnN0YXRlLmZpbHRlck1vZGUpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5zZXRGaWx0ZXJNb2RlKG1vZGUpKSB7XG4gICAgICB0aGlzLnN0YXRlLnNob3VsZFJlc3RvcmVTY3JvbGwgPSBmYWxzZTtcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVHcm91cENoYW5nZShtb2RlOiB0eXBlb2YgdGhpcy5zdGF0ZS5ncm91cE1vZGUpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5zZXRHcm91cE1vZGUobW9kZSkpIHtcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVTZWxlY3RBbGwoKTogdm9pZCB7XG4gICAgY29uc3QgdmlzaWJsZSA9IHRoaXMuZ2V0VmlzaWJsZUl0ZW1zKCk7XG4gICAgXG4gICAgaWYgKHRoaXMuc3RhdGUudmlld1R5cGUgPT09ICdjYXJkcycpIHtcbiAgICAgIGNvbnN0IGNhcmRzID0gdmlzaWJsZS5jYXJkcyB8fCBbXTtcbiAgICAgIGlmIChjYXJkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1NkNBMVx1NjcwOVx1NTNFRlx1OTAwOVx1NjJFOVx1NzY4NFx1OTVFQVx1NTM2MScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXRlLnNlbGVjdEFsbENhcmRzKGNhcmRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdW5pdHMgPSB2aXNpYmxlLnVuaXRzIHx8IFtdO1xuICAgICAgaWYgKHVuaXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU2Q0ExXHU2NzA5XHU1M0VGXHU5MDA5XHU2MkU5XHU3Njg0XHU3QjE0XHU4QkIwJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhdGUuc2VsZWN0QWxsVW5pdHModW5pdHMpO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVEZXNlbGVjdEFsbCgpOiB2b2lkIHtcbiAgICBjb25zdCB2aXNpYmxlID0gdGhpcy5nZXRWaXNpYmxlSXRlbXMoKTtcbiAgICBcbiAgICBpZiAodGhpcy5zdGF0ZS52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgICAgdGhpcy5zdGF0ZS5kZXNlbGVjdEFsbENhcmRzKHZpc2libGUuY2FyZHMgfHwgW10pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXRlLmRlc2VsZWN0QWxsVW5pdHModmlzaWJsZS51bml0cyB8fCBbXSk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUJhdGNoQ3JlYXRlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnN0YXRlLnNlbGVjdGVkVW5pdElkcy5zaXplID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU4OTgxXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXHU3Njg0XHU3QjE0XHU4QkIwJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIFx1OEMwM1x1NzUyOFx1NjI3OVx1OTFDRlx1NTIxQlx1NUVGQVx1OTAzQlx1OEY5MVxuICAgIHRoaXMuYmF0Y2hDcmVhdGVGbGFzaGNhcmRzKCk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUJhdGNoRGVsZXRlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnN0YXRlLmdldFNlbGVjdGVkQ291bnQoKSA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1OEJGN1x1NTE0OFx1OTAwOVx1NjJFOVx1ODk4MVx1NTIyMFx1OTY2NFx1NzY4NFx1OTg3OVx1NzZFRScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5zdGF0ZS52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgICAgdGhpcy5iYXRjaERlbGV0ZUZsYXNoY2FyZHMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5iYXRjaERlbGV0ZU5vdGVzKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVCYXRjaENhbmNlbCgpOiB2b2lkIHtcbiAgICB0aGlzLnN0YXRlLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgdGhpcy5yZW5kZXIoKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFx1NjU3MFx1NjM2RVx1ODNCN1x1NTNENlx1NjVCOVx1NkNENSA9PT09PT09PT09PT09PT09PT09PVxuXG4gIHByaXZhdGUgZ2V0RmlsdGVyZWRVbml0cygpOiBDb250ZW50VW5pdFtdIHtcbiAgICBsZXQgdW5pdHMgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRBbGxDb250ZW50VW5pdHMoKTtcbiAgICBcbiAgICAvLyBcdTY0MUNcdTdEMjJcdThGQzdcdTZFRTRcbiAgICBpZiAodGhpcy5zdGF0ZS5zZWFyY2hRdWVyeSkge1xuICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLnN0YXRlLnNlYXJjaFF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgICB1bml0cyA9IHVuaXRzLmZpbHRlcih1bml0ID0+XG4gICAgICAgIHVuaXQuY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSB8fFxuICAgICAgICB1bml0LnNvdXJjZS5maWxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8XG4gICAgICAgIHVuaXQubWV0YWRhdGEudGFncy5zb21lKHRhZyA9PiB0YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkpXG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdTdDN0JcdTU3OEJcdThGQzdcdTZFRTRcbiAgICBpZiAodGhpcy5zdGF0ZS5maWx0ZXJNb2RlID09PSAnYW5ub3RhdGVkJykge1xuICAgICAgdW5pdHMgPSB1bml0cy5maWx0ZXIodSA9PiB1LmFubm90YXRpb25JZCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmZpbHRlck1vZGUgPT09ICdmbGFzaGNhcmRzJykge1xuICAgICAgdW5pdHMgPSB1bml0cy5maWx0ZXIodSA9PiB1LmZsYXNoY2FyZElkcy5sZW5ndGggPiAwKTtcbiAgICB9XG4gICAgXG4gICAgLy8gXHU0RkE3XHU4RkI5XHU2ODBGXHU2QTIxXHU1RjBGXHVGRjFBXHU1M0VBXHU2NjNFXHU3OTNBXHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XHU3Njg0XHU3QjE0XHU4QkIwXG4gICAgaWYgKHRoaXMuc3RhdGUuZGlzcGxheU1vZGUgPT09ICdzaWRlYmFyJyAmJiB0aGlzLnN0YXRlLnNlbGVjdGVkRmlsZSkge1xuICAgICAgdW5pdHMgPSB1bml0cy5maWx0ZXIodW5pdCA9PiB1bml0LnNvdXJjZS5maWxlID09PSB0aGlzLnN0YXRlLnNlbGVjdGVkRmlsZSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB1bml0cztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RmlsdGVyZWRVbml0c0ZvclNlbGVjdGVkR3JvdXAoKTogQ29udGVudFVuaXRbXSB7XG4gICAgY29uc3QgdW5pdHMgPSB0aGlzLmdldEZpbHRlcmVkVW5pdHMoKTtcbiAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuc3RhdGUuc2VsZWN0ZWRGaWxlO1xuICBcbiAgICBpZiAoIXNlbGVjdGVkKSByZXR1cm4gW107XG4gIFxuICAgIHJldHVybiB1bml0cy5maWx0ZXIodW5pdCA9PiB7XG4gICAgICBpZiAodGhpcy5zdGF0ZS5ncm91cE1vZGUgPT09ICdmaWxlJykge1xuICAgICAgICByZXR1cm4gdW5pdC5zb3VyY2UuZmlsZSA9PT0gc2VsZWN0ZWQ7XG4gIFxuICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmdyb3VwTW9kZSA9PT0gJ2Fubm90YXRpb24nKSB7XG4gICAgICAgIGNvbnN0IGhhc0Fubm90YXRpb24gPSBzZWxlY3RlZCA9PT0gJ1x1NjcwOVx1NjI3OVx1NkNFOCc7XG4gICAgICAgIHJldHVybiBoYXNBbm5vdGF0aW9uID8gISF1bml0LmFubm90YXRpb25JZCA6ICF1bml0LmFubm90YXRpb25JZDtcbiAgXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuZ3JvdXBNb2RlID09PSAndGFnJykge1xuICAgICAgICByZXR1cm4gdW5pdC5tZXRhZGF0YS50YWdzLmluY2x1ZGVzKHNlbGVjdGVkKTtcbiAgXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuZ3JvdXBNb2RlID09PSAnZGF0ZScpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUodW5pdC5tZXRhZGF0YS5jcmVhdGVkQXQpKSA9PT0gc2VsZWN0ZWRcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgfVxuICBcblxuICBwcml2YXRlIGdldEZpbHRlcmVkQ2FyZHNGb3JTZWxlY3RlZEdyb3VwKCk6IEZsYXNoY2FyZFtdIHtcbiAgICBjb25zdCBmbGFzaGNhcmRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRBbGxGbGFzaGNhcmRzKCk7XG4gICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLnN0YXRlLnNlbGVjdGVkRmlsZTtcbiAgICBpZiAoIXNlbGVjdGVkKSByZXR1cm4gW107XG4gICAgXG4gICAgcmV0dXJuIGZsYXNoY2FyZHMuZmlsdGVyKGNhcmQgPT4ge1xuICAgICAgaWYgKHRoaXMuc3RhdGUuZ3JvdXBNb2RlID09PSAnZmlsZScpIHtcbiAgICAgICAgcmV0dXJuIGNhcmQuc291cmNlRmlsZSA9PT0gdGhpcy5zdGF0ZS5zZWxlY3RlZEZpbGU7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuZ3JvdXBNb2RlID09PSAnYW5ub3RhdGlvbicpIHtcbiAgICAgICAgY29uc3QgdW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNhcmQuc291cmNlQ29udGVudElkKTtcbiAgICAgICAgY29uc3QgaGFzQW5ub3RhdGlvbiA9IHRoaXMuc3RhdGUuc2VsZWN0ZWRGaWxlID09PSAnXHU2NzA5XHU2Mjc5XHU2Q0U4JztcbiAgICAgICAgcmV0dXJuIGhhc0Fubm90YXRpb24gPyAodW5pdCAmJiAhIXVuaXQuYW5ub3RhdGlvbklkKSA6ICghdW5pdCB8fCAhdW5pdC5hbm5vdGF0aW9uSWQpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmdyb3VwTW9kZSA9PT0gJ3RhZycpIHtcbiAgICAgICAgY29uc3QgdW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNhcmQuc291cmNlQ29udGVudElkKTtcbiAgICAgICAgcmV0dXJuICh1bml0ICYmIHVuaXQubWV0YWRhdGEudGFncy5pbmNsdWRlcyhzZWxlY3RlZCkpIHx8XG4gICAgICAgICAgICAgICAoY2FyZC50YWdzICYmIGNhcmQudGFncy5pbmNsdWRlcyhzZWxlY3RlZCkpIHx8XG4gICAgICAgICAgICAgICAoY2FyZC5kZWNrID09PSB0aGlzLnN0YXRlLnNlbGVjdGVkRmlsZSkgfHxcbiAgICAgICAgICAgICAgICh0aGlzLnN0YXRlLnNlbGVjdGVkRmlsZSA9PT0gJ1x1NjcyQVx1NTIwNlx1N0M3QicgJiYgXG4gICAgICAgICAgICAgICAgKCFjYXJkLnRhZ3MgfHwgY2FyZC50YWdzLmxlbmd0aCA9PT0gMCkgJiYgXG4gICAgICAgICAgICAgICAgIWNhcmQuZGVjayAmJlxuICAgICAgICAgICAgICAgICghdW5pdCB8fCAhdW5pdC5tZXRhZGF0YS50YWdzIHx8IHVuaXQubWV0YWRhdGEudGFncy5sZW5ndGggPT09IDApKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5ncm91cE1vZGUgPT09ICdkYXRlJykge1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKGNhcmQubWV0YWRhdGEuY3JlYXRlZEF0KSkgPT09IHRoaXMuc3RhdGUuc2VsZWN0ZWRGaWxlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRWaXNpYmxlSXRlbXMoKTogeyB1bml0cz86IENvbnRlbnRVbml0W107IGNhcmRzPzogRmxhc2hjYXJkW10gfSB7XG4gICAgaWYgKHRoaXMuc3RhdGUudmlld1R5cGUgPT09ICdjYXJkcycpIHtcbiAgICAgIGNvbnN0IGNhcmRzID0gdGhpcy5nZXRGaWx0ZXJlZENhcmRzRm9yU2VsZWN0ZWRHcm91cCgpO1xuICAgICAgcmV0dXJuIHsgY2FyZHMgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdW5pdHMgPSB0aGlzLnN0YXRlLmRpc3BsYXlNb2RlID09PSAnc2lkZWJhcicgXG4gICAgICAgID8gdGhpcy5nZXRGaWx0ZXJlZFVuaXRzKCkgXG4gICAgICAgIDogdGhpcy5nZXRGaWx0ZXJlZFVuaXRzRm9yU2VsZWN0ZWRHcm91cCgpO1xuICAgICAgcmV0dXJuIHsgdW5pdHMgfTtcbiAgICB9XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTRFMUFcdTUyQTFcdTkwM0JcdThGOTFcdTY1QjlcdTZDRDUgPT09PT09PT09PT09PT09PT09PT1cblxuICBwcml2YXRlIGFzeW5jIGp1bXBUb1NvdXJjZSh1bml0OiBDb250ZW50VW5pdCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodW5pdC5zb3VyY2UuZmlsZSk7XG4gICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFx1NjU4N1x1NEVGNlx1NEUwRFx1NUI1OFx1NTcyOCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLnN0YXRlLnNob3VsZFJlc3RvcmVTY3JvbGwgPSB0cnVlO1xuICAgIFxuICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XG4gICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcbiAgICBcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShJdGVtVmlldyk7XG4gICAgICBpZiAodmlldykge1xuICAgICAgICBjb25zdCBlZGl0b3IgPSAodmlldyBhcyBhbnkpLmVkaXRvcjtcbiAgICAgICAgaWYgKGVkaXRvcikge1xuICAgICAgICAgIGNvbnN0IGxpbmUgPSB1bml0LnNvdXJjZS5wb3NpdGlvbi5saW5lO1xuICAgICAgICAgIGNvbnN0IGxpbmVDb3VudCA9IGVkaXRvci5saW5lQ291bnQoKTtcbiAgICAgICAgICBjb25zdCB2YWxpZExpbmUgPSBNYXRoLm1pbihsaW5lLCBsaW5lQ291bnQgLSAxKTtcbiAgICAgICAgICBcbiAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHsgbGluZTogdmFsaWRMaW5lLCBjaDogMCB9KTtcbiAgICAgICAgICBlZGl0b3Iuc2Nyb2xsSW50b1ZpZXcoXG4gICAgICAgICAgICB7IGZyb206IHsgbGluZTogdmFsaWRMaW5lLCBjaDogMCB9LCB0bzogeyBsaW5lOiB2YWxpZExpbmUsIGNoOiAwIH0gfSxcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3QgbGluZUxlbmd0aCA9IGVkaXRvci5nZXRMaW5lKHZhbGlkTGluZSk/Lmxlbmd0aCB8fCAwO1xuICAgICAgICAgICAgICBlZGl0b3Iuc2V0U2VsZWN0aW9uKFxuICAgICAgICAgICAgICAgIHsgbGluZTogdmFsaWRMaW5lLCBjaDogMCB9LFxuICAgICAgICAgICAgICAgIHsgbGluZTogdmFsaWRMaW5lLCBjaDogbGluZUxlbmd0aCB9XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NlbGVjdGlvbiBlcnJvcjonLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCAxMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgMjAwKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2F2ZUFubm90YXRpb24odW5pdElkOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHRyaW1tZWRUZXh0ID0gY29udGVudC50cmltKCk7XG4gICAgY29uc3QgYW5ub3RhdGlvbiA9IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmdldENvbnRlbnRBbm5vdGF0aW9uKHVuaXRJZCk7XG4gICAgXG4gICAgaWYgKHRyaW1tZWRUZXh0KSB7XG4gICAgICBpZiAoYW5ub3RhdGlvbikge1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hbm5vdGF0aW9uTWFuYWdlci51cGRhdGVBbm5vdGF0aW9uKGFubm90YXRpb24uaWQsIHtcbiAgICAgICAgICBjb250ZW50OiB0cmltbWVkVGV4dFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFubm90YXRpb25NYW5hZ2VyLmFkZENvbnRlbnRBbm5vdGF0aW9uKHVuaXRJZCwgdHJpbW1lZFRleHQpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYW5ub3RhdGlvbikge1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYW5ub3RhdGlvbk1hbmFnZXIuZGVsZXRlQW5ub3RhdGlvbihhbm5vdGF0aW9uLmlkKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1RDgzRFx1REREMVx1RkUwRiBcdTYyNzlcdTZDRThcdTVERjJcdTUyMjBcdTk2NjQnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHF1aWNrR2VuZXJhdGVGbGFzaGNhcmQodW5pdDogQ29udGVudFVuaXQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBRdWlja0ZsYXNoY2FyZENyZWF0b3IgfSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vY29yZS9RdWlja0ZsYXNoY2FyZENyZWF0b3InKTtcbiAgICAgIGNvbnN0IGNyZWF0b3IgPSBuZXcgUXVpY2tGbGFzaGNhcmRDcmVhdG9yKHRoaXMucGx1Z2luKTtcbiAgICAgIGF3YWl0IGNyZWF0b3IuY3JlYXRlU21hcnRDYXJkKHVuaXQpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNkExIFx1OTVFQVx1NTM2MVx1NURGMlx1NzUxRlx1NjIxMCcpO1xuICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBcdTc1MUZcdTYyMTBcdTk1RUFcdTUzNjFcdTU5MzFcdThEMjUnKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvd0NvbnRleHRNZW51KGV2ZW50OiBNb3VzZUV2ZW50LCB1bml0OiBDb250ZW50VW5pdCk6IHZvaWQge1xuICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xuICAgIFxuICAgIC8vIFx1OERGM1x1OEY2Q1x1NTIzMFx1NTM5Rlx1NjU4N1xuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdUQ4M0RcdURDRDYgXHU4REYzXHU4RjZDXHU1MjMwXHU1MzlGXHU2NTg3JylcbiAgICAgICAgLnNldEljb24oJ2Fycm93LXVwLXJpZ2h0JylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5qdW1wVG9Tb3VyY2UodW5pdCkpXG4gICAgKTtcbiAgICBcbiAgICAvLyBcdTdGMTZcdThGOTFcdTYyNzlcdTZDRThcbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHVEODNEXHVEQ0FDIFx1N0YxNlx1OEY5MVx1NjI3OVx1NkNFOCcpXG4gICAgICAgIC5zZXRJY29uKCdtZXNzYWdlLXNxdWFyZScpXG4gICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICBjb25zdCBjYXJkID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgIGNvbnN0IGNhcmRFbCA9IGNhcmQuY2xvc2VzdCgnLmNvbXBhY3QtY2FyZCwgLmdyaWQtY2FyZCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgIGlmIChjYXJkRWwpIHtcbiAgICAgICAgICAgIHRoaXMuYW5ub3RhdGlvbkVkaXRvci50b2dnbGUoY2FyZEVsLCB1bml0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgKTtcbiAgICBcbiAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xuICAgIFxuICAgIC8vIFx1N0YxNlx1OEY5MVx1OTVFQVx1NTM2MSAoXHU1OTgyXHU2NzlDXHU1REYyXHU2NzA5XHU5NUVBXHU1MzYxKS8vXG4gICAgaWYgKHVuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgaXRlbVxuICAgICAgICAgIC5zZXRUaXRsZSgnXHUyNzBGXHVGRTBGIFx1N0YxNlx1OEY5MVx1OTVFQVx1NTM2MScpXG4gICAgICAgICAgLnNldEljb24oJ3BlbmNpbCcpXG4gICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FyZElkID0gdW5pdC5mbGFzaGNhcmRJZHNbMF07XG4gICAgICAgICAgICBjb25zdCBjYXJkID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRGbGFzaGNhcmQoY2FyZElkKTtcbiAgICAgICAgICAgIGlmIChjYXJkKSB7XG4gICAgICAgICAgICAgIHRoaXMub3BlbkVkaXRGbGFzaGNhcmRNb2RhbChjYXJkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdTYyN0VcdTRFMERcdTUyMzBcdTVCRjlcdTVFOTRcdTc2ODRcdTk1RUFcdTUzNjEnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gXHU3NTFGXHU2MjEwXHU5NUVBXHU1MzYxIChBSVx1NjY3QVx1ODBGRFx1NzUxRlx1NjIxMClcbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHUyNkExIFx1NzUxRlx1NjIxMFx1OTVFQVx1NTM2MScpXG4gICAgICAgIC5zZXRJY29uKCd6YXAnKVxuICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLnF1aWNrR2VuZXJhdGVGbGFzaGNhcmQodW5pdCkpXG4gICAgKTtcbiAgICBcbiAgICAvLyBcdTUyMUJcdTVFRkEgUUEgXHU5NUVBXHU1MzYxXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1Mjc5NSBcdTUyMUJcdTVFRkEgUUEgXHU5NUVBXHU1MzYxJylcbiAgICAgICAgLnNldEljb24oJ3BsdXMnKVxuICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgdGhpcy5vcGVuTWFudWFsRmxhc2hjYXJkTW9kYWwodW5pdCwgJ3FhJyk7XG4gICAgICAgIH0pXG4gICAgKTtcbiAgICBcbiAgICAvLyBcdTUyMUJcdTVFRkFcdTU4NkJcdTdBN0FcdTk1RUFcdTUzNjFcbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHUyNzk1IFx1NTIxQlx1NUVGQVx1NTg2Qlx1N0E3QVx1OTVFQVx1NTM2MScpXG4gICAgICAgIC5zZXRJY29uKCdwbHVzJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgIHRoaXMub3Blbk1hbnVhbEZsYXNoY2FyZE1vZGFsKHVuaXQsICdjbG96ZScpO1xuICAgICAgICB9KVxuICAgICk7XG4gICAgXG4gICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcbiAgICBcbiAgICAvLyBcdTY3RTVcdTc3MEJcdTdFREZcdThCQTFcbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHVEODNEXHVEQ0NBIFx1NjdFNVx1NzcwQlx1N0VERlx1OEJBMScpXG4gICAgICAgIC5zZXRJY29uKCdiYXItY2hhcnQnKVxuICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgdGhpcy5wbHVnaW4uYWN0aXZhdGVTdGF0cygpO1xuICAgICAgICB9KVxuICAgICk7XG4gICAgXG4gICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcbiAgICBcbiAgICAvLyBcdTUyMjBcdTk2NjRcdTdCMTRcdThCQjBcbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHVEODNEXHVEREQxXHVGRTBGIFx1NTIyMFx1OTY2NFx1N0IxNFx1OEJCMCcpXG4gICAgICAgIC5zZXRJY29uKCd0cmFzaCcpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBpZiAoY29uZmlybSgnXHU3ODZFXHU1QjlBXHU4OTgxXHU1MjIwXHU5NjY0XHU4RkQ5XHU2NzYxXHU3QjE0XHU4QkIwXHU1NDE3XHVGRjFGJykpIHtcbiAgICAgICAgICAgIGlmICh1bml0LmZsYXNoY2FyZElkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgY2FyZElkIG9mIHVuaXQuZmxhc2hjYXJkSWRzKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5kZWxldGVDYXJkKGNhcmRJZCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmRlbGV0ZUNvbnRlbnRVbml0KHVuaXQuaWQpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHVEODNEXHVEREQxXHVGRTBGIFx1N0IxNFx1OEJCMFx1NURGMlx1NTIyMFx1OTY2NCcpO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICk7XG4gICAgXG4gICAgbWVudS5zaG93QXRNb3VzZUV2ZW50KGV2ZW50KTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBvcGVuTWFudWFsRmxhc2hjYXJkTW9kYWwodW5pdDogQ29udGVudFVuaXQsIHR5cGU6ICdxYScgfCAnY2xvemUnKTogdm9pZCB7XG4gICAgY2xhc3MgTWFudWFsRmxhc2hjYXJkTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgICB1bml0OiBDb250ZW50VW5pdDtcbiAgICAgIHR5cGU6ICdxYScgfCAnY2xvemUnO1xuICAgICAgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbjtcbiAgICAgIHF1ZXN0aW9uOiBzdHJpbmcgPSAnJztcbiAgICAgIGFuc3dlcjogc3RyaW5nID0gJyc7XG4gICAgICBcbiAgICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luLCB1bml0OiBDb250ZW50VW5pdCwgdHlwZTogJ3FhJyB8ICdjbG96ZScpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMudW5pdCA9IHVuaXQ7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTY4MzlcdTYzNkVcdTdDN0JcdTU3OEJcdThCQkVcdTdGNkVcdTlFRDhcdThCQTRcdTUwM0NcbiAgICAgICAgaWYgKHR5cGUgPT09ICdxYScpIHtcbiAgICAgICAgICB0aGlzLnF1ZXN0aW9uID0gdW5pdC50eXBlID09PSAnUUEnID8gdW5pdC5jb250ZW50IDogdW5pdC5jb250ZW50O1xuICAgICAgICAgIHRoaXMuYW5zd2VyID0gdW5pdC50eXBlID09PSAnUUEnICYmIHVuaXQuYW5zd2VyID8gdW5pdC5hbnN3ZXIgOiAnJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnF1ZXN0aW9uID0gdW5pdC5mdWxsQ29udGV4dCB8fCB1bml0LmNvbnRlbnQ7XG4gICAgICAgICAgdGhpcy5hbnN3ZXIgPSB1bml0LmNvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnbWFudWFsLWZsYXNoY2FyZC1tb2RhbCcpO1xuICAgICAgICBcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgXG4gICAgICAgICAgdGV4dDogdGhpcy50eXBlID09PSAncWEnID8gJ1x1MjcwRlx1RkUwRiBcdTUyMUJcdTVFRkEgUUEgXHU5NUVBXHU1MzYxJyA6ICdcdTI3MEZcdUZFMEYgXHU1MjFCXHU1RUZBXHU1ODZCXHU3QTdBXHU5NUVBXHU1MzYxJyBcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7XG4gICAgICAgICAgdGV4dDogdGhpcy50eXBlID09PSAncWEnIFxuICAgICAgICAgICAgPyAnXHU1MjFCXHU1RUZBXHU0RTAwXHU1RjIwXHU5NUVFXHU3QjU0XHU1MzYxXHU3MjQ3XHVGRjBDXHU1M0VGXHU0RUU1XHU4MUVBXHU1QjlBXHU0RTQ5XHU5NUVFXHU5ODk4XHU1NDhDXHU3QjU0XHU2ODQ4JyBcbiAgICAgICAgICAgIDogJ1x1NTIxQlx1NUVGQVx1NEUwMFx1NUYyMFx1NTg2Qlx1N0E3QVx1NTM2MVx1NzI0N1x1RkYwQ1x1NTcyOFx1NUI4Q1x1NjU3NFx1NjU4N1x1NjcyQ1x1NEUyRFx1NjgwN1x1OEJCMFx1ODk4MVx1NjMxNlx1N0E3QVx1NzY4NFx1NTE4NVx1NUJCOScsXG4gICAgICAgICAgY2xzOiAnbW9kYWwtZGVzY3JpcHRpb24nXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU5NUVFXHU5ODk4L1x1NUI4Q1x1NjU3NFx1NjU4N1x1NjcyQ1xuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgLnNldE5hbWUodGhpcy50eXBlID09PSAncWEnID8gJ1x1OTVFRVx1OTg5OCAoRnJvbnQpJyA6ICdcdTVCOENcdTY1NzRcdTY1ODdcdTY3MkMnKVxuICAgICAgICAgIC5zZXREZXNjKHRoaXMudHlwZSA9PT0gJ3FhJyA/ICdcdTUzNjFcdTcyNDdcdTZCNjNcdTk3NjJcdTY2M0VcdTc5M0FcdTc2ODRcdTk1RUVcdTk4OTgnIDogJ1x1NTMwNVx1NTQyQlx1N0I1NFx1Njg0OFx1NzY4NFx1NUI4Q1x1NjU3NFx1NTNFNVx1NUI1MFx1NjIxNlx1NkJCNVx1ODQzRCcpXG4gICAgICAgICAgLmFkZFRleHRBcmVhKCh0ZXh0OiBUZXh0QXJlYUNvbXBvbmVudCkgPT4ge1xuICAgICAgICAgICAgdGV4dFxuICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5xdWVzdGlvbilcbiAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFxuICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9PT0gJ3FhJyBcbiAgICAgICAgICAgICAgICAgID8gJ1x1NEY4Qlx1NTk4MjogXHU0RUMwXHU0RTQ4XHU2NjJGXHU5NUY0XHU5Njk0XHU5MUNEXHU1OTBEPycgXG4gICAgICAgICAgICAgICAgICA6ICdcdTRGOEJcdTU5ODI6IFx1OTVGNFx1OTY5NFx1OTFDRFx1NTkwRFx1NjYyRlx1NEUwMFx1NzlDRFx1NUI2Nlx1NEU2MFx1NjI4MFx1NjcyRidcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlOiBzdHJpbmcpID0+IHRoaXMucXVlc3Rpb24gPSB2YWx1ZSk7XG4gICAgICAgICAgICB0ZXh0LmlucHV0RWwucm93cyA9IDQ7XG4gICAgICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTdCNTRcdTY4NDgvXHU2MzE2XHU3QTdBXHU1MTg1XHU1QkI5XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAuc2V0TmFtZSh0aGlzLnR5cGUgPT09ICdxYScgPyAnXHU3QjU0XHU2ODQ4IChCYWNrKScgOiAnXHU2MzE2XHU3QTdBXHU1MTg1XHU1QkI5JylcbiAgICAgICAgICAuc2V0RGVzYyh0aGlzLnR5cGUgPT09ICdxYScgPyAnXHU1MzYxXHU3MjQ3XHU4MENDXHU5NzYyXHU2NjNFXHU3OTNBXHU3Njg0XHU3QjU0XHU2ODQ4JyA6ICdcdTg5ODFcdTg4QUJcdTYzMTZcdTdBN0FcdTc2ODRcdTUxNzNcdTk1MkVcdThCQ0RcdTYyMTZcdTc3RURcdThCRUQnKVxuICAgICAgICAgIC5hZGRUZXh0QXJlYSgodGV4dDogVGV4dEFyZWFDb21wb25lbnQpID0+IHtcbiAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMuYW5zd2VyKVxuICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXG4gICAgICAgICAgICAgICAgdGhpcy50eXBlID09PSAncWEnIFxuICAgICAgICAgICAgICAgICAgPyAnXHU0RjhCXHU1OTgyOiBcdTk1RjRcdTk2OTRcdTkxQ0RcdTU5MERcdTY2MkZcdTRFMDBcdTc5Q0RcdTVCNjZcdTRFNjBcdTYyODBcdTY3MkYuLi4nIFxuICAgICAgICAgICAgICAgICAgOiAnXHU0RjhCXHU1OTgyOiBcdTk1RjRcdTk2OTRcdTkxQ0RcdTU5MEQnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZTogc3RyaW5nKSA9PiB0aGlzLmFuc3dlciA9IHZhbHVlKTtcbiAgICAgICAgICAgIHRleHQuaW5wdXRFbC5yb3dzID0gMztcbiAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NjMwOVx1OTRBRVx1N0VDNFxuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicgfSk7XG4gICAgICAgIFxuICAgICAgICBuZXcgU2V0dGluZyhidXR0b25Db250YWluZXIpXG4gICAgICAgICAgLmFkZEJ1dHRvbigoYnRuOiBCdXR0b25Db21wb25lbnQpID0+IGJ0blxuICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1x1NTNENlx1NkQ4OCcpXG4gICAgICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLmNsb3NlKCkpXG4gICAgICAgICAgKVxuICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bjogQnV0dG9uQ29tcG9uZW50KSA9PiBidG5cbiAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjEnKVxuICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiBhd2FpdCB0aGlzLmNyZWF0ZUZsYXNoY2FyZCgpKVxuICAgICAgICAgICk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGFzeW5jIGNyZWF0ZUZsYXNoY2FyZCgpIHtcbiAgICAgICAgLy8gXHU5QThDXHU4QkMxXHU4RjkzXHU1MTY1XG4gICAgICAgIGlmICghdGhpcy5xdWVzdGlvbi50cmltKCkpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU5NUVFXHU5ODk4L1x1NjU4N1x1NjcyQ1x1NEUwRFx1ODBGRFx1NEUzQVx1N0E3QScpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuYW5zd2VyLnRyaW0oKSkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBcdTdCNTRcdTY4NDhcdTRFMERcdTgwRkRcdTRFM0FcdTdBN0EnKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gXHU0RjdGXHU3NTI4IEZsYXNoY2FyZE1hbmFnZXIgXHU3Njg0IGNyZWF0ZUZsYXNoY2FyZEZyb21Vbml0IFx1NjVCOVx1NkNENVxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuY3JlYXRlRmxhc2hjYXJkRnJvbVVuaXQoXG4gICAgICAgICAgICB0aGlzLnVuaXQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGN1c3RvbVF1ZXN0aW9uOiB0aGlzLnF1ZXN0aW9uLnRyaW0oKSxcbiAgICAgICAgICAgICAgY3VzdG9tQW5zd2VyOiB0aGlzLmFuc3dlci50cmltKCksXG4gICAgICAgICAgICAgIGNhcmRUeXBlOiB0aGlzLnR5cGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIG5ldyBOb3RpY2UoXG4gICAgICAgICAgICB0aGlzLnR5cGUgPT09ICdxYScgXG4gICAgICAgICAgICAgID8gJ1x1MjcwNSBRQSBcdTk1RUFcdTUzNjFcdTVERjJcdTUyMUJcdTVFRkEnIFxuICAgICAgICAgICAgICA6ICdcdTI3MDUgXHU1ODZCXHU3QTdBXHU5NUVBXHU1MzYxXHU1REYyXHU1MjFCXHU1RUZBJ1xuICAgICAgICAgICk7XG4gICAgICAgICAgXG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFx1NTIzN1x1NjVCMFx1ODlDNlx1NTZGRVxuICAgICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9TSURFQkFSX09WRVJWSUVXKVswXT8udmlldyB8fFxuICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9NQUlOX09WRVJWSUVXKVswXT8udmlldztcbiAgICAgICAgICBpZiAodmlldyAmJiAncmVmcmVzaCcgaW4gdmlldykge1xuICAgICAgICAgICAgKHZpZXcgYXMgYW55KS5yZWZyZXNoKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcdTU5MzFcdThEMjUnKTtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBmbGFzaGNhcmQ6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgbmV3IE1hbnVhbEZsYXNoY2FyZE1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgdW5pdCwgdHlwZSkub3BlbigpO1xuICB9XG5cblxuICBwcml2YXRlIHNob3dGbGFzaGNhcmRDb250ZXh0TWVudShldmVudDogTW91c2VFdmVudCwgY2FyZDogRmxhc2hjYXJkKTogdm9pZCB7XG4gICAgY29uc3QgbWVudSA9IG5ldyBNZW51KCk7XG4gICAgXG4gICAgLy8gXHU4REYzXHU4RjZDXHU1MjMwXHU1MzlGXHU2NTg3XG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1RDgzRFx1RENENiBcdThERjNcdThGNkNcdTUyMzBcdTUzOUZcdTY1ODcnKVxuICAgICAgICAuc2V0SWNvbignYXJyb3ctdXAtcmlnaHQnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgdW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNhcmQuc291cmNlQ29udGVudElkKTtcbiAgICAgICAgICBpZiAodW5pdCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5qdW1wVG9Tb3VyY2UodW5pdCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY2FyZC5zb3VyY2VGaWxlKTtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3MDUgXHU1REYyXHU2MjUzXHU1RjAwXHU2RTkwXHU2NTg3XHU0RUY2Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU2MjdFXHU0RTBEXHU1MjMwXHU1MzlGXHU1OUNCXHU3QjE0XHU4QkIwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICk7XG4gICAgXG4gICAgLy8gXHU3RjE2XHU4RjkxXHU1MzYxXHU3MjQ3XG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1MjcwRlx1RkUwRiBcdTdGMTZcdThGOTFcdTUzNjFcdTcyNDcnKVxuICAgICAgICAuc2V0SWNvbigncGVuY2lsJylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgIHRoaXMub3BlbkVkaXRGbGFzaGNhcmRNb2RhbChjYXJkKTtcbiAgICAgICAgfSlcbiAgICApO1xuICAgIFxuICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG4gICAgXG4gICAgLy8gXHU2N0U1XHU3NzBCXHU3RURGXHU4QkExXG4gICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1RDgzRFx1RENDQSBcdTY3RTVcdTc3MEJcdTdFREZcdThCQTEnKVxuICAgICAgICAuc2V0SWNvbignYmFyLWNoYXJ0JylcbiAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNyZWF0ZWREYXRlID0gbmV3IERhdGUoY2FyZC5tZXRhZGF0YS5jcmVhdGVkQXQpLnRvTG9jYWxlU3RyaW5nKCd6aC1DTicpO1xuICAgICAgICAgIGNvbnN0IGxhc3RSZXZpZXcgPSBjYXJkLnN0YXRzLmxhc3RSZXZpZXcgXG4gICAgICAgICAgICA/IG5ldyBEYXRlKGNhcmQuc3RhdHMubGFzdFJldmlldykudG9Mb2NhbGVTdHJpbmcoJ3poLUNOJylcbiAgICAgICAgICAgIDogJ1x1NjcyQVx1NTkwRFx1NEU2MCc7XG4gICAgICAgICAgY29uc3QgbmV4dFJldmlldyA9IG5ldyBEYXRlKGNhcmQuc2NoZWR1bGluZy5kdWUpLnRvTG9jYWxlU3RyaW5nKCd6aC1DTicpO1xuICAgICAgICAgIGNvbnN0IGFjY3VyYWN5ID0gY2FyZC5zdGF0cy50b3RhbFJldmlld3MgPiAwIFxuICAgICAgICAgICAgPyAoKGNhcmQuc3RhdHMuY29ycmVjdENvdW50IC8gY2FyZC5zdGF0cy50b3RhbFJldmlld3MpICogMTAwKS50b0ZpeGVkKDEpXG4gICAgICAgICAgICA6ICcwJztcbiAgICAgICAgICBcbiAgICAgICAgICBuZXcgTm90aWNlKFxuICAgICAgICAgICAgYFx1RDgzRFx1RENDQSBcdTk1RUFcdTUzNjFcdTdFREZcdThCQTFcXG5gICtcbiAgICAgICAgICAgIGBcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcdTI1MDFcXG5gICtcbiAgICAgICAgICAgIGBcdUQ4M0RcdURDQzEgXHU2NTg3XHU0RUY2OiAke2NhcmQuc291cmNlRmlsZS5zcGxpdCgnLycpLnBvcCgpfVxcbmAgK1xuICAgICAgICAgICAgYFx1RDgzQ1x1RENDRiBcdTdDN0JcdTU3OEI6ICR7Y2FyZC50eXBlID09PSAncWEnID8gJ1EmQScgOiAnXHU1ODZCXHU3QTdBJ31cXG5gICtcbiAgICAgICAgICAgIGBcdUQ4M0RcdURDREEgXHU1MzYxXHU3RUM0OiAke2NhcmQuZGVja31cXG5gICtcbiAgICAgICAgICAgIGBcdUQ4M0NcdURGRjdcdUZFMEYgXHU2ODA3XHU3QjdFOiAke2NhcmQudGFncz8ubGVuZ3RoID4gMCA/IGNhcmQudGFncy5qb2luKCcsICcpIDogJ1x1NjVFMCd9XFxuYCArXG4gICAgICAgICAgICBgXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXFxuYCArXG4gICAgICAgICAgICBgXHVEODNEXHVEQ0M4IFx1NTkwRFx1NEU2MFx1NkIyMVx1NjU3MDogJHtjYXJkLnN0YXRzLnRvdGFsUmV2aWV3c31cXG5gICtcbiAgICAgICAgICAgIGBcdTI3MDUgXHU2QjYzXHU3ODZFXHU2QjIxXHU2NTcwOiAke2NhcmQuc3RhdHMuY29ycmVjdENvdW50fVxcbmAgK1xuICAgICAgICAgICAgYFx1RDgzRFx1RENDQSBcdTZCNjNcdTc4NkVcdTczODc6ICR7YWNjdXJhY3l9JVxcbmAgK1xuICAgICAgICAgICAgYFx1MjNGMVx1RkUwRiBcdTVFNzNcdTU3NDdcdTc1MjhcdTY1RjY6ICR7Y2FyZC5zdGF0cy5hdmVyYWdlVGltZS50b0ZpeGVkKDEpfVx1NzlEMlxcbmAgK1xuICAgICAgICAgICAgYFx1RDgzQ1x1REZBRiBcdTk2QkVcdTVFQTY6ICR7KGNhcmQuc3RhdHMuZGlmZmljdWx0eSAqIDEwMCkudG9GaXhlZCgwKX0lXFxuYCArXG4gICAgICAgICAgICBgXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXHUyNTAxXFxuYCArXG4gICAgICAgICAgICBgXHVEODNEXHVEQ0M1IFx1NTIxQlx1NUVGQVx1NjVGNlx1OTVGNDogJHtjcmVhdGVkRGF0ZX1cXG5gICtcbiAgICAgICAgICAgIGBcdUQ4M0RcdUREMDQgXHU0RTBBXHU2QjIxXHU1OTBEXHU0RTYwOiAke2xhc3RSZXZpZXd9XFxuYCArXG4gICAgICAgICAgICBgXHUyM0YwIFx1NEUwQlx1NkIyMVx1NTkwRFx1NEU2MDogJHtuZXh0UmV2aWV3fVxcbmAgK1xuICAgICAgICAgICAgYFx1RDgzRFx1RENDRiBcdTk1RjRcdTk2OTQ6ICR7Y2FyZC5zY2hlZHVsaW5nLmludGVydmFsfVx1NTkyOVxcbmAgK1xuICAgICAgICAgICAgYFx1RDgzRFx1RENBQSBcdTcxOUZcdTdFQzNcdTVFQTY6ICR7Y2FyZC5zY2hlZHVsaW5nLmVhc2UudG9GaXhlZCgyKX1gLFxuICAgICAgICAgICAgMTAwMDBcbiAgICAgICAgICApO1xuICAgICAgICB9KVxuICAgICk7XG4gICAgXG4gICAgbWVudS5hZGRTZXBhcmF0b3IoKTtcbiAgICBcbiAgICAvLyBcdTUyMjBcdTk2NjRcdTUzNjFcdTcyNDdcbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICBpdGVtXG4gICAgICAgIC5zZXRUaXRsZSgnXHVEODNEXHVEREQxXHVGRTBGIFx1NTIyMFx1OTY2NFx1NTM2MVx1NzI0NycpXG4gICAgICAgIC5zZXRJY29uKCd0cmFzaCcpXG4gICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBpZiAoY29uZmlybSgnXHU3ODZFXHU1QjlBXHU4OTgxXHU1MjIwXHU5NjY0XHU4RkQ5XHU1RjIwXHU5NUVBXHU1MzYxXHU1NDE3XHVGRjFGJykpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZGVsZXRlQ2FyZChjYXJkLmlkKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1RDgzRFx1REREMVx1RkUwRiBcdTk1RUFcdTUzNjFcdTVERjJcdTUyMjBcdTk2NjQnKTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICApO1xuICAgIFxuICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XG4gIH1cbiAgXG4gIHByaXZhdGUgb3BlbkVkaXRGbGFzaGNhcmRNb2RhbChjYXJkOiBGbGFzaGNhcmQpOiB2b2lkIHtcbiAgICBjbGFzcyBFZGl0Rmxhc2hjYXJkTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgICBjYXJkOiBGbGFzaGNhcmQ7XG4gICAgICBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luO1xuICAgICAgZnJvbnQ6IHN0cmluZztcbiAgICAgIGJhY2s6IHN0cmluZztcbiAgICAgIFxuICAgICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4sIGNhcmQ6IEZsYXNoY2FyZCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5jYXJkID0gY2FyZDtcbiAgICAgICAgdGhpcy5mcm9udCA9IGNhcmQuZnJvbnQ7XG4gICAgICAgIHRoaXMuYmFjayA9IEFycmF5LmlzQXJyYXkoY2FyZC5iYWNrKSA/IGNhcmQuYmFjay5qb2luKCcsICcpIDogY2FyZC5iYWNrO1xuICAgICAgfVxuICAgICAgXG4gICAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdlZGl0LWZsYXNoY2FyZC1tb2RhbCcpO1xuICAgICAgICBcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgXG4gICAgICAgICAgdGV4dDogJ1x1MjcwRlx1RkUwRiBcdTdGMTZcdThGOTFcdTk1RUFcdTUzNjEnIFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHtcbiAgICAgICAgICB0ZXh0OiBgXHU3RjE2XHU4RjkxICR7dGhpcy5jYXJkLnR5cGUgPT09ICdxYScgPyAnUSZBJyA6ICdcdTU4NkJcdTdBN0EnfVx1NTM2MVx1NzI0N1x1NTE4NVx1NUJCOWAsXG4gICAgICAgICAgY2xzOiAnbW9kYWwtZGVzY3JpcHRpb24nXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU1MzYxXHU3MjQ3XHU0RkUxXHU2MDZGXG4gICAgICAgIGNvbnN0IGluZm9EaXYgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1pbmZvJyB9KTtcbiAgICAgICAgaW5mb0Rpdi5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTsgcGFkZGluZzogMTBweDsgYm9yZGVyLXJhZGl1czogNnB4OyBtYXJnaW4tYm90dG9tOiAxNXB4O1wiPlxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtc2l6ZTogMC45ZW07IGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcIj5cbiAgICAgICAgICAgICAgXHVEODNEXHVEQ0MxICR7dGhpcy5jYXJkLnNvdXJjZUZpbGUuc3BsaXQoJy8nKS5wb3AoKX08YnI+XG4gICAgICAgICAgICAgIFx1RDgzRFx1RENEQSBcdTUzNjFcdTdFQzQ6ICR7dGhpcy5jYXJkLmRlY2t9PGJyPlxuICAgICAgICAgICAgICBcdUQ4M0RcdURDQ0EgXHU1OTBEXHU0RTYwOiAke3RoaXMuY2FyZC5zdGF0cy50b3RhbFJldmlld3N9XHU2QjIxIHwgXHU2QjYzXHU3ODZFOiAke3RoaXMuY2FyZC5zdGF0cy5jb3JyZWN0Q291bnR9XHU2QjIxXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1OTVFRVx1OTg5OC9cdTUyNERcdTk3NjJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgIC5zZXROYW1lKHRoaXMuY2FyZC50eXBlID09PSAncWEnID8gJ1x1OTVFRVx1OTg5OCAoRnJvbnQpJyA6ICdcdTVCOENcdTY1NzRcdTY1ODdcdTY3MkMnKVxuICAgICAgICAgIC5zZXREZXNjKCdcdTUzNjFcdTcyNDdcdTZCNjNcdTk3NjJcdTY2M0VcdTc5M0FcdTc2ODRcdTUxODVcdTVCQjknKVxuICAgICAgICAgIC5hZGRUZXh0QXJlYSgodGV4dDogVGV4dEFyZWFDb21wb25lbnQpID0+IHtcbiAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMuZnJvbnQpXG4gICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWU6IHN0cmluZykgPT4gdGhpcy5mcm9udCA9IHZhbHVlKTtcbiAgICAgICAgICAgIHRleHQuaW5wdXRFbC5yb3dzID0gNDtcbiAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1N0I1NFx1Njg0OC9cdTU0MEVcdTk3NjJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgIC5zZXROYW1lKHRoaXMuY2FyZC50eXBlID09PSAncWEnID8gJ1x1N0I1NFx1Njg0OCAoQmFjayknIDogJ1x1NjMxNlx1N0E3QVx1N0I1NFx1Njg0OCcpXG4gICAgICAgICAgLnNldERlc2ModGhpcy5jYXJkLnR5cGUgPT09ICdxYScgPyAnXHU1MzYxXHU3MjQ3XHU4MENDXHU5NzYyXHU2NjNFXHU3OTNBXHU3Njg0XHU3QjU0XHU2ODQ4JyA6ICdcdTU5MUFcdTRFMkFcdTdCNTRcdTY4NDhcdTc1MjhcdTkwMTdcdTUzRjdcdTUyMDZcdTk2OTQnKVxuICAgICAgICAgIC5hZGRUZXh0QXJlYSgodGV4dDogVGV4dEFyZWFDb21wb25lbnQpID0+IHtcbiAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMuYmFjaylcbiAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZTogc3RyaW5nKSA9PiB0aGlzLmJhY2sgPSB2YWx1ZSk7XG4gICAgICAgICAgICB0ZXh0LmlucHV0RWwucm93cyA9IDM7XG4gICAgICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTYzMDlcdTk0QUVcdTdFQzRcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ21vZGFsLWJ1dHRvbi1jb250YWluZXInIH0pO1xuICAgICAgICBcbiAgICAgICAgbmV3IFNldHRpbmcoYnV0dG9uQ29udGFpbmVyKVxuICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bjogQnV0dG9uQ29tcG9uZW50KSA9PiBidG5cbiAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdcdTUzRDZcdTZEODgnKVxuICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5jbG9zZSgpKVxuICAgICAgICAgIClcbiAgICAgICAgICAuYWRkQnV0dG9uKChidG46IEJ1dHRvbkNvbXBvbmVudCkgPT4gYnRuXG4gICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnXHU0RkREXHU1QjU4JylcbiAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5zYXZlRmxhc2hjYXJkKCkpXG4gICAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgYXN5bmMgc2F2ZUZsYXNoY2FyZCgpIHtcbiAgICAgICAgLy8gXHU5QThDXHU4QkMxXHU4RjkzXHU1MTY1XG4gICAgICAgIGlmICghdGhpcy5mcm9udC50cmltKCkpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU5NUVFXHU5ODk4L1x1NjU4N1x1NjcyQ1x1NEUwRFx1ODBGRFx1NEUzQVx1N0E3QScpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuYmFjay50cmltKCkpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU3QjU0XHU2ODQ4XHU0RTBEXHU4MEZEXHU0RTNBXHU3QTdBJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NTM2MVx1NzI0N1xuICAgICAgICAgIHRoaXMuY2FyZC5mcm9udCA9IHRoaXMuZnJvbnQudHJpbSgpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICh0aGlzLmNhcmQudHlwZSA9PT0gJ2Nsb3plJykge1xuICAgICAgICAgICAgLy8gXHU1ODZCXHU3QTdBXHU1MzYxXHVGRjFBXHU1QzA2XHU5MDE3XHU1M0Y3XHU1MjA2XHU5Njk0XHU3Njg0XHU3QjU0XHU2ODQ4XHU4RjZDXHU2MzYyXHU0RTNBXHU2NTcwXHU3RUM0XG4gICAgICAgICAgICB0aGlzLmNhcmQuYmFjayA9IHRoaXMuYmFjay5zcGxpdCgnLCcpLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIocyA9PiBzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gXHU5NUVFXHU3QjU0XHU1MzYxXHVGRjFBXHU0RkREXHU2MzAxXHU1QjU3XHU3QjI2XHU0RTMyXG4gICAgICAgICAgICB0aGlzLmNhcmQuYmFjayA9IHRoaXMuYmFjay50cmltKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHRoaXMuY2FyZC5tZXRhZGF0YS51cGRhdGVkQXQgPSBEYXRlLm5vdygpO1xuICAgICAgICAgIFxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIudXBkYXRlQ2FyZCh0aGlzLmNhcmQpO1xuICAgICAgICAgIFxuICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBcdTk1RUFcdTUzNjFcdTVERjJcdTY2RjRcdTY1QjAnKTtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gXHU1MjM3XHU2NUIwXHU4OUM2XHU1NkZFXG4gICAgICAgICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1NJREVCQVJfT1ZFUlZJRVcpWzBdPy52aWV3IHx8XG4gICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX01BSU5fT1ZFUlZJRVcpWzBdPy52aWV3O1xuICAgICAgICAgIGlmICh2aWV3ICYmICdyZWZyZXNoJyBpbiB2aWV3KSB7XG4gICAgICAgICAgICAodmlldyBhcyBhbnkpLnJlZnJlc2goKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIFx1NEZERFx1NUI1OFx1NTkzMVx1OEQyNScpO1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGZsYXNoY2FyZDonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBuZXcgRWRpdEZsYXNoY2FyZE1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgY2FyZCkub3BlbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBiYXRjaENyZWF0ZUZsYXNoY2FyZHMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgdW5pdHMgPSBBcnJheS5mcm9tKHRoaXMuc3RhdGUuc2VsZWN0ZWRVbml0SWRzKVxuICAgICAgLm1hcChpZCA9PiB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChpZCkpXG4gICAgICAuZmlsdGVyKHUgPT4gdSAhPT0gdW5kZWZpbmVkICYmIHUuZmxhc2hjYXJkSWRzLmxlbmd0aCA9PT0gMCkgYXMgQ29udGVudFVuaXRbXTtcbiAgICBcbiAgICBpZiAodW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI2QTBcdUZFMEYgXHU5MDA5XHU0RTJEXHU3Njg0XHU3QjE0XHU4QkIwXHU5MEZEXHU1REYyXHU1MjFCXHU1RUZBXHU4RkM3XHU5NUVBXHU1MzYxJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIFx1NjYzRVx1NzkzQVx1NjI3OVx1OTFDRlx1NTIxQlx1NUVGQVx1NkEyMVx1NjAwMVx1Njg0NlxuICAgIGNvbnN0IHsgQmF0Y2hDcmVhdGVNb2RhbCB9ID0gYXdhaXQgaW1wb3J0KCcuL092ZXJ2aWV3VmlldycpO1xuICAgIGNvbnN0IHsgUXVpY2tGbGFzaGNhcmRDcmVhdG9yIH0gPSBhd2FpdCBpbXBvcnQoJy4uLy4uL2NvcmUvUXVpY2tGbGFzaGNhcmRDcmVhdG9yJyk7XG4gICAgY29uc3QgcXVpY2tDcmVhdG9yID0gbmV3IFF1aWNrRmxhc2hjYXJkQ3JlYXRvcih0aGlzLnBsdWdpbik7XG4gICAgY29uc3QgbW9kYWwgPSBuZXcgQmF0Y2hDcmVhdGVNb2RhbChcbiAgICAgIHRoaXMuYXBwLFxuICAgICAgdGhpcy5wbHVnaW4sXG4gICAgICBxdWlja0NyZWF0b3IsXG4gICAgICB1bml0cyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgdGhpcy5zdGF0ZS5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgIH1cbiAgICApO1xuICAgIG1vZGFsLm9wZW4oKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYmF0Y2hEZWxldGVOb3RlcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIWNvbmZpcm0oYFx1Nzg2RVx1NUI5QVx1ODk4MVx1NTIyMFx1OTY2NFx1OTAwOVx1NEUyRFx1NzY4NCAke3RoaXMuc3RhdGUuc2VsZWN0ZWRVbml0SWRzLnNpemV9IFx1Njc2MVx1N0IxNFx1OEJCMFx1NTQxN1x1RkYxRmApKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGxldCBzdWNjZXNzID0gMDtcbiAgICBsZXQgZmFpbGVkID0gMDtcbiAgICBcbiAgICBmb3IgKGNvbnN0IHVuaXRJZCBvZiB0aGlzLnN0YXRlLnNlbGVjdGVkVW5pdElkcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KHVuaXRJZCk7XG4gICAgICAgIFxuICAgICAgICBpZiAodW5pdCkge1xuICAgICAgICAgIGlmICh1bml0LmZsYXNoY2FyZElkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNhcmRJZCBvZiB1bml0LmZsYXNoY2FyZElkcykge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmRlbGV0ZUNhcmQoY2FyZElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmRlbGV0ZUNvbnRlbnRVbml0KHVuaXRJZCk7XG4gICAgICAgIHN1Y2Nlc3MrKztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIG5vdGU6JywgZXJyb3IpO1xuICAgICAgICBmYWlsZWQrKztcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy5zdGF0ZS5jbGVhclNlbGVjdGlvbigpO1xuICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBcdTVERjJcdTUyMjBcdTk2NjQgJHtzdWNjZXNzfSBcdTY3NjFcdTdCMTRcdThCQjAke2ZhaWxlZCA+IDAgPyBgXHVGRjBDJHtmYWlsZWR9IFx1Njc2MVx1NTkzMVx1OEQyNWAgOiAnJ31gKTtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgYmF0Y2hEZWxldGVGbGFzaGNhcmRzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghY29uZmlybShgXHU3ODZFXHU1QjlBXHU4OTgxXHU1MjIwXHU5NjY0XHU5MDA5XHU0RTJEXHU3Njg0ICR7dGhpcy5zdGF0ZS5zZWxlY3RlZENhcmRJZHMuc2l6ZX0gXHU1RjIwXHU5NUVBXHU1MzYxXHU1NDE3XHVGRjFGYCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgbGV0IHN1Y2Nlc3MgPSAwO1xuICAgIGxldCBmYWlsZWQgPSAwO1xuICAgIFxuICAgIGZvciAoY29uc3QgY2FyZElkIG9mIHRoaXMuc3RhdGUuc2VsZWN0ZWRDYXJkSWRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmRlbGV0ZUNhcmQoY2FyZElkKTtcbiAgICAgICAgc3VjY2VzcysrO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgZmxhc2hjYXJkOicsIGVycm9yKTtcbiAgICAgICAgZmFpbGVkKys7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHRoaXMuc3RhdGUuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICBuZXcgTm90aWNlKGBcdTI3MDUgXHU1REYyXHU1MjIwXHU5NjY0ICR7c3VjY2Vzc30gXHU1RjIwXHU5NUVBXHU1MzYxJHtmYWlsZWQgPiAwID8gYFx1RkYwQyR7ZmFpbGVkfSBcdTVGMjBcdTU5MzFcdThEMjVgIDogJyd9YCk7XG4gICAgdGhpcy5yZWZyZXNoKCk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTVERTVcdTUxNzdcdTY1QjlcdTZDRDUgPT09PT09PT09PT09PT09PT09PT1cblxuICBwcml2YXRlIHJlZnJlc2hSaWdodFBhbmVsKCk6IHZvaWQge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgcmlnaHRQYW5lbCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucmlnaHQtcGFuZWwnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAocmlnaHRQYW5lbCkge1xuICAgICAgcmlnaHRQYW5lbC5lbXB0eSgpO1xuICAgICAgdGhpcy5yZW5kZXJSaWdodFBhbmVsKHJpZ2h0UGFuZWwpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0R3JvdXBJY29uKCk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0aGlzLnN0YXRlLmdyb3VwTW9kZSkge1xuICAgICAgY2FzZSAnZmlsZSc6IHJldHVybiAnXHVEODNEXHVEQ0M0JztcbiAgICAgIGNhc2UgJ2Fubm90YXRpb24nOiByZXR1cm4gJ1x1RDgzRFx1RENBQyc7XG4gICAgICBjYXNlICd0YWcnOiByZXR1cm4gJ1x1RDgzQ1x1REZGN1x1RkUwRic7XG4gICAgICBjYXNlICdkYXRlJzogcmV0dXJuICdcdUQ4M0RcdURDQzUnO1xuICAgICAgZGVmYXVsdDogcmV0dXJuICdcdUQ4M0RcdURDQzEnO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0RGF0ZShkYXRlOiBEYXRlIHwgbnVsbCk6IHN0cmluZyB7XG4gICAgaWYgKCFkYXRlKSByZXR1cm4gJyc7XG4gICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCd6aC1DTicsIHtcbiAgICAgIHllYXI6ICdudW1lcmljJyxcbiAgICAgIG1vbnRoOiAnMi1kaWdpdCcsXG4gICAgICBkYXk6ICcyLWRpZ2l0J1xuICAgIH0pO1xuICBcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFx1NjgzN1x1NUYwRlx1NkRGQlx1NTJBMCA9PT09PT09PT09PT09PT09PT09PVxuXG5cbn0iLCAiLy8gc3JjL3VpL3N0YXRlL1ZpZXdTdGF0ZS50c1xuaW1wb3J0IHsgQ29udGVudFVuaXQgfSBmcm9tICcuLi8uLi9jb3JlL0RhdGFNYW5hZ2VyJztcbmltcG9ydCB7IEZsYXNoY2FyZCB9IGZyb20gJy4uLy4uL2NvcmUvRmxhc2hjYXJkTWFuYWdlcic7XG5cbmV4cG9ydCB0eXBlIEZpbHRlck1vZGUgPSAnYWxsJyB8ICdhbm5vdGF0ZWQnIHwgJ2ZsYXNoY2FyZHMnO1xuZXhwb3J0IHR5cGUgRGlzcGxheU1vZGUgPSAnc2lkZWJhcicgfCAnbWFpbic7XG5leHBvcnQgdHlwZSBHcm91cE1vZGUgPSAnZmlsZScgfCAnYW5ub3RhdGlvbicgfCAndGFnJyB8ICdkYXRlJztcbmV4cG9ydCB0eXBlIFZpZXdUeXBlID0gJ25vdGVzJyB8ICdjYXJkcyc7XG5cbmV4cG9ydCBjbGFzcyBWaWV3U3RhdGUge1xuICAvLyBcdTY2M0VcdTc5M0FcdTcyQjZcdTYwMDFcbiAgZm9yY2VNYWluTW9kZTogYm9vbGVhbiA9IGZhbHNlO1xuICBkaXNwbGF5TW9kZTogRGlzcGxheU1vZGUgPSAnc2lkZWJhcic7XG4gIHZpZXdUeXBlOiBWaWV3VHlwZSA9ICdub3Rlcyc7XG4gIFxuICAvLyBcdThGQzdcdTZFRTRcdTU0OENcdTUyMDZcdTdFQzRcbiAgc2VhcmNoUXVlcnk6IHN0cmluZyA9ICcnO1xuICBmaWx0ZXJNb2RlOiBGaWx0ZXJNb2RlID0gJ2FsbCc7XG4gIGdyb3VwTW9kZTogR3JvdXBNb2RlID0gJ2ZpbGUnO1xuICBzZWxlY3RlZEZpbGU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBcbiAgLy8gXHU2Mjc5XHU5MUNGXHU2NENEXHU0RjVDXG4gIGJhdGNoTW9kZTogYm9vbGVhbiA9IGZhbHNlO1xuICBzZWxlY3RlZFVuaXRJZHM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICBzZWxlY3RlZENhcmRJZHM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICBcbiAgLy8gVUlcdTcyQjZcdTYwMDFcbiAgYWN0aXZlTWVudUlkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgc2F2ZWRTY3JvbGxQb3NpdGlvbjogbnVtYmVyID0gMDtcbiAgc2hvdWxkUmVzdG9yZVNjcm9sbDogYm9vbGVhbiA9IGZhbHNlO1xuICBcbiAgLy8gXHU2MDI3XHU4MEZEXHU0RjE4XHU1MzE2XG4gIHNlYXJjaERlYm91bmNlVGltZXI6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBpc1JlbmRlcmluZzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKGZvcmNlTWFpbk1vZGU6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIHRoaXMuZm9yY2VNYWluTW9kZSA9IGZvcmNlTWFpbk1vZGU7XG4gICAgdGhpcy5kaXNwbGF5TW9kZSA9IGZvcmNlTWFpbk1vZGUgPyAnbWFpbicgOiAnc2lkZWJhcic7XG4gIH1cblxuICAvLyBcdTcyQjZcdTYwMDFcdTkxQ0RcdTdGNkVcdTY1QjlcdTZDRDVcbiAgY2xlYXJTZWxlY3Rpb24oKSB7XG4gICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuY2xlYXIoKTtcbiAgICB0aGlzLnNlbGVjdGVkQ2FyZElkcy5jbGVhcigpO1xuICAgIHRoaXMuYmF0Y2hNb2RlID0gZmFsc2U7XG4gIH1cbi8vIFx1NTIwN1x1NjM2Mlx1NjI3OVx1OTFDRlx1NkEyMVx1NUYwRlxuICB0b2dnbGVCYXRjaE1vZGUoKTogdm9pZCB7XG4gICAgdGhpcy5iYXRjaE1vZGUgPSAhdGhpcy5iYXRjaE1vZGU7XG4gICAgaWYgKCF0aGlzLmJhdGNoTW9kZSkge1xuICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgIH1cbiAgfVxuICAvLyBcdTY0MUNcdTdEMjJcdTc2RjhcdTUxNzNcbiAgc2V0U2VhcmNoUXVlcnkocXVlcnk6IHN0cmluZykge1xuICAgIHRoaXMuc2VhcmNoUXVlcnkgPSBxdWVyeTtcbiAgfVxuXG4gIC8vIFx1OEZDN1x1NkVFNFx1NTY2OFx1NTIwN1x1NjM2MlxuICBzZXRGaWx0ZXJNb2RlKG1vZGU6IEZpbHRlck1vZGUpIHtcbiAgICBpZiAodGhpcy5maWx0ZXJNb2RlICE9PSBtb2RlKSB7XG4gICAgICB0aGlzLmZpbHRlck1vZGUgPSBtb2RlO1xuICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIFx1NTIwNlx1N0VDNFx1NkEyMVx1NUYwRlx1NTIwN1x1NjM2MlxuICBzZXRHcm91cE1vZGUobW9kZTogR3JvdXBNb2RlKSB7XG4gICAgaWYgKHRoaXMuZ3JvdXBNb2RlICE9PSBtb2RlKSB7XG4gICAgICB0aGlzLmdyb3VwTW9kZSA9IG1vZGU7XG4gICAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IG51bGw7XG4gICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gXHU4OUM2XHU1NkZFXHU3QzdCXHU1NzhCXHU1MjA3XHU2MzYyXG4gIHNldFZpZXdUeXBlKHR5cGU6IFZpZXdUeXBlKSB7XG4gICAgaWYgKHRoaXMudmlld1R5cGUgIT09IHR5cGUpIHtcbiAgICAgIHRoaXMudmlld1R5cGUgPSB0eXBlO1xuICAgICAgdGhpcy5zZWxlY3RlZEZpbGUgPSBudWxsO1xuICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIFx1NjI3OVx1OTFDRlx1OTAwOVx1NjJFOVxuICB0b2dnbGVVbml0U2VsZWN0aW9uKHVuaXRJZDogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRVbml0SWRzLmhhcyh1bml0SWQpKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkVW5pdElkcy5kZWxldGUodW5pdElkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZWxlY3RlZFVuaXRJZHMuYWRkKHVuaXRJZCk7XG4gICAgfVxuICB9XG5cbiAgdG9nZ2xlQ2FyZFNlbGVjdGlvbihjYXJkSWQ6IHN0cmluZykge1xuICAgIGlmICh0aGlzLnNlbGVjdGVkQ2FyZElkcy5oYXMoY2FyZElkKSkge1xuICAgICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuZGVsZXRlKGNhcmRJZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VsZWN0ZWRDYXJkSWRzLmFkZChjYXJkSWQpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFx1NTE2OFx1OTAwOVx1OTAzQlx1OEY5MVxuICBzZWxlY3RBbGxVbml0cyh1bml0czogQ29udGVudFVuaXRbXSkge1xuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB0aGlzLnNlbGVjdGVkVW5pdElkcy5hZGQodW5pdC5pZCkpO1xuICAgIHRoaXMuYmF0Y2hNb2RlID0gdHJ1ZTtcbiAgfVxuXG4gIHNlbGVjdEFsbENhcmRzKGNhcmRzOiBGbGFzaGNhcmRbXSkge1xuICAgIGNhcmRzLmZvckVhY2goY2FyZCA9PiB0aGlzLnNlbGVjdGVkQ2FyZElkcy5hZGQoY2FyZC5pZCkpO1xuICAgIHRoaXMuYmF0Y2hNb2RlID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIFx1NTNENlx1NkQ4OFx1NTE2OFx1OTAwOVxuICBkZXNlbGVjdEFsbFVuaXRzKHVuaXRzOiBDb250ZW50VW5pdFtdKSB7XG4gICAgdW5pdHMuZm9yRWFjaCh1bml0ID0+IHRoaXMuc2VsZWN0ZWRVbml0SWRzLmRlbGV0ZSh1bml0LmlkKSk7XG4gIH1cblxuICBkZXNlbGVjdEFsbENhcmRzKGNhcmRzOiBGbGFzaGNhcmRbXSkge1xuICAgIGNhcmRzLmZvckVhY2goY2FyZCA9PiB0aGlzLnNlbGVjdGVkQ2FyZElkcy5kZWxldGUoY2FyZC5pZCkpO1xuICB9XG5cbiAgLy8gXHU1MjI0XHU2NUFEXHU2NjJGXHU1NDI2XHU1MTY4XHU5MDA5XG4gIGlzQWxsU2VsZWN0ZWQoaXRlbXM6IENvbnRlbnRVbml0W10gfCBGbGFzaGNhcmRbXSk6IGJvb2xlYW4ge1xuICAgIGlmIChpdGVtcy5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICBpZiAodGhpcy52aWV3VHlwZSA9PT0gJ2NhcmRzJykge1xuICAgICAgcmV0dXJuIChpdGVtcyBhcyBGbGFzaGNhcmRbXSkuZXZlcnkoY2FyZCA9PiBcbiAgICAgICAgdGhpcy5zZWxlY3RlZENhcmRJZHMuaGFzKGNhcmQuaWQpXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKGl0ZW1zIGFzIENvbnRlbnRVbml0W10pLmV2ZXJ5KHVuaXQgPT4gXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRVbml0SWRzLmhhcyh1bml0LmlkKVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvLyBcdTgzQjdcdTUzRDZcdTkwMDlcdTRFMkRcdTY1NzBcdTkxQ0ZcbiAgZ2V0U2VsZWN0ZWRDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnZpZXdUeXBlID09PSAnY2FyZHMnIFxuICAgICAgPyB0aGlzLnNlbGVjdGVkQ2FyZElkcy5zaXplIFxuICAgICAgOiB0aGlzLnNlbGVjdGVkVW5pdElkcy5zaXplO1xuICB9XG59IiwgIi8vIHNyYy91aS9jb21wb25lbnRzL1Rvb2xiYXIudHMgIFx1NURFNVx1NTE3N1x1NjgwRlx1N0VDNFx1NEVGNlxuaW1wb3J0IHsgVmlld1N0YXRlLCBGaWx0ZXJNb2RlLCBHcm91cE1vZGUgfSBmcm9tICcuLi9zdGF0ZS9WaWV3U3RhdGUnO1xuXG5leHBvcnQgY2xhc3MgVG9vbGJhciB7XG4gIHByaXZhdGUgc3RhdGU6IFZpZXdTdGF0ZTtcbiAgcHJpdmF0ZSBvblNlYXJjaENoYW5nZTogKHF1ZXJ5OiBzdHJpbmcpID0+IHZvaWQ7XG4gIHByaXZhdGUgb25GaWx0ZXJDaGFuZ2U6IChtb2RlOiBGaWx0ZXJNb2RlKSA9PiB2b2lkO1xuICBwcml2YXRlIG9uR3JvdXBDaGFuZ2U6IChtb2RlOiBHcm91cE1vZGUpID0+IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgc3RhdGU6IFZpZXdTdGF0ZSxcbiAgICBjYWxsYmFja3M6IHtcbiAgICAgIG9uU2VhcmNoQ2hhbmdlOiAocXVlcnk6IHN0cmluZykgPT4gdm9pZDtcbiAgICAgIG9uRmlsdGVyQ2hhbmdlOiAobW9kZTogRmlsdGVyTW9kZSkgPT4gdm9pZDtcbiAgICAgIG9uR3JvdXBDaGFuZ2U6IChtb2RlOiBHcm91cE1vZGUpID0+IHZvaWQ7XG4gICAgfVxuICApIHtcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5vblNlYXJjaENoYW5nZSA9IGNhbGxiYWNrcy5vblNlYXJjaENoYW5nZTtcbiAgICB0aGlzLm9uRmlsdGVyQ2hhbmdlID0gY2FsbGJhY2tzLm9uRmlsdGVyQ2hhbmdlO1xuICAgIHRoaXMub25Hcm91cENoYW5nZSA9IGNhbGxiYWNrcy5vbkdyb3VwQ2hhbmdlO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NkUzMlx1NjdEM1x1NEZBN1x1OEZCOVx1NjgwRlx1NURFNVx1NTE3N1x1NjgwRlxuICAgKi9cbiAgcmVuZGVyU2lkZWJhclRvb2xiYXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCB0b29sYmFyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3NpZGViYXItdG9vbGJhcicgfSk7XG4gICAgXG4gICAgdGhpcy5yZW5kZXJTZWFyY2hCb3godG9vbGJhcik7XG4gICAgdGhpcy5yZW5kZXJGaWx0ZXJDaGlwcyh0b29sYmFyKTtcbiAgICB0aGlzLnJlbmRlckdyb3VwU3dpdGNoZXIodG9vbGJhcik7XG4gICAgdGhpcy5yZW5kZXJTdGF0c1Jvdyh0b29sYmFyKTtcbiAgICBcbiAgICByZXR1cm4gdG9vbGJhcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTZFMzJcdTY3RDNcdTRFM0JcdTc1NENcdTk3NjJcdTVERTVcdTUxNzdcdTY4MEZcbiAgICovXG4gIHJlbmRlck1haW5Ub29sYmFyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgdG9vbGJhciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdtYWluLXRvb2xiYXInIH0pO1xuICAgIFxuICAgIHRoaXMucmVuZGVyU2VhcmNoQm94KHRvb2xiYXIsIHRydWUpO1xuICAgIHRoaXMucmVuZGVyR3JvdXBTd2l0Y2hlcih0b29sYmFyLCB0cnVlKTtcbiAgICBcbiAgICByZXR1cm4gdG9vbGJhcjtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyU2VhcmNoQm94KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGlzTWFpbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgY29uc3Qgc2VhcmNoQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3NlYXJjaC1jb250YWluZXInIH0pO1xuICAgIGNvbnN0IHNlYXJjaElucHV0ID0gc2VhcmNoQ29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgIHBsYWNlaG9sZGVyOiBpc01haW4gPyAnXHVEODNEXHVERDBEIFx1NjQxQ1x1N0QyMi4uLicgOiAnXHVEODNEXHVERDBEIFx1NjQxQ1x1N0QyMlx1N0IxNFx1OEJCMC4uLicsXG4gICAgICBjbHM6IGlzTWFpbiA/ICdzZWFyY2gtaW5wdXQtbWFpbicgOiAnc2VhcmNoLWlucHV0J1xuICAgIH0pO1xuICAgIFxuICAgIHNlYXJjaElucHV0LnZhbHVlID0gdGhpcy5zdGF0ZS5zZWFyY2hRdWVyeTtcbiAgICBcbiAgICBzZWFyY2hJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgIHRoaXMub25TZWFyY2hDaGFuZ2UodmFsdWUpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJGaWx0ZXJDaGlwcyhjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgY29uc3QgZmlsdGVycyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdmaWx0ZXItY2hpcHMnIH0pO1xuICAgIFxuICAgIGNvbnN0IGZpbHRlck9wdGlvbnM6IEFycmF5PHsgbW9kZTogRmlsdGVyTW9kZTsgaWNvbjogc3RyaW5nOyBsYWJlbDogc3RyaW5nIH0+ID0gW1xuICAgICAgeyBtb2RlOiAnYWxsJywgaWNvbjogJ1x1RDgzRFx1RENERCcsIGxhYmVsOiAnYWxsbm90ZXMnIH0sXG4gICAgICB7IG1vZGU6ICdhbm5vdGF0ZWQnLCBpY29uOiAnXHVEODNEXHVEQ0FDJywgbGFiZWw6ICdjb21tZW50JyB9LFxuICAgICAgeyBtb2RlOiAnZmxhc2hjYXJkcycsIGljb246ICdcdUQ4M0NcdURDQ0YnLCBsYWJlbDogJ2ZsYXNoY2FyZHMnIH1cbiAgICBdO1xuXG4gICAgZmlsdGVyT3B0aW9ucy5mb3JFYWNoKCh7IG1vZGUsIGljb24sIGxhYmVsIH0pID0+IHtcbiAgICAgIGNvbnN0IGNoaXAgPSBmaWx0ZXJzLmNyZWF0ZURpdih7XG4gICAgICAgIGNsczogYGZpbHRlci1jaGlwICR7dGhpcy5zdGF0ZS5maWx0ZXJNb2RlID09PSBtb2RlID8gJ2FjdGl2ZScgOiAnJ31gLFxuICAgICAgICB0ZXh0OiBgJHtpY29ufSAke2xhYmVsfWBcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjaGlwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLm9uRmlsdGVyQ2hhbmdlKG1vZGUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckdyb3VwU3dpdGNoZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgaXNNYWluID0gZmFsc2UpOiB2b2lkIHtcbiAgICBjb25zdCBncm91cFN3aXRjaGVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IFxuICAgICAgY2xzOiBpc01haW4gPyAnZ3JvdXAtc3dpdGNoZXItbWFpbicgOiAnZ3JvdXAtc3dpdGNoZXInIFxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IGdyb3VwT3B0aW9uczogQXJyYXk8eyBtb2RlOiBHcm91cE1vZGU7IGljb246IHN0cmluZzsgbGFiZWw/OiBzdHJpbmc7IHRvb2x0aXA6IHN0cmluZyB9PiA9IFxuICAgICAgaXNNYWluID8gW1xuICAgICAgICB7IG1vZGU6ICdmaWxlJywgaWNvbjogJ1x1RDgzRFx1RENDMScsIGxhYmVsOiAnXHU2NTg3XHU0RUY2JywgdG9vbHRpcDogJ1x1NjMwOVx1NjU4N1x1NEVGNicgfSxcbiAgICAgICAgeyBtb2RlOiAnYW5ub3RhdGlvbicsIGljb246ICdcdUQ4M0RcdURDQUMnLCBsYWJlbDogJ1x1NjI3OVx1NkNFOCcsIHRvb2x0aXA6ICdcdTYzMDlcdTYyNzlcdTZDRTgnIH0sXG4gICAgICAgIHsgbW9kZTogJ3RhZycsIGljb246ICdcdUQ4M0NcdURGRjdcdUZFMEYnLCBsYWJlbDogJ1x1NjgwN1x1N0I3RScsIHRvb2x0aXA6ICdcdTYzMDlcdTY4MDdcdTdCN0UnIH0sXG4gICAgICAgIHsgbW9kZTogJ2RhdGUnLCBpY29uOiAnXHVEODNEXHVEQ0M1JywgbGFiZWw6ICdcdTY1RTVcdTY3MUYnLCB0b29sdGlwOiAnXHU2MzA5XHU2NUU1XHU2NzFGJyB9XG4gICAgICBdIDogW1xuICAgICAgICB7IG1vZGU6ICdmaWxlJywgaWNvbjogJ1x1RDgzRFx1RENDMScsIHRvb2x0aXA6ICdcdTYzMDlcdTY1ODdcdTRFRjYnIH0sXG4gICAgICAgIHsgbW9kZTogJ3RhZycsIGljb246ICdcdUQ4M0NcdURGRjdcdUZFMEYnLCB0b29sdGlwOiAnXHU2MzA5XHU2ODA3XHU3QjdFJyB9LFxuICAgICAgICB7IG1vZGU6ICdkYXRlJywgaWNvbjogJ1x1RDgzRFx1RENDNScsIHRvb2x0aXA6ICdcdTYzMDlcdTY1RTVcdTY3MUYnIH1cbiAgICAgIF07XG5cbiAgICBncm91cE9wdGlvbnMuZm9yRWFjaCgoeyBtb2RlLCBpY29uLCBsYWJlbCwgdG9vbHRpcCB9KSA9PiB7XG4gICAgICBjb25zdCBidG4gPSBncm91cFN3aXRjaGVyLmNyZWF0ZURpdih7XG4gICAgICAgIGNsczogYCR7aXNNYWluID8gJ2dyb3VwLWJ0bi1tYWluJyA6ICdncm91cC1idG4nfSAke1xuICAgICAgICAgIHRoaXMuc3RhdGUuZ3JvdXBNb2RlID09PSBtb2RlID8gJ2FjdGl2ZScgOiAnJ1xuICAgICAgICB9YFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGJ0bi5pbm5lckhUTUwgPSBpc01haW4gPyBgJHtpY29ufSBgIDogaWNvbjtcbiAgICAgIGJ0bi5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgdG9vbHRpcCk7XG4gICAgICBcbiAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy5vbkdyb3VwQ2hhbmdlKG1vZGUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclN0YXRzUm93KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCBzdGF0c1JvdyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzdGF0cy1yb3cnIH0pO1xuICAgIFxuICAgIC8vIFx1OEZEOVx1OTFDQ1x1NEYxQVx1NzUzMSBCYXRjaEFjdGlvbnMgXHU3RUM0XHU0RUY2XHU1ODZCXHU1MTQ1XG4gICAgLy8gXHU5ODg0XHU3NTU5XHU1QkI5XHU1NjY4XHU0RjlCXHU1OTE2XHU5MEU4XHU0RjdGXHU3NTI4XG4gICAgc3RhdHNSb3cuc2V0QXR0cmlidXRlKCdkYXRhLXN0YXRzLWNvbnRhaW5lcicsICd0cnVlJyk7XG4gIH1cbn0iLCAiLy8gc3JjL3VpL2NvbXBvbmVudHMvQmF0Y2hBY3Rpb25zLnRzICBcdTYyNzlcdTkxQ0ZcdTY0Q0RcdTRGNUNcblxuaW1wb3J0IHsgVmlld1N0YXRlIH0gZnJvbSAnLi4vc3RhdGUvVmlld1N0YXRlJztcbmltcG9ydCB7IENvbnRlbnRVbml0IH0gZnJvbSAnLi4vLi4vY29yZS9EYXRhTWFuYWdlcic7XG5pbXBvcnQgeyBGbGFzaGNhcmQgfSBmcm9tICcuLi8uLi9jb3JlL0ZsYXNoY2FyZE1hbmFnZXInO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJhdGNoQWN0aW9uQ2FsbGJhY2tzIHtcbiAgb25TZWxlY3RBbGw6ICgpID0+IHZvaWQ7XG4gIG9uRGVzZWxlY3RBbGw6ICgpID0+IHZvaWQ7XG4gIG9uQmF0Y2hDcmVhdGU6ICgpID0+IHZvaWQ7XG4gIG9uQmF0Y2hEZWxldGU6ICgpID0+IHZvaWQ7XG4gIG9uQ2FuY2VsOiAoKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgQmF0Y2hBY3Rpb25zIHtcbiAgcHJpdmF0ZSBzdGF0ZTogVmlld1N0YXRlO1xuICBwcml2YXRlIGNhbGxiYWNrczogQmF0Y2hBY3Rpb25DYWxsYmFja3M7XG5cbiAgY29uc3RydWN0b3Ioc3RhdGU6IFZpZXdTdGF0ZSwgY2FsbGJhY2tzOiBCYXRjaEFjdGlvbkNhbGxiYWNrcykge1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB0aGlzLmNhbGxiYWNrcyA9IGNhbGxiYWNrcztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTZFMzJcdTY3RDNcdTUxNjhcdTkwMDlcdTYzMDlcdTk0QUVcbiAgICovXG4gIHJlbmRlclNlbGVjdEFsbEJ1dHRvbihcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LCBcbiAgICB2aXNpYmxlSXRlbXM6IENvbnRlbnRVbml0W10gfCBGbGFzaGNhcmRbXSxcbiAgICBzdHlsZUNsYXNzOiAnc2lkZWJhcicgfCAnaGVhZGVyJ1xuICApOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgYnRuQ2xhc3MgPSBzdHlsZUNsYXNzID09PSAnc2lkZWJhcicgXG4gICAgICA/ICdzZWxlY3QtYWxsLWJ0bi1zaWRlYmFyJyBcbiAgICAgIDogJ3NlbGVjdC1hbGwtYnRuLWhlYWRlcic7XG4gICAgXG4gICAgY29uc3QgaXNBbGxDaGVja2VkID0gdGhpcy5zdGF0ZS5pc0FsbFNlbGVjdGVkKHZpc2libGVJdGVtcyk7XG4gICAgY29uc3QgaXRlbUNvdW50ID0gdmlzaWJsZUl0ZW1zLmxlbmd0aDtcbiAgICBcbiAgICBjb25zdCBzZWxlY3RBbGxCdG4gPSBjb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6IGlzQWxsQ2hlY2tlZCA/ICdcdTI3MTMgXHU1M0Q2XHU2RDg4XHU1MTY4XHU5MDA5JyA6ICdcdTI2MTAgXHU1MTY4XHU5MDA5JyxcbiAgICAgIGNsczogYCR7YnRuQ2xhc3N9ICR7aXNBbGxDaGVja2VkID8gJ2NvbXBsZXRlZCcgOiAnJ31gLFxuICAgICAgdGl0bGU6IGlzQWxsQ2hlY2tlZCBcbiAgICAgICAgPyAnXHU1M0Q2XHU2RDg4XHU1RjUzXHU1MjREXHU5ODc1XHU5NzYyXHU3Njg0XHU1MTY4XHU5MDA5JyBcbiAgICAgICAgOiBgXHU1MTY4XHU5MDA5XHU1RjUzXHU1MjREICR7aXRlbUNvdW50fSBcdTk4NzlgXG4gICAgfSk7XG4gICAgXG4gICAgY29uc3Qgc2hvdWxkRGlzYWJsZSA9IChcbiAgICAgIGl0ZW1Db3VudCA9PT0gMCB8fFxuICAgICAgKHRoaXMuc3RhdGUuZ3JvdXBNb2RlID09PSAnYW5ub3RhdGlvbicgJiYgXG4gICAgICAgdGhpcy5zdGF0ZS5kaXNwbGF5TW9kZSA9PT0gJ21haW4nICYmIFxuICAgICAgICF0aGlzLnN0YXRlLnNlbGVjdGVkRmlsZSlcbiAgICApO1xuICAgIFxuICAgIGlmIChzaG91bGREaXNhYmxlKSB7XG4gICAgICBzZWxlY3RBbGxCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgc2VsZWN0QWxsQnRuLnN0eWxlLm9wYWNpdHkgPSAnMC41JztcbiAgICAgIHNlbGVjdEFsbEJ0bi5zdHlsZS5jdXJzb3IgPSAnbm90LWFsbG93ZWQnO1xuICAgICAgc2VsZWN0QWxsQnRuLnRpdGxlID0gaXRlbUNvdW50ID09PSAwIFxuICAgICAgICA/ICdcdTZDQTFcdTY3MDlcdTUzRUZcdTkwMDlcdTk4NzknIFxuICAgICAgICA6ICdcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcIlx1NjcwOVx1NjI3OVx1NkNFOFwiXHU2MjE2XCJcdTY1RTBcdTYyNzlcdTZDRThcIic7XG4gICAgfVxuICAgIFxuICAgIHNlbGVjdEFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGlmIChpc0FsbENoZWNrZWQpIHtcbiAgICAgICAgdGhpcy5jYWxsYmFja3Mub25EZXNlbGVjdEFsbCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jYWxsYmFja3Mub25TZWxlY3RBbGwoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gc2VsZWN0QWxsQnRuO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NkUzMlx1NjdEM1x1NjI3OVx1OTFDRlx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVx1N0VDNFxuICAgKi9cbiAgcmVuZGVyQWN0aW9uQnV0dG9ucyhcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIHN0eWxlQ2xhc3M6ICdzaWRlYmFyJyB8ICdoZWFkZXInXG4gICk6IHZvaWQge1xuICAgIGlmICghdGhpcy5zdGF0ZS5iYXRjaE1vZGUpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBidG5QcmVmaXggPSBzdHlsZUNsYXNzID09PSAnc2lkZWJhcicgPyAnc2lkZWJhcicgOiAnaGVhZGVyJztcbiAgICBcbiAgICAvLyBcdTUyMzZcdTUzNjFcdTYzMDlcdTk0QUVcdUZGMDhcdTRFQzVcdTdCMTRcdThCQjBcdTg5QzZcdTU2RkVcdUZGMDlcbiAgICBpZiAodGhpcy5zdGF0ZS52aWV3VHlwZSA9PT0gJ25vdGVzJykge1xuICAgICAgY29uc3QgY3JlYXRlQnRuID0gdGhpcy5jcmVhdGVCdXR0b24oXG4gICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgc3R5bGVDbGFzcyA9PT0gJ3NpZGViYXInIFxuICAgICAgICAgID8gYFx1MjZBMSgke3RoaXMuc3RhdGUuc2VsZWN0ZWRVbml0SWRzLnNpemV9KWAgXG4gICAgICAgICAgOiBgXHUyNkExIFx1NjI3OVx1OTFDRlx1NTIzNlx1NTM2MSAoJHt0aGlzLnN0YXRlLnNlbGVjdGVkVW5pdElkcy5zaXplfSlgLFxuICAgICAgICBgYmF0Y2gtY3JlYXRlLWNhcmRzLWJ0bi0ke2J0blByZWZpeH1gLFxuICAgICAgICAnXHU2Mjc5XHU5MUNGXHU1MjM2XHU1MzYxJyxcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnNlbGVjdGVkVW5pdElkcy5zaXplID09PSAwKSB7XG4gICAgICAgICAgICAvLyBcdThGRDlcdTkxQ0NcdTVFOTRcdThCRTVcdTg5RTZcdTUzRDEgTm90aWNlXHVGRjBDXHU0RjQ2XHU0RTNBXHU0RTg2XHU4OUUzXHU4MDI2XHVGRjBDXHU5MDFBXHU4RkM3XHU1NkRFXHU4QzAzXHU1OTA0XHU3NDA2XG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrcy5vbkJhdGNoQ3JlYXRlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tzLm9uQmF0Y2hDcmVhdGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNyZWF0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgICBjcmVhdGVCdG4uc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpJztcbiAgICAgICAgY3JlYXRlQnRuLnN0eWxlLmNvbG9yID0gJ3doaXRlJztcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjcmVhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgY3JlYXRlQnRuLnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJztcbiAgICAgICAgY3JlYXRlQnRuLnN0eWxlLmNvbG9yID0gJyc7XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gXHU1MjIwXHU5NjY0XHU2MzA5XHU5NEFFXG4gICAgY29uc3QgY291bnQgPSB0aGlzLnN0YXRlLmdldFNlbGVjdGVkQ291bnQoKTtcbiAgICBjb25zdCBkZWxldGVCdG4gPSB0aGlzLmNyZWF0ZUJ1dHRvbihcbiAgICAgIGNvbnRhaW5lcixcbiAgICAgIHN0eWxlQ2xhc3MgPT09ICdzaWRlYmFyJyBcbiAgICAgICAgPyBgXHVEODNEXHVEREQxXHVGRTBGKCR7Y291bnR9KWAgXG4gICAgICAgIDogYFx1RDgzRFx1REREMVx1RkUwRiBcdTUyMjBcdTk2NjQgKCR7Y291bnR9KWAsXG4gICAgICBgYmF0Y2gtZGVsZXRlLWJ0bi0ke2J0blByZWZpeH1gLFxuICAgICAgJ1x1NjI3OVx1OTFDRlx1NTIyMFx1OTY2NCcsXG4gICAgICAoKSA9PiB0aGlzLmNhbGxiYWNrcy5vbkJhdGNoRGVsZXRlKClcbiAgICApO1xuICAgIFxuICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgZGVsZXRlQnRuLnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tY29sb3ItcmVkKSc7XG4gICAgICBkZWxldGVCdG4uc3R5bGUuY29sb3IgPSAnd2hpdGUnO1xuICAgIH0pO1xuICAgIFxuICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgZGVsZXRlQnRuLnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJztcbiAgICAgIGRlbGV0ZUJ0bi5zdHlsZS5jb2xvciA9ICcnO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFx1NTNENlx1NkQ4OFx1NjMwOVx1OTRBRVxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IHRoaXMuY3JlYXRlQnV0dG9uKFxuICAgICAgY29udGFpbmVyLFxuICAgICAgc3R5bGVDbGFzcyA9PT0gJ3NpZGViYXInID8gJ1x1MjcxNScgOiAnXHUyNzE1IFx1OTAwMFx1NTFGQScsXG4gICAgICBgY2FuY2VsLXNlbGVjdGlvbi1idG4tJHtidG5QcmVmaXh9YCxcbiAgICAgICdcdTkwMDBcdTUxRkFcdTYyNzlcdTkxQ0ZcdTZBMjFcdTVGMEZcdTVFNzZcdTZFMDVcdTdBN0FcdTYyNDBcdTY3MDlcdTkwMDlcdTYyRTknLFxuICAgICAgKCkgPT4gdGhpcy5jYWxsYmFja3Mub25DYW5jZWwoKVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUJ1dHRvbihcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIHRleHQ6IHN0cmluZyxcbiAgICBjbGFzc05hbWU6IHN0cmluZyxcbiAgICB0aXRsZTogc3RyaW5nLFxuICAgIG9uQ2xpY2s6ICgpID0+IHZvaWRcbiAgKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IGJ0biA9IGNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dCxcbiAgICAgIGNsczogY2xhc3NOYW1lLFxuICAgICAgdGl0bGVcbiAgICB9KTtcbiAgICBcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrKTtcbiAgICByZXR1cm4gYnRuO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NkUzMlx1NjdEM1x1NjI3OVx1OTFDRlx1OTAwOVx1NjJFOSBDaGVja2JveFxuICAgKi9cbiAgcmVuZGVyQ2hlY2tib3goXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICBpdGVtSWQ6IHN0cmluZyxcbiAgICBpc1NlbGVjdGVkOiBib29sZWFuLFxuICAgIG9uQ2hhbmdlOiAoY2hlY2tlZDogYm9vbGVhbikgPT4gdm9pZFxuICApOiBIVE1MSW5wdXRFbGVtZW50IHtcbiAgICBjb25zdCBjaGVja2JveCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgY2xzOiAnYmF0Y2gtY2hlY2tib3gnXG4gICAgfSk7XG4gICAgXG4gICAgY2hlY2tib3guc2V0QXR0cmlidXRlKCdkYXRhLWl0ZW0taWQnLCBpdGVtSWQpO1xuICAgIGNoZWNrYm94LmNoZWNrZWQgPSBpc1NlbGVjdGVkO1xuICAgIFxuICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICBvbkNoYW5nZSgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCk7XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIGNoZWNrYm94O1xuICB9XG59IiwgIi8vIHNyYy91aS9jb21wb25lbnRzL0NvbnRlbnRDYXJkLnRzICBcdTUzNjFcdTcyNDdcdTUxODVcdTVCQjlcbi8vIGltcG9ydCB7IFN0eWxlTG9hZGVyIH0gZnJvbSAnLi4vc3R5bGUvc2lkZWJhclN0eWxlJ1xuaW1wb3J0IHsgQ29udGVudFVuaXQgfSBmcm9tICcuLi8uLi9jb3JlL0RhdGFNYW5hZ2VyJztcbmltcG9ydCB7IEZsYXNoY2FyZCB9IGZyb20gJy4uLy4uL2NvcmUvRmxhc2hjYXJkTWFuYWdlcic7XG5pbXBvcnQgeyBWaWV3U3RhdGUgfSBmcm9tICcuLi9zdGF0ZS9WaWV3U3RhdGUnO1xuaW1wb3J0IHsgTWFya2Rvd25SZW5kZXJlciB9IGZyb20gJ29ic2lkaWFuJzsgLy8gXG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZENhbGxiYWNrcyB7XG4gIG9uSnVtcFRvU291cmNlOiAodW5pdDogQ29udGVudFVuaXQpID0+IHZvaWQ7XG4gIG9uVG9nZ2xlQW5ub3RhdGlvbjogKGNhcmQ6IEhUTUxFbGVtZW50LCB1bml0OiBDb250ZW50VW5pdCkgPT4gdm9pZDtcbiAgb25RdWlja0ZsYXNoY2FyZDogKHVuaXQ6IENvbnRlbnRVbml0KSA9PiB2b2lkO1xuICBvblNob3dDb250ZXh0TWVudTogKGV2ZW50OiBNb3VzZUV2ZW50LCB1bml0OiBDb250ZW50VW5pdCkgPT4gdm9pZDtcbiAgb25GbGFzaGNhcmRDb250ZXh0TWVudT86IChldmVudDogTW91c2VFdmVudCwgY2FyZDogRmxhc2hjYXJkKSA9PiB2b2lkO1xuICBnZXRBbm5vdGF0aW9uQ29udGVudD86ICh1bml0SWQ6IHN0cmluZykgPT4gc3RyaW5nIHwgdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgY2xhc3MgQ29udGVudENhcmQge1xuICBwcml2YXRlIHN0YXRlOiBWaWV3U3RhdGU7XG4gIHByaXZhdGUgY2FsbGJhY2tzOiBDYXJkQ2FsbGJhY2tzO1xuXG4gIGNvbnN0cnVjdG9yKHN0YXRlOiBWaWV3U3RhdGUsIGNhbGxiYWNrczogQ2FyZENhbGxiYWNrcykge1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB0aGlzLmNhbGxiYWNrcyA9IGNhbGxiYWNrcztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTZFMzJcdTY3RDNcdTdEMjdcdTUxRDFcdTUzNjFcdTcyNDdcdUZGMDhcdTRGQTdcdThGQjlcdTY4MEZcdTZBMjFcdTVGMEZcdUZGMDlcbiAgICovXG4gIHJlbmRlckNvbXBhY3QoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgdW5pdDogQ29udGVudFVuaXQpOiB2b2lkIHtcbiAgICBjb25zdCBjYXJkID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NvbXBhY3QtY2FyZCcgfSk7XG5cbiAgICAvLyBcdTYyNzlcdTkxQ0ZcdTkwMDlcdTYyRTkgY2hlY2tib3hcbiAgICBpZiAodGhpcy5zdGF0ZS5iYXRjaE1vZGUpIHtcbiAgICAgIHRoaXMucmVuZGVyQ2hlY2tib3goY2FyZCwgdW5pdC5pZCwgdGhpcy5zdGF0ZS5zZWxlY3RlZFVuaXRJZHMuaGFzKHVuaXQuaWQpKTtcbiAgICB9XG5cbiAgICAvLyBcdTVERTZcdTRGQTdcdTYzMDdcdTc5M0FcdTU2NjhcbiAgICB0aGlzLnJlbmRlckluZGljYXRvcihjYXJkLCB1bml0KTtcblxuICAgIC8vIFx1NTE4NVx1NUJCOVx1NTMzQVx1NTdERlxuICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ2NhcmQtY29udGVudCcgfSk7XG4gICAgdGhpcy5yZW5kZXJDYXJkSGVhZGVyKGNvbnRlbnQsIGNhcmQsIHVuaXQpO1xuICAgIHRoaXMucmVuZGVyQ2FyZENvbnRlbnQoY29udGVudCwgdW5pdCk7XG4gICAgdGhpcy5yZW5kZXJBbm5vdGF0aW9uUHJldmlldyhjb250ZW50LCBjYXJkLCB1bml0KTtcbiAgICB0aGlzLnJlbmRlckNhcmRNZXRhKGNvbnRlbnQsIHVuaXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NkUzMlx1NjdEM1x1N0Y1MVx1NjgzQ1x1NTM2MVx1NzI0N1x1RkYwOFx1NEUzQlx1NzU0Q1x1OTc2Mlx1NkEyMVx1NUYwRlx1RkYwOVxuICAgKi9cbiAgcmVuZGVyR3JpZChjb250YWluZXI6IEhUTUxFbGVtZW50LCB1bml0OiBDb250ZW50VW5pdCk6IHZvaWQge1xuICAgIGNvbnN0IGNhcmQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkJyB9KTtcblxuICAgIGlmICh0aGlzLnN0YXRlLmJhdGNoTW9kZSkge1xuICAgICAgdGhpcy5yZW5kZXJDaGVja2JveChjYXJkLCB1bml0LmlkLCB0aGlzLnN0YXRlLnNlbGVjdGVkVW5pdElkcy5oYXModW5pdC5pZCkpO1xuICAgIH1cblxuICAgIGNvbnN0IGhlYWRlciA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkLWhlYWRlcicgfSk7XG4gICAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jYWxsYmFja3Mub25KdW1wVG9Tb3VyY2UodW5pdCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnJlbmRlclR5cGVJbmRpY2F0b3IoaGVhZGVyLCB1bml0KTtcbiAgICB0aGlzLnJlbmRlckZpbGVOYW1lKGhlYWRlciwgdW5pdCk7XG4gICAgdGhpcy5yZW5kZXJHcmlkVG9vbHMoaGVhZGVyLCB1bml0KTtcblxuICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ2dyaWQtY2FyZC1jb250ZW50JyB9KTtcbiAgICB0aGlzLnJlbmRlckdyaWRDb250ZW50KGNvbnRlbnQsIGNhcmQsIHVuaXQpO1xuICAgIHRoaXMucmVuZGVyR3JpZEFubm90YXRpb24oY29udGVudCwgY2FyZCwgdW5pdCk7XG4gICAgdGhpcy5yZW5kZXJHcmlkVGFncyhjb250ZW50LCB1bml0KTtcblxuICAgIGNvbnN0IG1ldGEgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ2dyaWQtY2FyZC1tZXRhJyB9KTtcbiAgICB0aGlzLnJlbmRlckdyaWRNZXRhKG1ldGEsIHVuaXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NkUzMlx1NjdEM1x1OTVFQVx1NTM2MVx1N0Y1MVx1NjgzQ1xuICAgKi9cbiAgcmVuZGVyRmxhc2hjYXJkR3JpZChjb250YWluZXI6IEhUTUxFbGVtZW50LCBjYXJkOiBGbGFzaGNhcmQpOiB2b2lkIHtcbiAgICBjb25zdCBjYXJkRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkIGZsYXNoY2FyZC1ncmlkLWNhcmQnIH0pO1xuXG4gICAgaWYgKHRoaXMuc3RhdGUuYmF0Y2hNb2RlKSB7XG4gICAgICB0aGlzLnJlbmRlckNoZWNrYm94KGNhcmRFbCwgY2FyZC5pZCwgdGhpcy5zdGF0ZS5zZWxlY3RlZENhcmRJZHMuaGFzKGNhcmQuaWQpKTtcbiAgICB9XG5cbiAgICBjb25zdCBoZWFkZXIgPSBjYXJkRWwuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkLWhlYWRlcicgfSk7XG4gICAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgLy8gXHU5MDFBXHU4RkM3XHU1NkRFXHU4QzAzXHU1OTA0XHU3NDA2XHU4REYzXHU4RjZDXHU5MDNCXHU4RjkxXG4gICAgICBpZiAodGhpcy5jYWxsYmFja3Mub25GbGFzaGNhcmRDb250ZXh0TWVudSkge1xuICAgICAgICAvLyBcdThGRDlcdTkxQ0NcdTk3MDBcdTg5ODFcdTcyNzlcdTZCOEFcdTU5MDRcdTc0MDZcdUZGMENcdTU2RTBcdTRFM0FcdTk1RUFcdTUzNjFcdThERjNcdThGNkNcdTk3MDBcdTg5ODFcdTUxNDhcdTYyN0VcdTUyMzBcdTVCRjlcdTVFOTRcdTc2ODQgQ29udGVudFVuaXRcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IHR5cGVMYWJlbCA9IGhlYWRlci5jcmVhdGVEaXYoe1xuICAgICAgY2xzOiBgZmxhc2hjYXJkLXR5cGUgJHtjYXJkLnR5cGV9YCxcbiAgICAgIHRleHQ6IGNhcmQudHlwZSA9PT0gJ3FhJyA/ICdRJkEnIDogJ1x1NTg2Qlx1N0E3QSdcbiAgICB9KTtcblxuICAgIGNvbnN0IHRvb2xzID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ2dyaWQtY2FyZC10b29scycgfSk7XG4gICAgY29uc3QgbW9yZUJ0biA9IHRvb2xzLmNyZWF0ZURpdih7IGNsczogJ3Rvb2wtYnRuLWdyaWQnIH0pO1xuICAgIG1vcmVCdG4uaW5uZXJIVE1MID0gJ1x1MjJFRSc7XG4gICAgbW9yZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgaWYgKHRoaXMuY2FsbGJhY2tzLm9uRmxhc2hjYXJkQ29udGV4dE1lbnUpIHtcbiAgICAgICAgdGhpcy5jYWxsYmFja3Mub25GbGFzaGNhcmRDb250ZXh0TWVudShlLCBjYXJkKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkRWwuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkLWNvbnRlbnQnIH0pO1xuICAgIHRoaXMucmVuZGVyRmxhc2hjYXJkQ29udGVudChjb250ZW50LCBjYXJkKTtcblxuICAgIGNvbnN0IG1ldGEgPSBjYXJkRWwuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1jYXJkLW1ldGEnIH0pO1xuICAgIHRoaXMucmVuZGVyRmxhc2hjYXJkTWV0YShtZXRhLCBjYXJkKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT0gXHU3OUMxXHU2NzA5XHU2RTMyXHU2N0QzXHU2NUI5XHU2Q0Q1ID09PT09PT09PT1cblxuICBwcml2YXRlIHJlbmRlckNoZWNrYm94KGNhcmQ6IEhUTUxFbGVtZW50LCBpdGVtSWQ6IHN0cmluZywgaXNDaGVja2VkOiBib29sZWFuKTogdm9pZCB7XG4gICAgY29uc3QgY2hlY2tib3ggPSBjYXJkLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICBjbHM6ICdiYXRjaC1jaGVja2JveCdcbiAgICB9KTtcbiAgICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaXRlbS1pZCcsIGl0ZW1JZCk7XG4gICAgY2hlY2tib3guY2hlY2tlZCA9IGlzQ2hlY2tlZDtcbiAgICBcbiAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgaWYgKChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnZpZXdUeXBlID09PSAnY2FyZHMnKSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZENhcmRJZHMuYWRkKGl0ZW1JZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZFVuaXRJZHMuYWRkKGl0ZW1JZCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnZpZXdUeXBlID09PSAnY2FyZHMnKSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZENhcmRJZHMuZGVsZXRlKGl0ZW1JZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5zZWxlY3RlZFVuaXRJZHMuZGVsZXRlKGl0ZW1JZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFx1ODlFNlx1NTNEMVx1OTFDRFx1NjVCMFx1NkUzMlx1NjdEM1x1RkYwOFx1OTAxQVx1OEZDN1x1NTZERVx1OEMwM1x1RkYwOVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJJbmRpY2F0b3IoY2FyZDogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0KTogdm9pZCB7XG4gICAgY29uc3QgaW5kaWNhdG9yID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLWluZGljYXRvcicgfSk7XG5cbiAgICBpZiAodW5pdC50eXBlID09PSAnUUEnKSB7XG4gICAgICBpbmRpY2F0b3IuYWRkQ2xhc3MoJ3R5cGUtcWEnKTtcbiAgICB9IGVsc2UgaWYgKHVuaXQudHlwZSA9PT0gJ2Nsb3plJykge1xuICAgICAgaW5kaWNhdG9yLmFkZENsYXNzKCd0eXBlLWNsb3plJyk7XG4gICAgfSBlbHNlIGlmICh1bml0LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgaW5kaWNhdG9yLmFkZENsYXNzKCd0eXBlLXRleHQnKTtcbiAgICB9XG5cbiAgICBpZiAodW5pdC5hbm5vdGF0aW9uSWQpIGluZGljYXRvci5hZGRDbGFzcygnaGFzLWFubm90YXRpb24nKTtcbiAgICBpZiAodW5pdC5mbGFzaGNhcmRJZHMubGVuZ3RoID4gMCkgaW5kaWNhdG9yLmFkZENsYXNzKCdoYXMtZmxhc2hjYXJkJyk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckNhcmRIZWFkZXIoY29udGVudDogSFRNTEVsZW1lbnQsIGNhcmQ6IEhUTUxFbGVtZW50LCB1bml0OiBDb250ZW50VW5pdCk6IHZvaWQge1xuICAgIGNvbnN0IGhlYWRlciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1oZWFkZXInIH0pO1xuICAgIFxuICAgIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2FsbGJhY2tzLm9uVG9nZ2xlQW5ub3RhdGlvbihjYXJkLCB1bml0KTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGFubm90YXRpb25CdG4gPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAnYW5ub3RhdGlvbi1idG4nIH0pO1xuICAgIGFubm90YXRpb25CdG4uaW5uZXJIVE1MID0gJ1x1RDgzRFx1RENBQyc7XG5cbiAgICBjb25zdCB0b29scyA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLXRvb2xzJyB9KTtcbiAgICB0b29scy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuXG4gICAgaWYgKCF0aGlzLnN0YXRlLmJhdGNoTW9kZSkge1xuICAgICAgY29uc3QgZmxhc2hjYXJkQnRuID0gdG9vbHMuY3JlYXRlRGl2KHsgY2xzOiAndG9vbC1idG4gZmxhc2hjYXJkLWJ0bicgfSk7XG4gICAgICBmbGFzaGNhcmRCdG4uaW5uZXJIVE1MID0gJ1x1MjZBMSc7XG4gICAgICBmbGFzaGNhcmRCdG4uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ1x1NzUxRlx1NjIxMFx1OTVFQVx1NTM2MScpO1xuICAgICAgZmxhc2hjYXJkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdGhpcy5jYWxsYmFja3Mub25RdWlja0ZsYXNoY2FyZCh1bml0KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IG1vcmVCdG4gPSB0b29scy5jcmVhdGVEaXYoeyBjbHM6ICd0b29sLWJ0biBtb3JlLWJ0bicgfSk7XG4gICAgbW9yZUJ0bi5pbm5lckhUTUwgPSAnXHUyMkVFJztcbiAgICBtb3JlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLmNhbGxiYWNrcy5vblNob3dDb250ZXh0TWVudShlLCB1bml0KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyQ2FyZENvbnRlbnQoY29udGVudDogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0KTogdm9pZCB7XG4gICAgY29uc3Qgbm90ZVRleHQgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ25vdGUtdGV4dCcgfSk7XG4gIFxuICAgIC8vIFx1RDgzQ1x1REQ5NSBcdTZERkJcdTUyQTBcdTg4NjhcdTY4M0NcdTY4QzBcdTZENEJcdTU0OENcdTZFMzJcdTY3RDNcbiAgICBpZiAodGhpcy5pc1RhYmxlQ29udGVudCh1bml0LmZ1bGxDb250ZXh0IHx8IHVuaXQuY29udGVudCkpIHtcbiAgICAgIHRoaXMucmVuZGVyTWFya2Rvd25Db250ZW50KG5vdGVUZXh0LCB1bml0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGRpc3BsYXlIVE1MID0gdGhpcy5mb3JtYXRDb250ZW50KHVuaXQpO1xuICAgICAgbm90ZVRleHQuaW5uZXJIVE1MID0gZGlzcGxheUhUTUw7XG4gICAgfVxuICBcbiAgICBub3RlVGV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2FsbGJhY2tzLm9uSnVtcFRvU291cmNlKHVuaXQpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRDb250ZW50KHVuaXQ6IENvbnRlbnRVbml0KTogc3RyaW5nIHtcbiAgICBpZiAodW5pdC50eXBlID09PSAnUUEnICYmIHVuaXQuYW5zd2VyKSB7XG4gICAgICByZXR1cm4gYDxzcGFuIGNsYXNzPVwicWEtcXVlc3Rpb25cIj4ke3VuaXQuY29udGVudH08L3NwYW4+IDxzcGFuIGNsYXNzPVwicWEtc2VwYXJhdG9yXCI+Ojo8L3NwYW4+IDxzcGFuIGNsYXNzPVwicWEtYW5zd2VyXCI+JHt1bml0LmFuc3dlcn08L3NwYW4+YDtcbiAgICB9IGVsc2UgaWYgKHVuaXQudHlwZSA9PT0gJ2Nsb3plJyAmJiB1bml0LmZ1bGxDb250ZXh0KSB7XG4gICAgICBsZXQgY29udGV4dCA9IHVuaXQuZnVsbENvbnRleHQucmVwbGFjZSgvPT0vZywgJycpO1xuICAgICAgY29uc3QgYW5zd2VyID0gdW5pdC5jb250ZW50O1xuICAgICAgcmV0dXJuIGNvbnRleHQucmVwbGFjZShcbiAgICAgICAgYW5zd2VyLCBcbiAgICAgICAgYDxzcGFuIGNsYXNzPVwiY2xvemUtaGlnaGxpZ2h0XCI+JHthbnN3ZXJ9PC9zcGFuPmBcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB1bml0LmNvbnRlbnQ7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJBbm5vdGF0aW9uUHJldmlldyhcbiAgICBjb250ZW50OiBIVE1MRWxlbWVudCwgXG4gICAgY2FyZDogSFRNTEVsZW1lbnQsIFxuICAgIHVuaXQ6IENvbnRlbnRVbml0XG4gICk6IHZvaWQge1xuICAgIGlmICghdGhpcy5jYWxsYmFja3MuZ2V0QW5ub3RhdGlvbkNvbnRlbnQpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBhbm5vdGF0aW9uQ29udGVudCA9IHRoaXMuY2FsbGJhY2tzLmdldEFubm90YXRpb25Db250ZW50KHVuaXQuaWQpO1xuICAgIGlmIChhbm5vdGF0aW9uQ29udGVudCkge1xuICAgICAgY29uc3QgYW5uRWwgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ2Fubm90YXRpb24tcHJldmlldycgfSk7XG4gICAgICBjb25zdCBhbm5UZXh0ID0gYW5ub3RhdGlvbkNvbnRlbnQubGVuZ3RoID4gNjBcbiAgICAgICAgPyBhbm5vdGF0aW9uQ29udGVudC5zdWJzdHJpbmcoMCwgNjApICsgJy4uLidcbiAgICAgICAgOiBhbm5vdGF0aW9uQ29udGVudDtcbiAgICAgIGFubkVsLnRleHRDb250ZW50ID0gYFx1RDgzRFx1RENBQyAke2FublRleHR9YDtcbiAgICAgIFxuICAgICAgYW5uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLmNhbGxiYWNrcy5vblRvZ2dsZUFubm90YXRpb24oY2FyZCwgdW5pdCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckNhcmRNZXRhKGNvbnRlbnQ6IEhUTUxFbGVtZW50LCB1bml0OiBDb250ZW50VW5pdCk6IHZvaWQge1xuICAgIGNvbnN0IG1ldGEgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ2NhcmQtbWV0YScgfSk7XG4gICAgXG4gICAgaWYgKHVuaXQubWV0YWRhdGEudGFncy5sZW5ndGggPiAwKSB7XG4gICAgICB1bml0Lm1ldGFkYXRhLnRhZ3Muc2xpY2UoMCwgMikuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICBtZXRhLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgIyR7dGFnfWAsIGNsczogJ3RhZycgfSk7XG4gICAgICB9KTtcbiAgICAgIGlmICh1bml0Lm1ldGFkYXRhLnRhZ3MubGVuZ3RoID4gMikge1xuICAgICAgICBtZXRhLmNyZWF0ZVNwYW4oeyBcbiAgICAgICAgICB0ZXh0OiBgKyR7dW5pdC5tZXRhZGF0YS50YWdzLmxlbmd0aCAtIDJ9YCwgXG4gICAgICAgICAgY2xzOiAndGFnLW1vcmUnIFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodW5pdC5mbGFzaGNhcmRJZHMubGVuZ3RoID4gMCkge1xuICAgICAgbWV0YS5jcmVhdGVTcGFuKHsgXG4gICAgICAgIHRleHQ6IGBcdUQ4M0NcdURDQ0YgJHt1bml0LmZsYXNoY2FyZElkcy5sZW5ndGh9YCwgXG4gICAgICAgIGNsczogJ2JhZGdlJyBcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyVHlwZUluZGljYXRvcihoZWFkZXI6IEhUTUxFbGVtZW50LCB1bml0OiBDb250ZW50VW5pdCk6IHZvaWQge1xuICAgIGNvbnN0IHR5cGVJbmRpY2F0b3IgPSBoZWFkZXIuY3JlYXRlRGl2KHsgY2xzOiAndHlwZS1pbmRpY2F0b3InIH0pO1xuICAgIGlmICh1bml0LnR5cGUgPT09ICdRQScpIHtcbiAgICAgIHR5cGVJbmRpY2F0b3IuYWRkQ2xhc3MoJ3R5cGUtcWEnKTtcbiAgICAgIHR5cGVJbmRpY2F0b3IudGV4dENvbnRlbnQgPSAnUSZBJztcbiAgICB9IGVsc2UgaWYgKHVuaXQudHlwZSA9PT0gJ2Nsb3plJykge1xuICAgICAgdHlwZUluZGljYXRvci5hZGRDbGFzcygndHlwZS1jbG96ZScpO1xuICAgICAgdHlwZUluZGljYXRvci50ZXh0Q29udGVudCA9ICdDbG96ZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHR5cGVJbmRpY2F0b3IuYWRkQ2xhc3MoJ3R5cGUtdGV4dCcpO1xuICAgICAgdHlwZUluZGljYXRvci50ZXh0Q29udGVudCA9ICdUZXh0JztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckZpbGVOYW1lKGhlYWRlcjogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0KTogdm9pZCB7XG4gICAgY29uc3QgZmlsZU5hbWUgPSB1bml0LnNvdXJjZS5maWxlLnNwbGl0KCcvJykucG9wKCk/LnJlcGxhY2UoJy5tZCcsICcnKSB8fCAnJztcbiAgICBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6IGZpbGVOYW1lLCBjbHM6ICdkb2MtbmFtZScgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckdyaWRUb29scyhoZWFkZXI6IEhUTUxFbGVtZW50LCB1bml0OiBDb250ZW50VW5pdCk6IHZvaWQge1xuICAgIGNvbnN0IHRvb2xzID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ2dyaWQtY2FyZC10b29scycgfSk7XG5cbiAgICBpZiAoIXRoaXMuc3RhdGUuYmF0Y2hNb2RlKSB7XG4gICAgICBjb25zdCBmbGFzaGNhcmRCdG4gPSB0b29scy5jcmVhdGVEaXYoeyBjbHM6ICd0b29sLWJ0bi1ncmlkJyB9KTtcbiAgICAgIGZsYXNoY2FyZEJ0bi5pbm5lckhUTUwgPSAnXHUyNkExJztcbiAgICAgIGZsYXNoY2FyZEJ0bi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnXHU3NTFGXHU2MjEwXHU5NUVBXHU1MzYxJyk7XG4gICAgICBmbGFzaGNhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLmNhbGxiYWNrcy5vblF1aWNrRmxhc2hjYXJkKHVuaXQpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgbW9yZUJ0biA9IHRvb2xzLmNyZWF0ZURpdih7IGNsczogJ3Rvb2wtYnRuLWdyaWQnIH0pO1xuICAgIG1vcmVCdG4uaW5uZXJIVE1MID0gJ1x1MjJFRSc7XG4gICAgbW9yZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5jYWxsYmFja3Mub25TaG93Q29udGV4dE1lbnUoZSwgdW5pdCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckdyaWRDb250ZW50KGNvbnRlbnQ6IEhUTUxFbGVtZW50LCBjYXJkOiBIVE1MRWxlbWVudCwgdW5pdDogQ29udGVudFVuaXQpOiB2b2lkIHtcbiAgICBjb25zdCBub3RlVGV4dCA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnZ3JpZC1ub3RlLXRleHQnIH0pO1xuICAgIFxuICAgIC8vIFx1RDgzQ1x1REQ5NSBcdTZERkJcdTUyQTBcdTg4NjhcdTY4M0NcdTY4QzBcdTZENEJcdTU0OENcdTZFMzJcdTY3RDNcbiAgICBpZiAodGhpcy5pc1RhYmxlQ29udGVudCh1bml0LmZ1bGxDb250ZXh0IHx8IHVuaXQuY29udGVudCkpIHtcbiAgICAgIHRoaXMucmVuZGVyTWFya2Rvd25Db250ZW50KG5vdGVUZXh0LCB1bml0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbm90ZVRleHQuaW5uZXJIVE1MID0gdGhpcy5mb3JtYXRDb250ZW50KHVuaXQpO1xuICAgIH1cbiAgICBcbiAgICBub3RlVGV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2FsbGJhY2tzLm9uVG9nZ2xlQW5ub3RhdGlvbihjYXJkLCB1bml0KTtcbiAgICB9KTtcbiAgfVxuICBwcml2YXRlIHJlbmRlckdyaWRBbm5vdGF0aW9uKGNvbnRlbnQ6IEhUTUxFbGVtZW50LCBjYXJkOiBIVE1MRWxlbWVudCwgdW5pdDogQ29udGVudFVuaXQpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuY2FsbGJhY2tzLmdldEFubm90YXRpb25Db250ZW50KSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgYW5ub3RhdGlvbkNvbnRlbnQgPSB0aGlzLmNhbGxiYWNrcy5nZXRBbm5vdGF0aW9uQ29udGVudCh1bml0LmlkKTtcbiAgICBpZiAoYW5ub3RhdGlvbkNvbnRlbnQpIHtcbiAgICAgIGNvbnN0IGFubkVsID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLWFubm90YXRpb24nIH0pO1xuICAgICAgYW5uRWwuaW5uZXJIVE1MID0gYDxzdHJvbmc+XHU2Mjc5XHU2Q0U4XHVGRjFBPC9zdHJvbmc+JHthbm5vdGF0aW9uQ29udGVudH1gO1xuICAgICAgXG4gICAgICBhbm5FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tzLm9uVG9nZ2xlQW5ub3RhdGlvbihjYXJkLCB1bml0KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyR3JpZFRhZ3MoY29udGVudDogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0KTogdm9pZCB7XG4gICAgaWYgKHVuaXQubWV0YWRhdGEudGFncy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCB0YWdzID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdncmlkLXRhZ3MnIH0pO1xuICAgICAgdW5pdC5tZXRhZGF0YS50YWdzLmZvckVhY2godGFnID0+IHtcbiAgICAgICAgdGFncy5jcmVhdGVTcGFuKHsgdGV4dDogYCMke3RhZ31gLCBjbHM6ICd0YWctZ3JpZCcgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckdyaWRNZXRhKG1ldGE6IEhUTUxFbGVtZW50LCB1bml0OiBDb250ZW50VW5pdCk6IHZvaWQge1xuICAgIG1ldGEuY3JlYXRlU3Bhbih7IHRleHQ6IGBMJHt1bml0LnNvdXJjZS5wb3NpdGlvbi5saW5lfWAsIGNsczogJ2xpbmUtaW5mbycgfSk7XG4gICAgXG4gICAgaWYgKHVuaXQuZmxhc2hjYXJkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIG1ldGEuY3JlYXRlU3Bhbih7IFxuICAgICAgICB0ZXh0OiBgXHVEODNDXHVEQ0NGICR7dW5pdC5mbGFzaGNhcmRJZHMubGVuZ3RofWAsIFxuICAgICAgICBjbHM6ICdiYWRnZS1ncmlkJyBcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyRmxhc2hjYXJkQ29udGVudChjb250ZW50OiBIVE1MRWxlbWVudCwgY2FyZDogRmxhc2hjYXJkKTogdm9pZCB7XG4gICAgY29uc3QgcXVlc3Rpb24gPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ2ZsYXNoY2FyZC1xdWVzdGlvbicgfSk7XG4gICAgcXVlc3Rpb24uaW5uZXJIVE1MID0gYDxzdHJvbmc+XHU5NUVFXHU5ODk4XHVGRjFBPC9zdHJvbmc+JHtjYXJkLmZyb250fWA7XG4gICAgXG4gICAgY29uc3QgYW5zd2VyID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdmbGFzaGNhcmQtYW5zd2VyJyB9KTtcbiAgICBjb25zdCBhbnN3ZXJUZXh0ID0gQXJyYXkuaXNBcnJheShjYXJkLmJhY2spID8gY2FyZC5iYWNrLmpvaW4oJywgJykgOiBjYXJkLmJhY2s7XG4gICAgYW5zd2VyLmlubmVySFRNTCA9IGA8c3Ryb25nPlx1N0I1NFx1Njg0OFx1RkYxQTwvc3Ryb25nPiR7YW5zd2VyVGV4dH1gO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJGbGFzaGNhcmRNZXRhKG1ldGE6IEhUTUxFbGVtZW50LCBjYXJkOiBGbGFzaGNhcmQpOiB2b2lkIHtcbiAgICBtZXRhLmNyZWF0ZVNwYW4oe1xuICAgICAgdGV4dDogdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKGNhcmQubWV0YWRhdGEuY3JlYXRlZEF0KSksXG4gICAgICBjbHM6ICdmbGFzaGNhcmQtZGF0ZSdcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0RGF0ZShkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ3poLUNOJywge1xuICAgICAgeWVhcjogJ251bWVyaWMnLFxuICAgICAgbW9udGg6ICcyLWRpZ2l0JyxcbiAgICAgIGRheTogJzItZGlnaXQnXG4gICAgfSk7XG4gIH1cblxuXG4gIC8vIFx1RDgzQ1x1REQ5NSBcdTZERkJcdTUyQTBcdTg4NjhcdTY4M0NcdTY4QzBcdTZENEJcdTY1QjlcdTZDRDVcbiAgcHJpdmF0ZSBpc1RhYmxlQ29udGVudChjb250ZW50OiBzdHJpbmcgfCB1bmRlZmluZWQpOiBib29sZWFuIHtcbiAgICBpZiAoIWNvbnRlbnQpIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQudHJpbSgpLnNwbGl0KCdcXG4nKTtcbiAgICByZXR1cm4gbGluZXMubGVuZ3RoID49IDIgJiYgXG4gICAgICAgICAgIGxpbmVzLmV2ZXJ5KGxpbmUgPT4gbGluZS5pbmNsdWRlcygnfCcpKSAmJlxuICAgICAgICAgICAhIWxpbmVzWzFdPy5tYXRjaCgvXlxccypcXHxbXFxzOi1dK1xcfC8pO1xuICB9XG5cbiAgLy8gXHVEODNDXHVERDk1IFx1NkRGQlx1NTJBMCBNYXJrZG93biBcdTZFMzJcdTY3RDNcdTY1QjlcdTZDRDVcbiAgcHJpdmF0ZSByZW5kZXJNYXJrZG93bkNvbnRlbnQoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgdW5pdDogQ29udGVudFVuaXQpOiB2b2lkIHtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICBcbiAgICBsZXQgY29udGVudCA9IHVuaXQuZnVsbENvbnRleHQgfHwgdW5pdC5jb250ZW50O1xuICAgIFxuICAgIC8vIFx1RDgzQ1x1REQ5NSBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTRFM0FcdTg4NjhcdTY4M0NcbiAgICBpZiAodGhpcy5pc1RhYmxlQ29udGVudChjb250ZW50KSkge1xuICAgICAgLy8gXHU2MjRCXHU1MkE4XHU2RTMyXHU2N0QzXHU4ODY4XHU2ODNDXG4gICAgICB0aGlzLnJlbmRlclRhYmxlV2l0aEhpZ2hsaWdodHMoY29udGFpbmVyLCBjb250ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gXHU0RjdGXHU3NTI4IE1hcmtkb3duIFx1NkUzMlx1NjdEM1x1NTY2OFxuICAgICAgY29uc3QgeyBNYXJrZG93blJlbmRlcmVyIH0gPSByZXF1aXJlKCdvYnNpZGlhbicpO1xuICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvPT0oW149XSspPT0vZywgJzxzcGFuIGNsYXNzPVwiaGlnaGxpZ2h0XCI+JDE8L3NwYW4+Jyk7XG4gICAgICBNYXJrZG93blJlbmRlcmVyLnJlbmRlck1hcmtkb3duKGNvbnRlbnQsIGNvbnRhaW5lciwgdW5pdC5zb3VyY2UuZmlsZSwgbnVsbCk7XG4gICAgfVxuICB9XG4gIFxuICAvLyBcdUQ4M0NcdUREOTUgXHU2REZCXHU1MkEwXHU2MjRCXHU1MkE4XHU4ODY4XHU2ODNDXHU2RTMyXHU2N0QzXHU2NUI5XHU2Q0Q1XG5wcml2YXRlIHJlbmRlclRhYmxlV2l0aEhpZ2hsaWdodHMoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgbWFya2Rvd246IHN0cmluZyk6IHZvaWQge1xuICBcbiAgY29uc3QgbGluZXMgPSBtYXJrZG93bi50cmltKCkuc3BsaXQoJ1xcbicpO1xuICBcbiAgY29uc3QgdGFibGUgPSBjb250YWluZXIuY3JlYXRlRWwoJ3RhYmxlJywgeyBjbHM6ICdsZWFybmluZy1zeXN0ZW0tdGFibGUnIH0pO1xuICBcbiAgLy8gXHU4OUUzXHU2NzkwXHU4ODY4XHU1OTM0XG4gIGNvbnN0IGhlYWRlckNlbGxzID0gbGluZXNbMF1cbiAgICAuc3BsaXQoJ3wnKVxuICAgIC5tYXAoYyA9PiBjLnRyaW0oKSlcbiAgICAuZmlsdGVyKGMgPT4gYyk7XG4gIFxuICBcbiAgY29uc3QgdGhlYWQgPSB0YWJsZS5jcmVhdGVFbCgndGhlYWQnKTtcbiAgY29uc3QgaGVhZGVyUm93ID0gdGhlYWQuY3JlYXRlRWwoJ3RyJyk7XG4gIGhlYWRlckNlbGxzLmZvckVhY2goKGNlbGwsIGluZGV4KSA9PiB7XG4gICAgY29uc3QgdGggPSBoZWFkZXJSb3cuY3JlYXRlRWwoJ3RoJyk7XG4gICAgXG4gICAgaWYgKGNlbGwuaW5jbHVkZXMoJz09JykpIHtcbiAgICAgIGNvbnN0IHByb2Nlc3NlZCA9IGNlbGwucmVwbGFjZSgvPT0oW149XSspPT0vZywgJzxtYXJrPiQxPC9tYXJrPicpO1xuICAgICAgdGguaW5uZXJIVE1MID0gcHJvY2Vzc2VkO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aC50ZXh0Q29udGVudCA9IGNlbGw7XG4gICAgfVxuICB9KTtcbiAgXG4gIC8vIFx1ODlFM1x1Njc5MFx1NjU3MFx1NjM2RVx1ODg0Q1xuICBjb25zdCB0Ym9keSA9IHRhYmxlLmNyZWF0ZUVsKCd0Ym9keScpO1xuICBmb3IgKGxldCBpID0gMjsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgXG4gICAgY29uc3QgY2VsbHMgPSBsaW5lc1tpXVxuICAgICAgLnNwbGl0KCd8JylcbiAgICAgIC5tYXAoYyA9PiBjLnRyaW0oKSlcbiAgICAgIC5maWx0ZXIoYyA9PiBjKTtcbiAgICBcbiAgICBpZiAoY2VsbHMubGVuZ3RoID09PSAwKSBjb250aW51ZTtcbiAgICBcbiAgICBjb25zdCByb3cgPSB0Ym9keS5jcmVhdGVFbCgndHInKTtcbiAgICBjZWxscy5mb3JFYWNoKChjZWxsLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgdGQgPSByb3cuY3JlYXRlRWwoJ3RkJyk7XG4gICAgICBcbiAgICAgIGlmIChjZWxsLmluY2x1ZGVzKCc9PScpKSB7XG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZCA9IGNlbGwucmVwbGFjZSgvPT0oW149XSspPT0vZywgJzxtYXJrPiQxPC9tYXJrPicpO1xuICAgICAgICB0ZC5pbm5lckhUTUwgPSBwcm9jZXNzZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0ZC50ZXh0Q29udGVudCA9IGNlbGw7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgXG59XG59XG4gIFxuXG4iLCAiLy8gc3JjL3VpL2NvbXBvbmVudHMvQ29udGVudExpc3QudHMgICBcdTUxODVcdTVCQjlcdTUyMTdcdTg4NjhcbmltcG9ydCB7IENvbnRlbnRVbml0IH0gZnJvbSAnLi4vLi4vY29yZS9EYXRhTWFuYWdlcic7XG5pbXBvcnQgeyBGbGFzaGNhcmQgfSBmcm9tICcuLi8uLi9jb3JlL0ZsYXNoY2FyZE1hbmFnZXInO1xuaW1wb3J0IHsgVmlld1N0YXRlLCBHcm91cE1vZGUgfSBmcm9tICcuLi9zdGF0ZS9WaWV3U3RhdGUnO1xuaW1wb3J0IHsgQ29udGVudENhcmQsIENhcmRDYWxsYmFja3MgfSBmcm9tICcuL0NvbnRlbnRDYXJkJztcblxuZXhwb3J0IGludGVyZmFjZSBHcm91cGVkVW5pdHMge1xuICBncm91cEtleTogc3RyaW5nO1xuICB1bml0czogQ29udGVudFVuaXRbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHcm91cGVkQ2FyZHMge1xuICBncm91cEtleTogc3RyaW5nO1xuICBjYXJkczogRmxhc2hjYXJkW107XG59XG5cbmV4cG9ydCBjbGFzcyBDb250ZW50TGlzdCB7XG4gIHByaXZhdGUgc3RhdGU6IFZpZXdTdGF0ZTtcbiAgcHJpdmF0ZSBjYXJkUmVuZGVyZXI6IENvbnRlbnRDYXJkO1xuXG4gIGNvbnN0cnVjdG9yKHN0YXRlOiBWaWV3U3RhdGUsIGNhcmRDYWxsYmFja3M6IENhcmRDYWxsYmFja3MpIHtcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5jYXJkUmVuZGVyZXIgPSBuZXcgQ29udGVudENhcmQoc3RhdGUsIGNhcmRDYWxsYmFja3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NkUzMlx1NjdEM1x1N0QyN1x1NTFEMVx1NTIxN1x1ODg2OFx1RkYwOFx1NEZBN1x1OEZCOVx1NjgwRlx1NkEyMVx1NUYwRlx1RkYwOVxuICAgKi9cbiAgcmVuZGVyQ29tcGFjdExpc3QoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgdW5pdHM6IENvbnRlbnRVbml0W10pOiB2b2lkIHtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcblxuICAgIGlmICh1bml0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMucmVuZGVyRW1wdHlTdGF0ZShjb250YWluZXIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGdyb3VwZWQgPSB0aGlzLmdyb3VwVW5pdHModW5pdHMpO1xuXG4gICAgZ3JvdXBlZC5mb3JFYWNoKCh7IGdyb3VwS2V5LCB1bml0czogZ3JvdXBVbml0cyB9KSA9PiB7XG4gICAgICBjb25zdCBncm91cEVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NvbnRlbnQtZ3JvdXAnIH0pO1xuXG4gICAgICB0aGlzLnJlbmRlckdyb3VwSGVhZGVyKGdyb3VwRWwsIGdyb3VwS2V5LCBncm91cFVuaXRzLmxlbmd0aCk7XG5cbiAgICAgIGdyb3VwVW5pdHMuZm9yRWFjaCh1bml0ID0+IHtcbiAgICAgICAgdGhpcy5jYXJkUmVuZGVyZXIucmVuZGVyQ29tcGFjdChncm91cEVsLCB1bml0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NkUzMlx1NjdEM1x1NTE4NVx1NUJCOVx1N0Y1MVx1NjgzQ1x1RkYwOFx1NEUzQlx1NzU0Q1x1OTc2Mlx1NkEyMVx1NUYwRlx1RkYwOVxuICAgKi9cbiAgcmVuZGVyQ29udGVudEdyaWQoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgdW5pdHM6IENvbnRlbnRVbml0W10pOiB2b2lkIHtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcblxuICAgIGlmICh1bml0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMucmVuZGVyRW1wdHlTdGF0ZShjb250YWluZXIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHVuaXRzLmZvckVhY2godW5pdCA9PiB7XG4gICAgICB0aGlzLmNhcmRSZW5kZXJlci5yZW5kZXJHcmlkKGNvbnRhaW5lciwgdW5pdCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogXHU2RTMyXHU2N0QzXHU5NUVBXHU1MzYxXHU3RjUxXHU2ODNDXG4gICAqL1xuICByZW5kZXJGbGFzaGNhcmRzR3JpZChjb250YWluZXI6IEhUTUxFbGVtZW50LCBjYXJkczogRmxhc2hjYXJkW10pOiB2b2lkIHtcbiAgICBjb250YWluZXIuZW1wdHkoKTtcblxuICAgIGlmIChjYXJkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnRhaW5lci5jcmVhdGVEaXYoeyBcbiAgICAgICAgdGV4dDogJ1x1RDgzRFx1RENFRCBcdThCRTVcdTUyMDZcdTdFQzRcdTRFMEJcdTY2ODJcdTY1RTBcdTk1RUFcdTUzNjEnLCBcbiAgICAgICAgY2xzOiAnZW1wdHktc3RhdGUnIFxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgIHRoaXMuY2FyZFJlbmRlcmVyLnJlbmRlckZsYXNoY2FyZEdyaWQoY29udGFpbmVyLCBjYXJkKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTUyMDZcdTdFQzRcdTdCMTRcdThCQjBcdTUzNTVcdTUxNDNcbiAgICovXG4gIGdyb3VwVW5pdHModW5pdHM6IENvbnRlbnRVbml0W10pOiBHcm91cGVkVW5pdHNbXSB7XG4gICAgY29uc3QgZ3JvdXBlZCA9IG5ldyBNYXA8c3RyaW5nLCBDb250ZW50VW5pdFtdPigpO1xuXG4gICAgdW5pdHMuZm9yRWFjaCh1bml0ID0+IHtcbiAgICAgIGNvbnN0IGtleXMgPSB0aGlzLmdldEdyb3VwS2V5cyh1bml0KTtcbiAgICAgIFxuICAgICAga2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIGlmICghZ3JvdXBlZC5oYXMoa2V5KSkge1xuICAgICAgICAgIGdyb3VwZWQuc2V0KGtleSwgW10pO1xuICAgICAgICB9XG4gICAgICAgIGdyb3VwZWQuZ2V0KGtleSkhLnB1c2godW5pdCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLnNvcnRHcm91cHMoZ3JvdXBlZCk7XG4gIH1cblxuICAvKipcbiAgICogXHU1MjA2XHU3RUM0XHU5NUVBXHU1MzYxXG4gICAqL1xuICBncm91cEZsYXNoY2FyZHMoXG4gICAgY2FyZHM6IEZsYXNoY2FyZFtdLCBcbiAgICBnZXRVbml0OiAoY2FyZElkOiBzdHJpbmcpID0+IENvbnRlbnRVbml0IHwgdW5kZWZpbmVkXG4gICk6IEdyb3VwZWRDYXJkc1tdIHtcbiAgICBjb25zdCBncm91cGVkID0gbmV3IE1hcDxzdHJpbmcsIEZsYXNoY2FyZFtdPigpO1xuXG4gICAgY2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgIGNvbnN0IHVuaXQgPSBnZXRVbml0KGNhcmQuc291cmNlQ29udGVudElkKTtcbiAgICAgIGNvbnN0IGtleXMgPSB0aGlzLmdldEZsYXNoY2FyZEdyb3VwS2V5cyhjYXJkLCB1bml0KTtcbiAgICAgIFxuICAgICAga2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIGlmICghZ3JvdXBlZC5oYXMoa2V5KSkge1xuICAgICAgICAgIGdyb3VwZWQuc2V0KGtleSwgW10pO1xuICAgICAgICB9XG4gICAgICAgIGdyb3VwZWQuZ2V0KGtleSkhLnB1c2goY2FyZCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBBcnJheS5mcm9tKGdyb3VwZWQuZW50cmllcygpKVxuICAgICAgLm1hcCgoW2dyb3VwS2V5LCBjYXJkc10pID0+ICh7IGdyb3VwS2V5LCBjYXJkcyB9KSlcbiAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmdyb3VwTW9kZSA9PT0gJ2Fubm90YXRpb24nKSB7XG4gICAgICAgICAgaWYgKGEuZ3JvdXBLZXkgPT09ICdcdTY3MDlcdTYyNzlcdTZDRTgnKSByZXR1cm4gLTE7XG4gICAgICAgICAgaWYgKGIuZ3JvdXBLZXkgPT09ICdcdTY3MDlcdTYyNzlcdTZDRTgnKSByZXR1cm4gMTtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5ncm91cE1vZGUgPT09ICdkYXRlJykge1xuICAgICAgICAgIHJldHVybiBiLmdyb3VwS2V5LmxvY2FsZUNvbXBhcmUoYS5ncm91cEtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGIuY2FyZHMubGVuZ3RoIC0gYS5jYXJkcy5sZW5ndGg7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTUzNTVcdTUxNDNcdTc2ODRcdTUyMDZcdTdFQzRcdTk1MkVcbiAgICovXG4gIHByaXZhdGUgZ2V0R3JvdXBLZXlzKHVuaXQ6IENvbnRlbnRVbml0KTogc3RyaW5nW10ge1xuICAgIHN3aXRjaCAodGhpcy5zdGF0ZS5ncm91cE1vZGUpIHtcbiAgICAgIGNhc2UgJ2ZpbGUnOlxuICAgICAgICByZXR1cm4gW3VuaXQuc291cmNlLmZpbGVdO1xuICAgICAgXG4gICAgICBjYXNlICdhbm5vdGF0aW9uJzpcbiAgICAgICAgcmV0dXJuIFt1bml0LmFubm90YXRpb25JZCA/ICdcdTY3MDlcdTYyNzlcdTZDRTgnIDogJ1x1NjVFMFx1NjI3OVx1NkNFOCddO1xuICAgICAgXG4gICAgICBjYXNlICd0YWcnOlxuICAgICAgICByZXR1cm4gdW5pdC5tZXRhZGF0YS50YWdzLmxlbmd0aCA+IDAgXG4gICAgICAgICAgPyB1bml0Lm1ldGFkYXRhLnRhZ3MgXG4gICAgICAgICAgOiBbJ1x1NjcyQVx1NTIwNlx1N0M3QiddO1xuICAgICAgXG4gICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgcmV0dXJuIFt0aGlzLmZvcm1hdERhdGUobmV3IERhdGUodW5pdC5tZXRhZGF0YS5jcmVhdGVkQXQpKV07XG4gICAgICBcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBbJ1x1NjcyQVx1NTIwNlx1N0VDNCddO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTk1RUFcdTUzNjFcdTc2ODRcdTUyMDZcdTdFQzRcdTk1MkVcbiAgICovXG4gIHByaXZhdGUgZ2V0Rmxhc2hjYXJkR3JvdXBLZXlzKGNhcmQ6IEZsYXNoY2FyZCwgdW5pdD86IENvbnRlbnRVbml0KTogc3RyaW5nW10ge1xuICAgIHN3aXRjaCAodGhpcy5zdGF0ZS5ncm91cE1vZGUpIHtcbiAgICAgIGNhc2UgJ2ZpbGUnOlxuICAgICAgICByZXR1cm4gW2NhcmQuc291cmNlRmlsZV07XG4gICAgICBcbiAgICAgIGNhc2UgJ2Fubm90YXRpb24nOlxuICAgICAgICBpZiAodW5pdCAmJiB1bml0LmFubm90YXRpb25JZCkge1xuICAgICAgICAgIHJldHVybiBbJ1x1NjcwOVx1NjI3OVx1NkNFOCddO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBbJ1x1NjVFMFx1NjI3OVx1NkNFOCddO1xuICAgICAgICB9XG4gICAgICBcbiAgICAgIGNhc2UgJ3RhZyc6XG4gICAgICAgIGlmICh1bml0ICYmIHVuaXQubWV0YWRhdGEudGFncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcmV0dXJuIHVuaXQubWV0YWRhdGEudGFncztcbiAgICAgICAgfSBlbHNlIGlmIChjYXJkLnRhZ3MgJiYgY2FyZC50YWdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICByZXR1cm4gY2FyZC50YWdzO1xuICAgICAgICB9IGVsc2UgaWYgKGNhcmQuZGVjaykge1xuICAgICAgICAgIHJldHVybiBbY2FyZC5kZWNrXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gWydcdTY3MkFcdTUyMDZcdTdDN0InXTtcbiAgICAgICAgfVxuICAgICAgXG4gICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgcmV0dXJuIFt0aGlzLmZvcm1hdERhdGUobmV3IERhdGUoY2FyZC5tZXRhZGF0YS5jcmVhdGVkQXQpKV07XG4gICAgICBcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBbJ1x1NjcyQVx1NTIwNlx1N0VDNCddO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYzOTJcdTVFOEZcdTUyMDZcdTdFQzRcbiAgICovXG4gIHByaXZhdGUgc29ydEdyb3Vwcyhncm91cGVkOiBNYXA8c3RyaW5nLCBDb250ZW50VW5pdFtdPik6IEdyb3VwZWRVbml0c1tdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShncm91cGVkLmVudHJpZXMoKSlcbiAgICAgIC5tYXAoKFtncm91cEtleSwgdW5pdHNdKSA9PiAoeyBncm91cEtleSwgdW5pdHMgfSkpXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5ncm91cE1vZGUgPT09ICdhbm5vdGF0aW9uJykge1xuICAgICAgICAgIGlmIChhLmdyb3VwS2V5ID09PSAnXHU2NzA5XHU2Mjc5XHU2Q0U4JykgcmV0dXJuIC0xO1xuICAgICAgICAgIGlmIChiLmdyb3VwS2V5ID09PSAnXHU2NzA5XHU2Mjc5XHU2Q0U4JykgcmV0dXJuIDE7XG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuZ3JvdXBNb2RlID09PSAnZGF0ZScpIHtcbiAgICAgICAgICByZXR1cm4gYi5ncm91cEtleS5sb2NhbGVDb21wYXJlKGEuZ3JvdXBLZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiLnVuaXRzLmxlbmd0aCAtIGEudW5pdHMubGVuZ3RoO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogXHU2RTMyXHU2N0QzXHU1MjA2XHU3RUM0XHU1OTM0XHU5MEU4XG4gICAqL1xuICBwcml2YXRlIHJlbmRlckdyb3VwSGVhZGVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGdyb3VwS2V5OiBzdHJpbmcsIGNvdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBoZWFkZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3JvdXAtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXIuY3JlYXRlU3Bhbih7IFxuICAgICAgdGV4dDogdGhpcy5nZXRHcm91cEljb24odGhpcy5zdGF0ZS5ncm91cE1vZGUpLCBcbiAgICAgIGNsczogJ2dyb3VwLWljb24nIFxuICAgIH0pO1xuICAgIGhlYWRlci5jcmVhdGVTcGFuKHsgdGV4dDogZ3JvdXBLZXksIGNsczogJ2dyb3VwLXRpdGxlJyB9KTtcbiAgICBoZWFkZXIuY3JlYXRlU3Bhbih7IHRleHQ6IGAke2NvdW50fWAsIGNsczogJ2dyb3VwLWNvdW50JyB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTZFMzJcdTY3RDNcdTdBN0FcdTcyQjZcdTYwMDFcbiAgICovXG4gIHByaXZhdGUgcmVuZGVyRW1wdHlTdGF0ZShjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgY29uc3QgZW1wdHlEaXYgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZW1wdHktc3RhdGUnIH0pO1xuICAgIFxuICAgIGlmICh0aGlzLnN0YXRlLnNlbGVjdGVkRmlsZSAmJiB0aGlzLnN0YXRlLmRpc3BsYXlNb2RlID09PSAnc2lkZWJhcicpIHtcbiAgICAgIGVtcHR5RGl2LmlubmVySFRNTCA9IGBcbiAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjtcIj5cbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC1zaXplOiAzMnB4OyBtYXJnaW4tYm90dG9tOiAxMHB4O1wiPlx1RDgzRFx1RENFRDwvZGl2PlxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XCI+XHU1RjUzXHU1MjREXHU2NTg3XHU2ODYzXHU2NjgyXHU2NUUwXHU3QjE0XHU4QkIwPC9kaXY+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cImZvbnQtc2l6ZTogMTJweDsgY29sb3I6IHZhcigtLXRleHQtZmFpbnQpOyBtYXJnaW4tdG9wOiA4cHg7XCI+XG4gICAgICAgICAgICAke3RoaXMuc3RhdGUuZmlsdGVyTW9kZSAhPT0gJ2FsbCcgPyAnXHU1QzFEXHU4QkQ1XHU1MjA3XHU2MzYyXHU1MTc2XHU0RUQ2XHU4RkM3XHU2RUU0XHU1NjY4XHU2N0U1XHU3NzBCJyA6ICdcdTVGMDBcdTU5Q0JcdTlBRDhcdTRFQUVcdTY1ODdcdTY3MkNcdTY3NjVcdTUyMUJcdTVFRkFcdTdCMTRcdThCQjAnfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVtcHR5RGl2LnRleHRDb250ZW50ID0gJ1x1NjY4Mlx1NjVFMFx1NTE4NVx1NUJCOSc7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NTIwNlx1N0VDNFx1NTZGRVx1NjgwN1xuICAgKi9cbiAgcHJpdmF0ZSBnZXRHcm91cEljb24obW9kZTogR3JvdXBNb2RlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgIGNhc2UgJ2ZpbGUnOiByZXR1cm4gJ1x1RDgzRFx1RENDNCc7XG4gICAgICBjYXNlICdhbm5vdGF0aW9uJzogcmV0dXJuICdcdUQ4M0RcdURDQUMnO1xuICAgICAgY2FzZSAndGFnJzogcmV0dXJuICdcdUQ4M0NcdURGRjdcdUZFMEYnO1xuICAgICAgY2FzZSAnZGF0ZSc6IHJldHVybiAnXHVEODNEXHVEQ0M1JztcbiAgICAgIGRlZmF1bHQ6IHJldHVybiAnXHVEODNEXHVEQ0MxJztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU2ODNDXHU1RjBGXHU1MzE2XHU2NUU1XHU2NzFGXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCd6aC1DTicsIHtcbiAgICAgIHllYXI6ICdudW1lcmljJyxcbiAgICAgIG1vbnRoOiAnMi1kaWdpdCcsXG4gICAgICBkYXk6ICcyLWRpZ2l0J1xuICAgIH0pO1xuICB9XG59IiwgIi8vIHNyYy91aS9jb21wb25lbnRzL0Fubm90YXRpb25FZGl0b3IudHMgICAgXHU2Mjc5XHU2Q0U4XHU3RjE2XHU4RjkxXHU1NjY4XG5pbXBvcnQgeyBDb250ZW50VW5pdCB9IGZyb20gJy4uLy4uL2NvcmUvRGF0YU1hbmFnZXInO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFubm90YXRpb25FZGl0b3JDYWxsYmFja3Mge1xuICBvblNhdmU6ICh1bml0SWQ6IHN0cmluZywgY29udGVudDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBvbkNhbmNlbDogKHVuaXRJZDogc3RyaW5nKSA9PiB2b2lkO1xuICBnZXRBbm5vdGF0aW9uQ29udGVudDogKHVuaXRJZDogc3RyaW5nKSA9PiBzdHJpbmcgfCB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBBbm5vdGF0aW9uRWRpdG9yIHtcbiAgcHJpdmF0ZSBjYWxsYmFja3M6IEFubm90YXRpb25FZGl0b3JDYWxsYmFja3M7XG4gIHByaXZhdGUgYWN0aXZlRWRpdG9yczogTWFwPHN0cmluZywgSFRNTEVsZW1lbnQ+ID0gbmV3IE1hcCgpO1xuXG4gIGNvbnN0cnVjdG9yKGNhbGxiYWNrczogQW5ub3RhdGlvbkVkaXRvckNhbGxiYWNrcykge1xuICAgIHRoaXMuY2FsbGJhY2tzID0gY2FsbGJhY2tzO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NTIwN1x1NjM2Mlx1NTE4NVx1ODA1NFx1NjI3OVx1NkNFOFx1N0YxNlx1OEY5MVx1NTY2OFxuICAgKi9cbiAgdG9nZ2xlKGNhcmRFbDogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0KTogdm9pZCB7XG4gICAgY29uc3QgZXhpc3RpbmdFZGl0b3IgPSBjYXJkRWwucXVlcnlTZWxlY3RvcignLmlubGluZS1hbm5vdGF0aW9uLWVkaXRvcicpIGFzIEhUTUxFbGVtZW50O1xuICAgIFxuICAgIGlmIChleGlzdGluZ0VkaXRvcikge1xuICAgICAgdGhpcy5jbG9zZShjYXJkRWwsIHVuaXQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMub3BlbihjYXJkRWwsIHVuaXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjI1M1x1NUYwMFx1N0YxNlx1OEY5MVx1NTY2OFxuICAgKi9cbiAgcHJpdmF0ZSBvcGVuKGNhcmRFbDogSFRNTEVsZW1lbnQsIHVuaXQ6IENvbnRlbnRVbml0KTogdm9pZCB7XG4gICAgY29uc3QgYW5ub3RhdGlvbkNvbnRlbnQgPSB0aGlzLmNhbGxiYWNrcy5nZXRBbm5vdGF0aW9uQ29udGVudCh1bml0LmlkKTtcbiAgICBjb25zdCBjb250ZW50ID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvbnRlbnQsIC5ncmlkLWNhcmQtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbnN0IGFubm90YXRpb25QcmV2aWV3ID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCcuYW5ub3RhdGlvbi1wcmV2aWV3LCAuZ3JpZC1hbm5vdGF0aW9uJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgXG4gICAgY29uc3QgZWRpdG9yID0gdGhpcy5jcmVhdGVFZGl0b3IodW5pdC5pZCwgYW5ub3RhdGlvbkNvbnRlbnQgfHwgJycpO1xuICAgIFxuICAgIGlmIChhbm5vdGF0aW9uUHJldmlldykge1xuICAgICAgYW5ub3RhdGlvblByZXZpZXcucmVwbGFjZVdpdGgoZWRpdG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgbm90ZVRleHQgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5ub3RlLXRleHQsIC5ncmlkLW5vdGUtdGV4dCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgaWYgKG5vdGVUZXh0KSB7XG4gICAgICAgIG5vdGVUZXh0LmFmdGVyKGVkaXRvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGVkaXRvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdGV4dGFyZWEgPSBlZGl0b3IucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xuICAgIHRleHRhcmVhLmZvY3VzKCk7XG4gICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UodGV4dGFyZWEudmFsdWUubGVuZ3RoLCB0ZXh0YXJlYS52YWx1ZS5sZW5ndGgpO1xuXG4gICAgdGhpcy5hY3RpdmVFZGl0b3JzLnNldCh1bml0LmlkLCBlZGl0b3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NTE3M1x1OTVFRFx1N0YxNlx1OEY5MVx1NTY2OFxuICAgKi9cbiAgcHJpdmF0ZSBjbG9zZShjYXJkRWw6IEhUTUxFbGVtZW50LCB1bml0OiBDb250ZW50VW5pdCk6IHZvaWQge1xuICAgIGNvbnN0IGVkaXRvciA9IGNhcmRFbC5xdWVyeVNlbGVjdG9yKCcuaW5saW5lLWFubm90YXRpb24tZWRpdG9yJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKCFlZGl0b3IpIHJldHVybjtcblxuICAgIGVkaXRvci5yZW1vdmUoKTtcbiAgICB0aGlzLmFjdGl2ZUVkaXRvcnMuZGVsZXRlKHVuaXQuaWQpO1xuXG4gICAgLy8gXHU2MDYyXHU1OTBEXHU2Mjc5XHU2Q0U4XHU5ODg0XHU4OUM4XG4gICAgY29uc3QgYW5ub3RhdGlvbkNvbnRlbnQgPSB0aGlzLmNhbGxiYWNrcy5nZXRBbm5vdGF0aW9uQ29udGVudCh1bml0LmlkKTtcbiAgICBpZiAoYW5ub3RhdGlvbkNvbnRlbnQpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkRWwucXVlcnlTZWxlY3RvcignLmNhcmQtY29udGVudCwgLmdyaWQtY2FyZC1jb250ZW50JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICB0aGlzLnJlY3JlYXRlUHJldmlldyhjb250ZW50LCBjYXJkRWwsIHVuaXQsIGFubm90YXRpb25Db250ZW50KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU1MjFCXHU1RUZBXHU3RjE2XHU4RjkxXHU1NjY4XHU1MTQzXHU3RDIwXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZUVkaXRvcih1bml0SWQ6IHN0cmluZywgZGVmYXVsdFZhbHVlOiBzdHJpbmcpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgZWRpdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWRpdG9yLmNsYXNzTmFtZSA9ICdpbmxpbmUtYW5ub3RhdGlvbi1lZGl0b3InO1xuICAgIFxuICAgIGNvbnN0IHRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgICB0ZXh0YXJlYS5jbGFzc05hbWUgPSAnaW5saW5lLWFubm90YXRpb24tdGV4dGFyZWEnO1xuICAgIHRleHRhcmVhLnBsYWNlaG9sZGVyID0gJ0FkZCBjb21tZW50Li4uJztcbiAgICB0ZXh0YXJlYS52YWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICB0ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdW5pdC1pZCcsIHVuaXRJZCk7XG4gICAgXG4gICAgY29uc3QgaGludCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGhpbnQuY2xhc3NOYW1lID0gJ2lubGluZS1hbm5vdGF0aW9uLWhpbnQnO1xuICAgIGhpbnQudGV4dENvbnRlbnQgPSAnU2hpZnQgKyBFbnRlciBcdTYzNjJcdTg4NEMnO1xuICAgIFxuICAgIGVkaXRvci5hcHBlbmRDaGlsZCh0ZXh0YXJlYSk7XG4gICAgZWRpdG9yLmFwcGVuZENoaWxkKGhpbnQpO1xuXG4gICAgLy8gXHU3RUQxXHU1QjlBXHU0RThCXHU0RUY2XG4gICAgdGhpcy5iaW5kRWRpdG9yRXZlbnRzKHRleHRhcmVhLCB1bml0SWQpO1xuXG4gICAgcmV0dXJuIGVkaXRvcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTdFRDFcdTVCOUFcdTdGMTZcdThGOTFcdTU2NjhcdTRFOEJcdTRFRjZcbiAgICovXG4gIHByaXZhdGUgYmluZEVkaXRvckV2ZW50cyh0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCwgdW5pdElkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBcdTU5MzFcdTcxMjZcdTRGRERcdTVCNThcbiAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgYXN5bmMgKGUpID0+IHtcbiAgICAgIGNvbnN0IHJlbGF0ZWRUYXJnZXQgPSBlLnJlbGF0ZWRUYXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBjb25zdCBlZGl0b3IgPSB0ZXh0YXJlYS5jbG9zZXN0KCcuaW5saW5lLWFubm90YXRpb24tZWRpdG9yJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBcbiAgICAgIGlmICghcmVsYXRlZFRhcmdldCB8fCAhZWRpdG9yLmNvbnRhaW5zKHJlbGF0ZWRUYXJnZXQpKSB7XG4gICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGlmIChlZGl0b3IucGFyZW50RWxlbWVudCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlKGVkaXRvciwgdW5pdElkLCB0ZXh0YXJlYS52YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCAxMDApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gVGFiIFx1OTUyRVx1NEZERFx1NUI1OFxuICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBhc3luYyAoZSkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnVGFiJykge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IGVkaXRvciA9IHRleHRhcmVhLmNsb3Nlc3QoJy5pbmxpbmUtYW5ub3RhdGlvbi1lZGl0b3InKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlKGVkaXRvciwgdW5pdElkLCB0ZXh0YXJlYS52YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogXHU0RkREXHU1QjU4XHU2Mjc5XHU2Q0U4XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHNhdmUoZWRpdG9yRWw6IEhUTUxFbGVtZW50LCB1bml0SWQ6IHN0cmluZywgdGV4dDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgdHJpbW1lZFRleHQgPSB0ZXh0LnRyaW0oKTtcbiAgICBcbiAgICBhd2FpdCB0aGlzLmNhbGxiYWNrcy5vblNhdmUodW5pdElkLCB0cmltbWVkVGV4dCk7XG4gICAgXG4gICAgY29uc3QgY2FyZCA9IGVkaXRvckVsLmNsb3Nlc3QoJy5jb21wYWN0LWNhcmQsIC5ncmlkLWNhcmQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBlZGl0b3JFbC5yZW1vdmUoKTtcbiAgICB0aGlzLmFjdGl2ZUVkaXRvcnMuZGVsZXRlKHVuaXRJZCk7XG4gICAgXG4gICAgaWYgKHRyaW1tZWRUZXh0ICYmIGNhcmQpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvbnRlbnQsIC5ncmlkLWNhcmQtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgLy8gXHU5MDFBXHU4RkM3XHU1NkRFXHU4QzAzXHU4M0I3XHU1M0Q2XHU2NzAwXHU2NUIwXHU3Njg0XHU2Mjc5XHU2Q0U4XHU1MTg1XHU1QkI5XG4gICAgICAgIGNvbnN0IGxhdGVzdENvbnRlbnQgPSB0aGlzLmNhbGxiYWNrcy5nZXRBbm5vdGF0aW9uQ29udGVudCh1bml0SWQpO1xuICAgICAgICBpZiAobGF0ZXN0Q29udGVudCkge1xuICAgICAgICAgIC8vIFx1OTcwMFx1ODk4MVx1NEYyMFx1NTE2NVx1NUI4Q1x1NjU3NFx1NzY4NCBDb250ZW50VW5pdFx1RkYwQ1x1OEZEOVx1OTFDQ1x1N0I4MFx1NTMxNlx1NTkwNFx1NzQwNlxuICAgICAgICAgIHRoaXMucmVjcmVhdGVQcmV2aWV3KGNvbnRlbnQsIGNhcmQsIHsgaWQ6IHVuaXRJZCB9IGFzIENvbnRlbnRVbml0LCBsYXRlc3RDb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwIGluZGljYXRvclxuICAgICAgICBjb25zdCBpbmRpY2F0b3IgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWluZGljYXRvcicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBpZiAoaW5kaWNhdG9yICYmICFpbmRpY2F0b3IuY2xhc3NMaXN0LmNvbnRhaW5zKCdoYXMtYW5ub3RhdGlvbicpKSB7XG4gICAgICAgICAgaW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoJ2hhcy1hbm5vdGF0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCF0cmltbWVkVGV4dCAmJiBjYXJkKSB7XG4gICAgICBjb25zdCBpbmRpY2F0b3IgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWluZGljYXRvcicpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgaWYgKGluZGljYXRvciAmJiBpbmRpY2F0b3IuY2xhc3NMaXN0LmNvbnRhaW5zKCdoYXMtYW5ub3RhdGlvbicpKSB7XG4gICAgICAgIGluZGljYXRvci5jbGFzc0xpc3QucmVtb3ZlKCdoYXMtYW5ub3RhdGlvbicpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTkxQ0RcdTY1QjBcdTUyMUJcdTVFRkFcdTYyNzlcdTZDRThcdTk4ODRcdTg5QzhcbiAgICovXG4gIHByaXZhdGUgcmVjcmVhdGVQcmV2aWV3KFxuICAgIGNvbnRlbnRFbDogSFRNTEVsZW1lbnQsXG4gICAgY2FyZEVsOiBIVE1MRWxlbWVudCxcbiAgICB1bml0OiBDb250ZW50VW5pdCxcbiAgICBhbm5vdGF0aW9uVGV4dDogc3RyaW5nXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IGV4aXN0aW5nUHJldmlldyA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcuYW5ub3RhdGlvbi1wcmV2aWV3LCAuZ3JpZC1hbm5vdGF0aW9uJyk7XG4gICAgaWYgKGV4aXN0aW5nUHJldmlldykge1xuICAgICAgZXhpc3RpbmdQcmV2aWV3LnJlbW92ZSgpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBpc0dyaWRDYXJkID0gY2FyZEVsLmNsYXNzTGlzdC5jb250YWlucygnZ3JpZC1jYXJkJyk7XG4gICAgY29uc3QgYW5uRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhbm5FbC5jbGFzc05hbWUgPSBpc0dyaWRDYXJkID8gJ2dyaWQtYW5ub3RhdGlvbicgOiAnYW5ub3RhdGlvbi1wcmV2aWV3JztcbiAgICBcbiAgICBpZiAoaXNHcmlkQ2FyZCkge1xuICAgICAgYW5uRWwuaW5uZXJIVE1MID0gYDxzdHJvbmc+XHU2Mjc5XHU2Q0U4XHVGRjFBPC9zdHJvbmc+JHthbm5vdGF0aW9uVGV4dH1gO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXNwbGF5VGV4dCA9IGFubm90YXRpb25UZXh0Lmxlbmd0aCA+IDYwXG4gICAgICAgID8gYW5ub3RhdGlvblRleHQuc3Vic3RyaW5nKDAsIDYwKSArICcuLi4nXG4gICAgICAgIDogYW5ub3RhdGlvblRleHQ7XG4gICAgICBhbm5FbC50ZXh0Q29udGVudCA9IGBcdUQ4M0RcdURDQUMgJHtkaXNwbGF5VGV4dH1gO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcbiAgICBhbm5FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy50b2dnbGUoY2FyZEVsLCB1bml0KTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBUYWIgXHU5NTJFXHU0RThCXHU0RUY2XG4gICAgYW5uRWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdUYWInKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdGhpcy50b2dnbGUoY2FyZEVsLCB1bml0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBub3RlVGV4dCA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcubm90ZS10ZXh0LCAuZ3JpZC1ub3RlLXRleHQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAobm90ZVRleHQpIHtcbiAgICAgIG5vdGVUZXh0Lmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJlbmQnLCBhbm5FbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRlbnRFbC5hcHBlbmRDaGlsZChhbm5FbCk7XG4gICAgfVxuICAgIFxuICAgIGFubkVsLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgIGFubkVsLmZvY3VzKCk7XG4gIH1cblxuICAvKipcbiAgICogXHU1MTczXHU5NUVEXHU2MjQwXHU2NzA5XHU2RDNCXHU1MkE4XHU3Njg0XHU3RjE2XHU4RjkxXHU1NjY4XG4gICAqL1xuICBjbG9zZUFsbCgpOiB2b2lkIHtcbiAgICB0aGlzLmFjdGl2ZUVkaXRvcnMuZm9yRWFjaCgoZWRpdG9yKSA9PiB7XG4gICAgICBlZGl0b3IucmVtb3ZlKCk7XG4gICAgfSk7XG4gICAgdGhpcy5hY3RpdmVFZGl0b3JzLmNsZWFyKCk7XG4gIH1cbn0iLCAiLy8gcmV2aWV3Vmlldy50cyAtIFx1OTFDRFx1Njc4NFx1NzI0OFx1NjcyQ1xuaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi8uLi9tYWluJztcbmltcG9ydCB7IEZsYXNoY2FyZCB9IGZyb20gJy4uLy4uL2NvcmUvRmxhc2hjYXJkTWFuYWdlcic7XG5pbXBvcnQgeyBDYXJkU2NoZWR1bGVyLCBSZXZpZXdFYXNlIH0gZnJvbSAnLi4vLi4vY29yZS9DYXJkU2NoZWR1bGVyJztcbmltcG9ydCB7IEZsYXNoY2FyZEVkaXRNb2RhbCB9IGZyb20gJy4uL2NvbXBvbmVudHMvbW9kYWxzL0ZsYXNoY2FyZEVkaXRNb2RhbCc7XG5pbXBvcnQgeyBSZXZpZXdTdGF0ZU1hbmFnZXIsUmV2aWV3U3RhdGUgfSBmcm9tICcuLi9zdGF0ZS9yZXZpZXdTdGF0ZU1hbmFnZXInO1xuLy8gaW1wb3J0IHsgUmV2aWV3S2V5Ym9hcmRIYW5kbGVyIH0gZnJvbSAnLi9SZXZpZXdLZXlib2FyZEhhbmRsZXInO1xuaW1wb3J0IHsgVGFibGVSZW5kZXJlciB9IGZyb20gJy4uL2NvbXBvbmVudHMvVGFibGVSZW5kZXJlcic7XG5pbXBvcnQgeyBDYXJkUmVuZGVyZXJGYWN0b3J5IH0gZnJvbSAnLi4vY29tcG9uZW50cy9yZXZpZXdDYXJkUmVuZGVyJztcblxuaW1wb3J0IHsgcmV2aWV3U3R5bGUgfSBmcm9tICcuLi9zdHlsZS9yZXZpZXdTdHlsZSc7XG5leHBvcnQgY29uc3QgVklFV19UWVBFX1JFVklFVyA9ICdsZWFybmluZy1zeXN0ZW0tcmV2aWV3JztcblxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBcdTRFM0JcdTg5QzZcdTU2RkVcdTdDN0Jcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmV4cG9ydCBjbGFzcyBSZXZpZXdWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luO1xuICBwcml2YXRlIHNjaGVkdWxlcjogQ2FyZFNjaGVkdWxlcjtcbiAgcHJpdmF0ZSBkdWVDYXJkczogRmxhc2hjYXJkW10gPSBbXTtcbiAgcHJpdmF0ZSBjdXJyZW50Q2FyZEluZGV4OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIGN1cnJlbnRDYXJkOiBGbGFzaGNhcmQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdGF0ZU1hbmFnZXI6IFJldmlld1N0YXRlTWFuYWdlciA9IG5ldyBSZXZpZXdTdGF0ZU1hbmFnZXIoKTtcblxuICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luKSB7XG4gICAgc3VwZXIobGVhZik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy5zY2hlZHVsZXIgPSBuZXcgQ2FyZFNjaGVkdWxlcigpO1xuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gVklFV19UWVBFX1JFVklFVztcbiAgfVxuXG4gIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdGbGFzaGNhcmQgUmV2aWV3JztcbiAgfVxuXG4gIGdldEljb24oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ2xheWVycyc7XG4gIH1cblxuICBhc3luYyBvbk9wZW4oKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkRHVlQ2FyZHMoKTtcbiAgICByZXZpZXdTdHlsZS5pbmplY3QoKTtcbiAgICB0aGlzLnJlbmRlcigpO1xuICAgIHRoaXMucmVnaXN0ZXJLZXlib2FyZEhhbmRsZXJzKCk7XG4gIH1cblxuICBhc3luYyBvbkNsb3NlKCkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmtleWJvYXJkSGFuZGxlcik7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFx1NzJCNlx1NjAwMVx1N0JBMVx1NzQwNlxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICBwcml2YXRlIHJlc2V0UmV2aWV3U3RhdGUoKSB7XG4gICAgdGhpcy5zdGF0ZU1hbmFnZXIucmVzZXQoKTtcbiAgfVxuXG5wcml2YXRlIHVwZGF0ZUN1cnJlbnRDYXJkKCkge1xuICBjb25zdCBuZXdDYXJkID0gdGhpcy5kdWVDYXJkc1t0aGlzLmN1cnJlbnRDYXJkSW5kZXhdO1xuICBjb25zdCBpc1NhbWVDYXJkID0gdGhpcy5jdXJyZW50Q2FyZD8uaWQgPT09IG5ld0NhcmQ/LmlkO1xuICBcbiAgdGhpcy5zdGF0ZU1hbmFnZXIudXBkYXRlRm9yTmV3Q2FyZChuZXdDYXJkLCBpc1NhbWVDYXJkKTtcbiAgdGhpcy5jdXJyZW50Q2FyZCA9IG5ld0NhcmQ7XG59XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBcdTY1NzBcdTYzNkVcdTUyQTBcdThGN0RcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBwcml2YXRlIGFzeW5jIGxvYWREdWVDYXJkcygpIHtcbiAgICB0aGlzLmR1ZUNhcmRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXREdWVDYXJkcygpO1xuICAgIHRoaXMuY3VycmVudENhcmRJbmRleCA9IDA7XG4gICAgdGhpcy5yZXNldFJldmlld1N0YXRlKCk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFx1NkUzMlx1NjdEM1x1OTAzQlx1OEY5MVxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIHByaXZhdGUgcmVuZGVyKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG4gICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgY29udGFpbmVyLmFkZENsYXNzKCdyZXZpZXctY29udGFpbmVyJyk7XG5cbiAgICBpZiAodGhpcy5kdWVDYXJkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMucmVuZGVyTm9EdWVDYXJkcyhjb250YWluZXIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlQ3VycmVudENhcmQoKTtcbiAgICB0aGlzLnJlbmRlclByb2dyZXNzKGNvbnRhaW5lcik7XG4gICAgXG4gICAgY29uc3QgY2FyZEFyZWEgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1hcmVhJyB9KTtcbiAgICB0aGlzLnJlbmRlclRvcEFjdGlvbnMoY2FyZEFyZWEpO1xuICAgIFxuICAgIGlmICh0aGlzLnN0YXRlTWFuYWdlci5nZXRTdGF0ZSgpLnNob3dBbnN3ZXIpIHtcbiAgICAgIHRoaXMucmVuZGVyQW5zd2VyVmlldyhjYXJkQXJlYSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVuZGVyUXVlc3Rpb25WaWV3KGNhcmRBcmVhKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlck5vRHVlQ2FyZHMoY29udGFpbmVyOiBFbGVtZW50KSB7XG4gICAgY29uc3QgZW1wdHlTdGF0ZSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdlbXB0eS1zdGF0ZScgfSk7XG4gICAgZW1wdHlTdGF0ZS5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdUQ4M0NcdURGODkgQWxsIERvbmUhJyB9KTtcbiAgICBlbXB0eVN0YXRlLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnTm8gY2FyZHMgZHVlIGZvciByZXZpZXcgcmlnaHQgbm93LicgfSk7XG5cbiAgICBjb25zdCBzdGF0cyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0U3RhdHMoKTtcbiAgICBjb25zdCBzdGF0c0RpdiA9IGVtcHR5U3RhdGUuY3JlYXRlRGl2KHsgY2xzOiAnc3RhdHMtc3VtbWFyeScgfSk7XG4gICAgc3RhdHNEaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBUb3RhbCBjYXJkczogJHtzdGF0cy50b3RhbH1gIH0pO1xuICAgIHN0YXRzRGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgTmV3IGNhcmRzOiAke3N0YXRzLm5ld31gIH0pO1xuICAgIHN0YXRzRGl2LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgUmV2aWV3ZWQgdG9kYXk6ICR7c3RhdHMucmV2aWV3ZWRUb2RheX1gIH0pO1xuXG4gICAgY29uc3QgY2xvc2VCdG4gPSBlbXB0eVN0YXRlLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnQ2xvc2UgUmV2aWV3JyxcbiAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgfSk7XG4gICAgXG4gICAgY2xvc2VCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgIHRoaXMubGVhZj8uZGV0YWNoKCk7XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyUHJvZ3Jlc3MoY29udGFpbmVyOiBFbGVtZW50KSB7XG4gICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncHJvZ3Jlc3MtYmFyJyB9KTtcbiAgICBcbiAgICBjb25zdCBzdGF0cyA9IHByb2dyZXNzQmFyLmNyZWF0ZURpdih7IGNsczogJ3Byb2dyZXNzLXN0YXRzJyB9KTtcbiAgICBzdGF0cy5jcmVhdGVTcGFuKHsgXG4gICAgICB0ZXh0OiBgJHt0aGlzLmN1cnJlbnRDYXJkSW5kZXggKyAxfSAvICR7dGhpcy5kdWVDYXJkcy5sZW5ndGh9YCxcbiAgICAgIGNsczogJ3Byb2dyZXNzLXRleHQnXG4gICAgfSk7XG5cbiAgICBjb25zdCBiYXJDb250YWluZXIgPSBwcm9ncmVzc0Jhci5jcmVhdGVEaXYoeyBjbHM6ICdiYXItY29udGFpbmVyJyB9KTtcbiAgICBjb25zdCBiYXIgPSBiYXJDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnYmFyJyB9KTtcbiAgICBjb25zdCBwcm9ncmVzcyA9ICgodGhpcy5jdXJyZW50Q2FyZEluZGV4ICsgMSkgLyB0aGlzLmR1ZUNhcmRzLmxlbmd0aCkgKiAxMDA7XG4gICAgYmFyLnN0eWxlLndpZHRoID0gYCR7cHJvZ3Jlc3N9JWA7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclRvcEFjdGlvbnMoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IGFjdGlvbnNCYXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAndG9wLWFjdGlvbnMtYmFyJyB9KTtcblxuICAgIC8vIEp1bXAgdG8gU291cmNlIFx1NjMwOVx1OTRBRVxuICAgIGNvbnN0IGp1bXBCdG4gPSBhY3Rpb25zQmFyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICBjbHM6ICd0b3AtYWN0aW9uLWJ0biBqdW1wLWljb24tYnRuJyxcbiAgICAgIGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnSnVtcCB0byBTb3VyY2UnIH1cbiAgICB9KTtcbiAgICBqdW1wQnRuLmlubmVySFRNTCA9ICdcdTIxOTcnO1xuICAgIGp1bXBCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmp1bXBUb1NvdXJjZSgpKTtcblxuICAgIC8vIE1vcmUgXHU4M0RDXHU1MzU1XG4gICAgdGhpcy5yZW5kZXJNb3JlTWVudShhY3Rpb25zQmFyKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTW9yZU1lbnUoYWN0aW9uc0JhcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBtb3JlQnRuID0gYWN0aW9uc0Jhci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgY2xzOiAndG9wLWFjdGlvbi1idG4gbW9yZS1idG4nLFxuICAgICAgYXR0cjogeyAnYXJpYS1sYWJlbCc6ICdNb3JlIGFjdGlvbnMnIH1cbiAgICB9KTtcbiAgICBtb3JlQnRuLmlubmVySFRNTCA9ICdcdTIyRUYnO1xuICAgIFxuICAgIGNvbnN0IGRyb3Bkb3duID0gYWN0aW9uc0Jhci5jcmVhdGVEaXYoeyBjbHM6ICdtb3JlLWRyb3Bkb3duJyB9KTtcbiAgICBkcm9wZG93bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgLy8gXHU4M0RDXHU1MzU1XHU5ODc5XHU5MTREXHU3RjZFXG4gICAgY29uc3QgbWVudUl0ZW1zID0gW1xuICAgICAge1xuICAgICAgICBsYWJlbDogJ1x1MjcwRlx1RkUwRiBFZGl0IENhcmQnLFxuICAgICAgICBvbkNsaWNrOiAoKSA9PiB0aGlzLmVkaXRDdXJyZW50Rmxhc2hjYXJkKClcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGxhYmVsOiAnXHVEODNEXHVERDA0IFJlc2V0IENhcmQgU3RhdHMnLFxuICAgICAgICBvbkNsaWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuY3VycmVudENhcmQgJiYgY29uZmlybSgnXHU3ODZFXHU1QjlBXHU4OTgxXHU5MUNEXHU3RjZFXHU4RkQ5XHU1RjIwXHU1MzYxXHU3MjQ3XHU3Njg0XHU1QjY2XHU0RTYwXHU4RkRCXHU1RUE2XHU1NDE3XHVGRjFGJykpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVzZXRDYXJkU3RhdHModGhpcy5jdXJyZW50Q2FyZC5pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBsYWJlbDogJ1x1RDgzRFx1RENEQSBSZXNldCBEZWNrIFN0YXRzJyxcbiAgICAgICAgb25DbGljazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDYXJkKSB7XG4gICAgICAgICAgICBjb25zdCBkZWNrTmFtZSA9IHRoaXMuY3VycmVudENhcmQuZGVjaztcbiAgICAgICAgICAgIGlmIChjb25maXJtKGBcdTc4NkVcdTVCOUFcdTg5ODFcdTkxQ0RcdTdGNkVcdTUzNjFcdTdFQzRcIiR7ZGVja05hbWV9XCJcdTc2ODRcdTYyNDBcdTY3MDlcdTVCNjZcdTRFNjBcdThGREJcdTVFQTZcdTU0MTdcdUZGMUZgKSkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hbmFseXRpY3NFbmdpbmUuY2xlYXJEZWNrU3RhdHMoZGVja05hbWUpO1xuICAgICAgICAgICAgICBuZXcgTm90aWNlKGBcdTI3MDUgXHU1MzYxXHU3RUM0XCIke2RlY2tOYW1lfVwiXHU3Njg0XHU3RURGXHU4QkExXHU1REYyXHU5MUNEXHU3RjZFYCk7XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZER1ZUNhcmRzKCk7XG4gICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBsYWJlbDogJ1x1RDgzRFx1REREMVx1RkUwRiBEZWxldGUgQ2FyZCcsXG4gICAgICAgIG9uQ2xpY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2FyZCAmJiBjb25maXJtKCdcdTc4NkVcdTVCOUFcdTg5ODFcdTUyMjBcdTk2NjRcdThGRDlcdTVGMjBcdTk1RUFcdTUzNjFcdTU0MTdcdUZGMUYnKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5kZWxldGVGbGFzaGNhcmQodGhpcy5jdXJyZW50Q2FyZC5pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjbGFzc05hbWU6ICdkZWxldGUtaXRlbSdcbiAgICAgIH1cbiAgICBdO1xuXG4gICAgLy8gXHU1MjFCXHU1RUZBXHU4M0RDXHU1MzU1XHU5ODc5XG4gICAgbWVudUl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBjb25zdCBtZW51SXRlbSA9IGRyb3Bkb3duLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgIGNsczogYGRyb3Bkb3duLWl0ZW0gJHtpdGVtLmNsYXNzTmFtZSB8fCAnJ31gXG4gICAgICB9KTtcbiAgICAgIG1lbnVJdGVtLmlubmVySFRNTCA9IGl0ZW0ubGFiZWw7XG4gICAgICBtZW51SXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgaXRlbS5vbkNsaWNrKCk7XG4gICAgICAgIGRyb3Bkb3duLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIFx1NTIwN1x1NjM2Mlx1NEUwQlx1NjJDOVx1ODNEQ1x1NTM1NVxuICAgIG1vcmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGRyb3Bkb3duLnN0eWxlLmRpc3BsYXkgPSBkcm9wZG93bi5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgPyAnYmxvY2snIDogJ25vbmUnO1xuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBkcm9wZG93bi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH0pO1xuXG4gICAgZHJvcGRvd24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyUXVlc3Rpb25WaWV3KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAoIXRoaXMuY3VycmVudENhcmQpIHJldHVybjtcblxuICAgIC8vIFx1NTM2MVx1NzI0N1x1NEZFMVx1NjA2RlxuICAgIHRoaXMucmVuZGVyQ2FyZEluZm8oY29udGFpbmVyKTtcblxuICAgIC8vIFx1OTVFRVx1OTg5OFx1NTMzQVx1NTdERlxuICAgIGNvbnN0IHF1ZXN0aW9uQXJlYSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdxdWVzdGlvbi1hcmVhJyB9KTtcbiAgICBxdWVzdGlvbkFyZWEuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnUXVlc3Rpb24nIH0pO1xuXG4gICAgLy8gXHU0RjdGXHU3NTI4XHU3QjU2XHU3NTY1XHU2QTIxXHU1RjBGXHU2RTMyXHU2N0QzXG4gICAgY29uc3QgcmVuZGVyZXIgPSBDYXJkUmVuZGVyZXJGYWN0b3J5LmdldFJlbmRlcmVyKHRoaXMuY3VycmVudENhcmQudHlwZSk7XG4gICAgcmVuZGVyZXIucmVuZGVyUXVlc3Rpb24ocXVlc3Rpb25BcmVhLCB0aGlzLmN1cnJlbnRDYXJkLCB0aGlzLnN0YXRlTWFuYWdlci5nZXRTdGF0ZSgpKTtcblxuICAgIC8vIFx1NjYzRVx1NzkzQVx1N0I1NFx1Njg0OFx1NjMwOVx1OTRBRVxuICAgIHRoaXMucmVuZGVyU2hvd0Fuc3dlckJ1dHRvbihjb250YWluZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJBbnN3ZXJWaWV3KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAoIXRoaXMuY3VycmVudENhcmQpIHJldHVybjtcblxuICAgIC8vIFx1NTM2MVx1NzI0N1x1NEZFMVx1NjA2RlxuICAgIHRoaXMucmVuZGVyQ2FyZEluZm8oY29udGFpbmVyKTtcblxuICAgIC8vIFx1OTVFRVx1OTg5OFx1NTZERVx1OTg3RVxuICAgIHRoaXMucmVuZGVyUXVlc3Rpb25SZXZpZXcoY29udGFpbmVyKTtcblxuICAgIC8vIFx1NEY3Rlx1NzUyOFx1N0I1Nlx1NzU2NVx1NkEyMVx1NUYwRlx1NkUzMlx1NjdEM1x1N0I1NFx1Njg0OFxuICAgIGNvbnN0IHJlbmRlcmVyID0gQ2FyZFJlbmRlcmVyRmFjdG9yeS5nZXRSZW5kZXJlcih0aGlzLmN1cnJlbnRDYXJkLnR5cGUpO1xuICAgIHJlbmRlcmVyLnJlbmRlckFuc3dlcihjb250YWluZXIsIHRoaXMuY3VycmVudENhcmQsIHRoaXMuc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCksIHRoaXMuc2NoZWR1bGVyKTtcblxuICAgIC8vIFx1OEJDNFx1N0VBN1x1NjMwOVx1OTRBRVxuICAgIHRoaXMucmVuZGVyUmF0aW5nQnV0dG9ucyhjb250YWluZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJDYXJkSW5mbyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRDYXJkKSByZXR1cm47XG5cbiAgICBjb25zdCBjYXJkSW5mbyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLWluZm8nIH0pO1xuICAgIGNhcmRJbmZvLmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IHRoaXMuY3VycmVudENhcmQudHlwZSA9PT0gJ3FhJyA/ICdcdUQ4M0RcdURDREQgUSZBJyA6ICdcdTI3MEZcdUZFMEYgQ2xvemUnLFxuICAgICAgY2xzOiAnY2FyZC10eXBlJ1xuICAgIH0pO1xuICAgIGNhcmRJbmZvLmNyZWF0ZVNwYW4oeyBcbiAgICAgIHRleHQ6IGBEZWNrOiAke3RoaXMuY3VycmVudENhcmQuZGVja31gLFxuICAgICAgY2xzOiAnY2FyZC1kZWNrJ1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJRdWVzdGlvblJldmlldyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRDYXJkKSByZXR1cm47XG5cbiAgICBjb25zdCBxdWVzdGlvblJldmlldyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdxdWVzdGlvbi1yZXZpZXcnIH0pO1xuICAgIHF1ZXN0aW9uUmV2aWV3LmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1F1ZXN0aW9uOicgfSk7XG5cbiAgICBjb25zdCByZXZpZXdUZXh0RGl2ID0gcXVlc3Rpb25SZXZpZXcuY3JlYXRlRGl2KHsgY2xzOiAncmV2aWV3LXRleHQnIH0pO1xuICAgIGNvbnN0IGlzUXVlc3Rpb25UYWJsZSA9IFRhYmxlUmVuZGVyZXIuaXNUYWJsZUZvcm1hdCh0aGlzLmN1cnJlbnRDYXJkLmZyb250KTtcbiAgICBcbiAgICBpZiAoaXNRdWVzdGlvblRhYmxlKSB7XG4gICAgICBjb25zdCB0YWJsZUVsID0gVGFibGVSZW5kZXJlci5yZW5kZXJUYWJsZSh0aGlzLmN1cnJlbnRDYXJkLmZyb250LCBmYWxzZSk7XG4gICAgICByZXZpZXdUZXh0RGl2LmFwcGVuZENoaWxkKHRhYmxlRWwpO1xuICAgICAgcmV2aWV3VGV4dERpdi5jbGFzc0xpc3QuYWRkKCd0YWJsZS1xdWVzdGlvbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXZpZXdUZXh0RGl2LnRleHRDb250ZW50ID0gdGhpcy5jdXJyZW50Q2FyZC5mcm9udDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclNob3dBbnN3ZXJCdXR0b24oY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IGJ1dHRvbkFyZWEgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnYnV0dG9uLWFyZWEnIH0pO1xuICAgIGNvbnN0IHNob3dBbnN3ZXJCdG4gPSBidXR0b25BcmVhLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICB0ZXh0OiAnU2hvdyBBbnN3ZXInLFxuICAgICAgY2xzOiAnbW9kLWN0YSBzaG93LWFuc3dlci1idG4nLFxuICAgICAgYXR0cjogeyB0aXRsZTogJ1ByZXNzIEVudGVyIG9yIFRhYicgfVxuICAgIH0pO1xuICAgIHNob3dBbnN3ZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLnN0YXRlTWFuYWdlci5zZXRTaG93QW5zd2VyKHRydWUpO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyUmF0aW5nQnV0dG9ucyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29uc3QgcmF0aW5nQXJlYSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdyYXRpbmctYXJlYScgfSk7XG4gICAgY29uc3QgYnV0dG9uR3JvdXAgPSByYXRpbmdBcmVhLmNyZWF0ZURpdih7IGNsczogJ3JhdGluZy1idXR0b25zJyB9KTtcblxuICAgIGNvbnN0IHJhdGluZ3M6IEFycmF5PHtcbiAgICAgIGVhc2U6IFJldmlld0Vhc2U7XG4gICAgICBsYWJlbDogc3RyaW5nO1xuICAgICAgY29sb3I6IHN0cmluZztcbiAgICAgIGtleTogc3RyaW5nO1xuICAgIH0+ID0gW1xuICAgICAgeyBlYXNlOiAnYWdhaW4nLCBsYWJlbDogJ0FnYWluXFxuIDwgMSBtaW4nLCBjb2xvcjogJ3JlZCcsIGtleTogJzEnIH0sXG4gICAgICB7IGVhc2U6ICdoYXJkJywgbGFiZWw6ICdIYXJkXFxuIDwgMTAgbWluJywgY29sb3I6ICdvcmFuZ2UnLCBrZXk6ICcyJyB9LFxuICAgICAgeyBlYXNlOiAnZ29vZCcsIGxhYmVsOiAnR29vZFxcbiAxIGRheScsIGNvbG9yOiAnYmx1ZScsIGtleTogJzMnIH0sXG4gICAgICB7IGVhc2U6ICdlYXN5JywgbGFiZWw6ICdFYXN5XFxuIDQgZGF5cycsIGNvbG9yOiAnZ3JlZW4nLCBrZXk6ICc0JyB9XG4gICAgXTtcblxuICAgIHJhdGluZ3MuZm9yRWFjaCgoeyBlYXNlLCBsYWJlbCwgY29sb3IsIGtleSB9KSA9PiB7XG4gICAgICBjb25zdCBidG4gPSBidXR0b25Hcm91cC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICBjbHM6IGByYXRpbmctYnRuIHJhdGluZy0ke2NvbG9yfWAsXG4gICAgICAgIGF0dHI6IHsgdGl0bGU6IGBQcmVzcyAke2tleX1gIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBsaW5lcyA9IGxhYmVsLnNwbGl0KCdcXG4nKTtcbiAgICAgIGJ0bi5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBsaW5lc1swXSwgY2xzOiAncmF0aW5nLWxhYmVsJyB9KTtcbiAgICAgIGJ0bi5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBsaW5lc1sxXSwgY2xzOiAncmF0aW5nLWludGVydmFsJyB9KTtcbiAgICAgIGJ0bi5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiBgKCR7a2V5fSlgLCBjbHM6ICdyYXRpbmctaG90a2V5JyB9KTtcblxuICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5zdWJtaXRSZXZpZXcoZWFzZSkpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBcdTRFQTRcdTRFOTJcdTU5MDRcdTc0MDZcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBwcml2YXRlIGFzeW5jIHN1Ym1pdFJldmlldyhlYXNlOiBSZXZpZXdFYXNlKSB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRDYXJkKSByZXR1cm47XG5cbiAgICBjb25zdCB0aW1lU3BlbnQgPSAoRGF0ZS5ub3coKSAtIHRoaXMuc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCkuc3RhcnRUaW1lKSAvIDEwMDA7XG5cbiAgICBjb25zdCB1c2VyQW5zd2VyID0gdGhpcy5jdXJyZW50Q2FyZC50eXBlID09PSAnY2xvemUnIFxuICAgICAgPyB0aGlzLnN0YXRlTWFuYWdlci5nZXRTdGF0ZSgpLnVzZXJBbnN3ZXJzIFxuICAgICAgOiB0aGlzLmN1cnJlbnRDYXJkLnR5cGUgPT09ICdxYSdcbiAgICAgID8gdGhpcy5zdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoKS51c2VyQW5zd2VyXG4gICAgICA6IHVuZGVmaW5lZDtcblxuICAgIGNvbnN0IHsgdXBkYXRlZENhcmQsIHJldmlld0xvZyB9ID0gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoXG4gICAgICB0aGlzLmN1cnJlbnRDYXJkLFxuICAgICAgZWFzZSxcbiAgICAgIHRpbWVTcGVudCxcbiAgICAgIHVzZXJBbnN3ZXJcbiAgICApO1xuXG4gICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci51cGRhdGVDYXJkKHVwZGF0ZWRDYXJkKTtcbiAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmxvZ1Jldmlldyh7XG4gICAgICBpZDogYGxvZy0ke0RhdGUubm93KCl9YCxcbiAgICAgIC4uLnJldmlld0xvZ1xuICAgIH0pO1xuXG4gICAgdGhpcy5jdXJyZW50Q2FyZEluZGV4Kys7XG4gICAgdGhpcy5yZXNldFJldmlld1N0YXRlKCk7XG5cbiAgICBpZiAodGhpcy5jdXJyZW50Q2FyZEluZGV4ID49IHRoaXMuZHVlQ2FyZHMubGVuZ3RoKSB7XG4gICAgICBuZXcgTm90aWNlKGBcdTI3MDUgUmV2aWV3IHNlc3Npb24gY29tcGxldGUhIFJldmlld2VkICR7dGhpcy5kdWVDYXJkcy5sZW5ndGh9IGNhcmRzLmApO1xuICAgICAgYXdhaXQgdGhpcy5sb2FkRHVlQ2FyZHMoKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBqdW1wVG9Tb3VyY2UoKSB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRDYXJkKSByZXR1cm47XG5cbiAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMuY3VycmVudENhcmQuc291cmNlRmlsZSk7XG4gICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuICAgICAgbmV3IE5vdGljZSgnU291cmNlIGZpbGUgbm90IGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY29udGVudFVuaXQgPSB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChcbiAgICAgIHRoaXMuY3VycmVudENhcmQuc291cmNlQ29udGVudElkXG4gICAgKTtcblxuICAgIGlmICghY29udGVudFVuaXQpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1NvdXJjZSBjb250ZW50IG5vdCBmb3VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XG4gICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKEl0ZW1WaWV3KTtcbiAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgIGNvbnN0IGVkaXRvciA9ICh2aWV3IGFzIGFueSkuZWRpdG9yO1xuICAgICAgICBpZiAoZWRpdG9yKSB7XG4gICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IGNvbnRlbnRVbml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogMCB9KTtcbiAgICAgICAgICBlZGl0b3Iuc2Nyb2xsSW50b1ZpZXcoe1xuICAgICAgICAgICAgZnJvbTogeyBsaW5lOiBjb250ZW50VW5pdC5zb3VyY2UucG9zaXRpb24ubGluZSwgY2g6IDAgfSxcbiAgICAgICAgICAgIHRvOiB7IGxpbmU6IGNvbnRlbnRVbml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogMCB9XG4gICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCAxMDApO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkZWxldGVGbGFzaGNhcmQoY2FyZElkOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5kZWxldGVDYXJkKGNhcmRJZCk7XG4gICAgICBuZXcgTm90aWNlKCdcdUQ4M0RcdURERDFcdUZFMEYgXHU5NUVBXHU1MzYxXHU1REYyXHU1MjIwXHU5NjY0Jyk7XG4gICAgICBcbiAgICAgIHRoaXMuZHVlQ2FyZHMgPSB0aGlzLmR1ZUNhcmRzLmZpbHRlcihjYXJkID0+IGNhcmQuaWQgIT09IGNhcmRJZCk7XG4gICAgICBcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRDYXJkPy5pZCA9PT0gY2FyZElkKSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRDYXJkSW5kZXggPj0gdGhpcy5kdWVDYXJkcy5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRDYXJkSW5kZXggPSBNYXRoLm1heCgwLCB0aGlzLmR1ZUNhcmRzLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudENhcmQgPSBudWxsO1xuICAgICAgfVxuICAgICAgXG4gICAgICBhd2FpdCB0aGlzLmxvYWREdWVDYXJkcygpO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgZmxhc2hjYXJkOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBcdTUyMjBcdTk2NjRcdTk1RUFcdTUzNjFcdTU5MzFcdThEMjUnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVkaXRDdXJyZW50Rmxhc2hjYXJkKCkge1xuICAgIGlmICghdGhpcy5jdXJyZW50Q2FyZCkgcmV0dXJuO1xuXG4gICAgY29uc3QgbW9kYWwgPSBuZXcgRmxhc2hjYXJkRWRpdE1vZGFsKFxuICAgICAgdGhpcy5hcHAsXG4gICAgICB0aGlzLmN1cnJlbnRDYXJkLFxuICAgICAgYXN5bmMgKHF1ZXN0aW9uOiBzdHJpbmcsIGFuc3dlcjogc3RyaW5nKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgdXBkYXRlZENhcmQ6IEZsYXNoY2FyZCA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuY3VycmVudENhcmQhLFxuICAgICAgICAgICAgZnJvbnQ6IHF1ZXN0aW9uLFxuICAgICAgICAgICAgYmFjazogdGhpcy5jdXJyZW50Q2FyZCEudHlwZSA9PT0gJ2Nsb3plJyA/IFthbnN3ZXJdIDogYW5zd2VyLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgLi4udGhpcy5jdXJyZW50Q2FyZCEubWV0YWRhdGEsXG4gICAgICAgICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci51cGRhdGVDYXJkKHVwZGF0ZWRDYXJkKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3MDUgXHU5NUVBXHU1MzYxXHU1REYyXHU2NkY0XHU2NUIwJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgdGhpcy5jdXJyZW50Q2FyZCA9IHVwZGF0ZWRDYXJkO1xuICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZmxhc2hjYXJkOicsIGVycm9yKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgXHU2NkY0XHU2NUIwXHU5NUVBXHU1MzYxXHU1OTMxXHU4RDI1Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICAgIG1vZGFsLm9wZW4oKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmVzZXRDYXJkU3RhdHMoY2FyZElkOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY2FyZCA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0Rmxhc2hjYXJkKGNhcmRJZCk7XG4gICAgICBpZiAoIWNhcmQpIHJldHVybjtcblxuICAgICAgY2FyZC5zdGF0cyA9IHtcbiAgICAgICAgdG90YWxSZXZpZXdzOiAwLFxuICAgICAgICBjb3JyZWN0Q291bnQ6IDAsXG4gICAgICAgIGF2ZXJhZ2VUaW1lOiAwLFxuICAgICAgICBsYXN0UmV2aWV3OiAwLFxuICAgICAgICBkaWZmaWN1bHR5OiAwLjNcbiAgICAgIH07XG4gICAgICBjYXJkLnNjaGVkdWxpbmcgPSB7XG4gICAgICAgIGludGVydmFsOiAwLFxuICAgICAgICBlYXNlOiAyLjUsXG4gICAgICAgIGR1ZTogRGF0ZS5ub3coKSxcbiAgICAgICAgbGFwc2VzOiAwLFxuICAgICAgICByZXBzOiAwLFxuICAgICAgICBzdGF0ZTogJ25ldydcbiAgICAgIH07XG5cbiAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIudXBkYXRlQ2FyZChjYXJkKTtcbiAgICAgIFxuICAgICAgY29uc3QgbG9ncyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXJbJ3Jldmlld0xvZ3MnXSB8fCBbXTtcbiAgICAgIHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXJbJ3Jldmlld0xvZ3MnXSA9IGxvZ3MuZmlsdGVyKFxuICAgICAgICBsb2cgPT4gbG9nLmZsYXNoY2FyZElkICE9PSBjYXJkSWRcbiAgICAgICk7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5zYXZlKCk7XG4gICAgICBcbiAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBcdTUzNjFcdTcyNDdcdTdFREZcdThCQTFcdTVERjJcdTkxQ0RcdTdGNkUnKTtcbiAgICAgIHRoaXMuY3VycmVudENhcmQgPSBjYXJkO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVzZXR0aW5nIGNhcmQgc3RhdHM6JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIFx1OTFDRFx1N0Y2RVx1N0VERlx1OEJBMVx1NTkzMVx1OEQyNScpO1xuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gXHU5NTJFXHU3NkQ4XHU1OTA0XHU3NDA2XG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgcHJpdmF0ZSBrZXlib2FyZEhhbmRsZXIgPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgIGNvbnN0IGlzSW5JbnB1dCA9IHRhcmdldC50YWdOYW1lID09PSAnSU5QVVQnIHx8IHRhcmdldC50YWdOYW1lID09PSAnVEVYVEFSRUEnO1xuXG4gICAgLy8gVGFiIFx1OTUyRVx1NTkwNFx1NzQwNlxuICAgIGlmIChlLmtleSA9PT0gJ1RhYicpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIFxuICAgICAgaWYgKGUuc2hpZnRLZXkpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGVNYW5hZ2VyLmdldFN0YXRlKCkuc2hvd0Fuc3dlcikge1xuICAgICAgICAgIHRoaXMucmVzZXRSZXZpZXdTdGF0ZSgpO1xuICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoKS5zaG93QW5zd2VyKSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoKS5zaG93QW5zd2VyID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc3VibWl0UmV2aWV3KCdnb29kJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBcdTY1NzBcdTVCNTdcdTk1MkVcdThCQzRcdTUyMDZcbiAgICBpZiAodGhpcy5zdGF0ZU1hbmFnZXIuZ2V0U3RhdGUoKS5zaG93QW5zd2VyICYmICFpc0luSW5wdXQpIHtcbiAgICAgIGNvbnN0IHJhdGluZ01hcDogeyBba2V5OiBzdHJpbmddOiBSZXZpZXdFYXNlIH0gPSB7XG4gICAgICAgICcxJzogJ2FnYWluJyxcbiAgICAgICAgJzInOiAnaGFyZCcsXG4gICAgICAgICczJzogJ2dvb2QnLFxuICAgICAgICAnNCc6ICdlYXN5J1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgaWYgKHJhdGluZ01hcFtlLmtleV0pIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnN1Ym1pdFJldmlldyhyYXRpbmdNYXBbZS5rZXldKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSByZWdpc3RlcktleWJvYXJkSGFuZGxlcnMoKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMua2V5Ym9hcmRIYW5kbGVyKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gXHU2ODM3XHU1RjBGXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG59IiwgIi8vIGNhcmQgU2NoZWR1bGVyLnRzXG5pbXBvcnQgeyBGbGFzaGNhcmQsIFJldmlld0xvZyB9IGZyb20gJy4vRmxhc2hjYXJkTWFuYWdlcic7XG5cbmV4cG9ydCB0eXBlIFJldmlld0Vhc2UgPSAnYWdhaW4nIHwgJ2hhcmQnIHwgJ2dvb2QnIHwgJ2Vhc3knO1xuXG5leHBvcnQgY2xhc3MgQ2FyZFNjaGVkdWxlciB7XG4gIC8qKlxuICAgKiBcdThCQTFcdTdCOTdcdTRFMEJcdTZCMjFcdTU5MERcdTRFNjBcdTY1RjZcdTk1RjRcdUZGMDhcdTU3RkFcdTRFOEUgU00tMiBcdTdCOTdcdTZDRDVcdUZGMDlcbiAgICovXG4gIHNjaGVkdWxlKFxuICAgIGNhcmQ6IEZsYXNoY2FyZCxcbiAgICBlYXNlOiBSZXZpZXdFYXNlLFxuICAgIHRpbWVTcGVudDogbnVtYmVyLFxuICAgIHVzZXJBbnN3ZXI/OiBzdHJpbmcgfCBzdHJpbmdbXVxuICApOiB7XG4gICAgdXBkYXRlZENhcmQ6IEZsYXNoY2FyZDtcbiAgICByZXZpZXdMb2c6IE9taXQ8UmV2aWV3TG9nLCAnaWQnPjtcbiAgfSB7XG4gICAgY29uc3Qgb2xkU2NoZWR1bGluZyA9IHsgLi4uY2FyZC5zY2hlZHVsaW5nIH07XG4gICAgY29uc3QgbmV3U2NoZWR1bGluZyA9IHsgLi4uY2FyZC5zY2hlZHVsaW5nIH07XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblxuICAgIC8vIFx1NjZGNFx1NjVCMFx1N0VERlx1OEJBMVxuICAgIGNhcmQuc3RhdHMudG90YWxSZXZpZXdzKys7XG4gICAgY2FyZC5zdGF0cy5sYXN0UmV2aWV3ID0gbm93O1xuXG4gICAgLy8gXHU4QkExXHU3Qjk3XHU1RTczXHU1NzQ3XHU2NUY2XHU5NUY0XG4gICAgY29uc3QgdG90YWxUaW1lID0gY2FyZC5zdGF0cy5hdmVyYWdlVGltZSAqIChjYXJkLnN0YXRzLnRvdGFsUmV2aWV3cyAtIDEpICsgdGltZVNwZW50O1xuICAgIGNhcmQuc3RhdHMuYXZlcmFnZVRpbWUgPSB0b3RhbFRpbWUgLyBjYXJkLnN0YXRzLnRvdGFsUmV2aWV3cztcblxuICAgIC8vIFx1NjgzOVx1NjM2RVx1OTZCRVx1NUVBNlx1OEJDNFx1N0VBN1x1NjZGNFx1NjVCMFx1OEMwM1x1NUVBNlxuICAgIHN3aXRjaCAoZWFzZSkge1xuICAgICAgY2FzZSAnYWdhaW4nOlxuICAgICAgICB0aGlzLnNjaGVkdWxlQWdhaW4obmV3U2NoZWR1bGluZywgY2FyZC5zdGF0cyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaGFyZCc6XG4gICAgICAgIHRoaXMuc2NoZWR1bGVIYXJkKG5ld1NjaGVkdWxpbmcsIGNhcmQuc3RhdHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2dvb2QnOlxuICAgICAgICB0aGlzLnNjaGVkdWxlR29vZChuZXdTY2hlZHVsaW5nLCBjYXJkLnN0YXRzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdlYXN5JzpcbiAgICAgICAgdGhpcy5zY2hlZHVsZUVhc3kobmV3U2NoZWR1bGluZywgY2FyZC5zdGF0cyk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGNhcmQuc2NoZWR1bGluZyA9IG5ld1NjaGVkdWxpbmc7XG4gICAgY2FyZC5tZXRhZGF0YS51cGRhdGVkQXQgPSBub3c7XG5cbiAgICAvLyBcdTUyMUJcdTVFRkFcdTU5MERcdTRFNjBcdTY1RTVcdTVGRDdcbiAgICBjb25zdCByZXZpZXdMb2c6IE9taXQ8UmV2aWV3TG9nLCAnaWQnPiA9IHtcbiAgICAgIGZsYXNoY2FyZElkOiBjYXJkLmlkLFxuICAgICAgdGltZXN0YW1wOiBub3csXG4gICAgICByZXNwb25zZToge1xuICAgICAgICB1c2VyQW5zd2VyLFxuICAgICAgICB0aW1lU3BlbnQsXG4gICAgICAgIGVhc2VcbiAgICAgIH0sXG4gICAgICBzY2hlZHVsaW5nQ2hhbmdlOiB7XG4gICAgICAgIG9sZEludGVydmFsOiBvbGRTY2hlZHVsaW5nLmludGVydmFsLFxuICAgICAgICBuZXdJbnRlcnZhbDogbmV3U2NoZWR1bGluZy5pbnRlcnZhbCxcbiAgICAgICAgb2xkRWFzZTogb2xkU2NoZWR1bGluZy5lYXNlLFxuICAgICAgICBuZXdFYXNlOiBuZXdTY2hlZHVsaW5nLmVhc2VcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHsgdXBkYXRlZENhcmQ6IGNhcmQsIHJldmlld0xvZyB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEFnYWluIC0gXHU1QjhDXHU1MTY4XHU1RkQ4XHU4QkIwXG4gICAqL1xuICBwcml2YXRlIHNjaGVkdWxlQWdhaW4oXG4gICAgc2NoZWR1bGluZzogRmxhc2hjYXJkWydzY2hlZHVsaW5nJ10sXG4gICAgc3RhdHM6IEZsYXNoY2FyZFsnc3RhdHMnXVxuICApIHtcbiAgICAvLyBcdTkxQ0RcdTdGNkVcdTk1RjRcdTk2OTRcbiAgICBzY2hlZHVsaW5nLmludGVydmFsID0gMTsgLy8gMSBcdTUyMDZcdTk0OUZcbiAgICBzY2hlZHVsaW5nLmVhc2UgPSBNYXRoLm1heCgxLjMsIHNjaGVkdWxpbmcuZWFzZSAtIDAuMik7XG4gICAgc2NoZWR1bGluZy5kdWUgPSBEYXRlLm5vdygpICsgc2NoZWR1bGluZy5pbnRlcnZhbCAqIDYwICogMTAwMDtcbiAgICBzY2hlZHVsaW5nLmxhcHNlcysrO1xuICAgIHNjaGVkdWxpbmcucmVwcysrO1xuICAgIFxuICAgIC8vIFx1NzJCNlx1NjAwMVx1OEY2Q1x1NjM2MlxuICAgIGlmIChzY2hlZHVsaW5nLnN0YXRlID09PSAnbmV3Jykge1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdsZWFybmluZyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjaGVkdWxpbmcuc3RhdGUgPSAncmVsZWFybmluZyc7XG4gICAgfVxuXG4gICAgLy8gXHU1ODlFXHU1MkEwXHU5NkJFXHU1RUE2XG4gICAgc3RhdHMuZGlmZmljdWx0eSA9IE1hdGgubWluKDEuMCwgc3RhdHMuZGlmZmljdWx0eSArIDAuMSk7XG4gIH1cblxuICAvKipcbiAgICogSGFyZCAtIFx1NTZGMFx1OTZCRVxuICAgKi9cbiAgcHJpdmF0ZSBzY2hlZHVsZUhhcmQoXG4gICAgc2NoZWR1bGluZzogRmxhc2hjYXJkWydzY2hlZHVsaW5nJ10sXG4gICAgc3RhdHM6IEZsYXNoY2FyZFsnc3RhdHMnXVxuICApIHtcbiAgICBzY2hlZHVsaW5nLnJlcHMrKztcblxuICAgIGlmIChzY2hlZHVsaW5nLnN0YXRlID09PSAnbmV3JyB8fCBzY2hlZHVsaW5nLnN0YXRlID09PSAnbGVhcm5pbmcnKSB7XG4gICAgICAvLyBcdTVCNjZcdTRFNjBcdTk2MzZcdTZCQjVcdUZGMUExMCBcdTUyMDZcdTk0OUZcbiAgICAgIHNjaGVkdWxpbmcuaW50ZXJ2YWwgPSAxMDtcbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIDEwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdsZWFybmluZyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NTkwRFx1NEU2MFx1OTYzNlx1NkJCNVx1RkYxQVx1NUY1M1x1NTI0RFx1OTVGNFx1OTY5NCAqIDEuMlxuICAgICAgc2NoZWR1bGluZy5pbnRlcnZhbCA9IE1hdGgubWF4KDEsIHNjaGVkdWxpbmcuaW50ZXJ2YWwgKiAxLjIpO1xuICAgICAgc2NoZWR1bGluZy5lYXNlID0gTWF0aC5tYXgoMS4zLCBzY2hlZHVsaW5nLmVhc2UgLSAwLjE1KTtcbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIHNjaGVkdWxpbmcuaW50ZXJ2YWwgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdyZXZpZXcnO1xuICAgIH1cblxuICAgIHN0YXRzLmRpZmZpY3VsdHkgPSBNYXRoLm1pbigxLjAsIHN0YXRzLmRpZmZpY3VsdHkgKyAwLjA1KTtcbiAgICBzdGF0cy5jb3JyZWN0Q291bnQgKz0gMC41OyAvLyBcdTkwRThcdTUyMDZcdTZCNjNcdTc4NkVcbiAgfVxuXG4gIC8qKlxuICAgKiBHb29kIC0gXHU2QjYzXHU3ODZFXG4gICAqL1xuICBwcml2YXRlIHNjaGVkdWxlR29vZChcbiAgICBzY2hlZHVsaW5nOiBGbGFzaGNhcmRbJ3NjaGVkdWxpbmcnXSxcbiAgICBzdGF0czogRmxhc2hjYXJkWydzdGF0cyddXG4gICkge1xuICAgIHNjaGVkdWxpbmcucmVwcysrO1xuICAgIHN0YXRzLmNvcnJlY3RDb3VudCsrO1xuXG4gICAgaWYgKHNjaGVkdWxpbmcuc3RhdGUgPT09ICduZXcnKSB7XG4gICAgICAvLyBcdTY1QjBcdTUzNjFcdTcyNDdcdUZGMUExIFx1NTkyOVxuICAgICAgc2NoZWR1bGluZy5pbnRlcnZhbCA9IDE7XG4gICAgICBzY2hlZHVsaW5nLmR1ZSA9IERhdGUubm93KCkgKyAxICogMjQgKiA2MCAqIDYwICogMTAwMDtcbiAgICAgIHNjaGVkdWxpbmcuc3RhdGUgPSAnbGVhcm5pbmcnO1xuICAgIH0gZWxzZSBpZiAoc2NoZWR1bGluZy5zdGF0ZSA9PT0gJ2xlYXJuaW5nJykge1xuICAgICAgLy8gXHU1QjY2XHU0RTYwXHU0RTJEXHVGRjFBXHU4RkRCXHU1MTY1XHU1OTBEXHU0RTYwXHVGRjBDXHU5NUY0XHU5Njk0XHU2ODM5XHU2MzZFXHU4QkIwXHU1RkM2XHU1RjNBXHU1RUE2XG4gICAgICBpZiAoc2NoZWR1bGluZy5pbnRlcnZhbCA8IDEpIHtcbiAgICAgICAgc2NoZWR1bGluZy5pbnRlcnZhbCA9IDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzY2hlZHVsaW5nLmludGVydmFsID0gMztcbiAgICAgIH1cbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIHNjaGVkdWxpbmcuaW50ZXJ2YWwgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdyZXZpZXcnO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBcdTU5MERcdTRFNjBcdTk2MzZcdTZCQjVcdUZGMUFcdTk1RjRcdTk2OTQgKiBlYXNlXG4gICAgICBzY2hlZHVsaW5nLmludGVydmFsID0gc2NoZWR1bGluZy5pbnRlcnZhbCAqIHNjaGVkdWxpbmcuZWFzZTtcbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIHNjaGVkdWxpbmcuaW50ZXJ2YWwgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5lYXNlID0gc2NoZWR1bGluZy5lYXNlICsgMC4xO1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdyZXZpZXcnO1xuICAgIH1cblxuICAgIC8vIFx1OTY0RFx1NEY0RVx1OTZCRVx1NUVBNlxuICAgIHN0YXRzLmRpZmZpY3VsdHkgPSBNYXRoLm1heCgwLCBzdGF0cy5kaWZmaWN1bHR5IC0gMC4wNSk7XG4gIH1cblxuICAvKipcbiAgICogRWFzeSAtIFx1OTc1RVx1NUUzOFx1N0I4MFx1NTM1NVxuICAgKi9cbiAgcHJpdmF0ZSBzY2hlZHVsZUVhc3koXG4gICAgc2NoZWR1bGluZzogRmxhc2hjYXJkWydzY2hlZHVsaW5nJ10sXG4gICAgc3RhdHM6IEZsYXNoY2FyZFsnc3RhdHMnXVxuICApIHtcbiAgICBzY2hlZHVsaW5nLnJlcHMrKztcbiAgICBzdGF0cy5jb3JyZWN0Q291bnQrKztcblxuICAgIGlmIChzY2hlZHVsaW5nLnN0YXRlID09PSAnbmV3Jykge1xuICAgICAgLy8gXHU2NUIwXHU1MzYxXHU3MjQ3XHVGRjFBXHU3NkY0XHU2M0E1IDQgXHU1OTI5XG4gICAgICBzY2hlZHVsaW5nLmludGVydmFsID0gNDtcbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIDQgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5zdGF0ZSA9ICdyZXZpZXcnO1xuICAgIH0gZWxzZSBpZiAoc2NoZWR1bGluZy5zdGF0ZSA9PT0gJ2xlYXJuaW5nJykge1xuICAgICAgLy8gXHU1QjY2XHU0RTYwXHU0RTJEXHVGRjFBXHU3NkY0XHU2M0E1XHU4RkRCXHU1MTY1XHU1OTBEXHU0RTYwXHVGRjBDNyBcdTU5MjlcbiAgICAgIHNjaGVkdWxpbmcuaW50ZXJ2YWwgPSA3O1xuICAgICAgc2NoZWR1bGluZy5kdWUgPSBEYXRlLm5vdygpICsgNyAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG4gICAgICBzY2hlZHVsaW5nLnN0YXRlID0gJ3Jldmlldyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NTkwRFx1NEU2MFx1OTYzNlx1NkJCNVx1RkYxQVx1OTVGNFx1OTY5NCAqIChlYXNlICsgMC4zKVxuICAgICAgc2NoZWR1bGluZy5pbnRlcnZhbCA9IHNjaGVkdWxpbmcuaW50ZXJ2YWwgKiAoc2NoZWR1bGluZy5lYXNlICsgMC4zKTtcbiAgICAgIHNjaGVkdWxpbmcuZHVlID0gRGF0ZS5ub3coKSArIHNjaGVkdWxpbmcuaW50ZXJ2YWwgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgc2NoZWR1bGluZy5lYXNlID0gc2NoZWR1bGluZy5lYXNlICsgMC4xNTtcbiAgICAgIHNjaGVkdWxpbmcuc3RhdGUgPSAncmV2aWV3JztcbiAgICB9XG5cbiAgICAvLyBcdTY2M0VcdTg0NTdcdTk2NERcdTRGNEVcdTk2QkVcdTVFQTZcbiAgICBzdGF0cy5kaWZmaWN1bHR5ID0gTWF0aC5tYXgoMCwgc3RhdHMuZGlmZmljdWx0eSAtIDAuMSk7XG4gIH1cblxuICAvKipcbiAgICogXHU4QkM0XHU0RjMwXHU3NTI4XHU2MjM3XHU3QjU0XHU2ODQ4XHVGRjA4XHU3NTI4XHU0RThFXHU4RjkzXHU1MTY1XHU3QjU0XHU2ODQ4XHU2QTIxXHU1RjBGXHVGRjA5XG4gICAqL1xuLyoqXG4gKiBcdThCQzRcdTRGMzBcdTc1MjhcdTYyMzdcdTdCNTRcdTY4NDgoXHU3NTI4XHU0RThFXHU4RjkzXHU1MTY1XHU3QjU0XHU2ODQ4XHU2QTIxXHU1RjBGKVxuICovXG5ldmFsdWF0ZUFuc3dlcihcbiAgY29ycmVjdEFuc3dlcjogc3RyaW5nIHwgc3RyaW5nW10sXG4gIHVzZXJBbnN3ZXI6IHN0cmluZyB8IHN0cmluZ1tdXG4pOiB7XG4gIGNvcnJlY3RuZXNzOiAnY29ycmVjdCcgfCAncGFydGlhbCcgfCAnd3JvbmcnO1xuICBzaW1pbGFyaXR5OiBudW1iZXI7XG59IHtcbiAgLy8gXHU1OTA0XHU3NDA2XHU2NTcwXHU3RUM0KFx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QSlcbiAgaWYgKEFycmF5LmlzQXJyYXkoY29ycmVjdEFuc3dlcikgJiYgQXJyYXkuaXNBcnJheSh1c2VyQW5zd2VyKSkge1xuICAgIGxldCBjb3JyZWN0Q291bnQgPSAwO1xuICAgIGNvbnN0IHRvdGFsID0gY29ycmVjdEFuc3dlci5sZW5ndGg7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsOyBpKyspIHtcbiAgICAgIC8vIFx1RDgzQ1x1REQ5NSBcdTVCRjlcdTZCQ0ZcdTRFMkFcdTdBN0FcdTY4M0NcdTRFNUZcdTVFOTRcdTc1MjggXCIvXCIgXHU4OUM0XHU1MjE5XG4gICAgICBjb25zdCBldmFsdWF0aW9uID0gdGhpcy5ldmFsdWF0ZVNpbmdsZUFuc3dlcihcbiAgICAgICAgY29ycmVjdEFuc3dlcltpXSxcbiAgICAgICAgdXNlckFuc3dlcltpXSB8fCAnJ1xuICAgICAgKTtcbiAgICAgIFxuICAgICAgaWYgKGV2YWx1YXRpb24uc2ltaWxhcml0eSA+PSAwLjkpIGNvcnJlY3RDb3VudCsrO1xuICAgICAgZWxzZSBpZiAoZXZhbHVhdGlvbi5zaW1pbGFyaXR5ID49IDAuNikgY29ycmVjdENvdW50ICs9IDAuNTtcbiAgICB9XG5cbiAgICBjb25zdCBvdmVyYWxsU2ltaWxhcml0eSA9IGNvcnJlY3RDb3VudCAvIHRvdGFsO1xuXG4gICAgaWYgKG92ZXJhbGxTaW1pbGFyaXR5ID49IDAuOSkge1xuICAgICAgcmV0dXJuIHsgY29ycmVjdG5lc3M6ICdjb3JyZWN0Jywgc2ltaWxhcml0eTogb3ZlcmFsbFNpbWlsYXJpdHkgfTtcbiAgICB9IGVsc2UgaWYgKG92ZXJhbGxTaW1pbGFyaXR5ID49IDAuNikge1xuICAgICAgcmV0dXJuIHsgY29ycmVjdG5lc3M6ICdwYXJ0aWFsJywgc2ltaWxhcml0eTogb3ZlcmFsbFNpbWlsYXJpdHkgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHsgY29ycmVjdG5lc3M6ICd3cm9uZycsIHNpbWlsYXJpdHk6IG92ZXJhbGxTaW1pbGFyaXR5IH07XG4gICAgfVxuICB9XG5cbiAgLy8gXHVEODNDXHVERDk1IFx1NTkwNFx1NzQwNlx1NUI1N1x1N0IyNlx1NEUzMiAtIFx1NjNEMFx1NTNENlx1NTIzMFx1NzJFQ1x1N0FDQlx1NjVCOVx1NkNENVxuICByZXR1cm4gdGhpcy5ldmFsdWF0ZVNpbmdsZUFuc3dlcihcbiAgICBjb3JyZWN0QW5zd2VyIGFzIHN0cmluZyxcbiAgICB1c2VyQW5zd2VyIGFzIHN0cmluZ1xuICApO1xufVxuXG4vKipcbiAqIFx1RDgzQ1x1REQ5NSBcdThCQzRcdTRGMzBcdTUzNTVcdTRFMkFcdTdCNTRcdTY4NDgoXHU2NTJGXHU2MzAxIFwiL1wiIFx1NTIwNlx1OTY5NFx1NzY4NFx1NTkxQVx1NEUyQVx1NkI2M1x1Nzg2RVx1N0I1NFx1Njg0OClcbiAqL1xucHJpdmF0ZSBldmFsdWF0ZVNpbmdsZUFuc3dlcihcbiAgY29ycmVjdEFuc3dlcjogc3RyaW5nLFxuICB1c2VyQW5zd2VyOiBzdHJpbmdcbik6IHtcbiAgY29ycmVjdG5lc3M6ICdjb3JyZWN0JyB8ICdwYXJ0aWFsJyB8ICd3cm9uZyc7XG4gIHNpbWlsYXJpdHk6IG51bWJlcjtcbn0ge1xuICBjb25zdCBjb3JyZWN0ID0gdGhpcy5ub3JtYWxpemUoY29ycmVjdEFuc3dlcik7XG4gIGNvbnN0IHVzZXIgPSB0aGlzLm5vcm1hbGl6ZSh1c2VyQW5zd2VyKTtcblxuICAvLyBcdTdBN0FcdTdCNTRcdTY4NDhcbiAgaWYgKHVzZXIubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHsgY29ycmVjdG5lc3M6ICd3cm9uZycsIHNpbWlsYXJpdHk6IDAgfTtcbiAgfVxuXG4gIC8vIFx1RDgzQ1x1REQ5NSBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTUzMDVcdTU0MkIgXCIvXCIgLSBcdTg4NjhcdTc5M0FcdTU5MUFcdTRFMkFcdTUzRUZcdTYzQTVcdTUzRDdcdTdCNTRcdTY4NDhcbiAgaWYgKGNvcnJlY3RBbnN3ZXIuaW5jbHVkZXMoJy8nKSB8fCBjb3JyZWN0QW5zd2VyLmluY2x1ZGVzKCd8JykpIHtcbiAgICBjb25zdCBhbHRlcm5hdGl2ZXMgPSBjb3JyZWN0QW5zd2VyXG4gICAgICAuc3BsaXQoL1tcXC98XS8pICAvLyBcdTY1MkZcdTYzMDEgLyBcdTYyMTYgfFxuICAgICAgLm1hcChhbHQgPT4gdGhpcy5ub3JtYWxpemUoYWx0LnRyaW0oKSkpXG4gICAgICAuZmlsdGVyKGFsdCA9PiBhbHQubGVuZ3RoID4gMCk7XG5cbiAgICAvLyBcdTVCRjlcdTZCQ0ZcdTRFMkFcdTUzRUZcdTgwRkRcdTc2ODRcdTdCNTRcdTY4NDhcdThCQTFcdTdCOTdcdTc2RjhcdTRGM0NcdTVFQTYsXHU1M0Q2XHU2NzAwXHU5QUQ4XHU1MjA2XG4gICAgbGV0IG1heFNpbWlsYXJpdHkgPSAwO1xuICAgIGZvciAoY29uc3QgYWx0ZXJuYXRpdmUgb2YgYWx0ZXJuYXRpdmVzKSB7XG4gICAgICAvLyBcdTVCOENcdTUxNjhcdTUzMzlcdTkxNERcdTRFRkJcdTYxMEZcdTRFMDBcdTRFMkFcdTVDMzFcdTdCOTdcdTVCRjlcbiAgICAgIGlmICh1c2VyID09PSBhbHRlcm5hdGl2ZSkge1xuICAgICAgICByZXR1cm4geyBjb3JyZWN0bmVzczogJ2NvcnJlY3QnLCBzaW1pbGFyaXR5OiAxLjAgfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3Qgc2ltaWxhcml0eSA9IHRoaXMuY2FsY3VsYXRlU2ltaWxhcml0eShhbHRlcm5hdGl2ZSwgdXNlcik7XG4gICAgICBtYXhTaW1pbGFyaXR5ID0gTWF0aC5tYXgobWF4U2ltaWxhcml0eSwgc2ltaWxhcml0eSk7XG4gICAgfVxuXG4gICAgLy8gXHU0RjdGXHU3NTI4XHU2NzAwXHU5QUQ4XHU3NkY4XHU0RjNDXHU1RUE2XHU1MjI0XHU2NUFEXG4gICAgaWYgKG1heFNpbWlsYXJpdHkgPj0gMC45KSB7XG4gICAgICByZXR1cm4geyBjb3JyZWN0bmVzczogJ2NvcnJlY3QnLCBzaW1pbGFyaXR5OiBtYXhTaW1pbGFyaXR5IH07XG4gICAgfSBlbHNlIGlmIChtYXhTaW1pbGFyaXR5ID49IDAuNykge1xuICAgICAgcmV0dXJuIHsgY29ycmVjdG5lc3M6ICdwYXJ0aWFsJywgc2ltaWxhcml0eTogbWF4U2ltaWxhcml0eSB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4geyBjb3JyZWN0bmVzczogJ3dyb25nJywgc2ltaWxhcml0eTogbWF4U2ltaWxhcml0eSB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIFx1RDgzRFx1REQzRCBcdTUzOUZcdTY3MDlcdTkwM0JcdThGOTEgLSBcdTU5MDRcdTc0MDZcdTRFMERcdTU0MkIgXCIvXCIgXHU3Njg0XHU2NjZFXHU5MDFBXHU3QjU0XHU2ODQ4XG4gIFxuICAvLyBcdTk1N0ZcdTVFQTZcdTVERUVcdTVGMDJcdThGQzdcdTU5MjdcdTc2RjRcdTYzQTVcdTUyMjRcdTk1MTlcbiAgY29uc3QgbGVuZ3RoUmF0aW8gPSBNYXRoLm1pbih1c2VyLmxlbmd0aCwgY29ycmVjdC5sZW5ndGgpIC8gXG4gICAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgodXNlci5sZW5ndGgsIGNvcnJlY3QubGVuZ3RoKTtcbmlmIChsZW5ndGhSYXRpbyA8IDAuMyAmJiB1c2VyLmxlbmd0aCA8IDYpIHtcbiAgcmV0dXJuIHsgY29ycmVjdG5lc3M6ICd3cm9uZycsIHNpbWlsYXJpdHk6IDAgfTtcbn1cblxuXG5cbiAgY29uc3Qgc2ltaWxhcml0eSA9IHRoaXMuY2FsY3VsYXRlU2ltaWxhcml0eShjb3JyZWN0LCB1c2VyKTtcbiAgY29uc3QgY292ZXJhZ2UgPSB0aGlzLmNhbGN1bGF0ZVRva2VuQ292ZXJhZ2UoY29ycmVjdCwgdXNlcik7XG4gIFxuICAvLyBcdTUzOUZcdTY3MDlcdTg5QzRcdTUyMTlcbiAgaWYgKHNpbWlsYXJpdHkgPj0gMC45KSB7XG4gICAgcmV0dXJuIHsgY29ycmVjdG5lc3M6ICdjb3JyZWN0Jywgc2ltaWxhcml0eSB9O1xuICB9XG4gIFxuICAvLyBcdUQ4M0NcdUREOTUgXHU2NUIwXHU1ODlFXHVGRjFBXHU1MTczXHU5NTJFXHU4QkNEXHU1NDdEXHU0RTJEXHU1OTFBXHVGRjBDXHU0RjQ2XHU1M0U1XHU1QjUwXHU3RUQzXHU2Nzg0XHU1REVFXG4gIGlmIChzaW1pbGFyaXR5IDwgMC43ICYmIGNvdmVyYWdlID49IDAuNikge1xuICAgIHJldHVybiB7IGNvcnJlY3RuZXNzOiAncGFydGlhbCcsIHNpbWlsYXJpdHkgfTtcbiAgfVxuICBcbiAgLy8gXHU1MzlGXHU2NzA5XHU5MEU4XHU1MjA2XHU2QjYzXHU3ODZFXG4gIGlmIChzaW1pbGFyaXR5ID49IDAuNykge1xuICAgIHJldHVybiB7IGNvcnJlY3RuZXNzOiAncGFydGlhbCcsIHNpbWlsYXJpdHkgfTtcbiAgfVxuICBcbiAgcmV0dXJuIHsgY29ycmVjdG5lc3M6ICd3cm9uZycsIHNpbWlsYXJpdHkgfTtcbiAgXG59XG4gIC8qKlxuICAgKiBcdTY4MDdcdTUxQzZcdTUzMTZcdTY1ODdcdTY3MkNcbiAgICovXG4gIHByaXZhdGUgbm9ybWFsaXplKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRleHRcbiAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAudHJpbSgpXG4gICAgICAucmVwbGFjZSgvXFxzKy9nLCAnICcpICAgIC8vIFx1NTQwOFx1NUU3Nlx1NTkxQVx1NEUyQVx1N0E3QVx1NjgzQ1x1NEUzQVx1NEUwMFx1NEUyQVxuICAgICAgLnJlcGxhY2UoL1xcbisvZywgJyAnKSAgICAvLyBcdTYzNjJcdTg4NENcdTY2RkZcdTYzNjJcdTRFM0FcdTdBN0FcdTY4M0NcbiAgICAgIC5yZXBsYWNlKC9bXHVGRjBDXHUzMDAyXHVGRjAxXHVGRjFGXHUzMDAxXHVGRjFCXHVGRjFBXCJcIicnXHVGRjA4XHVGRjA5XHUzMDBBXHUzMDBCXHUzMDEwXHUzMDExXFwuLCE/OzpcIicoKVxcW1xcXXt9XS9nLCAnJyk7ICAvLyBcdTc5RkJcdTk2NjRcdTY4MDdcdTcwQjlcdTdCMjZcdTUzRjdcbiAgfVxuXG4gIC8qKlxuICAgKiBcdThCQTFcdTdCOTdcdTc2RjhcdTRGM0NcdTVFQTZcdUZGMDhMZXZlbnNodGVpbiBcdThERERcdTc5QkJcdUZGMDlcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlU2ltaWxhcml0eShzdHIxOiBzdHJpbmcsIHN0cjI6IHN0cmluZyk6IG51bWJlciB7XG4gICAgaWYgKHN0cjEgPT09IHN0cjIpIHJldHVybiAxO1xuICAgIGlmIChzdHIxLmxlbmd0aCA9PT0gMCB8fCBzdHIyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDA7XG5cbiAgICBjb25zdCBtYXRyaXg6IG51bWJlcltdW10gPSBbXTtcblxuICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1NzdFOVx1OTYzNVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHN0cjIubGVuZ3RoOyBpKyspIHtcbiAgICAgIG1hdHJpeFtpXSA9IFtpXTtcbiAgICB9XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPD0gc3RyMS5sZW5ndGg7IGorKykge1xuICAgICAgbWF0cml4WzBdW2pdID0gajtcbiAgICB9XG5cbiAgICAvLyBcdTU4NkJcdTUxNDVcdTc3RTlcdTk2MzVcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBzdHIyLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMTsgaiA8PSBzdHIxLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChzdHIyLmNoYXJBdChpIC0gMSkgPT09IHN0cjEuY2hhckF0KGogLSAxKSkge1xuICAgICAgICAgIG1hdHJpeFtpXVtqXSA9IG1hdHJpeFtpIC0gMV1baiAtIDFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1hdHJpeFtpXVtqXSA9IE1hdGgubWluKFxuICAgICAgICAgICAgbWF0cml4W2kgLSAxXVtqIC0gMV0gKyAxLCAvLyBcdTY2RkZcdTYzNjJcbiAgICAgICAgICAgIG1hdHJpeFtpXVtqIC0gMV0gKyAxLCAgICAgLy8gXHU2M0QyXHU1MTY1XG4gICAgICAgICAgICBtYXRyaXhbaSAtIDFdW2pdICsgMSAgICAgIC8vIFx1NTIyMFx1OTY2NFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBkaXN0YW5jZSA9IG1hdHJpeFtzdHIyLmxlbmd0aF1bc3RyMS5sZW5ndGhdO1xuICAgIGNvbnN0IG1heExlbmd0aCA9IE1hdGgubWF4KHN0cjEubGVuZ3RoLCBzdHIyLmxlbmd0aCk7XG4gICAgXG4gICAgcmV0dXJuIDEgLSBkaXN0YW5jZSAvIG1heExlbmd0aDtcbiAgfVxuLyoqXG4gKiBcdThCQTFcdTdCOTdcdTUxNzNcdTk1MkVcdThCQ0RcdTg5ODZcdTc2RDZcdTczODdcbiAqIFx1NzUyOFx1NjIzN1x1N0I1NFx1Njg0OFx1NEUyRFx1NTQ3RFx1NEUyRFx1NEU4Nlx1NTkxQVx1NUMxMVx1NjgwN1x1NTFDNlx1N0I1NFx1Njg0OFx1NzY4NFx1OEJDRFxuICovXG5wcml2YXRlIGNhbGN1bGF0ZVRva2VuQ292ZXJhZ2UoXG4gIGNvcnJlY3Q6IHN0cmluZyxcbiAgdXNlcjogc3RyaW5nXG4pOiBudW1iZXIge1xuICBjb25zdCBjb3JyZWN0VG9rZW5zID0gY29ycmVjdC5zcGxpdCgnICcpLmZpbHRlcih0ID0+IHQubGVuZ3RoID4gMSk7XG4gIGNvbnN0IHVzZXJUb2tlbnMgPSBuZXcgU2V0KHVzZXIuc3BsaXQoJyAnKSk7XG5cbiAgaWYgKGNvcnJlY3RUb2tlbnMubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcblxuICBsZXQgaGl0ID0gMDtcbiAgZm9yIChjb25zdCB0b2tlbiBvZiBjb3JyZWN0VG9rZW5zKSB7XG4gICAgaWYgKHVzZXJUb2tlbnMuaGFzKHRva2VuKSkgaGl0Kys7XG4gIH1cblxuICByZXR1cm4gaGl0IC8gY29ycmVjdFRva2Vucy5sZW5ndGg7IC8vIDAgfiAxXG59XG5cblxuICAvKipcbiAgICogXHU2ODM5XHU2MzZFXHU3NkY4XHU0RjNDXHU1RUE2XHU1RUZBXHU4QkFFXHU5NkJFXHU1RUE2XG4gICAqL1xuICBzdWdnZXN0RWFzZShzaW1pbGFyaXR5OiBudW1iZXIpOiBSZXZpZXdFYXNlIHtcbiAgICBpZiAoc2ltaWxhcml0eSA+PSAwLjgpIHJldHVybiAnZWFzeSc7XG4gICAgaWYgKHNpbWlsYXJpdHkgPj0gMC43KSByZXR1cm4gJ2dvb2QnO1xuICAgIGlmIChzaW1pbGFyaXR5ID49IDAuNSkgcmV0dXJuICdoYXJkJztcbiAgICByZXR1cm4gJ2FnYWluJztcbiAgfVxufSIsICJpbXBvcnQgeyBBcHAsIE1vZGFsIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgeyBGbGFzaGNhcmQgfSBmcm9tICcuLi8uLi8uLi9jb3JlL0ZsYXNoY2FyZE1hbmFnZXInO1xuXG5leHBvcnQgY2xhc3MgRmxhc2hjYXJkRWRpdE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBjb25zdHJ1Y3RvcihcbiAgICBhcHA6IEFwcCxcbiAgICBwcml2YXRlIGNhcmQ6IEZsYXNoY2FyZCxcbiAgICBwcml2YXRlIG9uU3VibWl0OiAocXVlc3Rpb246IHN0cmluZywgYW5zd2VyOiBzdHJpbmcpID0+IHZvaWRcbiAgKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdTdGMTZcdThGOTFcdTk1RUFcdTUzNjEnIH0pO1xuXG4gICAgLy8gUXVlc3Rpb25cbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2xhYmVsJywgeyB0ZXh0OiAnXHU5NUVFXHU5ODk4JyB9KTtcbiAgICBjb25zdCBxdWVzdGlvbklucHV0ID0gY29udGVudEVsLmNyZWF0ZUVsKCd0ZXh0YXJlYScpO1xuICAgIHF1ZXN0aW9uSW5wdXQudmFsdWUgPSB0aGlzLmNhcmQuZnJvbnQ7XG5cbiAgICAvLyBBbnN3ZXJcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2xhYmVsJywgeyB0ZXh0OiAnXHU3QjU0XHU2ODQ4JyB9KTtcbiAgICBjb25zdCBhbnN3ZXJJbnB1dCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgndGV4dGFyZWEnKTtcbiAgICBhbnN3ZXJJbnB1dC52YWx1ZSA9XG4gICAgICB0aGlzLmNhcmQudHlwZSA9PT0gJ2Nsb3plJ1xuICAgICAgICA/IHRoaXMuY2FyZC5iYWNrPy5bMF0gPz8gJydcbiAgICAgICAgOiAodGhpcy5jYXJkLmJhY2sgYXMgc3RyaW5nKTtcblxuICAgIC8vIFNhdmVcbiAgICBjb25zdCBzYXZlQnRuID0gY29udGVudEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdTRGRERcdTVCNTgnIH0pO1xuICAgIHNhdmVCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgIHRoaXMub25TdWJtaXQoXG4gICAgICAgIHF1ZXN0aW9uSW5wdXQudmFsdWUudHJpbSgpLFxuICAgICAgICBhbnN3ZXJJbnB1dC52YWx1ZS50cmltKClcbiAgICAgICk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuIiwgIi8vIFJldmlld1N0YXRlTWFuYWdlci50c1xuaW1wb3J0IHsgRmxhc2hjYXJkIH0gZnJvbSAnLi4vLi4vY29yZS9GbGFzaGNhcmRNYW5hZ2VyJztcblxuZXhwb3J0IGludGVyZmFjZSBSZXZpZXdTdGF0ZSB7XG4gIHNob3dBbnN3ZXI6IGJvb2xlYW47XG4gIHN0YXJ0VGltZTogbnVtYmVyO1xuICB1c2VyQW5zd2Vyczogc3RyaW5nW107XG4gIHVzZXJBbnN3ZXI6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIFJldmlld1N0YXRlTWFuYWdlciB7XG4gIHByaXZhdGUgc3RhdGU6IFJldmlld1N0YXRlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuc3RhdGUgPSB0aGlzLmNyZWF0ZUluaXRpYWxTdGF0ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVJbml0aWFsU3RhdGUoKTogUmV2aWV3U3RhdGUge1xuICAgIHJldHVybiB7XG4gICAgICBzaG93QW5zd2VyOiBmYWxzZSxcbiAgICAgIHN0YXJ0VGltZTogMCxcbiAgICAgIHVzZXJBbnN3ZXJzOiBbXSxcbiAgICAgIHVzZXJBbnN3ZXI6ICcnXG4gICAgfTtcbiAgfVxuXG4gIGdldFN0YXRlKCk6IFJldmlld1N0YXRlIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMuc3RhdGUgPSB0aGlzLmNyZWF0ZUluaXRpYWxTdGF0ZSgpO1xuICB9XG5cbiAgdXBkYXRlRm9yTmV3Q2FyZChjYXJkOiBGbGFzaGNhcmQsIGlzU2FtZUNhcmQ6IGJvb2xlYW4pIHtcbiAgICBpZiAoIWlzU2FtZUNhcmQpIHtcbiAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCF0aGlzLnN0YXRlLnNob3dBbnN3ZXIgJiYgdGhpcy5zdGF0ZS5zdGFydFRpbWUgPT09IDApIHtcbiAgICAgIHRoaXMuc3RhdGUuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB9XG4gIH1cblxuICBzZXRTaG93QW5zd2VyKHNob3c6IGJvb2xlYW4pIHtcbiAgICB0aGlzLnN0YXRlLnNob3dBbnN3ZXIgPSBzaG93O1xuICB9XG5cbiAgc2V0VXNlckFuc3dlcihhbnN3ZXI6IHN0cmluZykge1xuICAgIHRoaXMuc3RhdGUudXNlckFuc3dlciA9IGFuc3dlcjtcbiAgfVxuXG4gIHNldFVzZXJBbnN3ZXJzKGFuc3dlcnM6IHN0cmluZ1tdKSB7XG4gICAgdGhpcy5zdGF0ZS51c2VyQW5zd2VycyA9IGFuc3dlcnM7XG4gIH1cblxuICB1cGRhdGVVc2VyQW5zd2VyQXRJbmRleChpbmRleDogbnVtYmVyLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5zdGF0ZS51c2VyQW5zd2Vyc1tpbmRleF0gPSB2YWx1ZTtcbiAgfVxuXG4gIGVuc3VyZVVzZXJBbnN3ZXJzTGVuZ3RoKGxlbmd0aDogbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUudXNlckFuc3dlcnMubGVuZ3RoIDwgbGVuZ3RoKSB7XG4gICAgICB0aGlzLnN0YXRlLnVzZXJBbnN3ZXJzID0gbmV3IEFycmF5KGxlbmd0aCkuZmlsbCgnJyk7XG4gICAgfVxuICB9XG5cbiAgZ2V0VGltZVNwZW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIChEYXRlLm5vdygpIC0gdGhpcy5zdGF0ZS5zdGFydFRpbWUpIC8gMTAwMDtcbiAgfVxufSIsICIvLyBzcmMvdWkvY29tcG9uZW50cy9UYWJsZVJlbmRlcmVyLnRzXG5pbXBvcnQgeyBDYXJkU2NoZWR1bGVyIH0gZnJvbSAnLi4vLi4vY29yZS9DYXJkU2NoZWR1bGVyJztcblxuZXhwb3J0IGNsYXNzIFRhYmxlUmVuZGVyZXIge1xuICAvLyBcdTY4QzBcdTZENEJcdTY2MkZcdTU0MjZcdTRFM0FcdTg4NjhcdTY4M0NcdTY4M0NcdTVGMEZcbiAgc3RhdGljIGlzVGFibGVGb3JtYXQodGV4dDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgbGluZXMgPSB0ZXh0LnRyaW0oKS5zcGxpdCgnXFxuJyk7XG4gICAgaWYgKGxpbmVzLmxlbmd0aCA8IDIpIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICBjb25zdCBoYXNTZXBhcmF0b3IgPSBsaW5lcy5zb21lKGxpbmUgPT4gL15cXHw/W1xccy06fF0rXFx8PyQvLnRlc3QobGluZS50cmltKCkpKTtcbiAgICBjb25zdCBwaXBlTGluZXMgPSBsaW5lcy5maWx0ZXIobGluZSA9PiBsaW5lLmluY2x1ZGVzKCd8JykpLmxlbmd0aDtcbiAgICBcbiAgICByZXR1cm4gaGFzU2VwYXJhdG9yIHx8IHBpcGVMaW5lcyA+PSBsaW5lcy5sZW5ndGggKiAwLjc7XG4gIH1cblxuICAvLyBcdTZFMzJcdTY3RDNcdTg4NjhcdTY4M0NcbiAgc3RhdGljIHJlbmRlclRhYmxlKG1hcmtkb3duOiBzdHJpbmcsIHNob3dBbnN3ZXI6IGJvb2xlYW4gPSBmYWxzZSk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBcbiAgICBpZiAoIW1hcmtkb3duPy50cmltKCkpIHtcbiAgICAgIGNvbnRhaW5lci50ZXh0Q29udGVudCA9ICcoZW1wdHkgdGFibGUpJztcbiAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfVxuXG4gICAgY29uc3QgbGluZXMgPSBtYXJrZG93bi50cmltKCkuc3BsaXQoJ1xcbicpO1xuICAgIGlmIChsaW5lcy5sZW5ndGggPCAyKSB7XG4gICAgICBjb250YWluZXIudGV4dENvbnRlbnQgPSBtYXJrZG93bjtcbiAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfVxuXG4gICAgY29uc3QgdGFibGUgPSBjb250YWluZXIuY3JlYXRlRWwoJ3RhYmxlJywgeyBcbiAgICAgIGNsczogJ2xlYXJuaW5nLXN5c3RlbS10YWJsZSBmbGFzaGNhcmQtcmV2aWV3LXRhYmxlJyBcbiAgICB9KTtcblxuICAgIGNvbnN0IHNlcGFyYXRvckluZGV4ID0gdGhpcy5maW5kU2VwYXJhdG9ySW5kZXgobGluZXMpO1xuICAgIFxuICAgIGlmIChzZXBhcmF0b3JJbmRleCA+IDApIHtcbiAgICAgIHRoaXMucmVuZGVyVGFibGVXaXRoSGVhZGVyKHRhYmxlLCBsaW5lcywgc2VwYXJhdG9ySW5kZXgsIHNob3dBbnN3ZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbmRlclRhYmxlV2l0aG91dEhlYWRlcih0YWJsZSwgbGluZXMsIHNob3dBbnN3ZXIpO1xuICAgIH1cblxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH1cblxuICAvLyBcdTY3RTVcdTYyN0VcdTUyMDZcdTk2OTRcdTdCMjZcdTRGNERcdTdGNkVcbiAgcHJpdmF0ZSBzdGF0aWMgZmluZFNlcGFyYXRvckluZGV4KGxpbmVzOiBzdHJpbmdbXSk6IG51bWJlciB7XG4gICAgcmV0dXJuIGxpbmVzLmZpbmRJbmRleChsaW5lID0+IHtcbiAgICAgIGNvbnN0IGNsZWFuZWQgPSBsaW5lLnJlcGxhY2UoL1tcXHN8XS9nLCAnJyk7XG4gICAgICByZXR1cm4gY2xlYW5lZC5sZW5ndGggPj0gMyAmJiAvXlstOl0rJC8udGVzdChjbGVhbmVkKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFx1NkUzMlx1NjdEM1x1NUUyNlx1ODg2OFx1NTkzNFx1NzY4NFx1ODg2OFx1NjgzQ1xuICBwcml2YXRlIHN0YXRpYyByZW5kZXJUYWJsZVdpdGhIZWFkZXIoXG4gICAgdGFibGU6IEhUTUxFbGVtZW50LFxuICAgIGxpbmVzOiBzdHJpbmdbXSxcbiAgICBzZXBhcmF0b3JJbmRleDogbnVtYmVyLFxuICAgIHNob3dBbnN3ZXI6IGJvb2xlYW5cbiAgKSB7XG4gICAgLy8gXHU4ODY4XHU1OTM0XG4gICAgY29uc3QgaGVhZGVyQ2VsbHMgPSB0aGlzLnBhcnNlQ2VsbHMobGluZXNbc2VwYXJhdG9ySW5kZXggLSAxXSk7XG4gICAgY29uc3QgdGhlYWQgPSB0YWJsZS5jcmVhdGVFbCgndGhlYWQnKTtcbiAgICBjb25zdCBoZWFkZXJSb3cgPSB0aGVhZC5jcmVhdGVFbCgndHInKTtcbiAgICBcbiAgICBoZWFkZXJDZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgY29uc3QgdGggPSBoZWFkZXJSb3cuY3JlYXRlRWwoJ3RoJyk7XG4gICAgICB0aC5pbm5lckhUTUwgPSB0aGlzLnByb2Nlc3NDZWxsQ29udGVudChjZWxsLCBzaG93QW5zd2VyKTtcbiAgICB9KTtcblxuICAgIC8vIFx1NjU3MFx1NjM2RVx1ODg0Q1xuICAgIGNvbnN0IHRib2R5ID0gdGFibGUuY3JlYXRlRWwoJ3Rib2R5Jyk7XG4gICAgZm9yIChsZXQgaSA9IHNlcGFyYXRvckluZGV4ICsgMTsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnJlbmRlclRhYmxlUm93KHRib2R5LCBsaW5lc1tpXSwgc2hvd0Fuc3dlcik7XG4gICAgfVxuICB9XG5cbiAgLy8gXHU2RTMyXHU2N0QzXHU2NUUwXHU4ODY4XHU1OTM0XHU3Njg0XHU4ODY4XHU2ODNDXG4gIHByaXZhdGUgc3RhdGljIHJlbmRlclRhYmxlV2l0aG91dEhlYWRlcihcbiAgICB0YWJsZTogSFRNTEVsZW1lbnQsXG4gICAgbGluZXM6IHN0cmluZ1tdLFxuICAgIHNob3dBbnN3ZXI6IGJvb2xlYW5cbiAgKSB7XG4gICAgY29uc3QgdGJvZHkgPSB0YWJsZS5jcmVhdGVFbCgndGJvZHknKTtcbiAgICBsaW5lcy5mb3JFYWNoKGxpbmUgPT4gdGhpcy5yZW5kZXJUYWJsZVJvdyh0Ym9keSwgbGluZSwgc2hvd0Fuc3dlcikpO1xuICB9XG5cbiAgLy8gXHU2RTMyXHU2N0QzXHU1MzU1XHU4ODRDXG4gIHByaXZhdGUgc3RhdGljIHJlbmRlclRhYmxlUm93KFxuICAgIHRib2R5OiBIVE1MRWxlbWVudCxcbiAgICBsaW5lOiBzdHJpbmcsXG4gICAgc2hvd0Fuc3dlcjogYm9vbGVhblxuICApIHtcbiAgICBpZiAoIWxpbmUudHJpbSgpKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgY2VsbHMgPSB0aGlzLnBhcnNlQ2VsbHMobGluZSk7XG4gICAgaWYgKGNlbGxzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IHJvdyA9IHRib2R5LmNyZWF0ZUVsKCd0cicpO1xuICAgIGNlbGxzLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICBjb25zdCB0ZCA9IHJvdy5jcmVhdGVFbCgndGQnKTtcbiAgICAgIHRkLmlubmVySFRNTCA9IHRoaXMucHJvY2Vzc0NlbGxDb250ZW50KGNlbGwsIHNob3dBbnN3ZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gXHU4OUUzXHU2NzkwXHU1MzU1XHU1MTQzXHU2ODNDXG4gIHByaXZhdGUgc3RhdGljIHBhcnNlQ2VsbHMobGluZTogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGxldCB0cmltbWVkID0gbGluZS50cmltKCk7XG4gICAgaWYgKHRyaW1tZWQuc3RhcnRzV2l0aCgnfCcpKSB0cmltbWVkID0gdHJpbW1lZC5zbGljZSgxKTtcbiAgICBpZiAodHJpbW1lZC5lbmRzV2l0aCgnfCcpKSB0cmltbWVkID0gdHJpbW1lZC5zbGljZSgwLCAtMSk7XG4gICAgXG4gICAgcmV0dXJuIHRyaW1tZWRcbiAgICAgIC5zcGxpdCgnfCcpXG4gICAgICAubWFwKGMgPT4gYy50cmltKCkpXG4gICAgICAuZmlsdGVyKGMgPT4gYy5sZW5ndGggPiAwKTtcbiAgfVxuXG4gIC8vIFx1NTkwNFx1NzQwNlx1NTM1NVx1NTE0M1x1NjgzQ1x1NTE4NVx1NUJCOVxuICBwcml2YXRlIHN0YXRpYyBwcm9jZXNzQ2VsbENvbnRlbnQoY2VsbDogc3RyaW5nLCBzaG93QW5zd2VyOiBib29sZWFuKTogc3RyaW5nIHtcbiAgICBpZiAoIWNlbGwuaW5jbHVkZXMoJz09JykpIHJldHVybiBjZWxsO1xuICAgIFxuICAgIGlmIChzaG93QW5zd2VyKSB7XG4gICAgICByZXR1cm4gY2VsbC5yZXBsYWNlKC89PShbXj1dKyk9PS9nLCAnPG1hcmsgY2xhc3M9XCJyZXZlYWxlZFwiPiQxPC9tYXJrPicpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY2VsbC5yZXBsYWNlKC89PShbXj1dKyk9PS9nLCAnPHNwYW4gY2xhc3M9XCJjbG96ZS1ibGFua1wiPltfX19dPC9zcGFuPicpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFx1NkUzMlx1NjdEM1x1NUUyNlx1NzUyOFx1NjIzN1x1N0I1NFx1Njg0OFx1NzY4NFx1ODg2OFx1NjgzQ1x1RkYwOFx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1NzUyOFx1RkYwOVxuICBzdGF0aWMgcmVuZGVyVGFibGVXaXRoVXNlckFuc3dlcnMoXG4gICAgb3JpZ2luYWxNYXJrZG93bjogc3RyaW5nLFxuICAgIGRlbGV0aW9uczogQXJyYXk8eyBhbnN3ZXI6IHN0cmluZyB9PixcbiAgICB1c2VyQW5zd2Vyczogc3RyaW5nW10sXG4gICAgc2NoZWR1bGVyOiBDYXJkU2NoZWR1bGVyXG4gICk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCBsaW5lcyA9IG9yaWdpbmFsTWFya2Rvd24udHJpbSgpLnNwbGl0KCdcXG4nKTtcbiAgICBcbiAgICBpZiAobGluZXMubGVuZ3RoIDwgMikge1xuICAgICAgY29udGFpbmVyLnRleHRDb250ZW50ID0gb3JpZ2luYWxNYXJrZG93bjtcbiAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfVxuXG4gICAgY29uc3QgdGFibGUgPSBjb250YWluZXIuY3JlYXRlRWwoJ3RhYmxlJywgeyBcbiAgICAgIGNsczogJ2xlYXJuaW5nLXN5c3RlbS10YWJsZSBmbGFzaGNhcmQtcmV2aWV3LXRhYmxlIHVzZXItYW5zd2VyLXRhYmxlJyBcbiAgICB9KTtcblxuICAgIGNvbnN0IHNlcGFyYXRvckluZGV4ID0gdGhpcy5maW5kU2VwYXJhdG9ySW5kZXgobGluZXMpO1xuICAgIGxldCBkZWxldGlvbkluZGV4ID0gMDtcblxuICAgIC8vIFx1NkUzMlx1NjdEM1x1ODg2OFx1NTkzNFxuICAgIGlmIChzZXBhcmF0b3JJbmRleCA+IDApIHtcbiAgICAgIGNvbnN0IGhlYWRlckNlbGxzID0gdGhpcy5wYXJzZUNlbGxzKGxpbmVzW3NlcGFyYXRvckluZGV4IC0gMV0pO1xuICAgICAgY29uc3QgdGhlYWQgPSB0YWJsZS5jcmVhdGVFbCgndGhlYWQnKTtcbiAgICAgIGNvbnN0IGhlYWRlclJvdyA9IHRoZWFkLmNyZWF0ZUVsKCd0cicpO1xuICAgICAgXG4gICAgICBoZWFkZXJDZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICBjb25zdCB0aCA9IGhlYWRlclJvdy5jcmVhdGVFbCgndGgnKTtcbiAgICAgICAgdGguaW5uZXJIVE1MID0gdGhpcy5wcm9jZXNzQ2VsbFdpdGhVc2VyQW5zd2VyKFxuICAgICAgICAgIGNlbGwsIGRlbGV0aW9ucywgdXNlckFuc3dlcnMsIGRlbGV0aW9uSW5kZXgsIHNjaGVkdWxlclxuICAgICAgICApO1xuICAgICAgICBpZiAoY2VsbC5pbmNsdWRlcygnPT0nKSkgZGVsZXRpb25JbmRleCsrO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU2RTMyXHU2N0QzXHU2NTcwXHU2MzZFXHU4ODRDXG4gICAgY29uc3QgdGJvZHkgPSB0YWJsZS5jcmVhdGVFbCgndGJvZHknKTtcbiAgICBjb25zdCBzdGFydFJvdyA9IHNlcGFyYXRvckluZGV4ID4gMCA/IHNlcGFyYXRvckluZGV4ICsgMSA6IDA7XG4gICAgXG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0Um93OyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXTtcbiAgICAgIGlmICghbGluZS50cmltKCkpIGNvbnRpbnVlO1xuICAgICAgXG4gICAgICBjb25zdCBjZWxscyA9IHRoaXMucGFyc2VDZWxscyhsaW5lKTtcbiAgICAgIGlmIChjZWxscy5sZW5ndGggPT09IDApIGNvbnRpbnVlO1xuICAgICAgXG4gICAgICBjb25zdCByb3cgPSB0Ym9keS5jcmVhdGVFbCgndHInKTtcbiAgICAgIGNlbGxzLmZvckVhY2goY2VsbCA9PiB7XG4gICAgICAgIGNvbnN0IHRkID0gcm93LmNyZWF0ZUVsKCd0ZCcpO1xuICAgICAgICB0ZC5pbm5lckhUTUwgPSB0aGlzLnByb2Nlc3NDZWxsV2l0aFVzZXJBbnN3ZXIoXG4gICAgICAgICAgY2VsbCwgZGVsZXRpb25zLCB1c2VyQW5zd2VycywgZGVsZXRpb25JbmRleCwgc2NoZWR1bGVyXG4gICAgICAgICk7XG4gICAgICAgIGlmIChjZWxsLmluY2x1ZGVzKCc9PScpKSBkZWxldGlvbkluZGV4Kys7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29udGFpbmVyO1xuICB9XG5cbiAgLy8gXHU1OTA0XHU3NDA2XHU1RTI2XHU3NTI4XHU2MjM3XHU3QjU0XHU2ODQ4XHU3Njg0XHU1MzU1XHU1MTQzXHU2ODNDXG4gIHByaXZhdGUgc3RhdGljIHByb2Nlc3NDZWxsV2l0aFVzZXJBbnN3ZXIoXG4gICAgY2VsbDogc3RyaW5nLFxuICAgIGRlbGV0aW9uczogQXJyYXk8eyBhbnN3ZXI6IHN0cmluZyB9PixcbiAgICB1c2VyQW5zd2Vyczogc3RyaW5nW10sXG4gICAgZGVsZXRpb25JbmRleDogbnVtYmVyLFxuICAgIHNjaGVkdWxlcjogQ2FyZFNjaGVkdWxlclxuICApOiBzdHJpbmcge1xuICAgIGlmICghY2VsbC5pbmNsdWRlcygnPT0nKSkgcmV0dXJuIGNlbGw7XG4gICAgXG4gICAgY29uc3QgbWF0Y2ggPSBjZWxsLm1hdGNoKC89PShbXj1dKyk9PS8pO1xuICAgIGlmICghbWF0Y2ggfHwgZGVsZXRpb25JbmRleCA+PSBkZWxldGlvbnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gY2VsbC5yZXBsYWNlKC89PShbXj1dKyk9PS9nLCAnPHNwYW4gY2xhc3M9XCJjbG96ZS1ibGFua1wiPltfX19dPC9zcGFuPicpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBjb3JyZWN0QW5zd2VyID0gZGVsZXRpb25zW2RlbGV0aW9uSW5kZXhdLmFuc3dlcjtcbiAgICBjb25zdCB1c2VyQW5zd2VyID0gdXNlckFuc3dlcnNbZGVsZXRpb25JbmRleF0gfHwgJyc7XG4gICAgY29uc3QgZXZhbHVhdGlvbiA9IHNjaGVkdWxlci5ldmFsdWF0ZUFuc3dlcihjb3JyZWN0QW5zd2VyLCB1c2VyQW5zd2VyKTtcbiAgICBcbiAgICBjb25zdCBkaXNwbGF5VGV4dCA9IHVzZXJBbnN3ZXIgfHwgJyhlbXB0eSknO1xuICAgIGNvbnN0IGNvcnJlY3RuZXNzQ2xhc3MgPSBldmFsdWF0aW9uLmNvcnJlY3RuZXNzO1xuICAgIFxuICAgIHJldHVybiBjZWxsLnJlcGxhY2UoXG4gICAgICAvPT0oW149XSspPT0vZyxcbiAgICAgIGA8c3BhbiBjbGFzcz1cInVzZXItYW5zd2VyLWNlbGwgJHtjb3JyZWN0bmVzc0NsYXNzfVwiPiR7ZGlzcGxheVRleHR9PC9zcGFuPmBcbiAgICApO1xuICB9XG59IiwgIi8vIENhcmRSZW5kZXJlcnMudHNcbmltcG9ydCB7IEZsYXNoY2FyZCB9IGZyb20gJy4uLy4uL2NvcmUvRmxhc2hjYXJkTWFuYWdlcic7XG5pbXBvcnQgeyBDYXJkU2NoZWR1bGVyIH0gZnJvbSAnLi4vLi4vY29yZS9DYXJkU2NoZWR1bGVyJztcbmltcG9ydCB7IFRhYmxlUmVuZGVyZXIgfSBmcm9tICcuL1RhYmxlUmVuZGVyZXInO1xuaW1wb3J0IHR5cGUgeyBSZXZpZXdTdGF0ZSB9IGZyb20gJy4uL3N0YXRlL3Jldmlld1N0YXRlTWFuYWdlcic7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFx1NTM2MVx1NzI0N1x1NkUzMlx1NjdEM1x1N0I1Nlx1NzU2NVx1NjNBNVx1NTNFM1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuZXhwb3J0IGludGVyZmFjZSBDYXJkUmVuZGVyU3RyYXRlZ3kge1xuICByZW5kZXJRdWVzdGlvbihjb250YWluZXI6IEhUTUxFbGVtZW50LCBjYXJkOiBGbGFzaGNhcmQsIHN0YXRlOiBSZXZpZXdTdGF0ZSk6IHZvaWQ7XG4gIHJlbmRlckFuc3dlcihcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LCBcbiAgICBjYXJkOiBGbGFzaGNhcmQsIFxuICAgIHN0YXRlOiBSZXZpZXdTdGF0ZSwgXG4gICAgc2NoZWR1bGVyOiBDYXJkU2NoZWR1bGVyXG4gICk6IHZvaWQ7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1NTM2MVx1NzI0N1x1NkUzMlx1NjdEM1x1NTY2OFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuZXhwb3J0IGNsYXNzIENsb3plQ2FyZFJlbmRlcmVyIGltcGxlbWVudHMgQ2FyZFJlbmRlclN0cmF0ZWd5IHtcbiAgcmVuZGVyUXVlc3Rpb24oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgY2FyZDogRmxhc2hjYXJkLCBzdGF0ZTogUmV2aWV3U3RhdGUpOiB2b2lkIHtcbiAgICAvLyBcdTk1RUVcdTk4OThcdTY1ODdcdTY3MkNcbiAgICBjb25zdCBxdWVzdGlvblRleHQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncXVlc3Rpb24tdGV4dCcgfSk7XG4gICAgY29uc3QgaXNUYWJsZSA9IFRhYmxlUmVuZGVyZXIuaXNUYWJsZUZvcm1hdChjYXJkLmZyb250KTtcbiAgICBcbiAgICBpZiAoaXNUYWJsZSkge1xuICAgICAgY29uc3QgdGFibGVFbCA9IFRhYmxlUmVuZGVyZXIucmVuZGVyVGFibGUoY2FyZC5mcm9udCwgZmFsc2UpO1xuICAgICAgcXVlc3Rpb25UZXh0LmFwcGVuZENoaWxkKHRhYmxlRWwpO1xuICAgICAgcXVlc3Rpb25UZXh0LmNsYXNzTGlzdC5hZGQoJ3RhYmxlLXF1ZXN0aW9uJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHF1ZXN0aW9uVGV4dC50ZXh0Q29udGVudCA9IGNhcmQuZnJvbnQ7XG4gICAgfVxuXG4gICAgLy8gXHU4RjkzXHU1MTY1XHU2ODQ2XG4gICAgaWYgKGNhcmQuY2xvemUpIHtcbiAgICAgIGNvbnN0IGlucHV0QXJlYSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjbG96ZS1pbnB1dC1hcmVhJyB9KTtcbiAgICAgIGlucHV0QXJlYS5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdGaWxsIGluIHRoZSBibGFua3M6JyB9KTtcblxuICAgICAgLy8gXHU3ODZFXHU0RkREXHU2NTcwXHU3RUM0XHU5NTdGXHU1RUE2XG4gICAgICBpZiAoc3RhdGUudXNlckFuc3dlcnMubGVuZ3RoIDwgY2FyZC5jbG96ZS5kZWxldGlvbnMubGVuZ3RoKSB7XG4gICAgICAgIHN0YXRlLnVzZXJBbnN3ZXJzID0gbmV3IEFycmF5KGNhcmQuY2xvemUuZGVsZXRpb25zLmxlbmd0aCkuZmlsbCgnJyk7XG4gICAgICB9XG5cbiAgICAgIGNhcmQuY2xvemUuZGVsZXRpb25zLmZvckVhY2goKGRlbGV0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dEdyb3VwID0gaW5wdXRBcmVhLmNyZWF0ZURpdih7IGNsczogJ2lucHV0LWdyb3VwJyB9KTtcbiAgICAgICAgaW5wdXRHcm91cC5jcmVhdGVTcGFuKHsgdGV4dDogYCR7aW5kZXggKyAxfS4gYCB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGlucHV0ID0gaW5wdXRHcm91cC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgIHBsYWNlaG9sZGVyOiAnWW91ciBhbnN3ZXIuLi4nLFxuICAgICAgICAgIGNsczogJ2Nsb3plLWlucHV0JyxcbiAgICAgICAgICB2YWx1ZTogc3RhdGUudXNlckFuc3dlcnNbaW5kZXhdIHx8ICcnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgICAgIHN0YXRlLnVzZXJBbnN3ZXJzW2luZGV4XSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBpbnB1dC5mb2N1cygpLCA1MCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlckFuc3dlcihcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIGNhcmQ6IEZsYXNoY2FyZCxcbiAgICBzdGF0ZTogUmV2aWV3U3RhdGUsXG4gICAgc2NoZWR1bGVyOiBDYXJkU2NoZWR1bGVyXG4gICk6IHZvaWQge1xuICAgIGlmICghY2FyZC5jbG96ZSkgcmV0dXJuO1xuXG4gICAgY29uc3QgYW5zd2VyQXJlYSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdhbnN3ZXItYXJlYScgfSk7XG4gICAgY29uc3QgaXNPcmlnaW5hbFRhYmxlID0gVGFibGVSZW5kZXJlci5pc1RhYmxlRm9ybWF0KGNhcmQuY2xvemUub3JpZ2luYWwpO1xuXG4gICAgaWYgKGlzT3JpZ2luYWxUYWJsZSkge1xuICAgICAgdGhpcy5yZW5kZXJUYWJsZUFuc3dlcihhbnN3ZXJBcmVhLCBjYXJkLCBzdGF0ZSwgc2NoZWR1bGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW5kZXJUZXh0QW5zd2VyKGFuc3dlckFyZWEsIGNhcmQsIHN0YXRlLCBzY2hlZHVsZXIpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyVGFibGVBbnN3ZXIoXG4gICAgYW5zd2VyQXJlYTogSFRNTEVsZW1lbnQsXG4gICAgY2FyZDogRmxhc2hjYXJkLFxuICAgIHN0YXRlOiBSZXZpZXdTdGF0ZSxcbiAgICBzY2hlZHVsZXI6IENhcmRTY2hlZHVsZXJcbiAgKSB7XG4gICAgY29uc3QgY29sdW1uc0NvbnRhaW5lciA9IGFuc3dlckFyZWEuY3JlYXRlRGl2KHsgY2xzOiAnY2xvemUtdGFibGUtY29sdW1ucycgfSk7XG4gICAgXG4gICAgLy8gXHU1REU2XHU1MjE3XHVGRjFBXHU2QjYzXHU3ODZFXHU3QjU0XHU2ODQ4XG4gICAgY29uc3QgY29ycmVjdENvbHVtbiA9IGNvbHVtbnNDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncWEtY29sdW1uJyB9KTtcbiAgICBjb3JyZWN0Q29sdW1uLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0NvcnJlY3QgQW5zd2VyOicsIGNsczogJ2NvbHVtbi1sYWJlbCcgfSk7XG4gICAgY29uc3QgY29ycmVjdERpdiA9IGNvcnJlY3RDb2x1bW4uY3JlYXRlRGl2KHsgY2xzOiAnY29tcGFyaXNvbi1pdGVtJyB9KTtcbiAgICBjb25zdCB0YWJsZUVsID0gVGFibGVSZW5kZXJlci5yZW5kZXJUYWJsZShjYXJkLmNsb3plIS5vcmlnaW5hbCwgdHJ1ZSk7XG4gICAgY29ycmVjdERpdi5hcHBlbmRDaGlsZCh0YWJsZUVsKTtcbiAgICBjb3JyZWN0RGl2LmNsYXNzTGlzdC5hZGQoJ3RhYmxlLWFuc3dlcicpO1xuICAgIFxuICAgIC8vIFx1NTNGM1x1NTIxN1x1RkYxQVx1NzUyOFx1NjIzN1x1N0I1NFx1Njg0OFxuICAgIGNvbnN0IHVzZXJDb2x1bW4gPSBjb2x1bW5zQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3FhLWNvbHVtbicgfSk7XG4gICAgdXNlckNvbHVtbi5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdZb3VyIEFuc3dlcjonLCBjbHM6ICdjb2x1bW4tbGFiZWwnIH0pO1xuICAgIGNvbnN0IHVzZXJEaXYgPSB1c2VyQ29sdW1uLmNyZWF0ZURpdih7IGNsczogJ2NvbXBhcmlzb24taXRlbScgfSk7XG4gICAgXG4gICAgaWYgKHN0YXRlLnVzZXJBbnN3ZXJzLmxlbmd0aCA+IDAgJiYgc3RhdGUudXNlckFuc3dlcnMuc29tZShhID0+IGEudHJpbSgpKSkge1xuICAgICAgY29uc3QgdXNlclRhYmxlRWwgPSBUYWJsZVJlbmRlcmVyLnJlbmRlclRhYmxlV2l0aFVzZXJBbnN3ZXJzKFxuICAgICAgICBjYXJkLmNsb3plIS5vcmlnaW5hbCxcbiAgICAgICAgY2FyZC5jbG96ZSEuZGVsZXRpb25zLFxuICAgICAgICBzdGF0ZS51c2VyQW5zd2VycyxcbiAgICAgICAgc2NoZWR1bGVyXG4gICAgICApO1xuICAgICAgdXNlckRpdi5hcHBlbmRDaGlsZCh1c2VyVGFibGVFbCk7XG4gICAgICB1c2VyRGl2LmNsYXNzTGlzdC5hZGQoJ3RhYmxlLWFuc3dlcicpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBlbXB0eVRhYmxlRWwgPSBUYWJsZVJlbmRlcmVyLnJlbmRlclRhYmxlKGNhcmQuZnJvbnQsIGZhbHNlKTtcbiAgICAgIHVzZXJEaXYuYXBwZW5kQ2hpbGQoZW1wdHlUYWJsZUVsKTtcbiAgICAgIHVzZXJEaXYuY2xhc3NMaXN0LmFkZCgndGFibGUtYW5zd2VyJywgJ25vLWFuc3dlcicpO1xuICAgIH1cblxuICAgIC8vIFx1OEJFNlx1N0VDNlx1NUJGOVx1NkJENFxuICAgIHRoaXMucmVuZGVyRGV0YWlsZWRDb21wYXJpc29uKGFuc3dlckFyZWEsIGNhcmQsIHN0YXRlLCBzY2hlZHVsZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJUZXh0QW5zd2VyKFxuICAgIGFuc3dlckFyZWE6IEhUTUxFbGVtZW50LFxuICAgIGNhcmQ6IEZsYXNoY2FyZCxcbiAgICBzdGF0ZTogUmV2aWV3U3RhdGUsXG4gICAgc2NoZWR1bGVyOiBDYXJkU2NoZWR1bGVyXG4gICkge1xuICAgIGNvbnN0IGZ1bGxUZXh0ID0gYW5zd2VyQXJlYS5jcmVhdGVEaXYoeyBjbHM6ICdmdWxsLXRleHQnIH0pO1xuICAgIGZ1bGxUZXh0LnRleHRDb250ZW50ID0gY2FyZC5jbG96ZSEub3JpZ2luYWw7XG4gICAgXG4gICAgdGhpcy5yZW5kZXJEZXRhaWxlZENvbXBhcmlzb24oYW5zd2VyQXJlYSwgY2FyZCwgc3RhdGUsIHNjaGVkdWxlcik7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckRldGFpbGVkQ29tcGFyaXNvbihcbiAgICBhbnN3ZXJBcmVhOiBIVE1MRWxlbWVudCxcbiAgICBjYXJkOiBGbGFzaGNhcmQsXG4gICAgc3RhdGU6IFJldmlld1N0YXRlLFxuICAgIHNjaGVkdWxlcjogQ2FyZFNjaGVkdWxlclxuICApIHtcbiAgICBpZiAoc3RhdGUudXNlckFuc3dlcnMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBjb25zdCBjb21wYXJpc29uID0gYW5zd2VyQXJlYS5jcmVhdGVEaXYoeyBjbHM6ICdhbnN3ZXItY29tcGFyaXNvbicgfSk7XG4gICAgY29tcGFyaXNvbi5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdBbnN3ZXIgRGV0YWlsczonIH0pO1xuXG4gICAgY2FyZC5jbG96ZSEuZGVsZXRpb25zLmZvckVhY2goKGRlbGV0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgaXRlbSA9IGNvbXBhcmlzb24uY3JlYXRlRGl2KHsgY2xzOiAnY29tcGFyaXNvbi1pdGVtJyB9KTtcbiAgICAgIGl0ZW0uY3JlYXRlU3Bhbih7IHRleHQ6IGAke2luZGV4ICsgMX0uIGAgfSk7XG5cbiAgICAgIGNvbnN0IHVzZXJBbnN3ZXIgPSBzdGF0ZS51c2VyQW5zd2Vyc1tpbmRleF0gfHwgJyc7XG4gICAgICBjb25zdCBldmFsdWF0aW9uID0gc2NoZWR1bGVyLmV2YWx1YXRlQW5zd2VyKGRlbGV0aW9uLmFuc3dlciwgdXNlckFuc3dlcik7XG5cbiAgICAgIGl0ZW0uY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgIHRleHQ6IHVzZXJBbnN3ZXIgfHwgJyhlbXB0eSknLFxuICAgICAgICBjbHM6IGB1c2VyLWFuc3dlciAke2V2YWx1YXRpb24uY29ycmVjdG5lc3N9YFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGl0ZW0uY3JlYXRlU3Bhbih7IHRleHQ6ICcgXHUyMTkyICcgfSk7XG4gICAgICBcbiAgICAgIGl0ZW0uY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgIHRleHQ6IGRlbGV0aW9uLmFuc3dlcixcbiAgICAgICAgY2xzOiAnY29ycmVjdC1hbnN3ZXInXG4gICAgICB9KTtcblxuICAgICAgaWYgKGV2YWx1YXRpb24uY29ycmVjdG5lc3MgPT09ICdwYXJ0aWFsJykge1xuICAgICAgICBpdGVtLmNyZWF0ZUVsKCdzbWFsbCcsIHtcbiAgICAgICAgICB0ZXh0OiBgICgke01hdGgucm91bmQoZXZhbHVhdGlvbi5zaW1pbGFyaXR5ICogMTAwKX0lIG1hdGNoKWAsXG4gICAgICAgICAgY2xzOiAnc2ltaWxhcml0eS1pbmZvJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBcdTk1RUVcdTdCNTRcdTUzNjFcdTcyNDdcdTZFMzJcdTY3RDNcdTU2Njhcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmV4cG9ydCBjbGFzcyBRQUNhcmRSZW5kZXJlciBpbXBsZW1lbnRzIENhcmRSZW5kZXJTdHJhdGVneSB7XG4gIHJlbmRlclF1ZXN0aW9uKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGNhcmQ6IEZsYXNoY2FyZCwgc3RhdGU6IFJldmlld1N0YXRlKTogdm9pZCB7XG4gICAgLy8gXHU5NUVFXHU5ODk4XHU2NTg3XHU2NzJDXG4gICAgY29uc3QgcXVlc3Rpb25UZXh0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3F1ZXN0aW9uLXRleHQnIH0pO1xuICAgIGNvbnN0IGlzVGFibGUgPSBUYWJsZVJlbmRlcmVyLmlzVGFibGVGb3JtYXQoY2FyZC5mcm9udCk7XG4gICAgXG4gICAgaWYgKGlzVGFibGUpIHtcbiAgICAgIGNvbnN0IHRhYmxlRWwgPSBUYWJsZVJlbmRlcmVyLnJlbmRlclRhYmxlKGNhcmQuZnJvbnQsIGZhbHNlKTtcbiAgICAgIHF1ZXN0aW9uVGV4dC5hcHBlbmRDaGlsZCh0YWJsZUVsKTtcbiAgICAgIHF1ZXN0aW9uVGV4dC5jbGFzc0xpc3QuYWRkKCd0YWJsZS1xdWVzdGlvbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICBxdWVzdGlvblRleHQudGV4dENvbnRlbnQgPSBjYXJkLmZyb250O1xuICAgIH1cblxuICAgIC8vIFx1OEY5M1x1NTE2NVx1Njg0NlxuICAgIGNvbnN0IGlucHV0QXJlYSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdxYS1pbnB1dC1hcmVhJyB9KTtcbiAgICBpbnB1dEFyZWEuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnWW91ciBBbnN3ZXI6JyB9KTtcbiAgICBcbiAgICBjb25zdCB0ZXh0YXJlYSA9IGlucHV0QXJlYS5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICBwbGFjZWhvbGRlcjogJ1R5cGUgeW91ciBhbnN3ZXIgaGVyZS4uLicsXG4gICAgICBjbHM6ICdxYS1pbnB1dCcsXG4gICAgICB2YWx1ZTogc3RhdGUudXNlckFuc3dlclxuICAgIH0pO1xuICAgIFxuICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcbiAgICAgIHN0YXRlLnVzZXJBbnN3ZXIgPSAoZS50YXJnZXQgYXMgSFRNTFRleHRBcmVhRWxlbWVudCkudmFsdWU7XG4gICAgfSk7XG4gICAgXG4gICAgc2V0VGltZW91dCgoKSA9PiB0ZXh0YXJlYS5mb2N1cygpLCA1MCk7XG4gIH1cblxuICByZW5kZXJBbnN3ZXIoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICBjYXJkOiBGbGFzaGNhcmQsXG4gICAgc3RhdGU6IFJldmlld1N0YXRlLFxuICAgIHNjaGVkdWxlcjogQ2FyZFNjaGVkdWxlclxuICApOiB2b2lkIHtcbiAgICBjb25zdCBhbnN3ZXJBcmVhID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2Fuc3dlci1hcmVhJyB9KTtcbiAgICBcbiAgICAvLyBcdTgzQjdcdTUzRDZcdTZCNjNcdTc4NkVcdTdCNTRcdTY4NDhcbiAgICBjb25zdCBjb3JyZWN0QW5zd2VyID0gQXJyYXkuaXNBcnJheShjYXJkLmJhY2spIFxuICAgICAgPyAoY2FyZC5iYWNrWzBdIHx8IGNhcmQuYmFjay5qb2luKCdcXG4nKSlcbiAgICAgIDogY2FyZC5iYWNrIGFzIHN0cmluZztcbiAgICBcbiAgICBjb25zdCBpc1RhYmxlID0gVGFibGVSZW5kZXJlci5pc1RhYmxlRm9ybWF0KGNvcnJlY3RBbnN3ZXIpO1xuICAgIGNvbnN0IGV2YWx1YXRpb24gPSBzdGF0ZS51c2VyQW5zd2VyLnRyaW0oKSBcbiAgICAgID8gc2NoZWR1bGVyLmV2YWx1YXRlQW5zd2VyKGNvcnJlY3RBbnN3ZXIsIHN0YXRlLnVzZXJBbnN3ZXIpXG4gICAgICA6IG51bGw7XG5cbiAgICBjb25zdCBjb21wYXJpc29uID0gYW5zd2VyQXJlYS5jcmVhdGVEaXYoeyBcbiAgICAgIGNsczogJ2Fuc3dlci1jb21wYXJpc29uIHFhLWNvbXBhcmlzb24nIFxuICAgIH0pO1xuICAgIGNvbnN0IGNvbHVtbnNDb250YWluZXIgPSBjb21wYXJpc29uLmNyZWF0ZURpdih7IGNsczogJ3FhLWNvbHVtbnMtY29udGFpbmVyJyB9KTtcbiAgICBcbiAgICAvLyBcdTVERTZcdTUyMTdcdUZGMUFcdTZCNjNcdTc4NkVcdTdCNTRcdTY4NDhcbiAgICB0aGlzLnJlbmRlckNvcnJlY3RBbnN3ZXJDb2x1bW4oY29sdW1uc0NvbnRhaW5lciwgY29ycmVjdEFuc3dlciwgaXNUYWJsZSk7XG4gICAgXG4gICAgLy8gXHU1M0YzXHU1MjE3XHVGRjFBXHU3NTI4XHU2MjM3XHU3QjU0XHU2ODQ4XG4gICAgdGhpcy5yZW5kZXJVc2VyQW5zd2VyQ29sdW1uKFxuICAgICAgY29sdW1uc0NvbnRhaW5lciwgXG4gICAgICBzdGF0ZS51c2VyQW5zd2VyLCBcbiAgICAgIGlzVGFibGUsIFxuICAgICAgZXZhbHVhdGlvblxuICAgICk7XG5cbiAgICAvLyBcdTc2RjhcdTRGM0NcdTVFQTZcdTRGRTFcdTYwNkZcbiAgICBpZiAoZXZhbHVhdGlvbj8uY29ycmVjdG5lc3MgPT09ICdwYXJ0aWFsJykge1xuICAgICAgY29uc3Qgc2ltaWxhcml0eUluZm8gPSBjb21wYXJpc29uLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgIGNsczogJ3NpbWlsYXJpdHktaW5mbyBxYS1zaW1pbGFyaXR5J1xuICAgICAgfSk7XG4gICAgICBzaW1pbGFyaXR5SW5mby50ZXh0Q29udGVudCA9IGBTaW1pbGFyaXR5OiAke01hdGgucm91bmQoZXZhbHVhdGlvbi5zaW1pbGFyaXR5ICogMTAwKX0lYDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckNvcnJlY3RBbnN3ZXJDb2x1bW4oXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICBjb3JyZWN0QW5zd2VyOiBzdHJpbmcsXG4gICAgaXNUYWJsZTogYm9vbGVhblxuICApIHtcbiAgICBjb25zdCBjb3JyZWN0Q29sdW1uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3FhLWNvbHVtbicgfSk7XG4gICAgY29ycmVjdENvbHVtbi5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdDb3JyZWN0IEFuc3dlcjonLCBjbHM6ICdjb2x1bW4tbGFiZWwnIH0pO1xuICAgIGNvbnN0IGNvcnJlY3RBbnN3ZXJEaXYgPSBjb3JyZWN0Q29sdW1uLmNyZWF0ZURpdih7IGNsczogJ2NvbXBhcmlzb24taXRlbScgfSk7XG4gICAgXG4gICAgaWYgKGlzVGFibGUpIHtcbiAgICAgIGNvbnN0IHRhYmxlRWwgPSBUYWJsZVJlbmRlcmVyLnJlbmRlclRhYmxlKGNvcnJlY3RBbnN3ZXIsIHRydWUpO1xuICAgICAgY29ycmVjdEFuc3dlckRpdi5hcHBlbmRDaGlsZCh0YWJsZUVsKTtcbiAgICAgIGNvcnJlY3RBbnN3ZXJEaXYuY2xhc3NMaXN0LmFkZCgndGFibGUtYW5zd2VyJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvcnJlY3RBbnN3ZXJEaXYuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgdGV4dDogY29ycmVjdEFuc3dlcixcbiAgICAgICAgY2xzOiAnY29ycmVjdC1hbnN3ZXIgcWEtY29ycmVjdC1hbnN3ZXInXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclVzZXJBbnN3ZXJDb2x1bW4oXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICB1c2VyQW5zd2VyOiBzdHJpbmcsXG4gICAgaXNUYWJsZTogYm9vbGVhbixcbiAgICBldmFsdWF0aW9uOiBhbnlcbiAgKSB7XG4gICAgY29uc3QgdXNlckNvbHVtbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdxYS1jb2x1bW4nIH0pO1xuICAgIHVzZXJDb2x1bW4uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnWW91ciBBbnN3ZXI6JywgY2xzOiAnY29sdW1uLWxhYmVsJyB9KTtcbiAgICBjb25zdCB1c2VyQW5zd2VyRGl2ID0gdXNlckNvbHVtbi5jcmVhdGVEaXYoeyBjbHM6ICdjb21wYXJpc29uLWl0ZW0nIH0pO1xuXG4gICAgY29uc3QgaXNVc2VyQW5zd2VyVGFibGUgPSBUYWJsZVJlbmRlcmVyLmlzVGFibGVGb3JtYXQodXNlckFuc3dlci50cmltKCkpO1xuICAgIGNvbnN0IHNob3VsZFJlbmRlckFzVGFibGUgPSBpc1VzZXJBbnN3ZXJUYWJsZSB8fCAoaXNUYWJsZSAmJiB1c2VyQW5zd2VyLnRyaW0oKSk7XG5cbiAgICBpZiAoc2hvdWxkUmVuZGVyQXNUYWJsZSAmJiB1c2VyQW5zd2VyLnRyaW0oKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXNlclRhYmxlRWwgPSBUYWJsZVJlbmRlcmVyLnJlbmRlclRhYmxlKHVzZXJBbnN3ZXIsIHRydWUpO1xuICAgICAgICB1c2VyQW5zd2VyRGl2LmFwcGVuZENoaWxkKHVzZXJUYWJsZUVsKTtcbiAgICAgICAgdXNlckFuc3dlckRpdi5jbGFzc0xpc3QuYWRkKCd0YWJsZS1hbnN3ZXInKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChldmFsdWF0aW9uKSB7XG4gICAgICAgICAgdXNlckFuc3dlckRpdi5jbGFzc0xpc3QuYWRkKCd1c2VyLWFuc3dlcicsIGV2YWx1YXRpb24uY29ycmVjdG5lc3MpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aGlzLnJlbmRlclRleHRVc2VyQW5zd2VyKHVzZXJBbnN3ZXJEaXYsIHVzZXJBbnN3ZXIsIGV2YWx1YXRpb24pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbmRlclRleHRVc2VyQW5zd2VyKHVzZXJBbnN3ZXJEaXYsIHVzZXJBbnN3ZXIsIGV2YWx1YXRpb24pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyVGV4dFVzZXJBbnN3ZXIoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICB1c2VyQW5zd2VyOiBzdHJpbmcsXG4gICAgZXZhbHVhdGlvbjogYW55XG4gICkge1xuICAgIGNvbnN0IHVzZXJBbnN3ZXJFbGVtZW50ID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICB0ZXh0OiB1c2VyQW5zd2VyLnRyaW0oKSB8fCAnKG5vIGFuc3dlciBwcm92aWRlZCknLFxuICAgICAgY2xzOiAncWEtdXNlci1hbnN3ZXInXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKGV2YWx1YXRpb24pIHtcbiAgICAgIHVzZXJBbnN3ZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3VzZXItYW5zd2VyJywgZXZhbHVhdGlvbi5jb3JyZWN0bmVzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVzZXJBbnN3ZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ25vLWFuc3dlcicpO1xuICAgIH1cbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBcdTUzNjFcdTcyNDdcdTZFMzJcdTY3RDNcdTU2NjhcdTVERTVcdTUzODJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmV4cG9ydCBjbGFzcyBDYXJkUmVuZGVyZXJGYWN0b3J5IHtcbiAgcHJpdmF0ZSBzdGF0aWMgcmVuZGVyZXJzID0gbmV3IE1hcDxzdHJpbmcsIENhcmRSZW5kZXJTdHJhdGVneT4oW1xuICAgIFsnY2xvemUnLCBuZXcgQ2xvemVDYXJkUmVuZGVyZXIoKV0sXG4gICAgWydxYScsIG5ldyBRQUNhcmRSZW5kZXJlcigpXVxuICBdKTtcblxuICBzdGF0aWMgZ2V0UmVuZGVyZXIoY2FyZFR5cGU6IHN0cmluZyk6IENhcmRSZW5kZXJTdHJhdGVneSB7XG4gICAgY29uc3QgcmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVycy5nZXQoY2FyZFR5cGUpO1xuICAgIGlmICghcmVuZGVyZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBjYXJkIHR5cGU6ICR7Y2FyZFR5cGV9YCk7XG4gICAgfVxuICAgIHJldHVybiByZW5kZXJlcjtcbiAgfVxufSIsICIvKipcbiAqIFx1NjgzN1x1NUYwRlx1NTJBMFx1OEY3RFx1NTY2OCAtIFx1OEQxRlx1OEQyM1x1NkNFOFx1NTE2NVx1NTQ4Q1x1N0JBMVx1NzQwNiBDU1NcbiAqL1xuZXhwb3J0IGNsYXNzIHJldmlld1N0eWxlIHtcbiAgICBwcml2YXRlIHN0YXRpYyBzdHlsZUlkID0gJ2xlYXJuaW5nLXJldmlldy1zdHlsZXMnO1xuICAgIHByaXZhdGUgc3RhdGljIGlzSW5qZWN0ZWQgPSBmYWxzZTtcbiAgXG4gICAgLyoqXG4gICAgICogXHU2Q0U4XHU1MTY1XHU2ODM3XHU1RjBGXHU1MjMwXHU5ODc1XHU5NzYyXG4gICAgICovXG4gICAgc3RhdGljIGluamVjdCgpOiB2b2lkIHtcbiAgICAgIGlmICh0aGlzLmlzSW5qZWN0ZWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zdHlsZUlkKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gIFxuICAgICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBzdHlsZUVsLmlkID0gdGhpcy5zdHlsZUlkO1xuICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IHRoaXMuZ2V0U3R5bGVzKCk7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICAgICAgXG4gICAgICB0aGlzLmlzSW5qZWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgXG4gICAgLyoqXG4gICAgICogXHU3OUZCXHU5NjY0XHU2ODM3XHU1RjBGXG4gICAgICovXG4gICAgc3RhdGljIHJlbW92ZSgpOiB2b2lkIHtcbiAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnN0eWxlSWQpO1xuICAgICAgaWYgKHN0eWxlRWwpIHtcbiAgICAgICAgc3R5bGVFbC5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5pc0luamVjdGVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICBcbiAgICAvKipcbiAgICAgKiBcdTgzQjdcdTUzRDZcdTYyNDBcdTY3MDlcdTY4MzdcdTVGMEZcdUZGMDhcdTRFQ0VcdThGRDlcdTkxQ0NcdTdFREZcdTRFMDBcdTdCQTFcdTc0MDZcdUZGMDlcbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXRpYyBnZXRTdHlsZXMoKTogc3RyaW5nIHtcbiAgICAgIHJldHVybiBgXG4gICAgICAgLnJldmlldy1jb250YWluZXIge1xuICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICBtYXgtd2lkdGg6IDgwMHB4O1xuICAgICAgICBtYXJnaW46IDAgYXV0bztcbiAgICAgIH1cblxuICAgICAgLmVtcHR5LXN0YXRlIHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBwYWRkaW5nOiA0MHB4IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5lbXB0eS1zdGF0ZSBoMiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMS44ZW07XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgIH1cblxuICAgICAgLnN0YXRzLXN1bW1hcnkge1xuICAgICAgICBtYXJnaW46IDIwcHggMDtcbiAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICAgIG1heC13aWR0aDogMzAwcHg7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IGF1dG87XG4gICAgICB9XG5cbiAgICAgIC5wcm9ncmVzcy1iYXIge1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgICAgfVxuXG4gICAgICAucHJvZ3Jlc3Mtc3RhdHMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgIH1cblxuICAgICAgLnByb2dyZXNzLXRleHQge1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgIH1cblxuICAgICAgLmJhci1jb250YWluZXIge1xuICAgICAgICBoZWlnaHQ6IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICB9XG5cbiAgICAgIC5iYXIge1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIHRyYW5zaXRpb246IHdpZHRoIDAuM3MgZWFzZTtcbiAgICAgIH1cblxuICAgICAgLmNhcmQtYXJlYSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgbWluLWhlaWdodDogMzUwcHg7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIH1cblxuICAgICAgLnRvcC1hY3Rpb25zLWJhciB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiAxNnB4O1xuICAgICAgICByaWdodDogMTZweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgIHotaW5kZXg6IDEwO1xuICAgICAgfVxuXG4gICAgICAudG9wLWFjdGlvbi1idG4ge1xuICAgICAgICB3aWR0aDogMzJweDtcbiAgICAgICAgaGVpZ2h0OiAzMnB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgcGFkZGluZzogMDtcbiAgICAgIH1cblxuICAgICAgLnRvcC1hY3Rpb24tYnRuOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLm1vcmUtZHJvcGRvd24ge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogMzhweDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxMnB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG4gICAgICAgIG1pbi13aWR0aDogMTUwcHg7XG4gICAgICAgIHotaW5kZXg6IDEwMDtcbiAgICAgIH1cblxuICAgICAgLmRyb3Bkb3duLWl0ZW0ge1xuICAgICAgICBwYWRkaW5nOiA4cHggMTRweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuMnM7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICB9XG5cbiAgICAgIC5kcm9wZG93bi1pdGVtOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5kZWxldGUtaXRlbTpob3ZlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItZXJyb3ItaG92ZXIpO1xuICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItcmVkKTtcbiAgICAgIH1cblxuICAgICAgLmNhcmQtaW5mbyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogMTBweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTZweDtcbiAgICAgICAgcGFkZGluZy1ib3R0b206IDEycHg7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIHBhZGRpbmctcmlnaHQ6IDgwcHg7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkLXR5cGUsIC5jYXJkLWRlY2sge1xuICAgICAgICBwYWRkaW5nOiAzcHggMTBweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgIH1cblxuICAgICAgLnF1ZXN0aW9uLWFyZWEsIC5hbnN3ZXItYXJlYSB7XG4gICAgICAgIG1hcmdpbjogMTZweCAwO1xuICAgICAgfVxuXG4gICAgICAucXVlc3Rpb24tdGV4dCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMS4yZW07XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgICAgIHBhZGRpbmc6IDE0cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtaW5wdXQtYXJlYSwgLnFhLWlucHV0LWFyZWEge1xuICAgICAgICBtYXJnaW46IDE2cHggMDtcbiAgICAgIH1cblxuICAgICAgLmNsb3plLWlucHV0LWFyZWEgaDQsIC5xYS1pbnB1dC1hcmVhIGg0IHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgfVxuXG4gICAgICAuaW5wdXQtZ3JvdXAge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtaW5wdXQge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45NWVtO1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtaW5wdXQ6Zm9jdXMsIC5xYS1pbnB1dDpmb2N1cyB7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgYm94LXNoYWRvdzogMCAwIDAgMnB4IHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5xYS1pbnB1dCB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBtaW4taGVpZ2h0OiAxMDBweDtcbiAgICAgICAgcGFkZGluZzogMTBweCAxMnB4O1xuICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgZm9udC1zaXplOiAwLjk1ZW07XG4gICAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xuICAgICAgICByZXNpemU6IHZlcnRpY2FsO1xuICAgICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgfVxuXG4gICAgICAucXVlc3Rpb24tcmV2aWV3IHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnktYWx0KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgfVxuXG4gICAgICAucXVlc3Rpb24tcmV2aWV3IGg0IHtcbiAgICAgICAgbWFyZ2luOiAwIDAgNnB4IDA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICB9XG5cbiAgICAgIC5yZXZpZXctdGV4dCB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgZm9udC1zaXplOiAwLjk1ZW07XG4gICAgICB9XG5cbiAgICAgIC5mdWxsLXRleHQge1xuICAgICAgICBmb250LXNpemU6IDEuMWVtO1xuICAgICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDtcbiAgICAgIH1cblxuICAgICAgLmFuc3dlci1jb21wYXJpc29uIHtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnktYWx0KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICBtYXJnaW4tdG9wOiAxMnB4O1xuICAgICAgfVxuXG4gICAgICAuYW5zd2VyLWNvbXBhcmlzb24gaDQge1xuICAgICAgICBtYXJnaW46IDAgMCA4cHggMDtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgIH1cblxuICAgICAgLmNvbXBhcmlzb24taXRlbSB7XG4gICAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC51c2VyLWFuc3dlciB7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIHBhZGRpbmc6IDJweCA2cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgIH1cblxuICAgICAgLnVzZXItYW5zd2VyLmNvcnJlY3Qge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLXN1Y2Nlc3MsICM0Y2FmNTApICFpbXBvcnRhbnQ7XG4gICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xuICAgICAgfVxuXG4gICAgICAudXNlci1hbnN3ZXIucGFydGlhbCB7XG4gICAgICAgIGJhY2tncm91bmQ6ICNGRkMwMDAgIWltcG9ydGFudDtcbiAgICAgICAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cbiAgICAgIC51c2VyLWFuc3dlci53cm9uZyB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItZXJyb3IsICNmNDQzMzYpICFpbXBvcnRhbnQ7XG4gICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xuICAgICAgfVxuXG4gICAgICAuY29ycmVjdC1hbnN3ZXIge1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuc2ltaWxhcml0eS1pbmZvIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgfVxuXG4gICAgICAucWEtY29sdW1ucy1jb250YWluZXIge1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7XG4gICAgICAgIGdhcDogMTZweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDtcbiAgICAgIH1cblxuICAgICAgLnFhLWNvbHVtbiB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICB9XG5cbiAgICAgIC5jb2x1bW4tbGFiZWwge1xuICAgICAgICBtYXJnaW46IDAgMCA4cHggMCAhaW1wb3J0YW50O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgfVxuXG4gICAgICAucWEtdXNlci1hbnN3ZXIsIC5xYS1jb3JyZWN0LWFuc3dlciB7XG4gICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xuICAgICAgICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xuICAgICAgICBmb250LXNpemU6IDAuOTVlbTtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNTtcbiAgICAgICAgbWluLWhlaWdodDogNjBweDtcbiAgICAgIH1cblxuICAgICAgLnFhLWNvcnJlY3QtYW5zd2VyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgfVxuXG4gICAgICAucWEtdXNlci1hbnN3ZXIuY29ycmVjdCB7XG4gICAgICAgIGJhY2tncm91bmQ6ICM0Y2FmNTAgIWltcG9ydGFudDtcbiAgICAgICAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cbiAgICAgIC5xYS11c2VyLWFuc3dlci5wYXJ0aWFsIHtcbiAgICAgICAgYmFja2dyb3VuZDogI0ZGQzAwMCAhaW1wb3J0YW50O1xuICAgICAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgLnFhLXVzZXItYW5zd2VyLndyb25nIHtcbiAgICAgICAgYmFja2dyb3VuZDogI2Y0NDMzNiAhaW1wb3J0YW50O1xuICAgICAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgLnFhLXVzZXItYW5zd2VyLm5vLWFuc3dlciB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgICAgIGJvcmRlcjogMnB4IGRhc2hlZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICB9XG5cbiAgICAgIC5idXR0b24tYXJlYSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogMTJweDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zaG93LWFuc3dlci1idG4ge1xuICAgICAgICBwYWRkaW5nOiAxMHB4IDMycHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLWFyZWEge1xuICAgICAgICBtYXJnaW46IDE1cHggMCAxMHB4IDA7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIH1cblxuICAgICAgLnJhdGluZy1idXR0b25zIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiAyMHB4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgIH1cblxuICAgICAgLnJhdGluZy1idG4ge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBtYXgtd2lkdGg6IDEyMHB4O1xuICAgICAgICBwYWRkaW5nOiAxNHB4IDhweDtcbiAgICAgICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbmctYnRuOmhvdmVyIHtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpO1xuICAgICAgICBib3gtc2hhZG93OiAwIDNweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgIH1cblxuICAgICAgLnJhdGluZy1yZWQ6aG92ZXIgeyBcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1yZWQpO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLnJhdGluZy1vcmFuZ2U6aG92ZXIgeyBcbiAgICAgICAgYm9yZGVyLWNvbG9yOiAjRkZDMDAwO1xuICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMTkyLCAwLCAwLjEpO1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLWJsdWU6aG92ZXIgeyBcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLnJhdGluZy1ncmVlbjpob3ZlciB7IFxuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLWdyZWVuKTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1zdWNjZXNzLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLnJhdGluZy1sYWJlbCB7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICB9XG5cbiAgICAgIC5yYXRpbmctaW50ZXJ2YWwge1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLWhvdGtleSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMC43NWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIG1hcmdpbi10b3A6IDRweDtcbiAgICAgICAgb3BhY2l0eTogMC43O1xuICAgICAgfVxuXG4gICAgICAucmF0aW5nLWJ0bjpob3ZlciAucmF0aW5nLWhvdGtleSB7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICB9XG5cbiAgICAgIC5sZWFybmluZy1zeXN0ZW0tdGFibGUsIC5mbGFzaGNhcmQtcmV2aWV3LXRhYmxlIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XG4gICAgICAgIG1hcmdpbjogOHB4IDA7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICB9XG5cbiAgICAgIC5sZWFybmluZy1zeXN0ZW0tdGFibGUgdGgsIC5sZWFybmluZy1zeXN0ZW0tdGFibGUgdGQsXG4gICAgICAuZmxhc2hjYXJkLXJldmlldy10YWJsZSB0aCwgLmZsYXNoY2FyZC1yZXZpZXctdGFibGUgdGQge1xuICAgICAgICBwYWRkaW5nOiAxMHB4IDEycHg7XG4gICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgIH1cblxuICAgICAgLmxlYXJuaW5nLXN5c3RlbS10YWJsZSB0aCwgLmZsYXNoY2FyZC1yZXZpZXctdGFibGUgdGgge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICB9XG5cbiAgICAgIC5sZWFybmluZy1zeXN0ZW0tdGFibGUgdHI6aG92ZXIsIC5mbGFzaGNhcmQtcmV2aWV3LXRhYmxlIHRyOmhvdmVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICB9XG5cbiAgICAgIC5jbG96ZS1ibGFuayB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgbWluLXdpZHRoOiA2MHB4O1xuICAgICAgICBwYWRkaW5nOiAycHggOHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlcjogMnB4IGRhc2hlZCB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICB9XG5cbiAgICAgIG1hcmsucmV2ZWFsZWQge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS10ZXh0LWhpZ2hsaWdodC1iZyk7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgIHBhZGRpbmc6IDJweCA0cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgIH1cblxuICAgICAgLnRhYmxlLWFuc3dlciwgLnRhYmxlLXF1ZXN0aW9uIHtcbiAgICAgICAgcGFkZGluZzogMCAhaW1wb3J0YW50O1xuICAgICAgfVxuXG4gICAgICAuY2xvemUtdGFibGUtY29sdW1ucyB7XG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjtcbiAgICAgICAgZ2FwOiAxNnB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgICAgfVxuXG4gICAgICAudXNlci1hbnN3ZXItY2VsbCB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgcGFkZGluZzogMnB4IDZweDtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgfVxuXG4gICAgICAudXNlci1hbnN3ZXItY2VsbC5jb3JyZWN0IHtcbiAgICAgICAgYmFja2dyb3VuZDogIzRjYWY1MCAhaW1wb3J0YW50O1xuICAgICAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgLnVzZXItYW5zd2VyLWNlbGwucGFydGlhbCB7XG4gICAgICAgIGJhY2tncm91bmQ6ICNGRkMwMDAgIWltcG9ydGFudDtcbiAgICAgICAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cbiAgICAgIC51c2VyLWFuc3dlci1jZWxsLndyb25nIHtcbiAgICAgICAgYmFja2dyb3VuZDogI2Y0NDMzNiAhaW1wb3J0YW50O1xuICAgICAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgYFxuICAgICAgO1xuICAgIH1cbiAgfSIsICIvLyBzdGFzVmlldy50c1xuaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi8uLi9tYWluJztcbmltcG9ydCB7IEFuYWx5dGljc0VuZ2luZSB9IGZyb20gJy4uLy4uL2NvcmUvQW5hbHl0aWNzRW5naW5lJztcblxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9TVEFUUyA9ICdsZWFybmluZy1zeXN0ZW0tc3RhdHMnO1xuXG5leHBvcnQgY2xhc3MgU3RhdHNWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luO1xuICBwcml2YXRlIGFuYWx5dGljczogQW5hbHl0aWNzRW5naW5lO1xuICBwcml2YXRlIGN1cnJlbnRUYWI6ICdvdmVydmlldycgfCAndHJlbmRzJyB8ICdkZWNrcycgfCAnZGlmZmljdWx0JyA9ICdvdmVydmlldyc7XG5cbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBMZWFybmluZ1N5c3RlbVBsdWdpbikge1xuICAgIHN1cGVyKGxlYWYpO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMuYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljc0VuZ2luZShwbHVnaW4pO1xuICB9XG5cbiAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gVklFV19UWVBFX1NUQVRTO1xuICB9XG5cbiAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ0xlYXJuaW5nIFN0YXRpc3RpY3MnO1xuICB9XG5cbiAgZ2V0SWNvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiAnYmFyLWNoYXJ0JztcbiAgfVxuXG4gIGFzeW5jIG9uT3BlbigpIHtcbiAgICB0aGlzLnJlbmRlcigpO1xuICAgIHRoaXMuYWRkU3R5bGVzKCk7XG4gIH1cblxuICBhc3luYyBvbkNsb3NlKCkge31cblxuICBwcml2YXRlIHJlbmRlcigpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdO1xuICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgIGNvbnRhaW5lci5hZGRDbGFzcygnc3RhdHMtY29udGFpbmVyJyk7XG5cbiAgICAvLyBcdTY4MDdcdTk4OThcdTY4MEZcbiAgICBjb25zdCBoZWFkZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc3RhdHMtaGVhZGVyJyB9KTtcbiAgICBoZWFkZXIuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0NBIExlYXJuaW5nIFN0YXRpc3RpY3MnIH0pO1xuXG4gICAgLy8gXHU1MjM3XHU2NUIwXHU2MzA5XHU5NEFFXG4gICAgY29uc3QgcmVmcmVzaEJ0biA9IGhlYWRlci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgdGV4dDogJ1x1MjdGMycsXG4gICAgICBjbHM6ICdyZWZyZXNoLWJ0bidcbiAgICB9KTtcbiAgICByZWZyZXNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5yZW5kZXIoKSk7XG5cbiAgICAvLyBcdTY4MDdcdTdCN0VcdTk4NzVcbiAgICB0aGlzLnJlbmRlclRhYnMoY29udGFpbmVyKTtcblxuICAgIC8vIFx1NTE4NVx1NUJCOVx1NTMzQVx1NTdERlxuICAgIGNvbnN0IGNvbnRlbnQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc3RhdHMtY29udGVudCcgfSk7XG5cbiAgICBzd2l0Y2ggKHRoaXMuY3VycmVudFRhYikge1xuICAgICAgY2FzZSAnb3ZlcnZpZXcnOlxuICAgICAgICB0aGlzLnJlbmRlck92ZXJ2aWV3KGNvbnRlbnQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RyZW5kcyc6XG4gICAgICAgIHRoaXMucmVuZGVyVHJlbmRzKGNvbnRlbnQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2RlY2tzJzpcbiAgICAgICAgdGhpcy5yZW5kZXJEZWNrcyhjb250ZW50KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkaWZmaWN1bHQnOlxuICAgICAgICB0aGlzLnJlbmRlckRpZmZpY3VsdChjb250ZW50KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJUYWJzKGNvbnRhaW5lcjogRWxlbWVudCkge1xuICAgIGNvbnN0IHRhYnMgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc3RhdHMtdGFicycgfSk7XG5cbiAgICBjb25zdCB0YWJDb25maWdzID0gW1xuICAgICAgeyBpZDogJ292ZXJ2aWV3JywgbGFiZWw6ICdcdUQ4M0RcdURDQ0EgT3ZlcnZpZXcnIH0sXG4gICAgICB7IGlkOiAndHJlbmRzJywgbGFiZWw6ICdcdUQ4M0RcdURDQzggVHJlbmRzJyB9LFxuICAgICAgeyBpZDogJ2RlY2tzJywgbGFiZWw6ICdcdUQ4M0RcdURDREEgRGVja3MnIH0sXG4gICAgICB7IGlkOiAnZGlmZmljdWx0JywgbGFiZWw6ICdcdTI2QTBcdUZFMEYgRGlmZmljdWx0JyB9XG4gICAgXTtcblxuICAgIHRhYkNvbmZpZ3MuZm9yRWFjaChjb25maWcgPT4ge1xuICAgICAgY29uc3QgdGFiID0gdGFicy5jcmVhdGVEaXYoe1xuICAgICAgICBjbHM6IGB0YWIgJHt0aGlzLmN1cnJlbnRUYWIgPT09IGNvbmZpZy5pZCA/ICdhY3RpdmUnIDogJyd9YFxuICAgICAgfSk7XG4gICAgICB0YWIudGV4dENvbnRlbnQgPSBjb25maWcubGFiZWw7XG4gICAgICB0YWIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY3VycmVudFRhYiA9IGNvbmZpZy5pZCBhcyBhbnk7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyT3ZlcnZpZXcoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnN0IHN0YXRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRTdGF0cygpO1xuICAgIGNvbnN0IHsgdGhpc1dlZWssIGxhc3RXZWVrIH0gPSB0aGlzLmFuYWx5dGljcy5nZXRXZWVrbHlTdGF0cygpO1xuICAgIGNvbnN0IGRhaWx5U3RhdHMgPSB0aGlzLmFuYWx5dGljcy5nZXREYWlseVN0YXRzKDcpO1xuXG4gICAgLy8gXHU1MTczXHU5NTJFXHU2MzA3XHU2ODA3XHU1MzYxXHU3MjQ3XG4gICAgY29uc3QgbWV0cmljc0dyaWQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbWV0cmljcy1ncmlkJyB9KTtcblxuICAgIHRoaXMuY3JlYXRlTWV0cmljQ2FyZChtZXRyaWNzR3JpZCwge1xuICAgICAgdGl0bGU6ICdUb3RhbCBDYXJkcycsXG4gICAgICB2YWx1ZTogc3RhdHMudG90YWwudG9TdHJpbmcoKSxcbiAgICAgIGljb246ICdcdUQ4M0NcdURDQ0YnXG4gICAgfSk7XG5cbiAgICB0aGlzLmNyZWF0ZU1ldHJpY0NhcmQobWV0cmljc0dyaWQsIHtcbiAgICAgIHRpdGxlOiAnRHVlIFRvZGF5JyxcbiAgICAgIHZhbHVlOiBzdGF0cy5kdWUudG9TdHJpbmcoKSxcbiAgICAgIGljb246ICdcdUQ4M0RcdURDQzUnXG4gICAgfSk7XG5cbiAgICB0aGlzLmNyZWF0ZU1ldHJpY0NhcmQobWV0cmljc0dyaWQsIHtcbiAgICAgIHRpdGxlOiAnUmV2aWV3ZWQgVG9kYXknLFxuICAgICAgdmFsdWU6IHN0YXRzLnJldmlld2VkVG9kYXkudG9TdHJpbmcoKSxcbiAgICAgIGljb246ICdcdTI3MDUnXG4gICAgfSk7XG5cbiAgICBjb25zdCBzdHJlYWsgPSB0aGlzLmFuYWx5dGljcy5jYWxjdWxhdGVTdHJlYWsoKTtcbiAgICB0aGlzLmNyZWF0ZU1ldHJpY0NhcmQobWV0cmljc0dyaWQsIHtcbiAgICAgIHRpdGxlOiAnQ3VycmVudCBTdHJlYWsnLFxuICAgICAgdmFsdWU6IGAke3N0cmVha30gZGF5c2AsXG4gICAgICBpY29uOiAnXHVEODNEXHVERDI1J1xuICAgIH0pO1xuXG4gICAgLy8gXHU2NzJDXHU1NDY4IHZzIFx1NEUwQVx1NTQ2OFxuICAgIGNvbnN0IHdlZWtDb21wYXJpc29uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3dlZWstY29tcGFyaXNvbicgfSk7XG4gICAgd2Vla0NvbXBhcmlzb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVGhpcyBXZWVrIHZzIExhc3QgV2VlaycgfSk7XG5cbiAgICBjb25zdCBjb21wYXJpc29uR3JpZCA9IHdlZWtDb21wYXJpc29uLmNyZWF0ZURpdih7IGNsczogJ2NvbXBhcmlzb24tZ3JpZCcgfSk7XG5cbiAgICBjb25zdCByZXZpZXdDaGFuZ2UgPSB0aGlzV2Vlay50b3RhbFJldmlld3MgLSBsYXN0V2Vlay50b3RhbFJldmlld3M7XG4gICAgY29uc3QgcmV2aWV3Q2hhbmdlUGVyY2VudCA9IGxhc3RXZWVrLnRvdGFsUmV2aWV3cyA+IDBcbiAgICAgID8gKChyZXZpZXdDaGFuZ2UgLyBsYXN0V2Vlay50b3RhbFJldmlld3MpICogMTAwKS50b0ZpeGVkKDEpXG4gICAgICA6ICcwJztcblxuICAgIHRoaXMuY3JlYXRlQ29tcGFyaXNvbkl0ZW0oY29tcGFyaXNvbkdyaWQsIHtcbiAgICAgIGxhYmVsOiAnUmV2aWV3cycsXG4gICAgICB0aGlzV2VlazogdGhpc1dlZWsudG90YWxSZXZpZXdzLFxuICAgICAgbGFzdFdlZWs6IGxhc3RXZWVrLnRvdGFsUmV2aWV3cyxcbiAgICAgIGNoYW5nZTogcmV2aWV3Q2hhbmdlLFxuICAgICAgY2hhbmdlUGVyY2VudDogcmV2aWV3Q2hhbmdlUGVyY2VudFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmF0ZUNoYW5nZSA9ICh0aGlzV2Vlay5hdmVyYWdlQ29ycmVjdFJhdGUgLSBsYXN0V2Vlay5hdmVyYWdlQ29ycmVjdFJhdGUpICogMTAwO1xuICAgIHRoaXMuY3JlYXRlQ29tcGFyaXNvbkl0ZW0oY29tcGFyaXNvbkdyaWQsIHtcbiAgICAgIGxhYmVsOiAnQ29ycmVjdCBSYXRlJyxcbiAgICAgIHRoaXNXZWVrOiBgJHsodGhpc1dlZWsuYXZlcmFnZUNvcnJlY3RSYXRlICogMTAwKS50b0ZpeGVkKDEpfSVgLFxuICAgICAgbGFzdFdlZWs6IGAkeyhsYXN0V2Vlay5hdmVyYWdlQ29ycmVjdFJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JWAsXG4gICAgICBjaGFuZ2U6IHJhdGVDaGFuZ2UsXG4gICAgICBjaGFuZ2VQZXJjZW50OiByYXRlQ2hhbmdlLnRvRml4ZWQoMSlcbiAgICB9KTtcblxuICAgIC8vIFx1NjcwMFx1OEZEMTdcdTU5MjlcdTZEM0JcdTUyQThcbiAgICBjb25zdCByZWNlbnRBY3Rpdml0eSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdyZWNlbnQtYWN0aXZpdHknIH0pO1xuICAgIHJlY2VudEFjdGl2aXR5LmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0xhc3QgNyBEYXlzIEFjdGl2aXR5JyB9KTtcblxuICAgIGNvbnN0IGFjdGl2aXR5Q2hhcnQgPSByZWNlbnRBY3Rpdml0eS5jcmVhdGVEaXYoeyBjbHM6ICdhY3Rpdml0eS1jaGFydCcgfSk7XG4gICAgdGhpcy5yZW5kZXJTaW1wbGVCYXJDaGFydChhY3Rpdml0eUNoYXJ0LCBkYWlseVN0YXRzKTtcblxuICAgIC8vIFx1NzUxRlx1NjIxMFx1NjJBNVx1NTQ0QVx1NjMwOVx1OTRBRVxuICAgIGNvbnN0IHJlcG9ydFNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncmVwb3J0LXNlY3Rpb24nIH0pO1xuICAgIGNvbnN0IHJlcG9ydEJ0biA9IHJlcG9ydFNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgIHRleHQ6ICdcdUQ4M0RcdURDQzQgR2VuZXJhdGUgRnVsbCBSZXBvcnQnLFxuICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICB9KTtcbiAgICByZXBvcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmdlbmVyYXRlQW5kU2hvd1JlcG9ydCgpKTtcbiAgXG4gIC8vIFx1NkUwNVx1OTY2NFx1N0VERlx1OEJBMVx1NjMwOVx1OTRBRVxuY29uc3QgY2xlYXJCdG4gPSByZXBvcnRTZWN0aW9uLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gIHRleHQ6ICdcdUQ4M0RcdURERDFcdUZFMEYgQ2xlYXIgU3RhdGlzdGljcycsXG4gIGNsczogJ21vZC13YXJuaW5nJ1xufSk7XG5jbGVhckJ0bi5zdHlsZS5tYXJnaW5MZWZ0ID0gJzEwcHgnO1xuY2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnNob3dDbGVhclN0YXRzTW9kYWwoKSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclRyZW5kcyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1BlcmZvcm1hbmNlIFRyZW5kcycgfSk7XG5cbiAgICBjb25zdCBkYWlseVN0YXRzID0gdGhpcy5hbmFseXRpY3MuZ2V0RGFpbHlTdGF0cygzMCk7XG5cbiAgICAvLyBcdTZCNjNcdTc4NkVcdTczODdcdThEOEJcdTUyQkZcbiAgICBjb25zdCBjb3JyZWN0UmF0ZVNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2hhcnQtc2VjdGlvbicgfSk7XG4gICAgY29ycmVjdFJhdGVTZWN0aW9uLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0NvcnJlY3QgUmF0ZSAoTGFzdCAzMCBEYXlzKScgfSk7XG4gICAgY29uc3QgY29ycmVjdFJhdGVDaGFydCA9IGNvcnJlY3RSYXRlU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICdsaW5lLWNoYXJ0JyB9KTtcbiAgICB0aGlzLnJlbmRlckxpbmVDaGFydChjb3JyZWN0UmF0ZUNoYXJ0LCBkYWlseVN0YXRzLCAnY29ycmVjdFJhdGUnKTtcblxuICAgIC8vIFx1NkJDRlx1NjVFNVx1NTkwRFx1NEU2MFx1OTFDRlxuICAgIGNvbnN0IHJldmlld3NTZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2NoYXJ0LXNlY3Rpb24nIH0pO1xuICAgIHJldmlld3NTZWN0aW9uLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0RhaWx5IFJldmlld3MnIH0pO1xuICAgIGNvbnN0IHJldmlld3NDaGFydCA9IHJldmlld3NTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ2Jhci1jaGFydCcgfSk7XG4gICAgdGhpcy5yZW5kZXJCYXJDaGFydChyZXZpZXdzQ2hhcnQsIGRhaWx5U3RhdHMpO1xuXG4gICAgLy8gXHU3MEVEXHU1MjlCXHU1NkZFXG4gICAgY29uc3QgaGVhdG1hcFNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2hhcnQtc2VjdGlvbicgfSk7XG4gICAgaGVhdG1hcFNlY3Rpb24uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnU3R1ZHkgQWN0aXZpdHkgQ2FsZW5kYXInIH0pO1xuICAgIGNvbnN0IGhlYXRtYXAgPSBoZWF0bWFwU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICdoZWF0bWFwJyB9KTtcbiAgICB0aGlzLnJlbmRlckhlYXRtYXAoaGVhdG1hcCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckRlY2tzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnRGVjayBTdGF0aXN0aWNzJyB9KTtcblxuICAgIGNvbnN0IGRlY2tTdGF0cyA9IHRoaXMuYW5hbHl0aWNzLmdldERlY2tTdGF0cygpO1xuXG4gICAgaWYgKGRlY2tTdGF0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnRhaW5lci5jcmVhdGVEaXYoeyBcbiAgICAgICAgdGV4dDogJ05vIGRlY2tzIHlldC4gQ3JlYXRlIHNvbWUgZmxhc2hjYXJkcyB0byBzZWUgZGVjayBzdGF0aXN0aWNzIScsXG4gICAgICAgIGNsczogJ2VtcHR5LW1lc3NhZ2UnXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBkZWNrc0dyaWQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZGVja3MtZ3JpZCcgfSk7XG5cbiAgICBkZWNrU3RhdHMuZm9yRWFjaChkZWNrID0+IHtcbiAgICAgIGNvbnN0IGRlY2tDYXJkID0gZGVja3NHcmlkLmNyZWF0ZURpdih7IGNsczogJ2RlY2stY2FyZCcgfSk7XG5cbiAgICAgIGNvbnN0IGhlYWRlciA9IGRlY2tDYXJkLmNyZWF0ZURpdih7IGNsczogJ2RlY2stY2FyZC1oZWFkZXInIH0pO1xuICAgICAgaGVhZGVyLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogZGVjay5kZWNrTmFtZSB9KTtcbiAgICAgIFxuICAgICAgaGVhZGVyLmNyZWF0ZVNwYW4oe1xuICAgICAgICB0ZXh0OiBgJHtkZWNrLnRvdGFsQ2FyZHN9IGNhcmRzYCxcbiAgICAgICAgY2xzOiAnZGVjay1iYWRnZSdcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBzdGF0cyA9IGRlY2tDYXJkLmNyZWF0ZURpdih7IGNsczogJ2RlY2stY2FyZC1zdGF0cycgfSk7XG5cbiAgICAgIHRoaXMuY3JlYXRlU3RhdFJvdyhzdGF0cywgJ0R1ZScsIGRlY2suZHVlQ2FyZHMudG9TdHJpbmcoKSwgJ1x1RDgzRFx1RENDNScpO1xuICAgICAgdGhpcy5jcmVhdGVTdGF0Um93KHN0YXRzLCAnTmV3JywgZGVjay5uZXdDYXJkcy50b1N0cmluZygpLCAnXHVEODNDXHVERDk1Jyk7XG4gICAgICB0aGlzLmNyZWF0ZVN0YXRSb3coXG4gICAgICAgIHN0YXRzLCBcbiAgICAgICAgJ0NvcnJlY3QgUmF0ZScsIFxuICAgICAgICBgJHsoZGVjay5jb3JyZWN0UmF0ZSAqIDEwMCkudG9GaXhlZCgxKX0lYCxcbiAgICAgICAgJ1x1MjcwNSdcbiAgICAgICk7XG4gICAgICB0aGlzLmNyZWF0ZVN0YXRSb3coXG4gICAgICAgIHN0YXRzLFxuICAgICAgICAnQXZnIEludGVydmFsJyxcbiAgICAgICAgYCR7ZGVjay5hdmVyYWdlSW50ZXJ2YWwudG9GaXhlZCgxKX0gZGF5c2AsXG4gICAgICAgICdcdUQ4M0RcdURDQ0EnXG4gICAgICApO1xuXG4gICAgICAvLyBcdThGREJcdTVFQTZcdTY3NjFcbiAgICAgIGNvbnN0IHByb2dyZXNzID0gZGVja0NhcmQuY3JlYXRlRGl2KHsgY2xzOiAnZGVjay1wcm9ncmVzcycgfSk7XG4gICAgICBjb25zdCBtYXN0ZXJlZENvdW50ID0gZGVjay50b3RhbENhcmRzIC0gZGVjay5kdWVDYXJkcyAtIGRlY2submV3Q2FyZHM7XG4gICAgICBjb25zdCBtYXN0ZXJlZFBlcmNlbnQgPSAobWFzdGVyZWRDb3VudCAvIGRlY2sudG90YWxDYXJkcykgKiAxMDA7XG4gICAgICBcbiAgICAgIGNvbnN0IHByb2dyZXNzQmFyID0gcHJvZ3Jlc3MuY3JlYXRlRGl2KHsgY2xzOiAncHJvZ3Jlc3MtYmFyLWNvbnRhaW5lcicgfSk7XG4gICAgICBjb25zdCBiYXIgPSBwcm9ncmVzc0Jhci5jcmVhdGVEaXYoeyBjbHM6ICdwcm9ncmVzcy1iYXItZmlsbCcgfSk7XG4gICAgICBiYXIuc3R5bGUud2lkdGggPSBgJHttYXN0ZXJlZFBlcmNlbnR9JWA7XG4gICAgICBcbiAgICAgIHByb2dyZXNzLmNyZWF0ZURpdih7XG4gICAgICAgIHRleHQ6IGAke21hc3RlcmVkUGVyY2VudC50b0ZpeGVkKDApfSUgbWFzdGVyZWRgLFxuICAgICAgICBjbHM6ICdwcm9ncmVzcy1sYWJlbCdcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJEaWZmaWN1bHQoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdDYXJkcyBOZWVkaW5nIEF0dGVudGlvbicgfSk7XG5cbiAgICBjb25zdCBkaWZmaWN1bHRDYXJkcyA9IHRoaXMuYW5hbHl0aWNzLmdldERpZmZpY3VsdENhcmRzKDEwKTtcblxuICAgIGlmIChkaWZmaWN1bHRDYXJkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnRhaW5lci5jcmVhdGVEaXYoe1xuICAgICAgICB0ZXh0OiAnXHVEODNDXHVERjg5IE5vIGRpZmZpY3VsdCBjYXJkcyEgR3JlYXQgam9iIScsXG4gICAgICAgIGNsczogJ2VtcHR5LW1lc3NhZ2UnXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjYXJkc0xpc3QgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZGlmZmljdWx0LWNhcmRzLWxpc3QnIH0pO1xuXG4gICAgZGlmZmljdWx0Q2FyZHMuZm9yRWFjaCgoZGMsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBjYXJkSXRlbSA9IGNhcmRzTGlzdC5jcmVhdGVEaXYoeyBjbHM6ICdkaWZmaWN1bHQtY2FyZC1pdGVtJyB9KTtcblxuICAgICAgY29uc3QgcmFuayA9IGNhcmRJdGVtLmNyZWF0ZURpdih7IGNsczogJ2NhcmQtcmFuaycgfSk7XG4gICAgICByYW5rLnRleHRDb250ZW50ID0gYCR7aW5kZXggKyAxfWA7XG5cbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkSXRlbS5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLWNvbnRlbnQnIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBxdWVzdGlvbiA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnY2FyZC1xdWVzdGlvbicgfSk7XG4gICAgICBxdWVzdGlvbi50ZXh0Q29udGVudCA9IGRjLmNhcmQuZnJvbnQuc3Vic3RyaW5nKDAsIDgwKSArIFxuICAgICAgICAoZGMuY2FyZC5mcm9udC5sZW5ndGggPiA4MCA/ICcuLi4nIDogJycpO1xuXG4gICAgICBjb25zdCBtZXRhID0gY29udGVudC5jcmVhdGVEaXYoeyBjbHM6ICdjYXJkLW1ldGEnIH0pO1xuXG4gICAgICBjb25zdCBwYXR0ZXJuRW1vamk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAgICdjb25jZXB0JzogJ1x1RDgzRVx1RERFMCcsXG4gICAgICAgICdtZW1vcnknOiAnXHVEODNEXHVEQ0FEJyxcbiAgICAgICAgJ2NhbGN1bGF0aW9uJzogJ1x1RDgzRFx1REQyMicsXG4gICAgICAgICd1bmtub3duJzogJ1x1Mjc1MydcbiAgICAgIH07XG5cbiAgICAgIG1ldGEuY3JlYXRlU3Bhbih7XG4gICAgICAgIHRleHQ6IGAke3BhdHRlcm5FbW9qaVtkYy5wYXR0ZXJuXX0gJHtkYy5wYXR0ZXJufWAsXG4gICAgICAgIGNsczogJ3BhdHRlcm4tYmFkZ2UnXG4gICAgICB9KTtcblxuICAgICAgbWV0YS5jcmVhdGVTcGFuKHtcbiAgICAgICAgdGV4dDogYCR7ZGMuZXJyb3JDb3VudH0gZXJyb3JzYCxcbiAgICAgICAgY2xzOiAnZXJyb3ItY291bnQnXG4gICAgICB9KTtcblxuICAgICAgbWV0YS5jcmVhdGVTcGFuKHtcbiAgICAgICAgdGV4dDogYCR7ZGMuYXZlcmFnZVRpbWUudG9GaXhlZCgxKX1zIGF2Z2AsXG4gICAgICAgIGNsczogJ2F2Zy10aW1lJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFx1OTZCRVx1NUVBNlx1Njc2MVxuICAgICAgY29uc3QgZGlmZmljdWx0eUJhciA9IGNvbnRlbnQuY3JlYXRlRGl2KHsgY2xzOiAnZGlmZmljdWx0eS1iYXItY29udGFpbmVyJyB9KTtcbiAgICAgIGNvbnN0IGRpZmZCYXIgPSBkaWZmaWN1bHR5QmFyLmNyZWF0ZURpdih7IGNsczogJ2RpZmZpY3VsdHktYmFyJyB9KTtcbiAgICAgIGRpZmZCYXIuc3R5bGUud2lkdGggPSBgJHtkYy5jYXJkLnN0YXRzLmRpZmZpY3VsdHkgKiAxMDB9JWA7XG5cbiAgICAgIC8vIFx1NjRDRFx1NEY1Q1x1NjMwOVx1OTRBRVxuICAgICAgY29uc3QgYWN0aW9ucyA9IGNhcmRJdGVtLmNyZWF0ZURpdih7IGNsczogJ2NhcmQtYWN0aW9ucycgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGp1bXBCdG4gPSBhY3Rpb25zLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIHRleHQ6ICdcdTIxOTcnLFxuICAgICAgICBjbHM6ICdhY3Rpb24tYnRuLXNtYWxsJ1xuICAgICAgfSk7XG4gICAgICBqdW1wQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5qdW1wVG9DYXJkKGRjLmNhcmQpKTtcblxuICAgICAgY29uc3QgcmV2aWV3QnRuID0gYWN0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICB0ZXh0OiAnXHVEODNEXHVERDA0JyxcbiAgICAgICAgY2xzOiAnYWN0aW9uLWJ0bi1zbWFsbCdcbiAgICAgIH0pO1xuICAgICAgcmV2aWV3QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLnBsdWdpbi5hY3RpdmF0ZVJldmlldygpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGFjdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogJ1x1RDgzRFx1REREMVx1RkUwRicsXG4gICAgICAgIGNsczogJ2FjdGlvbi1idG4tc21hbGwgZGVsZXRlLWJ0bidcbiAgICAgIH0pO1xuICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoY29uZmlybSgnXHU3ODZFXHU1QjlBXHU4OTgxXHU1MjIwXHU5NjY0XHU4RkQ5XHU1RjIwXHU5NUVBXHU1MzYxXHU1NDE3XHVGRjFGJykpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZUZsYXNoY2FyZChkYy5jYXJkLmlkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZU1ldHJpY0NhcmQoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICBjb25maWc6IHsgdGl0bGU6IHN0cmluZzsgdmFsdWU6IHN0cmluZzsgaWNvbjogc3RyaW5nIH1cbiAgKSB7XG4gICAgY29uc3QgY2FyZCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdtZXRyaWMtY2FyZCcgfSk7XG4gICAgXG4gICAgY2FyZC5jcmVhdGVEaXYoeyB0ZXh0OiBjb25maWcuaWNvbiwgY2xzOiAnbWV0cmljLWljb24nIH0pO1xuICAgIFxuICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogJ21ldHJpYy1jb250ZW50JyB9KTtcbiAgICBjb250ZW50LmNyZWF0ZURpdih7IHRleHQ6IGNvbmZpZy50aXRsZSwgY2xzOiAnbWV0cmljLXRpdGxlJyB9KTtcbiAgICBjb250ZW50LmNyZWF0ZURpdih7IHRleHQ6IGNvbmZpZy52YWx1ZSwgY2xzOiAnbWV0cmljLXZhbHVlJyB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlQ29tcGFyaXNvbkl0ZW0oXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICBjb25maWc6IHtcbiAgICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgICB0aGlzV2VlazogbnVtYmVyIHwgc3RyaW5nO1xuICAgICAgbGFzdFdlZWs6IG51bWJlciB8IHN0cmluZztcbiAgICAgIGNoYW5nZTogbnVtYmVyO1xuICAgICAgY2hhbmdlUGVyY2VudDogc3RyaW5nO1xuICAgIH1cbiAgKSB7XG4gICAgY29uc3QgaXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjb21wYXJpc29uLWl0ZW0nIH0pO1xuICAgIFxuICAgIGl0ZW0uY3JlYXRlRGl2KHsgdGV4dDogY29uZmlnLmxhYmVsLCBjbHM6ICdjb21wYXJpc29uLWxhYmVsJyB9KTtcbiAgICBcbiAgICBjb25zdCB2YWx1ZXMgPSBpdGVtLmNyZWF0ZURpdih7IGNsczogJ2NvbXBhcmlzb24tdmFsdWVzJyB9KTtcbiAgICB2YWx1ZXMuY3JlYXRlU3Bhbih7IFxuICAgICAgdGV4dDogYCR7Y29uZmlnLnRoaXNXZWVrfWAsXG4gICAgICBjbHM6ICd0aGlzLXdlZWsnXG4gICAgfSk7XG4gICAgdmFsdWVzLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnIHZzICcsIGNsczogJ3ZzJyB9KTtcbiAgICB2YWx1ZXMuY3JlYXRlU3Bhbih7XG4gICAgICB0ZXh0OiBgJHtjb25maWcubGFzdFdlZWt9YCxcbiAgICAgIGNsczogJ2xhc3Qtd2VlaydcbiAgICB9KTtcblxuICAgIGNvbnN0IGNoYW5nZUNsYXNzID0gY29uZmlnLmNoYW5nZSA+IDAgPyAncG9zaXRpdmUnIDogY29uZmlnLmNoYW5nZSA8IDAgPyAnbmVnYXRpdmUnIDogJ25ldXRyYWwnO1xuICAgIGNvbnN0IGNoYW5nZUljb24gPSBjb25maWcuY2hhbmdlID4gMCA/ICdcdTIxOTcnIDogY29uZmlnLmNoYW5nZSA8IDAgPyAnXHUyMTk4JyA6ICdcdTIxOTInO1xuICAgIFxuICAgIGl0ZW0uY3JlYXRlRGl2KHtcbiAgICAgIHRleHQ6IGAke2NoYW5nZUljb259ICR7Y29uZmlnLmNoYW5nZVBlcmNlbnR9JWAsXG4gICAgICBjbHM6IGBjaGFuZ2UgJHtjaGFuZ2VDbGFzc31gXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZVN0YXRSb3coXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICBsYWJlbDogc3RyaW5nLFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgaWNvbjogc3RyaW5nXG4gICkge1xuICAgIGNvbnN0IHJvdyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzdGF0LXJvdycgfSk7XG4gICAgcm93LmNyZWF0ZVNwYW4oeyB0ZXh0OiBpY29uLCBjbHM6ICdzdGF0LWljb24nIH0pO1xuICAgIHJvdy5jcmVhdGVTcGFuKHsgdGV4dDogbGFiZWwsIGNsczogJ3N0YXQtbGFiZWwnIH0pO1xuICAgIHJvdy5jcmVhdGVTcGFuKHsgdGV4dDogdmFsdWUsIGNsczogJ3N0YXQtdmFsdWUnIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJTaW1wbGVCYXJDaGFydChjb250YWluZXI6IEhUTUxFbGVtZW50LCBkYXRhOiBhbnlbXSkge1xuICAgIGNvbnN0IG1heFZhbHVlID0gTWF0aC5tYXgoLi4uZGF0YS5tYXAoZCA9PiBkLnJldmlld2VkKSk7XG5cbiAgICBkYXRhLmZvckVhY2goc3RhdCA9PiB7XG4gICAgICBjb25zdCBiYXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc2ltcGxlLWJhcicgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShzdGF0LmRhdGUpO1xuICAgICAgY29uc3QgZGF5TmFtZSA9IGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIHsgd2Vla2RheTogJ3Nob3J0JyB9KTtcbiAgICAgIFxuICAgICAgYmFyLmNyZWF0ZURpdih7IHRleHQ6IGRheU5hbWUsIGNsczogJ2Jhci1sYWJlbCcgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGJhckNvbnRhaW5lciA9IGJhci5jcmVhdGVEaXYoeyBjbHM6ICdiYXItY29udGFpbmVyJyB9KTtcbiAgICAgIGNvbnN0IGJhckZpbGwgPSBiYXJDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnYmFyLWZpbGwnIH0pO1xuICAgICAgY29uc3QgaGVpZ2h0ID0gbWF4VmFsdWUgPiAwID8gKHN0YXQucmV2aWV3ZWQgLyBtYXhWYWx1ZSkgKiAxMDAgOiAwO1xuICAgICAgYmFyRmlsbC5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9JWA7XG4gICAgICBcbiAgICAgIGJhci5jcmVhdGVEaXYoeyB0ZXh0OiBzdGF0LnJldmlld2VkLnRvU3RyaW5nKCksIGNsczogJ2Jhci12YWx1ZScgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlckJhckNoYXJ0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGRhdGE6IGFueVtdKSB7XG4gICAgY29uc3QgY2hhcnQgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2hhcnQtY2FudmFzJyB9KTtcbiAgICBjb25zdCBtYXhWYWx1ZSA9IE1hdGgubWF4KC4uLmRhdGEubWFwKGQgPT4gZC5yZXZpZXdlZCkpO1xuXG4gICAgZGF0YS5mb3JFYWNoKHN0YXQgPT4ge1xuICAgICAgY29uc3QgYmFyR3JvdXAgPSBjaGFydC5jcmVhdGVEaXYoeyBjbHM6ICdiYXItZ3JvdXAnIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBiYXJDb250YWluZXIgPSBiYXJHcm91cC5jcmVhdGVEaXYoeyBjbHM6ICdiYXInIH0pO1xuICAgICAgY29uc3QgaGVpZ2h0ID0gbWF4VmFsdWUgPiAwID8gKHN0YXQucmV2aWV3ZWQgLyBtYXhWYWx1ZSkgKiAxMDAgOiAwO1xuICAgICAgYmFyQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH0lYDtcbiAgICAgIGJhckNvbnRhaW5lci50aXRsZSA9IGAke3N0YXQucmV2aWV3ZWR9IHJldmlld3NgO1xuICAgICAgXG4gICAgICBjb25zdCBiYXJMYWJlbCA9IGJhckdyb3VwLmNyZWF0ZURpdih7IGNsczogJ2Jhci1sYWJlbCcgfSk7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoc3RhdC5kYXRlKTtcbiAgICAgIGJhckxhYmVsLnRleHRDb250ZW50ID0gZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyTGluZUNoYXJ0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGRhdGE6IGFueVtdLCBrZXk6IHN0cmluZykge1xuICAgIGNvbnN0IGNoYXJ0ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2xpbmUtY2hhcnQtY2FudmFzJyB9KTtcbiAgICBcbiAgICBjb25zdCBwb2ludHMgPSBkYXRhLm1hcCgoc3RhdCwgaSkgPT4ge1xuICAgICAgY29uc3QgeCA9IChpIC8gKGRhdGEubGVuZ3RoIC0gMSkpICogMTAwO1xuICAgICAgY29uc3QgeSA9IDEwMCAtIChzdGF0W2tleV0gKiAxMDApO1xuICAgICAgcmV0dXJuIHsgeCwgeSwgdmFsdWU6IHN0YXRba2V5XSB9O1xuICAgIH0pO1xuXG4gICAgLy8gXHU1MjFCXHU1RUZBU1ZHXG4gICAgY29uc3Qgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdzdmcnKTtcbiAgICBzdmcuc2V0QXR0cmlidXRlKCd2aWV3Qm94JywgJzAgMCAxMDAgMTAwJyk7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZSgncHJlc2VydmVBc3BlY3RSYXRpbycsICdub25lJyk7XG4gICAgc3ZnLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHN2Zy5zdHlsZS5oZWlnaHQgPSAnMjAwcHgnO1xuXG4gICAgLy8gXHU1MjFCXHU1RUZBXHU2Mjk4XHU3RUJGXHU4REVGXHU1Rjg0XG4gICAgY29uc3QgcGF0aERhdGEgPSBwb2ludHMubWFwKChwLCBpKSA9PiBcbiAgICAgIGAke2kgPT09IDAgPyAnTScgOiAnTCd9ICR7cC54fSAke3AueX1gXG4gICAgKS5qb2luKCcgJyk7XG5cbiAgICBjb25zdCBwYXRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XG4gICAgcGF0aC5zZXRBdHRyaWJ1dGUoJ2QnLCBwYXRoRGF0YSk7XG4gICAgcGF0aC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnbm9uZScpO1xuICAgIHBhdGguc2V0QXR0cmlidXRlKCdzdHJva2UnLCAndmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KScpO1xuICAgIHBhdGguc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMicpO1xuXG4gICAgc3ZnLmFwcGVuZENoaWxkKHBhdGgpO1xuICAgIGNoYXJ0LmFwcGVuZENoaWxkKHN2Zyk7XG5cbiAgICAvLyBcdTZERkJcdTUyQTBcdTUwM0NcdTY4MDdcdTdCN0VcbiAgICBjb25zdCBsYWJlbHNDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY2hhcnQtbGFiZWxzJyB9KTtcbiAgICBkYXRhLmZvckVhY2goKHN0YXQsIGkpID0+IHtcbiAgICAgIGlmIChpICUgTWF0aC5jZWlsKGRhdGEubGVuZ3RoIC8gNykgPT09IDApIHtcbiAgICAgICAgY29uc3QgY2hhcnRMYWJlbCA9IGxhYmVsc0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjaGFydC1sYWJlbCcgfSk7XG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShzdGF0LmRhdGUpO1xuICAgICAgICBjaGFydExhYmVsLnRleHRDb250ZW50ID0gYCR7ZGF0ZS5nZXRNb250aCgpICsgMX0vJHtkYXRlLmdldERhdGUoKX1gO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJIZWF0bWFwKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBoZWF0bWFwRGF0YSA9IHRoaXMuYW5hbHl0aWNzLmdldEhlYXRtYXBEYXRhKDkwKTtcbiAgICBcbiAgICAvLyBcdTYzMDlcdTU0NjhcdTUyMDZcdTdFQzRcbiAgICBjb25zdCB3ZWVrczogYW55W11bXSA9IFtdO1xuICAgIGxldCBjdXJyZW50V2VlazogYW55W10gPSBbXTtcbiAgICBcbiAgICBoZWF0bWFwRGF0YS5mb3JFYWNoKChkYXksIGkpID0+IHtcbiAgICAgIGN1cnJlbnRXZWVrLnB1c2goZGF5KTtcbiAgICAgIGlmIChjdXJyZW50V2Vlay5sZW5ndGggPT09IDcgfHwgaSA9PT0gaGVhdG1hcERhdGEubGVuZ3RoIC0gMSkge1xuICAgICAgICB3ZWVrcy5wdXNoKGN1cnJlbnRXZWVrKTtcbiAgICAgICAgY3VycmVudFdlZWsgPSBbXTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHdlZWtzLmZvckVhY2god2VlayA9PiB7XG4gICAgICBjb25zdCB3ZWVrUm93ID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2hlYXRtYXAtd2VlaycgfSk7XG4gICAgICBcbiAgICAgIHdlZWsuZm9yRWFjaChkYXkgPT4ge1xuICAgICAgICBjb25zdCBjZWxsID0gd2Vla1Jvdy5jcmVhdGVEaXYoeyBjbHM6ICdoZWF0bWFwLWNlbGwnIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU1RjNBXHU1RUE2XHU3QjQ5XHU3RUE3IDAtNFxuICAgICAgICBjb25zdCBsZXZlbCA9IE1hdGguY2VpbChkYXkuaW50ZW5zaXR5ICogNCk7XG4gICAgICAgIGNlbGwuYWRkQ2xhc3MoYGxldmVsLSR7bGV2ZWx9YCk7XG4gICAgICAgIFxuICAgICAgICBjZWxsLnRpdGxlID0gYCR7ZGF5LmRhdGV9OiAke2RheS5jb3VudH0gcmV2aWV3c2A7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG5cblxuICBwcml2YXRlIGFzeW5jIGp1bXBUb0NhcmQoY2FyZDogYW55KSB7XG4gICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChjYXJkLnNvdXJjZUZpbGUpO1xuICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcblxuICAgIGNvbnN0IGNvbnRlbnRVbml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY2FyZC5zb3VyY2VDb250ZW50SWQpO1xuICAgIGlmICghY29udGVudFVuaXQpIHJldHVybjtcblxuICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XG4gICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKEl0ZW1WaWV3KTtcbiAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgIGNvbnN0IGVkaXRvciA9ICh2aWV3IGFzIGFueSkuZWRpdG9yO1xuICAgICAgICBpZiAoZWRpdG9yKSB7XG4gICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IGNvbnRlbnRVbml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogMCB9KTtcbiAgICAgICAgICBlZGl0b3Iuc2Nyb2xsSW50b1ZpZXcoe1xuICAgICAgICAgICAgZnJvbTogeyBsaW5lOiBjb250ZW50VW5pdC5zb3VyY2UucG9zaXRpb24ubGluZSwgY2g6IDAgfSxcbiAgICAgICAgICAgIHRvOiB7IGxpbmU6IGNvbnRlbnRVbml0LnNvdXJjZS5wb3NpdGlvbi5saW5lLCBjaDogMCB9XG4gICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCAxMDApO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBkZWxldGVGbGFzaGNhcmQoY2FyZElkOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5kZWxldGVDYXJkKGNhcmRJZCk7XG4gICAgICBuZXcgTm90aWNlKCdcdUQ4M0RcdURERDFcdUZFMEYgXHU5NUVBXHU1MzYxXHU1REYyXHU1MjIwXHU5NjY0Jyk7XG4gICAgICB0aGlzLnJlbmRlcigpOyAvLyBcdTkxQ0RcdTY1QjBcdTZFMzJcdTY3RDNcdTg5QzZcdTU2RkVcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgZmxhc2hjYXJkOicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBcdTUyMjBcdTk2NjRcdTk1RUFcdTUzNjFcdTU5MzFcdThEMjUnKTtcbiAgICB9XG4gIH1cbiAgcHJpdmF0ZSBzaG93Q2xlYXJTdGF0c01vZGFsKCkge1xuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbW9kYWwuY2xhc3NOYW1lID0gJ21vZGFsLWNvbnRhaW5lcic7XG4gICAgbW9kYWwuaW5uZXJIVE1MID0gYFxuICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJnXCI+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwibW9kYWxcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLXRpdGxlXCI+Q2xlYXIgU3RhdGlzdGljczwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPlxuICAgICAgICAgIDxwPkNob29zZSB3aGF0IHN0YXRpc3RpY3MgdG8gY2xlYXI6PC9wPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjbGVhci1vcHRpb25zXCI+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiY2xlYXItb3B0aW9uLWJ0blwiIGRhdGEtYWN0aW9uPVwiYWxsXCI+XG4gICAgICAgICAgICAgIFx1RDgzRFx1REREMVx1RkUwRiBDbGVhciBBbGwgU3RhdGlzdGljc1xuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm9wdGlvbi1kZXNjXCI+UmVzZXQgYWxsIGNhcmRzIGFuZCByZXZpZXcgbG9nczwvc3Bhbj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImNsZWFyLW9wdGlvbi1idG5cIiBkYXRhLWFjdGlvbj1cIm9sZFwiPlxuICAgICAgICAgICAgICBcdUQ4M0RcdURDQzUgQ2xlYXIgT2xkIERhdGEgKDMwKyBkYXlzKVxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm9wdGlvbi1kZXNjXCI+S2VlcCByZWNlbnQgMzAgZGF5cyBvbmx5PC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiY2xlYXItb3B0aW9uLWJ0blwiIGRhdGEtYWN0aW9uPVwiZGVja1wiPlxuICAgICAgICAgICAgICBcdUQ4M0RcdURDREEgQ2xlYXIgU3BlY2lmaWMgRGVja1xuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm9wdGlvbi1kZXNjXCI+Q2hvb3NlIGEgZGVjayB0byByZXNldDwvc3Bhbj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwibW9kLWN0YSBjYW5jZWwtYnRuXCI+Q2FuY2VsPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XG4gIFxuICAgIC8vIFx1NTNENlx1NkQ4OFx1NjMwOVx1OTRBRVxuICAgIG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5jYW5jZWwtYnRuJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgbW9kYWwucmVtb3ZlKCk7XG4gICAgfSk7XG4gIFxuICAgIC8vIFx1NkUwNVx1OTY2NFx1NjI0MFx1NjcwOVx1N0VERlx1OEJBMVxuICAgIG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFjdGlvbj1cImFsbFwiXScpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGlmIChjb25maXJtKCdcdTI2QTBcdUZFMEYgVGhpcyB3aWxsIHJlc2V0IEFMTCBzdGF0aXN0aWNzIGFuZCBjYXJkIHByb2dyZXNzLiBBcmUgeW91IHN1cmU/JykpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hbmFseXRpY3MuY2xlYXJBbGxTdGF0cygpO1xuICAgICAgICBuZXcgTm90aWNlKCdcdTI3MDUgQWxsIHN0YXRpc3RpY3MgY2xlYXJlZCcpO1xuICAgICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgXG4gICAgLy8gXHU2RTA1XHU5NjY0XHU2NUU3XHU2NTcwXHU2MzZFXG4gICAgbW9kYWwucXVlcnlTZWxlY3RvcignW2RhdGEtYWN0aW9uPVwib2xkXCJdJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKGNvbmZpcm0oJ0NsZWFyIHN0YXRpc3RpY3Mgb2xkZXIgdGhhbiAzMCBkYXlzPycpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYW5hbHl0aWNzLmNsZWFyU3RhdHNCZWZvcmVEYXRlKDMwKTtcbiAgICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IE9sZCBzdGF0aXN0aWNzIGNsZWFyZWQnKTtcbiAgICAgICAgbW9kYWwucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIFxuICAgIC8vIFx1NkUwNVx1OTY2NFx1NzI3OVx1NUI5QVx1NTM2MVx1N0VDNFxuICAgIG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFjdGlvbj1cImRlY2tcIl0nKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICAgIHRoaXMuc2hvd0RlY2tTZWxlY3Rpb25Nb2RhbCgpO1xuICAgIH0pO1xuICBcbiAgICAvLyBcdTcwQjlcdTUxRkJcdTgwQ0NcdTY2NkZcdTUxNzNcdTk1RURcbiAgICBtb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtYmcnKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICB9KTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBzaG93RGVja1NlbGVjdGlvbk1vZGFsKCkge1xuICAgIGNvbnN0IGRlY2tTdGF0cyA9IHRoaXMuYW5hbHl0aWNzLmdldERlY2tTdGF0cygpO1xuICAgIFxuICAgIGlmIChkZWNrU3RhdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdObyBkZWNrcyBhdmFpbGFibGUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIFxuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbW9kYWwuY2xhc3NOYW1lID0gJ21vZGFsLWNvbnRhaW5lcic7XG4gICAgXG4gICAgbGV0IG9wdGlvbnNIdG1sID0gJyc7XG4gICAgZGVja1N0YXRzLmZvckVhY2goZGVjayA9PiB7XG4gICAgICBvcHRpb25zSHRtbCArPSBgXG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJjbGVhci1vcHRpb24tYnRuIGRlY2stb3B0aW9uXCIgZGF0YS1kZWNrPVwiJHtkZWNrLmRlY2tOYW1lfVwiPlxuICAgICAgICAgIFx1RDgzRFx1RENEQSAke2RlY2suZGVja05hbWV9XG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJvcHRpb24tZGVzY1wiPiR7ZGVjay50b3RhbENhcmRzfSBjYXJkczwvc3Bhbj5cbiAgICAgICAgPC9idXR0b24+XG4gICAgICBgO1xuICAgIH0pO1xuICBcbiAgICBtb2RhbC5pbm5lckhUTUwgPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYmdcIj48L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtdGl0bGVcIj5TZWxlY3QgRGVjayB0byBDbGVhcjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjbGVhci1vcHRpb25zXCI+XG4gICAgICAgICAgICAke29wdGlvbnNIdG1sfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwibW9kLWN0YSBjYW5jZWwtYnRuXCI+Q2FuY2VsPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XG4gIFxuICAgIC8vIFx1NTNENlx1NkQ4OFx1NjMwOVx1OTRBRVxuICAgIG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5jYW5jZWwtYnRuJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgbW9kYWwucmVtb3ZlKCk7XG4gICAgfSk7XG4gIFxuICAgIC8vIFx1NTM2MVx1N0VDNFx1OTAwOVx1OTg3OVxuICAgIG1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZWNrLW9wdGlvbicpLmZvckVhY2goYnRuID0+IHtcbiAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgZGVja05hbWUgPSAoYnRuIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LmRlY2s7XG4gICAgICAgIGlmIChkZWNrTmFtZSAmJiBjb25maXJtKGBDbGVhciBzdGF0aXN0aWNzIGZvciBkZWNrIFwiJHtkZWNrTmFtZX1cIj9gKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYW5hbHl0aWNzLmNsZWFyRGVja1N0YXRzKGRlY2tOYW1lKTtcbiAgICAgICAgICBuZXcgTm90aWNlKGBcdTI3MDUgU3RhdGlzdGljcyBjbGVhcmVkIGZvciAke2RlY2tOYW1lfWApO1xuICAgICAgICAgIG1vZGFsLnJlbW92ZSgpO1xuICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICBcbiAgICAvLyBcdTcwQjlcdTUxRkJcdTgwQ0NcdTY2NkZcdTUxNzNcdTk1RURcbiAgICBtb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtYmcnKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICB9KTtcbiAgICBcbiAgfVxuICBwcml2YXRlIGFzeW5jIGdlbmVyYXRlQW5kU2hvd1JlcG9ydCgpIHtcbiAgICBjb25zdCByZXBvcnQgPSB0aGlzLmFuYWx5dGljcy5nZW5lcmF0ZVJlcG9ydCgzMCk7XG4gICAgXG4gICAgLy8gXHU1MjFCXHU1RUZBXHU0RTAwXHU0RTJBXHU2NUIwXHU3Njg0XHU2NTg3XHU0RUY2XHU2NzY1XHU0RkREXHU1QjU4XHU2MkE1XHU1NDRBXG4gICAgY29uc3QgZmlsZU5hbWUgPSBgTGVhcm5pbmcgUmVwb3J0ICR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF19Lm1kYDtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NTg3XHU0RUY2XHU2NjJGXHU1NDI2XHU1REYyXHU1QjU4XHU1NzI4XG4gICAgICBsZXQgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlTmFtZSk7XG4gICAgICBcbiAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgLy8gXHU2NTg3XHU0RUY2XHU1QjU4XHU1NzI4XHVGRjBDXHU4QkUyXHU5NUVFXHU2NjJGXHU1NDI2XHU4OTg2XHU3NkQ2XG4gICAgICAgIGlmICghY29uZmlybShgUmVwb3J0IFwiJHtmaWxlTmFtZX1cIiBhbHJlYWR5IGV4aXN0cy4gT3ZlcndyaXRlP2ApKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCByZXBvcnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NUIwXHU2NTg3XHU0RUY2XG4gICAgICAgIGZpbGUgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZU5hbWUsIHJlcG9ydCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1NjI1M1x1NUYwMFx1NjJBNVx1NTQ0QVx1NjU4N1x1NEVGNlxuICAgICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKTtcbiAgICAgIGF3YWl0IGxlYWYub3BlbkZpbGUoZmlsZSBhcyBURmlsZSk7XG4gICAgICBcbiAgICAgIG5ldyBOb3RpY2UoJ1x1RDgzRFx1RENDQSBSZXBvcnQgZ2VuZXJhdGVkIScpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZW5lcmF0aW5nIHJlcG9ydDonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdcdTI3NEMgRmFpbGVkIHRvIGdlbmVyYXRlIHJlcG9ydCcpO1xuICAgIH1cbiAgfVxuICBwcml2YXRlIGFkZFN0eWxlcygpIHtcbiAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZUVsLnRleHRDb250ZW50ID0gYFxuICAgICAgLnN0YXRzLWNvbnRhaW5lciB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICB9XG5cbiAgICAgIC5zdGF0cy1oZWFkZXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICB9XG5cbiAgICAgIC5zdGF0cy1oZWFkZXIgaDIge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICB9XG5cbiAgICAgIC5zdGF0cy10YWJzIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICB9XG5cbiAgICAgIC50YWIge1xuICAgICAgICBwYWRkaW5nOiAxMHB4IDIwcHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIC50YWI6aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbiAgICAgIH1cblxuICAgICAgLnRhYi5hY3RpdmUge1xuICAgICAgICBib3JkZXItYm90dG9tLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgIH1cblxuICAgICAgLm1ldHJpY3MtZ3JpZCB7XG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMjAwcHgsIDFmcikpO1xuICAgICAgICBnYXA6IDE1cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDMwcHg7XG4gICAgICB9XG5cbiAgICAgIC5tZXRyaWMtY2FyZCB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDE1cHg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5tZXRyaWMtaWNvbiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMzJweDtcbiAgICAgIH1cblxuICAgICAgLm1ldHJpYy1jb250ZW50IHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgIH1cblxuICAgICAgLm1ldHJpYy10aXRsZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICAgICAgfVxuXG4gICAgICAubWV0cmljLXZhbHVlIHtcbiAgICAgICAgZm9udC1zaXplOiAxLjhlbTtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgIH1cblxuICAgICAgLndlZWstY29tcGFyaXNvbiB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDMwcHg7XG4gICAgICB9XG5cbiAgICAgIC5jb21wYXJpc29uLWdyaWQge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDE1cHg7XG4gICAgICAgIG1hcmdpbi10b3A6IDE1cHg7XG4gICAgICB9XG5cbiAgICAgIC5jb21wYXJpc29uLWl0ZW0ge1xuICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgfVxuXG4gICAgICAuY29tcGFyaXNvbi1sYWJlbCB7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICB9XG5cbiAgICAgIC5jb21wYXJpc29uLXZhbHVlcyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGdhcDogOHB4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgfVxuXG4gICAgICAudGhpcy13ZWVrIHtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgZm9udC1zaXplOiAxLjFlbTtcbiAgICAgIH1cblxuICAgICAgLmxhc3Qtd2VlayB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLmNoYW5nZSB7XG4gICAgICAgIHBhZGRpbmc6IDRweCAxMHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuXG4gICAgICAuY2hhbmdlLnBvc2l0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1zdWNjZXNzKTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgIH1cblxuICAgICAgLmNoYW5nZS5uZWdhdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItZXJyb3IpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICB9XG5cbiAgICAgIC5jaGFydC1zZWN0aW9uIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDtcbiAgICAgIH1cblxuICAgICAgLnJlY2VudC1hY3Rpdml0eSAuYWN0aXZpdHktY2hhcnQge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuICAgICAgICBoZWlnaHQ6IDE1MHB4O1xuICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgIH1cblxuICAgICAgLnNpbXBsZS1iYXIge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgZmxleDogMTtcbiAgICAgIH1cblxuICAgICAgLnNpbXBsZS1iYXIgLmJhci1jb250YWluZXIge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgaGVpZ2h0OiAxMDBweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgIH1cblxuICAgICAgLnNpbXBsZS1iYXIgLmJhci1maWxsIHtcbiAgICAgICAgd2lkdGg6IDYwJTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4IDRweCAwIDA7XG4gICAgICAgIHRyYW5zaXRpb246IGhlaWdodCAwLjNzO1xuICAgICAgfVxuXG4gICAgICAuYmFyLWxhYmVsLCAuYmFyLXZhbHVlIHtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgIH1cblxuICAgICAgLmhlYXRtYXAge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDRweDtcbiAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICB9XG5cbiAgICAgIC5oZWF0bWFwLXdlZWsge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBnYXA6IDRweDtcbiAgICAgIH1cblxuICAgICAgLmhlYXRtYXAtY2VsbCB7XG4gICAgICAgIHdpZHRoOiAxMnB4O1xuICAgICAgICBoZWlnaHQ6IDEycHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuXG4gICAgICAuaGVhdG1hcC1jZWxsLmxldmVsLTEgeyBiYWNrZ3JvdW5kOiByZ2JhKDk0LCAxNTYsIDIzNSwgMC4zKTsgfVxuICAgICAgLmhlYXRtYXAtY2VsbC5sZXZlbC0yIHsgYmFja2dyb3VuZDogcmdiYSg5NCwgMTU2LCAyMzUsIDAuNSk7IH1cbiAgICAgIC5oZWF0bWFwLWNlbGwubGV2ZWwtMyB7IGJhY2tncm91bmQ6IHJnYmEoOTQsIDE1NiwgMjM1LCAwLjcpOyB9XG4gICAgICAuaGVhdG1hcC1jZWxsLmxldmVsLTQgeyBiYWNrZ3JvdW5kOiByZ2JhKDk0LCAxNTYsIDIzNSwgMSk7IH1cblxuICAgICAgLmRlY2tzLWdyaWQge1xuICAgICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgzMDBweCwgMWZyKSk7XG4gICAgICAgIGdhcDogMTVweDtcbiAgICAgIH1cblxuICAgICAgLmRlY2stY2FyZCB7XG4gICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICB9XG5cbiAgICAgIC5kZWNrLWNhcmQtaGVhZGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTBweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgIH1cblxuICAgICAgLmRlY2stY2FyZC1oZWFkZXIgaDQge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICB9XG5cbiAgICAgIC5kZWNrLWJhZGdlIHtcbiAgICAgICAgcGFkZGluZzogNHB4IDEwcHg7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTJweDtcbiAgICAgICAgZm9udC1zaXplOiAwLjg1ZW07XG4gICAgICB9XG5cbiAgICAgIC5kZWNrLWNhcmQtc3RhdHMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgIH1cblxuICAgICAgLnN0YXQtcm93IHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICB9XG5cbiAgICAgIC5zdGF0LWljb24ge1xuICAgICAgICB3aWR0aDogMjBweDtcbiAgICAgIH1cblxuICAgICAgLnN0YXQtbGFiZWwge1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG5cbiAgICAgIC5zdGF0LXZhbHVlIHtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgIH1cblxuICAgICAgLmRlY2stcHJvZ3Jlc3Mge1xuICAgICAgICBtYXJnaW4tdG9wOiAxNXB4O1xuICAgICAgfVxuXG4gICAgICAucHJvZ3Jlc3MtYmFyLWNvbnRhaW5lciB7XG4gICAgICAgIGhlaWdodDogOHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDVweDtcbiAgICAgIH1cblxuICAgICAgLnByb2dyZXNzLWJhci1maWxsIHtcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICB0cmFuc2l0aW9uOiB3aWR0aCAwLjNzO1xuICAgICAgfVxuXG4gICAgICAucHJvZ3Jlc3MtbGFiZWwge1xuICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgfVxuXG4gICAgICAuZGlmZmljdWx0LWNhcmRzLWxpc3Qge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBnYXA6IDEycHg7XG4gICAgICB9XG5cbiAgICAgIC5kaWZmaWN1bHQtY2FyZC1pdGVtIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiAxNXB4O1xuICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1yYW5rIHtcbiAgICAgICAgd2lkdGg6IDMwcHg7XG4gICAgICAgIGhlaWdodDogMzBweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgIH1cblxuICAgICAgLmNhcmQtY29udGVudCB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICB9XG5cbiAgICAgIC5jYXJkLXF1ZXN0aW9uIHtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgfVxuXG4gICAgICAuY2FyZC1tZXRhIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgIG1hcmdpbi1ib3R0b206OHB4O1xuICAgICAgfSBcblxuLnBhdHRlcm4tYmFkZ2UsIC5lcnJvci1jb3VudCwgLmF2Zy10aW1lIHtcbiAgICBwYWRkaW5nOiAzcHggMTBweDtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgZm9udC1zaXplOiAwLjg1ZW07XG4gIH1cblxuICAuZGlmZmljdWx0eS1iYXItY29udGFpbmVyIHtcbiAgICBoZWlnaHQ6IDZweDtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICB9XG5cbiAgLmRpZmZpY3VsdHktYmFyIHtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCB2YXIoLS1jb2xvci1ncmVlbiksIHZhcigtLWNvbG9yLXllbGxvdyksIHZhcigtLWNvbG9yLXJlZCkpO1xuICAgIHRyYW5zaXRpb246IHdpZHRoIDAuM3M7XG4gIH1cblxuICAuY2FyZC1hY3Rpb25zIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGdhcDogOHB4O1xuICB9XG5cbiAgLmFjdGlvbi1idG4tc21hbGwge1xuICAgIHBhZGRpbmc6IDZweCAxMnB4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gIH1cblxuICAuYWN0aW9uLWJ0bi1zbWFsbDpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICB9XG5cbiAgLmFjdGlvbi1idG4tc21hbGwuZGVsZXRlLWJ0bjpob3ZlciB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItcmVkKTtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLXJlZCk7XG4gICAgY29sb3I6IHdoaXRlO1xuICB9XG5cbiAgLmVtcHR5LW1lc3NhZ2Uge1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBwYWRkaW5nOiA0MHB4O1xuICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICBmb250LXNpemU6IDEuMWVtO1xuICB9XG5cbiAgLnJlcG9ydC1zZWN0aW9uIHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgbWFyZ2luLXRvcDogMzBweDtcbiAgICBwYWRkaW5nOiAyMHB4O1xuICB9XG5cbiAgLmNoYXJ0LWNhbnZhcyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XG4gICAgaGVpZ2h0OiAyMDBweDtcbiAgICBwYWRkaW5nOiAyMHB4O1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgfVxuXG4gIC5iYXItZ3JvdXAge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGZsZXg6IDE7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICB9XG5cbiAgLmJhci1ncm91cCAuYmFyIHtcbiAgICB3aWR0aDogODAlO1xuICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4IDRweCAwIDA7XG4gICAgdHJhbnNpdGlvbjogaGVpZ2h0IDAuM3M7XG4gICAgbWFyZ2luLXRvcDogYXV0bztcbiAgfVxuXG4gIC5saW5lLWNoYXJ0LWNhbnZhcyB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICBwYWRkaW5nOiAyMHB4O1xuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gIH1cblxuICAuY2hhcnQtbGFiZWxzIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO1xuICAgIHBhZGRpbmc6IDEwcHggMjBweDtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICB9XG5cbiAgLmNoYXJ0LWxhYmVsIHtcbiAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gIH1cbiAgICAubW9kYWwtY29udGFpbmVyIHtcbiAgcG9zaXRpb246IGZpeGVkO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG4gIHotaW5kZXg6IDEwMDA7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuXG4ubW9kYWwtYmcge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcbiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjUpO1xufVxuXG4ubW9kYWwge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgcGFkZGluZzogMjBweDtcbiAgbWF4LXdpZHRoOiA1MDBweDtcbiAgd2lkdGg6IDkwJTtcbiAgbWF4LWhlaWdodDogODB2aDtcbiAgb3ZlcmZsb3cteTogYXV0bztcbiAgYm94LXNoYWRvdzogMCA0cHggMjBweCByZ2JhKDAsIDAsIDAsIDAuMyk7XG59XG5cbi5tb2RhbC10aXRsZSB7XG4gIGZvbnQtc2l6ZTogMS41ZW07XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIG1hcmdpbi1ib3R0b206IDE1cHg7XG59XG5cbi5tb2RhbC1jb250ZW50IHtcbiAgbWFyZ2luLWJvdHRvbTogMjBweDtcbn1cblxuLmNsZWFyLW9wdGlvbnMge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBnYXA6IDEwcHg7XG4gIG1hcmdpbi10b3A6IDE1cHg7XG59XG5cbi5jbGVhci1vcHRpb24tYnRuIHtcbiAgcGFkZGluZzogMTVweDtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICB0ZXh0LWFsaWduOiBsZWZ0O1xuICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgZ2FwOiA1cHg7XG59XG5cbi5jbGVhci1vcHRpb24tYnRuOmhvdmVyIHtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKTtcbn1cblxuLm9wdGlvbi1kZXNjIHtcbiAgZm9udC1zaXplOiAwLjg1ZW07XG4gIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbn1cblxuLm1vZGFsLWJ1dHRvbi1jb250YWluZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICBnYXA6IDEwcHg7XG59XG5gO1xuXG5kb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICB9fSIsICIvLyBhbmFseXRpY3NFbmdpbmUudHNcbmltcG9ydCB0eXBlIExlYXJuaW5nU3lzdGVtUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgRmxhc2hjYXJkLCBSZXZpZXdMb2cgfSBmcm9tICcuL0ZsYXNoY2FyZE1hbmFnZXInO1xuXG5leHBvcnQgaW50ZXJmYWNlIERhaWx5U3RhdHMge1xuICBkYXRlOiBzdHJpbmc7XG4gIHJldmlld2VkOiBudW1iZXI7XG4gIGNvcnJlY3RDb3VudDogbnVtYmVyO1xuICBjb3JyZWN0UmF0ZTogbnVtYmVyO1xuICB0aW1lU3BlbnQ6IG51bWJlcjtcbiAgbmV3Q2FyZHM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXZWVrbHlTdGF0cyB7XG4gIHN0YXJ0RGF0ZTogc3RyaW5nO1xuICBlbmREYXRlOiBzdHJpbmc7XG4gIHRvdGFsUmV2aWV3czogbnVtYmVyO1xuICBhdmVyYWdlQ29ycmVjdFJhdGU6IG51bWJlcjtcbiAgdG90YWxUaW1lU3BlbnQ6IG51bWJlcjtcbiAgc3RyZWFrOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGVja1N0YXRzIHtcbiAgZGVja05hbWU6IHN0cmluZztcbiAgdG90YWxDYXJkczogbnVtYmVyO1xuICBkdWVDYXJkczogbnVtYmVyO1xuICBuZXdDYXJkczogbnVtYmVyO1xuICBjb3JyZWN0UmF0ZTogbnVtYmVyO1xuICBhdmVyYWdlSW50ZXJ2YWw6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEaWZmaWN1bHRDYXJkIHtcbiAgY2FyZDogRmxhc2hjYXJkO1xuICBlcnJvckNvdW50OiBudW1iZXI7XG4gIGxhc3RFcnJvcjogbnVtYmVyO1xuICBhdmVyYWdlVGltZTogbnVtYmVyO1xuICBwYXR0ZXJuOiAnY29uY2VwdCcgfCAnbWVtb3J5JyB8ICdjYWxjdWxhdGlvbicgfCAndW5rbm93bic7XG59XG5cbmV4cG9ydCBjbGFzcyBBbmFseXRpY3NFbmdpbmUge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW4pIHt9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NkJDRlx1NjVFNVx1N0VERlx1OEJBMVxuICAgKi9cbiAgZ2V0RGFpbHlTdGF0cyhkYXlzOiBudW1iZXIgPSAzMCk6IERhaWx5U3RhdHNbXSB7XG4gICAgY29uc3QgbG9ncyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXJbJ3Jldmlld0xvZ3MnXSB8fCBbXTtcbiAgICBjb25zdCBzdGF0czogTWFwPHN0cmluZywgRGFpbHlTdGF0cz4gPSBuZXcgTWFwKCk7XG5cbiAgICAvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdTY3MDBcdThGRDFOXHU1OTI5XHU3Njg0XHU2NTcwXHU2MzZFXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXlzOyBpKyspIHtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpIC0gaSk7XG4gICAgICBjb25zdCBkYXRlS2V5ID0gZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICBcbiAgICAgIHN0YXRzLnNldChkYXRlS2V5LCB7XG4gICAgICAgIGRhdGU6IGRhdGVLZXksXG4gICAgICAgIHJldmlld2VkOiAwLFxuICAgICAgICBjb3JyZWN0Q291bnQ6IDAsXG4gICAgICAgIGNvcnJlY3RSYXRlOiAwLFxuICAgICAgICB0aW1lU3BlbnQ6IDAsXG4gICAgICAgIG5ld0NhcmRzOiAwXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTdFREZcdThCQTFcdTU5MERcdTRFNjBcdThCQjBcdTVGNTVcbiAgICBsb2dzLmZvckVhY2gobG9nID0+IHtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShsb2cudGltZXN0YW1wKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICBjb25zdCBzdGF0ID0gc3RhdHMuZ2V0KGRhdGUpO1xuICAgICAgaWYgKCFzdGF0KSByZXR1cm47XG5cbiAgICAgIHN0YXQucmV2aWV3ZWQrKztcbiAgICAgIHN0YXQudGltZVNwZW50ICs9IGxvZy5yZXNwb25zZS50aW1lU3BlbnQ7XG5cbiAgICAgIC8vIFx1NTIyNFx1NjVBRFx1NjYyRlx1NTQyNlx1NkI2M1x1Nzg2RVxuICAgICAgaWYgKGxvZy5yZXNwb25zZS5lYXNlID09PSAnZ29vZCcgfHwgbG9nLnJlc3BvbnNlLmVhc2UgPT09ICdlYXN5Jykge1xuICAgICAgICBzdGF0LmNvcnJlY3RDb3VudCsrO1xuICAgICAgfSBlbHNlIGlmIChsb2cucmVzcG9uc2UuZWFzZSA9PT0gJ2hhcmQnKSB7XG4gICAgICAgIHN0YXQuY29ycmVjdENvdW50ICs9IDAuNTtcbiAgICAgIH1cblxuICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NjJGXHU2NUIwXHU1MzYxXHU3MjQ3XHVGRjA4XHU3QjJDXHU0RTAwXHU2QjIxXHU1OTBEXHU0RTYwXHVGRjA5XG4gICAgICBjb25zdCBjYXJkID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRGbGFzaGNhcmQobG9nLmZsYXNoY2FyZElkKTtcbiAgICAgIGlmIChjYXJkICYmIGNhcmQuc3RhdHMudG90YWxSZXZpZXdzID09PSAxKSB7XG4gICAgICAgIHN0YXQubmV3Q2FyZHMrKztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFx1OEJBMVx1N0I5N1x1NkI2M1x1Nzg2RVx1NzM4N1xuICAgIHN0YXRzLmZvckVhY2goc3RhdCA9PiB7XG4gICAgICBpZiAoc3RhdC5yZXZpZXdlZCA+IDApIHtcbiAgICAgICAgc3RhdC5jb3JyZWN0UmF0ZSA9IHN0YXQuY29ycmVjdENvdW50IC8gc3RhdC5yZXZpZXdlZDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBBcnJheS5mcm9tKHN0YXRzLnZhbHVlcygpKS5zb3J0KChhLCBiKSA9PiBcbiAgICAgIGEuZGF0ZS5sb2NhbGVDb21wYXJlKGIuZGF0ZSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NTQ2OFx1N0VERlx1OEJBMVxuICAgKi9cbiAgZ2V0V2Vla2x5U3RhdHMoKTogeyB0aGlzV2VlazogV2Vla2x5U3RhdHM7IGxhc3RXZWVrOiBXZWVrbHlTdGF0cyB9IHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIFxuICAgIC8vIFx1NjcyQ1x1NTQ2OFxuICAgIGNvbnN0IHRoaXNXZWVrU3RhcnQgPSBuZXcgRGF0ZShub3cpO1xuICAgIHRoaXNXZWVrU3RhcnQuc2V0RGF0ZShub3cuZ2V0RGF0ZSgpIC0gbm93LmdldERheSgpKTtcbiAgICB0aGlzV2Vla1N0YXJ0LnNldEhvdXJzKDAsIDAsIDAsIDApO1xuXG4gICAgLy8gXHU0RTBBXHU1NDY4XG4gICAgY29uc3QgbGFzdFdlZWtTdGFydCA9IG5ldyBEYXRlKHRoaXNXZWVrU3RhcnQpO1xuICAgIGxhc3RXZWVrU3RhcnQuc2V0RGF0ZShsYXN0V2Vla1N0YXJ0LmdldERhdGUoKSAtIDcpO1xuXG4gICAgY29uc3QgdGhpc1dlZWsgPSB0aGlzLmNhbGN1bGF0ZVdlZWtTdGF0cyh0aGlzV2Vla1N0YXJ0KTtcbiAgICBjb25zdCBsYXN0V2VlayA9IHRoaXMuY2FsY3VsYXRlV2Vla1N0YXRzKGxhc3RXZWVrU3RhcnQpO1xuXG4gICAgcmV0dXJuIHsgdGhpc1dlZWssIGxhc3RXZWVrIH07XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVdlZWtTdGF0cyhzdGFydERhdGU6IERhdGUpOiBXZWVrbHlTdGF0cyB7XG4gICAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKHN0YXJ0RGF0ZSk7XG4gICAgZW5kRGF0ZS5zZXREYXRlKGVuZERhdGUuZ2V0RGF0ZSgpICsgNyk7XG5cbiAgICBjb25zdCBsb2dzID0gKHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXJbJ3Jldmlld0xvZ3MnXSB8fCBbXSkuZmlsdGVyKFxuICAgICAgbG9nID0+IGxvZy50aW1lc3RhbXAgPj0gc3RhcnREYXRlLmdldFRpbWUoKSAmJiBsb2cudGltZXN0YW1wIDwgZW5kRGF0ZS5nZXRUaW1lKClcbiAgICApO1xuXG4gICAgbGV0IHRvdGFsQ29ycmVjdCA9IDA7XG4gICAgbGV0IHRvdGFsVGltZVNwZW50ID0gMDtcblxuICAgIGxvZ3MuZm9yRWFjaChsb2cgPT4ge1xuICAgICAgdG90YWxUaW1lU3BlbnQgKz0gbG9nLnJlc3BvbnNlLnRpbWVTcGVudDtcbiAgICAgIGlmIChsb2cucmVzcG9uc2UuZWFzZSA9PT0gJ2dvb2QnIHx8IGxvZy5yZXNwb25zZS5lYXNlID09PSAnZWFzeScpIHtcbiAgICAgICAgdG90YWxDb3JyZWN0Kys7XG4gICAgICB9IGVsc2UgaWYgKGxvZy5yZXNwb25zZS5lYXNlID09PSAnaGFyZCcpIHtcbiAgICAgICAgdG90YWxDb3JyZWN0ICs9IDAuNTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IGF2ZXJhZ2VDb3JyZWN0UmF0ZSA9IGxvZ3MubGVuZ3RoID4gMCA/IHRvdGFsQ29ycmVjdCAvIGxvZ3MubGVuZ3RoIDogMDtcbiAgICBjb25zdCBzdHJlYWsgPSB0aGlzLmNhbGN1bGF0ZVN0cmVhaygpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0RGF0ZTogc3RhcnREYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcbiAgICAgIGVuZERhdGU6IGVuZERhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxuICAgICAgdG90YWxSZXZpZXdzOiBsb2dzLmxlbmd0aCxcbiAgICAgIGF2ZXJhZ2VDb3JyZWN0UmF0ZSxcbiAgICAgIHRvdGFsVGltZVNwZW50LFxuICAgICAgc3RyZWFrXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdThCQTFcdTdCOTdcdThGREVcdTdFRURcdTVCNjZcdTRFNjBcdTU5MjlcdTY1NzBcbiAgICovXG4gIGNhbGN1bGF0ZVN0cmVhaygpOiBudW1iZXIge1xuICAgIGNvbnN0IGxvZ3MgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyWydyZXZpZXdMb2dzJ10gfHwgW107XG4gICAgaWYgKGxvZ3MubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IGRhdGVzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgbG9ncy5mb3JFYWNoKGxvZyA9PiB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUobG9nLnRpbWVzdGFtcCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgZGF0ZXMuYWRkKGRhdGUpO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc29ydGVkRGF0ZXMgPSBBcnJheS5mcm9tKGRhdGVzKS5zb3J0KCkucmV2ZXJzZSgpO1xuICAgIGxldCBzdHJlYWsgPSAwO1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvcnRlZERhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBleHBlY3RlZERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgZXhwZWN0ZWREYXRlLnNldERhdGUoZXhwZWN0ZWREYXRlLmdldERhdGUoKSAtIGkpO1xuICAgICAgY29uc3QgZXhwZWN0ZWQgPSBleHBlY3RlZERhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuXG4gICAgICBpZiAoc29ydGVkRGF0ZXNbaV0gPT09IGV4cGVjdGVkKSB7XG4gICAgICAgIHN0cmVhaysrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0cmVhaztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTUzNjFcdTdFQzRcdTdFREZcdThCQTFcbiAgICovXG4gIGdldERlY2tTdGF0cygpOiBEZWNrU3RhdHNbXSB7XG4gICAgY29uc3QgY2FyZHMgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLmdldEFsbEZsYXNoY2FyZHMoKTtcbiAgICBjb25zdCBkZWNrTWFwID0gbmV3IE1hcDxzdHJpbmcsIEZsYXNoY2FyZFtdPigpO1xuXG4gICAgLy8gXHU2MzA5XHU1MzYxXHU3RUM0XHU1MjA2XHU3RUM0XG4gICAgY2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgIGlmICghZGVja01hcC5oYXMoY2FyZC5kZWNrKSkge1xuICAgICAgICBkZWNrTWFwLnNldChjYXJkLmRlY2ssIFtdKTtcbiAgICAgIH1cbiAgICAgIGRlY2tNYXAuZ2V0KGNhcmQuZGVjaykhLnB1c2goY2FyZCk7XG4gICAgfSk7XG5cbiAgICAvLyBcdThCQTFcdTdCOTdcdTZCQ0ZcdTRFMkFcdTUzNjFcdTdFQzRcdTc2ODRcdTdFREZcdThCQTFcbiAgICBjb25zdCBzdGF0czogRGVja1N0YXRzW10gPSBbXTtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXG4gICAgZGVja01hcC5mb3JFYWNoKChkZWNrQ2FyZHMsIGRlY2tOYW1lKSA9PiB7XG4gICAgICBjb25zdCBkdWVDYXJkcyA9IGRlY2tDYXJkcy5maWx0ZXIoYyA9PiBjLnNjaGVkdWxpbmcuZHVlIDw9IG5vdykubGVuZ3RoO1xuICAgICAgY29uc3QgbmV3Q2FyZHMgPSBkZWNrQ2FyZHMuZmlsdGVyKGMgPT4gYy5zY2hlZHVsaW5nLnN0YXRlID09PSAnbmV3JykubGVuZ3RoO1xuICAgICAgXG4gICAgICBjb25zdCB0b3RhbENvcnJlY3QgPSBkZWNrQ2FyZHMucmVkdWNlKFxuICAgICAgICAoc3VtLCBjKSA9PiBzdW0gKyBjLnN0YXRzLmNvcnJlY3RDb3VudCwgMFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHRvdGFsUmV2aWV3cyA9IGRlY2tDYXJkcy5yZWR1Y2UoXG4gICAgICAgIChzdW0sIGMpID0+IHN1bSArIGMuc3RhdHMudG90YWxSZXZpZXdzLCAwXG4gICAgICApO1xuICAgICAgY29uc3QgY29ycmVjdFJhdGUgPSB0b3RhbFJldmlld3MgPiAwID8gdG90YWxDb3JyZWN0IC8gdG90YWxSZXZpZXdzIDogMDtcblxuICAgICAgY29uc3QgdG90YWxJbnRlcnZhbCA9IGRlY2tDYXJkcy5yZWR1Y2UoXG4gICAgICAgIChzdW0sIGMpID0+IHN1bSArIGMuc2NoZWR1bGluZy5pbnRlcnZhbCwgMFxuICAgICAgKTtcbiAgICAgIGNvbnN0IGF2ZXJhZ2VJbnRlcnZhbCA9IGRlY2tDYXJkcy5sZW5ndGggPiAwIFxuICAgICAgICA/IHRvdGFsSW50ZXJ2YWwgLyBkZWNrQ2FyZHMubGVuZ3RoIFxuICAgICAgICA6IDA7XG5cbiAgICAgIHN0YXRzLnB1c2goe1xuICAgICAgICBkZWNrTmFtZSxcbiAgICAgICAgdG90YWxDYXJkczogZGVja0NhcmRzLmxlbmd0aCxcbiAgICAgICAgZHVlQ2FyZHMsXG4gICAgICAgIG5ld0NhcmRzLFxuICAgICAgICBjb3JyZWN0UmF0ZSxcbiAgICAgICAgYXZlcmFnZUludGVydmFsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBzdGF0cy5zb3J0KChhLCBiKSA9PiBiLnRvdGFsQ2FyZHMgLSBhLnRvdGFsQ2FyZHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1OTZCRVx1NzBCOVx1NTM2MVx1NzI0N1xuICAgKi9cbiAgZ2V0RGlmZmljdWx0Q2FyZHMobGltaXQ6IG51bWJlciA9IDEwKTogRGlmZmljdWx0Q2FyZFtdIHtcbiAgICBjb25zdCBjYXJkcyA9IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgIGNvbnN0IGxvZ3MgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyWydyZXZpZXdMb2dzJ10gfHwgW107XG5cbiAgICBjb25zdCBkaWZmaWN1bHRDYXJkczogRGlmZmljdWx0Q2FyZFtdID0gW107XG5cbiAgICBjYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xuICAgICAgY29uc3QgY2FyZExvZ3MgPSBsb2dzLmZpbHRlcihsb2cgPT4gbG9nLmZsYXNoY2FyZElkID09PSBjYXJkLmlkKTtcbiAgICAgIFxuICAgICAgLy8gXHU4QkExXHU3Qjk3XHU5NTE5XHU4QkVGXHU2QjIxXHU2NTcwXG4gICAgICBjb25zdCBlcnJvckNvdW50ID0gY2FyZExvZ3MuZmlsdGVyKFxuICAgICAgICBsb2cgPT4gbG9nLnJlc3BvbnNlLmVhc2UgPT09ICdhZ2FpbidcbiAgICAgICkubGVuZ3RoO1xuXG4gICAgICBpZiAoZXJyb3JDb3VudCA9PT0gMCAmJiBjYXJkLnN0YXRzLmRpZmZpY3VsdHkgPCAwLjcpIHJldHVybjtcblxuICAgICAgLy8gXHU2NzAwXHU1NDBFXHU0RTAwXHU2QjIxXHU5NTE5XHU4QkVGXG4gICAgICBjb25zdCBlcnJvckxvZ3MgPSBjYXJkTG9ncy5maWx0ZXIobG9nID0+IGxvZy5yZXNwb25zZS5lYXNlID09PSAnYWdhaW4nKTtcbiAgICAgIGNvbnN0IGxhc3RFcnJvciA9IGVycm9yTG9ncy5sZW5ndGggPiAwIFxuICAgICAgICA/IGVycm9yTG9nc1tlcnJvckxvZ3MubGVuZ3RoIC0gMV0udGltZXN0YW1wIFxuICAgICAgICA6IDA7XG5cbiAgICAgIC8vIFx1NTIyNFx1NjVBRFx1OTUxOVx1OEJFRlx1NkEyMVx1NUYwRlxuICAgICAgY29uc3QgcGF0dGVybiA9IHRoaXMuZGV0ZWN0RXJyb3JQYXR0ZXJuKGNhcmQsIGNhcmRMb2dzKTtcblxuICAgICAgZGlmZmljdWx0Q2FyZHMucHVzaCh7XG4gICAgICAgIGNhcmQsXG4gICAgICAgIGVycm9yQ291bnQsXG4gICAgICAgIGxhc3RFcnJvcixcbiAgICAgICAgYXZlcmFnZVRpbWU6IGNhcmQuc3RhdHMuYXZlcmFnZVRpbWUsXG4gICAgICAgIHBhdHRlcm5cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gXHU2MzkyXHU1RThGXHVGRjFBXHU5NTE5XHU4QkVGXHU2QjIxXHU2NTcwID4gXHU5NkJFXHU1RUE2ID4gXHU2NzAwXHU4RkQxXHU5NTE5XHU4QkVGXG4gICAgcmV0dXJuIGRpZmZpY3VsdENhcmRzXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBpZiAoYS5lcnJvckNvdW50ICE9PSBiLmVycm9yQ291bnQpIHtcbiAgICAgICAgICByZXR1cm4gYi5lcnJvckNvdW50IC0gYS5lcnJvckNvdW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChhLmNhcmQuc3RhdHMuZGlmZmljdWx0eSAhPT0gYi5jYXJkLnN0YXRzLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgICByZXR1cm4gYi5jYXJkLnN0YXRzLmRpZmZpY3VsdHkgLSBhLmNhcmQuc3RhdHMuZGlmZmljdWx0eTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYi5sYXN0RXJyb3IgLSBhLmxhc3RFcnJvcjtcbiAgICAgIH0pXG4gICAgICAuc2xpY2UoMCwgbGltaXQpO1xuICB9XG5cbiAgcHJpdmF0ZSBkZXRlY3RFcnJvclBhdHRlcm4oXG4gICAgY2FyZDogRmxhc2hjYXJkLFxuICAgIGxvZ3M6IFJldmlld0xvZ1tdXG4gICk6IERpZmZpY3VsdENhcmRbJ3BhdHRlcm4nXSB7XG4gICAgaWYgKGxvZ3MubGVuZ3RoIDwgMykgcmV0dXJuICd1bmtub3duJztcblxuICAgIC8vIFx1NjVGNlx1OTVGNFx1OEZDN1x1OTU3RiAtPiBcdThCQTFcdTdCOTdcdTk1RUVcdTk4OThcbiAgICBpZiAoY2FyZC5zdGF0cy5hdmVyYWdlVGltZSA+IDYwKSB7XG4gICAgICByZXR1cm4gJ2NhbGN1bGF0aW9uJztcbiAgICB9XG5cbiAgICAvLyBcdTk1RjRcdTk2OTRcdTVGODhcdTc3RURcdTRFQ0RcdTcxMzZcdTk1MTlcdThCRUYgLT4gXHU4QkIwXHU1RkM2XHU5NUVFXHU5ODk4XG4gICAgaWYgKGNhcmQuc2NoZWR1bGluZy5pbnRlcnZhbCA8IDMgJiYgY2FyZC5zY2hlZHVsaW5nLmxhcHNlcyA+IDIpIHtcbiAgICAgIHJldHVybiAnbWVtb3J5JztcbiAgICB9XG5cbiAgICAvLyBcdTYzMDFcdTdFRURcdTU5MzFcdThEMjUgLT4gXHU2OTgyXHU1RkY1XHU3NDA2XHU4OUUzXHU5NUVFXHU5ODk4XG4gICAgY29uc3QgcmVjZW50TG9ncyA9IGxvZ3Muc2xpY2UoLTUpO1xuICAgIGNvbnN0IHJlY2VudEZhaWx1cmVzID0gcmVjZW50TG9ncy5maWx0ZXIoXG4gICAgICBsb2cgPT4gbG9nLnJlc3BvbnNlLmVhc2UgPT09ICdhZ2FpbidcbiAgICApLmxlbmd0aDtcbiAgICBcbiAgICBpZiAocmVjZW50RmFpbHVyZXMgPj0gMykge1xuICAgICAgcmV0dXJuICdjb25jZXB0JztcbiAgICB9XG5cbiAgICByZXR1cm4gJ3Vua25vd24nO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NjgwN1x1N0I3RVx1N0VERlx1OEJBMVxuICAgKi9cbiAgZ2V0VGFnU3RhdHMoKTogeyB0YWc6IHN0cmluZzsgY291bnQ6IG51bWJlcjsgY29ycmVjdFJhdGU6IG51bWJlciB9W10ge1xuICAgIGNvbnN0IGNhcmRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRBbGxGbGFzaGNhcmRzKCk7XG4gICAgY29uc3QgdGFnTWFwID0gbmV3IE1hcDxzdHJpbmcsIHsgdG90YWw6IG51bWJlcjsgY29ycmVjdDogbnVtYmVyOyByZXZpZXdzOiBudW1iZXIgfT4oKTtcblxuICAgIGNhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICBjYXJkLnRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICBpZiAoIXRhZ01hcC5oYXModGFnKSkge1xuICAgICAgICAgIHRhZ01hcC5zZXQodGFnLCB7IHRvdGFsOiAwLCBjb3JyZWN0OiAwLCByZXZpZXdzOiAwIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXQgPSB0YWdNYXAuZ2V0KHRhZykhO1xuICAgICAgICBzdGF0LnRvdGFsKys7XG4gICAgICAgIHN0YXQuY29ycmVjdCArPSBjYXJkLnN0YXRzLmNvcnJlY3RDb3VudDtcbiAgICAgICAgc3RhdC5yZXZpZXdzICs9IGNhcmQuc3RhdHMudG90YWxSZXZpZXdzO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBzdGF0cyA9IEFycmF5LmZyb20odGFnTWFwLmVudHJpZXMoKSkubWFwKChbdGFnLCBkYXRhXSkgPT4gKHtcbiAgICAgIHRhZyxcbiAgICAgIGNvdW50OiBkYXRhLnRvdGFsLFxuICAgICAgY29ycmVjdFJhdGU6IGRhdGEucmV2aWV3cyA+IDAgPyBkYXRhLmNvcnJlY3QgLyBkYXRhLnJldmlld3MgOiAwXG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIHN0YXRzLnNvcnQoKGEsIGIpID0+IGIuY291bnQgLSBhLmNvdW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTc1MUZcdTYyMTBcdTVCNjZcdTRFNjBcdTYyQTVcdTU0NEFcbiAgICovXG4gIGdlbmVyYXRlUmVwb3J0KGRheXM6IG51bWJlciA9IDcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRhaWx5U3RhdHMgPSB0aGlzLmdldERhaWx5U3RhdHMoZGF5cyk7XG4gICAgY29uc3QgeyB0aGlzV2VlaywgbGFzdFdlZWsgfSA9IHRoaXMuZ2V0V2Vla2x5U3RhdHMoKTtcbiAgICBjb25zdCBkaWZmaWN1bHRDYXJkcyA9IHRoaXMuZ2V0RGlmZmljdWx0Q2FyZHMoNSk7XG4gICAgY29uc3QgZGVja1N0YXRzID0gdGhpcy5nZXREZWNrU3RhdHMoKTtcblxuICAgIC8vIFx1OEJBMVx1N0I5N1x1NjAzQlx1ODlDOFx1NjU3MFx1NjM2RVxuICAgIGNvbnN0IHRvdGFsUmV2aWV3ZWQgPSBkYWlseVN0YXRzLnJlZHVjZSgoc3VtLCBzKSA9PiBzdW0gKyBzLnJldmlld2VkLCAwKTtcbiAgICBjb25zdCB0b3RhbENvcnJlY3QgPSBkYWlseVN0YXRzLnJlZHVjZSgoc3VtLCBzKSA9PiBzdW0gKyBzLmNvcnJlY3RDb3VudCwgMCk7XG4gICAgY29uc3QgYXZlcmFnZUNvcnJlY3RSYXRlID0gdG90YWxSZXZpZXdlZCA+IDAgPyB0b3RhbENvcnJlY3QgLyB0b3RhbFJldmlld2VkIDogMDtcbiAgICBjb25zdCB0b3RhbFRpbWUgPSBkYWlseVN0YXRzLnJlZHVjZSgoc3VtLCBzKSA9PiBzdW0gKyBzLnRpbWVTcGVudCwgMCk7XG5cbiAgICAvLyBcdThEOEJcdTUyQkZcdTUyMDZcdTY3OTBcbiAgICBjb25zdCByZWNlbnREYXlzID0gZGFpbHlTdGF0cy5zbGljZSgtNyk7XG4gICAgY29uc3Qgb2xkZXJEYXlzID0gZGFpbHlTdGF0cy5zbGljZSgtMTQsIC03KTtcbiAgICBjb25zdCByZWNlbnRSYXRlID0gdGhpcy5jYWxjdWxhdGVBdmVyYWdlUmF0ZShyZWNlbnREYXlzKTtcbiAgICBjb25zdCBvbGRlclJhdGUgPSB0aGlzLmNhbGN1bGF0ZUF2ZXJhZ2VSYXRlKG9sZGVyRGF5cyk7XG4gICAgY29uc3QgdHJlbmQgPSByZWNlbnRSYXRlID4gb2xkZXJSYXRlID8gJ1x1RDgzRFx1RENDOCBpbXByb3ZpbmcnIDogXG4gICAgICAgICAgICAgICAgICByZWNlbnRSYXRlIDwgb2xkZXJSYXRlID8gJ1x1RDgzRFx1RENDOSBkZWNsaW5pbmcnIDogJ1x1MjdBMVx1RkUwRiBzdGFibGUnO1xuXG4gICAgbGV0IHJlcG9ydCA9IGAjIFx1RDgzRFx1RENDQSBMZWFybmluZyBSZXBvcnRcXG5cXG5gO1xuICAgIHJlcG9ydCArPSBgKipQZXJpb2Q6KiogTGFzdCAke2RheXN9IGRheXNcXG5gO1xuICAgIHJlcG9ydCArPSBgKipHZW5lcmF0ZWQ6KiogJHtuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCl9XFxuXFxuYDtcblxuICAgIHJlcG9ydCArPSBgIyMgXHVEODNDXHVERkFGIE92ZXJhbGwgUGVyZm9ybWFuY2VcXG5cXG5gO1xuICAgIHJlcG9ydCArPSBgLSAqKkNhcmRzIFJldmlld2VkOioqICR7dG90YWxSZXZpZXdlZH1cXG5gO1xuICAgIHJlcG9ydCArPSBgLSAqKkNvcnJlY3QgUmF0ZToqKiAkeyhhdmVyYWdlQ29ycmVjdFJhdGUgKiAxMDApLnRvRml4ZWQoMSl9JVxcbmA7XG4gICAgcmVwb3J0ICs9IGAtICoqU3R1ZHkgVGltZToqKiAke3RoaXMuZm9ybWF0VGltZSh0b3RhbFRpbWUpfVxcbmA7XG4gICAgcmVwb3J0ICs9IGAtICoqQ3VycmVudCBTdHJlYWs6KiogJHt0aGlzV2Vlay5zdHJlYWt9IGRheXMgXHVEODNEXHVERDI1XFxuYDtcbiAgICByZXBvcnQgKz0gYC0gKipUcmVuZDoqKiAke3RyZW5kfVxcblxcbmA7XG5cbiAgICByZXBvcnQgKz0gYCMjIFx1RDgzRFx1RENDOCBXZWVrIENvbXBhcmlzb25cXG5cXG5gO1xuICAgIHJlcG9ydCArPSBgIyMjIFRoaXMgV2Vla1xcbmA7XG4gICAgcmVwb3J0ICs9IGAtIFJldmlld3M6ICR7dGhpc1dlZWsudG90YWxSZXZpZXdzfVxcbmA7XG4gICAgcmVwb3J0ICs9IGAtIENvcnJlY3QgUmF0ZTogJHsodGhpc1dlZWsuYXZlcmFnZUNvcnJlY3RSYXRlICogMTAwKS50b0ZpeGVkKDEpfSVcXG5gO1xuICAgIHJlcG9ydCArPSBgLSBUaW1lOiAke3RoaXMuZm9ybWF0VGltZSh0aGlzV2Vlay50b3RhbFRpbWVTcGVudCl9XFxuXFxuYDtcblxuICAgIHJlcG9ydCArPSBgIyMjIExhc3QgV2Vla1xcbmA7XG4gICAgcmVwb3J0ICs9IGAtIFJldmlld3M6ICR7bGFzdFdlZWsudG90YWxSZXZpZXdzfVxcbmA7XG4gICAgcmVwb3J0ICs9IGAtIENvcnJlY3QgUmF0ZTogJHsobGFzdFdlZWsuYXZlcmFnZUNvcnJlY3RSYXRlICogMTAwKS50b0ZpeGVkKDEpfSVcXG5gO1xuICAgIHJlcG9ydCArPSBgLSBUaW1lOiAke3RoaXMuZm9ybWF0VGltZShsYXN0V2Vlay50b3RhbFRpbWVTcGVudCl9XFxuXFxuYDtcblxuICAgIGNvbnN0IHJldmlld0NoYW5nZSA9IHRoaXNXZWVrLnRvdGFsUmV2aWV3cyAtIGxhc3RXZWVrLnRvdGFsUmV2aWV3cztcbiAgICBjb25zdCByYXRlQ2hhbmdlID0gKHRoaXNXZWVrLmF2ZXJhZ2VDb3JyZWN0UmF0ZSAtIGxhc3RXZWVrLmF2ZXJhZ2VDb3JyZWN0UmF0ZSkgKiAxMDA7XG4gICAgXG4gICAgaWYgKHJldmlld0NoYW5nZSA+IDApIHtcbiAgICAgIHJlcG9ydCArPSBgXHVEODNEXHVEQ0FBIFlvdSByZXZpZXdlZCAqKiR7cmV2aWV3Q2hhbmdlfSBtb3JlIGNhcmRzKiogdGhpcyB3ZWVrIVxcbmA7XG4gICAgfVxuICAgIGlmIChyYXRlQ2hhbmdlID4gNSkge1xuICAgICAgcmVwb3J0ICs9IGBcdUQ4M0NcdURGODkgWW91ciBhY2N1cmFjeSBpbXByb3ZlZCBieSAqKiR7cmF0ZUNoYW5nZS50b0ZpeGVkKDEpfSUqKiFcXG5gO1xuICAgIH1cbiAgICByZXBvcnQgKz0gYFxcbmA7XG5cbiAgICBpZiAoZGlmZmljdWx0Q2FyZHMubGVuZ3RoID4gMCkge1xuICAgICAgcmVwb3J0ICs9IGAjIyBcdTI2QTBcdUZFMEYgQ2FyZHMgTmVlZGluZyBBdHRlbnRpb25cXG5cXG5gO1xuICAgICAgZGlmZmljdWx0Q2FyZHMuZm9yRWFjaCgoZGMsIGkpID0+IHtcbiAgICAgICAgY29uc3QgcGF0dGVybkVtb2ppID0ge1xuICAgICAgICAgICdjb25jZXB0JzogJ1x1RDgzRVx1RERFMCcsXG4gICAgICAgICAgJ21lbW9yeSc6ICdcdUQ4M0RcdURDQUQnLFxuICAgICAgICAgICdjYWxjdWxhdGlvbic6ICdcdUQ4M0RcdUREMjInLFxuICAgICAgICAgICd1bmtub3duJzogJ1x1Mjc1MydcbiAgICAgICAgfTtcbiAgICAgICAgcmVwb3J0ICs9IGAke2kgKyAxfS4gKioke2RjLmNhcmQuZnJvbnQuc3Vic3RyaW5nKDAsIDUwKX0ke2RjLmNhcmQuZnJvbnQubGVuZ3RoID4gNTAgPyAnLi4uJyA6ICcnfSoqXFxuYDtcbiAgICAgICAgcmVwb3J0ICs9IGAgICAtIEVycm9yczogJHtkYy5lcnJvckNvdW50fSB8IFBhdHRlcm46ICR7cGF0dGVybkVtb2ppW2RjLnBhdHRlcm5dfSAke2RjLnBhdHRlcm59XFxuYDtcbiAgICAgICAgcmVwb3J0ICs9IGAgICAtIEF2ZyBUaW1lOiAke2RjLmF2ZXJhZ2VUaW1lLnRvRml4ZWQoMSl9cyB8IERpZmZpY3VsdHk6ICR7KGRjLmNhcmQuc3RhdHMuZGlmZmljdWx0eSAqIDEwMCkudG9GaXhlZCgwKX0lXFxuXFxuYDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlcG9ydCArPSBgIyMgXHVEODNEXHVEQ0RBIERlY2sgT3ZlcnZpZXdcXG5cXG5gO1xuICAgIGRlY2tTdGF0cy5mb3JFYWNoKGRlY2sgPT4ge1xuICAgICAgcmVwb3J0ICs9IGAjIyMgJHtkZWNrLmRlY2tOYW1lfVxcbmA7XG4gICAgICByZXBvcnQgKz0gYC0gVG90YWw6ICR7ZGVjay50b3RhbENhcmRzfSB8IER1ZTogJHtkZWNrLmR1ZUNhcmRzfSB8IE5ldzogJHtkZWNrLm5ld0NhcmRzfVxcbmA7XG4gICAgICByZXBvcnQgKz0gYC0gQ29ycmVjdCBSYXRlOiAkeyhkZWNrLmNvcnJlY3RSYXRlICogMTAwKS50b0ZpeGVkKDEpfSVcXG5gO1xuICAgICAgcmVwb3J0ICs9IGAtIEF2ZyBJbnRlcnZhbDogJHtkZWNrLmF2ZXJhZ2VJbnRlcnZhbC50b0ZpeGVkKDEpfSBkYXlzXFxuXFxuYDtcbiAgICB9KTtcblxuICAgIHJlcG9ydCArPSBgIyMgXHVEODNEXHVEQ0ExIFJlY29tbWVuZGF0aW9uc1xcblxcbmA7XG5cbiAgICAvLyBcdTc1MUZcdTYyMTBcdTVFRkFcdThCQUVcbiAgICBpZiAoYXZlcmFnZUNvcnJlY3RSYXRlIDwgMC43KSB7XG4gICAgICByZXBvcnQgKz0gYC0gXHUyNkExIFlvdXIgY29ycmVjdCByYXRlIGlzIGJlbG93IDcwJS4gQ29uc2lkZXIgcmV2aWV3aW5nIGRpZmZpY3VsdCBjYXJkcyBtb3JlIGZyZXF1ZW50bHkuXFxuYDtcbiAgICB9XG4gICAgaWYgKGRpZmZpY3VsdENhcmRzLmxlbmd0aCA+IDUpIHtcbiAgICAgIHJlcG9ydCArPSBgLSBcdUQ4M0RcdURDRDYgWW91IGhhdmUgbWFueSBkaWZmaWN1bHQgY2FyZHMuIFRyeSBicmVha2luZyBjb21wbGV4IGNvbmNlcHRzIGludG8gc21hbGxlciBmbGFzaGNhcmRzLlxcbmA7XG4gICAgfVxuICAgIGlmICh0aGlzV2Vlay5zdHJlYWsgPiA3KSB7XG4gICAgICByZXBvcnQgKz0gYC0gXHVEODNDXHVERjg5IEFtYXppbmcgc3RyZWFrISBLZWVwIHVwIHRoZSBjb25zaXN0ZW5jeSFcXG5gO1xuICAgIH1cbiAgICBpZiAodG90YWxUaW1lIC8gdG90YWxSZXZpZXdlZCA+IDMwKSB7XG4gICAgICByZXBvcnQgKz0gYC0gXHUyM0YxXHVGRTBGIEF2ZXJhZ2UgcmV2aWV3IHRpbWUgaXMgaGlnaC4gQ29uc2lkZXIgc2ltcGxpZnlpbmcgY2FyZCBjb250ZW50LlxcbmA7XG4gICAgfVxuICAgIGlmIChkZWNrU3RhdHMuc29tZShkID0+IGQuZHVlQ2FyZHMgPiBkLnRvdGFsQ2FyZHMgKiAwLjUpKSB7XG4gICAgICByZXBvcnQgKz0gYC0gXHVEODNEXHVEQ0M1IFNvbWUgZGVja3MgaGF2ZSBtYW55IG92ZXJkdWUgY2FyZHMuIEZvY3VzIG9uIGNhdGNoaW5nIHVwIHdpdGggdGhlc2UuXFxuYDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVwb3J0O1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVBdmVyYWdlUmF0ZShzdGF0czogRGFpbHlTdGF0c1tdKTogbnVtYmVyIHtcbiAgICBjb25zdCB0b3RhbCA9IHN0YXRzLnJlZHVjZSgoc3VtLCBzKSA9PiBzdW0gKyBzLnJldmlld2VkLCAwKTtcbiAgICBjb25zdCBjb3JyZWN0ID0gc3RhdHMucmVkdWNlKChzdW0sIHMpID0+IHN1bSArIHMuY29ycmVjdENvdW50LCAwKTtcbiAgICByZXR1cm4gdG90YWwgPiAwID8gY29ycmVjdCAvIHRvdGFsIDogMDtcbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0VGltZShzZWNvbmRzOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gMzYwMCk7XG4gICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKHNlY29uZHMgJSAzNjAwKSAvIDYwKTtcbiAgICBcbiAgICBpZiAoaG91cnMgPiAwKSB7XG4gICAgICByZXR1cm4gYCR7aG91cnN9aCAke21pbnV0ZXN9bWA7XG4gICAgfVxuICAgIHJldHVybiBgJHttaW51dGVzfW1gO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NzBFRFx1NTI5Qlx1NTZGRVx1NjU3MFx1NjM2RVx1RkYwOFx1NzUyOFx1NEU4RVx1NjVFNVx1NTM4Nlx1ODlDNlx1NTZGRVx1RkYwOVxuICAgKi9cbiAgZ2V0SGVhdG1hcERhdGEoZGF5czogbnVtYmVyID0gOTApOiB7IGRhdGU6IHN0cmluZzsgY291bnQ6IG51bWJlcjsgaW50ZW5zaXR5OiBudW1iZXIgfVtdIHtcbiAgICBjb25zdCBkYWlseVN0YXRzID0gdGhpcy5nZXREYWlseVN0YXRzKGRheXMpO1xuICAgIGNvbnN0IG1heFJldmlld3MgPSBNYXRoLm1heCguLi5kYWlseVN0YXRzLm1hcChzID0+IHMucmV2aWV3ZWQpKTtcblxuICAgIHJldHVybiBkYWlseVN0YXRzLm1hcChzdGF0ID0+ICh7XG4gICAgICBkYXRlOiBzdGF0LmRhdGUsXG4gICAgICBjb3VudDogc3RhdC5yZXZpZXdlZCxcbiAgICAgIGludGVuc2l0eTogbWF4UmV2aWV3cyA+IDAgPyBzdGF0LnJldmlld2VkIC8gbWF4UmV2aWV3cyA6IDBcbiAgICB9KSk7XG4gIH1cbiAgLyoqXG4gKiBcdTZFMDVcdTk2NjRcdTYyNDBcdTY3MDlcdTdFREZcdThCQTFcdTY1NzBcdTYzNkVcbiAqL1xuYXN5bmMgY2xlYXJBbGxTdGF0cygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgLy8gXHU2RTA1XHU5NjY0XHU2MjQwXHU2NzA5XHU1OTBEXHU0RTYwXHU2NUU1XHU1RkQ3XG4gIHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXJbJ3Jldmlld0xvZ3MnXSA9IFtdO1xuICBcbiAgLy8gXHU5MUNEXHU3RjZFXHU2MjQwXHU2NzA5XHU1MzYxXHU3MjQ3XHU3Njg0XHU3RURGXHU4QkExXHU0RkUxXHU2MDZGXG4gIGNvbnN0IGNhcmRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRBbGxGbGFzaGNhcmRzKCk7XG4gIGZvciAoY29uc3QgY2FyZCBvZiBjYXJkcykge1xuICAgIGNhcmQuc3RhdHMgPSB7XG4gICAgICB0b3RhbFJldmlld3M6IDAsXG4gICAgICBjb3JyZWN0Q291bnQ6IDAsXG4gICAgICBhdmVyYWdlVGltZTogMCxcbiAgICAgIGxhc3RSZXZpZXc6IDAsXG4gICAgICBkaWZmaWN1bHR5OiAwLjNcbiAgICB9O1xuICAgIGNhcmQuc2NoZWR1bGluZyA9IHtcbiAgICAgIGludGVydmFsOiAwLFxuICAgICAgZWFzZTogMi41LCAgLy8gXHU0RjdGXHU3NTI4IGVhc2UgXHU4MDBDXHU0RTBEXHU2NjJGIGVhc2VGYWN0b3JcbiAgICAgIGR1ZTogRGF0ZS5ub3coKSxcbiAgICAgIGxhcHNlczogMCxcbiAgICAgIHJlcHM6IDAsXG4gICAgICBzdGF0ZTogJ25ldydcbiAgICB9O1xuICAgIGF3YWl0IHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXIudXBkYXRlQ2FyZChjYXJkKTtcbiAgfVxuICBcbiAgLy8gXHU0RjdGXHU3NTI4IGRhdGFNYW5hZ2VyIFx1NEZERFx1NUI1OFxuICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5zYXZlKCk7XG59XG5cbi8qKlxuICogXHU2RTA1XHU5NjY0XHU2MzA3XHU1QjlBXHU1OTI5XHU2NTcwXHU0RTRCXHU1MjREXHU3Njg0XHU3RURGXHU4QkExXHU2NTcwXHU2MzZFXG4gKi9cbmFzeW5jIGNsZWFyU3RhdHNCZWZvcmVEYXRlKGRheXNBZ286IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBjdXRvZmZEYXRlID0gbmV3IERhdGUoKTtcbiAgY3V0b2ZmRGF0ZS5zZXREYXRlKGN1dG9mZkRhdGUuZ2V0RGF0ZSgpIC0gZGF5c0Fnbyk7XG4gIGNvbnN0IGN1dG9mZlRpbWVzdGFtcCA9IGN1dG9mZkRhdGUuZ2V0VGltZSgpO1xuICBcbiAgLy8gXHU1M0VBXHU0RkREXHU3NTU5XHU2MzA3XHU1QjlBXHU2NUU1XHU2NzFGXHU0RTRCXHU1NDBFXHU3Njg0XHU1OTBEXHU0RTYwXHU2NUU1XHU1RkQ3XG4gIGNvbnN0IGxvZ3MgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyWydyZXZpZXdMb2dzJ10gfHwgW107XG4gIHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXJbJ3Jldmlld0xvZ3MnXSA9IGxvZ3MuZmlsdGVyKFxuICAgIGxvZyA9PiBsb2cudGltZXN0YW1wID49IGN1dG9mZlRpbWVzdGFtcFxuICApO1xuICBcbiAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuc2F2ZSgpO1xufVxuXG4vKipcbiAqIFx1NkUwNVx1OTY2NFx1NzI3OVx1NUI5QVx1NTM2MVx1N0VDNFx1NzY4NFx1N0VERlx1OEJBMVx1NjU3MFx1NjM2RVxuICovXG5hc3luYyBjbGVhckRlY2tTdGF0cyhkZWNrTmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGNhcmRzID0gdGhpcy5wbHVnaW4uZmxhc2hjYXJkTWFuYWdlci5nZXRBbGxGbGFzaGNhcmRzKClcbiAgICAuZmlsdGVyKGNhcmQgPT4gY2FyZC5kZWNrID09PSBkZWNrTmFtZSk7XG4gIFxuICBmb3IgKGNvbnN0IGNhcmQgb2YgY2FyZHMpIHtcbiAgICBjYXJkLnN0YXRzID0ge1xuICAgICAgdG90YWxSZXZpZXdzOiAwLFxuICAgICAgY29ycmVjdENvdW50OiAwLFxuICAgICAgYXZlcmFnZVRpbWU6IDAsXG4gICAgICBsYXN0UmV2aWV3OiAwLFxuICAgICAgZGlmZmljdWx0eTogMC4zXG4gICAgfTtcbiAgICBjYXJkLnNjaGVkdWxpbmcgPSB7XG4gICAgICBpbnRlcnZhbDogMCxcbiAgICAgIGVhc2U6IDIuNSwgIC8vIFx1NEY3Rlx1NzUyOCBlYXNlXG4gICAgICBkdWU6IERhdGUubm93KCksXG4gICAgICBsYXBzZXM6IDAsXG4gICAgICByZXBzOiAwLFxuICAgICAgc3RhdGU6ICduZXcnXG4gICAgfTtcbiAgICBhd2FpdCB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyLnVwZGF0ZUNhcmQoY2FyZCk7XG4gIH1cbiAgXG4gIC8vIFx1NkUwNVx1OTY2NFx1OEJFNVx1NTM2MVx1N0VDNFx1NzY4NFx1NTkwRFx1NEU2MFx1NjVFNVx1NUZEN1xuICBjb25zdCBjYXJkSWRzID0gbmV3IFNldChjYXJkcy5tYXAoYyA9PiBjLmlkKSk7XG4gIGNvbnN0IGxvZ3MgPSB0aGlzLnBsdWdpbi5mbGFzaGNhcmRNYW5hZ2VyWydyZXZpZXdMb2dzJ10gfHwgW107XG4gIHRoaXMucGx1Z2luLmZsYXNoY2FyZE1hbmFnZXJbJ3Jldmlld0xvZ3MnXSA9IGxvZ3MuZmlsdGVyKFxuICAgIGxvZyA9PiAhY2FyZElkcy5oYXMobG9nLmZsYXNoY2FyZElkKVxuICApO1xuICBcbiAgYXdhaXQgdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuc2F2ZSgpO1xufVxufVxuXG5cbiIsICIvLyBkYXRhIG1hbmFnZXIudHNcbmltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcblxuZXhwb3J0IGludGVyZmFjZSBDb250ZW50VW5pdCB7XG4gIGlkOiBzdHJpbmc7XG4gIHR5cGU6ICdoaWdobGlnaHQnIHwgJ2JvbGQnIHwgJ3RhZycgfCAnY3VzdG9tJyB8ICdRQScgfCAnY2xvemUnfCd0ZXh0JzsgLy8gXHU2REZCXHU1MkEwIHFhIFx1NTQ4QyBjbG96ZSBcdTdDN0JcdTU3OEJcbiAgY29udGVudDogc3RyaW5nO1xuICBhbnN3ZXI/OiBzdHJpbmc7IC8vIFx1NzUyOFx1NEU4RSBRQSBcdTUzNjFcdTcyNDdcdTc2ODRcdTdCNTRcdTY4NDhcbiAgZnVsbENvbnRleHQ/OiBzdHJpbmc7XG4gIHNvdXJjZToge1xuICAgIGZpbGU6IHN0cmluZztcbiAgICBwb3NpdGlvbjoge1xuICAgICAgc3RhcnQ6IG51bWJlcjtcbiAgICAgIGVuZDogbnVtYmVyO1xuICAgICAgbGluZTogbnVtYmVyO1xuICAgIH07XG4gICAgYmxvY2tJZD86IHN0cmluZztcbiAgICBoZWFkaW5nPzogc3RyaW5nO1xuICAgIGFuY2hvckxpbms6IHN0cmluZztcbiAgfTtcbiAgZXh0cmFjdFJ1bGU6IHtcbiAgICBydWxlSWQ6IHN0cmluZztcbiAgICBydWxlTmFtZTogc3RyaW5nO1xuICAgIGV4dHJhY3RlZEJ5OiAnYXV0bycgfCAnbWFudWFsJztcbiAgfTtcbiAgbWV0YWRhdGE6IHtcbiAgICBjcmVhdGVkQXQ6IG51bWJlcjtcbiAgICB1cGRhdGVkQXQ6IG51bWJlcjtcbiAgICB0YWdzOiBzdHJpbmdbXTtcbiAgICBjb2xvcj86IHN0cmluZztcbiAgICBjdXN0b21EYXRhPzogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgfTtcbiAgYW5ub3RhdGlvbklkPzogc3RyaW5nO1xuICBmbGFzaGNhcmRJZHM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgY2xhc3MgRGF0YU1hbmFnZXIge1xuICBwcml2YXRlIGRhdGFGb2xkZXI6IHN0cmluZztcbiAgcHJpdmF0ZSBjb250ZW50VW5pdHM6IE1hcDxzdHJpbmcsIENvbnRlbnRVbml0PiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBmaWxlSW5kZXg6IE1hcDxzdHJpbmcsIHN0cmluZ1tdPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBjYWNoZTogTWFwPHN0cmluZywgeyBkYXRhOiBDb250ZW50VW5pdDsgdGltZXN0YW1wOiBudW1iZXIgfT47XG4gIHByaXZhdGUgQ0FDSEVfVFRMID0gNSAqIDYwICogMTAwMDsgLy8gNVx1NTIwNlx1OTQ5RlxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgYXBwOiBBcHAsXG4gICAgcHJpdmF0ZSBwbHVnaW46IExlYXJuaW5nU3lzdGVtUGx1Z2luXG4gICkge1xuICAgIHRoaXMuZGF0YUZvbGRlciA9IGAke3RoaXMuYXBwLnZhdWx0LmNvbmZpZ0Rpcn0vcGx1Z2lucy9sZWFybmluZy1zeXN0ZW0vZGF0YWA7XG4gIH1cblxuICBhc3luYyBpbml0aWFsaXplKCkge1xuICAgIC8vIFx1Nzg2RVx1NEZERFx1NjU3MFx1NjM2RVx1NjU4N1x1NEVGNlx1NTkzOVx1NUI1OFx1NTcyOFxuICAgIGF3YWl0IHRoaXMuZW5zdXJlRGF0YUZvbGRlcigpO1xuICAgIFxuICAgIC8vIFx1NTJBMFx1OEY3RFx1NzNCMFx1NjcwOVx1NjU3MFx1NjM2RVxuICAgIGF3YWl0IHRoaXMubG9hZERhdGEoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZW5zdXJlRGF0YUZvbGRlcigpIHtcbiAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5hcHAudmF1bHQuYWRhcHRlcjtcbiAgICBcbiAgICAvLyBcdTUyMUJcdTVFRkFcdTRFM0JcdTY1NzBcdTYzNkVcdTY1ODdcdTRFRjZcdTU5MzlcbiAgICBpZiAoIShhd2FpdCBhZGFwdGVyLmV4aXN0cyh0aGlzLmRhdGFGb2xkZXIpKSkge1xuICAgICAgYXdhaXQgYWRhcHRlci5ta2Rpcih0aGlzLmRhdGFGb2xkZXIpO1xuICAgIH1cblxuICAgIC8vIFx1NTIxQlx1NUVGQVx1NUI1MFx1NjU4N1x1NEVGNlx1NTkzOVxuICAgIGNvbnN0IHN1YmZvbGRlcnMgPSBbJ2luZGV4ZXMnLCAnY29uZmlnJywgJ2NhY2hlJ107XG4gICAgZm9yIChjb25zdCBmb2xkZXIgb2Ygc3ViZm9sZGVycykge1xuICAgICAgY29uc3QgcGF0aCA9IGAke3RoaXMuZGF0YUZvbGRlcn0vJHtmb2xkZXJ9YDtcbiAgICAgIGlmICghKGF3YWl0IGFkYXB0ZXIuZXhpc3RzKHBhdGgpKSkge1xuICAgICAgICBhd2FpdCBhZGFwdGVyLm1rZGlyKHBhdGgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9hZERhdGEoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnRQYXRoID0gYCR7dGhpcy5kYXRhRm9sZGVyfS9jb250ZW50LXVuaXRzLmpzb25gO1xuICAgICAgY29uc3QgYWRhcHRlciA9IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXI7XG5cbiAgICAgIGlmIChhd2FpdCBhZGFwdGVyLmV4aXN0cyhjb250ZW50UGF0aCkpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGFkYXB0ZXIucmVhZChjb250ZW50UGF0aCk7XG4gICAgICAgIGNvbnN0IHVuaXRzOiBDb250ZW50VW5pdFtdID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgdW5pdCBvZiB1bml0cykge1xuICAgICAgICAgIHRoaXMuY29udGVudFVuaXRzLnNldCh1bml0LmlkLCB1bml0KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBcdTY3ODRcdTVFRkFcdTY1ODdcdTRFRjZcdTdEMjJcdTVGMTVcbiAgICAgICAgICBpZiAoIXRoaXMuZmlsZUluZGV4Lmhhcyh1bml0LnNvdXJjZS5maWxlKSkge1xuICAgICAgICAgICAgdGhpcy5maWxlSW5kZXguc2V0KHVuaXQuc291cmNlLmZpbGUsIFtdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5maWxlSW5kZXguZ2V0KHVuaXQuc291cmNlLmZpbGUpIS5wdXNoKHVuaXQuaWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgZGF0YTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2F2ZUNvbnRlbnRVbml0KHVuaXQ6IENvbnRlbnRVbml0KSB7XG4gICAgdGhpcy5jb250ZW50VW5pdHMuc2V0KHVuaXQuaWQsIHVuaXQpO1xuICAgIFxuICAgIC8vIFx1NjZGNFx1NjVCMFx1NjU4N1x1NEVGNlx1N0QyMlx1NUYxNVxuICAgIGlmICghdGhpcy5maWxlSW5kZXguaGFzKHVuaXQuc291cmNlLmZpbGUpKSB7XG4gICAgICB0aGlzLmZpbGVJbmRleC5zZXQodW5pdC5zb3VyY2UuZmlsZSwgW10pO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuZmlsZUluZGV4LmdldCh1bml0LnNvdXJjZS5maWxlKSEuaW5jbHVkZXModW5pdC5pZCkpIHtcbiAgICAgIHRoaXMuZmlsZUluZGV4LmdldCh1bml0LnNvdXJjZS5maWxlKSEucHVzaCh1bml0LmlkKTtcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnBlcnNpc3QoKTtcbiAgfVxuXG4gIGFzeW5jIHNhdmVDb250ZW50VW5pdHModW5pdHM6IENvbnRlbnRVbml0W10pIHtcbiAgICBmb3IgKGNvbnN0IHVuaXQgb2YgdW5pdHMpIHtcbiAgICAgIHRoaXMuY29udGVudFVuaXRzLnNldCh1bml0LmlkLCB1bml0KTtcbiAgICAgIFxuICAgICAgaWYgKCF0aGlzLmZpbGVJbmRleC5oYXModW5pdC5zb3VyY2UuZmlsZSkpIHtcbiAgICAgICAgdGhpcy5maWxlSW5kZXguc2V0KHVuaXQuc291cmNlLmZpbGUsIFtdKTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5maWxlSW5kZXguZ2V0KHVuaXQuc291cmNlLmZpbGUpIS5pbmNsdWRlcyh1bml0LmlkKSkge1xuICAgICAgICB0aGlzLmZpbGVJbmRleC5nZXQodW5pdC5zb3VyY2UuZmlsZSkhLnB1c2godW5pdC5pZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0KCk7XG4gIH1cblxuICBnZXRDb250ZW50VW5pdChpZDogc3RyaW5nKTogQ29udGVudFVuaXQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmNvbnRlbnRVbml0cy5nZXQoaWQpO1xuICB9XG5cbiAgZ2V0Q29udGVudFVuaXRzQnlGaWxlKGZpbGVQYXRoOiBzdHJpbmcpOiBDb250ZW50VW5pdFtdIHtcbiAgICBjb25zdCBpZHMgPSB0aGlzLmZpbGVJbmRleC5nZXQoZmlsZVBhdGgpIHx8IFtdO1xuICAgIHJldHVybiBpZHMubWFwKGlkID0+IHRoaXMuY29udGVudFVuaXRzLmdldChpZCkpLmZpbHRlcihCb29sZWFuKSBhcyBDb250ZW50VW5pdFtdO1xuICB9XG5cbiAgZ2V0Q29udGVudFVuaXRzQnlUeXBlKHR5cGU6IENvbnRlbnRVbml0Wyd0eXBlJ10pOiBDb250ZW50VW5pdFtdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmNvbnRlbnRVbml0cy52YWx1ZXMoKSkuZmlsdGVyKHVuaXQgPT4gdW5pdC50eXBlID09PSB0eXBlKTtcbiAgfVxuXG4gIGdldEFsbENvbnRlbnRVbml0cyhwYWdlPzogbnVtYmVyLCBzaXplPzogbnVtYmVyKTogQ29udGVudFVuaXRbXSB7XG4gICAgY29uc3QgYWxsID0gQXJyYXkuZnJvbSh0aGlzLmNvbnRlbnRVbml0cy52YWx1ZXMoKSk7XG4gICAgaWYgKCFwYWdlIHx8ICFzaXplKSByZXR1cm4gYWxsO1xuICAgIHJldHVybiBhbGwuc2xpY2UocGFnZSAqIHNpemUsIChwYWdlICsgMSkgKiBzaXplKTtcbiAgfVxuXG5cbiAgYXN5bmMgZGVsZXRlQ29udGVudFVuaXQoaWQ6IHN0cmluZykge1xuICAgIGNvbnN0IHVuaXQgPSB0aGlzLmNvbnRlbnRVbml0cy5nZXQoaWQpO1xuICAgIGlmICh1bml0KSB7XG4gICAgICB0aGlzLmNvbnRlbnRVbml0cy5kZWxldGUoaWQpO1xuICAgICAgXG4gICAgICAvLyBcdTY2RjRcdTY1QjBcdTY1ODdcdTRFRjZcdTdEMjJcdTVGMTVcbiAgICAgIGNvbnN0IGZpbGVVbml0cyA9IHRoaXMuZmlsZUluZGV4LmdldCh1bml0LnNvdXJjZS5maWxlKTtcbiAgICAgIGlmIChmaWxlVW5pdHMpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBmaWxlVW5pdHMuaW5kZXhPZihpZCk7XG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgZmlsZVVuaXRzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0KCk7XG4gICAgfVxuICB9XG4gIC8qKiBcdTVCRjlcdTU5MTZcdTdFREZcdTRFMDBcdTRGRERcdTVCNThcdTUxNjVcdTUzRTMgKi9cbiAgYXN5bmMgc2F2ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLnBlcnNpc3QoKTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBhc3luYyBwZXJzaXN0KCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250ZW50UGF0aCA9IGAke3RoaXMuZGF0YUZvbGRlcn0vY29udGVudC11bml0cy5qc29uYDtcbiAgICAgIGNvbnN0IHVuaXRzID0gQXJyYXkuZnJvbSh0aGlzLmNvbnRlbnRVbml0cy52YWx1ZXMoKSk7XG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5zdHJpbmdpZnkodW5pdHMsIG51bGwsIDIpO1xuICAgICAgXG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGNvbnRlbnRQYXRoLCBkYXRhKTtcbiAgICAgIFxuICAgICAgLy8gXHU0RkREXHU1QjU4XHU3RDIyXHU1RjE1XG4gICAgICBjb25zdCBpbmRleFBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L2luZGV4ZXMvZmlsZS1pbmRleC5qc29uYDtcbiAgICAgIGNvbnN0IGluZGV4RGF0YSA9IEpTT04uc3RyaW5naWZ5KFxuICAgICAgICBPYmplY3QuZnJvbUVudHJpZXModGhpcy5maWxlSW5kZXgpLFxuICAgICAgICBudWxsLFxuICAgICAgICAyXG4gICAgICApO1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShpbmRleFBhdGgsIGluZGV4RGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBlcnNpc3RpbmcgZGF0YTonLCBlcnJvcik7XG4gICAgfVxuICB9XG4gICAgLy8gXHVEODNEXHVERDI3IFx1NEYxOFx1NTMxNiA6IFx1NjI3OVx1OTFDRlx1NjRDRFx1NEY1Q1x1NEY3Rlx1NzUyOFx1NEU4Qlx1NTJBMVxuICAgIGFzeW5jIHRyYW5zYWN0aW9uKG9wZXJhdGlvbnM6ICgpID0+IFByb21pc2U8dm9pZD4pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IG9wZXJhdGlvbnMoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0KCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBcdTU2REVcdTZFREFcdTkwM0JcdThGOTFcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkRGF0YSgpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICB9XG59IiwgIi8vIGV4dHJhY3Rpb24gZW5naW5lIHdpdGggZGVkdXBsaWNhdGlvblxuaW1wb3J0IHsgQXBwLCBURmlsZSwgTm90aWNlLCBFZGl0b3IsIE1lbnUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBEYXRhTWFuYWdlciwgQ29udGVudFVuaXQgfSBmcm9tICcuL0RhdGFNYW5hZ2VyJztcbmltcG9ydCB7IEZsYXNoY2FyZE1hbmFnZXIgfSBmcm9tICcuL0ZsYXNoY2FyZE1hbmFnZXInO1xuaW1wb3J0IHsgU2lkZWJhck92ZXJ2aWV3VmlldyB9IGZyb20gJy4uL3VpL3ZpZXcvU2lkZWJhck92ZXJ2aWV3Vmlldyc7XG5cbmV4cG9ydCBjbGFzcyBFeHRyYWN0aW9uRW5naW5lIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBhcHA6IEFwcCxcbiAgICBwcml2YXRlIGRhdGFNYW5hZ2VyOiBEYXRhTWFuYWdlcixcbiAgICBwcml2YXRlIGZsYXNoY2FyZE1hbmFnZXI6IEZsYXNoY2FyZE1hbmFnZXIgXG4gICkge31cblxuICBcbiAgLyoqXG4gICAqIFx1NkNFOFx1NTE4Q1x1NTNGM1x1OTUyRVx1ODNEQ1x1NTM1NVxuICAgKi9cbiAgcmVnaXN0ZXJDb250ZXh0TWVudShtZW51OiBNZW51LCBlZGl0b3I6IEVkaXRvciwgZmlsZTogVEZpbGUpIHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgaWYgKCFzZWxlY3Rpb24pIHJldHVybjtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1RDgzRFx1RENERCBFeHRyYWN0IGFzIHRleHQgb25seScpXG4gICAgICAgIC5zZXRJY29uKCdmaWxlLXRleHQnKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5leHRyYWN0U2VsZWN0ZWRUZXh0KGVkaXRvciwgZmlsZSwgJ3RleHQnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcbiAgICAgIGl0ZW1cbiAgICAgICAgLnNldFRpdGxlKCdcdTI3NTMgRXh0cmFjdCBhcyBRQSBjYXJkJylcbiAgICAgICAgLnNldEljb24oJ2hlbHAtY2lyY2xlJylcbiAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZXh0cmFjdFNlbGVjdGVkVGV4dChlZGl0b3IsIGZpbGUsICdRQScpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgaXRlbVxuICAgICAgICAuc2V0VGl0bGUoJ1x1MjcwRlx1RkUwRiBFeHRyYWN0IGFzIENsb3plIGNhcmQnKVxuICAgICAgICAuc2V0SWNvbignaGlnaGxpZ2h0ZXInKVxuICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5leHRyYWN0U2VsZWN0ZWRUZXh0KGVkaXRvciwgZmlsZSwgJ2Nsb3plJyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgXG4gIC8qKlxuICAgKiBcdTYzRDBcdTUzRDZcdTkwMDlcdTRFMkRcdTc2ODRcdTY1ODdcdTY3MkNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZXh0cmFjdFNlbGVjdGVkVGV4dChcbiAgICBlZGl0b3I6IEVkaXRvciwgXG4gICAgZmlsZTogVEZpbGUsIFxuICAgIGV4dHJhY3RUeXBlOiAndGV4dCcgfCAnUUEnIHwgJ2Nsb3plJ1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgaWYgKCFzZWxlY3Rpb24pIHtcbiAgICAgIG5ldyBOb3RpY2UoJ05vIHRleHQgc2VsZWN0ZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCdmcm9tJyk7XG4gICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5nZXRPZmZzZXRGcm9tQ3Vyc29yKGNvbnRlbnQsIGN1cnNvci5saW5lLCBjdXJzb3IuY2gpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGxldCB1bml0OiBDb250ZW50VW5pdDtcblxuICAgICAgc3dpdGNoIChleHRyYWN0VHlwZSkge1xuICAgICAgICBjYXNlICd0ZXh0JzpcbiAgICAgICAgICB1bml0ID0gdGhpcy5jcmVhdGVUZXh0VW5pdChmaWxlLCBzZWxlY3Rpb24sIG9mZnNldCwgY29udGVudCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1FBJzpcbiAgICAgICAgICB1bml0ID0gdGhpcy5jcmVhdGVRQVVuaXQoZmlsZSwgc2VsZWN0aW9uLCBvZmZzZXQsIGNvbnRlbnQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdjbG96ZSc6XG4gICAgICAgICAgdW5pdCA9IHRoaXMuY3JlYXRlQ2xvemVVbml0KGZpbGUsIHNlbGVjdGlvbiwgb2Zmc2V0LCBjb250ZW50KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU5MUNEXHU1OTBEXG4gICAgICBjb25zdCBleGlzdGluZ1VuaXQgPSBhd2FpdCB0aGlzLmZpbmREdXBsaWNhdGVVbml0KHVuaXQpO1xuICAgICAgaWYgKGV4aXN0aW5nVW5pdCkge1xuICAgICAgICBuZXcgTm90aWNlKGBcdTI2QTBcdUZFMEYgVGhpcyBjb250ZW50IHdhcyBhbHJlYWR5IGV4dHJhY3RlZGApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIDEuIFx1NTE0OFx1NEZERFx1NUI1OCBDb250ZW50VW5pdFxuICAgICAgYXdhaXQgdGhpcy5kYXRhTWFuYWdlci5zYXZlQ29udGVudFVuaXRzKFt1bml0XSk7XG4gICAgICBcbiAgICAgIC8vIDIuIFx1NTk4Mlx1Njc5Q1x1NjYyRiBRQSBcdTYyMTYgY2xvemVcdUZGMENcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcbiAgICAgIGlmIChleHRyYWN0VHlwZSA9PT0gJ1FBJyB8fCBleHRyYWN0VHlwZSA9PT0gJ2Nsb3plJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGNhcmRUeXBlID0gZXh0cmFjdFR5cGUgPT09ICdRQScgPyAncWEnIDogJ2Nsb3plJztcbiAgICAgICAgICBjb25zdCBmbGFzaGNhcmQgPSBhd2FpdCB0aGlzLmZsYXNoY2FyZE1hbmFnZXIuY3JlYXRlRmxhc2hjYXJkRnJvbVVuaXQodW5pdCwge1xuICAgICAgICAgICAgY2FyZFR5cGU6IGNhcmRUeXBlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gMy4gXHU1MThEXHU2QjIxXHU0RkREXHU1QjU4IHVuaXRcdUZGMDhcdTY2RjRcdTY1QjAgZmxhc2hjYXJkSWRzXHVGRjA5XG4gICAgICAgICAgYXdhaXQgdGhpcy5kYXRhTWFuYWdlci5zYXZlQ29udGVudFVuaXRzKFt1bml0XSk7XG4gICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignW2V4dHJhY3RTZWxlY3RlZFRleHRdIFx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1NTkzMVx1OEQyNTonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgdHlwZU5hbWVzID0ge1xuICAgICAgICB0ZXh0OiAndGV4dCcsXG4gICAgICAgIFFBOiAnUUEgY2FyZCcsXG4gICAgICAgIGNsb3plOiAnY2xvemUgY2FyZCdcbiAgICAgIH07XG4gICAgICBcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBFeHRyYWN0ZWQgYXMgJHt0eXBlTmFtZXNbZXh0cmFjdFR5cGVdfWApO1xuICAgICAgXG4gICAgICAvLyA0LiBcdTUyMzdcdTY1QjBcdTYyNDBcdTY3MDlcdTg5QzZcdTU2RkVcbiAgICAgIHRoaXMucmVmcmVzaEFsbFZpZXdzKCk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZXh0cmFjdGluZyBzZWxlY3Rpb246JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShgXHUyNzRDIEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1RDgzQ1x1REQ5NSBcdTY3RTVcdTYyN0VcdTkxQ0RcdTU5MERcdTc2ODQgQ29udGVudFVuaXRcbiAgICogXHU2ODM5XHU2MzZFXHU2NTg3XHU0RUY2XHU4REVGXHU1Rjg0XHU1NDhDXHU0RjREXHU3RjZFXHU1MjI0XHU2NUFEXHU2NjJGXHU1NDI2XHU1REYyXHU1QjU4XHU1NzI4XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGZpbmREdXBsaWNhdGVVbml0KHVuaXQ6IENvbnRlbnRVbml0KTogUHJvbWlzZTxDb250ZW50VW5pdCB8IG51bGw+IHtcbiAgICBjb25zdCBhbGxVbml0cyA9IGF3YWl0IHRoaXMuZGF0YU1hbmFnZXIuZ2V0QWxsQ29udGVudFVuaXRzKCk7XG4gICAgXG4gICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1QjU4XHU1NzI4XHU3NkY4XHU1NDBDXHU0RjREXHU3RjZFXHU3Njg0IHVuaXRcbiAgICBjb25zdCBkdXBsaWNhdGUgPSBhbGxVbml0cy5maW5kKGV4aXN0aW5nID0+IFxuICAgICAgZXhpc3Rpbmcuc291cmNlLmZpbGUgPT09IHVuaXQuc291cmNlLmZpbGUgJiZcbiAgICAgIGV4aXN0aW5nLnNvdXJjZS5wb3NpdGlvbi5zdGFydCA9PT0gdW5pdC5zb3VyY2UucG9zaXRpb24uc3RhcnQgJiZcbiAgICAgIGV4aXN0aW5nLnNvdXJjZS5wb3NpdGlvbi5lbmQgPT09IHVuaXQuc291cmNlLnBvc2l0aW9uLmVuZCAmJlxuICAgICAgZXhpc3RpbmcudHlwZSA9PT0gdW5pdC50eXBlXG4gICAgKTtcbiAgICBcbiAgICByZXR1cm4gZHVwbGljYXRlIHx8IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogXHVEODNDXHVERDk1IFx1NjhDMFx1NjdFNVx1NTE4NVx1NUJCOVx1NjYyRlx1NTQyNlx1OTFDRFx1NTkwRFx1RkYwOFx1NTdGQVx1NEU4RVx1NTE4NVx1NUJCOVx1NzZGOFx1NEYzQ1x1NUVBNlx1RkYwOVxuICAgKi9cbiAgcHJpdmF0ZSBpc0NvbnRlbnREdXBsaWNhdGUoY29udGVudDE6IHN0cmluZywgY29udGVudDI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQxID0gY29udGVudDEudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZDIgPSBjb250ZW50Mi50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gbm9ybWFsaXplZDEgPT09IG5vcm1hbGl6ZWQyO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NTIxQlx1NUVGQVx1N0VBRlx1NjU4N1x1NjcyQ1x1NTM1NVx1NTE0M1xuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVUZXh0VW5pdChcbiAgICBmaWxlOiBURmlsZSxcbiAgICBzZWxlY3Rpb246IHN0cmluZyxcbiAgICBvZmZzZXQ6IG51bWJlcixcbiAgICBmaWxlQ29udGVudDogc3RyaW5nXG4gICk6IENvbnRlbnRVbml0IHtcbiAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuY2FsY3VsYXRlUG9zaXRpb24oZmlsZUNvbnRlbnQsIG9mZnNldCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVJZCgpLFxuICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgY29udGVudDogc2VsZWN0aW9uLnRyaW0oKSxcbiAgICAgIGZ1bGxDb250ZXh0OiBzZWxlY3Rpb24udHJpbSgpLFxuICAgICAgc291cmNlOiB7XG4gICAgICAgIGZpbGU6IGZpbGUucGF0aCxcbiAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICBzdGFydDogb2Zmc2V0LFxuICAgICAgICAgIGVuZDogb2Zmc2V0ICsgc2VsZWN0aW9uLmxlbmd0aCxcbiAgICAgICAgICBsaW5lOiBwb3NpdGlvbi5saW5lXG4gICAgICAgIH0sXG4gICAgICAgIGhlYWRpbmc6IHRoaXMuZmluZEhlYWRpbmcoZmlsZUNvbnRlbnQsIG9mZnNldCksXG4gICAgICAgIGFuY2hvckxpbms6IGBbWyR7ZmlsZS5iYXNlbmFtZX0jXiR7dGhpcy5nZW5lcmF0ZUJsb2NrSWQoKX1dXWBcbiAgICAgIH0sXG4gICAgICBleHRyYWN0UnVsZToge1xuICAgICAgICBydWxlSWQ6ICd0ZXh0LW1hbnVhbCcsXG4gICAgICAgIHJ1bGVOYW1lOiAnTWFudWFsIFRleHQgRXh0cmFjdCcsXG4gICAgICAgIGV4dHJhY3RlZEJ5OiAnbWFudWFsJ1xuICAgICAgfSxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIGNyZWF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICB0YWdzOiB0aGlzLmV4dHJhY3RUYWdzKGZpbGVDb250ZW50LCBvZmZzZXQpXG4gICAgICB9LFxuICAgICAgZmxhc2hjYXJkSWRzOiBbXVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogXHU1MjFCXHU1RUZBIFFBIFx1NTM2MVx1NzI0N1x1NTM1NVx1NTE0M1xuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVRQVVuaXQoXG4gICAgZmlsZTogVEZpbGUsXG4gICAgc2VsZWN0aW9uOiBzdHJpbmcsXG4gICAgb2Zmc2V0OiBudW1iZXIsXG4gICAgZmlsZUNvbnRlbnQ6IHN0cmluZ1xuICApOiBDb250ZW50VW5pdCB7XG4gICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLmNhbGN1bGF0ZVBvc2l0aW9uKGZpbGVDb250ZW50LCBvZmZzZXQpO1xuICAgIFxuICAgIC8vIFx1NUMxRFx1OEJENVx1NTIwNlx1NTI3Mlx1NjIxMFx1OTVFRVx1OTg5OFx1NTQ4Q1x1N0I1NFx1Njg0OFxuICAgIGxldCBxdWVzdGlvbjogc3RyaW5nLCBhbnN3ZXI6IHN0cmluZztcbiAgICBcbiAgICBpZiAoc2VsZWN0aW9uLmluY2x1ZGVzKCc6OicpKSB7XG4gICAgICAvLyBcdTU5ODJcdTY3OUNcdTUzMDVcdTU0MkIgOjogXHU1MjA2XHU5Njk0XHU3QjI2XG4gICAgICBjb25zdCBwYXJ0cyA9IHNlbGVjdGlvbi5zcGxpdCgnOjonKTtcbiAgICAgIHF1ZXN0aW9uID0gcGFydHNbMF0udHJpbSgpO1xuICAgICAgYW5zd2VyID0gcGFydHMuc2xpY2UoMSkuam9pbignOjonKS50cmltKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFx1NTQyNlx1NTIxOVx1NjU3NFx1NEUyQVx1OTAwOVx1NEUyRFx1NjU4N1x1NjcyQ1x1NEY1Q1x1NEUzQVx1OTVFRVx1OTg5OFx1RkYwQ1x1N0I1NFx1Njg0OFx1NEUzQVx1N0E3QVx1RkYwOFx1OTcwMFx1ODk4MVx1NzUyOFx1NjIzN1x1ODg2NVx1NTE0NVx1RkYwOVxuICAgICAgcXVlc3Rpb24gPSBzZWxlY3Rpb24udHJpbSgpO1xuICAgICAgYW5zd2VyID0gJ1tBbnN3ZXIgbmVlZGVkXSc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgIHR5cGU6ICdRQScsXG4gICAgICBjb250ZW50OiBxdWVzdGlvbixcbiAgICAgIGFuc3dlcjogYW5zd2VyLFxuICAgICAgZnVsbENvbnRleHQ6IHNlbGVjdGlvbi50cmltKCksXG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgZmlsZTogZmlsZS5wYXRoLFxuICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgIHN0YXJ0OiBvZmZzZXQsXG4gICAgICAgICAgZW5kOiBvZmZzZXQgKyBzZWxlY3Rpb24ubGVuZ3RoLFxuICAgICAgICAgIGxpbmU6IHBvc2l0aW9uLmxpbmVcbiAgICAgICAgfSxcbiAgICAgICAgaGVhZGluZzogdGhpcy5maW5kSGVhZGluZyhmaWxlQ29udGVudCwgb2Zmc2V0KSxcbiAgICAgICAgYW5jaG9yTGluazogYFtbJHtmaWxlLmJhc2VuYW1lfSNeJHt0aGlzLmdlbmVyYXRlQmxvY2tJZCgpfV1dYFxuICAgICAgfSxcbiAgICAgIGV4dHJhY3RSdWxlOiB7XG4gICAgICAgIHJ1bGVJZDogJ1FBLW1hbnVhbCcsXG4gICAgICAgIHJ1bGVOYW1lOiAnTWFudWFsIFFBIENhcmQnLFxuICAgICAgICBleHRyYWN0ZWRCeTogJ21hbnVhbCdcbiAgICAgIH0sXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgdGFnczogdGhpcy5leHRyYWN0VGFncyhmaWxlQ29udGVudCwgb2Zmc2V0KVxuICAgICAgfSxcbiAgICAgIGZsYXNoY2FyZElkczogW11cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NTIxQlx1NUVGQVx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1NTM2MVx1NzI0N1x1NTM1NVx1NTE0M1xuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVDbG96ZVVuaXQoXG4gICAgZmlsZTogVEZpbGUsXG4gICAgc2VsZWN0aW9uOiBzdHJpbmcsXG4gICAgb2Zmc2V0OiBudW1iZXIsXG4gICAgZmlsZUNvbnRlbnQ6IHN0cmluZ1xuICApOiBDb250ZW50VW5pdCB7XG4gICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLmNhbGN1bGF0ZVBvc2l0aW9uKGZpbGVDb250ZW50LCBvZmZzZXQpO1xuICAgIGNvbnN0IGZ1bGxTZW50ZW5jZSA9IHRoaXMuZXh0cmFjdEZ1bGxTZW50ZW5jZShmaWxlQ29udGVudCwgb2Zmc2V0LCBzZWxlY3Rpb24ubGVuZ3RoKTtcblxuICAgIHJldHVybiB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICB0eXBlOiAnY2xvemUnLFxuICAgICAgY29udGVudDogc2VsZWN0aW9uLnRyaW0oKSxcbiAgICAgIGZ1bGxDb250ZXh0OiBmdWxsU2VudGVuY2UsXG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgZmlsZTogZmlsZS5wYXRoLFxuICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgIHN0YXJ0OiBvZmZzZXQsXG4gICAgICAgICAgZW5kOiBvZmZzZXQgKyBzZWxlY3Rpb24ubGVuZ3RoLFxuICAgICAgICAgIGxpbmU6IHBvc2l0aW9uLmxpbmVcbiAgICAgICAgfSxcbiAgICAgICAgaGVhZGluZzogdGhpcy5maW5kSGVhZGluZyhmaWxlQ29udGVudCwgb2Zmc2V0KSxcbiAgICAgICAgYW5jaG9yTGluazogYFtbJHtmaWxlLmJhc2VuYW1lfSNeJHt0aGlzLmdlbmVyYXRlQmxvY2tJZCgpfV1dYFxuICAgICAgfSxcbiAgICAgIGV4dHJhY3RSdWxlOiB7XG4gICAgICAgIHJ1bGVJZDogJ2Nsb3plLW1hbnVhbCcsXG4gICAgICAgIHJ1bGVOYW1lOiAnTWFudWFsIENsb3plIENhcmQnLFxuICAgICAgICBleHRyYWN0ZWRCeTogJ21hbnVhbCdcbiAgICAgIH0sXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgdGFnczogdGhpcy5leHRyYWN0VGFncyhmaWxlQ29udGVudCwgb2Zmc2V0KVxuICAgICAgfSxcbiAgICAgIGZsYXNoY2FyZElkczogW11cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NEVDRVx1NTE0OVx1NjgwN1x1NEY0RFx1N0Y2RVx1OEJBMVx1N0I5N1x1NjU4N1x1NEVGNlx1NTA0Rlx1NzlGQlx1OTFDRlxuICAgKi9cbiAgcHJpdmF0ZSBnZXRPZmZzZXRGcm9tQ3Vyc29yKGNvbnRlbnQ6IHN0cmluZywgbGluZTogbnVtYmVyLCBjaDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgIGxldCBvZmZzZXQgPSAwO1xuICAgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZTsgaSsrKSB7XG4gICAgICBvZmZzZXQgKz0gbGluZXNbaV0ubGVuZ3RoICsgMTtcbiAgICB9XG4gICAgXG4gICAgb2Zmc2V0ICs9IGNoO1xuICAgIHJldHVybiBvZmZzZXQ7XG4gIH1cblxuICAvKipcbiAgICogXHU2MjZCXHU2M0NGXHU1MzU1XHU0RTJBXHU2NTg3XHU0RUY2XG4gICAqL1xuICBhc3luYyBzY2FuRmlsZShmaWxlOiBURmlsZSk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgY29uc3QgdW5pdHMgPSBhd2FpdCB0aGlzLmV4dHJhY3RDb250ZW50KGZpbGUsIGNvbnRlbnQpO1xuICAgICAgXG4gICAgICBpZiAodW5pdHMubGVuZ3RoID4gMCkge1xuICAgICAgICBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLnNhdmVDb250ZW50VW5pdHModW5pdHMpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcWFDb3VudCA9IHVuaXRzLmZpbHRlcih1ID0+IHUudHlwZSA9PT0gJ1FBJykubGVuZ3RoO1xuICAgICAgICBjb25zdCBjbG96ZUNvdW50ID0gdW5pdHMuZmlsdGVyKHUgPT4gdS50eXBlID09PSAnY2xvemUnKS5sZW5ndGg7XG4gICAgICAgIG5ldyBOb3RpY2UoYEV4dHJhY3RlZCAke3FhQ291bnR9IFFBIGNhcmRzIGFuZCAke2Nsb3plQ291bnR9IGNsb3plIGNhcmRzIGZyb20gJHtmaWxlLm5hbWV9YCk7XG4gICAgICAgIFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnJlZnJlc2hBbGxWaWV3cygpO1xuICAgICAgICB9LCAxMDApO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gdW5pdHMubGVuZ3RoO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbc2NhbkZpbGVdIFx1OTUxOVx1OEJFRjonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKGBFcnJvciBzY2FubmluZyBmaWxlOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBcdTUyMzdcdTY1QjBcdTYyNDBcdTY3MDlcdTc2RjhcdTUxNzNcdTg5QzZcdTU2RkVcbiAgICovXG4gIHByaXZhdGUgcmVmcmVzaEFsbFZpZXdzKCkge1xuICAgIHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKGxlYWYgPT4ge1xuICAgICAgY29uc3Qgdmlld1R5cGUgPSBsZWFmLnZpZXcuZ2V0Vmlld1R5cGUoKTtcbiAgICAgIGlmICh2aWV3VHlwZSA9PT0gJ2xlYXJuaW5nLXN5c3RlbS1zaWRlYmFyLW92ZXJ2aWV3JyB8fCBcbiAgICAgICAgICB2aWV3VHlwZSA9PT0gJ2xlYXJuaW5nLXN5c3RlbS1tYWluLW92ZXJ2aWV3Jykge1xuICAgICAgICAgICAgY29uc3QgdmlldyA9IGxlYWYudmlldyBhcyBTaWRlYmFyT3ZlcnZpZXdWaWV3O1xuICAgICAgICAgICAgaWYgKHZpZXcgJiYgdHlwZW9mIHZpZXcucmVmcmVzaCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICB2aWV3LnJlZnJlc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYyNkJcdTYzQ0ZcdTY1NzRcdTRFMkEgVmF1bHRcbiAgICovXG4gIGFzeW5jIHNjYW5WYXVsdCgpOiBQcm9taXNlPHsgc2Nhbm5lZDogbnVtYmVyOyBleHRyYWN0ZWQ6IG51bWJlciB9PiB7XG4gICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgbGV0IHNjYW5uZWQgPSAwO1xuICAgIGxldCBleHRyYWN0ZWQgPSAwO1xuXG4gICAgbmV3IE5vdGljZShgU2Nhbm5pbmcgJHtmaWxlcy5sZW5ndGh9IGZpbGVzLi4uYCk7XG5cbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgIGNvbnN0IGNvdW50ID0gYXdhaXQgdGhpcy5zY2FuRmlsZShmaWxlKTtcbiAgICAgIHNjYW5uZWQrKztcbiAgICAgIGV4dHJhY3RlZCArPSBjb3VudDtcbiAgICB9XG5cbiAgICBuZXcgTm90aWNlKGBTY2FuIGNvbXBsZXRlISBFeHRyYWN0ZWQgJHtleHRyYWN0ZWR9IGl0ZW1zIGZyb20gJHtzY2FubmVkfSBmaWxlcy5gKTtcblxuICAgIHJldHVybiB7IHNjYW5uZWQsIGV4dHJhY3RlZCB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1RDgzRFx1REQyNyBcdTRGRUVcdTY1Mzk6IFx1NTE0OFx1NEZERFx1NUI1OCB1bml0c1x1RkYwQ1x1NTE4RFx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1RkYwQ1x1NTQwQ1x1NjVGNlx1OEZDN1x1NkVFNFx1OTFDRFx1NTkwRFx1OTg3OVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBleHRyYWN0Q29udGVudChmaWxlOiBURmlsZSwgY29udGVudDogc3RyaW5nKTogUHJvbWlzZTxDb250ZW50VW5pdFtdPiB7XG4gICAgY29uc3QgdW5pdHM6IENvbnRlbnRVbml0W10gPSBbXTtcbiAgICBcbiAgICAvLyAxXHVGRTBGXHUyMEUzIFx1NTE0OFx1NjNEMFx1NTNENlx1NjI0MFx1NjcwOSB1bml0c1x1RkYwOFx1NEUwRFx1NTIxQlx1NUVGQVx1OTVFQVx1NTM2MVx1RkYwOVxuICAgIGNvbnN0IHFhVW5pdHMgPSB0aGlzLmV4dHJhY3RRQUNhcmRzKGZpbGUsIGNvbnRlbnQpO1xuICAgIGNvbnN0IGNsb3plVW5pdHMgPSB0aGlzLmV4dHJhY3RDbG96ZUNhcmRzKGZpbGUsIGNvbnRlbnQpO1xuICAgIFxuICAgIGNvbnN0IGFsbEV4dHJhY3RlZFVuaXRzID0gWy4uLnFhVW5pdHMsIC4uLmNsb3plVW5pdHNdO1xuICAgIFxuICAgIC8vIDJcdUZFMEZcdTIwRTMgXHVEODNDXHVERDk1IFx1OEZDN1x1NkVFNFx1OTFDRFx1NTkwRFx1NzY4NCB1bml0c1xuICAgIGNvbnN0IGV4aXN0aW5nVW5pdHMgPSBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLmdldEFsbENvbnRlbnRVbml0cygpO1xuICAgIGNvbnN0IG5ld1VuaXRzID0gYXdhaXQgdGhpcy5maWx0ZXJEdXBsaWNhdGVVbml0cyhhbGxFeHRyYWN0ZWRVbml0cywgZXhpc3RpbmdVbml0cyk7XG4gICAgXG4gICAgaWYgKG5ld1VuaXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZShgICR7ZmlsZS5uYW1lfTogXHU2Q0ExXHU2NzA5XHU2NUIwXHU1MTg1XHU1QkI5XHU5NzAwXHU4OTgxXHU2M0QwXHU1M0Q2YCk7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIFxuICAgIGlmIChuZXdVbml0cy5sZW5ndGggPCBhbGxFeHRyYWN0ZWRVbml0cy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHNraXBwZWQgPSBhbGxFeHRyYWN0ZWRVbml0cy5sZW5ndGggLSBuZXdVbml0cy5sZW5ndGg7XG4gICAgICBuZXcgTm90aWNlKGAgJHtmaWxlLm5hbWV9OiBcdThERjNcdThGQzcgJHtza2lwcGVkfSBcdTRFMkFcdTkxQ0RcdTU5MERcdTk4NzlgKTtcbiAgICB9XG4gICAgXG4gICAgdW5pdHMucHVzaCguLi5uZXdVbml0cyk7XG4gICAgXG4gICAgLy8gM1x1RkUwRlx1MjBFMyBcdTUxNDhcdTRGRERcdTVCNThcdTYyNDBcdTY3MDlcdTY1QjAgdW5pdHMgXHU1MjMwIERhdGFNYW5hZ2VyXG4gICAgaWYgKHVuaXRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGF3YWl0IHRoaXMuZGF0YU1hbmFnZXIuc2F2ZUNvbnRlbnRVbml0cyh1bml0cyk7XG4gICAgfVxuICAgIFxuICAgIC8vIDRcdUZFMEZcdTIwRTMgXHU1MThEXHU0RTNBXHU2QkNGXHU0RTJBIHVuaXQgXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXG4gICAgZm9yIChjb25zdCB1bml0IG9mIHVuaXRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjYXJkVHlwZSA9IHVuaXQudHlwZSA9PT0gJ1FBJyA/ICdxYScgOiAnY2xvemUnO1xuICAgICAgICBjb25zdCBmbGFzaGNhcmQgPSBhd2FpdCB0aGlzLmZsYXNoY2FyZE1hbmFnZXIuY3JlYXRlRmxhc2hjYXJkRnJvbVVuaXQodW5pdCwge1xuICAgICAgICAgIGNhcmRUeXBlOiBjYXJkVHlwZVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tleHRyYWN0Q29udGVudF0gXHU1MjFCXHU1RUZBXHU5NUVBXHU1MzYxXHU1OTMxXHU4RDI1OicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHVuaXRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1RDgzQ1x1REQ5NSBcdThGQzdcdTZFRTRcdTkxQ0RcdTU5MERcdTc2ODQgdW5pdHNcbiAgICogXHU2ODM5XHU2MzZFXHU2NTg3XHU0RUY2XHU4REVGXHU1Rjg0XHUzMDAxXHU0RjREXHU3RjZFXHU1NDhDXHU1MTg1XHU1QkI5XHU1MjI0XHU2NUFEXHU2NjJGXHU1NDI2XHU5MUNEXHU1OTBEXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGZpbHRlckR1cGxpY2F0ZVVuaXRzKFxuICAgIG5ld1VuaXRzOiBDb250ZW50VW5pdFtdLCBcbiAgICBleGlzdGluZ1VuaXRzOiBDb250ZW50VW5pdFtdXG4gICk6IFByb21pc2U8Q29udGVudFVuaXRbXT4ge1xuICAgIGNvbnN0IGZpbHRlcmVkOiBDb250ZW50VW5pdFtdID0gW107XG4gICAgXG4gICAgZm9yIChjb25zdCBuZXdVbml0IG9mIG5ld1VuaXRzKSB7XG4gICAgICBjb25zdCBpc0R1cGxpY2F0ZSA9IGV4aXN0aW5nVW5pdHMuc29tZShleGlzdGluZyA9PiB7XG4gICAgICAgIC8vIFx1NjVCOVx1NUYwRjE6IFx1NzZGOFx1NTQwQ1x1NjU4N1x1NEVGNiArIFx1NzZGOFx1NTQwQ1x1NEY0RFx1N0Y2RSArIFx1NzZGOFx1NTQwQ1x1N0M3Qlx1NTc4QlxuICAgICAgICBjb25zdCBzYW1lTG9jYXRpb24gPSBcbiAgICAgICAgICBleGlzdGluZy5zb3VyY2UuZmlsZSA9PT0gbmV3VW5pdC5zb3VyY2UuZmlsZSAmJlxuICAgICAgICAgIGV4aXN0aW5nLnNvdXJjZS5wb3NpdGlvbi5zdGFydCA9PT0gbmV3VW5pdC5zb3VyY2UucG9zaXRpb24uc3RhcnQgJiZcbiAgICAgICAgICBleGlzdGluZy5zb3VyY2UucG9zaXRpb24uZW5kID09PSBuZXdVbml0LnNvdXJjZS5wb3NpdGlvbi5lbmQgJiZcbiAgICAgICAgICBleGlzdGluZy50eXBlID09PSBuZXdVbml0LnR5cGU7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTY1QjlcdTVGMEYyOiBcdTc2RjhcdTU0MENcdTY1ODdcdTRFRjYgKyBcdTc2RjhcdTU0MENcdTUxODVcdTVCQjkgKyBcdTc2RjhcdTU0MENcdTdDN0JcdTU3OEJcdUZGMDhcdTk2MzJcdTZCNjJcdTRGNERcdTdGNkVcdTUwNEZcdTc5RkJcdUZGMDlcbiAgICAgICAgY29uc3Qgc2FtZUNvbnRlbnQgPSBcbiAgICAgICAgICBleGlzdGluZy5zb3VyY2UuZmlsZSA9PT0gbmV3VW5pdC5zb3VyY2UuZmlsZSAmJlxuICAgICAgICAgIGV4aXN0aW5nLnR5cGUgPT09IG5ld1VuaXQudHlwZSAmJlxuICAgICAgICAgIHRoaXMuaXNDb250ZW50RHVwbGljYXRlKGV4aXN0aW5nLmNvbnRlbnQsIG5ld1VuaXQuY29udGVudCkgJiZcbiAgICAgICAgICB0aGlzLmlzQ29udGVudER1cGxpY2F0ZShleGlzdGluZy5mdWxsQ29udGV4dCB8fCAnJywgbmV3VW5pdC5mdWxsQ29udGV4dCB8fCAnJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTY1QjlcdTVGMEYzOiBcdTVCRjlcdTRFOEUgUUEgXHU3QzdCXHU1NzhCXHVGRjBDXHU5ODlEXHU1OTE2XHU2OEMwXHU2N0U1XHU3QjU0XHU2ODQ4XHU2NjJGXHU1NDI2XHU3NkY4XHU1NDBDXG4gICAgICAgIGNvbnN0IHNhbWVRQSA9IGV4aXN0aW5nLnR5cGUgPT09ICdRQScgJiYgbmV3VW5pdC50eXBlID09PSAnUUEnICYmXG4gICAgICAgICAgZXhpc3Rpbmcuc291cmNlLmZpbGUgPT09IG5ld1VuaXQuc291cmNlLmZpbGUgJiZcbiAgICAgICAgICB0aGlzLmlzQ29udGVudER1cGxpY2F0ZShleGlzdGluZy5jb250ZW50LCBuZXdVbml0LmNvbnRlbnQpICYmXG4gICAgICAgICAgdGhpcy5pc0NvbnRlbnREdXBsaWNhdGUoZXhpc3RpbmcuYW5zd2VyIHx8ICcnLCBuZXdVbml0LmFuc3dlciB8fCAnJyk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gc2FtZUxvY2F0aW9uIHx8IHNhbWVDb250ZW50IHx8IHNhbWVRQTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpZiAoIWlzRHVwbGljYXRlKSB7XG4gICAgICAgIGZpbHRlcmVkLnB1c2gobmV3VW5pdCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmaWx0ZXJlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTI3MDUgXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU0RTNBXHU0RUZCXHU1MkExXHU1QjhDXHU2MjEwXHU2ODA3XHU4QkIwXG4gICAqIFx1NjM5Mlx1OTY2NDogW2NvbXBsZXRpb246OiBkYXRlXSwgW2R1ZTo6IGRhdGVdIFx1N0I0OVx1NEVGQlx1NTJBMVx1NzZGOFx1NTE3M1x1NzY4NCA6OiBcdTY4M0NcdTVGMEZcbiAgICovXG4gIHByaXZhdGUgaXNUYXNrQ29tcGxldGlvbihsaW5lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAvLyBcdTUzMzlcdTkxNERcdTRFRkJcdTUyQTFcdTY4MDdcdThCQjA6IC0gWyBdIFx1NjIxNiAtIFt4XSBcdTVGMDBcdTU5MzRcdTc2ODRcdTg4NEMsXHU0RTE0XHU1MzA1XHU1NDJCIDo6IFxuICAgIGNvbnN0IHRhc2tQYXR0ZXJuID0gL15bXFxzXSotXFxzKlxcW1t4XFxzXVxcXS4qOjovaTtcbiAgICByZXR1cm4gdGFza1BhdHRlcm4udGVzdChsaW5lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTI3MDUgXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU0RTNBXHU2NUU1XHU2NzFGL1x1NjVGNlx1OTVGNFx1NUI1N1x1NkJCNVxuICAgKiBcdTYzOTJcdTk2NjQ6IGRhdGUxOjogMjAyMS0wMi0yNlQxNToxNSwgZGF0ZTI6OiAyMDIxLTA0LTE3IDE4OjAwIFx1N0I0OVx1NjgzQ1x1NUYwRlxuICAgKi9cbiAgcHJpdmF0ZSBpc0RhdGVUaW1lRmllbGQocXVlc3Rpb246IHN0cmluZywgYW5zd2VyOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAvLyBcdTY4QzBcdTY3RTVcdTk1RUVcdTk4OThcdTkwRThcdTUyMDZcdTY2MkZcdTU0MjZcdTUzMDVcdTU0MkJcdTVFMzhcdTg5QzFcdTc2ODRcdTY1RTVcdTY3MUYvXHU2NUY2XHU5NUY0XHU1QjU3XHU2QkI1XHU1NDBEXG4gICAgY29uc3QgZGF0ZUZpZWxkUGF0dGVybiA9IC9cXGIoZGF0ZVxcZCp8dGltZVxcZCp8Y3JlYXRlZHx1cGRhdGVkfG1vZGlmaWVkfHNjaGVkdWxlZHxkdWV8Y29tcGxldGlvbilcXGIvaTtcbiAgICBcbiAgICAvLyBcdTY4QzBcdTY3RTVcdTdCNTRcdTY4NDhcdTkwRThcdTUyMDZcdTY2MkZcdTU0MjZcdTRFM0FcdTY1RTVcdTY3MUYvXHU2NUY2XHU5NUY0XHU2ODNDXHU1RjBGXG4gICAgY29uc3QgZGF0ZVRpbWVQYXR0ZXJuID0gL15cXHMqXFxkezR9LVxcZHsyfS1cXGR7Mn0oVHxcXHMpXFxkezJ9OlxcZHsyfXxcXGR7NH0tXFxkezJ9LVxcZHsyfVxccytcXGR7Mn06XFxkezJ9LztcbiAgICBjb25zdCBkYXRlT25seVBhdHRlcm4gPSAvXlxccypcXGR7NH0tXFxkezJ9LVxcZHsyfVxccyokLztcbiAgICBcbiAgICByZXR1cm4gZGF0ZUZpZWxkUGF0dGVybi50ZXN0KHF1ZXN0aW9uKSAmJiBcbiAgICAgICAgICAgKGRhdGVUaW1lUGF0dGVybi50ZXN0KGFuc3dlcikgfHwgZGF0ZU9ubHlQYXR0ZXJuLnRlc3QoYW5zd2VyKSk7XG4gIH1cblxuICAvKipcbiAgICogXHUyNzA1IFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NEUzQSBFeGNhbGlkcmF3IFx1OUFEOFx1NEVBRVxuICAgKiBcdTYzOTJcdTk2NjQ6ID09c3dpdGNoIHRvIGV4Y2FsaWRyYXcgdmlldy4uLj09IFx1OEZEOVx1N0M3Qlx1NzI3OVx1NUI5QVx1OUFEOFx1NEVBRVxuICAgKi9cbiAgcHJpdmF0ZSBpc0V4Y2FsaWRyYXdIaWdobGlnaHQobWF0Y2hUZXh0OiBzdHJpbmcsIGxpbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1OUFEOFx1NEVBRVx1NTE4NVx1NUJCOVx1NTMwNVx1NTQyQiBleGNhbGlkcmF3IFx1NzZGOFx1NTE3M1x1NTE3M1x1OTUyRVx1OEJDRFxuICAgIGNvbnN0IGV4Y2FsaWRyYXdLZXl3b3JkcyA9IC9leGNhbGlkcmF3fGRyYXdpbmd8c2tldGNoL2k7XG4gICAgcmV0dXJuIGV4Y2FsaWRyYXdLZXl3b3Jkcy50ZXN0KG1hdGNoVGV4dCkgfHwgZXhjYWxpZHJhd0tleXdvcmRzLnRlc3QobGluZSk7XG4gIH1cblxuICAvKipcbiAgICogXHUyNzA1IFx1NjNEMFx1NTNENiBRQSBcdTUzNjFcdTcyNDcgKFx1NjgzQ1x1NUYwRjogUXVlc3Rpb24gOjogQW5zd2VyKVxuICAgKiBcdTY1QjBcdTU4OUU6IFx1OEZDN1x1NkVFNFx1NEVGQlx1NTJBMVx1NUI4Q1x1NjIxMFx1NjgwN1x1OEJCMFx1NTQ4Q1x1NjVFNVx1NjcxRlx1NjVGNlx1OTVGNFx1NUI1N1x1NkJCNVxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0UUFDYXJkcyhmaWxlOiBURmlsZSwgY29udGVudDogc3RyaW5nKTogQ29udGVudFVuaXRbXSB7XG4gICAgY29uc3QgdW5pdHM6IENvbnRlbnRVbml0W10gPSBbXTtcbiAgICBjb25zdCBxYVJlZ2V4ID0gL14oLis/KVxccyo6OlxccyooLis/KSQvZ207XG4gICAgbGV0IG1hdGNoO1xuXG4gICAgd2hpbGUgKChtYXRjaCA9IHFhUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IGZ1bGxNYXRjaCA9IG1hdGNoWzBdO1xuICAgICAgY29uc3QgcXVlc3Rpb24gPSBtYXRjaFsxXS50cmltKCk7XG4gICAgICBjb25zdCBhbnN3ZXIgPSBtYXRjaFsyXS50cmltKCk7XG4gICAgICBcbiAgICAgIC8vIFx1MjcwNSBcdThERjNcdThGQzdcdTRFRkJcdTUyQTFcdTVCOENcdTYyMTBcdTY4MDdcdThCQjBcbiAgICAgIGlmICh0aGlzLmlzVGFza0NvbXBsZXRpb24oZnVsbE1hdGNoKSkge1xuICAgICAgICBjb25zb2xlLmxvZygnW2V4dHJhY3RRQUNhcmRzXSBcdThERjNcdThGQzdcdTRFRkJcdTUyQTFcdTY4MDdcdThCQjA6JywgZnVsbE1hdGNoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFx1MjcwNSBcdThERjNcdThGQzdcdTY1RTVcdTY3MUZcdTY1RjZcdTk1RjRcdTVCNTdcdTZCQjVcbiAgICAgIGlmICh0aGlzLmlzRGF0ZVRpbWVGaWVsZChxdWVzdGlvbiwgYW5zd2VyKSkge1xuICAgICAgICBjb25zb2xlLmxvZygnW2V4dHJhY3RRQUNhcmRzXSBcdThERjNcdThGQzdcdTY1RTVcdTY3MUZcdTY1RjZcdTk1RjRcdTVCNTdcdTZCQjU6JywgZnVsbE1hdGNoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5jYWxjdWxhdGVQb3NpdGlvbihjb250ZW50LCBtYXRjaC5pbmRleCk7XG5cbiAgICAgIGNvbnN0IHVuaXQ6IENvbnRlbnRVbml0ID0ge1xuICAgICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICAgIHR5cGU6ICdRQScsXG4gICAgICAgIGNvbnRlbnQ6IHF1ZXN0aW9uLFxuICAgICAgICBhbnN3ZXI6IGFuc3dlcixcbiAgICAgICAgZnVsbENvbnRleHQ6IGZ1bGxNYXRjaCxcbiAgICAgICAgc291cmNlOiB7XG4gICAgICAgICAgZmlsZTogZmlsZS5wYXRoLFxuICAgICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgICBzdGFydDogbWF0Y2guaW5kZXgsXG4gICAgICAgICAgICBlbmQ6IG1hdGNoLmluZGV4ICsgZnVsbE1hdGNoLmxlbmd0aCxcbiAgICAgICAgICAgIGxpbmU6IHBvc2l0aW9uLmxpbmVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGhlYWRpbmc6IHRoaXMuZmluZEhlYWRpbmcoY29udGVudCwgbWF0Y2guaW5kZXgpLFxuICAgICAgICAgIGFuY2hvckxpbms6IGBbWyR7ZmlsZS5iYXNlbmFtZX0jXiR7dGhpcy5nZW5lcmF0ZUJsb2NrSWQoKX1dXWBcbiAgICAgICAgfSxcbiAgICAgICAgZXh0cmFjdFJ1bGU6IHtcbiAgICAgICAgICBydWxlSWQ6ICdRQScsXG4gICAgICAgICAgcnVsZU5hbWU6ICdRQSBDYXJkJyxcbiAgICAgICAgICBleHRyYWN0ZWRCeTogJ2F1dG8nXG4gICAgICAgIH0sXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgICB0YWdzOiB0aGlzLmV4dHJhY3RUYWdzKGNvbnRlbnQsIG1hdGNoLmluZGV4KVxuICAgICAgICB9LFxuICAgICAgICBmbGFzaGNhcmRJZHM6IFtdXG4gICAgICB9O1xuXG4gICAgICB1bml0cy5wdXNoKHVuaXQpO1xuICAgIH1cblxuICAgIHJldHVybiB1bml0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTI3MDUgXHU2M0QwXHU1M0Q2XHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU1MzYxIChcdTY4M0NcdTVGMEY6ID09aGlnaGxpZ2h0PT0pXG4gICAqIFx1NjVCMFx1NTg5RTogXHU4RkM3XHU2RUU0IEV4Y2FsaWRyYXcgXHU5QUQ4XHU0RUFFXG4gICAqL1xuICAvLyBwcml2YXRlIGV4dHJhY3RDbG96ZUNhcmRzKGZpbGU6IFRGaWxlLCBjb250ZW50OiBzdHJpbmcpOiBDb250ZW50VW5pdFtdIHtcbiAgLy8gICBjb25zdCB1bml0czogQ29udGVudFVuaXRbXSA9IFtdO1xuICAvLyAgIGNvbnN0IGhpZ2hsaWdodFJlZ2V4ID0gLz09KC4rPyk9PS9nO1xuICAvLyAgIGxldCBtYXRjaDtcblxuICAvLyAgIHdoaWxlICgobWF0Y2ggPSBoaWdobGlnaHRSZWdleC5leGVjKGNvbnRlbnQpKSAhPT0gbnVsbCkge1xuICAvLyAgICAgY29uc3QgZXh0cmFjdGVkVGV4dCA9IG1hdGNoWzFdO1xuICAvLyAgICAgY29uc3QgZnVsbE1hdGNoID0gbWF0Y2hbMF07XG4gIC8vICAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuY2FsY3VsYXRlUG9zaXRpb24oY29udGVudCwgbWF0Y2guaW5kZXgpO1xuICAgICAgXG4gIC8vICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTg4NENcdTUxODVcdTVCQjlcbiAgLy8gICAgIGNvbnN0IGxpbmVTdGFydCA9IGNvbnRlbnQubGFzdEluZGV4T2YoJ1xcbicsIG1hdGNoLmluZGV4KSArIDE7XG4gIC8vICAgICBjb25zdCBsaW5lRW5kID0gY29udGVudC5pbmRleE9mKCdcXG4nLCBtYXRjaC5pbmRleCk7XG4gIC8vICAgICBjb25zdCBjdXJyZW50TGluZSA9IGNvbnRlbnQuc3Vic3RyaW5nKGxpbmVTdGFydCwgbGluZUVuZCA9PT0gLTEgPyBjb250ZW50Lmxlbmd0aCA6IGxpbmVFbmQpO1xuICAgICAgXG4gIC8vICAgICAvLyBcdTI3MDUgXHU4REYzXHU4RkM3IEV4Y2FsaWRyYXcgXHU5QUQ4XHU0RUFFXG4gIC8vICAgICBpZiAodGhpcy5pc0V4Y2FsaWRyYXdIaWdobGlnaHQoZXh0cmFjdGVkVGV4dCwgY3VycmVudExpbmUpKSB7XG4gIC8vICAgICAgIGNvbnNvbGUubG9nKCdbZXh0cmFjdENsb3plQ2FyZHNdIFx1OERGM1x1OEZDNyBFeGNhbGlkcmF3IFx1OUFEOFx1NEVBRTonLCBleHRyYWN0ZWRUZXh0KTtcbiAgLy8gICAgICAgY29udGludWU7XG4gIC8vICAgICB9XG4gICAgICBcbiAgLy8gICAgIGNvbnN0IGZ1bGxTZW50ZW5jZSA9IHRoaXMuZXh0cmFjdEZ1bGxTZW50ZW5jZShjb250ZW50LCBtYXRjaC5pbmRleCwgZnVsbE1hdGNoLmxlbmd0aCk7XG5cbiAgLy8gICAgIGNvbnN0IHVuaXQ6IENvbnRlbnRVbml0ID0ge1xuICAvLyAgICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gIC8vICAgICAgIHR5cGU6ICdjbG96ZScsXG4gIC8vICAgICAgIGNvbnRlbnQ6IGV4dHJhY3RlZFRleHQudHJpbSgpLFxuICAvLyAgICAgICBmdWxsQ29udGV4dDogZnVsbFNlbnRlbmNlLFxuICAvLyAgICAgICBzb3VyY2U6IHtcbiAgLy8gICAgICAgICBmaWxlOiBmaWxlLnBhdGgsXG4gIC8vICAgICAgICAgcG9zaXRpb246IHtcbiAgLy8gICAgICAgICAgIHN0YXJ0OiBtYXRjaC5pbmRleCxcbiAgLy8gICAgICAgICAgIGVuZDogbWF0Y2guaW5kZXggKyBmdWxsTWF0Y2gubGVuZ3RoLFxuICAvLyAgICAgICAgICAgbGluZTogcG9zaXRpb24ubGluZVxuICAvLyAgICAgICAgIH0sXG4gIC8vICAgICAgICAgaGVhZGluZzogdGhpcy5maW5kSGVhZGluZyhjb250ZW50LCBtYXRjaC5pbmRleCksXG4gIC8vICAgICAgICAgYW5jaG9yTGluazogYFtbJHtmaWxlLmJhc2VuYW1lfSNeJHt0aGlzLmdlbmVyYXRlQmxvY2tJZCgpfV1dYFxuICAvLyAgICAgICB9LFxuICAvLyAgICAgICBleHRyYWN0UnVsZToge1xuICAvLyAgICAgICAgIHJ1bGVJZDogJ2Nsb3plJyxcbiAgLy8gICAgICAgICBydWxlTmFtZTogJ0Nsb3plIERlbGV0aW9uJyxcbiAgLy8gICAgICAgICBleHRyYWN0ZWRCeTogJ2F1dG8nXG4gIC8vICAgICAgIH0sXG4gIC8vICAgICAgIG1ldGFkYXRhOiB7XG4gIC8vICAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAvLyAgICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgLy8gICAgICAgICB0YWdzOiB0aGlzLmV4dHJhY3RUYWdzKGNvbnRlbnQsIG1hdGNoLmluZGV4KVxuICAvLyAgICAgICB9LFxuICAvLyAgICAgICBmbGFzaGNhcmRJZHM6IFtdXG4gIC8vICAgICB9O1xuXG4gIC8vICAgICB1bml0cy5wdXNoKHVuaXQpO1xuICAvLyAgIH1cblxuICAvLyAgIHJldHVybiB1bml0cztcbiAgLy8gfVxuXG4gIC8qKlxuICAgKiBcdTYzRDBcdTUzRDZcdTUzMDVcdTU0MkJcdTlBRDhcdTRFQUVcdTc2ODRcdTVCOENcdTY1NzRcdTUzRTVcdTVCNTBcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdEZ1bGxTZW50ZW5jZShjb250ZW50OiBzdHJpbmcsIGhpZ2hsaWdodFN0YXJ0OiBudW1iZXIsIGhpZ2hsaWdodExlbmd0aDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCBzZW50ZW5jZUVuZHMgPSAvWy4hP1x1MzAwMlx1RkYwMT9cXG5dLztcbiAgICBcbiAgICBsZXQgc3RhcnQgPSBoaWdobGlnaHRTdGFydDtcbiAgICB3aGlsZSAoc3RhcnQgPiAwKSB7XG4gICAgICBjb25zdCBjaGFyID0gY29udGVudFtzdGFydCAtIDFdO1xuICAgICAgaWYgKHNlbnRlbmNlRW5kcy50ZXN0KGNoYXIpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhcnQtLTtcbiAgICB9XG4gICAgXG4gICAgbGV0IGVuZCA9IGhpZ2hsaWdodFN0YXJ0ICsgaGlnaGxpZ2h0TGVuZ3RoO1xuICAgIHdoaWxlIChlbmQgPCBjb250ZW50Lmxlbmd0aCkge1xuICAgICAgY29uc3QgY2hhciA9IGNvbnRlbnRbZW5kXTtcbiAgICAgIGlmIChzZW50ZW5jZUVuZHMudGVzdChjaGFyKSkge1xuICAgICAgICBlbmQrKztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBlbmQrKztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGNvbnRlbnQuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpLnRyaW0oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdThCQTFcdTdCOTdcdTY1ODdcdTY3MkNcdTRGNERcdTdGNkVcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlUG9zaXRpb24oY29udGVudDogc3RyaW5nLCBvZmZzZXQ6IG51bWJlcik6IHsgbGluZTogbnVtYmVyOyBjb2x1bW46IG51bWJlciB9IHtcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3Vic3RyaW5nKDAsIG9mZnNldCkuc3BsaXQoJ1xcbicpO1xuICAgIHJldHVybiB7XG4gICAgICBsaW5lOiBsaW5lcy5sZW5ndGggLSAxLFxuICAgICAgY29sdW1uOiBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXS5sZW5ndGhcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjdFNVx1NjI3RVx1NjI0MFx1NTcyOFx1NjgwN1x1OTg5OFxuICAgKi9cbiAgcHJpdmF0ZSBmaW5kSGVhZGluZyhjb250ZW50OiBzdHJpbmcsIHBvc2l0aW9uOiBudW1iZXIpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGJlZm9yZUNvbnRlbnQgPSBjb250ZW50LnN1YnN0cmluZygwLCBwb3NpdGlvbik7XG4gICAgY29uc3QgaGVhZGluZ3MgPSBiZWZvcmVDb250ZW50Lm1hdGNoKC9eI3sxLDZ9IC4rJC9nbSk7XG4gICAgcmV0dXJuIGhlYWRpbmdzID8gaGVhZGluZ3NbaGVhZGluZ3MubGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogXHU2M0QwXHU1M0Q2XHU5NjQ0XHU4RkQxXHU3Njg0XHU2ODA3XHU3QjdFXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RUYWdzKGNvbnRlbnQ6IHN0cmluZywgcG9zaXRpb246IG51bWJlcik6IHN0cmluZ1tdIHtcbiAgICBjb25zdCB0YWdzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgXG4gICAgLy8gMS4gXHU2M0QwXHU1M0Q2IFlBTUwgZnJvbnRtYXR0ZXIgXHU0RTJEXHU3Njg0IHRhZ3NcbiAgICBjb25zdCB5YW1sTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XG4gICAgaWYgKHlhbWxNYXRjaCkge1xuICAgICAgY29uc3QgeWFtbENvbnRlbnQgPSB5YW1sTWF0Y2hbMV07XG4gICAgICBjb25zdCB0YWdzTWF0Y2ggPSB5YW1sQ29udGVudC5tYXRjaCgvXnRhZ3M6XFxzKiguKykkL20pO1xuICAgICAgaWYgKHRhZ3NNYXRjaCkge1xuICAgICAgICBjb25zdCB0YWdDb250ZW50ID0gdGFnc01hdGNoWzFdLnRyaW0oKTtcbiAgICAgICAgaWYgKHRhZ0NvbnRlbnQuc3RhcnRzV2l0aCgnWycpKSB7XG4gICAgICAgICAgY29uc3QgYXJyYXlUYWdzID0gdGFnQ29udGVudC5tYXRjaCgvW1xcdy8tXSsvZyk7XG4gICAgICAgICAgYXJyYXlUYWdzPy5mb3JFYWNoKHRhZyA9PiB0YWdzLmFkZChgIyR7dGFnfWApKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0YWdDb250ZW50LnNwbGl0KCcsJykuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2xlYW5lZCA9IHRhZy50cmltKCk7XG4gICAgICAgICAgICBpZiAoY2xlYW5lZCkgdGFncy5hZGQoYCMke2NsZWFuZWR9YCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gMi4gXHU2M0QwXHU1M0Q2XHU1M0U1XHU1QjUwXHU2NzJCXHU1QzNFXHU3Njg0IGlubGluZSB0YWdzXG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnN1YnN0cmluZygwLCBwb3NpdGlvbikuc3BsaXQoJ1xcbicpO1xuICAgIGNvbnN0IGN1cnJlbnRMaW5lID0gbGluZXMubGVuZ3RoIC0gMTtcbiAgICBjb25zdCBsaW5lQ29udGVudCA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpW2N1cnJlbnRMaW5lXSB8fCAnJztcbiAgICBcbiAgICBjb25zdCBpbmxpbmVUYWdSZWdleCA9IC8jW1xcdy8tXSsvZztcbiAgICBjb25zdCBpbmxpbmVUYWdzID0gbGluZUNvbnRlbnQubWF0Y2goaW5saW5lVGFnUmVnZXgpO1xuICAgIGlubGluZVRhZ3M/LmZvckVhY2godGFnID0+IHRhZ3MuYWRkKHRhZykpO1xuICAgIFxuICAgIHJldHVybiBBcnJheS5mcm9tKHRhZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NzUxRlx1NjIxMFx1NTUyRlx1NEUwMCBJRFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gIH1cblxuICAvKipcbiAgICogXHU3NTFGXHU2MjEwIEJsb2NrIElEXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlQmxvY2tJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgZXh0cmFjdC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDYpfWA7XG4gIH1cblxuXG4vLyBcdTg4NjhcdTY4M0NcdTYzRDBcdTUzRDZcdTY1QjlcdTZDRDVcbi8qKlxuICogXHVEODNDXHVERDk1IFx1NjhDMFx1NkQ0Qlx1OUFEOFx1NEVBRVx1NjYyRlx1NTQyNlx1NTcyOFx1ODg2OFx1NjgzQ1x1NEUyRFxuICovXG5wcml2YXRlIGlzSW5UYWJsZShjb250ZW50OiBzdHJpbmcsIHBvc2l0aW9uOiBudW1iZXIpOiBib29sZWFuIHtcbiAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgY29uc3QgeyBsaW5lIH0gPSB0aGlzLmNhbGN1bGF0ZVBvc2l0aW9uKGNvbnRlbnQsIHBvc2l0aW9uKTtcbiAgXG4gIC8vIFx1NjhDMFx1NjdFNVx1NUY1M1x1NTI0RFx1ODg0Q1x1NjYyRlx1NTQyNlx1NEUzQVx1ODg2OFx1NjgzQ1x1ODg0Q1x1RkYwOFx1NTMwNVx1NTQyQiB8IFx1NTIwNlx1OTY5NFx1N0IyNlx1RkYwOVxuICBpZiAoIWxpbmVzW2xpbmVdPy5pbmNsdWRlcygnfCcpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxuICAvLyBcdTY4QzBcdTY3RTVcdTUyNERcdTU0MEVcdTg4NENcdTY2MkZcdTU0MjZcdTRFNUZcdTY2MkZcdTg4NjhcdTY4M0NcbiAgY29uc3QgaGFzUHJldlRhYmxlTGluZSA9IGxpbmUgPiAwICYmIGxpbmVzW2xpbmUgLSAxXT8uaW5jbHVkZXMoJ3wnKTtcbiAgY29uc3QgaGFzTmV4dFRhYmxlTGluZSA9IGxpbmUgPCBsaW5lcy5sZW5ndGggLSAxICYmIGxpbmVzW2xpbmUgKyAxXT8uaW5jbHVkZXMoJ3wnKTtcbiAgXG4gIHJldHVybiBoYXNQcmV2VGFibGVMaW5lIHx8IGhhc05leHRUYWJsZUxpbmU7XG59XG5cbi8qKlxuICogXHVEODNDXHVERDk1IFx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1NTNDQVx1NTE3Nlx1OUFEOFx1NEVBRVx1NEZFMVx1NjA2RlxuICovXG5wcml2YXRlIGV4dHJhY3RUYWJsZVdpdGhIaWdobGlnaHRzKFxuICBjb250ZW50OiBzdHJpbmcsIFxuICBoaWdobGlnaHRQb3NpdGlvbjogbnVtYmVyXG4pOiB7IHRhYmxlQ29udGVudDogc3RyaW5nOyBoaWdobGlnaHRDb3VudDogbnVtYmVyOyBoaWdobGlnaHRSb3dzOiBTZXQ8bnVtYmVyPjsgaGlnaGxpZ2h0Q29sdW1uczogU2V0PG51bWJlcj4gfSB8IG51bGwge1xuICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICBjb25zdCB7IGxpbmU6IGN1cnJlbnRMaW5lIH0gPSB0aGlzLmNhbGN1bGF0ZVBvc2l0aW9uKGNvbnRlbnQsIGhpZ2hsaWdodFBvc2l0aW9uKTtcbiAgXG4gIC8vIFx1NjI3RVx1NTIzMFx1ODg2OFx1NjgzQ1x1NzY4NFx1OEQ3N1x1NTlDQlx1NTQ4Q1x1N0VEM1x1Njc1Rlx1NEY0RFx1N0Y2RVxuICBsZXQgdGFibGVTdGFydCA9IGN1cnJlbnRMaW5lO1xuICBsZXQgdGFibGVFbmQgPSBjdXJyZW50TGluZTtcbiAgXG4gIC8vIFx1NTQxMVx1NEUwQVx1NjdFNVx1NjI3RVx1ODg2OFx1NjgzQ1x1NUYwMFx1NTlDQlxuICB3aGlsZSAodGFibGVTdGFydCA+IDAgJiYgbGluZXNbdGFibGVTdGFydCAtIDFdPy5pbmNsdWRlcygnfCcpKSB7XG4gICAgdGFibGVTdGFydC0tO1xuICB9XG4gIFxuICAvLyBcdTU0MTFcdTRFMEJcdTY3RTVcdTYyN0VcdTg4NjhcdTY4M0NcdTdFRDNcdTY3NUZcbiAgd2hpbGUgKHRhYmxlRW5kIDwgbGluZXMubGVuZ3RoIC0gMSAmJiBsaW5lc1t0YWJsZUVuZCArIDFdPy5pbmNsdWRlcygnfCcpKSB7XG4gICAgdGFibGVFbmQrKztcbiAgfVxuICBcbiAgLy8gXHU2M0QwXHU1M0Q2XHU4ODY4XHU2ODNDXHU1MTg1XHU1QkI5XG4gIGNvbnN0IHRhYmxlTGluZXMgPSBsaW5lcy5zbGljZSh0YWJsZVN0YXJ0LCB0YWJsZUVuZCArIDEpO1xuICBjb25zdCB0YWJsZUNvbnRlbnQgPSB0YWJsZUxpbmVzLmpvaW4oJ1xcbicpO1xuICBcbiAgLy8gXHU3RURGXHU4QkExXHU4ODY4XHU2ODNDXHU0RTJEXHU2MjQwXHU2NzA5XHU5QUQ4XHU0RUFFXG4gIGNvbnN0IGhpZ2hsaWdodFJlZ2V4ID0gLz09KC4rPyk9PS9nO1xuICBjb25zdCBoaWdobGlnaHRSb3dzID0gbmV3IFNldDxudW1iZXI+KCk7XG4gIGNvbnN0IGhpZ2hsaWdodENvbHVtbnMgPSBuZXcgU2V0PG51bWJlcj4oKTtcbiAgbGV0IGhpZ2hsaWdodENvdW50ID0gMDtcbiAgXG4gIHRhYmxlTGluZXMuZm9yRWFjaCgobGluZSwgcm93SW5kZXgpID0+IHtcbiAgICBjb25zdCBjZWxscyA9IGxpbmUuc3BsaXQoJ3wnKS5tYXAoYyA9PiBjLnRyaW0oKSkuZmlsdGVyKGMgPT4gYyk7XG4gICAgXG4gICAgLy8gXHVEODNEXHVERDI3IFx1NjUzOVx1OEZEQlx1NTIwNlx1OTY5NFx1N0IyNlx1ODg0Q1x1NjhDMFx1NkQ0QlxuICAgIGlmIChjZWxscy5sZW5ndGggPiAwICYmIGNlbGxzLmV2ZXJ5KGNlbGwgPT4gL15bLTpcXHNdKyQvLnRlc3QoY2VsbCkpKSB7XG4gICAgICByZXR1cm47IC8vIFx1OERGM1x1OEZDN1x1NTIwNlx1OTY5NFx1N0IyNlx1ODg0Q1xuICAgIH1cbiAgICBcbiAgICBjZWxscy5mb3JFYWNoKChjZWxsLCBjb2xJbmRleCkgPT4ge1xuICAgICAgaWYgKGhpZ2hsaWdodFJlZ2V4LnRlc3QoY2VsbCkpIHtcbiAgICAgICAgaGlnaGxpZ2h0Um93cy5hZGQocm93SW5kZXgpO1xuICAgICAgICBoaWdobGlnaHRDb2x1bW5zLmFkZChjb2xJbmRleCk7XG4gICAgICAgIGhpZ2hsaWdodENvdW50Kys7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICBcbiAgcmV0dXJuIHtcbiAgICB0YWJsZUNvbnRlbnQsXG4gICAgaGlnaGxpZ2h0Q291bnQsXG4gICAgaGlnaGxpZ2h0Um93cyxcbiAgICBoaWdobGlnaHRDb2x1bW5zXG4gIH07XG59XG5cbi8qKlxuICogXHVEODNDXHVERDk1IFx1NjgzOVx1NjM2RVx1OUFEOFx1NEVBRVx1NEY0RFx1N0Y2RVx1NjNEMFx1NTNENlx1ODg2OFx1NjgzQ1x1NzY4NFx1NzI3OVx1NUI5QVx1OTBFOFx1NTIwNlxuICovXG5wcml2YXRlIGV4dHJhY3RUYWJsZVBvcnRpb24oXG4gIHRhYmxlTGluZXM6IHN0cmluZ1tdLCBcbiAgaGlnaGxpZ2h0Um93czogU2V0PG51bWJlcj4sIFxuICBoaWdobGlnaHRDb2x1bW5zOiBTZXQ8bnVtYmVyPixcbiAgaGlnaGxpZ2h0Q291bnQ6IG51bWJlclxuKTogc3RyaW5nIHtcbiAgY29uc3QgdG90YWxSb3dzID0gdGFibGVMaW5lcy5sZW5ndGg7XG4gLy8gXHVEODNEXHVERDI3IFx1NjUzOVx1OEZEQlx1NTIwNlx1OTY5NFx1N0IyNlx1ODg0Q1x1NjhDMFx1NkQ0QlxuIGNvbnN0IHNlcGFyYXRvckluZGV4ID0gdGFibGVMaW5lcy5maW5kSW5kZXgoKGxpbmUsIGlkeCkgPT4ge1xuICBpZiAoaWR4ID09PSAwKSByZXR1cm4gZmFsc2U7IC8vIFx1N0IyQ1x1NEUwMFx1ODg0Q1x1NEUwRFx1NTNFRlx1ODBGRFx1NjYyRlx1NTIwNlx1OTY5NFx1N0IyNlxuICBjb25zdCBjZWxscyA9IGxpbmUuc3BsaXQoJ3wnKS5tYXAoYyA9PiBjLnRyaW0oKSkuZmlsdGVyKGMgPT4gYyk7XG4gIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjI0MFx1NjcwOVx1NTM1NVx1NTE0M1x1NjgzQ1x1OTBGRFx1NTNFQVx1NTMwNVx1NTQyQiAtXHUzMDAxOiBcdTU0OENcdTdBN0FcdTY4M0NcbiAgcmV0dXJuIGNlbGxzLmxlbmd0aCA+IDAgJiYgY2VsbHMuZXZlcnkoY2VsbCA9PiAvXlstOlxcc10rJC8udGVzdChjZWxsKSk7XG59KTtcblxuLy8gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2MjdFXHU1MjMwXHU1MjA2XHU5Njk0XHU3QjI2XHVGRjBDXHU1MDQ3XHU4QkJFXHU3QjJDXHU0RThDXHU4ODRDXHU2NjJGXHU1MjA2XHU5Njk0XHU3QjI2XG5jb25zdCBhY3R1YWxTZXBhcmF0b3JJbmRleCA9IHNlcGFyYXRvckluZGV4ICE9PSAtMSA/IHNlcGFyYXRvckluZGV4IDogMTtcbiAgXG4gIC8vIFx1NjBDNVx1NTFCNTE6IFx1NjU3NFx1NTIxN1x1OUFEOFx1NEVBRSAtIFx1NjNEMFx1NTNENlx1NjU3NFx1NEUyQVx1ODg2OFx1NjgzQ1xuICBjb25zdCBmaXJzdERhdGFSb3cgPSB0YWJsZUxpbmVzW3NlcGFyYXRvckluZGV4ICsgMV0gfHwgdGFibGVMaW5lc1sxXTtcbiAgY29uc3QgY29sdW1uQ291bnQgPSBmaXJzdERhdGFSb3cuc3BsaXQoJ3wnKS5maWx0ZXIoYyA9PiBjLnRyaW0oKSkubGVuZ3RoO1xuICBcbiAgaWYgKGhpZ2hsaWdodENvbHVtbnMuc2l6ZSA9PT0gY29sdW1uQ291bnQgfHwgaGlnaGxpZ2h0Q291bnQgPj0gdG90YWxSb3dzIC0gMSkge1xuICAgIHJldHVybiB0YWJsZUxpbmVzLmpvaW4oJ1xcbicpO1xuICB9XG4gIFxuICAvLyBcdTYwQzVcdTUxQjUyOiBcdTUzNTVcdTg4NENcdTlBRDhcdTRFQUUgLSBcdTYzRDBcdTUzRDZcdThCRTVcdTg4NENcdUZGMDhcdTUzMDVcdTU0MkJcdTg4NjhcdTU5MzRcdTU0OENcdTUyMDZcdTk2OTRcdTdCMjZcdUZGMDlcbiAgaWYgKGhpZ2hsaWdodFJvd3Muc2l6ZSA9PT0gMSkge1xuICAgIGNvbnN0IGhpZ2hsaWdodFJvdyA9IEFycmF5LmZyb20oaGlnaGxpZ2h0Um93cylbMF07XG4gICAgY29uc3QgcmVzdWx0ID0gW1xuICAgICAgdGFibGVMaW5lc1swXSwgLy8gXHU4ODY4XHU1OTM0XG4gICAgICB0YWJsZUxpbmVzW3NlcGFyYXRvckluZGV4XSwgLy8gXHU1MjA2XHU5Njk0XHU3QjI2XG4gICAgICB0YWJsZUxpbmVzW2hpZ2hsaWdodFJvd10gLy8gXHU5QUQ4XHU0RUFFXHU4ODRDXG4gICAgXTtcbiAgICByZXR1cm4gcmVzdWx0LmpvaW4oJ1xcbicpO1xuICB9XG4gIFxuICAvLyBcdTYwQzVcdTUxQjUzOiBcdTU5MUFcdTg4NENcdTlBRDhcdTRFQUUgLSBcdTYzRDBcdTUzRDZcdThGRDlcdTRFOUJcdTg4NENcbiAgY29uc3QgcmVzdWx0ID0gW3RhYmxlTGluZXNbMF0sIHRhYmxlTGluZXNbc2VwYXJhdG9ySW5kZXhdXTtcbiAgaGlnaGxpZ2h0Um93cy5mb3JFYWNoKHJvd0luZGV4ID0+IHtcbiAgICBpZiAocm93SW5kZXggIT09IDAgJiYgcm93SW5kZXggIT09IHNlcGFyYXRvckluZGV4KSB7XG4gICAgICByZXN1bHQucHVzaCh0YWJsZUxpbmVzW3Jvd0luZGV4XSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHJlc3VsdC5qb2luKCdcXG4nKTtcbn1cblxucHJpdmF0ZSBleHRyYWN0Q2xvemVDYXJkcyhmaWxlOiBURmlsZSwgY29udGVudDogc3RyaW5nKTogQ29udGVudFVuaXRbXSB7XG4gIGNvbnN0IHVuaXRzOiBDb250ZW50VW5pdFtdID0gW107XG4gIGNvbnN0IGhpZ2hsaWdodFJlZ2V4ID0gLz09KC4rPyk9PS9nO1xuICBjb25zdCBwcm9jZXNzZWRUYWJsZXMgPSBuZXcgU2V0PHN0cmluZz4oKTsgLy8gXHU4QkIwXHU1RjU1XHU1REYyXHU1OTA0XHU3NDA2XHU3Njg0XHU4ODY4XHU2ODNDXG4gIGNvbnN0IHByb2Nlc3NlZEhpZ2hsaWdodHMgPSBuZXcgU2V0PG51bWJlcj4oKTsgLy8gXHVEODNDXHVERDk1IFx1OEJCMFx1NUY1NVx1NURGMlx1NTkwNFx1NzQwNlx1NzY4NFx1OUFEOFx1NEVBRVx1NEY0RFx1N0Y2RVxuICBsZXQgbWF0Y2g7XG5cbiAgd2hpbGUgKChtYXRjaCA9IGhpZ2hsaWdodFJlZ2V4LmV4ZWMoY29udGVudCkpICE9PSBudWxsKSB7XG4gICAgY29uc3QgZXh0cmFjdGVkVGV4dCA9IG1hdGNoWzFdO1xuICAgIGNvbnN0IGZ1bGxNYXRjaCA9IG1hdGNoWzBdO1xuICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5jYWxjdWxhdGVQb3NpdGlvbihjb250ZW50LCBtYXRjaC5pbmRleCk7XG4gICAgXG4gICAgLy8gXHVEODNDXHVERDk1IFx1OERGM1x1OEZDN1x1NURGMlx1NTkwNFx1NzQwNlx1NzY4NFx1OUFEOFx1NEVBRVxuICAgIGlmIChwcm9jZXNzZWRIaWdobGlnaHRzLmhhcyhtYXRjaC5pbmRleCkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBcbiAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTg4NENcdTUxODVcdTVCQjlcbiAgICBjb25zdCBsaW5lU3RhcnQgPSBjb250ZW50Lmxhc3RJbmRleE9mKCdcXG4nLCBtYXRjaC5pbmRleCkgKyAxO1xuICAgIGNvbnN0IGxpbmVFbmQgPSBjb250ZW50LmluZGV4T2YoJ1xcbicsIG1hdGNoLmluZGV4KTtcbiAgICBjb25zdCBjdXJyZW50TGluZSA9IGNvbnRlbnQuc3Vic3RyaW5nKGxpbmVTdGFydCwgbGluZUVuZCA9PT0gLTEgPyBjb250ZW50Lmxlbmd0aCA6IGxpbmVFbmQpO1xuICAgIFxuICAgIC8vIFx1MjcwNSBcdThERjNcdThGQzcgRXhjYWxpZHJhdyBcdTlBRDhcdTRFQUVcbiAgICBpZiAodGhpcy5pc0V4Y2FsaWRyYXdIaWdobGlnaHQoZXh0cmFjdGVkVGV4dCwgY3VycmVudExpbmUpKSB7XG4gICAgICBjb25zb2xlLmxvZygnW2V4dHJhY3RDbG96ZUNhcmRzXSBcdThERjNcdThGQzcgRXhjYWxpZHJhdyBcdTlBRDhcdTRFQUU6JywgZXh0cmFjdGVkVGV4dCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgXG4gICAgLy8gXHVEODNDXHVERDk1IFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NTcyOFx1ODg2OFx1NjgzQ1x1NEUyRFxuICAgIGlmICh0aGlzLmlzSW5UYWJsZShjb250ZW50LCBtYXRjaC5pbmRleCkpIHtcbiAgICAgIGNvbnN0IHRhYmxlSW5mbyA9IHRoaXMuZXh0cmFjdFRhYmxlV2l0aEhpZ2hsaWdodHMoY29udGVudCwgbWF0Y2guaW5kZXgpO1xuICAgICAgXG4gICAgICBpZiAodGFibGVJbmZvKSB7XG4gICAgICAgIGNvbnN0IHRhYmxlS2V5ID0gYCR7ZmlsZS5wYXRofS0ke3RhYmxlSW5mby50YWJsZUNvbnRlbnQuc3Vic3RyaW5nKDAsIDUwKX1gO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU5MDdGXHU1MTREXHU5MUNEXHU1OTBEXHU1OTA0XHU3NDA2XHU1NDBDXHU0RTAwXHU0RTJBXHU4ODY4XHU2ODNDXG4gICAgICAgIGlmIChwcm9jZXNzZWRUYWJsZXMuaGFzKHRhYmxlS2V5KSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHByb2Nlc3NlZFRhYmxlcy5hZGQodGFibGVLZXkpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHVEODNDXHVERDk1IFx1NjgwN1x1OEJCMFx1OEZEOVx1NEUyQVx1ODg2OFx1NjgzQ1x1NTE4NVx1NzY4NFx1NjI0MFx1NjcwOVx1OUFEOFx1NEVBRVx1NEUzQVx1NURGMlx1NTkwNFx1NzQwNlxuICAgICAgICBjb25zdCB0YWJsZUhpZ2hsaWdodHMgPSB0aGlzLmZpbmRBbGxIaWdobGlnaHRzSW5UYWJsZShjb250ZW50LCB0YWJsZUluZm8udGFibGVDb250ZW50LCBtYXRjaC5pbmRleCk7XG4gICAgICAgIHRhYmxlSGlnaGxpZ2h0cy5mb3JFYWNoKHBvcyA9PiBwcm9jZXNzZWRIaWdobGlnaHRzLmFkZChwb3MpKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgICAgIGNvbnN0IHsgbGluZTogY3VycmVudExpbmUgfSA9IHRoaXMuY2FsY3VsYXRlUG9zaXRpb24oY29udGVudCwgbWF0Y2guaW5kZXgpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDXHU4RDc3XHU1OUNCXHU0RjREXHU3RjZFXG4gICAgICAgIGxldCB0YWJsZVN0YXJ0ID0gY3VycmVudExpbmU7XG4gICAgICAgIHdoaWxlICh0YWJsZVN0YXJ0ID4gMCAmJiBsaW5lc1t0YWJsZVN0YXJ0IC0gMV0/LmluY2x1ZGVzKCd8JykpIHtcbiAgICAgICAgICB0YWJsZVN0YXJ0LS07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRhYmxlTGluZXMgPSB0YWJsZUluZm8udGFibGVDb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICAgICAgY29uc3QgZXh0cmFjdGVkVGFibGUgPSB0aGlzLmV4dHJhY3RUYWJsZVBvcnRpb24oXG4gICAgICAgICAgdGFibGVMaW5lcyxcbiAgICAgICAgICB0YWJsZUluZm8uaGlnaGxpZ2h0Um93cyxcbiAgICAgICAgICB0YWJsZUluZm8uaGlnaGxpZ2h0Q29sdW1ucyxcbiAgICAgICAgICB0YWJsZUluZm8uaGlnaGxpZ2h0Q291bnRcbiAgICAgICAgKTtcbiAgICAgICAgLy8gXHVEODNEXHVERDI3IFx1OUE4Q1x1OEJDMVx1NjNEMFx1NTNENlx1NzY4NFx1ODg2OFx1NjgzQ1x1NjYyRlx1NTQyNlx1NTMwNVx1NTQyQlx1NTIwNlx1OTY5NFx1N0IyNlx1ODg0Q1xuY29uc3QgZXh0cmFjdGVkTGluZXMgPSBleHRyYWN0ZWRUYWJsZS5zcGxpdCgnXFxuJyk7XG5jb25zdCBoYXNTZXBhcmF0b3IgPSBleHRyYWN0ZWRMaW5lcy5zb21lKGxpbmUgPT4ge1xuICBjb25zdCBjZWxscyA9IGxpbmUuc3BsaXQoJ3wnKS5tYXAoYyA9PiBjLnRyaW0oKSkuZmlsdGVyKGMgPT4gYyk7XG4gIHJldHVybiBjZWxscy5sZW5ndGggPiAwICYmIGNlbGxzLmV2ZXJ5KGNlbGwgPT4gL15bLTpcXHNdKyQvLnRlc3QoY2VsbCkpO1xufSk7XG5cbi8vIFx1NTk4Mlx1Njc5Q1x1N0YzQVx1NUMxMVx1NTIwNlx1OTY5NFx1N0IyNlx1ODg0Q1x1RkYwQ1x1ODFFQVx1NTJBOFx1NkRGQlx1NTJBMFxuaWYgKCFoYXNTZXBhcmF0b3IgJiYgZXh0cmFjdGVkTGluZXMubGVuZ3RoID49IDIpIHtcbiAgY29uc3QgaGVhZGVyQ2VsbHMgPSBleHRyYWN0ZWRMaW5lc1swXS5zcGxpdCgnfCcpLm1hcChjID0+IGMudHJpbSgpKS5maWx0ZXIoYyA9PiBjKTtcbiAgY29uc3Qgc2VwYXJhdG9yID0gJ3wgJyArIGhlYWRlckNlbGxzLm1hcCgoKSA9PiAnLS0tJykuam9pbignIHwgJykgKyAnIHwnO1xuICBleHRyYWN0ZWRMaW5lcy5zcGxpY2UoMSwgMCwgc2VwYXJhdG9yKTtcbiAgY29uc3QgZXh0cmFjdGVkVGFibGUgPSBleHRyYWN0ZWRMaW5lcy5qb2luKCdcXG4nKTtcbn1cbiAgICAgICAgLy8gXHU4QkExXHU3Qjk3XHU4ODY4XHU2ODNDXHU1NzI4XHU2NTg3XHU2ODYzXHU0RTJEXHU3Njg0XHU4RDc3XHU1OUNCXHU0RjREXHU3RjZFXG4gICAgICAgIGxldCB0YWJsZVN0YXJ0T2Zmc2V0ID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YWJsZVN0YXJ0OyBpKyspIHtcbiAgICAgICAgICB0YWJsZVN0YXJ0T2Zmc2V0ICs9IGxpbmVzW2ldLmxlbmd0aCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFx1RDgzQ1x1REQ5NSBcdTY1MzZcdTk2QzZcdTYyNDBcdTY3MDlcdTlBRDhcdTRFQUVcdTUxODVcdTVCQjlcbiAgICAgICAgY29uc3QgYWxsSGlnaGxpZ2h0cyA9IHRoaXMuZXh0cmFjdEFsbEhpZ2hsaWdodHNGcm9tVGFibGUodGFibGVJbmZvLnRhYmxlQ29udGVudCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB1bml0OiBDb250ZW50VW5pdCA9IHtcbiAgICAgICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICAgICAgdHlwZTogJ2Nsb3plJyxcbiAgICAgICAgICBjb250ZW50OiBhbGxIaWdobGlnaHRzLmpvaW4oJywgJyksIC8vIFx1RDgzQ1x1REQ5NSBcdTUzMDVcdTU0MkJcdTYyNDBcdTY3MDlcdTlBRDhcdTRFQUVcbiAgICAgICAgICBmdWxsQ29udGV4dDogZXh0cmFjdGVkVGFibGUsIC8vIFx1NjYzRVx1NzkzQVx1NjNEMFx1NTNENlx1NzY4NFx1ODg2OFx1NjgzQ1x1OTBFOFx1NTIwNlxuICAgICAgICAgIHNvdXJjZToge1xuICAgICAgICAgICAgZmlsZTogZmlsZS5wYXRoLFxuICAgICAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICAgICAgc3RhcnQ6IHRhYmxlU3RhcnRPZmZzZXQsXG4gICAgICAgICAgICAgIGVuZDogdGFibGVTdGFydE9mZnNldCArIHRhYmxlSW5mby50YWJsZUNvbnRlbnQubGVuZ3RoLFxuICAgICAgICAgICAgICBsaW5lOiB0YWJsZVN0YXJ0XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGVhZGluZzogdGhpcy5maW5kSGVhZGluZyhjb250ZW50LCBtYXRjaC5pbmRleCksXG4gICAgICAgICAgICBhbmNob3JMaW5rOiBgW1ske2ZpbGUuYmFzZW5hbWV9I14ke3RoaXMuZ2VuZXJhdGVCbG9ja0lkKCl9XV1gXG4gICAgICAgICAgfSxcbiAgICAgICAgICBleHRyYWN0UnVsZToge1xuICAgICAgICAgICAgcnVsZUlkOiAnY2xvemUtdGFibGUnLFxuICAgICAgICAgICAgcnVsZU5hbWU6ICdUYWJsZSBDbG96ZSBEZWxldGlvbicsXG4gICAgICAgICAgICBleHRyYWN0ZWRCeTogJ2F1dG8nXG4gICAgICAgICAgfSxcbiAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgdGFnczogWy4uLnRoaXMuZXh0cmFjdFRhZ3MoY29udGVudCwgbWF0Y2guaW5kZXgpLCAnI3RhYmxlJ10sXG4gICAgICAgICAgICBjdXN0b21EYXRhOiB7XG4gICAgICAgICAgICAgIHRhYmxlVHlwZTogJ3BhcnRpYWwnLFxuICAgICAgICAgICAgICBoaWdobGlnaHRDb3VudDogdGFibGVJbmZvLmhpZ2hsaWdodENvdW50LFxuICAgICAgICAgICAgICByb3dDb3VudDogdGFibGVJbmZvLmhpZ2hsaWdodFJvd3Muc2l6ZSxcbiAgICAgICAgICAgICAgY29sdW1uQ291bnQ6IHRhYmxlSW5mby5oaWdobGlnaHRDb2x1bW5zLnNpemUsXG4gICAgICAgICAgICAgIGFsbEhpZ2hsaWdodHM6IGFsbEhpZ2hsaWdodHMgLy8gXHVEODNDXHVERDk1IFx1NEZERFx1NUI1OFx1NjI0MFx1NjcwOVx1OUFEOFx1NEVBRVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZmxhc2hjYXJkSWRzOiBbXVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgdW5pdHMucHVzaCh1bml0KTtcbiAgICAgICAgY29uc29sZS5sb2coYFtleHRyYWN0Q2xvemVDYXJkc10gXHU2M0QwXHU1M0Q2XHU4ODY4XHU2ODNDOiAke3RhYmxlSW5mby5oaWdobGlnaHRDb3VudH0gXHU0RTJBXHU5QUQ4XHU0RUFFYCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBcdTUzOUZcdTY3MDlcdTc2ODRcdTY2NkVcdTkwMUFcdTlBRDhcdTRFQUVcdTU5MDRcdTc0MDZcdTkwM0JcdThGOTEuLi5cbiAgICBjb25zdCBmdWxsU2VudGVuY2UgPSB0aGlzLmV4dHJhY3RGdWxsU2VudGVuY2UoY29udGVudCwgbWF0Y2guaW5kZXgsIGZ1bGxNYXRjaC5sZW5ndGgpO1xuXG4gICAgY29uc3QgdW5pdDogQ29udGVudFVuaXQgPSB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICB0eXBlOiAnY2xvemUnLFxuICAgICAgY29udGVudDogZXh0cmFjdGVkVGV4dC50cmltKCksXG4gICAgICBmdWxsQ29udGV4dDogZnVsbFNlbnRlbmNlLFxuICAgICAgc291cmNlOiB7XG4gICAgICAgIGZpbGU6IGZpbGUucGF0aCxcbiAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICBzdGFydDogbWF0Y2guaW5kZXgsXG4gICAgICAgICAgZW5kOiBtYXRjaC5pbmRleCArIGZ1bGxNYXRjaC5sZW5ndGgsXG4gICAgICAgICAgbGluZTogcG9zaXRpb24ubGluZVxuICAgICAgICB9LFxuICAgICAgICBoZWFkaW5nOiB0aGlzLmZpbmRIZWFkaW5nKGNvbnRlbnQsIG1hdGNoLmluZGV4KSxcbiAgICAgICAgYW5jaG9yTGluazogYFtbJHtmaWxlLmJhc2VuYW1lfSNeJHt0aGlzLmdlbmVyYXRlQmxvY2tJZCgpfV1dYFxuICAgICAgfSxcbiAgICAgIGV4dHJhY3RSdWxlOiB7XG4gICAgICAgIHJ1bGVJZDogJ2Nsb3plJyxcbiAgICAgICAgcnVsZU5hbWU6ICdDbG96ZSBEZWxldGlvbicsXG4gICAgICAgIGV4dHJhY3RlZEJ5OiAnYXV0bydcbiAgICAgIH0sXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgdGFnczogdGhpcy5leHRyYWN0VGFncyhjb250ZW50LCBtYXRjaC5pbmRleClcbiAgICAgIH0sXG4gICAgICBmbGFzaGNhcmRJZHM6IFtdXG4gICAgfTtcblxuICAgIHVuaXRzLnB1c2godW5pdCk7XG4gIH1cblxuICByZXR1cm4gdW5pdHM7XG59XG5cbi8vIFx1RDgzQ1x1REQ5NSBcdTZERkJcdTUyQTBcdThGODVcdTUyQTlcdTY1QjlcdTZDRDU6XHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDXHU1MTg1XHU2MjQwXHU2NzA5XHU5QUQ4XHU0RUFFXHU3Njg0XHU0RjREXHU3RjZFXG5wcml2YXRlIGZpbmRBbGxIaWdobGlnaHRzSW5UYWJsZShcbiAgY29udGVudDogc3RyaW5nLCBcbiAgdGFibGVDb250ZW50OiBzdHJpbmcsIFxuICBjdXJyZW50SGlnaGxpZ2h0UG9zOiBudW1iZXJcbik6IG51bWJlcltdIHtcbiAgY29uc3QgcG9zaXRpb25zOiBudW1iZXJbXSA9IFtdO1xuICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICBjb25zdCB7IGxpbmU6IGN1cnJlbnRMaW5lIH0gPSB0aGlzLmNhbGN1bGF0ZVBvc2l0aW9uKGNvbnRlbnQsIGN1cnJlbnRIaWdobGlnaHRQb3MpO1xuICBcbiAgLy8gXHU2MjdFXHU1MjMwXHU4ODY4XHU2ODNDXHU4MzAzXHU1NkY0XG4gIGxldCB0YWJsZVN0YXJ0ID0gY3VycmVudExpbmU7XG4gIGxldCB0YWJsZUVuZCA9IGN1cnJlbnRMaW5lO1xuICBcbiAgd2hpbGUgKHRhYmxlU3RhcnQgPiAwICYmIGxpbmVzW3RhYmxlU3RhcnQgLSAxXT8uaW5jbHVkZXMoJ3wnKSkge1xuICAgIHRhYmxlU3RhcnQtLTtcbiAgfVxuICB3aGlsZSAodGFibGVFbmQgPCBsaW5lcy5sZW5ndGggLSAxICYmIGxpbmVzW3RhYmxlRW5kICsgMV0/LmluY2x1ZGVzKCd8JykpIHtcbiAgICB0YWJsZUVuZCsrO1xuICB9XG4gIFxuICAvLyBcdThCQTFcdTdCOTdcdTg4NjhcdTY4M0NcdThENzdcdTU5Q0JcdTUwNEZcdTc5RkJcbiAgbGV0IG9mZnNldCA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdGFibGVTdGFydDsgaSsrKSB7XG4gICAgb2Zmc2V0ICs9IGxpbmVzW2ldLmxlbmd0aCArIDE7XG4gIH1cbiAgXG4gIC8vIFx1NTcyOFx1ODg2OFx1NjgzQ1x1ODMwM1x1NTZGNFx1NTE4NVx1NjdFNVx1NjI3RVx1NjI0MFx1NjcwOVx1OUFEOFx1NEVBRVxuICBjb25zdCBoaWdobGlnaHRSZWdleCA9IC89PSguKz8pPT0vZztcbiAgbGV0IG1hdGNoO1xuICBjb25zdCB0YWJsZUVuZE9mZnNldCA9IG9mZnNldCArIHRhYmxlQ29udGVudC5sZW5ndGg7XG4gIFxuICB3aGlsZSAoKG1hdGNoID0gaGlnaGxpZ2h0UmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcbiAgICBpZiAobWF0Y2guaW5kZXggPj0gb2Zmc2V0ICYmIG1hdGNoLmluZGV4IDwgdGFibGVFbmRPZmZzZXQpIHtcbiAgICAgIHBvc2l0aW9ucy5wdXNoKG1hdGNoLmluZGV4KTtcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBwb3NpdGlvbnM7XG59XG5cbi8vIFx1RDgzQ1x1REQ5NSBcdTZERkJcdTUyQTBcdThGODVcdTUyQTlcdTY1QjlcdTZDRDU6XHU2M0QwXHU1M0Q2XHU4ODY4XHU2ODNDXHU0RTJEXHU2MjQwXHU2NzA5XHU5QUQ4XHU0RUFFXHU1MTg1XHU1QkI5XG5wcml2YXRlIGV4dHJhY3RBbGxIaWdobGlnaHRzRnJvbVRhYmxlKHRhYmxlQ29udGVudDogc3RyaW5nKTogc3RyaW5nW10ge1xuICBjb25zdCBoaWdobGlnaHRzOiBzdHJpbmdbXSA9IFtdO1xuICBjb25zdCBoaWdobGlnaHRSZWdleCA9IC89PSguKz8pPT0vZztcbiAgbGV0IG1hdGNoO1xuICBcbiAgd2hpbGUgKChtYXRjaCA9IGhpZ2hsaWdodFJlZ2V4LmV4ZWModGFibGVDb250ZW50KSkgIT09IG51bGwpIHtcbiAgICBoaWdobGlnaHRzLnB1c2gobWF0Y2hbMV0udHJpbSgpKTtcbiAgfVxuICBcbiAgcmV0dXJuIGhpZ2hsaWdodHM7XG59XG5cbn0iLCAiLy8gYW5ub3RhdGlvbiBNYW5hZ2VyLnRzXG5pbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcblxuZXhwb3J0IGludGVyZmFjZSBBbm5vdGF0aW9uIHtcbiAgaWQ6IHN0cmluZztcbiAgdGFyZ2V0VHlwZTogJ2NvbnRlbnQnIHwgJ2ZpbGUnO1xuICB0YXJnZXRJZDogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIGJhZGdlPzoge1xuICAgIHRleHQ6IHN0cmluZztcbiAgICBjb2xvcjogc3RyaW5nO1xuICAgIGljb24/OiBzdHJpbmc7XG4gIH07XG4gIG1ldGFkYXRhOiB7XG4gICAgY3JlYXRlZEF0OiBudW1iZXI7XG4gICAgdXBkYXRlZEF0OiBudW1iZXI7XG4gICAgaXNQaW5uZWQ/OiBib29sZWFuO1xuICB9O1xufVxuXG5leHBvcnQgY2xhc3MgQW5ub3RhdGlvbk1hbmFnZXIge1xuICBwcml2YXRlIGFubm90YXRpb25zOiBNYXA8c3RyaW5nLCBBbm5vdGF0aW9uPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBkYXRhRm9sZGVyOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBhcHA6IEFwcCxcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW5cbiAgKSB7XG4gICAgdGhpcy5kYXRhRm9sZGVyID0gYCR7dGhpcy5hcHAudmF1bHQuY29uZmlnRGlyfS9wbHVnaW5zL2xlYXJuaW5nLXN5c3RlbS9kYXRhYDtcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUoKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkQW5ub3RhdGlvbnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTUyQTBcdThGN0RcdTYyNDBcdTY3MDlcdTYyNzlcdTZDRThcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbG9hZEFubm90YXRpb25zKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXRoID0gYCR7dGhpcy5kYXRhRm9sZGVyfS9hbm5vdGF0aW9ucy5qc29uYDtcbiAgICAgIGNvbnN0IGFkYXB0ZXIgPSB0aGlzLmFwcC52YXVsdC5hZGFwdGVyO1xuXG4gICAgICBpZiAoYXdhaXQgYWRhcHRlci5leGlzdHMocGF0aCkpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGFkYXB0ZXIucmVhZChwYXRoKTtcbiAgICAgICAgY29uc3QgYW5ub3RhdGlvbnM6IEFubm90YXRpb25bXSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGFubm90YXRpb24gb2YgYW5ub3RhdGlvbnMpIHtcbiAgICAgICAgICB0aGlzLmFubm90YXRpb25zLnNldChhbm5vdGF0aW9uLmlkLCBhbm5vdGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGFubm90YXRpb25zOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU2REZCXHU1MkEwXHU1MTg1XHU1QkI5XHU2Mjc5XHU2Q0U4XG4gICAqL1xuICBhc3luYyBhZGRDb250ZW50QW5ub3RhdGlvbihcbiAgICBjb250ZW50VW5pdElkOiBzdHJpbmcsXG4gICAgY29udGVudDogc3RyaW5nLFxuICAgIGJhZGdlPzogQW5ub3RhdGlvblsnYmFkZ2UnXVxuICApOiBQcm9taXNlPEFubm90YXRpb24+IHtcbiAgICBjb25zdCBhbm5vdGF0aW9uOiBBbm5vdGF0aW9uID0ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVJZCgpLFxuICAgICAgdGFyZ2V0VHlwZTogJ2NvbnRlbnQnLFxuICAgICAgdGFyZ2V0SWQ6IGNvbnRlbnRVbml0SWQsXG4gICAgICBjb250ZW50LFxuICAgICAgYmFkZ2UsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmFubm90YXRpb25zLnNldChhbm5vdGF0aW9uLmlkLCBhbm5vdGF0aW9uKTtcbiAgICBhd2FpdCB0aGlzLnBlcnNpc3QoKTtcblxuICAgIC8vIFx1NjZGNFx1NjVCMCBDb250ZW50VW5pdCBcdTUxNzNcdTgwNTRcbiAgICBjb25zdCBjb250ZW50VW5pdCA9IHRoaXMucGx1Z2luLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNvbnRlbnRVbml0SWQpO1xuICAgIGlmIChjb250ZW50VW5pdCkge1xuICAgICAgY29udGVudFVuaXQuYW5ub3RhdGlvbklkID0gYW5ub3RhdGlvbi5pZDtcbiAgICAgIGNvbnRlbnRVbml0Lm1ldGFkYXRhLnVwZGF0ZWRBdCA9IERhdGUubm93KCk7XG4gICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5zYXZlQ29udGVudFVuaXQoY29udGVudFVuaXQpO1xuICAgIH1cblxuICAgIHJldHVybiBhbm5vdGF0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NkRGQlx1NTJBMFx1NjU4N1x1NEVGNlx1NjI3OVx1NkNFOFxuICAgKi9cbiAgYXN5bmMgYWRkRmlsZUFubm90YXRpb24oXG4gICAgZmlsZVBhdGg6IHN0cmluZyxcbiAgICBjb250ZW50OiBzdHJpbmdcbiAgKTogUHJvbWlzZTxBbm5vdGF0aW9uPiB7XG4gICAgY29uc3QgYW5ub3RhdGlvbjogQW5ub3RhdGlvbiA9IHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgIHRhcmdldFR5cGU6ICdmaWxlJyxcbiAgICAgIHRhcmdldElkOiBmaWxlUGF0aCxcbiAgICAgIGNvbnRlbnQsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmFubm90YXRpb25zLnNldChhbm5vdGF0aW9uLmlkLCBhbm5vdGF0aW9uKTtcbiAgICBhd2FpdCB0aGlzLnBlcnNpc3QoKTtcblxuICAgIHJldHVybiBhbm5vdGF0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NjI3OVx1NkNFOFxuICAgKi9cbiAgZ2V0QW5ub3RhdGlvbihpZDogc3RyaW5nKTogQW5ub3RhdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuYW5ub3RhdGlvbnMuZ2V0KGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTUxODVcdTVCQjlcdTc2ODRcdTYyNzlcdTZDRThcbiAgICovXG4gIGdldENvbnRlbnRBbm5vdGF0aW9uKGNvbnRlbnRVbml0SWQ6IHN0cmluZyk6IEFubm90YXRpb24gfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGNvbnRlbnRVbml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoY29udGVudFVuaXRJZCk7XG4gICAgaWYgKCFjb250ZW50VW5pdD8uYW5ub3RhdGlvbklkKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIFxuICAgIHJldHVybiB0aGlzLmFubm90YXRpb25zLmdldChjb250ZW50VW5pdC5hbm5vdGF0aW9uSWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NjU4N1x1NEVGNlx1NzY4NFx1NjI0MFx1NjcwOVx1NjI3OVx1NkNFOFxuICAgKi9cbiAgZ2V0RmlsZUFubm90YXRpb25zKGZpbGVQYXRoOiBzdHJpbmcpOiBBbm5vdGF0aW9uW10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYW5ub3RhdGlvbnMudmFsdWVzKCkpLmZpbHRlcihcbiAgICAgIGFubiA9PiBhbm4udGFyZ2V0VHlwZSA9PT0gJ2ZpbGUnICYmIGFubi50YXJnZXRJZCA9PT0gZmlsZVBhdGhcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NjZGNFx1NjVCMFx1NjI3OVx1NkNFOFxuICAgKi9cbiAgYXN5bmMgdXBkYXRlQW5ub3RhdGlvbihcbiAgICBpZDogc3RyaW5nLFxuICAgIHVwZGF0ZXM6IFBhcnRpYWw8QW5ub3RhdGlvbj5cbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgYW5ub3RhdGlvbiA9IHRoaXMuYW5ub3RhdGlvbnMuZ2V0KGlkKTtcbiAgICBpZiAoIWFubm90YXRpb24pIHJldHVybjtcblxuICAgIE9iamVjdC5hc3NpZ24oYW5ub3RhdGlvbiwgdXBkYXRlcywge1xuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgLi4uYW5ub3RhdGlvbi5tZXRhZGF0YSxcbiAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBhd2FpdCB0aGlzLnBlcnNpc3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTUyMjBcdTk2NjRcdTYyNzlcdTZDRThcbiAgICovXG4gIGFzeW5jIGRlbGV0ZUFubm90YXRpb24oaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGFubm90YXRpb24gPSB0aGlzLmFubm90YXRpb25zLmdldChpZCk7XG4gICAgaWYgKCFhbm5vdGF0aW9uKSByZXR1cm47XG5cbiAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTUxODVcdTVCQjlcdTYyNzlcdTZDRThcdUZGMENcdTg5RTNcdTk2NjRcdTUxNzNcdTgwNTRcbiAgICBpZiAoYW5ub3RhdGlvbi50YXJnZXRUeXBlID09PSAnY29udGVudCcpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnRVbml0ID0gdGhpcy5wbHVnaW4uZGF0YU1hbmFnZXIuZ2V0Q29udGVudFVuaXQoYW5ub3RhdGlvbi50YXJnZXRJZCk7XG4gICAgICBpZiAoY29udGVudFVuaXQpIHtcbiAgICAgICAgY29udGVudFVuaXQuYW5ub3RhdGlvbklkID0gdW5kZWZpbmVkO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5kYXRhTWFuYWdlci5zYXZlQ29udGVudFVuaXQoY29udGVudFVuaXQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuYW5ub3RhdGlvbnMuZGVsZXRlKGlkKTtcbiAgICBhd2FpdCB0aGlzLnBlcnNpc3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTYyNDBcdTY3MDlcdTYyNzlcdTZDRThcbiAgICovXG4gIGdldEFsbEFubm90YXRpb25zKCk6IEFubm90YXRpb25bXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5hbm5vdGF0aW9ucy52YWx1ZXMoKSk7XG4gIH1cblxuICAvKipcbiAgICogXHU2MzAxXHU0RTQ1XHU1MzE2XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHBlcnNpc3QoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L2Fubm90YXRpb25zLmpzb25gO1xuICAgICAgY29uc3QgYW5ub3RhdGlvbnMgPSBBcnJheS5mcm9tKHRoaXMuYW5ub3RhdGlvbnMudmFsdWVzKCkpO1xuICAgICAgY29uc3QgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGFubm90YXRpb25zLCBudWxsLCAyKTtcbiAgICAgIFxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShwYXRoLCBkYXRhKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGVyc2lzdGluZyBhbm5vdGF0aW9uczonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NzUxRlx1NjIxMFx1NTUyRlx1NEUwMCBJRFxuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBhbm4tJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xuICB9XG59IiwgIi8vIGZsYXNoY2FyZCBtYW5hZ2VyLnRzXG5pbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBEYXRhTWFuYWdlciwgQ29udGVudFVuaXQgfSBmcm9tICcuL0RhdGFNYW5hZ2VyJzsgXG5pbXBvcnQgdHlwZSBMZWFybmluZ1N5c3RlbVBsdWdpbiBmcm9tICcuLi9tYWluJztcblxuZXhwb3J0IGludGVyZmFjZSBGbGFzaGNhcmQge1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiAncWEnIHwgJ2Nsb3plJztcbiAgc291cmNlQ29udGVudElkOiBzdHJpbmc7XG4gIHNvdXJjZUZpbGU6IHN0cmluZztcbiAgYW5jaG9yTGluazogc3RyaW5nO1xuICBcbiAgLy8gXHU1MzYxXHU3MjQ3XHU1MTg1XHU1QkI5XG4gIGZyb250OiBzdHJpbmc7XG4gIGJhY2s6IHN0cmluZyB8IHN0cmluZ1tdO1xuICBcbiAgLy8gXHU1QjhDXHU1RjYyXHU1ODZCXHU3QTdBXHU0RTEzXHU3NTI4XG4gIGNsb3plPzoge1xuICAgIG9yaWdpbmFsOiBzdHJpbmc7XG4gICAgZGVsZXRpb25zOiB7XG4gICAgICBpbmRleDogbnVtYmVyO1xuICAgICAgYW5zd2VyOiBzdHJpbmc7XG4gICAgICBhbHRlcm5hdGl2ZXM/OiBzdHJpbmdbXTtcbiAgICB9W107XG4gIH07XG4gIFxuICAvLyBcdTUyMDZcdTdFQzRcbiAgZGVjazogc3RyaW5nO1xuICB0YWdzOiBzdHJpbmdbXTtcbiAgXG4gIC8vIFx1NTkwRFx1NEU2MFx1NjU3MFx1NjM2RVxuICBzY2hlZHVsaW5nOiB7XG4gICAgaW50ZXJ2YWw6IG51bWJlcjtcbiAgICBlYXNlOiBudW1iZXI7XG4gICAgZHVlOiBudW1iZXI7XG4gICAgbGFwc2VzOiBudW1iZXI7XG4gICAgcmVwczogbnVtYmVyO1xuICAgIHN0YXRlOiAnbmV3JyB8ICdsZWFybmluZycgfCAncmV2aWV3JyB8ICdyZWxlYXJuaW5nJztcbiAgfTtcbiAgXG4gIC8vIFx1N0VERlx1OEJBMVxuICBzdGF0czoge1xuICAgIHRvdGFsUmV2aWV3czogbnVtYmVyO1xuICAgIGNvcnJlY3RDb3VudDogbnVtYmVyO1xuICAgIGF2ZXJhZ2VUaW1lOiBudW1iZXI7XG4gICAgbGFzdFJldmlldz86IG51bWJlcjtcbiAgICBkaWZmaWN1bHR5OiBudW1iZXI7XG4gIH07XG4gIFxuICBtZXRhZGF0YToge1xuICAgIGNyZWF0ZWRBdDogbnVtYmVyO1xuICAgIHVwZGF0ZWRBdDogbnVtYmVyO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJldmlld0xvZyB7XG4gIGlkOiBzdHJpbmc7XG4gIGZsYXNoY2FyZElkOiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xuICByZXNwb25zZToge1xuICAgIHVzZXJBbnN3ZXI/OiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgICB0aW1lU3BlbnQ6IG51bWJlcjtcbiAgICBlYXNlOiAnYWdhaW4nIHwgJ2hhcmQnIHwgJ2dvb2QnIHwgJ2Vhc3knO1xuICB9O1xuICBncmFkaW5nPzoge1xuICAgIGNvcnJlY3RuZXNzOiAnY29ycmVjdCcgfCAncGFydGlhbCcgfCAnd3JvbmcnO1xuICAgIHNpbWlsYXJpdHk/OiBudW1iZXI7XG4gIH07XG4gIHNjaGVkdWxpbmdDaGFuZ2U6IHtcbiAgICBvbGRJbnRlcnZhbDogbnVtYmVyO1xuICAgIG5ld0ludGVydmFsOiBudW1iZXI7XG4gICAgb2xkRWFzZTogbnVtYmVyO1xuICAgIG5ld0Vhc2U6IG51bWJlcjtcbiAgfTtcbn1cblxuZXhwb3J0IGNsYXNzIEZsYXNoY2FyZE1hbmFnZXIge1xuICBwcml2YXRlIGZsYXNoY2FyZHM6IE1hcDxzdHJpbmcsIEZsYXNoY2FyZD4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgcmV2aWV3TG9nczogUmV2aWV3TG9nW10gPSBbXTtcbiAgcHJpdmF0ZSBkYXRhRm9sZGVyOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBhcHA6IEFwcCxcbiAgICBwcml2YXRlIGRhdGFNYW5hZ2VyOiBEYXRhTWFuYWdlcixcbiAgICBwcml2YXRlIHBsdWdpbjogTGVhcm5pbmdTeXN0ZW1QbHVnaW5cbiAgKSB7XG4gICAgdGhpcy5kYXRhRm9sZGVyID0gYCR7dGhpcy5hcHAudmF1bHQuY29uZmlnRGlyfS9wbHVnaW5zL2xlYXJuaW5nLXN5c3RlbS9kYXRhYDtcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUoKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkRmxhc2hjYXJkcygpO1xuICAgIGF3YWl0IHRoaXMubG9hZFJldmlld0xvZ3MoKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFx1N0VERlx1NEUwMFx1NTIxQlx1NUVGQVx1NTE2NVx1NTNFMyA9PT09PT09PT09PT09PT09PT09PVxuICBcbiAgLyoqXG4gICAqIFx1RDgzQ1x1REQ5NSBcdTdFREZcdTRFMDBcdTUxNjVcdTUzRTM6IFx1NEVDRSBDb250ZW50VW5pdCBcdTUyMUJcdTVFRkFcdTk1RUFcdTUzNjFcbiAgICogXHU5MDAyXHU5MTREXHU2MjQwXHU2NzA5XHU1NzNBXHU2NjZGOiBcdTUzRjNcdTk1MkVcdTYzRDBcdTUzRDZcdTMwMDFTY2FuXHUzMDAxXHU2Mjc5XHU5MUNGXHU1MjFCXHU1RUZBXHUzMDAxXHU1RkVCXHU5MDFGXHU3NTFGXHU2MjEwXG4gICAqL1xuICBhc3luYyBjcmVhdGVGbGFzaGNhcmRGcm9tVW5pdChcbiAgICB1bml0OiBDb250ZW50VW5pdCxcbiAgICBvcHRpb25zPzoge1xuICAgICAgY3VzdG9tUXVlc3Rpb24/OiBzdHJpbmc7XG4gICAgICBjdXN0b21BbnN3ZXI/OiBzdHJpbmc7XG4gICAgICBjYXJkVHlwZT86ICdxYScgfCAnY2xvemUnO1xuICAgIH1cbiAgKTogUHJvbWlzZTxGbGFzaGNhcmQ+IHtcbiAgICBcbiAgICBjb25zdCBjYXJkVHlwZSA9IG9wdGlvbnM/LmNhcmRUeXBlIHx8ICh1bml0LnR5cGUgPT09ICdRQScgPyAncWEnIDogJ2Nsb3plJyk7XG4gIFxuICAgIGxldCBmbGFzaGNhcmQ6IEZsYXNoY2FyZDtcbiAgXG4gICAgaWYgKGNhcmRUeXBlID09PSAncWEnIHx8IHVuaXQudHlwZSA9PT0gJ1FBJykge1xuICAgICAgY29uc3QgcXVlc3Rpb24gPSBvcHRpb25zPy5jdXN0b21RdWVzdGlvbiB8fCB1bml0LmNvbnRlbnQ7XG4gICAgICBjb25zdCBhbnN3ZXIgPSBvcHRpb25zPy5jdXN0b21BbnN3ZXIgfHwgdW5pdC5hbnN3ZXIgfHwgdW5pdC5jb250ZW50O1xuICAgICAgXG4gICAgICBmbGFzaGNhcmQgPSBhd2FpdCB0aGlzLmNyZWF0ZVFBQ2FyZCh1bml0LmlkLCBxdWVzdGlvbiwgYW5zd2VyKTtcbiAgICAgIFxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0ZXh0ID0gdW5pdC5mdWxsQ29udGV4dCB8fCB1bml0LmNvbnRlbnQ7XG4gICAgICBjb25zdCBhbnN3ZXIgPSBvcHRpb25zPy5jdXN0b21BbnN3ZXIgfHwgdW5pdC5jb250ZW50O1xuICAgICAgXG4gICAgICBjb25zdCBkZWxldGlvbnMgPSBbe1xuICAgICAgICBpbmRleDogdGV4dC5pbmRleE9mKGFuc3dlciksXG4gICAgICAgIGFuc3dlcjogYW5zd2VyXG4gICAgICB9XTtcbiAgICAgIFxuXG4gICAgICBmbGFzaGNhcmQgPSBhd2FpdCB0aGlzLmNyZWF0ZUNsb3plQ2FyZCh1bml0LmlkLCB0ZXh0LCBkZWxldGlvbnMpO1xuICAgIH1cbiAgXG4gICAgXG4gIFxuICAgIHJldHVybiBmbGFzaGNhcmQ7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTY4MzhcdTVGQzNcdTUyMUJcdTVFRkFcdTY1QjlcdTZDRDUgPT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogXHU1MjFCXHU1RUZBXHU5NUVFXHU3QjU0XHU1MzYxXHVGRjA4XHU1NTJGXHU0RTAwXHU3MjQ4XHU2NzJDXHVGRjBDXHU1NDA4XHU1RTc2XHU0RTg2XHU2MjQwXHU2NzA5XHU1MjlGXHU4MEZEXHVGRjA5XG4gICAqL1xuICBhc3luYyBjcmVhdGVRQUNhcmQoXG4gICAgY29udGVudFVuaXRJZDogc3RyaW5nLFxuICAgIHF1ZXN0aW9uOiBzdHJpbmcsXG4gICAgYW5zd2VyOiBzdHJpbmcsXG4gICAgZGVjaz86IHN0cmluZ1xuICApOiBQcm9taXNlPEZsYXNoY2FyZD4ge1xuICAgIGNvbnN0IGNvbnRlbnRVbml0ID0gdGhpcy5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjb250ZW50VW5pdElkKTtcbiAgICBpZiAoIWNvbnRlbnRVbml0KSB0aHJvdyBuZXcgRXJyb3IoJ0NvbnRlbnQgdW5pdCBub3QgZm91bmQnKTtcblxuICAgIGNvbnN0IGNhcmQ6IEZsYXNoY2FyZCA9IHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgIHR5cGU6ICdxYScsXG4gICAgICBzb3VyY2VDb250ZW50SWQ6IGNvbnRlbnRVbml0SWQsXG4gICAgICBzb3VyY2VGaWxlOiBjb250ZW50VW5pdC5zb3VyY2UuZmlsZSxcbiAgICAgIGFuY2hvckxpbms6IGNvbnRlbnRVbml0LnNvdXJjZS5hbmNob3JMaW5rLFxuICAgICAgZnJvbnQ6IHF1ZXN0aW9uLFxuICAgICAgYmFjazogYW5zd2VyLFxuICAgICAgZGVjazogZGVjayB8fCB0aGlzLmluZmVyRGVjayhjb250ZW50VW5pdC5zb3VyY2UuZmlsZSksXG4gICAgICB0YWdzOiBjb250ZW50VW5pdC5tZXRhZGF0YS50YWdzLFxuICAgICAgc2NoZWR1bGluZzogdGhpcy5pbml0aWFsaXplU2NoZWR1bGluZygpLFxuICAgICAgc3RhdHM6IHtcbiAgICAgICAgdG90YWxSZXZpZXdzOiAwLFxuICAgICAgICBjb3JyZWN0Q291bnQ6IDAsXG4gICAgICAgIGF2ZXJhZ2VUaW1lOiAwLFxuICAgICAgICBkaWZmaWN1bHR5OiAwLjVcbiAgICAgIH0sXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXG4gICAgICAgIHVwZGF0ZWRBdDogRGF0ZS5ub3coKVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmZsYXNoY2FyZHMuc2V0KGNhcmQuaWQsIGNhcmQpO1xuICAgIFxuICAgIC8vIFx1NjZGNFx1NjVCMCBDb250ZW50VW5pdCBcdTUxNzNcdTgwNTRcbiAgICBjb250ZW50VW5pdC5mbGFzaGNhcmRJZHMucHVzaChjYXJkLmlkKTtcbiAgICBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLnNhdmVDb250ZW50VW5pdHMoW2NvbnRlbnRVbml0XSk7XG4gICAgXG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0Rmxhc2hjYXJkcygpO1xuICAgIHJldHVybiBjYXJkO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1NTIxQlx1NUVGQVx1NUI4Q1x1NUY2Mlx1NTg2Qlx1N0E3QVx1NTM2MVx1RkYwOFx1NTUyRlx1NEUwMFx1NzI0OFx1NjcyQ1x1RkYwQ1x1NTQwOFx1NUU3Nlx1NEU4Nlx1NjI0MFx1NjcwOVx1NTI5Rlx1ODBGRFx1RkYwOVxuICAgKi9cbiAgYXN5bmMgY3JlYXRlQ2xvemVDYXJkKFxuICAgIGNvbnRlbnRVbml0SWQ6IHN0cmluZyxcbiAgICBvcmlnaW5hbDogc3RyaW5nLFxuICAgIGRlbGV0aW9uczogeyBpbmRleDogbnVtYmVyOyBhbnN3ZXI6IHN0cmluZzsgYWx0ZXJuYXRpdmVzPzogc3RyaW5nW10gfVtdXG4gICk6IFByb21pc2U8Rmxhc2hjYXJkPiB7XG4gICAgY29uc3QgY29udGVudFVuaXQgPSB0aGlzLmRhdGFNYW5hZ2VyLmdldENvbnRlbnRVbml0KGNvbnRlbnRVbml0SWQpO1xuICAgIGlmICghY29udGVudFVuaXQpIHRocm93IG5ldyBFcnJvcignQ29udGVudCB1bml0IG5vdCBmb3VuZCcpO1xuXG4gICAgY29uc3QgZnJvbnQgPSB0aGlzLmdlbmVyYXRlQ2xvemVUZXh0KG9yaWdpbmFsLCBkZWxldGlvbnMpO1xuICAgIGNvbnN0IGJhY2sgPSBkZWxldGlvbnMubWFwKGQgPT4gZC5hbnN3ZXIpO1xuXG4gICAgY29uc3QgY2FyZDogRmxhc2hjYXJkID0ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVJZCgpLFxuICAgICAgdHlwZTogJ2Nsb3plJyxcbiAgICAgIHNvdXJjZUNvbnRlbnRJZDogY29udGVudFVuaXRJZCxcbiAgICAgIHNvdXJjZUZpbGU6IGNvbnRlbnRVbml0LnNvdXJjZS5maWxlLFxuICAgICAgYW5jaG9yTGluazogY29udGVudFVuaXQuc291cmNlLmFuY2hvckxpbmssXG4gICAgICBmcm9udCxcbiAgICAgIGJhY2ssXG4gICAgICBjbG96ZToge1xuICAgICAgICBvcmlnaW5hbCxcbiAgICAgICAgZGVsZXRpb25zXG4gICAgICB9LFxuICAgICAgZGVjazogdGhpcy5pbmZlckRlY2soY29udGVudFVuaXQuc291cmNlLmZpbGUpLFxuICAgICAgdGFnczogY29udGVudFVuaXQubWV0YWRhdGEudGFncyxcbiAgICAgIHNjaGVkdWxpbmc6IHRoaXMuaW5pdGlhbGl6ZVNjaGVkdWxpbmcoKSxcbiAgICAgIHN0YXRzOiB7XG4gICAgICAgIHRvdGFsUmV2aWV3czogMCxcbiAgICAgICAgY29ycmVjdENvdW50OiAwLFxuICAgICAgICBhdmVyYWdlVGltZTogMCxcbiAgICAgICAgZGlmZmljdWx0eTogMC41XG4gICAgICB9LFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgY3JlYXRlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICB1cGRhdGVkQXQ6IERhdGUubm93KClcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5mbGFzaGNhcmRzLnNldChjYXJkLmlkLCBjYXJkKTtcbiAgICBcbiAgICBjb250ZW50VW5pdC5mbGFzaGNhcmRJZHMucHVzaChjYXJkLmlkKTtcbiAgICBhd2FpdCB0aGlzLmRhdGFNYW5hZ2VyLnNhdmVDb250ZW50VW5pdHMoW2NvbnRlbnRVbml0XSk7XG4gICAgXG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0Rmxhc2hjYXJkcygpO1xuICAgIHJldHVybiBjYXJkO1xuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0gXHU2N0U1XHU4QkUyXHU2NUI5XHU2Q0Q1ID09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1OTVFQVx1NTM2MVxuICAgKi9cbiAgZ2V0Rmxhc2hjYXJkKGlkOiBzdHJpbmcpOiBGbGFzaGNhcmQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmZsYXNoY2FyZHMuZ2V0KGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTYyNDBcdTY3MDlcdTk1RUFcdTUzNjFcbiAgICovXG4gIGdldEFsbEZsYXNoY2FyZHMoKTogRmxhc2hjYXJkW10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZmxhc2hjYXJkcy52YWx1ZXMoKSk7XG4gIH1cblxuICAvKipcbiAgICogXHU4M0I3XHU1M0Q2XHU0RUNBXHU2NUU1XHU1Rjg1XHU1OTBEXHU0RTYwXHU3Njg0XHU1MzYxXHU3MjQ3XG4gICAqL1xuICBnZXREdWVDYXJkcygpOiBGbGFzaGNhcmRbXSB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmZsYXNoY2FyZHMudmFsdWVzKCkpXG4gICAgICAuZmlsdGVyKGNhcmQgPT4gY2FyZC5zY2hlZHVsaW5nLmR1ZSA8PSBub3cpXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBjb25zdCBhUHJpb3JpdHkgPSB0aGlzLmdldENhcmRQcmlvcml0eShhKTtcbiAgICAgICAgY29uc3QgYlByaW9yaXR5ID0gdGhpcy5nZXRDYXJkUHJpb3JpdHkoYik7XG4gICAgICAgIHJldHVybiBiUHJpb3JpdHkgLSBhUHJpb3JpdHk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTY1QjBcdTUzNjFcdTcyNDdcbiAgICovXG4gIGdldE5ld0NhcmRzKCk6IEZsYXNoY2FyZFtdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmZsYXNoY2FyZHMudmFsdWVzKCkpXG4gICAgICAuZmlsdGVyKGNhcmQgPT4gY2FyZC5zY2hlZHVsaW5nLnN0YXRlID09PSAnbmV3Jyk7XG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTY2RjRcdTY1QjBcdTU0OENcdTUyMjBcdTk2NjQgPT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogXHU2NkY0XHU2NUIwXHU1MzYxXHU3MjQ3XHVGRjA4XHU1OTBEXHU0RTYwXHU1NDBFXHVGRjA5XG4gICAqL1xuICBhc3luYyB1cGRhdGVDYXJkKGNhcmQ6IEZsYXNoY2FyZCkge1xuICAgIHRoaXMuZmxhc2hjYXJkcy5zZXQoY2FyZC5pZCwgY2FyZCk7XG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0Rmxhc2hjYXJkcygpO1xuICB9XG5cbi8qKlxuICogXHU1MjIwXHU5NjY0XHU1MzYxXHU3MjQ3XG4gKi9cbmFzeW5jIGRlbGV0ZUNhcmQoaWQ6IHN0cmluZykge1xuICBjb25zdCBjYXJkID0gdGhpcy5mbGFzaGNhcmRzLmdldChpZCk7XG4gIGlmICghY2FyZCkgcmV0dXJuO1xuXG4gIC8vIFx1RDgzRFx1REQyNyBcdTg5RTNcdTk2NjQgQ29udGVudFVuaXQgXHU1MTczXHU4MDU0XG4gIGNvbnN0IGNvbnRlbnRVbml0ID0gdGhpcy5kYXRhTWFuYWdlci5nZXRDb250ZW50VW5pdChjYXJkLnNvdXJjZUNvbnRlbnRJZCk7XG4gIGlmIChjb250ZW50VW5pdCkge1xuICAgIGNvbnN0IGluZGV4ID0gY29udGVudFVuaXQuZmxhc2hjYXJkSWRzLmluZGV4T2YoaWQpO1xuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICBjb250ZW50VW5pdC5mbGFzaGNhcmRJZHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIGF3YWl0IHRoaXMuZGF0YU1hbmFnZXIuc2F2ZUNvbnRlbnRVbml0cyhbY29udGVudFVuaXRdKTtcbiAgICB9XG4gIH1cblxuICAvLyBcdTUyMjBcdTk2NjRcdTk1RUFcdTUzNjFcbiAgdGhpcy5mbGFzaGNhcmRzLmRlbGV0ZShpZCk7XG4gIGF3YWl0IHRoaXMucGVyc2lzdEZsYXNoY2FyZHMoKTtcbn1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSBcdTU5MERcdTRFNjBcdTY1RTVcdTVGRDcgPT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogXHU4QkIwXHU1RjU1XHU1OTBEXHU0RTYwXHU2NUU1XHU1RkQ3XG4gICAqL1xuICBhc3luYyBsb2dSZXZpZXcobG9nOiBSZXZpZXdMb2cpIHtcbiAgICB0aGlzLnJldmlld0xvZ3MucHVzaChsb2cpO1xuICAgIFxuICAgIGlmICh0aGlzLnJldmlld0xvZ3MubGVuZ3RoID4gMTAwMCkge1xuICAgICAgdGhpcy5yZXZpZXdMb2dzID0gdGhpcy5yZXZpZXdMb2dzLnNsaWNlKC0xMDAwKTtcbiAgICB9XG4gICAgXG4gICAgYXdhaXQgdGhpcy5wZXJzaXN0UmV2aWV3TG9ncygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NTM2MVx1NzI0N1x1NzY4NFx1NTkwRFx1NEU2MFx1NTM4Nlx1NTNGMlxuICAgKi9cbiAgZ2V0Q2FyZFJldmlld0hpc3RvcnkoY2FyZElkOiBzdHJpbmcpOiBSZXZpZXdMb2dbXSB7XG4gICAgcmV0dXJuIHRoaXMucmV2aWV3TG9ncy5maWx0ZXIobG9nID0+IGxvZy5mbGFzaGNhcmRJZCA9PT0gY2FyZElkKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFx1N0VERlx1OEJBMSA9PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBcdTgzQjdcdTUzRDZcdTdFREZcdThCQTFcdTY1NzBcdTYzNkVcbiAgICovXG4gIGdldFN0YXRzKCkge1xuICAgIGNvbnN0IGFsbCA9IHRoaXMuZ2V0QWxsRmxhc2hjYXJkcygpO1xuICAgIGNvbnN0IGR1ZSA9IHRoaXMuZ2V0RHVlQ2FyZHMoKTtcbiAgICBjb25zdCBuZXdDYXJkcyA9IHRoaXMuZ2V0TmV3Q2FyZHMoKTtcbiAgICBcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgY29uc3QgcmV2aWV3ZWRUb2RheSA9IHRoaXMucmV2aWV3TG9ncy5maWx0ZXIoXG4gICAgICBsb2cgPT4gbG9nLnRpbWVzdGFtcCA+PSB0b2RheVxuICAgICkubGVuZ3RoO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsOiBhbGwubGVuZ3RoLFxuICAgICAgbmV3OiBuZXdDYXJkcy5sZW5ndGgsXG4gICAgICBkdWU6IGR1ZS5sZW5ndGgsXG4gICAgICByZXZpZXdlZFRvZGF5LFxuICAgICAgdG90YWxSZXZpZXdzOiB0aGlzLnJldmlld0xvZ3MubGVuZ3RoXG4gICAgfTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFx1NzlDMVx1NjcwOVx1NURFNVx1NTE3N1x1NjVCOVx1NkNENSA9PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiBcdTUyQTBcdThGN0RcdTk1RUFcdTUzNjFcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbG9hZEZsYXNoY2FyZHMoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L2ZsYXNoY2FyZHMuanNvbmA7XG4gICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5hcHAudmF1bHQuYWRhcHRlcjtcblxuICAgICAgaWYgKGF3YWl0IGFkYXB0ZXIuZXhpc3RzKHBhdGgpKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhZGFwdGVyLnJlYWQocGF0aCk7XG4gICAgICAgIGNvbnN0IGZsYXNoY2FyZHM6IEZsYXNoY2FyZFtdID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgY2FyZCBvZiBmbGFzaGNhcmRzKSB7XG4gICAgICAgICAgdGhpcy5mbGFzaGNhcmRzLnNldChjYXJkLmlkLCBjYXJkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGZsYXNoY2FyZHM6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTUyQTBcdThGN0RcdTU5MERcdTRFNjBcdTY1RTVcdTVGRDdcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgbG9hZFJldmlld0xvZ3MoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhdGggPSBgJHt0aGlzLmRhdGFGb2xkZXJ9L3Jldmlldy1sb2dzLmpzb25gO1xuICAgICAgY29uc3QgYWRhcHRlciA9IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXI7XG5cbiAgICAgIGlmIChhd2FpdCBhZGFwdGVyLmV4aXN0cyhwYXRoKSkge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgYWRhcHRlci5yZWFkKHBhdGgpO1xuICAgICAgICB0aGlzLnJldmlld0xvZ3MgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIHJldmlldyBsb2dzOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXHU1MjFEXHU1OUNCXHU1MzE2XHU4QzAzXHU1RUE2XHU1M0MyXHU2NTcwXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVTY2hlZHVsaW5nKCk6IEZsYXNoY2FyZFsnc2NoZWR1bGluZyddIHtcbiAgICByZXR1cm4ge1xuICAgICAgaW50ZXJ2YWw6IDAsXG4gICAgICBlYXNlOiAyLjUsXG4gICAgICBkdWU6IERhdGUubm93KCksXG4gICAgICBsYXBzZXM6IDAsXG4gICAgICByZXBzOiAwLFxuICAgICAgc3RhdGU6ICduZXcnXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTc1MUZcdTYyMTBcdTVCOENcdTVGNjJcdTU4NkJcdTdBN0FcdTY1ODdcdTY3MkNcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVDbG96ZVRleHQoXG4gICAgb3JpZ2luYWw6IHN0cmluZyxcbiAgICBkZWxldGlvbnM6IHsgaW5kZXg6IG51bWJlcjsgYW5zd2VyOiBzdHJpbmcgfVtdXG4gICk6IHN0cmluZyB7XG4gICAgbGV0IHJlc3VsdCA9IG9yaWdpbmFsO1xuICAgIGNvbnN0IHNvcnRlZCA9IFsuLi5kZWxldGlvbnNdLnNvcnQoKGEsIGIpID0+IGIuaW5kZXggLSBhLmluZGV4KTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IGRlbGV0aW9uIG9mIHNvcnRlZCkge1xuICAgICAgY29uc3QgYmVmb3JlID0gcmVzdWx0LnN1YnN0cmluZygwLCBkZWxldGlvbi5pbmRleCk7XG4gICAgICBjb25zdCBhZnRlciA9IHJlc3VsdC5zdWJzdHJpbmcoZGVsZXRpb24uaW5kZXggKyBkZWxldGlvbi5hbnN3ZXIubGVuZ3RoKTtcbiAgICAgIHJlc3VsdCA9IGAke2JlZm9yZX1bLi4uXSR7YWZ0ZXJ9YDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBcdTYzQThcdTY1QURcdTUzNjFcdTdFQzRcdTU0MERcdTc5RjBcbiAgICovXG4gIHByaXZhdGUgaW5mZXJEZWNrKGZpbGVQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHBhcnRzID0gZmlsZVBhdGguc3BsaXQoJy8nKTtcbiAgICByZXR1cm4gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDJdIDogJ0RlZmF1bHQnO1xuICB9XG5cbiAgLyoqXG4gICAqIFx1ODNCN1x1NTNENlx1NTM2MVx1NzI0N1x1NEYxOFx1NTE0OFx1N0VBN1xuICAgKi9cbiAgcHJpdmF0ZSBnZXRDYXJkUHJpb3JpdHkoY2FyZDogRmxhc2hjYXJkKTogbnVtYmVyIHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IG92ZXJkdWUgPSBNYXRoLm1heCgwLCBub3cgLSBjYXJkLnNjaGVkdWxpbmcuZHVlKTtcbiAgICBjb25zdCBkYXlzT3ZlcmR1ZSA9IG92ZXJkdWUgLyAoMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gICAgXG4gICAgaWYgKGNhcmQuc2NoZWR1bGluZy5zdGF0ZSA9PT0gJ25ldycpIHJldHVybiAxMDAgKyBkYXlzT3ZlcmR1ZTtcbiAgICBpZiAoY2FyZC5zY2hlZHVsaW5nLnN0YXRlID09PSAncmVsZWFybmluZycpIHJldHVybiAyMDAgKyBkYXlzT3ZlcmR1ZTtcbiAgICByZXR1cm4gZGF5c092ZXJkdWU7XG4gIH1cblxuICAvKipcbiAgICogXHU2MzAxXHU0RTQ1XHU1MzE2XHU5NUVBXHU1MzYxXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHBlcnNpc3RGbGFzaGNhcmRzKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXRoID0gYCR7dGhpcy5kYXRhRm9sZGVyfS9mbGFzaGNhcmRzLmpzb25gO1xuICAgICAgY29uc3QgZmxhc2hjYXJkcyA9IEFycmF5LmZyb20odGhpcy5mbGFzaGNhcmRzLnZhbHVlcygpKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnN0cmluZ2lmeShmbGFzaGNhcmRzLCBudWxsLCAyKTtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUocGF0aCwgZGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBlcnNpc3RpbmcgZmxhc2hjYXJkczonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFx1NjMwMVx1NEU0NVx1NTMxNlx1NTkwRFx1NEU2MFx1NjVFNVx1NUZEN1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwZXJzaXN0UmV2aWV3TG9ncygpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGF0aCA9IGAke3RoaXMuZGF0YUZvbGRlcn0vcmV2aWV3LWxvZ3MuanNvbmA7XG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5zdHJpbmdpZnkodGhpcy5yZXZpZXdMb2dzLCBudWxsLCAyKTtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUocGF0aCwgZGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBlcnNpc3RpbmcgcmV2aWV3IGxvZ3M6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcdTc1MUZcdTYyMTBcdTU1MkZcdTRFMDAgSURcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgY2FyZC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gIH1cbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFDQUEsa0JBUWE7QUFUYjtBQUFBO0FBQ0EsSUFBQUEsbUJBQXVCO0FBUWhCLElBQU0sd0JBQU4sTUFBNEI7QUFBQSxNQUNqQyxZQUFvQixRQUE4QjtBQUE5QjtBQUFBLE1BQStCO0FBQUE7QUFB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O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFB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O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFB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QUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtB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O0FBRWpDLFVBQUksd0JBQU8sNkJBQXNCO0FBQUEsSUFDbkMsU0FBUyxPQUFQO0FBQ0EsY0FBUSxNQUFNLDRCQUE0QixLQUFLO0FBQy9DLFVBQUksd0JBQU8sa0NBQTZCO0FBQUEsSUFDMUM7QUFBQSxFQUNGO0FBQUEsRUFDUSxZQUFZO0FBQ2xCLFVBQU0sVUFBVSxTQUFTLGNBQWMsT0FBTztBQUM5QyxZQUFRLGNBQWM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7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R0QsVUFBTSxhQUFhLEtBQUssSUFBSSxVQUFVLGdCQUFnQix1QkFBdUI7QUFDN0UsZUFBVyxRQUFRLFVBQVE7QUFDekIsWUFBTSxPQUFPLEtBQUs7QUFDbEIsVUFBSSxRQUFRLE9BQU8sS0FBSyxZQUFZLFlBQVk7QUFDOUMsYUFBSyxRQUFRO0FBQUEsTUFDZjtBQUFBLElBQ0YsQ0FBQztBQUFBLEVBQ0g7QUFBQSxFQUVRLGlCQUFpQjtBQUN2QixVQUFNLGdCQUFnQixLQUFLLGlCQUFpQjtBQUM1QyxrQkFBYyxTQUFTLHdCQUF3QjtBQUUvQyxVQUFNLGVBQWUsTUFBTTtBQUN6QixZQUFNLFFBQVEsS0FBSyxpQkFBaUIsU0FBUztBQUM3QyxvQkFBYyxRQUFRLGFBQU0sTUFBTSxTQUFTO0FBQzNDLG9CQUFjLFFBQVEsR0FBRyxNQUFNO0FBQUEsRUFBNkIsTUFBTTtBQUFBLElBQ3BFO0FBR0EsaUJBQWE7QUFHYixTQUFLO0FBQUEsTUFDSCxPQUFPLFlBQVksY0FBYyxHQUFLO0FBQUEsSUFDeEM7QUFHQSxrQkFBYyxpQkFBaUIsU0FBUyxNQUFNO0FBQzVDLFdBQUssZUFBZTtBQUFBLElBQ3RCLENBQUM7QUFBQSxFQUNIO0FBQ0Y7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIkZsYXNoY2FyZENyZWF0ZU1vZGFsIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImNhcmRzIiwgIlF1aWNrRmxhc2hjYXJkQ3JlYXRvciIsICJ1bml0IiwgInR5cGUiLCAiY2FyZCIsICJCYXRjaENyZWF0ZU1vZGFsIiwgImltcG9ydF9vYnNpZGlhbiIsICJzaW1pbGFyaXR5IiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgInJlc3VsdCIsICJjdXJyZW50TGluZSIsICJleHRyYWN0ZWRUYWJsZSIsICJ1bml0IiwgIkZpbGVBbm5vdGF0aW9uTW9kYWwiXQp9Cg==
